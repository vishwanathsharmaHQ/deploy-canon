var AC=Object.defineProperty;var Y8=n=>{throw TypeError(n)};var EC=(n,e,t)=>e in n?AC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var $=(n,e,t)=>EC(n,typeof e!="symbol"?e+"":e,t),I5=(n,e,t)=>e.has(n)||Y8("Cannot "+t);var E=(n,e,t)=>(I5(n,e,"read from private field"),t?t.call(n):e.get(n)),J=(n,e,t)=>e.has(n)?Y8("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),T=(n,e,t,r)=>(I5(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),le=(n,e,t)=>(I5(n,e,"access private method"),t);var kc=(n,e,t,r)=>({set _(i){T(n,e,i,t)},get _(){return E(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Tx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var P5={exports:{}},Ac={},R5={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X8;function SC(){if(X8)return Xe;X8=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(R){return R===null||typeof R!="object"?null:(R=p&&R[p]||R["@@iterator"],typeof R=="function"?R:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,v={};function k(R,Q,ve){this.props=R,this.context=Q,this.refs=v,this.updater=ve||y}k.prototype.isReactComponent={},k.prototype.setState=function(R,Q){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,Q,"setState")},k.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function A(){}A.prototype=k.prototype;function C(R,Q,ve){this.props=R,this.context=Q,this.refs=v,this.updater=ve||y}var O=C.prototype=new A;O.constructor=C,w(O,k.prototype),O.isPureReactComponent=!0;var N=Array.isArray,P=Object.prototype.hasOwnProperty,B={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function G(R,Q,ve){var me,Ie={},Be=null,Fe=null;if(Q!=null)for(me in Q.ref!==void 0&&(Fe=Q.ref),Q.key!==void 0&&(Be=""+Q.key),Q)P.call(Q,me)&&!L.hasOwnProperty(me)&&(Ie[me]=Q[me]);var Re=arguments.length-2;if(Re===1)Ie.children=ve;else if(1<Re){for(var Qe=Array(Re),ct=0;ct<Re;ct++)Qe[ct]=arguments[ct+2];Ie.children=Qe}if(R&&R.defaultProps)for(me in Re=R.defaultProps,Re)Ie[me]===void 0&&(Ie[me]=Re[me]);return{$$typeof:n,type:R,key:Be,ref:Fe,props:Ie,_owner:B.current}}function ne(R,Q){return{$$typeof:n,type:R.type,key:Q,ref:R.ref,props:R.props,_owner:R._owner}}function ie(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function pe(R){var Q={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ve){return Q[ve]})}var Oe=/\/+/g;function Ae(R,Q){return typeof R=="object"&&R!==null&&R.key!=null?pe(""+R.key):Q.toString(36)}function U(R,Q,ve,me,Ie){var Be=typeof R;(Be==="undefined"||Be==="boolean")&&(R=null);var Fe=!1;if(R===null)Fe=!0;else switch(Be){case"string":case"number":Fe=!0;break;case"object":switch(R.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=R,Ie=Ie(Fe),R=me===""?"."+Ae(Fe,0):me,N(Ie)?(ve="",R!=null&&(ve=R.replace(Oe,"$&/")+"/"),U(Ie,Q,ve,"",function(ct){return ct})):Ie!=null&&(ie(Ie)&&(Ie=ne(Ie,ve+(!Ie.key||Fe&&Fe.key===Ie.key?"":(""+Ie.key).replace(Oe,"$&/")+"/")+R)),Q.push(Ie)),1;if(Fe=0,me=me===""?".":me+":",N(R))for(var Re=0;Re<R.length;Re++){Be=R[Re];var Qe=me+Ae(Be,Re);Fe+=U(Be,Q,ve,Qe,Ie)}else if(Qe=g(R),typeof Qe=="function")for(R=Qe.call(R),Re=0;!(Be=R.next()).done;)Be=Be.value,Qe=me+Ae(Be,Re++),Fe+=U(Be,Q,ve,Qe,Ie);else if(Be==="object")throw Q=String(R),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Fe}function H(R,Q,ve){if(R==null)return R;var me=[],Ie=0;return U(R,me,"","",function(Be){return Q.call(ve,Be,Ie++)}),me}function z(R){if(R._status===-1){var Q=R._result;Q=Q(),Q.then(function(ve){(R._status===0||R._status===-1)&&(R._status=1,R._result=ve)},function(ve){(R._status===0||R._status===-1)&&(R._status=2,R._result=ve)}),R._status===-1&&(R._status=0,R._result=Q)}if(R._status===1)return R._result.default;throw R._result}var Y={current:null},V={transition:null},X={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:V,ReactCurrentOwner:B};function q(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:H,forEach:function(R,Q,ve){H(R,function(){Q.apply(this,arguments)},ve)},count:function(R){var Q=0;return H(R,function(){Q++}),Q},toArray:function(R){return H(R,function(Q){return Q})||[]},only:function(R){if(!ie(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Xe.Component=k,Xe.Fragment=t,Xe.Profiler=i,Xe.PureComponent=C,Xe.StrictMode=r,Xe.Suspense=c,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Xe.act=q,Xe.cloneElement=function(R,Q,ve){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var me=w({},R.props),Ie=R.key,Be=R.ref,Fe=R._owner;if(Q!=null){if(Q.ref!==void 0&&(Be=Q.ref,Fe=B.current),Q.key!==void 0&&(Ie=""+Q.key),R.type&&R.type.defaultProps)var Re=R.type.defaultProps;for(Qe in Q)P.call(Q,Qe)&&!L.hasOwnProperty(Qe)&&(me[Qe]=Q[Qe]===void 0&&Re!==void 0?Re[Qe]:Q[Qe])}var Qe=arguments.length-2;if(Qe===1)me.children=ve;else if(1<Qe){Re=Array(Qe);for(var ct=0;ct<Qe;ct++)Re[ct]=arguments[ct+2];me.children=Re}return{$$typeof:n,type:R.type,key:Ie,ref:Be,props:me,_owner:Fe}},Xe.createContext=function(R){return R={$$typeof:o,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:s,_context:R},R.Consumer=R},Xe.createElement=G,Xe.createFactory=function(R){var Q=G.bind(null,R);return Q.type=R,Q},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(R){return{$$typeof:l,render:R}},Xe.isValidElement=ie,Xe.lazy=function(R){return{$$typeof:h,_payload:{_status:-1,_result:R},_init:z}},Xe.memo=function(R,Q){return{$$typeof:u,type:R,compare:Q===void 0?null:Q}},Xe.startTransition=function(R){var Q=V.transition;V.transition={};try{R()}finally{V.transition=Q}},Xe.unstable_act=q,Xe.useCallback=function(R,Q){return Y.current.useCallback(R,Q)},Xe.useContext=function(R){return Y.current.useContext(R)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(R){return Y.current.useDeferredValue(R)},Xe.useEffect=function(R,Q){return Y.current.useEffect(R,Q)},Xe.useId=function(){return Y.current.useId()},Xe.useImperativeHandle=function(R,Q,ve){return Y.current.useImperativeHandle(R,Q,ve)},Xe.useInsertionEffect=function(R,Q){return Y.current.useInsertionEffect(R,Q)},Xe.useLayoutEffect=function(R,Q){return Y.current.useLayoutEffect(R,Q)},Xe.useMemo=function(R,Q){return Y.current.useMemo(R,Q)},Xe.useReducer=function(R,Q,ve){return Y.current.useReducer(R,Q,ve)},Xe.useRef=function(R){return Y.current.useRef(R)},Xe.useState=function(R){return Y.current.useState(R)},Xe.useSyncExternalStore=function(R,Q,ve){return Y.current.useSyncExternalStore(R,Q,ve)},Xe.useTransition=function(){return Y.current.useTransition()},Xe.version="18.3.1",Xe}var Z8;function Vu(){return Z8||(Z8=1,R5.exports=SC()),R5.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function CC(){if(ew)return Ac;ew=1;var n=Vu(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var h,p={},g=null,y=null;u!==void 0&&(g=""+u),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!s.hasOwnProperty(h)&&(p[h]=c[h]);if(l&&l.defaultProps)for(h in c=l.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:l,key:g,ref:y,props:p,_owner:i.current}}return Ac.Fragment=t,Ac.jsx=o,Ac.jsxs=o,Ac}var tw;function NC(){return tw||(tw=1,P5.exports=CC()),P5.exports}var I=NC(),he=Vu();const kl=Tx(he);var fh={},D5={exports:{}},Zn={},L5={exports:{}},B5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function TC(){return nw||(nw=1,function(n){function e(V,X){var q=V.length;V.push(X);e:for(;0<q;){var R=q-1>>>1,Q=V[R];if(0<i(Q,X))V[R]=X,V[q]=Q,q=R;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var X=V[0],q=V.pop();if(q!==X){V[0]=q;e:for(var R=0,Q=V.length,ve=Q>>>1;R<ve;){var me=2*(R+1)-1,Ie=V[me],Be=me+1,Fe=V[Be];if(0>i(Ie,q))Be<Q&&0>i(Fe,Ie)?(V[R]=Fe,V[Be]=q,R=Be):(V[R]=Ie,V[me]=q,R=me);else if(Be<Q&&0>i(Fe,q))V[R]=Fe,V[Be]=q,R=Be;else break e}}return X}function i(V,X){var q=V.sortIndex-X.sortIndex;return q!==0?q:V.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,p=null,g=3,y=!1,w=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(V){for(var X=t(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=V)r(u),X.sortIndex=X.expirationTime,e(c,X);else break;X=t(u)}}function N(V){if(v=!1,O(V),!w)if(t(c)!==null)w=!0,z(P);else{var X=t(u);X!==null&&Y(N,X.startTime-V)}}function P(V,X){w=!1,v&&(v=!1,A(G),G=-1),y=!0;var q=g;try{for(O(X),p=t(c);p!==null&&(!(p.expirationTime>X)||V&&!pe());){var R=p.callback;if(typeof R=="function"){p.callback=null,g=p.priorityLevel;var Q=R(p.expirationTime<=X);X=n.unstable_now(),typeof Q=="function"?p.callback=Q:p===t(c)&&r(c),O(X)}else r(c);p=t(c)}if(p!==null)var ve=!0;else{var me=t(u);me!==null&&Y(N,me.startTime-X),ve=!1}return ve}finally{p=null,g=q,y=!1}}var B=!1,L=null,G=-1,ne=5,ie=-1;function pe(){return!(n.unstable_now()-ie<ne)}function Oe(){if(L!==null){var V=n.unstable_now();ie=V;var X=!0;try{X=L(!0,V)}finally{X?Ae():(B=!1,L=null)}}else B=!1}var Ae;if(typeof C=="function")Ae=function(){C(Oe)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,H=U.port2;U.port1.onmessage=Oe,Ae=function(){H.postMessage(null)}}else Ae=function(){k(Oe,0)};function z(V){L=V,B||(B=!0,Ae())}function Y(V,X){G=k(function(){V(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,z(P))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(V){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var q=g;g=X;try{return V()}finally{g=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=g;g=V;try{return X()}finally{g=q}},n.unstable_scheduleCallback=function(V,X,q){var R=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?R+q:R):q=R,V){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,V={id:h++,callback:X,priorityLevel:V,startTime:q,expirationTime:Q,sortIndex:-1},q>R?(V.sortIndex=q,e(u,V),t(c)===null&&V===t(u)&&(v?(A(G),G=-1):v=!0,Y(N,q-R))):(V.sortIndex=Q,e(c,V),w||y||(w=!0,z(P))),V},n.unstable_shouldYield=pe,n.unstable_wrapCallback=function(V){var X=g;return function(){var q=g;g=X;try{return V.apply(this,arguments)}finally{g=q}}}}(B5)),B5}var rw;function MC(){return rw||(rw=1,L5.exports=TC()),L5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function OC(){if(iw)return Zn;iw=1;var n=Vu(),e=MC();function t(a){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,f){o(a,f),o(a+"Capture",f)}function o(a,f){for(i[a]=f,a=0;a<f.length;a++)r.add(f[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(a){return c.call(p,a)?!0:c.call(h,a)?!1:u.test(a)?p[a]=!0:(h[a]=!0,!1)}function y(a,f,d,m){if(d!==null&&d.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function w(a,f,d,m){if(f===null||typeof f>"u"||y(a,f,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function v(a,f,d,m,b,x,S){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=a,this.type=f,this.sanitizeURL=x,this.removeEmptyString=S}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){k[a]=new v(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var f=a[0];k[f]=new v(f,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){k[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){k[a]=new v(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){k[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){k[a]=new v(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){k[a]=new v(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){k[a]=new v(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){k[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var f=a.replace(A,C);k[f]=new v(f,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var f=a.replace(A,C);k[f]=new v(f,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var f=a.replace(A,C);k[f]=new v(f,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){k[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)}),k.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){k[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});function O(a,f,d,m){var b=k.hasOwnProperty(f)?k[f]:null;(b!==null?b.type!==0:m||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(w(f,d,b,m)&&(d=null),m||b===null?g(f)&&(d===null?a.removeAttribute(f):a.setAttribute(f,""+d)):b.mustUseProperty?a[b.propertyName]=d===null?b.type===3?!1:"":d:(f=b.attributeName,m=b.attributeNamespace,d===null?a.removeAttribute(f):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,m?a.setAttributeNS(m,f,d):a.setAttribute(f,d))))}var N=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),B=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),pe=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),V=Symbol.iterator;function X(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var q=Object.assign,R;function Q(a){if(R===void 0)try{throw Error()}catch(d){var f=d.stack.trim().match(/\n( *(at )?)/);R=f&&f[1]||""}return`
`+R+a}var ve=!1;function me(a,f){if(!a||ve)return"";ve=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(K){var m=K}Reflect.construct(a,[],f)}else{try{f.call()}catch(K){m=K}a.call(f.prototype)}else{try{throw Error()}catch(K){m=K}a()}}catch(K){if(K&&m&&typeof K.stack=="string"){for(var b=K.stack.split(`
`),x=m.stack.split(`
`),S=b.length-1,M=x.length-1;1<=S&&0<=M&&b[S]!==x[M];)M--;for(;1<=S&&0<=M;S--,M--)if(b[S]!==x[M]){if(S!==1||M!==1)do if(S--,M--,0>M||b[S]!==x[M]){var D=`
`+b[S].replace(" at new "," at ");return a.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",a.displayName)),D}while(1<=S&&0<=M);break}}}finally{ve=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?Q(a):""}function Ie(a){switch(a.tag){case 5:return Q(a.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return a=me(a.type,!1),a;case 11:return a=me(a.type.render,!1),a;case 1:return a=me(a.type,!0),a;default:return""}}function Be(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case L:return"Fragment";case B:return"Portal";case ne:return"Profiler";case G:return"StrictMode";case Ae:return"Suspense";case U:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case pe:return(a.displayName||"Context")+".Consumer";case ie:return(a._context.displayName||"Context")+".Provider";case Oe:var f=a.render;return a=a.displayName,a||(a=f.displayName||f.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case H:return f=a.displayName||null,f!==null?f:Be(a.type)||"Memo";case z:f=a._payload,a=a._init;try{return Be(a(f))}catch{}}return null}function Fe(a){var f=a.type;switch(a.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=f.render,a=a.displayName||a.name||"",f.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(f);case 8:return f===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function Re(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Qe(a){var f=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function ct(a){var f=Qe(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,f),m=""+a[f];if(!a.hasOwnProperty(f)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,x=d.set;return Object.defineProperty(a,f,{configurable:!0,get:function(){return b.call(this)},set:function(S){m=""+S,x.call(this,S)}}),Object.defineProperty(a,f,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(S){m=""+S},stopTracking:function(){a._valueTracker=null,delete a[f]}}}}function Zt(a){a._valueTracker||(a._valueTracker=ct(a))}function fr(a){if(!a)return!1;var f=a._valueTracker;if(!f)return!0;var d=f.getValue(),m="";return a&&(m=Qe(a)?a.checked?"true":"false":a.value),a=m,a!==d?(f.setValue(a),!0):!1}function kt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Mt(a,f){var d=f.checked;return q({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function es(a,f){var d=f.defaultValue==null?"":f.defaultValue,m=f.checked!=null?f.checked:f.defaultChecked;d=Re(f.value!=null?f.value:d),a._wrapperState={initialChecked:m,initialValue:d,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function un(a,f){f=f.checked,f!=null&&O(a,"checked",f,!1)}function Ar(a,f){un(a,f);var d=Re(f.value),m=f.type;if(d!=null)m==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(m==="submit"||m==="reset"){a.removeAttribute("value");return}f.hasOwnProperty("value")?ha(a,f.type,d):f.hasOwnProperty("defaultValue")&&ha(a,f.type,Re(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(a.defaultChecked=!!f.defaultChecked)}function zl(a,f,d){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var m=f.type;if(!(m!=="submit"&&m!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+a._wrapperState.initialValue,d||f===a.value||(a.value=f),a.defaultValue=f}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function ha(a,f,d){(f!=="number"||kt(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var xi=Array.isArray;function ki(a,f,d,m){if(a=a.options,f){f={};for(var b=0;b<d.length;b++)f["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=f.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&m&&(a[d].defaultSelected=!0)}else{for(d=""+Re(d),f=null,b=0;b<a.length;b++){if(a[b].value===d){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}f!==null||a[b].disabled||(f=a[b])}f!==null&&(f.selected=!0)}}function ts(a,f){if(f.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},f,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Ai(a,f){var d=f.value;if(d==null){if(d=f.children,f=f.defaultValue,d!=null){if(f!=null)throw Error(t(92));if(xi(d)){if(1<d.length)throw Error(t(93));d=d[0]}f=d}f==null&&(f=""),d=f}a._wrapperState={initialValue:Re(d)}}function Qr(a,f){var d=Re(f.value),m=Re(f.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),f.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),m!=null&&(a.defaultValue=""+m)}function Er(a){var f=a.textContent;f===a._wrapperState.initialValue&&f!==""&&f!==null&&(a.value=f)}function pa(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ns(a,f){return a==null||a==="http://www.w3.org/1999/xhtml"?pa(f):a==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var rs,Ys=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,d,m,b){MSApp.execUnsafeLocalFunction(function(){return a(f,d,m,b)})}:a}(function(a,f){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=f;else{for(rs=rs||document.createElement("div"),rs.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=rs.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;f.firstChild;)a.appendChild(f.firstChild)}});function Ei(a,f){if(f){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=f;return}}a.textContent=f}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},He=["Webkit","ms","Moz","O"];Object.keys(de).forEach(function(a){He.forEach(function(f){f=f+a.charAt(0).toUpperCase()+a.substring(1),de[f]=de[a]})});function ge(a,f,d){return f==null||typeof f=="boolean"||f===""?"":d||typeof f!="number"||f===0||de.hasOwnProperty(a)&&de[a]?(""+f).trim():f+"px"}function te(a,f){a=a.style;for(var d in f)if(f.hasOwnProperty(d)){var m=d.indexOf("--")===0,b=ge(d,f[d],m);d==="float"&&(d="cssFloat"),m?a.setProperty(d,b):a[d]=b}}var ye=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ee(a,f){if(f){if(ye[a]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(t(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(t(61))}if(f.style!=null&&typeof f.style!="object")throw Error(t(62))}}function Le(a,f){if(a.indexOf("-")===-1)return typeof f.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var et=null;function $e(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var mt=null,Ot=null,Gt=null;function Si(a){if(a=ac(a)){if(typeof mt!="function")throw Error(t(280));var f=a.stateNode;f&&(f=Ed(f),mt(a.stateNode,a.type,f))}}function Ci(a){Ot?Gt?Gt.push(a):Gt=[a]:Ot=a}function Ni(){if(Ot){var a=Ot,f=Gt;if(Gt=Ot=null,Si(a),f)for(a=0;a<f.length;a++)Si(f[a])}}function en(a,f){return a(f)}function Kr(){}var Z=!1;function Ee(a,f,d){if(Z)return a(f,d);Z=!0;try{return en(a,f,d)}finally{Z=!1,(Ot!==null||Gt!==null)&&(Kr(),Ni())}}function Ve(a,f){var d=a.stateNode;if(d===null)return null;var m=Ed(d);if(m===null)return null;d=m[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(t(231,f,typeof d));return d}var tt=!1;if(l)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){tt=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch{tt=!1}function Jr(a,f,d,m,b,x,S,M,D){var K=Array.prototype.slice.call(arguments,3);try{f.apply(d,K)}catch(oe){this.onError(oe)}}var cr=!1,st=null,is=!1,Xs=null,rd={onError:function(a){cr=!0,st=a}};function jf(a,f,d,m,b,x,S,M,D){cr=!1,st=null,Jr.apply(rd,arguments)}function RE(a,f,d,m,b,x,S,M,D){if(jf.apply(this,arguments),cr){if(cr){var K=st;cr=!1,st=null}else throw Error(t(198));is||(is=!0,Xs=K)}}function ma(a){var f=a,d=a;if(a.alternate)for(;f.return;)f=f.return;else{a=f;do f=a,f.flags&4098&&(d=f.return),a=f.return;while(a)}return f.tag===3?d:null}function v2(a){if(a.tag===13){var f=a.memoizedState;if(f===null&&(a=a.alternate,a!==null&&(f=a.memoizedState)),f!==null)return f.dehydrated}return null}function x2(a){if(ma(a)!==a)throw Error(t(188))}function DE(a){var f=a.alternate;if(!f){if(f=ma(a),f===null)throw Error(t(188));return f!==a?null:a}for(var d=a,m=f;;){var b=d.return;if(b===null)break;var x=b.alternate;if(x===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===x.child){for(x=b.child;x;){if(x===d)return x2(b),a;if(x===m)return x2(b),f;x=x.sibling}throw Error(t(188))}if(d.return!==m.return)d=b,m=x;else{for(var S=!1,M=b.child;M;){if(M===d){S=!0,d=b,m=x;break}if(M===m){S=!0,m=b,d=x;break}M=M.sibling}if(!S){for(M=x.child;M;){if(M===d){S=!0,d=x,m=b;break}if(M===m){S=!0,m=x,d=b;break}M=M.sibling}if(!S)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?a:f}function k2(a){return a=DE(a),a!==null?A2(a):null}function A2(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var f=A2(a);if(f!==null)return f;a=a.sibling}return null}var E2=e.unstable_scheduleCallback,S2=e.unstable_cancelCallback,LE=e.unstable_shouldYield,BE=e.unstable_requestPaint,Bt=e.unstable_now,_E=e.unstable_getCurrentPriorityLevel,Y1=e.unstable_ImmediatePriority,C2=e.unstable_UserBlockingPriority,id=e.unstable_NormalPriority,FE=e.unstable_LowPriority,N2=e.unstable_IdlePriority,sd=null,Ti=null;function zE(a){if(Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(sd,a,void 0,(a.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:jE,UE=Math.log,HE=Math.LN2;function jE(a){return a>>>=0,a===0?32:31-(UE(a)/HE|0)|0}var od=64,ad=4194304;function Vf(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function ld(a,f){var d=a.pendingLanes;if(d===0)return 0;var m=0,b=a.suspendedLanes,x=a.pingedLanes,S=d&268435455;if(S!==0){var M=S&~b;M!==0?m=Vf(M):(x&=S,x!==0&&(m=Vf(x)))}else S=d&~b,S!==0?m=Vf(S):x!==0&&(m=Vf(x));if(m===0)return 0;if(f!==0&&f!==m&&!(f&b)&&(b=m&-m,x=f&-f,b>=x||b===16&&(x&4194240)!==0))return f;if(m&4&&(m|=d&16),f=a.entangledLanes,f!==0)for(a=a.entanglements,f&=m;0<f;)d=31-qr(f),b=1<<d,m|=a[d],f&=~b;return m}function VE(a,f){switch(a){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $E(a,f){for(var d=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,x=a.pendingLanes;0<x;){var S=31-qr(x),M=1<<S,D=b[S];D===-1?(!(M&d)||M&m)&&(b[S]=VE(M,f)):D<=f&&(a.expiredLanes|=M),x&=~M}}function X1(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function T2(){var a=od;return od<<=1,!(od&4194240)&&(od=64),a}function Z1(a){for(var f=[],d=0;31>d;d++)f.push(a);return f}function $f(a,f,d){a.pendingLanes|=f,f!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,f=31-qr(f),a[f]=d}function GE(a,f){var d=a.pendingLanes&~f;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=f,a.mutableReadLanes&=f,a.entangledLanes&=f,f=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<d;){var b=31-qr(d),x=1<<b;f[b]=0,m[b]=-1,a[b]=-1,d&=~x}}function e6(a,f){var d=a.entangledLanes|=f;for(a=a.entanglements;d;){var m=31-qr(d),b=1<<m;b&f|a[m]&f&&(a[m]|=f),d&=~b}}var ut=0;function M2(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var O2,t6,I2,P2,R2,n6=!1,fd=[],Zs=null,eo=null,to=null,Gf=new Map,Wf=new Map,no=[],WE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D2(a,f){switch(a){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Gf.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wf.delete(f.pointerId)}}function Qf(a,f,d,m,b,x){return a===null||a.nativeEvent!==x?(a={blockedOn:f,domEventName:d,eventSystemFlags:m,nativeEvent:x,targetContainers:[b]},f!==null&&(f=ac(f),f!==null&&t6(f)),a):(a.eventSystemFlags|=m,f=a.targetContainers,b!==null&&f.indexOf(b)===-1&&f.push(b),a)}function QE(a,f,d,m,b){switch(f){case"focusin":return Zs=Qf(Zs,a,f,d,m,b),!0;case"dragenter":return eo=Qf(eo,a,f,d,m,b),!0;case"mouseover":return to=Qf(to,a,f,d,m,b),!0;case"pointerover":var x=b.pointerId;return Gf.set(x,Qf(Gf.get(x)||null,a,f,d,m,b)),!0;case"gotpointercapture":return x=b.pointerId,Wf.set(x,Qf(Wf.get(x)||null,a,f,d,m,b)),!0}return!1}function L2(a){var f=ga(a.target);if(f!==null){var d=ma(f);if(d!==null){if(f=d.tag,f===13){if(f=v2(d),f!==null){a.blockedOn=f,R2(a.priority,function(){I2(d)});return}}else if(f===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function cd(a){if(a.blockedOn!==null)return!1;for(var f=a.targetContainers;0<f.length;){var d=i6(a.domEventName,a.eventSystemFlags,f[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var m=new d.constructor(d.type,d);et=m,d.target.dispatchEvent(m),et=null}else return f=ac(d),f!==null&&t6(f),a.blockedOn=d,!1;f.shift()}return!0}function B2(a,f,d){cd(a)&&d.delete(f)}function KE(){n6=!1,Zs!==null&&cd(Zs)&&(Zs=null),eo!==null&&cd(eo)&&(eo=null),to!==null&&cd(to)&&(to=null),Gf.forEach(B2),Wf.forEach(B2)}function Kf(a,f){a.blockedOn===f&&(a.blockedOn=null,n6||(n6=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KE)))}function Jf(a){function f(b){return Kf(b,a)}if(0<fd.length){Kf(fd[0],a);for(var d=1;d<fd.length;d++){var m=fd[d];m.blockedOn===a&&(m.blockedOn=null)}}for(Zs!==null&&Kf(Zs,a),eo!==null&&Kf(eo,a),to!==null&&Kf(to,a),Gf.forEach(f),Wf.forEach(f),d=0;d<no.length;d++)m=no[d],m.blockedOn===a&&(m.blockedOn=null);for(;0<no.length&&(d=no[0],d.blockedOn===null);)L2(d),d.blockedOn===null&&no.shift()}var Ul=N.ReactCurrentBatchConfig,ud=!0;function JE(a,f,d,m){var b=ut,x=Ul.transition;Ul.transition=null;try{ut=1,r6(a,f,d,m)}finally{ut=b,Ul.transition=x}}function qE(a,f,d,m){var b=ut,x=Ul.transition;Ul.transition=null;try{ut=4,r6(a,f,d,m)}finally{ut=b,Ul.transition=x}}function r6(a,f,d,m){if(ud){var b=i6(a,f,d,m);if(b===null)x6(a,f,m,dd,d),D2(a,m);else if(QE(b,a,f,d,m))m.stopPropagation();else if(D2(a,m),f&4&&-1<WE.indexOf(a)){for(;b!==null;){var x=ac(b);if(x!==null&&O2(x),x=i6(a,f,d,m),x===null&&x6(a,f,m,dd,d),x===b)break;b=x}b!==null&&m.stopPropagation()}else x6(a,f,m,null,d)}}var dd=null;function i6(a,f,d,m){if(dd=null,a=$e(m),a=ga(a),a!==null)if(f=ma(a),f===null)a=null;else if(d=f.tag,d===13){if(a=v2(f),a!==null)return a;a=null}else if(d===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;a=null}else f!==a&&(a=null);return dd=a,null}function _2(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_E()){case Y1:return 1;case C2:return 4;case id:case FE:return 16;case N2:return 536870912;default:return 16}default:return 16}}var ro=null,s6=null,hd=null;function F2(){if(hd)return hd;var a,f=s6,d=f.length,m,b="value"in ro?ro.value:ro.textContent,x=b.length;for(a=0;a<d&&f[a]===b[a];a++);var S=d-a;for(m=1;m<=S&&f[d-m]===b[x-m];m++);return hd=b.slice(a,1<m?1-m:void 0)}function pd(a){var f=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&f===13&&(a=13)):a=f,a===10&&(a=13),32<=a||a===13?a:0}function md(){return!0}function z2(){return!1}function ur(a){function f(d,m,b,x,S){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var M in a)a.hasOwnProperty(M)&&(d=a[M],this[M]=d?d(x):x[M]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?md:z2,this.isPropagationStopped=z2,this}return q(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=md)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=md)},persist:function(){},isPersistent:md}),f}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o6=ur(Hl),qf=q({},Hl,{view:0,detail:0}),YE=ur(qf),a6,l6,Yf,gd=q({},qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c6,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Yf&&(Yf&&a.type==="mousemove"?(a6=a.screenX-Yf.screenX,l6=a.screenY-Yf.screenY):l6=a6=0,Yf=a),a6)},movementY:function(a){return"movementY"in a?a.movementY:l6}}),U2=ur(gd),XE=q({},gd,{dataTransfer:0}),ZE=ur(XE),eS=q({},qf,{relatedTarget:0}),f6=ur(eS),tS=q({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),nS=ur(tS),rS=q({},Hl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),iS=ur(rS),sS=q({},Hl,{data:0}),H2=ur(sS),oS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fS(a){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(a):(a=lS[a])?!!f[a]:!1}function c6(){return fS}var cS=q({},qf,{key:function(a){if(a.key){var f=oS[a.key]||a.key;if(f!=="Unidentified")return f}return a.type==="keypress"?(a=pd(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?aS[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c6,charCode:function(a){return a.type==="keypress"?pd(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?pd(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),uS=ur(cS),dS=q({},gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j2=ur(dS),hS=q({},qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c6}),pS=ur(hS),mS=q({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),gS=ur(mS),yS=q({},gd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),bS=ur(yS),wS=[9,13,27,32],u6=l&&"CompositionEvent"in window,Xf=null;l&&"documentMode"in document&&(Xf=document.documentMode);var vS=l&&"TextEvent"in window&&!Xf,V2=l&&(!u6||Xf&&8<Xf&&11>=Xf),$2=" ",G2=!1;function W2(a,f){switch(a){case"keyup":return wS.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var jl=!1;function xS(a,f){switch(a){case"compositionend":return Q2(f);case"keypress":return f.which!==32?null:(G2=!0,$2);case"textInput":return a=f.data,a===$2&&G2?null:a;default:return null}}function kS(a,f){if(jl)return a==="compositionend"||!u6&&W2(a,f)?(a=F2(),hd=s6=ro=null,jl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return V2&&f.locale!=="ko"?null:f.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K2(a){var f=a&&a.nodeName&&a.nodeName.toLowerCase();return f==="input"?!!AS[a.type]:f==="textarea"}function J2(a,f,d,m){Ci(m),f=xd(f,"onChange"),0<f.length&&(d=new o6("onChange","change",null,d,m),a.push({event:d,listeners:f}))}var Zf=null,ec=null;function ES(a){hb(a,0)}function yd(a){var f=Ql(a);if(fr(f))return a}function SS(a,f){if(a==="change")return f}var q2=!1;if(l){var d6;if(l){var h6="oninput"in document;if(!h6){var Y2=document.createElement("div");Y2.setAttribute("oninput","return;"),h6=typeof Y2.oninput=="function"}d6=h6}else d6=!1;q2=d6&&(!document.documentMode||9<document.documentMode)}function X2(){Zf&&(Zf.detachEvent("onpropertychange",Z2),ec=Zf=null)}function Z2(a){if(a.propertyName==="value"&&yd(ec)){var f=[];J2(f,ec,a,$e(a)),Ee(ES,f)}}function CS(a,f,d){a==="focusin"?(X2(),Zf=f,ec=d,Zf.attachEvent("onpropertychange",Z2)):a==="focusout"&&X2()}function NS(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return yd(ec)}function TS(a,f){if(a==="click")return yd(f)}function MS(a,f){if(a==="input"||a==="change")return yd(f)}function OS(a,f){return a===f&&(a!==0||1/a===1/f)||a!==a&&f!==f}var Yr=typeof Object.is=="function"?Object.is:OS;function tc(a,f){if(Yr(a,f))return!0;if(typeof a!="object"||a===null||typeof f!="object"||f===null)return!1;var d=Object.keys(a),m=Object.keys(f);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!c.call(f,b)||!Yr(a[b],f[b]))return!1}return!0}function eb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function tb(a,f){var d=eb(a);a=0;for(var m;d;){if(d.nodeType===3){if(m=a+d.textContent.length,a<=f&&m>=f)return{node:d,offset:f-a};a=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=eb(d)}}function nb(a,f){return a&&f?a===f?!0:a&&a.nodeType===3?!1:f&&f.nodeType===3?nb(a,f.parentNode):"contains"in a?a.contains(f):a.compareDocumentPosition?!!(a.compareDocumentPosition(f)&16):!1:!1}function rb(){for(var a=window,f=kt();f instanceof a.HTMLIFrameElement;){try{var d=typeof f.contentWindow.location.href=="string"}catch{d=!1}if(d)a=f.contentWindow;else break;f=kt(a.document)}return f}function p6(a){var f=a&&a.nodeName&&a.nodeName.toLowerCase();return f&&(f==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||f==="textarea"||a.contentEditable==="true")}function IS(a){var f=rb(),d=a.focusedElem,m=a.selectionRange;if(f!==d&&d&&d.ownerDocument&&nb(d.ownerDocument.documentElement,d)){if(m!==null&&p6(d)){if(f=m.start,a=m.end,a===void 0&&(a=f),"selectionStart"in d)d.selectionStart=f,d.selectionEnd=Math.min(a,d.value.length);else if(a=(f=d.ownerDocument||document)&&f.defaultView||window,a.getSelection){a=a.getSelection();var b=d.textContent.length,x=Math.min(m.start,b);m=m.end===void 0?x:Math.min(m.end,b),!a.extend&&x>m&&(b=m,m=x,x=b),b=tb(d,x);var S=tb(d,m);b&&S&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==S.node||a.focusOffset!==S.offset)&&(f=f.createRange(),f.setStart(b.node,b.offset),a.removeAllRanges(),x>m?(a.addRange(f),a.extend(S.node,S.offset)):(f.setEnd(S.node,S.offset),a.addRange(f)))}}for(f=[],a=d;a=a.parentNode;)a.nodeType===1&&f.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<f.length;d++)a=f[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var PS=l&&"documentMode"in document&&11>=document.documentMode,Vl=null,m6=null,nc=null,g6=!1;function ib(a,f,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;g6||Vl==null||Vl!==kt(m)||(m=Vl,"selectionStart"in m&&p6(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),nc&&tc(nc,m)||(nc=m,m=xd(m6,"onSelect"),0<m.length&&(f=new o6("onSelect","select",null,f,d),a.push({event:f,listeners:m}),f.target=Vl)))}function bd(a,f){var d={};return d[a.toLowerCase()]=f.toLowerCase(),d["Webkit"+a]="webkit"+f,d["Moz"+a]="moz"+f,d}var $l={animationend:bd("Animation","AnimationEnd"),animationiteration:bd("Animation","AnimationIteration"),animationstart:bd("Animation","AnimationStart"),transitionend:bd("Transition","TransitionEnd")},y6={},sb={};l&&(sb=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function wd(a){if(y6[a])return y6[a];if(!$l[a])return a;var f=$l[a],d;for(d in f)if(f.hasOwnProperty(d)&&d in sb)return y6[a]=f[d];return a}var ob=wd("animationend"),ab=wd("animationiteration"),lb=wd("animationstart"),fb=wd("transitionend"),cb=new Map,ub="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function io(a,f){cb.set(a,f),s(f,[a])}for(var b6=0;b6<ub.length;b6++){var w6=ub[b6],RS=w6.toLowerCase(),DS=w6[0].toUpperCase()+w6.slice(1);io(RS,"on"+DS)}io(ob,"onAnimationEnd"),io(ab,"onAnimationIteration"),io(lb,"onAnimationStart"),io("dblclick","onDoubleClick"),io("focusin","onFocus"),io("focusout","onBlur"),io(fb,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LS=new Set("cancel close invalid load scroll toggle".split(" ").concat(rc));function db(a,f,d){var m=a.type||"unknown-event";a.currentTarget=d,RE(m,f,void 0,a),a.currentTarget=null}function hb(a,f){f=(f&4)!==0;for(var d=0;d<a.length;d++){var m=a[d],b=m.event;m=m.listeners;e:{var x=void 0;if(f)for(var S=m.length-1;0<=S;S--){var M=m[S],D=M.instance,K=M.currentTarget;if(M=M.listener,D!==x&&b.isPropagationStopped())break e;db(b,M,K),x=D}else for(S=0;S<m.length;S++){if(M=m[S],D=M.instance,K=M.currentTarget,M=M.listener,D!==x&&b.isPropagationStopped())break e;db(b,M,K),x=D}}}if(is)throw a=Xs,is=!1,Xs=null,a}function bt(a,f){var d=f[N6];d===void 0&&(d=f[N6]=new Set);var m=a+"__bubble";d.has(m)||(pb(f,a,2,!1),d.add(m))}function v6(a,f,d){var m=0;f&&(m|=4),pb(d,a,m,f)}var vd="_reactListening"+Math.random().toString(36).slice(2);function ic(a){if(!a[vd]){a[vd]=!0,r.forEach(function(d){d!=="selectionchange"&&(LS.has(d)||v6(d,!1,a),v6(d,!0,a))});var f=a.nodeType===9?a:a.ownerDocument;f===null||f[vd]||(f[vd]=!0,v6("selectionchange",!1,f))}}function pb(a,f,d,m){switch(_2(f)){case 1:var b=JE;break;case 4:b=qE;break;default:b=r6}d=b.bind(null,f,d,a),b=void 0,!tt||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(f,d,{capture:!0,passive:b}):a.addEventListener(f,d,!0):b!==void 0?a.addEventListener(f,d,{passive:b}):a.addEventListener(f,d,!1)}function x6(a,f,d,m,b){var x=m;if(!(f&1)&&!(f&2)&&m!==null)e:for(;;){if(m===null)return;var S=m.tag;if(S===3||S===4){var M=m.stateNode.containerInfo;if(M===b||M.nodeType===8&&M.parentNode===b)break;if(S===4)for(S=m.return;S!==null;){var D=S.tag;if((D===3||D===4)&&(D=S.stateNode.containerInfo,D===b||D.nodeType===8&&D.parentNode===b))return;S=S.return}for(;M!==null;){if(S=ga(M),S===null)return;if(D=S.tag,D===5||D===6){m=x=S;continue e}M=M.parentNode}}m=m.return}Ee(function(){var K=x,oe=$e(d),fe=[];e:{var se=cb.get(a);if(se!==void 0){var be=o6,Ce=a;switch(a){case"keypress":if(pd(d)===0)break e;case"keydown":case"keyup":be=uS;break;case"focusin":Ce="focus",be=f6;break;case"focusout":Ce="blur",be=f6;break;case"beforeblur":case"afterblur":be=f6;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=U2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=ZE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=pS;break;case ob:case ab:case lb:be=nS;break;case fb:be=gS;break;case"scroll":be=YE;break;case"wheel":be=bS;break;case"copy":case"cut":case"paste":be=iS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=j2}var Ne=(f&4)!==0,_t=!Ne&&a==="scroll",j=Ne?se!==null?se+"Capture":null:se;Ne=[];for(var _=K,W;_!==null;){W=_;var ue=W.stateNode;if(W.tag===5&&ue!==null&&(W=ue,j!==null&&(ue=Ve(_,j),ue!=null&&Ne.push(sc(_,ue,W)))),_t)break;_=_.return}0<Ne.length&&(se=new be(se,Ce,null,d,oe),fe.push({event:se,listeners:Ne}))}}if(!(f&7)){e:{if(se=a==="mouseover"||a==="pointerover",be=a==="mouseout"||a==="pointerout",se&&d!==et&&(Ce=d.relatedTarget||d.fromElement)&&(ga(Ce)||Ce[ss]))break e;if((be||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,be?(Ce=d.relatedTarget||d.toElement,be=K,Ce=Ce?ga(Ce):null,Ce!==null&&(_t=ma(Ce),Ce!==_t||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(be=null,Ce=K),be!==Ce)){if(Ne=U2,ue="onMouseLeave",j="onMouseEnter",_="mouse",(a==="pointerout"||a==="pointerover")&&(Ne=j2,ue="onPointerLeave",j="onPointerEnter",_="pointer"),_t=be==null?se:Ql(be),W=Ce==null?se:Ql(Ce),se=new Ne(ue,_+"leave",be,d,oe),se.target=_t,se.relatedTarget=W,ue=null,ga(oe)===K&&(Ne=new Ne(j,_+"enter",Ce,d,oe),Ne.target=W,Ne.relatedTarget=_t,ue=Ne),_t=ue,be&&Ce)t:{for(Ne=be,j=Ce,_=0,W=Ne;W;W=Gl(W))_++;for(W=0,ue=j;ue;ue=Gl(ue))W++;for(;0<_-W;)Ne=Gl(Ne),_--;for(;0<W-_;)j=Gl(j),W--;for(;_--;){if(Ne===j||j!==null&&Ne===j.alternate)break t;Ne=Gl(Ne),j=Gl(j)}Ne=null}else Ne=null;be!==null&&mb(fe,se,be,Ne,!1),Ce!==null&&_t!==null&&mb(fe,_t,Ce,Ne,!0)}}e:{if(se=K?Ql(K):window,be=se.nodeName&&se.nodeName.toLowerCase(),be==="select"||be==="input"&&se.type==="file")var Pe=SS;else if(K2(se))if(q2)Pe=MS;else{Pe=NS;var ze=CS}else(be=se.nodeName)&&be.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Pe=TS);if(Pe&&(Pe=Pe(a,K))){J2(fe,Pe,d,oe);break e}ze&&ze(a,se,K),a==="focusout"&&(ze=se._wrapperState)&&ze.controlled&&se.type==="number"&&ha(se,"number",se.value)}switch(ze=K?Ql(K):window,a){case"focusin":(K2(ze)||ze.contentEditable==="true")&&(Vl=ze,m6=K,nc=null);break;case"focusout":nc=m6=Vl=null;break;case"mousedown":g6=!0;break;case"contextmenu":case"mouseup":case"dragend":g6=!1,ib(fe,d,oe);break;case"selectionchange":if(PS)break;case"keydown":case"keyup":ib(fe,d,oe)}var Ue;if(u6)e:{switch(a){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else jl?W2(a,d)&&(Ge="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Ge="onCompositionStart");Ge&&(V2&&d.locale!=="ko"&&(jl||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&jl&&(Ue=F2()):(ro=oe,s6="value"in ro?ro.value:ro.textContent,jl=!0)),ze=xd(K,Ge),0<ze.length&&(Ge=new H2(Ge,a,null,d,oe),fe.push({event:Ge,listeners:ze}),Ue?Ge.data=Ue:(Ue=Q2(d),Ue!==null&&(Ge.data=Ue)))),(Ue=vS?xS(a,d):kS(a,d))&&(K=xd(K,"onBeforeInput"),0<K.length&&(oe=new H2("onBeforeInput","beforeinput",null,d,oe),fe.push({event:oe,listeners:K}),oe.data=Ue))}hb(fe,f)})}function sc(a,f,d){return{instance:a,listener:f,currentTarget:d}}function xd(a,f){for(var d=f+"Capture",m=[];a!==null;){var b=a,x=b.stateNode;b.tag===5&&x!==null&&(b=x,x=Ve(a,d),x!=null&&m.unshift(sc(a,x,b)),x=Ve(a,f),x!=null&&m.push(sc(a,x,b))),a=a.return}return m}function Gl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function mb(a,f,d,m,b){for(var x=f._reactName,S=[];d!==null&&d!==m;){var M=d,D=M.alternate,K=M.stateNode;if(D!==null&&D===m)break;M.tag===5&&K!==null&&(M=K,b?(D=Ve(d,x),D!=null&&S.unshift(sc(d,D,M))):b||(D=Ve(d,x),D!=null&&S.push(sc(d,D,M)))),d=d.return}S.length!==0&&a.push({event:f,listeners:S})}var BS=/\r\n?/g,_S=/\u0000|\uFFFD/g;function gb(a){return(typeof a=="string"?a:""+a).replace(BS,`
`).replace(_S,"")}function kd(a,f,d){if(f=gb(f),gb(a)!==f&&d)throw Error(t(425))}function Ad(){}var k6=null,A6=null;function E6(a,f){return a==="textarea"||a==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var S6=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,yb=typeof Promise=="function"?Promise:void 0,zS=typeof queueMicrotask=="function"?queueMicrotask:typeof yb<"u"?function(a){return yb.resolve(null).then(a).catch(US)}:S6;function US(a){setTimeout(function(){throw a})}function C6(a,f){var d=f,m=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(m===0){a.removeChild(b),Jf(f);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=b}while(d);Jf(f)}function so(a){for(;a!=null;a=a.nextSibling){var f=a.nodeType;if(f===1||f===3)break;if(f===8){if(f=a.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return a}function bb(a){a=a.previousSibling;for(var f=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(f===0)return a;f--}else d==="/$"&&f++}a=a.previousSibling}return null}var Wl=Math.random().toString(36).slice(2),Mi="__reactFiber$"+Wl,oc="__reactProps$"+Wl,ss="__reactContainer$"+Wl,N6="__reactEvents$"+Wl,HS="__reactListeners$"+Wl,jS="__reactHandles$"+Wl;function ga(a){var f=a[Mi];if(f)return f;for(var d=a.parentNode;d;){if(f=d[ss]||d[Mi]){if(d=f.alternate,f.child!==null||d!==null&&d.child!==null)for(a=bb(a);a!==null;){if(d=a[Mi])return d;a=bb(a)}return f}a=d,d=a.parentNode}return null}function ac(a){return a=a[Mi]||a[ss],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ql(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Ed(a){return a[oc]||null}var T6=[],Kl=-1;function oo(a){return{current:a}}function wt(a){0>Kl||(a.current=T6[Kl],T6[Kl]=null,Kl--)}function gt(a,f){Kl++,T6[Kl]=a.current,a.current=f}var ao={},xn=oo(ao),Kn=oo(!1),ya=ao;function Jl(a,f){var d=a.type.contextTypes;if(!d)return ao;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===f)return m.__reactInternalMemoizedMaskedChildContext;var b={},x;for(x in d)b[x]=f[x];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=f,a.__reactInternalMemoizedMaskedChildContext=b),b}function Jn(a){return a=a.childContextTypes,a!=null}function Sd(){wt(Kn),wt(xn)}function wb(a,f,d){if(xn.current!==ao)throw Error(t(168));gt(xn,f),gt(Kn,d)}function vb(a,f,d){var m=a.stateNode;if(f=f.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var b in m)if(!(b in f))throw Error(t(108,Fe(a)||"Unknown",b));return q({},d,m)}function Cd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ao,ya=xn.current,gt(xn,a),gt(Kn,Kn.current),!0}function xb(a,f,d){var m=a.stateNode;if(!m)throw Error(t(169));d?(a=vb(a,f,ya),m.__reactInternalMemoizedMergedChildContext=a,wt(Kn),wt(xn),gt(xn,a)):wt(Kn),gt(Kn,d)}var as=null,Nd=!1,M6=!1;function kb(a){as===null?as=[a]:as.push(a)}function VS(a){Nd=!0,kb(a)}function lo(){if(!M6&&as!==null){M6=!0;var a=0,f=ut;try{var d=as;for(ut=1;a<d.length;a++){var m=d[a];do m=m(!0);while(m!==null)}as=null,Nd=!1}catch(b){throw as!==null&&(as=as.slice(a+1)),E2(Y1,lo),b}finally{ut=f,M6=!1}}return null}var ql=[],Yl=0,Td=null,Md=0,Sr=[],Cr=0,ba=null,ls=1,fs="";function wa(a,f){ql[Yl++]=Md,ql[Yl++]=Td,Td=a,Md=f}function Ab(a,f,d){Sr[Cr++]=ls,Sr[Cr++]=fs,Sr[Cr++]=ba,ba=a;var m=ls;a=fs;var b=32-qr(m)-1;m&=~(1<<b),d+=1;var x=32-qr(f)+b;if(30<x){var S=b-b%5;x=(m&(1<<S)-1).toString(32),m>>=S,b-=S,ls=1<<32-qr(f)+b|d<<b|m,fs=x+a}else ls=1<<x|d<<b|m,fs=a}function O6(a){a.return!==null&&(wa(a,1),Ab(a,1,0))}function I6(a){for(;a===Td;)Td=ql[--Yl],ql[Yl]=null,Md=ql[--Yl],ql[Yl]=null;for(;a===ba;)ba=Sr[--Cr],Sr[Cr]=null,fs=Sr[--Cr],Sr[Cr]=null,ls=Sr[--Cr],Sr[Cr]=null}var dr=null,hr=null,At=!1,Xr=null;function Eb(a,f){var d=Or(5,null,null,0);d.elementType="DELETED",d.stateNode=f,d.return=a,f=a.deletions,f===null?(a.deletions=[d],a.flags|=16):f.push(d)}function Sb(a,f){switch(a.tag){case 5:var d=a.type;return f=f.nodeType!==1||d.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(a.stateNode=f,dr=a,hr=so(f.firstChild),!0):!1;case 6:return f=a.pendingProps===""||f.nodeType!==3?null:f,f!==null?(a.stateNode=f,dr=a,hr=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(d=ba!==null?{id:ls,overflow:fs}:null,a.memoizedState={dehydrated:f,treeContext:d,retryLane:1073741824},d=Or(18,null,null,0),d.stateNode=f,d.return=a,a.child=d,dr=a,hr=null,!0):!1;default:return!1}}function P6(a){return(a.mode&1)!==0&&(a.flags&128)===0}function R6(a){if(At){var f=hr;if(f){var d=f;if(!Sb(a,f)){if(P6(a))throw Error(t(418));f=so(d.nextSibling);var m=dr;f&&Sb(a,f)?Eb(m,d):(a.flags=a.flags&-4097|2,At=!1,dr=a)}}else{if(P6(a))throw Error(t(418));a.flags=a.flags&-4097|2,At=!1,dr=a}}}function Cb(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;dr=a}function Od(a){if(a!==dr)return!1;if(!At)return Cb(a),At=!0,!1;var f;if((f=a.tag!==3)&&!(f=a.tag!==5)&&(f=a.type,f=f!=="head"&&f!=="body"&&!E6(a.type,a.memoizedProps)),f&&(f=hr)){if(P6(a))throw Nb(),Error(t(418));for(;f;)Eb(a,f),f=so(f.nextSibling)}if(Cb(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,f=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(f===0){hr=so(a.nextSibling);break e}f--}else d!=="$"&&d!=="$!"&&d!=="$?"||f++}a=a.nextSibling}hr=null}}else hr=dr?so(a.stateNode.nextSibling):null;return!0}function Nb(){for(var a=hr;a;)a=so(a.nextSibling)}function Xl(){hr=dr=null,At=!1}function D6(a){Xr===null?Xr=[a]:Xr.push(a)}var $S=N.ReactCurrentBatchConfig;function lc(a,f,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,a));var b=m,x=""+a;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===x?f.ref:(f=function(S){var M=b.refs;S===null?delete M[x]:M[x]=S},f._stringRef=x,f)}if(typeof a!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,a))}return a}function Id(a,f){throw a=Object.prototype.toString.call(f),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":a))}function Tb(a){var f=a._init;return f(a._payload)}function Mb(a){function f(j,_){if(a){var W=j.deletions;W===null?(j.deletions=[_],j.flags|=16):W.push(_)}}function d(j,_){if(!a)return null;for(;_!==null;)f(j,_),_=_.sibling;return null}function m(j,_){for(j=new Map;_!==null;)_.key!==null?j.set(_.key,_):j.set(_.index,_),_=_.sibling;return j}function b(j,_){return j=yo(j,_),j.index=0,j.sibling=null,j}function x(j,_,W){return j.index=W,a?(W=j.alternate,W!==null?(W=W.index,W<_?(j.flags|=2,_):W):(j.flags|=2,_)):(j.flags|=1048576,_)}function S(j){return a&&j.alternate===null&&(j.flags|=2),j}function M(j,_,W,ue){return _===null||_.tag!==6?(_=S5(W,j.mode,ue),_.return=j,_):(_=b(_,W),_.return=j,_)}function D(j,_,W,ue){var Pe=W.type;return Pe===L?oe(j,_,W.props.children,ue,W.key):_!==null&&(_.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===z&&Tb(Pe)===_.type)?(ue=b(_,W.props),ue.ref=lc(j,_,W),ue.return=j,ue):(ue=th(W.type,W.key,W.props,null,j.mode,ue),ue.ref=lc(j,_,W),ue.return=j,ue)}function K(j,_,W,ue){return _===null||_.tag!==4||_.stateNode.containerInfo!==W.containerInfo||_.stateNode.implementation!==W.implementation?(_=C5(W,j.mode,ue),_.return=j,_):(_=b(_,W.children||[]),_.return=j,_)}function oe(j,_,W,ue,Pe){return _===null||_.tag!==7?(_=Na(W,j.mode,ue,Pe),_.return=j,_):(_=b(_,W),_.return=j,_)}function fe(j,_,W){if(typeof _=="string"&&_!==""||typeof _=="number")return _=S5(""+_,j.mode,W),_.return=j,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case P:return W=th(_.type,_.key,_.props,null,j.mode,W),W.ref=lc(j,null,_),W.return=j,W;case B:return _=C5(_,j.mode,W),_.return=j,_;case z:var ue=_._init;return fe(j,ue(_._payload),W)}if(xi(_)||X(_))return _=Na(_,j.mode,W,null),_.return=j,_;Id(j,_)}return null}function se(j,_,W,ue){var Pe=_!==null?_.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Pe!==null?null:M(j,_,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case P:return W.key===Pe?D(j,_,W,ue):null;case B:return W.key===Pe?K(j,_,W,ue):null;case z:return Pe=W._init,se(j,_,Pe(W._payload),ue)}if(xi(W)||X(W))return Pe!==null?null:oe(j,_,W,ue,null);Id(j,W)}return null}function be(j,_,W,ue,Pe){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return j=j.get(W)||null,M(_,j,""+ue,Pe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case P:return j=j.get(ue.key===null?W:ue.key)||null,D(_,j,ue,Pe);case B:return j=j.get(ue.key===null?W:ue.key)||null,K(_,j,ue,Pe);case z:var ze=ue._init;return be(j,_,W,ze(ue._payload),Pe)}if(xi(ue)||X(ue))return j=j.get(W)||null,oe(_,j,ue,Pe,null);Id(_,ue)}return null}function Ce(j,_,W,ue){for(var Pe=null,ze=null,Ue=_,Ge=_=0,rn=null;Ue!==null&&Ge<W.length;Ge++){Ue.index>Ge?(rn=Ue,Ue=null):rn=Ue.sibling;var ot=se(j,Ue,W[Ge],ue);if(ot===null){Ue===null&&(Ue=rn);break}a&&Ue&&ot.alternate===null&&f(j,Ue),_=x(ot,_,Ge),ze===null?Pe=ot:ze.sibling=ot,ze=ot,Ue=rn}if(Ge===W.length)return d(j,Ue),At&&wa(j,Ge),Pe;if(Ue===null){for(;Ge<W.length;Ge++)Ue=fe(j,W[Ge],ue),Ue!==null&&(_=x(Ue,_,Ge),ze===null?Pe=Ue:ze.sibling=Ue,ze=Ue);return At&&wa(j,Ge),Pe}for(Ue=m(j,Ue);Ge<W.length;Ge++)rn=be(Ue,j,Ge,W[Ge],ue),rn!==null&&(a&&rn.alternate!==null&&Ue.delete(rn.key===null?Ge:rn.key),_=x(rn,_,Ge),ze===null?Pe=rn:ze.sibling=rn,ze=rn);return a&&Ue.forEach(function(bo){return f(j,bo)}),At&&wa(j,Ge),Pe}function Ne(j,_,W,ue){var Pe=X(W);if(typeof Pe!="function")throw Error(t(150));if(W=Pe.call(W),W==null)throw Error(t(151));for(var ze=Pe=null,Ue=_,Ge=_=0,rn=null,ot=W.next();Ue!==null&&!ot.done;Ge++,ot=W.next()){Ue.index>Ge?(rn=Ue,Ue=null):rn=Ue.sibling;var bo=se(j,Ue,ot.value,ue);if(bo===null){Ue===null&&(Ue=rn);break}a&&Ue&&bo.alternate===null&&f(j,Ue),_=x(bo,_,Ge),ze===null?Pe=bo:ze.sibling=bo,ze=bo,Ue=rn}if(ot.done)return d(j,Ue),At&&wa(j,Ge),Pe;if(Ue===null){for(;!ot.done;Ge++,ot=W.next())ot=fe(j,ot.value,ue),ot!==null&&(_=x(ot,_,Ge),ze===null?Pe=ot:ze.sibling=ot,ze=ot);return At&&wa(j,Ge),Pe}for(Ue=m(j,Ue);!ot.done;Ge++,ot=W.next())ot=be(Ue,j,Ge,ot.value,ue),ot!==null&&(a&&ot.alternate!==null&&Ue.delete(ot.key===null?Ge:ot.key),_=x(ot,_,Ge),ze===null?Pe=ot:ze.sibling=ot,ze=ot);return a&&Ue.forEach(function(kC){return f(j,kC)}),At&&wa(j,Ge),Pe}function _t(j,_,W,ue){if(typeof W=="object"&&W!==null&&W.type===L&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case P:e:{for(var Pe=W.key,ze=_;ze!==null;){if(ze.key===Pe){if(Pe=W.type,Pe===L){if(ze.tag===7){d(j,ze.sibling),_=b(ze,W.props.children),_.return=j,j=_;break e}}else if(ze.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===z&&Tb(Pe)===ze.type){d(j,ze.sibling),_=b(ze,W.props),_.ref=lc(j,ze,W),_.return=j,j=_;break e}d(j,ze);break}else f(j,ze);ze=ze.sibling}W.type===L?(_=Na(W.props.children,j.mode,ue,W.key),_.return=j,j=_):(ue=th(W.type,W.key,W.props,null,j.mode,ue),ue.ref=lc(j,_,W),ue.return=j,j=ue)}return S(j);case B:e:{for(ze=W.key;_!==null;){if(_.key===ze)if(_.tag===4&&_.stateNode.containerInfo===W.containerInfo&&_.stateNode.implementation===W.implementation){d(j,_.sibling),_=b(_,W.children||[]),_.return=j,j=_;break e}else{d(j,_);break}else f(j,_);_=_.sibling}_=C5(W,j.mode,ue),_.return=j,j=_}return S(j);case z:return ze=W._init,_t(j,_,ze(W._payload),ue)}if(xi(W))return Ce(j,_,W,ue);if(X(W))return Ne(j,_,W,ue);Id(j,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,_!==null&&_.tag===6?(d(j,_.sibling),_=b(_,W),_.return=j,j=_):(d(j,_),_=S5(W,j.mode,ue),_.return=j,j=_),S(j)):d(j,_)}return _t}var Zl=Mb(!0),Ob=Mb(!1),Pd=oo(null),Rd=null,e0=null,L6=null;function B6(){L6=e0=Rd=null}function _6(a){var f=Pd.current;wt(Pd),a._currentValue=f}function F6(a,f,d){for(;a!==null;){var m=a.alternate;if((a.childLanes&f)!==f?(a.childLanes|=f,m!==null&&(m.childLanes|=f)):m!==null&&(m.childLanes&f)!==f&&(m.childLanes|=f),a===d)break;a=a.return}}function t0(a,f){Rd=a,L6=e0=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&f&&(qn=!0),a.firstContext=null)}function Nr(a){var f=a._currentValue;if(L6!==a)if(a={context:a,memoizedValue:f,next:null},e0===null){if(Rd===null)throw Error(t(308));e0=a,Rd.dependencies={lanes:0,firstContext:a}}else e0=e0.next=a;return f}var va=null;function z6(a){va===null?va=[a]:va.push(a)}function Ib(a,f,d,m){var b=f.interleaved;return b===null?(d.next=d,z6(f)):(d.next=b.next,b.next=d),f.interleaved=d,cs(a,m)}function cs(a,f){a.lanes|=f;var d=a.alternate;for(d!==null&&(d.lanes|=f),d=a,a=a.return;a!==null;)a.childLanes|=f,d=a.alternate,d!==null&&(d.childLanes|=f),d=a,a=a.return;return d.tag===3?d.stateNode:null}var fo=!1;function U6(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pb(a,f){a=a.updateQueue,f.updateQueue===a&&(f.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function us(a,f){return{eventTime:a,lane:f,tag:0,payload:null,callback:null,next:null}}function co(a,f,d){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,it&2){var b=m.pending;return b===null?f.next=f:(f.next=b.next,b.next=f),m.pending=f,cs(a,d)}return b=m.interleaved,b===null?(f.next=f,z6(m)):(f.next=b.next,b.next=f),m.interleaved=f,cs(a,d)}function Dd(a,f,d){if(f=f.updateQueue,f!==null&&(f=f.shared,(d&4194240)!==0)){var m=f.lanes;m&=a.pendingLanes,d|=m,f.lanes=d,e6(a,d)}}function Rb(a,f){var d=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,x=null;if(d=d.firstBaseUpdate,d!==null){do{var S={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};x===null?b=x=S:x=x.next=S,d=d.next}while(d!==null);x===null?b=x=f:x=x.next=f}else b=x=f;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:x,shared:m.shared,effects:m.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=f}function Ld(a,f,d,m){var b=a.updateQueue;fo=!1;var x=b.firstBaseUpdate,S=b.lastBaseUpdate,M=b.shared.pending;if(M!==null){b.shared.pending=null;var D=M,K=D.next;D.next=null,S===null?x=K:S.next=K,S=D;var oe=a.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==S&&(M===null?oe.firstBaseUpdate=K:M.next=K,oe.lastBaseUpdate=D))}if(x!==null){var fe=b.baseState;S=0,oe=K=D=null,M=x;do{var se=M.lane,be=M.eventTime;if((m&se)===se){oe!==null&&(oe=oe.next={eventTime:be,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var Ce=a,Ne=M;switch(se=f,be=d,Ne.tag){case 1:if(Ce=Ne.payload,typeof Ce=="function"){fe=Ce.call(be,fe,se);break e}fe=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ne.payload,se=typeof Ce=="function"?Ce.call(be,fe,se):Ce,se==null)break e;fe=q({},fe,se);break e;case 2:fo=!0}}M.callback!==null&&M.lane!==0&&(a.flags|=64,se=b.effects,se===null?b.effects=[M]:se.push(M))}else be={eventTime:be,lane:se,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?(K=oe=be,D=fe):oe=oe.next=be,S|=se;if(M=M.next,M===null){if(M=b.shared.pending,M===null)break;se=M,M=se.next,se.next=null,b.lastBaseUpdate=se,b.shared.pending=null}}while(!0);if(oe===null&&(D=fe),b.baseState=D,b.firstBaseUpdate=K,b.lastBaseUpdate=oe,f=b.shared.interleaved,f!==null){b=f;do S|=b.lane,b=b.next;while(b!==f)}else x===null&&(b.shared.lanes=0);Aa|=S,a.lanes=S,a.memoizedState=fe}}function Db(a,f,d){if(a=f.effects,f.effects=null,a!==null)for(f=0;f<a.length;f++){var m=a[f],b=m.callback;if(b!==null){if(m.callback=null,m=d,typeof b!="function")throw Error(t(191,b));b.call(m)}}}var fc={},Oi=oo(fc),cc=oo(fc),uc=oo(fc);function xa(a){if(a===fc)throw Error(t(174));return a}function H6(a,f){switch(gt(uc,f),gt(cc,a),gt(Oi,fc),a=f.nodeType,a){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:ns(null,"");break;default:a=a===8?f.parentNode:f,f=a.namespaceURI||null,a=a.tagName,f=ns(f,a)}wt(Oi),gt(Oi,f)}function n0(){wt(Oi),wt(cc),wt(uc)}function Lb(a){xa(uc.current);var f=xa(Oi.current),d=ns(f,a.type);f!==d&&(gt(cc,a),gt(Oi,d))}function j6(a){cc.current===a&&(wt(Oi),wt(cc))}var Et=oo(0);function Bd(a){for(var f=a;f!==null;){if(f.tag===13){var d=f.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break;for(;f.sibling===null;){if(f.return===null||f.return===a)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var V6=[];function $6(){for(var a=0;a<V6.length;a++)V6[a]._workInProgressVersionPrimary=null;V6.length=0}var _d=N.ReactCurrentDispatcher,G6=N.ReactCurrentBatchConfig,ka=0,St=null,qt=null,tn=null,Fd=!1,dc=!1,hc=0,GS=0;function kn(){throw Error(t(321))}function W6(a,f){if(f===null)return!1;for(var d=0;d<f.length&&d<a.length;d++)if(!Yr(a[d],f[d]))return!1;return!0}function Q6(a,f,d,m,b,x){if(ka=x,St=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,_d.current=a===null||a.memoizedState===null?JS:qS,a=d(m,b),dc){x=0;do{if(dc=!1,hc=0,25<=x)throw Error(t(301));x+=1,tn=qt=null,f.updateQueue=null,_d.current=YS,a=d(m,b)}while(dc)}if(_d.current=Hd,f=qt!==null&&qt.next!==null,ka=0,tn=qt=St=null,Fd=!1,f)throw Error(t(300));return a}function K6(){var a=hc!==0;return hc=0,a}function Ii(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?St.memoizedState=tn=a:tn=tn.next=a,tn}function Tr(){if(qt===null){var a=St.alternate;a=a!==null?a.memoizedState:null}else a=qt.next;var f=tn===null?St.memoizedState:tn.next;if(f!==null)tn=f,qt=a;else{if(a===null)throw Error(t(310));qt=a,a={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},tn===null?St.memoizedState=tn=a:tn=tn.next=a}return tn}function pc(a,f){return typeof f=="function"?f(a):f}function J6(a){var f=Tr(),d=f.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var m=qt,b=m.baseQueue,x=d.pending;if(x!==null){if(b!==null){var S=b.next;b.next=x.next,x.next=S}m.baseQueue=b=x,d.pending=null}if(b!==null){x=b.next,m=m.baseState;var M=S=null,D=null,K=x;do{var oe=K.lane;if((ka&oe)===oe)D!==null&&(D=D.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),m=K.hasEagerState?K.eagerState:a(m,K.action);else{var fe={lane:oe,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};D===null?(M=D=fe,S=m):D=D.next=fe,St.lanes|=oe,Aa|=oe}K=K.next}while(K!==null&&K!==x);D===null?S=m:D.next=M,Yr(m,f.memoizedState)||(qn=!0),f.memoizedState=m,f.baseState=S,f.baseQueue=D,d.lastRenderedState=m}if(a=d.interleaved,a!==null){b=a;do x=b.lane,St.lanes|=x,Aa|=x,b=b.next;while(b!==a)}else b===null&&(d.lanes=0);return[f.memoizedState,d.dispatch]}function q6(a){var f=Tr(),d=f.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var m=d.dispatch,b=d.pending,x=f.memoizedState;if(b!==null){d.pending=null;var S=b=b.next;do x=a(x,S.action),S=S.next;while(S!==b);Yr(x,f.memoizedState)||(qn=!0),f.memoizedState=x,f.baseQueue===null&&(f.baseState=x),d.lastRenderedState=x}return[x,m]}function Bb(){}function _b(a,f){var d=St,m=Tr(),b=f(),x=!Yr(m.memoizedState,b);if(x&&(m.memoizedState=b,qn=!0),m=m.queue,Y6(Ub.bind(null,d,m,a),[a]),m.getSnapshot!==f||x||tn!==null&&tn.memoizedState.tag&1){if(d.flags|=2048,mc(9,zb.bind(null,d,m,b,f),void 0,null),nn===null)throw Error(t(349));ka&30||Fb(d,f,b)}return b}function Fb(a,f,d){a.flags|=16384,a={getSnapshot:f,value:d},f=St.updateQueue,f===null?(f={lastEffect:null,stores:null},St.updateQueue=f,f.stores=[a]):(d=f.stores,d===null?f.stores=[a]:d.push(a))}function zb(a,f,d,m){f.value=d,f.getSnapshot=m,Hb(f)&&jb(a)}function Ub(a,f,d){return d(function(){Hb(f)&&jb(a)})}function Hb(a){var f=a.getSnapshot;a=a.value;try{var d=f();return!Yr(a,d)}catch{return!0}}function jb(a){var f=cs(a,1);f!==null&&ni(f,a,1,-1)}function Vb(a){var f=Ii();return typeof a=="function"&&(a=a()),f.memoizedState=f.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:a},f.queue=a,a=a.dispatch=KS.bind(null,St,a),[f.memoizedState,a]}function mc(a,f,d,m){return a={tag:a,create:f,destroy:d,deps:m,next:null},f=St.updateQueue,f===null?(f={lastEffect:null,stores:null},St.updateQueue=f,f.lastEffect=a.next=a):(d=f.lastEffect,d===null?f.lastEffect=a.next=a:(m=d.next,d.next=a,a.next=m,f.lastEffect=a)),a}function $b(){return Tr().memoizedState}function zd(a,f,d,m){var b=Ii();St.flags|=a,b.memoizedState=mc(1|f,d,void 0,m===void 0?null:m)}function Ud(a,f,d,m){var b=Tr();m=m===void 0?null:m;var x=void 0;if(qt!==null){var S=qt.memoizedState;if(x=S.destroy,m!==null&&W6(m,S.deps)){b.memoizedState=mc(f,d,x,m);return}}St.flags|=a,b.memoizedState=mc(1|f,d,x,m)}function Gb(a,f){return zd(8390656,8,a,f)}function Y6(a,f){return Ud(2048,8,a,f)}function Wb(a,f){return Ud(4,2,a,f)}function Qb(a,f){return Ud(4,4,a,f)}function Kb(a,f){if(typeof f=="function")return a=a(),f(a),function(){f(null)};if(f!=null)return a=a(),f.current=a,function(){f.current=null}}function Jb(a,f,d){return d=d!=null?d.concat([a]):null,Ud(4,4,Kb.bind(null,f,a),d)}function X6(){}function qb(a,f){var d=Tr();f=f===void 0?null:f;var m=d.memoizedState;return m!==null&&f!==null&&W6(f,m[1])?m[0]:(d.memoizedState=[a,f],a)}function Yb(a,f){var d=Tr();f=f===void 0?null:f;var m=d.memoizedState;return m!==null&&f!==null&&W6(f,m[1])?m[0]:(a=a(),d.memoizedState=[a,f],a)}function Xb(a,f,d){return ka&21?(Yr(d,f)||(d=T2(),St.lanes|=d,Aa|=d,a.baseState=!0),f):(a.baseState&&(a.baseState=!1,qn=!0),a.memoizedState=d)}function WS(a,f){var d=ut;ut=d!==0&&4>d?d:4,a(!0);var m=G6.transition;G6.transition={};try{a(!1),f()}finally{ut=d,G6.transition=m}}function Zb(){return Tr().memoizedState}function QS(a,f,d){var m=mo(a);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},e8(a))t8(f,d);else if(d=Ib(a,f,d,m),d!==null){var b=Dn();ni(d,a,m,b),n8(d,f,m)}}function KS(a,f,d){var m=mo(a),b={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(e8(a))t8(f,b);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=f.lastRenderedReducer,x!==null))try{var S=f.lastRenderedState,M=x(S,d);if(b.hasEagerState=!0,b.eagerState=M,Yr(M,S)){var D=f.interleaved;D===null?(b.next=b,z6(f)):(b.next=D.next,D.next=b),f.interleaved=b;return}}catch{}finally{}d=Ib(a,f,b,m),d!==null&&(b=Dn(),ni(d,a,m,b),n8(d,f,m))}}function e8(a){var f=a.alternate;return a===St||f!==null&&f===St}function t8(a,f){dc=Fd=!0;var d=a.pending;d===null?f.next=f:(f.next=d.next,d.next=f),a.pending=f}function n8(a,f,d){if(d&4194240){var m=f.lanes;m&=a.pendingLanes,d|=m,f.lanes=d,e6(a,d)}}var Hd={readContext:Nr,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},JS={readContext:Nr,useCallback:function(a,f){return Ii().memoizedState=[a,f===void 0?null:f],a},useContext:Nr,useEffect:Gb,useImperativeHandle:function(a,f,d){return d=d!=null?d.concat([a]):null,zd(4194308,4,Kb.bind(null,f,a),d)},useLayoutEffect:function(a,f){return zd(4194308,4,a,f)},useInsertionEffect:function(a,f){return zd(4,2,a,f)},useMemo:function(a,f){var d=Ii();return f=f===void 0?null:f,a=a(),d.memoizedState=[a,f],a},useReducer:function(a,f,d){var m=Ii();return f=d!==void 0?d(f):f,m.memoizedState=m.baseState=f,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:f},m.queue=a,a=a.dispatch=QS.bind(null,St,a),[m.memoizedState,a]},useRef:function(a){var f=Ii();return a={current:a},f.memoizedState=a},useState:Vb,useDebugValue:X6,useDeferredValue:function(a){return Ii().memoizedState=a},useTransition:function(){var a=Vb(!1),f=a[0];return a=WS.bind(null,a[1]),Ii().memoizedState=a,[f,a]},useMutableSource:function(){},useSyncExternalStore:function(a,f,d){var m=St,b=Ii();if(At){if(d===void 0)throw Error(t(407));d=d()}else{if(d=f(),nn===null)throw Error(t(349));ka&30||Fb(m,f,d)}b.memoizedState=d;var x={value:d,getSnapshot:f};return b.queue=x,Gb(Ub.bind(null,m,x,a),[a]),m.flags|=2048,mc(9,zb.bind(null,m,x,d,f),void 0,null),d},useId:function(){var a=Ii(),f=nn.identifierPrefix;if(At){var d=fs,m=ls;d=(m&~(1<<32-qr(m)-1)).toString(32)+d,f=":"+f+"R"+d,d=hc++,0<d&&(f+="H"+d.toString(32)),f+=":"}else d=GS++,f=":"+f+"r"+d.toString(32)+":";return a.memoizedState=f},unstable_isNewReconciler:!1},qS={readContext:Nr,useCallback:qb,useContext:Nr,useEffect:Y6,useImperativeHandle:Jb,useInsertionEffect:Wb,useLayoutEffect:Qb,useMemo:Yb,useReducer:J6,useRef:$b,useState:function(){return J6(pc)},useDebugValue:X6,useDeferredValue:function(a){var f=Tr();return Xb(f,qt.memoizedState,a)},useTransition:function(){var a=J6(pc)[0],f=Tr().memoizedState;return[a,f]},useMutableSource:Bb,useSyncExternalStore:_b,useId:Zb,unstable_isNewReconciler:!1},YS={readContext:Nr,useCallback:qb,useContext:Nr,useEffect:Y6,useImperativeHandle:Jb,useInsertionEffect:Wb,useLayoutEffect:Qb,useMemo:Yb,useReducer:q6,useRef:$b,useState:function(){return q6(pc)},useDebugValue:X6,useDeferredValue:function(a){var f=Tr();return qt===null?f.memoizedState=a:Xb(f,qt.memoizedState,a)},useTransition:function(){var a=q6(pc)[0],f=Tr().memoizedState;return[a,f]},useMutableSource:Bb,useSyncExternalStore:_b,useId:Zb,unstable_isNewReconciler:!1};function Zr(a,f){if(a&&a.defaultProps){f=q({},f),a=a.defaultProps;for(var d in a)f[d]===void 0&&(f[d]=a[d]);return f}return f}function Z6(a,f,d,m){f=a.memoizedState,d=d(m,f),d=d==null?f:q({},f,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var jd={isMounted:function(a){return(a=a._reactInternals)?ma(a)===a:!1},enqueueSetState:function(a,f,d){a=a._reactInternals;var m=Dn(),b=mo(a),x=us(m,b);x.payload=f,d!=null&&(x.callback=d),f=co(a,x,b),f!==null&&(ni(f,a,b,m),Dd(f,a,b))},enqueueReplaceState:function(a,f,d){a=a._reactInternals;var m=Dn(),b=mo(a),x=us(m,b);x.tag=1,x.payload=f,d!=null&&(x.callback=d),f=co(a,x,b),f!==null&&(ni(f,a,b,m),Dd(f,a,b))},enqueueForceUpdate:function(a,f){a=a._reactInternals;var d=Dn(),m=mo(a),b=us(d,m);b.tag=2,f!=null&&(b.callback=f),f=co(a,b,m),f!==null&&(ni(f,a,m,d),Dd(f,a,m))}};function r8(a,f,d,m,b,x,S){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,x,S):f.prototype&&f.prototype.isPureReactComponent?!tc(d,m)||!tc(b,x):!0}function i8(a,f,d){var m=!1,b=ao,x=f.contextType;return typeof x=="object"&&x!==null?x=Nr(x):(b=Jn(f)?ya:xn.current,m=f.contextTypes,x=(m=m!=null)?Jl(a,b):ao),f=new f(d,x),a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=jd,a.stateNode=f,f._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=x),f}function s8(a,f,d,m){a=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(d,m),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(d,m),f.state!==a&&jd.enqueueReplaceState(f,f.state,null)}function e5(a,f,d,m){var b=a.stateNode;b.props=d,b.state=a.memoizedState,b.refs={},U6(a);var x=f.contextType;typeof x=="object"&&x!==null?b.context=Nr(x):(x=Jn(f)?ya:xn.current,b.context=Jl(a,x)),b.state=a.memoizedState,x=f.getDerivedStateFromProps,typeof x=="function"&&(Z6(a,f,x,d),b.state=a.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(f=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),f!==b.state&&jd.enqueueReplaceState(b,b.state,null),Ld(a,d,b,m),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function r0(a,f){try{var d="",m=f;do d+=Ie(m),m=m.return;while(m);var b=d}catch(x){b=`
Error generating stack: `+x.message+`
`+x.stack}return{value:a,source:f,stack:b,digest:null}}function t5(a,f,d){return{value:a,source:null,stack:d??null,digest:f??null}}function n5(a,f){try{console.error(f.value)}catch(d){setTimeout(function(){throw d})}}var XS=typeof WeakMap=="function"?WeakMap:Map;function o8(a,f,d){d=us(-1,d),d.tag=3,d.payload={element:null};var m=f.value;return d.callback=function(){Jd||(Jd=!0,y5=m),n5(a,f)},d}function a8(a,f,d){d=us(-1,d),d.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var b=f.value;d.payload=function(){return m(b)},d.callback=function(){n5(a,f)}}var x=a.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(d.callback=function(){n5(a,f),typeof m!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var S=f.stack;this.componentDidCatch(f.value,{componentStack:S!==null?S:""})}),d}function l8(a,f,d){var m=a.pingCache;if(m===null){m=a.pingCache=new XS;var b=new Set;m.set(f,b)}else b=m.get(f),b===void 0&&(b=new Set,m.set(f,b));b.has(d)||(b.add(d),a=dC.bind(null,a,f,d),f.then(a,a))}function f8(a){do{var f;if((f=a.tag===13)&&(f=a.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return a;a=a.return}while(a!==null);return null}function c8(a,f,d,m,b){return a.mode&1?(a.flags|=65536,a.lanes=b,a):(a===f?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(f=us(-1,1),f.tag=2,co(d,f,1))),d.lanes|=1),a)}var ZS=N.ReactCurrentOwner,qn=!1;function Rn(a,f,d,m){f.child=a===null?Ob(f,null,d,m):Zl(f,a.child,d,m)}function u8(a,f,d,m,b){d=d.render;var x=f.ref;return t0(f,b),m=Q6(a,f,d,m,x,b),d=K6(),a!==null&&!qn?(f.updateQueue=a.updateQueue,f.flags&=-2053,a.lanes&=~b,ds(a,f,b)):(At&&d&&O6(f),f.flags|=1,Rn(a,f,m,b),f.child)}function d8(a,f,d,m,b){if(a===null){var x=d.type;return typeof x=="function"&&!E5(x)&&x.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(f.tag=15,f.type=x,h8(a,f,x,m,b)):(a=th(d.type,null,m,f,f.mode,b),a.ref=f.ref,a.return=f,f.child=a)}if(x=a.child,!(a.lanes&b)){var S=x.memoizedProps;if(d=d.compare,d=d!==null?d:tc,d(S,m)&&a.ref===f.ref)return ds(a,f,b)}return f.flags|=1,a=yo(x,m),a.ref=f.ref,a.return=f,f.child=a}function h8(a,f,d,m,b){if(a!==null){var x=a.memoizedProps;if(tc(x,m)&&a.ref===f.ref)if(qn=!1,f.pendingProps=m=x,(a.lanes&b)!==0)a.flags&131072&&(qn=!0);else return f.lanes=a.lanes,ds(a,f,b)}return r5(a,f,d,m,b)}function p8(a,f,d){var m=f.pendingProps,b=m.children,x=a!==null?a.memoizedState:null;if(m.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(s0,pr),pr|=d;else{if(!(d&1073741824))return a=x!==null?x.baseLanes|d:d,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:a,cachePool:null,transitions:null},f.updateQueue=null,gt(s0,pr),pr|=a,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=x!==null?x.baseLanes:d,gt(s0,pr),pr|=m}else x!==null?(m=x.baseLanes|d,f.memoizedState=null):m=d,gt(s0,pr),pr|=m;return Rn(a,f,b,d),f.child}function m8(a,f){var d=f.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(f.flags|=512,f.flags|=2097152)}function r5(a,f,d,m,b){var x=Jn(d)?ya:xn.current;return x=Jl(f,x),t0(f,b),d=Q6(a,f,d,m,x,b),m=K6(),a!==null&&!qn?(f.updateQueue=a.updateQueue,f.flags&=-2053,a.lanes&=~b,ds(a,f,b)):(At&&m&&O6(f),f.flags|=1,Rn(a,f,d,b),f.child)}function g8(a,f,d,m,b){if(Jn(d)){var x=!0;Cd(f)}else x=!1;if(t0(f,b),f.stateNode===null)$d(a,f),i8(f,d,m),e5(f,d,m,b),m=!0;else if(a===null){var S=f.stateNode,M=f.memoizedProps;S.props=M;var D=S.context,K=d.contextType;typeof K=="object"&&K!==null?K=Nr(K):(K=Jn(d)?ya:xn.current,K=Jl(f,K));var oe=d.getDerivedStateFromProps,fe=typeof oe=="function"||typeof S.getSnapshotBeforeUpdate=="function";fe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==m||D!==K)&&s8(f,S,m,K),fo=!1;var se=f.memoizedState;S.state=se,Ld(f,m,S,b),D=f.memoizedState,M!==m||se!==D||Kn.current||fo?(typeof oe=="function"&&(Z6(f,d,oe,m),D=f.memoizedState),(M=fo||r8(f,d,M,m,se,D,K))?(fe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(f.flags|=4194308)):(typeof S.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=m,f.memoizedState=D),S.props=m,S.state=D,S.context=K,m=M):(typeof S.componentDidMount=="function"&&(f.flags|=4194308),m=!1)}else{S=f.stateNode,Pb(a,f),M=f.memoizedProps,K=f.type===f.elementType?M:Zr(f.type,M),S.props=K,fe=f.pendingProps,se=S.context,D=d.contextType,typeof D=="object"&&D!==null?D=Nr(D):(D=Jn(d)?ya:xn.current,D=Jl(f,D));var be=d.getDerivedStateFromProps;(oe=typeof be=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==fe||se!==D)&&s8(f,S,m,D),fo=!1,se=f.memoizedState,S.state=se,Ld(f,m,S,b);var Ce=f.memoizedState;M!==fe||se!==Ce||Kn.current||fo?(typeof be=="function"&&(Z6(f,d,be,m),Ce=f.memoizedState),(K=fo||r8(f,d,K,m,se,Ce,D)||!1)?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,Ce,D),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,Ce,D)),typeof S.componentDidUpdate=="function"&&(f.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(f.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(f.flags|=1024),f.memoizedProps=m,f.memoizedState=Ce),S.props=m,S.state=Ce,S.context=D,m=K):(typeof S.componentDidUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(f.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(f.flags|=1024),m=!1)}return i5(a,f,d,m,x,b)}function i5(a,f,d,m,b,x){m8(a,f);var S=(f.flags&128)!==0;if(!m&&!S)return b&&xb(f,d,!1),ds(a,f,x);m=f.stateNode,ZS.current=f;var M=S&&typeof d.getDerivedStateFromError!="function"?null:m.render();return f.flags|=1,a!==null&&S?(f.child=Zl(f,a.child,null,x),f.child=Zl(f,null,M,x)):Rn(a,f,M,x),f.memoizedState=m.state,b&&xb(f,d,!0),f.child}function y8(a){var f=a.stateNode;f.pendingContext?wb(a,f.pendingContext,f.pendingContext!==f.context):f.context&&wb(a,f.context,!1),H6(a,f.containerInfo)}function b8(a,f,d,m,b){return Xl(),D6(b),f.flags|=256,Rn(a,f,d,m),f.child}var s5={dehydrated:null,treeContext:null,retryLane:0};function o5(a){return{baseLanes:a,cachePool:null,transitions:null}}function w8(a,f,d){var m=f.pendingProps,b=Et.current,x=!1,S=(f.flags&128)!==0,M;if((M=S)||(M=a!==null&&a.memoizedState===null?!1:(b&2)!==0),M?(x=!0,f.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),gt(Et,b&1),a===null)return R6(f),a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(f.mode&1?a.data==="$!"?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(S=m.children,a=m.fallback,x?(m=f.mode,x=f.child,S={mode:"hidden",children:S},!(m&1)&&x!==null?(x.childLanes=0,x.pendingProps=S):x=nh(S,m,0,null),a=Na(a,m,d,null),x.return=f,a.return=f,x.sibling=a,f.child=x,f.child.memoizedState=o5(d),f.memoizedState=s5,a):a5(f,S));if(b=a.memoizedState,b!==null&&(M=b.dehydrated,M!==null))return eC(a,f,S,m,M,b,d);if(x){x=m.fallback,S=f.mode,b=a.child,M=b.sibling;var D={mode:"hidden",children:m.children};return!(S&1)&&f.child!==b?(m=f.child,m.childLanes=0,m.pendingProps=D,f.deletions=null):(m=yo(b,D),m.subtreeFlags=b.subtreeFlags&14680064),M!==null?x=yo(M,x):(x=Na(x,S,d,null),x.flags|=2),x.return=f,m.return=f,m.sibling=x,f.child=m,m=x,x=f.child,S=a.child.memoizedState,S=S===null?o5(d):{baseLanes:S.baseLanes|d,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=a.childLanes&~d,f.memoizedState=s5,m}return x=a.child,a=x.sibling,m=yo(x,{mode:"visible",children:m.children}),!(f.mode&1)&&(m.lanes=d),m.return=f,m.sibling=null,a!==null&&(d=f.deletions,d===null?(f.deletions=[a],f.flags|=16):d.push(a)),f.child=m,f.memoizedState=null,m}function a5(a,f){return f=nh({mode:"visible",children:f},a.mode,0,null),f.return=a,a.child=f}function Vd(a,f,d,m){return m!==null&&D6(m),Zl(f,a.child,null,d),a=a5(f,f.pendingProps.children),a.flags|=2,f.memoizedState=null,a}function eC(a,f,d,m,b,x,S){if(d)return f.flags&256?(f.flags&=-257,m=t5(Error(t(422))),Vd(a,f,S,m)):f.memoizedState!==null?(f.child=a.child,f.flags|=128,null):(x=m.fallback,b=f.mode,m=nh({mode:"visible",children:m.children},b,0,null),x=Na(x,b,S,null),x.flags|=2,m.return=f,x.return=f,m.sibling=x,f.child=m,f.mode&1&&Zl(f,a.child,null,S),f.child.memoizedState=o5(S),f.memoizedState=s5,x);if(!(f.mode&1))return Vd(a,f,S,null);if(b.data==="$!"){if(m=b.nextSibling&&b.nextSibling.dataset,m)var M=m.dgst;return m=M,x=Error(t(419)),m=t5(x,m,void 0),Vd(a,f,S,m)}if(M=(S&a.childLanes)!==0,qn||M){if(m=nn,m!==null){switch(S&-S){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=b&(m.suspendedLanes|S)?0:b,b!==0&&b!==x.retryLane&&(x.retryLane=b,cs(a,b),ni(m,a,b,-1))}return A5(),m=t5(Error(t(421))),Vd(a,f,S,m)}return b.data==="$?"?(f.flags|=128,f.child=a.child,f=hC.bind(null,a),b._reactRetry=f,null):(a=x.treeContext,hr=so(b.nextSibling),dr=f,At=!0,Xr=null,a!==null&&(Sr[Cr++]=ls,Sr[Cr++]=fs,Sr[Cr++]=ba,ls=a.id,fs=a.overflow,ba=f),f=a5(f,m.children),f.flags|=4096,f)}function v8(a,f,d){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f),F6(a.return,f,d)}function l5(a,f,d,m,b){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b}:(x.isBackwards=f,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=d,x.tailMode=b)}function x8(a,f,d){var m=f.pendingProps,b=m.revealOrder,x=m.tail;if(Rn(a,f,m.children,d),m=Et.current,m&2)m=m&1|2,f.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=f.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&v8(a,d,f);else if(a.tag===19)v8(a,d,f);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===f)break e;for(;a.sibling===null;){if(a.return===null||a.return===f)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(gt(Et,m),!(f.mode&1))f.memoizedState=null;else switch(b){case"forwards":for(d=f.child,b=null;d!==null;)a=d.alternate,a!==null&&Bd(a)===null&&(b=d),d=d.sibling;d=b,d===null?(b=f.child,f.child=null):(b=d.sibling,d.sibling=null),l5(f,!1,b,d,x);break;case"backwards":for(d=null,b=f.child,f.child=null;b!==null;){if(a=b.alternate,a!==null&&Bd(a)===null){f.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}l5(f,!0,d,null,x);break;case"together":l5(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function $d(a,f){!(f.mode&1)&&a!==null&&(a.alternate=null,f.alternate=null,f.flags|=2)}function ds(a,f,d){if(a!==null&&(f.dependencies=a.dependencies),Aa|=f.lanes,!(d&f.childLanes))return null;if(a!==null&&f.child!==a.child)throw Error(t(153));if(f.child!==null){for(a=f.child,d=yo(a,a.pendingProps),f.child=d,d.return=f;a.sibling!==null;)a=a.sibling,d=d.sibling=yo(a,a.pendingProps),d.return=f;d.sibling=null}return f.child}function tC(a,f,d){switch(f.tag){case 3:y8(f),Xl();break;case 5:Lb(f);break;case 1:Jn(f.type)&&Cd(f);break;case 4:H6(f,f.stateNode.containerInfo);break;case 10:var m=f.type._context,b=f.memoizedProps.value;gt(Pd,m._currentValue),m._currentValue=b;break;case 13:if(m=f.memoizedState,m!==null)return m.dehydrated!==null?(gt(Et,Et.current&1),f.flags|=128,null):d&f.child.childLanes?w8(a,f,d):(gt(Et,Et.current&1),a=ds(a,f,d),a!==null?a.sibling:null);gt(Et,Et.current&1);break;case 19:if(m=(d&f.childLanes)!==0,a.flags&128){if(m)return x8(a,f,d);f.flags|=128}if(b=f.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),gt(Et,Et.current),m)break;return null;case 22:case 23:return f.lanes=0,p8(a,f,d)}return ds(a,f,d)}var k8,f5,A8,E8;k8=function(a,f){for(var d=f.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},f5=function(){},A8=function(a,f,d,m){var b=a.memoizedProps;if(b!==m){a=f.stateNode,xa(Oi.current);var x=null;switch(d){case"input":b=Mt(a,b),m=Mt(a,m),x=[];break;case"select":b=q({},b,{value:void 0}),m=q({},m,{value:void 0}),x=[];break;case"textarea":b=ts(a,b),m=ts(a,m),x=[];break;default:typeof b.onClick!="function"&&typeof m.onClick=="function"&&(a.onclick=Ad)}ee(d,m);var S;d=null;for(K in b)if(!m.hasOwnProperty(K)&&b.hasOwnProperty(K)&&b[K]!=null)if(K==="style"){var M=b[K];for(S in M)M.hasOwnProperty(S)&&(d||(d={}),d[S]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?x||(x=[]):(x=x||[]).push(K,null));for(K in m){var D=m[K];if(M=b!=null?b[K]:void 0,m.hasOwnProperty(K)&&D!==M&&(D!=null||M!=null))if(K==="style")if(M){for(S in M)!M.hasOwnProperty(S)||D&&D.hasOwnProperty(S)||(d||(d={}),d[S]="");for(S in D)D.hasOwnProperty(S)&&M[S]!==D[S]&&(d||(d={}),d[S]=D[S])}else d||(x||(x=[]),x.push(K,d)),d=D;else K==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,M=M?M.__html:void 0,D!=null&&M!==D&&(x=x||[]).push(K,D)):K==="children"?typeof D!="string"&&typeof D!="number"||(x=x||[]).push(K,""+D):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(i.hasOwnProperty(K)?(D!=null&&K==="onScroll"&&bt("scroll",a),x||M===D||(x=[])):(x=x||[]).push(K,D))}d&&(x=x||[]).push("style",d);var K=x;(f.updateQueue=K)&&(f.flags|=4)}},E8=function(a,f,d,m){d!==m&&(f.flags|=4)};function gc(a,f){if(!At)switch(a.tailMode){case"hidden":f=a.tail;for(var d=null;f!==null;)f.alternate!==null&&(d=f),f=f.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?f||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function An(a){var f=a.alternate!==null&&a.alternate.child===a.child,d=0,m=0;if(f)for(var b=a.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&14680064,m|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=d,f}function nC(a,f,d){var m=f.pendingProps;switch(I6(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(f),null;case 1:return Jn(f.type)&&Sd(),An(f),null;case 3:return m=f.stateNode,n0(),wt(Kn),wt(xn),$6(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(Od(f)?f.flags|=4:a===null||a.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Xr!==null&&(v5(Xr),Xr=null))),f5(a,f),An(f),null;case 5:j6(f);var b=xa(uc.current);if(d=f.type,a!==null&&f.stateNode!=null)A8(a,f,d,m,b),a.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!m){if(f.stateNode===null)throw Error(t(166));return An(f),null}if(a=xa(Oi.current),Od(f)){m=f.stateNode,d=f.type;var x=f.memoizedProps;switch(m[Mi]=f,m[oc]=x,a=(f.mode&1)!==0,d){case"dialog":bt("cancel",m),bt("close",m);break;case"iframe":case"object":case"embed":bt("load",m);break;case"video":case"audio":for(b=0;b<rc.length;b++)bt(rc[b],m);break;case"source":bt("error",m);break;case"img":case"image":case"link":bt("error",m),bt("load",m);break;case"details":bt("toggle",m);break;case"input":es(m,x),bt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!x.multiple},bt("invalid",m);break;case"textarea":Ai(m,x),bt("invalid",m)}ee(d,x),b=null;for(var S in x)if(x.hasOwnProperty(S)){var M=x[S];S==="children"?typeof M=="string"?m.textContent!==M&&(x.suppressHydrationWarning!==!0&&kd(m.textContent,M,a),b=["children",M]):typeof M=="number"&&m.textContent!==""+M&&(x.suppressHydrationWarning!==!0&&kd(m.textContent,M,a),b=["children",""+M]):i.hasOwnProperty(S)&&M!=null&&S==="onScroll"&&bt("scroll",m)}switch(d){case"input":Zt(m),zl(m,x,!0);break;case"textarea":Zt(m),Er(m);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(m.onclick=Ad)}m=b,f.updateQueue=m,m!==null&&(f.flags|=4)}else{S=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=pa(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=S.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=S.createElement(d,{is:m.is}):(a=S.createElement(d),d==="select"&&(S=a,m.multiple?S.multiple=!0:m.size&&(S.size=m.size))):a=S.createElementNS(a,d),a[Mi]=f,a[oc]=m,k8(a,f,!1,!1),f.stateNode=a;e:{switch(S=Le(d,m),d){case"dialog":bt("cancel",a),bt("close",a),b=m;break;case"iframe":case"object":case"embed":bt("load",a),b=m;break;case"video":case"audio":for(b=0;b<rc.length;b++)bt(rc[b],a);b=m;break;case"source":bt("error",a),b=m;break;case"img":case"image":case"link":bt("error",a),bt("load",a),b=m;break;case"details":bt("toggle",a),b=m;break;case"input":es(a,m),b=Mt(a,m),bt("invalid",a);break;case"option":b=m;break;case"select":a._wrapperState={wasMultiple:!!m.multiple},b=q({},m,{value:void 0}),bt("invalid",a);break;case"textarea":Ai(a,m),b=ts(a,m),bt("invalid",a);break;default:b=m}ee(d,b),M=b;for(x in M)if(M.hasOwnProperty(x)){var D=M[x];x==="style"?te(a,D):x==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Ys(a,D)):x==="children"?typeof D=="string"?(d!=="textarea"||D!=="")&&Ei(a,D):typeof D=="number"&&Ei(a,""+D):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?D!=null&&x==="onScroll"&&bt("scroll",a):D!=null&&O(a,x,D,S))}switch(d){case"input":Zt(a),zl(a,m,!1);break;case"textarea":Zt(a),Er(a);break;case"option":m.value!=null&&a.setAttribute("value",""+Re(m.value));break;case"select":a.multiple=!!m.multiple,x=m.value,x!=null?ki(a,!!m.multiple,x,!1):m.defaultValue!=null&&ki(a,!!m.multiple,m.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=Ad)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return An(f),null;case 6:if(a&&f.stateNode!=null)E8(a,f,a.memoizedProps,m);else{if(typeof m!="string"&&f.stateNode===null)throw Error(t(166));if(d=xa(uc.current),xa(Oi.current),Od(f)){if(m=f.stateNode,d=f.memoizedProps,m[Mi]=f,(x=m.nodeValue!==d)&&(a=dr,a!==null))switch(a.tag){case 3:kd(m.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&kd(m.nodeValue,d,(a.mode&1)!==0)}x&&(f.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Mi]=f,f.stateNode=m}return An(f),null;case 13:if(wt(Et),m=f.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(At&&hr!==null&&f.mode&1&&!(f.flags&128))Nb(),Xl(),f.flags|=98560,x=!1;else if(x=Od(f),m!==null&&m.dehydrated!==null){if(a===null){if(!x)throw Error(t(318));if(x=f.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Mi]=f}else Xl(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;An(f),x=!1}else Xr!==null&&(v5(Xr),Xr=null),x=!0;if(!x)return f.flags&65536?f:null}return f.flags&128?(f.lanes=d,f):(m=m!==null,m!==(a!==null&&a.memoizedState!==null)&&m&&(f.child.flags|=8192,f.mode&1&&(a===null||Et.current&1?Yt===0&&(Yt=3):A5())),f.updateQueue!==null&&(f.flags|=4),An(f),null);case 4:return n0(),f5(a,f),a===null&&ic(f.stateNode.containerInfo),An(f),null;case 10:return _6(f.type._context),An(f),null;case 17:return Jn(f.type)&&Sd(),An(f),null;case 19:if(wt(Et),x=f.memoizedState,x===null)return An(f),null;if(m=(f.flags&128)!==0,S=x.rendering,S===null)if(m)gc(x,!1);else{if(Yt!==0||a!==null&&a.flags&128)for(a=f.child;a!==null;){if(S=Bd(a),S!==null){for(f.flags|=128,gc(x,!1),m=S.updateQueue,m!==null&&(f.updateQueue=m,f.flags|=4),f.subtreeFlags=0,m=d,d=f.child;d!==null;)x=d,a=m,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=a,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,a=S.dependencies,x.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return gt(Et,Et.current&1|2),f.child}a=a.sibling}x.tail!==null&&Bt()>o0&&(f.flags|=128,m=!0,gc(x,!1),f.lanes=4194304)}else{if(!m)if(a=Bd(S),a!==null){if(f.flags|=128,m=!0,d=a.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),gc(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!At)return An(f),null}else 2*Bt()-x.renderingStartTime>o0&&d!==1073741824&&(f.flags|=128,m=!0,gc(x,!1),f.lanes=4194304);x.isBackwards?(S.sibling=f.child,f.child=S):(d=x.last,d!==null?d.sibling=S:f.child=S,x.last=S)}return x.tail!==null?(f=x.tail,x.rendering=f,x.tail=f.sibling,x.renderingStartTime=Bt(),f.sibling=null,d=Et.current,gt(Et,m?d&1|2:d&1),f):(An(f),null);case 22:case 23:return k5(),m=f.memoizedState!==null,a!==null&&a.memoizedState!==null!==m&&(f.flags|=8192),m&&f.mode&1?pr&1073741824&&(An(f),f.subtreeFlags&6&&(f.flags|=8192)):An(f),null;case 24:return null;case 25:return null}throw Error(t(156,f.tag))}function rC(a,f){switch(I6(f),f.tag){case 1:return Jn(f.type)&&Sd(),a=f.flags,a&65536?(f.flags=a&-65537|128,f):null;case 3:return n0(),wt(Kn),wt(xn),$6(),a=f.flags,a&65536&&!(a&128)?(f.flags=a&-65537|128,f):null;case 5:return j6(f),null;case 13:if(wt(Et),a=f.memoizedState,a!==null&&a.dehydrated!==null){if(f.alternate===null)throw Error(t(340));Xl()}return a=f.flags,a&65536?(f.flags=a&-65537|128,f):null;case 19:return wt(Et),null;case 4:return n0(),null;case 10:return _6(f.type._context),null;case 22:case 23:return k5(),null;case 24:return null;default:return null}}var Gd=!1,En=!1,iC=typeof WeakSet=="function"?WeakSet:Set,xe=null;function i0(a,f){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){It(a,f,m)}else d.current=null}function c5(a,f,d){try{d()}catch(m){It(a,f,m)}}var S8=!1;function sC(a,f){if(k6=ud,a=rb(),p6(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{d.nodeType,x.nodeType}catch{d=null;break e}var S=0,M=-1,D=-1,K=0,oe=0,fe=a,se=null;t:for(;;){for(var be;fe!==d||b!==0&&fe.nodeType!==3||(M=S+b),fe!==x||m!==0&&fe.nodeType!==3||(D=S+m),fe.nodeType===3&&(S+=fe.nodeValue.length),(be=fe.firstChild)!==null;)se=fe,fe=be;for(;;){if(fe===a)break t;if(se===d&&++K===b&&(M=S),se===x&&++oe===m&&(D=S),(be=fe.nextSibling)!==null)break;fe=se,se=fe.parentNode}fe=be}d=M===-1||D===-1?null:{start:M,end:D}}else d=null}d=d||{start:0,end:0}}else d=null;for(A6={focusedElem:a,selectionRange:d},ud=!1,xe=f;xe!==null;)if(f=xe,a=f.child,(f.subtreeFlags&1028)!==0&&a!==null)a.return=f,xe=a;else for(;xe!==null;){f=xe;try{var Ce=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Ne=Ce.memoizedProps,_t=Ce.memoizedState,j=f.stateNode,_=j.getSnapshotBeforeUpdate(f.elementType===f.type?Ne:Zr(f.type,Ne),_t);j.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var W=f.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){It(f,f.return,ue)}if(a=f.sibling,a!==null){a.return=f.return,xe=a;break}xe=f.return}return Ce=S8,S8=!1,Ce}function yc(a,f,d){var m=f.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&a)===a){var x=b.destroy;b.destroy=void 0,x!==void 0&&c5(f,d,x)}b=b.next}while(b!==m)}}function Wd(a,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var d=f=f.next;do{if((d.tag&a)===a){var m=d.create;d.destroy=m()}d=d.next}while(d!==f)}}function u5(a){var f=a.ref;if(f!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof f=="function"?f(a):f.current=a}}function C8(a){var f=a.alternate;f!==null&&(a.alternate=null,C8(f)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(f=a.stateNode,f!==null&&(delete f[Mi],delete f[oc],delete f[N6],delete f[HS],delete f[jS])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function N8(a){return a.tag===5||a.tag===3||a.tag===4}function T8(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||N8(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function d5(a,f,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,f?d.nodeType===8?d.parentNode.insertBefore(a,f):d.insertBefore(a,f):(d.nodeType===8?(f=d.parentNode,f.insertBefore(a,d)):(f=d,f.appendChild(a)),d=d._reactRootContainer,d!=null||f.onclick!==null||(f.onclick=Ad));else if(m!==4&&(a=a.child,a!==null))for(d5(a,f,d),a=a.sibling;a!==null;)d5(a,f,d),a=a.sibling}function h5(a,f,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,f?d.insertBefore(a,f):d.appendChild(a);else if(m!==4&&(a=a.child,a!==null))for(h5(a,f,d),a=a.sibling;a!==null;)h5(a,f,d),a=a.sibling}var dn=null,ei=!1;function uo(a,f,d){for(d=d.child;d!==null;)M8(a,f,d),d=d.sibling}function M8(a,f,d){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(sd,d)}catch{}switch(d.tag){case 5:En||i0(d,f);case 6:var m=dn,b=ei;dn=null,uo(a,f,d),dn=m,ei=b,dn!==null&&(ei?(a=dn,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):dn.removeChild(d.stateNode));break;case 18:dn!==null&&(ei?(a=dn,d=d.stateNode,a.nodeType===8?C6(a.parentNode,d):a.nodeType===1&&C6(a,d),Jf(a)):C6(dn,d.stateNode));break;case 4:m=dn,b=ei,dn=d.stateNode.containerInfo,ei=!0,uo(a,f,d),dn=m,ei=b;break;case 0:case 11:case 14:case 15:if(!En&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){b=m=m.next;do{var x=b,S=x.destroy;x=x.tag,S!==void 0&&(x&2||x&4)&&c5(d,f,S),b=b.next}while(b!==m)}uo(a,f,d);break;case 1:if(!En&&(i0(d,f),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(M){It(d,f,M)}uo(a,f,d);break;case 21:uo(a,f,d);break;case 22:d.mode&1?(En=(m=En)||d.memoizedState!==null,uo(a,f,d),En=m):uo(a,f,d);break;default:uo(a,f,d)}}function O8(a){var f=a.updateQueue;if(f!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new iC),f.forEach(function(m){var b=pC.bind(null,a,m);d.has(m)||(d.add(m),m.then(b,b))})}}function ti(a,f){var d=f.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m];try{var x=a,S=f,M=S;e:for(;M!==null;){switch(M.tag){case 5:dn=M.stateNode,ei=!1;break e;case 3:dn=M.stateNode.containerInfo,ei=!0;break e;case 4:dn=M.stateNode.containerInfo,ei=!0;break e}M=M.return}if(dn===null)throw Error(t(160));M8(x,S,b),dn=null,ei=!1;var D=b.alternate;D!==null&&(D.return=null),b.return=null}catch(K){It(b,f,K)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)I8(f,a),f=f.sibling}function I8(a,f){var d=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ti(f,a),Pi(a),m&4){try{yc(3,a,a.return),Wd(3,a)}catch(Ne){It(a,a.return,Ne)}try{yc(5,a,a.return)}catch(Ne){It(a,a.return,Ne)}}break;case 1:ti(f,a),Pi(a),m&512&&d!==null&&i0(d,d.return);break;case 5:if(ti(f,a),Pi(a),m&512&&d!==null&&i0(d,d.return),a.flags&32){var b=a.stateNode;try{Ei(b,"")}catch(Ne){It(a,a.return,Ne)}}if(m&4&&(b=a.stateNode,b!=null)){var x=a.memoizedProps,S=d!==null?d.memoizedProps:x,M=a.type,D=a.updateQueue;if(a.updateQueue=null,D!==null)try{M==="input"&&x.type==="radio"&&x.name!=null&&un(b,x),Le(M,S);var K=Le(M,x);for(S=0;S<D.length;S+=2){var oe=D[S],fe=D[S+1];oe==="style"?te(b,fe):oe==="dangerouslySetInnerHTML"?Ys(b,fe):oe==="children"?Ei(b,fe):O(b,oe,fe,K)}switch(M){case"input":Ar(b,x);break;case"textarea":Qr(b,x);break;case"select":var se=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!x.multiple;var be=x.value;be!=null?ki(b,!!x.multiple,be,!1):se!==!!x.multiple&&(x.defaultValue!=null?ki(b,!!x.multiple,x.defaultValue,!0):ki(b,!!x.multiple,x.multiple?[]:"",!1))}b[oc]=x}catch(Ne){It(a,a.return,Ne)}}break;case 6:if(ti(f,a),Pi(a),m&4){if(a.stateNode===null)throw Error(t(162));b=a.stateNode,x=a.memoizedProps;try{b.nodeValue=x}catch(Ne){It(a,a.return,Ne)}}break;case 3:if(ti(f,a),Pi(a),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Jf(f.containerInfo)}catch(Ne){It(a,a.return,Ne)}break;case 4:ti(f,a),Pi(a);break;case 13:ti(f,a),Pi(a),b=a.child,b.flags&8192&&(x=b.memoizedState!==null,b.stateNode.isHidden=x,!x||b.alternate!==null&&b.alternate.memoizedState!==null||(g5=Bt())),m&4&&O8(a);break;case 22:if(oe=d!==null&&d.memoizedState!==null,a.mode&1?(En=(K=En)||oe,ti(f,a),En=K):ti(f,a),Pi(a),m&8192){if(K=a.memoizedState!==null,(a.stateNode.isHidden=K)&&!oe&&a.mode&1)for(xe=a,oe=a.child;oe!==null;){for(fe=xe=oe;xe!==null;){switch(se=xe,be=se.child,se.tag){case 0:case 11:case 14:case 15:yc(4,se,se.return);break;case 1:i0(se,se.return);var Ce=se.stateNode;if(typeof Ce.componentWillUnmount=="function"){m=se,d=se.return;try{f=m,Ce.props=f.memoizedProps,Ce.state=f.memoizedState,Ce.componentWillUnmount()}catch(Ne){It(m,d,Ne)}}break;case 5:i0(se,se.return);break;case 22:if(se.memoizedState!==null){D8(fe);continue}}be!==null?(be.return=se,xe=be):D8(fe)}oe=oe.sibling}e:for(oe=null,fe=a;;){if(fe.tag===5){if(oe===null){oe=fe;try{b=fe.stateNode,K?(x=b.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(M=fe.stateNode,D=fe.memoizedProps.style,S=D!=null&&D.hasOwnProperty("display")?D.display:null,M.style.display=ge("display",S))}catch(Ne){It(a,a.return,Ne)}}}else if(fe.tag===6){if(oe===null)try{fe.stateNode.nodeValue=K?"":fe.memoizedProps}catch(Ne){It(a,a.return,Ne)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===a)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===a)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===a)break e;oe===fe&&(oe=null),fe=fe.return}oe===fe&&(oe=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:ti(f,a),Pi(a),m&4&&O8(a);break;case 21:break;default:ti(f,a),Pi(a)}}function Pi(a){var f=a.flags;if(f&2){try{e:{for(var d=a.return;d!==null;){if(N8(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var b=m.stateNode;m.flags&32&&(Ei(b,""),m.flags&=-33);var x=T8(a);h5(a,x,b);break;case 3:case 4:var S=m.stateNode.containerInfo,M=T8(a);d5(a,M,S);break;default:throw Error(t(161))}}catch(D){It(a,a.return,D)}a.flags&=-3}f&4096&&(a.flags&=-4097)}function oC(a,f,d){xe=a,P8(a)}function P8(a,f,d){for(var m=(a.mode&1)!==0;xe!==null;){var b=xe,x=b.child;if(b.tag===22&&m){var S=b.memoizedState!==null||Gd;if(!S){var M=b.alternate,D=M!==null&&M.memoizedState!==null||En;M=Gd;var K=En;if(Gd=S,(En=D)&&!K)for(xe=b;xe!==null;)S=xe,D=S.child,S.tag===22&&S.memoizedState!==null?L8(b):D!==null?(D.return=S,xe=D):L8(b);for(;x!==null;)xe=x,P8(x),x=x.sibling;xe=b,Gd=M,En=K}R8(a)}else b.subtreeFlags&8772&&x!==null?(x.return=b,xe=x):R8(a)}}function R8(a){for(;xe!==null;){var f=xe;if(f.flags&8772){var d=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:En||Wd(5,f);break;case 1:var m=f.stateNode;if(f.flags&4&&!En)if(d===null)m.componentDidMount();else{var b=f.elementType===f.type?d.memoizedProps:Zr(f.type,d.memoizedProps);m.componentDidUpdate(b,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var x=f.updateQueue;x!==null&&Db(f,x,m);break;case 3:var S=f.updateQueue;if(S!==null){if(d=null,f.child!==null)switch(f.child.tag){case 5:d=f.child.stateNode;break;case 1:d=f.child.stateNode}Db(f,S,d)}break;case 5:var M=f.stateNode;if(d===null&&f.flags&4){d=M;var D=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&d.focus();break;case"img":D.src&&(d.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var K=f.alternate;if(K!==null){var oe=K.memoizedState;if(oe!==null){var fe=oe.dehydrated;fe!==null&&Jf(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}En||f.flags&512&&u5(f)}catch(se){It(f,f.return,se)}}if(f===a){xe=null;break}if(d=f.sibling,d!==null){d.return=f.return,xe=d;break}xe=f.return}}function D8(a){for(;xe!==null;){var f=xe;if(f===a){xe=null;break}var d=f.sibling;if(d!==null){d.return=f.return,xe=d;break}xe=f.return}}function L8(a){for(;xe!==null;){var f=xe;try{switch(f.tag){case 0:case 11:case 15:var d=f.return;try{Wd(4,f)}catch(D){It(f,d,D)}break;case 1:var m=f.stateNode;if(typeof m.componentDidMount=="function"){var b=f.return;try{m.componentDidMount()}catch(D){It(f,b,D)}}var x=f.return;try{u5(f)}catch(D){It(f,x,D)}break;case 5:var S=f.return;try{u5(f)}catch(D){It(f,S,D)}}}catch(D){It(f,f.return,D)}if(f===a){xe=null;break}var M=f.sibling;if(M!==null){M.return=f.return,xe=M;break}xe=f.return}}var aC=Math.ceil,Qd=N.ReactCurrentDispatcher,p5=N.ReactCurrentOwner,Mr=N.ReactCurrentBatchConfig,it=0,nn=null,Wt=null,hn=0,pr=0,s0=oo(0),Yt=0,bc=null,Aa=0,Kd=0,m5=0,wc=null,Yn=null,g5=0,o0=1/0,hs=null,Jd=!1,y5=null,ho=null,qd=!1,po=null,Yd=0,vc=0,b5=null,Xd=-1,Zd=0;function Dn(){return it&6?Bt():Xd!==-1?Xd:Xd=Bt()}function mo(a){return a.mode&1?it&2&&hn!==0?hn&-hn:$S.transition!==null?(Zd===0&&(Zd=T2()),Zd):(a=ut,a!==0||(a=window.event,a=a===void 0?16:_2(a.type)),a):1}function ni(a,f,d,m){if(50<vc)throw vc=0,b5=null,Error(t(185));$f(a,d,m),(!(it&2)||a!==nn)&&(a===nn&&(!(it&2)&&(Kd|=d),Yt===4&&go(a,hn)),Xn(a,m),d===1&&it===0&&!(f.mode&1)&&(o0=Bt()+500,Nd&&lo()))}function Xn(a,f){var d=a.callbackNode;$E(a,f);var m=ld(a,a===nn?hn:0);if(m===0)d!==null&&S2(d),a.callbackNode=null,a.callbackPriority=0;else if(f=m&-m,a.callbackPriority!==f){if(d!=null&&S2(d),f===1)a.tag===0?VS(_8.bind(null,a)):kb(_8.bind(null,a)),zS(function(){!(it&6)&&lo()}),d=null;else{switch(M2(m)){case 1:d=Y1;break;case 4:d=C2;break;case 16:d=id;break;case 536870912:d=N2;break;default:d=id}d=G8(d,B8.bind(null,a))}a.callbackPriority=f,a.callbackNode=d}}function B8(a,f){if(Xd=-1,Zd=0,it&6)throw Error(t(327));var d=a.callbackNode;if(a0()&&a.callbackNode!==d)return null;var m=ld(a,a===nn?hn:0);if(m===0)return null;if(m&30||m&a.expiredLanes||f)f=eh(a,m);else{f=m;var b=it;it|=2;var x=z8();(nn!==a||hn!==f)&&(hs=null,o0=Bt()+500,Sa(a,f));do try{cC();break}catch(M){F8(a,M)}while(!0);B6(),Qd.current=x,it=b,Wt!==null?f=0:(nn=null,hn=0,f=Yt)}if(f!==0){if(f===2&&(b=X1(a),b!==0&&(m=b,f=w5(a,b))),f===1)throw d=bc,Sa(a,0),go(a,m),Xn(a,Bt()),d;if(f===6)go(a,m);else{if(b=a.current.alternate,!(m&30)&&!lC(b)&&(f=eh(a,m),f===2&&(x=X1(a),x!==0&&(m=x,f=w5(a,x))),f===1))throw d=bc,Sa(a,0),go(a,m),Xn(a,Bt()),d;switch(a.finishedWork=b,a.finishedLanes=m,f){case 0:case 1:throw Error(t(345));case 2:Ca(a,Yn,hs);break;case 3:if(go(a,m),(m&130023424)===m&&(f=g5+500-Bt(),10<f)){if(ld(a,0)!==0)break;if(b=a.suspendedLanes,(b&m)!==m){Dn(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=S6(Ca.bind(null,a,Yn,hs),f);break}Ca(a,Yn,hs);break;case 4:if(go(a,m),(m&4194240)===m)break;for(f=a.eventTimes,b=-1;0<m;){var S=31-qr(m);x=1<<S,S=f[S],S>b&&(b=S),m&=~x}if(m=b,m=Bt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*aC(m/1960))-m,10<m){a.timeoutHandle=S6(Ca.bind(null,a,Yn,hs),m);break}Ca(a,Yn,hs);break;case 5:Ca(a,Yn,hs);break;default:throw Error(t(329))}}}return Xn(a,Bt()),a.callbackNode===d?B8.bind(null,a):null}function w5(a,f){var d=wc;return a.current.memoizedState.isDehydrated&&(Sa(a,f).flags|=256),a=eh(a,f),a!==2&&(f=Yn,Yn=d,f!==null&&v5(f)),a}function v5(a){Yn===null?Yn=a:Yn.push.apply(Yn,a)}function lC(a){for(var f=a;;){if(f.flags&16384){var d=f.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var b=d[m],x=b.getSnapshot;b=b.value;try{if(!Yr(x(),b))return!1}catch{return!1}}}if(d=f.child,f.subtreeFlags&16384&&d!==null)d.return=f,f=d;else{if(f===a)break;for(;f.sibling===null;){if(f.return===null||f.return===a)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function go(a,f){for(f&=~m5,f&=~Kd,a.suspendedLanes|=f,a.pingedLanes&=~f,a=a.expirationTimes;0<f;){var d=31-qr(f),m=1<<d;a[d]=-1,f&=~m}}function _8(a){if(it&6)throw Error(t(327));a0();var f=ld(a,0);if(!(f&1))return Xn(a,Bt()),null;var d=eh(a,f);if(a.tag!==0&&d===2){var m=X1(a);m!==0&&(f=m,d=w5(a,m))}if(d===1)throw d=bc,Sa(a,0),go(a,f),Xn(a,Bt()),d;if(d===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=f,Ca(a,Yn,hs),Xn(a,Bt()),null}function x5(a,f){var d=it;it|=1;try{return a(f)}finally{it=d,it===0&&(o0=Bt()+500,Nd&&lo())}}function Ea(a){po!==null&&po.tag===0&&!(it&6)&&a0();var f=it;it|=1;var d=Mr.transition,m=ut;try{if(Mr.transition=null,ut=1,a)return a()}finally{ut=m,Mr.transition=d,it=f,!(it&6)&&lo()}}function k5(){pr=s0.current,wt(s0)}function Sa(a,f){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,FS(d)),Wt!==null)for(d=Wt.return;d!==null;){var m=d;switch(I6(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Sd();break;case 3:n0(),wt(Kn),wt(xn),$6();break;case 5:j6(m);break;case 4:n0();break;case 13:wt(Et);break;case 19:wt(Et);break;case 10:_6(m.type._context);break;case 22:case 23:k5()}d=d.return}if(nn=a,Wt=a=yo(a.current,null),hn=pr=f,Yt=0,bc=null,m5=Kd=Aa=0,Yn=wc=null,va!==null){for(f=0;f<va.length;f++)if(d=va[f],m=d.interleaved,m!==null){d.interleaved=null;var b=m.next,x=d.pending;if(x!==null){var S=x.next;x.next=b,m.next=S}d.pending=m}va=null}return a}function F8(a,f){do{var d=Wt;try{if(B6(),_d.current=Hd,Fd){for(var m=St.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}Fd=!1}if(ka=0,tn=qt=St=null,dc=!1,hc=0,p5.current=null,d===null||d.return===null){Yt=1,bc=f,Wt=null;break}e:{var x=a,S=d.return,M=d,D=f;if(f=hn,M.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=D,oe=M,fe=oe.tag;if(!(oe.mode&1)&&(fe===0||fe===11||fe===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var be=f8(S);if(be!==null){be.flags&=-257,c8(be,S,M,x,f),be.mode&1&&l8(x,K,f),f=be,D=K;var Ce=f.updateQueue;if(Ce===null){var Ne=new Set;Ne.add(D),f.updateQueue=Ne}else Ce.add(D);break e}else{if(!(f&1)){l8(x,K,f),A5();break e}D=Error(t(426))}}else if(At&&M.mode&1){var _t=f8(S);if(_t!==null){!(_t.flags&65536)&&(_t.flags|=256),c8(_t,S,M,x,f),D6(r0(D,M));break e}}x=D=r0(D,M),Yt!==4&&(Yt=2),wc===null?wc=[x]:wc.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,f&=-f,x.lanes|=f;var j=o8(x,D,f);Rb(x,j);break e;case 1:M=D;var _=x.type,W=x.stateNode;if(!(x.flags&128)&&(typeof _.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(ho===null||!ho.has(W)))){x.flags|=65536,f&=-f,x.lanes|=f;var ue=a8(x,M,f);Rb(x,ue);break e}}x=x.return}while(x!==null)}H8(d)}catch(Pe){f=Pe,Wt===d&&d!==null&&(Wt=d=d.return);continue}break}while(!0)}function z8(){var a=Qd.current;return Qd.current=Hd,a===null?Hd:a}function A5(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),nn===null||!(Aa&268435455)&&!(Kd&268435455)||go(nn,hn)}function eh(a,f){var d=it;it|=2;var m=z8();(nn!==a||hn!==f)&&(hs=null,Sa(a,f));do try{fC();break}catch(b){F8(a,b)}while(!0);if(B6(),it=d,Qd.current=m,Wt!==null)throw Error(t(261));return nn=null,hn=0,Yt}function fC(){for(;Wt!==null;)U8(Wt)}function cC(){for(;Wt!==null&&!LE();)U8(Wt)}function U8(a){var f=$8(a.alternate,a,pr);a.memoizedProps=a.pendingProps,f===null?H8(a):Wt=f,p5.current=null}function H8(a){var f=a;do{var d=f.alternate;if(a=f.return,f.flags&32768){if(d=rC(d,f),d!==null){d.flags&=32767,Wt=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Yt=6,Wt=null;return}}else if(d=nC(d,f,pr),d!==null){Wt=d;return}if(f=f.sibling,f!==null){Wt=f;return}Wt=f=a}while(f!==null);Yt===0&&(Yt=5)}function Ca(a,f,d){var m=ut,b=Mr.transition;try{Mr.transition=null,ut=1,uC(a,f,d,m)}finally{Mr.transition=b,ut=m}return null}function uC(a,f,d,m){do a0();while(po!==null);if(it&6)throw Error(t(327));d=a.finishedWork;var b=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var x=d.lanes|d.childLanes;if(GE(a,x),a===nn&&(Wt=nn=null,hn=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||qd||(qd=!0,G8(id,function(){return a0(),null})),x=(d.flags&15990)!==0,d.subtreeFlags&15990||x){x=Mr.transition,Mr.transition=null;var S=ut;ut=1;var M=it;it|=4,p5.current=null,sC(a,d),I8(d,a),IS(A6),ud=!!k6,A6=k6=null,a.current=d,oC(d),BE(),it=M,ut=S,Mr.transition=x}else a.current=d;if(qd&&(qd=!1,po=a,Yd=b),x=a.pendingLanes,x===0&&(ho=null),zE(d.stateNode),Xn(a,Bt()),f!==null)for(m=a.onRecoverableError,d=0;d<f.length;d++)b=f[d],m(b.value,{componentStack:b.stack,digest:b.digest});if(Jd)throw Jd=!1,a=y5,y5=null,a;return Yd&1&&a.tag!==0&&a0(),x=a.pendingLanes,x&1?a===b5?vc++:(vc=0,b5=a):vc=0,lo(),null}function a0(){if(po!==null){var a=M2(Yd),f=Mr.transition,d=ut;try{if(Mr.transition=null,ut=16>a?16:a,po===null)var m=!1;else{if(a=po,po=null,Yd=0,it&6)throw Error(t(331));var b=it;for(it|=4,xe=a.current;xe!==null;){var x=xe,S=x.child;if(xe.flags&16){var M=x.deletions;if(M!==null){for(var D=0;D<M.length;D++){var K=M[D];for(xe=K;xe!==null;){var oe=xe;switch(oe.tag){case 0:case 11:case 15:yc(8,oe,x)}var fe=oe.child;if(fe!==null)fe.return=oe,xe=fe;else for(;xe!==null;){oe=xe;var se=oe.sibling,be=oe.return;if(C8(oe),oe===K){xe=null;break}if(se!==null){se.return=be,xe=se;break}xe=be}}}var Ce=x.alternate;if(Ce!==null){var Ne=Ce.child;if(Ne!==null){Ce.child=null;do{var _t=Ne.sibling;Ne.sibling=null,Ne=_t}while(Ne!==null)}}xe=x}}if(x.subtreeFlags&2064&&S!==null)S.return=x,xe=S;else e:for(;xe!==null;){if(x=xe,x.flags&2048)switch(x.tag){case 0:case 11:case 15:yc(9,x,x.return)}var j=x.sibling;if(j!==null){j.return=x.return,xe=j;break e}xe=x.return}}var _=a.current;for(xe=_;xe!==null;){S=xe;var W=S.child;if(S.subtreeFlags&2064&&W!==null)W.return=S,xe=W;else e:for(S=_;xe!==null;){if(M=xe,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:Wd(9,M)}}catch(Pe){It(M,M.return,Pe)}if(M===S){xe=null;break e}var ue=M.sibling;if(ue!==null){ue.return=M.return,xe=ue;break e}xe=M.return}}if(it=b,lo(),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(sd,a)}catch{}m=!0}return m}finally{ut=d,Mr.transition=f}}return!1}function j8(a,f,d){f=r0(d,f),f=o8(a,f,1),a=co(a,f,1),f=Dn(),a!==null&&($f(a,1,f),Xn(a,f))}function It(a,f,d){if(a.tag===3)j8(a,a,d);else for(;f!==null;){if(f.tag===3){j8(f,a,d);break}else if(f.tag===1){var m=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ho===null||!ho.has(m))){a=r0(d,a),a=a8(f,a,1),f=co(f,a,1),a=Dn(),f!==null&&($f(f,1,a),Xn(f,a));break}}f=f.return}}function dC(a,f,d){var m=a.pingCache;m!==null&&m.delete(f),f=Dn(),a.pingedLanes|=a.suspendedLanes&d,nn===a&&(hn&d)===d&&(Yt===4||Yt===3&&(hn&130023424)===hn&&500>Bt()-g5?Sa(a,0):m5|=d),Xn(a,f)}function V8(a,f){f===0&&(a.mode&1?(f=ad,ad<<=1,!(ad&130023424)&&(ad=4194304)):f=1);var d=Dn();a=cs(a,f),a!==null&&($f(a,f,d),Xn(a,d))}function hC(a){var f=a.memoizedState,d=0;f!==null&&(d=f.retryLane),V8(a,d)}function pC(a,f){var d=0;switch(a.tag){case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(f),V8(a,d)}var $8;$8=function(a,f,d){if(a!==null)if(a.memoizedProps!==f.pendingProps||Kn.current)qn=!0;else{if(!(a.lanes&d)&&!(f.flags&128))return qn=!1,tC(a,f,d);qn=!!(a.flags&131072)}else qn=!1,At&&f.flags&1048576&&Ab(f,Md,f.index);switch(f.lanes=0,f.tag){case 2:var m=f.type;$d(a,f),a=f.pendingProps;var b=Jl(f,xn.current);t0(f,d),b=Q6(null,f,m,a,b,d);var x=K6();return f.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Jn(m)?(x=!0,Cd(f)):x=!1,f.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,U6(f),b.updater=jd,f.stateNode=b,b._reactInternals=f,e5(f,m,a,d),f=i5(null,f,m,!0,x,d)):(f.tag=0,At&&x&&O6(f),Rn(null,f,b,d),f=f.child),f;case 16:m=f.elementType;e:{switch($d(a,f),a=f.pendingProps,b=m._init,m=b(m._payload),f.type=m,b=f.tag=gC(m),a=Zr(m,a),b){case 0:f=r5(null,f,m,a,d);break e;case 1:f=g8(null,f,m,a,d);break e;case 11:f=u8(null,f,m,a,d);break e;case 14:f=d8(null,f,m,Zr(m.type,a),d);break e}throw Error(t(306,m,""))}return f;case 0:return m=f.type,b=f.pendingProps,b=f.elementType===m?b:Zr(m,b),r5(a,f,m,b,d);case 1:return m=f.type,b=f.pendingProps,b=f.elementType===m?b:Zr(m,b),g8(a,f,m,b,d);case 3:e:{if(y8(f),a===null)throw Error(t(387));m=f.pendingProps,x=f.memoizedState,b=x.element,Pb(a,f),Ld(f,m,null,d);var S=f.memoizedState;if(m=S.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},f.updateQueue.baseState=x,f.memoizedState=x,f.flags&256){b=r0(Error(t(423)),f),f=b8(a,f,m,d,b);break e}else if(m!==b){b=r0(Error(t(424)),f),f=b8(a,f,m,d,b);break e}else for(hr=so(f.stateNode.containerInfo.firstChild),dr=f,At=!0,Xr=null,d=Ob(f,null,m,d),f.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Xl(),m===b){f=ds(a,f,d);break e}Rn(a,f,m,d)}f=f.child}return f;case 5:return Lb(f),a===null&&R6(f),m=f.type,b=f.pendingProps,x=a!==null?a.memoizedProps:null,S=b.children,E6(m,b)?S=null:x!==null&&E6(m,x)&&(f.flags|=32),m8(a,f),Rn(a,f,S,d),f.child;case 6:return a===null&&R6(f),null;case 13:return w8(a,f,d);case 4:return H6(f,f.stateNode.containerInfo),m=f.pendingProps,a===null?f.child=Zl(f,null,m,d):Rn(a,f,m,d),f.child;case 11:return m=f.type,b=f.pendingProps,b=f.elementType===m?b:Zr(m,b),u8(a,f,m,b,d);case 7:return Rn(a,f,f.pendingProps,d),f.child;case 8:return Rn(a,f,f.pendingProps.children,d),f.child;case 12:return Rn(a,f,f.pendingProps.children,d),f.child;case 10:e:{if(m=f.type._context,b=f.pendingProps,x=f.memoizedProps,S=b.value,gt(Pd,m._currentValue),m._currentValue=S,x!==null)if(Yr(x.value,S)){if(x.children===b.children&&!Kn.current){f=ds(a,f,d);break e}}else for(x=f.child,x!==null&&(x.return=f);x!==null;){var M=x.dependencies;if(M!==null){S=x.child;for(var D=M.firstContext;D!==null;){if(D.context===m){if(x.tag===1){D=us(-1,d&-d),D.tag=2;var K=x.updateQueue;if(K!==null){K=K.shared;var oe=K.pending;oe===null?D.next=D:(D.next=oe.next,oe.next=D),K.pending=D}}x.lanes|=d,D=x.alternate,D!==null&&(D.lanes|=d),F6(x.return,d,f),M.lanes|=d;break}D=D.next}}else if(x.tag===10)S=x.type===f.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error(t(341));S.lanes|=d,M=S.alternate,M!==null&&(M.lanes|=d),F6(S,d,f),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===f){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}Rn(a,f,b.children,d),f=f.child}return f;case 9:return b=f.type,m=f.pendingProps.children,t0(f,d),b=Nr(b),m=m(b),f.flags|=1,Rn(a,f,m,d),f.child;case 14:return m=f.type,b=Zr(m,f.pendingProps),b=Zr(m.type,b),d8(a,f,m,b,d);case 15:return h8(a,f,f.type,f.pendingProps,d);case 17:return m=f.type,b=f.pendingProps,b=f.elementType===m?b:Zr(m,b),$d(a,f),f.tag=1,Jn(m)?(a=!0,Cd(f)):a=!1,t0(f,d),i8(f,m,b),e5(f,m,b,d),i5(null,f,m,!0,a,d);case 19:return x8(a,f,d);case 22:return p8(a,f,d)}throw Error(t(156,f.tag))};function G8(a,f){return E2(a,f)}function mC(a,f,d,m){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(a,f,d,m){return new mC(a,f,d,m)}function E5(a){return a=a.prototype,!(!a||!a.isReactComponent)}function gC(a){if(typeof a=="function")return E5(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Oe)return 11;if(a===H)return 14}return 2}function yo(a,f){var d=a.alternate;return d===null?(d=Or(a.tag,f,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=f,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,f=a.dependencies,d.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function th(a,f,d,m,b,x){var S=2;if(m=a,typeof a=="function")E5(a)&&(S=1);else if(typeof a=="string")S=5;else e:switch(a){case L:return Na(d.children,b,x,f);case G:S=8,b|=8;break;case ne:return a=Or(12,d,f,b|2),a.elementType=ne,a.lanes=x,a;case Ae:return a=Or(13,d,f,b),a.elementType=Ae,a.lanes=x,a;case U:return a=Or(19,d,f,b),a.elementType=U,a.lanes=x,a;case Y:return nh(d,b,x,f);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case ie:S=10;break e;case pe:S=9;break e;case Oe:S=11;break e;case H:S=14;break e;case z:S=16,m=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return f=Or(S,d,f,b),f.elementType=a,f.type=m,f.lanes=x,f}function Na(a,f,d,m){return a=Or(7,a,m,f),a.lanes=d,a}function nh(a,f,d,m){return a=Or(22,a,m,f),a.elementType=Y,a.lanes=d,a.stateNode={isHidden:!1},a}function S5(a,f,d){return a=Or(6,a,null,f),a.lanes=d,a}function C5(a,f,d){return f=Or(4,a.children!==null?a.children:[],a.key,f),f.lanes=d,f.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},f}function yC(a,f,d,m,b){this.tag=f,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z1(0),this.expirationTimes=Z1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z1(0),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function N5(a,f,d,m,b,x,S,M,D){return a=new yC(a,f,d,M,D),f===1?(f=1,x===!0&&(f|=8)):f=0,x=Or(3,null,null,f),a.current=x,x.stateNode=a,x.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},U6(x),a}function bC(a,f,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:m==null?null:""+m,children:a,containerInfo:f,implementation:d}}function W8(a){if(!a)return ao;a=a._reactInternals;e:{if(ma(a)!==a||a.tag!==1)throw Error(t(170));var f=a;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Jn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(t(171))}if(a.tag===1){var d=a.type;if(Jn(d))return vb(a,d,f)}return f}function Q8(a,f,d,m,b,x,S,M,D){return a=N5(d,m,!0,a,b,x,S,M,D),a.context=W8(null),d=a.current,m=Dn(),b=mo(d),x=us(m,b),x.callback=f??null,co(d,x,b),a.current.lanes=b,$f(a,b,m),Xn(a,m),a}function rh(a,f,d,m){var b=f.current,x=Dn(),S=mo(b);return d=W8(d),f.context===null?f.context=d:f.pendingContext=d,f=us(x,S),f.payload={element:a},m=m===void 0?null:m,m!==null&&(f.callback=m),a=co(b,f,S),a!==null&&(ni(a,b,S,x),Dd(a,b,S)),S}function ih(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function K8(a,f){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<f?d:f}}function T5(a,f){K8(a,f),(a=a.alternate)&&K8(a,f)}var J8=typeof reportError=="function"?reportError:function(a){console.error(a)};function M5(a){this._internalRoot=a}sh.prototype.render=M5.prototype.render=function(a){var f=this._internalRoot;if(f===null)throw Error(t(409));rh(a,f,null,null)},sh.prototype.unmount=M5.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var f=a.containerInfo;Ea(function(){rh(null,a,null,null)}),f[ss]=null}};function sh(a){this._internalRoot=a}sh.prototype.unstable_scheduleHydration=function(a){if(a){var f=P2();a={blockedOn:null,target:a,priority:f};for(var d=0;d<no.length&&f!==0&&f<no[d].priority;d++);no.splice(d,0,a),d===0&&L2(a)}};function O5(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function oh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function q8(){}function wC(a,f,d,m,b){if(b){if(typeof m=="function"){var x=m;m=function(){var K=ih(S);x.call(K)}}var S=Q8(f,m,a,0,null,!1,!1,"",q8);return a._reactRootContainer=S,a[ss]=S.current,ic(a.nodeType===8?a.parentNode:a),Ea(),S}for(;b=a.lastChild;)a.removeChild(b);if(typeof m=="function"){var M=m;m=function(){var K=ih(D);M.call(K)}}var D=N5(a,0,!1,null,null,!1,!1,"",q8);return a._reactRootContainer=D,a[ss]=D.current,ic(a.nodeType===8?a.parentNode:a),Ea(function(){rh(f,D,d,m)}),D}function ah(a,f,d,m,b){var x=d._reactRootContainer;if(x){var S=x;if(typeof b=="function"){var M=b;b=function(){var D=ih(S);M.call(D)}}rh(f,S,a,b)}else S=wC(d,f,a,b,m);return ih(S)}O2=function(a){switch(a.tag){case 3:var f=a.stateNode;if(f.current.memoizedState.isDehydrated){var d=Vf(f.pendingLanes);d!==0&&(e6(f,d|1),Xn(f,Bt()),!(it&6)&&(o0=Bt()+500,lo()))}break;case 13:Ea(function(){var m=cs(a,1);if(m!==null){var b=Dn();ni(m,a,1,b)}}),T5(a,1)}},t6=function(a){if(a.tag===13){var f=cs(a,134217728);if(f!==null){var d=Dn();ni(f,a,134217728,d)}T5(a,134217728)}},I2=function(a){if(a.tag===13){var f=mo(a),d=cs(a,f);if(d!==null){var m=Dn();ni(d,a,f,m)}T5(a,f)}},P2=function(){return ut},R2=function(a,f){var d=ut;try{return ut=a,f()}finally{ut=d}},mt=function(a,f,d){switch(f){case"input":if(Ar(a,d),f=d.name,d.type==="radio"&&f!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<d.length;f++){var m=d[f];if(m!==a&&m.form===a.form){var b=Ed(m);if(!b)throw Error(t(90));fr(m),Ar(m,b)}}}break;case"textarea":Qr(a,d);break;case"select":f=d.value,f!=null&&ki(a,!!d.multiple,f,!1)}},en=x5,Kr=Ea;var vC={usingClientEntryPoint:!1,Events:[ac,Ql,Ed,Ci,Ni,x5]},xc={findFiberByHostInstance:ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xC={bundleType:xc.bundleType,version:xc.version,rendererPackageName:xc.rendererPackageName,rendererConfig:xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=k2(a),a===null?null:a.stateNode},findFiberByHostInstance:xc.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{sd=lh.inject(xC),Ti=lh}catch{}}return Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vC,Zn.createPortal=function(a,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O5(f))throw Error(t(200));return bC(a,f,null,d)},Zn.createRoot=function(a,f){if(!O5(a))throw Error(t(299));var d=!1,m="",b=J8;return f!=null&&(f.unstable_strictMode===!0&&(d=!0),f.identifierPrefix!==void 0&&(m=f.identifierPrefix),f.onRecoverableError!==void 0&&(b=f.onRecoverableError)),f=N5(a,1,!1,null,null,d,!1,m,b),a[ss]=f.current,ic(a.nodeType===8?a.parentNode:a),new M5(f)},Zn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var f=a._reactInternals;if(f===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=k2(f),a=a===null?null:a.stateNode,a},Zn.flushSync=function(a){return Ea(a)},Zn.hydrate=function(a,f,d){if(!oh(f))throw Error(t(200));return ah(null,a,f,!0,d)},Zn.hydrateRoot=function(a,f,d){if(!O5(a))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,b=!1,x="",S=J8;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),f=Q8(f,null,a,1,d??null,b,!1,x,S),a[ss]=f.current,ic(a),m)for(a=0;a<m.length;a++)d=m[a],b=d._getVersion,b=b(d._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[d,b]:f.mutableSourceEagerHydrationData.push(d,b);return new sh(f)},Zn.render=function(a,f,d){if(!oh(f))throw Error(t(200));return ah(null,a,f,!1,d)},Zn.unmountComponentAtNode=function(a){if(!oh(a))throw Error(t(40));return a._reactRootContainer?(Ea(function(){ah(null,null,a,!1,function(){a._reactRootContainer=null,a[ss]=null})}),!0):!1},Zn.unstable_batchedUpdates=x5,Zn.unstable_renderSubtreeIntoContainer=function(a,f,d,m){if(!oh(d))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return ah(a,f,d,!1,m)},Zn.version="18.3.1-next-f1338f8080-20240426",Zn}var sw;function Mx(){if(sw)return D5.exports;sw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),D5.exports=OC(),D5.exports}var ow;function IC(){if(ow)return fh;ow=1;var n=Mx();return fh.createRoot=n.createRoot,fh.hydrateRoot=n.hydrateRoot,fh}var PC=IC();const RC="6.13.1";function DC(n,e,t){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=n,i}async function _n(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function je(n,e,t){for(let r in e){let i=e[r];const s=t?t[r]:null;s&&DC(i,s,r),Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function v0(n){if(n==null)return"null";if(Array.isArray(n))return"[ "+n.map(v0).join(", ")+" ]";if(n instanceof Uint8Array){const e="0123456789abcdef";let t="0x";for(let r=0;r<n.length;r++)t+=e[n[r]>>4],t+=e[n[r]&15];return t}if(typeof n=="object"&&typeof n.toJSON=="function")return v0(n.toJSON());switch(typeof n){case"boolean":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"number":return n.toString();case"string":return JSON.stringify(n);case"object":{const e=Object.keys(n);return e.sort(),"{ "+e.map(t=>`${v0(t)}: ${v0(n[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Mn(n,e){return n&&n.code===e}function ry(n){return Mn(n,"CALL_EXCEPTION")}function Rt(n,e,t){let r=n;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${v0(t)}`);for(const o in t){if(o==="shortMessage")continue;const l=t[o];s.push(o+"="+v0(l))}}s.push(`code=${e}`),s.push(`version=${RC}`),s.length&&(n+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return je(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&je(i,{shortMessage:r}),i}function re(n,e,t,r){if(!n)throw Rt(e,t,r)}function F(n,e,t,r){re(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function Ox(n,e,t){t==null&&(t=""),t&&(t=": "+t),re(n>=e,"missing arguemnt"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),re(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function $u(n,e,t){if(t==null&&(t=""),n!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),re(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Ix(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(n.substring(i,i+2),16),i+=2;return r}F(!1,"invalid BytesLike value",e||"value",n)}function rt(n,e){return Ix(n,e,!1)}function Fn(n,e){return Ix(n,e,!0)}function yt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function iy(n){return yt(n,!0)||n instanceof Uint8Array}const aw="0123456789abcdef";function Se(n){const e=rt(n);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=aw[(i&240)>>4]+aw[i&15]}return t}function jt(n){return"0x"+n.map(e=>Se(e).substring(2)).join("")}function T0(n){return yt(n,!0)?(n.length-2)/2:rt(n).length}function Dt(n,e,t){const r=rt(n);return t!=null&&t>r.length&&re(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),Se(r.slice(e??0,t??r.length))}function Px(n,e,t){const r=rt(n);re(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(r,e-r.length):i.set(r,0),Se(i)}function Al(n,e){return Px(n,e,!0)}function LC(n,e){return Px(n,e,!1)}const y1=BigInt(0),di=BigInt(1),x0=9007199254740991;function np(n,e){const t=b1(n,"value"),r=BigInt(Ke(e,"width"));if(re(t>>r===y1,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-di){const i=(di<<r)-di;return-((~t&i)+di)}return t}function Rx(n,e){let t=Te(n,"value");const r=BigInt(Ke(e,"width")),i=di<<r-di;if(t<y1){t=-t,re(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const s=(di<<r)-di;return(~t&s)+di}else re(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function _a(n,e){const t=b1(n,"value"),r=BigInt(Ke(e,"bits"));return t&(di<<r)-di}function Te(n,e){switch(typeof n){case"bigint":return n;case"number":return F(Number.isInteger(n),"underflow",e||"value",n),F(n>=-x0&&n<=x0,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){F(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}F(!1,"invalid BigNumberish value",e||"value",n)}function b1(n,e){const t=Te(n,e);return re(t>=y1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const lw="0123456789abcdef";function w1(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=lw[t>>4],e+=lw[t&15];return BigInt(e)}return Te(n)}function Ke(n,e){switch(typeof n){case"bigint":return F(n>=-x0&&n<=x0,"overflow",e||"value",n),Number(n);case"number":return F(Number.isInteger(n),"underflow",e||"value",n),F(n>=-x0&&n<=x0,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return Ke(BigInt(n),e)}catch(t){F(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}F(!1,"invalid numeric value",e||"value",n)}function BC(n){return Ke(w1(n))}function sa(n,e){let r=b1(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Ke(e,"width");for(re(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function Un(n){const e=b1(n,"value");if(e===y1)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(t.substring(s,s+2),16)}return r}function k0(n){let e=Se(iy(n)?n:Un(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const fw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const cw=BigInt(58);function _C(n){const e=rt(n);let t=w1(e),r="";for(;t;)r=fw[Number(t%cw)]+r,t/=cw;for(let i=0;i<e.length&&!e[i];i++)r=fw[0]+r;return r}function FC(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return rt(e)}function zC(n){const e=rt(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var _0;class Dx{constructor(e,t,r){$(this,"filter");$(this,"emitter");J(this,_0);T(this,_0,t),je(this,{emitter:e,filter:r})}async removeListener(){E(this,_0)!=null&&await this.emitter.off(this.filter,E(this,_0))}}_0=new WeakMap;function UC(n,e,t,r,i){F(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function Lx(n,e,t,r,i){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n==="OVERRUN"?t.length-e-1:0}function HC(n,e,t,r,i){return n==="OVERLONG"?(F(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),Lx(n,e,t))}const jC=Object.freeze({error:UC,ignore:Lx,replace:HC});function VC(n,e){e==null&&(e=jC.error);const t=rt(n,"bytes"),r=[];let i=0;for(;i<t.length;){const s=t[i++];if(!(s>>7)){r.push(s);continue}let o=null,l=null;if((s&224)===192)o=1,l=127;else if((s&240)===224)o=2,l=2047;else if((s&248)===240)o=3,l=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,r):i+=e("BAD_PREFIX",i-1,t,r);continue}if(i-1+o>=t.length){i+=e("OVERRUN",i-1,t,r);continue}let c=s&(1<<8-o-1)-1;for(let u=0;u<o;u++){let h=t[i];if((h&192)!=128){i+=e("MISSING_CONTINUE",i,t,r),c=null;break}c=c<<6|h&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-o,t,r,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-o,t,r,c);continue}if(c<=l){i+=e("OVERLONG",i-1-o,t,r,c);continue}r.push(c)}}return r}function Vs(n,e){F(typeof n=="string","invalid string value","str",n);let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);F(r<n.length&&(s&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function $C(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function rp(n,e){return $C(VC(n,e))}function Bx(n){async function e(t,r){re(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();re(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),re(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,l=setTimeout(()=>{s=Rt("request timeout","TIMEOUT"),o.abort()},t.timeout);r&&r.addListener(()=>{s=Rt("request cancelled","CANCELLED"),o.abort()});const c={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal};let u;try{u=await fetch(t.url,c)}catch(y){throw clearTimeout(l),s||y}clearTimeout(l);const h={};u.headers.forEach((y,w)=>{h[w.toLowerCase()]=y});const p=await u.arrayBuffer(),g=p==null?null:new Uint8Array(p);return{statusCode:u.status,statusMessage:u.statusText,headers:h,body:g}}return e}const GC=12,WC=250;let uw=Bx();const QC=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),KC=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let _5=!1;async function _x(n,e){try{const t=n.match(QC);if(!t)throw new Error("invalid data");return new ea(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?FC(t[3]):qC(t[3]))}catch{return new ea(599,"BAD REQUEST (invalid data: URI)",{},null,new Ws(n))}}function Fx(n){async function e(t,r){try{const i=t.match(KC);if(!i)throw new Error("invalid link");return new Ws(`${n}${i[2]}`)}catch{return new ea(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ws(t))}}return e}const ch={data:_x,ipfs:Fx("https://gateway.ipfs.io/ipfs/")},zx=new WeakMap;var Wa,Ro;class JC{constructor(e){J(this,Wa);J(this,Ro);T(this,Wa,[]),T(this,Ro,!1),zx.set(e,()=>{if(!E(this,Ro)){T(this,Ro,!0);for(const t of E(this,Wa))setTimeout(()=>{t()},0);T(this,Wa,[])}})}addListener(e){re(!E(this,Ro),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),E(this,Wa).push(e)}get cancelled(){return E(this,Ro)}checkSignal(){re(!this.cancelled,"cancelled","CANCELLED",{})}}Wa=new WeakMap,Ro=new WeakMap;function uh(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var F0,z0,ai,Ns,U0,H0,sn,yr,Ts,Qa,Ka,Ja,Fi,li,Do,qa,Dc;const c1=class c1{constructor(e){J(this,qa);J(this,F0);J(this,z0);J(this,ai);J(this,Ns);J(this,U0);J(this,H0);J(this,sn);J(this,yr);J(this,Ts);J(this,Qa);J(this,Ka);J(this,Ja);J(this,Fi);J(this,li);J(this,Do);T(this,H0,String(e)),T(this,F0,!1),T(this,z0,!0),T(this,ai,{}),T(this,Ns,""),T(this,U0,3e5),T(this,li,{slotInterval:WC,maxAttempts:GC}),T(this,Do,null)}get url(){return E(this,H0)}set url(e){T(this,H0,String(e))}get body(){return E(this,sn)==null?null:new Uint8Array(E(this,sn))}set body(e){if(e==null)T(this,sn,void 0),T(this,yr,void 0);else if(typeof e=="string")T(this,sn,Vs(e)),T(this,yr,"text/plain");else if(e instanceof Uint8Array)T(this,sn,e),T(this,yr,"application/octet-stream");else if(typeof e=="object")T(this,sn,Vs(JSON.stringify(e))),T(this,yr,"application/json");else throw new Error("invalid body")}hasBody(){return E(this,sn)!=null}get method(){return E(this,Ns)?E(this,Ns):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),T(this,Ns,String(e).toUpperCase())}get headers(){const e=Object.assign({},E(this,ai));return E(this,Ts)&&(e.authorization=`Basic ${zC(Vs(E(this,Ts)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&E(this,yr)&&(e["content-type"]=E(this,yr)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){E(this,ai)[String(e).toLowerCase()]=String(t)}clearHeaders(){T(this,ai,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return E(this,Ts)||null}setCredentials(e,t){F(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),T(this,Ts,`${e}:${t}`)}get allowGzip(){return E(this,z0)}set allowGzip(e){T(this,z0,!!e)}get allowInsecureAuthentication(){return!!E(this,F0)}set allowInsecureAuthentication(e){T(this,F0,!!e)}get timeout(){return E(this,U0)}set timeout(e){F(e>=0,"timeout must be non-zero","timeout",e),T(this,U0,e)}get preflightFunc(){return E(this,Qa)||null}set preflightFunc(e){T(this,Qa,e)}get processFunc(){return E(this,Ka)||null}set processFunc(e){T(this,Ka,e)}get retryFunc(){return E(this,Ja)||null}set retryFunc(e){T(this,Ja,e)}get getUrlFunc(){return E(this,Do)||uw}set getUrlFunc(e){T(this,Do,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${E(this,sn)?Se(E(this,sn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(E(this,li).slotInterval=e.slotInterval),e.maxAttempts!=null&&(E(this,li).maxAttempts=e.maxAttempts)}send(){return re(E(this,Fi)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),T(this,Fi,new JC(this)),le(this,qa,Dc).call(this,0,dw()+this.timeout,0,this,new ea(0,"",{},null,this))}cancel(){re(E(this,Fi)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=zx.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();re(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new c1(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,T(i,ai,Object.assign({},E(this,ai))),E(this,sn)&&T(i,sn,new Uint8Array(E(this,sn))),T(i,yr,E(this,yr)),i}clone(){const e=new c1(this.url);return T(e,Ns,E(this,Ns)),E(this,sn)&&T(e,sn,E(this,sn)),T(e,yr,E(this,yr)),T(e,ai,Object.assign({},E(this,ai))),T(e,Ts,E(this,Ts)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),T(e,Qa,E(this,Qa)),T(e,Ka,E(this,Ka)),T(e,Ja,E(this,Ja)),T(e,li,Object.assign({},E(this,li))),T(e,Do,E(this,Do)),e}static lockConfig(){_5=!0}static getGateway(e){return ch[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(_5)throw new Error("gateways locked");ch[e]=t}static registerGetUrl(e){if(_5)throw new Error("gateways locked");uw=e}static createGetUrlFunc(e){return Bx()}static createDataGateway(){return _x}static createIpfsGatewayFunc(e){return Fx(e)}};F0=new WeakMap,z0=new WeakMap,ai=new WeakMap,Ns=new WeakMap,U0=new WeakMap,H0=new WeakMap,sn=new WeakMap,yr=new WeakMap,Ts=new WeakMap,Qa=new WeakMap,Ka=new WeakMap,Ja=new WeakMap,Fi=new WeakMap,li=new WeakMap,Do=new WeakMap,qa=new WeakSet,Dc=async function(e,t,r,i,s){var h,p,g;if(e>=E(this,li).maxAttempts)return s.makeServerError("exceeded maximum retry limit");re(dw()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await YC(r);let o=this.clone();const l=(o.url.split(":")[0]||"").toLowerCase();if(l in ch){const y=await ch[l](o.url,uh(E(i,Fi)));if(y instanceof ea){let w=y;if(this.processFunc){uh(E(i,Fi));try{w=await this.processFunc(o,w)}catch(v){(v.throttle==null||typeof v.stall!="number")&&w.makeServerError("error in post-processing function",v).assertOk()}}return w}o=y}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,uh(E(i,Fi)));let u=new ea(c.statusCode,c.statusMessage,c.headers,c.body,i);if(u.statusCode===301||u.statusCode===302){try{const y=u.headers.location||"";return le(h=o.redirect(y),qa,Dc).call(h,e+1,t,0,i,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,e))){const y=u.headers["retry-after"];let w=E(this,li).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof y=="string"&&y.match(/^[1-9][0-9]*$/)&&(w=parseInt(y)),le(p=o.clone(),qa,Dc).call(p,e+1,t,w,i,u)}if(this.processFunc){uh(E(i,Fi));try{u=await this.processFunc(o,u)}catch(y){(y.throttle==null||typeof y.stall!="number")&&u.makeServerError("error in post-processing function",y).assertOk();let w=E(this,li).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return y.stall>=0&&(w=y.stall),le(g=o.clone(),qa,Dc).call(g,e+1,t,w,i,u)}}return u};let Ws=c1;var Iu,Pu,Ru,br,j0,Ya;const y2=class y2{constructor(e,t,r,i,s){J(this,Iu);J(this,Pu);J(this,Ru);J(this,br);J(this,j0);J(this,Ya);T(this,Iu,e),T(this,Pu,t),T(this,Ru,Object.keys(r).reduce((o,l)=>(o[l.toLowerCase()]=String(r[l]),o),{})),T(this,br,i==null?null:new Uint8Array(i)),T(this,j0,s||null),T(this,Ya,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${E(this,br)?Se(E(this,br)):"null"}>`}get statusCode(){return E(this,Iu)}get statusMessage(){return E(this,Pu)}get headers(){return Object.assign({},E(this,Ru))}get body(){return E(this,br)==null?null:new Uint8Array(E(this,br))}get bodyText(){try{return E(this,br)==null?"":rp(E(this,br))}catch{re(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{re(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new y2(599,r,this.headers,this.body,E(this,j0)||void 0);return T(i,Ya,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:F(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw je(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return E(this,br)!=null}get request(){return E(this,j0)}ok(){return E(this,Ya).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=E(this,Ya);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{E(this,br)&&(i=rp(E(this,br)))}catch{}re(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Iu=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,br=new WeakMap,j0=new WeakMap,Ya=new WeakMap;let ea=y2;function dw(){return new Date().getTime()}function qC(n){return Vs(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function YC(n){return new Promise(e=>setTimeout(e,n))}const XC=BigInt(-1),ii=BigInt(0),A0=BigInt(1),ZC=BigInt(5),l0={};let M0="0000";for(;M0.length<80;)M0+=M0;function Ta(n){let e=M0;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function Ec(n,e,t){const r=BigInt(e.width);if(e.signed){const i=A0<<r-A0;re(t==null||n>=-i&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>ii?n=np(_a(n,r),r):n=-np(_a(-n,r),r)}else{const i=A0<<r;re(t==null||n>=0&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%i+i)%i&i-A0}return n}function F5(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const s=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);F(s,"invalid fixed format","format",n),e=s[1]!=="u",t=parseInt(s[2]),r=parseInt(s[3])}}else if(n){const s=n,o=(l,c,u)=>s[l]==null?u:(F(typeof s[l]===c,"invalid fixed format ("+l+" not "+c+")","format."+l,s[l]),s[l]);e=o("signed","boolean",e),t=o("width","number",t),r=o("decimals","number",r)}F(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),F(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:i}}function eN(n,e){let t="";n<ii&&(t="-",n*=XC);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=M0+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}var fi,dt,Ln,ft,Oa,vs,Bm,_m,Fm,zm;const Oo=class Oo{constructor(e,t,r){J(this,ft);$(this,"format");J(this,fi);J(this,dt);J(this,Ln);$(this,"_value");$u(e,l0,"FixedNumber"),T(this,dt,t),T(this,fi,r);const i=eN(t,r.decimals);je(this,{format:r.name,_value:i}),T(this,Ln,Ta(r.decimals))}get signed(){return E(this,fi).signed}get width(){return E(this,fi).width}get decimals(){return E(this,fi).decimals}get value(){return E(this,dt)}addUnsafe(e){return le(this,ft,Bm).call(this,e)}add(e){return le(this,ft,Bm).call(this,e,"add")}subUnsafe(e){return le(this,ft,_m).call(this,e)}sub(e){return le(this,ft,_m).call(this,e,"sub")}mulUnsafe(e){return le(this,ft,Fm).call(this,e)}mul(e){return le(this,ft,Fm).call(this,e,"mul")}mulSignal(e){le(this,ft,Oa).call(this,e);const t=E(this,dt)*E(e,dt);return re(t%E(this,Ln)===ii,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),le(this,ft,vs).call(this,t/E(this,Ln),"mulSignal")}divUnsafe(e){return le(this,ft,zm).call(this,e)}div(e){return le(this,ft,zm).call(this,e,"div")}divSignal(e){re(E(e,dt)!==ii,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),le(this,ft,Oa).call(this,e);const t=E(this,dt)*E(this,Ln);return re(t%E(e,dt)===ii,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),le(this,ft,vs).call(this,t/E(e,dt),"divSignal")}cmp(e){let t=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=Ta(i):i<0&&(t*=Ta(-i)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=E(this,dt);return E(this,dt)<ii&&(e-=E(this,Ln)-A0),e=E(this,dt)/E(this,Ln)*E(this,Ln),le(this,ft,vs).call(this,e,"floor")}ceiling(){let e=E(this,dt);return E(this,dt)>ii&&(e+=E(this,Ln)-A0),e=E(this,dt)/E(this,Ln)*E(this,Ln),le(this,ft,vs).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=ZC*Ta(t-1);let i=this.value+r;const s=Ta(t);return i=i/s*s,Ec(i,E(this,fi),"round"),new Oo(l0,i,E(this,fi))}isZero(){return E(this,dt)===ii}isNegative(){return E(this,dt)<ii}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Oo.fromString(this.toString(),e)}static fromValue(e,t,r){const i=t==null?0:Ke(t),s=F5(r);let o=Te(e,"value");const l=i-s.decimals;if(l>0){const c=Ta(l);re(o%c===ii,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else l<0&&(o*=Ta(-l));return Ec(o,s,"fromValue"),new Oo(l0,o,s)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);F(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=F5(t);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=M0;re(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const l=BigInt(r[1]+s+o);return Ec(l,i,"fromString"),new Oo(l0,l,i)}static fromBytes(e,t){let r=w1(rt(e,"value"));const i=F5(t);return i.signed&&(r=np(r,i.width)),Ec(r,i,"fromBytes"),new Oo(l0,r,i)}};fi=new WeakMap,dt=new WeakMap,Ln=new WeakMap,ft=new WeakSet,Oa=function(e){F(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},vs=function(e,t){return e=Ec(e,E(this,fi),t),new Oo(l0,e,E(this,fi))},Bm=function(e,t){return le(this,ft,Oa).call(this,e),le(this,ft,vs).call(this,E(this,dt)+E(e,dt),t)},_m=function(e,t){return le(this,ft,Oa).call(this,e),le(this,ft,vs).call(this,E(this,dt)-E(e,dt),t)},Fm=function(e,t){return le(this,ft,Oa).call(this,e),le(this,ft,vs).call(this,E(this,dt)*E(e,dt)/E(this,Ln),t)},zm=function(e,t){return re(E(e,dt)!==ii,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),le(this,ft,Oa).call(this,e),le(this,ft,vs).call(this,E(this,dt)*E(this,Ln)/E(e,dt),t)};let ip=Oo;function tN(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function hw(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function pw(n,e,t,r){const i=[];for(;t<e+1+r;){const s=Ux(n,t);i.push(s.result),t+=s.consumed,re(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:i}}function Ux(n,e){re(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{re(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const i=hw(n,e+1,r);return t(e+1+r+i),pw(n,e,e+1+r,r+i)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),pw(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const i=hw(n,e+1,r);t(e+1+r+i);const s=Se(n.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const i=Se(n.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:tN(n[e])}}function v1(n){const e=rt(n,"data"),t=Ux(e,0);return F(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function mw(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function Hx(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(Hx(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=mw(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(rt(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=mw(e.length);return t.unshift(183+t.length),t.concat(e)}const gw="0123456789abcdef";function El(n){let e="0x";for(const t of Hx(n))e+=gw[t>>4],e+=gw[t&15];return e}function nN(n,e){let t=18;return t=Ke(e,"unit"),ip.fromValue(n,t,{decimals:t,width:512}).toString()}function rN(n,e){F(typeof n=="string","value must be a string","value",n);let t=18;return t=Ke(e,"unit"),ip.fromString(n,{decimals:t,width:512}).value}function iN(n){return nN(n,18)}function ps(n){return rN(n,18)}const Hn=32,Um=new Uint8Array(Hn),sN=["then"],dh={},jx=new WeakMap;function Pa(n){return jx.get(n)}function yw(n,e){jx.set(n,e)}function Sc(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function Hm(n,e,t){return n.indexOf(null)>=0?e.map((r,i)=>r instanceof Af?Hm(Pa(r),r,t):r):n.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(t&&o instanceof Af&&(o=Hm(Pa(o),o,t)),r[i]=o),r},{})}var V0;const S0=class S0 extends Array{constructor(...t){const r=t[0];let i=t[1],s=(t[2]||[]).slice(),o=!0;r!==dh&&(i=t,s=[],o=!1);super(i.length);J(this,V0);i.forEach((u,h)=>{this[h]=u});const l=s.reduce((u,h)=>(typeof h=="string"&&u.set(h,(u.get(h)||0)+1),u),new Map);if(yw(this,Object.freeze(i.map((u,h)=>{const p=s[h];return p!=null&&l.get(p)===1?p:null}))),T(this,V0,[]),E(this,V0)==null&&E(this,V0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(u,h,p)=>{if(typeof h=="string"){if(h.match(/^[0-9]+$/)){const y=Ke(h,"%index");if(y<0||y>=this.length)throw new RangeError("out of result range");const w=u[y];return w instanceof Error&&Sc(`index ${y}`,w),w}if(sN.indexOf(h)>=0)return Reflect.get(u,h,p);const g=u[h];if(g instanceof Function)return function(...y){return g.apply(this===p?u:this,y)};if(!(h in u))return u.getValue.apply(this===p?u:this,[h])}return Reflect.get(u,h,p)}});return yw(c,Pa(this)),c}toArray(t){const r=[];return this.forEach((i,s)=>{i instanceof Error&&Sc(`index ${s}`,i),t&&i instanceof S0&&(i=i.toArray(t)),r.push(i)}),r}toObject(t){const r=Pa(this);return r.reduce((i,s,o)=>(re(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Hm(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=Pa(this),s=[],o=[];for(let l=t;l<r;l++)s.push(this[l]),o.push(i[l]);return new S0(dh,s,o)}filter(t,r){const i=Pa(this),s=[],o=[];for(let l=0;l<this.length;l++){const c=this[l];c instanceof Error&&Sc(`index ${l}`,c),t.call(r,c,l,this)&&(s.push(c),o.push(i[l]))}return new S0(dh,s,o)}map(t,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&Sc(`index ${s}`,o),i.push(t.call(r,o,s,this))}return i}getValue(t){const r=Pa(this).indexOf(t);if(r===-1)return;const i=this[r];return i instanceof Error&&Sc(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,r){return new S0(dh,t,r)}};V0=new WeakMap;let Af=S0;function bw(n){let e=Un(n);return re(e.length<=Hn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Hn,offset:e.length}),e.length!==Hn&&(e=Fn(jt([Um.slice(e.length%Hn),e]))),e}class Js{constructor(e,t,r,i){$(this,"name");$(this,"type");$(this,"localName");$(this,"dynamic");je(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){F(!1,e,this.localName,t)}}var Ms,Xa,$0,_h;class jm{constructor(){J(this,$0);J(this,Ms);J(this,Xa);T(this,Ms,[]),T(this,Xa,0)}get data(){return jt(E(this,Ms))}get length(){return E(this,Xa)}appendWriter(e){return le(this,$0,_h).call(this,Fn(e.data))}writeBytes(e){let t=Fn(e);const r=t.length%Hn;return r&&(t=Fn(jt([t,Um.slice(r)]))),le(this,$0,_h).call(this,t)}writeValue(e){return le(this,$0,_h).call(this,bw(e))}writeUpdatableValue(){const e=E(this,Ms).length;return E(this,Ms).push(Um),T(this,Xa,E(this,Xa)+Hn),t=>{E(this,Ms)[e]=bw(t)}}}Ms=new WeakMap,Xa=new WeakMap,$0=new WeakSet,_h=function(e){return E(this,Ms).push(e),T(this,Xa,E(this,Xa)+e.length),e.length};var er,wr,Za,el,Lo,Dl,$m,Vx;const b2=class b2{constructor(e,t,r){J(this,Dl);$(this,"allowLoose");J(this,er);J(this,wr);J(this,Za);J(this,el);J(this,Lo);je(this,{allowLoose:!!t}),T(this,er,Fn(e)),T(this,Za,0),T(this,el,null),T(this,Lo,r??1024),T(this,wr,0)}get data(){return Se(E(this,er))}get dataLength(){return E(this,er).length}get consumed(){return E(this,wr)}get bytes(){return new Uint8Array(E(this,er))}subReader(e){const t=new b2(E(this,er).slice(E(this,wr)+e),this.allowLoose,E(this,Lo));return T(t,el,this),t}readBytes(e,t){let r=le(this,Dl,Vx).call(this,0,e,!!t);return le(this,Dl,$m).call(this,e),T(this,wr,E(this,wr)+r.length),r.slice(0,e)}readValue(){return w1(this.readBytes(Hn))}readIndex(){return BC(this.readBytes(Hn))}};er=new WeakMap,wr=new WeakMap,Za=new WeakMap,el=new WeakMap,Lo=new WeakMap,Dl=new WeakSet,$m=function(e){var t;if(E(this,el))return le(t=E(this,el),Dl,$m).call(t,e);T(this,Za,E(this,Za)+e),re(E(this,Lo)<1||E(this,Za)<=E(this,Lo)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${E(this,Lo)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Fn(E(this,er)),offset:E(this,wr),length:e,info:{bytesRead:E(this,Za),dataLength:this.dataLength}})},Vx=function(e,t,r){let i=Math.ceil(t/Hn)*Hn;return E(this,wr)+i>E(this,er).length&&(this.allowLoose&&r&&E(this,wr)+t<=E(this,er).length?i=t:re(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Fn(E(this,er)),length:E(this,er).length,offset:E(this,wr)+i})),E(this,er).slice(E(this,wr),E(this,wr)+i)};let Vm=b2;function sp(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function sy(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function oN(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sp(n.outputLen),sp(n.blockLen)}function Ef(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function $x(n,e){sy(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const z5=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gx=n=>n instanceof Uint8Array,aN=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),U5=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ri=(n,e)=>n<<32-e|n>>>e,lN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!lN)throw new Error("Non little-endian hardware is not supported");function fN(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function x1(n){if(typeof n=="string"&&(n=fN(n)),!Gx(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function cN(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!Gx(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}class oy{clone(){return this._cloneInto()}}function ay(n){const e=r=>n().update(x1(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function uN(n=32){if(z5&&typeof z5.getRandomValues=="function")return z5.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class Wx extends oy{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,oN(e);const r=x1(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ef(this),this.iHash.update(e),this}digestInto(e){Ef(this),sy(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Qx=(n,e,t)=>new Wx(n,e).update(t).digest();Qx.create=(n,e)=>new Wx(n,e);function dN(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),l=Number(t&s),c=r?4:0,u=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+u,l,r)}class Kx extends oy{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=U5(this.buffer)}update(e){Ef(this);const{view:t,buffer:r,blockLen:i}=this;e=x1(e);const s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const c=U5(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ef(this),$x(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let p=o;p<i;p++)t[p]=0;dN(r,i-8,BigInt(this.length*8),s),this.process(r,0);const l=U5(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<u;p++)l.setUint32(4*p,h[p],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const hN=(n,e,t)=>n&e^~n&t,pN=(n,e,t)=>n&e^n&t^e&t,mN=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vo=new Uint32Array(64);class gN extends Kx{constructor(){super(64,32,8,!1),this.A=wo[0]|0,this.B=wo[1]|0,this.C=wo[2]|0,this.D=wo[3]|0,this.E=wo[4]|0,this.F=wo[5]|0,this.G=wo[6]|0,this.H=wo[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:l,H:c}=this;return[e,t,r,i,s,o,l,c]}set(e,t,r,i,s,o,l,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=c|0}process(e,t){for(let p=0;p<16;p++,t+=4)vo[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const g=vo[p-15],y=vo[p-2],w=Ri(g,7)^Ri(g,18)^g>>>3,v=Ri(y,17)^Ri(y,19)^y>>>10;vo[p]=v+vo[p-7]+w+vo[p-16]|0}let{A:r,B:i,C:s,D:o,E:l,F:c,G:u,H:h}=this;for(let p=0;p<64;p++){const g=Ri(l,6)^Ri(l,11)^Ri(l,25),y=h+g+hN(l,c,u)+mN[p]+vo[p]|0,v=(Ri(r,2)^Ri(r,13)^Ri(r,22))+pN(r,i,s)|0;h=u,u=c,c=l,l=o+y|0,o=s,s=i,i=r,r=y+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(r,i,s,o,l,c,u,h)}roundClean(){vo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Jx=ay(()=>new gN),hh=BigInt(2**32-1),Gm=BigInt(32);function qx(n,e=!1){return e?{h:Number(n&hh),l:Number(n>>Gm&hh)}:{h:Number(n>>Gm&hh)|0,l:Number(n&hh)|0}}function Yx(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=qx(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const yN=(n,e)=>BigInt(n>>>0)<<Gm|BigInt(e>>>0),bN=(n,e,t)=>n>>>t,wN=(n,e,t)=>n<<32-t|e>>>t,vN=(n,e,t)=>n>>>t|e<<32-t,xN=(n,e,t)=>n<<32-t|e>>>t,kN=(n,e,t)=>n<<64-t|e>>>t-32,AN=(n,e,t)=>n>>>t-32|e<<64-t,EN=(n,e)=>e,SN=(n,e)=>n,Xx=(n,e,t)=>n<<t|e>>>32-t,Zx=(n,e,t)=>e<<t|n>>>32-t,e3=(n,e,t)=>e<<t-32|n>>>64-t,t3=(n,e,t)=>n<<t-32|e>>>64-t;function CN(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const NN=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),TN=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,MN=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),ON=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,IN=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),PN=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,qe={fromBig:qx,split:Yx,toBig:yN,shrSH:bN,shrSL:wN,rotrSH:vN,rotrSL:xN,rotrBH:kN,rotrBL:AN,rotr32H:EN,rotr32L:SN,rotlSH:Xx,rotlSL:Zx,rotlBH:e3,rotlBL:t3,add:CN,add3L:NN,add3H:TN,add4L:MN,add4H:ON,add5H:PN,add5L:IN},[RN,DN]=qe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),xo=new Uint32Array(80),ko=new Uint32Array(80);class LN extends Kx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:l,Dl:c,Eh:u,El:h,Fh:p,Fl:g,Gh:y,Gl:w,Hh:v,Hl:k}=this;return[e,t,r,i,s,o,l,c,u,h,p,g,y,w,v,k]}set(e,t,r,i,s,o,l,c,u,h,p,g,y,w,v,k){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=l|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=p|0,this.Fl=g|0,this.Gh=y|0,this.Gl=w|0,this.Hh=v|0,this.Hl=k|0}process(e,t){for(let O=0;O<16;O++,t+=4)xo[O]=e.getUint32(t),ko[O]=e.getUint32(t+=4);for(let O=16;O<80;O++){const N=xo[O-15]|0,P=ko[O-15]|0,B=qe.rotrSH(N,P,1)^qe.rotrSH(N,P,8)^qe.shrSH(N,P,7),L=qe.rotrSL(N,P,1)^qe.rotrSL(N,P,8)^qe.shrSL(N,P,7),G=xo[O-2]|0,ne=ko[O-2]|0,ie=qe.rotrSH(G,ne,19)^qe.rotrBH(G,ne,61)^qe.shrSH(G,ne,6),pe=qe.rotrSL(G,ne,19)^qe.rotrBL(G,ne,61)^qe.shrSL(G,ne,6),Oe=qe.add4L(L,pe,ko[O-7],ko[O-16]),Ae=qe.add4H(Oe,B,ie,xo[O-7],xo[O-16]);xo[O]=Ae|0,ko[O]=Oe|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:l,Cl:c,Dh:u,Dl:h,Eh:p,El:g,Fh:y,Fl:w,Gh:v,Gl:k,Hh:A,Hl:C}=this;for(let O=0;O<80;O++){const N=qe.rotrSH(p,g,14)^qe.rotrSH(p,g,18)^qe.rotrBH(p,g,41),P=qe.rotrSL(p,g,14)^qe.rotrSL(p,g,18)^qe.rotrBL(p,g,41),B=p&y^~p&v,L=g&w^~g&k,G=qe.add5L(C,P,L,DN[O],ko[O]),ne=qe.add5H(G,A,N,B,RN[O],xo[O]),ie=G|0,pe=qe.rotrSH(r,i,28)^qe.rotrBH(r,i,34)^qe.rotrBH(r,i,39),Oe=qe.rotrSL(r,i,28)^qe.rotrBL(r,i,34)^qe.rotrBL(r,i,39),Ae=r&s^r&l^s&l,U=i&o^i&c^o&c;A=v|0,C=k|0,v=y|0,k=w|0,y=p|0,w=g|0,{h:p,l:g}=qe.add(u|0,h|0,ne|0,ie|0),u=l|0,h=c|0,l=s|0,c=o|0,s=r|0,o=i|0;const H=qe.add3L(ie,Oe,U);r=qe.add3H(H,ne,pe,Ae),i=H|0}({h:r,l:i}=qe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=qe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:l,l:c}=qe.add(this.Ch|0,this.Cl|0,l|0,c|0),{h:u,l:h}=qe.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:p,l:g}=qe.add(this.Eh|0,this.El|0,p|0,g|0),{h:y,l:w}=qe.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:v,l:k}=qe.add(this.Gh|0,this.Gl|0,v|0,k|0),{h:A,l:C}=qe.add(this.Hh|0,this.Hl|0,A|0,C|0),this.set(r,i,s,o,l,c,u,h,p,g,y,w,v,k,A,C)}roundClean(){xo.fill(0),ko.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const BN=ay(()=>new LN);function _N(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const ww=_N();ww.crypto||ww.msCrypto;function FN(n){switch(n){case"sha256":return Jx.create();case"sha512":return BN.create()}F(!1,"invalid hashing algorithm name","algorithm",n)}const[n3,r3,i3]=[[],[],[]],zN=BigInt(0),Cc=BigInt(1),UN=BigInt(2),HN=BigInt(7),jN=BigInt(256),VN=BigInt(113);for(let n=0,e=Cc,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],n3.push(2*(5*r+t)),r3.push((n+1)*(n+2)/2%64);let i=zN;for(let s=0;s<7;s++)e=(e<<Cc^(e>>HN)*VN)%jN,e&UN&&(i^=Cc<<(Cc<<BigInt(s))-Cc);i3.push(i)}const[$N,GN]=Yx(i3,!0),vw=(n,e,t)=>t>32?e3(n,e,t):Xx(n,e,t),xw=(n,e,t)=>t>32?t3(n,e,t):Zx(n,e,t);function WN(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,c=(o+2)%10,u=t[c],h=t[c+1],p=vw(u,h,1)^t[l],g=xw(u,h,1)^t[l+1];for(let y=0;y<50;y+=10)n[o+y]^=p,n[o+y+1]^=g}let i=n[2],s=n[3];for(let o=0;o<24;o++){const l=r3[o],c=vw(i,s,l),u=xw(i,s,l),h=n3[o];i=n[h],s=n[h+1],n[h]=c,n[h+1]=u}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=n[o+l];for(let l=0;l<10;l++)n[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}n[0]^=$N[r],n[1]^=GN[r]}t.fill(0)}class ly extends oy{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,sp(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=aN(this.state)}keccak(){WN(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ef(this);const{blockLen:t,state:r}=this;e=x1(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let l=0;l<o;l++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ef(this,!1),sy(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sp(e),this.xofInto(new Uint8Array(e))}digestInto(e){if($x(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new ly(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const QN=(n,e,t)=>ay(()=>new ly(e,n,t)),KN=QN(1,136,256/8);let s3=!1;const o3=function(n){return KN(n)};let a3=o3;function Qt(n){const e=rt(n,"data");return Se(a3(e))}Qt._=o3;Qt.lock=function(){s3=!0};Qt.register=function(n){if(s3)throw new TypeError("keccak256 is locked");a3=n};Object.freeze(Qt);const l3=function(n){return FN("sha256").update(n).digest()};let f3=l3,c3=!1;function Uf(n){const e=rt(n,"data");return Se(f3(e))}Uf._=l3;Uf.lock=function(){c3=!0};Uf.register=function(n){if(c3)throw new Error("sha256 is locked");f3=n};Object.freeze(Uf);Object.freeze(Uf);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u3=BigInt(0),k1=BigInt(1),JN=BigInt(2),A1=n=>n instanceof Uint8Array,qN=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Sf(n){if(!A1(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=qN[n[t]];return e}function d3(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function fy(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Cf(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,s=n.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function dl(n){return fy(Sf(n))}function cy(n){if(!A1(n))throw new Error("Uint8Array expected");return fy(Sf(Uint8Array.from(n).reverse()))}function Nf(n,e){return Cf(n.toString(16).padStart(e*2,"0"))}function uy(n,e){return Nf(n,e).reverse()}function YN(n){return Cf(d3(n))}function oi(n,e,t){let r;if(typeof e=="string")try{r=Cf(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(A1(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function su(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!A1(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function XN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function ZN(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function eT(n){let e;for(e=0;n>u3;n>>=k1,e+=1);return e}function tT(n,e){return n>>BigInt(e)&k1}const nT=(n,e,t)=>n|(t?k1:u3)<<BigInt(e),dy=n=>(JN<<BigInt(n-1))-k1,H5=n=>new Uint8Array(n),kw=n=>Uint8Array.from(n);function h3(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=H5(n),i=H5(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},l=(...p)=>t(i,r,...p),c=(p=H5())=>{i=l(kw([0]),p),r=l(),p.length!==0&&(i=l(kw([1]),p),r=l())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const g=[];for(;p<e;){r=l();const y=r.slice();g.push(y),p+=r.length}return su(...g)};return(p,g)=>{o(),c(p);let y;for(;!(y=g(u()));)c();return o(),y}}const rT={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Gu(n,e,t={}){const r=(i,s,o)=>{const l=rT[s];if(typeof l!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=n[i];if(!(o&&c===void 0)&&!l(c,n))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const iT=Object.freeze(Object.defineProperty({__proto__:null,bitGet:tT,bitLen:eT,bitMask:dy,bitSet:nT,bytesToHex:Sf,bytesToNumberBE:dl,bytesToNumberLE:cy,concatBytes:su,createHmacDrbg:h3,ensureBytes:oi,equalBytes:XN,hexToBytes:Cf,hexToNumber:fy,numberToBytesBE:Nf,numberToBytesLE:uy,numberToHexUnpadded:d3,numberToVarBytesBE:YN,utf8ToBytes:ZN,validateObject:Gu},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ln=BigInt(0),Ut=BigInt(1),Ra=BigInt(2),sT=BigInt(3),Wm=BigInt(4),Aw=BigInt(5),Ew=BigInt(8);BigInt(9);BigInt(16);function nr(n,e){const t=n%e;return t>=ln?t:e+t}function oT(n,e,t){if(t<=ln||e<ln)throw new Error("Expected power/modulo > 0");if(t===Ut)return ln;let r=Ut;for(;e>ln;)e&Ut&&(r=r*n%t),n=n*n%t,e>>=Ut;return r}function Ir(n,e,t){let r=n;for(;e-- >ln;)r*=r,r%=t;return r}function Qm(n,e){if(n===ln||e<=ln)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=nr(n,e),r=e,i=ln,s=Ut;for(;t!==ln;){const l=r/t,c=r%t,u=i-s*l;r=t,t=c,i=s,s=u}if(r!==Ut)throw new Error("invert: does not exist");return nr(i,e)}function aT(n){const e=(n-Ut)/Ra;let t,r,i;for(t=n-Ut,r=0;t%Ra===ln;t/=Ra,r++);for(i=Ra;i<n&&oT(i,e,n)!==n-Ut;i++);if(r===1){const o=(n+Ut)/Wm;return function(c,u){const h=c.pow(u,o);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+Ut)/Ra;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=r,h=l.pow(l.mul(l.ONE,i),t),p=l.pow(c,s),g=l.pow(c,t);for(;!l.eql(g,l.ONE);){if(l.eql(g,l.ZERO))return l.ZERO;let y=1;for(let v=l.sqr(g);y<u&&!l.eql(v,l.ONE);y++)v=l.sqr(v);const w=l.pow(h,Ut<<BigInt(u-y-1));h=l.sqr(w),p=l.mul(p,w),g=l.mul(g,h),u=y}return p}}function lT(n){if(n%Wm===sT){const e=(n+Ut)/Wm;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%Ew===Aw){const e=(n-Aw)/Ew;return function(r,i){const s=r.mul(i,Ra),o=r.pow(s,e),l=r.mul(i,o),c=r.mul(r.mul(l,Ra),o),u=r.mul(l,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return aT(n)}const fT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cT(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=fT.reduce((r,i)=>(r[i]="function",r),e);return Gu(n,t)}function uT(n,e,t){if(t<ln)throw new Error("Expected power > 0");if(t===ln)return n.ONE;if(t===Ut)return e;let r=n.ONE,i=e;for(;t>ln;)t&Ut&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Ut;return r}function dT(n,e){const t=new Array(e.length),r=e.reduce((s,o,l)=>n.is0(o)?s:(t[l]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,l)=>n.is0(o)?s:(t[l]=n.mul(s,t[l]),n.mul(s,o)),i),t}function p3(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function hT(n,e,t=!1,r={}){if(n<=ln)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=p3(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=lT(n),l=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:dy(i),ZERO:ln,ONE:Ut,create:c=>nr(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return ln<=c&&c<n},is0:c=>c===ln,isOdd:c=>(c&Ut)===Ut,neg:c=>nr(-c,n),eql:(c,u)=>c===u,sqr:c=>nr(c*c,n),add:(c,u)=>nr(c+u,n),sub:(c,u)=>nr(c-u,n),mul:(c,u)=>nr(c*u,n),pow:(c,u)=>uT(l,c,u),div:(c,u)=>nr(c*Qm(u,n),n),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Qm(c,n),sqrt:r.sqrt||(c=>o(l,c)),invertBatch:c=>dT(l,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>t?uy(c,s):Nf(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return t?cy(c):dl(c)}});return Object.freeze(l)}function m3(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function g3(n){const e=m3(n);return e+Math.ceil(e/2)}function pT(n,e,t=!1){const r=n.length,i=m3(e),s=g3(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?dl(n):cy(n),l=nr(o,e-Ut)+Ut;return t?uy(l,i):Nf(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mT=BigInt(0),j5=BigInt(1);function gT(n,e){const t=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=n.ZERO,l=i;for(;s>mT;)s&j5&&(o=o.add(l)),l=l.double(),s>>=j5;return o},precomputeWindow(i,s){const{windows:o,windowSize:l}=r(s),c=[];let u=i,h=u;for(let p=0;p<o;p++){h=u,c.push(h);for(let g=1;g<l;g++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,s,o){const{windows:l,windowSize:c}=r(i);let u=n.ZERO,h=n.BASE;const p=BigInt(2**i-1),g=2**i,y=BigInt(i);for(let w=0;w<l;w++){const v=w*c;let k=Number(o&p);o>>=y,k>c&&(k-=g,o+=j5);const A=v,C=v+Math.abs(k)-1,O=w%2!==0,N=k<0;k===0?h=h.add(t(O,s[A])):u=u.add(t(N,s[C]))}return{p:u,f:h}},wNAFCached(i,s,o,l){const c=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,l(u))),this.wNAF(c,u,o)}}}function y3(n){return cT(n.Fp),Gu(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...p3(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yT(n){const e=y3(n);Gu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:bT,hexToBytes:wT}=iT,Fa={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Fa;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:bT(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Fa,t=typeof n=="string"?wT(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Fa._parseInt(t.subarray(2)),{d:o,l}=Fa._parseInt(s);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,l=t(s),c=t(o);return`30${t(o+s+4)}02${c}${i}02${l}${r}`}},zs=BigInt(0),Ur=BigInt(1);BigInt(2);const Sw=BigInt(3);BigInt(4);function vT(n){const e=yT(n),{Fp:t}=e,r=e.toBytes||((w,v,k)=>{const A=v.toAffine();return su(Uint8Array.from([4]),t.toBytes(A.x),t.toBytes(A.y))}),i=e.fromBytes||(w=>{const v=w.subarray(1),k=t.fromBytes(v.subarray(0,t.BYTES)),A=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:k,y:A}});function s(w){const{a:v,b:k}=e,A=t.sqr(w),C=t.mul(A,w);return t.add(t.add(C,t.mul(w,v)),k)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&zs<w&&w<e.n}function l(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){const{allowedPrivateKeyLengths:v,nByteLength:k,wrapPrivateKey:A,n:C}=e;if(v&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=Sf(w)),typeof w!="string"||!v.includes(w.length))throw new Error("Invalid key");w=w.padStart(k*2,"0")}let O;try{O=typeof w=="bigint"?w:dl(oi("private key",w,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof w}`)}return A&&(O=nr(O,C)),l(O),O}const u=new Map;function h(w){if(!(w instanceof p))throw new Error("ProjectivePoint expected")}class p{constructor(v,k,A){if(this.px=v,this.py=k,this.pz=A,v==null||!t.isValid(v))throw new Error("x required");if(k==null||!t.isValid(k))throw new Error("y required");if(A==null||!t.isValid(A))throw new Error("z required")}static fromAffine(v){const{x:k,y:A}=v||{};if(!v||!t.isValid(k)||!t.isValid(A))throw new Error("invalid affine point");if(v instanceof p)throw new Error("projective point not allowed");const C=O=>t.eql(O,t.ZERO);return C(k)&&C(A)?p.ZERO:new p(k,A,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const k=t.invertBatch(v.map(A=>A.pz));return v.map((A,C)=>A.toAffine(k[C])).map(p.fromAffine)}static fromHex(v){const k=p.fromAffine(i(oi("pointHex",v)));return k.assertValidity(),k}static fromPrivateKey(v){return p.BASE.multiply(c(v))}_setWindowSize(v){this._WINDOW_SIZE=v,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:k}=this.toAffine();if(!t.isValid(v)||!t.isValid(k))throw new Error("bad point: x or y not FE");const A=t.sqr(k),C=s(v);if(!t.eql(A,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){h(v);const{px:k,py:A,pz:C}=this,{px:O,py:N,pz:P}=v,B=t.eql(t.mul(k,P),t.mul(O,C)),L=t.eql(t.mul(A,P),t.mul(N,C));return B&&L}negate(){return new p(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:k}=e,A=t.mul(k,Sw),{px:C,py:O,pz:N}=this;let P=t.ZERO,B=t.ZERO,L=t.ZERO,G=t.mul(C,C),ne=t.mul(O,O),ie=t.mul(N,N),pe=t.mul(C,O);return pe=t.add(pe,pe),L=t.mul(C,N),L=t.add(L,L),P=t.mul(v,L),B=t.mul(A,ie),B=t.add(P,B),P=t.sub(ne,B),B=t.add(ne,B),B=t.mul(P,B),P=t.mul(pe,P),L=t.mul(A,L),ie=t.mul(v,ie),pe=t.sub(G,ie),pe=t.mul(v,pe),pe=t.add(pe,L),L=t.add(G,G),G=t.add(L,G),G=t.add(G,ie),G=t.mul(G,pe),B=t.add(B,G),ie=t.mul(O,N),ie=t.add(ie,ie),G=t.mul(ie,pe),P=t.sub(P,G),L=t.mul(ie,ne),L=t.add(L,L),L=t.add(L,L),new p(P,B,L)}add(v){h(v);const{px:k,py:A,pz:C}=this,{px:O,py:N,pz:P}=v;let B=t.ZERO,L=t.ZERO,G=t.ZERO;const ne=e.a,ie=t.mul(e.b,Sw);let pe=t.mul(k,O),Oe=t.mul(A,N),Ae=t.mul(C,P),U=t.add(k,A),H=t.add(O,N);U=t.mul(U,H),H=t.add(pe,Oe),U=t.sub(U,H),H=t.add(k,C);let z=t.add(O,P);return H=t.mul(H,z),z=t.add(pe,Ae),H=t.sub(H,z),z=t.add(A,C),B=t.add(N,P),z=t.mul(z,B),B=t.add(Oe,Ae),z=t.sub(z,B),G=t.mul(ne,H),B=t.mul(ie,Ae),G=t.add(B,G),B=t.sub(Oe,G),G=t.add(Oe,G),L=t.mul(B,G),Oe=t.add(pe,pe),Oe=t.add(Oe,pe),Ae=t.mul(ne,Ae),H=t.mul(ie,H),Oe=t.add(Oe,Ae),Ae=t.sub(pe,Ae),Ae=t.mul(ne,Ae),H=t.add(H,Ae),pe=t.mul(Oe,H),L=t.add(L,pe),pe=t.mul(z,H),B=t.mul(U,B),B=t.sub(B,pe),pe=t.mul(U,Oe),G=t.mul(z,G),G=t.add(G,pe),new p(B,L,G)}subtract(v){return this.add(v.negate())}is0(){return this.equals(p.ZERO)}wNAF(v){return y.wNAFCached(this,u,v,k=>{const A=t.invertBatch(k.map(C=>C.pz));return k.map((C,O)=>C.toAffine(A[O])).map(p.fromAffine)})}multiplyUnsafe(v){const k=p.ZERO;if(v===zs)return k;if(l(v),v===Ur)return this;const{endo:A}=e;if(!A)return y.unsafeLadder(this,v);let{k1neg:C,k1:O,k2neg:N,k2:P}=A.splitScalar(v),B=k,L=k,G=this;for(;O>zs||P>zs;)O&Ur&&(B=B.add(G)),P&Ur&&(L=L.add(G)),G=G.double(),O>>=Ur,P>>=Ur;return C&&(B=B.negate()),N&&(L=L.negate()),L=new p(t.mul(L.px,A.beta),L.py,L.pz),B.add(L)}multiply(v){l(v);let k=v,A,C;const{endo:O}=e;if(O){const{k1neg:N,k1:P,k2neg:B,k2:L}=O.splitScalar(k);let{p:G,f:ne}=this.wNAF(P),{p:ie,f:pe}=this.wNAF(L);G=y.constTimeNegate(N,G),ie=y.constTimeNegate(B,ie),ie=new p(t.mul(ie.px,O.beta),ie.py,ie.pz),A=G.add(ie),C=ne.add(pe)}else{const{p:N,f:P}=this.wNAF(k);A=N,C=P}return p.normalizeZ([A,C])[0]}multiplyAndAddUnsafe(v,k,A){const C=p.BASE,O=(P,B)=>B===zs||B===Ur||!P.equals(C)?P.multiplyUnsafe(B):P.multiply(B),N=O(this,k).add(O(v,A));return N.is0()?void 0:N}toAffine(v){const{px:k,py:A,pz:C}=this,O=this.is0();v==null&&(v=O?t.ONE:t.inv(C));const N=t.mul(k,v),P=t.mul(A,v),B=t.mul(C,v);if(O)return{x:t.ZERO,y:t.ZERO};if(!t.eql(B,t.ONE))throw new Error("invZ was invalid");return{x:N,y:P}}isTorsionFree(){const{h:v,isTorsionFree:k}=e;if(v===Ur)return!0;if(k)return k(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:k}=e;return v===Ur?this:k?k(p,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),r(p,this,v)}toHex(v=!0){return Sf(this.toRawBytes(v))}}p.BASE=new p(e.Gx,e.Gy,t.ONE),p.ZERO=new p(t.ZERO,t.ONE,t.ZERO);const g=e.nBitLength,y=gT(p,e.endo?Math.ceil(g/2):g);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function xT(n){const e=y3(n);return Gu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function kT(n){const e=xT(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(H){return zs<H&&H<t.ORDER}function l(H){return nr(H,r)}function c(H){return Qm(H,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:p,isWithinCurveOrder:g}=vT({...e,toBytes(H,z,Y){const V=z.toAffine(),X=t.toBytes(V.x),q=su;return Y?q(Uint8Array.from([z.hasEvenY()?2:3]),X):q(Uint8Array.from([4]),X,t.toBytes(V.y))},fromBytes(H){const z=H.length,Y=H[0],V=H.subarray(1);if(z===i&&(Y===2||Y===3)){const X=dl(V);if(!o(X))throw new Error("Point is not on curve");const q=p(X);let R=t.sqrt(q);const Q=(R&Ur)===Ur;return(Y&1)===1!==Q&&(R=t.neg(R)),{x:X,y:R}}else if(z===s&&Y===4){const X=t.fromBytes(V.subarray(0,t.BYTES)),q=t.fromBytes(V.subarray(t.BYTES,2*t.BYTES));return{x:X,y:q}}else throw new Error(`Point of length ${z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=H=>Sf(Nf(H,e.nByteLength));function w(H){const z=r>>Ur;return H>z}function v(H){return w(H)?l(-H):H}const k=(H,z,Y)=>dl(H.slice(z,Y));class A{constructor(z,Y,V){this.r=z,this.s=Y,this.recovery=V,this.assertValidity()}static fromCompact(z){const Y=e.nByteLength;return z=oi("compactSignature",z,Y*2),new A(k(z,0,Y),k(z,Y,2*Y))}static fromDER(z){const{r:Y,s:V}=Fa.toSig(oi("DER",z));return new A(Y,V)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new A(this.r,this.s,z)}recoverPublicKey(z){const{r:Y,s:V,recovery:X}=this,q=L(oi("msgHash",z));if(X==null||![0,1,2,3].includes(X))throw new Error("recovery id invalid");const R=X===2||X===3?Y+e.n:Y;if(R>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Q=X&1?"03":"02",ve=u.fromHex(Q+y(R)),me=c(R),Ie=l(-q*me),Be=l(V*me),Fe=u.BASE.multiplyAndAddUnsafe(ve,Ie,Be);if(!Fe)throw new Error("point at infinify");return Fe.assertValidity(),Fe}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return Cf(this.toDERHex())}toDERHex(){return Fa.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Cf(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const C={isValidPrivateKey(H){try{return h(H),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const H=g3(e.n);return pT(e.randomBytes(H),e.n)},precompute(H=8,z=u.BASE){return z._setWindowSize(H),z.multiply(BigInt(3)),z}};function O(H,z=!0){return u.fromPrivateKey(H).toRawBytes(z)}function N(H){const z=H instanceof Uint8Array,Y=typeof H=="string",V=(z||Y)&&H.length;return z?V===i||V===s:Y?V===2*i||V===2*s:H instanceof u}function P(H,z,Y=!0){if(N(H))throw new Error("first arg must be private key");if(!N(z))throw new Error("second arg must be public key");return u.fromHex(z).multiply(h(H)).toRawBytes(Y)}const B=e.bits2int||function(H){const z=dl(H),Y=H.length*8-e.nBitLength;return Y>0?z>>BigInt(Y):z},L=e.bits2int_modN||function(H){return l(B(H))},G=dy(e.nBitLength);function ne(H){if(typeof H!="bigint")throw new Error("bigint expected");if(!(zs<=H&&H<G))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Nf(H,e.nByteLength)}function ie(H,z,Y=pe){if(["recovered","canonical"].some(Qe=>Qe in Y))throw new Error("sign() legacy options not supported");const{hash:V,randomBytes:X}=e;let{lowS:q,prehash:R,extraEntropy:Q}=Y;q==null&&(q=!0),H=oi("msgHash",H),R&&(H=oi("prehashed msgHash",V(H)));const ve=L(H),me=h(z),Ie=[ne(me),ne(ve)];if(Q!=null){const Qe=Q===!0?X(t.BYTES):Q;Ie.push(oi("extraEntropy",Qe))}const Be=su(...Ie),Fe=ve;function Re(Qe){const ct=B(Qe);if(!g(ct))return;const Zt=c(ct),fr=u.BASE.multiply(ct).toAffine(),kt=l(fr.x);if(kt===zs)return;const Mt=l(Zt*l(Fe+kt*me));if(Mt===zs)return;let es=(fr.x===kt?0:2)|Number(fr.y&Ur),un=Mt;return q&&w(Mt)&&(un=v(Mt),es^=1),new A(kt,un,es)}return{seed:Be,k2sig:Re}}const pe={lowS:e.lowS,prehash:!1},Oe={lowS:e.lowS,prehash:!1};function Ae(H,z,Y=pe){const{seed:V,k2sig:X}=ie(H,z,Y),q=e;return h3(q.hash.outputLen,q.nByteLength,q.hmac)(V,X)}u.BASE._setWindowSize(8);function U(H,z,Y,V=Oe){var fr;const X=H;if(z=oi("msgHash",z),Y=oi("publicKey",Y),"strict"in V)throw new Error("options.strict was renamed to lowS");const{lowS:q,prehash:R}=V;let Q,ve;try{if(typeof X=="string"||X instanceof Uint8Array)try{Q=A.fromDER(X)}catch(kt){if(!(kt instanceof Fa.Err))throw kt;Q=A.fromCompact(X)}else if(typeof X=="object"&&typeof X.r=="bigint"&&typeof X.s=="bigint"){const{r:kt,s:Mt}=X;Q=new A(kt,Mt)}else throw new Error("PARSE");ve=u.fromHex(Y)}catch(kt){if(kt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&Q.hasHighS())return!1;R&&(z=e.hash(z));const{r:me,s:Ie}=Q,Be=L(z),Fe=c(Ie),Re=l(Be*Fe),Qe=l(me*Fe),ct=(fr=u.BASE.multiplyAndAddUnsafe(ve,Re,Qe))==null?void 0:fr.toAffine();return ct?l(ct.x)===me:!1}return{CURVE:e,getPublicKey:O,getSharedSecret:P,sign:Ae,verify:U,ProjectivePoint:u,Signature:A,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function AT(n){return{hash:n,hmac:(e,...t)=>Qx(n,e,cN(...t)),randomBytes:uN}}function ET(n,e){const t=r=>kT({...n,...AT(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const b3=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Cw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ST=BigInt(1),Km=BigInt(2),Nw=(n,e)=>(n+e/Km)/e;function CT(n){const e=b3,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),c=BigInt(88),u=n*n*n%e,h=u*u*n%e,p=Ir(h,t,e)*h%e,g=Ir(p,t,e)*h%e,y=Ir(g,Km,e)*u%e,w=Ir(y,i,e)*y%e,v=Ir(w,s,e)*w%e,k=Ir(v,l,e)*v%e,A=Ir(k,c,e)*k%e,C=Ir(A,l,e)*v%e,O=Ir(C,t,e)*h%e,N=Ir(O,o,e)*w%e,P=Ir(N,r,e)*u%e,B=Ir(P,Km,e);if(!Jm.eql(Jm.sqr(B),n))throw new Error("Cannot find square root");return B}const Jm=hT(b3,void 0,void 0,{sqrt:CT}),Eo=ET({a:BigInt(0),b:BigInt(7),Fp:Jm,n:Cw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=Cw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ST*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),l=Nw(s*n,e),c=Nw(-r*n,e);let u=nr(n-l*t-c*i,e),h=nr(-l*r-c*s,e);const p=u>o,g=h>o;if(p&&(u=e-u),g&&(h=e-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:p,k1:u,k2neg:g,k2:h}}}},Jx);BigInt(0);Eo.ProjectivePoint;const ou="0x0000000000000000000000000000000000000000",Tw="0x0000000000000000000000000000000000000000000000000000000000000000",Mw=BigInt(0),Ow=BigInt(1),Iw=BigInt(2),Pw=BigInt(27),Rw=BigInt(28),ph=BigInt(35),f0={};function Dw(n){return Al(Un(n),32)}var G0,W0,Q0,tl;const si=class si{constructor(e,t,r,i){J(this,G0);J(this,W0);J(this,Q0);J(this,tl);$u(e,f0,"Signature"),T(this,G0,t),T(this,W0,r),T(this,Q0,i),T(this,tl,null)}get r(){return E(this,G0)}set r(e){F(T0(e)===32,"invalid r","value",e),T(this,G0,Se(e))}get s(){return E(this,W0)}set s(e){F(T0(e)===32,"invalid s","value",e);const t=Se(e);F(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),T(this,W0,t)}get v(){return E(this,Q0)}set v(e){const t=Ke(e,"value");F(t===27||t===28,"invalid v","v",e),T(this,Q0,t)}get networkV(){return E(this,tl)}get legacyChainId(){const e=this.networkV;return e==null?null:si.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=rt(this.s);return this.yParity&&(e[0]|=128),Se(e)}get compactSerialized(){return jt([this.r,this.yParityAndS])}get serialized(){return jt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new si(f0,this.r,this.s,this.v);return this.networkV&&T(e,tl,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Te(e,"v");return t==Pw||t==Rw?Mw:(F(t>=ph,"invalid EIP-155 v","v",e),(t-ph)/Iw)}static getChainIdV(e,t){return Te(e)*Iw+BigInt(35+t-27)}static getNormalizedV(e){const t=Te(e);return t===Mw||t===Pw?27:t===Ow||t===Rw?28:(F(t>=ph,"invalid v","v",e),t&Ow?27:28)}static from(e){function t(u,h){F(u,h,"signature",e)}if(e==null)return new si(f0,Tw,Tw,27);if(typeof e=="string"){const u=rt(e,"signature");if(u.length===64){const h=Se(u.slice(0,32)),p=u.slice(32,64),g=p[0]&128?28:27;return p[0]&=127,new si(f0,h,Se(p),g)}if(u.length===65){const h=Se(u.slice(0,32)),p=u.slice(32,64);t((p[0]&128)===0,"non-canonical s");const g=si.getNormalizedV(u[64]);return new si(f0,h,Se(p),g)}t(!1,"invalid raw signature length")}if(e instanceof si)return e.clone();const r=e.r;t(r!=null,"missing r");const i=Dw(r),s=function(u,h){if(u!=null)return Dw(u);if(h!=null){t(yt(h,32),"invalid yParityAndS");const p=rt(h);return p[0]&=127,Se(p)}t(!1,"missing s")}(e.s,e.yParityAndS);t((rt(s)[0]&128)==0,"non-canonical s");const{networkV:o,v:l}=function(u,h,p){if(u!=null){const g=Te(u);return{networkV:g>=ph?g:void 0,v:si.getNormalizedV(g)}}if(h!=null)return t(yt(h,32),"invalid yParityAndS"),{v:rt(h)[0]&128?28:27};if(p!=null){switch(Ke(p,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new si(f0,i,s,l);return o&&T(c,tl,o),t(e.yParity==null||Ke(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};G0=new WeakMap,W0=new WeakMap,Q0=new WeakMap,tl=new WeakMap;let yi=si;var Os;const La=class La{constructor(e){J(this,Os);F(T0(e)===32,"invalid private key","privateKey","[REDACTED]"),T(this,Os,Se(e))}get privateKey(){return E(this,Os)}get publicKey(){return La.computePublicKey(E(this,Os))}get compressedPublicKey(){return La.computePublicKey(E(this,Os),!0)}sign(e){F(T0(e)===32,"invalid digest length","digest",e);const t=Eo.sign(Fn(e),Fn(E(this,Os)),{lowS:!0});return yi.from({r:sa(t.r,32),s:sa(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=La.computePublicKey(e);return Se(Eo.getSharedSecret(Fn(E(this,Os)),rt(t),!1))}static computePublicKey(e,t){let r=rt(e,"key");if(r.length===32){const s=Eo.getPublicKey(r,!!t);return Se(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Eo.ProjectivePoint.fromHex(r);return Se(i.toRawBytes(t))}static recoverPublicKey(e,t){F(T0(e)===32,"invalid digest length","digest",e);const r=yi.from(t);let i=Eo.Signature.fromCompact(Fn(jt([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(Fn(e));return F(s!=null,"invalid signautre for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,r){const i=Eo.ProjectivePoint.fromHex(La.computePublicKey(e).substring(2)),s=Eo.ProjectivePoint.fromHex(La.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!r)}};Os=new WeakMap;let au=La;const NT=BigInt(0),TT=BigInt(36);function Lw(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=rt(Qt(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const hy={};for(let n=0;n<10;n++)hy[String(n)]=String(n);for(let n=0;n<26;n++)hy[String.fromCharCode(65+n)]=String(10+n);const Bw=15;function MT(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>hy[r]).join("");for(;e.length>=Bw;){let r=e.substring(0,Bw);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const OT=function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function IT(n){n=n.toLowerCase();let e=NT;for(let t=0;t<n.length;t++)e=e*TT+OT[n[t]];return e}function ht(n){if(F(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=Lw(n);return F(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){F(n.substring(2,4)===MT(n),"bad icap checksum","address",n);let e=IT(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Lw("0x"+e)}F(!1,"invalid address","address",n)}function PT(n){const e=ht(n.from);let r=Te(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,ht(Dt(Qt(El([e,r])),12))}function w3(n){return n&&typeof n.getAddress=="function"}async function V5(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(re(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),F(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),ht(t)}function jn(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?ht(n):(re(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),V5(n,e.resolveName(n)));if(w3(n))return V5(n,n.getAddress());if(n&&typeof n.then=="function")return V5(n,n);F(!1,"unsupported addressable value","target",n)}const ks={};function ke(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new On(ks,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function at(n,e){return new On(ks,`bytes${e||""}`,n,{size:e})}const _w=Symbol.for("_ethers_typed");var nl;const Ss=class Ss{constructor(e,t,r,i){$(this,"type");$(this,"value");J(this,nl);$(this,"_typedSymbol");i==null&&(i=null),$u(ks,e,"Typed"),je(this,{_typedSymbol:_w,type:t,value:r}),T(this,nl,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return E(this,nl)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return E(this,nl)===!0?-1:E(this,nl)===!1?this.value.length:null}static from(e,t){return new Ss(ks,e,t)}static uint8(e){return ke(e,8)}static uint16(e){return ke(e,16)}static uint24(e){return ke(e,24)}static uint32(e){return ke(e,32)}static uint40(e){return ke(e,40)}static uint48(e){return ke(e,48)}static uint56(e){return ke(e,56)}static uint64(e){return ke(e,64)}static uint72(e){return ke(e,72)}static uint80(e){return ke(e,80)}static uint88(e){return ke(e,88)}static uint96(e){return ke(e,96)}static uint104(e){return ke(e,104)}static uint112(e){return ke(e,112)}static uint120(e){return ke(e,120)}static uint128(e){return ke(e,128)}static uint136(e){return ke(e,136)}static uint144(e){return ke(e,144)}static uint152(e){return ke(e,152)}static uint160(e){return ke(e,160)}static uint168(e){return ke(e,168)}static uint176(e){return ke(e,176)}static uint184(e){return ke(e,184)}static uint192(e){return ke(e,192)}static uint200(e){return ke(e,200)}static uint208(e){return ke(e,208)}static uint216(e){return ke(e,216)}static uint224(e){return ke(e,224)}static uint232(e){return ke(e,232)}static uint240(e){return ke(e,240)}static uint248(e){return ke(e,248)}static uint256(e){return ke(e,256)}static uint(e){return ke(e,256)}static int8(e){return ke(e,-8)}static int16(e){return ke(e,-16)}static int24(e){return ke(e,-24)}static int32(e){return ke(e,-32)}static int40(e){return ke(e,-40)}static int48(e){return ke(e,-48)}static int56(e){return ke(e,-56)}static int64(e){return ke(e,-64)}static int72(e){return ke(e,-72)}static int80(e){return ke(e,-80)}static int88(e){return ke(e,-88)}static int96(e){return ke(e,-96)}static int104(e){return ke(e,-104)}static int112(e){return ke(e,-112)}static int120(e){return ke(e,-120)}static int128(e){return ke(e,-128)}static int136(e){return ke(e,-136)}static int144(e){return ke(e,-144)}static int152(e){return ke(e,-152)}static int160(e){return ke(e,-160)}static int168(e){return ke(e,-168)}static int176(e){return ke(e,-176)}static int184(e){return ke(e,-184)}static int192(e){return ke(e,-192)}static int200(e){return ke(e,-200)}static int208(e){return ke(e,-208)}static int216(e){return ke(e,-216)}static int224(e){return ke(e,-224)}static int232(e){return ke(e,-232)}static int240(e){return ke(e,-240)}static int248(e){return ke(e,-248)}static int256(e){return ke(e,-256)}static int(e){return ke(e,-256)}static bytes1(e){return at(e,1)}static bytes2(e){return at(e,2)}static bytes3(e){return at(e,3)}static bytes4(e){return at(e,4)}static bytes5(e){return at(e,5)}static bytes6(e){return at(e,6)}static bytes7(e){return at(e,7)}static bytes8(e){return at(e,8)}static bytes9(e){return at(e,9)}static bytes10(e){return at(e,10)}static bytes11(e){return at(e,11)}static bytes12(e){return at(e,12)}static bytes13(e){return at(e,13)}static bytes14(e){return at(e,14)}static bytes15(e){return at(e,15)}static bytes16(e){return at(e,16)}static bytes17(e){return at(e,17)}static bytes18(e){return at(e,18)}static bytes19(e){return at(e,19)}static bytes20(e){return at(e,20)}static bytes21(e){return at(e,21)}static bytes22(e){return at(e,22)}static bytes23(e){return at(e,23)}static bytes24(e){return at(e,24)}static bytes25(e){return at(e,25)}static bytes26(e){return at(e,26)}static bytes27(e){return at(e,27)}static bytes28(e){return at(e,28)}static bytes29(e){return at(e,29)}static bytes30(e){return at(e,30)}static bytes31(e){return at(e,31)}static bytes32(e){return at(e,32)}static address(e){return new Ss(ks,"address",e)}static bool(e){return new Ss(ks,"bool",!!e)}static bytes(e){return new Ss(ks,"bytes",e)}static string(e){return new Ss(ks,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Ss(ks,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===_w}static dereference(e,t){if(Ss.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};nl=new WeakMap;let On=Ss;class RT extends Js{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=On.dereference(t,"string");try{r=ht(r)}catch(i){return this._throwError(i.message,t)}return e.writeValue(r)}decode(e){return ht(sa(e.readValue(),20))}}class DT extends Js{constructor(t){super(t.name,t.type,"_",t.dynamic);$(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function v3(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let c={};r=e.map(u=>{const h=u.localName;return re(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:t}),re(!c[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:t}),c[h]=!0,t[h]})}else F(!1,"invalid tuple value","tuple",t);F(e.length===r.length,"types/value length mismatch","tuple",t);let i=new jm,s=new jm,o=[];e.forEach((c,u)=>{let h=r[u];if(c.dynamic){let p=s.length;c.encode(s,h);let g=i.writeUpdatableValue();o.push(y=>{g(y+p)})}else c.encode(i,h)}),o.forEach(c=>{c(i.length)});let l=n.appendWriter(i);return l+=n.appendWriter(s),l}function x3(n,e){let t=[],r=[],i=n.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let l=n.readIndex(),c=i.subReader(l);try{o=s.decode(c)}catch(u){if(Mn(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(l){if(Mn(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");t.push(o),r.push(s.localName||null)}),Af.fromItems(t,r)}class LT extends Js{constructor(t,r,i){const s=t.type+"["+(r>=0?r:"")+"]",o=r===-1||t.dynamic;super("array",s,i,o);$(this,"coder");$(this,"length");je(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(t);return r}encode(t,r){const i=On.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,t.writeValue(i.length)),Ox(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let l=0;l<i.length;l++)o.push(this.coder);return v3(t,o,i)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),re(r*Hn<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*Hn,length:t.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new DT(this.coder));return x3(t,i)}}class BT extends Js{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=On.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class k3 extends Js{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Fn(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class _T extends k3{constructor(e){super("bytes",e)}decode(e){return Se(super.decode(e))}}class FT extends Js{constructor(t,r){let i="bytes"+String(t);super(i,i,r,!1);$(this,"size");je(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let i=Fn(On.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(i)}decode(t){return Se(t.readBytes(this.size))}}const zT=new Uint8Array([]);class UT extends Js{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(zT)}decode(e){return e.readBytes(0),null}}const HT=BigInt(0),jT=BigInt(1),VT=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class $T extends Js{constructor(t,r,i){const s=(r?"int":"uint")+t*8;super(s,s,i,!1);$(this,"size");$(this,"signed");je(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let i=Te(On.dereference(r,this.type)),s=_a(VT,Hn*8);if(this.signed){let o=_a(s,this.size*8-1);(i>o||i<-(o+jT))&&this._throwError("value out-of-bounds",r),i=Rx(i,8*Hn)}else(i<HT||i>_a(s,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(i)}decode(t){let r=_a(t.readValue(),this.size*8);return this.signed&&(r=np(r,this.size*8)),r}}class GT extends k3{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Vs(On.dereference(t,"string")))}decode(e){return rp(super.decode(e))}}class mh extends Js{constructor(t,r){let i=!1;const s=[];t.forEach(l=>{l.dynamic&&(i=!0),s.push(l.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);$(this,"coders");je(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[s]))}),Object.freeze(t)}encode(t,r){const i=On.dereference(r,"tuple");return v3(t,this.coders,i)}decode(t){return x3(t,this.coders)}}function Sl(n){return Qt(Vs(n))}var WT="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const Fw=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),zw=4;function QT(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let P=1;P<r;P++)s.push(i+=t());let o=t(),l=e;e+=o;let c=0,u=0;function h(){return c==0&&(u=u<<8|n[e++],c=8),u>>--c&1}const p=31,g=2**p,y=g>>>1,w=y>>1,v=g-1;let k=0;for(let P=0;P<p;P++)k=k<<1|h();let A=[],C=0,O=g;for(;;){let P=Math.floor(((k-C+1)*i-1)/O),B=0,L=r;for(;L-B>1;){let ie=B+L>>>1;P<s[ie]?L=ie:B=ie}if(B==0)break;A.push(B);let G=C+Math.floor(O*s[B]/i),ne=C+Math.floor(O*s[B+1]/i)-1;for(;!((G^ne)&y);)k=k<<1&v|h(),G=G<<1&v,ne=ne<<1&v|1;for(;G&~ne&w;)k=k&y|k<<1&v>>>1|h(),G=G<<1^y,ne=(ne^y)<<1|y|1;C=G,O=1+ne-G}let N=r-4;return A.map(P=>{switch(P-N){case 3:return N+65792+(n[l++]<<16|n[l++]<<8|n[l++]);case 2:return N+256+(n[l++]<<8|n[l++]);case 1:return N+n[l++];default:return P-1}})}function KT(n){let e=0;return()=>n[e++]}function A3(n){return KT(QT(JT(n)))}function JT(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,l=0;i<t;i++)l=l<<6|e[n.charCodeAt(i)],o+=6,o>=8&&(r[s++]=l>>(o-=8));return r}function qT(n){return n&1?~n>>1:n>>1}function YT(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=qT(e());return t}function lu(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function E3(n){return fu(()=>{let e=lu(n);if(e.length)return e})}function S3(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(XT(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(ZT(t,n))}return e.flat()}function fu(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function C3(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)YT(n,t).forEach((s,o)=>r[o].push(s));return r}function XT(n,e){let t=1+e(),r=e(),i=fu(e);return C3(i.length,1+n,e).flatMap((o,l)=>{let[c,...u]=o;return Array(i[l]).fill().map((h,p)=>{let g=p*r;return[c+p*t,u.map(y=>y+g)]})})}function ZT(n,e){let t=1+e();return C3(t,1+n,e).map(i=>[i[0],i.slice(1)])}function e7(n){let e=[],t=lu(n);return i(r([]),[]),e;function r(s){let o=n(),l=fu(()=>{let c=lu(n).map(u=>t[u]);if(c.length)return r(c)});return{S:o,B:l,Q:s}}function i({S:s,B:o},l,c){if(!(s&4&&c===l[l.length-1])){s&2&&(c=l[l.length-1]),s&1&&e.push(l);for(let u of o)for(let h of u.Q)i(u,[...l,h],c)}}}function t7(n){return n.toString(16).toUpperCase().padStart(2,"0")}function N3(n){return`{${t7(n)}}`}function n7(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Tf(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function r7(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var i7="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const cu=44032,op=4352,ap=4449,lp=4519,T3=19,M3=21,Mf=28,fp=M3*Mf,s7=T3*fp,o7=cu+s7,a7=op+T3,l7=ap+M3,f7=lp+Mf;function Lc(n){return n>>24&255}function O3(n){return n&16777215}let qm,Uw,Ym,Fh;function c7(){let n=A3(i7);qm=new Map(E3(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),Uw=new Set(lu(n)),Ym=new Map,Fh=new Map;for(let[e,t]of S3(n)){if(!Uw.has(e)&&t.length==2){let[r,i]=t,s=Fh.get(r);s||(s=new Map,Fh.set(r,s)),s.set(i,e)}Ym.set(e,t.reverse())}}function I3(n){return n>=cu&&n<o7}function u7(n,e){if(n>=op&&n<a7&&e>=ap&&e<l7)return cu+(n-op)*fp+(e-ap)*Mf;if(I3(n)&&e>lp&&e<f7&&(n-cu)%Mf==0)return n+(e-lp);{let t=Fh.get(n);return t&&(t=t.get(e),t)?t:-1}}function P3(n){qm||c7();let e=[],t=[],r=!1;function i(s){let o=qm.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(I3(s)){let o=s-cu,l=o/fp|0,c=o%fp/Mf|0,u=o%Mf;i(op+l),i(ap+c),u>0&&i(lp+u)}else{let o=Ym.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(r&&e.length>1){let s=Lc(e[0]);for(let o=1;o<e.length;o++){let l=Lc(e[o]);if(l==0||s<=l){s=l;continue}let c=o-1;for(;;){let u=e[c+1];if(e[c+1]=e[c],e[c]=u,!c||(s=Lc(e[--c]),s<=l))break}s=Lc(e[o])}}return e}function d7(n){let e=[],t=[],r=-1,i=0;for(let s of n){let o=Lc(s),l=O3(s);if(r==-1)o==0?r=l:e.push(l);else if(i>0&&i>=o)o==0?(e.push(r,...t),t.length=0,r=l):t.push(l),i=o;else{let c=u7(r,l);c>=0?r=c:i==0&&o==0?(e.push(r),r=l):(t.push(l),i=o)}}return r>=0&&e.push(r,...t),e}function R3(n){return P3(n).map(O3)}function h7(n){return d7(P3(n))}const Hw=45,D3=".",L3=65039,B3=1,cp=n=>Array.from(n);function uu(n,e){return n.P.has(e)||n.Q.has(e)}class p7 extends Array{get is_emoji(){return!0}}let Xm,_3,za,Zm,F3,O0,$5,p0,Ia,jw,eg;function py(){if(Xm)return;let n=A3(WT);const e=()=>lu(n),t=()=>new Set(e()),r=(h,p)=>p.forEach(g=>h.add(g));Xm=new Map(S3(n)),_3=t(),za=e(),Zm=new Set(e().map(h=>za[h])),za=new Set(za),F3=t(),t();let i=E3(n),s=n();const o=()=>{let h=new Set;return e().forEach(p=>r(h,i[p])),r(h,e()),h};O0=fu(h=>{let p=fu(n).map(g=>g+96);if(p.length){let g=h>=s;p[0]-=32,p=Tf(p),g&&(p=`Restricted[${p}]`);let y=o(),w=o(),v=!n();return{N:p,P:y,Q:w,M:v,R:g}}}),$5=t(),p0=new Map;let l=e().concat(cp($5)).sort((h,p)=>h-p);l.forEach((h,p)=>{let g=n(),y=l[p]=g?l[p-g]:{V:[],M:new Map};y.V.push(h),$5.has(h)||p0.set(h,y)});for(let{V:h,M:p}of new Set(p0.values())){let g=[];for(let w of h){let v=O0.filter(A=>uu(A,w)),k=g.find(({G:A})=>v.some(C=>A.has(C)));k||(k={G:new Set,V:[]},g.push(k)),k.V.push(w),r(k.G,v)}let y=g.flatMap(w=>cp(w.G));for(let{G:w,V:v}of g){let k=new Set(y.filter(A=>!w.has(A)));for(let A of v)p.set(A,k)}}Ia=new Set;let c=new Set;const u=h=>Ia.has(h)?c.add(h):Ia.add(h);for(let h of O0){for(let p of h.P)u(p);for(let p of h.Q)u(p)}for(let h of Ia)!p0.has(h)&&!c.has(h)&&p0.set(h,B3);r(Ia,R3(Ia)),jw=e7(n).map(h=>p7.from(h)).sort(r7),eg=new Map;for(let h of jw){let p=[eg];for(let g of h){let y=p.map(w=>{let v=w.get(g);return v||(v=new Map,w.set(g,v)),v});g===L3?p.push(...y):p=y}for(let g of p)g.V=h}}function my(n){return(z3(n)?"":`${gy(E1([n]))} `)+N3(n)}function gy(n){return`"${n}"`}function m7(n){if(n.length>=4&&n[2]==Hw&&n[3]==Hw)throw new Error(`invalid label extension: "${Tf(n.slice(0,4))}"`)}function g7(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function y7(n){let e=n[0],t=Fw.get(e);if(t)throw Wc(`leading ${t}`);let r=n.length,i=-1;for(let s=1;s<r;s++){e=n[s];let o=Fw.get(e);if(o){if(i==s)throw Wc(`${t} + ${o}`);i=s+1,t=o}}if(i==r)throw Wc(`trailing ${t}`)}function E1(n,e=1/0,t=N3){let r=[];b7(n[0])&&r.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,s=n.length;for(let o=0;o<s;o++){let l=n[o];z3(l)&&(r.push(Tf(n.slice(i,o))),r.push(t(l)),i=o+1)}return r.push(Tf(n.slice(i,s))),r.join("")}function b7(n){return py(),za.has(n)}function z3(n){return py(),F3.has(n)}function w7(n){return A7(v7(n,h7,C7))}function v7(n,e,t){if(!n)return[];py();let r=0;return n.split(D3).map(i=>{let s=n7(i),o={input:s,offset:r};r+=s.length+1;try{let l=o.tokens=S7(s,e,t),c=l.length,u;if(!c)throw new Error("empty label");let h=o.output=l.flat();if(g7(h),!(o.emoji=c>1||l[0].is_emoji)&&h.every(g=>g<128))m7(h),u="ASCII";else{let g=l.flatMap(y=>y.is_emoji?[]:y);if(!g.length)u="Emoji";else{if(za.has(h[0]))throw Wc("leading combining mark");for(let v=1;v<c;v++){let k=l[v];if(!k.is_emoji&&za.has(k[0]))throw Wc(`emoji + combining mark: "${Tf(l[v-1])} + ${E1([k[0]])}"`)}y7(h);let y=cp(new Set(g)),[w]=k7(y);E7(w,g),x7(w,y),u=w.N}}o.type=u}catch(l){o.error=l}return o})}function x7(n,e){let t,r=[];for(let i of e){let s=p0.get(i);if(s===B3)return;if(s){let o=s.M.get(i);if(t=t?t.filter(l=>o.has(l)):cp(o),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(s=>uu(i,s)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function k7(n){let e=O0;for(let t of n){let r=e.filter(i=>uu(i,t));if(!r.length)throw O0.some(i=>uu(i,t))?H3(e[0],t):U3(t);if(e=r,r.length==1)break}return e}function A7(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${gy(E1(e,63))}: ${i}`)}return Tf(r)}).join(D3)}function U3(n){return new Error(`disallowed character: ${my(n)}`)}function H3(n,e){let t=my(e),r=O0.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Wc(n){return new Error(`illegal placement: ${n}`)}function E7(n,e){for(let t of e)if(!uu(n,t))throw H3(n,t);if(n.M){let t=R3(e);for(let r=1,i=t.length;r<i;r++)if(Zm.has(t[r])){let s=r+1;for(let o;s<i&&Zm.has(o=t[s]);s++)for(let l=r;l<s;l++)if(t[l]==o)throw new Error(`duplicate non-spacing marks: ${my(o)}`);if(s-r>zw)throw new Error(`excessive non-spacing marks: ${gy(E1(t.slice(r-1,s)))} (${s-r}/${zw})`);r=s}}}function S7(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let s=N7(n);if(s)i.length&&(r.push(e(i)),i=[]),r.push(t(s));else{let o=n.pop();if(Ia.has(o))i.push(o);else{let l=Xm.get(o);if(l)i.push(...l);else if(!_3.has(o))throw U3(o)}}}return i.length&&r.push(e(i)),r}function C7(n){return n.filter(e=>e!=L3)}function N7(n,e){let t=eg,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:s}=t;s&&(r=s,n.length=i)}return r}const j3=new Uint8Array(32);j3.fill(0);function Vw(n){return F(n.length!==0,"invalid ENS name; empty component","comp",n),n}function V3(n){const e=Vs(T7(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(Vw(e.slice(r,i))),r=i+1);return F(r<e.length,"invalid ENS name; empty component","name",n),t.push(Vw(e.slice(r))),t}function T7(n){try{if(n.length===0)throw new Error("empty label");return w7(n)}catch(e){F(!1,`invalid ENS name (${e.message})`,"name",n)}}function tg(n){F(typeof n=="string","invalid ENS name; not a string","name",n),F(n.length,"invalid ENS name (empty label)","name",n);let e=j3;const t=V3(n);for(;t.length;)e=Qt(jt([e,Qt(t.pop())]));return Se(e)}function M7(n,e){const t=e;return F(t<=255,"DNS encoded label cannot exceed 255","length",t),Se(jt(V3(n).map(r=>{F(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function G5(n,e){return{address:ht(n),storageKeys:e.map((t,r)=>(F(yt(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function Ll(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(F(t.length===2,"invalid slot set",`value[${r}]`,t),G5(t[0],t[1])):(F(t!=null&&typeof t=="object","invalid address-slot set","value",n),G5(t.address,t.storageKeys)));F(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return G5(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function O7(n){let e;return typeof n=="string"?e=au.computePublicKey(n,!1):e=n.publicKey,ht(Qt("0x"+e.substring(4)).substring(26))}function I7(n,e){return O7(au.recoverPublicKey(n,e))}const on=BigInt(0),P7=BigInt(2),R7=BigInt(27),D7=BigInt(28),L7=BigInt(35),B7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),W5=4096*32;function $w(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=Uf(e).substring(4),"0x"+t}function S1(n){return n==="0x"?null:ht(n)}function yy(n,e){try{return Ll(n)}catch(t){F(!1,t.message,e,n)}}function Wu(n,e){return n==="0x"?0:Ke(n,e)}function Ht(n,e){if(n==="0x")return on;const t=Te(n,e);return F(t<=B7,"value exceeds uint size",e,t),t}function xt(n,e){const t=Te(n,"value"),r=Un(t);return F(r.length<=32,"value too large",`tx.${e}`,t),r}function by(n){return Ll(n).map(e=>[e.address,e.storageKeys])}function _7(n,e){F(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)F(yt(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function F7(n){const e=v1(n);F(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:Wu(e[0],"nonce"),gasPrice:Ht(e[1],"gasPrice"),gasLimit:Ht(e[2],"gasLimit"),to:S1(e[3]),value:Ht(e[4],"value"),data:Se(e[5]),chainId:on};if(e.length===6)return t;const r=Ht(e[6],"v"),i=Ht(e[7],"r"),s=Ht(e[8],"s");if(i===on&&s===on)t.chainId=r;else{let o=(r-L7)/P7;o<on&&(o=on),t.chainId=o,F(o!==on||r===R7||r===D7,"non-canonical legacy v","v",e[6]),t.signature=yi.from({r:Al(e[7],32),s:Al(e[8],32),v:r})}return t}function z7(n,e){const t=[xt(n.nonce,"nonce"),xt(n.gasPrice||0,"gasPrice"),xt(n.gasLimit,"gasLimit"),n.to||"0x",xt(n.value,"value"),n.data];let r=on;if(n.chainId!=on)r=Te(n.chainId,"tx.chainId"),F(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const s=n.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==on&&(t.push(Un(r)),t.push("0x"),t.push("0x")),El(t);let i=BigInt(27+e.yParity);return r!==on?i=yi.getChainIdV(r,e.v):BigInt(e.v)!==i&&F(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Un(i)),t.push(Un(e.r)),t.push(Un(e.s)),El(t)}function wy(n,e){let t;try{if(t=Wu(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{F(!1,"invalid yParity","yParity",e[0])}const r=Al(e[1],32),i=Al(e[2],32),s=yi.from({r,s:i,yParity:t});n.signature=s}function U7(n){const e=v1(rt(n).slice(1));F(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Se(n));const t={type:2,chainId:Ht(e[0],"chainId"),nonce:Wu(e[1],"nonce"),maxPriorityFeePerGas:Ht(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ht(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ht(e[4],"gasLimit"),to:S1(e[5]),value:Ht(e[6],"value"),data:Se(e[7]),accessList:yy(e[8],"accessList")};return e.length===9||wy(t,e.slice(9)),t}function H7(n,e){const t=[xt(n.chainId,"chainId"),xt(n.nonce,"nonce"),xt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xt(n.maxFeePerGas||0,"maxFeePerGas"),xt(n.gasLimit,"gasLimit"),n.to||"0x",xt(n.value,"value"),n.data,by(n.accessList||[])];return e&&(t.push(xt(e.yParity,"yParity")),t.push(Un(e.r)),t.push(Un(e.s))),jt(["0x02",El(t)])}function j7(n){const e=v1(rt(n).slice(1));F(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Se(n));const t={type:1,chainId:Ht(e[0],"chainId"),nonce:Wu(e[1],"nonce"),gasPrice:Ht(e[2],"gasPrice"),gasLimit:Ht(e[3],"gasLimit"),to:S1(e[4]),value:Ht(e[5],"value"),data:Se(e[6]),accessList:yy(e[7],"accessList")};return e.length===8||wy(t,e.slice(8)),t}function V7(n,e){const t=[xt(n.chainId,"chainId"),xt(n.nonce,"nonce"),xt(n.gasPrice||0,"gasPrice"),xt(n.gasLimit,"gasLimit"),n.to||"0x",xt(n.value,"value"),n.data,by(n.accessList||[])];return e&&(t.push(xt(e.yParity,"recoveryParam")),t.push(Un(e.r)),t.push(Un(e.s))),jt(["0x01",El(t)])}function $7(n){let e=v1(rt(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const s=e[1],o=e[2],l=e[3];F(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),F(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),F(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),F(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),F(s.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:s[c],commitment:o[c],proof:l[c]});e=e[0]}F(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",Se(n));const i={type:3,chainId:Ht(e[0],"chainId"),nonce:Wu(e[1],"nonce"),maxPriorityFeePerGas:Ht(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ht(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ht(e[4],"gasLimit"),to:S1(e[5]),value:Ht(e[6],"value"),data:Se(e[7]),accessList:yy(e[8],"accessList"),maxFeePerBlobGas:Ht(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),F(i.to!=null,`invalid address for transaction type: ${t}`,"data",n),F(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let s=0;s<i.blobVersionedHashes.length;s++)F(yt(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",n);return e.length===11||wy(i,e.slice(11)),i}function G7(n,e,t){const r=[xt(n.chainId,"chainId"),xt(n.nonce,"nonce"),xt(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xt(n.maxFeePerGas||0,"maxFeePerGas"),xt(n.gasLimit,"gasLimit"),n.to||ou,xt(n.value,"value"),n.data,by(n.accessList||[]),xt(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),_7(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(xt(e.yParity,"yParity")),r.push(Un(e.r)),r.push(Un(e.s)),t)?jt(["0x03",El([r,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):jt(["0x03",El(r)])}var zi,K0,J0,q0,Y0,X0,Z0,ef,tf,nf,rf,sf,rl,Bo,Is,_o,of,zh,jr;let $3=(jr=class{constructor(){J(this,of);J(this,zi);J(this,K0);J(this,J0);J(this,q0);J(this,Y0);J(this,X0);J(this,Z0);J(this,ef);J(this,tf);J(this,nf);J(this,rf);J(this,sf);J(this,rl);J(this,Bo);J(this,Is);J(this,_o);T(this,zi,null),T(this,K0,null),T(this,q0,0),T(this,Y0,on),T(this,X0,null),T(this,Z0,null),T(this,ef,null),T(this,J0,"0x"),T(this,tf,on),T(this,nf,on),T(this,rf,null),T(this,sf,null),T(this,rl,null),T(this,Bo,null),T(this,_o,null),T(this,Is,null)}get type(){return E(this,zi)}set type(e){switch(e){case null:T(this,zi,null);break;case 0:case"legacy":T(this,zi,0);break;case 1:case"berlin":case"eip-2930":T(this,zi,1);break;case 2:case"london":case"eip-1559":T(this,zi,2);break;case 3:case"cancun":case"eip-4844":T(this,zi,3);break;default:F(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=E(this,K0);return e==null&&this.type===3?ou:e}set to(e){T(this,K0,e==null?null:ht(e))}get nonce(){return E(this,q0)}set nonce(e){T(this,q0,Ke(e,"value"))}get gasLimit(){return E(this,Y0)}set gasLimit(e){T(this,Y0,Te(e))}get gasPrice(){const e=E(this,X0);return e==null&&(this.type===0||this.type===1)?on:e}set gasPrice(e){T(this,X0,e==null?null:Te(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=E(this,Z0);return e??(this.type===2||this.type===3?on:null)}set maxPriorityFeePerGas(e){T(this,Z0,e==null?null:Te(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=E(this,ef);return e??(this.type===2||this.type===3?on:null)}set maxFeePerGas(e){T(this,ef,e==null?null:Te(e,"maxFeePerGas"))}get data(){return E(this,J0)}set data(e){T(this,J0,Se(e))}get value(){return E(this,tf)}set value(e){T(this,tf,Te(e,"value"))}get chainId(){return E(this,nf)}set chainId(e){T(this,nf,Te(e))}get signature(){return E(this,rf)||null}set signature(e){T(this,rf,e==null?null:yi.from(e))}get accessList(){const e=E(this,sf)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){T(this,sf,e==null?null:Ll(e))}get maxFeePerBlobGas(){const e=E(this,rl);return e==null&&this.type===3?on:e}set maxFeePerBlobGas(e){T(this,rl,e==null?null:Te(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=E(this,Bo);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){F(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)F(yt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}T(this,Bo,e)}get blobs(){return E(this,_o)==null?null:E(this,_o).map(e=>Object.assign({},e))}set blobs(e){if(e==null){T(this,_o,null);return}const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(iy(s)){re(E(this,Is),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=rt(s);if(F(o.length<=W5,"blob is too large",`blobs[${i}]`,s),o.length!==W5){const u=new Uint8Array(W5);u.set(o),o=u}const l=E(this,Is).blobToKzgCommitment(o),c=Se(E(this,Is).computeBlobKzgProof(o,l));t.push({data:Se(o),commitment:Se(l),proof:c}),r.push($w(1,l))}else{const o=Se(s.commitment);t.push({data:Se(s.data),commitment:o,proof:Se(s.proof)}),r.push($w(1,o))}}T(this,_o,t),T(this,Bo,r)}get kzg(){return E(this,Is)}set kzg(e){T(this,Is,e)}get hash(){return this.signature==null?null:Qt(le(this,of,zh).call(this,!0,!1))}get unsignedHash(){return Qt(this.unsignedSerialized)}get from(){return this.signature==null?null:I7(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:au.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return le(this,of,zh).call(this,!0,!0)}get unsignedSerialized(){return le(this,of,zh).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=E(this,rl)!=null||E(this,Bo);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&re(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),re(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),re(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return jr.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new jr;if(typeof e=="string"){const r=rt(e);if(r[0]>=127)return jr.from(F7(r));switch(r[0]){case 1:return jr.from(j7(r));case 2:return jr.from(U7(r));case 3:return jr.from($7(r))}re(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new jr;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=yi.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(F(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),F(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(F(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),F(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}},zi=new WeakMap,K0=new WeakMap,J0=new WeakMap,q0=new WeakMap,Y0=new WeakMap,X0=new WeakMap,Z0=new WeakMap,ef=new WeakMap,tf=new WeakMap,nf=new WeakMap,rf=new WeakMap,sf=new WeakMap,rl=new WeakMap,Bo=new WeakMap,Is=new WeakMap,_o=new WeakMap,of=new WeakSet,zh=function(e,t){re(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return z7(this,r);case 1:return V7(this,r);case 2:return H7(this,r);case 3:return G7(this,r,t?this.blobs:null)}re(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},jr);const G3=new Uint8Array(32);G3.fill(0);const W7=BigInt(-1),W3=BigInt(0),Q3=BigInt(1),Q7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function K7(n){const e=rt(n),t=e.length%32;return t?jt([e,G3.slice(t)]):Se(e)}const J7=sa(Q3,32),q7=sa(W3,32),Gw={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Q5=["name","version","chainId","verifyingContract","salt"];function Ww(n){return function(e){return F(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const Y7={name:Ww("name"),version:Ww("version"),chainId:function(n){const e=Te(n,"domain.chainId");return F(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):k0(e)},verifyingContract:function(n){try{return ht(n).toLowerCase()}catch{}F(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=rt(n,"domain.salt");return F(e.length===32,'invalid domain value "salt"',"domain.salt",n),Se(e)}};function K5(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);F(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const i=_a(Q7,t?r-1:r),s=t?(i+Q3)*W7:W3;return function(o){const l=Te(o,"value");return F(l>=s&&l<=i,`value out-of-bounds for ${n}`,"value",l),sa(t?Rx(l,256):l,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return F(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const i=rt(r);return F(i.length===t,`invalid length for ${n}`,"value",r),K7(r)}}}switch(n){case"address":return function(e){return Al(ht(e),32)};case"bool":return function(e){return e?J7:q7};case"bytes":return function(e){return Qt(e)};case"string":return function(e){return Sl(e)}}return null}function Qw(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function gh(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var Du,Ps,af,u1,K3;const Dr=class Dr{constructor(e){J(this,u1);$(this,"primaryType");J(this,Du);J(this,Ps);J(this,af);T(this,Ps,new Map),T(this,af,new Map);const t=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(c=>{s[c]=e[c].map(({name:u,type:h})=>{let{base:p,index:g}=gh(h);return p==="int"&&!e.int&&(p="int256"),p==="uint"&&!e.uint&&(p="uint256"),{name:u,type:p+(g||"")}}),t.set(c,new Set),r.set(c,[]),i.set(c,new Set)}),T(this,Du,JSON.stringify(s));for(const c in s){const u=new Set;for(const h of s[c]){F(!u.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(c)}`,"types",e),u.add(h.name);const p=gh(h.type).base;F(p!==c,`circular type reference to ${JSON.stringify(p)}`,"types",e),!K5(p)&&(F(r.has(p),`unknown type ${JSON.stringify(p)}`,"types",e),r.get(p).push(c),t.get(c).add(p))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);F(o.length!==0,"missing primary type","types",e),F(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),je(this,{primaryType:o[0]});function l(c,u){F(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const h of t.get(c))if(r.has(h)){l(h,u);for(const p of u)i.get(p).add(h)}u.delete(c)}l(this.primaryType,new Set);for(const[c,u]of i){const h=Array.from(u);h.sort(),E(this,Ps).set(c,Qw(c,s[c])+h.map(p=>Qw(p,s[p])).join(""))}}get types(){return JSON.parse(E(this,Du))}getEncoder(e){let t=E(this,af).get(e);return t||(t=le(this,u1,K3).call(this,e),E(this,af).set(e,t)),t}encodeType(e){const t=E(this,Ps).get(e);return F(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Qt(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(K5(e))return r(e,t);const i=gh(e).array;if(i)return F(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:l,type:c})=>(o[l]=this._visit(c,t[l],r),o),{});F(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Dr(e)}static getPrimaryType(e){return Dr.from(e).primaryType}static hashStruct(e,t,r){return Dr.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=Gw[r];F(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Q5.indexOf(r.name)-Q5.indexOf(i.name)),Dr.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return jt(["0x1901",Dr.hashDomain(e),Dr.from(t).hash(r)])}static hash(e,t,r){return Qt(Dr.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const s={};e.verifyingContract&&!yt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Dr.from(t);o.visit(r,(l,c)=>(l==="address"&&!yt(c,20)&&(s[c]="0x"),c));for(const l in s)s[l]=await i(l);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(l,c)=>l==="address"&&s[c]?s[c]:c),{domain:e,value:r}}static getPayload(e,t,r){Dr.hashDomain(e);const i={},s=[];Q5.forEach(c=>{const u=e[c];u!=null&&(i[c]=Y7[c](u),s.push({name:c,type:Gw[c]}))});const o=Dr.from(t);t=o.types;const l=Object.assign({},t);return F(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),l.EIP712Domain=s,o.encode(r),{types:l,domain:i,primaryType:o.primaryType,message:o.visit(r,(c,u)=>{if(c.match(/^bytes(\d*)/))return Se(rt(u));if(c.match(/^u?int/))return Te(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return F(typeof u=="string","invalid string","value",u),u}F(!1,"unsupported type","type",c)})}}};Du=new WeakMap,Ps=new WeakMap,af=new WeakMap,u1=new WeakSet,K3=function(e){{const i=K5(e);if(i)return i}const t=gh(e).array;if(t){const i=t.prefix,s=this.getEncoder(i);return o=>{F(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let l=o.map(s);return E(this,Ps).has(i)&&(l=l.map(Qt)),Qt(jt(l))}}const r=this.types[e];if(r){const i=Sl(E(this,Ps).get(e));return s=>{const o=r.map(({name:l,type:c})=>{const u=this.getEncoder(c)(s[l]);return E(this,Ps).has(c)?Qt(u):u});return o.unshift(i),jt(o)}}F(!1,`unknown type: ${e}`,"type",e)};let up=Dr;function Vn(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const X7="external public payable override",Z7=Vn(X7.split(" ")),J3="constant external internal payable private public pure view override",eM=Vn(J3.split(" ")),q3="constructor error event fallback function receive struct",Y3=Vn(q3.split(" ")),X3="calldata memory storage payable indexed",tM=Vn(X3.split(" ")),nM="tuple returns",rM=[q3,X3,nM,J3].join(" "),iM=Vn(rM.split(" ")),sM={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},oM=new RegExp("^(\\s*)"),aM=new RegExp("^([0-9]+)"),lM=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Z3=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),e4=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var pn,ci,Lu,ng;const d1=class d1{constructor(e){J(this,Lu);J(this,pn);J(this,ci);T(this,pn,0),T(this,ci,e.slice())}get offset(){return E(this,pn)}get length(){return E(this,ci).length-E(this,pn)}clone(){return new d1(E(this,ci))}reset(){T(this,pn,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=le(this,Lu,ng).call(this,E(this,pn)+1,e.match+1);return T(this,pn,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;E(this,pn)<e.match-1;){const r=this.peek().linkNext;t.push(le(this,Lu,ng).call(this,E(this,pn)+1,r)),T(this,pn,r)}return T(this,pn,e.match+1),t}peek(){if(E(this,pn)>=E(this,ci).length)throw new Error("out-of-bounds");return E(this,ci)[E(this,pn)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return kc(this,pn)._++,e}toString(){const e=[];for(let t=E(this,pn);t<E(this,ci).length;t++){const r=E(this,ci)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};pn=new WeakMap,ci=new WeakMap,Lu=new WeakSet,ng=function(e=0,t=0){return new d1(E(this,ci).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let bi=d1;function fa(n){const e=[],t=o=>{const l=s<n.length?JSON.stringify(n[s]):"$EOI";throw new Error(`invalid token ${l} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<n.length;){let o=n.substring(s),l=o.match(oM);l&&(s+=l[1].length,o=n.substring(s));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let u=sM[o[0]]||"";if(u){if(c.type=u,c.text=o[0],s++,u==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(u=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(u==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let h=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const p=e.pop().text;h=p+h,e[e.length-1].value=Ke(p)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=h}continue}if(l=o.match(lM),l){if(c.text=l[1],s+=c.text.length,iM.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(e4)){c.type="TYPE";continue}c.type="ID";continue}if(l=o.match(aM),l){c.text=l[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new bi(e.map(o=>Object.freeze(o)))}function Kw(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function C1(n,e){if(e.peekKeyword(Y3)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function Qs(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function t4(n){let e=Qs(n,eM);return Kw(e,Vn("constant payable nonpayable".split(" "))),Kw(e,Vn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function $s(n,e){return n.popParams().map(t=>vn.from(t,e))}function n4(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Te(n.pop().text);throw new Error("invalid gas")}return null}function Cl(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const fM=new RegExp(/^(.*)\[([0-9]*)\]$/);function Jw(n){const e=n.match(e4);if(F(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);F(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);F(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const Nt={},ar=Symbol.for("_ethers_internal"),qw="_ParamTypeInternal",Yw="_ErrorInternal",Xw="_EventInternal",Zw="_ConstructorInternal",e9="_FallbackInternal",t9="_FunctionInternal",n9="_StructInternal";var lf,Uh;const Lr=class Lr{constructor(e,t,r,i,s,o,l,c){J(this,lf);$(this,"name");$(this,"type");$(this,"baseType");$(this,"indexed");$(this,"components");$(this,"arrayLength");$(this,"arrayChildren");if($u(e,Nt,"ParamType"),Object.defineProperty(this,ar,{value:qw}),o&&(o=Object.freeze(o.slice())),i==="array"){if(l==null||c==null)throw new Error("")}else if(l!=null||c!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");je(this,{name:t,type:r,baseType:i,indexed:s,components:o,arrayLength:l,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],i=[e];return le(this,lf,Uh).call(this,r,e,t,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(Lr.isParamType(e))return e;if(typeof e=="string")try{return Lr.from(fa(e),t)}catch{F(!1,"invalid param type","obj",e)}else if(e instanceof bi){let l="",c="",u=null;Qs(e,Vn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",u=e.popParams().map(v=>Lr.from(v)),l=`tuple(${u.map(v=>v.format()).join(",")})`):(l=Jw(e.popType("TYPE")),c=l);let h=null,p=null;for(;e.length&&e.peekType("BRACKET");){const v=e.pop();h=new Lr(Nt,"",l,c,null,u,p,h),p=v.value,l+=v.text,c="array",u=null}let g=null;if(Qs(e,tM).has("indexed")){if(!t)throw new Error("");g=!0}const w=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Lr(Nt,w,l,c,g,u,p,h)}const r=e.name;F(!r||typeof r=="string"&&r.match(Z3),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(F(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(fM);if(o){const l=parseInt(o[2]||"-1"),c=Lr.from({type:o[1],components:e.components});return new Lr(Nt,r||"",s,"array",i,null,l,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const l=e.components!=null?e.components.map(u=>Lr.from(u)):null;return new Lr(Nt,r||"",s,"tuple",i,l,null,null)}return s=Jw(e.type),new Lr(Nt,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[ar]===qw}};lf=new WeakSet,Uh=function(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,l=t.slice();l.forEach((c,u)=>{var h;le(h=o,lf,Uh).call(h,e,c,r,p=>{l[u]=p})}),i(l);return}if(this.isTuple()){const o=this.components;let l;if(Array.isArray(t))l=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");l=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(l.length!==this.components.length)throw new Error("array is wrong length");l.forEach((c,u)=>{var h;le(h=o[u],lf,Uh).call(h,e,c,r,p=>{l[u]=p})}),i(l);return}const s=r(this.type,t);s.then?e.push(async function(){i(await s)}()):i(s)};let vn=Lr,N1=class rg{constructor(e,t,r){$(this,"type");$(this,"inputs");$u(e,Nt,"Fragment"),r=Object.freeze(r.slice()),je(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{rg.from(JSON.parse(e))}catch{}return rg.from(fa(e))}if(e instanceof bi)switch(e.peekKeyword(Y3)){case"constructor":return Us.from(e);case"error":return rr.from(e);case"event":return Wi.from(e);case"fallback":case"receive":return Cs.from(e);case"function":return Qi.from(e);case"struct":return hl.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Us.from(e);case"error":return rr.from(e);case"event":return Wi.from(e);case"fallback":case"receive":return Cs.from(e);case"function":return Qi.from(e);case"struct":return hl.from(e)}re(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}F(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Us.isFragment(e)}static isError(e){return rr.isFragment(e)}static isEvent(e){return Wi.isFragment(e)}static isFunction(e){return Qi.isFragment(e)}static isStruct(e){return hl.isFragment(e)}};class T1 extends N1{constructor(t,r,i,s){super(t,r,s);$(this,"name");F(typeof i=="string"&&i.match(Z3),"invalid identifier","name",i),s=Object.freeze(s.slice()),je(this,{name:i})}}function du(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class rr extends T1{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,ar,{value:Yw})}get selector(){return Sl(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+du(e,this.inputs)),t.join(" ")}static from(e){if(rr.isFragment(e))return e;if(typeof e=="string")return rr.from(fa(e));if(e instanceof bi){const t=C1("error",e),r=$s(e);return Cl(e),new rr(Nt,t,r)}return new rr(Nt,e.name,e.inputs?e.inputs.map(vn.from):[])}static isFragment(e){return e&&e[ar]===Yw}}class Wi extends T1{constructor(t,r,i,s){super(t,"event",r,i);$(this,"anonymous");Object.defineProperty(this,ar,{value:Xw}),je(this,{anonymous:s})}get topicHash(){return Sl(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+du(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(s=>vn.from(s)),new Wi(Nt,t,r,!1).topicHash}static from(t){if(Wi.isFragment(t))return t;if(typeof t=="string")try{return Wi.from(fa(t))}catch{F(!1,"invalid event fragment","obj",t)}else if(t instanceof bi){const r=C1("event",t),i=$s(t,!0),s=!!Qs(t,Vn(["anonymous"])).has("anonymous");return Cl(t),new Wi(Nt,r,i,s)}return new Wi(Nt,t.name,t.inputs?t.inputs.map(r=>vn.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[ar]===Xw}}class Us extends N1{constructor(t,r,i,s,o){super(t,r,i);$(this,"payable");$(this,"gas");Object.defineProperty(this,ar,{value:Zw}),je(this,{payable:s,gas:o})}format(t){if(re(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[`constructor${du(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(Us.isFragment(t))return t;if(typeof t=="string")try{return Us.from(fa(t))}catch{F(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof bi){Qs(t,Vn(["constructor"]));const r=$s(t),i=!!Qs(t,Z7).has("payable"),s=n4(t);return Cl(t),new Us(Nt,"constructor",r,i,s)}return new Us(Nt,"constructor",t.inputs?t.inputs.map(vn.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[ar]===Zw}}class Cs extends N1{constructor(t,r,i){super(t,"fallback",r);$(this,"payable");Object.defineProperty(this,ar,{value:e9}),je(this,{payable:i})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(t){if(Cs.isFragment(t))return t;if(typeof t=="string")try{return Cs.from(fa(t))}catch{F(!1,"invalid fallback fragment","obj",t)}else if(t instanceof bi){const r=t.toString(),i=t.peekKeyword(Vn(["fallback","receive"]));if(F(i,"type must be fallback or receive","obj",r),t.popKeyword(Vn(["fallback","receive"]))==="receive"){const c=$s(t);return F(c.length===0,"receive cannot have arguments","obj.inputs",c),Qs(t,Vn(["payable"])),Cl(t),new Cs(Nt,[],!0)}let o=$s(t);o.length?F(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[vn.from("bytes")];const l=t4(t);if(F(l==="nonpayable"||l==="payable","fallback cannot be constants","obj.stateMutability",l),Qs(t,Vn(["returns"])).has("returns")){const c=$s(t);F(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return Cl(t),new Cs(Nt,o,l==="payable")}if(t.type==="receive")return new Cs(Nt,[],!0);if(t.type==="fallback"){const r=[vn.from("bytes")],i=t.stateMutability==="payable";return new Cs(Nt,r,i)}F(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[ar]===e9}}class Qi extends T1{constructor(t,r,i,s,o,l){super(t,"function",r,s);$(this,"constant");$(this,"outputs");$(this,"stateMutability");$(this,"payable");$(this,"gas");Object.defineProperty(this,ar,{value:t9}),o=Object.freeze(o.slice()),je(this,{constant:i==="view"||i==="pure",gas:l,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return Sl(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+du(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(du(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(s=>vn.from(s)),new Qi(Nt,t,"view",r,[],null).selector}static from(t){if(Qi.isFragment(t))return t;if(typeof t=="string")try{return Qi.from(fa(t))}catch{F(!1,"invalid function fragment","obj",t)}else if(t instanceof bi){const i=C1("function",t),s=$s(t),o=t4(t);let l=[];Qs(t,Vn(["returns"])).has("returns")&&(l=$s(t));const c=n4(t);return Cl(t),new Qi(Nt,i,o,s,l,c)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new Qi(Nt,t.name,r,t.inputs?t.inputs.map(vn.from):[],t.outputs?t.outputs.map(vn.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[ar]===t9}}class hl extends T1{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,ar,{value:n9})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return hl.from(fa(e))}catch{F(!1,"invalid struct fragment","obj",e)}else if(e instanceof bi){const t=C1("struct",e),r=$s(e);return Cl(e),new hl(Nt,t,r)}return new hl(Nt,e.name,e.inputs?e.inputs.map(vn.from):[])}static isFragment(e){return e&&e[ar]===n9}}const wi=new Map;wi.set(0,"GENERIC_PANIC");wi.set(1,"ASSERT_FALSE");wi.set(17,"OVERFLOW");wi.set(18,"DIVIDE_BY_ZERO");wi.set(33,"ENUM_RANGE_ERROR");wi.set(34,"BAD_STORAGE_DATA");wi.set(49,"STACK_UNDERFLOW");wi.set(50,"ARRAY_RANGE_ERROR");wi.set(65,"OUT_OF_MEMORY");wi.set(81,"UNINITIALIZED_FUNCTION_CALL");const cM=new RegExp(/^bytes([0-9]*)$/),uM=new RegExp(/^(u?int)([0-9]*)$/);let J5=null,r9=1024;function dM(n,e,t,r){let i="missing revert data",s=null;const o=null;let l=null;if(t){i="execution reverted";const u=rt(t);if(t=Se(t),u.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(u.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Se(u.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],u.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Se(u.slice(0,4))==="0x4e487b71")try{const h=Number(r.decode(["uint256"],u.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[h]},s=`Panic due to ${wi.get(h)||"UNKNOWN"}(${h})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?ht(e.to):null,data:e.data||"0x"};return e.from&&(c.from=ht(e.from)),Rt(i,"CALL_EXCEPTION",{action:n,data:t,reason:s,transaction:c,invocation:o,revert:l})}var Fo,m0;const h1=class h1{constructor(){J(this,Fo)}getDefaultValue(e){const t=e.map(i=>le(this,Fo,m0).call(this,vn.from(i)));return new mh(t,"_").defaultValue()}encode(e,t){Ox(t.length,e.length,"types/values length mismatch");const r=e.map(o=>le(this,Fo,m0).call(this,vn.from(o))),i=new mh(r,"_"),s=new jm;return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>le(this,Fo,m0).call(this,vn.from(o)));return new mh(i,"_").decode(new Vm(t,r,r9))}static _setDefaultMaxInflation(e){F(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),r9=e}static defaultAbiCoder(){return J5==null&&(J5=new h1),J5}static getBuiltinCallException(e,t,r){return dM(e,t,r,h1.defaultAbiCoder())}};Fo=new WeakSet,m0=function(e){if(e.isArray())return new LT(le(this,Fo,m0).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new mh(e.components.map(r=>le(this,Fo,m0).call(this,r)),e.name);switch(e.baseType){case"address":return new RT(e.name);case"bool":return new BT(e.name);case"string":return new GT(e.name);case"bytes":return new _T(e.name);case"":return new UT(e.name)}let t=e.type.match(uM);if(t){let r=parseInt(t[2]||"256");return F(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new $T(r/8,t[1]==="int",e.name)}if(t=e.type.match(cM),t){let r=parseInt(t[1]);return F(r!==0&&r<=32,"invalid bytes length","param",e),new FT(r,e.name)}F(!1,"invalid type","type",e.type)};let hu=h1;class hM{constructor(e,t,r){$(this,"fragment");$(this,"name");$(this,"signature");$(this,"topic");$(this,"args");const i=e.name,s=e.format();je(this,{fragment:e,name:i,signature:s,topic:t,args:r})}}class pM{constructor(e,t,r,i){$(this,"fragment");$(this,"name");$(this,"args");$(this,"signature");$(this,"selector");$(this,"value");const s=e.name,o=e.format();je(this,{fragment:e,name:s,args:r,signature:o,selector:t,value:i})}}class mM{constructor(e,t,r){$(this,"fragment");$(this,"name");$(this,"args");$(this,"signature");$(this,"selector");const i=e.name,s=e.format();je(this,{fragment:e,name:i,args:r,signature:s,selector:t})}}class i9{constructor(e){$(this,"hash");$(this,"_isIndexed");je(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const s9={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},o9={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&s9[n.toString()]&&(e=s9[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};var Ui,Hi,ji,Sn,qi,Hh,jh;const Ba=class Ba{constructor(e){J(this,qi);$(this,"fragments");$(this,"deploy");$(this,"fallback");$(this,"receive");J(this,Ui);J(this,Hi);J(this,ji);J(this,Sn);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,T(this,ji,new Map),T(this,Ui,new Map),T(this,Hi,new Map);const r=[];for(const o of t)try{r.push(N1.from(o))}catch(l){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,l.message)}je(this,{fragments:Object.freeze(r)});let i=null,s=!1;T(this,Sn,this.getAbiCoder()),this.fragments.forEach((o,l)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}je(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(F(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${l}]`,o),i=o,s=i.payable);return;case"function":c=E(this,ji);break;case"event":c=E(this,Hi);break;case"error":c=E(this,Ui);break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||je(this,{deploy:Us.from("constructor()")}),je(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return hu.defaultAbiCoder()}getFunctionName(e){const t=le(this,qi,Hh).call(this,e,null,!1);return F(t,"no matching function","key",e),t.name}hasFunction(e){return!!le(this,qi,Hh).call(this,e,null,!1)}getFunction(e,t){return le(this,qi,Hh).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(E(this,ji).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(E(this,ji).get(i),r)}}getEventName(e){const t=le(this,qi,jh).call(this,e,null,!1);return F(t,"no matching event","key",e),t.name}hasEvent(e){return!!le(this,qi,jh).call(this,e,null,!1)}getEvent(e,t){return le(this,qi,jh).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(E(this,Hi).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(E(this,Hi).get(i),r)}}getError(e,t){if(yt(e)){const i=e.toLowerCase();if(o9[i])return rr.from(o9[i].signature);for(const s of E(this,Ui).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of E(this,Ui))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?rr.from("error Error(string)"):e==="Panic"?rr.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");F(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=rr.from(e).format(),e==="Error(string)")return rr.from("error Error(string)");if(e==="Panic(uint256)")return rr.from("error Panic(uint256)");const r=E(this,Ui).get(e);return r||null}forEachError(e){const t=Array.from(E(this,Ui).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(E(this,Ui).get(i),r)}}_decodeParams(e,t){return E(this,Sn).decode(e,t)}_encodeParams(e,t){return E(this,Sn).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);F(r,"unknown error","fragment",e),e=r}return F(Dt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Dt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);F(r,"unknown error","fragment",e),e=r}return jt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);F(r,"unknown function","fragment",e),e=r}return F(Dt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Dt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);F(r,"unknown function","fragment",e),e=r}return jt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);F(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=Fn(t);if(i.length%32===0)try{return E(this,Sn).decode(e.outputs,i)}catch{r="could not decode result data"}re(!1,r,"BAD_DATA",{value:Se(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=rt(e,"data"),i=hu.getBuiltinCallException("call",t,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const l=Se(r.slice(0,4)),c=this.getError(l);if(c)try{const u=E(this,Sn).decode(c.inputs,r.slice(4));i.revert={name:c.name,signature:c.format(),args:u},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);F(r,"unknown function","fragment",e),e=r}return Se(E(this,Sn).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);F(s,"unknown event","eventFragment",e),e=s}re(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?Sl(o):s.type==="bytes"?Qt(Se(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=sa(o):s.type.match(/^bytes/)?o=LC(o,32):s.type==="address"&&E(this,Sn).encode(["address"],[o]),Al(Se(o),32));for(t.forEach((s,o)=>{const l=e.inputs[o];if(!l.indexed){F(s==null,"cannot filter non-indexed parameters; must be null","contract."+l.name,s);return}s==null?r.push(null):l.baseType==="array"||l.baseType==="tuple"?F(!1,"filtering with tuples or arrays not supported","contract."+l.name,s):Array.isArray(s)?r.push(s.map(c=>i(l,c))):r.push(i(l,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);F(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),F(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,l)=>{const c=t[l];if(o.indexed)if(o.type==="string")r.push(Sl(c));else if(o.type==="bytes")r.push(Qt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(E(this,Sn).encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:E(this,Sn).encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const y=this.getEvent(e);F(y,"unknown event","eventFragment",e),e=y}if(r!=null&&!e.anonymous){const y=e.topicHash;F(yt(r[0],32)&&r[0].toLowerCase()===y,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((y,w)=>{y.indexed?y.type==="string"||y.type==="bytes"||y.baseType==="tuple"||y.baseType==="array"?(i.push(vn.from({type:"bytes32",name:y.name})),o.push(!0)):(i.push(y),o.push(!1)):(s.push(y),o.push(!1))});const l=r!=null?E(this,Sn).decode(i,jt(r)):null,c=E(this,Sn).decode(s,t,!0),u=[],h=[];let p=0,g=0;return e.inputs.forEach((y,w)=>{let v=null;if(y.indexed)if(l==null)v=new i9(null);else if(o[w])v=new i9(l[g++]);else try{v=l[g++]}catch(k){v=k}else try{v=c[p++]}catch(k){v=k}u.push(v),h.push(y.name||null)}),Af.fromItems(u,h)}parseTransaction(e){const t=rt(e.data,"tx.data"),r=Te(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Se(t.slice(0,4)));if(!i)return null;const s=E(this,Sn).decode(i.inputs,t.slice(4));return new pM(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new hM(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Se(e),r=this.getError(Dt(t,0,4));if(!r)return null;const i=E(this,Sn).decode(r.inputs,Dt(t,4));return new mM(r,r.selector,i)}static from(e){return e instanceof Ba?e:typeof e=="string"?new Ba(JSON.parse(e)):typeof e.formatJson=="function"?new Ba(e.formatJson()):typeof e.format=="function"?new Ba(e.format("json")):new Ba(e)}};Ui=new WeakMap,Hi=new WeakMap,ji=new WeakMap,Sn=new WeakMap,qi=new WeakSet,Hh=function(e,t,r){if(yt(e)){const s=e.toLowerCase();for(const o of E(this,ji).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,l]of E(this,ji))o.split("(")[0]===e&&s.push(l);if(t){const o=t.length>0?t[t.length-1]:null;let l=t.length,c=!0;On.isTyped(o)&&o.type==="overrides"&&(c=!1,l--);for(let u=s.length-1;u>=0;u--){const h=s[u].inputs.length;h!==l&&(!c||h!==l-1)&&s.splice(u,1)}for(let u=s.length-1;u>=0;u--){const h=s[u].inputs;for(let p=0;p<t.length;p++)if(On.isTyped(t[p])){if(p>=h.length){if(t[p].type==="overrides")continue;s.splice(u,1);break}if(t[p].type!==h[p].baseType){s.splice(u,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(l=>JSON.stringify(l.format())).join(", ");F(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=E(this,ji).get(Qi.from(e).format());return i||null},jh=function(e,t,r){if(yt(e)){const s=e.toLowerCase();for(const o of E(this,Hi).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,l]of E(this,Hi))o.split("(")[0]===e&&s.push(l);if(t){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<t.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const l=s[o].inputs;for(let c=0;c<t.length;c++)if(On.isTyped(t[c])&&t[c].type!==l[c].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(l=>JSON.stringify(l.format())).join(", ");F(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=E(this,Hi).get(Wi.from(e).format());return i||null};let ig=Ba;const r4=BigInt(0);function I0(n){return n??null}function zt(n){return n==null?null:n.toString()}class a9{constructor(e,t,r){$(this,"gasPrice");$(this,"maxFeePerGas");$(this,"maxPriorityFeePerGas");je(this,{gasPrice:I0(e),maxFeePerGas:I0(t),maxPriorityFeePerGas:I0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:zt(e),maxFeePerGas:zt(t),maxPriorityFeePerGas:zt(r)}}}function dp(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=Se(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in n)||n[i]==null||(e[i]=Te(n[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in n)||n[i]==null||(e[i]=Ke(n[i],`request.${i}`));return n.accessList&&(e.accessList=Ll(n.accessList)),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(i=>iy(i)?Se(i):Object.assign({},i))),e}var Rs;class gM{constructor(e,t){$(this,"provider");$(this,"number");$(this,"hash");$(this,"timestamp");$(this,"parentHash");$(this,"parentBeaconBlockRoot");$(this,"nonce");$(this,"difficulty");$(this,"gasLimit");$(this,"gasUsed");$(this,"stateRoot");$(this,"receiptsRoot");$(this,"blobGasUsed");$(this,"excessBlobGas");$(this,"miner");$(this,"prevRandao");$(this,"extraData");$(this,"baseFeePerGas");J(this,Rs);T(this,Rs,e.transactions.map(r=>typeof r!="string"?new pu(r,t):r)),je(this,{provider:t,hash:I0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:I0(e.prevRandao),extraData:e.extraData,baseFeePerGas:I0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return E(this,Rs).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=E(this,Rs).slice();return e.length===0?[]:(re(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:l,prevRandao:c,nonce:u,number:h,parentHash:p,parentBeaconBlockRoot:g,stateRoot:y,receiptsRoot:w,timestamp:v,transactions:k}=this;return{_type:"Block",baseFeePerGas:zt(e),difficulty:zt(t),extraData:r,gasLimit:zt(i),gasUsed:zt(s),blobGasUsed:zt(this.blobGasUsed),excessBlobGas:zt(this.excessBlobGas),hash:o,miner:l,prevRandao:c,nonce:u,number:h,parentHash:p,timestamp:v,parentBeaconBlockRoot:g,stateRoot:y,receiptsRoot:w,transactions:k}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return E(this,Rs).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=E(this,Rs)[e];else{const r=e.toLowerCase();for(const i of E(this,Rs))if(typeof i=="string"){if(i!==r)continue;t=i;break}else{if(i.hash===r)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;F(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return yM(this)}}Rs=new WeakMap;class Qu{constructor(e,t){$(this,"provider");$(this,"transactionHash");$(this,"blockHash");$(this,"blockNumber");$(this,"removed");$(this,"address");$(this,"data");$(this,"topics");$(this,"index");$(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());je(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:o,topics:l,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:o,topics:l,transactionHash:c,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return re(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return re(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return re(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return bM(this)}}var Bu;class i4{constructor(e,t){$(this,"provider");$(this,"to");$(this,"from");$(this,"contractAddress");$(this,"hash");$(this,"index");$(this,"blockHash");$(this,"blockNumber");$(this,"logsBloom");$(this,"gasUsed");$(this,"blobGasUsed");$(this,"cumulativeGasUsed");$(this,"gasPrice");$(this,"blobGasPrice");$(this,"type");$(this,"status");$(this,"root");J(this,Bu);T(this,Bu,Object.freeze(e.logs.map(i=>new Qu(i,t))));let r=r4;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),je(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return E(this,Bu)}toJSON(){const{to:e,from:t,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:l,logsBloom:c,logs:u,status:h,root:p}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:l,contractAddress:r,cumulativeGasUsed:zt(this.cumulativeGasUsed),from:t,gasPrice:zt(this.gasPrice),blobGasUsed:zt(this.blobGasUsed),blobGasPrice:zt(this.blobGasPrice),gasUsed:zt(this.gasUsed),hash:i,index:s,logs:u,logsBloom:c,root:p,status:h,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return o4(this)}reorderedEvent(e){return re(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),s4(this,e)}}Bu=new WeakMap;var zo;const w2=class w2{constructor(e,t){$(this,"provider");$(this,"blockNumber");$(this,"blockHash");$(this,"index");$(this,"hash");$(this,"type");$(this,"to");$(this,"from");$(this,"nonce");$(this,"gasLimit");$(this,"gasPrice");$(this,"maxPriorityFeePerGas");$(this,"maxFeePerGas");$(this,"maxFeePerBlobGas");$(this,"data");$(this,"value");$(this,"chainId");$(this,"signature");$(this,"accessList");$(this,"blobVersionedHashes");J(this,zo);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,T(this,zo,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:i,type:s,to:o,from:l,nonce:c,data:u,signature:h,accessList:p,blobVersionedHashes:g}=this;return{_type:"TransactionResponse",accessList:p,blockNumber:e,blockHash:t,blobVersionedHashes:g,chainId:zt(this.chainId),data:u,from:l,gasLimit:zt(this.gasLimit),gasPrice:zt(this.gasPrice),hash:i,maxFeePerGas:zt(this.maxFeePerGas),maxPriorityFeePerGas:zt(this.maxPriorityFeePerGas),maxFeePerBlobGas:zt(this.maxFeePerBlobGas),nonce:c,signature:h,to:o,index:r,type:s,value:zt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await _n({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,i=t??0;let s=E(this,zo),o=-1,l=s===-1;const c=async()=>{if(l)return null;const{blockNumber:g,nonce:y}=await _n({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(y<this.nonce){s=g;return}if(l)return null;const w=await this.getTransaction();if(!(w&&w.blockNumber!=null))for(o===-1&&(o=s-3,o<E(this,zo)&&(o=E(this,zo)));o<=g;){if(l)return null;const v=await this.provider.getBlock(o,!0);if(v==null)return;for(const k of v)if(k===this.hash)return;for(let k=0;k<v.length;k++){const A=await v.getTransaction(k);if(A.from===this.from&&A.nonce===this.nonce){if(l)return null;const C=await this.provider.getTransactionReceipt(A.hash);if(C==null||g-C.blockNumber+1<r)return;let O="replaced";A.data===this.data&&A.to===this.to&&A.value===this.value?O="repriced":A.data==="0x"&&A.from===A.to&&A.value===r4&&(O="cancelled"),re(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:O==="replaced"||O==="cancelled",reason:O,replacement:A.replaceableTransaction(s),hash:A.hash,receipt:C})}}o++}},u=g=>{if(g==null||g.status!==0)return g;re(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:g.to,from:g.from,data:""},receipt:g})},h=await this.provider.getTransactionReceipt(this.hash);if(r===0)return u(h);if(h){if(await h.confirmations()>=r)return u(h)}else if(await c(),r===0)return null;return await new Promise((g,y)=>{const w=[],v=()=>{w.forEach(A=>A())};if(w.push(()=>{l=!0}),i>0){const A=setTimeout(()=>{v(),y(Rt("wait for transaction timeout","TIMEOUT"))},i);w.push(()=>{clearTimeout(A)})}const k=async A=>{if(await A.confirmations()>=r){v();try{g(u(A))}catch(C){y(C)}}};if(w.push(()=>{this.provider.off(this.hash,k)}),this.provider.on(this.hash,k),s>=0){const A=async()=>{try{await c()}catch(C){if(Mn(C,"TRANSACTION_REPLACED")){v(),y(C);return}}l||this.provider.once("block",A)};w.push(()=>{this.provider.off("block",A)}),this.provider.once("block",A)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return re(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),o4(this)}reorderedEvent(e){return re(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),re(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),s4(this,e)}replaceableTransaction(e){F(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new w2(this,this.provider);return T(t,zo,e),t}};zo=new WeakMap;let pu=w2;function yM(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function s4(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function o4(n){return{orphan:"drop-transaction",tx:n}}function bM(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class vy extends Qu{constructor(t,r,i){super(t,t.provider);$(this,"interface");$(this,"fragment");$(this,"args");const s=r.decodeEventLog(i,t.data,t.topics);je(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class a4 extends Qu{constructor(t,r){super(t,t.provider);$(this,"error");je(this,{error:r})}}var ff;class wM extends i4{constructor(t,r,i){super(i,r);J(this,ff);T(this,ff,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?E(this,ff).getEvent(t.topics[0]):null;if(r)try{return new vy(t,E(this,ff),r)}catch(i){return new a4(t,i)}return t})}}ff=new WeakMap;var _u;class xy extends pu{constructor(t,r,i){super(i,r);J(this,_u);T(this,_u,t)}async wait(t,r){const i=await super.wait(t,r);return i==null?null:new wM(E(this,_u),this.provider,i)}}_u=new WeakMap;class l4 extends Dx{constructor(t,r,i,s){super(t,r,i);$(this,"log");je(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class vM extends l4{constructor(e,t,r,i,s){super(e,t,r,new vy(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);je(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const l9=BigInt(0);function f4(n){return n&&typeof n.call=="function"}function c4(n){return n&&typeof n.estimateGas=="function"}function M1(n){return n&&typeof n.resolveName=="function"}function u4(n){return n&&typeof n.sendTransaction=="function"}function d4(n){if(n!=null){if(M1(n))return n;if(n.provider)return n.provider}}var Fu;class xM{constructor(e,t,r){J(this,Fu);$(this,"fragment");if(je(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const i=Nl(e.runner,"resolveName"),s=M1(i)?i:null;T(this,Fu,async function(){const o=await Promise.all(t.inputs.map((l,c)=>r[c]==null?null:l.walkAsync(r[c],(h,p)=>h==="address"?Array.isArray(p)?Promise.all(p.map(g=>jn(g,s))):jn(p,s):p)));return e.interface.encodeFilterTopics(t,o)}())}getTopicFilter(){return E(this,Fu)}}Fu=new WeakMap;function Nl(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function Ua(n){return n==null?null:n.provider||null}async function h4(n,e){const t=On.dereference(n,"overrides");F(typeof t=="object","invalid overrides parameter","overrides",n);const r=dp(t);return F(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),F(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function kM(n,e,t){const r=Nl(n,"resolveName"),i=M1(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(t[o],(l,c)=>(c=On.dereference(c,l),l==="address"?jn(c,i):c))))}function AM(n){const e=async function(o){const l=await h4(o,["data"]);l.to=await n.getAddress(),l.from&&(l.from=await jn(l.from,d4(n.runner)));const c=n.interface,u=Te(l.value||l9,"overrides.value")===l9,h=(l.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!h&&!u&&F(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),F(c.fallback||h,"cannot send data to receive-only contract","overrides.data",l.data);const p=c.receive||c.fallback&&c.fallback.payable;return F(p||u,"cannot send value to non-payable fallback","overrides.value",l.value),F(c.fallback||h,"cannot send data to receive-only contract","overrides.data",l.data),l},t=async function(o){const l=Nl(n.runner,"call");re(f4(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await l.call(c)}catch(u){throw ry(u)&&u.data?n.interface.makeError(u.data,c):u}},r=async function(o){const l=n.runner;re(u4(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await l.sendTransaction(await e(o)),u=Ua(n.runner);return new xy(n.interface,u,c)},i=async function(o){const l=Nl(n.runner,"estimateGas");return re(c4(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await e(o))},s=async o=>await r(o);return je(s,{_contract:n,estimateGas:i,populateTransaction:e,send:r,staticCall:t}),s}function EM(n,e){const t=function(...u){const h=n.interface.getFunction(e,u);return re(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),h},r=async function(...u){const h=t(...u);let p={};if(h.inputs.length+1===u.length&&(p=await h4(u.pop()),p.from&&(p.from=await jn(p.from,d4(n.runner)))),h.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const g=await kM(n.runner,h.inputs,u);return Object.assign({},p,await _n({to:n.getAddress(),data:n.interface.encodeFunctionData(h,g)}))},i=async function(...u){const h=await l(...u);return h.length===1?h[0]:h},s=async function(...u){const h=n.runner;re(u4(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const p=await h.sendTransaction(await r(...u)),g=Ua(n.runner);return new xy(n.interface,g,p)},o=async function(...u){const h=Nl(n.runner,"estimateGas");return re(c4(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await r(...u))},l=async function(...u){const h=Nl(n.runner,"call");re(f4(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const p=await r(...u);let g="0x";try{g=await h.call(p)}catch(w){throw ry(w)&&w.data?n.interface.makeError(w.data,p):w}const y=t(...u);return n.interface.decodeFunctionResult(y,g)},c=async(...u)=>t(...u).constant?await i(...u):await s(...u);return je(c,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:l}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=n.interface.getFunction(e);return re(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),c}function SM(n,e){const t=function(...i){const s=n.interface.getEvent(e,i);return re(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new xM(n,t(...i),i)};return je(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=n.interface.getEvent(e);return re(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const hp=Symbol.for("_ethersInternal_contract"),p4=new WeakMap;function CM(n,e){p4.set(n[hp],e)}function gr(n){return p4.get(n[hp])}function NM(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function ky(n,e){let t,r=null;if(Array.isArray(e)){const s=function(o){if(yt(o,32))return o;const l=n.interface.getEvent(o);return F(l,"unknown fragment","name",o),l.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?t=[null]:typeof e=="string"?yt(e,32)?t=[e]:(r=n.interface.getEvent(e),F(r,"unknown fragment","event",e),t=[r.topicHash]):NM(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):F(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(l=>l.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:t}}async function Bc(n,e){const{subs:t}=gr(n);return t.get((await ky(n,e)).tag)||null}async function f9(n,e,t){const r=Ua(n.runner);re(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await ky(n,t),{addr:l,subs:c}=gr(n);let u=c.get(s);if(!u){const p={address:l||n,topics:o},g=k=>{let A=i;if(A==null)try{A=n.interface.getEvent(k.topics[0])}catch{}if(A){const C=A,O=i?n.interface.decodeEventLog(i,k.data,k.topics):[];og(n,t,O,N=>new vM(n,N,t,C,k))}else og(n,t,[],C=>new l4(n,C,t,k))};let y=[];u={tag:s,listeners:[],start:()=>{y.length||y.push(r.on(p,g))},stop:async()=>{if(y.length==0)return;let k=y;y=[],await Promise.all(k),r.off(p,g)}},c.set(s,u)}return u}let sg=Promise.resolve();async function TM(n,e,t,r){await sg;const i=await Bc(n,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:l})=>{const c=Array.from(t);r&&c.push(r(l?null:o));try{o.call(n,...c)}catch{}return!l}),i.listeners.length===0&&(i.stop(),gr(n).subs.delete(i.tag)),s>0}async function og(n,e,t,r){try{await sg}catch{}const i=TM(n,e,t,r);return sg=i,await i}const yh=["then"];var Nx;Nx=hp;const iu=class iu{constructor(e,t,r,i){$(this,"target");$(this,"interface");$(this,"runner");$(this,"filters");$(this,Nx);$(this,"fallback");F(typeof e=="string"||w3(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=ig.from(t);je(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,hp,{value:{}});let o,l=null,c=null;if(i){const p=Ua(r);c=new xy(this.interface,p,i)}let u=new Map;if(typeof e=="string")if(yt(e))l=e,o=Promise.resolve(e);else{const p=Nl(r,"resolveName");if(!M1(p))throw Rt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=p.resolveName(e).then(g=>{if(g==null)throw Rt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return gr(this).addr=g,g})}else o=e.getAddress().then(p=>{if(p==null)throw new Error("TODO");return gr(this).addr=p,p});CM(this,{addrPromise:o,addr:l,deployTx:c,subs:u});const h=new Proxy({},{get:(p,g,y)=>{if(typeof g=="symbol"||yh.indexOf(g)>=0)return Reflect.get(p,g,y);try{return this.getEvent(g)}catch(w){if(!Mn(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(p,g)=>yh.indexOf(g)>=0?Reflect.has(p,g):Reflect.has(p,g)||this.interface.hasEvent(String(g))});return je(this,{filters:h}),je(this,{fallback:s.receive||s.fallback?AM(this):null}),new Proxy(this,{get:(p,g,y)=>{if(typeof g=="symbol"||g in p||yh.indexOf(g)>=0)return Reflect.get(p,g,y);try{return p.getFunction(g)}catch(w){if(!Mn(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(p,g)=>typeof g=="symbol"||g in p||yh.indexOf(g)>=0?Reflect.has(p,g):p.interface.hasFunction(g)})}connect(e){return new iu(this.target,this.interface,e)}attach(e){return new iu(e,this.interface,this.runner)}async getAddress(){return await gr(this).addrPromise}async getDeployedCode(){const e=Ua(this.runner);re(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ua(this.runner);return re(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(l){s(l)}};o()})}deploymentTransaction(){return gr(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),EM(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),SM(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=gr(this),o=i||await s,{fragment:l,topics:c}=await ky(this,e),u={address:o,topics:c,fromBlock:t,toBlock:r},h=Ua(this.runner);return re(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(u)).map(p=>{let g=l;if(g==null)try{g=this.interface.getEvent(p.topics[0])}catch{}if(g)try{return new vy(p,this.interface,g)}catch(y){return new a4(p,y)}return new Qu(p,h)})}async on(e,t){const r=await f9(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await f9(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await og(this,e,t,null)}async listenerCount(e){if(e){const i=await Bc(this,e);return i?i.listeners.length:0}const{subs:t}=gr(this);let r=0;for(const{listeners:i}of t.values())r+=i.length;return r}async listeners(e){if(e){const i=await Bc(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:t}=gr(this);let r=[];for(const{listeners:i}of t.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,t){const r=await Bc(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(t==null||r.listeners.length===0)&&(r.stop(),gr(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await Bc(this,e);if(!t)return this;t.stop(),gr(this).subs.delete(t.tag)}else{const{subs:t}=gr(this);for(const{tag:r,stop:i}of t.values())i(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends iu{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};let ag=iu;function MM(){return ag}class pl extends MM(){}function q5(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):F(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class OM{constructor(e){$(this,"name");je(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const m4=new RegExp("^(ipfs)://(.*)$","i"),c9=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),m4,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Uo,il,Ho,g0,p1,g4;const C0=class C0{constructor(e,t,r){J(this,Ho);$(this,"provider");$(this,"address");$(this,"name");J(this,Uo);J(this,il);je(this,{provider:e,address:t,name:r}),T(this,Uo,null),T(this,il,new pl(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return E(this,Uo)==null&&T(this,Uo,(async()=>{try{return await E(this,il).supportsInterface("0x9061b923")}catch(e){if(Mn(e,"CALL_EXCEPTION"))return!1;throw T(this,Uo,null),e}})()),await E(this,Uo)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await le(this,Ho,g0).call(this,"addr(bytes32)");return s==null||s===ou?null:s}catch(s){if(Mn(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await le(this,Ho,g0).call(this,"addr(bytes32,uint)",[s]);if(yt(o,20))return ht(o)}let t=null;for(const s of this.provider.plugins)if(s instanceof OM&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;const r=await le(this,Ho,g0).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await t.decodeAddress(e,r);if(i!=null)return i;re(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await le(this,Ho,g0).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await le(this,Ho,g0).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${_C("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;re(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<c9.length;r++){const i=t.match(c9[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=q5(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const l=await this.getAddress();if(l==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const u=c[1],h=new pl(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const v=await h.ownerOf(u);if(l!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(s==="erc1155"){const v=await h.balanceOf(l,u);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let p=await h[o](u);if(p==null||p==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:p}),s==="erc1155"&&(p=p.replace("{id}",sa(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:p})),p.match(/^ipfs:/i)&&(p=q5(p)),e.push({type:"metadata-url",value:p});let g={};const y=await new Ws(p).send();y.assertOk();try{g=y.bodyJson}catch{try{e.push({type:"!metadata",value:y.bodyText})}catch{const A=y.body;return A&&e.push({type:"!metadata",value:Se(A)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!g)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(g)});let w=g.image;if(typeof w!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!w.match(/^(https:\/\/|data:)/i)){if(w.match(m4)==null)return e.push({type:"!imageUrl-ipfs",value:w}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:w}),w=q5(w)}return e.push({type:"url",value:w}),{linkage:e,url:w}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return re(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var i;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const s=await le(i=C0,p1,g4).call(i,e,r);if(s!=null){const o=new C0(e,s,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Uo=new WeakMap,il=new WeakMap,Ho=new WeakSet,g0=async function(e,t){t=(t||[]).slice();const r=E(this,il).interface;t.unshift(tg(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),re(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[M7(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await E(this,il)[e](...t);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!Mn(s,"CALL_EXCEPTION"))throw s}return null},p1=new WeakSet,g4=async function(e,t){const r=await C0.getEnsAddress(e);try{const s=await new pl(r,["function resolver(bytes32) view returns (address)"],e).resolver(tg(t),{enableCcipRead:!0});return s===ou?null:s}catch(i){throw i}return null},J(C0,p1);let pp=C0;const u9=BigInt(0);function nt(n,e){return function(t){return t==null?e:n(t)}}function O1(n,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))}}function Ku(n,e){return t=>{const r={};for(const i in n){let s=i;if(e&&i in e&&!(s in t)){for(const o of e[i])if(o in t){s=o;break}}try{const o=n[i](t[s]);o!==void 0&&(r[i]=o)}catch(o){const l=o instanceof Error?o.message:"not-an-error";re(!1,`invalid value for value.${i} (${l})`,"BAD_DATA",{value:t})}}return r}}function IM(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}F(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Of(n){return F(yt(n,!0),"invalid data","value",n),n}function gn(n){return F(yt(n,32),"invalid hash","value",n),n}const PM=Ku({address:ht,blockHash:gn,blockNumber:Ke,data:Of,index:Ke,removed:nt(IM,!1),topics:O1(gn),transactionHash:gn,transactionIndex:Ke},{index:["logIndex"]});function RM(n){return PM(n)}const DM=Ku({hash:nt(gn),parentHash:gn,parentBeaconBlockRoot:nt(gn,null),number:Ke,timestamp:Ke,nonce:nt(Of),difficulty:Te,gasLimit:Te,gasUsed:Te,stateRoot:nt(gn,null),receiptsRoot:nt(gn,null),blobGasUsed:nt(Te,null),excessBlobGas:nt(Te,null),miner:nt(ht),prevRandao:nt(gn,null),extraData:Of,baseFeePerGas:nt(Te)},{prevRandao:["mixHash"]});function LM(n){const e=DM(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:y4(t)),e}const BM=Ku({transactionIndex:Ke,blockNumber:Ke,transactionHash:gn,address:ht,topics:O1(gn),data:Of,index:Ke,blockHash:gn},{index:["logIndex"]});function _M(n){return BM(n)}const FM=Ku({to:nt(ht,null),from:nt(ht,null),contractAddress:nt(ht,null),index:Ke,root:nt(Se),gasUsed:Te,blobGasUsed:nt(Te,null),logsBloom:nt(Of),blockHash:gn,hash:gn,logs:O1(_M),blockNumber:Ke,cumulativeGasUsed:Te,effectiveGasPrice:nt(Te),blobGasPrice:nt(Te,null),status:nt(Ke),type:nt(Ke,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function zM(n){return FM(n)}function y4(n){n.to&&Te(n.to)===u9&&(n.to="0x0000000000000000000000000000000000000000");const e=Ku({hash:gn,index:nt(Ke,void 0),type:t=>t==="0x"||t==null?0:Ke(t),accessList:nt(Ll,null),blobVersionedHashes:nt(O1(gn,!0),null),blockHash:nt(gn,null),blockNumber:nt(Ke,null),transactionIndex:nt(Ke,null),from:ht,gasPrice:nt(Te),maxPriorityFeePerGas:nt(Te),maxFeePerGas:nt(Te),maxFeePerBlobGas:nt(Te,null),gasLimit:Te,to:nt(ht,null),value:Te,nonce:Ke,data:Of,creates:nt(ht,null),chainId:nt(Te,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=PT(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=yi.from(n.signature):e.signature=yi.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Te(e.blockHash)===u9&&(e.blockHash=null),e}const UM="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Ju{constructor(e){$(this,"name");je(this,{name:e})}clone(){return new Ju(this.name)}}class I1 extends Ju{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);$(this,"effectiveBlock");$(this,"txBase");$(this,"txCreate");$(this,"txDataZero");$(this,"txDataNonzero");$(this,"txAccessListStorageKey");$(this,"txAccessListAddress");const i={effectiveBlock:t};function s(o,l){let c=(r||{})[o];c==null&&(c=l),F(typeof c=="number",`invalud value for ${o}`,"costs",r),i[o]=c}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),je(this,i)}clone(){return new I1(this.effectiveBlock,this)}}class P1 extends Ju{constructor(t,r){super("org.ethers.plugins.network.Ens");$(this,"address");$(this,"targetNetwork");je(this,{address:t||UM,targetNetwork:r??1})}clone(){return new P1(this.address,this.targetNetwork)}}var zu,Uu;class HM extends Ju{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");J(this,zu);J(this,Uu);T(this,zu,t),T(this,Uu,r)}get url(){return E(this,zu)}get processFunc(){return E(this,Uu)}clone(){return this}}zu=new WeakMap,Uu=new WeakMap;const Y5=new Map;var cf,uf,jo;const N0=class N0{constructor(e,t){J(this,cf);J(this,uf);J(this,jo);T(this,cf,e),T(this,uf,Te(t)),T(this,jo,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return E(this,cf)}set name(e){T(this,cf,e)}get chainId(){return E(this,uf)}set chainId(e){T(this,uf,Te(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Te(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Te(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Te(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(E(this,jo).values())}attachPlugin(e){if(E(this,jo).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,jo).set(e.name,e.clone()),this}getPlugin(e){return E(this,jo).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new N0(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new I1;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const i=Ll(e.accessList);for(const s in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(jM(),e==null)return N0.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Y5.get(e);if(t)return t();if(typeof e=="bigint")return new N0("unknown",e);F(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){F(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new N0(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new P1(e.ensAddress,e.ensNetwork)),t}F(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=Y5.get(e);r&&F(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Y5.set(e,t)}};cf=new WeakMap,uf=new WeakMap,jo=new WeakMap;let Ki=N0;function d9(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function h9(n){return new HM(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const l=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:d9(l.maxFee,9),maxPriorityFeePerGas:d9(l.maxPriorityFee,9)}}catch(s){re(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let p9=!1;function jM(){if(p9)return;p9=!0;function n(e,t,r){const i=function(){const s=new Ki(e,t);return r.ensNetwork!=null&&s.attachPlugin(new P1(null,r.ensNetwork)),s.attachPlugin(new I1),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Ki.register(e,i),Ki.register(t,i),r.altNames&&r.altNames.forEach(s=>{Ki.register(s,i)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[h9("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[h9("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function lg(n){return JSON.parse(JSON.stringify(n))}var Ds,Br,Vo,Vi,df,Vh;class VM{constructor(e){J(this,df);J(this,Ds);J(this,Br);J(this,Vo);J(this,Vi);T(this,Ds,e),T(this,Br,null),T(this,Vo,4e3),T(this,Vi,-2)}get pollingInterval(){return E(this,Vo)}set pollingInterval(e){T(this,Vo,e)}start(){E(this,Br)||(T(this,Br,E(this,Ds)._setTimeout(le(this,df,Vh).bind(this),E(this,Vo))),le(this,df,Vh).call(this))}stop(){E(this,Br)&&(E(this,Ds)._clearTimeout(E(this,Br)),T(this,Br,null))}pause(e){this.stop(),e&&T(this,Vi,-2)}resume(){this.start()}}Ds=new WeakMap,Br=new WeakMap,Vo=new WeakMap,Vi=new WeakMap,df=new WeakSet,Vh=async function(){try{const e=await E(this,Ds).getBlockNumber();if(E(this,Vi)===-2){T(this,Vi,e);return}if(e!==E(this,Vi)){for(let t=E(this,Vi)+1;t<=e;t++){if(E(this,Br)==null)return;await E(this,Ds).emit("block",t)}T(this,Vi,e)}}catch{}E(this,Br)!=null&&T(this,Br,E(this,Ds)._setTimeout(le(this,df,Vh).bind(this),E(this,Vo)))};var sl,ol,$o;class Ay{constructor(e){J(this,sl);J(this,ol);J(this,$o);T(this,sl,e),T(this,$o,!1),T(this,ol,t=>{this._poll(t,E(this,sl))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){E(this,$o)||(T(this,$o,!0),E(this,ol).call(this,-2),E(this,sl).on("block",E(this,ol)))}stop(){E(this,$o)&&(T(this,$o,!1),E(this,sl).off("block",E(this,ol)))}pause(e){this.stop()}resume(){this.start()}}sl=new WeakMap,ol=new WeakMap,$o=new WeakMap;var hf,Ls;class $M extends Ay{constructor(t,r){super(t);J(this,hf);J(this,Ls);T(this,hf,r),T(this,Ls,-2)}pause(t){t&&T(this,Ls,-2),super.pause(t)}async _poll(t,r){const i=await r.getBlock(E(this,hf));i!=null&&(E(this,Ls)===-2?T(this,Ls,i.number):i.number>E(this,Ls)&&(r.emit(E(this,hf),i.number),T(this,Ls,i.number)))}}hf=new WeakMap,Ls=new WeakMap;var m1;class GM extends Ay{constructor(t,r){super(t);J(this,m1);T(this,m1,lg(r))}async _poll(t,r){throw new Error("@TODO")}}m1=new WeakMap;var pf;class WM extends Ay{constructor(t,r){super(t);J(this,pf);T(this,pf,r)}async _poll(t,r){const i=await r.getTransactionReceipt(E(this,pf));i&&r.emit(E(this,pf),i)}}pf=new WeakMap;var Bs,mf,gf,Go,_r,g1,b4;class Ey{constructor(e,t){J(this,g1);J(this,Bs);J(this,mf);J(this,gf);J(this,Go);J(this,_r);T(this,Bs,e),T(this,mf,lg(t)),T(this,gf,le(this,g1,b4).bind(this)),T(this,Go,!1),T(this,_r,-2)}start(){E(this,Go)||(T(this,Go,!0),E(this,_r)===-2&&E(this,Bs).getBlockNumber().then(e=>{T(this,_r,e)}),E(this,Bs).on("block",E(this,gf)))}stop(){E(this,Go)&&(T(this,Go,!1),E(this,Bs).off("block",E(this,gf)))}pause(e){this.stop(),e&&T(this,_r,-2)}resume(){this.start()}}Bs=new WeakMap,mf=new WeakMap,gf=new WeakMap,Go=new WeakMap,_r=new WeakMap,g1=new WeakSet,b4=async function(e){if(E(this,_r)===-2)return;const t=lg(E(this,mf));t.fromBlock=E(this,_r)+1,t.toBlock=e;const r=await E(this,Bs).getLogs(t);if(r.length===0){E(this,_r)<e-60&&T(this,_r,e-60);return}for(const i of r)E(this,Bs).emit(E(this,mf),i),T(this,_r,i.blockNumber)};const QM=BigInt(2),KM=10;function bh(n){return n&&typeof n.then=="function"}function $h(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class w4{constructor(e){$(this,"name");je(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function JM(n){return JSON.parse(JSON.stringify(n))}function fg(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function X5(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(yt(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:$h("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:$h("orphan",t),filter:JM(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?fg(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],s=[],o=l=>{yt(l)?i.push(l):s.push((async()=>{i.push(await jn(l,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),s.length&&await Promise.all(s),r.address=fg(i.map(l=>l.toLowerCase()))}return{filter:r,tag:$h("event",r),type:"event"}}F(!1,"unknown ProviderEvent","event",n)}function Z5(){return new Date().getTime()}const qM={cacheTimeout:250,pollingInterval:4e3};var Cn,Wo,Nn,yf,vr,al,Qo,_s,Hu,Fr,bf,wf,Ze,mr,cg,ug,_c,dg,Fc,Gh;class YM{constructor(e,t){J(this,Ze);J(this,Cn);J(this,Wo);J(this,Nn);J(this,yf);J(this,vr);J(this,al);J(this,Qo);J(this,_s);J(this,Hu);J(this,Fr);J(this,bf);J(this,wf);if(T(this,wf,Object.assign({},qM,t||{})),e==="any")T(this,al,!0),T(this,vr,null);else if(e){const r=Ki.from(e);T(this,al,!1),T(this,vr,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else T(this,al,!1),T(this,vr,null);T(this,_s,-1),T(this,Qo,new Map),T(this,Cn,new Map),T(this,Wo,new Map),T(this,Nn,null),T(this,yf,!1),T(this,Hu,1),T(this,Fr,new Map),T(this,bf,!1)}get pollingInterval(){return E(this,wf).pollingInterval}get provider(){return this}get plugins(){return Array.from(E(this,Wo).values())}attachPlugin(e){if(E(this,Wo).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return E(this,Wo).set(e.name,e.connect(this)),this}getPlugin(e){return E(this,Wo).get(e)||null}get disableCcipRead(){return E(this,bf)}set disableCcipRead(e){T(this,bf,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let l=0;l<r.length;l++){const c=r[l],u=c.replace("{sender}",i).replace("{data}",s),h=new Ws(u);c.indexOf("{data}")===-1&&(h.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:l,urls:r});let p="unknown error";const g=await h.send();try{const y=g.bodyJson;if(y.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:y}),y.data;y.message&&(p=y.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:y})}catch{}re(g.statusCode<400||g.statusCode>=500,`response not found during CCIP fetch: ${p}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:p}}),o.push(p)}re(!1,`error encountered during CCIP fetch: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,t){return new gM(LM(e),this)}_wrapLog(e,t){return new Qu(RM(e),this)}_wrapTransactionReceipt(e,t){return new i4(zM(e),this)}_wrapTransactionResponse(e,t){return new pu(y4(e),this)}_detectNetwork(){re(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){re(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ke(await le(this,Ze,mr).call(this,{method:"getBlockNumber"}),"%response");return E(this,_s)>=0&&T(this,_s,e),e}_getAddress(e){return jn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(yt(e))return yt(e,32)?e:k0(e);if(typeof e=="bigint"&&(e=Ke(e,"blockTag")),typeof e=="number")return e>=0?k0(e):E(this,_s)>=0?k0(E(this,_s)+e):this.getBlockNumber().then(t=>k0(t+e));F(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?fg(c.map(u=>u.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(c,u,h)=>{let p;switch(c.length){case 0:break;case 1:p=c[0];break;default:c.sort(),p=c}if(r&&(u!=null||h!=null))throw new Error("invalid filter");const g={};return p&&(g.address=p),t.length&&(g.topics=t),u&&(g.fromBlock=u),h&&(g.toBlock=h),r&&(g.blockHash=r),g};let s=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)s.push(this._getAddress(c));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let l;return"toBlock"in e&&(l=this._getBlockTag(e.toBlock)),s.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||l!=null&&typeof l!="string"?Promise.all([Promise.all(s),o,l]).then(c=>i(c[0],c[1],c[2])):i(s,o,l)}_getTransactionRequest(e){const t=dp(e),r=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const s=jn(t[i],this);bh(s)?r.push(async function(){t[i]=await s}()):t[i]=s}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);bh(i)?r.push(async function(){t.blockTag=await i}()):t.blockTag=i}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(E(this,vr)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw E(this,vr)===i&&T(this,vr,null),s}})();return T(this,vr,i),(await i).clone()}const e=E(this,vr),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(E(this,al)?(this.emit("network",r,t),E(this,vr)===e&&T(this,vr,Promise.resolve(r))):re(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await _n({_block:le(this,Ze,dg).call(this,"latest",!1),gasPrice:(async()=>{try{const h=await le(this,Ze,mr).call(this,{method:"getGasPrice"});return Te(h,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const h=await le(this,Ze,mr).call(this,{method:"getPriorityFee"});return Te(h,"%response")}catch{}return null})()});let l=null,c=null;const u=this._wrapBlock(i,e);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),l=u.baseFeePerGas*QM+c),new a9(s,l,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ws(r.url),s=await r.processFunc(t,this,i);return new a9(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return bh(t)&&(t=await t),Te(await le(this,Ze,mr).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await _n({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await le(this,Ze,ug).call(this,le(this,Ze,cg).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return Te(await le(this,Ze,_c).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Ke(await le(this,Ze,_c).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Se(await le(this,Ze,_c).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const i=Te(t,"position");return Se(await le(this,Ze,_c).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:i}=await _n({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=$3.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:i}=await _n({network:this.getNetwork(),params:le(this,Ze,dg).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:t,params:r}=await _n({network:this.getNetwork(),params:le(this,Ze,mr).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await _n({network:this.getNetwork(),params:le(this,Ze,mr).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await le(this,Ze,mr).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await _n({network:this.getNetwork(),result:le(this,Ze,mr).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:Se(t)}async getLogs(e){let t=this._getFilter(e);bh(t)&&(t=await t);const{network:r,params:i}=await _n({network:this.getNetwork(),params:le(this,Ze,mr).call(this,{method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){re(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await pp.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=ht(e);const t=tg(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await pp.getEnsAddress(this),s=await new pl(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===ou)return null;const l=await new pl(s,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(l)!==e?null:l}catch(r){if(Mn(r,"BAD_DATA")&&r.value==="0x"||Mn(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let l=null;const c=async u=>{try{const h=await this.getTransactionReceipt(e);if(h!=null&&u-h.blockNumber+1>=i){s(h),l&&(clearTimeout(l),l=null);return}}catch(h){console.log("EEE",h)}this.once("block",c)};r!=null&&(l=setTimeout(()=>{l!=null&&(l=null,this.off("block",c),o(Rt("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){re(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=E(this,Fr).get(e);t&&(t.timer&&clearTimeout(t.timer),E(this,Fr).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=kc(this,Hu)._++,i=()=>{E(this,Fr).delete(r),e()};if(this.paused)E(this,Fr).set(r,{timer:null,func:i,time:t});else{const s=setTimeout(i,t);E(this,Fr).set(r,{timer:s,func:i,time:Z5()})}return r}_forEachSubscriber(e){for(const t of E(this,Cn).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new w4(e.type);case"block":{const t=new VM(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new $M(this,e.type);case"event":return new Ey(this,e.filter);case"transaction":return new WM(this,e.hash);case"orphan":return new GM(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of E(this,Cn).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),E(this,Nn)!=null&&t.pause(E(this,Nn));break}}async on(e,t){const r=await le(this,Ze,Gh).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,E(this,Nn)!=null&&r.subscriber.pause(E(this,Nn))),this}async once(e,t){const r=await le(this,Ze,Gh).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,E(this,Nn)!=null&&r.subscriber.pause(E(this,Nn))),this}async emit(e,...t){const r=await le(this,Ze,Fc).call(this,e,t);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const l=new Dx(this,o?null:s,e);try{s.call(this,...t,l)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),E(this,Cn).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await le(this,Ze,Fc).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of E(this,Cn).values())t+=r.length;return t}async listeners(e){if(e){const r=await le(this,Ze,Fc).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:r}of E(this,Cn).values())t=t.concat(r.map(({listener:i})=>i));return t}async off(e,t){const r=await le(this,Ze,Fc).call(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),E(this,Cn).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:i}=await le(this,Ze,Gh).call(this,e);r&&i.stop(),E(this,Cn).delete(t)}else for(const[t,{started:r,subscriber:i}]of E(this,Cn))r&&i.stop(),E(this,Cn).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return E(this,yf)}destroy(){this.removeAllListeners();for(const e of E(this,Fr).keys())this._clearTimeout(e);T(this,yf,!0)}get paused(){return E(this,Nn)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(T(this,_s,-1),E(this,Nn)!=null){if(E(this,Nn)==!!e)return;re(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),T(this,Nn,!!e);for(const t of E(this,Fr).values())t.timer&&clearTimeout(t.timer),t.time=Z5()-t.time}resume(){if(E(this,Nn)!=null){this._forEachSubscriber(e=>e.resume()),T(this,Nn,null);for(const e of E(this,Fr).values()){let t=e.time;t<0&&(t=0),e.time=Z5(),setTimeout(e.func,t)}}}}Cn=new WeakMap,Wo=new WeakMap,Nn=new WeakMap,yf=new WeakMap,vr=new WeakMap,al=new WeakMap,Qo=new WeakMap,_s=new WeakMap,Hu=new WeakMap,Fr=new WeakMap,bf=new WeakMap,wf=new WeakMap,Ze=new WeakSet,mr=async function(e){const t=E(this,wf).cacheTimeout;if(t<0)return await this._perform(e);const r=$h(e.method,e);let i=E(this,Qo).get(r);return i||(i=this._perform(e),E(this,Qo).set(r,i),setTimeout(()=>{E(this,Qo).get(r)===i&&E(this,Qo).delete(r)},t)),await i},cg=async function(e,t,r){re(r<KM,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=dp(e);try{return Se(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&ry(s)&&s.data&&r>=0&&t==="latest"&&i.to!=null&&Dt(s.data,0,4)==="0x556f1830"){const o=s.data,l=await jn(i.to,this);let c;try{c=nO(Dt(s.data,4))}catch(p){re(!1,p.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}re(c.sender.toLowerCase()===l.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(i,c.calldata,c.urls);re(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:c.errorArgs}});const h={to:l,data:jt([c.selector,tO([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const p=await le(this,Ze,cg).call(this,h,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:p}),p}catch(p){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:p}),p}}throw s}},ug=async function(e){const{value:t}=await _n({network:this.getNetwork(),value:e});return t},_c=async function(e,t,r){let i=this._getAddress(t),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await le(this,Ze,ug).call(this,le(this,Ze,mr).call(this,Object.assign(e,{address:i,blockTag:s})))},dg=async function(e,t){if(yt(e,32))return await le(this,Ze,mr).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await le(this,Ze,mr).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},Fc=async function(e,t){let r=await X5(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await X5({orphan:"drop-log",log:t[0]},this)),E(this,Cn).get(r.tag)||null},Gh=async function(e){const t=await X5(e,this),r=t.tag;let i=E(this,Cn).get(r);return i||(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},E(this,Cn).set(r,i)),i};function XM(n,e){try{const t=hg(n,e);if(t)return rp(t)}catch{}return null}function hg(n,e){if(n==="0x")return null;try{const t=Ke(Dt(n,e,e+32)),r=Ke(Dt(n,t,t+32));return Dt(n,t+32,t+32+r)}catch{}return null}function m9(n){const e=Un(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function ZM(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const eO=new Uint8Array([]);function tO(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(eO),t+=32;for(let r=0;r<n.length;r++){const i=rt(n[r]);e[r]=m9(t),e.push(m9(i.length)),e.push(ZM(i)),t+=32+Math.ceil(i.length/32)*32}return jt(e)}const g9="0x0000000000000000000000000000000000000000000000000000000000000000";function nO(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};re(T0(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Dt(n,0,32);re(Dt(t,0,12)===Dt(g9,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Dt(t,12);try{const r=[],i=Ke(Dt(n,32,64)),s=Ke(Dt(n,i,i+32)),o=Dt(n,i+32);for(let l=0;l<s;l++){const c=XM(o,l*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{re(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=hg(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{re(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}re(Dt(n,100,128)===Dt(g9,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Dt(n,96,100);try{const r=hg(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{re(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function c0(n,e){if(n.provider)return n.provider;re(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function y9(n,e){let t=dp(e);if(t.to!=null&&(t.to=jn(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),jn(r,n)]).then(([i,s])=>(F(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=n.getAddress();return await _n(t)}class rO{constructor(e){$(this,"provider");je(this,{provider:e||null})}async getNonce(e){return c0(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await y9(this,e)}async populateTransaction(e){const t=c0(this,"populateTransaction"),r=await y9(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=Te(r.chainId);F(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?F(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&F(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await t.getFeeData();re(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const l=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=l,r.maxPriorityFeePerGas=l}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(re(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):re(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await _n(r)}async estimateGas(e){return c0(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return c0(this,"call").call(await this.populateCall(e))}async resolveName(e){return await c0(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=c0(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=$3.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}}function iO(n){return JSON.parse(JSON.stringify(n))}var Bn,$i,ll,Ko,fl,vf,la,pg,mg;class v4{constructor(e){J(this,la);J(this,Bn);J(this,$i);J(this,ll);J(this,Ko);J(this,fl);J(this,vf);T(this,Bn,e),T(this,$i,null),T(this,ll,le(this,la,pg).bind(this)),T(this,Ko,!1),T(this,fl,null),T(this,vf,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){E(this,Ko)||(T(this,Ko,!0),le(this,la,pg).call(this,-2))}stop(){E(this,Ko)&&(T(this,Ko,!1),T(this,vf,!0),le(this,la,mg).call(this),E(this,Bn).off("block",E(this,ll)))}pause(e){e&&le(this,la,mg).call(this),E(this,Bn).off("block",E(this,ll))}resume(){this.start()}}Bn=new WeakMap,$i=new WeakMap,ll=new WeakMap,Ko=new WeakMap,fl=new WeakMap,vf=new WeakMap,la=new WeakSet,pg=async function(e){try{E(this,$i)==null&&T(this,$i,this._subscribe(E(this,Bn)));let t=null;try{t=await E(this,$i)}catch(s){if(!Mn(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){T(this,$i,null),E(this,Bn)._recoverSubscriber(this,this._recover(E(this,Bn)));return}const r=await E(this,Bn).getNetwork();if(E(this,fl)||T(this,fl,r),E(this,fl).chainId!==r.chainId)throw new Error("chaid changed");if(E(this,vf))return;const i=await E(this,Bn).send("eth_getFilterChanges",[t]);await this._emitResults(E(this,Bn),i)}catch(t){console.log("@TODO",t)}E(this,Bn).once("block",E(this,ll))},mg=function(){const e=E(this,$i);e&&(T(this,$i,null),e.then(t=>{E(this,Bn).destroyed||E(this,Bn).send("eth_uninstallFilter",[t])}))};var cl;class sO extends v4{constructor(t,r){super(t);J(this,cl);T(this,cl,iO(r))}_recover(t){return new Ey(t,E(this,cl))}async _subscribe(t){return await t.send("eth_newFilter",[E(this,cl)])}async _emitResults(t,r){for(const i of r)t.emit(E(this,cl),t._wrapLog(i,t._network))}}cl=new WeakMap;class oO extends v4{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const aO="bigint,boolean,function,number,string,symbol".split(/,/g);function Wh(n){if(n==null||aO.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Wh);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function lO(n){return new Promise(e=>{setTimeout(e,n)})}function u0(n){return n&&n.toLowerCase()}function b9(n){return n&&typeof n.pollingInterval=="number"}const x4={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class em extends rO{constructor(t,r){super(t);$(this,"address");r=ht(r),je(this,{address:r})}connect(t){re(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=Wh(t),i=[];if(r.from){const o=r.from;i.push((async()=>{const l=await jn(o,this.provider);F(l!=null&&l.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=l})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await jn(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((s,o)=>{const l=[1e3,100];let c=0;const u=async()=>{try{const h=await this.provider.getTransaction(i);if(h!=null){s(h.replaceableTransaction(r));return}}catch(h){if(Mn(h,"CANCELLED")||Mn(h,"BAD_DATA")||Mn(h,"NETWORK_ERROR")){h.info==null&&(h.info={}),h.info.sendTransactionHash=i,o(h);return}if(Mn(h,"INVALID_ARGUMENT")&&(c++,h.info==null&&(h.info={}),h.info.sendTransactionHash=i,c>10)){o(h);return}this.provider.emit("error",Rt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:h}))}this.provider._setTimeout(()=>{u()},l.pop()||4e3)};u()})}async signTransaction(t){const r=Wh(t);if(r.from){const s=await jn(r.from,this.provider);F(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const r=typeof t=="string"?Vs(t):t;return await this.provider.send("personal_sign",[Se(r),this.address.toLowerCase()])}async signTypedData(t,r,i){const s=Wh(i),o=await up.resolveNames(t,r,s,async l=>{const c=await jn(l);return F(c!=null,"TypedData does not support null address","value",l),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(up.getPayload(o.domain,r,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?Vs(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Se(r)])}}var ul,xf,Fs,Gi,ui,zr,tr,ju,gg;class fO extends YM{constructor(t,r){super(t,r);J(this,ju);J(this,ul);J(this,xf);J(this,Fs);J(this,Gi);J(this,ui);J(this,zr);J(this,tr);T(this,xf,1),T(this,ul,Object.assign({},x4,r||{})),T(this,Fs,[]),T(this,Gi,null),T(this,zr,null),T(this,tr,null);{let s=null;const o=new Promise(l=>{s=l});T(this,ui,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(F(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&t!=null&&T(this,zr,Ki.from(t))):i&&(F(t==null||i.matches(t),"staticNetwork MUST match network object","options",r),T(this,zr,i))}_getOption(t){return E(this,ul)[t]}get _network(){return re(E(this,zr),"network is not available yet","NETWORK_ERROR"),E(this,zr)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&Te(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(E(this,zr))return E(this,zr)}else return t;return E(this,tr)?await E(this,tr):this.ready?(T(this,tr,(async()=>{try{const r=Ki.from(Te(await this.send("eth_chainId",[])));return T(this,tr,null),r}catch(r){throw T(this,tr,null),r}})()),await E(this,tr)):(T(this,tr,(async()=>{const r={id:kc(this,xf)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],T(this,tr,null)}catch(s){throw T(this,tr,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Ki.from(Te(i.result));throw this.getRpcError(r,i)})()),await E(this,tr))}_start(){E(this,ui)==null||E(this,ui).resolve==null||(E(this,ui).resolve(),T(this,ui,null),(async()=>{for(;E(this,zr)==null&&!this.destroyed;)try{T(this,zr,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Rt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await lO(1e3)}le(this,ju,gg).call(this)})())}async _waitUntilReady(){if(E(this,ui)!=null)return await E(this,ui).promise}_getSubscriber(t){return t.type==="pending"?new oO(this):t.type==="event"?this._getOption("polling")?new Ey(this,t.filter):new sO(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new w4("orphan"):super._getSubscriber(t)}get ready(){return E(this,ui)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=k0(Te(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(r[i]=Se(t[i]))}),t.accessList&&(r.accessList=Ll(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[u0(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[u0(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[u0(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[u0(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(u0):t.filter.address=u0(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:i}=t,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const c=s.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Rt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const c=yg(s),u=hu.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],c?c.data:null);return u.info={error:s,payload:t},u}const o=JSON.stringify(dO(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Rt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const c=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Rt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Rt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Rt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:s}});if(o.match(/only replay-protected/i))return Rt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:c,info:{error:s}}})}let l=!!o.match(/the method .* does not exist/i);return l||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(l=!0),l?Rt("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):Rt("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,r){if(this.destroyed)return Promise.reject(Rt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=kc(this,xf)._++,s=new Promise((o,l)=>{E(this,Fs).push({resolve:o,reject:l,payload:{method:t,params:r,id:i,jsonrpc:"2.0"}})});return le(this,ju,gg).call(this),s}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await r;if(t>=s.length)throw new Error("no such account");return new em(this,s[t])}const{accounts:i}=await _n({network:this.getNetwork(),accounts:r});t=ht(t);for(const s of i)if(ht(s)===t)return new em(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new em(this,r))}destroy(){E(this,Gi)&&(clearTimeout(E(this,Gi)),T(this,Gi,null));for(const{payload:t,reject:r}of E(this,Fs))r(Rt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));T(this,Fs,[]),super.destroy()}}ul=new WeakMap,xf=new WeakMap,Fs=new WeakMap,Gi=new WeakMap,ui=new WeakMap,zr=new WeakMap,tr=new WeakMap,ju=new WeakSet,gg=function(){if(E(this,Gi))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");T(this,Gi,setTimeout(()=>{T(this,Gi,null);const r=E(this,Fs);for(T(this,Fs,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==E(this,ul).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>E(this,ul).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:l,reject:c,payload:u}of i){if(this.destroyed){c(Rt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const h=o.filter(p=>p.id===u.id)[0];if(h==null){const p=Rt("missing response for request","BAD_DATA",{value:o,info:{payload:u}});this.emit("error",p),c(p);continue}if("error"in h){c(this.getRpcError(u,h));continue}l(h.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:l}of i)l(o)}})()}},t))};var Jo;class cO extends fO{constructor(t,r){super(t,r);J(this,Jo);let i=this._getOption("pollingInterval");i==null&&(i=x4.pollingInterval),T(this,Jo,i)}_getSubscriber(t){const r=super._getSubscriber(t);return b9(r)&&(r.pollingInterval=E(this,Jo)),r}get pollingInterval(){return E(this,Jo)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");T(this,Jo,t),this._forEachSubscriber(r=>{b9(r)&&(r.pollingInterval=E(this,Jo))})}}Jo=new WeakMap;var kf;class uO extends cO{constructor(t,r,i){t==null&&(t="http://localhost:8545");super(r,i);J(this,kf);typeof t=="string"?T(this,kf,new Ws(t)):T(this,kf,t.clone())}_getConnection(){return E(this,kf).clone()}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){const r=this._getConnection();r.body=JSON.stringify(t),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}kf=new WeakMap;function yg(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&yt(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=yg(n[e]);if(t)return t}return null}if(typeof n=="string")try{return yg(JSON.parse(n))}catch{}return null}function bg(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)bg(n[t],e);if(typeof n=="string")try{return bg(JSON.parse(n),e)}catch{}}}function dO(n){const e=[];return bg(n,e),e}const hO="hh-sol-artifact-1",pO="CanonThread",mO="contracts/CanonThread.sol",gO=[{inputs:[{internalType:"address",name:"_tokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"contentType",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ContentAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"oldContentHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"}],name:"ContentUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"nodeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"NodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"proposer",type:"address"},{indexed:!1,internalType:"uint256",name:"stake",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"bool",name:"passed",type:"bool"}],name:"ProposalExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ThreadCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"string",name:"newMetadataHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"}],name:"ThreadUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"bool",name:"support",type:"bool"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Voted",type:"event"},{inputs:[],name:"MINIMUM_STAKE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_BUFFER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_PERIOD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"_nodeType",type:"uint8"}],name:"createNode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"}],name:"createThread",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"executeProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"hasVoted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_hash",type:"string"}],name:"isValidIPFSHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"nodeCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"nodes",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposalCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"string",name:"proposedMetadataHash",type:"string"},{internalType:"string",name:"proposedContentHash",type:"string"},{internalType:"address",name:"proposer",type:"address"},{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"votesFor",type:"uint256"},{internalType:"uint256",name:"votesAgainst",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"bool",name:"passed",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"},{internalType:"uint256",name:"_stake",type:"uint256"}],name:"proposeUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"threadCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"threads",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"version",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract CanonToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"}],name:"updateThread",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"bool",name:"_support",type:"bool"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],yO="0x60806040523480156200001157600080fd5b50604051620030f2380380620030f28339818101604052810190620000379190620000f1565b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060006006819055505062000123565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620000b9826200008c565b9050919050565b620000cb81620000ac565b8114620000d757600080fd5b50565b600081519050620000eb81620000c0565b92915050565b6000602082840312156200010a576200010962000087565b5b60006200011a84828501620000da565b91505092915050565b612fbf80620001336000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",bO="0x608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",wO={},vO={},xO={_format:hO,contractName:pO,sourceName:mO,abi:gO,bytecode:yO,deployedBytecode:bO,linkReferences:wO,deployedLinkReferences:vO},kO="hh-sol-artifact-1",AO="CanonToken",EO="contracts/CanonToken.sol",SO=[{inputs:[{internalType:"uint256",name:"initialSupply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],CO="0x60806040523480156200001157600080fd5b5060405162001dc738038062001dc7833981810160405281019062000037919062000560565b336040518060400160405280600a81526020017f43616e6f6e546f6b656e000000000000000000000000000000000000000000008152506040518060400160405280600581526020017f43414e4f4e0000000000000000000000000000000000000000000000000000008152508160039081620000b5919062000802565b508060049081620000c7919062000802565b505050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036200013f5760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016200013691906200092e565b60405180910390fd5b62000150816200019460201b60201c565b506200018d33620001666200025a60201b60201c565b600a62000174919062000adb565b8362000181919062000b2c565b6200026360201b60201c565b5062000c1d565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60006012905090565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620002d85760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401620002cf91906200092e565b60405180910390fd5b620002ec60008383620002f060201b60201c565b5050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036200034657806002600082825462000339919062000b77565b925050819055506200041c565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015620003d5578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401620003cc9392919062000bc3565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620004675780600260008282540392505081905550620004b4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405162000513919062000c00565b60405180910390a3505050565b600080fd5b6000819050919050565b6200053a8162000525565b81146200054657600080fd5b50565b6000815190506200055a816200052f565b92915050565b60006020828403121562000579576200057862000520565b5b6000620005898482850162000549565b91505092915050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200061457607f821691505b6020821081036200062a5762000629620005cc565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620006947fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000655565b620006a0868362000655565b95508019841693508086168417925050509392505050565b6000819050919050565b6000620006e3620006dd620006d78462000525565b620006b8565b62000525565b9050919050565b6000819050919050565b620006ff83620006c2565b620007176200070e82620006ea565b84845462000662565b825550505050565b600090565b6200072e6200071f565b6200073b818484620006f4565b505050565b5b8181101562000763576200075760008262000724565b60018101905062000741565b5050565b601f821115620007b2576200077c8162000630565b620007878462000645565b8101602085101562000797578190505b620007af620007a68562000645565b83018262000740565b50505b505050565b600082821c905092915050565b6000620007d760001984600802620007b7565b1980831691505092915050565b6000620007f28383620007c4565b9150826002028217905092915050565b6200080d8262000592565b67ffffffffffffffff8111156200082957620008286200059d565b5b620008358254620005fb565b6200084282828562000767565b600060209050601f8311600181146200087a576000841562000865578287015190505b620008718582620007e4565b865550620008e1565b601f1984166200088a8662000630565b60005b82811015620008b4578489015182556001820191506020850194506020810190506200088d565b86831015620008d45784890151620008d0601f891682620007c4565b8355505b6001600288020188555050505b505050505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200091682620008e9565b9050919050565b620009288162000909565b82525050565b60006020820190506200094560008301846200091d565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b6001851115620009d957808604811115620009b157620009b06200094b565b5b6001851615620009c15780820291505b8081029050620009d1856200097a565b945062000991565b94509492505050565b600082620009f4576001905062000ac7565b8162000a04576000905062000ac7565b816001811462000a1d576002811462000a285762000a5e565b600191505062000ac7565b60ff84111562000a3d5762000a3c6200094b565b5b8360020a91508482111562000a575762000a566200094b565b5b5062000ac7565b5060208310610133831016604e8410600b841016171562000a985782820a90508381111562000a925762000a916200094b565b5b62000ac7565b62000aa7848484600162000987565b9250905081840481111562000ac15762000ac06200094b565b5b81810290505b9392505050565b600060ff82169050919050565b600062000ae88262000525565b915062000af58362000ace565b925062000b247fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484620009e2565b905092915050565b600062000b398262000525565b915062000b468362000525565b925082820262000b568162000525565b9150828204841483151762000b705762000b6f6200094b565b5b5092915050565b600062000b848262000525565b915062000b918362000525565b925082820190508082111562000bac5762000bab6200094b565b5b92915050565b62000bbd8162000525565b82525050565b600060608201905062000bda60008301866200091d565b62000be9602083018562000bb2565b62000bf8604083018462000bb2565b949350505050565b600060208201905062000c17600083018462000bb2565b92915050565b61119a8062000c2d6000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",NO="0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",TO={},MO={},OO={_format:kO,contractName:AO,sourceName:EO,abi:SO,bytecode:CO,deployedBytecode:NO,linkReferences:TO,deployedLinkReferences:MO},IO="0x5FbDB2315678afecb367f032d93F642f64180aa3",PO="0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",wh={canonToken:IO,canonThread:PO};var RO={value:()=>{}};function qu(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Qh(t)}function Qh(n){this._=n}function DO(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Qh.prototype=qu.prototype={constructor:Qh,on:function(n,e){var t=this._,r=DO(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=LO(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=w9(t[i],n.name,e);else if(e==null)for(i in t)t[i]=w9(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Qh(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function LO(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function w9(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=RO,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var wg="http://www.w3.org/1999/xhtml";const v9={svg:"http://www.w3.org/2000/svg",xhtml:wg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function R1(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),v9.hasOwnProperty(e)?{space:v9[e],local:n}:n}function BO(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===wg&&e.documentElement.namespaceURI===wg?e.createElement(n):e.createElementNS(t,n)}}function _O(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function k4(n){var e=R1(n);return(e.local?_O:BO)(e)}function FO(){}function Sy(n){return n==null?FO:function(){return this.querySelector(n)}}function zO(n){typeof n!="function"&&(n=Sy(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),c,u,h=0;h<o;++h)(c=s[h])&&(u=n.call(c,c.__data__,h,s))&&("__data__"in c&&(u.__data__=c.__data__),l[h]=u);return new kr(r,this._parents)}function UO(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function HO(){return[]}function A4(n){return n==null?HO:function(){return this.querySelectorAll(n)}}function jO(n){return function(){return UO(n.apply(this,arguments))}}function VO(n){typeof n=="function"?n=jO(n):n=A4(n);for(var e=this._groups,t=e.length,r=[],i=[],s=0;s<t;++s)for(var o=e[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(r.push(n.call(c,c.__data__,u,o)),i.push(c));return new kr(r,i)}function E4(n){return function(){return this.matches(n)}}function S4(n){return function(e){return e.matches(n)}}var $O=Array.prototype.find;function GO(n){return function(){return $O.call(this.children,n)}}function WO(){return this.firstElementChild}function QO(n){return this.select(n==null?WO:GO(typeof n=="function"?n:S4(n)))}var KO=Array.prototype.filter;function JO(){return Array.from(this.children)}function qO(n){return function(){return KO.call(this.children,n)}}function YO(n){return this.selectAll(n==null?JO:qO(typeof n=="function"?n:S4(n)))}function XO(n){typeof n!="function"&&(n=E4(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,l=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new kr(r,this._parents)}function C4(n){return new Array(n.length)}function ZO(){return new kr(this._enter||this._groups.map(C4),this._parents)}function mp(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}mp.prototype={constructor:mp,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function eI(n){return function(){return n}}function tI(n,e,t,r,i,s){for(var o=0,l,c=e.length,u=s.length;o<u;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):t[o]=new mp(n,s[o]);for(;o<c;++o)(l=e[o])&&(i[o]=l)}function nI(n,e,t,r,i,s,o){var l,c,u=new Map,h=e.length,p=s.length,g=new Array(h),y;for(l=0;l<h;++l)(c=e[l])&&(g[l]=y=o.call(c,c.__data__,l,e)+"",u.has(y)?i[l]=c:u.set(y,c));for(l=0;l<p;++l)y=o.call(n,s[l],l,s)+"",(c=u.get(y))?(r[l]=c,c.__data__=s[l],u.delete(y)):t[l]=new mp(n,s[l]);for(l=0;l<h;++l)(c=e[l])&&u.get(g[l])===c&&(i[l]=c)}function rI(n){return n.__data__}function iI(n,e){if(!arguments.length)return Array.from(this,rI);var t=e?nI:tI,r=this._parents,i=this._groups;typeof n!="function"&&(n=eI(n));for(var s=i.length,o=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var h=r[u],p=i[u],g=p.length,y=sI(n.call(h,h&&h.__data__,u,r)),w=y.length,v=l[u]=new Array(w),k=o[u]=new Array(w),A=c[u]=new Array(g);t(h,p,v,k,A,y,e);for(var C=0,O=0,N,P;C<w;++C)if(N=v[C]){for(C>=O&&(O=C+1);!(P=k[O])&&++O<w;);N._next=P||null}}return o=new kr(o,r),o._enter=l,o._exit=c,o}function sI(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function oI(){return new kr(this._exit||this._groups.map(C4),this._parents)}function aI(n,e,t){var r=this.enter(),i=this,s=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?s.remove():t(s),r&&i?r.merge(i).order():i}function lI(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,s=r.length,o=Math.min(i,s),l=new Array(i),c=0;c<o;++c)for(var u=t[c],h=r[c],p=u.length,g=l[c]=new Array(p),y,w=0;w<p;++w)(y=u[w]||h[w])&&(g[w]=y);for(;c<i;++c)l[c]=t[c];return new kr(l,this._parents)}function fI(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function cI(n){n||(n=uI);function e(p,g){return p&&g?n(p.__data__,g.__data__):!p-!g}for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s){for(var o=t[s],l=o.length,c=i[s]=new Array(l),u,h=0;h<l;++h)(u=o[h])&&(c[h]=u);c.sort(e)}return new kr(i,this._parents).order()}function uI(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function dI(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function hI(){return Array.from(this)}function pI(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function mI(){let n=0;for(const e of this)++n;return n}function gI(){return!this.node()}function yI(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,o=i.length,l;s<o;++s)(l=i[s])&&n.call(l,l.__data__,s,i);return this}function bI(n){return function(){this.removeAttribute(n)}}function wI(n){return function(){this.removeAttributeNS(n.space,n.local)}}function vI(n,e){return function(){this.setAttribute(n,e)}}function xI(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function kI(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function AI(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function EI(n,e){var t=R1(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?wI:bI:typeof e=="function"?t.local?AI:kI:t.local?xI:vI)(t,e))}function N4(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function SI(n){return function(){this.style.removeProperty(n)}}function CI(n,e,t){return function(){this.style.setProperty(n,e,t)}}function NI(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function TI(n,e,t){return arguments.length>1?this.each((e==null?SI:typeof e=="function"?NI:CI)(n,e,t??"")):If(this.node(),n)}function If(n,e){return n.style.getPropertyValue(e)||N4(n).getComputedStyle(n,null).getPropertyValue(e)}function MI(n){return function(){delete this[n]}}function OI(n,e){return function(){this[n]=e}}function II(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function PI(n,e){return arguments.length>1?this.each((e==null?MI:typeof e=="function"?II:OI)(n,e)):this.node()[n]}function T4(n){return n.trim().split(/^|\s+/)}function Cy(n){return n.classList||new M4(n)}function M4(n){this._node=n,this._names=T4(n.getAttribute("class")||"")}M4.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function O4(n,e){for(var t=Cy(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function I4(n,e){for(var t=Cy(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function RI(n){return function(){O4(this,n)}}function DI(n){return function(){I4(this,n)}}function LI(n,e){return function(){(e.apply(this,arguments)?O4:I4)(this,n)}}function BI(n,e){var t=T4(n+"");if(arguments.length<2){for(var r=Cy(this.node()),i=-1,s=t.length;++i<s;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?LI:e?RI:DI)(t,e))}function _I(){this.textContent=""}function FI(n){return function(){this.textContent=n}}function zI(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function UI(n){return arguments.length?this.each(n==null?_I:(typeof n=="function"?zI:FI)(n)):this.node().textContent}function HI(){this.innerHTML=""}function jI(n){return function(){this.innerHTML=n}}function VI(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function $I(n){return arguments.length?this.each(n==null?HI:(typeof n=="function"?VI:jI)(n)):this.node().innerHTML}function GI(){this.nextSibling&&this.parentNode.appendChild(this)}function WI(){return this.each(GI)}function QI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function KI(){return this.each(QI)}function JI(n){var e=typeof n=="function"?n:k4(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qI(){return null}function YI(n,e){var t=typeof n=="function"?n:k4(n),r=e==null?qI:typeof e=="function"?e:Sy(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function XI(){var n=this.parentNode;n&&n.removeChild(this)}function ZI(){return this.each(XI)}function eP(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function tP(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function nP(n){return this.select(n?tP:eP)}function rP(n){return arguments.length?this.property("__data__",n):this.node().__data__}function iP(n){return function(e){n.call(this,e,this.__data__)}}function sP(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function oP(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,s;t<i;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function aP(n,e,t){return function(){var r=this.__on,i,s=iP(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=t),i.value=e;return}}this.addEventListener(n.type,s,t),i={type:n.type,name:n.name,value:e,listener:s,options:t},r?r.push(i):this.__on=[i]}}function lP(n,e,t){var r=sP(n+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,h;c<u;++c)for(i=0,h=l[c];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=e?aP:oP,i=0;i<s;++i)this.each(l(r[i],e,t));return this}function P4(n,e,t){var r=N4(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function fP(n,e){return function(){return P4(this,n,e)}}function cP(n,e){return function(){return P4(this,n,e.apply(this,arguments))}}function uP(n,e){return this.each((typeof e=="function"?cP:fP)(n,e))}function*dP(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var R4=[null];function kr(n,e){this._groups=n,this._parents=e}function Yu(){return new kr([[document.documentElement]],R4)}function hP(){return this}kr.prototype=Yu.prototype={constructor:kr,select:zO,selectAll:VO,selectChild:QO,selectChildren:YO,filter:XO,data:iI,enter:ZO,exit:oI,join:aI,merge:lI,selection:hP,order:fI,sort:cI,call:dI,nodes:hI,node:pI,size:mI,empty:gI,each:yI,attr:EI,style:TI,property:PI,classed:BI,text:UI,html:$I,raise:WI,lower:KI,append:JI,insert:YI,remove:ZI,clone:nP,datum:rP,on:lP,dispatch:uP,[Symbol.iterator]:dP};function Ft(n){return typeof n=="string"?new kr([[document.querySelector(n)]],[document.documentElement]):new kr([[n]],R4)}function pP(n){let e;for(;e=n.sourceEvent;)n=e;return n}function As(n,e){if(n=pP(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}const mP={passive:!1},mu={capture:!0,passive:!1};function tm(n){n.stopImmediatePropagation()}function P0(n){n.preventDefault(),n.stopImmediatePropagation()}function D4(n){var e=n.document.documentElement,t=Ft(n).on("dragstart.drag",P0,mu);"onselectstart"in e?t.on("selectstart.drag",P0,mu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function L4(n,e){var t=n.document.documentElement,r=Ft(n).on("dragstart.drag",null);e&&(r.on("click.drag",P0,mu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const vh=n=>()=>n;function vg(n,{sourceEvent:e,subject:t,target:r,identifier:i,active:s,x:o,y:l,dx:c,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}vg.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function gP(n){return!n.ctrlKey&&!n.button}function yP(){return this.parentNode}function bP(n,e){return e??{x:n.x,y:n.y}}function wP(){return navigator.maxTouchPoints||"ontouchstart"in this}function vP(){var n=gP,e=yP,t=bP,r=wP,i={},s=qu("start","drag","end"),o=0,l,c,u,h,p=0;function g(N){N.on("mousedown.drag",y).filter(r).on("touchstart.drag",k).on("touchmove.drag",A,mP).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(N,P){if(!(h||!n.call(this,N,P))){var B=O(this,e.call(this,N,P),N,P,"mouse");B&&(Ft(N.view).on("mousemove.drag",w,mu).on("mouseup.drag",v,mu),D4(N.view),tm(N),u=!1,l=N.clientX,c=N.clientY,B("start",N))}}function w(N){if(P0(N),!u){var P=N.clientX-l,B=N.clientY-c;u=P*P+B*B>p}i.mouse("drag",N)}function v(N){Ft(N.view).on("mousemove.drag mouseup.drag",null),L4(N.view,u),P0(N),i.mouse("end",N)}function k(N,P){if(n.call(this,N,P)){var B=N.changedTouches,L=e.call(this,N,P),G=B.length,ne,ie;for(ne=0;ne<G;++ne)(ie=O(this,L,N,P,B[ne].identifier,B[ne]))&&(tm(N),ie("start",N,B[ne]))}}function A(N){var P=N.changedTouches,B=P.length,L,G;for(L=0;L<B;++L)(G=i[P[L].identifier])&&(P0(N),G("drag",N,P[L]))}function C(N){var P=N.changedTouches,B=P.length,L,G;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),L=0;L<B;++L)(G=i[P[L].identifier])&&(tm(N),G("end",N,P[L]))}function O(N,P,B,L,G,ne){var ie=s.copy(),pe=As(ne||B,P),Oe,Ae,U;if((U=t.call(N,new vg("beforestart",{sourceEvent:B,target:g,identifier:G,active:o,x:pe[0],y:pe[1],dx:0,dy:0,dispatch:ie}),L))!=null)return Oe=U.x-pe[0]||0,Ae=U.y-pe[1]||0,function H(z,Y,V){var X=pe,q;switch(z){case"start":i[G]=H,q=o++;break;case"end":delete i[G],--o;case"drag":pe=As(V||Y,P),q=o;break}ie.call(z,N,new vg(z,{sourceEvent:Y,subject:U,target:g,identifier:G,active:q,x:pe[0]+Oe,y:pe[1]+Ae,dx:pe[0]-X[0],dy:pe[1]-X[1],dispatch:ie}),L)}}return g.filter=function(N){return arguments.length?(n=typeof N=="function"?N:vh(!!N),g):n},g.container=function(N){return arguments.length?(e=typeof N=="function"?N:vh(N),g):e},g.subject=function(N){return arguments.length?(t=typeof N=="function"?N:vh(N),g):t},g.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:vh(!!N),g):r},g.on=function(){var N=s.on.apply(s,arguments);return N===s?g:N},g.clickDistance=function(N){return arguments.length?(p=(N=+N)*N,g):Math.sqrt(p)},g}function Ny(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function B4(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Xu(){}var gu=.7,gp=1/gu,R0="\\s*([+-]?\\d+)\\s*",yu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ji="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xP=/^#([0-9a-f]{3,8})$/,kP=new RegExp(`^rgb\\(${R0},${R0},${R0}\\)$`),AP=new RegExp(`^rgb\\(${Ji},${Ji},${Ji}\\)$`),EP=new RegExp(`^rgba\\(${R0},${R0},${R0},${yu}\\)$`),SP=new RegExp(`^rgba\\(${Ji},${Ji},${Ji},${yu}\\)$`),CP=new RegExp(`^hsl\\(${yu},${Ji},${Ji}\\)$`),NP=new RegExp(`^hsla\\(${yu},${Ji},${Ji},${yu}\\)$`),x9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ny(Xu,bu,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:k9,formatHex:k9,formatHex8:TP,formatHsl:MP,formatRgb:A9,toString:A9});function k9(){return this.rgb().formatHex()}function TP(){return this.rgb().formatHex8()}function MP(){return _4(this).formatHsl()}function A9(){return this.rgb().formatRgb()}function bu(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=xP.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?E9(e):t===3?new sr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?xh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?xh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kP.exec(n))?new sr(e[1],e[2],e[3],1):(e=AP.exec(n))?new sr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=EP.exec(n))?xh(e[1],e[2],e[3],e[4]):(e=SP.exec(n))?xh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=CP.exec(n))?N9(e[1],e[2]/100,e[3]/100,1):(e=NP.exec(n))?N9(e[1],e[2]/100,e[3]/100,e[4]):x9.hasOwnProperty(n)?E9(x9[n]):n==="transparent"?new sr(NaN,NaN,NaN,0):null}function E9(n){return new sr(n>>16&255,n>>8&255,n&255,1)}function xh(n,e,t,r){return r<=0&&(n=e=t=NaN),new sr(n,e,t,r)}function OP(n){return n instanceof Xu||(n=bu(n)),n?(n=n.rgb(),new sr(n.r,n.g,n.b,n.opacity)):new sr}function xg(n,e,t,r){return arguments.length===1?OP(n):new sr(n,e,t,r??1)}function sr(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Ny(sr,xg,B4(Xu,{brighter(n){return n=n==null?gp:Math.pow(gp,n),new sr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?gu:Math.pow(gu,n),new sr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new sr(ml(this.r),ml(this.g),ml(this.b),yp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S9,formatHex:S9,formatHex8:IP,formatRgb:C9,toString:C9}));function S9(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}`}function IP(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}${Ha((isNaN(this.opacity)?1:this.opacity)*255)}`}function C9(){const n=yp(this.opacity);return`${n===1?"rgb(":"rgba("}${ml(this.r)}, ${ml(this.g)}, ${ml(this.b)}${n===1?")":`, ${n})`}`}function yp(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ml(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ha(n){return n=ml(n),(n<16?"0":"")+n.toString(16)}function N9(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new hi(n,e,t,r)}function _4(n){if(n instanceof hi)return new hi(n.h,n.s,n.l,n.opacity);if(n instanceof Xu||(n=bu(n)),!n)return new hi;if(n instanceof hi)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(t-r)/l+(t<r)*6:t===s?o=(r-e)/l+2:o=(e-t)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new hi(o,l,c,n.opacity)}function PP(n,e,t,r){return arguments.length===1?_4(n):new hi(n,e,t,r??1)}function hi(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Ny(hi,PP,B4(Xu,{brighter(n){return n=n==null?gp:Math.pow(gp,n),new hi(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?gu:Math.pow(gu,n),new hi(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new sr(nm(n>=240?n-240:n+120,i,r),nm(n,i,r),nm(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new hi(T9(this.h),kh(this.s),kh(this.l),yp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=yp(this.opacity);return`${n===1?"hsl(":"hsla("}${T9(this.h)}, ${kh(this.s)*100}%, ${kh(this.l)*100}%${n===1?")":`, ${n})`}`}}));function T9(n){return n=(n||0)%360,n<0?n+360:n}function kh(n){return Math.max(0,Math.min(1,n||0))}function nm(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const F4=n=>()=>n;function RP(n,e){return function(t){return n+t*e}}function DP(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function LP(n){return(n=+n)==1?z4:function(e,t){return t-e?DP(e,t,n):F4(isNaN(e)?t:e)}}function z4(n,e){var t=e-n;return t?RP(n,t):F4(isNaN(n)?e:n)}const M9=function n(e){var t=LP(e);function r(i,s){var o=t((i=xg(i)).r,(s=xg(s)).r),l=t(i.g,s.g),c=t(i.b,s.b),u=z4(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=c(h),i.opacity=u(h),i+""}}return r.gamma=n,r}(1);function Co(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var kg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rm=new RegExp(kg.source,"g");function BP(n){return function(){return n}}function _P(n){return function(e){return n(e)+""}}function FP(n,e){var t=kg.lastIndex=rm.lastIndex=0,r,i,s,o=-1,l=[],c=[];for(n=n+"",e=e+"";(r=kg.exec(n))&&(i=rm.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Co(r,i)})),t=rm.lastIndex;return t<e.length&&(s=e.slice(t),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?_P(c[0].x):BP(e):(e=c.length,function(u){for(var h=0,p;h<e;++h)l[(p=c[h]).i]=p.x(u);return l.join("")})}var O9=180/Math.PI,Ag={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function U4(n,e,t,r,i,s){var o,l,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*r)&&(t-=n*c,r-=e*c),(l=Math.sqrt(t*t+r*r))&&(t/=l,r/=l,c/=l),n*r<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,n)*O9,skewX:Math.atan(c)*O9,scaleX:o,scaleY:l}}var Ah;function zP(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Ag:U4(e.a,e.b,e.c,e.d,e.e,e.f)}function UP(n){return n==null||(Ah||(Ah=document.createElementNS("http://www.w3.org/2000/svg","g")),Ah.setAttribute("transform",n),!(n=Ah.transform.baseVal.consolidate()))?Ag:(n=n.matrix,U4(n.a,n.b,n.c,n.d,n.e,n.f))}function H4(n,e,t,r){function i(u){return u.length?u.pop()+" ":""}function s(u,h,p,g,y,w){if(u!==p||h!==g){var v=y.push("translate(",null,e,null,t);w.push({i:v-4,x:Co(u,p)},{i:v-2,x:Co(h,g)})}else(p||g)&&y.push("translate("+p+e+g+t)}function o(u,h,p,g){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:Co(u,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(u,h,p,g){u!==h?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:Co(u,h)}):h&&p.push(i(p)+"skewX("+h+r)}function c(u,h,p,g,y,w){if(u!==p||h!==g){var v=y.push(i(y)+"scale(",null,",",null,")");w.push({i:v-4,x:Co(u,p)},{i:v-2,x:Co(h,g)})}else(p!==1||g!==1)&&y.push(i(y)+"scale("+p+","+g+")")}return function(u,h){var p=[],g=[];return u=n(u),h=n(h),s(u.translateX,u.translateY,h.translateX,h.translateY,p,g),o(u.rotate,h.rotate,p,g),l(u.skewX,h.skewX,p,g),c(u.scaleX,u.scaleY,h.scaleX,h.scaleY,p,g),u=h=null,function(y){for(var w=-1,v=g.length,k;++w<v;)p[(k=g[w]).i]=k.x(y);return p.join("")}}}var HP=H4(zP,"px, ","px)","deg)"),jP=H4(UP,", ",")",")"),VP=1e-12;function I9(n){return((n=Math.exp(n))+1/n)/2}function $P(n){return((n=Math.exp(n))-1/n)/2}function GP(n){return((n=Math.exp(2*n))-1)/(n+1)}const WP=function n(e,t,r){function i(s,o){var l=s[0],c=s[1],u=s[2],h=o[0],p=o[1],g=o[2],y=h-l,w=p-c,v=y*y+w*w,k,A;if(v<VP)A=Math.log(g/u)/e,k=function(L){return[l+L*y,c+L*w,u*Math.exp(e*L*A)]};else{var C=Math.sqrt(v),O=(g*g-u*u+r*v)/(2*u*t*C),N=(g*g-u*u-r*v)/(2*g*t*C),P=Math.log(Math.sqrt(O*O+1)-O),B=Math.log(Math.sqrt(N*N+1)-N);A=(B-P)/e,k=function(L){var G=L*A,ne=I9(P),ie=u/(t*C)*(ne*GP(e*G+P)-$P(P));return[l+ie*y,c+ie*w,u*ne/I9(e*G+P)]}}return k.duration=A*1e3*e/Math.SQRT2,k}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return n(o,l,c)},i}(Math.SQRT2,2,4);var Pf=0,zc=0,Nc=0,j4=1e3,bp,Uc,wp=0,Tl=0,D1=0,wu=typeof performance=="object"&&performance.now?performance:Date,V4=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Ty(){return Tl||(V4(QP),Tl=wu.now()+D1)}function QP(){Tl=0}function vp(){this._call=this._time=this._next=null}vp.prototype=My.prototype={constructor:vp,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Ty():+t)+(e==null?0:+e),!this._next&&Uc!==this&&(Uc?Uc._next=this:bp=this,Uc=this),this._call=n,this._time=t,Eg()},stop:function(){this._call&&(this._call=null,this._time=1/0,Eg())}};function My(n,e,t){var r=new vp;return r.restart(n,e,t),r}function KP(){Ty(),++Pf;for(var n=bp,e;n;)(e=Tl-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Pf}function P9(){Tl=(wp=wu.now())+D1,Pf=zc=0;try{KP()}finally{Pf=0,qP(),Tl=0}}function JP(){var n=wu.now(),e=n-wp;e>j4&&(D1-=e,wp=n)}function qP(){for(var n,e=bp,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:bp=t);Uc=n,Eg(r)}function Eg(n){if(!Pf){zc&&(zc=clearTimeout(zc));var e=n-Tl;e>24?(n<1/0&&(zc=setTimeout(P9,n-wu.now()-D1)),Nc&&(Nc=clearInterval(Nc))):(Nc||(wp=wu.now(),Nc=setInterval(JP,j4)),Pf=1,V4(P9))}}function R9(n,e,t){var r=new vp;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var YP=qu("start","end","cancel","interrupt"),XP=[],$4=0,D9=1,Sg=2,Kh=3,L9=4,Cg=5,Jh=6;function L1(n,e,t,r,i,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;ZP(n,t,{name:e,index:r,group:i,on:YP,tween:XP,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$4})}function Oy(n,e){var t=vi(n,e);if(t.state>$4)throw new Error("too late; already scheduled");return t}function Zi(n,e){var t=vi(n,e);if(t.state>Kh)throw new Error("too late; already running");return t}function vi(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function ZP(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=My(s,0,t.time);function s(u){t.state=D9,t.timer.restart(o,t.delay,t.time),t.delay<=u&&o(u-t.delay)}function o(u){var h,p,g,y;if(t.state!==D9)return c();for(h in r)if(y=r[h],y.name===t.name){if(y.state===Kh)return R9(o);y.state===L9?(y.state=Jh,y.timer.stop(),y.on.call("interrupt",n,n.__data__,y.index,y.group),delete r[h]):+h<e&&(y.state=Jh,y.timer.stop(),y.on.call("cancel",n,n.__data__,y.index,y.group),delete r[h])}if(R9(function(){t.state===Kh&&(t.state=L9,t.timer.restart(l,t.delay,t.time),l(u))}),t.state=Sg,t.on.call("start",n,n.__data__,t.index,t.group),t.state===Sg){for(t.state=Kh,i=new Array(g=t.tween.length),h=0,p=-1;h<g;++h)(y=t.tween[h].value.call(n,n.__data__,t.index,t.group))&&(i[++p]=y);i.length=p+1}}function l(u){for(var h=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(c),t.state=Cg,1),p=-1,g=i.length;++p<g;)i[p].call(n,h);t.state===Cg&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){t.state=Jh,t.timer.stop(),delete r[e];for(var u in r)return;delete n.__transition}}function qh(n,e){var t=n.__transition,r,i,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){s=!1;continue}i=r.state>Sg&&r.state<Cg,r.state=Jh,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[o]}s&&delete n.__transition}}function eR(n){return this.each(function(){qh(this,n)})}function tR(n,e){var t,r;return function(){var i=Zi(this,n),s=i.tween;if(s!==t){r=t=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function nR(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var s=Zi(this,n),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:t},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=l;break}c===u&&i.push(l)}s.tween=i}}function rR(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=vi(this.node(),t).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===n)return o.value;return null}return this.each((e==null?tR:nR)(t,n,e))}function Iy(n,e,t){var r=n._id;return n.each(function(){var i=Zi(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return vi(i,r).value[e]}}function G4(n,e){var t;return(typeof e=="number"?Co:e instanceof bu?M9:(t=bu(e))?(e=t,M9):FP)(n,e)}function iR(n){return function(){this.removeAttribute(n)}}function sR(n){return function(){this.removeAttributeNS(n.space,n.local)}}function oR(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttribute(n);return o===i?null:o===r?s:s=e(r=o,t)}}function aR(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===i?null:o===r?s:s=e(r=o,t)}}function lR(n,e,t){var r,i,s;return function(){var o,l=t(this),c;return l==null?void this.removeAttribute(n):(o=this.getAttribute(n),c=l+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l)))}}function fR(n,e,t){var r,i,s;return function(){var o,l=t(this),c;return l==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),c=l+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l)))}}function cR(n,e){var t=R1(n),r=t==="transform"?jP:G4;return this.attrTween(n,typeof e=="function"?(t.local?fR:lR)(t,r,Iy(this,"attr."+n,e)):e==null?(t.local?sR:iR)(t):(t.local?aR:oR)(t,r,e))}function uR(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function dR(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function hR(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&dR(n,s)),t}return i._value=e,i}function pR(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&uR(n,s)),t}return i._value=e,i}function mR(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=R1(n);return this.tween(t,(r.local?hR:pR)(r,e))}function gR(n,e){return function(){Oy(this,n).delay=+e.apply(this,arguments)}}function yR(n,e){return e=+e,function(){Oy(this,n).delay=e}}function bR(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?gR:yR)(e,n)):vi(this.node(),e).delay}function wR(n,e){return function(){Zi(this,n).duration=+e.apply(this,arguments)}}function vR(n,e){return e=+e,function(){Zi(this,n).duration=e}}function xR(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?wR:vR)(e,n)):vi(this.node(),e).duration}function kR(n,e){if(typeof e!="function")throw new Error;return function(){Zi(this,n).ease=e}}function AR(n){var e=this._id;return arguments.length?this.each(kR(e,n)):vi(this.node(),e).ease}function ER(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Zi(this,n).ease=t}}function SR(n){if(typeof n!="function")throw new Error;return this.each(ER(this._id,n))}function CR(n){typeof n!="function"&&(n=E4(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,l=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new Ks(r,this._parents,this._name,this._id)}function NR(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var c=e[l],u=t[l],h=c.length,p=o[l]=new Array(h),g,y=0;y<h;++y)(g=c[y]||u[y])&&(p[y]=g);for(;l<r;++l)o[l]=e[l];return new Ks(o,this._parents,this._name,this._id)}function TR(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function MR(n,e,t){var r,i,s=TR(e)?Oy:Zi;return function(){var o=s(this,n),l=o.on;l!==r&&(i=(r=l).copy()).on(e,t),o.on=i}}function OR(n,e){var t=this._id;return arguments.length<2?vi(this.node(),t).on.on(n):this.each(MR(t,n,e))}function IR(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function PR(){return this.on("end.remove",IR(this._id))}function RR(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Sy(n));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],c=l.length,u=s[o]=new Array(c),h,p,g=0;g<c;++g)(h=l[g])&&(p=n.call(h,h.__data__,g,l))&&("__data__"in h&&(p.__data__=h.__data__),u[g]=p,L1(u[g],e,t,g,u,vi(h,t)));return new Ks(s,this._parents,e,t)}function DR(n){var e=this._name,t=this._id;typeof n!="function"&&(n=A4(n));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var c=r[l],u=c.length,h,p=0;p<u;++p)if(h=c[p]){for(var g=n.call(h,h.__data__,p,c),y,w=vi(h,t),v=0,k=g.length;v<k;++v)(y=g[v])&&L1(y,e,t,v,g,w);s.push(g),o.push(h)}return new Ks(s,o,e,t)}var LR=Yu.prototype.constructor;function BR(){return new LR(this._groups,this._parents)}function _R(n,e){var t,r,i;return function(){var s=If(this,n),o=(this.style.removeProperty(n),If(this,n));return s===o?null:s===t&&o===r?i:i=e(t=s,r=o)}}function W4(n){return function(){this.style.removeProperty(n)}}function FR(n,e,t){var r,i=t+"",s;return function(){var o=If(this,n);return o===i?null:o===r?s:s=e(r=o,t)}}function zR(n,e,t){var r,i,s;return function(){var o=If(this,n),l=t(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(n),If(this,n))),o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l))}}function UR(n,e){var t,r,i,s="style."+e,o="end."+s,l;return function(){var c=Zi(this,n),u=c.on,h=c.value[s]==null?l||(l=W4(e)):void 0;(u!==t||i!==h)&&(r=(t=u).copy()).on(o,i=h),c.on=r}}function HR(n,e,t){var r=(n+="")=="transform"?HP:G4;return e==null?this.styleTween(n,_R(n,r)).on("end.style."+n,W4(n)):typeof e=="function"?this.styleTween(n,zR(n,r,Iy(this,"style."+n,e))).each(UR(this._id,n)):this.styleTween(n,FR(n,r,e),t).on("end.style."+n,null)}function jR(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function VR(n,e,t){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&jR(n,o,t)),r}return s._value=e,s}function $R(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,VR(n,e,t??""))}function GR(n){return function(){this.textContent=n}}function WR(n){return function(){var e=n(this);this.textContent=e??""}}function QR(n){return this.tween("text",typeof n=="function"?WR(Iy(this,"text",n)):GR(n==null?"":n+""))}function KR(n){return function(e){this.textContent=n.call(this,e)}}function JR(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&KR(i)),e}return r._value=n,r}function qR(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,JR(n))}function YR(){for(var n=this._name,e=this._id,t=Q4(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var h=vi(c,e);L1(c,n,t,u,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ks(r,this._parents,n,t)}function XR(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--i===0&&s()}};t.each(function(){var u=Zi(this,r),h=u.on;h!==n&&(e=(n=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),i===0&&s()})}var ZR=0;function Ks(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function Q4(){return++ZR}var ms=Yu.prototype;Ks.prototype={constructor:Ks,select:RR,selectAll:DR,selectChild:ms.selectChild,selectChildren:ms.selectChildren,filter:CR,merge:NR,selection:BR,transition:YR,call:ms.call,nodes:ms.nodes,node:ms.node,size:ms.size,empty:ms.empty,each:ms.each,on:OR,attr:cR,attrTween:mR,style:HR,styleTween:$R,text:QR,textTween:qR,remove:PR,tween:rR,delay:bR,duration:xR,ease:AR,easeVarying:SR,end:XR,[Symbol.iterator]:ms[Symbol.iterator]};function eD(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var tD={time:null,delay:0,duration:250,ease:eD};function nD(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function rD(n){var e,t;n instanceof Ks?(e=n._id,n=n._name):(e=Q4(),(t=tD).time=Ty(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&L1(c,n,e,u,o,t||nD(c,e));return new Ks(r,this._parents,n,e)}Yu.prototype.interrupt=eR;Yu.prototype.transition=rD;function B9(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function i(){var s,o=t.length,l,c=0,u=0;for(s=0;s<o;++s)l=t[s],c+=l.x,u+=l.y;for(c=(c/o-n)*r,u=(u/o-e)*r,s=0;s<o;++s)l=t[s],l.x-=c,l.y-=u}return i.initialize=function(s){t=s},i.x=function(s){return arguments.length?(n=+s,i):n},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function iD(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return K4(this.cover(e,t),e,t,n)}function K4(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,s=n._root,o={data:r},l=n._x0,c=n._y0,u=n._x1,h=n._y1,p,g,y,w,v,k,A,C;if(!s)return n._root=o,n;for(;s.length;)if((v=e>=(p=(l+u)/2))?l=p:u=p,(k=t>=(g=(c+h)/2))?c=g:h=g,i=s,!(s=s[A=k<<1|v]))return i[A]=o,n;if(y=+n._x.call(null,s.data),w=+n._y.call(null,s.data),e===y&&t===w)return o.next=s,i?i[A]=o:n._root=o,n;do i=i?i[A]=new Array(4):n._root=new Array(4),(v=e>=(p=(l+u)/2))?l=p:u=p,(k=t>=(g=(c+h)/2))?c=g:h=g;while((A=k<<1|v)===(C=(w>=g)<<1|y>=p));return i[C]=s,i[A]=o,n}function sD(n){var e,t,r=n.length,i,s,o=new Array(r),l=new Array(r),c=1/0,u=1/0,h=-1/0,p=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(o[t]=i,l[t]=s,i<c&&(c=i),i>h&&(h=i),s<u&&(u=s),s>p&&(p=s));if(c>h||u>p)return this;for(this.cover(c,u).cover(h,p),t=0;t<r;++t)K4(this,o[t],l[t],n[t]);return this}function oD(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,s=(r=Math.floor(e))+1;else{for(var o=i-t||1,l=this._root,c,u;t>n||n>=i||r>e||e>=s;)switch(u=(e<r)<<1|n<t,c=new Array(4),c[u]=l,l=c,o*=2,u){case 0:i=t+o,s=r+o;break;case 1:t=i-o,s=r+o;break;case 2:i=t+o,r=s-o;break;case 3:t=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=r,this._x1=i,this._y1=s,this}function aD(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function lD(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function zn(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function fD(n,e,t){var r,i=this._x0,s=this._y0,o,l,c,u,h=this._x1,p=this._y1,g=[],y=this._root,w,v;for(y&&g.push(new zn(y,i,s,h,p)),t==null?t=1/0:(i=n-t,s=e-t,h=n+t,p=e+t,t*=t);w=g.pop();)if(!(!(y=w.node)||(o=w.x0)>h||(l=w.y0)>p||(c=w.x1)<i||(u=w.y1)<s))if(y.length){var k=(o+c)/2,A=(l+u)/2;g.push(new zn(y[3],k,A,c,u),new zn(y[2],o,A,k,u),new zn(y[1],k,l,c,A),new zn(y[0],o,l,k,A)),(v=(e>=A)<<1|n>=k)&&(w=g[g.length-1],g[g.length-1]=g[g.length-1-v],g[g.length-1-v]=w)}else{var C=n-+this._x.call(null,y.data),O=e-+this._y.call(null,y.data),N=C*C+O*O;if(N<t){var P=Math.sqrt(t=N);i=n-P,s=e-P,h=n+P,p=e+P,r=y.data}}return r}function cD(n){if(isNaN(h=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,l=this._y0,c=this._x1,u=this._y1,h,p,g,y,w,v,k,A;if(!t)return this;if(t.length)for(;;){if((w=h>=(g=(o+c)/2))?o=g:c=g,(v=p>=(y=(l+u)/2))?l=y:u=y,e=t,!(t=t[k=v<<1|w]))return this;if(!t.length)break;(e[k+1&3]||e[k+2&3]||e[k+3&3])&&(r=e,A=k)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[k]=s:delete e[k],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[A]=t:this._root=t),this):(this._root=s,this)}function uD(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function dD(){return this._root}function hD(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function pD(n){var e=[],t,r=this._root,i,s,o,l,c;for(r&&e.push(new zn(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.y0,l=t.x1,c=t.y1)&&r.length){var u=(s+l)/2,h=(o+c)/2;(i=r[3])&&e.push(new zn(i,u,h,l,c)),(i=r[2])&&e.push(new zn(i,s,h,u,c)),(i=r[1])&&e.push(new zn(i,u,o,l,h)),(i=r[0])&&e.push(new zn(i,s,o,u,h))}return this}function mD(n){var e=[],t=[],r;for(this._root&&e.push(new zn(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,l=r.y0,c=r.x1,u=r.y1,h=(o+c)/2,p=(l+u)/2;(s=i[0])&&e.push(new zn(s,o,l,h,p)),(s=i[1])&&e.push(new zn(s,h,l,c,p)),(s=i[2])&&e.push(new zn(s,o,p,h,u)),(s=i[3])&&e.push(new zn(s,h,p,c,u))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function gD(n){return n[0]}function yD(n){return arguments.length?(this._x=n,this):this._x}function bD(n){return n[1]}function wD(n){return arguments.length?(this._y=n,this):this._y}function Py(n,e,t){var r=new Ry(e??gD,t??bD,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function Ry(n,e,t,r,i,s){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function _9(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Qn=Py.prototype=Ry.prototype;Qn.copy=function(){var n=new Ry(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=_9(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=_9(r));return n};Qn.add=iD;Qn.addAll=sD;Qn.cover=oD;Qn.data=aD;Qn.extent=lD;Qn.find=fD;Qn.remove=cD;Qn.removeAll=uD;Qn.root=dD;Qn.size=hD;Qn.visit=pD;Qn.visitAfter=mD;Qn.x=yD;Qn.y=wD;function gl(n){return function(){return n}}function qo(n){return(n()-.5)*1e-6}function vD(n){return n.x+n.vx}function xD(n){return n.y+n.vy}function F9(n){var e,t,r,i=1,s=1;typeof n!="function"&&(n=gl(n==null?1:+n));function o(){for(var u,h=e.length,p,g,y,w,v,k,A=0;A<s;++A)for(p=Py(e,vD,xD).visitAfter(l),u=0;u<h;++u)g=e[u],v=t[g.index],k=v*v,y=g.x+g.vx,w=g.y+g.vy,p.visit(C);function C(O,N,P,B,L){var G=O.data,ne=O.r,ie=v+ne;if(G){if(G.index>g.index){var pe=y-G.x-G.vx,Oe=w-G.y-G.vy,Ae=pe*pe+Oe*Oe;Ae<ie*ie&&(pe===0&&(pe=qo(r),Ae+=pe*pe),Oe===0&&(Oe=qo(r),Ae+=Oe*Oe),Ae=(ie-(Ae=Math.sqrt(Ae)))/Ae*i,g.vx+=(pe*=Ae)*(ie=(ne*=ne)/(k+ne)),g.vy+=(Oe*=Ae)*ie,G.vx-=pe*(ie=1-ie),G.vy-=Oe*ie)}return}return N>y+ie||B<y-ie||P>w+ie||L<w-ie}}function l(u){if(u.data)return u.r=t[u.data.index];for(var h=u.r=0;h<4;++h)u[h]&&u[h].r>u.r&&(u.r=u[h].r)}function c(){if(e){var u,h=e.length,p;for(t=new Array(h),u=0;u<h;++u)p=e[u],t[p.index]=+n(p,u,e)}}return o.initialize=function(u,h){e=u,r=h,c()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(n=typeof u=="function"?u:gl(+u),c(),o):n},o}function kD(n){return n.index}function z9(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function U9(n){var e=kD,t=p,r,i=gl(30),s,o,l,c,u,h=1;n==null&&(n=[]);function p(k){return 1/Math.min(l[k.source.index],l[k.target.index])}function g(k){for(var A=0,C=n.length;A<h;++A)for(var O=0,N,P,B,L,G,ne,ie;O<C;++O)N=n[O],P=N.source,B=N.target,L=B.x+B.vx-P.x-P.vx||qo(u),G=B.y+B.vy-P.y-P.vy||qo(u),ne=Math.sqrt(L*L+G*G),ne=(ne-s[O])/ne*k*r[O],L*=ne,G*=ne,B.vx-=L*(ie=c[O]),B.vy-=G*ie,P.vx+=L*(ie=1-ie),P.vy+=G*ie}function y(){if(o){var k,A=o.length,C=n.length,O=new Map(o.map((P,B)=>[e(P,B,o),P])),N;for(k=0,l=new Array(A);k<C;++k)N=n[k],N.index=k,typeof N.source!="object"&&(N.source=z9(O,N.source)),typeof N.target!="object"&&(N.target=z9(O,N.target)),l[N.source.index]=(l[N.source.index]||0)+1,l[N.target.index]=(l[N.target.index]||0)+1;for(k=0,c=new Array(C);k<C;++k)N=n[k],c[k]=l[N.source.index]/(l[N.source.index]+l[N.target.index]);r=new Array(C),w(),s=new Array(C),v()}}function w(){if(o)for(var k=0,A=n.length;k<A;++k)r[k]=+t(n[k],k,n)}function v(){if(o)for(var k=0,A=n.length;k<A;++k)s[k]=+i(n[k],k,n)}return g.initialize=function(k,A){o=k,u=A,y()},g.links=function(k){return arguments.length?(n=k,y(),g):n},g.id=function(k){return arguments.length?(e=k,g):e},g.iterations=function(k){return arguments.length?(h=+k,g):h},g.strength=function(k){return arguments.length?(t=typeof k=="function"?k:gl(+k),w(),g):t},g.distance=function(k){return arguments.length?(i=typeof k=="function"?k:gl(+k),v(),g):i},g}const AD=1664525,ED=1013904223,H9=4294967296;function SD(){let n=1;return()=>(n=(AD*n+ED)%H9)/H9}function CD(n){return n.x}function ND(n){return n.y}var TD=10,MD=Math.PI*(3-Math.sqrt(5));function j9(n){var e,t=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,l=new Map,c=My(p),u=qu("tick","end"),h=SD();n==null&&(n=[]);function p(){g(),u.call("tick",e),t<r&&(c.stop(),u.call("end",e))}function g(v){var k,A=n.length,C;v===void 0&&(v=1);for(var O=0;O<v;++O)for(t+=(s-t)*i,l.forEach(function(N){N(t)}),k=0;k<A;++k)C=n[k],C.fx==null?C.x+=C.vx*=o:(C.x=C.fx,C.vx=0),C.fy==null?C.y+=C.vy*=o:(C.y=C.fy,C.vy=0);return e}function y(){for(var v=0,k=n.length,A;v<k;++v){if(A=n[v],A.index=v,A.fx!=null&&(A.x=A.fx),A.fy!=null&&(A.y=A.fy),isNaN(A.x)||isNaN(A.y)){var C=TD*Math.sqrt(.5+v),O=v*MD;A.x=C*Math.cos(O),A.y=C*Math.sin(O)}(isNaN(A.vx)||isNaN(A.vy))&&(A.vx=A.vy=0)}}function w(v){return v.initialize&&v.initialize(n,h),v}return y(),e={tick:g,restart:function(){return c.restart(p),e},stop:function(){return c.stop(),e},nodes:function(v){return arguments.length?(n=v,y(),l.forEach(w),e):n},alpha:function(v){return arguments.length?(t=+v,e):t},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(s=+v,e):s},velocityDecay:function(v){return arguments.length?(o=1-v,e):1-o},randomSource:function(v){return arguments.length?(h=v,l.forEach(w),e):h},force:function(v,k){return arguments.length>1?(k==null?l.delete(v):l.set(v,w(k)),e):l.get(v)},find:function(v,k,A){var C=0,O=n.length,N,P,B,L,G;for(A==null?A=1/0:A*=A,C=0;C<O;++C)L=n[C],N=v-L.x,P=k-L.y,B=N*N+P*P,B<A&&(G=L,A=B);return G},on:function(v,k){return arguments.length>1?(u.on(v,k),e):u.on(v)}}}function V9(){var n,e,t,r,i=gl(-30),s,o=1,l=1/0,c=.81;function u(y){var w,v=n.length,k=Py(n,CD,ND).visitAfter(p);for(r=y,w=0;w<v;++w)e=n[w],k.visit(g)}function h(){if(n){var y,w=n.length,v;for(s=new Array(w),y=0;y<w;++y)v=n[y],s[v.index]=+i(v,y,n)}}function p(y){var w=0,v,k,A=0,C,O,N;if(y.length){for(C=O=N=0;N<4;++N)(v=y[N])&&(k=Math.abs(v.value))&&(w+=v.value,A+=k,C+=k*v.x,O+=k*v.y);y.x=C/A,y.y=O/A}else{v=y,v.x=v.data.x,v.y=v.data.y;do w+=s[v.data.index];while(v=v.next)}y.value=w}function g(y,w,v,k){if(!y.value)return!0;var A=y.x-e.x,C=y.y-e.y,O=k-w,N=A*A+C*C;if(O*O/c<N)return N<l&&(A===0&&(A=qo(t),N+=A*A),C===0&&(C=qo(t),N+=C*C),N<o&&(N=Math.sqrt(o*N)),e.vx+=A*y.value*r/N,e.vy+=C*y.value*r/N),!0;if(y.length||N>=l)return;(y.data!==e||y.next)&&(A===0&&(A=qo(t),N+=A*A),C===0&&(C=qo(t),N+=C*C),N<o&&(N=Math.sqrt(o*N)));do y.data!==e&&(O=s[y.data.index]*r/N,e.vx+=A*O,e.vy+=C*O);while(y=y.next)}return u.initialize=function(y,w){n=y,t=w,h()},u.strength=function(y){return arguments.length?(i=typeof y=="function"?y:gl(+y),h(),u):i},u.distanceMin=function(y){return arguments.length?(o=y*y,u):Math.sqrt(o)},u.distanceMax=function(y){return arguments.length?(l=y*y,u):Math.sqrt(l)},u.theta=function(y){return arguments.length?(c=y*y,u):Math.sqrt(c)},u}const Eh=n=>()=>n;function OD(n,{sourceEvent:e,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Hs(n,e,t){this.k=n,this.x=e,this.y=t}Hs.prototype={constructor:Hs,scale:function(n){return n===1?this:new Hs(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Hs(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var J4=new Hs(1,0,0);Hs.prototype;function im(n){n.stopImmediatePropagation()}function Tc(n){n.preventDefault(),n.stopImmediatePropagation()}function ID(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function PD(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function $9(){return this.__zoom||J4}function RD(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function DD(){return navigator.maxTouchPoints||"ontouchstart"in this}function LD(n,e,t){var r=n.invertX(e[0][0])-t[0][0],i=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function BD(){var n=ID,e=PD,t=LD,r=RD,i=DD,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=WP,u=qu("start","zoom","end"),h,p,g,y=500,w=150,v=0,k=10;function A(U){U.property("__zoom",$9).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",ne).on("dblclick.zoom",ie).filter(i).on("touchstart.zoom",pe).on("touchmove.zoom",Oe).on("touchend.zoom touchcancel.zoom",Ae).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(U,H,z,Y){var V=U.selection?U.selection():U;V.property("__zoom",$9),U!==V?P(U,H,z,Y):V.interrupt().each(function(){B(this,arguments).event(Y).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},A.scaleBy=function(U,H,z,Y){A.scaleTo(U,function(){var V=this.__zoom.k,X=typeof H=="function"?H.apply(this,arguments):H;return V*X},z,Y)},A.scaleTo=function(U,H,z,Y){A.transform(U,function(){var V=e.apply(this,arguments),X=this.__zoom,q=z==null?N(V):typeof z=="function"?z.apply(this,arguments):z,R=X.invert(q),Q=typeof H=="function"?H.apply(this,arguments):H;return t(O(C(X,Q),q,R),V,o)},z,Y)},A.translateBy=function(U,H,z,Y){A.transform(U,function(){return t(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),o)},null,Y)},A.translateTo=function(U,H,z,Y,V){A.transform(U,function(){var X=e.apply(this,arguments),q=this.__zoom,R=Y==null?N(X):typeof Y=="function"?Y.apply(this,arguments):Y;return t(J4.translate(R[0],R[1]).scale(q.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof z=="function"?-z.apply(this,arguments):-z),X,o)},Y,V)};function C(U,H){return H=Math.max(s[0],Math.min(s[1],H)),H===U.k?U:new Hs(H,U.x,U.y)}function O(U,H,z){var Y=H[0]-z[0]*U.k,V=H[1]-z[1]*U.k;return Y===U.x&&V===U.y?U:new Hs(U.k,Y,V)}function N(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function P(U,H,z,Y){U.on("start.zoom",function(){B(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(Y).end()}).tween("zoom",function(){var V=this,X=arguments,q=B(V,X).event(Y),R=e.apply(V,X),Q=z==null?N(R):typeof z=="function"?z.apply(V,X):z,ve=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),me=V.__zoom,Ie=typeof H=="function"?H.apply(V,X):H,Be=c(me.invert(Q).concat(ve/me.k),Ie.invert(Q).concat(ve/Ie.k));return function(Fe){if(Fe===1)Fe=Ie;else{var Re=Be(Fe),Qe=ve/Re[2];Fe=new Hs(Qe,Q[0]-Re[0]*Qe,Q[1]-Re[1]*Qe)}q.zoom(null,Fe)}})}function B(U,H,z){return!z&&U.__zooming||new L(U,H)}function L(U,H){this.that=U,this.args=H,this.active=0,this.sourceEvent=null,this.extent=e.apply(U,H),this.taps=0}L.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,H){return this.mouse&&U!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var H=Ft(this.that).datum();u.call(U,this.that,new OD(U,{sourceEvent:this.sourceEvent,target:A,type:U,transform:this.that.__zoom,dispatch:u}),H)}};function G(U,...H){if(!n.apply(this,arguments))return;var z=B(this,H).event(U),Y=this.__zoom,V=Math.max(s[0],Math.min(s[1],Y.k*Math.pow(2,r.apply(this,arguments)))),X=As(U);if(z.wheel)(z.mouse[0][0]!==X[0]||z.mouse[0][1]!==X[1])&&(z.mouse[1]=Y.invert(z.mouse[0]=X)),clearTimeout(z.wheel);else{if(Y.k===V)return;z.mouse=[X,Y.invert(X)],qh(this),z.start()}Tc(U),z.wheel=setTimeout(q,w),z.zoom("mouse",t(O(C(Y,V),z.mouse[0],z.mouse[1]),z.extent,o));function q(){z.wheel=null,z.end()}}function ne(U,...H){if(g||!n.apply(this,arguments))return;var z=U.currentTarget,Y=B(this,H,!0).event(U),V=Ft(U.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",ve,!0),X=As(U,z),q=U.clientX,R=U.clientY;D4(U.view),im(U),Y.mouse=[X,this.__zoom.invert(X)],qh(this),Y.start();function Q(me){if(Tc(me),!Y.moved){var Ie=me.clientX-q,Be=me.clientY-R;Y.moved=Ie*Ie+Be*Be>v}Y.event(me).zoom("mouse",t(O(Y.that.__zoom,Y.mouse[0]=As(me,z),Y.mouse[1]),Y.extent,o))}function ve(me){V.on("mousemove.zoom mouseup.zoom",null),L4(me.view,Y.moved),Tc(me),Y.event(me).end()}}function ie(U,...H){if(n.apply(this,arguments)){var z=this.__zoom,Y=As(U.changedTouches?U.changedTouches[0]:U,this),V=z.invert(Y),X=z.k*(U.shiftKey?.5:2),q=t(O(C(z,X),Y,V),e.apply(this,H),o);Tc(U),l>0?Ft(this).transition().duration(l).call(P,q,Y,U):Ft(this).call(A.transform,q,Y,U)}}function pe(U,...H){if(n.apply(this,arguments)){var z=U.touches,Y=z.length,V=B(this,H,U.changedTouches.length===Y).event(U),X,q,R,Q;for(im(U),q=0;q<Y;++q)R=z[q],Q=As(R,this),Q=[Q,this.__zoom.invert(Q),R.identifier],V.touch0?!V.touch1&&V.touch0[2]!==Q[2]&&(V.touch1=Q,V.taps=0):(V.touch0=Q,X=!0,V.taps=1+!!h);h&&(h=clearTimeout(h)),X&&(V.taps<2&&(p=Q[0],h=setTimeout(function(){h=null},y)),qh(this),V.start())}}function Oe(U,...H){if(this.__zooming){var z=B(this,H).event(U),Y=U.changedTouches,V=Y.length,X,q,R,Q;for(Tc(U),X=0;X<V;++X)q=Y[X],R=As(q,this),z.touch0&&z.touch0[2]===q.identifier?z.touch0[0]=R:z.touch1&&z.touch1[2]===q.identifier&&(z.touch1[0]=R);if(q=z.that.__zoom,z.touch1){var ve=z.touch0[0],me=z.touch0[1],Ie=z.touch1[0],Be=z.touch1[1],Fe=(Fe=Ie[0]-ve[0])*Fe+(Fe=Ie[1]-ve[1])*Fe,Re=(Re=Be[0]-me[0])*Re+(Re=Be[1]-me[1])*Re;q=C(q,Math.sqrt(Fe/Re)),R=[(ve[0]+Ie[0])/2,(ve[1]+Ie[1])/2],Q=[(me[0]+Be[0])/2,(me[1]+Be[1])/2]}else if(z.touch0)R=z.touch0[0],Q=z.touch0[1];else return;z.zoom("touch",t(O(q,R,Q),z.extent,o))}}function Ae(U,...H){if(this.__zooming){var z=B(this,H).event(U),Y=U.changedTouches,V=Y.length,X,q;for(im(U),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),X=0;X<V;++X)q=Y[X],z.touch0&&z.touch0[2]===q.identifier?delete z.touch0:z.touch1&&z.touch1[2]===q.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(q=As(q,this),Math.hypot(p[0]-q[0],p[1]-q[1])<k)){var R=Ft(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return A.wheelDelta=function(U){return arguments.length?(r=typeof U=="function"?U:Eh(+U),A):r},A.filter=function(U){return arguments.length?(n=typeof U=="function"?U:Eh(!!U),A):n},A.touchable=function(U){return arguments.length?(i=typeof U=="function"?U:Eh(!!U),A):i},A.extent=function(U){return arguments.length?(e=typeof U=="function"?U:Eh([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),A):e},A.scaleExtent=function(U){return arguments.length?(s[0]=+U[0],s[1]=+U[1],A):[s[0],s[1]]},A.translateExtent=function(U){return arguments.length?(o[0][0]=+U[0][0],o[1][0]=+U[1][0],o[0][1]=+U[0][1],o[1][1]=+U[1][1],A):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},A.constrain=function(U){return arguments.length?(t=U,A):t},A.duration=function(U){return arguments.length?(l=+U,A):l},A.interpolate=function(U){return arguments.length?(c=U,A):c},A.on=function(){var U=u.on.apply(u,arguments);return U===u?A:U},A.clickDistance=function(U){return arguments.length?(v=(U=+U)*U,A):Math.sqrt(v)},A.tapDistance=function(U){return arguments.length?(k=+U,A):k},A}const ri="/api",_i={async getThreads(){const n=await fetch(`${ri}/threads`);if(!n.ok)throw new Error("Failed to fetch threads");return n.json()},async createThread({title:n,description:e,content:t,metadata:r}){const i=await fetch(`${ri}/threads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,description:e,content:t,metadata:r})});if(!i.ok)throw new Error("Failed to create thread");return i.json()},async searchThreads(n){const e=await fetch(`${ri}/threads/search?query=${encodeURIComponent(n)}`);if(!e.ok)throw new Error("Failed to search threads");return e.json()},async generateThread(n){const e=await fetch(`${ri}/threads/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:n})});if(!e.ok)throw new Error("Failed to generate thread");return e.json()},async getThreadNodes(n){const e=await fetch(`${ri}/threads/${n}/nodes`);if(!e.ok)throw new Error("Failed to fetch nodes");return e.json()},async createNode({threadId:n,title:e,content:t,nodeType:r,parentId:i,metadata:s}){console.log("API createNode request:",{threadId:n,title:e,content:t,nodeType:r,parentId:i,metadata:s});const o=await fetch(`${ri}/threads/${n}/nodes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:t,nodeType:r,parentId:i,metadata:s})});if(!o.ok)throw new Error("Failed to create node");const l=await o.json();return console.log("API createNode response:",l),l},async createEdge({sourceId:n,targetId:e,relationshipType:t,metadata:r}){const i=await fetch(`${ri}/edges`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceId:n,targetId:e,relationshipType:t,metadata:r})});if(!i.ok)throw new Error("Failed to create edge");return i.json()},async saveThreadLayout(n,e){const t=await fetch(`${ri}/threads/${n}/layout`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout:e})});if(!t.ok)throw new Error("Failed to save thread layout");return t.json()},async loadThreadLayout(n){const e=await fetch(`${ri}/threads/${n}/layout`);if(!e.ok)throw new Error("Failed to load thread layout");return e.json()},async deleteThreadLayout(n){const e=await fetch(`${ri}/threads/${n}/layout`,{method:"DELETE"});if(!e.ok)throw new Error("Failed to delete thread layout");return e.json()},async generateNodeSuggestions({nodeId:n,nodeType:e,content:t,title:r}){const i=await fetch(`${ri}/nodes/suggest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nodeId:n,nodeType:e,content:t,title:r})});if(!i.ok)throw new Error("Failed to generate suggestions");return i.json()}},gs=[{value:0,label:"ROOT"},{value:1,label:"EVIDENCE"},{value:2,label:"REFERENCE"},{value:3,label:"CONTEXT"},{value:4,label:"EXAMPLE"},{value:5,label:"COUNTERPOINT"},{value:6,label:"SYNTHESIS"}],Mc={ROOT:"#ffd700",EVIDENCE:"#ff6b6b",REFERENCE:"#4ecdc4",CONTEXT:"#45b7d1",EXAMPLE:"#96ceb4",COUNTERPOINT:"#ff7f50",SYNTHESIS:"#9b59b6",thread:"#00ff9d"},_D=({threads:n,onNodeClick:e,onAddNode:t,onOpenEditor:r,onOpenArticle:i,loading:s})=>{var Ai,Qr,Er,pa,ns,rs,Ys,Ei;const o=he.useRef(),l=he.useRef(),[c,u]=he.useState(null),[h,p]=he.useState(!0),[g,y]=he.useState(!1),[w,v]=he.useState(-100),[k,A]=he.useState(80),[C,O]=he.useState(1.5),[N,P]=he.useState(.1),[B,L]=he.useState(.1),[G,ne]=he.useState(.6),[ie,pe]=he.useState(.6),[Oe,Ae]=he.useState(2),[U,H]=he.useState(1),[z,Y]=he.useState(!0),[V,X]=he.useState(!0);he.useState(!1);const[q,R]=he.useState(!0),[Q,ve]=he.useState(new Set),[me,Ie]=he.useState(!1);he.useState(!1);const[Be,Fe]=he.useState(null),[Re,Qe]=he.useState(!0),ct=he.useRef(null),Zt=he.useRef(!1),fr={default:{forceStrength:-300,linkDistance:150,collisionRadius:2,centerForce:.1,animationSpeed:.1,damping:.6,linkOpacity:.6,linkWidth:2,nodeSize:1},compact:{forceStrength:-150,linkDistance:80,collisionRadius:1.5,centerForce:.2,animationSpeed:.15,damping:.7,linkOpacity:.7,linkWidth:1.5,nodeSize:.8},spread:{forceStrength:-400,linkDistance:200,collisionRadius:2.5,centerForce:.05,animationSpeed:.08,damping:.5,linkOpacity:.5,linkWidth:2.5,nodeSize:1.2}},kt=de=>{const He=fr[de];v(He.forceStrength),A(He.linkDistance),O(He.collisionRadius),P(He.centerForce),L(He.animationSpeed),ne(He.damping),pe(He.linkOpacity),Ae(He.linkWidth),H(He.nodeSize)};he.useEffect(()=>{s!==void 0&&p(s)},[s]);const Mt=de=>{console.log("Node clicked:",de),console.log("Node content:",de.content),u(de)},es=()=>{u(null)},un=de=>{if(!n.length)return[];const He=n[0];if(de.startsWith("thread-"))return(He.nodes||[]).filter(ge=>!ge.parentId);{const ge=parseInt(de.replace("node-",""));return(He.nodes||[]).filter(te=>te.parentId===ge)}},Ar=de=>{Mt(de)};he.useEffect(()=>{if(!n||n.length===0||h)return;const de=new Map,He=Be;Ft(o.current).selectAll(".node").each(function(Z){de.set(Z.id,{x:Z.x,y:Z.y})}),Ft(o.current).selectAll("*").remove();const ge=[],te=[];n.forEach(Z=>{var Ve,tt,Me,Jr,cr;const Ee=((Ve=Z.metadata)==null?void 0:Ve.title)||Z.title||`Thread ${Z.id}`;ge.push({id:`thread-${Z.id}`,type:"thread",title:Ee,description:((tt=Z.metadata)==null?void 0:tt.description)||Z.description||"",content:((Me=Z.content)==null?void 0:Me.content)||Z.content||"",radius:25,hasVoted:Z.hasVoted||!1,votesFor:Z.votesFor||0,votesAgainst:Z.votesAgainst||0,proposalDeadline:Z.proposalDeadline||0,hasActiveProposal:Z.hasActiveProposal||!1,originalData:{...Z,type:"thread",title:Ee,metadata:{...Z.metadata,title:Ee}}}),(Jr=Z.nodes)==null||Jr.forEach(st=>{var rd;console.log("Raw node data:",st);const is=typeof st.type=="number"?st.type:gs.findIndex(jf=>jf.label===st.node_type);console.log("Converted node type:",is);let Xs=st.content;try{typeof st.content=="string"&&(st.content.startsWith("{")||st.content.startsWith("["))&&(Xs=JSON.parse(st.content))}catch(jf){console.error("Failed to parse node content:",jf)}ge.push({id:`node-${st.id}`,type:is,title:((rd=st.metadata)==null?void 0:rd.title)||`Node ${st.id}`,content:Xs,radius:15,hasVoted:st.hasVoted,votesFor:st.votesFor,votesAgainst:st.votesAgainst,proposalDeadline:st.proposalDeadline,hasActiveProposal:st.hasActiveProposal,originalData:{...st,type:is}})}),(cr=Z.nodes)==null||cr.forEach(st=>{st.parent_id?ge.some(Xs=>Xs.id===`node-${st.parent_id}`)?te.push({source:`node-${st.parent_id}`,target:`node-${st.id}`,value:1}):te.push({source:`thread-${Z.id}`,target:`node-${st.id}`,value:1}):te.push({source:`thread-${Z.id}`,target:`node-${st.id}`,value:1})})}),ge.forEach(Z=>{const Ee=de.get(Z.id);Ee&&(Z.x=Ee.x,Z.y=Ee.y,Z.fx=Ee.x,Z.fy=Ee.y)});const ee=(c?window.innerWidth*.7:window.innerWidth)-40,Le=600,et=Ft(o.current).attr("width",ee).attr("height",Le),$e=et.append("g"),mt=BD().scaleExtent([.5,2]).on("zoom",Z=>{$e.attr("transform",Z.transform),Fe(Z.transform)}).filter(Z=>Z.type==="wheel"||Z.target.tagName==="circle");et.call(mt),He&&et.call(mt.transform,He),ge.forEach(Z=>{Z.type==="thread"&&(de.has(Z.id)||(Z.fx=ee/2,Z.fy=Le*3/4))});const Ot=j9(ge).force("link",U9(te).id(Z=>Z.id).distance(Z=>Z.source.type==="thread"?k*2:k)).force("charge",V9().strength(Z=>Z.type==="thread"?w*5:w)).force("collision",F9().radius(Z=>Z.type==="thread"?Z.radius*4:Z.radius*U*C)).force("center",B9(ee/2,Le/2).strength(N)).alphaDecay(B).velocityDecay(G);Ot.alpha(.5).restart(),ct.current=Ot,g?ge.forEach(Z=>{Z.x&&Z.y&&(Z.fx=Z.x,Z.fy=Z.y)}):ge.forEach(Z=>{Z.type!=="thread"&&(Z.fx=null,Z.fy=null)});const Gt=et.append("defs");te.forEach((Z,Ee)=>{const Ve=`link-gradient-${Ee}`,tt=Gt.append("linearGradient").attr("id",Ve).attr("gradientUnits","userSpaceOnUse");tt.append("stop").attr("offset","0%").attr("stop-color","#00ff9d").attr("stop-opacity",.2),tt.append("stop").attr("offset","100%").attr("stop-color","#00ff9d").attr("stop-opacity",.1)});const Si=$e.append("g").selectAll("line").data(te).join("line").attr("stroke",(Z,Ee)=>`url(#link-gradient-${Ee})`).attr("stroke-opacity",ie).attr("stroke-width",Oe),Ci=Gt.append("filter").attr("id","glow-effect").attr("height","300%").attr("width","300%").attr("x","-100%").attr("y","-100%");Ci.append("feGaussianBlur").attr("class","blur").attr("stdDeviation","3").attr("result","coloredBlur");const Ni=Ci.append("feMerge");Ni.append("feMergeNode").attr("in","coloredBlur"),Ni.append("feMergeNode").attr("in","SourceGraphic");const en=$e.append("g").selectAll("g").data(ge).join("g").attr("class",Z=>`node ${h?"loading":""}`).attr("data-type",Z=>{var Ee;return Z.type==="thread"?"thread":(Ee=gs[Z.type])==null?void 0:Ee.label}).call(Kr(Ot));en.append("circle").attr("r",Z=>Z.type==="thread"?Z.radius:Z.radius*U).attr("fill",Z=>{var Ee;return Z.type==="thread"?Mc.thread:Mc[(Ee=gs[Z.type])==null?void 0:Ee.label]||"#666"}).attr("stroke","#fff").attr("stroke-width",2).style("filter","url(#glow-effect)"),en.append("text").attr("dy",Z=>Z.type==="thread"?Z.radius+25:Z.radius+20).attr("text-anchor","middle").attr("class","node-label").text(Z=>{var Ee,Ve,tt,Me;if(Z.type==="thread"){const Jr=((Ve=(Ee=Z.originalData)==null?void 0:Ee.metadata)==null?void 0:Ve.title)||((tt=Z.originalData)==null?void 0:tt.title)||Z.title||"Untitled",cr=(Jr||"").split(/\s+/);return cr.length>2?cr.slice(0,2).join(" ")+"...":Jr}return((Me=gs[Z.type])==null?void 0:Me.label)||""}).each(function(Z){const Ee=this.getBBox(),Ve=4;Ft(this.parentNode).insert("rect","text").attr("x",Ee.x-Ve).attr("y",Ee.y-Ve).attr("width",Ee.width+Ve*2).attr("height",Ee.height+Ve*2).attr("rx",4).attr("fill","rgba(0, 0, 0, 0.5)").attr("class","label-background")}),en.on("mouseover",(Z,Ee)=>{const Ve=new Set,tt=new Set;te.forEach(Me=>{Me.source.id===Ee.id?(Ve.add(Me.target.id),tt.add(Me)):Me.target.id===Ee.id&&(Ve.add(Me.source.id),tt.add(Me))}),en.style("opacity",Me=>Me.id===Ee.id||Ve.has(Me.id)?1:.2).select("circle").style("filter",Me=>Me.id===Ee.id||Ve.has(Me.id)?"url(#glow-effect)":"none"),Si.style("opacity",Me=>tt.has(Me)?1:.1).attr("stroke-width",Me=>tt.has(Me)?3:1)}).on("mouseout",()=>{en.style("opacity",1).select("circle").style("filter","url(#glow-effect)"),Si.style("opacity",.6).attr("stroke-width",2)}),en.append("title").text(Z=>Z.type==="thread"?`${Z.title}
${Z.description||""}`:`${Z.type}
${Z.content||""}`),en.on("click",(Z,Ee)=>{Mt(Ee.originalData)}),Ot.on("tick",()=>{Si.attr("x1",Z=>Z.source.x).attr("y1",Z=>Z.source.y).attr("x2",Z=>Z.target.x).attr("y2",Z=>Z.target.y).attr("stroke-width",Oe).attr("stroke-opacity",ie),en.attr("transform",Z=>`translate(${Z.x},${Z.y})`)}),setTimeout(()=>p(!1),500);function Kr(Z){function Ee(Me){!Zt.current&&!Me.active&&Z.alphaTarget(.3).restart(),Zt.current&&!Me.active&&Z.alpha(.3).alphaTarget(0).restart(),Me.subject.fx=Me.subject.x,Me.subject.fy=Me.subject.y}function Ve(Me){Me.subject.fx=Me.x,Me.subject.fy=Me.y}function tt(Me){!Zt.current&&!Me.active&&Z.alphaTarget(0),!Zt.current&&!g&&!Q.has(Me.subject.id)&&(Me.subject.fx=null,Me.subject.fy=null)}return vP().on("start",Ee).on("drag",Ve).on("end",tt)}return en.on("dblclick",(Z,Ee)=>{Z.stopPropagation();const Ve=Ee.id,tt=new Set(Q);Q.has(Ve)?(tt.delete(Ve),Ee.fx=null,Ee.fy=null):(tt.add(Ve),Ee.fx=Ee.x,Ee.fy=Ee.y),ve(tt),Ot.alpha(.3).restart()}),()=>{Ot.stop()}},[n,h,c,g,Q,w,k,C,N,B,G,ie,Oe,U]),he.useEffect(()=>{Zt.current=Re,ct.current&&(Re?(Ft(o.current).selectAll(".node").each(function(de){de.x!=null&&(de.fx=de.x,de.fy=de.y)}),ct.current.alphaTarget(0).alpha(0)):(Ft(o.current).selectAll(".node").each(function(de){de.type!=="thread"&&!Q.has(de.id)&&(de.fx=null,de.fy=null)}),ct.current.alpha(.15).restart()))},[Re]);const zl=de=>{var He;return de==="thread"?Mc.thread:Mc[(He=gs[de])==null?void 0:He.label]||"#666"};he.useEffect(()=>{function de(He){l.current&&!l.current.contains(He.target)&&Y(!0)}return document.addEventListener("mousedown",de),()=>{document.removeEventListener("mousedown",de)}},[]);const ha=async()=>{if(!n||n.length===0)return;const de=n[0].id,He={nodes:{},settings:{areNodesFixed:g,forceStrength:w,linkDistance:k,collisionRadius:C,centerForce:N,animationSpeed:B,damping:G,linkOpacity:ie,linkWidth:Oe,nodeSize:U,isMatteMode:V,fixedNodes:Array.from(Q)}};Ft(o.current).selectAll(".node").each(function(ge){He.nodes[ge.id]={x:ge.x,y:ge.y,fixed:Q.has(ge.id)}}),console.log("Saving layout and settings for thread:",de),console.log("Layout data:",He);try{Ie(!0);const ge=await _i.saveThreadLayout(de,He);console.log("Layout and settings saved successfully:",ge);const te=Ft(o.current).selectAll(".node");te.classed("saved",!0),setTimeout(()=>te.classed("saved",!1),1e3)}catch(ge){console.error("Failed to save layout:",ge)}finally{Ie(!1)}},xi=async()=>{var He;if(!n||n.length===0)return;const de=n[0].id;console.log("Loading layout and settings for thread:",de);try{Ie(!0);const ge=await _i.loadThreadLayout(de);if(console.log("Loaded data:",ge),!ge||!ge.nodes){console.log("No saved layout found");return}ge.settings&&(y(ge.settings.areNodesFixed),v(ge.settings.forceStrength),A(ge.settings.linkDistance),O(ge.settings.collisionRadius),P(ge.settings.centerForce),L(ge.settings.animationSpeed),ne(ge.settings.damping),pe(ge.settings.linkOpacity),Ae(ge.settings.linkWidth),H(ge.settings.nodeSize),X(ge.settings.isMatteMode),ve(new Set(ge.settings.fixedNodes||[])));const te=Ft(o.current).select("g").datum(),ye=Ft(o.current).selectAll(".node");if(!ye.size()){console.log("No nodes found in the DOM yet, positions will be applied in useEffect");return}const ee=new Set(((He=ge.settings)==null?void 0:He.fixedNodes)||[]);ye.each(function(Le){if(!Le||!Le.id){console.log("Invalid node data:",Le);return}const et=ge.nodes[Le.id];et&&(console.log("Applying saved position for node:",Le.id,et),Le.x=et.x,Le.y=et.y,et.fixed?(Le.fx=et.x,Le.fy=et.y,ee.add(Le.id)):(Le.fx=null,Le.fy=null))}),console.log("Fixed nodes after loading:",Array.from(ee)),ve(ee),te&&te.alpha(.3).restart()}catch(ge){console.error("Failed to load layout:",ge)}finally{Ie(!1)}},ki=async()=>{if(!n||n.length===0)return;const de=n[0].id;try{Ie(!0),await _i.deleteThreadLayout(de),y(!1),v(-100),A(80),O(1.5),P(.1),L(.1),ne(.6),pe(.6),Ae(2),H(1),X(!1),ve(new Set),Ft(o.current).selectAll(".node").each(function(He){He.fx=null,He.fy=null})}catch(He){console.error("Failed to reset layout:",He)}finally{Ie(!1)}};he.useEffect(()=>{n&&n.length>0&&xi()},[n]);const ts=(de,He)=>{if(!de)return"No content available";try{let ge=de.content||de;if(typeof ge=="string"&&(ge.startsWith("{")||ge.startsWith("[")))try{ge=JSON.parse(ge)}catch(ye){console.log("Failed to parse JSON content:",ye)}if(["ROOT","EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(He)){const ye=typeof ge=="object"?ge:typeof ge=="string"&&ge.startsWith("{")?JSON.parse(ge):null;if(ye)switch(He){case"ROOT":return I.jsxs("div",{className:"root-content",children:[I.jsx("h4",{className:"root-title",children:ye.title}),I.jsx("p",{className:"root-description",children:ye.description}),ye.keywords&&I.jsxs("div",{className:"root-keywords",children:[I.jsx("strong",{children:"Keywords: "}),ye.keywords.join(", ")]})]});case"EVIDENCE":return I.jsxs("div",{className:"evidence-content",children:[I.jsx("p",{className:"evidence-point",children:ye.point}),I.jsx("p",{className:"evidence-source",children:I.jsxs("em",{children:["Source: ",ye.source]})})]});case"EXAMPLE":return I.jsxs("div",{className:"example-content",children:[I.jsx("h4",{className:"example-title",children:ye.title}),I.jsx("p",{className:"example-description",children:ye.description})]});case"COUNTERPOINT":return I.jsxs("div",{className:"counterpoint-content",children:[I.jsx("h4",{className:"counterpoint-argument",children:ye.argument}),I.jsx("p",{className:"counterpoint-explanation",children:ye.explanation})]})}}return["SYNTHESIS","CONTEXT"].includes(He)?(typeof ge=="object"?JSON.stringify(ge,null,2):ge).split(`
`).map((ee,Le)=>I.jsx("p",{className:"content-paragraph",children:ee},Le)):(typeof ge=="object"?JSON.stringify(ge,null,2):ge).split(`
`).map((ye,ee)=>I.jsx("p",{className:"content-paragraph",children:ye},ee))}catch(ge){return console.error("Error formatting content:",ge),"Error displaying content"}};return I.jsxs("div",{className:`thread-graph ${V?"matte":""}`,children:[I.jsxs("div",{className:`graph-container ${c?"with-sidebar":""} ${q?"dotted-background":""}`,children:[I.jsx("svg",{ref:o,className:`thread-graph ${V?"matte":""}`}),h&&I.jsx("div",{className:"loading-overlay",children:I.jsx("div",{className:"loading-spinner"})}),I.jsxs("div",{className:"bottom-right-controls",children:[I.jsx("button",{className:`control-button ${V?"active":""}`,onClick:()=>X(!V),title:V?"Switch to Glossy mode":"Switch to Matte mode",children:"M"}),I.jsx("button",{className:`control-button ${q?"active":""}`,onClick:()=>R(!q),title:q?"Switch to solid background":"Switch to dotted background",children:"D"}),I.jsx("button",{className:`control-button ${Re?"active":""}`,onClick:()=>Qe(!Re),title:Re?"Exit free move (re-enable forces)":"Free move (disable forces)",children:"F"}),I.jsx("button",{className:"control-button",onClick:()=>{const de=Ft(o.current),He=de.selectAll(".node"),ge=de.node().getBoundingClientRect().width,te=de.node().getBoundingClientRect().height;He.each(function(ee){if(ee.fx=null,ee.fy=null,ee.type==="thread")ee.x=ge/2,ee.y=te/2;else{const Le=Math.random()*2*Math.PI,et=100+Math.random()*100;ee.x=ge/2+et*Math.cos(Le),ee.y=te/2+et*Math.sin(Le)}});const ye=j9(He.data()).force("link",U9(de.selectAll("line").data()).id(ee=>ee.id).distance(ee=>ee.source.type==="thread"?k*2:k)).force("charge",V9().strength(ee=>ee.type==="thread"?w*5:w)).force("collision",F9().radius(ee=>ee.type==="thread"?ee.radius*4:ee.radius*U*C)).force("center",B9(ge/2,te/2).strength(N)).alphaDecay(B).velocityDecay(G);ye.alpha(1).restart(),ye.on("tick",()=>{de.selectAll("line").attr("x1",ee=>ee.source.x).attr("y1",ee=>ee.source.y).attr("x2",ee=>ee.target.x).attr("y2",ee=>ee.target.y),He.attr("transform",ee=>`translate(${ee.x},${ee.y})`)})},title:"Reset node positions",children:"R"})]}),I.jsx("div",{className:"toolbar-container",ref:l,children:I.jsx("div",{className:"graph-toolbar collapsed",children:I.jsxs("div",{className:"toolbar-content",children:[I.jsxs("div",{className:"toolbar-section",children:[I.jsxs("div",{className:"preset-buttons",children:[I.jsx("button",{className:"toolbar-button",onClick:()=>kt("default"),children:"Default"}),I.jsx("button",{className:"toolbar-button",onClick:()=>kt("compact"),children:"Compact"}),I.jsx("button",{className:"toolbar-button",onClick:()=>kt("spread"),children:"Spread"})]}),I.jsxs("div",{className:"layout-buttons",children:[I.jsxs("button",{className:`toolbar-button ${me?"loading":""}`,onClick:ha,disabled:me,title:"Save current layout",children:[me?"":""," Save Layout"]}),I.jsxs("button",{className:`toolbar-button ${me?"loading":""}`,onClick:xi,disabled:me,title:"Load saved layout",children:[me?"":""," Load Layout"]}),I.jsxs("button",{className:`toolbar-button ${me?"loading":""}`,onClick:ki,disabled:me,title:"Reset to default layout",children:[me?"":""," Reset Layout"]})]}),I.jsx("button",{className:`toolbar-button ${V?"active":""}`,onClick:()=>X(!V),children:V?" Glossy":" Matte"})]}),I.jsxs("div",{className:"toolbar-section",children:[I.jsxs("label",{className:"toolbar-label",children:["Repulsion Force",I.jsx("input",{type:"range",min:"-200",max:"-20",value:w,onChange:de=>v(Number(de.target.value)),className:"toolbar-slider"})]}),I.jsxs("label",{className:"toolbar-label",children:["Link Distance",I.jsx("input",{type:"range",min:"30",max:"200",value:k,onChange:de=>A(Number(de.target.value)),className:"toolbar-slider"})]}),I.jsxs("label",{className:"toolbar-label",children:["Node Spacing",I.jsx("input",{type:"range",min:"1",max:"3",step:"0.1",value:C,onChange:de=>O(Number(de.target.value)),className:"toolbar-slider"})]}),I.jsxs("label",{className:"toolbar-label",children:["Center Force",I.jsx("input",{type:"range",min:"0",max:"0.3",step:"0.01",value:N,onChange:de=>P(Number(de.target.value)),className:"toolbar-slider"})]})]}),I.jsxs("div",{className:"toolbar-section",children:[I.jsxs("label",{className:"toolbar-label",children:["Animation Speed",I.jsx("input",{type:"range",min:"0.01",max:"0.2",step:"0.01",value:B,onChange:de=>L(Number(de.target.value)),className:"toolbar-slider"})]}),I.jsxs("label",{className:"toolbar-label",children:["Damping",I.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.1",value:G,onChange:de=>ne(Number(de.target.value)),className:"toolbar-slider"})]})]}),I.jsxs("div",{className:"toolbar-section",children:[I.jsxs("label",{className:"toolbar-label",children:["Link Opacity",I.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:ie,onChange:de=>pe(Number(de.target.value)),className:"toolbar-slider"})]}),I.jsxs("label",{className:"toolbar-label",children:["Link Width",I.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:Oe,onChange:de=>Ae(Number(de.target.value)),className:"toolbar-slider"})]}),I.jsxs("label",{className:"toolbar-label",children:["Node Size",I.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:U,onChange:de=>H(Number(de.target.value)),className:"toolbar-slider"})]})]})]})})})]}),I.jsx("div",{className:`content-sidebar ${c?"open":""}`,children:c&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"content-sidebar-header",children:[c.type!=="thread"&&I.jsx("button",{className:"back-button",onClick:()=>{var He;if(c.parentId){const ge=n[0].nodes.find(te=>te.id===c.parentId);if(ge){Mt(ge);return}}const de=n[0];Mt({...de,type:"thread",metadata:{...de.metadata,title:((He=de.metadata)==null?void 0:He.title)||de.title||`Thread ${de.id}`}})},"aria-label":"Back to parent",children:""}),I.jsx("h2",{children:c.type==="thread"?((Qr=(Ai=c.originalData)==null?void 0:Ai.metadata)==null?void 0:Qr.title)||((Er=c.originalData)==null?void 0:Er.title)||c.title||`Thread ${c.id}`:((pa=c.metadata)==null?void 0:pa.title)||c.title||`Node ${c.id}`}),I.jsxs("div",{className:"header-actions",children:[I.jsx("button",{className:"read-article-btn",onClick:()=>i&&i(),children:"Read Article"}),I.jsx("button",{className:"add-node-button",onClick:()=>r&&r(c),children:"Add Node"}),I.jsx("button",{className:"content-sidebar-close",onClick:es,children:""})]})]}),I.jsxs("div",{className:"content-sidebar-body",children:[I.jsxs("div",{className:"child-nodes-list",children:[I.jsx("h3",{children:"Connected Nodes"}),un(`${c.type==="thread"?"thread-":"node-"}${c.id}`).length>0?I.jsx("div",{className:"nodes-grid",children:un(`${c.type==="thread"?"thread-":"node-"}${c.id}`).map(de=>{var He,ge,te;return I.jsxs("div",{className:"node-card",onClick:()=>Ar(de),children:[I.jsx("div",{className:"node-card-type",style:{backgroundColor:Mc[(He=gs[de.type])==null?void 0:He.label]},children:(ge=gs[de.type])==null?void 0:ge.label}),I.jsx("div",{className:"node-card-title",children:((te=de.metadata)==null?void 0:te.title)||`Node ${de.id}`})]},de.id)})}):I.jsx("p",{className:"no-nodes-message",children:"No nodes connected yet"})]}),I.jsxs("div",{className:"content-sidebar-metadata",children:[I.jsx("div",{className:"type-badge",style:{backgroundColor:zl(c.type)},children:c.type==="thread"?"THREAD":(ns=gs[c.type])==null?void 0:ns.label}),c.type==="thread"?((rs=c.metadata)==null?void 0:rs.description)&&I.jsx("p",{}):((Ys=c.metadata)==null?void 0:Ys.description)&&I.jsx("p",{}),I.jsxs("div",{className:"voting-stats",children:[I.jsxs("div",{className:"stat",children:[I.jsx("label",{children:"Votes For:"}),I.jsx("span",{children:c.votesFor||"0"})]}),I.jsxs("div",{className:"stat",children:[I.jsx("label",{children:"Votes Against:"}),I.jsx("span",{children:c.votesAgainst||"0"})]}),c.proposalDeadline>0&&I.jsxs("div",{className:"stat",children:[I.jsx("label",{children:"Proposal Deadline:"}),I.jsx("span",{children:new Date(c.proposalDeadline*1e3).toLocaleString()})]}),c.hasActiveProposal&&I.jsx("div",{className:"proposal-badge",children:"Active Proposal"})]})]}),I.jsx("div",{className:"content-sidebar-content",children:ts(c.content,c.type==="thread"?"thread":(Ei=gs[c.type])==null?void 0:Ei.label)}),I.jsx("div",{className:"content-sidebar-actions"})]})]})})]})},FD=({node:n,onClose:e,onVote:t,onCreateProposal:r,onAddNode:i,loading:s,voteAmount:o,setVoteAmount:l})=>{he.useState(!1);const c=(h,p)=>{try{return p==="EVIDENCE"&&h.startsWith("{")&&JSON.parse(h).source||h}catch{return h}},u=(h,p)=>{if(!h)return console.log("No content provided for node type:",p),"No content available";console.log("Formatting content for node type:",p),console.log("Raw content:",h),console.log("Content type:",typeof h);let g=h.content||h;if(typeof g=="string"&&(g.startsWith("{")||g.startsWith("[")))try{g=JSON.parse(g)}catch(y){console.log("Failed to parse JSON content:",y)}try{if(["EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(p)){const w=typeof g=="object"?g:typeof g=="string"&&g.startsWith("{")?JSON.parse(g):null;if(w)switch(p){case"EVIDENCE":return I.jsx("div",{className:"json-content",children:I.jsxs("div",{className:"evidence-content",children:[I.jsx("p",{className:"evidence-point",children:w.point}),I.jsx("p",{className:"evidence-source",children:I.jsxs("em",{children:["Source: ",w.source]})})]})});case"EXAMPLE":return I.jsx("div",{className:"json-content",children:I.jsxs("div",{className:"example-content",children:[I.jsx("h4",{className:"example-title",children:w.title}),I.jsx("p",{className:"example-description",children:w.description})]})});case"COUNTERPOINT":return I.jsx("div",{className:"json-content",children:I.jsxs("div",{className:"counterpoint-content",children:[I.jsx("h4",{className:"counterpoint-argument",children:w.argument}),I.jsx("p",{className:"counterpoint-explanation",children:w.explanation})]})})}}if(["SYNTHESIS","CONTEXT"].includes(p)){const w=typeof g=="object"?JSON.stringify(g,null,2):g;return I.jsx("div",{className:"text-content",children:w.split(`
`).map((v,k)=>I.jsx("p",{className:"content-paragraph",children:v},k))})}const y=typeof g=="object"?JSON.stringify(g,null,2):g;return I.jsx("div",{className:"text-content",children:y})}catch(y){console.error("Error formatting content:",y);const w=typeof g=="object"?JSON.stringify(g,null,2):g;return I.jsx("div",{className:"text-content",children:w.split(`
`).map((v,k)=>I.jsx("p",{className:"content-paragraph",children:v},k))})}};return I.jsx("div",{className:"modal-overlay",onClick:e,children:I.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[I.jsxs("div",{className:"modal-header",children:[I.jsxs("div",{className:"modal-title",children:[I.jsx("h3",{children:c(n.title,n.node_type)}),I.jsx("div",{className:"node-type-badge",children:n.node_type})]}),I.jsx("button",{className:"close-button",onClick:e,children:""})]}),I.jsx("div",{className:"modal-body",children:I.jsx("div",{className:"node-content",children:u(n.content,n.node_type)})})]})})},zD=n=>{if(!n)return I.jsx("p",{className:"ar-empty",children:"No content available."});let e=n;if(typeof e=="object"&&(e=e.content||e.text||JSON.stringify(e,null,2)),typeof e!="string")return I.jsx("p",{className:"ar-empty",children:"No content available."});if(e.trim().startsWith("<"))return I.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:e}});const t=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/,r=/https?:\/\/[^\s<>"]+/g;return e.split(/\n{2,}/).flatMap(s=>s.includes(`
`)?s.split(`
`):[s]).filter(s=>s.trim()!=="").map((s,o)=>{const l=s.trim().match(t);if(l)return I.jsx("div",{className:"ar-youtube",children:I.jsx("iframe",{src:`https://www.youtube.com/embed/${l[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`video-${o}`})},o);const c=[];let u=0,h;for(r.lastIndex=0;(h=r.exec(s))!==null;)h.index>u&&c.push(s.slice(u,h.index)),c.push(I.jsx("a",{href:h[0],target:"_blank",rel:"noopener noreferrer",children:h[0]},h.index)),u=h.index+h[0].length;return u<s.length&&c.push(s.slice(u)),I.jsx("p",{children:c.length?c:s},o)})},UD=({thread:n,onBack:e})=>{var i,s;if(!n)return null;const t=((i=n.metadata)==null?void 0:i.title)||n.title||`Thread ${n.id}`,r=((s=n.metadata)==null?void 0:s.description)||n.description||"";return I.jsxs("div",{className:"ar-page",children:[I.jsxs("header",{className:"ar-header",children:[I.jsx("button",{className:"ar-back",onClick:e,children:" Back to graph"}),I.jsx("span",{className:"ar-brand",children:"canonthread"})]}),I.jsx("main",{className:"ar-body",children:I.jsxs("article",{className:"ar-article",children:[I.jsx("h1",{className:"ar-title",children:t}),r&&I.jsx("p",{className:"ar-description",children:r}),I.jsx("hr",{className:"ar-divider"}),I.jsx("div",{className:"ar-content",children:zD(n.content)})]})})]})};var HD=Mx();const jD=Tx(HD);var sm={exports:{}},om={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G9;function VD(){if(G9)return om;G9=1;var n=Vu();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function l(p,g){var y=g(),w=r({inst:{value:y,getSnapshot:g}}),v=w[0].inst,k=w[1];return s(function(){v.value=y,v.getSnapshot=g,c(v)&&k({inst:v})},[p,y,g]),i(function(){return c(v)&&k({inst:v}),p(function(){c(v)&&k({inst:v})})},[p]),o(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!t(p,y)}catch{return!0}}function u(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return om.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,om}var W9;function q4(){return W9||(W9=1,sm.exports=VD()),sm.exports}var Y4=q4();function mn(n){this.content=n}mn.prototype={constructor:mn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new mn(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new mn(t)},addToStart:function(n,e){return new mn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new mn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new mn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=mn.from(n),n.size?new mn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=mn.from(n),n.size?new mn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=mn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};mn.from=function(n){if(n instanceof mn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new mn(e)};function X4(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=X4(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Z4(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),l=e.child(--s),c=o.nodeSize;if(o==l){t-=c,r-=c;continue}if(!o.sameMarkup(l))return{a:t,b:r};if(o.isText&&o.text!=l.text){let u=0,h=Math.min(o.text.length,l.text.length);for(;u<h&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(o.content.size||l.content.size){let u=Z4(o.content,l.content,t-1,r-1);if(u)return u}t-=c,r-=c}}class ae{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,l=0;l<t;o++){let c=this.content[o],u=l+c.nodeSize;if(u>e&&r(c,i+l,s||null,o)!==!1&&c.content.size){let h=l+1;c.nodesBetween(Math.max(0,e-h),Math.min(c.content.size,t-h),r,i+h)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(l,c)=>{let u=l.isText?l.text.slice(Math.max(e,c)-c,t-c):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ae(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let l=this.content[s],c=o+l.nodeSize;c>e&&((o<e||c>t)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,t-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,t-o-1))),r.push(l),i+=l.nodeSize),o=c}return new ae(r,i)}cutByIndex(e,t){return e==t?ae.empty:e==0&&t==this.content.length?this:new ae(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ae(i,s)}addToStart(e){return new ae([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ae(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return X4(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Z4(this,e,t,r)}findIndex(e){if(e==0)return Sh(0,e);if(e==this.size)return Sh(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let i=this.child(t),s=r+i.nodeSize;if(s>=e)return s==e?Sh(t+1,s):Sh(t,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ae.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ae(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ae.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ae(t||e,r)}static from(e){if(!e)return ae.empty;if(e instanceof ae)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ae([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ae.empty=new ae([],0);const am={index:0,offset:0};function Sh(n,e){return am.index=n,am.offset=e,am}function xp(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!xp(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!xp(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let pt=class Ng{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&xp(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ng.none;if(e instanceof Ng)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};pt.none=[];class kp extends Error{}class we{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=tk(this.content,e+this.openStart,t);return r&&new we(r,this.openStart,this.openEnd)}removeBetween(e,t){return new we(ek(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return we.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new we(ae.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new we(e,r,i)}}we.empty=new we(ae.empty,0,0);function ek(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:l}=n.findIndex(t);if(i==e||s.isText){if(l!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(ek(s.content,e-i-1,t-i-1)))}function tk(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let l=tk(o.content,e-s-1,t,o);return l&&n.replaceChild(i,o.copy(l))}function $D(n,e,t){if(t.openStart>n.depth)throw new kp("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new kp("Inconsistent open depths");return nk(n,e,t,0)}function nk(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=nk(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,l=o.content;return bl(o,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=GD(t,n);return bl(s,ik(n,o,l,e,r))}else return bl(s,Ap(n,e,r))}function rk(n,e){if(!e.type.compatibleContent(n.type))throw new kp("Cannot join "+e.type.name+" onto "+n.type.name)}function Tg(n,e,t){let r=n.node(t);return rk(r,e.node(t)),r}function yl(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Qc(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(yl(n.nodeAfter,r),s++));for(let l=s;l<o;l++)yl(i.child(l),r);e&&e.depth==t&&e.textOffset&&yl(e.nodeBefore,r)}function bl(n,e){return n.type.checkContent(e),n.copy(e)}function ik(n,e,t,r,i){let s=n.depth>i&&Tg(n,e,i+1),o=r.depth>i&&Tg(t,r,i+1),l=[];return Qc(null,n,i,l),s&&o&&e.index(i)==t.index(i)?(rk(s,o),yl(bl(s,ik(n,e,t,r,i+1)),l)):(s&&yl(bl(s,Ap(n,e,i+1)),l),Qc(e,t,i,l),o&&yl(bl(o,Ap(t,r,i+1)),l)),Qc(r,null,i,l),new ae(l)}function Ap(n,e,t){let r=[];if(Qc(null,n,t,r),n.depth>t){let i=Tg(n,e,t+1);yl(bl(i,Ap(n,e,t+1)),r)}return Qc(e,null,t,r),new ae(r)}function GD(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(ae.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class vu{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return pt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Ep(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:l,offset:c}=o.content.findIndex(s),u=s-c;if(r.push(o,l,i+c),!u||(o=o.child(l),o.isText))break;s=u-1,i+=c+1}return new vu(t,r,s)}static resolveCached(e,t){let r=Q9.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==t)return o}else Q9.set(e,r=new WD);let i=r.elts[r.i]=vu.resolve(e,t);return r.i=(r.i+1)%QD,i}}class WD{constructor(){this.elts=[],this.i=0}}const QD=12,Q9=new WeakMap;class Ep{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const KD=Object.create(null);class gi{constructor(e,t,r,i=pt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||ae.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&xp(this.attrs,t||e.defaultAttrs||KD)&&pt.sameSet(this.marks,r||pt.none)}copy(e=null){return e==this.content?this:new gi(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new gi(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return we.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),l=i.start(o),u=i.node(o).content.cut(i.pos-l,s.pos-l);return new we(u,i.depth-o,s.depth-o)}replace(e,t,r){return $D(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return vu.resolveCached(this,e)}resolveNoCache(e){return vu.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),sk(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ae.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=pt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!pt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=ae.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}gi.prototype.text=void 0;class Sp extends gi{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):sk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Sp(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Sp(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function sk(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ml{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new JD(e,t);if(r.next==null)return Ml.empty;let i=ok(r);r.next&&r.err("Unexpected trailing text");let s=nL(tL(i));return rL(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,l){let c=o.matchFragment(e,r);if(c&&(!t||c.validEnd))return ae.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:h,next:p}=o.next[u];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let g=s(p,l.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:c}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||c.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Ml.empty=new Ml(!0);class JD{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function ok(n){let e=[];do e.push(qD(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function qD(n){let e=[];do e.push(YD(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function YD(n){let e=eL(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=XD(n,e);else break;return e}function K9(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function XD(n,e){let t=K9(n),r=t;return n.eat(",")&&(n.next!="}"?r=K9(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function ZD(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function eL(n){if(n.eat("(")){let e=ok(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=ZD(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function tL(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,l,c){let u={term:c,to:l};return e[o].push(u),u}function i(o,l){o.forEach(c=>c.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((c,u)=>c.concat(s(u,l)),[]);if(o.type=="seq")for(let c=0;;c++){let u=s(o.exprs[c],l);if(c==o.exprs.length-1)return u;i(u,l=t())}else if(o.type=="star"){let c=t();return r(l,c),i(s(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=t();return i(s(o.expr,l),c),i(s(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let c=l;for(let u=0;u<o.min;u++){let h=t();i(s(o.expr,c),h),c=h}if(o.max==-1)i(s(o.expr,c),c);else for(let u=o.min;u<o.max;u++){let h=t();r(c,h),i(s(o.expr,c),h),c=h}return[r(c)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function ak(n,e){return e-n}function J9(n,e){let t=[];return r(e),t.sort(ak);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:l,to:c}=s[o];!l&&t.indexOf(c)==-1&&r(c)}}}function nL(n){let e=Object.create(null);return t(J9(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:l,to:c})=>{if(!l)return;let u;for(let h=0;h<i.length;h++)i[h][0]==l&&(u=i[h][1]);J9(n,c).forEach(h=>{u||i.push([l,u=[]]),u.indexOf(h)==-1&&u.push(h)})})});let s=e[r.join(",")]=new Ml(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(ak);s.next.push({type:i[o][0],next:e[l.join(",")]||t(l)})}return s}}function rL(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:c,next:u}=i.next[l];o.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function lk(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function fk(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function ck(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function uk(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new sL(n,r,e[r]);return t}let q9=class dk{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=uk(e,r.attrs),this.defaultAttrs=lk(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ml.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:fk(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gi(this,this.computeAttrs(e),ae.from(t),pt.setFrom(r))}createChecked(e=null,t,r){return t=ae.from(t),this.checkContent(t),new gi(this,this.computeAttrs(e),t,pt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ae.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(ae.empty,!0);return s?new gi(this,e,t.append(s),pt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ck(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:pt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new dk(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function iL(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class sL{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?iL(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class B1{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=uk(e,i.attrs),this.excluded=null;let s=lk(this.attrs);this.instance=s?new pt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new pt(this,fk(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new B1(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){ck(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class hk{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=mn.from(e.nodes),t.marks=mn.from(e.marks||{}),this.nodes=q9.compile(this.spec.nodes,this),this.marks=B1.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Ml.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Y9(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Y9(this,o.split(" "))}this.nodeFromJSON=i=>gi.fromJSON(this,i),this.markFromJSON=i=>pt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof q9){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Sp(r,r.defaultAttrs,e,pt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Y9(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let l in n.marks){let c=n.marks[l];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function oL(n){return n.tag!=null}function aL(n){return n.style!=null}class ta{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(oL(i))this.tags.push(i);else if(aL(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new Z9(this,t,!1);return r.addAll(e,pt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Z9(this,t,!0);return r.addAll(e,pt.none,t.from,t.to),we.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(cL(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(o.getAttrs){let c=o.getAttrs(t);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let l=t[o];if((l.priority==null?50:l.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=ev(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=ev(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ta(e,ta.schemaRules(e)))}}const pk={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},lL={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},mk={ol:!0,ul:!0},xu=1,Mg=2,Kc=4;function X9(n,e,t){return e!=null?(e?xu:0)|(e==="full"?Mg:0):n&&n.whitespace=="pre"?xu|Mg:t&~Kc}class Ch{constructor(e,t,r,i,s,o){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=pt.none,this.match=s||(o&Kc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ae.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&xu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=ae.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ae.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!pk.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Z9{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,o=X9(null,t.preserveWhitespace,0)|(r?Kc:0);i?s=new Ch(i.type,i.attrs,pt.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new Ch(null,null,pt.none,!0,null,o):s=new Ch(e.schema.topNodeType,null,pt.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&Mg?"full":this.localPreserveWS||(i.options&xu)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let c=0;c<l.length;c++)c&&this.insertNode(o.linebreakReplacement.create(),t,!0),l[c]&&this.insertNode(o.text(l[c]),t,!/\S/.test(l[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],c=e.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;mk.hasOwnProperty(o)&&this.parser.normalizeLists&&fL(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(c?c.ignore:lL.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,h=this.needsBlock;if(pk.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let p=c&&c.skip?t:this.readStyles(e,t);p&&this.addAll(e,p),u&&this.sync(s),this.needsBlock=h}else{let u=this.readStyles(e,t);u&&this.addElementByRule(e,c,u,c.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(s,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(u=>!c.clearMark(u)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return t}addElementByRule(e,t,r,i){let s,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(o,t.attrs||null,r,t.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[t.mark];r=r.concat(c.create(t.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(l)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],u=c.findWrapping(e);if(u&&(!i||i.length>u.length+l)&&(i=u,s=c,!u.length))break;if(c.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)t=this.enterInner(i[o],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=pt.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):tv(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=X9(e,s,o.options);o.options&Kc&&o.content.length==0&&(l|=Kc);let c=pt.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):tv(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new Ch(e,t,c,i,null,l)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=xu)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,c)=>{for(;l>=0;l--){let u=t[l];if(u==""){if(l==t.length-1||l==0)continue;for(;c>=s;c--)if(o(l-1,c))return!0;return!1}else{let h=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!h||h.name!=u&&!h.isInGroup(u))return!1;c--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function fL(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&mk.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function cL(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function ev(n){let e={};for(let t in n)e[t]=n[t];return e}function tv(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:h}=l.edge(c);if(u==e||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class Bl{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=lm(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,c=0;for(;l<s.length&&c<o.marks.length;){let u=o.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)i=s.pop()[1];for(;c<o.marks.length;){let u=o.marks[c++],h=this.serializeMark(u,o.isInline,t);h&&(s.push([u,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Yh(lm(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Yh(lm(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Yh(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Bl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=nv(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return nv(e.marks)}}function nv(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function lm(n){return n.document||window.document}const rv=new WeakMap;function uL(n){let e=rv.get(n);return e===void 0&&rv.set(n,e=dL(n)),e}function dL(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Yh(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=uL(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(t=i.slice(0,o),i=i.slice(o+1));let l,c=t?n.createElementNS(t,i):n.createElement(i),u=e[1],h=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){h=2;for(let p in u)if(u[p]!=null){let g=p.indexOf(" ");g>0?c.setAttributeNS(p.slice(0,g),p.slice(g+1),u[p]):p=="style"&&c.style?c.style.cssText=u[p]:c.setAttribute(p,u[p])}}for(let p=h;p<e.length;p++){let g=e[p];if(g===0){if(p<e.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:y,contentDOM:w}=Yh(n,g,t,r);if(c.appendChild(y),w){if(l)throw new RangeError("Multiple content holes");l=w}}}return{dom:c,contentDOM:l}}const gk=65535,yk=Math.pow(2,16);function hL(n,e){return n+e*yk}function iv(n){return n&gk}function pL(n){return(n-(n&gk))/yk}const bk=1,wk=2,Xh=4,vk=8;class Og{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&vk)>0}get deletedBefore(){return(this.delInfo&(bk|Xh))>0}get deletedAfter(){return(this.delInfo&(wk|Xh))>0}get deletedAcross(){return(this.delInfo&Xh)>0}}class xr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&xr.empty)return xr.empty}recover(e){let t=0,r=iv(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+pL(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let u=this.ranges[l+s],h=this.ranges[l+o],p=c+u;if(e<=p){let g=u?e==c?-1:e==p?1:t:t,y=c+i+(g<0?0:h);if(r)return y;let w=e==(t<0?c:p)?null:hL(l/3,e-c),v=e==c?wk:e==p?bk:Xh;return(t<0?e!=c:e!=p)&&(v|=vk),new Og(y,v,w)}i+=h-u}return r?e+i:new Og(e+i,0,null)}touches(e,t){let r=0,i=iv(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[l+s],h=c+u;if(e<=h&&l==i*3)return!0;r+=this.ranges[l+o]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),c=o+(this.inverted?0:s),u=this.ranges[i+t],h=this.ranges[i+r];e(l,l+u,c,c+h),s+=h-u}}invert(){return new xr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?xr.empty:new xr(e<0?[0,-e,0]:[0,0,e])}}xr.empty=new xr([]);class ku{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new ku(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new ku;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,t);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Og(e,i,null)}}const fm=Object.create(null);class Pn{getMap(){return xr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=fm[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in fm)throw new RangeError("Duplicate use of step JSON ID "+e);return fm[e]=t,t.prototype.jsonID=e,t}}class Kt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Kt(e,null)}static fail(e){return new Kt(null,e)}static fromReplace(e,t,r,i){try{return Kt.ok(e.replace(t,r,i))}catch(s){if(s instanceof kp)return Kt.fail(s.message);throw s}}}function Dy(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(Dy(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return ae.fromArray(r)}class Yo extends Pn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new we(Dy(t.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return Kt.fromReplace(e,this.from,this.to,s)}invert(){return new mi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Yo(t.pos,r.pos,this.mark)}merge(e){return e instanceof Yo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yo(t.from,t.to,e.markFromJSON(t.mark))}}Pn.jsonID("addMark",Yo);class mi extends Pn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new we(Dy(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Kt.fromReplace(e,this.from,this.to,r)}invert(){return new Yo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new mi(t.pos,r.pos,this.mark)}merge(e){return e instanceof mi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new mi(t.from,t.to,e.markFromJSON(t.mark))}}Pn.jsonID("removeMark",mi);class Xo extends Pn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Kt.fromReplace(e,this.pos,this.pos+1,new we(ae.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Xo(this.pos,t.marks[i]);return new Xo(this.pos,this.mark)}}return new Ol(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Xo(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xo(t.pos,e.markFromJSON(t.mark))}}Pn.jsonID("addNodeMark",Xo);class Ol extends Pn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Kt.fromReplace(e,this.pos,this.pos+1,new we(ae.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Xo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ol(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ol(t.pos,e.markFromJSON(t.mark))}}Pn.jsonID("removeNodeMark",Ol);class an extends Pn{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Ig(e,this.from,this.to)?Kt.fail("Structure replace would overwrite content"):Kt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new xr([this.from,this.to-this.from,this.slice.size])}invert(e){return new an(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new an(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof an)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?we.empty:new we(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new an(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?we.empty:new we(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new an(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new an(t.from,t.to,we.fromJSON(e,t.slice),!!t.structure)}}Pn.jsonID("replace",an);class fn extends Pn{constructor(e,t,r,i,s,o,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(Ig(e,this.from,this.gapFrom)||Ig(e,this.gapTo,this.to)))return Kt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Kt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Kt.fromReplace(e,this.from,this.to,r):Kt.fail("Content does not fit in gap")}getMap(){return new xr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new fn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new fn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fn(t.from,t.to,t.gapFrom,t.gapTo,we.fromJSON(e,t.slice),t.insert,!!t.structure)}}Pn.jsonID("replaceAround",fn);function Ig(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function mL(n,e,t,r){let i=[],s=[],o,l;n.doc.nodesBetween(e,t,(c,u,h)=>{if(!c.isInline)return;let p=c.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let g=Math.max(u,e),y=Math.min(u+c.nodeSize,t),w=r.addToSet(p);for(let v=0;v<p.length;v++)p[v].isInSet(w)||(o&&o.to==g&&o.mark.eq(p[v])?o.to=y:i.push(o=new mi(g,y,p[v])));l&&l.to==g?l.to=y:s.push(l=new Yo(g,y,r))}}),i.forEach(c=>n.step(c)),s.forEach(c=>n.step(c))}function gL(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,l)=>{if(!o.isInline)return;s++;let c=null;if(r instanceof B1){let u=o.marks,h;for(;h=r.isInSet(u);)(c||(c=[])).push(h),u=h.removeFromSet(u)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let u=Math.min(l+o.nodeSize,t);for(let h=0;h<c.length;h++){let p=c[h],g;for(let y=0;y<i.length;y++){let w=i[y];w.step==s-1&&p.eq(i[y].style)&&(g=w)}g?(g.to=u,g.step=s):i.push({style:p,from:Math.max(l,e),to:u,step:s})}}}),i.forEach(o=>n.step(new mi(o.from,o.to,o.style)))}function Ly(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),o=[],l=e+1;for(let c=0;c<s.childCount;c++){let u=s.child(c),h=l+u.nodeSize,p=r.matchType(u.type);if(!p)o.push(new an(l,h,we.empty));else{r=p;for(let g=0;g<u.marks.length;g++)t.allowsMarkType(u.marks[g].type)||n.step(new mi(l,h,u.marks[g]));if(i&&u.isText&&t.whitespace!="pre"){let g,y=/\r?\n|\r/g,w;for(;g=y.exec(u.text);)w||(w=new we(ae.from(t.schema.text(" ",t.allowedMarks(u.marks))),0,0)),o.push(new an(l+g.index,l+g.index+g[0].length,w))}}l=h}if(!r.validEnd){let c=r.fillBefore(ae.empty,!0);n.replace(l,l,new we(c,0,0))}for(let c=o.length-1;c>=0;c--)n.step(o[c])}function yL(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Hf(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,i=0,s=0;;--r){let o=n.$from.node(r),l=n.$from.index(r)+i,c=n.$to.indexAfter(r)-s;if(r<n.depth&&o.canReplace(l,c,t))return r;if(r==0||o.type.spec.isolating||!yL(o,l,c))break;l&&(i=1),c<o.childCount&&(s=1)}return null}function bL(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),c=o,u=l,h=ae.empty,p=0;for(let w=s,v=!1;w>t;w--)v||r.index(w)>0?(v=!0,h=ae.from(r.node(w).copy(h)),p++):c--;let g=ae.empty,y=0;for(let w=s,v=!1;w>t;w--)v||i.after(w+1)<i.end(w)?(v=!0,g=ae.from(i.node(w).copy(g)),y++):u++;n.step(new fn(c,u,o,l,new we(h.append(g),p,y),h.size-p,!0))}function By(n,e,t=null,r=n){let i=wL(n,e),s=i&&vL(r,e);return s?i.map(sv).concat({type:e,attrs:t}).concat(s.map(sv)):null}function sv(n){return{type:n,attrs:null}}function wL(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function vL(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;c&&u<i;u++)c=c.matchType(t.child(u).type);return!c||!c.validEnd?null:o}function xL(n,e,t){let r=ae.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let l=t[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ae.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new fn(i,s,i,s,new we(r,0,0),t.length,!0))}function kL(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,l)=>{let c=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,c)&&AL(n.doc,n.mapping.slice(s).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!w?u=!1:!y&&w&&(u=!0)}u===!1&&kk(n,o,l,s),Ly(n,n.mapping.slice(s).map(l,1),r,void 0,u===null);let h=n.mapping.slice(s),p=h.map(l,1),g=h.map(l+o.nodeSize,1);return n.step(new fn(p,g,p+1,g-1,new we(ae.from(r.create(c,null,o.marks)),0,0),1,!0)),u===!0&&xk(n,o,l,s),!1}})}function xk(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let c=n.mapping.slice(r).map(t+1+s+o.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function kk(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=n.mapping.slice(r).map(t+1+s);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function AL(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function EL(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new fn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new we(ae.from(o),0,0),1,!0))}function D0(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,h=t-2;u>s;u--,h--){let p=i.node(u),g=i.index(u);if(p.type.spec.isolating)return!1;let y=p.content.cutByIndex(g,p.childCount),w=r&&r[h+1];w&&(y=y.replaceChild(0,w.type.create(w.attrs)));let v=r&&r[h]||p;if(!p.canReplace(g+1,p.childCount)||!v.type.validContent(y))return!1}let l=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(l,l,c?c.type:i.node(s+1).type)}function SL(n,e,t=1,r){let i=n.doc.resolve(e),s=ae.empty,o=ae.empty;for(let l=i.depth,c=i.depth-t,u=t-1;l>c;l--,u--){s=ae.from(i.node(l).copy(s));let h=r&&r[u];o=ae.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}n.step(new an(e,e,new we(s.append(o),t,t),!0))}function ca(n,e){let t=n.resolve(e),r=t.index();return Ak(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function CL(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function Ak(n,e){return!!(n&&e&&!n.isLeaf&&CL(n,e))}function _1(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):t>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&Ak(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function NL(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=n.steps.length;if(r===!1){let h=n.doc.resolve(e+t);kk(n,h.node(),h.before(),l)}o.inlineContent&&Ly(n,e+t-1,o,s.node().contentMatchAt(s.index()),r==null);let c=n.mapping.slice(l),u=c.map(e-t);if(n.step(new an(u,c.map(e+t,-1),we.empty,!0)),r===!0){let h=n.doc.resolve(u);xk(n,h.node(),h.before(),n.steps.length)}return n}function TL(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Ek(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(l>0?1:0),u=r.node(o),h=!1;if(s==1)h=u.canReplace(c,c,i);else{let p=u.contentMatchAt(c).findWrapping(i.firstChild.type);h=p&&u.canReplaceWith(c,c,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function F1(n,e,t=e,r=we.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return Sk(i,s,r)?new an(e,t,r):new ML(i,s,r).fit()}function Sk(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class ML{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ae.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ae.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let c=new we(s,o,l);return e>-1?new fn(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new an(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=cm(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],h,p=null;if(t==1&&(o?u.matchType(o.type)||(p=u.fillBefore(ae.from(o),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(t==2&&o&&(h=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=cm(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new we(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=cm(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new we(Hc(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new we(Hc(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let v=0;v<s.length;v++)this.openFrontierNode(s[v]);let o=this.unplaced,l=r?r.content:o.content,c=o.openStart-e,u=0,h=[],{match:p,type:g}=this.frontier[t];if(i){for(let v=0;v<i.childCount;v++)h.push(i.child(v));p=p.matchFragment(i)}let y=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let v=l.child(u),k=p.matchType(v.type);if(!k)break;u++,(u>1||c==0||v.content.size)&&(p=k,h.push(Ck(v.mark(g.allowedMarks(v.marks)),u==1?c:0,u==l.childCount?y:-1)))}let w=u==l.childCount;w||(y=-1),this.placed=jc(this.placed,t,ae.from(h)),this.frontier[t].match=p,w&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,k=l;v<y;v++){let A=k.lastChild;this.frontier.push({type:A.type,match:A.contentMatchAt(A.childCount)}),k=A.content}this.unplaced=w?e==0?we.empty:new we(Hc(o.content,e-1,1),e-1,y<0?o.openEnd:e-1):new we(Hc(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!um(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=um(e,t,i,r,s);if(o){for(let l=t-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],h=um(e,l,u,c,!0);if(!h||h.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=jc(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=jc(this.placed,this.depth,ae.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ae.empty,!0);t.childCount&&(this.placed=jc(this.placed,this.frontier.length,t))}}function Hc(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Hc(n.firstChild.content,e-1,t)))}function jc(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(jc(n.lastChild.content,e-1,t)))}function cm(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Ck(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Ck(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ae.empty,!0)))),n.copy(r)}function um(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!OL(t,s.content,o)?l:null}function OL(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function IL(n){return n.spec.defining||n.spec.definingForContent}function PL(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(Sk(i,s,r))return n.step(new an(e,t,r));let o=Tk(i,s);o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let w=i.node(g).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;o.indexOf(g)>-1?l=g:i.before(g)==y&&o.splice(1,0,-g)}let c=o.indexOf(l),u=[],h=r.openStart;for(let g=r.content,y=0;;y++){let w=g.firstChild;if(u.push(w),y==r.openStart)break;g=w.content}for(let g=h-1;g>=0;g--){let y=u[g],w=IL(y.type);if(w&&!y.sameMarkup(i.node(Math.abs(l)-1)))h=g;else if(w||!y.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+h+1)%(r.openStart+1),w=u[y];if(w)for(let v=0;v<o.length;v++){let k=o[(v+c)%o.length],A=!0;k<0&&(A=!1,k=-k);let C=i.node(k-1),O=i.index(k-1);if(C.canReplaceWith(O,O,w.type,w.marks))return n.replace(i.before(k),A?s.after(k):t,new we(Nk(r.content,0,r.openStart,y),y,r.openEnd))}}let p=n.steps.length;for(let g=o.length-1;g>=0&&(n.replace(e,t,r),!(n.steps.length>p));g--){let y=o[g];y<0||(e=i.before(y),t=s.after(y))}}function Nk(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Nk(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(ae.empty,!0))}return n}function RL(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=TL(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new we(ae.from(r),0,0))}function DL(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=Tk(r,i);for(let o=0;o<s.length;o++){let l=s[o],c=o==s.length-1;if(c&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(c||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return n.delete(r.before(o),t);n.delete(e,t)}function Tk(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class L0 extends Pn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Kt.fromReplace(e,this.pos,this.pos+1,new we(ae.from(i),0,t.isLeaf?0:1))}getMap(){return xr.empty}invert(e){return new L0(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new L0(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new L0(t.pos,t.attr,t.value)}}Pn.jsonID("attr",L0);class Au extends Pn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Kt.ok(r)}getMap(){return xr.empty}invert(e){return new Au(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Au(t.attr,t.value)}}Pn.jsonID("docAttr",Au);let Rf=class extends Error{};Rf=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Rf.prototype=Object.create(Error.prototype);Rf.prototype.constructor=Rf;Rf.prototype.name="TransformError";class Mk{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ku}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Rf(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),t=i.map(t,-1)),i.forEach((s,o,l,c)=>{e=Math.min(e,l),t=Math.max(t,c)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=we.empty){let i=F1(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new we(ae.from(r),0,0))}delete(e,t){return this.replace(e,t,we.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return PL(this,e,t,r),this}replaceRangeWith(e,t,r){return RL(this,e,t,r),this}deleteRange(e,t){return DL(this,e,t),this}lift(e,t){return bL(this,e,t),this}join(e,t=1){return NL(this,e,t),this}wrap(e,t){return xL(this,e,t),this}setBlockType(e,t=e,r,i=null){return kL(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return EL(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new L0(e,t,r)),this}setDocAttribute(e,t){return this.step(new Au(e,t)),this}addNodeMark(e,t){return this.step(new Xo(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof pt)t.isInSet(r.marks)&&this.step(new Ol(e,t));else{let i=r.marks,s,o=[];for(;s=t.isInSet(i);)o.push(new Ol(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,t=1,r){return SL(this,e,t,r),this}addMark(e,t,r){return mL(this,e,t,r),this}removeMark(e,t,r){return gL(this,e,t,r),this}clearIncompatible(e,t,r){return Ly(this,e,t,r),this}}const dm=Object.create(null);class Ye{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new LL(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=we.empty){let r=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:u}=o[l],h=e.mapping.slice(s);e.replaceRange(h.map(c.pos),h.map(u.pos),l?we.empty:t),l==0&&lv(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],c=e.mapping.slice(r),u=c.map(o.pos),h=c.map(l.pos);s?e.deleteRange(u,h):(e.replaceRangeWith(u,h,t),lv(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new We(e):y0(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?y0(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):y0(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new $r(e.node(0))}static atStart(e){return y0(e,e,0,0,1)||new $r(e)}static atEnd(e){return y0(e,e,e.content.size,e.childCount,-1)||new $r(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=dm[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in dm)throw new RangeError("Duplicate use of selection JSON ID "+e);return dm[e]=t,t.prototype.jsonID=e,t}getBookmark(){return We.between(this.$anchor,this.$head).getBookmark()}}Ye.prototype.visible=!0;class LL{constructor(e,t){this.$from=e,this.$to=t}}let ov=!1;function av(n){!ov&&!n.parent.inlineContent&&(ov=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class We extends Ye{constructor(e,t=e){av(e),av(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ye.near(r);let i=e.resolve(t.map(this.anchor));return new We(i.parent.inlineContent?i:r,r)}replace(e,t=we.empty){if(super.replace(e,t),t==we.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof We&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new z1(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new We(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=Ye.findFrom(t,r,!0)||Ye.findFrom(t,-r,!0);if(s)t=s.$head;else return Ye.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(Ye.findFrom(e,-r,!0)||Ye.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new We(e,t)}}Ye.jsonID("text",We);class z1{constructor(e,t){this.anchor=e,this.head=t}map(e){return new z1(e.map(this.anchor),e.map(this.head))}resolve(e){return We.between(e.resolve(this.anchor),e.resolve(this.head))}}class _e extends Ye{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?Ye.near(s):new _e(s)}content(){return new we(ae.from(this.node),0,0)}eq(e){return e instanceof _e&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new _y(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new _e(e.resolve(t.anchor))}static create(e,t){return new _e(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}_e.prototype.visible=!1;Ye.jsonID("node",_e);class _y{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new z1(r,r):new _y(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&_e.isSelectable(r)?new _e(t):Ye.near(t)}}class $r extends Ye{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=we.empty){if(t==we.empty){e.delete(0,e.doc.content.size);let r=Ye.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new $r(e)}map(e){return new $r(e)}eq(e){return e instanceof $r}getBookmark(){return BL}}Ye.jsonID("all",$r);const BL={map(){return this},resolve(n){return new $r(n)}};function y0(n,e,t,r,i,s=!1){if(e.inlineContent)return We.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&_e.isSelectable(l))return _e.create(n,t-(i<0?l.nodeSize:0))}else{let c=y0(n,l,t+i,i<0?l.childCount:0,i,s);if(c)return c}t+=l.nodeSize*i}return null}function lv(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof an||i instanceof fn))return;let s=n.mapping.maps[r],o;s.forEach((l,c,u,h)=>{o==null&&(o=h)}),n.setSelection(Ye.near(n.doc.resolve(o),t))}const fv=1,Nh=2,cv=4;class _L extends Mk{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|fv)&~Nh,this.storedMarks=null,this}get selectionSet(){return(this.updated&fv)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Nh,this}ensureMarks(e){return pt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Nh)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Nh,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||pt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Ye.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=cv,this}get scrolledIntoView(){return(this.updated&cv)>0}}function uv(n,e){return!e||!n?n:n.bind(e)}class Vc{constructor(e,t,r){this.name=e,this.init=uv(t.init,r),this.apply=uv(t.apply,r)}}const FL=[new Vc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Vc("selection",{init(n,e){return n.selection||Ye.atStart(e.doc)},apply(n){return n.selection}}),new Vc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Vc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class hm{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=FL.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Vc(r.key,r.spec.state,r))})}}class E0{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=i?i[o].n:0,u=i?i[o].state:this,h=c<t.length&&l.spec.appendTransaction.call(l,c?t.slice(c):t,u,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",e),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:t.length}:{state:this,n:0})}t.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new E0(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new _L(this)}static create(e){let t=new hm(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new E0(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new hm(this.schema,e.plugins),r=t.fields,i=new E0(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new hm(e.schema,e.plugins),s=new E0(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=gi.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=Ye.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let c=r[l],u=c.spec.state;if(c.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){s[o.name]=u.fromJSON.call(c,e,t[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function Ok(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Ok(i,e,{})),t[r]=i}return t}class Tt{constructor(e){this.spec=e,this.props={},e.props&&Ok(e.props,this,this.props),this.key=e.key?e.key.key:Ik("plugin")}getState(e){return e[this.key]}}const pm=Object.create(null);function Ik(n){return n in pm?n+"$"+ ++pm[n]:(pm[n]=0,n+"$")}class Xt{constructor(e="key"){this.key=Ik(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const zL=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Pk(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const UL=(n,e,t)=>{let r=Pk(n,t);if(!r)return!1;let i=Fy(r);if(!i){let o=r.blockRange(),l=o&&Hf(o);return l==null?!1:(e&&e(n.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(Bk(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Df(s,"end")||_e.isSelectable(s)))for(let o=r.depth;;o--){let l=F1(n.doc,r.before(o),r.after(o),we.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=n.tr.step(l);c.setSelection(Df(s,"end")?Ye.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):_e.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},HL=(n,e,t)=>{let r=Pk(n,t);if(!r)return!1;let i=Fy(r);return i?Rk(n,i,e):!1},jL=(n,e,t)=>{let r=Dk(n,t);if(!r)return!1;let i=zy(r);return i?Rk(n,i,e):!1};function Rk(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=e.nodeAfter,l=o,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let u=F1(n.doc,s,c,we.empty);if(!u||u.from!=s||u instanceof an&&u.slice.size>=c-s)return!1;if(t){let h=n.tr.step(u);h.setSelection(We.create(h.doc,s)),t(h.scrollIntoView())}return!0}function Df(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const VL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=Fy(r)}let o=s&&s.nodeBefore;return!o||!_e.isSelectable(o)?!1:(e&&e(n.tr.setSelection(_e.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Fy(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Dk(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const $L=(n,e,t)=>{let r=Dk(n,t);if(!r)return!1;let i=zy(r);if(!i)return!1;let s=i.nodeAfter;if(Bk(n,i,e,1))return!0;if(r.parent.content.size==0&&(Df(s,"start")||_e.isSelectable(s))){let o=F1(n.doc,r.before(),r.after(),we.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=n.tr.step(o);l.setSelection(Df(s,"start")?Ye.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):_e.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},GL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=zy(r)}let o=s&&s.nodeAfter;return!o||!_e.isSelectable(o)?!1:(e&&e(n.tr.setSelection(_e.create(n.doc,s.pos)).scrollIntoView()),!0)};function zy(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const WL=(n,e)=>{let t=n.selection,r=t instanceof _e,i;if(r){if(t.node.isTextblock||!ca(n.doc,t.from))return!1;i=t.from}else if(i=_1(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(_e.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},QL=(n,e)=>{let t=n.selection,r;if(t instanceof _e){if(t.node.isTextblock||!ca(n.doc,t.to))return!1;r=t.to}else if(r=_1(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},KL=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Hf(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},JL=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Lk(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const qL=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=Lk(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=t.after(),c=n.tr.replaceWith(l,l,o.createAndFill());c.setSelection(Ye.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},YL=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof $r||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Lk(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=n.tr.insert(o,s.createAndFill());l.setSelection(We.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},XL=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(D0(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Hf(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},ZL=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(_e.create(n.doc,i))),!0)};function eB(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ca(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Bk(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&eB(n,e,t))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(t){let y=e.pos+s.nodeSize,w=ae.empty;for(let A=o.length-1;A>=0;A--)w=ae.from(o[A].create(null,w));w=ae.from(i.copy(w));let v=n.tr.step(new fn(e.pos-1,y,e.pos,y,new we(w,1,0),o.length,!0)),k=v.doc.resolve(y+2*o.length);k.nodeAfter&&k.nodeAfter.type==i.type&&ca(v.doc,k.pos)&&v.join(k.pos),t(v.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&c?null:Ye.findFrom(e,1),p=h&&h.$from.blockRange(h.$to),g=p&&Hf(p);if(g!=null&&g>=e.depth)return t&&t(n.tr.lift(p,g).scrollIntoView()),!0;if(u&&Df(s,"start",!0)&&Df(i,"end")){let y=i,w=[];for(;w.push(y),!y.isTextblock;)y=y.lastChild;let v=s,k=1;for(;!v.isTextblock;v=v.firstChild)k++;if(y.canReplace(y.childCount,y.childCount,v.content)){if(t){let A=ae.empty;for(let O=w.length-1;O>=0;O--)A=ae.from(w[O].copy(A));let C=n.tr.step(new fn(e.pos-w.length,e.pos+s.nodeSize,e.pos+k,e.pos+s.nodeSize-k,new we(A,w.length,0),0,!0));t(C.scrollIntoView())}return!0}}return!1}function _k(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(We.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const tB=_k(-1),nB=_k(1);function rB(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),l=o&&By(o,n,e);return l?(r&&r(t.tr.wrap(o,l).scrollIntoView()),!0):!1}}function dv(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=t.selection.ranges[s];t.doc.nodesBetween(o,l,(c,u)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)i=!0;else{let h=t.doc.resolve(u),p=h.index();i=h.parent.canReplaceWith(p,p+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=t.selection.ranges[o];s.setBlockType(l,c,n,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function iB(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s);if(!o)return!1;let l=r?t.tr:null;return sB(l,o,n,e)?(r&&r(l.scrollIntoView()),!0):!1}}function sB(n,e,t,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=o.resolve(e.start-2);s=new Ep(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new Ep(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=By(s,t,r,e);return l?(n&&oB(n,e,l,i,t),!0):!1}function oB(n,e,t,r,i){let s=ae.empty;for(let h=t.length-1;h>=0;h--)s=ae.from(t[h].type.create(t[h].attrs,s));n.step(new fn(e.start-(r?2:0),e.end,e.start,e.end,new we(s,0,0),t.length,!0));let o=0;for(let h=0;h<t.length;h++)t[h].type==i&&(o=h+1);let l=t.length-o,c=e.start+t.length-(r?2:0),u=e.parent;for(let h=e.startIndex,p=e.endIndex,g=!0;h<p;h++,g=!1)!g&&D0(n.doc,c,l)&&(n.split(c,l),c+=2*l),c+=u.child(h).nodeSize;return n}function aB(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?lB(e,t,n,s):fB(e,t,s):!0:!1}}function lB(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new fn(s-1,o,s,o,new we(ae.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Ep(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Hf(r);if(l==null)return!1;i.lift(r,l);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return ca(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function fB(n,e,t){let r=n.tr,i=t.parent;for(let y=t.end,w=t.endIndex-1,v=t.startIndex;w>v;w--)y-=i.child(w).nodeSize,r.delete(y-1,y+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,c=t.endIndex==i.childCount,u=s.node(-1),h=s.index(-1);if(!u.canReplace(h+(l?0:1),h+1,o.content.append(c?ae.empty:ae.from(i))))return!1;let p=s.pos,g=p+o.nodeSize;return r.step(new fn(p-(l?1:0),g+(c?1:0),p+1,g-1,new we((l?ae.empty:ae.from(i.copy(ae.empty))).append(c?ae.empty:ae.from(i.copy(ae.empty))),l?0:1,c?0:1),l?0:1)),e(r.scrollIntoView()),!0}function cB(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,c=l.child(o-1);if(c.type!=n)return!1;if(t){let u=c.lastChild&&c.lastChild.type==l.type,h=ae.from(u?n.create():null),p=new we(ae.from(n.create(null,ae.from(l.type.create(null,h)))),u?3:1,0),g=s.start,y=s.end;t(e.tr.step(new fn(g-(u?3:1),y,g,y,p,1,!0)).scrollIntoView())}return!0}}const yn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Lf=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Pg=null;const Es=function(n,e,t){let r=Pg||(Pg=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},uB=function(){Pg=null},Il=function(n,e,t,r){return t&&(hv(n,e,t,r,-1)||hv(n,e,t,r,1))},dB=/^(img|br|input|textarea|hr)$/i;function hv(n,e,t,r,i){for(var s;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Vr(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Zu(n)||dB.test(n.nodeName)||n.contentEditable=="false")return!1;e=yn(n)+(i<0?0:1),n=o}else if(n.nodeType==1){let o=n.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else n=o,e=i<0?Vr(n):0}else return!1}}function Vr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function hB(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Vr(n)}else if(n.parentNode&&!Zu(n))e=yn(n),n=n.parentNode;else return null}}function pB(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Zu(n))e=yn(n)+1,n=n.parentNode;else return null}}function mB(n,e,t){for(let r=e==0,i=e==Vr(n);r||i;){if(n==t)return!0;let s=yn(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==Vr(n)}}function Zu(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const U1=function(n){return n.focusNode&&Il(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Da(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function gB(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function yB(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Vr(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Vr(r.startContainer),r.startOffset)}}}const Yi=typeof navigator<"u"?navigator:null,pv=typeof document<"u"?document:null,ua=Yi&&Yi.userAgent||"",Rg=/Edge\/(\d+)/.exec(ua),Fk=/MSIE \d/.exec(ua),Dg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ua),or=!!(Fk||Dg||Rg),na=Fk?document.documentMode:Dg?+Dg[1]:Rg?+Rg[1]:0,Gr=!or&&/gecko\/(\d+)/i.test(ua);Gr&&+(/Firefox\/(\d+)/.exec(ua)||[0,0])[1];const Lg=!or&&/Chrome\/(\d+)/.exec(ua),wn=!!Lg,zk=Lg?+Lg[1]:0,In=!or&&!!Yi&&/Apple Computer/.test(Yi.vendor),Bf=In&&(/Mobile\/\w+/.test(ua)||!!Yi&&Yi.maxTouchPoints>2),Hr=Bf||(Yi?/Mac/.test(Yi.platform):!1),Uk=Yi?/Win/.test(Yi.platform):!1,js=/Android \d/.test(ua),ed=!!pv&&"webkitFontSmoothing"in pv.documentElement.style,bB=ed?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function wB(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function ys(n,e){return typeof n=="number"?n:n[e]}function vB(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function mv(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;){if(o.nodeType!=1){o=Lf(o);continue}let l=o,c=l==s.body,u=c?wB(s):vB(l),h=0,p=0;if(e.top<u.top+ys(r,"top")?p=-(u.top-e.top+ys(i,"top")):e.bottom>u.bottom-ys(r,"bottom")&&(p=e.bottom-e.top>u.bottom-u.top?e.top+ys(i,"top")-u.top:e.bottom-u.bottom+ys(i,"bottom")),e.left<u.left+ys(r,"left")?h=-(u.left-e.left+ys(i,"left")):e.right>u.right-ys(r,"right")&&(h=e.right-u.right+ys(i,"right")),h||p)if(c)s.defaultView.scrollBy(h,p);else{let y=l.scrollLeft,w=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let v=l.scrollLeft-y,k=l.scrollTop-w;e={left:e.left-v,top:e.top-k,right:e.right-v,bottom:e.bottom-k}}let g=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:Lf(o)}}function xB(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=n.root.elementFromPoint(s,o);if(!l||l==n.dom||!n.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=t-20){r=l,i=c.top;break}}return{refDOM:r,refTop:i,stack:Hk(n.dom)}}function Hk(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Lf(r));return e}function kB({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;jk(t,r==0?0:r-e)}function jk(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let d0=null;function AB(n){if(n.setActive)return n.setActive();if(d0)return n.focus(d0);let e=Hk(n);n.focus(d0==null?{get preventScroll(){return d0={preventScroll:!0},!0}}:void 0),d0||(d0=!1,jk(e,0))}function Vk(n,e){let t,r=2e8,i,s=0,o=e.top,l=e.top,c,u;for(let h=n.firstChild,p=0;h;h=h.nextSibling,p++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=Es(h).getClientRects();else continue;for(let y=0;y<g.length;y++){let w=g[y];if(w.top<=o&&w.bottom>=l){o=Math.max(w.bottom,o),l=Math.min(w.top,l);let v=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(v<r){t=h,r=v,i=v&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,h.nodeType==1&&v&&(s=p+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!c&&w.left<=e.left&&w.right>=e.left&&(c=h,u={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(s=p+1)}}return!t&&c&&(t=c,i=u,r=0),t&&t.nodeType==3?EB(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:Vk(t,i)}function EB(n,e){let t=n.nodeValue.length,r=document.createRange(),i;for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let o=So(r,1);if(o.top!=o.bottom&&Uy(e,o)){i={node:n,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:n,offset:0}}function Uy(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function SB(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function CB(n,e,t){let{node:r,offset:i}=Vk(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function NB(n,e,t,r){let i=-1;for(let s=e,o=!1;s!=n.dom;){let l=n.docView.nearestDesc(s,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>r.left||c.top>r.top?i=l.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function $k(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(Uy(e,u))return $k(o,e,u)}}if((s=(s+1)%r)==i)break}return n}function TB(n,e){let t=n.dom.ownerDocument,r,i=0,s=yB(t,e.left,e.top);s&&({node:r,offset:i}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),l;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=n.dom.getBoundingClientRect();if(!Uy(e,u)||(o=$k(n.dom,e,u),!o))return null}if(In)for(let u=o;r&&u;u=Lf(u))u.draggable&&(r=void 0);if(o=SB(o,e),r){if(Gr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&i++}let u;ed&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=NB(n,r,i,e))}l==null&&(l=CB(n,o,e));let c=n.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function gv(n){return n.top<n.bottom||n.left<n.right}function So(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(gv(r))return r}return Array.prototype.find.call(t,gv)||n.getBoundingClientRect()}const MB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Gk(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=ed||Gr;if(r.nodeType==3)if(o&&(MB.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let c=So(Es(r,i,i),t);if(Gr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=So(Es(r,i-1,i-1),-1);if(u.top==c.top){let h=So(Es(r,i,i+1),-1);if(h.top!=c.top)return Oc(h,h.left<u.left)}}return c}else{let c=i,u=i,h=t<0?1:-1;return t<0&&!i?(u++,h=-1):t>=0&&i==r.nodeValue.length?(c--,h=1):t<0?c--:u++,Oc(So(Es(r,c,u),h),h<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==Vr(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return mm(c.getBoundingClientRect(),!1)}if(s==null&&i<Vr(r)){let c=r.childNodes[i];if(c.nodeType==1)return mm(c.getBoundingClientRect(),!0)}return mm(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==Vr(r))){let c=r.childNodes[i-1],u=c.nodeType==3?Es(c,Vr(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return Oc(So(u,1),!1)}if(s==null&&i<Vr(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?Es(c,0,o?0:1):c.nodeType==1?c:null:null;if(u)return Oc(So(u,-1),!0)}return Oc(So(r.nodeType==3?Es(r):r,-t),t>=0)}function Oc(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function mm(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Wk(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function OB(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return Wk(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=Gk(n,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Es(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let h=c[u];if(h.bottom>h.top+1&&(t=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const IB=/[\u0590-\u08ac]/;function PB(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=n.domSelection();return l?!IB.test(r.parent.textContent)||!l.modify?t=="left"||t=="backward"?s:o:Wk(n,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:h,anchorOffset:p}=n.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",t,"character");let y=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:v}=n.domSelectionRange(),k=w&&!y.contains(w.nodeType==1?w:w.parentNode)||c==w&&u==v;try{l.collapse(h,p),c&&(c!=h||u!=p)&&l.extend&&l.extend(c,u)}catch{}return g!=null&&(l.caretBidiLevel=g),k}):r.pos==r.start()||r.pos==r.end()}let yv=null,bv=null,wv=!1;function RB(n,e,t){return yv==e&&bv==t?wv:(yv=e,bv=t,wv=t=="up"||t=="down"?OB(n,e,t):PB(n,e,t))}const Wr=0,vv=1,ja=2,Xi=3;class td{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Wr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>yn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Kk){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Qk&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?yn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?yn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let c=this.children[l],u=o+c.size;if(i==-1&&e<=u){let h=o+c.border;if(e>=h&&t<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,h);e=o;for(let p=l;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=yn(g.dom)+1;break}e-=g.size}i==-1&&(i=0)}if(i>-1&&(u>t||l==this.children.length-1)){t=u;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=yn(p.dom);break}t+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let y=0,w=0;y<this.children.length;y++){let v=this.children[y],k=w+v.size;if(s>w&&o<k)return v.setSelection(e-w-v.border,t-w-v.border,r,i);w=k}let l=this.domFromPos(e,e?-1:1),c=t==e?l:this.domFromPos(t,t?-1:1),u=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((Gr||In)&&e==t){let{node:y,offset:w}=l;if(y.nodeType==3){if(p=!!(w&&y.nodeValue[w-1]==`
`),p&&w==y.nodeValue.length)for(let v=y,k;v;v=v.parentNode){if(k=v.nextSibling){k.nodeName=="BR"&&(l=c={node:k.parentNode,offset:yn(k)+1});break}let A=v.pmViewDesc;if(A&&A.node&&A.node.isBlock)break}}else{let v=y.childNodes[w-1];p=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Gr&&h.focusNode&&h.focusNode!=c.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||p&&In)&&Il(l.node,l.offset,h.anchorNode,h.anchorOffset)&&Il(c.node,c.offset,h.focusNode,h.focusOffset))return;let g=!1;if((u.extend||e==t)&&!(p&&Gr)){u.collapse(l.node,l.offset);try{e!=t&&u.extend(c.node,c.offset),g=!0}catch{}}if(!g){if(e>t){let w=l;l=c,c=w}let y=document.createRange();y.setEnd(c.node,c.offset),y.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(y)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let l=r+s.border,c=o-s.border;if(e>=l&&t<=c){this.dirty=e==r||t==o?ja:vv,e==l&&t==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Xi:s.markDirty(e-l,t-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ja:Xi}r=o}this.dirty=ja}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?ja:vv;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Qk extends td{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==Wr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class DB extends td{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Pl extends td{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=Bl.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Pl(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Xi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Xi&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Wr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Wr}}slice(e,t,r){let i=Pl.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=_g(s,t,o,r)),e>0&&(s=_g(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ra extends td{constructor(e,t,r,i,s,o,l,c,u){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,t,r,i,s,o){let l=s.nodeViews[t.type.name],c,u=l&&l(t,s,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,i),h=u&&u.dom,p=u&&u.contentDOM;if(t.isText){if(!h)h=document.createTextNode(t.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=Bl.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!p&&!t.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),t.type.spec.draggable&&(h.draggable=!0));let g=h;return h=Yk(h,r,t),u?c=new LB(e,t,r,i,h,p||null,g,u,s,o+1):t.isText?new H1(e,t,r,i,h,g,s):new ra(e,t,r,i,h,p||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ae.empty)}return e}matchesNode(e,t,r){return this.dirty==Wr&&e.eq(this.node)&&Cp(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new _B(this,o&&o.node,e);UB(this.node,this.innerDeco,(u,h,p)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,e,h):u.type.side>=0&&!p&&c.syncToMarks(h==this.node.childCount?pt.none:this.node.child(h).marks,r,e,h),c.placeWidget(u,e,i)},(u,h,p,g)=>{c.syncToMarks(u.marks,r,e,g);let y;c.findNodeMatch(u,h,p,g)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(y=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(u,h,p,y,e)||c.updateNextNode(u,h,p,e,g,i)||c.addNode(u,h,p,e,i),i+=u.nodeSize}),c.syncToMarks([],r,e,0),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==ja)&&(o&&this.protectLocalComposition(e,o),Jk(this.contentDOM,this.children,e),Bf&&HB(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof We)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=jB(this.node.content,o,r-t,i-t);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new DB(this,s,t,i);e.input.compositionNodes.push(o),this.children=_g(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==Xi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Wr}updateOuterDeco(e){if(Cp(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=qk(this.dom,this.nodeDOM,Bg(this.outerDeco,this.node,t),Bg(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function xv(n,e,t,r,i){Yk(r,e,n);let s=new ra(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class H1 extends ra{constructor(e,t,r,i,s,o,l){super(e,t,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Xi||this.dirty!=Wr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Wr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Wr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new H1(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Xi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Kk extends td{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Wr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class LB extends ra{constructor(e,t,r,i,s,o,l,c,u,h){super(e,t,r,i,s,o,l,u,h),this.spec=c}update(e,t,r,i){if(this.dirty==Xi)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Jk(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==n){for(;l!=r;)r=kv(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(l,r);if(o instanceof Pl){let c=r?r.previousSibling:n.lastChild;Jk(o.contentDOM,o.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=kv(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Jc=function(n){n&&(this.nodeName=n)};Jc.prototype=Object.create(null);const Va=[new Jc];function Bg(n,e,t){if(n.length==0)return Va;let r=t?Va[0]:new Jc,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&i.push(r=new Jc(o.nodeName));for(let l in o){let c=o[l];c!=null&&(t&&i.length==1&&i.push(r=new Jc(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+c:l=="style"?r.style=(r.style?r.style+";":"")+c:l!="nodeName"&&(r[l]=c))}}}return i}function qk(n,e,t,r){if(t==Va&&r==Va)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=t[s];if(s){let c;l&&l.nodeName==o.nodeName&&i!=n&&(c=i.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(i),l=Va[0]),i=c}BB(i,l||Va[0],o)}return i}function BB(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function Yk(n,e,t){return qk(n,n,Va,Bg(e,t,n.nodeType!=1))}function Cp(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function kv(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class _B{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=FB(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r,i){let s=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;s<l&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Wr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let c=-1,u=this.top.children.length;i<this.preMatch.index&&(u=Math.min(this.index+3,u));for(let h=this.index;h<u;h++){let p=this.top.children[h];if(p.matchesMark(e[o])&&!this.isLocked(p.dom)){c=h;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let h=Pl.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let u=this.top.children[l];if(u.matchesNode(e,t,r)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==Xi&&o.dom==o.contentDOM&&(o.dirty=ja),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof ra){let u=this.preMatch.matched.get(c);if(u!=null&&u!=s)return!1;let h=c.dom,p,g=this.isLocked(h)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Xi&&Cp(t,c.outerDeco));if(!g&&c.update(e,t,r,i))return this.destroyBetween(this.index,l),c.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(c,e,t,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=ja,p.updateChildren(i,o+1),p.dirty=Wr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Cp(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=ra.create(this.top,t,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,t,r,i,s){let o=ra.create(this.top,e,t,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Qk(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Pl;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof H1)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((In||wn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Kk(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function FB(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let u=t.children[r-1];if(u instanceof Pl)t=u,r=u.children.length;else{l=u,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=l.node;if(c){if(c!=n.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function zB(n,e){return n.type.side-e.type.side}function UB(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let u=0;u<n.childCount;u++){let h=n.child(u);r(h,i,e.forChild(s,h),u),s+=h.nodeSize}return}let o=0,l=[],c=null;for(let u=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let k=i[o++];k.widget&&(h?(p||(p=[h])).push(k):h=k)}if(h)if(p){p.sort(zB);for(let k=0;k<p.length;k++)t(p[k],u,!!c)}else t(h,u,!!c);let g,y;if(c)y=-1,g=c,c=null;else if(u<n.childCount)y=u,g=n.child(u++);else break;for(let k=0;k<l.length;k++)l[k].to<=s&&l.splice(k--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let w=s+g.nodeSize;if(g.isText){let k=w;o<i.length&&i[o].from<k&&(k=i[o].from);for(let A=0;A<l.length;A++)l[A].to<k&&(k=l[A].to);k<w&&(c=g.cut(k-s),g=g.cut(0,k-s),w=k,y=-1)}else for(;o<i.length&&i[o].to<w;)o++;let v=g.isInline&&!g.isLeaf?l.filter(k=>!k.inline):l.slice();r(g,v,e.forChild(s,g),y),s=w}}function HB(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function jB(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let c=o.text;for(;i<n.childCount;){let u=n.child(i++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=t){if(s>=r&&c.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?c.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=t)return l+u;if(t==r&&c.length>=r+e.length-l&&c.slice(r-l,r-l+e.length)==e)return r}}return-1}function _g(n,e,t,r,i){let s=[];for(let o=0,l=0;o<n.length;o++){let c=n[o],u=l,h=l+=c.size;u>=t||h<=e?s.push(c):(u<e&&s.push(c.slice(0,e-u,r)),i&&(s.push(i),i=void 0),h>t&&s.push(c.slice(t-u,c.size,r)))}return s}function Hy(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let l=r.resolve(o),c,u;if(U1(t)){for(c=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&_e.isSelectable(p)&&i.parent&&!(p.isInline&&mB(t.focusNode,t.focusOffset,i.dom))){let g=i.posBefore;u=new _e(o==g?l:r.resolve(g))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let p=o,g=o;for(let y=0;y<t.rangeCount;y++){let w=t.getRangeAt(y);p=Math.min(p,n.docView.posFromDOM(w.startContainer,w.startOffset,1)),g=Math.max(g,n.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(p<0)return null;[c,o]=g==n.state.selection.anchor?[g,p]:[p,g],l=r.resolve(o)}else c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let h=r.resolve(c);if(!u){let p=e=="pointer"||n.state.selection.head<l.pos&&!s?1:-1;u=jy(n,h,l,p)}return u}function Xk(n){return n.editable?n.hasFocus():eA(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Gs(n,e=!1){let t=n.state.selection;if(Zk(n,t),!!Xk(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&wn){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Il(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)$B(n);else{let{anchor:r,head:i}=t,s,o;Av&&!(t instanceof We)&&(t.$from.parent.inlineContent||(s=Ev(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=Ev(n,t.to))),n.docView.setSelection(r,i,n,e),Av&&(s&&Sv(s),o&&Sv(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&VB(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Av=In||wn&&zk<63;function Ev(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(In&&i&&i.contentEditable=="false")return gm(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return gm(i);if(s)return gm(s)}}function gm(n){return n.contentEditable="true",In&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Sv(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function VB(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Xk(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function $B(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,yn(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&or&&na<=11&&(t.disabled=!0,t.disabled=!1)}function Zk(n,e){if(e instanceof _e){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Cv(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Cv(n)}function Cv(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function jy(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||We.between(e,t,r)}function Nv(n){return n.editable&&!n.hasFocus()?!1:eA(n)}function eA(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function GB(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Il(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Fg(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ye.findFrom(s,e)}function No(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Tv(n,e,t){let r=n.state.selection;if(r instanceof We)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return No(n,new We(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Fg(n.state,e);return i&&i instanceof _e?No(n,i):!1}else if(!(Hr&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(l))&&!o.contentDOM?_e.isSelectable(s)?No(n,new _e(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):ed?No(n,new We(n.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof _e&&r.node.isInline)return No(n,new We(e>0?r.$to:r.$from));{let i=Fg(n.state,e);return i?No(n,i):!1}}}function Np(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function qc(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function h0(n,e){return e<0?WB(n):QB(n)}function WB(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(Gr&&t.nodeType==1&&r<Np(t)&&qc(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if(qc(l,-1))i=t,s=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else{if(tA(t))break;{let l=t.previousSibling;for(;l&&qc(l,-1);)i=t.parentNode,s=yn(l),l=l.previousSibling;if(l)t=l,r=Np(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?zg(n,t,r):i&&zg(n,i,s)}function QB(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Np(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let l=t.childNodes[r];if(qc(l,1))s=t,o=++r;else break}else{if(tA(t))break;{let l=t.nextSibling;for(;l&&qc(l,1);)s=l.parentNode,o=yn(l)+1,l=l.nextSibling;if(l)t=l,r=0,i=Np(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&zg(n,s,o)}function tA(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function KB(n,e){for(;n&&e==n.childNodes.length&&!Zu(n);)e=yn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function JB(n,e){for(;n&&!e&&!Zu(n);)e=yn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function zg(n,e,t){if(e.nodeType!=3){let s,o;(o=KB(e,t))?(e=o,t=0):(s=JB(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(U1(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Gs(n)},50)}function Mv(n,e){let t=n.state.doc.resolve(e);if(!(wn||Uk)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Ov(n,e,t){let r=n.state.selection;if(r instanceof We&&!r.empty||t.indexOf("s")>-1||Hr&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Fg(n.state,e);if(o&&o instanceof _e)return No(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof $r?Ye.near(o,e):Ye.findFrom(o,e);return l?No(n,l):!1}return!1}function Iv(n,e){if(!(n.state.selection instanceof We))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function Pv(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function qB(n){if(!In||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Pv(n,r,"true"),setTimeout(()=>Pv(n,r,"false"),20)}return!1}function YB(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function XB(n,e){let t=e.keyCode,r=YB(e);if(t==8||Hr&&t==72&&r=="c")return Iv(n,-1)||h0(n,-1);if(t==46&&!e.shiftKey||Hr&&t==68&&r=="c")return Iv(n,1)||h0(n,1);if(t==13||t==27)return!0;if(t==37||Hr&&t==66&&r=="c"){let i=t==37?Mv(n,n.state.selection.from)=="ltr"?-1:1:-1;return Tv(n,i,r)||h0(n,i)}else if(t==39||Hr&&t==70&&r=="c"){let i=t==39?Mv(n,n.state.selection.from)=="ltr"?1:-1:1;return Tv(n,i,r)||h0(n,i)}else{if(t==38||Hr&&t==80&&r=="c")return Ov(n,-1,r)||h0(n,-1);if(t==40||Hr&&t==78&&r=="c")return qB(n)||Ov(n,1,r)||h0(n,1);if(r==(Hr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Vy(n,e){n.someProp("transformCopied",y=>{e=y(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let y=r.firstChild;t.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=n.someProp("clipboardSerializer")||Bl.fromSchema(n.state.schema),l=aA(),c=l.createElement("div");c.appendChild(o.serializeFragment(r,{document:l}));let u=c.firstChild,h,p=0;for(;u&&u.nodeType==1&&(h=oA[u.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let w=l.createElement(h[y]);for(;c.firstChild;)w.appendChild(c.firstChild);c.appendChild(w),p++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(t)}`);let g=n.someProp("clipboardTextSerializer",y=>y(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:g,slice:e}}function nA(n,e,t,r,i){let s=i.parent.type.spec.code,o,l;if(!t&&!e)return null;let c=!!e&&(r||s||!t);if(c){if(n.someProp("transformPastedText",g=>{e=g(e,s||r,n)}),s)return l=new we(ae.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",g=>{l=g(l,n,!0)}),l;let p=n.someProp("clipboardTextParser",g=>g(e,i,r,n));if(p)l=p;else{let g=i.marks(),{schema:y}=n.state,w=Bl.fromSchema(y);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let k=o.appendChild(document.createElement("p"));v&&k.appendChild(w.serializeNode(y.text(v,g)))})}}else n.someProp("transformPastedHTML",p=>{t=p(t,n)}),o=n_(t),ed&&r_(o);let u=o&&o.querySelector("[data-pm-slice]"),h=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||ta.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!ZB.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)l=i_(Rv(l,+h[1],+h[2]),h[4]);else if(l=we.maxOpen(e_(l.content,i),!0),l.openStart||l.openEnd){let p=0,g=0;for(let y=l.content.firstChild;p<l.openStart&&!y.type.spec.isolating;p++,y=y.firstChild);for(let y=l.content.lastChild;g<l.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);l=Rv(l,p,g)}return n.someProp("transformPasted",p=>{l=p(l,n,c)}),l}const ZB=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function e_(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(l=>{if(!o)return;let c=i.findWrapping(l.type),u;if(!c)return o=null;if(u=o.length&&s.length&&iA(c,s,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=sA(o[o.length-1],s.length));let h=rA(l,c);o.push(h),i=i.matchType(h.type),s=c}}),o)return ae.from(o)}return n}function rA(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ae.from(n));return n}function iA(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=iA(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(ae.from(rA(t,n,i+1))))}}function sA(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,sA(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ae.empty,!0);return n.copy(t.append(r))}function Ug(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,l=o.content;return n.childCount>1&&(s=0),i<r-1&&(l=Ug(l,e,t,r,i+1,s)),i>=t&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(ae.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(l))}function Rv(n,e,t){return e<n.openStart&&(n=new we(Ug(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new we(Ug(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const oA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Dv=null;function aA(){return Dv||(Dv=document.implementation.createHTMLDocument("title"))}let ym=null;function t_(n){let e=window.trustedTypes;return e?(ym||(ym=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),ym.createHTML(n)):n}function n_(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=aA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&oA[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=t_(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function r_(n){let e=n.querySelectorAll(wn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function i_(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let l=r.length-2;l>=0;l-=2){let c=t.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;i=ae.from(c.create(r[l+1],i)),s++,o++}return new we(i,s,o)}const Gn={},Wn={},s_={touchstart:!0,touchmove:!0};class o_{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function a_(n){for(let e in Gn){let t=Gn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{f_(n,r)&&!$y(n,r)&&(n.editable||!(r.type in Wn))&&t(n,r)},s_[e]?{passive:!0}:void 0)}In&&n.dom.addEventListener("input",()=>null),Hg(n)}function Zo(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function l_(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Hg(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>$y(n,r))})}function $y(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function f_(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function c_(n,e){!$y(n,e)&&Gn[e.type]&&(n.editable||!(e.type in Wn))&&Gn[e.type](n,e)}Wn.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!fA(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(js&&wn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Bf&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Da(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||XB(n,t)?t.preventDefault():Zo(n,"key")};Wn.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Wn.keypress=(n,e)=>{let t=e;if(fA(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Hr&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof We)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i,s))&&n.dispatch(s()),t.preventDefault()}};function j1(n){return{left:n.clientX,top:n.clientY}}function u_(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Gy(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,l=>o>s.depth?l(n,t,s.nodeAfter,s.before(o),i,!0):l(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function B0(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function d_(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&_e.isSelectable(r)?(B0(n,new _e(t)),!0):!1}function h_(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof _e&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(_e.isSelectable(l)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(B0(n,_e.create(n.state.doc,i)),!0):!1}function p_(n,e,t,r,i){return Gy(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?h_(n,t):d_(n,t))}function m_(n,e,t,r){return Gy(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function g_(n,e,t,r){return Gy(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||y_(n,t,r)}function y_(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(B0(n,We.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)B0(n,We.create(r,l+1,l+1+o.content.size));else if(_e.isSelectable(o))B0(n,_e.create(r,l));else continue;return!0}}function Wy(n){return Tp(n)}const lA=Hr?"metaKey":"ctrlKey";Gn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Wy(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&u_(t,n.input.lastClick)&&!t[lA]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s,button:t.button};let o=n.posAtCoords(j1(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new b_(n,o,t,!!r)):(s=="doubleClick"?m_:g_)(n,o.pos,o.inside,t)?t.preventDefault():Zo(n,"pointer"))};class b_{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[lA],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let h=e.state.doc.resolve(t.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof _e&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zo(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(j1(e))),this.updateAllowDefault(e),this.allowDefault||!t?Zo(this.view,"pointer"):p_(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||In&&this.mightDrag&&!this.mightDrag.node.isAtom||wn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(B0(this.view,Ye.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Zo(this.view,"pointer")}move(e){this.updateAllowDefault(e),Zo(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Gn.touchstart=n=>{n.input.lastTouch=Date.now(),Wy(n),Zo(n,"pointer")};Gn.touchmove=n=>{n.input.lastTouch=Date.now(),Zo(n,"pointer")};Gn.contextmenu=n=>Wy(n);function fA(n,e){return n.composing?!0:In&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const w_=js?5e3:-1;Wn.compositionstart=Wn.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof We&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||wn&&Uk&&v_(n)))n.markCursor=n.state.storedMarks||t.marks(),Tp(n,!0),n.markCursor=null;else if(Tp(n,!e.selection.empty),Gr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=n.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}cA(n,w_)};function v_(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let r=e.childNodes[t];return r.nodeType==1&&r.contentEditable=="false"}Wn.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,cA(n,20))};function cA(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Tp(n),e))}function uA(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=k_());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function x_(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=hB(e.focusNode,e.focusOffset),r=pB(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return r}}return t||r}function k_(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Tp(n,e=!1){if(!(js&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),uA(n),e||n.docView&&n.docView.dirty){let t=Hy(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function A_(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Eu=or&&na<15||Bf&&bB<604;Gn.copy=Wn.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Eu?null:t.clipboardData,o=r.content(),{dom:l,text:c}=Vy(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):A_(n,l),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function E_(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function S_(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Su(n,r.value,null,i,e):Su(n,r.textContent,r.innerHTML,i,e)},50)}function Su(n,e,t,r,i){let s=nA(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,i,s||we.empty)))return!0;if(!s)return!1;let o=E_(s),l=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function dA(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Wn.paste=(n,e)=>{let t=e;if(n.composing&&!js)return;let r=Eu?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Su(n,dA(r),r.getData("text/html"),i,t)?t.preventDefault():S_(n,t)};class hA{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const C_=Hr?"altKey":"ctrlKey";function pA(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[C_]}Gn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(j1(t)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof _e?i.to-1:i.to))){if(r&&r.mightDrag)o=_e.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let p=n.docView.nearestDesc(t.target,!0);p&&p.node.type.spec.draggable&&p!=n.docView&&(o=_e.create(n.state.doc,p.posBefore))}}let l=(o||n.state.selection).content(),{dom:c,text:u,slice:h}=Vy(n,l);(!t.dataTransfer.files.length||!wn||zk>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Eu?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",Eu||t.dataTransfer.setData("text/plain",u),n.dragging=new hA(h,pA(n,t),o)};Gn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Wn.dragover=Wn.dragenter=(n,e)=>e.preventDefault();Wn.drop=(n,e)=>{try{N_(n,e,n.dragging)}finally{n.dragging=null}};function N_(n,e,t){if(!e.dataTransfer)return;let r=n.posAtCoords(j1(e));if(!r)return;let i=n.state.doc.resolve(r.pos),s=t&&t.slice;s?n.someProp("transformPasted",y=>{s=y(s,n,!1)}):s=nA(n,dA(e.dataTransfer),Eu?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(t&&pA(n,e));if(n.someProp("handleDrop",y=>y(n,e,s||we.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let l=s?Ek(n.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=n.state.tr;if(o){let{node:y}=t;y?y.replace(c):c.deleteSelection()}let u=c.mapping.map(l),h=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=c.doc;if(h?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(p))return;let g=c.doc.resolve(u);if(h&&_e.isSelectable(s.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new _e(g));else{let y=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((w,v,k,A)=>y=A),c.setSelection(jy(n,g,c.doc.resolve(y)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))}Gn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Gs(n)},20))};Gn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Gn.beforeinput=(n,e)=>{if(wn&&js&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Da(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Wn)Gn[n]=Wn[n];function Cu(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Mp{constructor(e,t){this.toDOM=e,this.spec=t||wl,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new $n(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Mp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Cu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ia{constructor(e,t){this.attrs=e,this.spec=t||wl}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new $n(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ia&&Cu(this.attrs,e.attrs)&&Cu(this.spec,e.spec)}static is(e){return e.type instanceof ia}destroy(){}}class Qy{constructor(e,t){this.attrs=e,this.spec=t||wl}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new $n(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Qy&&Cu(this.attrs,e.attrs)&&Cu(this.spec,e.spec)}destroy(){}}class $n{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new $n(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new $n(e,e,new Mp(t,r))}static inline(e,t,r,i){return new $n(e,t,new ia(r,i))}static node(e,t,r,i){return new $n(e,t,new Qy(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ia}get widget(){return this.type instanceof Mp}}const b0=[],wl={};class Ct{constructor(e,t){this.local=e.length?e:b0,this.children=t.length?t:b0}static create(e,t){return t.length?Op(t,e,0,wl):Tn}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=t&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,t-l,r,i+l,s)}}map(e,t,r){return this==Tn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||wl)}mapInner(e,t,r,i,s){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,r,i);c&&c.type.valid(t,c)?(o||(o=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?T_(this.children,o||[],e,t,r,i,s):o?new Ct(o.sort(vl),b0):Tn}add(e,t){return t.length?this==Tn?Ct.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((l,c)=>{let u=c+r,h;if(h=gA(t,l,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(l,h,u+1):i.splice(s,0,c,c+l.nodeSize,Op(h,l,u+1,wl)),s+=3}});let o=mA(s?yA(t):t,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Ct(o.length?this.local.concat(o).sort(vl):this.local,i||this.children)}remove(e){return e.length==0||this==Tn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+t,c=r[s+1]+t;for(let h=0,p;h<e.length;h++)(p=e[h])&&p.from>l&&p.to<c&&(e[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,l+1);u!=Tn?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ct(i,r):Tn}forChild(e,t){if(this==Tn)return this;if(t.isLeaf)return Ct.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+t.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>s&&c.type instanceof ia){let u=Math.max(s,c.from)-s,h=Math.min(o,c.to)-s;u<h&&(i||(i=[])).push(c.copy(u,h))}}if(i){let l=new Ct(i.sort(vl),b0);return r?new Io([l,r]):l}return r||Tn}eq(e){if(this==e)return!0;if(!(e instanceof Ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ky(this.localsInner(e))}localsInner(e){if(this==Tn)return b0;if(e.inlineContent||!this.local.some(ia.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ia||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Ct.empty=new Ct([],[]);Ct.removeOverlap=Ky;const Tn=Ct.empty;class Io{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,wl));return Io.from(r)}forChild(e,t){if(t.isLeaf)return Ct.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Tn&&(s instanceof Io?r=r.concat(s.members):r.push(s))}return Io.from(r)}eq(e){if(!(e instanceof Io)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?Ky(r?t:t.sort(vl)):b0}static from(e){switch(e.length){case 0:return Tn;case 1:return e[0];default:return new Io(e.every(t=>t instanceof Ct)?e:e.reduce((t,r)=>t.concat(r instanceof Ct?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function T_(n,e,t,r,i,s,o){let l=n.slice();for(let u=0,h=s;u<t.maps.length;u++){let p=0;t.maps[u].forEach((g,y,w,v)=>{let k=v-w-(y-g);for(let A=0;A<l.length;A+=3){let C=l[A+1];if(C<0||g>C+h-p)continue;let O=l[A]+h-p;y>=O?l[A+1]=g<=O?-2:-1:g>=h&&k&&(l[A]+=k,l[A+1]+=k)}p+=k}),h=t.maps[u].map(h,-1)}let c=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){c=!0,l[u+1]=-1;continue}let h=t.map(n[u]+s),p=h-i;if(p<0||p>=r.content.size){c=!0;continue}let g=t.map(n[u+1]+s,-1),y=g-i,{index:w,offset:v}=r.content.findIndex(p),k=r.maybeChild(w);if(k&&v==p&&v+k.nodeSize==y){let A=l[u+2].mapInner(t,k,h+1,n[u]+s+1,o);A!=Tn?(l[u]=p,l[u+1]=y,l[u+2]=A):(l[u+1]=-2,c=!0)}else c=!0}if(c){let u=M_(l,n,e,t,i,s,o),h=Op(u,r,0,o);e=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,g=0;p<h.children.length;p+=3){let y=h.children[p];for(;g<l.length&&l[g]<y;)g+=3;l.splice(g,0,h.children[p],h.children[p+1],h.children[p+2])}}return new Ct(e.sort(vl),l)}function mA(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new $n(i.from+e,i.to+e,i.type))}return t}function M_(n,e,t,r,i,s,o){function l(c,u){for(let h=0;h<c.local.length;h++){let p=c.local[h].map(r,i,u);p?t.push(p):o.onRemove&&o.onRemove(c.local[h].spec)}for(let h=0;h<c.children.length;h+=3)l(c.children[h+2],c.children[h]+u+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&l(n[c+2],e[c]+s+1);return t}function gA(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function yA(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Op(n,e,t,r){let i=[],s=!1;e.forEach((l,c)=>{let u=gA(n,l,c+t);if(u){s=!0;let h=Op(u,l,t+c+1,r);h!=Tn&&i.push(c,c+l.nodeSize,h)}});let o=mA(s?yA(n):n,-t).sort(vl);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Ct(o,i):Tn}function vl(n,e){return n.from-e.from||n.to-e.to}function Ky(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),Lv(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),Lv(e,i,r.copy(s.from,r.to)));break}}}return e}function Lv(n,e,t){for(;e<n.length&&vl(t,n[e])>0;)e++;n.splice(e,0,t)}function bm(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Tn&&e.push(r)}),n.cursorWrapper&&e.push(Ct.create(n.state.doc,[n.cursorWrapper.deco])),Io.from(e)}const O_={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},I_=or&&na<=11;class P_{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class R_{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new P_,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);or&&na<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():In&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),I_&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,O_)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Nv(this.view)){if(this.suppressingSelectionUpdates)return Gs(this.view);if(or&&na<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Il(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Lf(s))t.add(s);for(let s=e.anchorNode;s;s=Lf(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Nv(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,c=[];if(e.editable)for(let h=0;h<t.length;h++){let p=this.registerMutation(t[h],c);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(c.some(h=>h.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let h of c)if(h.nodeName=="BR"&&h.parentNode){let p=h.nextSibling;p&&p.nodeType==1&&p.contentEditable=="false"&&h.parentNode.removeChild(h)}}else if(Gr&&c.length){let h=c.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,g]=h;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of h){let y=g.parentNode;y&&y.nodeName=="LI"&&(!p||B_(e,p)!=y)&&g.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&U1(r)&&(u=Hy(e))&&u.eq(Ye.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gs(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),D_(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,__(e,c)),this.handleDOMChange(s,o,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Gs(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let p=e.addedNodes[h];t.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(or&&na<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:p,nextSibling:g}=e.addedNodes[h];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p),(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(s=g)}let o=i&&i.parentNode==e.target?yn(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),c=s&&s.parentNode==e.target?yn(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,c,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Bv=new WeakMap,_v=!1;function D_(n){if(!Bv.has(n)&&(Bv.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Gr,_v)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),_v=!0}}function Fv(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return Il(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function L_(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Fv(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Fv(n,t):null}function B_(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function __(n,e){var t;let{focusNode:r,focusOffset:i}=n.domSelectionRange();for(let s of e)if(((t=s.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let l=o;for(;;){let c=l.firstChild;if(!c||c.nodeType!=1||c.contentEditable=="false"||/^(BR|IMG)$/.test(c.nodeName))break;l=c}l.insertBefore(s,l.firstChild),r==s&&n.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function F_(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=n.docView.parseRange(e,t),c=n.domSelectionRange(),u,h=c.anchorNode;if(h&&n.dom.contains(h.nodeType==1?h:h.parentNode)&&(u=[{node:h,offset:c.anchorOffset}],U1(c)||u.push({node:c.focusNode,offset:c.focusOffset})),wn&&n.input.lastKeyCode===8)for(let k=s;k>i;k--){let A=r.childNodes[k-1],C=A.pmViewDesc;if(A.nodeName=="BR"&&!C){s=k;break}if(!C||C.size)break}let p=n.state.doc,g=n.someProp("domParser")||ta.fromSchema(n.state.schema),y=p.resolve(o),w=null,v=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:z_,context:y});if(u&&u[0].pos!=null){let k=u[0].pos,A=u[1]&&u[1].pos;A==null&&(A=k),w={anchor:k+o,head:A+o}}return{doc:v,sel:w,from:o,to:l}}function z_(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(In&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||In&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const U_=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function H_(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let L=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,G=Hy(n,L);if(G&&!n.state.selection.eq(G)){if(wn&&js&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ie=>ie(n,Da(13,"Enter"))))return;let ne=n.state.tr.setSelection(G);L=="pointer"?ne.setMeta("pointer",!0):L=="key"&&ne.scrollIntoView(),s&&ne.setMeta("composition",s),n.dispatch(ne)}return}let o=n.state.doc.resolve(e),l=o.sharedDepth(t);e=o.before(l+1),t=n.state.doc.resolve(t).after(l+1);let c=n.state.selection,u=F_(n,e,t),h=n.state.doc,p=h.slice(u.from,u.to),g,y;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(g=n.state.selection.to,y="end"):(g=n.state.selection.from,y="start"),n.input.lastKeyCode=null;let w=$_(p.content,u.doc.content,u.from,g,y);if(w&&n.input.domChangeCount++,(Bf&&n.input.lastIOSEnter>Date.now()-225||js)&&i.some(L=>L.nodeType==1&&!U_.test(L.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",L=>L(n,Da(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&c instanceof We&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))w={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let L=zv(n,n.state.doc,u.sel);if(L&&!L.eq(n.state.selection)){let G=n.state.tr.setSelection(L);s&&G.setMeta("composition",s),n.dispatch(G)}}return}n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof We&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=u.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=u.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),or&&na<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>u.from&&u.doc.textBetween(w.start-u.from-1,w.start-u.from+1)==" "&&(w.start--,w.endA--,w.endB--);let v=u.doc.resolveNoCache(w.start-u.from),k=u.doc.resolveNoCache(w.endB-u.from),A=h.resolve(w.start),C=v.sameParent(k)&&v.parent.inlineContent&&A.end()>=w.endA;if((Bf&&n.input.lastIOSEnter>Date.now()-225&&(!C||i.some(L=>L.nodeName=="DIV"||L.nodeName=="P"))||!C&&v.pos<u.doc.content.size&&(!v.sameParent(k)||!v.parent.inlineContent)&&v.pos<k.pos&&!/\S/.test(u.doc.textBetween(v.pos,k.pos,"","")))&&n.someProp("handleKeyDown",L=>L(n,Da(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&V_(h,w.start,w.endA,v,k)&&n.someProp("handleKeyDown",L=>L(n,Da(8,"Backspace")))){js&&wn&&n.domObserver.suppressSelectionUpdates();return}wn&&w.endB==w.start&&(n.input.lastChromeDelete=Date.now()),js&&!C&&v.start()!=k.start()&&k.parentOffset==0&&v.depth==k.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==w.endA&&(w.endB-=2,k=u.doc.resolveNoCache(w.endB-u.from),setTimeout(()=>{n.someProp("handleKeyDown",function(L){return L(n,Da(13,"Enter"))})},20));let O=w.start,N=w.endA,P=L=>{let G=L||n.state.tr.replace(O,N,u.doc.slice(w.start-u.from,w.endB-u.from));if(u.sel){let ne=zv(n,G.doc,u.sel);ne&&!(wn&&n.composing&&ne.empty&&(w.start!=w.endB||n.input.lastChromeDelete<Date.now()-100)&&(ne.head==O||ne.head==G.mapping.map(N)-1)||or&&ne.empty&&ne.head==O)&&G.setSelection(ne)}return s&&G.setMeta("composition",s),G.scrollIntoView()},B;if(C)if(v.pos==k.pos){or&&na<=11&&v.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gs(n),20));let L=P(n.state.tr.delete(O,N)),G=h.resolve(w.start).marksAcross(h.resolve(w.endA));G&&L.ensureMarks(G),n.dispatch(L)}else if(w.endA==w.endB&&(B=j_(v.parent.content.cut(v.parentOffset,k.parentOffset),A.parent.content.cut(A.parentOffset,w.endA-A.start())))){let L=P(n.state.tr);B.type=="add"?L.addMark(O,N,B.mark):L.removeMark(O,N,B.mark),n.dispatch(L)}else if(v.parent.child(v.index()).isText&&v.index()==k.index()-(k.textOffset?0:1)){let L=v.parent.textBetween(v.parentOffset,k.parentOffset),G=()=>P(n.state.tr.insertText(L,O,N));n.someProp("handleTextInput",ne=>ne(n,O,N,L,G))||n.dispatch(G())}else n.dispatch(P());else n.dispatch(P())}function zv(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:jy(n,e.resolve(t.anchor),e.resolve(t.head))}function j_(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,l,c;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<t.length;h++)s=t[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",c=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",c=h=>h.mark(l.removeFromSet(h.marks));else return null;let u=[];for(let h=0;h<e.childCount;h++)u.push(c(e.child(h)));if(ae.from(u).eq(n))return{mark:l,type:o}}function V_(n,e,t,r,i){if(t-e<=i.pos-r.pos||wm(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&t==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(wm(s,!0,!0));return!o.parent.isTextblock||o.pos>t||wm(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function wm(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function $_(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(o,l));r-=o+c-s}if(o<s&&n.size<e.size){let c=r<=s&&r>=o?s-r:0;s-=c,s&&s<e.size&&Uv(e.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-o),o=s}else if(l<s){let c=r<=s&&r>=l?s-r:0;s-=c,s&&s<n.size&&Uv(n.textBetween(s-1,s+1))&&(s+=c?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function Uv(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class bA{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new o_,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Gv),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Vv(this),jv(this),this.nodeViews=$v(this),this.docView=xv(this.state.doc,Hv(this),bm(this),this.dom,this),this.domObserver=new R_(this,(r,i,s,o)=>H_(this,r,i,s,o)),this.domObserver.start(),a_(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Hg(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Gv),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(uA(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let y=$v(this);W_(y,this.nodeViews)&&(this.nodeViews=y,s=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&Hg(this),this.editable=Vv(this),jv(this);let c=bm(this),u=Hv(this),h=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(e.doc,u,c);(p||!e.selection.eq(i.selection))&&(o=!0);let g=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&xB(this);if(o){this.domObserver.stop();let y=p&&(or||wn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&G_(i.selection,e.selection);if(p){let w=wn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=x_(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=xv(e.doc,u,c,this.dom,this)),w&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&GB(this))?Gs(this,y):(Zk(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&kB(g)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof _e){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&mv(this,t.getBoundingClientRect(),e)}else mv(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new hA(e.slice,e.move,i<0?void 0:_e.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=t?t(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=t?t(l):l))return i}}hasFocus(){if(or){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&AB(this.dom),Gs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return TB(this,e)}coordsAtPos(e,t=1){return Gk(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return RB(this,t||this.state,e)}pasteHTML(e,t){return Su(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Su(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Vy(this,e)}destroy(){this.docView&&(l_(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],bm(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,uB())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return c_(this,e)}domSelectionRange(){let e=this.domSelection();return e?In&&this.root.nodeType===11&&gB(this.dom.ownerDocument)==this.dom&&L_(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}bA.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Hv(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[$n.node(0,n.state.doc.content.size,e)]}function jv(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:$n.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Vv(n){return!n.someProp("editable",e=>e(n.state)===!1)}function G_(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function $v(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function W_(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Gv(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var oa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ip={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Q_=typeof navigator<"u"&&/Mac/.test(navigator.platform),K_=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var bn=0;bn<10;bn++)oa[48+bn]=oa[96+bn]=String(bn);for(var bn=1;bn<=24;bn++)oa[bn+111]="F"+bn;for(var bn=65;bn<=90;bn++)oa[bn]=String.fromCharCode(bn+32),Ip[bn]=String.fromCharCode(bn);for(var vm in oa)Ip.hasOwnProperty(vm)||(Ip[vm]=oa[vm]);function J_(n){var e=Q_&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||K_&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ip:oa)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const q_=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Y_=typeof navigator<"u"&&/Win/.test(navigator.platform);function X_(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))q_?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function Z_(n){let e=Object.create(null);for(let t in n)e[X_(t)]=n[t];return e}function xm(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function eF(n){return new Tt({props:{handleKeyDown:wA(n)}})}function wA(n){let e=Z_(n);return function(t,r){let i=J_(r),s,o=e[xm(i,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[xm(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Y_&&r.ctrlKey&&r.altKey)&&(s=oa[r.keyCode])&&s!=i){let l=e[xm(s,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}var tF=Object.defineProperty,Jy=(n,e)=>{for(var t in e)tF(n,t,{get:e[t],enumerable:!0})};function V1(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}var $1=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:i}=t,s=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([o,l])=>[o,(...u)=>{const h=l(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:s}=r,o=[],l=!!n,c=n||i.tr,u=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(t).map(([p,g])=>[p,(...w)=>{const v=this.buildProps(c,e),k=g(...w)(v);return o.push(k),h}])),run:u};return h}createCan(n){const{rawCommands:e,state:t}=this,r=!1,i=n||t.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:s}=r,o={tr:n,editor:r,view:s,state:V1({state:i,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)(o)]))}};return o}},vA={};Jy(vA,{blur:()=>nF,clearContent:()=>rF,clearNodes:()=>iF,command:()=>sF,createParagraphNear:()=>oF,cut:()=>aF,deleteCurrentNode:()=>lF,deleteNode:()=>fF,deleteRange:()=>cF,deleteSelection:()=>uF,enter:()=>dF,exitCode:()=>hF,extendMarkRange:()=>pF,first:()=>mF,focus:()=>yF,forEach:()=>bF,insertContent:()=>wF,insertContentAt:()=>kF,joinBackward:()=>SF,joinDown:()=>EF,joinForward:()=>CF,joinItemBackward:()=>NF,joinItemForward:()=>TF,joinTextblockBackward:()=>MF,joinTextblockForward:()=>OF,joinUp:()=>AF,keyboardShortcut:()=>PF,lift:()=>RF,liftEmptyBlock:()=>DF,liftListItem:()=>LF,newlineInCode:()=>BF,resetAttributes:()=>_F,scrollIntoView:()=>FF,selectAll:()=>zF,selectNodeBackward:()=>UF,selectNodeForward:()=>HF,selectParentNode:()=>jF,selectTextblockEnd:()=>VF,selectTextblockStart:()=>$F,setContent:()=>GF,setMark:()=>uz,setMeta:()=>dz,setNode:()=>hz,setNodeSelection:()=>pz,setTextDirection:()=>mz,setTextSelection:()=>gz,sinkListItem:()=>yz,splitBlock:()=>bz,splitListItem:()=>wz,toggleList:()=>vz,toggleMark:()=>xz,toggleNode:()=>kz,toggleWrap:()=>Az,undoInputRule:()=>Ez,unsetAllMarks:()=>Sz,unsetMark:()=>Cz,unsetTextDirection:()=>Nz,updateAttributes:()=>Tz,wrapIn:()=>Mz,wrapInList:()=>Oz});var nF=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())==null||t.removeAllRanges())}),!0),rF=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),iF=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:u,mapping:h}=e,p=u.resolve(h.map(c)),g=u.resolve(h.map(c+l.nodeSize)),y=p.blockRange(g);if(!y)return;const w=Hf(y);if(l.type.isTextblock){const{defaultType:v}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(y.start,v)}(w||w===0)&&e.lift(y,w)})}),!0},sF=n=>e=>n(e),oF=()=>({state:n,dispatch:e})=>YL(n,e),aF=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new We(r.doc.resolve(Math.max(o-1,0)))),!0},lF=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),c=i.after(s);n.delete(l,c).scrollIntoView()}return!0}return!1};function Jt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var fF=n=>({tr:e,state:t,dispatch:r})=>{const i=Jt(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const c=s.before(o),u=s.after(o);e.delete(c,u).scrollIntoView()}return!0}return!1},cF=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},uF=()=>({state:n,dispatch:e})=>zL(n,e),dF=()=>({commands:n})=>n.keyboardShortcut("Enter"),hF=()=>({state:n,dispatch:e})=>qL(n,e);function qy(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Pp(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:qy(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function xA(n,e,t={}){return n.find(r=>r.type===e&&Pp(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function Wv(n,e,t={}){return!!xA(n,e,t)}function Yy(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===e)||(t=t||((r=i.node.marks[0])==null?void 0:r.attrs),!xA([...i.node.marks],e,t)))return;let o=i.index,l=n.start()+i.offset,c=o+1,u=l+i.node.nodeSize;for(;o>0&&Wv([...n.parent.child(o-1).marks],e,t);)o-=1,l-=n.parent.child(o).nodeSize;for(;c<n.parent.childCount&&Wv([...n.parent.child(c).marks],e,t);)u+=n.parent.child(c).nodeSize,c+=1;return{from:l,to:u}}function qs(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var pF=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=qs(n,r.schema),{doc:o,selection:l}=t,{$from:c,from:u,to:h}=l;if(i){const p=Yy(c,s,e);if(p&&p.from<=u&&p.to>=h){const g=We.create(o,p.from,p.to);t.setSelection(g)}}return!0},mF=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function kA(n){return n instanceof We}function $a(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function AA(n,e=null){if(!e)return null;const t=Ye.atStart(n),r=Ye.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?We.create(n,$a(0,i,s),$a(n.content.size,i,s)):We.create(n,$a(e,i,s),$a(e,i,s))}function Qv(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Rp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function gF(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var yF=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(Rp()||Qv())&&r.dom.focus(),gF()&&!Rp()&&!Qv()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};try{if(r.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(s&&n===null&&!kA(t.state.selection))return o(),!0;const l=AA(i.doc,n)||t.state.selection,c=t.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},bF=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),wF=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),EA=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&EA(r)}return n};function Th(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return EA(t)}function Nu(n,e,t){if(n instanceof gi||n instanceof ae)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ae.fromArray(n.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),Nu("",e,t)}if(i){if(t.errorOnInvalidContent){let o=!1,l="";const c=new hk({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(t.slice?ta.fromSchema(c).parseSlice(Th(n),t.parseOptions):ta.fromSchema(c).parse(Th(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=ta.fromSchema(e);return t.slice?s.parseSlice(Th(n),t.parseOptions).content:s.parse(Th(n),t.parseOptions)}return Nu("",e,t)}function vF(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof an||i instanceof fn))return;const s=n.mapping.maps[r];let o=0;s.forEach((l,c,u,h)=>{o===0&&(o=h)}),n.setSelection(Ye.near(n.doc.resolve(o),t))}var xF=n=>!("type"in n),kF=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let l;const c=k=>{s.emit("contentError",{editor:s,error:k,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Nu(e,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(k){c(k)}try{l=Nu(e,s.schema,{parseOptions:u,errorOnInvalidContent:(o=t.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(k){return c(k),!1}let{from:h,to:p}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},g=!0,y=!0;if((xF(l)?l:[l]).forEach(k=>{k.check(),g=g?k.isText&&k.marks.length===0:!1,y=y?k.isBlock:!1}),h===p&&y){const{parent:k}=r.doc.resolve(h);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(h-=1,p+=1)}let v;if(g){if(Array.isArray(e))v=e.map(k=>k.text||"").join("");else if(e instanceof ae){let k="";e.forEach(A=>{A.text&&(k+=A.text)}),v=k}else typeof e=="object"&&e&&e.text?v=e.text:v=e;r.insertText(v,h,p)}else{v=l;const k=r.doc.resolve(h),A=k.node(),C=k.parentOffset===0,O=A.isText||A.isTextblock,N=A.content.size>0;C&&O&&N&&(h=Math.max(0,h-1)),r.replaceWith(h,p,v)}t.updateSelection&&vF(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:v}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:v})}return!0},AF=()=>({state:n,dispatch:e})=>WL(n,e),EF=()=>({state:n,dispatch:e})=>QL(n,e),SF=()=>({state:n,dispatch:e})=>UL(n,e),CF=()=>({state:n,dispatch:e})=>$L(n,e),NF=()=>({state:n,dispatch:e,tr:t})=>{try{const r=_1(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},TF=()=>({state:n,dispatch:e,tr:t})=>{try{const r=_1(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},MF=()=>({state:n,dispatch:e})=>HL(n,e),OF=()=>({state:n,dispatch:e})=>jL(n,e);function SA(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function IF(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))Rp()||SA()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}var PF=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=IF(n).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,l))});return c==null||c.steps.forEach(u=>{const h=u.map(r.mapping);h&&i&&r.maybeStep(h)}),!0};function aa(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Jt(e,n.schema):null,l=[];n.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const y=Math.max(r,g),w=Math.min(i,g+p.nodeSize);l.push({node:p,from:y,to:w})});const c=i-r,u=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>Pp(p.node.attrs,t,{strict:!1}));return s?!!u.length:u.reduce((p,g)=>p+g.to-g.from,0)>=c}var RF=(n,e={})=>({state:t,dispatch:r})=>{const i=Jt(n,t.schema);return aa(t,i,e)?KL(t,r):!1},DF=()=>({state:n,dispatch:e})=>XL(n,e),LF=n=>({state:e,dispatch:t})=>{const r=Jt(n,e.schema);return aB(r)(e,t)},BF=()=>({state:n,dispatch:e})=>JL(n,e);function G1(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Kv(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}var _F=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const l=G1(typeof n=="string"?n:n.name,r.schema);if(!l)return!1;l==="node"&&(s=Jt(n,r.schema)),l==="mark"&&(o=qs(n,r.schema));let c=!1;return t.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(h,p)=>{s&&s===h.type&&(c=!0,i&&t.setNodeMarkup(p,void 0,Kv(h.attrs,e))),o&&h.marks.length&&h.marks.forEach(g=>{o===g.type&&(c=!0,i&&t.addMark(p,p+h.nodeSize,o.create(Kv(g.attrs,e))))})})}),c},FF=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),zF=()=>({tr:n,dispatch:e})=>{if(e){const t=new $r(n.doc);n.setSelection(t)}return!0},UF=()=>({state:n,dispatch:e})=>VL(n,e),HF=()=>({state:n,dispatch:e})=>GL(n,e),jF=()=>({state:n,dispatch:e})=>ZL(n,e),VF=()=>({state:n,dispatch:e})=>nB(n,e),$F=()=>({state:n,dispatch:e})=>tB(n,e);function jg(n,e,t={},r={}){return Nu(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}var GF=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:c}=s;if(r.preserveWhitespace!=="full"){const u=jg(n,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!t),!0}return o&&s.setMeta("preventUpdate",!t),l.insertContentAt({from:0,to:c.content.size},n,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function CA(n,e){const t=qs(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===t.name);return l?{...l.attrs}:{}}function NA(n,e){const t=new Mk(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function WF(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function QF(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function KF(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function W1(n){return e=>KF(e.$from,n)}function De(n,e,t){return n.config[e]===void 0&&n.parent?De(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?De(n.parent,e,t):null}):n.config[e]}function Xy(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=De(e,"addExtensions",t);return r?[e,...Xy(r())]:e}).flat(10)}function Zy(n,e){const t=Bl.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function TA(n){return typeof n=="function"}function lt(n,e=void 0,...t){return TA(n)?e?n.bind(e)(...t):n(...t):n}function JF(n={}){return Object.keys(n).length===0&&n.constructor===Object}function _f(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function MA(n){const e=[],{nodeExtensions:t,markExtensions:r}=_f(n),i=[...t,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},o=t.filter(u=>u.name!=="text").map(u=>u.name),l=r.map(u=>u.name),c=[...o,...l];return n.forEach(u=>{const h={name:u.name,options:u.options,storage:u.storage,extensions:i},p=De(u,"addGlobalAttributes",h);if(!p)return;p().forEach(y=>{let w;Array.isArray(y.types)?w=y.types:y.types==="*"?w=c:y.types==="nodes"?w=o:y.types==="marks"?w=l:w=[],w.forEach(v=>{Object.entries(y.attributes).forEach(([k,A])=>{e.push({type:v,name:k,attribute:{...s,...A}})})})})}),i.forEach(u=>{const h={name:u.name,options:u.options,storage:u.storage},p=De(u,"addAttributes",h);if(!p)return;const g=p();Object.entries(g).forEach(([y,w])=>{const v={...s,...w};typeof(v==null?void 0:v.default)=="function"&&(v.default=v.default()),v!=null&&v.isRequired&&(v==null?void 0:v.default)===void 0&&delete v.default,e.push({type:u.name,name:y,attribute:v})})}),e}function Vt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],u=l.filter(h=>!c.includes(h));r[i]=[...c,...u].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],u=new Map;c.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());u.set(p,g)}),l.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());u.set(p,g)}),r[i]=Array.from(u.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Tu(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Vt(t,r),{})}function qF(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Jv(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(t):qF(t.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function qv(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&JF(t)?!1:t!=null))}function Yv(n){var e,t;const r={};return!((e=n==null?void 0:n.attribute)!=null&&e.isRequired)&&"default"in((n==null?void 0:n.attribute)||{})&&(r.default=n.attribute.default),((t=n==null?void 0:n.attribute)==null?void 0:t.validate)!==void 0&&(r.validate=n.attribute.validate),[n.name,r]}function YF(n,e){var t;const r=MA(n),{nodeExtensions:i,markExtensions:s}=_f(n),o=(t=i.find(u=>De(u,"topNode")))==null?void 0:t.name,l=Object.fromEntries(i.map(u=>{const h=r.filter(A=>A.type===u.name),p={name:u.name,options:u.options,storage:u.storage,editor:e},g=n.reduce((A,C)=>{const O=De(C,"extendNodeSchema",p);return{...A,...O?O(u):{}}},{}),y=qv({...g,content:lt(De(u,"content",p)),marks:lt(De(u,"marks",p)),group:lt(De(u,"group",p)),inline:lt(De(u,"inline",p)),atom:lt(De(u,"atom",p)),selectable:lt(De(u,"selectable",p)),draggable:lt(De(u,"draggable",p)),code:lt(De(u,"code",p)),whitespace:lt(De(u,"whitespace",p)),linebreakReplacement:lt(De(u,"linebreakReplacement",p)),defining:lt(De(u,"defining",p)),isolating:lt(De(u,"isolating",p)),attrs:Object.fromEntries(h.map(Yv))}),w=lt(De(u,"parseHTML",p));w&&(y.parseDOM=w.map(A=>Jv(A,h)));const v=De(u,"renderHTML",p);v&&(y.toDOM=A=>v({node:A,HTMLAttributes:Tu(A,h)}));const k=De(u,"renderText",p);return k&&(y.toText=k),[u.name,y]})),c=Object.fromEntries(s.map(u=>{const h=r.filter(k=>k.type===u.name),p={name:u.name,options:u.options,storage:u.storage,editor:e},g=n.reduce((k,A)=>{const C=De(A,"extendMarkSchema",p);return{...k,...C?C(u):{}}},{}),y=qv({...g,inclusive:lt(De(u,"inclusive",p)),excludes:lt(De(u,"excludes",p)),group:lt(De(u,"group",p)),spanning:lt(De(u,"spanning",p)),code:lt(De(u,"code",p)),attrs:Object.fromEntries(h.map(Yv))}),w=lt(De(u,"parseHTML",p));w&&(y.parseDOM=w.map(k=>Jv(k,h)));const v=De(u,"renderHTML",p);return v&&(y.toDOM=k=>v({mark:k,HTMLAttributes:Tu(k,h)})),[u.name,y]}));return new hk({topNode:o,nodes:l,marks:c})}function XF(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function Yc(n){return n.sort((t,r)=>{const i=De(t,"priority")||100,s=De(r,"priority")||100;return i>s?-1:i<s?1:0})}function OA(n){const e=Yc(Xy(n)),t=XF(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function IA(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let l="";return n.nodesBetween(r,i,(c,u,h,p)=>{var g;c.isBlock&&u>r&&(l+=s);const y=o==null?void 0:o[c.type.name];if(y)return h&&(l+=y({node:c,pos:u,parent:h,index:p,range:e})),!1;c.isText&&(l+=(g=c==null?void 0:c.text)==null?void 0:g.slice(Math.max(r,u)-u,i-u))}),l}function ZF(n,e){const t={from:0,to:n.content.size};return IA(n,t,e)}function PA(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function ez(n,e){const t=Jt(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===t.name);return o?{...o.attrs}:{}}function RA(n,e){const t=G1(typeof e=="string"?e:e.name,n.schema);return t==="node"?ez(n,e):t==="mark"?CA(n,e):{}}function tz(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function nz(n){const e=tz(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,o)=>o!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function DA(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=t[s];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const u=e.slice(s).map(l,-1),h=e.slice(s).map(c),p=e.invert().map(u,-1),g=e.invert().map(h);r.push({oldRange:{from:p,to:g},newRange:{from:u,to:h}})})}),nz(r)}function e2(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),o=Yy(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var rz=(n,e,t,r=20)=>{const i=n.doc.resolve(t);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);(l==null?void 0:l.type.name)===e?o=l:s-=1}return[o,s]};function Ic(n,e){return e.nodes[n]||e.marks[n]||null}function Zh(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var iz=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var c,u;const h=((u=(c=i.type.spec).toText)==null?void 0:u.call(c,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),t};function Vg(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?qs(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>Pp(p.attrs,t,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:g})=>{const y=p.pos,w=g.pos;n.doc.nodesBetween(y,w,(v,k)=>{if(s&&v.inlineContent&&!v.type.allowsMarkType(s))return!1;if(!v.isText&&!v.marks.length)return;const A=Math.max(y,k),C=Math.min(w,k+v.nodeSize),O=C-A;o+=O,l.push(...v.marks.map(N=>({mark:N,from:A,to:C})))})}),o===0)return!1;const c=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>Pp(p.mark.attrs,t,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),u=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,g)=>p+g.to-g.from,0);return(c>0?c+u:c)>=o}function sz(n,e,t={}){if(!e)return aa(n,null,t)||Vg(n,null,t);const r=G1(e,n.schema);return r==="node"?aa(n,e,t):r==="mark"?Vg(n,e,t):!1}var oz=(n,e)=>{const{$from:t,$to:r,$anchor:i}=n.selection;if(e){const s=W1(l=>l.type.name===e)(n.selection);if(!s)return!1;const o=n.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},az=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function Xv(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Zv(n,e){const{nodeExtensions:t}=_f(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=lt(De(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Q1(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(Q1(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function LA(n){return n instanceof _e}var BA=class _A{constructor(e){this.position=e}static fromJSON(e){return new _A(e.position)}toJSON(){return{position:this.position}}};function lz(n,e){const t=e.mapping.mapResult(n.position);return{position:new BA(t.pos),mapResult:t}}function fz(n){return new BA(n)}function cz(n,e,t){var r;const{selection:i}=e;let s=null;if(kA(i)&&(s=i.$cursor),s){const l=(r=n.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(t)&&(!!t.isInSet(l)||!l.some(u=>u.type.excludes(t)))}const{ranges:o}=i;return o.some(({$from:l,$to:c})=>{let u=l.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(l.pos,c.pos,(h,p,g)=>{if(u)return!1;if(h.isInline){const y=!g||g.type.allowsMarkType(t),w=!!t.isInSet(h.marks)||!h.marks.some(v=>v.type.excludes(t));u=y&&w}return!u}),u})}var uz=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:l}=s,c=qs(n,r.schema);if(i)if(o){const u=CA(r,c);t.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const h=u.$from.pos,p=u.$to.pos;r.doc.nodesBetween(h,p,(g,y)=>{const w=Math.max(y,h),v=Math.min(y+g.nodeSize,p);g.marks.find(A=>A.type===c)?g.marks.forEach(A=>{c===A.type&&t.addMark(w,v,c.create({...A.attrs,...e}))}):t.addMark(w,v,c.create(e))})});return cz(r,t,c)},dz=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),hz=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Jt(n,t.schema);let o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>dv(s,{...o,...e})(t)?!0:l.clearNodes()).command(({state:l})=>dv(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},pz=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=$a(n,0,r.content.size),s=_e.create(r,i);e.setSelection(s)}return!0},mz=(n,e)=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=r;let o,l;return typeof e=="number"?(o=e,l=e):e&&"from"in e&&"to"in e?(o=e.from,l=e.to):(o=s.from,l=s.to),i&&t.doc.nodesBetween(o,l,(c,u)=>{c.isText||t.setNodeMarkup(u,void 0,{...c.attrs,dir:n})}),!0},gz=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=We.atStart(r).from,l=We.atEnd(r).to,c=$a(i,o,l),u=$a(s,o,l),h=We.create(r,c,u);e.setSelection(h)}return!0},yz=n=>({state:e,dispatch:t})=>{const r=Jt(n,e.schema);return cB(r)(e,t)};function ex(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}var bz=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:c}=s,u=i.extensionManager.attributes,h=Zh(u,l.node().type.name,l.node().attrs);if(s instanceof _e&&s.node.isBlock)return!l.parentOffset||!D0(o,l.pos)?!1:(r&&(n&&ex(t,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=c.parentOffset===c.parent.content.size,g=l.depth===0?void 0:WF(l.node(-1).contentMatchAt(l.indexAfter(-1)));let y=p&&g?[{type:g,attrs:h}]:void 0,w=D0(e.doc,e.mapping.map(l.pos),1,y);if(!y&&!w&&D0(e.doc,e.mapping.map(l.pos),1,g?[{type:g}]:void 0)&&(w=!0,y=g?[{type:g,attrs:h}]:void 0),r){if(w&&(s instanceof We&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,y),g&&!p&&!l.parentOffset&&l.parent.type!==g)){const v=e.mapping.map(l.before()),k=e.doc.resolve(v);l.node(-1).canReplaceWith(k.index(),k.index()+1,g)&&e.setNodeMarkup(e.mapping.map(l.before()),g)}n&&ex(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return w},wz=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var o;const l=Jt(n,r.schema),{$from:c,$to:u}=r.selection,h=r.selection.node;if(h&&h.isBlock||c.depth<2||!c.sameParent(u))return!1;const p=c.node(-1);if(p.type!==l)return!1;const g=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let A=ae.empty;const C=c.index(-1)?1:c.index(-2)?2:3;for(let G=c.depth-C;G>=c.depth-3;G-=1)A=ae.from(c.node(G).copy(A));const O=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,N={...Zh(g,c.node().type.name,c.node().attrs),...e},P=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(N))||void 0;A=A.append(ae.from(l.createAndFill(null,P)||void 0));const B=c.before(c.depth-(C-1));t.replace(B,c.after(-O),new we(A,4-C,0));let L=-1;t.doc.nodesBetween(B,t.doc.content.size,(G,ne)=>{if(L>-1)return!1;G.isTextblock&&G.content.size===0&&(L=ne+1)}),L>-1&&t.setSelection(We.near(t.doc.resolve(L))),t.scrollIntoView()}return!0}const y=u.pos===c.end()?p.contentMatchAt(0).defaultType:null,w={...Zh(g,p.type.name,p.attrs),...e},v={...Zh(g,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,u.pos);const k=y?[{type:l,attrs:w},{type:y,attrs:v}]:[{type:l,attrs:w}];if(!D0(t.doc,c.pos,2))return!1;if(i){const{selection:A,storedMarks:C}=r,{splittableMarks:O}=s.extensionManager,N=C||A.$to.parentOffset&&A.$from.marks();if(t.split(c.pos,2,k).scrollIntoView(),!N||!i)return!0;const P=N.filter(B=>O.includes(B.type.name));t.ensureMarks(P)}return!0},km=(n,e)=>{const t=W1(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ca(n.doc,t.pos)&&n.join(t.pos),!0},Am=(n,e)=>{const t=W1(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ca(n.doc,r)&&n.join(r),!0},vz=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:c,commands:u,can:h})=>{const{extensions:p,splittableMarks:g}=i.extensionManager,y=Jt(n,o.schema),w=Jt(e,o.schema),{selection:v,storedMarks:k}=o,{$from:A,$to:C}=v,O=A.blockRange(C),N=k||v.$to.parentOffset&&v.$from.marks();if(!O)return!1;const P=W1(B=>Zv(B.type.name,p))(v);if(O.depth>=1&&P&&O.depth-P.depth<=1){if(P.node.type===y)return u.liftListItem(w);if(Zv(P.node.type.name,p)&&y.validContent(P.node.content)&&l)return c().command(()=>(s.setNodeMarkup(P.pos,y),!0)).command(()=>km(s,y)).command(()=>Am(s,y)).run()}return!t||!N||!l?c().command(()=>h().wrapInList(y,r)?!0:u.clearNodes()).wrapInList(y,r).command(()=>km(s,y)).command(()=>Am(s,y)).run():c().command(()=>{const B=h().wrapInList(y,r),L=N.filter(G=>g.includes(G.type.name));return s.ensureMarks(L),B?!0:u.clearNodes()}).wrapInList(y,r).command(()=>km(s,y)).command(()=>Am(s,y)).run()},xz=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=qs(n,r.schema);return Vg(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},kz=(n,e,t={})=>({state:r,commands:i})=>{const s=Jt(n,r.schema),o=Jt(e,r.schema),l=aa(r,s,t);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?i.setNode(o,c):i.setNode(s,{...c,...t})},Az=(n,e={})=>({state:t,commands:r})=>{const i=Jt(n,t.schema);return aa(t,i,e)?r.lift(i):r.wrapIn(i,e)},Ez=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(s.text){const c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,c))}else o.delete(s.from,s.to)}return!0}}return!1},Sz=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Cz=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=t,c=qs(n,r.schema),{$from:u,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:g,to:y}=l;const w=(s=u.marks().find(k=>k.type===c))==null?void 0:s.attrs,v=Yy(u,c,w);v&&(g=v.from,y=v.to),t.removeMark(g,y,c)}else p.forEach(g=>{t.removeMark(g.$from.pos,g.$to.pos,c)});return t.removeStoredMark(c),!0},Nz=n=>({tr:e,state:t,dispatch:r})=>{const{selection:i}=t;let s,o;return typeof n=="number"?(s=n,o=n):n&&"from"in n&&"to"in n?(s=n.from,o=n.to):(s=i.from,o=i.to),r&&e.doc.nodesBetween(s,o,(l,c)=>{if(l.isText)return;const u={...l.attrs};delete u.dir,e.setNodeMarkup(c,void 0,u)}),!0},Tz=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const l=G1(typeof n=="string"?n:n.name,r.schema);if(!l)return!1;l==="node"&&(s=Jt(n,r.schema)),l==="mark"&&(o=qs(n,r.schema));let c=!1;return t.selection.ranges.forEach(u=>{const h=u.$from.pos,p=u.$to.pos;let g,y,w,v;t.selection.empty?r.doc.nodesBetween(h,p,(k,A)=>{s&&s===k.type&&(c=!0,w=Math.max(A,h),v=Math.min(A+k.nodeSize,p),g=A,y=k)}):r.doc.nodesBetween(h,p,(k,A)=>{A<h&&s&&s===k.type&&(c=!0,w=Math.max(A,h),v=Math.min(A+k.nodeSize,p),g=A,y=k),A>=h&&A<=p&&(s&&s===k.type&&(c=!0,i&&t.setNodeMarkup(A,void 0,{...k.attrs,...e})),o&&k.marks.length&&k.marks.forEach(C=>{if(o===C.type&&(c=!0,i)){const O=Math.max(A,h),N=Math.min(A+k.nodeSize,p);t.addMark(O,N,o.create({...C.attrs,...e}))}}))}),y&&(g!==void 0&&i&&t.setNodeMarkup(g,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(k=>{o===k.type&&i&&t.addMark(w,v,o.create({...k.attrs,...e}))}))}),c},Mz=(n,e={})=>({state:t,dispatch:r})=>{const i=Jt(n,t.schema);return rB(i,e)(t,r)},Oz=(n,e={})=>({state:t,dispatch:r})=>{const i=Jt(n,t.schema);return iB(i,e)(t,r)},Iz=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(r=>r.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(r=>r!==e):delete this.callbacks[n]),this}once(n,e){const t=(...r)=>{this.off(n,t),e.apply(this,r)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},K1=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},Pz=(n,e)=>{if(qy(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Mh(n){var e;const{editor:t,from:r,to:i,text:s,rules:o,plugin:l}=n,{view:c}=t;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(g=>g.type.spec.code))return!1;let h=!1;const p=iz(u)+s;return o.forEach(g=>{if(h)return;const y=Pz(p,g.find);if(!y)return;const w=c.state.tr,v=V1({state:c.state,transaction:w}),k={from:r-(y[0].length-s.length),to:i},{commands:A,chain:C,can:O}=new $1({editor:t,state:v});g.handler({state:v,range:k,match:y,commands:A,chain:C,can:O})===null||!w.steps.length||(g.undoable&&w.setMeta(l,{transform:w,from:r,to:i,text:s}),c.dispatch(w),h=!0)}),h}function Rz(n){const{editor:e,rules:t}=n,r=new Tt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:h}=c;typeof h=="string"?h=h:h=Zy(ae.from(h),o.schema);const{from:p}=c,g=p+h.length;Mh({editor:e,from:p,to:g,text:h,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return Mh({editor:e,from:s,to:o,text:l,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Mh({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Mh({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function Dz(n){return Object.prototype.toString.call(n).slice(8,-1)}function Oh(n){return Dz(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function FA(n,e){const t={...n};return Oh(n)&&Oh(e)&&Object.keys(e).forEach(r=>{Oh(e[r])&&Oh(n[r])?t[r]=FA(n[r],e[r]):t[r]=e[r]}),t}var t2=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...lt(De(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...lt(De(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>FA(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},_l=class zA extends t2{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new zA(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===t.name))return!1;const c=o.find(u=>(u==null?void 0:u.type.name)===t.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Lz(n){return typeof n=="number"}var UA=class{constructor(n){this.find=n.find,this.handler=n.handler}},Bz=(n,e,t)=>{if(qy(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function _z(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=n,{commands:c,chain:u,can:h}=new $1({editor:e,state:t}),p=[];return t.doc.nodesBetween(r,i,(y,w)=>{var v,k,A,C,O;if((k=(v=y.type)==null?void 0:v.spec)!=null&&k.code||!(y.isText||y.isTextblock||y.isInline))return;const N=(O=(C=(A=y.content)==null?void 0:A.size)!=null?C:y.nodeSize)!=null?O:0,P=Math.max(r,w),B=Math.min(i,w+N);if(P>=B)return;const L=y.isText?y.text||"":y.textBetween(P-w,B-w,void 0,"");Bz(L,s.find,o).forEach(ne=>{if(ne.index===void 0)return;const ie=P+ne.index+1,pe=ie+ne[0].length,Oe={from:t.tr.mapping.map(ie),to:t.tr.mapping.map(pe)},Ae=s.handler({state:t,range:Oe,match:ne,commands:c,chain:u,can:h,pasteEvent:o,dropEvent:l});p.push(Ae)})}),p.every(y=>y!==null)}var Ih=null,Fz=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function zz(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:h,from:p,to:g,rule:y,pasteEvt:w})=>{const v=h.tr,k=V1({state:h,transaction:v});if(!(!_z({editor:e,state:k,from:Math.max(p-1,0),to:g.b-1,rule:y,pasteEvent:w,dropEvent:l})||!v.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return t.map(h=>new Tt({view(p){const g=w=>{var v;r=(v=p.dom.parentElement)!=null&&v.contains(w.target)?p.dom.parentElement:null,r&&(Ih=e)},y=()=>{Ih&&(Ih=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(s=r===p.dom.parentElement,l=g,!s){const y=Ih;y!=null&&y.isEditable&&setTimeout(()=>{const w=y.state.selection;w&&y.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(p,g)=>{var y;const w=(y=g.clipboardData)==null?void 0:y.getData("text/html");return o=g,i=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(p,g,y)=>{const w=p[0],v=w.getMeta("uiEvent")==="paste"&&!i,k=w.getMeta("uiEvent")==="drop"&&!s,A=w.getMeta("applyPasteRules"),C=!!A;if(!v&&!k&&!C)return;if(C){let{text:P}=A;typeof P=="string"?P=P:P=Zy(ae.from(P),y.schema);const{from:B}=A,L=B+P.length,G=Fz(P);return c({rule:h,state:y,from:B,to:{b:L},pasteEvt:G})}const O=g.doc.content.findDiffStart(y.doc.content),N=g.doc.content.findDiffEnd(y.doc.content);if(!(!Lz(O)||!N||O===N.b))return c({rule:h,state:y,from:O,to:N,pasteEvt:o})}}))}var J1=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=OA(n),this.schema=YF(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ic(e.name,this.schema)},r=De(e,"addCommands",t);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this;return Yc([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:n,type:Ic(r.name,this.schema)},s=[],o=De(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&De(r,"exitable",i)&&(l.ArrowRight=()=>_l.handleExit({editor:n,mark:r})),o){const g=Object.fromEntries(Object.entries(o()).map(([y,w])=>[y,()=>w({editor:n})]));l={...l,...g}}const c=eF(l);s.push(c);const u=De(r,"addInputRules",i);if(Xv(r,n.options.enableInputRules)&&u){const g=u();if(g&&g.length){const y=Rz({editor:n,rules:g}),w=Array.isArray(y)?y:[y];s.push(...w)}}const h=De(r,"addPasteRules",i);if(Xv(r,n.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const y=zz({editor:n,rules:g});s.push(...y)}}const p=De(r,"addProseMirrorPlugins",i);if(p){const g=p();s.push(...g)}return s})}get attributes(){return MA(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=_f(this.extensions);return Object.fromEntries(e.filter(t=>!!De(t,"addNodeView")).map(t=>{const r=this.attributes.filter(c=>c.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Jt(t.name,this.schema)},s=De(t,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const l=(c,u,h,p,g)=>{const y=Tu(c,r);return o({node:c,view:u,getPos:h,decorations:p,innerDecorations:g,editor:n,extension:t,HTMLAttributes:y})};return[t.name,l]}))}dispatchTransaction(n){const{editor:e}=this;return Yc([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Ic(i.name,this.schema)},o=De(i,"dispatchTransaction",s);return o?l=>{o.call(s,{transaction:l,next:r})}:r},n)}transformPastedHTML(n){const{editor:e}=this;return Yc([...this.extensions]).reduce((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Ic(i.name,this.schema)},o=De(i,"transformPastedHTML",s);return o?(l,c)=>{const u=r(l,c);return o.call(s,u)}:r},n||(r=>r))}get markViews(){const{editor:n}=this,{markExtensions:e}=_f(this.extensions);return Object.fromEntries(e.filter(t=>!!De(t,"addMarkView")).map(t=>{const r=this.attributes.filter(l=>l.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:qs(t.name,this.schema)},s=De(t,"addMarkView",i);if(!s)return[];const o=(l,c,u)=>{const h=Tu(l,r);return s()({mark:l,view:c,inline:u,editor:n,extension:t,HTMLAttributes:h,updateAttributes:p=>{Xz(l,n,p)}})};return[t.name,o]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ic(e.name,this.schema)};e.type==="mark"&&((t=lt(De(e,"keepOnSplit",r)))==null||t)&&this.splittableMarks.push(e.name);const i=De(e,"onBeforeCreate",r),s=De(e,"onCreate",r),o=De(e,"onUpdate",r),l=De(e,"onSelectionUpdate",r),c=De(e,"onTransaction",r),u=De(e,"onFocus",r),h=De(e,"onBlur",r),p=De(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};J1.resolve=OA;J1.sort=Yc;J1.flatten=Xy;var Uz={};Jy(Uz,{ClipboardTextSerializer:()=>jA,Commands:()=>VA,Delete:()=>$A,Drop:()=>GA,Editable:()=>WA,FocusEvents:()=>KA,Keymap:()=>JA,Paste:()=>qA,Tabindex:()=>YA,TextDirection:()=>XA,focusEventsPluginKey:()=>QA});var $t=class HA extends t2{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new HA(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},jA=$t.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Tt({key:new Xt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),c=PA(t);return IA(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),VA=$t.create({name:"commands",addCommands(){return{...vA}}}),$A=$t.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,i;const s=()=>{var o,l,c,u;if((u=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,n))!=null?u:n.getMeta("y-sync$"))return;const h=NA(n.before,[n,...e]);DA(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(w,v)=>{const k=v+w.nodeSize-2,A=y.oldRange.from<=v&&k<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:w,from:v,to:k,newFrom:h.mapping.map(v),newTo:h.mapping.map(k),deletedRange:y.oldRange,newRange:y.newRange,partial:!A,editor:this.editor,transaction:n,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((y,w)=>{var v,k;if(y instanceof mi){const A=g.slice(w).map(y.from,-1),C=g.slice(w).map(y.to),O=g.invert().map(A,-1),N=g.invert().map(C),P=(v=h.doc.nodeAt(A-1))==null?void 0:v.marks.some(L=>L.eq(y.mark)),B=(k=h.doc.nodeAt(C))==null?void 0:k.marks.some(L=>L.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:O,to:N},newRange:{from:A,to:C},partial:!!(B||P),editor:this.editor,transaction:n,combinedTransform:h})}})};(i=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),GA=$t.create({name:"drop",addProseMirrorPlugins(){return[new Tt({key:new Xt("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),WA=$t.create({name:"editable",addProseMirrorPlugins(){return[new Tt({key:new Xt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),QA=new Xt("focusEvents"),KA=$t.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Tt({key:QA,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),JA=$t.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:u}=l,{empty:h,$anchor:p}=c,{pos:g,parent:y}=p,w=p.parent.isTextblock&&g>0?l.doc.resolve(g-1):p,v=w.parent.type.spec.isolating,k=p.pos-p.parentOffset,A=v&&w.parent.childCount===1?k===p.pos:Ye.atStart(u).from===g;return!h||!y.type.isTextblock||y.textContent.length||!A||A&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Rp()||SA()?s:i},addProseMirrorPlugins(){return[new Tt({key:new Xt("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(v=>v.getMeta("composition")))return;const r=n.some(v=>v.docChanged)&&!e.doc.eq(t.doc),i=n.some(v=>v.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,c=Ye.atStart(e.doc).from,u=Ye.atEnd(e.doc).to;if(s||!(o===c&&l===u)||!Q1(t.doc))return;const g=t.tr,y=V1({state:t,transaction:g}),{commands:w}=new $1({editor:this.editor,state:y});if(w.clearNodes(),!!g.steps.length)return g}})]}}),qA=$t.create({name:"paste",addProseMirrorPlugins(){return[new Tt({key:new Xt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),YA=$t.create({name:"tabindex",addProseMirrorPlugins(){return[new Tt({key:new Xt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),XA=$t.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=_f(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Tt({key:new Xt("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),Hz=class $c{constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new $c(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new $c(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new $c(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,o=t.isInline,l=this.pos+r+(s?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(l);if(!i&&!o&&c.depth<=this.depth)return;const u=new $c(c,this.editor,i,i||o?t:null);i&&(u.actualDepth=this.depth+1),e.push(u)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,o=Object.keys(t);for(let l=0;l<o.length;l+=1){const c=o[l];if(s[c]!==t[c])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(c=>t[c]===o.node.attrs[c])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},jz=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Vz(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}var $z=class extends Iz{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:lz,createMappablePosition:fz},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=AA(e,this.options.autofocus);this.editorState=E0.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n!=null&&n.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Vz(jz,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=TA(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;t=t.filter(o=>!o.key.startsWith(s))}),e.length===t.length)return;const r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}createExtensionManager(){var n,e;const r=[...this.options.enableCoreExtensions?[WA,jA.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),VA,KA,JA,YA,GA,qA,$A,XA.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new J1(r,this)}createCommandManager(){this.commandManager=new $1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=jg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=jg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=t?this.extensionManager.dispatchTransaction(r):r,s=e.transformPastedHTML,o=this.extensionManager.transformPastedHTML(s);this.editorView=new bA(n,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,transformPastedHTML:o,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const l=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(l),this.prependClass(),this.injectCSS();const c=this.view.dom;c.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(u=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(u)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),r=!this.state.selection.eq(e.selection),i=t.includes(n),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const o=t.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),l=o==null?void 0:o.getMeta("focus"),c=o==null?void 0:o.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(n.getMeta("preventUpdate")||!t.some(u=>u.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return RA(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,r=typeof n=="string"?e:n;return sz(this.state,t,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Zy(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return ZF(this.state.doc,{blockSeparator:e,textSerializers:{...PA(this.schema),...t}})}get isEmpty(){return Q1(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new Hz(e,this)}get $doc(){return this.$pos(0)}};function Ff(n){return new K1({find:n.find,handler:({state:e,range:t,match:r})=>{const i=lt(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const c=l.search(/\S/),u=t.from+l.indexOf(o),h=u+o.length;if(e2(t.from,t.to,e.doc).filter(y=>y.mark.type.excluded.find(v=>v===n.type&&v!==y.mark.type)).filter(y=>y.to>u).length)return null;h<t.to&&s.delete(h,t.to),u>t.from&&s.delete(t.from+c,u);const g=t.from+c+o.length;s.addMark(t.from+c,g,n.type.create(i||{})),s.removeStoredMark(n.type)}},undoable:n.undoable})}function Gz(n){return new K1({find:n.find,handler:({state:e,range:t,match:r})=>{const i=lt(n.getAttributes,void 0,r)||{},{tr:s}=e,o=t.from;let l=t.to;const c=n.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let h=o+u;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,c)}else if(r[0]){const u=n.type.isInline?o:o-1;s.insert(u,n.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:n.undoable})}function $g(n){return new K1({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=lt(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)},undoable:n.undoable})}function zf(n){return new K1({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=lt(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),c=o.doc.resolve(t.from).blockRange(),u=c&&By(c,n.type,s);if(!u)return null;if(o.wrap(c,u),n.keepMarks&&n.editor){const{selection:p,storedMarks:g}=e,{splittableMarks:y}=n.editor.extensionManager,w=g||p.$to.parentOffset&&p.$from.marks();if(w){const v=w.filter(k=>y.includes(k.type.name));o.ensureMarks(v)}}if(n.keepAttributes){const p=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(t.from-1).nodeBefore;h&&h.type===n.type&&ca(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,h))&&o.join(t.from-1)},undoable:n.undoable})}function Wz(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof _e){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var Qz={};Jy(Qz,{createAtomBlockMarkdownSpec:()=>ZA,createBlockMarkdownSpec:()=>Kz,createInlineMarkdownSpec:()=>Yz,parseAttributes:()=>n2,parseIndentedBlocks:()=>Gg,renderNestedMarkdownContent:()=>i2,serializeAttributes:()=>r2});function n2(n){if(!(n!=null&&n.trim()))return{};const e={},t=[],r=n.replace(/["']([^"']*)["']/g,u=>(t.push(u),`__QUOTED_${t.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(h=>h.trim().slice(1));e.class=u.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,u,h])=>{var p;const g=parseInt(((p=h.match(/__QUOTED_(\d+)__/))==null?void 0:p[1])||"0",10),y=t[g];y&&(e[u]=y.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(h=>{h.match(/^[a-zA-Z][\w-]*$/)&&(e[h]=!0)}),e}function r2(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,r])=>{t==="class"||t==="id"||(r===!0?e.push(t):r!==!1&&r!=null&&e.push(`${t}="${String(r)}"`))}),e.join(" ")}function ZA(n){const{nodeName:e,name:t,parseAttributes:r=n2,serializeAttributes:i=r2,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:l}=n,c=t||e,u=h=>{if(!l)return h;const p={};return l.forEach(g=>{g in h&&(p[g]=h[g])}),p};return{parseMarkdown:(h,p)=>{const g={...s,...h.attributes};return p.createNode(e,g,[])},markdownTokenizer:{name:e,level:"block",start(h){var p;const g=new RegExp(`^:::${c}(?:\\s|$)`,"m"),y=(p=h.match(g))==null?void 0:p.index;return y!==void 0?y:-1},tokenize(h,p,g){const y=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),w=h.match(y);if(!w)return;const v=w[1]||"",k=r(v);if(!o.find(C=>!(C in k)))return{type:e,raw:w[0],attributes:k}}},renderMarkdown:h=>{const p=u(h.attrs||{}),g=i(p),y=g?` {${g}}`:"";return`:::${c}${y} :::`}}}function Kz(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=n2,serializeAttributes:s=r2,defaultAttributes:o={},content:l="block",allowedAttributes:c}=n,u=t||e,h=p=>{if(!c)return p;const g={};return c.forEach(y=>{y in p&&(g[y]=p[y])}),g};return{parseMarkdown:(p,g)=>{let y;if(r){const v=r(p);y=typeof v=="string"?[{type:"text",text:v}]:v}else l==="block"?y=g.parseChildren(p.tokens||[]):y=g.parseInline(p.tokens||[]);const w={...o,...p.attributes};return g.createNode(e,w,y)},markdownTokenizer:{name:e,level:"block",start(p){var g;const y=new RegExp(`^:::${u}`,"m"),w=(g=p.match(y))==null?void 0:g.index;return w!==void 0?w:-1},tokenize(p,g,y){var w;const v=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),k=p.match(v);if(!k)return;const[A,C=""]=k,O=i(C);let N=1;const P=A.length;let B="";const L=/^:::([\w-]*)(\s.*)?/gm,G=p.slice(P);for(L.lastIndex=0;;){const ne=L.exec(G);if(ne===null)break;const ie=ne.index,pe=ne[1];if(!((w=ne[2])!=null&&w.endsWith(":::"))){if(pe)N+=1;else if(N-=1,N===0){const Oe=G.slice(0,ie);B=Oe.trim();const Ae=p.slice(0,P+ie+ne[0].length);let U=[];if(B)if(l==="block")for(U=y.blockTokens(Oe),U.forEach(H=>{H.text&&(!H.tokens||H.tokens.length===0)&&(H.tokens=y.inlineTokens(H.text))});U.length>0;){const H=U[U.length-1];if(H.type==="paragraph"&&(!H.text||H.text.trim()===""))U.pop();else break}else U=y.inlineTokens(B);return{type:e,raw:Ae,attributes:O,content:B,tokens:U}}}}}},renderMarkdown:(p,g)=>{const y=h(p.attrs||{}),w=s(y),v=w?` {${w}}`:"",k=g.renderChildren(p.content||[],`

`);return`:::${u}${v}

${k}

:::`}}}function Jz(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=t.exec(n);for(;r!==null;){const[,i,s,o]=r;e[i]=s||o,r=t.exec(n)}return e}function qz(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function Yz(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=Jz,serializeAttributes:s=qz,defaultAttributes:o={},selfClosing:l=!1,allowedAttributes:c}=n,u=t||e,h=g=>{if(!c)return g;const y={};return c.forEach(w=>{const v=typeof w=="string"?w:w.name,k=typeof w=="string"?void 0:w.skipIfDefault;if(v in g){const A=g[v];if(k!==void 0&&A===k)return;y[v]=A}}),y},p=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(g,y)=>{const w={...o,...g.attributes};if(l)return y.createNode(e,w);const v=r?r(g):g.content||"";return v?y.createNode(e,w,[y.createTextNode(v)]):y.createNode(e,w,[])},markdownTokenizer:{name:e,level:"inline",start(g){const y=l?new RegExp(`\\[${p}\\s*[^\\]]*\\]`):new RegExp(`\\[${p}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${p}\\]`),w=g.match(y),v=w==null?void 0:w.index;return v!==void 0?v:-1},tokenize(g,y,w){const v=l?new RegExp(`^\\[${p}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${p}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${p}\\]`),k=g.match(v);if(!k)return;let A="",C="";if(l){const[,N]=k;C=N}else{const[,N,P]=k;C=N,A=P||""}const O=i(C.trim());return{type:e,raw:k[0],content:A.trim(),attributes:O}}},renderMarkdown:g=>{let y="";r?y=r(g):g.content&&g.content.length>0&&(y=g.content.filter(A=>A.type==="text").map(A=>A.text).join(""));const w=h(g.attrs||{}),v=s(w),k=v?` ${v}`:"";return l?`[${u}${k}]`:`[${u}${k}]${y}[/${u}]`}}}function Gg(n,e,t){var r,i,s,o;const l=n.split(`
`),c=[];let u="",h=0;const p=e.baseIndentSize||2;for(;h<l.length;){const g=l[h],y=g.match(e.itemPattern);if(!y){if(c.length>0)break;if(g.trim()===""){h+=1,u=`${u}${g}
`;continue}else return}const w=e.extractItemData(y),{indentLevel:v,mainContent:k}=w;u=`${u}${g}
`;const A=[k];for(h+=1;h<l.length;){const P=l[h];if(P.trim()===""){const L=l.slice(h+1).findIndex(ie=>ie.trim()!=="");if(L===-1)break;if((((i=(r=l[h+1+L].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>v){A.push(P),u=`${u}${P}
`,h+=1;continue}else break}if((((o=(s=P.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>v)A.push(P),u=`${u}${P}
`,h+=1;else break}let C;const O=A.slice(1);if(O.length>0){const P=O.map(B=>B.slice(v+p)).join(`
`);P.trim()&&(e.customNestedParser?C=e.customNestedParser(P):C=t.blockTokens(P))}const N=e.createToken(w,C);c.push(N)}if(c.length!==0)return{items:c,raw:u}}function i2(n,e,t,r){if(!n||!Array.isArray(n.content))return"";const i=typeof t=="function"?t(r):t,[s,...o]=n.content,l=e.renderChildren([s]),c=[`${i}${l}`];return o&&o.length>0&&o.forEach(u=>{const h=e.renderChildren([u]);if(h){const p=h.split(`
`).map(g=>g?e.indent(g):"").join(`
`);c.push(p)}}),c.join(`
`)}function Xz(n,e,t={}){const{state:r}=e,{doc:i,tr:s}=r,o=n;i.descendants((l,c)=>{const u=s.mapping.map(c),h=s.mapping.map(c)+l.nodeSize;let p=null;if(l.marks.forEach(y=>{if(y!==o)return!1;p=y}),!p)return;let g=!1;if(Object.keys(t).forEach(y=>{t[y]!==p.attrs[y]&&(g=!0)}),g){const y=n.type.create({...n.attrs,...t});s.removeMark(u,h,n.type),s.addMark(u,h,y)}}),s.docChanged&&e.view.dispatch(s)}var lr=class eE extends t2{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new eE(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Rl(n){return new UA({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=lt(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],c=r[0];let u=t.to;if(l){const h=c.search(/\S/),p=t.from+c.indexOf(l),g=p+l.length;if(e2(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(k=>k===n.type&&k!==w.mark.type)).filter(w=>w.to>p).length)return null;g<t.to&&o.delete(g,t.to),p>t.from&&o.delete(t.from+h,p),u=t.from+h+l.length,o.addMark(t.from+h,u,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function Zz(n){return new UA({find:n.find,handler({match:e,chain:t,range:r,pasteEvent:i}){const s=lt(n.getAttributes,void 0,e,i),o=lt(n.getContent,void 0,s);if(s===!1||s===null)return null;const l={type:n.type.name,attrs:s};o&&(l.content=o),e.input&&t().deleteRange(r).insertContentAt(r.from,l)}})}const{getOwnPropertyNames:eU,getOwnPropertySymbols:tU}=Object,{hasOwnProperty:nU}=Object.prototype;function Em(n,e){return function(r,i,s){return n(r,i,s)&&e(r,i,s)}}function Ph(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);const{cache:s}=i,o=s.get(t),l=s.get(r);if(o&&l)return o===r&&l===t;s.set(t,r),s.set(r,t);const c=n(t,r,i);return s.delete(t),s.delete(r),c}}function rU(n){return n!=null?n[Symbol.toStringTag]:void 0}function tx(n){return eU(n).concat(tU(n))}const iU=Object.hasOwn||((n,e)=>nU.call(n,e));function Fl(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const sU="__v",oU="__o",aU="_owner",{getOwnPropertyDescriptor:nx,keys:rx}=Object;function lU(n,e){return n.byteLength===e.byteLength&&Dp(new Uint8Array(n),new Uint8Array(e))}function fU(n,e,t){let r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function cU(n,e){return n.byteLength===e.byteLength&&Dp(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function uU(n,e){return Fl(n.getTime(),e.getTime())}function dU(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function hU(n,e){return n===e}function ix(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=n.entries();let o,l,c=0;for(;(o=s.next())&&!o.done;){const u=e.entries();let h=!1,p=0;for(;(l=u.next())&&!l.done;){if(i[p]){p++;continue}const g=o.value,y=l.value;if(t.equals(g[0],y[0],c,p,n,e,t)&&t.equals(g[1],y[1],g[0],y[0],n,e,t)){h=i[p]=!0;break}p++}if(!h)return!1;c++}return!0}const pU=Fl;function mU(n,e,t){const r=rx(n);let i=r.length;if(rx(e).length!==i)return!1;for(;i-- >0;)if(!tE(n,e,t,r[i]))return!1;return!0}function Pc(n,e,t){const r=tx(n);let i=r.length;if(tx(e).length!==i)return!1;let s,o,l;for(;i-- >0;)if(s=r[i],!tE(n,e,t,s)||(o=nx(n,s),l=nx(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function gU(n,e){return Fl(n.valueOf(),e.valueOf())}function yU(n,e){return n.source===e.source&&n.flags===e.flags}function sx(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=n.values();let o,l;for(;(o=s.next())&&!o.done;){const c=e.values();let u=!1,h=0;for(;(l=c.next())&&!l.done;){if(!i[h]&&t.equals(o.value,l.value,o.value,l.value,n,e,t)){u=i[h]=!0;break}h++}if(!u)return!1}return!0}function Dp(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function bU(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function tE(n,e,t,r){return(r===aU||r===oU||r===sU)&&(n.$$typeof||e.$$typeof)?!0:iU(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}const wU="[object ArrayBuffer]",vU="[object Arguments]",xU="[object Boolean]",kU="[object DataView]",AU="[object Date]",EU="[object Error]",SU="[object Map]",CU="[object Number]",NU="[object Object]",TU="[object RegExp]",MU="[object Set]",OU="[object String]",IU={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},PU="[object URL]",RU=Object.prototype.toString;function DU({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:h,areSetsEqual:p,areTypedArraysEqual:g,areUrlsEqual:y,unknownTagComparators:w}){return function(k,A,C){if(k===A)return!0;if(k==null||A==null)return!1;const O=typeof k;if(O!==typeof A)return!1;if(O!=="object")return O==="number"?l(k,A,C):O==="function"?s(k,A,C):!1;const N=k.constructor;if(N!==A.constructor)return!1;if(N===Object)return c(k,A,C);if(Array.isArray(k))return e(k,A,C);if(N===Date)return r(k,A,C);if(N===RegExp)return h(k,A,C);if(N===Map)return o(k,A,C);if(N===Set)return p(k,A,C);const P=RU.call(k);if(P===AU)return r(k,A,C);if(P===TU)return h(k,A,C);if(P===SU)return o(k,A,C);if(P===MU)return p(k,A,C);if(P===NU)return typeof k.then!="function"&&typeof A.then!="function"&&c(k,A,C);if(P===PU)return y(k,A,C);if(P===EU)return i(k,A,C);if(P===vU)return c(k,A,C);if(IU[P])return g(k,A,C);if(P===wU)return n(k,A,C);if(P===kU)return t(k,A,C);if(P===xU||P===CU||P===OU)return u(k,A,C);if(w){let B=w[P];if(!B){const L=rU(k);L&&(B=w[L])}if(B)return B(k,A,C)}return!1}}function LU({circular:n,createCustomConfig:e,strict:t}){let r={areArrayBuffersEqual:lU,areArraysEqual:t?Pc:fU,areDataViewsEqual:cU,areDatesEqual:uU,areErrorsEqual:dU,areFunctionsEqual:hU,areMapsEqual:t?Em(ix,Pc):ix,areNumbersEqual:pU,areObjectsEqual:t?Pc:mU,arePrimitiveWrappersEqual:gU,areRegExpsEqual:yU,areSetsEqual:t?Em(sx,Pc):sx,areTypedArraysEqual:t?Em(Dp,Pc):Dp,areUrlsEqual:bU,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),n){const i=Ph(r.areArraysEqual),s=Ph(r.areMapsEqual),o=Ph(r.areObjectsEqual),l=Ph(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return r}function BU(n){return function(e,t,r,i,s,o,l){return n(e,t,l)}}function _U({circular:n,comparator:e,createState:t,equals:r,strict:i}){if(t)return function(l,c){const{cache:u=n?new WeakMap:void 0,meta:h}=t();return e(l,c,{cache:u,equals:r,meta:h,strict:i})};if(n)return function(l,c){return e(l,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(l,c){return e(l,c,s)}}const FU=da();da({strict:!0});da({circular:!0});da({circular:!0,strict:!0});da({createInternalComparator:()=>Fl});da({strict:!0,createInternalComparator:()=>Fl});da({circular:!0,createInternalComparator:()=>Fl});da({circular:!0,createInternalComparator:()=>Fl,strict:!0});function da(n={}){const{circular:e=!1,createInternalComparator:t,createState:r,strict:i=!1}=n,s=LU(n),o=DU(s),l=t?t(o):BU(o);return _U({circular:e,comparator:o,createState:r,equals:l,strict:i})}var Sm={exports:{}},Cm={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function zU(){if(ox)return Cm;ox=1;var n=Vu(),e=q4();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue;return Cm.useSyncExternalStoreWithSelector=function(u,h,p,g,y){var w=s(null);if(w.current===null){var v={hasValue:!1,value:null};w.current=v}else v=w.current;w=l(function(){function A(B){if(!C){if(C=!0,O=B,B=g(B),y!==void 0&&v.hasValue){var L=v.value;if(y(L,B))return N=L}return N=B}if(L=N,r(O,B))return L;var G=g(B);return y!==void 0&&y(L,G)?(O=B,L):(O=B,N=G)}var C=!1,O,N,P=p===void 0?null:p;return[function(){return A(h())},P===null?void 0:function(){return A(P())}]},[h,p,g,y]);var k=i(u,w[0],w[1]);return o(function(){v.hasValue=!0,v.value=k},[k]),c(k),k},Cm}var ax;function UU(){return ax||(ax=1,Sm.exports=zU()),Sm.exports}var HU=UU(),jU=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},VU=({contentComponent:n})=>{const e=Y4.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return I.jsx(I.Fragment,{children:Object.values(e)})};function $U(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:jD.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}var GU=class extends kl.Component{constructor(n){var e;super(n),this.editorContentRef=kl.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=$U(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return I.jsxs(I.Fragment,{children:[I.jsx("div",{ref:jU(e,this.editorContentRef),...t}),(n==null?void 0:n.contentComponent)&&I.jsx(VU,{contentComponent:n.contentComponent})]})}},WU=he.forwardRef((n,e)=>{const t=kl.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return kl.createElement(GU,{key:t,innerRef:e,...n})}),nE=kl.memo(WU),QU=typeof window<"u"?he.useLayoutEffect:he.useEffect,KU=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function JU(n){var e;const[t]=he.useState(()=>new KU(n.editor)),r=HU.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:FU);return QU(()=>t.watch(n.editor),[n.editor,t]),he.useDebugValue(r),r}var qU=!1,Wg=typeof window>"u",YU=Wg||!!(typeof window<"u"&&window.next),XU=class rE{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Wg||YU?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new $z(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=t.extensions)==null?void 0:o[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?rE.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function ZU(n={},e=[]){const t=he.useRef(n);t.current=n;const[r]=he.useState(()=>new XU(t)),i=Y4.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return he.useDebugValue(i),he.useEffect(r.onRender(e)),JU({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&s===0?0:s+1}),i}var iE=he.createContext({editor:null});iE.Consumer;var eH=he.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),tH=()=>he.useContext(eH);kl.forwardRef((n,e)=>{const{onDragStart:t}=tH(),r=n.as||"div";return I.jsx(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});kl.createContext({markViewContentRef:()=>{}});var s2=he.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});s2.displayName="TiptapContext";var nH=()=>he.useContext(s2);function sE({editor:n,instance:e,children:t}){const r=n??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=he.useMemo(()=>({editor:r}),[r]),s=he.useMemo(()=>({editor:r}),[r]);return I.jsx(iE.Provider,{value:s,children:I.jsx(s2.Provider,{value:i,children:t})})}sE.displayName="Tiptap";function oE({...n}){const{editor:e}=nH();return I.jsx(nE,{editor:e,...n})}oE.displayName="Tiptap.Content";Object.assign(sE,{Content:oE});var Lp=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},rH=/^\s*>\s$/,iH=lr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Lp("blockquote",{...Vt(this.options.HTMLAttributes,n),children:Lp("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",r=[];return n.content.forEach(i=>{const l=e.renderChildren([i]).split(`
`).map(c=>c.trim()===""?t:`${t} ${c}`);r.push(l.join(`
`))}),r.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[zf({find:rH,type:this.type})]}}),sH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,oH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,aH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,lH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,fH=_l.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Lp("strong",{...Vt(this.options.HTMLAttributes,n),children:Lp("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ff({find:sH,type:this.type}),Ff({find:aH,type:this.type})]},addPasteRules(){return[Rl({find:oH,type:this.type}),Rl({find:lH,type:this.type})]}}),cH=/(^|[^`])`([^`]+)`(?!`)$/,uH=/(^|[^`])`([^`]+)`(?!`)/g,dH=_l.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Vt(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ff({find:cH,type:this.type})]},addPasteRules(){return[Rl({find:uH,type:this.type})]}}),Nm=4,hH=/^```([a-z]+)?[\s\n]$/,pH=/^~~~([a-z]+)?[\s\n]$/,mH=lr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Nm,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const s=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Vt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let r="";const i=((t=n.attrs)==null?void 0:t.language)||"";return n.content?r=[`\`\`\`${i}`,e.renderChildren(n.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:Nm,{state:r}=n,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const l=" ".repeat(t);return o?n.commands.insertContent(l):n.commands.command(({tr:c})=>{const{from:u,to:h}=i,y=r.doc.textBetween(u,h,`
`,`
`).split(`
`).map(w=>l+w).join(`
`);return c.replaceWith(u,h,r.schema.text(y)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:Nm,{state:r}=n,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?n.commands.command(({tr:l})=>{var c;const{pos:u}=s,h=s.start(),p=s.end(),y=r.doc.textBetween(h,p,`
`,`
`).split(`
`);let w=0,v=0;const k=u-h;for(let B=0;B<y.length;B+=1){if(v+y[B].length>=k){w=B;break}v+=y[B].length+1}const C=((c=y[w].match(/^ */))==null?void 0:c[0])||"",O=Math.min(C.length,t);if(O===0)return!0;let N=h;for(let B=0;B<w;B+=1)N+=y[B].length+1;return l.delete(N,N+O),u-N<=O&&l.setSelection(We.create(l.doc,N)),!0}):n.commands.command(({tr:l})=>{const{from:c,to:u}=i,g=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(y=>{var w;const v=((w=y.match(/^ */))==null?void 0:w[0])||"",k=Math.min(v.length,t);return y.slice(k)}).join(`
`);return l.replaceWith(c,u,r.schema.text(g)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?n.commands.command(({tr:u})=>(u.setSelection(Ye.near(r.resolve(l))),!0)):n.commands.exitCode()}}},addInputRules(){return[$g({find:hH,type:this.type,getAttributes:n=>({language:n[1]})}),$g({find:pH,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Tt({key:new Xt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:o,schema:l}=n.state,c=l.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(We.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),gH=lr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),yH=lr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Vt(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:h})=>{if(h&&c&&o){const p=c.filter(g=>l.includes(g.type.name));u.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),bH=lr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Vt(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const r=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,i="#".repeat(r);return n.content?`${i} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>$g({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),wH=lr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Vt(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!Wz(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,i=n();return LA(t)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(We.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(_e.create(o.doc,c.pos)):o.setSelection(We.create(o.doc,c.pos));else{const h=s.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,p=h==null?void 0:h.create();p&&(o.insert(u,p),o.setSelection(We.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Gz({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),vH=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,xH=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,kH=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,AH=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,EH=_l.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Vt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ff({find:vH,type:this.type}),Ff({find:kH,type:this.type})]},addPasteRules(){return[Rl({find:xH,type:this.type}),Rl({find:AH,type:this.type})]}});const SH="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",CH="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Qg="numeric",Kg="ascii",Jg="alpha",Xc="asciinumeric",Gc="alphanumeric",qg="domain",aE="emoji",NH="scheme",TH="slashscheme",Tm="whitespace";function MH(n,e){return n in e||(e[n]=[]),e[n]}function Ga(n,e,t){e[Qg]&&(e[Xc]=!0,e[Gc]=!0),e[Kg]&&(e[Xc]=!0,e[Jg]=!0),e[Xc]&&(e[Gc]=!0),e[Jg]&&(e[Gc]=!0),e[Gc]&&(e[qg]=!0),e[aE]&&(e[qg]=!0);for(const r in e){const i=MH(r,t);i.indexOf(n)<0&&i.push(n)}}function OH(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function ir(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}ir.groups={};ir.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||ir.groups;let i;return e&&e.j?i=e:(i=new ir(e),t&&r&&Ga(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(n[o]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||ir.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let o,l=i.go(n);if(l?(o=new ir,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new ir,s){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(OH(o.t,r),t);Ga(s,c,r)}else t&&Ga(s,t,r);o.t=s}return i.j[n]=o,o}};const Je=(n,e,t,r,i)=>n.ta(e,t,r,i),Pt=(n,e,t,r,i)=>n.tr(e,t,r,i),lx=(n,e,t,r,i)=>n.ts(e,t,r,i),ce=(n,e,t,r,i)=>n.tt(e,t,r,i),xs="WORD",Yg="UWORD",lE="ASCIINUMERICAL",fE="ALPHANUMERICAL",Mu="LOCALHOST",Xg="TLD",Zg="UTLD",ep="SCHEME",w0="SLASH_SCHEME",o2="NUM",ey="WS",a2="NL",Zc="OPENBRACE",eu="CLOSEBRACE",Bp="OPENBRACKET",_p="CLOSEBRACKET",Fp="OPENPAREN",zp="CLOSEPAREN",Up="OPENANGLEBRACKET",Hp="CLOSEANGLEBRACKET",jp="FULLWIDTHLEFTPAREN",Vp="FULLWIDTHRIGHTPAREN",$p="LEFTCORNERBRACKET",Gp="RIGHTCORNERBRACKET",Wp="LEFTWHITECORNERBRACKET",Qp="RIGHTWHITECORNERBRACKET",Kp="FULLWIDTHLESSTHAN",Jp="FULLWIDTHGREATERTHAN",qp="AMPERSAND",Yp="APOSTROPHE",Xp="ASTERISK",To="AT",Zp="BACKSLASH",e1="BACKTICK",t1="CARET",Po="COLON",l2="COMMA",n1="DOLLAR",Di="DOT",r1="EQUALS",f2="EXCLAMATION",Rr="HYPHEN",tu="PERCENT",i1="PIPE",s1="PLUS",o1="POUND",nu="QUERY",c2="QUOTE",cE="FULLWIDTHMIDDLEDOT",u2="SEMI",Li="SLASH",ru="TILDE",a1="UNDERSCORE",uE="EMOJI",l1="SYM";var dE=Object.freeze({__proto__:null,ALPHANUMERICAL:fE,AMPERSAND:qp,APOSTROPHE:Yp,ASCIINUMERICAL:lE,ASTERISK:Xp,AT:To,BACKSLASH:Zp,BACKTICK:e1,CARET:t1,CLOSEANGLEBRACKET:Hp,CLOSEBRACE:eu,CLOSEBRACKET:_p,CLOSEPAREN:zp,COLON:Po,COMMA:l2,DOLLAR:n1,DOT:Di,EMOJI:uE,EQUALS:r1,EXCLAMATION:f2,FULLWIDTHGREATERTHAN:Jp,FULLWIDTHLEFTPAREN:jp,FULLWIDTHLESSTHAN:Kp,FULLWIDTHMIDDLEDOT:cE,FULLWIDTHRIGHTPAREN:Vp,HYPHEN:Rr,LEFTCORNERBRACKET:$p,LEFTWHITECORNERBRACKET:Wp,LOCALHOST:Mu,NL:a2,NUM:o2,OPENANGLEBRACKET:Up,OPENBRACE:Zc,OPENBRACKET:Bp,OPENPAREN:Fp,PERCENT:tu,PIPE:i1,PLUS:s1,POUND:o1,QUERY:nu,QUOTE:c2,RIGHTCORNERBRACKET:Gp,RIGHTWHITECORNERBRACKET:Qp,SCHEME:ep,SEMI:u2,SLASH:Li,SLASH_SCHEME:w0,SYM:l1,TILDE:ru,TLD:Xg,UNDERSCORE:a1,UTLD:Zg,UWORD:Yg,WORD:xs,WS:ey});const bs=/[a-z]/,Rc=new RegExp("\\p{L}","u"),Mm=new RegExp("\\p{Emoji}","u"),ws=/\d/,Om=/\s/,fx="\r",Im=`
`,IH="",PH="",Pm="";let Rh=null,Dh=null;function RH(n=[]){const e={};ir.groups=e;const t=new ir;Rh==null&&(Rh=cx(SH)),Dh==null&&(Dh=cx(CH)),ce(t,"'",Yp),ce(t,"{",Zc),ce(t,"}",eu),ce(t,"[",Bp),ce(t,"]",_p),ce(t,"(",Fp),ce(t,")",zp),ce(t,"<",Up),ce(t,">",Hp),ce(t,"",jp),ce(t,"",Vp),ce(t,"",$p),ce(t,"",Gp),ce(t,"",Wp),ce(t,"",Qp),ce(t,"",Kp),ce(t,"",Jp),ce(t,"&",qp),ce(t,"*",Xp),ce(t,"@",To),ce(t,"`",e1),ce(t,"^",t1),ce(t,":",Po),ce(t,",",l2),ce(t,"$",n1),ce(t,".",Di),ce(t,"=",r1),ce(t,"!",f2),ce(t,"-",Rr),ce(t,"%",tu),ce(t,"|",i1),ce(t,"+",s1),ce(t,"#",o1),ce(t,"?",nu),ce(t,'"',c2),ce(t,"/",Li),ce(t,";",u2),ce(t,"~",ru),ce(t,"_",a1),ce(t,"\\",Zp),ce(t,"",cE);const r=Pt(t,ws,o2,{[Qg]:!0});Pt(r,ws,r);const i=Pt(r,bs,lE,{[Xc]:!0}),s=Pt(r,Rc,fE,{[Gc]:!0}),o=Pt(t,bs,xs,{[Kg]:!0});Pt(o,ws,i),Pt(o,bs,o),Pt(i,ws,i),Pt(i,bs,i);const l=Pt(t,Rc,Yg,{[Jg]:!0});Pt(l,bs),Pt(l,ws,s),Pt(l,Rc,l),Pt(s,ws,s),Pt(s,bs),Pt(s,Rc,s);const c=ce(t,Im,a2,{[Tm]:!0}),u=ce(t,fx,ey,{[Tm]:!0}),h=Pt(t,Om,ey,{[Tm]:!0});ce(t,Pm,h),ce(u,Im,c),ce(u,Pm,h),Pt(u,Om,h),ce(h,fx),ce(h,Im),Pt(h,Om,h),ce(h,Pm,h);const p=Pt(t,Mm,uE,{[aE]:!0});ce(p,"#"),Pt(p,Mm,p),ce(p,IH,p);const g=ce(p,PH);ce(g,"#"),Pt(g,Mm,p);const y=[[bs,o],[ws,i]],w=[[bs,null],[Rc,l],[ws,s]];for(let v=0;v<Rh.length;v++)Ao(t,Rh[v],Xg,xs,y);for(let v=0;v<Dh.length;v++)Ao(t,Dh[v],Zg,Yg,w);Ga(Xg,{tld:!0,ascii:!0},e),Ga(Zg,{utld:!0,alpha:!0},e),Ao(t,"file",ep,xs,y),Ao(t,"mailto",ep,xs,y),Ao(t,"http",w0,xs,y),Ao(t,"https",w0,xs,y),Ao(t,"ftp",w0,xs,y),Ao(t,"ftps",w0,xs,y),Ga(ep,{scheme:!0,ascii:!0},e),Ga(w0,{slashscheme:!0,ascii:!0},e),n=n.sort((v,k)=>v[0]>k[0]?1:-1);for(let v=0;v<n.length;v++){const k=n[v][0],C=n[v][1]?{[NH]:!0}:{[TH]:!0};k.indexOf("-")>=0?C[qg]=!0:bs.test(k)?ws.test(k)?C[Xc]=!0:C[Kg]=!0:C[Qg]=!0,lx(t,k,k,C)}return lx(t,"localhost",Mu,{ascii:!0}),t.jd=new ir(l1),{start:t,tokens:Object.assign({groups:e},dE)}}function hE(n,e){const t=DH(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=t.length,i=[];let s=0,o=0;for(;o<r;){let l=n,c=null,u=0,h=null,p=-1,g=-1;for(;o<r&&(c=l.go(t[o]));)l=c,l.accepts()?(p=0,g=0,h=l):p>=0&&(p+=t[o].length,g++),u+=t[o].length,s+=t[o].length,o++;s-=p,o-=g,u-=p,i.push({t:h.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function DH(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,o=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(o),r+=o.length}return e}function Ao(n,e,t,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const c=e[l];n.j[c]?s=n.j[c]:(s=new ir(r),s.jr=i.slice(),n.j[c]=s),n=s}return s=new ir(t),s.jr=i.slice(),n.j[e[o-1]]=s,s}function cx(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let o=parseInt(n.substring(r,r+s),10);o>0;o--)t.pop();r+=s}else t.push(n[r]),r++}return e}const Ou={defaultProtocol:"http",events:null,format:ux,formatHref:ux,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function d2(n,e=null){let t=Object.assign({},Ou);n&&(t=Object.assign(t,n instanceof d2?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}d2.prototype={o:Ou,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:Ou[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function ux(n){return n}function pE(n,e){this.t="token",this.v=n,this.tk=e}pE.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Ou.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),o={},l=n.get("className",t,e),c=n.get("target",t,e),u=n.get("rel",t,e),h=n.getObj("attributes",t,e),p=n.getObj("events",t,e);return o.href=r,l&&(o.class=l),c&&(o.target=c),u&&(o.rel=u),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function q1(n,e){class t extends pE{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const dx=q1("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),hx=q1("text"),LH=q1("nl"),Lh=q1("url",{isLink:!0,toHref(n=Ou.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Mu&&n[1].t===Po}}),Pr=n=>new ir(n);function BH({groups:n}){const e=n.domain.concat([qp,Xp,To,Zp,e1,t1,n1,r1,Rr,o2,tu,i1,s1,o1,Li,l1,ru,a1]),t=[Yp,Po,l2,Di,f2,tu,nu,c2,u2,Up,Hp,Zc,eu,_p,Bp,Fp,zp,jp,Vp,$p,Gp,Wp,Qp,Kp,Jp],r=[qp,Yp,Xp,Zp,e1,t1,n1,r1,Rr,Zc,eu,tu,i1,s1,o1,nu,Li,l1,ru,a1],i=Pr(),s=ce(i,ru);Je(s,r,s),Je(s,n.domain,s);const o=Pr(),l=Pr(),c=Pr();Je(i,n.domain,o),Je(i,n.scheme,l),Je(i,n.slashscheme,c),Je(o,r,s),Je(o,n.domain,o);const u=ce(o,To);ce(s,To,u),ce(l,To,u),ce(c,To,u);const h=ce(s,Di);Je(h,r,s),Je(h,n.domain,s);const p=Pr();Je(u,n.domain,p),Je(p,n.domain,p);const g=ce(p,Di);Je(g,n.domain,p);const y=Pr(dx);Je(g,n.tld,y),Je(g,n.utld,y),ce(u,Mu,y);const w=ce(p,Rr);ce(w,Rr,w),Je(w,n.domain,p),Je(y,n.domain,p),ce(y,Di,g),ce(y,Rr,w);const v=ce(y,Po);Je(v,n.numeric,dx);const k=ce(o,Rr),A=ce(o,Di);ce(k,Rr,k),Je(k,n.domain,o),Je(A,r,s),Je(A,n.domain,o);const C=Pr(Lh);Je(A,n.tld,C),Je(A,n.utld,C),Je(C,n.domain,o),Je(C,r,s),ce(C,Di,A),ce(C,Rr,k),ce(C,To,u);const O=ce(C,Po),N=Pr(Lh);Je(O,n.numeric,N);const P=Pr(Lh),B=Pr();Je(P,e,P),Je(P,t,B),Je(B,e,P),Je(B,t,B),ce(C,Li,P),ce(N,Li,P);const L=ce(l,Po),G=ce(c,Po),ne=ce(G,Li),ie=ce(ne,Li);Je(l,n.domain,o),ce(l,Di,A),ce(l,Rr,k),Je(c,n.domain,o),ce(c,Di,A),ce(c,Rr,k),Je(L,n.domain,P),ce(L,Li,P),ce(L,nu,P),Je(ie,n.domain,P),Je(ie,e,P),ce(ie,Li,P);const pe=[[Zc,eu],[Bp,_p],[Fp,zp],[Up,Hp],[jp,Vp],[$p,Gp],[Wp,Qp],[Kp,Jp]];for(let Oe=0;Oe<pe.length;Oe++){const[Ae,U]=pe[Oe],H=ce(P,Ae);ce(B,Ae,H),ce(H,U,P);const z=Pr(Lh);Je(H,e,z);const Y=Pr();Je(H,t),Je(z,e,z),Je(z,t,Y),Je(Y,e,z),Je(Y,t,Y),ce(z,U,P),ce(Y,U,P)}return ce(i,Mu,C),ce(i,a2,LH),{start:i,tokens:dE}}function _H(n,e,t){let r=t.length,i=0,s=[],o=[];for(;i<r;){let l=n,c=null,u=null,h=0,p=null,g=-1;for(;i<r&&!(c=l.go(t[i].t));)o.push(t[i++]);for(;i<r&&(u=c||l.go(t[i].t));)c=null,l=u,l.accepts()?(g=0,p=l):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(o.push(t[i]),i++);else{o.length>0&&(s.push(Rm(hx,e,o)),o=[]),i-=g,h-=g;const y=p.t,w=t.slice(i-h,i);s.push(Rm(y,e,w))}}return o.length>0&&s.push(Rm(hx,e,o)),s}function Rm(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const FH=typeof console<"u"&&console&&console.warn||(()=>{}),zH="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",vt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function UH(){return ir.groups={},vt.scanner=null,vt.parser=null,vt.tokenQueue=[],vt.pluginQueue=[],vt.customSchemes=[],vt.initialized=!1,vt}function px(n,e=!1){if(vt.initialized&&FH(`linkifyjs: already initialized - will not register custom scheme "${n}" ${zH}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);vt.customSchemes.push([n,e])}function HH(){vt.scanner=RH(vt.customSchemes);for(let n=0;n<vt.tokenQueue.length;n++)vt.tokenQueue[n][1]({scanner:vt.scanner});vt.parser=BH(vt.scanner.tokens);for(let n=0;n<vt.pluginQueue.length;n++)vt.pluginQueue[n][1]({scanner:vt.scanner,parser:vt.parser});return vt.initialized=!0,vt}function h2(n){return vt.initialized||HH(),_H(vt.parser.start,n,hE(vt.scanner.start,n))}h2.scan=hE;function mE(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new d2(t),i=h2(n),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var p2="[\0- -\u2029]",jH=new RegExp(p2),VH=new RegExp(`${p2}$`),$H=new RegExp(p2,"g");function GH(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function WH(n){return new Tt({key:new Xt("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(u=>u.docChanged)&&!t.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=NA(t.doc,[...e]);if(DA(l).forEach(({newRange:u})=>{const h=QF(r.doc,u,y=>y.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(u.from,u.to," "," ");if(!VH.test(y))return;p=h[0],g=r.doc.textBetween(p.pos,u.to,void 0," ")}if(p&&g){const y=g.split(jH).filter(Boolean);if(y.length<=0)return!1;const w=y[y.length-1],v=p.pos+g.lastIndexOf(w);if(!w)return!1;const k=h2(w).map(A=>A.toObject(n.defaultProtocol));if(!GH(k))return!1;k.filter(A=>A.isLink).map(A=>({...A,from:v+A.start+1,to:v+A.end+1})).filter(A=>r.schema.marks.code?!r.doc.rangeHasMark(A.from,A.to,r.schema.marks.code):!0).filter(A=>n.validate(A.value)).filter(A=>n.shouldAutoLink(A.value)).forEach(A=>{e2(A.from,A.to,r.doc).some(C=>C.mark.type===n.type)||o.addMark(A.from,A.to,n.type.create({href:A.href}))})}}),!!o.steps.length)return o}})}function QH(n){return new Tt({key:new Xt("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const c=r.target;if(!c)return!1;const u=n.editor.view.dom;o=c.closest("a"),o&&!u.contains(o)&&(o=null)}if(!o)return!1;let l=!1;if(n.enableClickSelection&&(l=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const c=RA(e.state,n.type.name),u=(i=o.href)!=null?i:c.href,h=(s=o.target)!=null?s:c.target;u&&(window.open(u,h),l=!0)}return l}}})}function KH(n){return new Tt({key:new Xt("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{shouldAutoLink:i}=n,{state:s}=e,{selection:o}=s,{empty:l}=o;if(l)return!1;let c="";r.content.forEach(h=>{c+=h.textContent});const u=mE(c,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===c);return!c||!u||i!==void 0&&!i(u.value)?!1:n.editor.commands.setMark(n.type,{href:u.href})}}})}function Ma(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace($H,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var gE=_l.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){px(n);return}px(n.scheme,n.optionalSlashes)})},onDestroy(){UH()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Ma(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const i=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Ma(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Ma(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Vt(this.options.HTMLAttributes,n),0]:["a",Vt(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,r,i,s;const o=(r=(t=n.attrs)==null?void 0:t.href)!=null?r:"",l=(s=(i=n.attrs)==null?void 0:i.title)!=null?s:"",c=e.renderChildren(n);return l?`[${c}](${o} "${l}")`:`[${c}](${o})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Ma(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!Ma(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Rl({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=mE(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Ma(o,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(WH({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Ma(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(QH({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(KH({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),JH=gE,qH=Object.defineProperty,YH=(n,e)=>{for(var t in e)qH(n,t,{get:e[t],enumerable:!0})},XH="listItem",mx="textStyle",gx=/^\s*([-+*])\s$/,yE=lr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Vt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(XH,this.editor.getAttributes(mx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=zf({find:gx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=zf({find:gx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mx),editor:this.editor})),[n]}}),bE=lr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Vt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(i=>i.type==="paragraph"))t=e.parseChildren(n.tokens);else{const i=n.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(i.tokens)}],n.tokens.length>1){const o=n.tokens.slice(1),l=e.parseChildren(o);t.push(...l)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>i2(n,e,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ZH={};YH(ZH,{findListItemPos:()=>nd,getNextListDepth:()=>m2,handleBackspace:()=>ty,handleDelete:()=>ny,hasListBefore:()=>wE,hasListItemAfter:()=>ej,hasListItemBefore:()=>vE,listItemHasSubList:()=>xE,nextListIsDeeper:()=>kE,nextListIsHigher:()=>AE});var nd=(n,e)=>{const{$from:t}=e.selection,r=Jt(n,e.schema);let i=null,s=t.depth,o=t.pos,l=null;for(;s>0&&l===null;)i=t.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},m2=(n,e)=>{const t=nd(n,e);if(!t)return!1;const[,r]=rz(e,n,t.$pos.pos+4);return r},wE=(n,e,t)=>{const{$anchor:r}=n.selection,i=Math.max(0,r.pos-2),s=n.doc.resolve(i).node();return!(!s||!t.includes(s.type.name))},vE=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((t=i.nodeBefore)==null?void 0:t.type.name)!==n)},xE=(n,e,t)=>{if(!t)return!1;const r=Jt(n,e.schema);let i=!1;return t.descendants(s=>{s.type===r&&(i=!0)}),i},ty=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!aa(n.state,e)&&wE(n.state,e,t)){const{$anchor:l}=n.state.selection,c=n.state.doc.resolve(l.before()-1),u=[];c.node().descendants((g,y)=>{g.type.name===e&&u.push({node:g,pos:y})});const h=u.at(-1);if(!h)return!1;const p=n.state.doc.resolve(c.start()+h.pos+1);return n.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!aa(n.state,e)||!az(n.state))return!1;const r=nd(e,n.state);if(!r)return!1;const s=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=xE(e,n.state,s);return vE(e,n.state)&&!o?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},kE=(n,e)=>{const t=m2(n,e),r=nd(n,e);return!r||!t?!1:t>r.depth},AE=(n,e)=>{const t=m2(n,e),r=nd(n,e);return!r||!t?!1:t<r.depth},ny=(n,e)=>{if(!aa(n.state,e)||!oz(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:i}=t;return!t.empty&&r.sameParent(i)?!1:kE(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():AE(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},ej=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((t=i.nodeAfter)==null?void 0:t.type.name)!==n)},EE=$t.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&ny(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&ny(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&ty(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&ty(n,t,r)&&(e=!0)}),e}}}}),yx=/^(\s*)(\d+)\.\s+(.*)$/,tj=/^\s/;function nj(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t],s=i.match(yx);if(!s)break;const[,o,l,c]=s,u=o.length;let h=c,p=t+1;const g=[i];for(;p<n.length;){const y=n[p];if(y.match(yx))break;if(y.trim()==="")g.push(y),h+=`
`,p+=1;else if(y.match(tj))g.push(y),h+=`
${y.slice(u+2)}`,p+=1;else break}e.push({indent:u,number:parseInt(l,10),content:h.trim(),raw:g.join(`
`)}),r=p,t=p}return[e,r]}function SE(n,e,t){var r;const i=[];let s=0;for(;s<n.length;){const o=n[s];if(o.indent===e){const l=o.content.split(`
`),c=((r=l[0])==null?void 0:r.trim())||"",u=[];c&&u.push({type:"paragraph",raw:c,tokens:t.inlineTokens(c)});const h=l.slice(1).join(`
`).trim();if(h){const y=t.blockTokens(h);u.push(...y)}let p=s+1;const g=[];for(;p<n.length&&n[p].indent>e;)g.push(n[p]),p+=1;if(g.length>0){const y=Math.min(...g.map(v=>v.indent)),w=SE(g,y,t);u.push({type:"list",ordered:!0,start:g[0].number,items:w,raw:g.map(v=>v.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:u}),s=p}else s+=1}return i}function rj(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const r=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var ij="listItem",bx="textStyle",wx=/^(\d+)\.\s$/,CE=lr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Vt(this.options.HTMLAttributes,t),0]:["ol",Vt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,r=n.items?rj(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:r}:{type:"orderedList",content:r}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e==null?void 0:e.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var r;const i=n.split(`
`),[s,o]=nj(i);if(s.length===0)return;const l=SE(s,0,t);return l.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:l,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ij,this.editor.getAttributes(bx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=zf({find:wx,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=zf({find:wx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(bx)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),sj=/^\s*(\[([( |x])?\])\s$/,oj=lr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Vt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const r=e.parseChildren(n.nestedTokens);t.push(...r)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const i=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return i2(n,e,i)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),u=p=>{var g,y;l.ariaLabel=((y=(g=this.options.a11y)==null?void 0:g.checkboxLabel)==null?void 0:y.call(g,p,l.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};u(n),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",p=>p.preventDefault()),l.addEventListener("change",p=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:g}=p.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:y})=>{const w=t();if(typeof w!="number")return!1;const v=y.doc.nodeAt(w);return y.setNodeMarkup(w,void 0,{...v==null?void 0:v.attrs,checked:g}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,g)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,g])=>{i.setAttribute(p,g)}),i.dataset.checked=n.attrs.checked,l.checked=n.attrs.checked,s.append(l,o),i.append(s,c),Object.entries(e).forEach(([p,g])=>{i.setAttribute(p,g)});let h=new Set(Object.keys(e));return{dom:i,contentDOM:c,update:p=>{if(p.type!==this.type)return!1;i.dataset.checked=p.attrs.checked,l.checked=p.attrs.checked,u(p);const g=r.extensionManager.attributes,y=Tu(p,g),w=new Set(Object.keys(y)),v=this.options.HTMLAttributes;return h.forEach(k=>{w.has(k)||(k in v?i.setAttribute(k,v[k]):i.removeAttribute(k))}),Object.entries(y).forEach(([k,A])=>{A==null?k in v?i.setAttribute(k,v[k]):i.removeAttribute(k):i.setAttribute(k,A)}),h=w,!0}}}},addInputRules(){return[zf({find:sj,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),aj=lr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Vt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const r=s=>{const o=Gg(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:t.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:r},t);return o?[{type:"taskList",raw:o.raw,items:o.items}]:t.blockTokens(s)},i=Gg(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:t.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},t);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});$t.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(yE.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(bE.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(EE.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(CE.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(oj.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(aj.configure(this.options.taskList)),n}});var vx="&nbsp;",lj="",fj=lr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Vt(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const r=e.parseInline(t);return r.length===1&&r[0].type==="text"&&(r[0].text===vx||r[0].text===lj)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?vx:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),cj=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,uj=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,dj=_l.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Vt(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ff({find:cj,type:this.type})]},addPasteRules(){return[Rl({find:uj,type:this.type})]}}),hj=lr.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),pj=_l.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Vt(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:t.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function mj(n={}){return new Tt({view(e){return new gj(e,n)}})}class gj{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(t){let p=e.nodeBefore,g=e.nodeAfter;if(p||g){let y=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(y){let w=y.getBoundingClientRect(),v=p?w.bottom:w.top;p&&g&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*l;r={left:w.left,right:w.right,top:v-k,bottom:v+k}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let u,h;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,h=-pageYOffset;else{let p=c.getBoundingClientRect(),g=p.width/c.offsetWidth,y=p.height/c.offsetHeight;u=p.left-c.scrollLeft*g,h=p.top-c.scrollTop*y}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Ek(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Lt extends Ye{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Lt.valid(r)?new Lt(r):Ye.near(r)}content(){return we.empty}eq(e){return e instanceof Lt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Lt(e.resolve(t.pos))}getBookmark(){return new g2(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!yj(e)||!bj(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Lt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(t>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let c=e.doc.resolve(i);if(Lt.valid(c))return c}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!_e.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let l=e.doc.resolve(i);if(Lt.valid(l))return l}return null}}}Lt.prototype.visible=!1;Lt.findFrom=Lt.findGapCursorFrom;Ye.jsonID("gapcursor",Lt);class g2{constructor(e){this.pos=e}map(e){return new g2(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Lt.valid(t)?new Lt(t):Ye.near(t)}}function NE(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function yj(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||NE(i.type))return!0;if(i.inlineContent)return!1}}return!0}function bj(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||NE(i.type))return!0;if(i.inlineContent)return!1}}return!0}function wj(){return new Tt({props:{decorations:Aj,createSelectionBetween(n,e,t){return e.pos==t.pos&&Lt.valid(t)?new Lt(t):null},handleClick:xj,handleKeyDown:vj,handleDOMEvents:{beforeinput:kj}}})}const vj=wA({ArrowLeft:Bh("horiz",-1),ArrowRight:Bh("horiz",1),ArrowUp:Bh("vert",-1),ArrowDown:Bh("vert",1)});function Bh(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,c=o.empty;if(o instanceof We){if(!s.endOfTextblock(t)||l.depth==0)return!1;c=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=Lt.findGapCursorFrom(l,e,c);return u?(i&&i(r.tr.setSelection(new Lt(u))),!0):!1}}function xj(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Lt.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&_e.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Lt(r))),!0)}function kj(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Lt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=ae.empty;for(let o=r.length-1;o>=0;o--)i=ae.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new we(i,0,0));return s.setSelection(We.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function Aj(n){if(!(n.selection instanceof Lt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ct.create(n.doc,[$n.widget(n.selection.head,e,{key:"gapcursor"})])}var f1=200,cn=function(){};cn.prototype.append=function(e){return e.length?(e=cn.from(e),!this.length&&e||e.length<f1&&this.leafAppend(e)||this.length<f1&&e.leafPrepend(this)||this.appendInner(e)):this};cn.prototype.prepend=function(e){return e.length?cn.from(e).append(this):this};cn.prototype.appendInner=function(e){return new Ej(this,e)};cn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?cn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};cn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};cn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};cn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};cn.from=function(e){return e instanceof cn?e:e&&e.length?new TE(e):cn.empty};var TE=function(n){function e(r){n.call(this),this.values=r}e.__proto__=n,e.prototype=Object.create(n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var c=s;c<o;c++)if(i(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var c=s-1;c>=o;c--)if(i(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=f1)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=f1)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(cn);cn.empty=new TE([]);var Ej=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return e.__proto__=n,e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(cn);const Sj=500;class pi{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,c,u=[],h=[];return this.items.forEach((p,g)=>{if(!p.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new Bi(p.map));let y=p.step.map(i.slice(s)),w;y&&o.maybeStep(y).doc&&(w=o.mapping.maps[o.mapping.maps.length-1],u.push(new Bi(w,void 0,void 0,u.length+h.length))),s--,w&&i.appendMap(w,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,c=new pi(this.items.slice(0,r).append(h.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(e,t,r,i){let s=[],o=this.eventCount,l=this.items,c=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<e.steps.length;h++){let p=e.steps[h].invert(e.docs[h]),g=new Bi(e.mapping.maps[h],p,t),y;(y=c&&c.merge(g))&&(g=y,h?s.pop():l=l.slice(0,l.length-1)),s.push(g),t&&(o++,t=void 0),i||(c=g)}let u=o-r.depth;return u>Nj&&(l=Cj(l,u),o-=u),new pi(l.append(s),o)}remapping(e,t){let r=new ku;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new pi(this.items.append(e.map(t=>new Bi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(g=>{g.selection&&l--},i);let c=t;this.items.forEach(g=>{let y=s.getMirror(--c);if(y==null)return;o=Math.min(o,y);let w=s.maps[y];if(g.step){let v=e.steps[y].invert(e.docs[y]),k=g.selection&&g.selection.map(s.slice(c+1,y));k&&l++,r.push(new Bi(w,v,k))}else r.push(new Bi(w))},i);let u=[];for(let g=t;g<o;g++)u.push(new Bi(s.maps[g]));let h=this.items.slice(0,i).append(u).append(r),p=new pi(h,l);return p.emptyItemCount()>Sj&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let c=o.step.map(t.slice(r)),u=c&&c.getMap();if(r--,u&&t.appendMap(u,r),c){let h=o.selection&&o.selection.map(t.slice(r));h&&s++;let p=new Bi(u.invert(),c,h),g,y=i.length-1;(g=i.length&&i[y].merge(p))?i[y]=g:i.push(p)}}else o.map&&r--},this.items.length,0),new pi(cn.from(i.reverse()),s)}}pi.empty=new pi(cn.empty,0);function Cj(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Bi{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Bi(t.getMap().invert(),t,this.selection)}}}class Mo{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Nj=20;function Tj(n,e,t,r){let i=t.getMeta(xl),s;if(i)return i.historyState;t.getMeta(Ij)&&(n=new Mo(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(xl))return o.getMeta(xl).redo?new Mo(n.done.addTransform(t,void 0,r,tp(e)),n.undone,xx(t.mapping.maps),n.prevTime,n.prevComposition):new Mo(n.done,n.undone.addTransform(t,void 0,r,tp(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=t.getMeta("composition"),c=n.prevTime==0||!o&&n.prevComposition!=l&&(n.prevTime<(t.time||0)-r.newGroupDelay||!Mj(t,n.prevRanges)),u=o?Dm(n.prevRanges,t.mapping):xx(t.mapping.maps);return new Mo(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,tp(e)),pi.empty,u,t.time,l??n.prevComposition)}else return(s=t.getMeta("rebased"))?new Mo(n.done.rebased(t,s),n.undone.rebased(t,s),Dm(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Mo(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Dm(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function Mj(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function xx(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,o)=>e.push(s,o));return e}function Dm(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function Oj(n,e,t){let r=tp(e),i=xl.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new Mo(t?l:s.remaining,t?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(xl,{redo:t,historyState:c})}let Lm=!1,kx=null;function tp(n){let e=n.plugins;if(kx!=e){Lm=!1,kx=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Lm=!0;break}}return Lm}const xl=new Xt("history"),Ij=new Xt("closeHistory");function Pj(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Tt({key:xl,state:{init(){return new Mo(pi.empty,pi.empty,null,0,-1)},apply(e,t,r){return Tj(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?OE:r=="historyRedo"?IE:null;return!i||!e.editable?!1:(t.preventDefault(),i(e.state,e.dispatch))}}}})}function ME(n,e){return(t,r)=>{let i=xl.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=Oj(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const OE=ME(!1,!0),IE=ME(!0,!0);$t.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc;if(((n==null?void 0:n.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new Tt({key:new Xt("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const i=this.options.limit;if(i==null||i===0){n=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(l,c);return n=!0,u}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:t.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,c=s-r,u=l-c,h=l;return e.deleteRange(u,h),!(this.storage.characters({node:e.doc})>r)}})]}});var Rj=$t.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[mj(this.options)]}});$t.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Tt({key:new Xt("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!t||!r)return Ct.create(n,[]);let o=0;this.options.mode==="deepest"&&n.descendants((c,u)=>{if(c.isText)return;if(!(i>=u&&i<=u+c.nodeSize-1))return!1;o+=1});let l=0;return n.descendants((c,u)=>{if(c.isText||!(i>=u&&i<=u+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push($n.node(u,u+c.nodeSize,{class:this.options.className}))}),Ct.create(n,s)}}})]}});var Dj=$t.create({name:"gapCursor",addProseMirrorPlugins(){return[wj()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=lt(De(n,"allowGapCursor",t)))!=null?e:null}}}),Ax="placeholder";function Lj(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var Bj=$t.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:Ax,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${Lj(this.options.dataAttribute)}`:`data-${Ax}`;return[new Tt({key:new Xt("placeholder"),props:{decorations:({doc:e,selection:t})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=t,s=[];if(!r)return null;const o=this.editor.isEmpty;return e.descendants((l,c)=>{const u=i>=c&&i<=c+l.nodeSize,h=!l.isLeaf&&Q1(l);if((u||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const g=$n.node(c,c+l.nodeSize,{class:p.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:c,hasAnchor:u}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),Ct.create(e,s)}}})]}});$t.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new Tt({key:new Xt("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||LA(t.selection)||n.view.dragging?null:Ct.create(t.doc,[$n.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function Ex({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||(e==null?void 0:e.type)===n}var _j=$t.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new Xt(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(t).includes(i.name));return[new Tt({key:e,appendTransaction:(i,s,o)=>{const{doc:l,tr:c,schema:u}=o,h=e.getState(o),p=l.content.size,g=u.nodes[t];if(h)return c.insert(p,g.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!Ex({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!Ex({node:o,types:r})}}})]}}),Fj=$t.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>OE(n,e),redo:()=>({state:n,dispatch:e})=>IE(n,e)}},addProseMirrorPlugins(){return[Pj(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),zj=$t.create({name:"starterKit",addExtensions(){var n,e,t,r;const i=[];return this.options.bold!==!1&&i.push(fH.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(iH.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(yE.configure(this.options.bulletList)),this.options.code!==!1&&i.push(dH.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(mH.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(gH.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Rj.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Dj.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(yH.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(bH.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Fj.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(wH.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(EH.configure(this.options.italic)),this.options.listItem!==!1&&i.push(bE.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(EE.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&i.push(gE.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(CE.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(fj.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(dj.configure(this.options.strike)),this.options.text!==!1&&i.push(hj.configure(this.options.text)),this.options.underline!==!1&&i.push(pj.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&i.push(_j.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Uj=zj,Hj=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,jj=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,PE=n=>n.match(Hj),Sx=(n,e)=>e?"https://www.youtube-nocookie.com/embed/videoseries?list=":n?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",Vj=n=>{const{url:e,allowFullscreen:t,autoplay:r,ccLanguage:i,ccLoadPolicy:s,controls:o,disableKBcontrols:l,enableIFrameApi:c,endTime:u,interfaceLanguage:h,ivLoadPolicy:p,loop:g,modestBranding:y,nocookie:w,origin:v,playlist:k,progressBarColor:A,startAt:C,rel:O}=n;if(!PE(e))return null;if(e.includes("/embed/"))return e;if(e.includes("youtu.be")){const G=e.split("/").pop();return G?`${Sx(w)}${G}`:null}const P=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(e);if(!P||!P[2])return null;let B=`${Sx(w,P[1]==="list")}${P[2]}`;const L=[];return t===!1&&L.push("fs=0"),r&&L.push("autoplay=1"),i&&L.push(`cc_lang_pref=${i}`),s&&L.push("cc_load_policy=1"),o||L.push("controls=0"),l&&L.push("disablekb=1"),c&&L.push("enablejsapi=1"),u&&L.push(`end=${u}`),h&&L.push(`hl=${h}`),p&&L.push(`iv_load_policy=${p}`),g&&L.push("loop=1"),y&&L.push("modestbranding=1"),v&&L.push(`origin=${v}`),k&&L.push(`playlist=${k}`),C&&L.push(`start=${C}`),A&&L.push(`color=${A}`),O!==void 0&&L.push(`rel=${O}`),L.length&&(B+=`${P[1]==="list"?"&":"?"}${L.join("&")}`),B},$j=lr.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:n=>({commands:e})=>PE(n.src)?e.insertContent({type:this.name,attrs:n}):!1}},addPasteRules(){return this.options.addPasteHandler?[Zz({find:jj,type:this.type,getAttributes:n=>({src:n.input})})]:[]},renderHTML({HTMLAttributes:n}){const e=Vj({url:n.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:n.start||0,rel:this.options.rel});return n.src=e,["div",{"data-youtube-video":""},["iframe",Vt(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},n)]]},...ZA({nodeName:"youtube",allowedAttributes:["src","width","height","start"]})}),Gj=$j,Wj=Bj;const Cx=[{value:0,label:"ROOT"},{value:1,label:"EVIDENCE"},{value:2,label:"REFERENCE"},{value:3,label:"CONTEXT"},{value:4,label:"EXAMPLE"},{value:5,label:"COUNTERPOINT"},{value:6,label:"SYNTHESIS"}],Qj={ROOT:"Root Title",EVIDENCE:"Source",EXAMPLE:"Example Title",COUNTERPOINT:"Argument",REFERENCE:"Title",CONTEXT:"Title",SYNTHESIS:"Title"},Kj={ROOT:"Describe this root node...",EVIDENCE:"Present your evidence...",EXAMPLE:"Describe this example...",COUNTERPOINT:"Explain the counterpoint...",REFERENCE:"Write reference content...",CONTEXT:"Provide context...",SYNTHESIS:"Write your synthesis..."},Jj=({editor:n})=>{if(!n)return null;const e=he.useCallback(()=>{const s=window.prompt("URL:");s&&n.chain().focus().extendMarkRange("link").setLink({href:s}).run()},[n]),t=he.useCallback(()=>{const s=window.prompt("YouTube URL:");s&&n.commands.setYoutubeVideo({src:s})},[n]),r=({onClick:s,active:o,children:l})=>I.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:l}),i=()=>I.jsx("span",{className:"ne-toolbar-divider"});return I.jsxs("div",{className:"ne-toolbar",children:[I.jsx(r,{onClick:()=>n.chain().focus().toggleBold().run(),active:n.isActive("bold"),children:"B"}),I.jsx(r,{onClick:()=>n.chain().focus().toggleItalic().run(),active:n.isActive("italic"),children:"I"}),I.jsx(r,{onClick:()=>n.chain().focus().toggleStrike().run(),active:n.isActive("strike"),children:"S"}),I.jsx(i,{}),I.jsx(r,{onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),active:n.isActive("heading",{level:1}),children:"H1"}),I.jsx(r,{onClick:()=>n.chain().focus().toggleHeading({level:2}).run(),active:n.isActive("heading",{level:2}),children:"H2"}),I.jsx(r,{onClick:()=>n.chain().focus().toggleHeading({level:3}).run(),active:n.isActive("heading",{level:3}),children:"H3"}),I.jsx(i,{}),I.jsx(r,{onClick:()=>n.chain().focus().toggleBulletList().run(),active:n.isActive("bulletList"),children:"Bullet"}),I.jsx(r,{onClick:()=>n.chain().focus().toggleOrderedList().run(),active:n.isActive("orderedList"),children:"Ordered"}),I.jsx(r,{onClick:()=>n.chain().focus().toggleBlockquote().run(),active:n.isActive("blockquote"),children:"Quote"}),I.jsx(r,{onClick:()=>n.chain().focus().toggleCodeBlock().run(),active:n.isActive("codeBlock"),children:"Code"}),I.jsx(i,{}),I.jsx(r,{onClick:e,active:n.isActive("link"),children:"Link"}),I.jsx(r,{onClick:t,children:"YouTube"})]})},qj=({thread:n,selectedNode:e,onSubmit:t,onCancel:r})=>{var v;const i=(e==null?void 0:e.type)==="thread",[s,o]=he.useState(()=>i?"0":"1"),[l,c]=he.useState(""),[u,h]=he.useState(""),p=((v=Cx[Number(s)])==null?void 0:v.label)||"EVIDENCE",g=ZU({extensions:[Uj,JH.configure({openOnClick:!1}),Gj.configure({width:640,height:360}),Wj.configure({placeholder:Kj[p]||"Write your content..."})],content:""}),y=()=>{if(!g||!l.trim())return;const k=g.getHTML();let A,C;switch(p){case"ROOT":A=JSON.stringify({title:l,description:k,keywords:u.split(",").map(N=>N.trim()).filter(Boolean)}),C=l;break;case"EVIDENCE":A=JSON.stringify({point:k,source:l}),C=g.getText().substring(0,100);break;case"EXAMPLE":A=JSON.stringify({title:l,description:k}),C=g.getText().substring(0,100);break;case"COUNTERPOINT":A=JSON.stringify({argument:l,explanation:k}),C=l;break;default:A=k,C=g.getText().substring(0,100)}C.length===100&&(C+="...");const O=i?null:parseInt(String(e.id).replace("node-",""),10);t({id:e.id,type:e.type,newNode:{title:l,content:A,description:C,type:Number(s),parentId:O,threadId:n.id,metadata:{title:l||"New Node",description:C,content:A,type:p}}})},w=l.trim()&&g&&!g.isEmpty;return I.jsxs("div",{className:"ne-page",children:[I.jsxs("header",{className:"ne-header",children:[I.jsx("button",{className:"ne-back",onClick:r,children:" Back to graph"}),I.jsx("button",{className:"ne-submit",disabled:!w,onClick:y,children:"Add Node"})]}),I.jsx("div",{className:"ne-body",children:I.jsxs("div",{className:"ne-column",children:[I.jsx("select",{className:"ne-select",value:s,onChange:k=>o(k.target.value),children:Cx.filter(k=>i||k.label!=="ROOT").map(k=>I.jsx("option",{value:k.value,children:k.label},k.value))}),I.jsx("input",{className:"ne-title-input",type:"text",placeholder:Qj[p]||"Title",value:l,onChange:k=>c(k.target.value)}),p==="ROOT"&&I.jsx("input",{className:"ne-keywords-input",type:"text",placeholder:"Keywords (comma-separated)",value:u,onChange:k=>h(k.target.value)}),I.jsxs("div",{children:[I.jsx(Jj,{editor:g}),I.jsx("div",{className:"ne-editor-wrapper",children:I.jsx(nE,{editor:g})})]})]})})]})};function Yj(){var He,ge;const[n,e]=he.useState(null),[t,r]=he.useState(null),[i,s]=he.useState([]),[o,l]=he.useState(""),[c,u]=he.useState(""),[h,p]=he.useState(""),[g,y]=he.useState(!1),[w,v]=he.useState(null),[k,A]=he.useState(null);he.useState(""),he.useState(0);const[C,O]=he.useState(null),[N,P]=he.useState("");he.useState({});const[B,L]=he.useState(null),[G,ne]=he.useState(!1),[ie,pe]=he.useState(""),[Oe,Ae]=he.useState(!1),[U,H]=he.useState(!1),[z,Y]=he.useState(!1),[V,X]=he.useState(!1),[q,R]=he.useState([]),[Q,ve]=he.useState(!1),me=he.useRef(null),[Ie,Be]=he.useState(!1),[Fe,Re]=he.useState("graph"),[Qe,ct]=he.useState(null),Zt=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"];he.useEffect(()=>{V&&kt()},[]);async function fr(){try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7A69",chainName:"Hardhat Local",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["http://127.0.0.1:8545"]}]}),!0}catch(te){return console.error("Error setting up network:",te),!1}}async function kt(){if(typeof window.ethereum<"u")try{console.log("Connecting to wallet and setting up contract...");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7A69"}]})}catch($e){if($e.code===4902){if(!await fr())return}else{console.error("Failed to switch network:",$e);return}}const te=await window.ethereum.request({method:"eth_requestAccounts"});e(te[0]);const ye=new uO("http://127.0.0.1:8545"),ee=await ye.getSigner(te[0]);console.log("Setting up contract with address:",wh.canonThread);const Le=new pl(wh.canonThread,xO.abi,ee);try{if(await ye.getCode(wh.canonThread)==="0x"){console.error("No contract deployed at the specified address");return}}catch($e){console.error("Error verifying contract deployment:",$e);return}r(Le),console.log("Contract setup complete");const et=new pl(wh.canonToken,OO.abi,ee);O(et),v(null),await Ar(),window.ethereum.on("accountsChanged",$e=>{$e.length===0?(e(null),r(null)):(e($e[0]),kt())}),window.ethereum.on("chainChanged",()=>{window.location.reload()})}catch(te){console.error("Error connecting to wallet:",te)}}async function Mt(te){try{const ye=new FormData,ee=new Blob([JSON.stringify(te)],{type:"application/json"});ye.append("path",ee);const $e=(await(await fetch("http://localhost:5001/api/v0/add",{method:"POST",body:ye})).json()).Hash;if(!$e||$e.length!==46||!$e.startsWith("Qm"))throw new Error("Invalid IPFS hash format. Must start with Qm and be 46 characters long.");return $e}catch(ye){throw console.error("Error uploading to IPFS:",ye),ye}}async function es(){try{if(y(!0),v(null),!o.trim()){v("Title is required"),y(!1);return}if(console.log("Creating thread with content:",{title:o,description:c,content:h}),V&&t){const te={title:o,description:c,createdAt:new Date().toISOString(),version:1},ye={title:o,content:h,lastUpdated:new Date().toISOString()},ee=await Mt(te),Le=await Mt(ye);await(await t.createThread(ee,Le)).wait();const $e=await t.threadCounter();l(""),u(""),p(""),ne(!1),await Ar(),L(Number($e))}else{const te=await _i.createThread({title:o,description:c,content:"",metadata:{createdAt:new Date().toISOString(),version:1,title:o,description:c}});console.log("Created thread:",te),l(""),u(""),p(""),ne(!1),await Ai(),L(te.id),Re("article")}}catch(te){console.error("Error creating thread:",te),v("Failed to create thread: "+te.message)}finally{y(!1)}}async function un(te){try{const ye=await fetch(`http://localhost:8080/ipfs/${te}`);if(!ye.ok)throw new Error(`IPFS request failed with status ${ye.status}`);return await ye.json()}catch(ye){console.error("Error fetching from IPFS:",ye);try{const ee=await fetch(`http://localhost:5001/api/v0/cat?arg=${te}`);if(!ee.ok)throw new Error(`IPFS API request failed with status ${ee.status}`);return await ee.json()}catch(ee){return console.error("Error fetching from IPFS API:",ee),null}}}async function Ar(){if(!t||!n){console.log("Contract or account not initialized:",{contract:!!t,account:!!n});return}try{console.log("Loading on-chain threads...");const te=await t.threadCounter();if(console.log("Thread count:",te),te>0){const ee=Number(te),Le=await t.threads(ee);if(Le&&Le.creator!=="0x0000000000000000000000000000000000000000"){const et=await un(Le.metadataHash),$e=await un(Le.contentHash),mt={...Le,metadata:et,content:$e,nodes:[],id:ee,hasVoted:!1,votesFor:ps("0"),votesAgainst:ps("0"),proposalDeadline:0,hasActiveProposal:!1};s([mt]),L(ee),(async()=>{const Gt=await t.nodeCounter(),Si=await t.proposalCounter(),Ci=Math.floor(Date.now()/1e3),Ni=await t.hasVoted(ee,n),en=[];for(let tt=1;tt<=Gt;tt++){const Me=await t.nodes(tt);if(Me&&Me.threadId.toString()===ee.toString()&&Me.contentHash!==""){const Jr=await un(Me.metadataHash),cr=await un(Me.contentHash),st=await t.hasVoted(tt,n);en.push({...Me,metadata:Jr,content:cr,id:tt,type:Number(Me.nodeType),hasVoted:st})}}let Kr=ps("0"),Z=ps("0"),Ee=0,Ve=!1;for(let tt=1;tt<=Si;tt++){const Me=await t.proposals(tt);if(Me.threadId.toString()===ee.toString()&&!Me.executed){Kr=Me.votesFor,Z=Me.votesAgainst,Ee=Number(Me.deadline),Ve=Ci<Ee+60;break}}s(tt=>[{...tt[0],nodes:en,hasVoted:Ni,votesFor:Kr,votesAgainst:Z,proposalDeadline:Ee,hasActiveProposal:Ve}])})()}}(async()=>{const ee=await t.nodeCounter(),Le=await t.proposalCounter(),et=Math.floor(Date.now()/1e3);for(let $e=te-1;$e>=1;$e--){const mt=await t.threads($e);if(mt&&mt.creator!=="0x0000000000000000000000000000000000000000"){const Ot=await un(mt.metadataHash),Gt=await un(mt.contentHash);s(Ee=>[...Ee,{...mt,metadata:Ot,content:Gt,nodes:[],id:$e,hasVoted:!1,votesFor:ps("0"),votesAgainst:ps("0"),proposalDeadline:0,hasActiveProposal:!1}]);const Si=await t.hasVoted($e,n),Ci=[];for(let Ee=1;Ee<=ee;Ee++){const Ve=await t.nodes(Ee);if(Ve&&Ve.threadId.toString()===$e.toString()&&Ve.contentHash!==""){const tt=await un(Ve.metadataHash),Me=await un(Ve.contentHash),Jr=await t.hasVoted(Ee,n);Ci.push({...Ve,metadata:tt,content:Me,id:Ee,type:Number(Ve.nodeType),hasVoted:Jr})}}let Ni=ps("0"),en=ps("0"),Kr=0,Z=!1;for(let Ee=1;Ee<=Le;Ee++){const Ve=await t.proposals(Ee);if(Ve.threadId.toString()===$e.toString()&&!Ve.executed){Ni=Ve.votesFor,en=Ve.votesAgainst,Kr=Number(Ve.deadline),Z=et<Kr+60;break}}s(Ee=>Ee.map(Ve=>Ve.id===$e?{...Ve,nodes:Ci,hasVoted:Si,votesFor:Ni,votesAgainst:en,proposalDeadline:Kr,hasActiveProposal:Z}:Ve))}}})()}catch(te){console.error("Error loading threads:",te),v("Failed to load on-chain threads: "+te.message)}}const zl=te=>{A(te)},ha=()=>{A(null)},xi=async(te,ye)=>{if(!(!t||!C||!n))try{y(!0),v(null);const ee=ps(N);await(await C.approve(t.target,ee)).wait(),await(await t.vote(te,ye,ee)).wait(),P(""),A(null),Ar()}catch(ee){console.error("Error voting:",ee),v("Error voting: "+(ee.message||"Unknown error occurred"))}finally{y(!1)}},ki=async te=>{var ye;if(!(!t||!C||!n))try{y(!0),v(null);const ee=await t.MINIMUM_STAKE();console.log("Minimum stake required:",iN(ee),"CANON");const Le={title:`Update Proposal for ${te.type==="thread"?"Thread":"Node"} ${te.id}`,description:"Proposal to update content",createdAt:new Date().toISOString()},et={content:((ye=te.content)==null?void 0:ye.content)||"",lastUpdated:new Date().toISOString()},$e=await Mt(Le),mt=await Mt(et);console.log("Approving tokens..."),await(await C.approve(t.target,ee)).wait(),console.log("Creating proposal..."),await(await t.proposeUpdate(te.id,$e,mt,ee)).wait(),console.log("Proposal created"),await Ar(),A(null)}catch(ee){console.error("Error creating proposal:",ee),v("Error creating proposal: "+(ee.message||"Unknown error occurred"))}finally{y(!1)}},ts=async te=>{if(V&&(!t||!n)){console.log("No contract or account for on-chain operation");return}const{id:ye,newNode:ee}=te;if(console.log("Creating node with data:",ee),!(ee!=null&&ee.title)||!(ee!=null&&ee.content)){console.log("Missing node data");return}try{if(y(!0),v(null),V){const Le={title:ee.title,description:ee.content.substring(0,100)+(ee.content.length>100?"...":""),createdAt:new Date().toISOString()},et={content:ee.content,lastUpdated:new Date().toISOString()},$e=await Mt(Le),mt=await Mt(et);await(await t.createNode(ye,$e,mt,ee.type)).wait(),await Ar()}else{console.log("Creating off-chain node with type:",ee.type);const Le=typeof ee.type=="number"?Zt[ee.type]:ee.type||Zt[0],et=await _i.createNode({threadId:ee.threadId,title:ee.title,content:ee.content,nodeType:Le,parentId:ee.parentId,metadata:{title:ee.title,description:ee.content.substring(0,100)+(ee.content.length>100?"...":""),createdAt:new Date().toISOString()}}),{nodes:$e,edges:mt}=await _i.getThreadNodes(ee.threadId),Ot={...te,nodes:$e.map(Gt=>({...Gt,id:Gt.id,type:Zt.indexOf(Gt.node_type),content:Gt.content,parent_id:Gt.parent_id})),edges:mt};await Ai()}A(null)}catch(Le){console.error("Error creating node:",Le),v("Failed to create node: "+Le.message)}finally{y(!1)}},Ai=async()=>{try{const te=await _i.getThreads();console.log("Loaded threads:",te);const ye=await Promise.all(te.map(async ee=>{var $e;const{nodes:Le,edges:et}=await _i.getThreadNodes(ee.id);return console.log(`Loaded nodes for thread ${ee.id}:`,Le),{...ee,content:ee.content||(($e=ee.metadata)==null?void 0:$e.content),nodes:Le.map(mt=>{var Ot;return{...mt,content:mt.content||((Ot=mt.metadata)==null?void 0:Ot.content),type:Zt.indexOf(mt.node_type)}}),edges:et}}));console.log("Threads with nodes:",ye),R(ye),!B&&ye.length>0&&L(ye[0].id)}catch(te){console.error("Error loading off-chain threads:",te),v("Failed to load off-chain threads")}};he.useEffect(()=>{V?kt():Ai()},[]);const Qr=V?i:q;he.useEffect(()=>{t&&V&&Ar()},[t]);const Er=Qr.find(te=>te.id===B),pa=Er?[Er]:[],ns=he.useMemo(()=>ie?Qr.filter(te=>{var ye,ee;return(ee=(ye=te.metadata)==null?void 0:ye.title)==null?void 0:ee.toLowerCase().includes(ie.toLowerCase())}):[],[Qr,ie]),rs=he.useCallback(()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),H(!1)):(document.documentElement.requestFullscreen().catch(te=>{console.error(`Error attempting to enable full-screen mode: ${te.message}`)}),H(!0))},[]),Ys=async()=>{if(V)try{const te=await fetch("http://localhost:5001/api/v0/id",{method:"POST",headers:{"Content-Type":"application/json"}});if(!te.ok)throw new Error(`IPFS request failed with status ${te.status}`);const ye=await te.json();if(ye&&ye.ID)return ve(!0),!0;throw new Error("Invalid IPFS response")}catch(te){return te.message.includes("Failed to fetch")?console.error("IPFS daemon not running"):console.error("IPFS connection failed:",te),ve(!1),!1}};he.useEffect(()=>{if(V){Ys();const te=setInterval(Ys,3e4);return()=>clearInterval(te)}else ve(!1)},[V]),he.useEffect(()=>{function te(ye){me.current&&!me.current.contains(ye.target)&&Y(!1)}return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[]);const Ei=async te=>{const ye=te.target.value;pe(ye),Ae(!!ye)},de=async te=>{if(te.key==="Enter"&&ie.trim()){te.preventDefault();try{Be(!0);const ye=await _i.searchThreads(ie);if(ye.length===0){const ee=await _i.generateThread(ie);L(ee.id),await Ai(),pe(""),Ae(!1)}else R(ee=>{const Le=new Set(ee.map($e=>$e.id)),et=ye.filter($e=>!Le.has($e.id));return[...ee,...et]}),Ae(!0)}catch(ye){console.error("Search/Generate error:",ye),v("Failed to search or generate thread")}finally{Be(!1)}}};return I.jsxs("div",{className:"app",children:[w&&I.jsx("div",{className:"error",children:w}),I.jsxs("div",{className:"header",children:[I.jsx("div",{className:"header-center",children:I.jsx("h1",{children:"canonthread"})}),I.jsx("div",{className:"header-right",children:I.jsx("button",{className:"fullscreen-toggle",onClick:rs,title:U?"Exit full screen":"Enter full screen","aria-label":U?"Exit full screen":"Enter full screen"})})]}),I.jsxs("div",{className:"main-content",children:[Fe==="editor"&&Qe&&Er?I.jsx(qj,{thread:Er,selectedNode:Qe,onSubmit:async te=>{await ts(te),Re("graph"),ct(null)},onCancel:()=>{Re("graph"),ct(null)}}):Fe==="article"&&Er?I.jsx(UD,{thread:Er,onBack:()=>Re("graph")}):I.jsxs("div",{className:"visualization-container",children:[I.jsxs("div",{className:"thread-controls",children:[I.jsxs("div",{className:"custom-select",ref:me,children:[I.jsx("button",{className:"thread-selector",onClick:()=>Y(!z),children:B?((ge=(He=Qr.find(te=>te.id===B))==null?void 0:He.metadata)==null?void 0:ge.title)||`Thread ${B}`:"Select a Thread"}),z&&I.jsxs("div",{className:"dropdown-menu",children:[I.jsx("div",{className:"dropdown-item create-thread-option",onClick:()=>{ne(!0),Y(!1)},children:"+ Create New Thread"}),Qr.map(te=>{var ye;return I.jsx("div",{className:"dropdown-item",onClick:()=>{L(te.id),Y(!1)},children:((ye=te.metadata)==null?void 0:ye.title)||`Thread ${te.id}`},te.id)})]})]}),I.jsxs("div",{className:"search-container",children:[I.jsx("input",{type:"text",className:"search-input",placeholder:"Search threads...",value:ie,onChange:Ei,onKeyDown:de,onFocus:()=>Ae(!0)}),Oe&&ie&&I.jsx("div",{className:"search-results",children:Ie?I.jsxs("div",{className:"loading-results",children:[I.jsx("div",{className:"loading-spinner"}),I.jsxs("p",{children:['Generating thread for "',ie,'"...']})]}):ns.length>0?ns.map(te=>{var ye;return I.jsx("div",{className:"search-result-item",onClick:()=>{L(te.id),pe(""),Ae(!1)},children:((ye=te.metadata)==null?void 0:ye.title)||`Thread ${te.id}`},te.id)}):I.jsxs("div",{className:"no-results",children:['Press Enter to generate a new thread about "',ie,'"']})})]})]}),B?I.jsx(_D,{threads:pa,onNodeClick:zl,onAddNode:ts,onOpenEditor:te=>{ct(te),Re("editor")},onOpenArticle:()=>Re("article"),loading:g}):I.jsx("div",{className:"no-thread-message",children:"Please select a thread from the dropdown"})]}),G&&I.jsx("div",{className:"modal-overlay",onClick:()=>ne(!1),children:I.jsxs("div",{className:"modal-content",onClick:te=>te.stopPropagation(),children:[I.jsxs("div",{className:"modal-header",children:[I.jsx("h3",{children:"Create New Thread"}),I.jsx("button",{className:"close-button",onClick:()=>ne(!1),children:""})]}),I.jsx("div",{className:"modal-body",children:I.jsxs("div",{className:"create-thread-form",children:[I.jsx("input",{type:"text",placeholder:"Title",value:o,onChange:te=>l(te.target.value),className:"thread-input"}),I.jsx("input",{type:"text",placeholder:"Description",value:c,onChange:te=>u(te.target.value),className:"thread-input"}),I.jsxs("div",{className:"form-buttons",children:[I.jsx("button",{className:"cancel-button",onClick:()=>ne(!1),disabled:g,children:"Cancel"}),I.jsx("button",{className:"submit-button",onClick:async()=>{await es(),w||ne(!1)},disabled:g||V&&!t,children:g?"Creating...":"Create Thread"})]})]})})]})}),k&&I.jsx(FD,{node:k,onClose:ha,onVote:xi,onCreateProposal:ki,onAddNode:ts,loading:g,voteAmount:N,setVoteAmount:P})]})]})}PC.createRoot(document.getElementById("root")).render(I.jsx(he.StrictMode,{children:I.jsx(Yj,{})}));
