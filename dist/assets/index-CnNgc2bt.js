const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/subset-worker.chunk-CHJCmIhj.js","assets/subset-shared.chunk-CApT0-fb.js","assets/pica-DQwaUF9c.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
var Ule=Object.defineProperty;var AD=e=>{throw TypeError(e)};var xle=(e,t,n)=>t in e?Ule(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>xle(e,typeof t!="symbol"?t+"":t,n),Jv=(e,t,n)=>t.has(e)||AD("Cannot "+n);var K=(e,t,n)=>(Jv(e,t,"read from private field"),n?n.call(e):t.get(e)),be=(e,t,n)=>t.has(e)?AD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ee=(e,t,n,r)=>(Jv(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ne=(e,t,n)=>(Jv(e,t,"access private method"),n);var Z6=(e,t,n,r)=>({set _(i){ee(e,t,i,n)},get _(){return K(e,t,r)}});function wle(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ia(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eE={exports:{}},q6={},tE={exports:{}},Xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MD;function vle(){if(MD)return Xt;MD=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function u(X){return X===null||typeof X!="object"?null:(X=d&&X[d]||X["@@iterator"],typeof X=="function"?X:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function U(X,q,Y){this.props=X,this.context=q,this.refs=y,this.updater=Y||h}U.prototype.isReactComponent={},U.prototype.setState=function(X,q){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,q,"setState")},U.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function x(){}x.prototype=U.prototype;function v(X,q,Y){this.props=X,this.context=q,this.refs=y,this.updater=Y||h}var E=v.prototype=new x;E.constructor=v,g(E,U.prototype),E.isPureReactComponent=!0;var k=Array.isArray,M=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function I(X,q,Y){var oe,ge={},he=null,ce=null;if(q!=null)for(oe in q.ref!==void 0&&(ce=q.ref),q.key!==void 0&&(he=""+q.key),q)M.call(q,oe)&&!A.hasOwnProperty(oe)&&(ge[oe]=q[oe]);var ie=arguments.length-2;if(ie===1)ge.children=Y;else if(1<ie){for(var we=Array(ie),ke=0;ke<ie;ke++)we[ke]=arguments[ke+2];ge.children=we}if(X&&X.defaultProps)for(oe in ie=X.defaultProps,ie)ge[oe]===void 0&&(ge[oe]=ie[oe]);return{$$typeof:e,type:X,key:he,ref:ce,props:ge,_owner:S.current}}function R(X,q){return{$$typeof:e,type:X.type,key:q,ref:X.ref,props:X.props,_owner:X._owner}}function P(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function _(X){var q={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Y){return q[Y]})}var O=/\/+/g;function V(X,q){return typeof X=="object"&&X!==null&&X.key!=null?_(""+X.key):q.toString(36)}function j(X,q,Y,oe,ge){var he=typeof X;(he==="undefined"||he==="boolean")&&(X=null);var ce=!1;if(X===null)ce=!0;else switch(he){case"string":case"number":ce=!0;break;case"object":switch(X.$$typeof){case e:case t:ce=!0}}if(ce)return ce=X,ge=ge(ce),X=oe===""?"."+V(ce,0):oe,k(ge)?(Y="",X!=null&&(Y=X.replace(O,"$&/")+"/"),j(ge,q,Y,"",function(ke){return ke})):ge!=null&&(P(ge)&&(ge=R(ge,Y+(!ge.key||ce&&ce.key===ge.key?"":(""+ge.key).replace(O,"$&/")+"/")+X)),q.push(ge)),1;if(ce=0,oe=oe===""?".":oe+":",k(X))for(var ie=0;ie<X.length;ie++){he=X[ie];var we=oe+V(he,ie);ce+=j(he,q,Y,we,ge)}else if(we=u(X),typeof we=="function")for(X=we.call(X),ie=0;!(he=X.next()).done;)he=he.value,we=oe+V(he,ie++),ce+=j(he,q,Y,we,ge);else if(he==="object")throw q=String(X),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ce}function F(X,q,Y){if(X==null)return X;var oe=[],ge=0;return j(X,oe,"","",function(he){return q.call(Y,he,ge++)}),oe}function z(X){if(X._status===-1){var q=X._result;q=q(),q.then(function(Y){(X._status===0||X._status===-1)&&(X._status=1,X._result=Y)},function(Y){(X._status===0||X._status===-1)&&(X._status=2,X._result=Y)}),X._status===-1&&(X._status=0,X._result=q)}if(X._status===1)return X._result.default;throw X._result}var H={current:null},G={transition:null},W={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:G,ReactCurrentOwner:S};function B(){throw Error("act(...) is not supported in production builds of React.")}return Xt.Children={map:F,forEach:function(X,q,Y){F(X,function(){q.apply(this,arguments)},Y)},count:function(X){var q=0;return F(X,function(){q++}),q},toArray:function(X){return F(X,function(q){return q})||[]},only:function(X){if(!P(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Xt.Component=U,Xt.Fragment=n,Xt.Profiler=i,Xt.PureComponent=v,Xt.StrictMode=r,Xt.Suspense=l,Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Xt.act=B,Xt.cloneElement=function(X,q,Y){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var oe=g({},X.props),ge=X.key,he=X.ref,ce=X._owner;if(q!=null){if(q.ref!==void 0&&(he=q.ref,ce=S.current),q.key!==void 0&&(ge=""+q.key),X.type&&X.type.defaultProps)var ie=X.type.defaultProps;for(we in q)M.call(q,we)&&!A.hasOwnProperty(we)&&(oe[we]=q[we]===void 0&&ie!==void 0?ie[we]:q[we])}var we=arguments.length-2;if(we===1)oe.children=Y;else if(1<we){ie=Array(we);for(var ke=0;ke<we;ke++)ie[ke]=arguments[ke+2];oe.children=ie}return{$$typeof:e,type:X.type,key:ge,ref:he,props:oe,_owner:ce}},Xt.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:s,_context:X},X.Consumer=X},Xt.createElement=I,Xt.createFactory=function(X){var q=I.bind(null,X);return q.type=X,q},Xt.createRef=function(){return{current:null}},Xt.forwardRef=function(X){return{$$typeof:a,render:X}},Xt.isValidElement=P,Xt.lazy=function(X){return{$$typeof:c,_payload:{_status:-1,_result:X},_init:z}},Xt.memo=function(X,q){return{$$typeof:f,type:X,compare:q===void 0?null:q}},Xt.startTransition=function(X){var q=G.transition;G.transition={};try{X()}finally{G.transition=q}},Xt.unstable_act=B,Xt.useCallback=function(X,q){return H.current.useCallback(X,q)},Xt.useContext=function(X){return H.current.useContext(X)},Xt.useDebugValue=function(){},Xt.useDeferredValue=function(X){return H.current.useDeferredValue(X)},Xt.useEffect=function(X,q){return H.current.useEffect(X,q)},Xt.useId=function(){return H.current.useId()},Xt.useImperativeHandle=function(X,q,Y){return H.current.useImperativeHandle(X,q,Y)},Xt.useInsertionEffect=function(X,q){return H.current.useInsertionEffect(X,q)},Xt.useLayoutEffect=function(X,q){return H.current.useLayoutEffect(X,q)},Xt.useMemo=function(X,q){return H.current.useMemo(X,q)},Xt.useReducer=function(X,q,Y){return H.current.useReducer(X,q,Y)},Xt.useRef=function(X){return H.current.useRef(X)},Xt.useState=function(X){return H.current.useState(X)},Xt.useSyncExternalStore=function(X,q,Y){return H.current.useSyncExternalStore(X,q,Y)},Xt.useTransition=function(){return H.current.useTransition()},Xt.version="18.3.1",Xt}var TD;function ny(){return TD||(TD=1,tE.exports=vle()),tE.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ID;function Ele(){if(ID)return q6;ID=1;var e=ny(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,f){var c,d={},u=null,h=null;f!==void 0&&(u=""+f),l.key!==void 0&&(u=""+l.key),l.ref!==void 0&&(h=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:a,key:u,ref:h,props:d,_owner:i.current}}return q6.Fragment=n,q6.jsx=o,q6.jsxs=o,q6}var ND;function kle(){return ND||(ND=1,eE.exports=Ele()),eE.exports}var m=kle(),T=ny();const Ie=Ia(T),tT=wle({__proto__:null,default:Ie},[T]);var Y8={},nE={exports:{}},Gs={},rE={exports:{}},iE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RD;function Sle(){return RD||(RD=1,function(e){function t(G,W){var B=G.length;G.push(W);e:for(;0<B;){var X=B-1>>>1,q=G[X];if(0<i(q,W))G[X]=W,G[B]=q,B=X;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var W=G[0],B=G.pop();if(B!==W){G[0]=B;e:for(var X=0,q=G.length,Y=q>>>1;X<Y;){var oe=2*(X+1)-1,ge=G[oe],he=oe+1,ce=G[he];if(0>i(ge,B))he<q&&0>i(ce,ge)?(G[X]=ce,G[he]=B,X=he):(G[X]=ge,G[oe]=B,X=oe);else if(he<q&&0>i(ce,B))G[X]=ce,G[he]=B,X=he;else break e}}return W}function i(G,W){var B=G.sortIndex-W.sortIndex;return B!==0?B:G.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],f=[],c=1,d=null,u=3,h=!1,g=!1,y=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=G)r(f),W.sortIndex=W.expirationTime,t(l,W);else break;W=n(f)}}function k(G){if(y=!1,E(G),!g)if(n(l)!==null)g=!0,z(M);else{var W=n(f);W!==null&&H(k,W.startTime-G)}}function M(G,W){g=!1,y&&(y=!1,x(I),I=-1),h=!0;var B=u;try{for(E(W),d=n(l);d!==null&&(!(d.expirationTime>W)||G&&!_());){var X=d.callback;if(typeof X=="function"){d.callback=null,u=d.priorityLevel;var q=X(d.expirationTime<=W);W=e.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),E(W)}else r(l);d=n(l)}if(d!==null)var Y=!0;else{var oe=n(f);oe!==null&&H(k,oe.startTime-W),Y=!1}return Y}finally{d=null,u=B,h=!1}}var S=!1,A=null,I=-1,R=5,P=-1;function _(){return!(e.unstable_now()-P<R)}function O(){if(A!==null){var G=e.unstable_now();P=G;var W=!0;try{W=A(!0,G)}finally{W?V():(S=!1,A=null)}}else S=!1}var V;if(typeof v=="function")V=function(){v(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,F=j.port2;j.port1.onmessage=O,V=function(){F.postMessage(null)}}else V=function(){U(O,0)};function z(G){A=G,S||(S=!0,V())}function H(G,W){I=U(function(){G(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,z(M))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(G){switch(u){case 1:case 2:case 3:var W=3;break;default:W=u}var B=u;u=W;try{return G()}finally{u=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var B=u;u=G;try{return W()}finally{u=B}},e.unstable_scheduleCallback=function(G,W,B){var X=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=B+q,G={id:c++,callback:W,priorityLevel:G,startTime:B,expirationTime:q,sortIndex:-1},B>X?(G.sortIndex=B,t(f,G),n(l)===null&&G===n(f)&&(y?(x(I),I=-1):y=!0,H(k,B-X))):(G.sortIndex=q,t(l,G),g||h||(g=!0,z(M))),G},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(G){var W=u;return function(){var B=u;u=W;try{return G.apply(this,arguments)}finally{u=B}}}}(iE)),iE}var _D;function Cle(){return _D||(_D=1,rE.exports=Sle()),rE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD;function Ale(){if(PD)return Gs;PD=1;var e=ny(),t=Cle();function n(p){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+p,w=1;w<arguments.length;w++)b+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(p,b){o(p,b),o(p+"Capture",b)}function o(p,b){for(i[p]=b,p=0;p<b.length;p++)r.add(b[p])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function u(p){return l.call(d,p)?!0:l.call(c,p)?!1:f.test(p)?d[p]=!0:(c[p]=!0,!1)}function h(p,b,w,C){if(w!==null&&w.type===0)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return C?!1:w!==null?!w.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function g(p,b,w,C){if(b===null||typeof b>"u"||h(p,b,w,C))return!0;if(C)return!1;if(w!==null)switch(w.type){case 3:return!b;case 4:return b===!1;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function y(p,b,w,C,N,L,Z){this.acceptsBooleans=b===2||b===3||b===4,this.attributeName=C,this.attributeNamespace=N,this.mustUseProperty=w,this.propertyName=p,this.type=b,this.sanitizeURL=L,this.removeEmptyString=Z}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){U[p]=new y(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var b=p[0];U[b]=new y(b,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){U[p]=new y(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){U[p]=new y(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){U[p]=new y(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){U[p]=new y(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){U[p]=new y(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){U[p]=new y(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){U[p]=new y(p,5,!1,p.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function v(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var b=p.replace(x,v);U[b]=new y(b,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var b=p.replace(x,v);U[b]=new y(b,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var b=p.replace(x,v);U[b]=new y(b,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){U[p]=new y(p,1,!1,p.toLowerCase(),null,!1,!1)}),U.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){U[p]=new y(p,1,!1,p.toLowerCase(),null,!0,!0)});function E(p,b,w,C){var N=U.hasOwnProperty(b)?U[b]:null;(N!==null?N.type!==0:C||!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(g(b,w,N,C)&&(w=null),C||N===null?u(b)&&(w===null?p.removeAttribute(b):p.setAttribute(b,""+w)):N.mustUseProperty?p[N.propertyName]=w===null?N.type===3?!1:"":w:(b=N.attributeName,C=N.attributeNamespace,w===null?p.removeAttribute(b):(N=N.type,w=N===3||N===4&&w===!0?"":""+w,C?p.setAttributeNS(C,b,w):p.setAttribute(b,w))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),_=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),G=Symbol.iterator;function W(p){return p===null||typeof p!="object"?null:(p=G&&p[G]||p["@@iterator"],typeof p=="function"?p:null)}var B=Object.assign,X;function q(p){if(X===void 0)try{throw Error()}catch(w){var b=w.stack.trim().match(/\n( *(at )?)/);X=b&&b[1]||""}return`
`+X+p}var Y=!1;function oe(p,b){if(!p||Y)return"";Y=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(me){var C=me}Reflect.construct(p,[],b)}else{try{b.call()}catch(me){C=me}p.call(b.prototype)}else{try{throw Error()}catch(me){C=me}p()}}catch(me){if(me&&C&&typeof me.stack=="string"){for(var N=me.stack.split(`
`),L=C.stack.split(`
`),Z=N.length-1,te=L.length-1;1<=Z&&0<=te&&N[Z]!==L[te];)te--;for(;1<=Z&&0<=te;Z--,te--)if(N[Z]!==L[te]){if(Z!==1||te!==1)do if(Z--,te--,0>te||N[Z]!==L[te]){var ne=`
`+N[Z].replace(" at new "," at ");return p.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",p.displayName)),ne}while(1<=Z&&0<=te);break}}}finally{Y=!1,Error.prepareStackTrace=w}return(p=p?p.displayName||p.name:"")?q(p):""}function ge(p){switch(p.tag){case 5:return q(p.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return p=oe(p.type,!1),p;case 11:return p=oe(p.type.render,!1),p;case 1:return p=oe(p.type,!0),p;default:return""}}function he(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case A:return"Fragment";case S:return"Portal";case R:return"Profiler";case I:return"StrictMode";case V:return"Suspense";case j:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case _:return(p.displayName||"Context")+".Consumer";case P:return(p._context.displayName||"Context")+".Provider";case O:var b=p.render;return p=p.displayName,p||(p=b.displayName||b.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case F:return b=p.displayName||null,b!==null?b:he(p.type)||"Memo";case z:b=p._payload,p=p._init;try{return he(p(b))}catch{}}return null}function ce(p){var b=p.type;switch(p.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=b.render,p=p.displayName||p.name||"",b.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(b);case 8:return b===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function ie(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function we(p){var b=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function ke(p){var b=we(p)?"checked":"value",w=Object.getOwnPropertyDescriptor(p.constructor.prototype,b),C=""+p[b];if(!p.hasOwnProperty(b)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var N=w.get,L=w.set;return Object.defineProperty(p,b,{configurable:!0,get:function(){return N.call(this)},set:function(Z){C=""+Z,L.call(this,Z)}}),Object.defineProperty(p,b,{enumerable:w.enumerable}),{getValue:function(){return C},setValue:function(Z){C=""+Z},stopTracking:function(){p._valueTracker=null,delete p[b]}}}}function Re(p){p._valueTracker||(p._valueTracker=ke(p))}function Fe(p){if(!p)return!1;var b=p._valueTracker;if(!b)return!0;var w=b.getValue(),C="";return p&&(C=we(p)?p.checked?"true":"false":p.value),p=C,p!==w?(b.setValue(p),!0):!1}function $e(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function ve(p,b){var w=b.checked;return B({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??p._wrapperState.initialChecked})}function Le(p,b){var w=b.defaultValue==null?"":b.defaultValue,C=b.checked!=null?b.checked:b.defaultChecked;w=ie(b.value!=null?b.value:w),p._wrapperState={initialChecked:C,initialValue:w,controlled:b.type==="checkbox"||b.type==="radio"?b.checked!=null:b.value!=null}}function Ae(p,b){b=b.checked,b!=null&&E(p,"checked",b,!1)}function ct(p,b){Ae(p,b);var w=ie(b.value),C=b.type;if(w!=null)C==="number"?(w===0&&p.value===""||p.value!=w)&&(p.value=""+w):p.value!==""+w&&(p.value=""+w);else if(C==="submit"||C==="reset"){p.removeAttribute("value");return}b.hasOwnProperty("value")?xn(p,b.type,w):b.hasOwnProperty("defaultValue")&&xn(p,b.type,ie(b.defaultValue)),b.checked==null&&b.defaultChecked!=null&&(p.defaultChecked=!!b.defaultChecked)}function jt(p,b,w){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var C=b.type;if(!(C!=="submit"&&C!=="reset"||b.value!==void 0&&b.value!==null))return;b=""+p._wrapperState.initialValue,w||b===p.value||(p.value=b),p.defaultValue=b}w=p.name,w!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,w!==""&&(p.name=w)}function xn(p,b,w){(b!=="number"||$e(p.ownerDocument)!==p)&&(w==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+w&&(p.defaultValue=""+w))}var Wt=Array.isArray;function Sn(p,b,w,C){if(p=p.options,b){b={};for(var N=0;N<w.length;N++)b["$"+w[N]]=!0;for(w=0;w<p.length;w++)N=b.hasOwnProperty("$"+p[w].value),p[w].selected!==N&&(p[w].selected=N),N&&C&&(p[w].defaultSelected=!0)}else{for(w=""+ie(w),b=null,N=0;N<p.length;N++){if(p[N].value===w){p[N].selected=!0,C&&(p[N].defaultSelected=!0);return}b!==null||p[N].disabled||(b=p[N])}b!==null&&(b.selected=!0)}}function Ki(p,b){if(b.dangerouslySetInnerHTML!=null)throw Error(n(91));return B({},b,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function Dr(p,b){var w=b.value;if(w==null){if(w=b.children,b=b.defaultValue,w!=null){if(b!=null)throw Error(n(92));if(Wt(w)){if(1<w.length)throw Error(n(93));w=w[0]}b=w}b==null&&(b=""),w=b}p._wrapperState={initialValue:ie(w)}}function ii(p,b){var w=ie(b.value),C=ie(b.defaultValue);w!=null&&(w=""+w,w!==p.value&&(p.value=w),b.defaultValue==null&&p.defaultValue!==w&&(p.defaultValue=w)),C!=null&&(p.defaultValue=""+C)}function ys(p){var b=p.textContent;b===p._wrapperState.initialValue&&b!==""&&b!==null&&(p.value=b)}function xe(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pe(p,b){return p==null||p==="http://www.w3.org/1999/xhtml"?xe(b):p==="http://www.w3.org/2000/svg"&&b==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var dt,It=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(b,w,C,N){MSApp.execUnsafeLocalFunction(function(){return p(b,w,C,N)})}:p}(function(p,b){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=b;else{for(dt=dt||document.createElement("div"),dt.innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=dt.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;b.firstChild;)p.appendChild(b.firstChild)}});function Rt(p,b){if(b){var w=p.firstChild;if(w&&w===p.lastChild&&w.nodeType===3){w.nodeValue=b;return}}p.textContent=b}var fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jn=["Webkit","ms","Moz","O"];Object.keys(fn).forEach(function(p){Jn.forEach(function(b){b=b+p.charAt(0).toUpperCase()+p.substring(1),fn[b]=fn[p]})});function Gt(p,b,w){return b==null||typeof b=="boolean"||b===""?"":w||typeof b!="number"||b===0||fn.hasOwnProperty(p)&&fn[p]?(""+b).trim():b+"px"}function Zt(p,b){p=p.style;for(var w in b)if(b.hasOwnProperty(w)){var C=w.indexOf("--")===0,N=Gt(w,b[w],C);w==="float"&&(w="cssFloat"),C?p.setProperty(w,N):p[w]=N}}var dr=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wn(p,b){if(b){if(dr[p]&&(b.children!=null||b.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(b.dangerouslySetInnerHTML!=null){if(b.children!=null)throw Error(n(60));if(typeof b.dangerouslySetInnerHTML!="object"||!("__html"in b.dangerouslySetInnerHTML))throw Error(n(61))}if(b.style!=null&&typeof b.style!="object")throw Error(n(62))}}function Sr(p,b){if(p.indexOf("-")===-1)return typeof b.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wr=null;function $o(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Ho=null,Bs=null,Fs=null;function Ra(p){if(p=D6(p)){if(typeof Ho!="function")throw Error(n(280));var b=p.stateNode;b&&(b=f8(b),Ho(p.stateNode,p.type,b))}}function Bc(p){Bs?Fs?Fs.push(p):Fs=[p]:Bs=p}function Fc(){if(Bs){var p=Bs,b=Fs;if(Fs=Bs=null,Ra(p),b)for(p=0;p<b.length;p++)Ra(b[p])}}function zc(p,b){return p(b)}function Nl(){}var Ee=!1;function rt(p,b,w){if(Ee)return p(b,w);Ee=!0;try{return zc(p,b,w)}finally{Ee=!1,(Bs!==null||Fs!==null)&&(Nl(),Fc())}}function ze(p,b){var w=p.stateNode;if(w===null)return null;var C=f8(w);if(C===null)return null;w=C[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(p=p.type,C=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!C;break e;default:p=!1}if(p)return null;if(w&&typeof w!="function")throw Error(n(231,b,typeof w));return w}var qt=!1;if(a)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{qt=!1}function Dt(p,b,w,C,N,L,Z,te,ne){var me=Array.prototype.slice.call(arguments,3);try{b.apply(w,me)}catch(Me){this.onError(Me)}}var Dn=!1,Us=null,_i=!1,$c=null,hd={onError:function(p){Dn=!0,Us=p}};function pd(p,b,w,C,N,L,Z,te,ne){Dn=!1,Us=null,Dt.apply(hd,arguments)}function Hc(p,b,w,C,N,L,Z,te,ne){if(pd.apply(this,arguments),Dn){if(Dn){var me=Us;Dn=!1,Us=null}else throw Error(n(198));_i||(_i=!0,$c=me)}}function Pi(p){var b=p,w=p;if(p.alternate)for(;b.return;)b=b.return;else{p=b;do b=p,b.flags&4098&&(w=b.return),p=b.return;while(p)}return b.tag===3?w:null}function _a(p){if(p.tag===13){var b=p.memoizedState;if(b===null&&(p=p.alternate,p!==null&&(b=p.memoizedState)),b!==null)return b.dehydrated}return null}function ur(p){if(Pi(p)!==p)throw Error(n(188))}function er(p){var b=p.alternate;if(!b){if(b=Pi(p),b===null)throw Error(n(188));return b!==p?null:p}for(var w=p,C=b;;){var N=w.return;if(N===null)break;var L=N.alternate;if(L===null){if(C=N.return,C!==null){w=C;continue}break}if(N.child===L.child){for(L=N.child;L;){if(L===w)return ur(N),p;if(L===C)return ur(N),b;L=L.sibling}throw Error(n(188))}if(w.return!==C.return)w=N,C=L;else{for(var Z=!1,te=N.child;te;){if(te===w){Z=!0,w=N,C=L;break}if(te===C){Z=!0,C=N,w=L;break}te=te.sibling}if(!Z){for(te=L.child;te;){if(te===w){Z=!0,w=L,C=N;break}if(te===C){Z=!0,C=L,w=N;break}te=te.sibling}if(!Z)throw Error(n(189))}}if(w.alternate!==C)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?p:b}function gi(p){return p=er(p),p!==null?Gr(p):null}function Gr(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var b=Gr(p);if(b!==null)return b;p=p.sibling}return null}var md=t.unstable_scheduleCallback,O1=t.unstable_cancelCallback,m6=t.unstable_shouldYield,Vy=t.unstable_requestPaint,hr=t.unstable_now,m7=t.unstable_getCurrentPriorityLevel,g6=t.unstable_ImmediatePriority,Wy=t.unstable_UserBlockingPriority,j1=t.unstable_NormalPriority,g7=t.unstable_LowPriority,Gy=t.unstable_IdlePriority,m0=null,Vo=null;function b7(p){if(Vo&&typeof Vo.onCommitFiberRoot=="function")try{Vo.onCommitFiberRoot(m0,p,void 0,(p.current.flags&128)===128)}catch{}}var yo=Math.clz32?Math.clz32:x7,y7=Math.log,U7=Math.LN2;function x7(p){return p>>>=0,p===0?32:31-(y7(p)/U7|0)|0}var B1=64,F1=4194304;function Rl(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function z1(p,b){var w=p.pendingLanes;if(w===0)return 0;var C=0,N=p.suspendedLanes,L=p.pingedLanes,Z=w&268435455;if(Z!==0){var te=Z&~N;te!==0?C=Rl(te):(L&=Z,L!==0&&(C=Rl(L)))}else Z=w&~N,Z!==0?C=Rl(Z):L!==0&&(C=Rl(L));if(C===0)return 0;if(b!==0&&b!==C&&!(b&N)&&(N=C&-C,L=b&-b,N>=L||N===16&&(L&4194240)!==0))return b;if(C&4&&(C|=w&16),b=p.entangledLanes,b!==0)for(p=p.entanglements,b&=C;0<b;)w=31-yo(b),N=1<<w,C|=p[w],b&=~N;return C}function Xy(p,b){switch(p){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w7(p,b){for(var w=p.suspendedLanes,C=p.pingedLanes,N=p.expirationTimes,L=p.pendingLanes;0<L;){var Z=31-yo(L),te=1<<Z,ne=N[Z];ne===-1?(!(te&w)||te&C)&&(N[Z]=Xy(te,b)):ne<=b&&(p.expiredLanes|=te),L&=~te}}function b6(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function $1(){var p=B1;return B1<<=1,!(B1&4194240)&&(B1=64),p}function y6(p){for(var b=[],w=0;31>w;w++)b.push(p);return b}function g0(p,b,w){p.pendingLanes|=b,b!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,b=31-yo(b),p[b]=w}function Ky(p,b){var w=p.pendingLanes&~b;p.pendingLanes=b,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=b,p.mutableReadLanes&=b,p.entangledLanes&=b,b=p.entanglements;var C=p.eventTimes;for(p=p.expirationTimes;0<w;){var N=31-yo(w),L=1<<N;b[N]=0,C[N]=-1,p[N]=-1,w&=~L}}function v7(p,b){var w=p.entangledLanes|=b;for(p=p.entanglements;w;){var C=31-yo(w),N=1<<C;N&b|p[C]&b&&(p[C]|=b),w&=~N}}var Cn=0;function s_(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var o_,E7,a_,l_,c_,k7=!1,Yy=[],gd=null,bd=null,yd=null,U6=new Map,x6=new Map,Ud=[],$oe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f_(p,b){switch(p){case"focusin":case"focusout":gd=null;break;case"dragenter":case"dragleave":bd=null;break;case"mouseover":case"mouseout":yd=null;break;case"pointerover":case"pointerout":U6.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":x6.delete(b.pointerId)}}function w6(p,b,w,C,N,L){return p===null||p.nativeEvent!==L?(p={blockedOn:b,domEventName:w,eventSystemFlags:C,nativeEvent:L,targetContainers:[N]},b!==null&&(b=D6(b),b!==null&&E7(b)),p):(p.eventSystemFlags|=C,b=p.targetContainers,N!==null&&b.indexOf(N)===-1&&b.push(N),p)}function Hoe(p,b,w,C,N){switch(b){case"focusin":return gd=w6(gd,p,b,w,C,N),!0;case"dragenter":return bd=w6(bd,p,b,w,C,N),!0;case"mouseover":return yd=w6(yd,p,b,w,C,N),!0;case"pointerover":var L=N.pointerId;return U6.set(L,w6(U6.get(L)||null,p,b,w,C,N)),!0;case"gotpointercapture":return L=N.pointerId,x6.set(L,w6(x6.get(L)||null,p,b,w,C,N)),!0}return!1}function d_(p){var b=b0(p.target);if(b!==null){var w=Pi(b);if(w!==null){if(b=w.tag,b===13){if(b=_a(w),b!==null){p.blockedOn=b,c_(p.priority,function(){a_(w)});return}}else if(b===3&&w.stateNode.current.memoizedState.isDehydrated){p.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Zy(p){if(p.blockedOn!==null)return!1;for(var b=p.targetContainers;0<b.length;){var w=C7(p.domEventName,p.eventSystemFlags,b[0],p.nativeEvent);if(w===null){w=p.nativeEvent;var C=new w.constructor(w.type,w);Wr=C,w.target.dispatchEvent(C),Wr=null}else return b=D6(w),b!==null&&E7(b),p.blockedOn=w,!1;b.shift()}return!0}function u_(p,b,w){Zy(p)&&w.delete(b)}function Voe(){k7=!1,gd!==null&&Zy(gd)&&(gd=null),bd!==null&&Zy(bd)&&(bd=null),yd!==null&&Zy(yd)&&(yd=null),U6.forEach(u_),x6.forEach(u_)}function v6(p,b){p.blockedOn===b&&(p.blockedOn=null,k7||(k7=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Voe)))}function E6(p){function b(N){return v6(N,p)}if(0<Yy.length){v6(Yy[0],p);for(var w=1;w<Yy.length;w++){var C=Yy[w];C.blockedOn===p&&(C.blockedOn=null)}}for(gd!==null&&v6(gd,p),bd!==null&&v6(bd,p),yd!==null&&v6(yd,p),U6.forEach(b),x6.forEach(b),w=0;w<Ud.length;w++)C=Ud[w],C.blockedOn===p&&(C.blockedOn=null);for(;0<Ud.length&&(w=Ud[0],w.blockedOn===null);)d_(w),w.blockedOn===null&&Ud.shift()}var H1=k.ReactCurrentBatchConfig,qy=!0;function Woe(p,b,w,C){var N=Cn,L=H1.transition;H1.transition=null;try{Cn=1,S7(p,b,w,C)}finally{Cn=N,H1.transition=L}}function Goe(p,b,w,C){var N=Cn,L=H1.transition;H1.transition=null;try{Cn=4,S7(p,b,w,C)}finally{Cn=N,H1.transition=L}}function S7(p,b,w,C){if(qy){var N=C7(p,b,w,C);if(N===null)H7(p,b,C,Qy,w),f_(p,C);else if(Hoe(N,p,b,w,C))C.stopPropagation();else if(f_(p,C),b&4&&-1<$oe.indexOf(p)){for(;N!==null;){var L=D6(N);if(L!==null&&o_(L),L=C7(p,b,w,C),L===null&&H7(p,b,C,Qy,w),L===N)break;N=L}N!==null&&C.stopPropagation()}else H7(p,b,C,null,w)}}var Qy=null;function C7(p,b,w,C){if(Qy=null,p=$o(C),p=b0(p),p!==null)if(b=Pi(p),b===null)p=null;else if(w=b.tag,w===13){if(p=_a(b),p!==null)return p;p=null}else if(w===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;p=null}else b!==p&&(p=null);return Qy=p,null}function h_(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m7()){case g6:return 1;case Wy:return 4;case j1:case g7:return 16;case Gy:return 536870912;default:return 16}default:return 16}}var xd=null,A7=null,Jy=null;function p_(){if(Jy)return Jy;var p,b=A7,w=b.length,C,N="value"in xd?xd.value:xd.textContent,L=N.length;for(p=0;p<w&&b[p]===N[p];p++);var Z=w-p;for(C=1;C<=Z&&b[w-C]===N[L-C];C++);return Jy=N.slice(p,1<C?1-C:void 0)}function e8(p){var b=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&b===13&&(p=13)):p=b,p===10&&(p=13),32<=p||p===13?p:0}function t8(){return!0}function m_(){return!1}function Uo(p){function b(w,C,N,L,Z){this._reactName=w,this._targetInst=N,this.type=C,this.nativeEvent=L,this.target=Z,this.currentTarget=null;for(var te in p)p.hasOwnProperty(te)&&(w=p[te],this[te]=w?w(L):L[te]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?t8:m_,this.isPropagationStopped=m_,this}return B(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=t8)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=t8)},persist:function(){},isPersistent:t8}),b}var V1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},M7=Uo(V1),k6=B({},V1,{view:0,detail:0}),Xoe=Uo(k6),T7,I7,S6,n8=B({},k6,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R7,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==S6&&(S6&&p.type==="mousemove"?(T7=p.screenX-S6.screenX,I7=p.screenY-S6.screenY):I7=T7=0,S6=p),T7)},movementY:function(p){return"movementY"in p?p.movementY:I7}}),g_=Uo(n8),Koe=B({},n8,{dataTransfer:0}),Yoe=Uo(Koe),Zoe=B({},k6,{relatedTarget:0}),N7=Uo(Zoe),qoe=B({},V1,{animationName:0,elapsedTime:0,pseudoElement:0}),Qoe=Uo(qoe),Joe=B({},V1,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),eae=Uo(Joe),tae=B({},V1,{data:0}),b_=Uo(tae),nae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sae(p){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(p):(p=iae[p])?!!b[p]:!1}function R7(){return sae}var oae=B({},k6,{key:function(p){if(p.key){var b=nae[p.key]||p.key;if(b!=="Unidentified")return b}return p.type==="keypress"?(p=e8(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?rae[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R7,charCode:function(p){return p.type==="keypress"?e8(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?e8(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),aae=Uo(oae),lae=B({},n8,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y_=Uo(lae),cae=B({},k6,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R7}),fae=Uo(cae),dae=B({},V1,{propertyName:0,elapsedTime:0,pseudoElement:0}),uae=Uo(dae),hae=B({},n8,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),pae=Uo(hae),mae=[9,13,27,32],_7=a&&"CompositionEvent"in window,C6=null;a&&"documentMode"in document&&(C6=document.documentMode);var gae=a&&"TextEvent"in window&&!C6,U_=a&&(!_7||C6&&8<C6&&11>=C6),x_=" ",w_=!1;function v_(p,b){switch(p){case"keyup":return mae.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E_(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var W1=!1;function bae(p,b){switch(p){case"compositionend":return E_(b);case"keypress":return b.which!==32?null:(w_=!0,x_);case"textInput":return p=b.data,p===x_&&w_?null:p;default:return null}}function yae(p,b){if(W1)return p==="compositionend"||!_7&&v_(p,b)?(p=p_(),Jy=A7=xd=null,W1=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return U_&&b.locale!=="ko"?null:b.data;default:return null}}var Uae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k_(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b==="input"?!!Uae[p.type]:b==="textarea"}function S_(p,b,w,C){Bc(C),b=a8(b,"onChange"),0<b.length&&(w=new M7("onChange","change",null,w,C),p.push({event:w,listeners:b}))}var A6=null,M6=null;function xae(p){H_(p,0)}function r8(p){var b=Z1(p);if(Fe(b))return p}function wae(p,b){if(p==="change")return b}var C_=!1;if(a){var P7;if(a){var D7="oninput"in document;if(!D7){var A_=document.createElement("div");A_.setAttribute("oninput","return;"),D7=typeof A_.oninput=="function"}P7=D7}else P7=!1;C_=P7&&(!document.documentMode||9<document.documentMode)}function M_(){A6&&(A6.detachEvent("onpropertychange",T_),M6=A6=null)}function T_(p){if(p.propertyName==="value"&&r8(M6)){var b=[];S_(b,M6,p,$o(p)),rt(xae,b)}}function vae(p,b,w){p==="focusin"?(M_(),A6=b,M6=w,A6.attachEvent("onpropertychange",T_)):p==="focusout"&&M_()}function Eae(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return r8(M6)}function kae(p,b){if(p==="click")return r8(b)}function Sae(p,b){if(p==="input"||p==="change")return r8(b)}function Cae(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var Pa=typeof Object.is=="function"?Object.is:Cae;function T6(p,b){if(Pa(p,b))return!0;if(typeof p!="object"||p===null||typeof b!="object"||b===null)return!1;var w=Object.keys(p),C=Object.keys(b);if(w.length!==C.length)return!1;for(C=0;C<w.length;C++){var N=w[C];if(!l.call(b,N)||!Pa(p[N],b[N]))return!1}return!0}function I_(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function N_(p,b){var w=I_(p);p=0;for(var C;w;){if(w.nodeType===3){if(C=p+w.textContent.length,p<=b&&C>=b)return{node:w,offset:b-p};p=C}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=I_(w)}}function R_(p,b){return p&&b?p===b?!0:p&&p.nodeType===3?!1:b&&b.nodeType===3?R_(p,b.parentNode):"contains"in p?p.contains(b):p.compareDocumentPosition?!!(p.compareDocumentPosition(b)&16):!1:!1}function __(){for(var p=window,b=$e();b instanceof p.HTMLIFrameElement;){try{var w=typeof b.contentWindow.location.href=="string"}catch{w=!1}if(w)p=b.contentWindow;else break;b=$e(p.document)}return b}function L7(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b&&(b==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||b==="textarea"||p.contentEditable==="true")}function Aae(p){var b=__(),w=p.focusedElem,C=p.selectionRange;if(b!==w&&w&&w.ownerDocument&&R_(w.ownerDocument.documentElement,w)){if(C!==null&&L7(w)){if(b=C.start,p=C.end,p===void 0&&(p=b),"selectionStart"in w)w.selectionStart=b,w.selectionEnd=Math.min(p,w.value.length);else if(p=(b=w.ownerDocument||document)&&b.defaultView||window,p.getSelection){p=p.getSelection();var N=w.textContent.length,L=Math.min(C.start,N);C=C.end===void 0?L:Math.min(C.end,N),!p.extend&&L>C&&(N=C,C=L,L=N),N=N_(w,L);var Z=N_(w,C);N&&Z&&(p.rangeCount!==1||p.anchorNode!==N.node||p.anchorOffset!==N.offset||p.focusNode!==Z.node||p.focusOffset!==Z.offset)&&(b=b.createRange(),b.setStart(N.node,N.offset),p.removeAllRanges(),L>C?(p.addRange(b),p.extend(Z.node,Z.offset)):(b.setEnd(Z.node,Z.offset),p.addRange(b)))}}for(b=[],p=w;p=p.parentNode;)p.nodeType===1&&b.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<b.length;w++)p=b[w],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Mae=a&&"documentMode"in document&&11>=document.documentMode,G1=null,O7=null,I6=null,j7=!1;function P_(p,b,w){var C=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;j7||G1==null||G1!==$e(C)||(C=G1,"selectionStart"in C&&L7(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),I6&&T6(I6,C)||(I6=C,C=a8(O7,"onSelect"),0<C.length&&(b=new M7("onSelect","select",null,b,w),p.push({event:b,listeners:C}),b.target=G1)))}function i8(p,b){var w={};return w[p.toLowerCase()]=b.toLowerCase(),w["Webkit"+p]="webkit"+b,w["Moz"+p]="moz"+b,w}var X1={animationend:i8("Animation","AnimationEnd"),animationiteration:i8("Animation","AnimationIteration"),animationstart:i8("Animation","AnimationStart"),transitionend:i8("Transition","TransitionEnd")},B7={},D_={};a&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete X1.animationend.animation,delete X1.animationiteration.animation,delete X1.animationstart.animation),"TransitionEvent"in window||delete X1.transitionend.transition);function s8(p){if(B7[p])return B7[p];if(!X1[p])return p;var b=X1[p],w;for(w in b)if(b.hasOwnProperty(w)&&w in D_)return B7[p]=b[w];return p}var L_=s8("animationend"),O_=s8("animationiteration"),j_=s8("animationstart"),B_=s8("transitionend"),F_=new Map,z_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wd(p,b){F_.set(p,b),s(b,[p])}for(var F7=0;F7<z_.length;F7++){var z7=z_[F7],Tae=z7.toLowerCase(),Iae=z7[0].toUpperCase()+z7.slice(1);wd(Tae,"on"+Iae)}wd(L_,"onAnimationEnd"),wd(O_,"onAnimationIteration"),wd(j_,"onAnimationStart"),wd("dblclick","onDoubleClick"),wd("focusin","onFocus"),wd("focusout","onBlur"),wd(B_,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var N6="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nae=new Set("cancel close invalid load scroll toggle".split(" ").concat(N6));function $_(p,b,w){var C=p.type||"unknown-event";p.currentTarget=w,Hc(C,b,void 0,p),p.currentTarget=null}function H_(p,b){b=(b&4)!==0;for(var w=0;w<p.length;w++){var C=p[w],N=C.event;C=C.listeners;e:{var L=void 0;if(b)for(var Z=C.length-1;0<=Z;Z--){var te=C[Z],ne=te.instance,me=te.currentTarget;if(te=te.listener,ne!==L&&N.isPropagationStopped())break e;$_(N,te,me),L=ne}else for(Z=0;Z<C.length;Z++){if(te=C[Z],ne=te.instance,me=te.currentTarget,te=te.listener,ne!==L&&N.isPropagationStopped())break e;$_(N,te,me),L=ne}}}if(_i)throw p=$c,_i=!1,$c=null,p}function Kn(p,b){var w=b[Y7];w===void 0&&(w=b[Y7]=new Set);var C=p+"__bubble";w.has(C)||(V_(b,p,2,!1),w.add(C))}function $7(p,b,w){var C=0;b&&(C|=4),V_(w,p,C,b)}var o8="_reactListening"+Math.random().toString(36).slice(2);function R6(p){if(!p[o8]){p[o8]=!0,r.forEach(function(w){w!=="selectionchange"&&(Nae.has(w)||$7(w,!1,p),$7(w,!0,p))});var b=p.nodeType===9?p:p.ownerDocument;b===null||b[o8]||(b[o8]=!0,$7("selectionchange",!1,b))}}function V_(p,b,w,C){switch(h_(b)){case 1:var N=Woe;break;case 4:N=Goe;break;default:N=S7}w=N.bind(null,b,w,p),N=void 0,!qt||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(N=!0),C?N!==void 0?p.addEventListener(b,w,{capture:!0,passive:N}):p.addEventListener(b,w,!0):N!==void 0?p.addEventListener(b,w,{passive:N}):p.addEventListener(b,w,!1)}function H7(p,b,w,C,N){var L=C;if(!(b&1)&&!(b&2)&&C!==null)e:for(;;){if(C===null)return;var Z=C.tag;if(Z===3||Z===4){var te=C.stateNode.containerInfo;if(te===N||te.nodeType===8&&te.parentNode===N)break;if(Z===4)for(Z=C.return;Z!==null;){var ne=Z.tag;if((ne===3||ne===4)&&(ne=Z.stateNode.containerInfo,ne===N||ne.nodeType===8&&ne.parentNode===N))return;Z=Z.return}for(;te!==null;){if(Z=b0(te),Z===null)return;if(ne=Z.tag,ne===5||ne===6){C=L=Z;continue e}te=te.parentNode}}C=C.return}rt(function(){var me=L,Me=$o(w),_e=[];e:{var Ce=F_.get(p);if(Ce!==void 0){var Ye=M7,nt=p;switch(p){case"keypress":if(e8(w)===0)break e;case"keydown":case"keyup":Ye=aae;break;case"focusin":nt="focus",Ye=N7;break;case"focusout":nt="blur",Ye=N7;break;case"beforeblur":case"afterblur":Ye=N7;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=g_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=Yoe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=fae;break;case L_:case O_:case j_:Ye=Qoe;break;case B_:Ye=uae;break;case"scroll":Ye=Xoe;break;case"wheel":Ye=pae;break;case"copy":case"cut":case"paste":Ye=eae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=y_}var st=(b&4)!==0,Lr=!st&&p==="scroll",le=st?Ce!==null?Ce+"Capture":null:Ce;st=[];for(var re=me,de;re!==null;){de=re;var Be=de.stateNode;if(de.tag===5&&Be!==null&&(de=Be,le!==null&&(Be=ze(re,le),Be!=null&&st.push(_6(re,Be,de)))),Lr)break;re=re.return}0<st.length&&(Ce=new Ye(Ce,nt,null,w,Me),_e.push({event:Ce,listeners:st}))}}if(!(b&7)){e:{if(Ce=p==="mouseover"||p==="pointerover",Ye=p==="mouseout"||p==="pointerout",Ce&&w!==Wr&&(nt=w.relatedTarget||w.fromElement)&&(b0(nt)||nt[Vc]))break e;if((Ye||Ce)&&(Ce=Me.window===Me?Me:(Ce=Me.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ye?(nt=w.relatedTarget||w.toElement,Ye=me,nt=nt?b0(nt):null,nt!==null&&(Lr=Pi(nt),nt!==Lr||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(Ye=null,nt=me),Ye!==nt)){if(st=g_,Be="onMouseLeave",le="onMouseEnter",re="mouse",(p==="pointerout"||p==="pointerover")&&(st=y_,Be="onPointerLeave",le="onPointerEnter",re="pointer"),Lr=Ye==null?Ce:Z1(Ye),de=nt==null?Ce:Z1(nt),Ce=new st(Be,re+"leave",Ye,w,Me),Ce.target=Lr,Ce.relatedTarget=de,Be=null,b0(Me)===me&&(st=new st(le,re+"enter",nt,w,Me),st.target=de,st.relatedTarget=Lr,Be=st),Lr=Be,Ye&&nt)t:{for(st=Ye,le=nt,re=0,de=st;de;de=K1(de))re++;for(de=0,Be=le;Be;Be=K1(Be))de++;for(;0<re-de;)st=K1(st),re--;for(;0<de-re;)le=K1(le),de--;for(;re--;){if(st===le||le!==null&&st===le.alternate)break t;st=K1(st),le=K1(le)}st=null}else st=null;Ye!==null&&W_(_e,Ce,Ye,st,!1),nt!==null&&Lr!==null&&W_(_e,Lr,nt,st,!0)}}e:{if(Ce=me?Z1(me):window,Ye=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&Ce.type==="file")var lt=wae;else if(k_(Ce))if(C_)lt=Sae;else{lt=Eae;var gt=vae}else(Ye=Ce.nodeName)&&Ye.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(lt=kae);if(lt&&(lt=lt(p,me))){S_(_e,lt,w,Me);break e}gt&&gt(p,Ce,me),p==="focusout"&&(gt=Ce._wrapperState)&&gt.controlled&&Ce.type==="number"&&xn(Ce,"number",Ce.value)}switch(gt=me?Z1(me):window,p){case"focusin":(k_(gt)||gt.contentEditable==="true")&&(G1=gt,O7=me,I6=null);break;case"focusout":I6=O7=G1=null;break;case"mousedown":j7=!0;break;case"contextmenu":case"mouseup":case"dragend":j7=!1,P_(_e,w,Me);break;case"selectionchange":if(Mae)break;case"keydown":case"keyup":P_(_e,w,Me)}var bt;if(_7)e:{switch(p){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else W1?v_(p,w)&&(Et="onCompositionEnd"):p==="keydown"&&w.keyCode===229&&(Et="onCompositionStart");Et&&(U_&&w.locale!=="ko"&&(W1||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&W1&&(bt=p_()):(xd=Me,A7="value"in xd?xd.value:xd.textContent,W1=!0)),gt=a8(me,Et),0<gt.length&&(Et=new b_(Et,p,null,w,Me),_e.push({event:Et,listeners:gt}),bt?Et.data=bt:(bt=E_(w),bt!==null&&(Et.data=bt)))),(bt=gae?bae(p,w):yae(p,w))&&(me=a8(me,"onBeforeInput"),0<me.length&&(Me=new b_("onBeforeInput","beforeinput",null,w,Me),_e.push({event:Me,listeners:me}),Me.data=bt))}H_(_e,b)})}function _6(p,b,w){return{instance:p,listener:b,currentTarget:w}}function a8(p,b){for(var w=b+"Capture",C=[];p!==null;){var N=p,L=N.stateNode;N.tag===5&&L!==null&&(N=L,L=ze(p,w),L!=null&&C.unshift(_6(p,L,N)),L=ze(p,b),L!=null&&C.push(_6(p,L,N))),p=p.return}return C}function K1(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function W_(p,b,w,C,N){for(var L=b._reactName,Z=[];w!==null&&w!==C;){var te=w,ne=te.alternate,me=te.stateNode;if(ne!==null&&ne===C)break;te.tag===5&&me!==null&&(te=me,N?(ne=ze(w,L),ne!=null&&Z.unshift(_6(w,ne,te))):N||(ne=ze(w,L),ne!=null&&Z.push(_6(w,ne,te)))),w=w.return}Z.length!==0&&p.push({event:b,listeners:Z})}var Rae=/\r\n?/g,_ae=/\u0000|\uFFFD/g;function G_(p){return(typeof p=="string"?p:""+p).replace(Rae,`
`).replace(_ae,"")}function l8(p,b,w){if(b=G_(b),G_(p)!==b&&w)throw Error(n(425))}function c8(){}var V7=null,W7=null;function G7(p,b){return p==="textarea"||p==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var X7=typeof setTimeout=="function"?setTimeout:void 0,Pae=typeof clearTimeout=="function"?clearTimeout:void 0,X_=typeof Promise=="function"?Promise:void 0,Dae=typeof queueMicrotask=="function"?queueMicrotask:typeof X_<"u"?function(p){return X_.resolve(null).then(p).catch(Lae)}:X7;function Lae(p){setTimeout(function(){throw p})}function K7(p,b){var w=b,C=0;do{var N=w.nextSibling;if(p.removeChild(w),N&&N.nodeType===8)if(w=N.data,w==="/$"){if(C===0){p.removeChild(N),E6(b);return}C--}else w!=="$"&&w!=="$?"&&w!=="$!"||C++;w=N}while(w);E6(b)}function vd(p){for(;p!=null;p=p.nextSibling){var b=p.nodeType;if(b===1||b===3)break;if(b===8){if(b=p.data,b==="$"||b==="$!"||b==="$?")break;if(b==="/$")return null}}return p}function K_(p){p=p.previousSibling;for(var b=0;p;){if(p.nodeType===8){var w=p.data;if(w==="$"||w==="$!"||w==="$?"){if(b===0)return p;b--}else w==="/$"&&b++}p=p.previousSibling}return null}var Y1=Math.random().toString(36).slice(2),_l="__reactFiber$"+Y1,P6="__reactProps$"+Y1,Vc="__reactContainer$"+Y1,Y7="__reactEvents$"+Y1,Oae="__reactListeners$"+Y1,jae="__reactHandles$"+Y1;function b0(p){var b=p[_l];if(b)return b;for(var w=p.parentNode;w;){if(b=w[Vc]||w[_l]){if(w=b.alternate,b.child!==null||w!==null&&w.child!==null)for(p=K_(p);p!==null;){if(w=p[_l])return w;p=K_(p)}return b}p=w,w=p.parentNode}return null}function D6(p){return p=p[_l]||p[Vc],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function Z1(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function f8(p){return p[P6]||null}var Z7=[],q1=-1;function Ed(p){return{current:p}}function Yn(p){0>q1||(p.current=Z7[q1],Z7[q1]=null,q1--)}function Fn(p,b){q1++,Z7[q1]=p.current,p.current=b}var kd={},Yi=Ed(kd),zs=Ed(!1),y0=kd;function Q1(p,b){var w=p.type.contextTypes;if(!w)return kd;var C=p.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===b)return C.__reactInternalMemoizedMaskedChildContext;var N={},L;for(L in w)N[L]=b[L];return C&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=b,p.__reactInternalMemoizedMaskedChildContext=N),N}function $s(p){return p=p.childContextTypes,p!=null}function d8(){Yn(zs),Yn(Yi)}function Y_(p,b,w){if(Yi.current!==kd)throw Error(n(168));Fn(Yi,b),Fn(zs,w)}function Z_(p,b,w){var C=p.stateNode;if(b=b.childContextTypes,typeof C.getChildContext!="function")return w;C=C.getChildContext();for(var N in C)if(!(N in b))throw Error(n(108,ce(p)||"Unknown",N));return B({},w,C)}function u8(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||kd,y0=Yi.current,Fn(Yi,p),Fn(zs,zs.current),!0}function q_(p,b,w){var C=p.stateNode;if(!C)throw Error(n(169));w?(p=Z_(p,b,y0),C.__reactInternalMemoizedMergedChildContext=p,Yn(zs),Yn(Yi),Fn(Yi,p)):Yn(zs),Fn(zs,w)}var Wc=null,h8=!1,q7=!1;function Q_(p){Wc===null?Wc=[p]:Wc.push(p)}function Bae(p){h8=!0,Q_(p)}function Sd(){if(!q7&&Wc!==null){q7=!0;var p=0,b=Cn;try{var w=Wc;for(Cn=1;p<w.length;p++){var C=w[p];do C=C(!0);while(C!==null)}Wc=null,h8=!1}catch(N){throw Wc!==null&&(Wc=Wc.slice(p+1)),md(g6,Sd),N}finally{Cn=b,q7=!1}}return null}var J1=[],ep=0,p8=null,m8=0,Wo=[],Go=0,U0=null,Gc=1,Xc="";function x0(p,b){J1[ep++]=m8,J1[ep++]=p8,p8=p,m8=b}function J_(p,b,w){Wo[Go++]=Gc,Wo[Go++]=Xc,Wo[Go++]=U0,U0=p;var C=Gc;p=Xc;var N=32-yo(C)-1;C&=~(1<<N),w+=1;var L=32-yo(b)+N;if(30<L){var Z=N-N%5;L=(C&(1<<Z)-1).toString(32),C>>=Z,N-=Z,Gc=1<<32-yo(b)+N|w<<N|C,Xc=L+p}else Gc=1<<L|w<<N|C,Xc=p}function Q7(p){p.return!==null&&(x0(p,1),J_(p,1,0))}function J7(p){for(;p===p8;)p8=J1[--ep],J1[ep]=null,m8=J1[--ep],J1[ep]=null;for(;p===U0;)U0=Wo[--Go],Wo[Go]=null,Xc=Wo[--Go],Wo[Go]=null,Gc=Wo[--Go],Wo[Go]=null}var xo=null,wo=null,tr=!1,Da=null;function eP(p,b){var w=Zo(5,null,null,0);w.elementType="DELETED",w.stateNode=b,w.return=p,b=p.deletions,b===null?(p.deletions=[w],p.flags|=16):b.push(w)}function tP(p,b){switch(p.tag){case 5:var w=p.type;return b=b.nodeType!==1||w.toLowerCase()!==b.nodeName.toLowerCase()?null:b,b!==null?(p.stateNode=b,xo=p,wo=vd(b.firstChild),!0):!1;case 6:return b=p.pendingProps===""||b.nodeType!==3?null:b,b!==null?(p.stateNode=b,xo=p,wo=null,!0):!1;case 13:return b=b.nodeType!==8?null:b,b!==null?(w=U0!==null?{id:Gc,overflow:Xc}:null,p.memoizedState={dehydrated:b,treeContext:w,retryLane:1073741824},w=Zo(18,null,null,0),w.stateNode=b,w.return=p,p.child=w,xo=p,wo=null,!0):!1;default:return!1}}function ev(p){return(p.mode&1)!==0&&(p.flags&128)===0}function tv(p){if(tr){var b=wo;if(b){var w=b;if(!tP(p,b)){if(ev(p))throw Error(n(418));b=vd(w.nextSibling);var C=xo;b&&tP(p,b)?eP(C,w):(p.flags=p.flags&-4097|2,tr=!1,xo=p)}}else{if(ev(p))throw Error(n(418));p.flags=p.flags&-4097|2,tr=!1,xo=p}}}function nP(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;xo=p}function g8(p){if(p!==xo)return!1;if(!tr)return nP(p),tr=!0,!1;var b;if((b=p.tag!==3)&&!(b=p.tag!==5)&&(b=p.type,b=b!=="head"&&b!=="body"&&!G7(p.type,p.memoizedProps)),b&&(b=wo)){if(ev(p))throw rP(),Error(n(418));for(;b;)eP(p,b),b=vd(b.nextSibling)}if(nP(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,b=0;p;){if(p.nodeType===8){var w=p.data;if(w==="/$"){if(b===0){wo=vd(p.nextSibling);break e}b--}else w!=="$"&&w!=="$!"&&w!=="$?"||b++}p=p.nextSibling}wo=null}}else wo=xo?vd(p.stateNode.nextSibling):null;return!0}function rP(){for(var p=wo;p;)p=vd(p.nextSibling)}function tp(){wo=xo=null,tr=!1}function nv(p){Da===null?Da=[p]:Da.push(p)}var Fae=k.ReactCurrentBatchConfig;function L6(p,b,w){if(p=w.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var C=w.stateNode}if(!C)throw Error(n(147,p));var N=C,L=""+p;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===L?b.ref:(b=function(Z){var te=N.refs;Z===null?delete te[L]:te[L]=Z},b._stringRef=L,b)}if(typeof p!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,p))}return p}function b8(p,b){throw p=Object.prototype.toString.call(b),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":p))}function iP(p){var b=p._init;return b(p._payload)}function sP(p){function b(le,re){if(p){var de=le.deletions;de===null?(le.deletions=[re],le.flags|=16):de.push(re)}}function w(le,re){if(!p)return null;for(;re!==null;)b(le,re),re=re.sibling;return null}function C(le,re){for(le=new Map;re!==null;)re.key!==null?le.set(re.key,re):le.set(re.index,re),re=re.sibling;return le}function N(le,re){return le=_d(le,re),le.index=0,le.sibling=null,le}function L(le,re,de){return le.index=de,p?(de=le.alternate,de!==null?(de=de.index,de<re?(le.flags|=2,re):de):(le.flags|=2,re)):(le.flags|=1048576,re)}function Z(le){return p&&le.alternate===null&&(le.flags|=2),le}function te(le,re,de,Be){return re===null||re.tag!==6?(re=Xv(de,le.mode,Be),re.return=le,re):(re=N(re,de),re.return=le,re)}function ne(le,re,de,Be){var lt=de.type;return lt===A?Me(le,re,de.props.children,Be,de.key):re!==null&&(re.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===z&&iP(lt)===re.type)?(Be=N(re,de.props),Be.ref=L6(le,re,de),Be.return=le,Be):(Be=z8(de.type,de.key,de.props,null,le.mode,Be),Be.ref=L6(le,re,de),Be.return=le,Be)}function me(le,re,de,Be){return re===null||re.tag!==4||re.stateNode.containerInfo!==de.containerInfo||re.stateNode.implementation!==de.implementation?(re=Kv(de,le.mode,Be),re.return=le,re):(re=N(re,de.children||[]),re.return=le,re)}function Me(le,re,de,Be,lt){return re===null||re.tag!==7?(re=M0(de,le.mode,Be,lt),re.return=le,re):(re=N(re,de),re.return=le,re)}function _e(le,re,de){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Xv(""+re,le.mode,de),re.return=le,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case M:return de=z8(re.type,re.key,re.props,null,le.mode,de),de.ref=L6(le,null,re),de.return=le,de;case S:return re=Kv(re,le.mode,de),re.return=le,re;case z:var Be=re._init;return _e(le,Be(re._payload),de)}if(Wt(re)||W(re))return re=M0(re,le.mode,de,null),re.return=le,re;b8(le,re)}return null}function Ce(le,re,de,Be){var lt=re!==null?re.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return lt!==null?null:te(le,re,""+de,Be);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case M:return de.key===lt?ne(le,re,de,Be):null;case S:return de.key===lt?me(le,re,de,Be):null;case z:return lt=de._init,Ce(le,re,lt(de._payload),Be)}if(Wt(de)||W(de))return lt!==null?null:Me(le,re,de,Be,null);b8(le,de)}return null}function Ye(le,re,de,Be,lt){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return le=le.get(de)||null,te(re,le,""+Be,lt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case M:return le=le.get(Be.key===null?de:Be.key)||null,ne(re,le,Be,lt);case S:return le=le.get(Be.key===null?de:Be.key)||null,me(re,le,Be,lt);case z:var gt=Be._init;return Ye(le,re,de,gt(Be._payload),lt)}if(Wt(Be)||W(Be))return le=le.get(de)||null,Me(re,le,Be,lt,null);b8(re,Be)}return null}function nt(le,re,de,Be){for(var lt=null,gt=null,bt=re,Et=re=0,Ui=null;bt!==null&&Et<de.length;Et++){bt.index>Et?(Ui=bt,bt=null):Ui=bt.sibling;var dn=Ce(le,bt,de[Et],Be);if(dn===null){bt===null&&(bt=Ui);break}p&&bt&&dn.alternate===null&&b(le,bt),re=L(dn,re,Et),gt===null?lt=dn:gt.sibling=dn,gt=dn,bt=Ui}if(Et===de.length)return w(le,bt),tr&&x0(le,Et),lt;if(bt===null){for(;Et<de.length;Et++)bt=_e(le,de[Et],Be),bt!==null&&(re=L(bt,re,Et),gt===null?lt=bt:gt.sibling=bt,gt=bt);return tr&&x0(le,Et),lt}for(bt=C(le,bt);Et<de.length;Et++)Ui=Ye(bt,le,Et,de[Et],Be),Ui!==null&&(p&&Ui.alternate!==null&&bt.delete(Ui.key===null?Et:Ui.key),re=L(Ui,re,Et),gt===null?lt=Ui:gt.sibling=Ui,gt=Ui);return p&&bt.forEach(function(Pd){return b(le,Pd)}),tr&&x0(le,Et),lt}function st(le,re,de,Be){var lt=W(de);if(typeof lt!="function")throw Error(n(150));if(de=lt.call(de),de==null)throw Error(n(151));for(var gt=lt=null,bt=re,Et=re=0,Ui=null,dn=de.next();bt!==null&&!dn.done;Et++,dn=de.next()){bt.index>Et?(Ui=bt,bt=null):Ui=bt.sibling;var Pd=Ce(le,bt,dn.value,Be);if(Pd===null){bt===null&&(bt=Ui);break}p&&bt&&Pd.alternate===null&&b(le,bt),re=L(Pd,re,Et),gt===null?lt=Pd:gt.sibling=Pd,gt=Pd,bt=Ui}if(dn.done)return w(le,bt),tr&&x0(le,Et),lt;if(bt===null){for(;!dn.done;Et++,dn=de.next())dn=_e(le,dn.value,Be),dn!==null&&(re=L(dn,re,Et),gt===null?lt=dn:gt.sibling=dn,gt=dn);return tr&&x0(le,Et),lt}for(bt=C(le,bt);!dn.done;Et++,dn=de.next())dn=Ye(bt,le,Et,dn.value,Be),dn!==null&&(p&&dn.alternate!==null&&bt.delete(dn.key===null?Et:dn.key),re=L(dn,re,Et),gt===null?lt=dn:gt.sibling=dn,gt=dn);return p&&bt.forEach(function(yle){return b(le,yle)}),tr&&x0(le,Et),lt}function Lr(le,re,de,Be){if(typeof de=="object"&&de!==null&&de.type===A&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case M:e:{for(var lt=de.key,gt=re;gt!==null;){if(gt.key===lt){if(lt=de.type,lt===A){if(gt.tag===7){w(le,gt.sibling),re=N(gt,de.props.children),re.return=le,le=re;break e}}else if(gt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===z&&iP(lt)===gt.type){w(le,gt.sibling),re=N(gt,de.props),re.ref=L6(le,gt,de),re.return=le,le=re;break e}w(le,gt);break}else b(le,gt);gt=gt.sibling}de.type===A?(re=M0(de.props.children,le.mode,Be,de.key),re.return=le,le=re):(Be=z8(de.type,de.key,de.props,null,le.mode,Be),Be.ref=L6(le,re,de),Be.return=le,le=Be)}return Z(le);case S:e:{for(gt=de.key;re!==null;){if(re.key===gt)if(re.tag===4&&re.stateNode.containerInfo===de.containerInfo&&re.stateNode.implementation===de.implementation){w(le,re.sibling),re=N(re,de.children||[]),re.return=le,le=re;break e}else{w(le,re);break}else b(le,re);re=re.sibling}re=Kv(de,le.mode,Be),re.return=le,le=re}return Z(le);case z:return gt=de._init,Lr(le,re,gt(de._payload),Be)}if(Wt(de))return nt(le,re,de,Be);if(W(de))return st(le,re,de,Be);b8(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,re!==null&&re.tag===6?(w(le,re.sibling),re=N(re,de),re.return=le,le=re):(w(le,re),re=Xv(de,le.mode,Be),re.return=le,le=re),Z(le)):w(le,re)}return Lr}var np=sP(!0),oP=sP(!1),y8=Ed(null),U8=null,rp=null,rv=null;function iv(){rv=rp=U8=null}function sv(p){var b=y8.current;Yn(y8),p._currentValue=b}function ov(p,b,w){for(;p!==null;){var C=p.alternate;if((p.childLanes&b)!==b?(p.childLanes|=b,C!==null&&(C.childLanes|=b)):C!==null&&(C.childLanes&b)!==b&&(C.childLanes|=b),p===w)break;p=p.return}}function ip(p,b){U8=p,rv=rp=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&b&&(Hs=!0),p.firstContext=null)}function Xo(p){var b=p._currentValue;if(rv!==p)if(p={context:p,memoizedValue:b,next:null},rp===null){if(U8===null)throw Error(n(308));rp=p,U8.dependencies={lanes:0,firstContext:p}}else rp=rp.next=p;return b}var w0=null;function av(p){w0===null?w0=[p]:w0.push(p)}function aP(p,b,w,C){var N=b.interleaved;return N===null?(w.next=w,av(b)):(w.next=N.next,N.next=w),b.interleaved=w,Kc(p,C)}function Kc(p,b){p.lanes|=b;var w=p.alternate;for(w!==null&&(w.lanes|=b),w=p,p=p.return;p!==null;)p.childLanes|=b,w=p.alternate,w!==null&&(w.childLanes|=b),w=p,p=p.return;return w.tag===3?w.stateNode:null}var Cd=!1;function lv(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lP(p,b){p=p.updateQueue,b.updateQueue===p&&(b.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Yc(p,b){return{eventTime:p,lane:b,tag:0,payload:null,callback:null,next:null}}function Ad(p,b,w){var C=p.updateQueue;if(C===null)return null;if(C=C.shared,sn&2){var N=C.pending;return N===null?b.next=b:(b.next=N.next,N.next=b),C.pending=b,Kc(p,w)}return N=C.interleaved,N===null?(b.next=b,av(C)):(b.next=N.next,N.next=b),C.interleaved=b,Kc(p,w)}function x8(p,b,w){if(b=b.updateQueue,b!==null&&(b=b.shared,(w&4194240)!==0)){var C=b.lanes;C&=p.pendingLanes,w|=C,b.lanes=w,v7(p,w)}}function cP(p,b){var w=p.updateQueue,C=p.alternate;if(C!==null&&(C=C.updateQueue,w===C)){var N=null,L=null;if(w=w.firstBaseUpdate,w!==null){do{var Z={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};L===null?N=L=Z:L=L.next=Z,w=w.next}while(w!==null);L===null?N=L=b:L=L.next=b}else N=L=b;w={baseState:C.baseState,firstBaseUpdate:N,lastBaseUpdate:L,shared:C.shared,effects:C.effects},p.updateQueue=w;return}p=w.lastBaseUpdate,p===null?w.firstBaseUpdate=b:p.next=b,w.lastBaseUpdate=b}function w8(p,b,w,C){var N=p.updateQueue;Cd=!1;var L=N.firstBaseUpdate,Z=N.lastBaseUpdate,te=N.shared.pending;if(te!==null){N.shared.pending=null;var ne=te,me=ne.next;ne.next=null,Z===null?L=me:Z.next=me,Z=ne;var Me=p.alternate;Me!==null&&(Me=Me.updateQueue,te=Me.lastBaseUpdate,te!==Z&&(te===null?Me.firstBaseUpdate=me:te.next=me,Me.lastBaseUpdate=ne))}if(L!==null){var _e=N.baseState;Z=0,Me=me=ne=null,te=L;do{var Ce=te.lane,Ye=te.eventTime;if((C&Ce)===Ce){Me!==null&&(Me=Me.next={eventTime:Ye,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var nt=p,st=te;switch(Ce=b,Ye=w,st.tag){case 1:if(nt=st.payload,typeof nt=="function"){_e=nt.call(Ye,_e,Ce);break e}_e=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=st.payload,Ce=typeof nt=="function"?nt.call(Ye,_e,Ce):nt,Ce==null)break e;_e=B({},_e,Ce);break e;case 2:Cd=!0}}te.callback!==null&&te.lane!==0&&(p.flags|=64,Ce=N.effects,Ce===null?N.effects=[te]:Ce.push(te))}else Ye={eventTime:Ye,lane:Ce,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Me===null?(me=Me=Ye,ne=_e):Me=Me.next=Ye,Z|=Ce;if(te=te.next,te===null){if(te=N.shared.pending,te===null)break;Ce=te,te=Ce.next,Ce.next=null,N.lastBaseUpdate=Ce,N.shared.pending=null}}while(!0);if(Me===null&&(ne=_e),N.baseState=ne,N.firstBaseUpdate=me,N.lastBaseUpdate=Me,b=N.shared.interleaved,b!==null){N=b;do Z|=N.lane,N=N.next;while(N!==b)}else L===null&&(N.shared.lanes=0);k0|=Z,p.lanes=Z,p.memoizedState=_e}}function fP(p,b,w){if(p=b.effects,b.effects=null,p!==null)for(b=0;b<p.length;b++){var C=p[b],N=C.callback;if(N!==null){if(C.callback=null,C=w,typeof N!="function")throw Error(n(191,N));N.call(C)}}}var O6={},Pl=Ed(O6),j6=Ed(O6),B6=Ed(O6);function v0(p){if(p===O6)throw Error(n(174));return p}function cv(p,b){switch(Fn(B6,b),Fn(j6,p),Fn(Pl,O6),p=b.nodeType,p){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Pe(null,"");break;default:p=p===8?b.parentNode:b,b=p.namespaceURI||null,p=p.tagName,b=Pe(b,p)}Yn(Pl),Fn(Pl,b)}function sp(){Yn(Pl),Yn(j6),Yn(B6)}function dP(p){v0(B6.current);var b=v0(Pl.current),w=Pe(b,p.type);b!==w&&(Fn(j6,p),Fn(Pl,w))}function fv(p){j6.current===p&&(Yn(Pl),Yn(j6))}var pr=Ed(0);function v8(p){for(var b=p;b!==null;){if(b.tag===13){var w=b.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if(b.flags&128)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var dv=[];function uv(){for(var p=0;p<dv.length;p++)dv[p]._workInProgressVersionPrimary=null;dv.length=0}var E8=k.ReactCurrentDispatcher,hv=k.ReactCurrentBatchConfig,E0=0,mr=null,si=null,bi=null,k8=!1,F6=!1,z6=0,zae=0;function Zi(){throw Error(n(321))}function pv(p,b){if(b===null)return!1;for(var w=0;w<b.length&&w<p.length;w++)if(!Pa(p[w],b[w]))return!1;return!0}function mv(p,b,w,C,N,L){if(E0=L,mr=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,E8.current=p===null||p.memoizedState===null?Wae:Gae,p=w(C,N),F6){L=0;do{if(F6=!1,z6=0,25<=L)throw Error(n(301));L+=1,bi=si=null,b.updateQueue=null,E8.current=Xae,p=w(C,N)}while(F6)}if(E8.current=A8,b=si!==null&&si.next!==null,E0=0,bi=si=mr=null,k8=!1,b)throw Error(n(300));return p}function gv(){var p=z6!==0;return z6=0,p}function Dl(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bi===null?mr.memoizedState=bi=p:bi=bi.next=p,bi}function Ko(){if(si===null){var p=mr.alternate;p=p!==null?p.memoizedState:null}else p=si.next;var b=bi===null?mr.memoizedState:bi.next;if(b!==null)bi=b,si=p;else{if(p===null)throw Error(n(310));si=p,p={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},bi===null?mr.memoizedState=bi=p:bi=bi.next=p}return bi}function $6(p,b){return typeof b=="function"?b(p):b}function bv(p){var b=Ko(),w=b.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=p;var C=si,N=C.baseQueue,L=w.pending;if(L!==null){if(N!==null){var Z=N.next;N.next=L.next,L.next=Z}C.baseQueue=N=L,w.pending=null}if(N!==null){L=N.next,C=C.baseState;var te=Z=null,ne=null,me=L;do{var Me=me.lane;if((E0&Me)===Me)ne!==null&&(ne=ne.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),C=me.hasEagerState?me.eagerState:p(C,me.action);else{var _e={lane:Me,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};ne===null?(te=ne=_e,Z=C):ne=ne.next=_e,mr.lanes|=Me,k0|=Me}me=me.next}while(me!==null&&me!==L);ne===null?Z=C:ne.next=te,Pa(C,b.memoizedState)||(Hs=!0),b.memoizedState=C,b.baseState=Z,b.baseQueue=ne,w.lastRenderedState=C}if(p=w.interleaved,p!==null){N=p;do L=N.lane,mr.lanes|=L,k0|=L,N=N.next;while(N!==p)}else N===null&&(w.lanes=0);return[b.memoizedState,w.dispatch]}function yv(p){var b=Ko(),w=b.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=p;var C=w.dispatch,N=w.pending,L=b.memoizedState;if(N!==null){w.pending=null;var Z=N=N.next;do L=p(L,Z.action),Z=Z.next;while(Z!==N);Pa(L,b.memoizedState)||(Hs=!0),b.memoizedState=L,b.baseQueue===null&&(b.baseState=L),w.lastRenderedState=L}return[L,C]}function uP(){}function hP(p,b){var w=mr,C=Ko(),N=b(),L=!Pa(C.memoizedState,N);if(L&&(C.memoizedState=N,Hs=!0),C=C.queue,Uv(gP.bind(null,w,C,p),[p]),C.getSnapshot!==b||L||bi!==null&&bi.memoizedState.tag&1){if(w.flags|=2048,H6(9,mP.bind(null,w,C,N,b),void 0,null),yi===null)throw Error(n(349));E0&30||pP(w,b,N)}return N}function pP(p,b,w){p.flags|=16384,p={getSnapshot:b,value:w},b=mr.updateQueue,b===null?(b={lastEffect:null,stores:null},mr.updateQueue=b,b.stores=[p]):(w=b.stores,w===null?b.stores=[p]:w.push(p))}function mP(p,b,w,C){b.value=w,b.getSnapshot=C,bP(b)&&yP(p)}function gP(p,b,w){return w(function(){bP(b)&&yP(p)})}function bP(p){var b=p.getSnapshot;p=p.value;try{var w=b();return!Pa(p,w)}catch{return!0}}function yP(p){var b=Kc(p,1);b!==null&&Ba(b,p,1,-1)}function UP(p){var b=Dl();return typeof p=="function"&&(p=p()),b.memoizedState=b.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$6,lastRenderedState:p},b.queue=p,p=p.dispatch=Vae.bind(null,mr,p),[b.memoizedState,p]}function H6(p,b,w,C){return p={tag:p,create:b,destroy:w,deps:C,next:null},b=mr.updateQueue,b===null?(b={lastEffect:null,stores:null},mr.updateQueue=b,b.lastEffect=p.next=p):(w=b.lastEffect,w===null?b.lastEffect=p.next=p:(C=w.next,w.next=p,p.next=C,b.lastEffect=p)),p}function xP(){return Ko().memoizedState}function S8(p,b,w,C){var N=Dl();mr.flags|=p,N.memoizedState=H6(1|b,w,void 0,C===void 0?null:C)}function C8(p,b,w,C){var N=Ko();C=C===void 0?null:C;var L=void 0;if(si!==null){var Z=si.memoizedState;if(L=Z.destroy,C!==null&&pv(C,Z.deps)){N.memoizedState=H6(b,w,L,C);return}}mr.flags|=p,N.memoizedState=H6(1|b,w,L,C)}function wP(p,b){return S8(8390656,8,p,b)}function Uv(p,b){return C8(2048,8,p,b)}function vP(p,b){return C8(4,2,p,b)}function EP(p,b){return C8(4,4,p,b)}function kP(p,b){if(typeof b=="function")return p=p(),b(p),function(){b(null)};if(b!=null)return p=p(),b.current=p,function(){b.current=null}}function SP(p,b,w){return w=w!=null?w.concat([p]):null,C8(4,4,kP.bind(null,b,p),w)}function xv(){}function CP(p,b){var w=Ko();b=b===void 0?null:b;var C=w.memoizedState;return C!==null&&b!==null&&pv(b,C[1])?C[0]:(w.memoizedState=[p,b],p)}function AP(p,b){var w=Ko();b=b===void 0?null:b;var C=w.memoizedState;return C!==null&&b!==null&&pv(b,C[1])?C[0]:(p=p(),w.memoizedState=[p,b],p)}function MP(p,b,w){return E0&21?(Pa(w,b)||(w=$1(),mr.lanes|=w,k0|=w,p.baseState=!0),b):(p.baseState&&(p.baseState=!1,Hs=!0),p.memoizedState=w)}function $ae(p,b){var w=Cn;Cn=w!==0&&4>w?w:4,p(!0);var C=hv.transition;hv.transition={};try{p(!1),b()}finally{Cn=w,hv.transition=C}}function TP(){return Ko().memoizedState}function Hae(p,b,w){var C=Nd(p);if(w={lane:C,action:w,hasEagerState:!1,eagerState:null,next:null},IP(p))NP(b,w);else if(w=aP(p,b,w,C),w!==null){var N=ws();Ba(w,p,C,N),RP(w,b,C)}}function Vae(p,b,w){var C=Nd(p),N={lane:C,action:w,hasEagerState:!1,eagerState:null,next:null};if(IP(p))NP(b,N);else{var L=p.alternate;if(p.lanes===0&&(L===null||L.lanes===0)&&(L=b.lastRenderedReducer,L!==null))try{var Z=b.lastRenderedState,te=L(Z,w);if(N.hasEagerState=!0,N.eagerState=te,Pa(te,Z)){var ne=b.interleaved;ne===null?(N.next=N,av(b)):(N.next=ne.next,ne.next=N),b.interleaved=N;return}}catch{}finally{}w=aP(p,b,N,C),w!==null&&(N=ws(),Ba(w,p,C,N),RP(w,b,C))}}function IP(p){var b=p.alternate;return p===mr||b!==null&&b===mr}function NP(p,b){F6=k8=!0;var w=p.pending;w===null?b.next=b:(b.next=w.next,w.next=b),p.pending=b}function RP(p,b,w){if(w&4194240){var C=b.lanes;C&=p.pendingLanes,w|=C,b.lanes=w,v7(p,w)}}var A8={readContext:Xo,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useInsertionEffect:Zi,useLayoutEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useMutableSource:Zi,useSyncExternalStore:Zi,useId:Zi,unstable_isNewReconciler:!1},Wae={readContext:Xo,useCallback:function(p,b){return Dl().memoizedState=[p,b===void 0?null:b],p},useContext:Xo,useEffect:wP,useImperativeHandle:function(p,b,w){return w=w!=null?w.concat([p]):null,S8(4194308,4,kP.bind(null,b,p),w)},useLayoutEffect:function(p,b){return S8(4194308,4,p,b)},useInsertionEffect:function(p,b){return S8(4,2,p,b)},useMemo:function(p,b){var w=Dl();return b=b===void 0?null:b,p=p(),w.memoizedState=[p,b],p},useReducer:function(p,b,w){var C=Dl();return b=w!==void 0?w(b):b,C.memoizedState=C.baseState=b,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:b},C.queue=p,p=p.dispatch=Hae.bind(null,mr,p),[C.memoizedState,p]},useRef:function(p){var b=Dl();return p={current:p},b.memoizedState=p},useState:UP,useDebugValue:xv,useDeferredValue:function(p){return Dl().memoizedState=p},useTransition:function(){var p=UP(!1),b=p[0];return p=$ae.bind(null,p[1]),Dl().memoizedState=p,[b,p]},useMutableSource:function(){},useSyncExternalStore:function(p,b,w){var C=mr,N=Dl();if(tr){if(w===void 0)throw Error(n(407));w=w()}else{if(w=b(),yi===null)throw Error(n(349));E0&30||pP(C,b,w)}N.memoizedState=w;var L={value:w,getSnapshot:b};return N.queue=L,wP(gP.bind(null,C,L,p),[p]),C.flags|=2048,H6(9,mP.bind(null,C,L,w,b),void 0,null),w},useId:function(){var p=Dl(),b=yi.identifierPrefix;if(tr){var w=Xc,C=Gc;w=(C&~(1<<32-yo(C)-1)).toString(32)+w,b=":"+b+"R"+w,w=z6++,0<w&&(b+="H"+w.toString(32)),b+=":"}else w=zae++,b=":"+b+"r"+w.toString(32)+":";return p.memoizedState=b},unstable_isNewReconciler:!1},Gae={readContext:Xo,useCallback:CP,useContext:Xo,useEffect:Uv,useImperativeHandle:SP,useInsertionEffect:vP,useLayoutEffect:EP,useMemo:AP,useReducer:bv,useRef:xP,useState:function(){return bv($6)},useDebugValue:xv,useDeferredValue:function(p){var b=Ko();return MP(b,si.memoizedState,p)},useTransition:function(){var p=bv($6)[0],b=Ko().memoizedState;return[p,b]},useMutableSource:uP,useSyncExternalStore:hP,useId:TP,unstable_isNewReconciler:!1},Xae={readContext:Xo,useCallback:CP,useContext:Xo,useEffect:Uv,useImperativeHandle:SP,useInsertionEffect:vP,useLayoutEffect:EP,useMemo:AP,useReducer:yv,useRef:xP,useState:function(){return yv($6)},useDebugValue:xv,useDeferredValue:function(p){var b=Ko();return si===null?b.memoizedState=p:MP(b,si.memoizedState,p)},useTransition:function(){var p=yv($6)[0],b=Ko().memoizedState;return[p,b]},useMutableSource:uP,useSyncExternalStore:hP,useId:TP,unstable_isNewReconciler:!1};function La(p,b){if(p&&p.defaultProps){b=B({},b),p=p.defaultProps;for(var w in p)b[w]===void 0&&(b[w]=p[w]);return b}return b}function wv(p,b,w,C){b=p.memoizedState,w=w(C,b),w=w==null?b:B({},b,w),p.memoizedState=w,p.lanes===0&&(p.updateQueue.baseState=w)}var M8={isMounted:function(p){return(p=p._reactInternals)?Pi(p)===p:!1},enqueueSetState:function(p,b,w){p=p._reactInternals;var C=ws(),N=Nd(p),L=Yc(C,N);L.payload=b,w!=null&&(L.callback=w),b=Ad(p,L,N),b!==null&&(Ba(b,p,N,C),x8(b,p,N))},enqueueReplaceState:function(p,b,w){p=p._reactInternals;var C=ws(),N=Nd(p),L=Yc(C,N);L.tag=1,L.payload=b,w!=null&&(L.callback=w),b=Ad(p,L,N),b!==null&&(Ba(b,p,N,C),x8(b,p,N))},enqueueForceUpdate:function(p,b){p=p._reactInternals;var w=ws(),C=Nd(p),N=Yc(w,C);N.tag=2,b!=null&&(N.callback=b),b=Ad(p,N,C),b!==null&&(Ba(b,p,C,w),x8(b,p,C))}};function _P(p,b,w,C,N,L,Z){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(C,L,Z):b.prototype&&b.prototype.isPureReactComponent?!T6(w,C)||!T6(N,L):!0}function PP(p,b,w){var C=!1,N=kd,L=b.contextType;return typeof L=="object"&&L!==null?L=Xo(L):(N=$s(b)?y0:Yi.current,C=b.contextTypes,L=(C=C!=null)?Q1(p,N):kd),b=new b(w,L),p.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=M8,p.stateNode=b,b._reactInternals=p,C&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=N,p.__reactInternalMemoizedMaskedChildContext=L),b}function DP(p,b,w,C){p=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(w,C),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(w,C),b.state!==p&&M8.enqueueReplaceState(b,b.state,null)}function vv(p,b,w,C){var N=p.stateNode;N.props=w,N.state=p.memoizedState,N.refs={},lv(p);var L=b.contextType;typeof L=="object"&&L!==null?N.context=Xo(L):(L=$s(b)?y0:Yi.current,N.context=Q1(p,L)),N.state=p.memoizedState,L=b.getDerivedStateFromProps,typeof L=="function"&&(wv(p,b,L,w),N.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(b=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),b!==N.state&&M8.enqueueReplaceState(N,N.state,null),w8(p,w,N,C),N.state=p.memoizedState),typeof N.componentDidMount=="function"&&(p.flags|=4194308)}function op(p,b){try{var w="",C=b;do w+=ge(C),C=C.return;while(C);var N=w}catch(L){N=`
Error generating stack: `+L.message+`
`+L.stack}return{value:p,source:b,stack:N,digest:null}}function Ev(p,b,w){return{value:p,source:null,stack:w??null,digest:b??null}}function kv(p,b){try{console.error(b.value)}catch(w){setTimeout(function(){throw w})}}var Kae=typeof WeakMap=="function"?WeakMap:Map;function LP(p,b,w){w=Yc(-1,w),w.tag=3,w.payload={element:null};var C=b.value;return w.callback=function(){D8||(D8=!0,Bv=C),kv(p,b)},w}function OP(p,b,w){w=Yc(-1,w),w.tag=3;var C=p.type.getDerivedStateFromError;if(typeof C=="function"){var N=b.value;w.payload=function(){return C(N)},w.callback=function(){kv(p,b)}}var L=p.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(w.callback=function(){kv(p,b),typeof C!="function"&&(Td===null?Td=new Set([this]):Td.add(this));var Z=b.stack;this.componentDidCatch(b.value,{componentStack:Z!==null?Z:""})}),w}function jP(p,b,w){var C=p.pingCache;if(C===null){C=p.pingCache=new Kae;var N=new Set;C.set(b,N)}else N=C.get(b),N===void 0&&(N=new Set,C.set(b,N));N.has(w)||(N.add(w),p=lle.bind(null,p,b,w),b.then(p,p))}function BP(p){do{var b;if((b=p.tag===13)&&(b=p.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return p;p=p.return}while(p!==null);return null}function FP(p,b,w,C,N){return p.mode&1?(p.flags|=65536,p.lanes=N,p):(p===b?p.flags|=65536:(p.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(b=Yc(-1,1),b.tag=2,Ad(w,b,1))),w.lanes|=1),p)}var Yae=k.ReactCurrentOwner,Hs=!1;function xs(p,b,w,C){b.child=p===null?oP(b,null,w,C):np(b,p.child,w,C)}function zP(p,b,w,C,N){w=w.render;var L=b.ref;return ip(b,N),C=mv(p,b,w,C,L,N),w=gv(),p!==null&&!Hs?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~N,Zc(p,b,N)):(tr&&w&&Q7(b),b.flags|=1,xs(p,b,C,N),b.child)}function $P(p,b,w,C,N){if(p===null){var L=w.type;return typeof L=="function"&&!Gv(L)&&L.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(b.tag=15,b.type=L,HP(p,b,L,C,N)):(p=z8(w.type,null,C,b,b.mode,N),p.ref=b.ref,p.return=b,b.child=p)}if(L=p.child,!(p.lanes&N)){var Z=L.memoizedProps;if(w=w.compare,w=w!==null?w:T6,w(Z,C)&&p.ref===b.ref)return Zc(p,b,N)}return b.flags|=1,p=_d(L,C),p.ref=b.ref,p.return=b,b.child=p}function HP(p,b,w,C,N){if(p!==null){var L=p.memoizedProps;if(T6(L,C)&&p.ref===b.ref)if(Hs=!1,b.pendingProps=C=L,(p.lanes&N)!==0)p.flags&131072&&(Hs=!0);else return b.lanes=p.lanes,Zc(p,b,N)}return Sv(p,b,w,C,N)}function VP(p,b,w){var C=b.pendingProps,N=C.children,L=p!==null?p.memoizedState:null;if(C.mode==="hidden")if(!(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(lp,vo),vo|=w;else{if(!(w&1073741824))return p=L!==null?L.baseLanes|w:w,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:p,cachePool:null,transitions:null},b.updateQueue=null,Fn(lp,vo),vo|=p,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=L!==null?L.baseLanes:w,Fn(lp,vo),vo|=C}else L!==null?(C=L.baseLanes|w,b.memoizedState=null):C=w,Fn(lp,vo),vo|=C;return xs(p,b,N,w),b.child}function WP(p,b){var w=b.ref;(p===null&&w!==null||p!==null&&p.ref!==w)&&(b.flags|=512,b.flags|=2097152)}function Sv(p,b,w,C,N){var L=$s(w)?y0:Yi.current;return L=Q1(b,L),ip(b,N),w=mv(p,b,w,C,L,N),C=gv(),p!==null&&!Hs?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~N,Zc(p,b,N)):(tr&&C&&Q7(b),b.flags|=1,xs(p,b,w,N),b.child)}function GP(p,b,w,C,N){if($s(w)){var L=!0;u8(b)}else L=!1;if(ip(b,N),b.stateNode===null)I8(p,b),PP(b,w,C),vv(b,w,C,N),C=!0;else if(p===null){var Z=b.stateNode,te=b.memoizedProps;Z.props=te;var ne=Z.context,me=w.contextType;typeof me=="object"&&me!==null?me=Xo(me):(me=$s(w)?y0:Yi.current,me=Q1(b,me));var Me=w.getDerivedStateFromProps,_e=typeof Me=="function"||typeof Z.getSnapshotBeforeUpdate=="function";_e||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(te!==C||ne!==me)&&DP(b,Z,C,me),Cd=!1;var Ce=b.memoizedState;Z.state=Ce,w8(b,C,Z,N),ne=b.memoizedState,te!==C||Ce!==ne||zs.current||Cd?(typeof Me=="function"&&(wv(b,w,Me,C),ne=b.memoizedState),(te=Cd||_P(b,w,te,C,Ce,ne,me))?(_e||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(b.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=C,b.memoizedState=ne),Z.props=C,Z.state=ne,Z.context=me,C=te):(typeof Z.componentDidMount=="function"&&(b.flags|=4194308),C=!1)}else{Z=b.stateNode,lP(p,b),te=b.memoizedProps,me=b.type===b.elementType?te:La(b.type,te),Z.props=me,_e=b.pendingProps,Ce=Z.context,ne=w.contextType,typeof ne=="object"&&ne!==null?ne=Xo(ne):(ne=$s(w)?y0:Yi.current,ne=Q1(b,ne));var Ye=w.getDerivedStateFromProps;(Me=typeof Ye=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(te!==_e||Ce!==ne)&&DP(b,Z,C,ne),Cd=!1,Ce=b.memoizedState,Z.state=Ce,w8(b,C,Z,N);var nt=b.memoizedState;te!==_e||Ce!==nt||zs.current||Cd?(typeof Ye=="function"&&(wv(b,w,Ye,C),nt=b.memoizedState),(me=Cd||_P(b,w,me,C,Ce,nt,ne)||!1)?(Me||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(C,nt,ne),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(C,nt,ne)),typeof Z.componentDidUpdate=="function"&&(b.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof Z.componentDidUpdate!="function"||te===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||te===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=1024),b.memoizedProps=C,b.memoizedState=nt),Z.props=C,Z.state=nt,Z.context=ne,C=me):(typeof Z.componentDidUpdate!="function"||te===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||te===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=1024),C=!1)}return Cv(p,b,w,C,L,N)}function Cv(p,b,w,C,N,L){WP(p,b);var Z=(b.flags&128)!==0;if(!C&&!Z)return N&&q_(b,w,!1),Zc(p,b,L);C=b.stateNode,Yae.current=b;var te=Z&&typeof w.getDerivedStateFromError!="function"?null:C.render();return b.flags|=1,p!==null&&Z?(b.child=np(b,p.child,null,L),b.child=np(b,null,te,L)):xs(p,b,te,L),b.memoizedState=C.state,N&&q_(b,w,!0),b.child}function XP(p){var b=p.stateNode;b.pendingContext?Y_(p,b.pendingContext,b.pendingContext!==b.context):b.context&&Y_(p,b.context,!1),cv(p,b.containerInfo)}function KP(p,b,w,C,N){return tp(),nv(N),b.flags|=256,xs(p,b,w,C),b.child}var Av={dehydrated:null,treeContext:null,retryLane:0};function Mv(p){return{baseLanes:p,cachePool:null,transitions:null}}function YP(p,b,w){var C=b.pendingProps,N=pr.current,L=!1,Z=(b.flags&128)!==0,te;if((te=Z)||(te=p!==null&&p.memoizedState===null?!1:(N&2)!==0),te?(L=!0,b.flags&=-129):(p===null||p.memoizedState!==null)&&(N|=1),Fn(pr,N&1),p===null)return tv(b),p=b.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(b.mode&1?p.data==="$!"?b.lanes=8:b.lanes=1073741824:b.lanes=1,null):(Z=C.children,p=C.fallback,L?(C=b.mode,L=b.child,Z={mode:"hidden",children:Z},!(C&1)&&L!==null?(L.childLanes=0,L.pendingProps=Z):L=$8(Z,C,0,null),p=M0(p,C,w,null),L.return=b,p.return=b,L.sibling=p,b.child=L,b.child.memoizedState=Mv(w),b.memoizedState=Av,p):Tv(b,Z));if(N=p.memoizedState,N!==null&&(te=N.dehydrated,te!==null))return Zae(p,b,Z,C,te,N,w);if(L){L=C.fallback,Z=b.mode,N=p.child,te=N.sibling;var ne={mode:"hidden",children:C.children};return!(Z&1)&&b.child!==N?(C=b.child,C.childLanes=0,C.pendingProps=ne,b.deletions=null):(C=_d(N,ne),C.subtreeFlags=N.subtreeFlags&14680064),te!==null?L=_d(te,L):(L=M0(L,Z,w,null),L.flags|=2),L.return=b,C.return=b,C.sibling=L,b.child=C,C=L,L=b.child,Z=p.child.memoizedState,Z=Z===null?Mv(w):{baseLanes:Z.baseLanes|w,cachePool:null,transitions:Z.transitions},L.memoizedState=Z,L.childLanes=p.childLanes&~w,b.memoizedState=Av,C}return L=p.child,p=L.sibling,C=_d(L,{mode:"visible",children:C.children}),!(b.mode&1)&&(C.lanes=w),C.return=b,C.sibling=null,p!==null&&(w=b.deletions,w===null?(b.deletions=[p],b.flags|=16):w.push(p)),b.child=C,b.memoizedState=null,C}function Tv(p,b){return b=$8({mode:"visible",children:b},p.mode,0,null),b.return=p,p.child=b}function T8(p,b,w,C){return C!==null&&nv(C),np(b,p.child,null,w),p=Tv(b,b.pendingProps.children),p.flags|=2,b.memoizedState=null,p}function Zae(p,b,w,C,N,L,Z){if(w)return b.flags&256?(b.flags&=-257,C=Ev(Error(n(422))),T8(p,b,Z,C)):b.memoizedState!==null?(b.child=p.child,b.flags|=128,null):(L=C.fallback,N=b.mode,C=$8({mode:"visible",children:C.children},N,0,null),L=M0(L,N,Z,null),L.flags|=2,C.return=b,L.return=b,C.sibling=L,b.child=C,b.mode&1&&np(b,p.child,null,Z),b.child.memoizedState=Mv(Z),b.memoizedState=Av,L);if(!(b.mode&1))return T8(p,b,Z,null);if(N.data==="$!"){if(C=N.nextSibling&&N.nextSibling.dataset,C)var te=C.dgst;return C=te,L=Error(n(419)),C=Ev(L,C,void 0),T8(p,b,Z,C)}if(te=(Z&p.childLanes)!==0,Hs||te){if(C=yi,C!==null){switch(Z&-Z){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=N&(C.suspendedLanes|Z)?0:N,N!==0&&N!==L.retryLane&&(L.retryLane=N,Kc(p,N),Ba(C,p,N,-1))}return Wv(),C=Ev(Error(n(421))),T8(p,b,Z,C)}return N.data==="$?"?(b.flags|=128,b.child=p.child,b=cle.bind(null,p),N._reactRetry=b,null):(p=L.treeContext,wo=vd(N.nextSibling),xo=b,tr=!0,Da=null,p!==null&&(Wo[Go++]=Gc,Wo[Go++]=Xc,Wo[Go++]=U0,Gc=p.id,Xc=p.overflow,U0=b),b=Tv(b,C.children),b.flags|=4096,b)}function ZP(p,b,w){p.lanes|=b;var C=p.alternate;C!==null&&(C.lanes|=b),ov(p.return,b,w)}function Iv(p,b,w,C,N){var L=p.memoizedState;L===null?p.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:C,tail:w,tailMode:N}:(L.isBackwards=b,L.rendering=null,L.renderingStartTime=0,L.last=C,L.tail=w,L.tailMode=N)}function qP(p,b,w){var C=b.pendingProps,N=C.revealOrder,L=C.tail;if(xs(p,b,C.children,w),C=pr.current,C&2)C=C&1|2,b.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=b.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&ZP(p,w,b);else if(p.tag===19)ZP(p,w,b);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===b)break e;for(;p.sibling===null;){if(p.return===null||p.return===b)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}C&=1}if(Fn(pr,C),!(b.mode&1))b.memoizedState=null;else switch(N){case"forwards":for(w=b.child,N=null;w!==null;)p=w.alternate,p!==null&&v8(p)===null&&(N=w),w=w.sibling;w=N,w===null?(N=b.child,b.child=null):(N=w.sibling,w.sibling=null),Iv(b,!1,N,w,L);break;case"backwards":for(w=null,N=b.child,b.child=null;N!==null;){if(p=N.alternate,p!==null&&v8(p)===null){b.child=N;break}p=N.sibling,N.sibling=w,w=N,N=p}Iv(b,!0,w,null,L);break;case"together":Iv(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function I8(p,b){!(b.mode&1)&&p!==null&&(p.alternate=null,b.alternate=null,b.flags|=2)}function Zc(p,b,w){if(p!==null&&(b.dependencies=p.dependencies),k0|=b.lanes,!(w&b.childLanes))return null;if(p!==null&&b.child!==p.child)throw Error(n(153));if(b.child!==null){for(p=b.child,w=_d(p,p.pendingProps),b.child=w,w.return=b;p.sibling!==null;)p=p.sibling,w=w.sibling=_d(p,p.pendingProps),w.return=b;w.sibling=null}return b.child}function qae(p,b,w){switch(b.tag){case 3:XP(b),tp();break;case 5:dP(b);break;case 1:$s(b.type)&&u8(b);break;case 4:cv(b,b.stateNode.containerInfo);break;case 10:var C=b.type._context,N=b.memoizedProps.value;Fn(y8,C._currentValue),C._currentValue=N;break;case 13:if(C=b.memoizedState,C!==null)return C.dehydrated!==null?(Fn(pr,pr.current&1),b.flags|=128,null):w&b.child.childLanes?YP(p,b,w):(Fn(pr,pr.current&1),p=Zc(p,b,w),p!==null?p.sibling:null);Fn(pr,pr.current&1);break;case 19:if(C=(w&b.childLanes)!==0,p.flags&128){if(C)return qP(p,b,w);b.flags|=128}if(N=b.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Fn(pr,pr.current),C)break;return null;case 22:case 23:return b.lanes=0,VP(p,b,w)}return Zc(p,b,w)}var QP,Nv,JP,eD;QP=function(p,b){for(var w=b.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Nv=function(){},JP=function(p,b,w,C){var N=p.memoizedProps;if(N!==C){p=b.stateNode,v0(Pl.current);var L=null;switch(w){case"input":N=ve(p,N),C=ve(p,C),L=[];break;case"select":N=B({},N,{value:void 0}),C=B({},C,{value:void 0}),L=[];break;case"textarea":N=Ki(p,N),C=Ki(p,C),L=[];break;default:typeof N.onClick!="function"&&typeof C.onClick=="function"&&(p.onclick=c8)}wn(w,C);var Z;w=null;for(me in N)if(!C.hasOwnProperty(me)&&N.hasOwnProperty(me)&&N[me]!=null)if(me==="style"){var te=N[me];for(Z in te)te.hasOwnProperty(Z)&&(w||(w={}),w[Z]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(i.hasOwnProperty(me)?L||(L=[]):(L=L||[]).push(me,null));for(me in C){var ne=C[me];if(te=N!=null?N[me]:void 0,C.hasOwnProperty(me)&&ne!==te&&(ne!=null||te!=null))if(me==="style")if(te){for(Z in te)!te.hasOwnProperty(Z)||ne&&ne.hasOwnProperty(Z)||(w||(w={}),w[Z]="");for(Z in ne)ne.hasOwnProperty(Z)&&te[Z]!==ne[Z]&&(w||(w={}),w[Z]=ne[Z])}else w||(L||(L=[]),L.push(me,w)),w=ne;else me==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,te=te?te.__html:void 0,ne!=null&&te!==ne&&(L=L||[]).push(me,ne)):me==="children"?typeof ne!="string"&&typeof ne!="number"||(L=L||[]).push(me,""+ne):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(i.hasOwnProperty(me)?(ne!=null&&me==="onScroll"&&Kn("scroll",p),L||te===ne||(L=[])):(L=L||[]).push(me,ne))}w&&(L=L||[]).push("style",w);var me=L;(b.updateQueue=me)&&(b.flags|=4)}},eD=function(p,b,w,C){w!==C&&(b.flags|=4)};function V6(p,b){if(!tr)switch(p.tailMode){case"hidden":b=p.tail;for(var w=null;b!==null;)b.alternate!==null&&(w=b),b=b.sibling;w===null?p.tail=null:w.sibling=null;break;case"collapsed":w=p.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?b||p.tail===null?p.tail=null:p.tail.sibling=null:C.sibling=null}}function qi(p){var b=p.alternate!==null&&p.alternate.child===p.child,w=0,C=0;if(b)for(var N=p.child;N!==null;)w|=N.lanes|N.childLanes,C|=N.subtreeFlags&14680064,C|=N.flags&14680064,N.return=p,N=N.sibling;else for(N=p.child;N!==null;)w|=N.lanes|N.childLanes,C|=N.subtreeFlags,C|=N.flags,N.return=p,N=N.sibling;return p.subtreeFlags|=C,p.childLanes=w,b}function Qae(p,b,w){var C=b.pendingProps;switch(J7(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(b),null;case 1:return $s(b.type)&&d8(),qi(b),null;case 3:return C=b.stateNode,sp(),Yn(zs),Yn(Yi),uv(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(p===null||p.child===null)&&(g8(b)?b.flags|=4:p===null||p.memoizedState.isDehydrated&&!(b.flags&256)||(b.flags|=1024,Da!==null&&($v(Da),Da=null))),Nv(p,b),qi(b),null;case 5:fv(b);var N=v0(B6.current);if(w=b.type,p!==null&&b.stateNode!=null)JP(p,b,w,C,N),p.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!C){if(b.stateNode===null)throw Error(n(166));return qi(b),null}if(p=v0(Pl.current),g8(b)){C=b.stateNode,w=b.type;var L=b.memoizedProps;switch(C[_l]=b,C[P6]=L,p=(b.mode&1)!==0,w){case"dialog":Kn("cancel",C),Kn("close",C);break;case"iframe":case"object":case"embed":Kn("load",C);break;case"video":case"audio":for(N=0;N<N6.length;N++)Kn(N6[N],C);break;case"source":Kn("error",C);break;case"img":case"image":case"link":Kn("error",C),Kn("load",C);break;case"details":Kn("toggle",C);break;case"input":Le(C,L),Kn("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!L.multiple},Kn("invalid",C);break;case"textarea":Dr(C,L),Kn("invalid",C)}wn(w,L),N=null;for(var Z in L)if(L.hasOwnProperty(Z)){var te=L[Z];Z==="children"?typeof te=="string"?C.textContent!==te&&(L.suppressHydrationWarning!==!0&&l8(C.textContent,te,p),N=["children",te]):typeof te=="number"&&C.textContent!==""+te&&(L.suppressHydrationWarning!==!0&&l8(C.textContent,te,p),N=["children",""+te]):i.hasOwnProperty(Z)&&te!=null&&Z==="onScroll"&&Kn("scroll",C)}switch(w){case"input":Re(C),jt(C,L,!0);break;case"textarea":Re(C),ys(C);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(C.onclick=c8)}C=N,b.updateQueue=C,C!==null&&(b.flags|=4)}else{Z=N.nodeType===9?N:N.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=xe(w)),p==="http://www.w3.org/1999/xhtml"?w==="script"?(p=Z.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof C.is=="string"?p=Z.createElement(w,{is:C.is}):(p=Z.createElement(w),w==="select"&&(Z=p,C.multiple?Z.multiple=!0:C.size&&(Z.size=C.size))):p=Z.createElementNS(p,w),p[_l]=b,p[P6]=C,QP(p,b,!1,!1),b.stateNode=p;e:{switch(Z=Sr(w,C),w){case"dialog":Kn("cancel",p),Kn("close",p),N=C;break;case"iframe":case"object":case"embed":Kn("load",p),N=C;break;case"video":case"audio":for(N=0;N<N6.length;N++)Kn(N6[N],p);N=C;break;case"source":Kn("error",p),N=C;break;case"img":case"image":case"link":Kn("error",p),Kn("load",p),N=C;break;case"details":Kn("toggle",p),N=C;break;case"input":Le(p,C),N=ve(p,C),Kn("invalid",p);break;case"option":N=C;break;case"select":p._wrapperState={wasMultiple:!!C.multiple},N=B({},C,{value:void 0}),Kn("invalid",p);break;case"textarea":Dr(p,C),N=Ki(p,C),Kn("invalid",p);break;default:N=C}wn(w,N),te=N;for(L in te)if(te.hasOwnProperty(L)){var ne=te[L];L==="style"?Zt(p,ne):L==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&It(p,ne)):L==="children"?typeof ne=="string"?(w!=="textarea"||ne!=="")&&Rt(p,ne):typeof ne=="number"&&Rt(p,""+ne):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?ne!=null&&L==="onScroll"&&Kn("scroll",p):ne!=null&&E(p,L,ne,Z))}switch(w){case"input":Re(p),jt(p,C,!1);break;case"textarea":Re(p),ys(p);break;case"option":C.value!=null&&p.setAttribute("value",""+ie(C.value));break;case"select":p.multiple=!!C.multiple,L=C.value,L!=null?Sn(p,!!C.multiple,L,!1):C.defaultValue!=null&&Sn(p,!!C.multiple,C.defaultValue,!0);break;default:typeof N.onClick=="function"&&(p.onclick=c8)}switch(w){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(b.flags|=4)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return qi(b),null;case 6:if(p&&b.stateNode!=null)eD(p,b,p.memoizedProps,C);else{if(typeof C!="string"&&b.stateNode===null)throw Error(n(166));if(w=v0(B6.current),v0(Pl.current),g8(b)){if(C=b.stateNode,w=b.memoizedProps,C[_l]=b,(L=C.nodeValue!==w)&&(p=xo,p!==null))switch(p.tag){case 3:l8(C.nodeValue,w,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&l8(C.nodeValue,w,(p.mode&1)!==0)}L&&(b.flags|=4)}else C=(w.nodeType===9?w:w.ownerDocument).createTextNode(C),C[_l]=b,b.stateNode=C}return qi(b),null;case 13:if(Yn(pr),C=b.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(tr&&wo!==null&&b.mode&1&&!(b.flags&128))rP(),tp(),b.flags|=98560,L=!1;else if(L=g8(b),C!==null&&C.dehydrated!==null){if(p===null){if(!L)throw Error(n(318));if(L=b.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[_l]=b}else tp(),!(b.flags&128)&&(b.memoizedState=null),b.flags|=4;qi(b),L=!1}else Da!==null&&($v(Da),Da=null),L=!0;if(!L)return b.flags&65536?b:null}return b.flags&128?(b.lanes=w,b):(C=C!==null,C!==(p!==null&&p.memoizedState!==null)&&C&&(b.child.flags|=8192,b.mode&1&&(p===null||pr.current&1?oi===0&&(oi=3):Wv())),b.updateQueue!==null&&(b.flags|=4),qi(b),null);case 4:return sp(),Nv(p,b),p===null&&R6(b.stateNode.containerInfo),qi(b),null;case 10:return sv(b.type._context),qi(b),null;case 17:return $s(b.type)&&d8(),qi(b),null;case 19:if(Yn(pr),L=b.memoizedState,L===null)return qi(b),null;if(C=(b.flags&128)!==0,Z=L.rendering,Z===null)if(C)V6(L,!1);else{if(oi!==0||p!==null&&p.flags&128)for(p=b.child;p!==null;){if(Z=v8(p),Z!==null){for(b.flags|=128,V6(L,!1),C=Z.updateQueue,C!==null&&(b.updateQueue=C,b.flags|=4),b.subtreeFlags=0,C=w,w=b.child;w!==null;)L=w,p=C,L.flags&=14680066,Z=L.alternate,Z===null?(L.childLanes=0,L.lanes=p,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=Z.childLanes,L.lanes=Z.lanes,L.child=Z.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=Z.memoizedProps,L.memoizedState=Z.memoizedState,L.updateQueue=Z.updateQueue,L.type=Z.type,p=Z.dependencies,L.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),w=w.sibling;return Fn(pr,pr.current&1|2),b.child}p=p.sibling}L.tail!==null&&hr()>cp&&(b.flags|=128,C=!0,V6(L,!1),b.lanes=4194304)}else{if(!C)if(p=v8(Z),p!==null){if(b.flags|=128,C=!0,w=p.updateQueue,w!==null&&(b.updateQueue=w,b.flags|=4),V6(L,!0),L.tail===null&&L.tailMode==="hidden"&&!Z.alternate&&!tr)return qi(b),null}else 2*hr()-L.renderingStartTime>cp&&w!==1073741824&&(b.flags|=128,C=!0,V6(L,!1),b.lanes=4194304);L.isBackwards?(Z.sibling=b.child,b.child=Z):(w=L.last,w!==null?w.sibling=Z:b.child=Z,L.last=Z)}return L.tail!==null?(b=L.tail,L.rendering=b,L.tail=b.sibling,L.renderingStartTime=hr(),b.sibling=null,w=pr.current,Fn(pr,C?w&1|2:w&1),b):(qi(b),null);case 22:case 23:return Vv(),C=b.memoizedState!==null,p!==null&&p.memoizedState!==null!==C&&(b.flags|=8192),C&&b.mode&1?vo&1073741824&&(qi(b),b.subtreeFlags&6&&(b.flags|=8192)):qi(b),null;case 24:return null;case 25:return null}throw Error(n(156,b.tag))}function Jae(p,b){switch(J7(b),b.tag){case 1:return $s(b.type)&&d8(),p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 3:return sp(),Yn(zs),Yn(Yi),uv(),p=b.flags,p&65536&&!(p&128)?(b.flags=p&-65537|128,b):null;case 5:return fv(b),null;case 13:if(Yn(pr),p=b.memoizedState,p!==null&&p.dehydrated!==null){if(b.alternate===null)throw Error(n(340));tp()}return p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 19:return Yn(pr),null;case 4:return sp(),null;case 10:return sv(b.type._context),null;case 22:case 23:return Vv(),null;case 24:return null;default:return null}}var N8=!1,Qi=!1,ele=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function ap(p,b){var w=p.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(C){Cr(p,b,C)}else w.current=null}function Rv(p,b,w){try{w()}catch(C){Cr(p,b,C)}}var tD=!1;function tle(p,b){if(V7=qy,p=__(),L7(p)){if("selectionStart"in p)var w={start:p.selectionStart,end:p.selectionEnd};else e:{w=(w=p.ownerDocument)&&w.defaultView||window;var C=w.getSelection&&w.getSelection();if(C&&C.rangeCount!==0){w=C.anchorNode;var N=C.anchorOffset,L=C.focusNode;C=C.focusOffset;try{w.nodeType,L.nodeType}catch{w=null;break e}var Z=0,te=-1,ne=-1,me=0,Me=0,_e=p,Ce=null;t:for(;;){for(var Ye;_e!==w||N!==0&&_e.nodeType!==3||(te=Z+N),_e!==L||C!==0&&_e.nodeType!==3||(ne=Z+C),_e.nodeType===3&&(Z+=_e.nodeValue.length),(Ye=_e.firstChild)!==null;)Ce=_e,_e=Ye;for(;;){if(_e===p)break t;if(Ce===w&&++me===N&&(te=Z),Ce===L&&++Me===C&&(ne=Z),(Ye=_e.nextSibling)!==null)break;_e=Ce,Ce=_e.parentNode}_e=Ye}w=te===-1||ne===-1?null:{start:te,end:ne}}else w=null}w=w||{start:0,end:0}}else w=null;for(W7={focusedElem:p,selectionRange:w},qy=!1,Qe=b;Qe!==null;)if(b=Qe,p=b.child,(b.subtreeFlags&1028)!==0&&p!==null)p.return=b,Qe=p;else for(;Qe!==null;){b=Qe;try{var nt=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var st=nt.memoizedProps,Lr=nt.memoizedState,le=b.stateNode,re=le.getSnapshotBeforeUpdate(b.elementType===b.type?st:La(b.type,st),Lr);le.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var de=b.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Be){Cr(b,b.return,Be)}if(p=b.sibling,p!==null){p.return=b.return,Qe=p;break}Qe=b.return}return nt=tD,tD=!1,nt}function W6(p,b,w){var C=b.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var N=C=C.next;do{if((N.tag&p)===p){var L=N.destroy;N.destroy=void 0,L!==void 0&&Rv(b,w,L)}N=N.next}while(N!==C)}}function R8(p,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var w=b=b.next;do{if((w.tag&p)===p){var C=w.create;w.destroy=C()}w=w.next}while(w!==b)}}function _v(p){var b=p.ref;if(b!==null){var w=p.stateNode;switch(p.tag){case 5:p=w;break;default:p=w}typeof b=="function"?b(p):b.current=p}}function nD(p){var b=p.alternate;b!==null&&(p.alternate=null,nD(b)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(b=p.stateNode,b!==null&&(delete b[_l],delete b[P6],delete b[Y7],delete b[Oae],delete b[jae])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function rD(p){return p.tag===5||p.tag===3||p.tag===4}function iD(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||rD(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Pv(p,b,w){var C=p.tag;if(C===5||C===6)p=p.stateNode,b?w.nodeType===8?w.parentNode.insertBefore(p,b):w.insertBefore(p,b):(w.nodeType===8?(b=w.parentNode,b.insertBefore(p,w)):(b=w,b.appendChild(p)),w=w._reactRootContainer,w!=null||b.onclick!==null||(b.onclick=c8));else if(C!==4&&(p=p.child,p!==null))for(Pv(p,b,w),p=p.sibling;p!==null;)Pv(p,b,w),p=p.sibling}function Dv(p,b,w){var C=p.tag;if(C===5||C===6)p=p.stateNode,b?w.insertBefore(p,b):w.appendChild(p);else if(C!==4&&(p=p.child,p!==null))for(Dv(p,b,w),p=p.sibling;p!==null;)Dv(p,b,w),p=p.sibling}var Di=null,Oa=!1;function Md(p,b,w){for(w=w.child;w!==null;)sD(p,b,w),w=w.sibling}function sD(p,b,w){if(Vo&&typeof Vo.onCommitFiberUnmount=="function")try{Vo.onCommitFiberUnmount(m0,w)}catch{}switch(w.tag){case 5:Qi||ap(w,b);case 6:var C=Di,N=Oa;Di=null,Md(p,b,w),Di=C,Oa=N,Di!==null&&(Oa?(p=Di,w=w.stateNode,p.nodeType===8?p.parentNode.removeChild(w):p.removeChild(w)):Di.removeChild(w.stateNode));break;case 18:Di!==null&&(Oa?(p=Di,w=w.stateNode,p.nodeType===8?K7(p.parentNode,w):p.nodeType===1&&K7(p,w),E6(p)):K7(Di,w.stateNode));break;case 4:C=Di,N=Oa,Di=w.stateNode.containerInfo,Oa=!0,Md(p,b,w),Di=C,Oa=N;break;case 0:case 11:case 14:case 15:if(!Qi&&(C=w.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){N=C=C.next;do{var L=N,Z=L.destroy;L=L.tag,Z!==void 0&&(L&2||L&4)&&Rv(w,b,Z),N=N.next}while(N!==C)}Md(p,b,w);break;case 1:if(!Qi&&(ap(w,b),C=w.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=w.memoizedProps,C.state=w.memoizedState,C.componentWillUnmount()}catch(te){Cr(w,b,te)}Md(p,b,w);break;case 21:Md(p,b,w);break;case 22:w.mode&1?(Qi=(C=Qi)||w.memoizedState!==null,Md(p,b,w),Qi=C):Md(p,b,w);break;default:Md(p,b,w)}}function oD(p){var b=p.updateQueue;if(b!==null){p.updateQueue=null;var w=p.stateNode;w===null&&(w=p.stateNode=new ele),b.forEach(function(C){var N=fle.bind(null,p,C);w.has(C)||(w.add(C),C.then(N,N))})}}function ja(p,b){var w=b.deletions;if(w!==null)for(var C=0;C<w.length;C++){var N=w[C];try{var L=p,Z=b,te=Z;e:for(;te!==null;){switch(te.tag){case 5:Di=te.stateNode,Oa=!1;break e;case 3:Di=te.stateNode.containerInfo,Oa=!0;break e;case 4:Di=te.stateNode.containerInfo,Oa=!0;break e}te=te.return}if(Di===null)throw Error(n(160));sD(L,Z,N),Di=null,Oa=!1;var ne=N.alternate;ne!==null&&(ne.return=null),N.return=null}catch(me){Cr(N,b,me)}}if(b.subtreeFlags&12854)for(b=b.child;b!==null;)aD(b,p),b=b.sibling}function aD(p,b){var w=p.alternate,C=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(ja(b,p),Ll(p),C&4){try{W6(3,p,p.return),R8(3,p)}catch(st){Cr(p,p.return,st)}try{W6(5,p,p.return)}catch(st){Cr(p,p.return,st)}}break;case 1:ja(b,p),Ll(p),C&512&&w!==null&&ap(w,w.return);break;case 5:if(ja(b,p),Ll(p),C&512&&w!==null&&ap(w,w.return),p.flags&32){var N=p.stateNode;try{Rt(N,"")}catch(st){Cr(p,p.return,st)}}if(C&4&&(N=p.stateNode,N!=null)){var L=p.memoizedProps,Z=w!==null?w.memoizedProps:L,te=p.type,ne=p.updateQueue;if(p.updateQueue=null,ne!==null)try{te==="input"&&L.type==="radio"&&L.name!=null&&Ae(N,L),Sr(te,Z);var me=Sr(te,L);for(Z=0;Z<ne.length;Z+=2){var Me=ne[Z],_e=ne[Z+1];Me==="style"?Zt(N,_e):Me==="dangerouslySetInnerHTML"?It(N,_e):Me==="children"?Rt(N,_e):E(N,Me,_e,me)}switch(te){case"input":ct(N,L);break;case"textarea":ii(N,L);break;case"select":var Ce=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!L.multiple;var Ye=L.value;Ye!=null?Sn(N,!!L.multiple,Ye,!1):Ce!==!!L.multiple&&(L.defaultValue!=null?Sn(N,!!L.multiple,L.defaultValue,!0):Sn(N,!!L.multiple,L.multiple?[]:"",!1))}N[P6]=L}catch(st){Cr(p,p.return,st)}}break;case 6:if(ja(b,p),Ll(p),C&4){if(p.stateNode===null)throw Error(n(162));N=p.stateNode,L=p.memoizedProps;try{N.nodeValue=L}catch(st){Cr(p,p.return,st)}}break;case 3:if(ja(b,p),Ll(p),C&4&&w!==null&&w.memoizedState.isDehydrated)try{E6(b.containerInfo)}catch(st){Cr(p,p.return,st)}break;case 4:ja(b,p),Ll(p);break;case 13:ja(b,p),Ll(p),N=p.child,N.flags&8192&&(L=N.memoizedState!==null,N.stateNode.isHidden=L,!L||N.alternate!==null&&N.alternate.memoizedState!==null||(jv=hr())),C&4&&oD(p);break;case 22:if(Me=w!==null&&w.memoizedState!==null,p.mode&1?(Qi=(me=Qi)||Me,ja(b,p),Qi=me):ja(b,p),Ll(p),C&8192){if(me=p.memoizedState!==null,(p.stateNode.isHidden=me)&&!Me&&p.mode&1)for(Qe=p,Me=p.child;Me!==null;){for(_e=Qe=Me;Qe!==null;){switch(Ce=Qe,Ye=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:W6(4,Ce,Ce.return);break;case 1:ap(Ce,Ce.return);var nt=Ce.stateNode;if(typeof nt.componentWillUnmount=="function"){C=Ce,w=Ce.return;try{b=C,nt.props=b.memoizedProps,nt.state=b.memoizedState,nt.componentWillUnmount()}catch(st){Cr(C,w,st)}}break;case 5:ap(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){fD(_e);continue}}Ye!==null?(Ye.return=Ce,Qe=Ye):fD(_e)}Me=Me.sibling}e:for(Me=null,_e=p;;){if(_e.tag===5){if(Me===null){Me=_e;try{N=_e.stateNode,me?(L=N.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(te=_e.stateNode,ne=_e.memoizedProps.style,Z=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,te.style.display=Gt("display",Z))}catch(st){Cr(p,p.return,st)}}}else if(_e.tag===6){if(Me===null)try{_e.stateNode.nodeValue=me?"":_e.memoizedProps}catch(st){Cr(p,p.return,st)}}else if((_e.tag!==22&&_e.tag!==23||_e.memoizedState===null||_e===p)&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===p)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===p)break e;Me===_e&&(Me=null),_e=_e.return}Me===_e&&(Me=null),_e.sibling.return=_e.return,_e=_e.sibling}}break;case 19:ja(b,p),Ll(p),C&4&&oD(p);break;case 21:break;default:ja(b,p),Ll(p)}}function Ll(p){var b=p.flags;if(b&2){try{e:{for(var w=p.return;w!==null;){if(rD(w)){var C=w;break e}w=w.return}throw Error(n(160))}switch(C.tag){case 5:var N=C.stateNode;C.flags&32&&(Rt(N,""),C.flags&=-33);var L=iD(p);Dv(p,L,N);break;case 3:case 4:var Z=C.stateNode.containerInfo,te=iD(p);Pv(p,te,Z);break;default:throw Error(n(161))}}catch(ne){Cr(p,p.return,ne)}p.flags&=-3}b&4096&&(p.flags&=-4097)}function nle(p,b,w){Qe=p,lD(p)}function lD(p,b,w){for(var C=(p.mode&1)!==0;Qe!==null;){var N=Qe,L=N.child;if(N.tag===22&&C){var Z=N.memoizedState!==null||N8;if(!Z){var te=N.alternate,ne=te!==null&&te.memoizedState!==null||Qi;te=N8;var me=Qi;if(N8=Z,(Qi=ne)&&!me)for(Qe=N;Qe!==null;)Z=Qe,ne=Z.child,Z.tag===22&&Z.memoizedState!==null?dD(N):ne!==null?(ne.return=Z,Qe=ne):dD(N);for(;L!==null;)Qe=L,lD(L),L=L.sibling;Qe=N,N8=te,Qi=me}cD(p)}else N.subtreeFlags&8772&&L!==null?(L.return=N,Qe=L):cD(p)}}function cD(p){for(;Qe!==null;){var b=Qe;if(b.flags&8772){var w=b.alternate;try{if(b.flags&8772)switch(b.tag){case 0:case 11:case 15:Qi||R8(5,b);break;case 1:var C=b.stateNode;if(b.flags&4&&!Qi)if(w===null)C.componentDidMount();else{var N=b.elementType===b.type?w.memoizedProps:La(b.type,w.memoizedProps);C.componentDidUpdate(N,w.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var L=b.updateQueue;L!==null&&fP(b,L,C);break;case 3:var Z=b.updateQueue;if(Z!==null){if(w=null,b.child!==null)switch(b.child.tag){case 5:w=b.child.stateNode;break;case 1:w=b.child.stateNode}fP(b,Z,w)}break;case 5:var te=b.stateNode;if(w===null&&b.flags&4){w=te;var ne=b.memoizedProps;switch(b.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&w.focus();break;case"img":ne.src&&(w.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(b.memoizedState===null){var me=b.alternate;if(me!==null){var Me=me.memoizedState;if(Me!==null){var _e=Me.dehydrated;_e!==null&&E6(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Qi||b.flags&512&&_v(b)}catch(Ce){Cr(b,b.return,Ce)}}if(b===p){Qe=null;break}if(w=b.sibling,w!==null){w.return=b.return,Qe=w;break}Qe=b.return}}function fD(p){for(;Qe!==null;){var b=Qe;if(b===p){Qe=null;break}var w=b.sibling;if(w!==null){w.return=b.return,Qe=w;break}Qe=b.return}}function dD(p){for(;Qe!==null;){var b=Qe;try{switch(b.tag){case 0:case 11:case 15:var w=b.return;try{R8(4,b)}catch(ne){Cr(b,w,ne)}break;case 1:var C=b.stateNode;if(typeof C.componentDidMount=="function"){var N=b.return;try{C.componentDidMount()}catch(ne){Cr(b,N,ne)}}var L=b.return;try{_v(b)}catch(ne){Cr(b,L,ne)}break;case 5:var Z=b.return;try{_v(b)}catch(ne){Cr(b,Z,ne)}}}catch(ne){Cr(b,b.return,ne)}if(b===p){Qe=null;break}var te=b.sibling;if(te!==null){te.return=b.return,Qe=te;break}Qe=b.return}}var rle=Math.ceil,_8=k.ReactCurrentDispatcher,Lv=k.ReactCurrentOwner,Yo=k.ReactCurrentBatchConfig,sn=0,yi=null,Xr=null,Li=0,vo=0,lp=Ed(0),oi=0,G6=null,k0=0,P8=0,Ov=0,X6=null,Vs=null,jv=0,cp=1/0,qc=null,D8=!1,Bv=null,Td=null,L8=!1,Id=null,O8=0,K6=0,Fv=null,j8=-1,B8=0;function ws(){return sn&6?hr():j8!==-1?j8:j8=hr()}function Nd(p){return p.mode&1?sn&2&&Li!==0?Li&-Li:Fae.transition!==null?(B8===0&&(B8=$1()),B8):(p=Cn,p!==0||(p=window.event,p=p===void 0?16:h_(p.type)),p):1}function Ba(p,b,w,C){if(50<K6)throw K6=0,Fv=null,Error(n(185));g0(p,w,C),(!(sn&2)||p!==yi)&&(p===yi&&(!(sn&2)&&(P8|=w),oi===4&&Rd(p,Li)),Ws(p,C),w===1&&sn===0&&!(b.mode&1)&&(cp=hr()+500,h8&&Sd()))}function Ws(p,b){var w=p.callbackNode;w7(p,b);var C=z1(p,p===yi?Li:0);if(C===0)w!==null&&O1(w),p.callbackNode=null,p.callbackPriority=0;else if(b=C&-C,p.callbackPriority!==b){if(w!=null&&O1(w),b===1)p.tag===0?Bae(hD.bind(null,p)):Q_(hD.bind(null,p)),Dae(function(){!(sn&6)&&Sd()}),w=null;else{switch(s_(C)){case 1:w=g6;break;case 4:w=Wy;break;case 16:w=j1;break;case 536870912:w=Gy;break;default:w=j1}w=wD(w,uD.bind(null,p))}p.callbackPriority=b,p.callbackNode=w}}function uD(p,b){if(j8=-1,B8=0,sn&6)throw Error(n(327));var w=p.callbackNode;if(fp()&&p.callbackNode!==w)return null;var C=z1(p,p===yi?Li:0);if(C===0)return null;if(C&30||C&p.expiredLanes||b)b=F8(p,C);else{b=C;var N=sn;sn|=2;var L=mD();(yi!==p||Li!==b)&&(qc=null,cp=hr()+500,C0(p,b));do try{ole();break}catch(te){pD(p,te)}while(!0);iv(),_8.current=L,sn=N,Xr!==null?b=0:(yi=null,Li=0,b=oi)}if(b!==0){if(b===2&&(N=b6(p),N!==0&&(C=N,b=zv(p,N))),b===1)throw w=G6,C0(p,0),Rd(p,C),Ws(p,hr()),w;if(b===6)Rd(p,C);else{if(N=p.current.alternate,!(C&30)&&!ile(N)&&(b=F8(p,C),b===2&&(L=b6(p),L!==0&&(C=L,b=zv(p,L))),b===1))throw w=G6,C0(p,0),Rd(p,C),Ws(p,hr()),w;switch(p.finishedWork=N,p.finishedLanes=C,b){case 0:case 1:throw Error(n(345));case 2:A0(p,Vs,qc);break;case 3:if(Rd(p,C),(C&130023424)===C&&(b=jv+500-hr(),10<b)){if(z1(p,0)!==0)break;if(N=p.suspendedLanes,(N&C)!==C){ws(),p.pingedLanes|=p.suspendedLanes&N;break}p.timeoutHandle=X7(A0.bind(null,p,Vs,qc),b);break}A0(p,Vs,qc);break;case 4:if(Rd(p,C),(C&4194240)===C)break;for(b=p.eventTimes,N=-1;0<C;){var Z=31-yo(C);L=1<<Z,Z=b[Z],Z>N&&(N=Z),C&=~L}if(C=N,C=hr()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*rle(C/1960))-C,10<C){p.timeoutHandle=X7(A0.bind(null,p,Vs,qc),C);break}A0(p,Vs,qc);break;case 5:A0(p,Vs,qc);break;default:throw Error(n(329))}}}return Ws(p,hr()),p.callbackNode===w?uD.bind(null,p):null}function zv(p,b){var w=X6;return p.current.memoizedState.isDehydrated&&(C0(p,b).flags|=256),p=F8(p,b),p!==2&&(b=Vs,Vs=w,b!==null&&$v(b)),p}function $v(p){Vs===null?Vs=p:Vs.push.apply(Vs,p)}function ile(p){for(var b=p;;){if(b.flags&16384){var w=b.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var C=0;C<w.length;C++){var N=w[C],L=N.getSnapshot;N=N.value;try{if(!Pa(L(),N))return!1}catch{return!1}}}if(w=b.child,b.subtreeFlags&16384&&w!==null)w.return=b,b=w;else{if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function Rd(p,b){for(b&=~Ov,b&=~P8,p.suspendedLanes|=b,p.pingedLanes&=~b,p=p.expirationTimes;0<b;){var w=31-yo(b),C=1<<w;p[w]=-1,b&=~C}}function hD(p){if(sn&6)throw Error(n(327));fp();var b=z1(p,0);if(!(b&1))return Ws(p,hr()),null;var w=F8(p,b);if(p.tag!==0&&w===2){var C=b6(p);C!==0&&(b=C,w=zv(p,C))}if(w===1)throw w=G6,C0(p,0),Rd(p,b),Ws(p,hr()),w;if(w===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=b,A0(p,Vs,qc),Ws(p,hr()),null}function Hv(p,b){var w=sn;sn|=1;try{return p(b)}finally{sn=w,sn===0&&(cp=hr()+500,h8&&Sd())}}function S0(p){Id!==null&&Id.tag===0&&!(sn&6)&&fp();var b=sn;sn|=1;var w=Yo.transition,C=Cn;try{if(Yo.transition=null,Cn=1,p)return p()}finally{Cn=C,Yo.transition=w,sn=b,!(sn&6)&&Sd()}}function Vv(){vo=lp.current,Yn(lp)}function C0(p,b){p.finishedWork=null,p.finishedLanes=0;var w=p.timeoutHandle;if(w!==-1&&(p.timeoutHandle=-1,Pae(w)),Xr!==null)for(w=Xr.return;w!==null;){var C=w;switch(J7(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&d8();break;case 3:sp(),Yn(zs),Yn(Yi),uv();break;case 5:fv(C);break;case 4:sp();break;case 13:Yn(pr);break;case 19:Yn(pr);break;case 10:sv(C.type._context);break;case 22:case 23:Vv()}w=w.return}if(yi=p,Xr=p=_d(p.current,null),Li=vo=b,oi=0,G6=null,Ov=P8=k0=0,Vs=X6=null,w0!==null){for(b=0;b<w0.length;b++)if(w=w0[b],C=w.interleaved,C!==null){w.interleaved=null;var N=C.next,L=w.pending;if(L!==null){var Z=L.next;L.next=N,C.next=Z}w.pending=C}w0=null}return p}function pD(p,b){do{var w=Xr;try{if(iv(),E8.current=A8,k8){for(var C=mr.memoizedState;C!==null;){var N=C.queue;N!==null&&(N.pending=null),C=C.next}k8=!1}if(E0=0,bi=si=mr=null,F6=!1,z6=0,Lv.current=null,w===null||w.return===null){oi=1,G6=b,Xr=null;break}e:{var L=p,Z=w.return,te=w,ne=b;if(b=Li,te.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var me=ne,Me=te,_e=Me.tag;if(!(Me.mode&1)&&(_e===0||_e===11||_e===15)){var Ce=Me.alternate;Ce?(Me.updateQueue=Ce.updateQueue,Me.memoizedState=Ce.memoizedState,Me.lanes=Ce.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Ye=BP(Z);if(Ye!==null){Ye.flags&=-257,FP(Ye,Z,te,L,b),Ye.mode&1&&jP(L,me,b),b=Ye,ne=me;var nt=b.updateQueue;if(nt===null){var st=new Set;st.add(ne),b.updateQueue=st}else nt.add(ne);break e}else{if(!(b&1)){jP(L,me,b),Wv();break e}ne=Error(n(426))}}else if(tr&&te.mode&1){var Lr=BP(Z);if(Lr!==null){!(Lr.flags&65536)&&(Lr.flags|=256),FP(Lr,Z,te,L,b),nv(op(ne,te));break e}}L=ne=op(ne,te),oi!==4&&(oi=2),X6===null?X6=[L]:X6.push(L),L=Z;do{switch(L.tag){case 3:L.flags|=65536,b&=-b,L.lanes|=b;var le=LP(L,ne,b);cP(L,le);break e;case 1:te=ne;var re=L.type,de=L.stateNode;if(!(L.flags&128)&&(typeof re.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(Td===null||!Td.has(de)))){L.flags|=65536,b&=-b,L.lanes|=b;var Be=OP(L,te,b);cP(L,Be);break e}}L=L.return}while(L!==null)}bD(w)}catch(lt){b=lt,Xr===w&&w!==null&&(Xr=w=w.return);continue}break}while(!0)}function mD(){var p=_8.current;return _8.current=A8,p===null?A8:p}function Wv(){(oi===0||oi===3||oi===2)&&(oi=4),yi===null||!(k0&268435455)&&!(P8&268435455)||Rd(yi,Li)}function F8(p,b){var w=sn;sn|=2;var C=mD();(yi!==p||Li!==b)&&(qc=null,C0(p,b));do try{sle();break}catch(N){pD(p,N)}while(!0);if(iv(),sn=w,_8.current=C,Xr!==null)throw Error(n(261));return yi=null,Li=0,oi}function sle(){for(;Xr!==null;)gD(Xr)}function ole(){for(;Xr!==null&&!m6();)gD(Xr)}function gD(p){var b=xD(p.alternate,p,vo);p.memoizedProps=p.pendingProps,b===null?bD(p):Xr=b,Lv.current=null}function bD(p){var b=p;do{var w=b.alternate;if(p=b.return,b.flags&32768){if(w=Jae(w,b),w!==null){w.flags&=32767,Xr=w;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{oi=6,Xr=null;return}}else if(w=Qae(w,b,vo),w!==null){Xr=w;return}if(b=b.sibling,b!==null){Xr=b;return}Xr=b=p}while(b!==null);oi===0&&(oi=5)}function A0(p,b,w){var C=Cn,N=Yo.transition;try{Yo.transition=null,Cn=1,ale(p,b,w,C)}finally{Yo.transition=N,Cn=C}return null}function ale(p,b,w,C){do fp();while(Id!==null);if(sn&6)throw Error(n(327));w=p.finishedWork;var N=p.finishedLanes;if(w===null)return null;if(p.finishedWork=null,p.finishedLanes=0,w===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var L=w.lanes|w.childLanes;if(Ky(p,L),p===yi&&(Xr=yi=null,Li=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||L8||(L8=!0,wD(j1,function(){return fp(),null})),L=(w.flags&15990)!==0,w.subtreeFlags&15990||L){L=Yo.transition,Yo.transition=null;var Z=Cn;Cn=1;var te=sn;sn|=4,Lv.current=null,tle(p,w),aD(w,p),Aae(W7),qy=!!V7,W7=V7=null,p.current=w,nle(w),Vy(),sn=te,Cn=Z,Yo.transition=L}else p.current=w;if(L8&&(L8=!1,Id=p,O8=N),L=p.pendingLanes,L===0&&(Td=null),b7(w.stateNode),Ws(p,hr()),b!==null)for(C=p.onRecoverableError,w=0;w<b.length;w++)N=b[w],C(N.value,{componentStack:N.stack,digest:N.digest});if(D8)throw D8=!1,p=Bv,Bv=null,p;return O8&1&&p.tag!==0&&fp(),L=p.pendingLanes,L&1?p===Fv?K6++:(K6=0,Fv=p):K6=0,Sd(),null}function fp(){if(Id!==null){var p=s_(O8),b=Yo.transition,w=Cn;try{if(Yo.transition=null,Cn=16>p?16:p,Id===null)var C=!1;else{if(p=Id,Id=null,O8=0,sn&6)throw Error(n(331));var N=sn;for(sn|=4,Qe=p.current;Qe!==null;){var L=Qe,Z=L.child;if(Qe.flags&16){var te=L.deletions;if(te!==null){for(var ne=0;ne<te.length;ne++){var me=te[ne];for(Qe=me;Qe!==null;){var Me=Qe;switch(Me.tag){case 0:case 11:case 15:W6(8,Me,L)}var _e=Me.child;if(_e!==null)_e.return=Me,Qe=_e;else for(;Qe!==null;){Me=Qe;var Ce=Me.sibling,Ye=Me.return;if(nD(Me),Me===me){Qe=null;break}if(Ce!==null){Ce.return=Ye,Qe=Ce;break}Qe=Ye}}}var nt=L.alternate;if(nt!==null){var st=nt.child;if(st!==null){nt.child=null;do{var Lr=st.sibling;st.sibling=null,st=Lr}while(st!==null)}}Qe=L}}if(L.subtreeFlags&2064&&Z!==null)Z.return=L,Qe=Z;else e:for(;Qe!==null;){if(L=Qe,L.flags&2048)switch(L.tag){case 0:case 11:case 15:W6(9,L,L.return)}var le=L.sibling;if(le!==null){le.return=L.return,Qe=le;break e}Qe=L.return}}var re=p.current;for(Qe=re;Qe!==null;){Z=Qe;var de=Z.child;if(Z.subtreeFlags&2064&&de!==null)de.return=Z,Qe=de;else e:for(Z=re;Qe!==null;){if(te=Qe,te.flags&2048)try{switch(te.tag){case 0:case 11:case 15:R8(9,te)}}catch(lt){Cr(te,te.return,lt)}if(te===Z){Qe=null;break e}var Be=te.sibling;if(Be!==null){Be.return=te.return,Qe=Be;break e}Qe=te.return}}if(sn=N,Sd(),Vo&&typeof Vo.onPostCommitFiberRoot=="function")try{Vo.onPostCommitFiberRoot(m0,p)}catch{}C=!0}return C}finally{Cn=w,Yo.transition=b}}return!1}function yD(p,b,w){b=op(w,b),b=LP(p,b,1),p=Ad(p,b,1),b=ws(),p!==null&&(g0(p,1,b),Ws(p,b))}function Cr(p,b,w){if(p.tag===3)yD(p,p,w);else for(;b!==null;){if(b.tag===3){yD(b,p,w);break}else if(b.tag===1){var C=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Td===null||!Td.has(C))){p=op(w,p),p=OP(b,p,1),b=Ad(b,p,1),p=ws(),b!==null&&(g0(b,1,p),Ws(b,p));break}}b=b.return}}function lle(p,b,w){var C=p.pingCache;C!==null&&C.delete(b),b=ws(),p.pingedLanes|=p.suspendedLanes&w,yi===p&&(Li&w)===w&&(oi===4||oi===3&&(Li&130023424)===Li&&500>hr()-jv?C0(p,0):Ov|=w),Ws(p,b)}function UD(p,b){b===0&&(p.mode&1?(b=F1,F1<<=1,!(F1&130023424)&&(F1=4194304)):b=1);var w=ws();p=Kc(p,b),p!==null&&(g0(p,b,w),Ws(p,w))}function cle(p){var b=p.memoizedState,w=0;b!==null&&(w=b.retryLane),UD(p,w)}function fle(p,b){var w=0;switch(p.tag){case 13:var C=p.stateNode,N=p.memoizedState;N!==null&&(w=N.retryLane);break;case 19:C=p.stateNode;break;default:throw Error(n(314))}C!==null&&C.delete(b),UD(p,w)}var xD;xD=function(p,b,w){if(p!==null)if(p.memoizedProps!==b.pendingProps||zs.current)Hs=!0;else{if(!(p.lanes&w)&&!(b.flags&128))return Hs=!1,qae(p,b,w);Hs=!!(p.flags&131072)}else Hs=!1,tr&&b.flags&1048576&&J_(b,m8,b.index);switch(b.lanes=0,b.tag){case 2:var C=b.type;I8(p,b),p=b.pendingProps;var N=Q1(b,Yi.current);ip(b,w),N=mv(null,b,C,p,N,w);var L=gv();return b.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,$s(C)?(L=!0,u8(b)):L=!1,b.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,lv(b),N.updater=M8,b.stateNode=N,N._reactInternals=b,vv(b,C,p,w),b=Cv(null,b,C,!0,L,w)):(b.tag=0,tr&&L&&Q7(b),xs(null,b,N,w),b=b.child),b;case 16:C=b.elementType;e:{switch(I8(p,b),p=b.pendingProps,N=C._init,C=N(C._payload),b.type=C,N=b.tag=ule(C),p=La(C,p),N){case 0:b=Sv(null,b,C,p,w);break e;case 1:b=GP(null,b,C,p,w);break e;case 11:b=zP(null,b,C,p,w);break e;case 14:b=$P(null,b,C,La(C.type,p),w);break e}throw Error(n(306,C,""))}return b;case 0:return C=b.type,N=b.pendingProps,N=b.elementType===C?N:La(C,N),Sv(p,b,C,N,w);case 1:return C=b.type,N=b.pendingProps,N=b.elementType===C?N:La(C,N),GP(p,b,C,N,w);case 3:e:{if(XP(b),p===null)throw Error(n(387));C=b.pendingProps,L=b.memoizedState,N=L.element,lP(p,b),w8(b,C,null,w);var Z=b.memoizedState;if(C=Z.element,L.isDehydrated)if(L={element:C,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},b.updateQueue.baseState=L,b.memoizedState=L,b.flags&256){N=op(Error(n(423)),b),b=KP(p,b,C,w,N);break e}else if(C!==N){N=op(Error(n(424)),b),b=KP(p,b,C,w,N);break e}else for(wo=vd(b.stateNode.containerInfo.firstChild),xo=b,tr=!0,Da=null,w=oP(b,null,C,w),b.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(tp(),C===N){b=Zc(p,b,w);break e}xs(p,b,C,w)}b=b.child}return b;case 5:return dP(b),p===null&&tv(b),C=b.type,N=b.pendingProps,L=p!==null?p.memoizedProps:null,Z=N.children,G7(C,N)?Z=null:L!==null&&G7(C,L)&&(b.flags|=32),WP(p,b),xs(p,b,Z,w),b.child;case 6:return p===null&&tv(b),null;case 13:return YP(p,b,w);case 4:return cv(b,b.stateNode.containerInfo),C=b.pendingProps,p===null?b.child=np(b,null,C,w):xs(p,b,C,w),b.child;case 11:return C=b.type,N=b.pendingProps,N=b.elementType===C?N:La(C,N),zP(p,b,C,N,w);case 7:return xs(p,b,b.pendingProps,w),b.child;case 8:return xs(p,b,b.pendingProps.children,w),b.child;case 12:return xs(p,b,b.pendingProps.children,w),b.child;case 10:e:{if(C=b.type._context,N=b.pendingProps,L=b.memoizedProps,Z=N.value,Fn(y8,C._currentValue),C._currentValue=Z,L!==null)if(Pa(L.value,Z)){if(L.children===N.children&&!zs.current){b=Zc(p,b,w);break e}}else for(L=b.child,L!==null&&(L.return=b);L!==null;){var te=L.dependencies;if(te!==null){Z=L.child;for(var ne=te.firstContext;ne!==null;){if(ne.context===C){if(L.tag===1){ne=Yc(-1,w&-w),ne.tag=2;var me=L.updateQueue;if(me!==null){me=me.shared;var Me=me.pending;Me===null?ne.next=ne:(ne.next=Me.next,Me.next=ne),me.pending=ne}}L.lanes|=w,ne=L.alternate,ne!==null&&(ne.lanes|=w),ov(L.return,w,b),te.lanes|=w;break}ne=ne.next}}else if(L.tag===10)Z=L.type===b.type?null:L.child;else if(L.tag===18){if(Z=L.return,Z===null)throw Error(n(341));Z.lanes|=w,te=Z.alternate,te!==null&&(te.lanes|=w),ov(Z,w,b),Z=L.sibling}else Z=L.child;if(Z!==null)Z.return=L;else for(Z=L;Z!==null;){if(Z===b){Z=null;break}if(L=Z.sibling,L!==null){L.return=Z.return,Z=L;break}Z=Z.return}L=Z}xs(p,b,N.children,w),b=b.child}return b;case 9:return N=b.type,C=b.pendingProps.children,ip(b,w),N=Xo(N),C=C(N),b.flags|=1,xs(p,b,C,w),b.child;case 14:return C=b.type,N=La(C,b.pendingProps),N=La(C.type,N),$P(p,b,C,N,w);case 15:return HP(p,b,b.type,b.pendingProps,w);case 17:return C=b.type,N=b.pendingProps,N=b.elementType===C?N:La(C,N),I8(p,b),b.tag=1,$s(C)?(p=!0,u8(b)):p=!1,ip(b,w),PP(b,C,N),vv(b,C,N,w),Cv(null,b,C,!0,p,w);case 19:return qP(p,b,w);case 22:return VP(p,b,w)}throw Error(n(156,b.tag))};function wD(p,b){return md(p,b)}function dle(p,b,w,C){this.tag=p,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zo(p,b,w,C){return new dle(p,b,w,C)}function Gv(p){return p=p.prototype,!(!p||!p.isReactComponent)}function ule(p){if(typeof p=="function")return Gv(p)?1:0;if(p!=null){if(p=p.$$typeof,p===O)return 11;if(p===F)return 14}return 2}function _d(p,b){var w=p.alternate;return w===null?(w=Zo(p.tag,b,p.key,p.mode),w.elementType=p.elementType,w.type=p.type,w.stateNode=p.stateNode,w.alternate=p,p.alternate=w):(w.pendingProps=b,w.type=p.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=p.flags&14680064,w.childLanes=p.childLanes,w.lanes=p.lanes,w.child=p.child,w.memoizedProps=p.memoizedProps,w.memoizedState=p.memoizedState,w.updateQueue=p.updateQueue,b=p.dependencies,w.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},w.sibling=p.sibling,w.index=p.index,w.ref=p.ref,w}function z8(p,b,w,C,N,L){var Z=2;if(C=p,typeof p=="function")Gv(p)&&(Z=1);else if(typeof p=="string")Z=5;else e:switch(p){case A:return M0(w.children,N,L,b);case I:Z=8,N|=8;break;case R:return p=Zo(12,w,b,N|2),p.elementType=R,p.lanes=L,p;case V:return p=Zo(13,w,b,N),p.elementType=V,p.lanes=L,p;case j:return p=Zo(19,w,b,N),p.elementType=j,p.lanes=L,p;case H:return $8(w,N,L,b);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case P:Z=10;break e;case _:Z=9;break e;case O:Z=11;break e;case F:Z=14;break e;case z:Z=16,C=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return b=Zo(Z,w,b,N),b.elementType=p,b.type=C,b.lanes=L,b}function M0(p,b,w,C){return p=Zo(7,p,C,b),p.lanes=w,p}function $8(p,b,w,C){return p=Zo(22,p,C,b),p.elementType=H,p.lanes=w,p.stateNode={isHidden:!1},p}function Xv(p,b,w){return p=Zo(6,p,null,b),p.lanes=w,p}function Kv(p,b,w){return b=Zo(4,p.children!==null?p.children:[],p.key,b),b.lanes=w,b.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},b}function hle(p,b,w,C,N){this.tag=b,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y6(0),this.expirationTimes=y6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y6(0),this.identifierPrefix=C,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function Yv(p,b,w,C,N,L,Z,te,ne){return p=new hle(p,b,w,te,ne),b===1?(b=1,L===!0&&(b|=8)):b=0,L=Zo(3,null,null,b),p.current=L,L.stateNode=p,L.memoizedState={element:C,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},lv(L),p}function ple(p,b,w){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:C==null?null:""+C,children:p,containerInfo:b,implementation:w}}function vD(p){if(!p)return kd;p=p._reactInternals;e:{if(Pi(p)!==p||p.tag!==1)throw Error(n(170));var b=p;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if($s(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(n(171))}if(p.tag===1){var w=p.type;if($s(w))return Z_(p,w,b)}return b}function ED(p,b,w,C,N,L,Z,te,ne){return p=Yv(w,C,!0,p,N,L,Z,te,ne),p.context=vD(null),w=p.current,C=ws(),N=Nd(w),L=Yc(C,N),L.callback=b??null,Ad(w,L,N),p.current.lanes=N,g0(p,N,C),Ws(p,C),p}function H8(p,b,w,C){var N=b.current,L=ws(),Z=Nd(N);return w=vD(w),b.context===null?b.context=w:b.pendingContext=w,b=Yc(L,Z),b.payload={element:p},C=C===void 0?null:C,C!==null&&(b.callback=C),p=Ad(N,b,Z),p!==null&&(Ba(p,N,Z,L),x8(p,N,Z)),Z}function V8(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function kD(p,b){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var w=p.retryLane;p.retryLane=w!==0&&w<b?w:b}}function Zv(p,b){kD(p,b),(p=p.alternate)&&kD(p,b)}var SD=typeof reportError=="function"?reportError:function(p){console.error(p)};function qv(p){this._internalRoot=p}W8.prototype.render=qv.prototype.render=function(p){var b=this._internalRoot;if(b===null)throw Error(n(409));H8(p,b,null,null)},W8.prototype.unmount=qv.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var b=p.containerInfo;S0(function(){H8(null,p,null,null)}),b[Vc]=null}};function W8(p){this._internalRoot=p}W8.prototype.unstable_scheduleHydration=function(p){if(p){var b=l_();p={blockedOn:null,target:p,priority:b};for(var w=0;w<Ud.length&&b!==0&&b<Ud[w].priority;w++);Ud.splice(w,0,p),w===0&&d_(p)}};function Qv(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function G8(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function CD(){}function mle(p,b,w,C,N){if(N){if(typeof C=="function"){var L=C;C=function(){var me=V8(Z);L.call(me)}}var Z=ED(b,C,p,0,null,!1,!1,"",CD);return p._reactRootContainer=Z,p[Vc]=Z.current,R6(p.nodeType===8?p.parentNode:p),S0(),Z}for(;N=p.lastChild;)p.removeChild(N);if(typeof C=="function"){var te=C;C=function(){var me=V8(ne);te.call(me)}}var ne=Yv(p,0,!1,null,null,!1,!1,"",CD);return p._reactRootContainer=ne,p[Vc]=ne.current,R6(p.nodeType===8?p.parentNode:p),S0(function(){H8(b,ne,w,C)}),ne}function X8(p,b,w,C,N){var L=w._reactRootContainer;if(L){var Z=L;if(typeof N=="function"){var te=N;N=function(){var ne=V8(Z);te.call(ne)}}H8(b,Z,p,N)}else Z=mle(w,b,p,N,C);return V8(Z)}o_=function(p){switch(p.tag){case 3:var b=p.stateNode;if(b.current.memoizedState.isDehydrated){var w=Rl(b.pendingLanes);w!==0&&(v7(b,w|1),Ws(b,hr()),!(sn&6)&&(cp=hr()+500,Sd()))}break;case 13:S0(function(){var C=Kc(p,1);if(C!==null){var N=ws();Ba(C,p,1,N)}}),Zv(p,1)}},E7=function(p){if(p.tag===13){var b=Kc(p,134217728);if(b!==null){var w=ws();Ba(b,p,134217728,w)}Zv(p,134217728)}},a_=function(p){if(p.tag===13){var b=Nd(p),w=Kc(p,b);if(w!==null){var C=ws();Ba(w,p,b,C)}Zv(p,b)}},l_=function(){return Cn},c_=function(p,b){var w=Cn;try{return Cn=p,b()}finally{Cn=w}},Ho=function(p,b,w){switch(b){case"input":if(ct(p,w),b=w.name,w.type==="radio"&&b!=null){for(w=p;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<w.length;b++){var C=w[b];if(C!==p&&C.form===p.form){var N=f8(C);if(!N)throw Error(n(90));Fe(C),ct(C,N)}}}break;case"textarea":ii(p,w);break;case"select":b=w.value,b!=null&&Sn(p,!!w.multiple,b,!1)}},zc=Hv,Nl=S0;var gle={usingClientEntryPoint:!1,Events:[D6,Z1,f8,Bc,Fc,Hv]},Y6={findFiberByHostInstance:b0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ble={bundleType:Y6.bundleType,version:Y6.version,rendererPackageName:Y6.rendererPackageName,rendererConfig:Y6.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=gi(p),p===null?null:p.stateNode},findFiberByHostInstance:Y6.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var K8=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!K8.isDisabled&&K8.supportsFiber)try{m0=K8.inject(ble),Vo=K8}catch{}}return Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gle,Gs.createPortal=function(p,b){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qv(b))throw Error(n(200));return ple(p,b,null,w)},Gs.createRoot=function(p,b){if(!Qv(p))throw Error(n(299));var w=!1,C="",N=SD;return b!=null&&(b.unstable_strictMode===!0&&(w=!0),b.identifierPrefix!==void 0&&(C=b.identifierPrefix),b.onRecoverableError!==void 0&&(N=b.onRecoverableError)),b=Yv(p,1,!1,null,null,w,!1,C,N),p[Vc]=b.current,R6(p.nodeType===8?p.parentNode:p),new qv(b)},Gs.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var b=p._reactInternals;if(b===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=gi(b),p=p===null?null:p.stateNode,p},Gs.flushSync=function(p){return S0(p)},Gs.hydrate=function(p,b,w){if(!G8(b))throw Error(n(200));return X8(null,p,b,!0,w)},Gs.hydrateRoot=function(p,b,w){if(!Qv(p))throw Error(n(405));var C=w!=null&&w.hydratedSources||null,N=!1,L="",Z=SD;if(w!=null&&(w.unstable_strictMode===!0&&(N=!0),w.identifierPrefix!==void 0&&(L=w.identifierPrefix),w.onRecoverableError!==void 0&&(Z=w.onRecoverableError)),b=ED(b,null,p,1,w??null,N,!1,L,Z),p[Vc]=b.current,R6(p),C)for(p=0;p<C.length;p++)w=C[p],N=w._getVersion,N=N(w._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[w,N]:b.mutableSourceEagerHydrationData.push(w,N);return new W8(b)},Gs.render=function(p,b,w){if(!G8(b))throw Error(n(200));return X8(null,p,b,!1,w)},Gs.unmountComponentAtNode=function(p){if(!G8(p))throw Error(n(40));return p._reactRootContainer?(S0(function(){X8(null,null,p,!1,function(){p._reactRootContainer=null,p[Vc]=null})}),!0):!1},Gs.unstable_batchedUpdates=Hv,Gs.unstable_renderSubtreeIntoContainer=function(p,b,w,C){if(!G8(w))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return X8(p,b,w,!1,C)},Gs.version="18.3.1-next-f1338f8080-20240426",Gs}var DD;function vW(){if(DD)return nE.exports;DD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),nE.exports=Ale(),nE.exports}var LD;function Mle(){if(LD)return Y8;LD=1;var e=vW();return Y8.createRoot=e.createRoot,Y8.hydrateRoot=e.hydrateRoot,Y8}var Tle=Mle();const Ile="6.13.1";function Nle(e,t,n){const r=t.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const i=new Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=e,i}async function Cs(e){const t=Object.keys(e);return(await Promise.all(t.map(r=>Promise.resolve(e[r])))).reduce((r,i,s)=>(r[t[s]]=i,r),{})}function yt(e,t,n){for(let r in t){let i=t[r];const s=n?n[r]:null;s&&Nle(i,s,r),Object.defineProperty(e,r,{enumerable:!0,value:i,writable:!1})}}function zp(e){if(e==null)return"null";if(Array.isArray(e))return"[ "+e.map(zp).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[e[r]&15];return n}if(typeof e=="object"&&typeof e.toJSON=="function")return zp(e.toJSON());switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"number":return e.toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map(n=>`${zp(n)}: ${zp(e[n])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ls(e,t){return e&&e.code===t}function nT(e){return ls(e,"CALL_EXCEPTION")}function Rr(e,t,n){let r=e;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${zp(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+zp(a))}}s.push(`code=${t}`),s.push(`version=${Ile}`),s.length&&(e+=" ("+s.join(", ")+")")}let i;switch(t){case"INVALID_ARGUMENT":i=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(e);break;default:i=new Error(e)}return yt(i,{code:t}),n&&Object.assign(i,n),i.shortMessage==null&&yt(i,{shortMessage:r}),i}function Se(e,t,n,r){if(!e)throw Rr(t,n,r)}function se(e,t,n,r){Se(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function EW(e,t,n){n==null&&(n=""),n&&(n=": "+n),Se(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Se(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");e.push(t)}catch{}return e},[]);function ry(e,t,n){if(n==null&&(n=""),e!==t){let r=n,i="new";n&&(r+=".",i+=" "+n),Se(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function kW(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if(typeof e=="string"&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((e.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(e.substring(i,i+2),16),i+=2;return r}se(!1,"invalid BytesLike value",t||"value",e)}function nn(e,t){return kW(e,t,!1)}function As(e,t){return kW(e,t,!0)}function Gn(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&e.length!==2+2*t||t===!0&&e.length%2!==0)}function rT(e){return Gn(e,!0)||e instanceof Uint8Array}const OD="0123456789abcdef";function tt(e){const t=nn(e);let n="0x";for(let r=0;r<t.length;r++){const i=t[r];n+=OD[(i&240)>>4]+OD[i&15]}return n}function $r(e){return"0x"+e.map(t=>tt(t).substring(2)).join("")}function am(e){return Gn(e,!0)?(e.length-2)/2:nn(e).length}function _r(e,t,n){const r=nn(e);return n!=null&&n>r.length&&Se(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),tt(r.slice(t??0,n??r.length))}function SW(e,t,n){const r=nn(e);Se(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const i=new Uint8Array(t);return i.fill(0),n?i.set(r,t-r.length):i.set(r,0),tt(i)}function qh(e,t){return SW(e,t,!0)}function Rle(e,t){return SW(e,t,!1)}const S9=BigInt(0),nl=BigInt(1),$p=9007199254740991;function lx(e,t){const n=C9(e,"value"),r=BigInt(zt(t,"width"));if(Se(n>>r===S9,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-nl){const i=(nl<<r)-nl;return-((~n&i)+nl)}return n}function CW(e,t){let n=ot(e,"value");const r=BigInt(zt(t,"width")),i=nl<<r-nl;if(n<S9){n=-n,Se(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});const s=(nl<<r)-nl;return(~n&s)+nl}else Se(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return n}function J0(e,t){const n=C9(e,"value"),r=BigInt(zt(t,"bits"));return n&(nl<<r)-nl}function ot(e,t){switch(typeof e){case"bigint":return e;case"number":return se(Number.isInteger(e),"underflow",t||"value",e),se(e>=-$p&&e<=$p,"overflow",t||"value",e),BigInt(e);case"string":try{if(e==="")throw new Error("empty string");return e[0]==="-"&&e[1]!=="-"?-BigInt(e.substring(1)):BigInt(e)}catch(n){se(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}se(!1,"invalid BigNumberish value",t||"value",e)}function C9(e,t){const n=ot(e,t);return Se(n>=S9,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const jD="0123456789abcdef";function A9(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=jD[n>>4],t+=jD[n&15];return BigInt(t)}return ot(e)}function zt(e,t){switch(typeof e){case"bigint":return se(e>=-$p&&e<=$p,"overflow",t||"value",e),Number(e);case"number":return se(Number.isInteger(e),"underflow",t||"value",e),se(e>=-$p&&e<=$p,"overflow",t||"value",e),e;case"string":try{if(e==="")throw new Error("empty string");return zt(BigInt(e),t)}catch(n){se(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}se(!1,"invalid numeric value",t||"value",e)}function _le(e){return zt(A9(e))}function Ku(e,t){let r=C9(e,"value").toString(16);if(t==null)r.length%2&&(r="0"+r);else{const i=zt(t,"width");for(Se(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<i*2;)r="0"+r}return"0x"+r}function Ms(e){const t=C9(e,"value");if(t===S9)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(n.substring(s,s+2),16)}return r}function Hp(e){let t=tt(rT(e)?e:Ms(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const BD="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const FD=BigInt(58);function Ple(e){const t=nn(e);let n=A9(t),r="";for(;n;)r=BD[Number(n%FD)]+r,n/=FD;for(let i=0;i<t.length&&!t[i];i++)r=BD[0]+r;return r}function Dle(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return nn(t)}function Lle(e){const t=nn(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}var Cm;class AW{constructor(t,n,r){fe(this,"filter");fe(this,"emitter");be(this,Cm);ee(this,Cm,n),yt(this,{emitter:t,filter:r})}async removeListener(){K(this,Cm)!=null&&await this.emitter.off(this.filter,K(this,Cm))}}Cm=new WeakMap;function Ole(e,t,n,r,i){se(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)}function MW(e,t,n,r,i){if(e==="BAD_PREFIX"||e==="UNEXPECTED_CONTINUE"){let s=0;for(let o=t+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return e==="OVERRUN"?n.length-t-1:0}function jle(e,t,n,r,i){return e==="OVERLONG"?(se(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),MW(e,t,n))}const Ble=Object.freeze({error:Ole,ignore:MW,replace:jle});function Fle(e,t){t==null&&(t=Ble.error);const n=nn(e,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(!(s>>7)){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=t("UNEXPECTED_CONTINUE",i-1,n,r):i+=t("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=t("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let f=0;f<o;f++){let c=n[i];if((c&192)!=128){i+=t("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|c&63,i++}if(l!==null){if(l>1114111){i+=t("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=t("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=t("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function Bf(e,t){se(typeof e=="string","invalid string value","str",e);let n=[];for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=e.charCodeAt(r);se(r<e.length&&(s&64512)===56320,"invalid surrogate pair","str",e);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function zle(e){return e.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function cx(e,t){return zle(Fle(e,t))}function TW(e){async function t(n,r){Se(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Se(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Se(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Rr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=Rr("request cancelled","CANCELLED"),o.abort()});const l={method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal};let f;try{f=await fetch(n.url,l)}catch(h){throw clearTimeout(a),s||h}clearTimeout(a);const c={};f.headers.forEach((h,g)=>{c[g.toLowerCase()]=h});const d=await f.arrayBuffer(),u=d==null?null:new Uint8Array(d);return{statusCode:f.status,statusMessage:f.statusText,headers:c,body:u}}return t}const $le=12,Hle=250;let zD=TW();const Vle=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Wle=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let sE=!1;async function IW(e,t){try{const n=e.match(Vle);if(!n)throw new Error("invalid data");return new Lu(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Dle(n[3]):Xle(n[3]))}catch{return new Lu(599,"BAD REQUEST (invalid data: URI)",{},null,new Vf(e))}}function NW(e){async function t(n,r){try{const i=n.match(Wle);if(!i)throw new Error("invalid link");return new Vf(`${e}${i[2]}`)}catch{return new Lu(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Vf(n))}}return t}const Z8={data:IW,ipfs:NW("https://gateway.ipfs.io/ipfs/")},RW=new WeakMap;var ph,fu;class Gle{constructor(t){be(this,ph);be(this,fu);ee(this,ph,[]),ee(this,fu,!1),RW.set(t,()=>{if(!K(this,fu)){ee(this,fu,!0);for(const n of K(this,ph))setTimeout(()=>{n()},0);ee(this,ph,[])}})}addListener(t){Se(!K(this,fu),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),K(this,ph).push(t)}get cancelled(){return K(this,fu)}checkSignal(){Se(!this.cancelled,"cancelled","CANCELLED",{})}}ph=new WeakMap,fu=new WeakMap;function q8(e){if(e==null)throw new Error("missing signal; should not happen");return e.checkSignal(),e}var Am,Mm,Ya,Uf,Tm,Im,wi,Ao,xf,mh,gh,bh,Ql,Za,du,yh,N5;const y9=class y9{constructor(t){be(this,yh);be(this,Am);be(this,Mm);be(this,Ya);be(this,Uf);be(this,Tm);be(this,Im);be(this,wi);be(this,Ao);be(this,xf);be(this,mh);be(this,gh);be(this,bh);be(this,Ql);be(this,Za);be(this,du);ee(this,Im,String(t)),ee(this,Am,!1),ee(this,Mm,!0),ee(this,Ya,{}),ee(this,Uf,""),ee(this,Tm,3e5),ee(this,Za,{slotInterval:Hle,maxAttempts:$le}),ee(this,du,null)}get url(){return K(this,Im)}set url(t){ee(this,Im,String(t))}get body(){return K(this,wi)==null?null:new Uint8Array(K(this,wi))}set body(t){if(t==null)ee(this,wi,void 0),ee(this,Ao,void 0);else if(typeof t=="string")ee(this,wi,Bf(t)),ee(this,Ao,"text/plain");else if(t instanceof Uint8Array)ee(this,wi,t),ee(this,Ao,"application/octet-stream");else if(typeof t=="object")ee(this,wi,Bf(JSON.stringify(t))),ee(this,Ao,"application/json");else throw new Error("invalid body")}hasBody(){return K(this,wi)!=null}get method(){return K(this,Uf)?K(this,Uf):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),ee(this,Uf,String(t).toUpperCase())}get headers(){const t=Object.assign({},K(this,Ya));return K(this,xf)&&(t.authorization=`Basic ${Lle(Bf(K(this,xf)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&K(this,Ao)&&(t["content-type"]=K(this,Ao)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,n){K(this,Ya)[String(t).toLowerCase()]=String(n)}clearHeaders(){ee(this,Ya,{})}[Symbol.iterator](){const t=this.headers,n=Object.keys(t);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return K(this,xf)||null}setCredentials(t,n){se(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),ee(this,xf,`${t}:${n}`)}get allowGzip(){return K(this,Mm)}set allowGzip(t){ee(this,Mm,!!t)}get allowInsecureAuthentication(){return!!K(this,Am)}set allowInsecureAuthentication(t){ee(this,Am,!!t)}get timeout(){return K(this,Tm)}set timeout(t){se(t>=0,"timeout must be non-zero","timeout",t),ee(this,Tm,t)}get preflightFunc(){return K(this,mh)||null}set preflightFunc(t){ee(this,mh,t)}get processFunc(){return K(this,gh)||null}set processFunc(t){ee(this,gh,t)}get retryFunc(){return K(this,bh)||null}set retryFunc(t){ee(this,bh,t)}get getUrlFunc(){return K(this,du)||zD}set getUrlFunc(t){ee(this,du,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${K(this,wi)?tt(K(this,wi)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(K(this,Za).slotInterval=t.slotInterval),t.maxAttempts!=null&&(K(this,Za).maxAttempts=t.maxAttempts)}send(){return Se(K(this,Ql)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),ee(this,Ql,new Gle(this)),Ne(this,yh,N5).call(this,0,$D()+this.timeout,0,this,new Lu(0,"",{},null,this))}cancel(){Se(K(this,Ql)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=RW.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const n=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();Se(this.method==="GET"&&(n!=="https"||r!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const i=new y9(t);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,ee(i,Ya,Object.assign({},K(this,Ya))),K(this,wi)&&ee(i,wi,new Uint8Array(K(this,wi))),ee(i,Ao,K(this,Ao)),i}clone(){const t=new y9(this.url);return ee(t,Uf,K(this,Uf)),K(this,wi)&&ee(t,wi,K(this,wi)),ee(t,Ao,K(this,Ao)),ee(t,Ya,Object.assign({},K(this,Ya))),ee(t,xf,K(this,xf)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),ee(t,mh,K(this,mh)),ee(t,gh,K(this,gh)),ee(t,bh,K(this,bh)),ee(t,Za,Object.assign({},K(this,Za))),ee(t,du,K(this,du)),t}static lockConfig(){sE=!0}static getGateway(t){return Z8[t.toLowerCase()]||null}static registerGateway(t,n){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(sE)throw new Error("gateways locked");Z8[t]=n}static registerGetUrl(t){if(sE)throw new Error("gateways locked");zD=t}static createGetUrlFunc(t){return TW()}static createDataGateway(){return IW}static createIpfsGatewayFunc(t){return NW(t)}};Am=new WeakMap,Mm=new WeakMap,Ya=new WeakMap,Uf=new WeakMap,Tm=new WeakMap,Im=new WeakMap,wi=new WeakMap,Ao=new WeakMap,xf=new WeakMap,mh=new WeakMap,gh=new WeakMap,bh=new WeakMap,Ql=new WeakMap,Za=new WeakMap,du=new WeakMap,yh=new WeakSet,N5=async function(t,n,r,i,s){var c,d,u;if(t>=K(this,Za).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Se($D()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await Kle(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Z8){const h=await Z8[a](o.url,q8(K(i,Ql)));if(h instanceof Lu){let g=h;if(this.processFunc){q8(K(i,Ql));try{g=await this.processFunc(o,g)}catch(y){(y.throttle==null||typeof y.stall!="number")&&g.makeServerError("error in post-processing function",y).assertOk()}}return g}o=h}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,q8(K(i,Ql)));let f=new Lu(l.statusCode,l.statusMessage,l.headers,l.body,i);if(f.statusCode===301||f.statusCode===302){try{const h=f.headers.location||"";return Ne(c=o.redirect(h),yh,N5).call(c,t+1,n,0,i,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,f,t))){const h=f.headers["retry-after"];let g=K(this,Za).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(g=parseInt(h)),Ne(d=o.clone(),yh,N5).call(d,t+1,n,g,i,f)}if(this.processFunc){q8(K(i,Ql));try{f=await this.processFunc(o,f)}catch(h){(h.throttle==null||typeof h.stall!="number")&&f.makeServerError("error in post-processing function",h).assertOk();let g=K(this,Za).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return h.stall>=0&&(g=h.stall),Ne(u=o.clone(),yh,N5).call(u,t+1,n,g,i,f)}}return f};let Vf=y9;var Vb,Wb,Gb,Mo,Nm,Uh;const n_=class n_{constructor(t,n,r,i,s){be(this,Vb);be(this,Wb);be(this,Gb);be(this,Mo);be(this,Nm);be(this,Uh);ee(this,Vb,t),ee(this,Wb,n),ee(this,Gb,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),ee(this,Mo,i==null?null:new Uint8Array(i)),ee(this,Nm,s||null),ee(this,Uh,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${K(this,Mo)?tt(K(this,Mo)):"null"}>`}get statusCode(){return K(this,Vb)}get statusMessage(){return K(this,Wb)}get headers(){return Object.assign({},K(this,Gb))}get body(){return K(this,Mo)==null?null:new Uint8Array(K(this,Mo))}get bodyText(){try{return K(this,Mo)==null?"":cx(K(this,Mo))}catch{Se(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Se(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,n=Object.keys(t);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,n){let r;t?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${t})`);const i=new n_(599,r,this.headers,this.body,K(this,Nm)||void 0);return ee(i,Uh,{message:t,error:n}),i}throwThrottleError(t,n){n==null?n=-1:se(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(t||"throttling requests");throw yt(r,{stall:n,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return K(this,Mo)!=null}get request(){return K(this,Nm)}ok(){return K(this,Uh).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:n}=K(this,Uh);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{K(this,Mo)&&(i=cx(K(this,Mo)))}catch{}Se(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Vb=new WeakMap,Wb=new WeakMap,Gb=new WeakMap,Mo=new WeakMap,Nm=new WeakMap,Uh=new WeakMap;let Lu=n_;function $D(){return new Date().getTime()}function Xle(e){return Bf(e.replace(/%([0-9a-f][0-9a-f])/gi,(t,n)=>String.fromCharCode(parseInt(n,16))))}function Kle(e){return new Promise(t=>setTimeout(t,e))}const Yle=BigInt(-1),Ha=BigInt(0),Vp=BigInt(1),Zle=BigInt(5),dp={};let lm="0000";for(;lm.length<80;)lm+=lm;function T0(e){let t=lm;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function Q6(e,t,n){const r=BigInt(t.width);if(t.signed){const i=Vp<<r-Vp;Se(n==null||e>=-i&&e<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e>Ha?e=lx(J0(e,r),r):e=-lx(J0(-e,r),r)}else{const i=Vp<<r;Se(n==null||e>=0&&e<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%i+i)%i&i-Vp}return e}function oE(e){typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,n=128,r=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);se(s,"invalid fixed format","format",e),t=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(e){const s=e,o=(a,l,f)=>s[a]==null?f:(se(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);t=o("signed","boolean",t),n=o("width","number",n),r=o("decimals","number",r)}se(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),se(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(t?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:t,width:n,decimals:r,name:i}}function qle(e,t){let n="";e<Ha&&(n="-",e*=Yle);let r=e.toString();if(t===0)return n+r;for(;r.length<=t;)r=lm+r;const i=r.length-t;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var qa,Tn,Es,En,L0,af,GS,XS,KS,YS;const iu=class iu{constructor(t,n,r){be(this,En);fe(this,"format");be(this,qa);be(this,Tn);be(this,Es);fe(this,"_value");ry(t,dp,"FixedNumber"),ee(this,Tn,n),ee(this,qa,r);const i=qle(n,r.decimals);yt(this,{format:r.name,_value:i}),ee(this,Es,T0(r.decimals))}get signed(){return K(this,qa).signed}get width(){return K(this,qa).width}get decimals(){return K(this,qa).decimals}get value(){return K(this,Tn)}addUnsafe(t){return Ne(this,En,GS).call(this,t)}add(t){return Ne(this,En,GS).call(this,t,"add")}subUnsafe(t){return Ne(this,En,XS).call(this,t)}sub(t){return Ne(this,En,XS).call(this,t,"sub")}mulUnsafe(t){return Ne(this,En,KS).call(this,t)}mul(t){return Ne(this,En,KS).call(this,t,"mul")}mulSignal(t){Ne(this,En,L0).call(this,t);const n=K(this,Tn)*K(t,Tn);return Se(n%K(this,Es)===Ha,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Ne(this,En,af).call(this,n/K(this,Es),"mulSignal")}divUnsafe(t){return Ne(this,En,YS).call(this,t)}div(t){return Ne(this,En,YS).call(this,t,"div")}divSignal(t){Se(K(t,Tn)!==Ha,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ne(this,En,L0).call(this,t);const n=K(this,Tn)*K(this,Es);return Se(n%K(t,Tn)===Ha,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Ne(this,En,af).call(this,n/K(t,Tn),"divSignal")}cmp(t){let n=this.value,r=t.value;const i=this.decimals-t.decimals;return i>0?r*=T0(i):i<0&&(n*=T0(-i)),n<r?-1:n>r?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=K(this,Tn);return K(this,Tn)<Ha&&(t-=K(this,Es)-Vp),t=K(this,Tn)/K(this,Es)*K(this,Es),Ne(this,En,af).call(this,t,"floor")}ceiling(){let t=K(this,Tn);return K(this,Tn)>Ha&&(t+=K(this,Es)-Vp),t=K(this,Tn)/K(this,Es)*K(this,Es),Ne(this,En,af).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const n=this.decimals-t,r=Zle*T0(n-1);let i=this.value+r;const s=T0(n);return i=i/s*s,Q6(i,K(this,qa),"round"),new iu(dp,i,K(this,qa))}isZero(){return K(this,Tn)===Ha}isNegative(){return K(this,Tn)<Ha}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return iu.fromString(this.toString(),t)}static fromValue(t,n,r){const i=n==null?0:zt(n),s=oE(r);let o=ot(t,"value");const a=i-s.decimals;if(a>0){const l=T0(a);Se(o%l===Ha,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=l}else a<0&&(o*=T0(-a));return Q6(o,s,"fromValue"),new iu(dp,o,s)}static fromString(t,n){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);se(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const i=oE(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=lm;Se(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return Q6(a,i,"fromString"),new iu(dp,a,i)}static fromBytes(t,n){let r=A9(nn(t,"value"));const i=oE(n);return i.signed&&(r=lx(r,i.width)),Q6(r,i,"fromBytes"),new iu(dp,r,i)}};qa=new WeakMap,Tn=new WeakMap,Es=new WeakMap,En=new WeakSet,L0=function(t){se(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},af=function(t,n){return t=Q6(t,K(this,qa),n),new iu(dp,t,K(this,qa))},GS=function(t,n){return Ne(this,En,L0).call(this,t),Ne(this,En,af).call(this,K(this,Tn)+K(t,Tn),n)},XS=function(t,n){return Ne(this,En,L0).call(this,t),Ne(this,En,af).call(this,K(this,Tn)-K(t,Tn),n)},KS=function(t,n){return Ne(this,En,L0).call(this,t),Ne(this,En,af).call(this,K(this,Tn)*K(t,Tn)/K(this,Es),n)},YS=function(t,n){return Se(K(t,Tn)!==Ha,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ne(this,En,L0).call(this,t),Ne(this,En,af).call(this,K(this,Tn)*K(this,Es)/K(t,Tn),n)};let fx=iu;function Qle(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function HD(e,t,n){let r=0;for(let i=0;i<n;i++)r=r*256+e[t+i];return r}function VD(e,t,n,r){const i=[];for(;n<t+1+r;){const s=_W(e,n);i.push(s.result),n+=s.consumed,Se(n<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:i}}function _W(e,t){Se(e.length!==0,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=r=>{Se(r<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:r})};if(e[t]>=248){const r=e[t]-247;n(t+1+r);const i=HD(e,t+1,r);return n(t+1+r+i),VD(e,t,t+1+r,r+i)}else if(e[t]>=192){const r=e[t]-192;return n(t+1+r),VD(e,t,t+1,r)}else if(e[t]>=184){const r=e[t]-183;n(t+1+r);const i=HD(e,t+1,r);n(t+1+r+i);const s=tt(e.slice(t+1+r,t+1+r+i));return{consumed:1+r+i,result:s}}else if(e[t]>=128){const r=e[t]-128;n(t+1+r);const i=tt(e.slice(t+1,t+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Qle(e[t])}}function M9(e){const t=nn(e,"data"),n=_W(t,0);return se(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function WD(e){const t=[];for(;e;)t.unshift(e&255),e>>=8;return t}function PW(e){if(Array.isArray(e)){let r=[];if(e.forEach(function(s){r=r.concat(PW(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=WD(r.length);return i.unshift(247+i.length),i.concat(r)}const t=Array.prototype.slice.call(nn(e,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=WD(t.length);return n.unshift(183+n.length),n.concat(t)}const GD="0123456789abcdef";function Qh(e){let t="0x";for(const n of PW(e))t+=GD[n>>4],t+=GD[n&15];return t}function Jle(e,t){let n=18;return n=zt(t,"unit"),fx.fromValue(e,n,{decimals:n,width:512}).toString()}function ece(e,t){se(typeof e=="string","value must be a string","value",e);let n=18;return n=zt(t,"unit"),fx.fromString(e,{decimals:n,width:512}).value}function tce(e){return Jle(e,18)}function Qc(e){return ece(e,18)}const Ts=32,ZS=new Uint8Array(Ts),nce=["then"],Q8={},DW=new WeakMap;function V0(e){return DW.get(e)}function XD(e,t){DW.set(e,t)}function J6(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}function qS(e,t,n){return e.indexOf(null)>=0?t.map((r,i)=>r instanceof dg?qS(V0(r),r,n):r):e.reduce((r,i,s)=>{let o=t.getValue(i);return i in r||(n&&o instanceof dg&&(o=qS(V0(o),o,n)),r[i]=o),r},{})}var Rm;const im=class im extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==Q8&&(i=n,s=[],o=!1);super(i.length);be(this,Rm);i.forEach((f,c)=>{this[c]=f});const a=s.reduce((f,c)=>(typeof c=="string"&&f.set(c,(f.get(c)||0)+1),f),new Map);if(XD(this,Object.freeze(i.map((f,c)=>{const d=s[c];return d!=null&&a.get(d)===1?d:null}))),ee(this,Rm,[]),K(this,Rm)==null&&K(this,Rm),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(f,c,d)=>{if(typeof c=="string"){if(c.match(/^[0-9]+$/)){const h=zt(c,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const g=f[h];return g instanceof Error&&J6(`index ${h}`,g),g}if(nce.indexOf(c)>=0)return Reflect.get(f,c,d);const u=f[c];if(u instanceof Function)return function(...h){return u.apply(this===d?f:this,h)};if(!(c in f))return f.getValue.apply(this===d?f:this,[c])}return Reflect.get(f,c,d)}});return XD(l,V0(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&J6(`index ${s}`,i),n&&i instanceof im&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=V0(this);return r.reduce((i,s,o)=>(Se(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),qS(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=V0(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new im(Q8,s,o)}filter(n,r){const i=V0(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&J6(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new im(Q8,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&J6(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=V0(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&J6(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new im(Q8,n,r)}};Rm=new WeakMap;let dg=im;function KD(e){let t=Ms(e);return Se(t.length<=Ts,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Ts,offset:t.length}),t.length!==Ts&&(t=As($r([ZS.slice(t.length%Ts),t]))),t}class sd{constructor(t,n,r,i){fe(this,"name");fe(this,"type");fe(this,"localName");fe(this,"dynamic");yt(this,{name:t,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,n){se(!1,t,this.localName,n)}}var wf,xh,_m,a3;class QS{constructor(){be(this,_m);be(this,wf);be(this,xh);ee(this,wf,[]),ee(this,xh,0)}get data(){return $r(K(this,wf))}get length(){return K(this,xh)}appendWriter(t){return Ne(this,_m,a3).call(this,As(t.data))}writeBytes(t){let n=As(t);const r=n.length%Ts;return r&&(n=As($r([n,ZS.slice(r)]))),Ne(this,_m,a3).call(this,n)}writeValue(t){return Ne(this,_m,a3).call(this,KD(t))}writeUpdatableValue(){const t=K(this,wf).length;return K(this,wf).push(ZS),ee(this,xh,K(this,xh)+Ts),n=>{K(this,wf)[t]=KD(n)}}}wf=new WeakMap,xh=new WeakMap,_m=new WeakSet,a3=function(t){return K(this,wf).push(t),ee(this,xh,K(this,xh)+t.length),t.length};var Qs,To,wh,vh,uu,A1,eC,LW;const r_=class r_{constructor(t,n,r){be(this,A1);fe(this,"allowLoose");be(this,Qs);be(this,To);be(this,wh);be(this,vh);be(this,uu);yt(this,{allowLoose:!!n}),ee(this,Qs,As(t)),ee(this,wh,0),ee(this,vh,null),ee(this,uu,r??1024),ee(this,To,0)}get data(){return tt(K(this,Qs))}get dataLength(){return K(this,Qs).length}get consumed(){return K(this,To)}get bytes(){return new Uint8Array(K(this,Qs))}subReader(t){const n=new r_(K(this,Qs).slice(K(this,To)+t),this.allowLoose,K(this,uu));return ee(n,vh,this),n}readBytes(t,n){let r=Ne(this,A1,LW).call(this,0,t,!!n);return Ne(this,A1,eC).call(this,t),ee(this,To,K(this,To)+r.length),r.slice(0,t)}readValue(){return A9(this.readBytes(Ts))}readIndex(){return _le(this.readBytes(Ts))}};Qs=new WeakMap,To=new WeakMap,wh=new WeakMap,vh=new WeakMap,uu=new WeakMap,A1=new WeakSet,eC=function(t){var n;if(K(this,vh))return Ne(n=K(this,vh),A1,eC).call(n,t);ee(this,wh,K(this,wh)+t),Se(K(this,uu)<1||K(this,wh)<=K(this,uu)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${K(this,uu)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:As(K(this,Qs)),offset:K(this,To),length:t,info:{bytesRead:K(this,wh),dataLength:this.dataLength}})},LW=function(t,n,r){let i=Math.ceil(n/Ts)*Ts;return K(this,To)+i>K(this,Qs).length&&(this.allowLoose&&r&&K(this,To)+n<=K(this,Qs).length?i=n:Se(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:As(K(this,Qs)),length:K(this,Qs).length,offset:K(this,To)+i})),K(this,Qs).slice(K(this,To),K(this,To)+i)};let JS=r_;function dx(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function iT(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function rce(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");dx(e.outputLen),dx(e.blockLen)}function ug(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function OW(e,t){iT(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const aE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jW=e=>e instanceof Uint8Array,ice=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),lE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ol=(e,t)=>e<<32-t|e>>>t,sce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!sce)throw new Error("Non little-endian hardware is not supported");function oce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function T9(e){if(typeof e=="string"&&(e=oce(e)),!jW(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function ace(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!jW(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class sT{clone(){return this._cloneInto()}}function oT(e){const t=r=>e().update(T9(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function lce(e=32){if(aE&&typeof aE.getRandomValues=="function")return aE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class BW extends sT{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,rce(t);const r=T9(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return ug(this),this.iHash.update(t),this}digestInto(t){ug(this),iT(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const FW=(e,t,n)=>new BW(e,t).update(n).digest();FW.create=(e,t)=>new BW(e,t);function cce(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,f=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+f,a,r)}class zW extends sT{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=lE(this.buffer)}update(t){ug(this);const{view:n,buffer:r,blockLen:i}=this;t=T9(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=lE(t);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ug(this),OW(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;cce(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=lE(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=l/4,c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)a.setUint32(4*d,c[d],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}}const fce=(e,t,n)=>e&t^~e&n,dce=(e,t,n)=>e&t^e&n^t&n,uce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ld=new Uint32Array(64);class hce extends zW{constructor(){super(64,32,8,!1),this.A=Dd[0]|0,this.B=Dd[1]|0,this.C=Dd[2]|0,this.D=Dd[3]|0,this.E=Dd[4]|0,this.F=Dd[5]|0,this.G=Dd[6]|0,this.H=Dd[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[t,n,r,i,s,o,a,l]}set(t,n,r,i,s,o,a,l){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ld[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const u=Ld[d-15],h=Ld[d-2],g=Ol(u,7)^Ol(u,18)^u>>>3,y=Ol(h,17)^Ol(h,19)^h>>>10;Ld[d]=y+Ld[d-7]+g+Ld[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:f,H:c}=this;for(let d=0;d<64;d++){const u=Ol(a,6)^Ol(a,11)^Ol(a,25),h=c+u+fce(a,l,f)+uce[d]+Ld[d]|0,y=(Ol(r,2)^Ol(r,13)^Ol(r,22))+dce(r,i,s)|0;c=f,f=l,l=a,a=o+h|0,o=s,s=i,i=r,r=h+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,c=c+this.H|0,this.set(r,i,s,o,a,l,f,c)}roundClean(){Ld.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const $W=oT(()=>new hce),J8=BigInt(2**32-1),tC=BigInt(32);function HW(e,t=!1){return t?{h:Number(e&J8),l:Number(e>>tC&J8)}:{h:Number(e>>tC&J8)|0,l:Number(e&J8)|0}}function VW(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=HW(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const pce=(e,t)=>BigInt(e>>>0)<<tC|BigInt(t>>>0),mce=(e,t,n)=>e>>>n,gce=(e,t,n)=>e<<32-n|t>>>n,bce=(e,t,n)=>e>>>n|t<<32-n,yce=(e,t,n)=>e<<32-n|t>>>n,Uce=(e,t,n)=>e<<64-n|t>>>n-32,xce=(e,t,n)=>e>>>n-32|t<<64-n,wce=(e,t)=>t,vce=(e,t)=>e,WW=(e,t,n)=>e<<n|t>>>32-n,GW=(e,t,n)=>t<<n|e>>>32-n,XW=(e,t,n)=>t<<n-32|e>>>64-n,KW=(e,t,n)=>e<<n-32|t>>>64-n;function Ece(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const kce=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Sce=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Cce=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Ace=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,Mce=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Tce=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,Ht={fromBig:HW,split:VW,toBig:pce,shrSH:mce,shrSL:gce,rotrSH:bce,rotrSL:yce,rotrBH:Uce,rotrBL:xce,rotr32H:wce,rotr32L:vce,rotlSH:WW,rotlSL:GW,rotlBH:XW,rotlBL:KW,add:Ece,add3L:kce,add3H:Sce,add4L:Cce,add4H:Ace,add5H:Tce,add5L:Mce},[Ice,Nce]=Ht.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Od=new Uint32Array(80),jd=new Uint32Array(80);class Rce extends zW{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:f,El:c,Fh:d,Fl:u,Gh:h,Gl:g,Hh:y,Hl:U}=this;return[t,n,r,i,s,o,a,l,f,c,d,u,h,g,y,U]}set(t,n,r,i,s,o,a,l,f,c,d,u,h,g,y,U){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=f|0,this.El=c|0,this.Fh=d|0,this.Fl=u|0,this.Gh=h|0,this.Gl=g|0,this.Hh=y|0,this.Hl=U|0}process(t,n){for(let E=0;E<16;E++,n+=4)Od[E]=t.getUint32(n),jd[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const k=Od[E-15]|0,M=jd[E-15]|0,S=Ht.rotrSH(k,M,1)^Ht.rotrSH(k,M,8)^Ht.shrSH(k,M,7),A=Ht.rotrSL(k,M,1)^Ht.rotrSL(k,M,8)^Ht.shrSL(k,M,7),I=Od[E-2]|0,R=jd[E-2]|0,P=Ht.rotrSH(I,R,19)^Ht.rotrBH(I,R,61)^Ht.shrSH(I,R,6),_=Ht.rotrSL(I,R,19)^Ht.rotrBL(I,R,61)^Ht.shrSL(I,R,6),O=Ht.add4L(A,_,jd[E-7],jd[E-16]),V=Ht.add4H(O,S,P,Od[E-7],Od[E-16]);Od[E]=V|0,jd[E]=O|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:f,Dl:c,Eh:d,El:u,Fh:h,Fl:g,Gh:y,Gl:U,Hh:x,Hl:v}=this;for(let E=0;E<80;E++){const k=Ht.rotrSH(d,u,14)^Ht.rotrSH(d,u,18)^Ht.rotrBH(d,u,41),M=Ht.rotrSL(d,u,14)^Ht.rotrSL(d,u,18)^Ht.rotrBL(d,u,41),S=d&h^~d&y,A=u&g^~u&U,I=Ht.add5L(v,M,A,Nce[E],jd[E]),R=Ht.add5H(I,x,k,S,Ice[E],Od[E]),P=I|0,_=Ht.rotrSH(r,i,28)^Ht.rotrBH(r,i,34)^Ht.rotrBH(r,i,39),O=Ht.rotrSL(r,i,28)^Ht.rotrBL(r,i,34)^Ht.rotrBL(r,i,39),V=r&s^r&a^s&a,j=i&o^i&l^o&l;x=y|0,v=U|0,y=h|0,U=g|0,h=d|0,g=u|0,{h:d,l:u}=Ht.add(f|0,c|0,R|0,P|0),f=a|0,c=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const F=Ht.add3L(P,O,j);r=Ht.add3H(F,R,_,V),i=F|0}({h:r,l:i}=Ht.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ht.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Ht.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:f,l:c}=Ht.add(this.Dh|0,this.Dl|0,f|0,c|0),{h:d,l:u}=Ht.add(this.Eh|0,this.El|0,d|0,u|0),{h,l:g}=Ht.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:y,l:U}=Ht.add(this.Gh|0,this.Gl|0,y|0,U|0),{h:x,l:v}=Ht.add(this.Hh|0,this.Hl|0,x|0,v|0),this.set(r,i,s,o,a,l,f,c,d,u,h,g,y,U,x,v)}roundClean(){Od.fill(0),jd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const _ce=oT(()=>new Rce);function Pce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const YD=Pce();YD.crypto||YD.msCrypto;function Dce(e){switch(e){case"sha256":return $W.create();case"sha512":return _ce.create()}se(!1,"invalid hashing algorithm name","algorithm",e)}const[YW,ZW,qW]=[[],[],[]],Lce=BigInt(0),e5=BigInt(1),Oce=BigInt(2),jce=BigInt(7),Bce=BigInt(256),Fce=BigInt(113);for(let e=0,t=e5,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],YW.push(2*(5*r+n)),ZW.push((e+1)*(e+2)/2%64);let i=Lce;for(let s=0;s<7;s++)t=(t<<e5^(t>>jce)*Fce)%Bce,t&Oce&&(i^=e5<<(e5<<BigInt(s))-e5);qW.push(i)}const[zce,$ce]=VW(qW,!0),ZD=(e,t,n)=>n>32?XW(e,t,n):WW(e,t,n),qD=(e,t,n)=>n>32?KW(e,t,n):GW(e,t,n);function Hce(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,f=n[l],c=n[l+1],d=ZD(f,c,1)^n[a],u=qD(f,c,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=u}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=ZW[o],l=ZD(i,s,a),f=qD(i,s,a),c=YW[o];i=e[c],s=e[c+1],e[c]=l,e[c+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=zce[r],e[1]^=$ce[r]}n.fill(0)}class aT extends sT{constructor(t,n,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,dx(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ice(this.state)}keccak(){Hce(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){ug(this);const{blockLen:n,state:r}=this;t=T9(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){ug(this,!1),iT(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return dx(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(OW(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new aT(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Vce=(e,t,n)=>oT(()=>new aT(t,e,n)),Wce=Vce(1,136,256/8);let QW=!1;const JW=function(e){return Wce(e)};let eG=JW;function qr(e){const t=nn(e,"data");return tt(eG(t))}qr._=JW;qr.lock=function(){QW=!0};qr.register=function(e){if(QW)throw new TypeError("keccak256 is locked");eG=e};Object.freeze(qr);const tG=function(e){return Dce("sha256").update(e).digest()};let nG=tG,rG=!1;function Jg(e){const t=nn(e,"data");return tt(nG(t))}Jg._=tG;Jg.lock=function(){rG=!0};Jg.register=function(e){if(rG)throw new Error("sha256 is locked");nG=e};Object.freeze(Jg);Object.freeze(Jg);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iG=BigInt(0),I9=BigInt(1),Gce=BigInt(2),N9=e=>e instanceof Uint8Array,Xce=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function hg(e){if(!N9(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Xce[e[n]];return t}function sG(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function lT(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function pg(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Ph(e){return lT(hg(e))}function cT(e){if(!N9(e))throw new Error("Uint8Array expected");return lT(hg(Uint8Array.from(e).reverse()))}function mg(e,t){return pg(e.toString(16).padStart(t*2,"0"))}function fT(e,t){return mg(e,t).reverse()}function Kce(e){return pg(sG(e))}function Xa(e,t,n){let r;if(typeof t=="string")try{r=pg(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(N9(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function O2(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!N9(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function Yce(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Zce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function qce(e){let t;for(t=0;e>iG;e>>=I9,t+=1);return t}function Qce(e,t){return e>>BigInt(t)&I9}const Jce=(e,t,n)=>e|(n?I9:iG)<<BigInt(t),dT=e=>(Gce<<BigInt(e-1))-I9,cE=e=>new Uint8Array(e),QD=e=>Uint8Array.from(e);function oG(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=cE(e),i=cE(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),l=(d=cE())=>{i=a(QD([0]),d),r=a(),d.length!==0&&(i=a(QD([1]),d),r=a())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const u=[];for(;d<t;){r=a();const h=r.slice();u.push(h),d+=r.length}return O2(...u)};return(d,u)=>{o(),l(d);let h;for(;!(h=u(f()));)l();return o(),h}}const efe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function iy(e,t,n={}){const r=(i,s,o)=>{const a=efe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const tfe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Qce,bitLen:qce,bitMask:dT,bitSet:Jce,bytesToHex:hg,bytesToNumberBE:Ph,bytesToNumberLE:cT,concatBytes:O2,createHmacDrbg:oG,ensureBytes:Xa,equalBytes:Yce,hexToBytes:pg,hexToNumber:lT,numberToBytesBE:mg,numberToBytesLE:fT,numberToHexUnpadded:sG,numberToVarBytesBE:Kce,utf8ToBytes:Zce,validateObject:iy},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ai=BigInt(0),Fr=BigInt(1),W0=BigInt(2),nfe=BigInt(3),nC=BigInt(4),JD=BigInt(5),eL=BigInt(8);BigInt(9);BigInt(16);function to(e,t){const n=e%t;return n>=Ai?n:t+n}function rfe(e,t,n){if(n<=Ai||t<Ai)throw new Error("Expected power/modulo > 0");if(n===Fr)return Ai;let r=Fr;for(;t>Ai;)t&Fr&&(r=r*e%n),e=e*e%n,t>>=Fr;return r}function qo(e,t,n){let r=e;for(;t-- >Ai;)r*=r,r%=n;return r}function rC(e,t){if(e===Ai||t<=Ai)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=to(e,t),r=t,i=Ai,s=Fr;for(;n!==Ai;){const a=r/n,l=r%n,f=i-s*a;r=n,n=l,i=s,s=f}if(r!==Fr)throw new Error("invert: does not exist");return to(i,t)}function ife(e){const t=(e-Fr)/W0;let n,r,i;for(n=e-Fr,r=0;n%W0===Ai;n/=W0,r++);for(i=W0;i<e&&rfe(i,t,e)!==e-Fr;i++);if(r===1){const o=(e+Fr)/nC;return function(l,f){const c=l.pow(f,o);if(!l.eql(l.sqr(c),f))throw new Error("Cannot find square root");return c}}const s=(n+Fr)/W0;return function(a,l){if(a.pow(l,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=r,c=a.pow(a.mul(a.ONE,i),n),d=a.pow(l,s),u=a.pow(l,n);for(;!a.eql(u,a.ONE);){if(a.eql(u,a.ZERO))return a.ZERO;let h=1;for(let y=a.sqr(u);h<f&&!a.eql(y,a.ONE);h++)y=a.sqr(y);const g=a.pow(c,Fr<<BigInt(f-h-1));c=a.sqr(g),d=a.mul(d,g),u=a.mul(u,c),f=h}return d}}function sfe(e){if(e%nC===nfe){const t=(e+Fr)/nC;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%eL===JD){const t=(e-JD)/eL;return function(r,i){const s=r.mul(i,W0),o=r.pow(s,t),a=r.mul(i,o),l=r.mul(r.mul(a,W0),o),f=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(f),i))throw new Error("Cannot find square root");return f}}return ife(e)}const ofe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function afe(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ofe.reduce((r,i)=>(r[i]="function",r),t);return iy(e,n)}function lfe(e,t,n){if(n<Ai)throw new Error("Expected power > 0");if(n===Ai)return e.ONE;if(n===Fr)return t;let r=e.ONE,i=t;for(;n>Ai;)n&Fr&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Fr;return r}function cfe(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function aG(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ffe(e,t,n=!1,r={}){if(e<=Ai)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=aG(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=sfe(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:dT(i),ZERO:Ai,ONE:Fr,create:l=>to(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Ai<=l&&l<e},is0:l=>l===Ai,isOdd:l=>(l&Fr)===Fr,neg:l=>to(-l,e),eql:(l,f)=>l===f,sqr:l=>to(l*l,e),add:(l,f)=>to(l+f,e),sub:(l,f)=>to(l-f,e),mul:(l,f)=>to(l*f,e),pow:(l,f)=>lfe(a,l,f),div:(l,f)=>to(l*rC(f,e),e),sqrN:l=>l*l,addN:(l,f)=>l+f,subN:(l,f)=>l-f,mulN:(l,f)=>l*f,inv:l=>rC(l,e),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>cfe(a,l),cmov:(l,f,c)=>c?f:l,toBytes:l=>n?fT(l,s):mg(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?cT(l):Ph(l)}});return Object.freeze(a)}function lG(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function cG(e){const t=lG(e);return t+Math.ceil(t/2)}function dfe(e,t,n=!1){const r=e.length,i=lG(t),s=cG(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Ph(e):cT(e),a=to(o,t-Fr)+Fr;return n?fT(a,i):mg(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ufe=BigInt(0),fE=BigInt(1);function hfe(e,t){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>ufe;)s&fE&&(o=o.add(a)),a=a.double(),s>>=fE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let f=i,c=f;for(let d=0;d<o;d++){c=f,l.push(c);for(let u=1;u<a;u++)c=c.add(f),l.push(c);f=c.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let f=e.ZERO,c=e.BASE;const d=BigInt(2**i-1),u=2**i,h=BigInt(i);for(let g=0;g<a;g++){const y=g*l;let U=Number(o&d);o>>=h,U>l&&(U-=u,o+=fE);const x=y,v=y+Math.abs(U)-1,E=g%2!==0,k=U<0;U===0?c=c.add(n(E,s[x])):f=f.add(n(k,s[v]))}return{p:f,f:c}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let f=s.get(i);return f||(f=this.precomputeWindow(i,l),l!==1&&s.set(i,a(f))),this.wNAF(l,f,o)}}}function fG(e){return afe(e.Fp),iy(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...aG(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pfe(e){const t=fG(e);iy(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:mfe,hexToBytes:gfe}=tfe,eh={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=eh;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:mfe(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=eh,n=typeof e=="string"?gfe(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=eh._parseInt(n.subarray(2)),{d:o,l:a}=eh._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,n=f=>{const c=f.toString(16);return c.length&1?`0${c}`:c},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},Nf=BigInt(0),ca=BigInt(1);BigInt(2);const tL=BigInt(3);BigInt(4);function bfe(e){const t=pfe(e),{Fp:n}=t,r=t.toBytes||((g,y,U)=>{const x=y.toAffine();return O2(Uint8Array.from([4]),n.toBytes(x.x),n.toBytes(x.y))}),i=t.fromBytes||(g=>{const y=g.subarray(1),U=n.fromBytes(y.subarray(0,n.BYTES)),x=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:U,y:x}});function s(g){const{a:y,b:U}=t,x=n.sqr(g),v=n.mul(x,g);return n.add(n.add(v,n.mul(g,y)),U)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&Nf<g&&g<t.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(g){const{allowedPrivateKeyLengths:y,nByteLength:U,wrapPrivateKey:x,n:v}=t;if(y&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=hg(g)),typeof g!="string"||!y.includes(g.length))throw new Error("Invalid key");g=g.padStart(U*2,"0")}let E;try{E=typeof g=="bigint"?g:Ph(Xa("private key",g,U))}catch{throw new Error(`private key must be ${U} bytes, hex or bigint, not ${typeof g}`)}return x&&(E=to(E,v)),a(E),E}const f=new Map;function c(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(y,U,x){if(this.px=y,this.py=U,this.pz=x,y==null||!n.isValid(y))throw new Error("x required");if(U==null||!n.isValid(U))throw new Error("y required");if(x==null||!n.isValid(x))throw new Error("z required")}static fromAffine(y){const{x:U,y:x}=y||{};if(!y||!n.isValid(U)||!n.isValid(x))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");const v=E=>n.eql(E,n.ZERO);return v(U)&&v(x)?d.ZERO:new d(U,x,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const U=n.invertBatch(y.map(x=>x.pz));return y.map((x,v)=>x.toAffine(U[v])).map(d.fromAffine)}static fromHex(y){const U=d.fromAffine(i(Xa("pointHex",y)));return U.assertValidity(),U}static fromPrivateKey(y){return d.BASE.multiply(l(y))}_setWindowSize(y){this._WINDOW_SIZE=y,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:y,y:U}=this.toAffine();if(!n.isValid(y)||!n.isValid(U))throw new Error("bad point: x or y not FE");const x=n.sqr(U),v=s(y);if(!n.eql(x,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){c(y);const{px:U,py:x,pz:v}=this,{px:E,py:k,pz:M}=y,S=n.eql(n.mul(U,M),n.mul(E,v)),A=n.eql(n.mul(x,M),n.mul(k,v));return S&&A}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:U}=t,x=n.mul(U,tL),{px:v,py:E,pz:k}=this;let M=n.ZERO,S=n.ZERO,A=n.ZERO,I=n.mul(v,v),R=n.mul(E,E),P=n.mul(k,k),_=n.mul(v,E);return _=n.add(_,_),A=n.mul(v,k),A=n.add(A,A),M=n.mul(y,A),S=n.mul(x,P),S=n.add(M,S),M=n.sub(R,S),S=n.add(R,S),S=n.mul(M,S),M=n.mul(_,M),A=n.mul(x,A),P=n.mul(y,P),_=n.sub(I,P),_=n.mul(y,_),_=n.add(_,A),A=n.add(I,I),I=n.add(A,I),I=n.add(I,P),I=n.mul(I,_),S=n.add(S,I),P=n.mul(E,k),P=n.add(P,P),I=n.mul(P,_),M=n.sub(M,I),A=n.mul(P,R),A=n.add(A,A),A=n.add(A,A),new d(M,S,A)}add(y){c(y);const{px:U,py:x,pz:v}=this,{px:E,py:k,pz:M}=y;let S=n.ZERO,A=n.ZERO,I=n.ZERO;const R=t.a,P=n.mul(t.b,tL);let _=n.mul(U,E),O=n.mul(x,k),V=n.mul(v,M),j=n.add(U,x),F=n.add(E,k);j=n.mul(j,F),F=n.add(_,O),j=n.sub(j,F),F=n.add(U,v);let z=n.add(E,M);return F=n.mul(F,z),z=n.add(_,V),F=n.sub(F,z),z=n.add(x,v),S=n.add(k,M),z=n.mul(z,S),S=n.add(O,V),z=n.sub(z,S),I=n.mul(R,F),S=n.mul(P,V),I=n.add(S,I),S=n.sub(O,I),I=n.add(O,I),A=n.mul(S,I),O=n.add(_,_),O=n.add(O,_),V=n.mul(R,V),F=n.mul(P,F),O=n.add(O,V),V=n.sub(_,V),V=n.mul(R,V),F=n.add(F,V),_=n.mul(O,F),A=n.add(A,_),_=n.mul(z,F),S=n.mul(j,S),S=n.sub(S,_),_=n.mul(j,O),I=n.mul(z,I),I=n.add(I,_),new d(S,A,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return h.wNAFCached(this,f,y,U=>{const x=n.invertBatch(U.map(v=>v.pz));return U.map((v,E)=>v.toAffine(x[E])).map(d.fromAffine)})}multiplyUnsafe(y){const U=d.ZERO;if(y===Nf)return U;if(a(y),y===ca)return this;const{endo:x}=t;if(!x)return h.unsafeLadder(this,y);let{k1neg:v,k1:E,k2neg:k,k2:M}=x.splitScalar(y),S=U,A=U,I=this;for(;E>Nf||M>Nf;)E&ca&&(S=S.add(I)),M&ca&&(A=A.add(I)),I=I.double(),E>>=ca,M>>=ca;return v&&(S=S.negate()),k&&(A=A.negate()),A=new d(n.mul(A.px,x.beta),A.py,A.pz),S.add(A)}multiply(y){a(y);let U=y,x,v;const{endo:E}=t;if(E){const{k1neg:k,k1:M,k2neg:S,k2:A}=E.splitScalar(U);let{p:I,f:R}=this.wNAF(M),{p:P,f:_}=this.wNAF(A);I=h.constTimeNegate(k,I),P=h.constTimeNegate(S,P),P=new d(n.mul(P.px,E.beta),P.py,P.pz),x=I.add(P),v=R.add(_)}else{const{p:k,f:M}=this.wNAF(U);x=k,v=M}return d.normalizeZ([x,v])[0]}multiplyAndAddUnsafe(y,U,x){const v=d.BASE,E=(M,S)=>S===Nf||S===ca||!M.equals(v)?M.multiplyUnsafe(S):M.multiply(S),k=E(this,U).add(E(y,x));return k.is0()?void 0:k}toAffine(y){const{px:U,py:x,pz:v}=this,E=this.is0();y==null&&(y=E?n.ONE:n.inv(v));const k=n.mul(U,y),M=n.mul(x,y),S=n.mul(v,y);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:k,y:M}}isTorsionFree(){const{h:y,isTorsionFree:U}=t;if(y===ca)return!0;if(U)return U(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:U}=t;return y===ca?this:U?U(d,this):this.multiplyUnsafe(t.h)}toRawBytes(y=!0){return this.assertValidity(),r(d,this,y)}toHex(y=!0){return hg(this.toRawBytes(y))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const u=t.nBitLength,h=hfe(d,t.endo?Math.ceil(u/2):u);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function yfe(e){const t=fG(e);return iy(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Ufe(e){const t=yfe(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(F){return Nf<F&&F<n.ORDER}function a(F){return to(F,r)}function l(F){return rC(F,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:u}=bfe({...t,toBytes(F,z,H){const G=z.toAffine(),W=n.toBytes(G.x),B=O2;return H?B(Uint8Array.from([z.hasEvenY()?2:3]),W):B(Uint8Array.from([4]),W,n.toBytes(G.y))},fromBytes(F){const z=F.length,H=F[0],G=F.subarray(1);if(z===i&&(H===2||H===3)){const W=Ph(G);if(!o(W))throw new Error("Point is not on curve");const B=d(W);let X=n.sqrt(B);const q=(X&ca)===ca;return(H&1)===1!==q&&(X=n.neg(X)),{x:W,y:X}}else if(z===s&&H===4){const W=n.fromBytes(G.subarray(0,n.BYTES)),B=n.fromBytes(G.subarray(n.BYTES,2*n.BYTES));return{x:W,y:B}}else throw new Error(`Point of length ${z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=F=>hg(mg(F,t.nByteLength));function g(F){const z=r>>ca;return F>z}function y(F){return g(F)?a(-F):F}const U=(F,z,H)=>Ph(F.slice(z,H));class x{constructor(z,H,G){this.r=z,this.s=H,this.recovery=G,this.assertValidity()}static fromCompact(z){const H=t.nByteLength;return z=Xa("compactSignature",z,H*2),new x(U(z,0,H),U(z,H,2*H))}static fromDER(z){const{r:H,s:G}=eh.toSig(Xa("DER",z));return new x(H,G)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new x(this.r,this.s,z)}recoverPublicKey(z){const{r:H,s:G,recovery:W}=this,B=A(Xa("msgHash",z));if(W==null||![0,1,2,3].includes(W))throw new Error("recovery id invalid");const X=W===2||W===3?H+t.n:H;if(X>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=W&1?"03":"02",Y=f.fromHex(q+h(X)),oe=l(X),ge=a(-B*oe),he=a(G*oe),ce=f.BASE.multiplyAndAddUnsafe(Y,ge,he);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return pg(this.toDERHex())}toDERHex(){return eh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return pg(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const v={isValidPrivateKey(F){try{return c(F),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const F=cG(t.n);return dfe(t.randomBytes(F),t.n)},precompute(F=8,z=f.BASE){return z._setWindowSize(F),z.multiply(BigInt(3)),z}};function E(F,z=!0){return f.fromPrivateKey(F).toRawBytes(z)}function k(F){const z=F instanceof Uint8Array,H=typeof F=="string",G=(z||H)&&F.length;return z?G===i||G===s:H?G===2*i||G===2*s:F instanceof f}function M(F,z,H=!0){if(k(F))throw new Error("first arg must be private key");if(!k(z))throw new Error("second arg must be public key");return f.fromHex(z).multiply(c(F)).toRawBytes(H)}const S=t.bits2int||function(F){const z=Ph(F),H=F.length*8-t.nBitLength;return H>0?z>>BigInt(H):z},A=t.bits2int_modN||function(F){return a(S(F))},I=dT(t.nBitLength);function R(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(Nf<=F&&F<I))throw new Error(`bigint expected < 2^${t.nBitLength}`);return mg(F,t.nByteLength)}function P(F,z,H=_){if(["recovered","canonical"].some(we=>we in H))throw new Error("sign() legacy options not supported");const{hash:G,randomBytes:W}=t;let{lowS:B,prehash:X,extraEntropy:q}=H;B==null&&(B=!0),F=Xa("msgHash",F),X&&(F=Xa("prehashed msgHash",G(F)));const Y=A(F),oe=c(z),ge=[R(oe),R(Y)];if(q!=null){const we=q===!0?W(n.BYTES):q;ge.push(Xa("extraEntropy",we))}const he=O2(...ge),ce=Y;function ie(we){const ke=S(we);if(!u(ke))return;const Re=l(ke),Fe=f.BASE.multiply(ke).toAffine(),$e=a(Fe.x);if($e===Nf)return;const ve=a(Re*a(ce+$e*oe));if(ve===Nf)return;let Le=(Fe.x===$e?0:2)|Number(Fe.y&ca),Ae=ve;return B&&g(ve)&&(Ae=y(ve),Le^=1),new x($e,Ae,Le)}return{seed:he,k2sig:ie}}const _={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};function V(F,z,H=_){const{seed:G,k2sig:W}=P(F,z,H),B=t;return oG(B.hash.outputLen,B.nByteLength,B.hmac)(G,W)}f.BASE._setWindowSize(8);function j(F,z,H,G=O){var Fe;const W=F;if(z=Xa("msgHash",z),H=Xa("publicKey",H),"strict"in G)throw new Error("options.strict was renamed to lowS");const{lowS:B,prehash:X}=G;let q,Y;try{if(typeof W=="string"||W instanceof Uint8Array)try{q=x.fromDER(W)}catch($e){if(!($e instanceof eh.Err))throw $e;q=x.fromCompact(W)}else if(typeof W=="object"&&typeof W.r=="bigint"&&typeof W.s=="bigint"){const{r:$e,s:ve}=W;q=new x($e,ve)}else throw new Error("PARSE");Y=f.fromHex(H)}catch($e){if($e.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(B&&q.hasHighS())return!1;X&&(z=t.hash(z));const{r:oe,s:ge}=q,he=A(z),ce=l(ge),ie=a(he*ce),we=a(oe*ce),ke=(Fe=f.BASE.multiplyAndAddUnsafe(Y,ie,we))==null?void 0:Fe.toAffine();return ke?a(ke.x)===oe:!1}return{CURVE:t,getPublicKey:E,getSharedSecret:M,sign:V,verify:j,ProjectivePoint:f,Signature:x,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xfe(e){return{hash:e,hmac:(t,...n)=>FW(e,t,ace(...n)),randomBytes:lce}}function wfe(e,t){const n=r=>Ufe({...e,...xfe(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dG=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),nL=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),vfe=BigInt(1),iC=BigInt(2),rL=(e,t)=>(e+t/iC)/t;function Efe(e){const t=dG,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),f=e*e*e%t,c=f*f*e%t,d=qo(c,n,t)*c%t,u=qo(d,n,t)*c%t,h=qo(u,iC,t)*f%t,g=qo(h,i,t)*h%t,y=qo(g,s,t)*g%t,U=qo(y,a,t)*y%t,x=qo(U,l,t)*U%t,v=qo(x,a,t)*y%t,E=qo(v,n,t)*c%t,k=qo(E,o,t)*g%t,M=qo(k,r,t)*f%t,S=qo(M,iC,t);if(!sC.eql(sC.sqr(S),e))throw new Error("Cannot find square root");return S}const sC=ffe(dG,void 0,void 0,{sqrt:Efe}),Xd=wfe({a:BigInt(0),b:BigInt(7),Fp:sC,n:nL,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=nL,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-vfe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=rL(s*e,t),l=rL(-r*e,t);let f=to(e-a*n-l*i,t),c=to(-a*r-l*s,t);const d=f>o,u=c>o;if(d&&(f=t-f),u&&(c=t-c),f>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:f,k2neg:u,k2:c}}}},$W);BigInt(0);Xd.ProjectivePoint;const j2="0x0000000000000000000000000000000000000000",iL="0x0000000000000000000000000000000000000000000000000000000000000000",sL=BigInt(0),oL=BigInt(1),aL=BigInt(2),lL=BigInt(27),cL=BigInt(28),eU=BigInt(35),up={};function fL(e){return qh(Ms(e),32)}var Pm,Dm,Lm,Eh;const Ga=class Ga{constructor(t,n,r,i){be(this,Pm);be(this,Dm);be(this,Lm);be(this,Eh);ry(t,up,"Signature"),ee(this,Pm,n),ee(this,Dm,r),ee(this,Lm,i),ee(this,Eh,null)}get r(){return K(this,Pm)}set r(t){se(am(t)===32,"invalid r","value",t),ee(this,Pm,tt(t))}get s(){return K(this,Dm)}set s(t){se(am(t)===32,"invalid s","value",t);const n=tt(t);se(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),ee(this,Dm,n)}get v(){return K(this,Lm)}set v(t){const n=zt(t,"value");se(n===27||n===28,"invalid v","v",t),ee(this,Lm,n)}get networkV(){return K(this,Eh)}get legacyChainId(){const t=this.networkV;return t==null?null:Ga.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=nn(this.s);return this.yParity&&(t[0]|=128),tt(t)}get compactSerialized(){return $r([this.r,this.yParityAndS])}get serialized(){return $r([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Ga(up,this.r,this.s,this.v);return this.networkV&&ee(t,Eh,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const n=ot(t,"v");return n==lL||n==cL?sL:(se(n>=eU,"invalid EIP-155 v","v",t),(n-eU)/aL)}static getChainIdV(t,n){return ot(t)*aL+BigInt(35+n-27)}static getNormalizedV(t){const n=ot(t);return n===sL||n===lL?27:n===oL||n===cL?28:(se(n>=eU,"invalid v","v",t),n&oL?27:28)}static from(t){function n(f,c){se(f,c,"signature",t)}if(t==null)return new Ga(up,iL,iL,27);if(typeof t=="string"){const f=nn(t,"signature");if(f.length===64){const c=tt(f.slice(0,32)),d=f.slice(32,64),u=d[0]&128?28:27;return d[0]&=127,new Ga(up,c,tt(d),u)}if(f.length===65){const c=tt(f.slice(0,32)),d=f.slice(32,64);n((d[0]&128)===0,"non-canonical s");const u=Ga.getNormalizedV(f[64]);return new Ga(up,c,tt(d),u)}n(!1,"invalid raw signature length")}if(t instanceof Ga)return t.clone();const r=t.r;n(r!=null,"missing r");const i=fL(r),s=function(f,c){if(f!=null)return fL(f);if(c!=null){n(Gn(c,32),"invalid yParityAndS");const d=nn(c);return d[0]&=127,tt(d)}n(!1,"missing s")}(t.s,t.yParityAndS);n((nn(s)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(f,c,d){if(f!=null){const u=ot(f);return{networkV:u>=eU?u:void 0,v:Ga.getNormalizedV(u)}}if(c!=null)return n(Gn(c,32),"invalid yParityAndS"),{v:nn(c)[0]&128?28:27};if(d!=null){switch(zt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),l=new Ga(up,i,s,a);return o&&ee(l,Eh,o),n(t.yParity==null||zt(t.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(t.yParityAndS==null||t.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Pm=new WeakMap,Dm=new WeakMap,Lm=new WeakMap,Eh=new WeakMap;let xl=Ga;var vf;const q0=class q0{constructor(t){be(this,vf);se(am(t)===32,"invalid private key","privateKey","[REDACTED]"),ee(this,vf,tt(t))}get privateKey(){return K(this,vf)}get publicKey(){return q0.computePublicKey(K(this,vf))}get compressedPublicKey(){return q0.computePublicKey(K(this,vf),!0)}sign(t){se(am(t)===32,"invalid digest length","digest",t);const n=Xd.sign(As(t),As(K(this,vf)),{lowS:!0});return xl.from({r:Ku(n.r,32),s:Ku(n.s,32),v:n.recovery?28:27})}computeSharedSecret(t){const n=q0.computePublicKey(t);return tt(Xd.getSharedSecret(As(K(this,vf)),nn(n),!1))}static computePublicKey(t,n){let r=nn(t,"key");if(r.length===32){const s=Xd.getPublicKey(r,!!n);return tt(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Xd.ProjectivePoint.fromHex(r);return tt(i.toRawBytes(n))}static recoverPublicKey(t,n){se(am(t)===32,"invalid digest length","digest",t);const r=xl.from(n);let i=Xd.Signature.fromCompact(As($r([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(As(t));return se(s!=null,"invalid signautre for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(t,n,r){const i=Xd.ProjectivePoint.fromHex(q0.computePublicKey(t).substring(2)),s=Xd.ProjectivePoint.fromHex(q0.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};vf=new WeakMap;let B2=q0;const kfe=BigInt(0),Sfe=BigInt(36);function dL(e){e=e.toLowerCase();const t=e.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=t[i].charCodeAt(0);const r=nn(qr(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(r[i>>1]&15)>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const uT={};for(let e=0;e<10;e++)uT[String(e)]=String(e);for(let e=0;e<26;e++)uT[String.fromCharCode(65+e)]=String(10+e);const uL=15;function Cfe(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map(r=>uT[r]).join("");for(;t.length>=uL;){let r=t.substring(0,uL);t=parseInt(r,10)%97+t.substring(r.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const Afe=function(){const e={};for(let t=0;t<36;t++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[t];e[n]=BigInt(t)}return e}();function Mfe(e){e=e.toLowerCase();let t=kfe;for(let n=0;n<e.length;n++)t=t*Sfe+Afe[e[n]];return t}function _n(e){if(se(typeof e=="string","invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=dL(e);return se(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){se(e.substring(2,4)===Cfe(e),"bad icap checksum","address",e);let t=Mfe(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return dL("0x"+t)}se(!1,"invalid address","address",e)}function Tfe(e){const t=_n(e.from);let r=ot(e.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,_n(_r(qr(Qh([t,r])),12))}function uG(e){return e&&typeof e.getAddress=="function"}async function dE(e,t){const n=await t;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Se(typeof e!="string","unconfigured name","UNCONFIGURED_NAME",{value:e}),se(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),_n(n)}function Is(e,t){if(typeof e=="string")return e.match(/^0x[0-9a-f]{40}$/i)?_n(e):(Se(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),dE(e,t.resolveName(e)));if(uG(e))return dE(e,e.getAddress());if(e&&typeof e.then=="function")return dE(e,e);se(!1,"unsupported addressable value","target",e)}const ff={};function Je(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new ds(ff,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function un(e,t){return new ds(ff,`bytes${t||""}`,e,{size:t})}const hL=Symbol.for("_ethers_typed");var kh;const pf=class pf{constructor(t,n,r,i){fe(this,"type");fe(this,"value");be(this,kh);fe(this,"_typedSymbol");i==null&&(i=null),ry(ff,t,"Typed"),yt(this,{_typedSymbol:hL,type:n,value:r}),ee(this,kh,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return K(this,kh)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return K(this,kh)===!0?-1:K(this,kh)===!1?this.value.length:null}static from(t,n){return new pf(ff,t,n)}static uint8(t){return Je(t,8)}static uint16(t){return Je(t,16)}static uint24(t){return Je(t,24)}static uint32(t){return Je(t,32)}static uint40(t){return Je(t,40)}static uint48(t){return Je(t,48)}static uint56(t){return Je(t,56)}static uint64(t){return Je(t,64)}static uint72(t){return Je(t,72)}static uint80(t){return Je(t,80)}static uint88(t){return Je(t,88)}static uint96(t){return Je(t,96)}static uint104(t){return Je(t,104)}static uint112(t){return Je(t,112)}static uint120(t){return Je(t,120)}static uint128(t){return Je(t,128)}static uint136(t){return Je(t,136)}static uint144(t){return Je(t,144)}static uint152(t){return Je(t,152)}static uint160(t){return Je(t,160)}static uint168(t){return Je(t,168)}static uint176(t){return Je(t,176)}static uint184(t){return Je(t,184)}static uint192(t){return Je(t,192)}static uint200(t){return Je(t,200)}static uint208(t){return Je(t,208)}static uint216(t){return Je(t,216)}static uint224(t){return Je(t,224)}static uint232(t){return Je(t,232)}static uint240(t){return Je(t,240)}static uint248(t){return Je(t,248)}static uint256(t){return Je(t,256)}static uint(t){return Je(t,256)}static int8(t){return Je(t,-8)}static int16(t){return Je(t,-16)}static int24(t){return Je(t,-24)}static int32(t){return Je(t,-32)}static int40(t){return Je(t,-40)}static int48(t){return Je(t,-48)}static int56(t){return Je(t,-56)}static int64(t){return Je(t,-64)}static int72(t){return Je(t,-72)}static int80(t){return Je(t,-80)}static int88(t){return Je(t,-88)}static int96(t){return Je(t,-96)}static int104(t){return Je(t,-104)}static int112(t){return Je(t,-112)}static int120(t){return Je(t,-120)}static int128(t){return Je(t,-128)}static int136(t){return Je(t,-136)}static int144(t){return Je(t,-144)}static int152(t){return Je(t,-152)}static int160(t){return Je(t,-160)}static int168(t){return Je(t,-168)}static int176(t){return Je(t,-176)}static int184(t){return Je(t,-184)}static int192(t){return Je(t,-192)}static int200(t){return Je(t,-200)}static int208(t){return Je(t,-208)}static int216(t){return Je(t,-216)}static int224(t){return Je(t,-224)}static int232(t){return Je(t,-232)}static int240(t){return Je(t,-240)}static int248(t){return Je(t,-248)}static int256(t){return Je(t,-256)}static int(t){return Je(t,-256)}static bytes1(t){return un(t,1)}static bytes2(t){return un(t,2)}static bytes3(t){return un(t,3)}static bytes4(t){return un(t,4)}static bytes5(t){return un(t,5)}static bytes6(t){return un(t,6)}static bytes7(t){return un(t,7)}static bytes8(t){return un(t,8)}static bytes9(t){return un(t,9)}static bytes10(t){return un(t,10)}static bytes11(t){return un(t,11)}static bytes12(t){return un(t,12)}static bytes13(t){return un(t,13)}static bytes14(t){return un(t,14)}static bytes15(t){return un(t,15)}static bytes16(t){return un(t,16)}static bytes17(t){return un(t,17)}static bytes18(t){return un(t,18)}static bytes19(t){return un(t,19)}static bytes20(t){return un(t,20)}static bytes21(t){return un(t,21)}static bytes22(t){return un(t,22)}static bytes23(t){return un(t,23)}static bytes24(t){return un(t,24)}static bytes25(t){return un(t,25)}static bytes26(t){return un(t,26)}static bytes27(t){return un(t,27)}static bytes28(t){return un(t,28)}static bytes29(t){return un(t,29)}static bytes30(t){return un(t,30)}static bytes31(t){return un(t,31)}static bytes32(t){return un(t,32)}static address(t){return new pf(ff,"address",t)}static bool(t){return new pf(ff,"bool",!!t)}static bytes(t){return new pf(ff,"bytes",t)}static string(t){return new pf(ff,"string",t)}static array(t,n){throw new Error("not implemented yet")}static tuple(t,n){throw new Error("not implemented yet")}static overrides(t){return new pf(ff,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===hL}static dereference(t,n){if(pf.isTyped(t)){if(t.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${t.type}`);return t.value}return t}};kh=new WeakMap;let ds=pf;class Ife extends sd{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,n){let r=ds.dereference(n,"string");try{r=_n(r)}catch(i){return this._throwError(i.message,n)}return t.writeValue(r)}decode(t){return _n(Ku(t.readValue(),20))}}class Nfe extends sd{constructor(n){super(n.name,n.type,"_",n.dynamic);fe(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function hG(e,t,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=t.map(f=>{const c=f.localName;return Se(c,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:n}),Se(!l[c],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:n}),l[c]=!0,n[c]})}else se(!1,"invalid tuple value","tuple",n);se(t.length===r.length,"types/value length mismatch","tuple",n);let i=new QS,s=new QS,o=[];t.forEach((l,f)=>{let c=r[f];if(l.dynamic){let d=s.length;l.encode(s,c);let u=i.writeUpdatableValue();o.push(h=>{u(h+d)})}else l.encode(i,c)}),o.forEach(l=>{l(i.length)});let a=e.appendWriter(i);return a+=e.appendWriter(s),a}function pG(e,t){let n=[],r=[],i=e.subReader(0);return t.forEach(s=>{let o=null;if(s.dynamic){let a=e.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(f){if(ls(f,"BUFFER_OVERRUN"))throw f;o=f,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(e)}catch(a){if(ls(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),dg.fromItems(n,r)}class Rfe extends sd{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);fe(this,"coder");fe(this,"length");yt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=ds.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),EW(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return hG(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Se(r*Ts<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Ts,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new Nfe(this.coder));return pG(n,i)}}class _fe extends sd{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,n){const r=ds.dereference(n,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class mG extends sd{constructor(t,n){super(t,t,n,!0)}defaultValue(){return"0x"}encode(t,n){n=As(n);let r=t.writeValue(n.length);return r+=t.writeBytes(n),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class Pfe extends mG{constructor(t){super("bytes",t)}decode(t){return tt(super.decode(t))}}class Dfe extends sd{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);fe(this,"size");yt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=As(ds.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return tt(n.readBytes(this.size))}}const Lfe=new Uint8Array([]);class Ofe extends sd{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,n){return n!=null&&this._throwError("not null",n),t.writeBytes(Lfe)}decode(t){return t.readBytes(0),null}}const jfe=BigInt(0),Bfe=BigInt(1),Ffe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class zfe extends sd{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);fe(this,"size");fe(this,"signed");yt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=ot(ds.dereference(r,this.type)),s=J0(Ffe,Ts*8);if(this.signed){let o=J0(s,this.size*8-1);(i>o||i<-(o+Bfe))&&this._throwError("value out-of-bounds",r),i=CW(i,8*Ts)}else(i<jfe||i>J0(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=J0(n.readValue(),this.size*8);return this.signed&&(r=lx(r,this.size*8)),r}}class $fe extends mG{constructor(t){super("string",t)}defaultValue(){return""}encode(t,n){return super.encode(t,Bf(ds.dereference(n,"string")))}decode(t){return cx(super.decode(t))}}class tU extends sd{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);fe(this,"coders");yt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=ds.dereference(r,"tuple");return hG(n,this.coders,i)}decode(n){return pG(n,this.coders)}}function Jh(e){return qr(Bf(e))}var Hfe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const pL=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),mL=4;function Vfe(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),i=1,s=[0,1];for(let M=1;M<r;M++)s.push(i+=n());let o=n(),a=t;t+=o;let l=0,f=0;function c(){return l==0&&(f=f<<8|e[t++],l=8),f>>--l&1}const d=31,u=2**d,h=u>>>1,g=h>>1,y=u-1;let U=0;for(let M=0;M<d;M++)U=U<<1|c();let x=[],v=0,E=u;for(;;){let M=Math.floor(((U-v+1)*i-1)/E),S=0,A=r;for(;A-S>1;){let P=S+A>>>1;M<s[P]?A=P:S=P}if(S==0)break;x.push(S);let I=v+Math.floor(E*s[S]/i),R=v+Math.floor(E*s[S+1]/i)-1;for(;!((I^R)&h);)U=U<<1&y|c(),I=I<<1&y,R=R<<1&y|1;for(;I&~R&g;)U=U&h|U<<1&y>>>1|c(),I=I<<1^h,R=(R^h)<<1|h|1;v=I,E=1+R-I}let k=r-4;return x.map(M=>{switch(M-k){case 3:return k+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return k+256+(e[a++]<<8|e[a++]);case 1:return k+e[a++];default:return M-1}})}function Wfe(e){let t=0;return()=>e[t++]}function gG(e){return Wfe(Vfe(Gfe(e)))}function Gfe(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>t[i.charCodeAt(0)]=s);let n=e.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|t[e.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function Xfe(e){return e&1?~e>>1:e>>1}function Kfe(e,t){let n=Array(e);for(let r=0,i=0;r<e;r++)n[r]=i+=Xfe(t());return n}function F2(e,t=0){let n=[];for(;;){let r=e(),i=e();if(!i)break;t+=r;for(let s=0;s<i;s++)n.push(t+s);t+=i+1}return n}function bG(e){return z2(()=>{let t=F2(e);if(t.length)return t})}function yG(e){let t=[];for(;;){let n=e();if(n==0)break;t.push(Yfe(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(Zfe(n,e))}return t.flat()}function z2(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function UG(e,t,n){let r=Array(e).fill().map(()=>[]);for(let i=0;i<t;i++)Kfe(e,n).forEach((s,o)=>r[o].push(s));return r}function Yfe(e,t){let n=1+t(),r=t(),i=z2(t);return UG(i.length,1+e,t).flatMap((o,a)=>{let[l,...f]=o;return Array(i[a]).fill().map((c,d)=>{let u=d*r;return[l+d*n,f.map(h=>h+u)]})})}function Zfe(e,t){let n=1+t();return UG(n,1+e,t).map(i=>[i[0],i.slice(1)])}function qfe(e){let t=[],n=F2(e);return i(r([]),[]),t;function r(s){let o=e(),a=z2(()=>{let l=F2(e).map(f=>n[f]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&t.push(a);for(let f of o)for(let c of f.Q)i(f,[...a,c],l)}}}function Qfe(e){return e.toString(16).toUpperCase().padStart(2,"0")}function xG(e){return`{${Qfe(e)}}`}function Jfe(e){let t=[];for(let n=0,r=e.length;n<r;){let i=e.codePointAt(n);n+=i<65536?1:2,t.push(i)}return t}function gg(e){let n=e.length;if(n<4096)return String.fromCodePoint(...e);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...e.slice(i,i+=4096)));return r.join("")}function ede(e,t){let n=e.length,r=n-t.length;for(let i=0;r==0&&i<n;i++)r=e[i]-t[i];return r}var tde="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const $2=44032,ux=4352,hx=4449,px=4519,wG=19,vG=21,bg=28,mx=vG*bg,nde=wG*mx,rde=$2+nde,ide=ux+wG,sde=hx+vG,ode=px+bg;function R5(e){return e>>24&255}function EG(e){return e&16777215}let oC,gL,aC,l3;function ade(){let e=gG(tde);oC=new Map(bG(e).flatMap((t,n)=>t.map(r=>[r,n+1<<24]))),gL=new Set(F2(e)),aC=new Map,l3=new Map;for(let[t,n]of yG(e)){if(!gL.has(t)&&n.length==2){let[r,i]=n,s=l3.get(r);s||(s=new Map,l3.set(r,s)),s.set(i,t)}aC.set(t,n.reverse())}}function kG(e){return e>=$2&&e<rde}function lde(e,t){if(e>=ux&&e<ide&&t>=hx&&t<sde)return $2+(e-ux)*mx+(t-hx)*bg;if(kG(e)&&t>px&&t<ode&&(e-$2)%bg==0)return e+(t-px);{let n=l3.get(e);return n&&(n=n.get(t),n)?n:-1}}function SG(e){oC||ade();let t=[],n=[],r=!1;function i(s){let o=oC.get(s);o&&(r=!0,s|=o),t.push(s)}for(let s of e)for(;;){if(s<128)t.push(s);else if(kG(s)){let o=s-$2,a=o/mx|0,l=o%mx/bg|0,f=o%bg;i(ux+a),i(hx+l),f>0&&i(px+f)}else{let o=aC.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&t.length>1){let s=R5(t[0]);for(let o=1;o<t.length;o++){let a=R5(t[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let f=t[l+1];if(t[l+1]=t[l],t[l]=f,!l||(s=R5(t[--l]),s<=a))break}s=R5(t[o])}}return t}function cde(e){let t=[],n=[],r=-1,i=0;for(let s of e){let o=R5(s),a=EG(s);if(r==-1)o==0?r=a:t.push(a);else if(i>0&&i>=o)o==0?(t.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=lde(r,a);l>=0?r=l:i==0&&o==0?(t.push(r),r=a):(n.push(a),i=o)}}return r>=0&&t.push(r,...n),t}function CG(e){return SG(e).map(EG)}function fde(e){return cde(SG(e))}const bL=45,AG=".",MG=65039,TG=1,gx=e=>Array.from(e);function H2(e,t){return e.P.has(t)||e.Q.has(t)}class dde extends Array{get is_emoji(){return!0}}let lC,IG,th,cC,NG,cm,uE,Rp,O0,yL,fC;function hT(){if(lC)return;let e=gG(Hfe);const t=()=>F2(e),n=()=>new Set(t()),r=(c,d)=>d.forEach(u=>c.add(u));lC=new Map(yG(e)),IG=n(),th=t(),cC=new Set(t().map(c=>th[c])),th=new Set(th),NG=n(),n();let i=bG(e),s=e();const o=()=>{let c=new Set;return t().forEach(d=>r(c,i[d])),r(c,t()),c};cm=z2(c=>{let d=z2(e).map(u=>u+96);if(d.length){let u=c>=s;d[0]-=32,d=gg(d),u&&(d=`Restricted[${d}]`);let h=o(),g=o(),y=!e();return{N:d,P:h,Q:g,M:y,R:u}}}),uE=n(),Rp=new Map;let a=t().concat(gx(uE)).sort((c,d)=>c-d);a.forEach((c,d)=>{let u=e(),h=a[d]=u?a[d-u]:{V:[],M:new Map};h.V.push(c),uE.has(c)||Rp.set(c,h)});for(let{V:c,M:d}of new Set(Rp.values())){let u=[];for(let g of c){let y=cm.filter(x=>H2(x,g)),U=u.find(({G:x})=>y.some(v=>x.has(v)));U||(U={G:new Set,V:[]},u.push(U)),U.V.push(g),r(U.G,y)}let h=u.flatMap(g=>gx(g.G));for(let{G:g,V:y}of u){let U=new Set(h.filter(x=>!g.has(x)));for(let x of y)d.set(x,U)}}O0=new Set;let l=new Set;const f=c=>O0.has(c)?l.add(c):O0.add(c);for(let c of cm){for(let d of c.P)f(d);for(let d of c.Q)f(d)}for(let c of O0)!Rp.has(c)&&!l.has(c)&&Rp.set(c,TG);r(O0,CG(O0)),yL=qfe(e).map(c=>dde.from(c)).sort(ede),fC=new Map;for(let c of yL){let d=[fC];for(let u of c){let h=d.map(g=>{let y=g.get(u);return y||(y=new Map,g.set(u,y)),y});u===MG?d.push(...h):d=h}for(let u of d)u.V=c}}function pT(e){return(RG(e)?"":`${mT(R9([e]))} `)+xG(e)}function mT(e){return`"${e}"`}function ude(e){if(e.length>=4&&e[2]==bL&&e[3]==bL)throw new Error(`invalid label extension: "${gg(e.slice(0,4))}"`)}function hde(e){for(let n=e.lastIndexOf(95);n>0;)if(e[--n]!==95)throw new Error("underscore allowed only at start")}function pde(e){let t=e[0],n=pL.get(t);if(n)throw n2(`leading ${n}`);let r=e.length,i=-1;for(let s=1;s<r;s++){t=e[s];let o=pL.get(t);if(o){if(i==s)throw n2(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw n2(`trailing ${n}`)}function R9(e,t=1/0,n=xG){let r=[];mde(e[0])&&r.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,s=e.length;for(let o=0;o<s;o++){let a=e[o];RG(a)&&(r.push(gg(e.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(gg(e.slice(i,s))),r.join("")}function mde(e){return hT(),th.has(e)}function RG(e){return hT(),NG.has(e)}function gde(e){return xde(bde(e,fde,Ede))}function bde(e,t,n){if(!e)return[];hT();let r=0;return e.split(AG).map(i=>{let s=Jfe(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=vde(s,t,n),l=a.length,f;if(!l)throw new Error("empty label");let c=o.output=a.flat();if(hde(c),!(o.emoji=l>1||a[0].is_emoji)&&c.every(u=>u<128))ude(c),f="ASCII";else{let u=a.flatMap(h=>h.is_emoji?[]:h);if(!u.length)f="Emoji";else{if(th.has(c[0]))throw n2("leading combining mark");for(let y=1;y<l;y++){let U=a[y];if(!U.is_emoji&&th.has(U[0]))throw n2(`emoji + combining mark: "${gg(a[y-1])} + ${R9([U[0]])}"`)}pde(c);let h=gx(new Set(u)),[g]=Ude(h);wde(g,u),yde(g,h),f=g.N}}o.type=f}catch(a){o.error=a}return o})}function yde(e,t){let n,r=[];for(let i of t){let s=Rp.get(i);if(s===TG)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):gx(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>H2(i,s)))throw new Error(`whole-script confusable: ${e.N}/${i.N}`)}}function Ude(e){let t=cm;for(let n of e){let r=t.filter(i=>H2(i,n));if(!r.length)throw cm.some(i=>H2(i,n))?PG(t[0],n):_G(n);if(t=r,r.length==1)break}return t}function xde(e){return e.map(({input:t,error:n,output:r})=>{if(n){let i=n.message;throw new Error(e.length==1?i:`Invalid label ${mT(R9(t,63))}: ${i}`)}return gg(r)}).join(AG)}function _G(e){return new Error(`disallowed character: ${pT(e)}`)}function PG(e,t){let n=pT(t),r=cm.find(i=>i.P.has(t));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function n2(e){return new Error(`illegal placement: ${e}`)}function wde(e,t){for(let n of t)if(!H2(e,n))throw PG(e,n);if(e.M){let n=CG(t);for(let r=1,i=n.length;r<i;r++)if(cC.has(n[r])){let s=r+1;for(let o;s<i&&cC.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${pT(o)}`);if(s-r>mL)throw new Error(`excessive non-spacing marks: ${mT(R9(n.slice(r-1,s)))} (${s-r}/${mL})`);r=s}}}function vde(e,t,n){let r=[],i=[];for(e=e.slice().reverse();e.length;){let s=kde(e);if(s)i.length&&(r.push(t(i)),i=[]),r.push(n(s));else{let o=e.pop();if(O0.has(o))i.push(o);else{let a=lC.get(o);if(a)i.push(...a);else if(!IG.has(o))throw _G(o)}}}return i.length&&r.push(t(i)),r}function Ede(e){return e.filter(t=>t!=MG)}function kde(e,t){let n=fC,r,i=e.length;for(;i&&(n=n.get(e[--i]),!!n);){let{V:s}=n;s&&(r=s,e.length=i)}return r}const DG=new Uint8Array(32);DG.fill(0);function UL(e){return se(e.length!==0,"invalid ENS name; empty component","comp",e),e}function LG(e){const t=Bf(Sde(e)),n=[];if(e.length===0)return n;let r=0;for(let i=0;i<t.length;i++)t[i]===46&&(n.push(UL(t.slice(r,i))),r=i+1);return se(r<t.length,"invalid ENS name; empty component","name",e),n.push(UL(t.slice(r))),n}function Sde(e){try{if(e.length===0)throw new Error("empty label");return gde(e)}catch(t){se(!1,`invalid ENS name (${t.message})`,"name",e)}}function dC(e){se(typeof e=="string","invalid ENS name; not a string","name",e),se(e.length,"invalid ENS name (empty label)","name",e);let t=DG;const n=LG(e);for(;n.length;)t=qr($r([t,qr(n.pop())]));return tt(t)}function Cde(e,t){const n=t;return se(n<=255,"DNS encoded label cannot exceed 255","length",n),tt($r(LG(e).map(r=>{se(r.length<=n,`label ${JSON.stringify(e)} exceeds ${n} bytes`,"name",e);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function hE(e,t){return{address:_n(e),storageKeys:t.map((n,r)=>(se(Gn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function M1(e){if(Array.isArray(e))return e.map((n,r)=>Array.isArray(n)?(se(n.length===2,"invalid slot set",`value[${r}]`,n),hE(n[0],n[1])):(se(n!=null&&typeof n=="object","invalid address-slot set","value",e),hE(n.address,n.storageKeys)));se(e!=null&&typeof e=="object","invalid access list","value",e);const t=Object.keys(e).map(n=>{const r=e[n].reduce((i,s)=>(i[s]=!0,i),{});return hE(n,Object.keys(r).sort())});return t.sort((n,r)=>n.address.localeCompare(r.address)),t}function Ade(e){let t;return typeof e=="string"?t=B2.computePublicKey(e,!1):t=e.publicKey,_n(qr("0x"+t.substring(4)).substring(26))}function Mde(e,t){return Ade(B2.recoverPublicKey(e,t))}const ki=BigInt(0),Tde=BigInt(2),Ide=BigInt(27),Nde=BigInt(28),Rde=BigInt(35),_de=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),pE=4096*32;function xL(e,t){let n=e.toString(16);for(;n.length<2;)n="0"+n;return n+=Jg(t).substring(4),"0x"+n}function _9(e){return e==="0x"?null:_n(e)}function gT(e,t){try{return M1(e)}catch(n){se(!1,n.message,t,e)}}function sy(e,t){return e==="0x"?0:zt(e,t)}function zr(e,t){if(e==="0x")return ki;const n=ot(e,t);return se(n<=_de,"value exceeds uint size",t,n),n}function Qn(e,t){const n=ot(e,"value"),r=Ms(n);return se(r.length<=32,"value too large",`tx.${t}`,n),r}function bT(e){return M1(e).map(t=>[t.address,t.storageKeys])}function Pde(e,t){se(Array.isArray(e),`invalid ${t}`,"value",e);for(let n=0;n<e.length;n++)se(Gn(e[n],32),"invalid ${ param } hash",`value[${n}]`,e[n]);return e}function Dde(e){const t=M9(e);se(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:sy(t[0],"nonce"),gasPrice:zr(t[1],"gasPrice"),gasLimit:zr(t[2],"gasLimit"),to:_9(t[3]),value:zr(t[4],"value"),data:tt(t[5]),chainId:ki};if(t.length===6)return n;const r=zr(t[6],"v"),i=zr(t[7],"r"),s=zr(t[8],"s");if(i===ki&&s===ki)n.chainId=r;else{let o=(r-Rde)/Tde;o<ki&&(o=ki),n.chainId=o,se(o!==ki||r===Ide||r===Nde,"non-canonical legacy v","v",t[6]),n.signature=xl.from({r:qh(t[7],32),s:qh(t[8],32),v:r})}return n}function Lde(e,t){const n=[Qn(e.nonce,"nonce"),Qn(e.gasPrice||0,"gasPrice"),Qn(e.gasLimit,"gasLimit"),e.to||"0x",Qn(e.value,"value"),e.data];let r=ki;if(e.chainId!=ki)r=ot(e.chainId,"tx.chainId"),se(!t||t.networkV==null||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const s=e.signature.legacyChainId;s!=null&&(r=s)}if(!t)return r!==ki&&(n.push(Ms(r)),n.push("0x"),n.push("0x")),Qh(n);let i=BigInt(27+t.yParity);return r!==ki?i=xl.getChainIdV(r,t.v):BigInt(t.v)!==i&&se(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(Ms(i)),n.push(Ms(t.r)),n.push(Ms(t.s)),Qh(n)}function yT(e,t){let n;try{if(n=sy(t[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{se(!1,"invalid yParity","yParity",t[0])}const r=qh(t[1],32),i=qh(t[2],32),s=xl.from({r,s:i,yParity:n});e.signature=s}function Ode(e){const t=M9(nn(e).slice(1));se(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",tt(e));const n={type:2,chainId:zr(t[0],"chainId"),nonce:sy(t[1],"nonce"),maxPriorityFeePerGas:zr(t[2],"maxPriorityFeePerGas"),maxFeePerGas:zr(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:zr(t[4],"gasLimit"),to:_9(t[5]),value:zr(t[6],"value"),data:tt(t[7]),accessList:gT(t[8],"accessList")};return t.length===9||yT(n,t.slice(9)),n}function jde(e,t){const n=[Qn(e.chainId,"chainId"),Qn(e.nonce,"nonce"),Qn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qn(e.maxFeePerGas||0,"maxFeePerGas"),Qn(e.gasLimit,"gasLimit"),e.to||"0x",Qn(e.value,"value"),e.data,bT(e.accessList||[])];return t&&(n.push(Qn(t.yParity,"yParity")),n.push(Ms(t.r)),n.push(Ms(t.s))),$r(["0x02",Qh(n)])}function Bde(e){const t=M9(nn(e).slice(1));se(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",tt(e));const n={type:1,chainId:zr(t[0],"chainId"),nonce:sy(t[1],"nonce"),gasPrice:zr(t[2],"gasPrice"),gasLimit:zr(t[3],"gasLimit"),to:_9(t[4]),value:zr(t[5],"value"),data:tt(t[6]),accessList:gT(t[7],"accessList")};return t.length===8||yT(n,t.slice(8)),n}function Fde(e,t){const n=[Qn(e.chainId,"chainId"),Qn(e.nonce,"nonce"),Qn(e.gasPrice||0,"gasPrice"),Qn(e.gasLimit,"gasLimit"),e.to||"0x",Qn(e.value,"value"),e.data,bT(e.accessList||[])];return t&&(n.push(Qn(t.yParity,"recoveryParam")),n.push(Ms(t.r)),n.push(Ms(t.s))),$r(["0x01",Qh(n)])}function zde(e){let t=M9(nn(e).slice(1)),n="3",r=null;if(t.length===4&&Array.isArray(t[0])){n="3 (network format)";const s=t[1],o=t[2],a=t[3];se(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),se(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),se(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),se(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),se(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let l=0;l<t[1].length;l++)r.push({data:s[l],commitment:o[l],proof:a[l]});t=t[0]}se(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${n}`,"data",tt(e));const i={type:3,chainId:zr(t[0],"chainId"),nonce:sy(t[1],"nonce"),maxPriorityFeePerGas:zr(t[2],"maxPriorityFeePerGas"),maxFeePerGas:zr(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:zr(t[4],"gasLimit"),to:_9(t[5]),value:zr(t[6],"value"),data:tt(t[7]),accessList:gT(t[8],"accessList"),maxFeePerBlobGas:zr(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(i.blobs=r),se(i.to!=null,`invalid address for transaction type: ${n}`,"data",e),se(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let s=0;s<i.blobVersionedHashes.length;s++)se(Gn(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",e);return t.length===11||yT(i,t.slice(11)),i}function $de(e,t,n){const r=[Qn(e.chainId,"chainId"),Qn(e.nonce,"nonce"),Qn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qn(e.maxFeePerGas||0,"maxFeePerGas"),Qn(e.gasLimit,"gasLimit"),e.to||j2,Qn(e.value,"value"),e.data,bT(e.accessList||[]),Qn(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Pde(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(Qn(t.yParity,"yParity")),r.push(Ms(t.r)),r.push(Ms(t.s)),n)?$r(["0x03",Qh([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):$r(["0x03",Qh(r)])}var Jl,Om,jm,Bm,Fm,zm,$m,Hm,Vm,Wm,Gm,Xm,Sh,hu,Ef,pu,Km,c3,ha;let OG=(ha=class{constructor(){be(this,Km);be(this,Jl);be(this,Om);be(this,jm);be(this,Bm);be(this,Fm);be(this,zm);be(this,$m);be(this,Hm);be(this,Vm);be(this,Wm);be(this,Gm);be(this,Xm);be(this,Sh);be(this,hu);be(this,Ef);be(this,pu);ee(this,Jl,null),ee(this,Om,null),ee(this,Bm,0),ee(this,Fm,ki),ee(this,zm,null),ee(this,$m,null),ee(this,Hm,null),ee(this,jm,"0x"),ee(this,Vm,ki),ee(this,Wm,ki),ee(this,Gm,null),ee(this,Xm,null),ee(this,Sh,null),ee(this,hu,null),ee(this,pu,null),ee(this,Ef,null)}get type(){return K(this,Jl)}set type(t){switch(t){case null:ee(this,Jl,null);break;case 0:case"legacy":ee(this,Jl,0);break;case 1:case"berlin":case"eip-2930":ee(this,Jl,1);break;case 2:case"london":case"eip-1559":ee(this,Jl,2);break;case 3:case"cancun":case"eip-4844":ee(this,Jl,3);break;default:se(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const t=K(this,Om);return t==null&&this.type===3?j2:t}set to(t){ee(this,Om,t==null?null:_n(t))}get nonce(){return K(this,Bm)}set nonce(t){ee(this,Bm,zt(t,"value"))}get gasLimit(){return K(this,Fm)}set gasLimit(t){ee(this,Fm,ot(t))}get gasPrice(){const t=K(this,zm);return t==null&&(this.type===0||this.type===1)?ki:t}set gasPrice(t){ee(this,zm,t==null?null:ot(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=K(this,$m);return t??(this.type===2||this.type===3?ki:null)}set maxPriorityFeePerGas(t){ee(this,$m,t==null?null:ot(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=K(this,Hm);return t??(this.type===2||this.type===3?ki:null)}set maxFeePerGas(t){ee(this,Hm,t==null?null:ot(t,"maxFeePerGas"))}get data(){return K(this,jm)}set data(t){ee(this,jm,tt(t))}get value(){return K(this,Vm)}set value(t){ee(this,Vm,ot(t,"value"))}get chainId(){return K(this,Wm)}set chainId(t){ee(this,Wm,ot(t))}get signature(){return K(this,Gm)||null}set signature(t){ee(this,Gm,t==null?null:xl.from(t))}get accessList(){const t=K(this,Xm)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){ee(this,Xm,t==null?null:M1(t))}get maxFeePerBlobGas(){const t=K(this,Sh);return t==null&&this.type===3?ki:t}set maxFeePerBlobGas(t){ee(this,Sh,t==null?null:ot(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=K(this,hu);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){se(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let n=0;n<t.length;n++)se(Gn(t[n],32),"invalid blobVersionedHash",`value[${n}]`,t[n])}ee(this,hu,t)}get blobs(){return K(this,pu)==null?null:K(this,pu).map(t=>Object.assign({},t))}set blobs(t){if(t==null){ee(this,pu,null);return}const n=[],r=[];for(let i=0;i<t.length;i++){const s=t[i];if(rT(s)){Se(K(this,Ef),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=nn(s);if(se(o.length<=pE,"blob is too large",`blobs[${i}]`,s),o.length!==pE){const f=new Uint8Array(pE);f.set(o),o=f}const a=K(this,Ef).blobToKzgCommitment(o),l=tt(K(this,Ef).computeBlobKzgProof(o,a));n.push({data:tt(o),commitment:tt(a),proof:l}),r.push(xL(1,a))}else{const o=tt(s.commitment);n.push({data:tt(s.data),commitment:o,proof:tt(s.proof)}),r.push(xL(1,o))}}ee(this,pu,n),ee(this,hu,r)}get kzg(){return K(this,Ef)}set kzg(t){ee(this,Ef,t)}get hash(){return this.signature==null?null:qr(Ne(this,Km,c3).call(this,!0,!1))}get unsignedHash(){return qr(this.unsignedSerialized)}get from(){return this.signature==null?null:Mde(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:B2.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Ne(this,Km,c3).call(this,!0,!0)}get unsignedSerialized(){return Ne(this,Km,c3).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=K(this,Sh)!=null||K(this,hu);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Se(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Se(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Se(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):n?s.push(2):t?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ha.from(this)}toJSON(){const t=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new ha;if(typeof t=="string"){const r=nn(t);if(r[0]>=127)return ha.from(Dde(r));switch(r[0]){case 1:return ha.from(Bde(r));case 2:return ha.from(Ode(r));case 3:return ha.from(zde(r))}Se(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new ha;return t.type!=null&&(n.type=t.type),t.to!=null&&(n.to=t.to),t.nonce!=null&&(n.nonce=t.nonce),t.gasLimit!=null&&(n.gasLimit=t.gasLimit),t.gasPrice!=null&&(n.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(n.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(n.data=t.data),t.value!=null&&(n.value=t.value),t.chainId!=null&&(n.chainId=t.chainId),t.signature!=null&&(n.signature=xl.from(t.signature)),t.accessList!=null&&(n.accessList=t.accessList),t.blobVersionedHashes!=null&&(n.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(n.kzg=t.kzg),t.blobs!=null&&(n.blobs=t.blobs),t.hash!=null&&(se(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),se(n.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(se(n.isSigned(),"unsigned transaction cannot define '.from'","tx",t),se(n.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),n}},Jl=new WeakMap,Om=new WeakMap,jm=new WeakMap,Bm=new WeakMap,Fm=new WeakMap,zm=new WeakMap,$m=new WeakMap,Hm=new WeakMap,Vm=new WeakMap,Wm=new WeakMap,Gm=new WeakMap,Xm=new WeakMap,Sh=new WeakMap,hu=new WeakMap,Ef=new WeakMap,pu=new WeakMap,Km=new WeakSet,c3=function(t,n){Se(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=t?this.signature:null;switch(this.inferType()){case 0:return Lde(this,r);case 1:return Fde(this,r);case 2:return jde(this,r);case 3:return $de(this,r,n?this.blobs:null)}Se(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},ha);const jG=new Uint8Array(32);jG.fill(0);const Hde=BigInt(-1),BG=BigInt(0),FG=BigInt(1),Vde=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Wde(e){const t=nn(e),n=t.length%32;return n?$r([t,jG.slice(n)]):tt(t)}const Gde=Ku(FG,32),Xde=Ku(BG,32),wL={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},mE=["name","version","chainId","verifyingContract","salt"];function vL(e){return function(t){return se(typeof t=="string",`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Kde={name:vL("name"),version:vL("version"),chainId:function(e){const t=ot(e,"domain.chainId");return se(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):Hp(t)},verifyingContract:function(e){try{return _n(e).toLowerCase()}catch{}se(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=nn(e,"domain.salt");return se(t.length===32,'invalid domain value "salt"',"domain.salt",e),tt(t)}};function gE(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=t[1]==="",r=parseInt(t[2]);se(r%8===0&&r!==0&&r<=256&&t[2]===String(r),"invalid numeric width","type",e);const i=J0(Vde,n?r-1:r),s=n?(i+FG)*Hde:BG;return function(o){const a=ot(o,"value");return se(a>=s&&a<=i,`value out-of-bounds for ${e}`,"value",a),Ku(n?CW(a,256):a,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return se(n!==0&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(r){const i=nn(r);return se(i.length===n,`invalid length for ${e}`,"value",r),Wde(r)}}}switch(e){case"address":return function(t){return qh(_n(t),32)};case"bool":return function(t){return t?Gde:Xde};case"bytes":return function(t){return qr(t)};case"string":return function(t){return Jh(t)}}return null}function EL(e,t){return`${e}(${t.map(({name:n,type:r})=>r+" "+n).join(",")})`}function nU(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}var Xb,kf,Ym,U9,zG;const na=class na{constructor(t){be(this,U9);fe(this,"primaryType");be(this,Xb);be(this,kf);be(this,Ym);ee(this,kf,new Map),ee(this,Ym,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(t).forEach(l=>{s[l]=t[l].map(({name:f,type:c})=>{let{base:d,index:u}=nU(c);return d==="int"&&!t.int&&(d="int256"),d==="uint"&&!t.uint&&(d="uint256"),{name:f,type:d+(u||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),ee(this,Xb,JSON.stringify(s));for(const l in s){const f=new Set;for(const c of s[l]){se(!f.has(c.name),`duplicate variable name ${JSON.stringify(c.name)} in ${JSON.stringify(l)}`,"types",t),f.add(c.name);const d=nU(c.type).base;se(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",t),!gE(d)&&(se(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",t),r.get(d).push(l),n.get(l).add(d))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);se(o.length!==0,"missing primary type","types",t),se(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",t),yt(this,{primaryType:o[0]});function a(l,f){se(!f.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",t),f.add(l);for(const c of n.get(l))if(r.has(c)){a(c,f);for(const d of f)i.get(d).add(c)}f.delete(l)}a(this.primaryType,new Set);for(const[l,f]of i){const c=Array.from(f);c.sort(),K(this,kf).set(l,EL(l,s[l])+c.map(d=>EL(d,s[d])).join(""))}}get types(){return JSON.parse(K(this,Xb))}getEncoder(t){let n=K(this,Ym).get(t);return n||(n=Ne(this,U9,zG).call(this,t),K(this,Ym).set(t,n)),n}encodeType(t){const n=K(this,kf).get(t);return se(n,`unknown type: ${JSON.stringify(t)}`,"name",t),n}encodeData(t,n){return this.getEncoder(t)(n)}hashStruct(t,n){return qr(this.encodeData(t,n))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,n,r){if(gE(t))return r(t,n);const i=nU(t).array;if(i)return se(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[t];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});se(!1,`unknown type: ${t}`,"type",t)}visit(t,n){return this._visit(this.primaryType,t,n)}static from(t){return new na(t)}static getPrimaryType(t){return na.from(t).primaryType}static hashStruct(t,n,r){return na.from(n).hashStruct(t,r)}static hashDomain(t){const n=[];for(const r in t){if(t[r]==null)continue;const i=wL[r];se(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),n.push({name:r,type:i})}return n.sort((r,i)=>mE.indexOf(r.name)-mE.indexOf(i.name)),na.hashStruct("EIP712Domain",{EIP712Domain:n},t)}static encode(t,n,r){return $r(["0x1901",na.hashDomain(t),na.from(n).hash(r)])}static hash(t,n,r){return qr(na.encode(t,n,r))}static async resolveNames(t,n,r,i){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const s={};t.verifyingContract&&!Gn(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const o=na.from(n);o.visit(r,(a,l)=>(a==="address"&&!Gn(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:t,value:r}}static getPayload(t,n,r){na.hashDomain(t);const i={},s=[];mE.forEach(l=>{const f=t[l];f!=null&&(i[l]=Kde[l](f),s.push({name:l,type:wL[l]}))});const o=na.from(n);n=o.types;const a=Object.assign({},n);return se(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,f)=>{if(l.match(/^bytes(\d*)/))return tt(nn(f));if(l.match(/^u?int/))return ot(f).toString();switch(l){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return se(typeof f=="string","invalid string","value",f),f}se(!1,"unsupported type","type",l)})}}};Xb=new WeakMap,kf=new WeakMap,Ym=new WeakMap,U9=new WeakSet,zG=function(t){{const i=gE(t);if(i)return i}const n=nU(t).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{se(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return K(this,kf).has(i)&&(a=a.map(qr)),qr($r(a))}}const r=this.types[t];if(r){const i=Jh(K(this,kf).get(t));return s=>{const o=r.map(({name:a,type:l})=>{const f=this.getEncoder(l)(s[a]);return K(this,kf).has(l)?qr(f):f});return o.unshift(i),$r(o)}}se(!1,`unknown type: ${t}`,"type",t)};let bx=na;function Ns(e){const t=new Set;return e.forEach(n=>t.add(n)),Object.freeze(t)}const Yde="external public payable override",Zde=Ns(Yde.split(" ")),$G="constant external internal payable private public pure view override",qde=Ns($G.split(" ")),HG="constructor error event fallback function receive struct",VG=Ns(HG.split(" ")),WG="calldata memory storage payable indexed",Qde=Ns(WG.split(" ")),Jde="tuple returns",eue=[HG,WG,Jde,$G].join(" "),tue=Ns(eue.split(" ")),nue={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},rue=new RegExp("^(\\s*)"),iue=new RegExp("^([0-9]+)"),sue=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),GG=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),XG=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var ji,Qa,Kb,uC;const x9=class x9{constructor(t){be(this,Kb);be(this,ji);be(this,Qa);ee(this,ji,0),ee(this,Qa,t.slice())}get offset(){return K(this,ji)}get length(){return K(this,Qa).length-K(this,ji)}clone(){return new x9(K(this,Qa))}reset(){ee(this,ji,0)}popKeyword(t){const n=this.peek();if(n.type!=="KEYWORD"||!t.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const n=this.peek();throw new Error(`expected ${t}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const n=Ne(this,Kb,uC).call(this,K(this,ji)+1,t.match+1);return ee(this,ji,t.match+1),n}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;K(this,ji)<t.match-1;){const r=this.peek().linkNext;n.push(Ne(this,Kb,uC).call(this,K(this,ji)+1,r)),ee(this,ji,r)}return ee(this,ji,t.match+1),n}peek(){if(K(this,ji)>=K(this,Qa).length)throw new Error("out-of-bounds");return K(this,Qa)[K(this,ji)]}peekKeyword(t){const n=this.peekType("KEYWORD");return n!=null&&t.has(n)?n:null}peekType(t){if(this.length===0)return null;const n=this.peek();return n.type===t?n.text:null}pop(){const t=this.peek();return Z6(this,ji)._++,t}toString(){const t=[];for(let n=K(this,ji);n<K(this,Qa).length;n++){const r=K(this,Qa)[n];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}};ji=new WeakMap,Qa=new WeakMap,Kb=new WeakSet,uC=function(t=0,n=0){return new x9(K(this,Qa).slice(t,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-t,linkBack:r.linkBack-t,linkNext:r.linkNext-t}))))};let wl=x9;function s0(e){const t=[],n=o=>{const a=s<e.length?JSON.stringify(e[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<e.length;){let o=e.substring(s),a=o.match(rue);a&&(s+=a[1].length,o=e.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(l);let f=nue[o[0]]||"";if(f){if(l.type=f,l.text=o[0],s++,f==="OPEN_PAREN")r.push(t.length-1),i.push(t.length-1);else if(f=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1;else if(f==="COMMA")l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1,i.push(t.length-1);else if(f==="OPEN_BRACKET")l.type="BRACKET";else if(f==="CLOSE_BRACKET"){let c=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const d=t.pop().text;c=d+c,t[t.length-1].value=zt(d)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=c}continue}if(a=o.match(sue),a){if(l.text=a[1],s+=l.text.length,tue.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(XG)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(iue),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new wl(t.map(o=>Object.freeze(o)))}function kL(e,t){let n=[];for(const r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function P9(e,t){if(t.peekKeyword(VG)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function Wf(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(r==null||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function KG(e){let t=Wf(e,qde);return kL(t,Ns("constant payable nonpayable".split(" "))),kL(t,Ns("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function Ff(e,t){return e.popParams().map(n=>Xi.from(n,t))}function YG(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return ot(e.pop().text);throw new Error("invalid gas")}return null}function e1(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const oue=new RegExp(/^(.*)\[([0-9]*)\]$/);function SL(e){const t=e.match(XG);if(se(t,"invalid type","type",e),e==="uint")return"uint256";if(e==="int")return"int256";if(t[2]){const n=parseInt(t[2]);se(n!==0&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);se(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",e)}return e}const Ur={},po=Symbol.for("_ethers_internal"),CL="_ParamTypeInternal",AL="_ErrorInternal",ML="_EventInternal",TL="_ConstructorInternal",IL="_FallbackInternal",NL="_FunctionInternal",RL="_StructInternal";var Zm,f3;const ra=class ra{constructor(t,n,r,i,s,o,a,l){be(this,Zm);fe(this,"name");fe(this,"type");fe(this,"baseType");fe(this,"indexed");fe(this,"components");fe(this,"arrayLength");fe(this,"arrayChildren");if(ry(t,Ur,"ParamType"),Object.defineProperty(this,po,{value:CL}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");yt(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(t){if(t==null&&(t="sighash"),t==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(t)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(t),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(t)).join(t==="full"?", ":",")+")":n+=this.type,t!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),t==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,n){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,t)}async walkAsync(t,n){const r=[],i=[t];return Ne(this,Zm,f3).call(this,r,t,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(t,n){if(ra.isParamType(t))return t;if(typeof t=="string")try{return ra.from(s0(t),n)}catch{se(!1,"invalid param type","obj",t)}else if(t instanceof wl){let a="",l="",f=null;Wf(t,Ns(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(l="tuple",f=t.popParams().map(y=>ra.from(y)),a=`tuple(${f.map(y=>y.format()).join(",")})`):(a=SL(t.popType("TYPE")),l=a);let c=null,d=null;for(;t.length&&t.peekType("BRACKET");){const y=t.pop();c=new ra(Ur,"",a,l,null,f,d,c),d=y.value,a+=y.text,l="array",f=null}let u=null;if(Wf(t,Qde).has("indexed")){if(!n)throw new Error("");u=!0}const g=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new ra(Ur,g,a,l,u,f,d,c)}const r=t.name;se(!r||typeof r=="string"&&r.match(GG),"invalid name","obj.name",r);let i=t.indexed;i!=null&&(se(n,"parameter cannot be indexed","obj.indexed",t.indexed),i=!!i);let s=t.type,o=s.match(oue);if(o){const a=parseInt(o[2]||"-1"),l=ra.from({type:o[1],components:t.components});return new ra(Ur,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=t.components!=null?t.components.map(f=>ra.from(f)):null;return new ra(Ur,r||"",s,"tuple",i,a,null,null)}return s=SL(t.type),new ra(Ur,r||"",s,s,i,null,null,null)}static isParamType(t){return t&&t[po]===CL}};Zm=new WeakSet,f3=function(t,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,f)=>{var c;Ne(c=o,Zm,f3).call(c,t,l,r,d=>{a[f]=d})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,f)=>{var c;Ne(c=o[f],Zm,f3).call(c,t,l,r,d=>{a[f]=d})}),i(a);return}const s=r(this.type,n);s.then?t.push(async function(){i(await s)}()):i(s)};let Xi=ra,D9=class hC{constructor(t,n,r){fe(this,"type");fe(this,"inputs");ry(t,Ur,"Fragment"),r=Object.freeze(r.slice()),yt(this,{type:n,inputs:r})}static from(t){if(typeof t=="string"){try{hC.from(JSON.parse(t))}catch{}return hC.from(s0(t))}if(t instanceof wl)switch(t.peekKeyword(VG)){case"constructor":return _f.from(t);case"error":return no.from(t);case"event":return lc.from(t);case"fallback":case"receive":return mf.from(t);case"function":return cc.from(t);case"struct":return Dh.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return _f.from(t);case"error":return no.from(t);case"event":return lc.from(t);case"fallback":case"receive":return mf.from(t);case"function":return cc.from(t);case"struct":return Dh.from(t)}Se(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}se(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return _f.isFragment(t)}static isError(t){return no.isFragment(t)}static isEvent(t){return lc.isFragment(t)}static isFunction(t){return cc.isFragment(t)}static isStruct(t){return Dh.isFragment(t)}};class L9 extends D9{constructor(n,r,i,s){super(n,r,s);fe(this,"name");se(typeof i=="string"&&i.match(GG),"invalid identifier","name",i),s=Object.freeze(s.slice()),yt(this,{name:i})}}function V2(e,t){return"("+t.map(n=>n.format(e)).join(e==="full"?", ":",")+")"}class no extends L9{constructor(t,n,r){super(t,"error",n,r),Object.defineProperty(this,po,{value:AL})}get selector(){return Jh(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(t)))});const n=[];return t!=="sighash"&&n.push("error"),n.push(this.name+V2(t,this.inputs)),n.join(" ")}static from(t){if(no.isFragment(t))return t;if(typeof t=="string")return no.from(s0(t));if(t instanceof wl){const n=P9("error",t),r=Ff(t);return e1(t),new no(Ur,n,r)}return new no(Ur,t.name,t.inputs?t.inputs.map(Xi.from):[])}static isFragment(t){return t&&t[po]===AL}}class lc extends L9{constructor(n,r,i,s){super(n,"event",r,i);fe(this,"anonymous");Object.defineProperty(this,po,{value:ML}),yt(this,{anonymous:s})}get topicHash(){return Jh(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+V2(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>Xi.from(s)),new lc(Ur,n,r,!1).topicHash}static from(n){if(lc.isFragment(n))return n;if(typeof n=="string")try{return lc.from(s0(n))}catch{se(!1,"invalid event fragment","obj",n)}else if(n instanceof wl){const r=P9("event",n),i=Ff(n,!0),s=!!Wf(n,Ns(["anonymous"])).has("anonymous");return e1(n),new lc(Ur,r,i,s)}return new lc(Ur,n.name,n.inputs?n.inputs.map(r=>Xi.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[po]===ML}}class _f extends D9{constructor(n,r,i,s,o){super(n,r,i);fe(this,"payable");fe(this,"gas");Object.defineProperty(this,po,{value:TL}),yt(this,{payable:s,gas:o})}format(n){if(Se(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${V2(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(_f.isFragment(n))return n;if(typeof n=="string")try{return _f.from(s0(n))}catch{se(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof wl){Wf(n,Ns(["constructor"]));const r=Ff(n),i=!!Wf(n,Zde).has("payable"),s=YG(n);return e1(n),new _f(Ur,"constructor",r,i,s)}return new _f(Ur,"constructor",n.inputs?n.inputs.map(Xi.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[po]===TL}}class mf extends D9{constructor(n,r,i){super(n,"fallback",r);fe(this,"payable");Object.defineProperty(this,po,{value:IL}),yt(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(mf.isFragment(n))return n;if(typeof n=="string")try{return mf.from(s0(n))}catch{se(!1,"invalid fallback fragment","obj",n)}else if(n instanceof wl){const r=n.toString(),i=n.peekKeyword(Ns(["fallback","receive"]));if(se(i,"type must be fallback or receive","obj",r),n.popKeyword(Ns(["fallback","receive"]))==="receive"){const l=Ff(n);return se(l.length===0,"receive cannot have arguments","obj.inputs",l),Wf(n,Ns(["payable"])),e1(n),new mf(Ur,[],!0)}let o=Ff(n);o.length?se(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[Xi.from("bytes")];const a=KG(n);if(se(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Wf(n,Ns(["returns"])).has("returns")){const l=Ff(n);se(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(f=>f.format("minimal")).join(", "))}return e1(n),new mf(Ur,o,a==="payable")}if(n.type==="receive")return new mf(Ur,[],!0);if(n.type==="fallback"){const r=[Xi.from("bytes")],i=n.stateMutability==="payable";return new mf(Ur,r,i)}se(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[po]===IL}}class cc extends L9{constructor(n,r,i,s,o,a){super(n,"function",r,s);fe(this,"constant");fe(this,"outputs");fe(this,"stateMutability");fe(this,"payable");fe(this,"gas");Object.defineProperty(this,po,{value:NL}),o=Object.freeze(o.slice()),yt(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return Jh(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+V2(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(V2(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>Xi.from(s)),new cc(Ur,n,"view",r,[],null).selector}static from(n){if(cc.isFragment(n))return n;if(typeof n=="string")try{return cc.from(s0(n))}catch{se(!1,"invalid function fragment","obj",n)}else if(n instanceof wl){const i=P9("function",n),s=Ff(n),o=KG(n);let a=[];Wf(n,Ns(["returns"])).has("returns")&&(a=Ff(n));const l=YG(n);return e1(n),new cc(Ur,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new cc(Ur,n.name,r,n.inputs?n.inputs.map(Xi.from):[],n.outputs?n.outputs.map(Xi.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[po]===NL}}class Dh extends L9{constructor(t,n,r){super(t,"struct",n,r),Object.defineProperty(this,po,{value:RL})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return Dh.from(s0(t))}catch{se(!1,"invalid struct fragment","obj",t)}else if(t instanceof wl){const n=P9("struct",t),r=Ff(t);return e1(t),new Dh(Ur,n,r)}return new Dh(Ur,t.name,t.inputs?t.inputs.map(Xi.from):[])}static isFragment(t){return t&&t[po]===RL}}const Ml=new Map;Ml.set(0,"GENERIC_PANIC");Ml.set(1,"ASSERT_FALSE");Ml.set(17,"OVERFLOW");Ml.set(18,"DIVIDE_BY_ZERO");Ml.set(33,"ENUM_RANGE_ERROR");Ml.set(34,"BAD_STORAGE_DATA");Ml.set(49,"STACK_UNDERFLOW");Ml.set(50,"ARRAY_RANGE_ERROR");Ml.set(65,"OUT_OF_MEMORY");Ml.set(81,"UNINITIALIZED_FUNCTION_CALL");const aue=new RegExp(/^bytes([0-9]*)$/),lue=new RegExp(/^(u?int)([0-9]*)$/);let bE=null,_L=1024;function cue(e,t,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const f=nn(n);if(n=tt(n),f.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(f.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(tt(f.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],f.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(tt(f.slice(0,4))==="0x4e487b71")try{const c=Number(r.decode(["uint256"],f.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[c]},s=`Panic due to ${Ml.get(c)||"UNKNOWN"}(${c})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:t.to?_n(t.to):null,data:t.data||"0x"};return t.from&&(l.from=_n(t.from)),Rr(i,"CALL_EXCEPTION",{action:e,data:n,reason:s,transaction:l,invocation:o,revert:a})}var mu,_p;const w9=class w9{constructor(){be(this,mu)}getDefaultValue(t){const n=t.map(i=>Ne(this,mu,_p).call(this,Xi.from(i)));return new tU(n,"_").defaultValue()}encode(t,n){EW(n.length,t.length,"types/values length mismatch");const r=t.map(o=>Ne(this,mu,_p).call(this,Xi.from(o))),i=new tU(r,"_"),s=new QS;return i.encode(s,n),s.data}decode(t,n,r){const i=t.map(o=>Ne(this,mu,_p).call(this,Xi.from(o)));return new tU(i,"_").decode(new JS(n,r,_L))}static _setDefaultMaxInflation(t){se(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),_L=t}static defaultAbiCoder(){return bE==null&&(bE=new w9),bE}static getBuiltinCallException(t,n,r){return cue(t,n,r,w9.defaultAbiCoder())}};mu=new WeakSet,_p=function(t){if(t.isArray())return new Rfe(Ne(this,mu,_p).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new tU(t.components.map(r=>Ne(this,mu,_p).call(this,r)),t.name);switch(t.baseType){case"address":return new Ife(t.name);case"bool":return new _fe(t.name);case"string":return new $fe(t.name);case"bytes":return new Pfe(t.name);case"":return new Ofe(t.name)}let n=t.type.match(lue);if(n){let r=parseInt(n[2]||"256");return se(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",t),new zfe(r/8,n[1]==="int",t.name)}if(n=t.type.match(aue),n){let r=parseInt(n[1]);return se(r!==0&&r<=32,"invalid bytes length","param",t),new Dfe(r,t.name)}se(!1,"invalid type","type",t.type)};let W2=w9;class fue{constructor(t,n,r){fe(this,"fragment");fe(this,"name");fe(this,"signature");fe(this,"topic");fe(this,"args");const i=t.name,s=t.format();yt(this,{fragment:t,name:i,signature:s,topic:n,args:r})}}class due{constructor(t,n,r,i){fe(this,"fragment");fe(this,"name");fe(this,"args");fe(this,"signature");fe(this,"selector");fe(this,"value");const s=t.name,o=t.format();yt(this,{fragment:t,name:s,args:r,signature:o,selector:n,value:i})}}class uue{constructor(t,n,r){fe(this,"fragment");fe(this,"name");fe(this,"args");fe(this,"signature");fe(this,"selector");const i=t.name,s=t.format();yt(this,{fragment:t,name:i,args:r,signature:s,selector:n})}}class PL{constructor(t){fe(this,"hash");fe(this,"_isIndexed");yt(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const DL={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},LL={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&DL[e.toString()]&&(t=DL[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};var ec,tc,nc,es,wc,d3,u3;const Q0=class Q0{constructor(t){be(this,wc);fe(this,"fragments");fe(this,"deploy");fe(this,"fallback");fe(this,"receive");be(this,ec);be(this,tc);be(this,nc);be(this,es);let n=[];typeof t=="string"?n=JSON.parse(t):n=t,ee(this,nc,new Map),ee(this,ec,new Map),ee(this,tc,new Map);const r=[];for(const o of n)try{r.push(D9.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}yt(this,{fragments:Object.freeze(r)});let i=null,s=!1;ee(this,es,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}yt(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(se(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=K(this,nc);break;case"event":l=K(this,tc);break;case"error":l=K(this,ec);break;default:return}const f=o.format();l.has(f)||l.set(f,o)}),this.deploy||yt(this,{deploy:_f.from("constructor()")}),yt(this,{fallback:i,receive:s})}format(t){const n=t?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const t=this.fragments.map(n=>n.format("json"));return JSON.stringify(t.map(n=>JSON.parse(n)))}getAbiCoder(){return W2.defaultAbiCoder()}getFunctionName(t){const n=Ne(this,wc,d3).call(this,t,null,!1);return se(n,"no matching function","key",t),n.name}hasFunction(t){return!!Ne(this,wc,d3).call(this,t,null,!1)}getFunction(t,n){return Ne(this,wc,d3).call(this,t,n||null,!0)}forEachFunction(t){const n=Array.from(K(this,nc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(K(this,nc).get(i),r)}}getEventName(t){const n=Ne(this,wc,u3).call(this,t,null,!1);return se(n,"no matching event","key",t),n.name}hasEvent(t){return!!Ne(this,wc,u3).call(this,t,null,!1)}getEvent(t,n){return Ne(this,wc,u3).call(this,t,n||null,!0)}forEachEvent(t){const n=Array.from(K(this,tc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(K(this,tc).get(i),r)}}getError(t,n){if(Gn(t)){const i=t.toLowerCase();if(LL[i])return no.from(LL[i].signature);for(const s of K(this,ec).values())if(i===s.selector)return s;return null}if(t.indexOf("(")===-1){const i=[];for(const[s,o]of K(this,ec))s.split("(")[0]===t&&i.push(o);if(i.length===0)return t==="Error"?no.from("error Error(string)"):t==="Panic"?no.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");se(!1,`ambiguous error description (i.e. ${s})`,"name",t)}return i[0]}if(t=no.from(t).format(),t==="Error(string)")return no.from("error Error(string)");if(t==="Panic(uint256)")return no.from("error Panic(uint256)");const r=K(this,ec).get(t);return r||null}forEachError(t){const n=Array.from(K(this,ec).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(K(this,ec).get(i),r)}}_decodeParams(t,n){return K(this,es).decode(t,n)}_encodeParams(t,n){return K(this,es).encode(t,n)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,n){if(typeof t=="string"){const r=this.getError(t);se(r,"unknown error","fragment",t),t=r}return se(_r(n,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",n),this._decodeParams(t.inputs,_r(n,4))}encodeErrorResult(t,n){if(typeof t=="string"){const r=this.getError(t);se(r,"unknown error","fragment",t),t=r}return $r([t.selector,this._encodeParams(t.inputs,n||[])])}decodeFunctionData(t,n){if(typeof t=="string"){const r=this.getFunction(t);se(r,"unknown function","fragment",t),t=r}return se(_r(n,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",n),this._decodeParams(t.inputs,_r(n,4))}encodeFunctionData(t,n){if(typeof t=="string"){const r=this.getFunction(t);se(r,"unknown function","fragment",t),t=r}return $r([t.selector,this._encodeParams(t.inputs,n||[])])}decodeFunctionResult(t,n){if(typeof t=="string"){const s=this.getFunction(t);se(s,"unknown function","fragment",t),t=s}let r="invalid length for result data";const i=As(n);if(i.length%32===0)try{return K(this,es).decode(t.outputs,i)}catch{r="could not decode result data"}Se(!1,r,"BAD_DATA",{value:tt(i),info:{method:t.name,signature:t.format()}})}makeError(t,n){const r=nn(t,"data"),i=W2.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=tt(r.slice(0,4)),l=this.getError(a);if(l)try{const f=K(this,es).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:f},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(t,n){if(typeof t=="string"){const r=this.getFunction(t);se(r,"unknown function","fragment",t),t=r}return tt(K(this,es).encode(t.outputs,n||[]))}encodeFilterTopics(t,n){if(typeof t=="string"){const s=this.getEvent(t);se(s,"unknown event","eventFragment",t),t=s}Se(n.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const i=(s,o)=>s.type==="string"?Jh(o):s.type==="bytes"?qr(tt(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=Ku(o):s.type.match(/^bytes/)?o=Rle(o,32):s.type==="address"&&K(this,es).encode(["address"],[o]),qh(tt(o),32));for(n.forEach((s,o)=>{const a=t.inputs[o];if(!a.indexed){se(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?se(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(t,n){if(typeof t=="string"){const o=this.getEvent(t);se(o,"unknown event","eventFragment",t),t=o}const r=[],i=[],s=[];return t.anonymous||r.push(t.topicHash),se(n.length===t.inputs.length,"event arguments/values mismatch","values",n),t.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(Jh(l));else if(o.type==="bytes")r.push(qr(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(K(this,es).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:K(this,es).encode(i,s),topics:r}}decodeEventLog(t,n,r){if(typeof t=="string"){const h=this.getEvent(t);se(h,"unknown event","eventFragment",t),t=h}if(r!=null&&!t.anonymous){const h=t.topicHash;se(Gn(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];t.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(Xi.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=r!=null?K(this,es).decode(i,$r(r)):null,l=K(this,es).decode(s,n,!0),f=[],c=[];let d=0,u=0;return t.inputs.forEach((h,g)=>{let y=null;if(h.indexed)if(a==null)y=new PL(null);else if(o[g])y=new PL(a[u++]);else try{y=a[u++]}catch(U){y=U}else try{y=l[d++]}catch(U){y=U}f.push(y),c.push(h.name||null)}),dg.fromItems(f,c)}parseTransaction(t){const n=nn(t.data,"tx.data"),r=ot(t.value!=null?t.value:0,"tx.value"),i=this.getFunction(tt(n.slice(0,4)));if(!i)return null;const s=K(this,es).decode(i.inputs,n.slice(4));return new due(i,i.selector,s,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const n=this.getEvent(t.topics[0]);return!n||n.anonymous?null:new fue(n,n.topicHash,this.decodeEventLog(n,t.data,t.topics))}parseError(t){const n=tt(t),r=this.getError(_r(n,0,4));if(!r)return null;const i=K(this,es).decode(r.inputs,_r(n,4));return new uue(r,r.selector,i)}static from(t){return t instanceof Q0?t:typeof t=="string"?new Q0(JSON.parse(t)):typeof t.formatJson=="function"?new Q0(t.formatJson()):typeof t.format=="function"?new Q0(t.format("json")):new Q0(t)}};ec=new WeakMap,tc=new WeakMap,nc=new WeakMap,es=new WeakMap,wc=new WeakSet,d3=function(t,n,r){if(Gn(t)){const s=t.toLowerCase();for(const o of K(this,nc).values())if(s===o.selector)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of K(this,nc))o.split("(")[0]===t&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;ds.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let f=s.length-1;f>=0;f--){const c=s[f].inputs.length;c!==a&&(!l||c!==a-1)&&s.splice(f,1)}for(let f=s.length-1;f>=0;f--){const c=s[f].inputs;for(let d=0;d<n.length;d++)if(ds.isTyped(n[d])){if(d>=c.length){if(n[d].type==="overrides")continue;s.splice(f,1);break}if(n[d].type!==c[d].baseType){s.splice(f,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");se(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return s[0]}const i=K(this,nc).get(cc.from(t).format());return i||null},u3=function(t,n,r){if(Gn(t)){const s=t.toLowerCase();for(const o of K(this,tc).values())if(s===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of K(this,tc))o.split("(")[0]===t&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(ds.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");se(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return s[0]}const i=K(this,tc).get(lc.from(t).format());return i||null};let pC=Q0;const ZG=BigInt(0);function fm(e){return e??null}function Br(e){return e==null?null:e.toString()}class OL{constructor(t,n,r){fe(this,"gasPrice");fe(this,"maxFeePerGas");fe(this,"maxPriorityFeePerGas");yt(this,{gasPrice:fm(t),maxFeePerGas:fm(n),maxPriorityFeePerGas:fm(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Br(t),maxFeePerGas:Br(n),maxPriorityFeePerGas:Br(r)}}}function yx(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=tt(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in e)||e[i]==null||(t[i]=ot(e[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in e)||e[i]==null||(t[i]=zt(e[i],`request.${i}`));return e.accessList&&(t.accessList=M1(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(i=>rT(i)?tt(i):Object.assign({},i))),t}var Sf;class hue{constructor(t,n){fe(this,"provider");fe(this,"number");fe(this,"hash");fe(this,"timestamp");fe(this,"parentHash");fe(this,"parentBeaconBlockRoot");fe(this,"nonce");fe(this,"difficulty");fe(this,"gasLimit");fe(this,"gasUsed");fe(this,"stateRoot");fe(this,"receiptsRoot");fe(this,"blobGasUsed");fe(this,"excessBlobGas");fe(this,"miner");fe(this,"prevRandao");fe(this,"extraData");fe(this,"baseFeePerGas");be(this,Sf);ee(this,Sf,t.transactions.map(r=>typeof r!="string"?new G2(r,n):r)),yt(this,{provider:n,hash:fm(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:fm(t.prevRandao),extraData:t.extraData,baseFeePerGas:fm(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return K(this,Sf).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=K(this,Sf).slice();return t.length===0?[]:(Se(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:f,number:c,parentHash:d,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:g,timestamp:y,transactions:U}=this;return{_type:"Block",baseFeePerGas:Br(t),difficulty:Br(n),extraData:r,gasLimit:Br(i),gasUsed:Br(s),blobGasUsed:Br(this.blobGasUsed),excessBlobGas:Br(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:f,number:c,parentHash:d,timestamp:y,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:g,transactions:U}}[Symbol.iterator](){let t=0;const n=this.transactions;return{next:()=>t<this.length?{value:n[t++],done:!1}:{value:void 0,done:!0}}}get length(){return K(this,Sf).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let n;if(typeof t=="number")n=K(this,Sf)[t];else{const r=t.toLowerCase();for(const i of K(this,Sf))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash===r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(t){const n=this.prefetchedTransactions;if(typeof t=="number")return n[t];t=t.toLowerCase();for(const r of n)if(r.hash===t)return r;se(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return pue(this)}}Sf=new WeakMap;class oy{constructor(t,n){fe(this,"provider");fe(this,"transactionHash");fe(this,"blockHash");fe(this,"blockNumber");fe(this,"removed");fe(this,"address");fe(this,"data");fe(this,"topics");fe(this,"index");fe(this,"transactionIndex");this.provider=n;const r=Object.freeze(t.topics.slice());yt(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:f}=this;return{_type:"log",address:t,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:f}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return Se(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return Se(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return Se(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return mue(this)}}var Yb;class qG{constructor(t,n){fe(this,"provider");fe(this,"to");fe(this,"from");fe(this,"contractAddress");fe(this,"hash");fe(this,"index");fe(this,"blockHash");fe(this,"blockNumber");fe(this,"logsBloom");fe(this,"gasUsed");fe(this,"blobGasUsed");fe(this,"cumulativeGasUsed");fe(this,"gasPrice");fe(this,"blobGasPrice");fe(this,"type");fe(this,"status");fe(this,"root");be(this,Yb);ee(this,Yb,Object.freeze(t.logs.map(i=>new oy(i,n))));let r=ZG;t.effectiveGasPrice!=null?r=t.effectiveGasPrice:t.gasPrice!=null&&(r=t.gasPrice),yt(this,{provider:n,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return K(this,Yb)}toJSON(){const{to:t,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:f,status:c,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Br(this.cumulativeGasUsed),from:n,gasPrice:Br(this.gasPrice),blobGasUsed:Br(this.blobGasUsed),blobGasPrice:Br(this.blobGasPrice),gasUsed:Br(this.gasUsed),hash:i,index:s,logs:f,logsBloom:l,root:d,status:c,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return JG(this)}reorderedEvent(t){return Se(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),QG(this,t)}}Yb=new WeakMap;var gu;const i_=class i_{constructor(t,n){fe(this,"provider");fe(this,"blockNumber");fe(this,"blockHash");fe(this,"index");fe(this,"hash");fe(this,"type");fe(this,"to");fe(this,"from");fe(this,"nonce");fe(this,"gasLimit");fe(this,"gasPrice");fe(this,"maxPriorityFeePerGas");fe(this,"maxFeePerGas");fe(this,"maxFeePerBlobGas");fe(this,"data");fe(this,"value");fe(this,"chainId");fe(this,"signature");fe(this,"accessList");fe(this,"blobVersionedHashes");be(this,gu);this.provider=n,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,ee(this,gu,-1)}toJSON(){const{blockNumber:t,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:f,signature:c,accessList:d,blobVersionedHashes:u}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:t,blockHash:n,blobVersionedHashes:u,chainId:Br(this.chainId),data:f,from:a,gasLimit:Br(this.gasLimit),gasPrice:Br(this.gasPrice),hash:i,maxFeePerGas:Br(this.maxFeePerGas),maxPriorityFeePerGas:Br(this.maxPriorityFeePerGas),maxFeePerBlobGas:Br(this.maxFeePerBlobGas),nonce:l,signature:c,to:o,index:r,type:s,value:Br(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const r=await this.getTransaction();r&&(t=r.blockNumber)}if(t==null)return null;const n=this.provider.getBlock(t);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Cs({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,n){const r=t??1,i=n??0;let s=K(this,gu),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:u,nonce:h}=await Cs({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=u;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=s-3,o<K(this,gu)&&(o=K(this,gu)));o<=u;){if(a)return null;const y=await this.provider.getBlock(o,!0);if(y==null)return;for(const U of y)if(U===this.hash)return;for(let U=0;U<y.length;U++){const x=await y.getTransaction(U);if(x.from===this.from&&x.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(x.hash);if(v==null||u-v.blockNumber+1<r)return;let E="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?E="repriced":x.data==="0x"&&x.from===x.to&&x.value===ZG&&(E="cancelled"),Se(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:x.replaceableTransaction(s),hash:x.hash,receipt:v})}}o++}},f=u=>{if(u==null||u.status!==0)return u;Se(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:u.to,from:u.from,data:""},receipt:u})},c=await this.provider.getTransactionReceipt(this.hash);if(r===0)return f(c);if(c){if(await c.confirmations()>=r)return f(c)}else if(await l(),r===0)return null;return await new Promise((u,h)=>{const g=[],y=()=>{g.forEach(x=>x())};if(g.push(()=>{a=!0}),i>0){const x=setTimeout(()=>{y(),h(Rr("wait for transaction timeout","TIMEOUT"))},i);g.push(()=>{clearTimeout(x)})}const U=async x=>{if(await x.confirmations()>=r){y();try{u(f(x))}catch(v){h(v)}}};if(g.push(()=>{this.provider.off(this.hash,U)}),this.provider.on(this.hash,U),s>=0){const x=async()=>{try{await l()}catch(v){if(ls(v,"TRANSACTION_REPLACED")){y(),h(v);return}}a||this.provider.once("block",x)};g.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Se(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),JG(this)}reorderedEvent(t){return Se(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Se(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),QG(this,t)}replaceableTransaction(t){se(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const n=new i_(this,this.provider);return ee(n,gu,t),n}};gu=new WeakMap;let G2=i_;function pue(e){return{orphan:"drop-block",hash:e.hash,number:e.number}}function QG(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function JG(e){return{orphan:"drop-transaction",tx:e}}function mue(e){return{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}class UT extends oy{constructor(n,r,i){super(n,n.provider);fe(this,"interface");fe(this,"fragment");fe(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);yt(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class eX extends oy{constructor(n,r){super(n,n.provider);fe(this,"error");yt(this,{error:r})}}var qm;class gue extends qG{constructor(n,r,i){super(i,r);be(this,qm);ee(this,qm,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?K(this,qm).getEvent(n.topics[0]):null;if(r)try{return new UT(n,K(this,qm),r)}catch(i){return new eX(n,i)}return n})}}qm=new WeakMap;var Zb;class xT extends G2{constructor(n,r,i){super(i,r);be(this,Zb);ee(this,Zb,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new gue(K(this,Zb),this.provider,i)}}Zb=new WeakMap;class tX extends AW{constructor(n,r,i,s){super(n,r,i);fe(this,"log");yt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class bue extends tX{constructor(t,n,r,i,s){super(t,n,r,new UT(s,t.interface,i));const o=t.interface.decodeEventLog(i,this.log.data,this.log.topics);yt(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const jL=BigInt(0);function nX(e){return e&&typeof e.call=="function"}function rX(e){return e&&typeof e.estimateGas=="function"}function O9(e){return e&&typeof e.resolveName=="function"}function iX(e){return e&&typeof e.sendTransaction=="function"}function sX(e){if(e!=null){if(O9(e))return e;if(e.provider)return e.provider}}var qb;class yue{constructor(t,n,r){be(this,qb);fe(this,"fragment");if(yt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=t1(t.runner,"resolveName"),s=O9(i)?i:null;ee(this,qb,async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(c,d)=>c==="address"?Array.isArray(d)?Promise.all(d.map(u=>Is(u,s))):Is(d,s):d)));return t.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return K(this,qb)}}qb=new WeakMap;function t1(e,t){return e==null?null:typeof e[t]=="function"?e:e.provider&&typeof e.provider[t]=="function"?e.provider:null}function nh(e){return e==null?null:e.provider||null}async function oX(e,t){const n=ds.dereference(e,"overrides");se(typeof n=="object","invalid overrides parameter","overrides",e);const r=yx(n);return se(r.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),se(r.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function Uue(e,t,n){const r=t1(e,"resolveName"),i=O9(r)?r:null;return await Promise.all(t.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=ds.dereference(l,a),a==="address"?Is(l,i):l))))}function xue(e){const t=async function(o){const a=await oX(o,["data"]);a.to=await e.getAddress(),a.from&&(a.from=await Is(a.from,sX(e.runner)));const l=e.interface,f=ot(a.value||jL,"overrides.value")===jL,c=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!c&&!f&&se(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),se(l.fallback||c,"cannot send data to receive-only contract","overrides.data",a.data);const d=l.receive||l.fallback&&l.fallback.payable;return se(d||f,"cannot send value to non-payable fallback","overrides.value",a.value),se(l.fallback||c,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=t1(e.runner,"call");Se(nX(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await t(o);try{return await a.call(l)}catch(f){throw nT(f)&&f.data?e.interface.makeError(f.data,l):f}},r=async function(o){const a=e.runner;Se(iX(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await t(o)),f=nh(e.runner);return new xT(e.interface,f,l)},i=async function(o){const a=t1(e.runner,"estimateGas");return Se(rX(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},s=async o=>await r(o);return yt(s,{_contract:e,estimateGas:i,populateTransaction:t,send:r,staticCall:n}),s}function wue(e,t){const n=function(...f){const c=e.interface.getFunction(t,f);return Se(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:f}}),c},r=async function(...f){const c=n(...f);let d={};if(c.inputs.length+1===f.length&&(d=await oX(f.pop()),d.from&&(d.from=await Is(d.from,sX(e.runner)))),c.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const u=await Uue(e.runner,c.inputs,f);return Object.assign({},d,await Cs({to:e.getAddress(),data:e.interface.encodeFunctionData(c,u)}))},i=async function(...f){const c=await a(...f);return c.length===1?c[0]:c},s=async function(...f){const c=e.runner;Se(iX(c),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await c.sendTransaction(await r(...f)),u=nh(e.runner);return new xT(e.interface,u,d)},o=async function(...f){const c=t1(e.runner,"estimateGas");return Se(rX(c),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await c.estimateGas(await r(...f))},a=async function(...f){const c=t1(e.runner,"call");Se(nX(c),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...f);let u="0x";try{u=await c.call(d)}catch(g){throw nT(g)&&g.data?e.interface.makeError(g.data,d):g}const h=n(...f);return e.interface.decodeFunctionResult(h,u)},l=async(...f)=>n(...f).constant?await i(...f):await s(...f);return yt(l,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=e.interface.getFunction(t);return Se(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),f}}),l}function vue(e,t){const n=function(...i){const s=e.interface.getEvent(t,i);return Se(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:i}}),s},r=function(...i){return new yue(e,n(...i),i)};return yt(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=e.interface.getEvent(t);return Se(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),i}}),r}const Ux=Symbol.for("_ethersInternal_contract"),aX=new WeakMap;function Eue(e,t){aX.set(e[Ux],t)}function Co(e){return aX.get(e[Ux])}function kue(e){return e&&typeof e=="object"&&"getTopicFilter"in e&&typeof e.getTopicFilter=="function"&&e.fragment}async function wT(e,t){let n,r=null;if(Array.isArray(t)){const s=function(o){if(Gn(o,32))return o;const a=e.interface.getEvent(o);return se(a,"unknown fragment","name",o),a.topicHash};n=t.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else t==="*"?n=[null]:typeof t=="string"?Gn(t,32)?n=[t]:(r=e.interface.getEvent(t),se(r,"unknown fragment","event",t),n=[r.topicHash]):kue(t)?n=await t.getTopicFilter():"fragment"in t?(r=t.fragment,n=[r.topicHash]):se(!1,"unknown event name","event",t);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function _5(e,t){const{subs:n}=Co(e);return n.get((await wT(e,t)).tag)||null}async function BL(e,t,n){const r=nh(e.runner);Se(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:s,topics:o}=await wT(e,n),{addr:a,subs:l}=Co(e);let f=l.get(s);if(!f){const d={address:a||e,topics:o},u=U=>{let x=i;if(x==null)try{x=e.interface.getEvent(U.topics[0])}catch{}if(x){const v=x,E=i?e.interface.decodeEventLog(i,U.data,U.topics):[];gC(e,n,E,k=>new bue(e,k,n,v,U))}else gC(e,n,[],v=>new tX(e,v,n,U))};let h=[];f={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(d,u))},stop:async()=>{if(h.length==0)return;let U=h;h=[],await Promise.all(U),r.off(d,u)}},l.set(s,f)}return f}let mC=Promise.resolve();async function Sue(e,t,n,r){await mC;const i=await _5(e,t);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(e,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Co(e).subs.delete(i.tag)),s>0}async function gC(e,t,n,r){try{await mC}catch{}const i=Sue(e,t,n,r);return mC=i,await i}const rU=["then"];var wW;wW=Ux;const L2=class L2{constructor(t,n,r,i){fe(this,"target");fe(this,"interface");fe(this,"runner");fe(this,"filters");fe(this,wW);fe(this,"fallback");se(typeof t=="string"||uG(t),"invalid value for Contract target","target",t),r==null&&(r=null);const s=pC.from(n);yt(this,{target:t,runner:r,interface:s}),Object.defineProperty(this,Ux,{value:{}});let o,a=null,l=null;if(i){const d=nh(r);l=new xT(this.interface,d,i)}let f=new Map;if(typeof t=="string")if(Gn(t))a=t,o=Promise.resolve(t);else{const d=t1(r,"resolveName");if(!O9(d))throw Rr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(t).then(u=>{if(u==null)throw Rr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Co(this).addr=u,u})}else o=t.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Co(this).addr=d,d});Eue(this,{addrPromise:o,addr:a,deployTx:l,subs:f});const c=new Proxy({},{get:(d,u,h)=>{if(typeof u=="symbol"||rU.indexOf(u)>=0)return Reflect.get(d,u,h);try{return this.getEvent(u)}catch(g){if(!ls(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,u)=>rU.indexOf(u)>=0?Reflect.has(d,u):Reflect.has(d,u)||this.interface.hasEvent(String(u))});return yt(this,{filters:c}),yt(this,{fallback:s.receive||s.fallback?xue(this):null}),new Proxy(this,{get:(d,u,h)=>{if(typeof u=="symbol"||u in d||rU.indexOf(u)>=0)return Reflect.get(d,u,h);try{return d.getFunction(u)}catch(g){if(!ls(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,u)=>typeof u=="symbol"||u in d||rU.indexOf(u)>=0?Reflect.has(d,u):d.interface.hasFunction(u)})}connect(t){return new L2(this.target,this.interface,t)}attach(t){return new L2(t,this.interface,this.runner)}async getAddress(){return await Co(this).addrPromise}async getDeployedCode(){const t=nh(this.runner);Se(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await t.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=nh(this.runner);return Se(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Co(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),wue(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),vue(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Co(this),o=i||await s,{fragment:a,topics:l}=await wT(this,t),f={address:o,topics:l,fromBlock:n,toBlock:r},c=nh(this.runner);return Se(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(f)).map(d=>{let u=a;if(u==null)try{u=this.interface.getEvent(d.topics[0])}catch{}if(u)try{return new UT(d,this.interface,u)}catch(h){return new eX(d,h)}return new oy(d,c)})}async on(t,n){const r=await BL(this,"on",t);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(t,n){const r=await BL(this,"once",t);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(t,...n){return await gC(this,t,n,null)}async listenerCount(t){if(t){const i=await _5(this,t);return i?i.listeners.length:0}const{subs:n}=Co(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(t){if(t){const i=await _5(this,t);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Co(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(t,n){const r=await _5(this,t);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Co(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const n=await _5(this,t);if(!n)return this;n.stop(),Co(this).subs.delete(n.tag)}else{const{subs:n}=Co(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(t,n){return await this.on(t,n)}async removeListener(t,n){return await this.off(t,n)}static buildClass(t){class n extends L2{constructor(i,s=null){super(i,t,s)}}return n}static from(t,n,r){return r==null&&(r=null),new this(t,n,r)}};let bC=L2;function Cue(){return bC}class Lh extends Cue(){}function yE(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):se(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class Aue{constructor(t){fe(this,"name");yt(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,n){throw new Error("unsupported coin")}async decodeAddress(t,n){throw new Error("unsupported coin")}}const lX=new RegExp("^(ipfs)://(.*)$","i"),FL=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),lX,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var bu,Ch,yu,Pp,v9,cX;const sm=class sm{constructor(t,n,r){be(this,yu);fe(this,"provider");fe(this,"address");fe(this,"name");be(this,bu);be(this,Ch);yt(this,{provider:t,address:n,name:r}),ee(this,bu,null),ee(this,Ch,new Lh(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return K(this,bu)==null&&ee(this,bu,(async()=>{try{return await K(this,Ch).supportsInterface("0x9061b923")}catch(t){if(ls(t,"CALL_EXCEPTION"))return!1;throw ee(this,bu,null),t}})()),await K(this,bu)}async getAddress(t){if(t==null&&(t=60),t===60)try{const s=await Ne(this,yu,Pp).call(this,"addr(bytes32)");return s==null||s===j2?null:s}catch(s){if(ls(s,"CALL_EXCEPTION"))return null;throw s}if(t>=0&&t<2147483648){let s=t+2147483648;const o=await Ne(this,yu,Pp).call(this,"addr(bytes32,uint)",[s]);if(Gn(o,20))return _n(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof Aue&&s.supportsCoinType(t)){n=s;break}if(n==null)return null;const r=await Ne(this,yu,Pp).call(this,"addr(bytes32,uint)",[t]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(t,r);if(i!=null)return i;Se(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const n=await Ne(this,yu,Pp).call(this,"text(bytes32,string)",[t]);return n==null||n==="0x"?null:n}async getContentHash(){const t=await Ne(this,yu,Pp).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const n=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${Ple("0x"+n[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Se(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:n});for(let r=0;r<FL.length;r++){const i=n.match(FL[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return t.push({type:"url",value:n}),{linkage:t,url:n};case"ipfs":{const o=yE(n);return t.push({type:"ipfs",value:n}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:s,value:n});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const l=(i[2]||"").split("/");if(l.length!==2)return t.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:t};const f=l[1],c=new Lh(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const y=await c.ownerOf(f);if(a!==y)return t.push({type:"!owner",value:y}),{url:null,linkage:t};t.push({type:"owner",value:y})}else if(s==="erc1155"){const y=await c.balanceOf(a,f);if(!y)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:y.toString()})}let d=await c[o](f);if(d==null||d==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:d}),s==="erc1155"&&(d=d.replace("{id}",Ku(f,32).substring(2)),t.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=yE(d)),t.push({type:"metadata-url",value:d});let u={};const h=await new Vf(d).send();h.assertOk();try{u=h.bodyJson}catch{try{t.push({type:"!metadata",value:h.bodyText})}catch{const x=h.body;return x&&t.push({type:"!metadata",value:tt(x)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!u)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(u)});let g=u.image;if(typeof g!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(lX)==null)return t.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:g}),g=yE(g)}return t.push({type:"url",value:g}),{linkage:t,url:g}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const n=await t.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Se(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(t,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await Ne(i=sm,v9,cX).call(i,t,r);if(s!=null){const o=new sm(t,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};bu=new WeakMap,Ch=new WeakMap,yu=new WeakSet,Pp=async function(t,n){n=(n||[]).slice();const r=K(this,Ch).interface;n.unshift(dC(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(t),Se(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),n=[Cde(this.name,255),r.encodeFunctionData(i,n)],t="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await K(this,Ch)[t](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!ls(s,"CALL_EXCEPTION"))throw s}return null},v9=new WeakSet,cX=async function(t,n){const r=await sm.getEnsAddress(t);try{const s=await new Lh(r,["function resolver(bytes32) view returns (address)"],t).resolver(dC(n),{enableCcipRead:!0});return s===j2?null:s}catch(i){throw i}return null},be(sm,v9);let xx=sm;const zL=BigInt(0);function tn(e,t){return function(n){return n==null?t:e(n)}}function j9(e,t){return n=>{if(t&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>e(r))}}function ay(e,t){return n=>{const r={};for(const i in e){let s=i;if(t&&i in t&&!(s in n)){for(const o of t[i])if(o in n){s=o;break}}try{const o=e[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Se(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r}}function Mue(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}se(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}function yg(e){return se(Gn(e,!0),"invalid data","value",e),e}function zi(e){return se(Gn(e,32),"invalid hash","value",e),e}const Tue=ay({address:_n,blockHash:zi,blockNumber:zt,data:yg,index:zt,removed:tn(Mue,!1),topics:j9(zi),transactionHash:zi,transactionIndex:zt},{index:["logIndex"]});function Iue(e){return Tue(e)}const Nue=ay({hash:tn(zi),parentHash:zi,parentBeaconBlockRoot:tn(zi,null),number:zt,timestamp:zt,nonce:tn(yg),difficulty:ot,gasLimit:ot,gasUsed:ot,stateRoot:tn(zi,null),receiptsRoot:tn(zi,null),blobGasUsed:tn(ot,null),excessBlobGas:tn(ot,null),miner:tn(_n),prevRandao:tn(zi,null),extraData:yg,baseFeePerGas:tn(ot)},{prevRandao:["mixHash"]});function Rue(e){const t=Nue(e);return t.transactions=e.transactions.map(n=>typeof n=="string"?n:fX(n)),t}const _ue=ay({transactionIndex:zt,blockNumber:zt,transactionHash:zi,address:_n,topics:j9(zi),data:yg,index:zt,blockHash:zi},{index:["logIndex"]});function Pue(e){return _ue(e)}const Due=ay({to:tn(_n,null),from:tn(_n,null),contractAddress:tn(_n,null),index:zt,root:tn(tt),gasUsed:ot,blobGasUsed:tn(ot,null),logsBloom:tn(yg),blockHash:zi,hash:zi,logs:j9(Pue),blockNumber:zt,cumulativeGasUsed:ot,effectiveGasPrice:tn(ot),blobGasPrice:tn(ot,null),status:tn(zt),type:tn(zt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Lue(e){return Due(e)}function fX(e){e.to&&ot(e.to)===zL&&(e.to="0x0000000000000000000000000000000000000000");const t=ay({hash:zi,index:tn(zt,void 0),type:n=>n==="0x"||n==null?0:zt(n),accessList:tn(M1,null),blobVersionedHashes:tn(j9(zi,!0),null),blockHash:tn(zi,null),blockNumber:tn(zt,null),transactionIndex:tn(zt,null),from:_n,gasPrice:tn(ot),maxPriorityFeePerGas:tn(ot),maxFeePerGas:tn(ot),maxFeePerBlobGas:tn(ot,null),gasLimit:ot,to:tn(_n,null),value:ot,nonce:zt,data:yg,creates:tn(_n,null),chainId:tn(ot,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(t.to==null&&t.creates==null&&(t.creates=Tfe(t)),(e.type===1||e.type===2)&&e.accessList==null&&(t.accessList=[]),e.signature?t.signature=xl.from(e.signature):t.signature=xl.from(e),t.chainId==null){const n=t.signature.legacyChainId;n!=null&&(t.chainId=n)}return t.blockHash&&ot(t.blockHash)===zL&&(t.blockHash=null),t}const Oue="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class ly{constructor(t){fe(this,"name");yt(this,{name:t})}clone(){return new ly(this.name)}}class B9 extends ly{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);fe(this,"effectiveBlock");fe(this,"txBase");fe(this,"txCreate");fe(this,"txDataZero");fe(this,"txDataNonzero");fe(this,"txAccessListStorageKey");fe(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),se(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),yt(this,i)}clone(){return new B9(this.effectiveBlock,this)}}class F9 extends ly{constructor(n,r){super("org.ethers.plugins.network.Ens");fe(this,"address");fe(this,"targetNetwork");yt(this,{address:n||Oue,targetNetwork:r??1})}clone(){return new F9(this.address,this.targetNetwork)}}var Qb,Jb;class jue extends ly{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");be(this,Qb);be(this,Jb);ee(this,Qb,n),ee(this,Jb,r)}get url(){return K(this,Qb)}get processFunc(){return K(this,Jb)}clone(){return this}}Qb=new WeakMap,Jb=new WeakMap;const UE=new Map;var Qm,Jm,Uu;const om=class om{constructor(t,n){be(this,Qm);be(this,Jm);be(this,Uu);ee(this,Qm,t),ee(this,Jm,ot(n)),ee(this,Uu,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return K(this,Qm)}set name(t){ee(this,Qm,t)}get chainId(){return K(this,Jm)}set chainId(t){ee(this,Jm,ot(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===ot(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===ot(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===ot(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(K(this,Uu).values())}attachPlugin(t){if(K(this,Uu).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return K(this,Uu).set(t.name,t.clone()),this}getPlugin(t){return K(this,Uu).get(t)||null}getPlugins(t){return this.plugins.filter(n=>n.name.split("#")[0]===t)}clone(){const t=new om(this.name,this.chainId);return this.plugins.forEach(n=>{t.attachPlugin(n.clone())}),t}computeIntrinsicGas(t){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new B9;let r=n.txBase;if(t.to==null&&(r+=n.txCreate),t.data)for(let i=2;i<t.data.length;i+=2)t.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(t.accessList){const i=M1(t.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(t){if(Bue(),t==null)return om.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const n=UE.get(t);if(n)return n();if(typeof t=="bigint")return new om("unknown",t);se(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){se(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const n=new om(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&n.attachPlugin(new F9(t.ensAddress,t.ensNetwork)),n}se(!1,"invalid network","network",t)}static register(t,n){typeof t=="number"&&(t=BigInt(t));const r=UE.get(t);r&&se(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),UE.set(t,n)}};Qm=new WeakMap,Jm=new WeakMap,Uu=new WeakMap;let mc=om;function $L(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${e}`);for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function HL(e){return new jue(e,async(t,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),t()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:$L(a.maxFee,9),maxPriorityFeePerGas:$L(a.maxPriorityFee,9)}}catch(s){Se(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let VL=!1;function Bue(){if(VL)return;VL=!0;function e(t,n,r){const i=function(){const s=new mc(t,n);return r.ensNetwork!=null&&s.attachPlugin(new F9(null,r.ensNetwork)),s.attachPlugin(new B9),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};mc.register(t,i),mc.register(n,i),r.altNames&&r.altNames.forEach(s=>{mc.register(s,i)})}e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[HL("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[HL("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1})}function yC(e){return JSON.parse(JSON.stringify(e))}var Cf,sa,xu,rc,eg,h3;class Fue{constructor(t){be(this,eg);be(this,Cf);be(this,sa);be(this,xu);be(this,rc);ee(this,Cf,t),ee(this,sa,null),ee(this,xu,4e3),ee(this,rc,-2)}get pollingInterval(){return K(this,xu)}set pollingInterval(t){ee(this,xu,t)}start(){K(this,sa)||(ee(this,sa,K(this,Cf)._setTimeout(Ne(this,eg,h3).bind(this),K(this,xu))),Ne(this,eg,h3).call(this))}stop(){K(this,sa)&&(K(this,Cf)._clearTimeout(K(this,sa)),ee(this,sa,null))}pause(t){this.stop(),t&&ee(this,rc,-2)}resume(){this.start()}}Cf=new WeakMap,sa=new WeakMap,xu=new WeakMap,rc=new WeakMap,eg=new WeakSet,h3=async function(){try{const t=await K(this,Cf).getBlockNumber();if(K(this,rc)===-2){ee(this,rc,t);return}if(t!==K(this,rc)){for(let n=K(this,rc)+1;n<=t;n++){if(K(this,sa)==null)return;await K(this,Cf).emit("block",n)}ee(this,rc,t)}}catch{}K(this,sa)!=null&&ee(this,sa,K(this,Cf)._setTimeout(Ne(this,eg,h3).bind(this),K(this,xu)))};var Ah,Mh,wu;class vT{constructor(t){be(this,Ah);be(this,Mh);be(this,wu);ee(this,Ah,t),ee(this,wu,!1),ee(this,Mh,n=>{this._poll(n,K(this,Ah))})}async _poll(t,n){throw new Error("sub-classes must override this")}start(){K(this,wu)||(ee(this,wu,!0),K(this,Mh).call(this,-2),K(this,Ah).on("block",K(this,Mh)))}stop(){K(this,wu)&&(ee(this,wu,!1),K(this,Ah).off("block",K(this,Mh)))}pause(t){this.stop()}resume(){this.start()}}Ah=new WeakMap,Mh=new WeakMap,wu=new WeakMap;var tg,Af;class zue extends vT{constructor(n,r){super(n);be(this,tg);be(this,Af);ee(this,tg,r),ee(this,Af,-2)}pause(n){n&&ee(this,Af,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(K(this,tg));i!=null&&(K(this,Af)===-2?ee(this,Af,i.number):i.number>K(this,Af)&&(r.emit(K(this,tg),i.number),ee(this,Af,i.number)))}}tg=new WeakMap,Af=new WeakMap;var E9;class $ue extends vT{constructor(n,r){super(n);be(this,E9);ee(this,E9,yC(r))}async _poll(n,r){throw new Error("@TODO")}}E9=new WeakMap;var ng;class Hue extends vT{constructor(n,r){super(n);be(this,ng);ee(this,ng,r)}async _poll(n,r){const i=await r.getTransactionReceipt(K(this,ng));i&&r.emit(K(this,ng),i)}}ng=new WeakMap;var Mf,rg,ig,vu,oa,k9,dX;class ET{constructor(t,n){be(this,k9);be(this,Mf);be(this,rg);be(this,ig);be(this,vu);be(this,oa);ee(this,Mf,t),ee(this,rg,yC(n)),ee(this,ig,Ne(this,k9,dX).bind(this)),ee(this,vu,!1),ee(this,oa,-2)}start(){K(this,vu)||(ee(this,vu,!0),K(this,oa)===-2&&K(this,Mf).getBlockNumber().then(t=>{ee(this,oa,t)}),K(this,Mf).on("block",K(this,ig)))}stop(){K(this,vu)&&(ee(this,vu,!1),K(this,Mf).off("block",K(this,ig)))}pause(t){this.stop(),t&&ee(this,oa,-2)}resume(){this.start()}}Mf=new WeakMap,rg=new WeakMap,ig=new WeakMap,vu=new WeakMap,oa=new WeakMap,k9=new WeakSet,dX=async function(t){if(K(this,oa)===-2)return;const n=yC(K(this,rg));n.fromBlock=K(this,oa)+1,n.toBlock=t;const r=await K(this,Mf).getLogs(n);if(r.length===0){K(this,oa)<t-60&&ee(this,oa,t-60);return}for(const i of r)K(this,Mf).emit(K(this,rg),i),ee(this,oa,i.blockNumber)};const Vue=BigInt(2),Wue=10;function iU(e){return e&&typeof e.then=="function"}function p3(e,t){return e+":"+JSON.stringify(t,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class uX{constructor(t){fe(this,"name");yt(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Gue(e){return JSON.parse(JSON.stringify(e))}function UC(e){return e=Array.from(new Set(e).values()),e.sort(),e}async function xE(e,t){if(e==null)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),typeof e=="string")switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(Gn(e,32)){const n=e.toLowerCase();return{type:"transaction",tag:p3("tx",{hash:n}),hash:n}}if(e.orphan){const n=e;return{type:"orphan",tag:p3("orphan",n),filter:Gue(n)}}if(e.address||e.topics){const n=e,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?UC(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{Gn(a)?i.push(a):s.push((async()=>{i.push(await Is(a,t))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=UC(i.map(a=>a.toLowerCase()))}return{filter:r,tag:p3("event",r),type:"event"}}se(!1,"unknown ProviderEvent","event",e)}function wE(){return new Date().getTime()}const Xue={cacheTimeout:250,pollingInterval:4e3};var ts,Eu,ns,sg,Io,Th,ku,Tf,ey,aa,og,ag,Kt,ko,xC,wC,P5,vC,D5,m3;class Kue{constructor(t,n){be(this,Kt);be(this,ts);be(this,Eu);be(this,ns);be(this,sg);be(this,Io);be(this,Th);be(this,ku);be(this,Tf);be(this,ey);be(this,aa);be(this,og);be(this,ag);if(ee(this,ag,Object.assign({},Xue,n||{})),t==="any")ee(this,Th,!0),ee(this,Io,null);else if(t){const r=mc.from(t);ee(this,Th,!1),ee(this,Io,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else ee(this,Th,!1),ee(this,Io,null);ee(this,Tf,-1),ee(this,ku,new Map),ee(this,ts,new Map),ee(this,Eu,new Map),ee(this,ns,null),ee(this,sg,!1),ee(this,ey,1),ee(this,aa,new Map),ee(this,og,!1)}get pollingInterval(){return K(this,ag).pollingInterval}get provider(){return this}get plugins(){return Array.from(K(this,Eu).values())}attachPlugin(t){if(K(this,Eu).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return K(this,Eu).set(t.name,t.connect(this)),this}getPlugin(t){return K(this,Eu).get(t)||null}get disableCcipRead(){return K(this,og)}set disableCcipRead(t){ee(this,og,!!t)}async ccipReadFetch(t,n,r){if(this.disableCcipRead||r.length===0||t.to==null)return null;const i=t.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],f=l.replace("{sender}",i).replace("{data}",s),c=new Vf(f);l.indexOf("{data}")===-1&&(c.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:a,urls:r});let d="unknown error";const u=await c.send();try{const h=u.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:h}),h.data;h.message&&(d=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:h})}catch{}Se(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:l,errorMessage:d}}),o.push(d)}Se(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:o}})}_wrapBlock(t,n){return new hue(Rue(t),this)}_wrapLog(t,n){return new oy(Iue(t),this)}_wrapTransactionReceipt(t,n){return new qG(Lue(t),this)}_wrapTransactionResponse(t,n){return new G2(fX(t),this)}_detectNetwork(){Se(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){Se(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=zt(await Ne(this,Kt,ko).call(this,{method:"getBlockNumber"}),"%response");return K(this,Tf)>=0&&ee(this,Tf,t),t}_getAddress(t){return Is(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(Gn(t))return Gn(t,32)?t:Hp(t);if(typeof t=="bigint"&&(t=zt(t,"blockTag")),typeof t=="number")return t>=0?Hp(t):K(this,Tf)>=0?Hp(K(this,Tf)+t):this.getBlockNumber().then(n=>Hp(n+t));se(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const n=(t.topics||[]).map(l=>l==null?null:Array.isArray(l)?UC(l.map(f=>f.toLowerCase())):l.toLowerCase()),r="blockHash"in t?t.blockHash:void 0,i=(l,f,c)=>{let d;switch(l.length){case 0:break;case 1:d=l[0];break;default:l.sort(),d=l}if(r&&(f!=null||c!=null))throw new Error("invalid filter");const u={};return d&&(u.address=d),n.length&&(u.topics=n),f&&(u.fromBlock=f),c&&(u.toBlock=c),r&&(u.blockHash=r),u};let s=[];if(t.address)if(Array.isArray(t.address))for(const l of t.address)s.push(this._getAddress(l));else s.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(t){const n=yx(t),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=Is(n[i],this);iU(s)?r.push(async function(){n[i]=await s}()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);iU(i)?r.push(async function(){n.blockTag=await i}()):n.blockTag=i}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(K(this,Io)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw K(this,Io)===i&&ee(this,Io,null),s}})();return ee(this,Io,i),(await i).clone()}const t=K(this,Io),[n,r]=await Promise.all([t,this._detectNetwork()]);return n.chainId!==r.chainId&&(K(this,Th)?(this.emit("network",r,n),K(this,Io)===t&&ee(this,Io,Promise.resolve(r))):Se(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const t=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Cs({_block:Ne(this,Kt,vC).call(this,"latest",!1),gasPrice:(async()=>{try{const c=await Ne(this,Kt,ko).call(this,{method:"getGasPrice"});return ot(c,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const c=await Ne(this,Kt,ko).call(this,{method:"getPriorityFee"});return ot(c,"%response")}catch{}return null})()});let a=null,l=null;const f=this._wrapBlock(i,t);return f&&f.baseFeePerGas&&(l=o??BigInt("1000000000"),a=f.baseFeePerGas*Vue+l),new OL(s,a,l)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Vf(r.url),s=await r.processFunc(n,this,i);return new OL(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(t){let n=this._getTransactionRequest(t);return iU(n)&&(n=await n),ot(await Ne(this,Kt,ko).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(t){const{tx:n,blockTag:r}=await Cs({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await Ne(this,Kt,wC).call(this,Ne(this,Kt,xC).call(this,n,r,t.enableCcipRead?0:-1))}async getBalance(t,n){return ot(await Ne(this,Kt,P5).call(this,{method:"getBalance"},t,n),"%response")}async getTransactionCount(t,n){return zt(await Ne(this,Kt,P5).call(this,{method:"getTransactionCount"},t,n),"%response")}async getCode(t,n){return tt(await Ne(this,Kt,P5).call(this,{method:"getCode"},t,n))}async getStorage(t,n,r){const i=ot(n,"position");return tt(await Ne(this,Kt,P5).call(this,{method:"getStorage",position:i},t,r))}async broadcastTransaction(t){const{blockNumber:n,hash:r,network:i}=await Cs({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),s=OG.from(t);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(t,n){const{network:r,params:i}=await Cs({network:this.getNetwork(),params:Ne(this,Kt,vC).call(this,t,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(t){const{network:n,params:r}=await Cs({network:this.getNetwork(),params:Ne(this,Kt,ko).call(this,{method:"getTransaction",hash:t})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(t){const{network:n,params:r}=await Cs({network:this.getNetwork(),params:Ne(this,Kt,ko).call(this,{method:"getTransactionReceipt",hash:t})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await Ne(this,Kt,ko).call(this,{method:"getTransaction",hash:t});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(t){const{result:n}=await Cs({network:this.getNetwork(),result:Ne(this,Kt,ko).call(this,{method:"getTransactionResult",hash:t})});return n==null?null:tt(n)}async getLogs(t){let n=this._getFilter(t);iU(n)&&(n=await n);const{network:r,params:i}=await Cs({network:this.getNetwork(),params:Ne(this,Kt,ko).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(t){Se(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await xx.fromName(this,t)}async getAvatar(t){const n=await this.getResolver(t);return n?await n.getAvatar():null}async resolveName(t){const n=await this.getResolver(t);return n?await n.getAddress():null}async lookupAddress(t){t=_n(t);const n=dC(t.substring(2).toLowerCase()+".addr.reverse");try{const r=await xx.getEnsAddress(this),s=await new Lh(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===j2)return null;const a=await new Lh(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==t?null:a}catch(r){if(ls(r,"BAD_DATA")&&r.value==="0x"||ls(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(t,n,r){const i=n??1;return i===0?this.getTransactionReceipt(t):new Promise(async(s,o)=>{let a=null;const l=async f=>{try{const c=await this.getTransactionReceipt(t);if(c!=null&&f-c.blockNumber+1>=i){s(c),a&&(clearTimeout(a),a=null);return}}catch(c){console.log("EEE",c)}this.once("block",l)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Rr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(t){Se(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const n=K(this,aa).get(t);n&&(n.timer&&clearTimeout(n.timer),K(this,aa).delete(t))}_setTimeout(t,n){n==null&&(n=0);const r=Z6(this,ey)._++,i=()=>{K(this,aa).delete(r),t()};if(this.paused)K(this,aa).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);K(this,aa).set(r,{timer:s,func:i,time:wE()})}return r}_forEachSubscriber(t){for(const n of K(this,ts).values())t(n.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new uX(t.type);case"block":{const n=new Fue(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new zue(this,t.type);case"event":return new ET(this,t.filter);case"transaction":return new Hue(this,t.hash);case"orphan":return new $ue(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,n){for(const r of K(this,ts).values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),K(this,ns)!=null&&n.pause(K(this,ns));break}}async on(t,n){const r=await Ne(this,Kt,m3).call(this,t);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,K(this,ns)!=null&&r.subscriber.pause(K(this,ns))),this}async once(t,n){const r=await Ne(this,Kt,m3).call(this,t);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,K(this,ns)!=null&&r.subscriber.pause(K(this,ns))),this}async emit(t,...n){const r=await Ne(this,Kt,D5).call(this,t,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new AW(this,o?null:s,t);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),K(this,ts).delete(r.tag)),i>0}async listenerCount(t){if(t){const r=await Ne(this,Kt,D5).call(this,t);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of K(this,ts).values())n+=r.length;return n}async listeners(t){if(t){const r=await Ne(this,Kt,D5).call(this,t);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of K(this,ts).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(t,n){const r=await Ne(this,Kt,D5).call(this,t);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),K(this,ts).delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:n,started:r,subscriber:i}=await Ne(this,Kt,m3).call(this,t);r&&i.stop(),K(this,ts).delete(n)}else for(const[n,{started:r,subscriber:i}]of K(this,ts))r&&i.stop(),K(this,ts).delete(n);return this}async addListener(t,n){return await this.on(t,n)}async removeListener(t,n){return this.off(t,n)}get destroyed(){return K(this,sg)}destroy(){this.removeAllListeners();for(const t of K(this,aa).keys())this._clearTimeout(t);ee(this,sg,!0)}get paused(){return K(this,ns)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(ee(this,Tf,-1),K(this,ns)!=null){if(K(this,ns)==!!t)return;Se(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(t)),ee(this,ns,!!t);for(const n of K(this,aa).values())n.timer&&clearTimeout(n.timer),n.time=wE()-n.time}resume(){if(K(this,ns)!=null){this._forEachSubscriber(t=>t.resume()),ee(this,ns,null);for(const t of K(this,aa).values()){let n=t.time;n<0&&(n=0),t.time=wE(),setTimeout(t.func,n)}}}}ts=new WeakMap,Eu=new WeakMap,ns=new WeakMap,sg=new WeakMap,Io=new WeakMap,Th=new WeakMap,ku=new WeakMap,Tf=new WeakMap,ey=new WeakMap,aa=new WeakMap,og=new WeakMap,ag=new WeakMap,Kt=new WeakSet,ko=async function(t){const n=K(this,ag).cacheTimeout;if(n<0)return await this._perform(t);const r=p3(t.method,t);let i=K(this,ku).get(r);return i||(i=this._perform(t),K(this,ku).set(r,i),setTimeout(()=>{K(this,ku).get(r)===i&&K(this,ku).delete(r)},n)),await i},xC=async function(t,n,r){Se(r<Wue,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:n,enableCcipRead:!0})});const i=yx(t);try{return tt(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&nT(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&_r(s.data,0,4)==="0x556f1830"){const o=s.data,a=await Is(i.to,this);let l;try{l=Jue(_r(s.data,4))}catch(d){Se(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Se(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const f=await this.ccipReadFetch(i,l.calldata,l.urls);Se(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const c={to:a,data:$r([l.selector,Que([f,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const d=await Ne(this,Kt,xC).call(this,c,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:d}),d}}throw s}},wC=async function(t){const{value:n}=await Cs({network:this.getNetwork(),value:t});return n},P5=async function(t,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await Ne(this,Kt,wC).call(this,Ne(this,Kt,ko).call(this,Object.assign(t,{address:i,blockTag:s})))},vC=async function(t,n){if(Gn(t,32))return await Ne(this,Kt,ko).call(this,{method:"getBlock",blockHash:t,includeTransactions:n});let r=this._getBlockTag(t);return typeof r!="string"&&(r=await r),await Ne(this,Kt,ko).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},D5=async function(t,n){let r=await xE(t,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await xE({orphan:"drop-log",log:n[0]},this)),K(this,ts).get(r.tag)||null},m3=async function(t){const n=await xE(t,this),r=n.tag;let i=K(this,ts).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},K(this,ts).set(r,i)),i};function Yue(e,t){try{const n=EC(e,t);if(n)return cx(n)}catch{}return null}function EC(e,t){if(e==="0x")return null;try{const n=zt(_r(e,t,t+32)),r=zt(_r(e,n,n+32));return _r(e,n+32,n+32+r)}catch{}return null}function WL(e){const t=Ms(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function Zue(e){if(e.length%32===0)return e;const t=new Uint8Array(Math.ceil(e.length/32)*32);return t.set(e),t}const que=new Uint8Array([]);function Que(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(que),n+=32;for(let r=0;r<e.length;r++){const i=nn(e[r]);t[r]=WL(n),t.push(WL(i.length)),t.push(Zue(i)),n+=32+Math.ceil(i.length/32)*32}return $r(t)}const GL="0x0000000000000000000000000000000000000000000000000000000000000000";function Jue(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Se(am(e)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=_r(e,0,32);Se(_r(n,0,12)===_r(GL,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=_r(n,12);try{const r=[],i=zt(_r(e,32,64)),s=zt(_r(e,i,i+32)),o=_r(e,i+32);for(let a=0;a<s;a++){const l=Yue(o,a*32);if(l==null)throw new Error("abort");r.push(l)}t.urls=r}catch{Se(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=EC(e,64);if(r==null)throw new Error("abort");t.calldata=r}catch{Se(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Se(_r(e,100,128)===_r(GL,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=_r(e,96,100);try{const r=EC(e,128);if(r==null)throw new Error("abort");t.extraData=r}catch{Se(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>t[r]),t}function hp(e,t){if(e.provider)return e.provider;Se(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function XL(e,t){let n=yx(t);if(n.to!=null&&(n.to=Is(n.to,e)),n.from!=null){const r=n.from;n.from=Promise.all([e.getAddress(),Is(r,e)]).then(([i,s])=>(se(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=e.getAddress();return await Cs(n)}class e0e{constructor(t){fe(this,"provider");yt(this,{provider:t||null})}async getNonce(t){return hp(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await XL(this,t)}async populateTransaction(t){const n=hp(this,"populateTransaction"),r=await XL(this,t);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=ot(r.chainId);se(o===i.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?se(!1,"eip-1559 transaction do not support gasPrice","tx",t):(r.type===0||r.type===1)&&s&&se(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Se(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Se(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Se(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Cs(r)}async estimateGas(t){return hp(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return hp(this,"call").call(await this.populateCall(t))}async resolveName(t){return await hp(this,"resolveName").resolveName(t)}async sendTransaction(t){const n=hp(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const i=OG.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}}function t0e(e){return JSON.parse(JSON.stringify(e))}var ks,ic,Ih,Su,Nh,lg,i0,kC,SC;class hX{constructor(t){be(this,i0);be(this,ks);be(this,ic);be(this,Ih);be(this,Su);be(this,Nh);be(this,lg);ee(this,ks,t),ee(this,ic,null),ee(this,Ih,Ne(this,i0,kC).bind(this)),ee(this,Su,!1),ee(this,Nh,null),ee(this,lg,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,n){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){K(this,Su)||(ee(this,Su,!0),Ne(this,i0,kC).call(this,-2))}stop(){K(this,Su)&&(ee(this,Su,!1),ee(this,lg,!0),Ne(this,i0,SC).call(this),K(this,ks).off("block",K(this,Ih)))}pause(t){t&&Ne(this,i0,SC).call(this),K(this,ks).off("block",K(this,Ih))}resume(){this.start()}}ks=new WeakMap,ic=new WeakMap,Ih=new WeakMap,Su=new WeakMap,Nh=new WeakMap,lg=new WeakMap,i0=new WeakSet,kC=async function(t){try{K(this,ic)==null&&ee(this,ic,this._subscribe(K(this,ks)));let n=null;try{n=await K(this,ic)}catch(s){if(!ls(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){ee(this,ic,null),K(this,ks)._recoverSubscriber(this,this._recover(K(this,ks)));return}const r=await K(this,ks).getNetwork();if(K(this,Nh)||ee(this,Nh,r),K(this,Nh).chainId!==r.chainId)throw new Error("chaid changed");if(K(this,lg))return;const i=await K(this,ks).send("eth_getFilterChanges",[n]);await this._emitResults(K(this,ks),i)}catch(n){console.log("@TODO",n)}K(this,ks).once("block",K(this,Ih))},SC=function(){const t=K(this,ic);t&&(ee(this,ic,null),t.then(n=>{K(this,ks).destroyed||K(this,ks).send("eth_uninstallFilter",[n])}))};var Rh;class n0e extends hX{constructor(n,r){super(n);be(this,Rh);ee(this,Rh,t0e(r))}_recover(n){return new ET(n,K(this,Rh))}async _subscribe(n){return await n.send("eth_newFilter",[K(this,Rh)])}async _emitResults(n,r){for(const i of r)n.emit(K(this,Rh),n._wrapLog(i,n._network))}}Rh=new WeakMap;class r0e extends hX{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,n){for(const r of n)t.emit("pending",r)}}const i0e="bigint,boolean,function,number,string,symbol".split(/,/g);function g3(e){if(e==null||i0e.indexOf(typeof e)>=0||typeof e.getAddress=="function")return e;if(Array.isArray(e))return e.map(g3);if(typeof e=="object")return Object.keys(e).reduce((t,n)=>(t[n]=e[n],t),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function s0e(e){return new Promise(t=>{setTimeout(t,e)})}function pp(e){return e&&e.toLowerCase()}function KL(e){return e&&typeof e.pollingInterval=="number"}const pX={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class vE extends e0e{constructor(n,r){super(n);fe(this,"address");r=_n(r),yt(this,{address:r})}connect(n){Se(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=g3(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await Is(o,this.provider);se(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await Is(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const f=async()=>{try{const c=await this.provider.getTransaction(i);if(c!=null){s(c.replaceableTransaction(r));return}}catch(c){if(ls(c,"CANCELLED")||ls(c,"BAD_DATA")||ls(c,"NETWORK_ERROR")){c.info==null&&(c.info={}),c.info.sendTransactionHash=i,o(c);return}if(ls(c,"INVALID_ARGUMENT")&&(l++,c.info==null&&(c.info={}),c.info.sendTransactionHash=i,l>10)){o(c);return}this.provider.emit("error",Rr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{f()},a.pop()||4e3)};f()})}async signTransaction(n){const r=g3(n);if(r.from){const s=await Is(r.from,this.provider);se(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?Bf(n):n;return await this.provider.send("personal_sign",[tt(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=g3(i),o=await bx.resolveNames(n,r,s,async a=>{const l=await Is(a);return se(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(bx.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Bf(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),tt(r)])}}var _h,cg,If,sc,Ja,la,Js,ty,CC;class o0e extends Kue{constructor(n,r){super(n,r);be(this,ty);be(this,_h);be(this,cg);be(this,If);be(this,sc);be(this,Ja);be(this,la);be(this,Js);ee(this,cg,1),ee(this,_h,Object.assign({},pX,r||{})),ee(this,If,[]),ee(this,sc,null),ee(this,la,null),ee(this,Js,null);{let s=null;const o=new Promise(a=>{s=a});ee(this,Ja,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(se(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&ee(this,la,mc.from(n))):i&&(se(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),ee(this,la,i))}_getOption(n){return K(this,_h)[n]}get _network(){return Se(K(this,la),"network is not available yet","NETWORK_ERROR"),K(this,la)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&ot(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(K(this,la))return K(this,la)}else return n;return K(this,Js)?await K(this,Js):this.ready?(ee(this,Js,(async()=>{try{const r=mc.from(ot(await this.send("eth_chainId",[])));return ee(this,Js,null),r}catch(r){throw ee(this,Js,null),r}})()),await K(this,Js)):(ee(this,Js,(async()=>{const r={id:Z6(this,cg)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],ee(this,Js,null)}catch(s){throw ee(this,Js,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return mc.from(ot(i.result));throw this.getRpcError(r,i)})()),await K(this,Js))}_start(){K(this,Ja)==null||K(this,Ja).resolve==null||(K(this,Ja).resolve(),ee(this,Ja,null),(async()=>{for(;K(this,la)==null&&!this.destroyed;)try{ee(this,la,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Rr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await s0e(1e3)}Ne(this,ty,CC).call(this)})())}async _waitUntilReady(){if(K(this,Ja)!=null)return await K(this,Ja).promise}_getSubscriber(n){return n.type==="pending"?new r0e(this):n.type==="event"?this._getOption("polling")?new ET(this,n.filter):new n0e(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new uX("orphan"):super._getSubscriber(n)}get ready(){return K(this,Ja)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Hp(ot(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=tt(n[i]))}),n.accessList&&(r.accessList=M1(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[pp(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[pp(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[pp(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[pp(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(pp):n.filter.address=pp(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return Rr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=AC(s),f=W2.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return f.info={error:s,payload:n},f}const o=JSON.stringify(c0e(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Rr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Rr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Rr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Rr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return Rr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Rr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):Rr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=Z6(this,cg)._++,s=new Promise((o,a)=>{K(this,If).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return Ne(this,ty,CC).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new vE(this,s[n])}const{accounts:i}=await Cs({network:this.getNetwork(),accounts:r});n=_n(n);for(const s of i)if(_n(s)===n)return new vE(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new vE(this,r))}destroy(){K(this,sc)&&(clearTimeout(K(this,sc)),ee(this,sc,null));for(const{payload:n,reject:r}of K(this,If))r(Rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));ee(this,If,[]),super.destroy()}}_h=new WeakMap,cg=new WeakMap,If=new WeakMap,sc=new WeakMap,Ja=new WeakMap,la=new WeakMap,Js=new WeakMap,ty=new WeakSet,CC=function(){if(K(this,sc))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");ee(this,sc,setTimeout(()=>{ee(this,sc,null);const r=K(this,If);for(ee(this,If,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==K(this,_h).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>K(this,_h).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:f}of i){if(this.destroyed){l(Rr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const c=o.filter(d=>d.id===f.id)[0];if(c==null){const d=Rr("missing response for request","BAD_DATA",{value:o,info:{payload:f}});this.emit("error",d),l(d);continue}if("error"in c){l(this.getRpcError(f,c));continue}a(c.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var Cu;class a0e extends o0e{constructor(n,r){super(n,r);be(this,Cu);let i=this._getOption("pollingInterval");i==null&&(i=pX.pollingInterval),ee(this,Cu,i)}_getSubscriber(n){const r=super._getSubscriber(n);return KL(r)&&(r.pollingInterval=K(this,Cu)),r}get pollingInterval(){return K(this,Cu)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");ee(this,Cu,n),this._forEachSubscriber(r=>{KL(r)&&(r.pollingInterval=K(this,Cu))})}}Cu=new WeakMap;var fg;class l0e extends a0e{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);be(this,fg);typeof n=="string"?ee(this,fg,new Vf(n)):ee(this,fg,n.clone())}_getConnection(){return K(this,fg).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}fg=new WeakMap;function AC(e){if(e==null)return null;if(typeof e.message=="string"&&e.message.match(/revert/i)&&Gn(e.data))return{message:e.message,data:e.data};if(typeof e=="object"){for(const t in e){const n=AC(e[t]);if(n)return n}return null}if(typeof e=="string")try{return AC(JSON.parse(e))}catch{}return null}function MC(e,t){if(e!=null){if(typeof e.message=="string"&&t.push(e.message),typeof e=="object")for(const n in e)MC(e[n],t);if(typeof e=="string")try{return MC(JSON.parse(e),t)}catch{}}}function c0e(e){const t=[];return MC(e,t),t}const f0e="hh-sol-artifact-1",d0e="CanonThread",u0e="contracts/CanonThread.sol",h0e=[{inputs:[{internalType:"address",name:"_tokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"contentType",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ContentAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"oldContentHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"}],name:"ContentUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"nodeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"NodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"proposer",type:"address"},{indexed:!1,internalType:"uint256",name:"stake",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"bool",name:"passed",type:"bool"}],name:"ProposalExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ThreadCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"string",name:"newMetadataHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"}],name:"ThreadUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"bool",name:"support",type:"bool"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Voted",type:"event"},{inputs:[],name:"MINIMUM_STAKE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_BUFFER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_PERIOD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"_nodeType",type:"uint8"}],name:"createNode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"}],name:"createThread",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"executeProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"hasVoted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_hash",type:"string"}],name:"isValidIPFSHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"nodeCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"nodes",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposalCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"string",name:"proposedMetadataHash",type:"string"},{internalType:"string",name:"proposedContentHash",type:"string"},{internalType:"address",name:"proposer",type:"address"},{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"votesFor",type:"uint256"},{internalType:"uint256",name:"votesAgainst",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"bool",name:"passed",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"},{internalType:"uint256",name:"_stake",type:"uint256"}],name:"proposeUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"threadCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"threads",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"version",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract CanonToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"}],name:"updateThread",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"bool",name:"_support",type:"bool"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],p0e="0x60806040523480156200001157600080fd5b50604051620030f2380380620030f28339818101604052810190620000379190620000f1565b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060006006819055505062000123565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620000b9826200008c565b9050919050565b620000cb81620000ac565b8114620000d757600080fd5b50565b600081519050620000eb81620000c0565b92915050565b6000602082840312156200010a576200010962000087565b5b60006200011a84828501620000da565b91505092915050565b612fbf80620001336000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",m0e="0x608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",g0e={},b0e={},y0e={_format:f0e,contractName:d0e,sourceName:u0e,abi:h0e,bytecode:p0e,deployedBytecode:m0e,linkReferences:g0e,deployedLinkReferences:b0e},U0e="hh-sol-artifact-1",x0e="CanonToken",w0e="contracts/CanonToken.sol",v0e=[{inputs:[{internalType:"uint256",name:"initialSupply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],E0e="0x60806040523480156200001157600080fd5b5060405162001dc738038062001dc7833981810160405281019062000037919062000560565b336040518060400160405280600a81526020017f43616e6f6e546f6b656e000000000000000000000000000000000000000000008152506040518060400160405280600581526020017f43414e4f4e0000000000000000000000000000000000000000000000000000008152508160039081620000b5919062000802565b508060049081620000c7919062000802565b505050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036200013f5760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016200013691906200092e565b60405180910390fd5b62000150816200019460201b60201c565b506200018d33620001666200025a60201b60201c565b600a62000174919062000adb565b8362000181919062000b2c565b6200026360201b60201c565b5062000c1d565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60006012905090565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620002d85760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401620002cf91906200092e565b60405180910390fd5b620002ec60008383620002f060201b60201c565b5050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036200034657806002600082825462000339919062000b77565b925050819055506200041c565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015620003d5578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401620003cc9392919062000bc3565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620004675780600260008282540392505081905550620004b4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405162000513919062000c00565b60405180910390a3505050565b600080fd5b6000819050919050565b6200053a8162000525565b81146200054657600080fd5b50565b6000815190506200055a816200052f565b92915050565b60006020828403121562000579576200057862000520565b5b6000620005898482850162000549565b91505092915050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200061457607f821691505b6020821081036200062a5762000629620005cc565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620006947fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000655565b620006a0868362000655565b95508019841693508086168417925050509392505050565b6000819050919050565b6000620006e3620006dd620006d78462000525565b620006b8565b62000525565b9050919050565b6000819050919050565b620006ff83620006c2565b620007176200070e82620006ea565b84845462000662565b825550505050565b600090565b6200072e6200071f565b6200073b818484620006f4565b505050565b5b8181101562000763576200075760008262000724565b60018101905062000741565b5050565b601f821115620007b2576200077c8162000630565b620007878462000645565b8101602085101562000797578190505b620007af620007a68562000645565b83018262000740565b50505b505050565b600082821c905092915050565b6000620007d760001984600802620007b7565b1980831691505092915050565b6000620007f28383620007c4565b9150826002028217905092915050565b6200080d8262000592565b67ffffffffffffffff8111156200082957620008286200059d565b5b620008358254620005fb565b6200084282828562000767565b600060209050601f8311600181146200087a576000841562000865578287015190505b620008718582620007e4565b865550620008e1565b601f1984166200088a8662000630565b60005b82811015620008b4578489015182556001820191506020850194506020810190506200088d565b86831015620008d45784890151620008d0601f891682620007c4565b8355505b6001600288020188555050505b505050505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200091682620008e9565b9050919050565b620009288162000909565b82525050565b60006020820190506200094560008301846200091d565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b6001851115620009d957808604811115620009b157620009b06200094b565b5b6001851615620009c15780820291505b8081029050620009d1856200097a565b945062000991565b94509492505050565b600082620009f4576001905062000ac7565b8162000a04576000905062000ac7565b816001811462000a1d576002811462000a285762000a5e565b600191505062000ac7565b60ff84111562000a3d5762000a3c6200094b565b5b8360020a91508482111562000a575762000a566200094b565b5b5062000ac7565b5060208310610133831016604e8410600b841016171562000a985782820a90508381111562000a925762000a916200094b565b5b62000ac7565b62000aa7848484600162000987565b9250905081840481111562000ac15762000ac06200094b565b5b81810290505b9392505050565b600060ff82169050919050565b600062000ae88262000525565b915062000af58362000ace565b925062000b247fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484620009e2565b905092915050565b600062000b398262000525565b915062000b468362000525565b925082820262000b568162000525565b9150828204841483151762000b705762000b6f6200094b565b5b5092915050565b600062000b848262000525565b915062000b918362000525565b925082820190508082111562000bac5762000bab6200094b565b5b92915050565b62000bbd8162000525565b82525050565b600060608201905062000bda60008301866200091d565b62000be9602083018562000bb2565b62000bf8604083018462000bb2565b949350505050565b600060208201905062000c17600083018462000bb2565b92915050565b61119a8062000c2d6000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",k0e="0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",S0e={},C0e={},A0e={_format:U0e,contractName:x0e,sourceName:w0e,abi:v0e,bytecode:E0e,deployedBytecode:k0e,linkReferences:S0e,deployedLinkReferences:C0e},M0e="0x5FbDB2315678afecb367f032d93F642f64180aa3",T0e="0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",sU={canonToken:M0e,canonThread:T0e};function ri(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ri(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var I0e={value:()=>{}};function z9(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new b3(n)}function b3(e){this._=e}function N0e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}b3.prototype=z9.prototype={constructor:b3,on:function(e,t){var n=this._,r=N0e(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=R0e(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=YL(n[i],e.name,t);else if(t==null)for(i in n)n[i]=YL(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new b3(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function R0e(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function YL(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=I0e,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var TC="http://www.w3.org/1999/xhtml";const ZL={svg:"http://www.w3.org/2000/svg",xhtml:TC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $9(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ZL.hasOwnProperty(t)?{space:ZL[t],local:e}:e}function _0e(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===TC&&t.documentElement.namespaceURI===TC?t.createElement(e):t.createElementNS(n,e)}}function P0e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function mX(e){var t=$9(e);return(t.local?P0e:_0e)(t)}function D0e(){}function kT(e){return e==null?D0e:function(){return this.querySelector(e)}}function L0e(e){typeof e!="function"&&(e=kT(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,f,c=0;c<o;++c)(l=s[c])&&(f=e.call(l,l.__data__,c,s))&&("__data__"in l&&(f.__data__=l.__data__),a[c]=f);return new jo(r,this._parents)}function O0e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function j0e(){return[]}function gX(e){return e==null?j0e:function(){return this.querySelectorAll(e)}}function B0e(e){return function(){return O0e(e.apply(this,arguments))}}function F0e(e){typeof e=="function"?e=B0e(e):e=gX(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,f=0;f<a;++f)(l=o[f])&&(r.push(e.call(l,l.__data__,f,o)),i.push(l));return new jo(r,i)}function bX(e){return function(){return this.matches(e)}}function yX(e){return function(t){return t.matches(e)}}var z0e=Array.prototype.find;function $0e(e){return function(){return z0e.call(this.children,e)}}function H0e(){return this.firstElementChild}function V0e(e){return this.select(e==null?H0e:$0e(typeof e=="function"?e:yX(e)))}var W0e=Array.prototype.filter;function G0e(){return Array.from(this.children)}function X0e(e){return function(){return W0e.call(this.children,e)}}function K0e(e){return this.selectAll(e==null?G0e:X0e(typeof e=="function"?e:yX(e)))}function Y0e(e){typeof e!="function"&&(e=bX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,f=0;f<o;++f)(l=s[f])&&e.call(l,l.__data__,f,s)&&a.push(l);return new jo(r,this._parents)}function UX(e){return new Array(e.length)}function Z0e(){return new jo(this._enter||this._groups.map(UX),this._parents)}function wx(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wx.prototype={constructor:wx,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function q0e(e){return function(){return e}}function Q0e(e,t,n,r,i,s){for(var o=0,a,l=t.length,f=s.length;o<f;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new wx(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function J0e(e,t,n,r,i,s,o){var a,l,f=new Map,c=t.length,d=s.length,u=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(u[a]=h=o.call(l,l.__data__,a,t)+"",f.has(h)?i[a]=l:f.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=f.get(h))?(r[a]=l,l.__data__=s[a],f.delete(h)):n[a]=new wx(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&f.get(u[a])===l&&(i[a]=l)}function ehe(e){return e.__data__}function the(e,t){if(!arguments.length)return Array.from(this,ehe);var n=t?J0e:Q0e,r=this._parents,i=this._groups;typeof e!="function"&&(e=q0e(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),f=0;f<s;++f){var c=r[f],d=i[f],u=d.length,h=nhe(e.call(c,c&&c.__data__,f,r)),g=h.length,y=a[f]=new Array(g),U=o[f]=new Array(g),x=l[f]=new Array(u);n(c,d,y,U,x,h,t);for(var v=0,E=0,k,M;v<g;++v)if(k=y[v]){for(v>=E&&(E=v+1);!(M=U[E])&&++E<g;);k._next=M||null}}return o=new jo(o,r),o._enter=a,o._exit=l,o}function nhe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rhe(){return new jo(this._exit||this._groups.map(UX),this._parents)}function ihe(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function she(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var f=n[l],c=r[l],d=f.length,u=a[l]=new Array(d),h,g=0;g<d;++g)(h=f[g]||c[g])&&(u[g]=h);for(;l<i;++l)a[l]=n[l];return new jo(a,this._parents)}function ohe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function ahe(e){e||(e=lhe);function t(d,u){return d&&u?e(d.__data__,u.__data__):!d-!u}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),f,c=0;c<a;++c)(f=o[c])&&(l[c]=f);l.sort(t)}return new jo(i,this._parents).order()}function lhe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function che(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fhe(){return Array.from(this)}function dhe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function uhe(){let e=0;for(const t of this)++e;return e}function hhe(){return!this.node()}function phe(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function mhe(e){return function(){this.removeAttribute(e)}}function ghe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bhe(e,t){return function(){this.setAttribute(e,t)}}function yhe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Uhe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function xhe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function whe(e,t){var n=$9(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ghe:mhe:typeof t=="function"?n.local?xhe:Uhe:n.local?yhe:bhe)(n,t))}function xX(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vhe(e){return function(){this.style.removeProperty(e)}}function Ehe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function khe(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function She(e,t,n){return arguments.length>1?this.each((t==null?vhe:typeof t=="function"?khe:Ehe)(e,t,n??"")):Ug(this.node(),e)}function Ug(e,t){return e.style.getPropertyValue(t)||xX(e).getComputedStyle(e,null).getPropertyValue(t)}function Che(e){return function(){delete this[e]}}function Ahe(e,t){return function(){this[e]=t}}function Mhe(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function The(e,t){return arguments.length>1?this.each((t==null?Che:typeof t=="function"?Mhe:Ahe)(e,t)):this.node()[e]}function wX(e){return e.trim().split(/^|\s+/)}function ST(e){return e.classList||new vX(e)}function vX(e){this._node=e,this._names=wX(e.getAttribute("class")||"")}vX.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function EX(e,t){for(var n=ST(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function kX(e,t){for(var n=ST(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Ihe(e){return function(){EX(this,e)}}function Nhe(e){return function(){kX(this,e)}}function Rhe(e,t){return function(){(t.apply(this,arguments)?EX:kX)(this,e)}}function _he(e,t){var n=wX(e+"");if(arguments.length<2){for(var r=ST(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Rhe:t?Ihe:Nhe)(n,t))}function Phe(){this.textContent=""}function Dhe(e){return function(){this.textContent=e}}function Lhe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ohe(e){return arguments.length?this.each(e==null?Phe:(typeof e=="function"?Lhe:Dhe)(e)):this.node().textContent}function jhe(){this.innerHTML=""}function Bhe(e){return function(){this.innerHTML=e}}function Fhe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function zhe(e){return arguments.length?this.each(e==null?jhe:(typeof e=="function"?Fhe:Bhe)(e)):this.node().innerHTML}function $he(){this.nextSibling&&this.parentNode.appendChild(this)}function Hhe(){return this.each($he)}function Vhe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Whe(){return this.each(Vhe)}function Ghe(e){var t=typeof e=="function"?e:mX(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Xhe(){return null}function Khe(e,t){var n=typeof e=="function"?e:mX(e),r=t==null?Xhe:typeof t=="function"?t:kT(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Yhe(){var e=this.parentNode;e&&e.removeChild(this)}function Zhe(){return this.each(Yhe)}function qhe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qhe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jhe(e){return this.select(e?Qhe:qhe)}function e1e(e){return arguments.length?this.property("__data__",e):this.node().__data__}function t1e(e){return function(t){e.call(this,t,this.__data__)}}function n1e(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function r1e(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function i1e(e,t,n){return function(){var r=this.__on,i,s=t1e(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function s1e(e,t,n){var r=n1e(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,f=a.length,c;l<f;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?i1e:r1e,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function SX(e,t,n){var r=xX(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function o1e(e,t){return function(){return SX(this,e,t)}}function a1e(e,t){return function(){return SX(this,e,t.apply(this,arguments))}}function l1e(e,t){return this.each((typeof t=="function"?a1e:o1e)(e,t))}function*c1e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var CX=[null];function jo(e,t){this._groups=e,this._parents=t}function cy(){return new jo([[document.documentElement]],CX)}function f1e(){return this}jo.prototype=cy.prototype={constructor:jo,select:L0e,selectAll:F0e,selectChild:V0e,selectChildren:K0e,filter:Y0e,data:the,enter:Z0e,exit:rhe,join:ihe,merge:she,selection:f1e,order:ohe,sort:ahe,call:che,nodes:fhe,node:dhe,size:uhe,empty:hhe,each:phe,attr:whe,style:She,property:The,classed:_he,text:Ohe,html:zhe,raise:Hhe,lower:Whe,append:Ghe,insert:Khe,remove:Zhe,clone:Jhe,datum:e1e,on:s1e,dispatch:l1e,[Symbol.iterator]:c1e};function _o(e){return typeof e=="string"?new jo([[document.querySelector(e)]],[document.documentElement]):new jo([[e]],CX)}function d1e(e){let t;for(;t=e.sourceEvent;)e=t;return e}function el(e,t){if(e=d1e(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const u1e={passive:!1},X2={capture:!0,passive:!1};function EE(e){e.stopImmediatePropagation()}function dm(e){e.preventDefault(),e.stopImmediatePropagation()}function AX(e){var t=e.document.documentElement,n=_o(e).on("dragstart.drag",dm,X2);"onselectstart"in t?n.on("selectstart.drag",dm,X2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function MX(e,t){var n=e.document.documentElement,r=_o(e).on("dragstart.drag",null);t&&(r.on("click.drag",dm,X2),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const oU=e=>()=>e;function IC(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:f,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:c}})}IC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function h1e(e){return!e.ctrlKey&&!e.button}function p1e(){return this.parentNode}function m1e(e,t){return t??{x:e.x,y:e.y}}function g1e(){return navigator.maxTouchPoints||"ontouchstart"in this}function TX(){var e=h1e,t=p1e,n=m1e,r=g1e,i={},s=z9("start","drag","end"),o=0,a,l,f,c,d=0;function u(k){k.on("mousedown.drag",h).filter(r).on("touchstart.drag",U).on("touchmove.drag",x,u1e).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(k,M){if(!(c||!e.call(this,k,M))){var S=E(this,t.call(this,k,M),k,M,"mouse");S&&(_o(k.view).on("mousemove.drag",g,X2).on("mouseup.drag",y,X2),AX(k.view),EE(k),f=!1,a=k.clientX,l=k.clientY,S("start",k))}}function g(k){if(dm(k),!f){var M=k.clientX-a,S=k.clientY-l;f=M*M+S*S>d}i.mouse("drag",k)}function y(k){_o(k.view).on("mousemove.drag mouseup.drag",null),MX(k.view,f),dm(k),i.mouse("end",k)}function U(k,M){if(e.call(this,k,M)){var S=k.changedTouches,A=t.call(this,k,M),I=S.length,R,P;for(R=0;R<I;++R)(P=E(this,A,k,M,S[R].identifier,S[R]))&&(EE(k),P("start",k,S[R]))}}function x(k){var M=k.changedTouches,S=M.length,A,I;for(A=0;A<S;++A)(I=i[M[A].identifier])&&(dm(k),I("drag",k,M[A]))}function v(k){var M=k.changedTouches,S=M.length,A,I;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<S;++A)(I=i[M[A].identifier])&&(EE(k),I("end",k,M[A]))}function E(k,M,S,A,I,R){var P=s.copy(),_=el(R||S,M),O,V,j;if((j=n.call(k,new IC("beforestart",{sourceEvent:S,target:u,identifier:I,active:o,x:_[0],y:_[1],dx:0,dy:0,dispatch:P}),A))!=null)return O=j.x-_[0]||0,V=j.y-_[1]||0,function F(z,H,G){var W=_,B;switch(z){case"start":i[I]=F,B=o++;break;case"end":delete i[I],--o;case"drag":_=el(G||H,M),B=o;break}P.call(z,k,new IC(z,{sourceEvent:H,subject:j,target:u,identifier:I,active:B,x:_[0]+O,y:_[1]+V,dx:_[0]-W[0],dy:_[1]-W[1],dispatch:P}),A)}}return u.filter=function(k){return arguments.length?(e=typeof k=="function"?k:oU(!!k),u):e},u.container=function(k){return arguments.length?(t=typeof k=="function"?k:oU(k),u):t},u.subject=function(k){return arguments.length?(n=typeof k=="function"?k:oU(k),u):n},u.touchable=function(k){return arguments.length?(r=typeof k=="function"?k:oU(!!k),u):r},u.on=function(){var k=s.on.apply(s,arguments);return k===s?u:k},u.clickDistance=function(k){return arguments.length?(d=(k=+k)*k,u):Math.sqrt(d)},u}function CT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function IX(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function fy(){}var K2=.7,vx=1/K2,um="\\s*([+-]?\\d+)\\s*",Y2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b1e=/^#([0-9a-f]{3,8})$/,y1e=new RegExp(`^rgb\\(${um},${um},${um}\\)$`),U1e=new RegExp(`^rgb\\(${yc},${yc},${yc}\\)$`),x1e=new RegExp(`^rgba\\(${um},${um},${um},${Y2}\\)$`),w1e=new RegExp(`^rgba\\(${yc},${yc},${yc},${Y2}\\)$`),v1e=new RegExp(`^hsl\\(${Y2},${yc},${yc}\\)$`),E1e=new RegExp(`^hsla\\(${Y2},${yc},${yc},${Y2}\\)$`),qL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};CT(fy,n1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:QL,formatHex:QL,formatHex8:k1e,formatHsl:S1e,formatRgb:JL,toString:JL});function QL(){return this.rgb().formatHex()}function k1e(){return this.rgb().formatHex8()}function S1e(){return NX(this).formatHsl()}function JL(){return this.rgb().formatRgb()}function n1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=b1e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?eO(t):n===3?new oo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?aU(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?aU(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=y1e.exec(e))?new oo(t[1],t[2],t[3],1):(t=U1e.exec(e))?new oo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=x1e.exec(e))?aU(t[1],t[2],t[3],t[4]):(t=w1e.exec(e))?aU(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=v1e.exec(e))?rO(t[1],t[2]/100,t[3]/100,1):(t=E1e.exec(e))?rO(t[1],t[2]/100,t[3]/100,t[4]):qL.hasOwnProperty(e)?eO(qL[e]):e==="transparent"?new oo(NaN,NaN,NaN,0):null}function eO(e){return new oo(e>>16&255,e>>8&255,e&255,1)}function aU(e,t,n,r){return r<=0&&(e=t=n=NaN),new oo(e,t,n,r)}function C1e(e){return e instanceof fy||(e=n1(e)),e?(e=e.rgb(),new oo(e.r,e.g,e.b,e.opacity)):new oo}function NC(e,t,n,r){return arguments.length===1?C1e(e):new oo(e,t,n,r??1)}function oo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}CT(oo,NC,IX(fy,{brighter(e){return e=e==null?vx:Math.pow(vx,e),new oo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?K2:Math.pow(K2,e),new oo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new oo(Oh(this.r),Oh(this.g),Oh(this.b),Ex(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tO,formatHex:tO,formatHex8:A1e,formatRgb:nO,toString:nO}));function tO(){return`#${rh(this.r)}${rh(this.g)}${rh(this.b)}`}function A1e(){return`#${rh(this.r)}${rh(this.g)}${rh(this.b)}${rh((isNaN(this.opacity)?1:this.opacity)*255)}`}function nO(){const e=Ex(this.opacity);return`${e===1?"rgb(":"rgba("}${Oh(this.r)}, ${Oh(this.g)}, ${Oh(this.b)}${e===1?")":`, ${e})`}`}function Ex(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rh(e){return e=Oh(e),(e<16?"0":"")+e.toString(16)}function rO(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rl(e,t,n,r)}function NX(e){if(e instanceof rl)return new rl(e.h,e.s,e.l,e.opacity);if(e instanceof fy||(e=n1(e)),!e)return new rl;if(e instanceof rl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new rl(o,a,l,e.opacity)}function M1e(e,t,n,r){return arguments.length===1?NX(e):new rl(e,t,n,r??1)}function rl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}CT(rl,M1e,IX(fy,{brighter(e){return e=e==null?vx:Math.pow(vx,e),new rl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?K2:Math.pow(K2,e),new rl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new oo(kE(e>=240?e-240:e+120,i,r),kE(e,i,r),kE(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new rl(iO(this.h),lU(this.s),lU(this.l),Ex(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ex(this.opacity);return`${e===1?"hsl(":"hsla("}${iO(this.h)}, ${lU(this.s)*100}%, ${lU(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iO(e){return e=(e||0)%360,e<0?e+360:e}function lU(e){return Math.max(0,Math.min(1,e||0))}function kE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const H9=e=>()=>e;function RX(e,t){return function(n){return e+n*t}}function T1e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function rqe(e,t){var n=t-e;return n?RX(e,n>180||n<-180?n-360*Math.round(n/360):n):H9(isNaN(e)?t:e)}function I1e(e){return(e=+e)==1?_X:function(t,n){return n-t?T1e(t,n,e):H9(isNaN(t)?n:t)}}function _X(e,t){var n=t-e;return n?RX(e,n):H9(isNaN(e)?t:e)}const kx=function e(t){var n=I1e(t);function r(i,s){var o=n((i=NC(i)).r,(s=NC(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),f=_X(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=f(c),i+""}}return r.gamma=e,r}(1);function N1e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function R1e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _1e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=r2(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function P1e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function oc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function D1e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=r2(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var RC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SE=new RegExp(RC.source,"g");function L1e(e){return function(){return e}}function O1e(e){return function(t){return e(t)+""}}function PX(e,t){var n=RC.lastIndex=SE.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=RC.exec(e))&&(i=SE.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:oc(r,i)})),n=SE.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?O1e(l[0].x):L1e(t):(t=l.length,function(f){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(f);return a.join("")})}function r2(e,t){var n=typeof t,r;return t==null||n==="boolean"?H9(t):(n==="number"?oc:n==="string"?(r=n1(t))?(t=r,kx):PX:t instanceof n1?kx:t instanceof Date?P1e:R1e(t)?N1e:Array.isArray(t)?_1e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?D1e:oc)(e,t)}var sO=180/Math.PI,_C={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function DX(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*sO,skewX:Math.atan(l)*sO,scaleX:o,scaleY:a}}var cU;function j1e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_C:DX(t.a,t.b,t.c,t.d,t.e,t.f)}function B1e(e){return e==null||(cU||(cU=document.createElementNS("http://www.w3.org/2000/svg","g")),cU.setAttribute("transform",e),!(e=cU.transform.baseVal.consolidate()))?_C:(e=e.matrix,DX(e.a,e.b,e.c,e.d,e.e,e.f))}function LX(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,c,d,u,h,g){if(f!==d||c!==u){var y=h.push("translate(",null,t,null,n);g.push({i:y-4,x:oc(f,d)},{i:y-2,x:oc(c,u)})}else(d||u)&&h.push("translate("+d+t+u+n)}function o(f,c,d,u){f!==c?(f-c>180?c+=360:c-f>180&&(f+=360),u.push({i:d.push(i(d)+"rotate(",null,r)-2,x:oc(f,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(f,c,d,u){f!==c?u.push({i:d.push(i(d)+"skewX(",null,r)-2,x:oc(f,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(f,c,d,u,h,g){if(f!==d||c!==u){var y=h.push(i(h)+"scale(",null,",",null,")");g.push({i:y-4,x:oc(f,d)},{i:y-2,x:oc(c,u)})}else(d!==1||u!==1)&&h.push(i(h)+"scale("+d+","+u+")")}return function(f,c){var d=[],u=[];return f=e(f),c=e(c),s(f.translateX,f.translateY,c.translateX,c.translateY,d,u),o(f.rotate,c.rotate,d,u),a(f.skewX,c.skewX,d,u),l(f.scaleX,f.scaleY,c.scaleX,c.scaleY,d,u),f=c=null,function(h){for(var g=-1,y=u.length,U;++g<y;)d[(U=u[g]).i]=U.x(h);return d.join("")}}}var F1e=LX(j1e,"px, ","px)","deg)"),z1e=LX(B1e,", ",")",")"),$1e=1e-12;function oO(e){return((e=Math.exp(e))+1/e)/2}function H1e(e){return((e=Math.exp(e))-1/e)/2}function V1e(e){return((e=Math.exp(2*e))-1)/(e+1)}const y3=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],f=s[2],c=o[0],d=o[1],u=o[2],h=c-a,g=d-l,y=h*h+g*g,U,x;if(y<$1e)x=Math.log(u/f)/t,U=function(A){return[a+A*h,l+A*g,f*Math.exp(t*A*x)]};else{var v=Math.sqrt(y),E=(u*u-f*f+r*y)/(2*f*n*v),k=(u*u-f*f-r*y)/(2*u*n*v),M=Math.log(Math.sqrt(E*E+1)-E),S=Math.log(Math.sqrt(k*k+1)-k);x=(S-M)/t,U=function(A){var I=A*x,R=oO(M),P=f/(n*v)*(R*V1e(t*I+M)-H1e(M));return[a+P*h,l+P*g,f*R/oO(t*I+M)]}}return U.duration=x*1e3*t/Math.SQRT2,U}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);var xg=0,L5=0,t5=0,OX=1e3,Sx,O5,Cx=0,r1=0,V9=0,Z2=typeof performance=="object"&&performance.now?performance:Date,jX=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function AT(){return r1||(jX(W1e),r1=Z2.now()+V9)}function W1e(){r1=0}function Ax(){this._call=this._time=this._next=null}Ax.prototype=BX.prototype={constructor:Ax,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?AT():+n)+(t==null?0:+t),!this._next&&O5!==this&&(O5?O5._next=this:Sx=this,O5=this),this._call=e,this._time=n,PC()},stop:function(){this._call&&(this._call=null,this._time=1/0,PC())}};function BX(e,t,n){var r=new Ax;return r.restart(e,t,n),r}function G1e(){AT(),++xg;for(var e=Sx,t;e;)(t=r1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xg}function aO(){r1=(Cx=Z2.now())+V9,xg=L5=0;try{G1e()}finally{xg=0,K1e(),r1=0}}function X1e(){var e=Z2.now(),t=e-Cx;t>OX&&(V9-=t,Cx=e)}function K1e(){for(var e,t=Sx,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Sx=n);O5=e,PC(r)}function PC(e){if(!xg){L5&&(L5=clearTimeout(L5));var t=e-r1;t>24?(e<1/0&&(L5=setTimeout(aO,e-Z2.now()-V9)),t5&&(t5=clearInterval(t5))):(t5||(Cx=Z2.now(),t5=setInterval(X1e,OX)),xg=1,jX(aO))}}function lO(e,t,n){var r=new Ax;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Y1e=z9("start","end","cancel","interrupt"),Z1e=[],FX=0,cO=1,DC=2,U3=3,fO=4,LC=5,x3=6;function W9(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;q1e(e,n,{name:t,index:r,group:i,on:Y1e,tween:Z1e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:FX})}function MT(e,t){var n=Tl(e,t);if(n.state>FX)throw new Error("too late; already scheduled");return n}function Pc(e,t){var n=Tl(e,t);if(n.state>U3)throw new Error("too late; already running");return n}function Tl(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function q1e(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=BX(s,0,n.time);function s(f){n.state=cO,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var c,d,u,h;if(n.state!==cO)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===U3)return lO(o);h.state===fO?(h.state=x3,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=x3,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(lO(function(){n.state===U3&&(n.state=fO,n.timer.restart(a,n.delay,n.time),a(f))}),n.state=DC,n.on.call("start",e,e.__data__,n.index,n.group),n.state===DC){for(n.state=U3,i=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(f){for(var c=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=LC,1),d=-1,u=i.length;++d<u;)i[d].call(e,c);n.state===LC&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=x3,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function w3(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>DC&&r.state<LC,r.state=x3,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Q1e(e){return this.each(function(){w3(this,e)})}function J1e(e,t){var n,r;return function(){var i=Pc(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function epe(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Pc(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,f=i.length;l<f;++l)if(i[l].name===t){i[l]=a;break}l===f&&i.push(a)}s.tween=i}}function tpe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Tl(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?J1e:epe)(n,e,t))}function TT(e,t,n){var r=e._id;return e.each(function(){var i=Pc(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Tl(i,r).value[t]}}function zX(e,t){var n;return(typeof t=="number"?oc:t instanceof n1?kx:(n=n1(t))?(t=n,kx):PX)(e,t)}function npe(e){return function(){this.removeAttribute(e)}}function rpe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ipe(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function spe(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function ope(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function ape(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function lpe(e,t){var n=$9(e),r=n==="transform"?z1e:zX;return this.attrTween(e,typeof t=="function"?(n.local?ape:ope)(n,r,TT(this,"attr."+e,t)):t==null?(n.local?rpe:npe)(n):(n.local?spe:ipe)(n,r,t))}function cpe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function fpe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function dpe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&fpe(e,s)),n}return i._value=t,i}function upe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&cpe(e,s)),n}return i._value=t,i}function hpe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$9(e);return this.tween(n,(r.local?dpe:upe)(r,t))}function ppe(e,t){return function(){MT(this,e).delay=+t.apply(this,arguments)}}function mpe(e,t){return t=+t,function(){MT(this,e).delay=t}}function gpe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ppe:mpe)(t,e)):Tl(this.node(),t).delay}function bpe(e,t){return function(){Pc(this,e).duration=+t.apply(this,arguments)}}function ype(e,t){return t=+t,function(){Pc(this,e).duration=t}}function Upe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bpe:ype)(t,e)):Tl(this.node(),t).duration}function xpe(e,t){if(typeof t!="function")throw new Error;return function(){Pc(this,e).ease=t}}function wpe(e){var t=this._id;return arguments.length?this.each(xpe(t,e)):Tl(this.node(),t).ease}function vpe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pc(this,e).ease=n}}function Epe(e){if(typeof e!="function")throw new Error;return this.each(vpe(this._id,e))}function kpe(e){typeof e!="function"&&(e=bX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,f=0;f<o;++f)(l=s[f])&&e.call(l,l.__data__,f,s)&&a.push(l);return new Gf(r,this._parents,this._name,this._id)}function Spe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],f=n[a],c=l.length,d=o[a]=new Array(c),u,h=0;h<c;++h)(u=l[h]||f[h])&&(d[h]=u);for(;a<r;++a)o[a]=t[a];return new Gf(o,this._parents,this._name,this._id)}function Cpe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ape(e,t,n){var r,i,s=Cpe(t)?MT:Pc;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Mpe(e,t){var n=this._id;return arguments.length<2?Tl(this.node(),n).on.on(e):this.each(Ape(n,e,t))}function Tpe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ipe(){return this.on("end.remove",Tpe(this._id))}function Npe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kT(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,f=s[o]=new Array(l),c,d,u=0;u<l;++u)(c=a[u])&&(d=e.call(c,c.__data__,u,a))&&("__data__"in c&&(d.__data__=c.__data__),f[u]=d,W9(f[u],t,n,u,f,Tl(c,n)));return new Gf(s,this._parents,t,n)}function Rpe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gX(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],f=l.length,c,d=0;d<f;++d)if(c=l[d]){for(var u=e.call(c,c.__data__,d,l),h,g=Tl(c,n),y=0,U=u.length;y<U;++y)(h=u[y])&&W9(h,t,n,y,u,g);s.push(u),o.push(c)}return new Gf(s,o,t,n)}var _pe=cy.prototype.constructor;function Ppe(){return new _pe(this._groups,this._parents)}function Dpe(e,t){var n,r,i;return function(){var s=Ug(this,e),o=(this.style.removeProperty(e),Ug(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function $X(e){return function(){this.style.removeProperty(e)}}function Lpe(e,t,n){var r,i=n+"",s;return function(){var o=Ug(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Ope(e,t,n){var r,i,s;return function(){var o=Ug(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ug(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function jpe(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Pc(this,e),f=l.on,c=l.value[s]==null?a||(a=$X(t)):void 0;(f!==n||i!==c)&&(r=(n=f).copy()).on(o,i=c),l.on=r}}function Bpe(e,t,n){var r=(e+="")=="transform"?F1e:zX;return t==null?this.styleTween(e,Dpe(e,r)).on("end.style."+e,$X(e)):typeof t=="function"?this.styleTween(e,Ope(e,r,TT(this,"style."+e,t))).each(jpe(this._id,e)):this.styleTween(e,Lpe(e,r,t),n).on("end.style."+e,null)}function Fpe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function zpe(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Fpe(e,o,n)),r}return s._value=t,s}function $pe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,zpe(e,t,n??""))}function Hpe(e){return function(){this.textContent=e}}function Vpe(e){return function(){var t=e(this);this.textContent=t??""}}function Wpe(e){return this.tween("text",typeof e=="function"?Vpe(TT(this,"text",e)):Hpe(e==null?"":e+""))}function Gpe(e){return function(t){this.textContent=e.call(this,t)}}function Xpe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Gpe(i)),t}return r._value=e,r}function Kpe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xpe(e))}function Ype(){for(var e=this._name,t=this._id,n=HX(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,f=0;f<a;++f)if(l=o[f]){var c=Tl(l,t);W9(l,e,n,f,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Gf(r,this._parents,e,n)}function Zpe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var f=Pc(this,r),c=f.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),f.on=t}),i===0&&s()})}var qpe=0;function Gf(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function HX(){return++qpe}var Jc=cy.prototype;Gf.prototype={constructor:Gf,select:Npe,selectAll:Rpe,selectChild:Jc.selectChild,selectChildren:Jc.selectChildren,filter:kpe,merge:Spe,selection:Ppe,transition:Ype,call:Jc.call,nodes:Jc.nodes,node:Jc.node,size:Jc.size,empty:Jc.empty,each:Jc.each,on:Mpe,attr:lpe,attrTween:hpe,style:Bpe,styleTween:$pe,text:Wpe,textTween:Kpe,remove:Ipe,tween:tpe,delay:gpe,duration:Upe,ease:wpe,easeVarying:Epe,end:Zpe,[Symbol.iterator]:Jc[Symbol.iterator]};function Qpe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Jpe={time:null,delay:0,duration:250,ease:Qpe};function eme(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function tme(e){var t,n;e instanceof Gf?(t=e._id,e=e._name):(t=HX(),(n=Jpe).time=AT(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,f=0;f<a;++f)(l=o[f])&&W9(l,e,t,f,o,n||eme(l,t));return new Gf(r,this._parents,e,t)}cy.prototype.interrupt=Q1e;cy.prototype.transition=tme;const fU=e=>()=>e;function nme(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Pf(e,t,n){this.k=e,this.x=t,this.y=n}Pf.prototype={constructor:Pf,scale:function(e){return e===1?this:new Pf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Pf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var G9=new Pf(1,0,0);VX.prototype=Pf.prototype;function VX(e){for(;!e.__zoom;)if(!(e=e.parentNode))return G9;return e.__zoom}function CE(e){e.stopImmediatePropagation()}function n5(e){e.preventDefault(),e.stopImmediatePropagation()}function rme(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ime(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function dO(){return this.__zoom||G9}function sme(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ome(){return navigator.maxTouchPoints||"ontouchstart"in this}function ame(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function WX(){var e=rme,t=ime,n=ame,r=sme,i=ome,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=y3,f=z9("start","zoom","end"),c,d,u,h=500,g=150,y=0,U=10;function x(j){j.property("__zoom",dO).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",P).filter(i).on("touchstart.zoom",_).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(j,F,z,H){var G=j.selection?j.selection():j;G.property("__zoom",dO),j!==G?M(j,F,z,H):G.interrupt().each(function(){S(this,arguments).event(H).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},x.scaleBy=function(j,F,z,H){x.scaleTo(j,function(){var G=this.__zoom.k,W=typeof F=="function"?F.apply(this,arguments):F;return G*W},z,H)},x.scaleTo=function(j,F,z,H){x.transform(j,function(){var G=t.apply(this,arguments),W=this.__zoom,B=z==null?k(G):typeof z=="function"?z.apply(this,arguments):z,X=W.invert(B),q=typeof F=="function"?F.apply(this,arguments):F;return n(E(v(W,q),B,X),G,o)},z,H)},x.translateBy=function(j,F,z,H){x.transform(j,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof z=="function"?z.apply(this,arguments):z),t.apply(this,arguments),o)},null,H)},x.translateTo=function(j,F,z,H,G){x.transform(j,function(){var W=t.apply(this,arguments),B=this.__zoom,X=H==null?k(W):typeof H=="function"?H.apply(this,arguments):H;return n(G9.translate(X[0],X[1]).scale(B.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof z=="function"?-z.apply(this,arguments):-z),W,o)},H,G)};function v(j,F){return F=Math.max(s[0],Math.min(s[1],F)),F===j.k?j:new Pf(F,j.x,j.y)}function E(j,F,z){var H=F[0]-z[0]*j.k,G=F[1]-z[1]*j.k;return H===j.x&&G===j.y?j:new Pf(j.k,H,G)}function k(j){return[(+j[0][0]+ +j[1][0])/2,(+j[0][1]+ +j[1][1])/2]}function M(j,F,z,H){j.on("start.zoom",function(){S(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(H).end()}).tween("zoom",function(){var G=this,W=arguments,B=S(G,W).event(H),X=t.apply(G,W),q=z==null?k(X):typeof z=="function"?z.apply(G,W):z,Y=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),oe=G.__zoom,ge=typeof F=="function"?F.apply(G,W):F,he=l(oe.invert(q).concat(Y/oe.k),ge.invert(q).concat(Y/ge.k));return function(ce){if(ce===1)ce=ge;else{var ie=he(ce),we=Y/ie[2];ce=new Pf(we,q[0]-ie[0]*we,q[1]-ie[1]*we)}B.zoom(null,ce)}})}function S(j,F,z){return!z&&j.__zooming||new A(j,F)}function A(j,F){this.that=j,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(j,F),this.taps=0}A.prototype={event:function(j){return j&&(this.sourceEvent=j),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(j,F){return this.mouse&&j!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&j!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&j!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(j){var F=_o(this.that).datum();f.call(j,this.that,new nme(j,{sourceEvent:this.sourceEvent,target:x,type:j,transform:this.that.__zoom,dispatch:f}),F)}};function I(j,...F){if(!e.apply(this,arguments))return;var z=S(this,F).event(j),H=this.__zoom,G=Math.max(s[0],Math.min(s[1],H.k*Math.pow(2,r.apply(this,arguments)))),W=el(j);if(z.wheel)(z.mouse[0][0]!==W[0]||z.mouse[0][1]!==W[1])&&(z.mouse[1]=H.invert(z.mouse[0]=W)),clearTimeout(z.wheel);else{if(H.k===G)return;z.mouse=[W,H.invert(W)],w3(this),z.start()}n5(j),z.wheel=setTimeout(B,g),z.zoom("mouse",n(E(v(H,G),z.mouse[0],z.mouse[1]),z.extent,o));function B(){z.wheel=null,z.end()}}function R(j,...F){if(u||!e.apply(this,arguments))return;var z=j.currentTarget,H=S(this,F,!0).event(j),G=_o(j.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",Y,!0),W=el(j,z),B=j.clientX,X=j.clientY;AX(j.view),CE(j),H.mouse=[W,this.__zoom.invert(W)],w3(this),H.start();function q(oe){if(n5(oe),!H.moved){var ge=oe.clientX-B,he=oe.clientY-X;H.moved=ge*ge+he*he>y}H.event(oe).zoom("mouse",n(E(H.that.__zoom,H.mouse[0]=el(oe,z),H.mouse[1]),H.extent,o))}function Y(oe){G.on("mousemove.zoom mouseup.zoom",null),MX(oe.view,H.moved),n5(oe),H.event(oe).end()}}function P(j,...F){if(e.apply(this,arguments)){var z=this.__zoom,H=el(j.changedTouches?j.changedTouches[0]:j,this),G=z.invert(H),W=z.k*(j.shiftKey?.5:2),B=n(E(v(z,W),H,G),t.apply(this,F),o);n5(j),a>0?_o(this).transition().duration(a).call(M,B,H,j):_o(this).call(x.transform,B,H,j)}}function _(j,...F){if(e.apply(this,arguments)){var z=j.touches,H=z.length,G=S(this,F,j.changedTouches.length===H).event(j),W,B,X,q;for(CE(j),B=0;B<H;++B)X=z[B],q=el(X,this),q=[q,this.__zoom.invert(q),X.identifier],G.touch0?!G.touch1&&G.touch0[2]!==q[2]&&(G.touch1=q,G.taps=0):(G.touch0=q,W=!0,G.taps=1+!!c);c&&(c=clearTimeout(c)),W&&(G.taps<2&&(d=q[0],c=setTimeout(function(){c=null},h)),w3(this),G.start())}}function O(j,...F){if(this.__zooming){var z=S(this,F).event(j),H=j.changedTouches,G=H.length,W,B,X,q;for(n5(j),W=0;W<G;++W)B=H[W],X=el(B,this),z.touch0&&z.touch0[2]===B.identifier?z.touch0[0]=X:z.touch1&&z.touch1[2]===B.identifier&&(z.touch1[0]=X);if(B=z.that.__zoom,z.touch1){var Y=z.touch0[0],oe=z.touch0[1],ge=z.touch1[0],he=z.touch1[1],ce=(ce=ge[0]-Y[0])*ce+(ce=ge[1]-Y[1])*ce,ie=(ie=he[0]-oe[0])*ie+(ie=he[1]-oe[1])*ie;B=v(B,Math.sqrt(ce/ie)),X=[(Y[0]+ge[0])/2,(Y[1]+ge[1])/2],q=[(oe[0]+he[0])/2,(oe[1]+he[1])/2]}else if(z.touch0)X=z.touch0[0],q=z.touch0[1];else return;z.zoom("touch",n(E(B,X,q),z.extent,o))}}function V(j,...F){if(this.__zooming){var z=S(this,F).event(j),H=j.changedTouches,G=H.length,W,B;for(CE(j),u&&clearTimeout(u),u=setTimeout(function(){u=null},h),W=0;W<G;++W)B=H[W],z.touch0&&z.touch0[2]===B.identifier?delete z.touch0:z.touch1&&z.touch1[2]===B.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(B=el(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<U)){var X=_o(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return x.wheelDelta=function(j){return arguments.length?(r=typeof j=="function"?j:fU(+j),x):r},x.filter=function(j){return arguments.length?(e=typeof j=="function"?j:fU(!!j),x):e},x.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:fU(!!j),x):i},x.extent=function(j){return arguments.length?(t=typeof j=="function"?j:fU([[+j[0][0],+j[0][1]],[+j[1][0],+j[1][1]]]),x):t},x.scaleExtent=function(j){return arguments.length?(s[0]=+j[0],s[1]=+j[1],x):[s[0],s[1]]},x.translateExtent=function(j){return arguments.length?(o[0][0]=+j[0][0],o[1][0]=+j[1][0],o[0][1]=+j[0][1],o[1][1]=+j[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(j){return arguments.length?(n=j,x):n},x.duration=function(j){return arguments.length?(a=+j,x):a},x.interpolate=function(j){return arguments.length?(l=j,x):l},x.on=function(){var j=f.on.apply(f,arguments);return j===f?x:j},x.clickDistance=function(j){return arguments.length?(y=(j=+j)*j,x):Math.sqrt(y)},x.tapDistance=function(j){return arguments.length?(U=+j,x):U},x}const vc={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},q2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],GX=["Enter"," ","Escape"],XX={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var wg;(function(e){e.Strict="strict",e.Loose="loose"})(wg||(wg={}));var jh;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(jh||(jh={}));var Q2;(function(e){e.Partial="partial",e.Full="full"})(Q2||(Q2={}));const KX={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var ou;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ou||(ou={}));var Mx;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Mx||(Mx={}));var at;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(at||(at={}));const uO={[at.Left]:at.Right,[at.Right]:at.Left,[at.Top]:at.Bottom,[at.Bottom]:at.Top};function YX(e){return e===null?null:e?"valid":"invalid"}const ZX=e=>"id"in e&&"source"in e&&"target"in e,lme=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),IT=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),dy=(e,t=[0,0])=>{const{width:n,height:r}=od(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},cme=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):IT(i)?i:t.nodeLookup.get(i.id));const a=o?Tx(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return X9(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return K9(n)},uy=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=X9(n,Tx(i)),r=!0)}),r?K9(n):{x:0,y:0,width:0,height:0}},NT=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...py(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const f of e.values()){const{measured:c,selectable:d=!0,hidden:u=!1}=f;if(o&&!d||u)continue;const h=c.width??f.width??f.initialWidth??null,g=c.height??f.height??f.initialHeight??null,y=J2(a,Eg(f)),U=(h??0)*(g??0),x=s&&y>0;(!f.internals.handleBounds||x||y>=U||f.dragging)&&l.push(f)}return l},fme=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function dme(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function ume({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const a=dme(e,o),l=uy(a),f=RT(l,t,n,(o==null?void 0:o.minZoom)??i,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await r.setViewport(f,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)}function qX({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:l,y:f}=a?a.internals.positionAbsolute:{x:0,y:0},c=o.origin??r;let d=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!a)s==null||s("005",vc.error005());else{const h=a.measured.width,g=a.measured.height;h&&g&&(d=[[l,f],[l+h,f+g]])}else a&&kg(o.extent)&&(d=[[o.extent[0][0]+l,o.extent[0][1]+f],[o.extent[1][0]+l,o.extent[1][1]+f]]);const u=kg(d)?i1(t,d,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(s==null||s("015",vc.error015())),{position:{x:u.x-l+(o.measured.width??0)*c[0],y:u.y-f+(o.measured.height??0)*c[1]},positionAbsolute:u}}async function hme({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(u=>u.id)),o=[];for(const u of n){if(u.deletable===!1)continue;const h=s.has(u.id),g=!h&&u.parentId&&o.find(y=>y.id===u.parentId);(h||g)&&o.push(u)}const a=new Set(t.map(u=>u.id)),l=r.filter(u=>u.deletable!==!1),c=fme(o,l);for(const u of l)a.has(u.id)&&!c.find(g=>g.id===u.id)&&c.push(u);if(!i)return{edges:c,nodes:o};const d=await i({nodes:o,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:o}:{edges:[],nodes:[]}:d}const vg=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),i1=(e={x:0,y:0},t,n)=>({x:vg(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:vg(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function QX(e,t,n){const{width:r,height:i}=od(n),{x:s,y:o}=n.internals.positionAbsolute;return i1(e,[[s,o],[s+r,o+i]],t)}const hO=(e,t,n)=>e<t?vg(Math.abs(e-t),1,t)/t:e>n?-vg(Math.abs(e-n),1,t)/t:0,JX=(e,t,n=15,r=40)=>{const i=hO(e.x,r,t.width-r)*n,s=hO(e.y,r,t.height-r)*n;return[i,s]},X9=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),OC=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),K9=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Eg=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=IT(e)?e.internals.positionAbsolute:dy(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},Tx=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=IT(e)?e.internals.positionAbsolute:dy(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},eK=(e,t)=>K9(X9(OC(e),OC(t))),J2=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},pO=e=>ol(e.width)&&ol(e.height)&&ol(e.x)&&ol(e.y),ol=e=>!isNaN(e)&&isFinite(e),pme=(e,t)=>{},hy=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),py=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return s?hy(a,o):a},Ix=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function mp(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function mme(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=mp(e,n),i=mp(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=mp(e.top??e.y??0,n),i=mp(e.bottom??e.y??0,n),s=mp(e.left??e.x??0,t),o=mp(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function gme(e,t,n,r,i,s){const{x:o,y:a}=Ix(e,[t,n,r]),{x:l,y:f}=Ix({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,d=s-f;return{left:Math.floor(o),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}const RT=(e,t,n,r,i,s)=>{const o=mme(s,t,n),a=(t-o.x)/e.width,l=(n-o.y)/e.height,f=Math.min(a,l),c=vg(f,r,i),d=e.x+e.width/2,u=e.y+e.height/2,h=t/2-d*c,g=n/2-u*c,y=gme(e,h,g,c,t,n),U={left:Math.min(y.left-o.left,0),top:Math.min(y.top-o.top,0),right:Math.min(y.right-o.right,0),bottom:Math.min(y.bottom-o.bottom,0)};return{x:h-U.left+U.right,y:g-U.top+U.bottom,zoom:c}},eb=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function kg(e){return e!=null&&e!=="parent"}function od(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function tK(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function nK(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function mO(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function bme(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function yme(e){return{...XX,...e||{}}}function i2(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=al(e),a=py({x:s-((i==null?void 0:i.left)??0),y:o-((i==null?void 0:i.top)??0)},r),{x:l,y:f}=n?hy(a,t):a;return{xSnapped:l,ySnapped:f,...a}}const _T=e=>({width:e.offsetWidth,height:e.offsetHeight}),rK=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Ume=["INPUT","SELECT","TEXTAREA"];function iK(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Ume.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const sK=e=>"clientX"in e,al=(e,t)=>{var s,o;const n=sK(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},gO=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,..._T(o)}})};function oK({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=e*.125+i*.375+o*.375+n*.125,f=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),d=Math.abs(f-t);return[l,f,c,d]}function dU(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function bO({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case at.Left:return[t-dU(t-r,s),n];case at.Right:return[t+dU(r-t,s),n];case at.Top:return[t,n-dU(n-i,s)];case at.Bottom:return[t,n+dU(i-n,s)]}}function aK({sourceX:e,sourceY:t,sourcePosition:n=at.Bottom,targetX:r,targetY:i,targetPosition:s=at.Top,curvature:o=.25}){const[a,l]=bO({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[f,c]=bO({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,u,h,g]=oK({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:f,targetControlY:c});return[`M${e},${t} C${a},${l} ${f},${c} ${r},${i}`,d,u,h,g]}function lK({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function xme({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:s="basic"}){if(s==="manual")return r;const o=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return o+a}function wme({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=X9(Tx(e),Tx(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return J2(o,K9(s))>0}const vme=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Eme=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),kme=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||vme;let i;return ZX(e)?i={...e}:i={...e,id:r(e)},Eme(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function cK({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=lK({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const yO={[at.Left]:{x:-1,y:0},[at.Right]:{x:1,y:0},[at.Top]:{x:0,y:-1},[at.Bottom]:{x:0,y:1}},Sme=({source:e,sourcePosition:t=at.Bottom,target:n})=>t===at.Left||t===at.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},UO=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Cme({source:e,sourcePosition:t=at.Bottom,target:n,targetPosition:r=at.Top,center:i,offset:s,stepPosition:o}){const a=yO[t],l=yO[r],f={x:e.x+a.x*s,y:e.y+a.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},d=Sme({source:f,sourcePosition:t,target:c}),u=d.x!==0?"x":"y",h=d[u];let g=[],y,U;const x={x:0,y:0},v={x:0,y:0},[,,E,k]=lK({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[u]*l[u]===-1){u==="x"?(y=i.x??f.x+(c.x-f.x)*o,U=i.y??(f.y+c.y)/2):(y=i.x??(f.x+c.x)/2,U=i.y??f.y+(c.y-f.y)*o);const S=[{x:y,y:f.y},{x:y,y:c.y}],A=[{x:f.x,y:U},{x:c.x,y:U}];a[u]===h?g=u==="x"?S:A:g=u==="x"?A:S}else{const S=[{x:f.x,y:c.y}],A=[{x:c.x,y:f.y}];if(u==="x"?g=a.x===h?A:S:g=a.y===h?S:A,t===r){const O=Math.abs(e[u]-n[u]);if(O<=s){const V=Math.min(s-1,s-O);a[u]===h?x[u]=(f[u]>e[u]?-1:1)*V:v[u]=(c[u]>n[u]?-1:1)*V}}if(t!==r){const O=u==="x"?"y":"x",V=a[u]===l[O],j=f[O]>c[O],F=f[O]<c[O];(a[u]===1&&(!V&&j||V&&F)||a[u]!==1&&(!V&&F||V&&j))&&(g=u==="x"?S:A)}const I={x:f.x+x.x,y:f.y+x.y},R={x:c.x+v.x,y:c.y+v.y},P=Math.max(Math.abs(I.x-g[0].x),Math.abs(R.x-g[0].x)),_=Math.max(Math.abs(I.y-g[0].y),Math.abs(R.y-g[0].y));P>=_?(y=(I.x+R.x)/2,U=g[0].y):(y=g[0].x,U=(I.y+R.y)/2)}return[[e,{x:f.x+x.x,y:f.y+x.y},...g,{x:c.x+v.x,y:c.y+v.y},n],y,U,E,k]}function Ame(e,t,n,r){const i=Math.min(UO(e,t)/2,UO(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const f=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function jC({sourceX:e,sourceY:t,sourcePosition:n=at.Bottom,targetX:r,targetY:i,targetPosition:s=at.Top,borderRadius:o=5,centerX:a,centerY:l,offset:f=20,stepPosition:c=.5}){const[d,u,h,g,y]=Cme({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:f,stepPosition:c});return[d.reduce((x,v,E)=>{let k="";return E>0&&E<d.length-1?k=Ame(d[E-1],v,d[E+1],o):k=`${E===0?"M":"L"}${v.x} ${v.y}`,x+=k,x},""),u,h,g,y]}function xO(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Mme(e){var d;const{sourceNode:t,targetNode:n}=e;if(!xO(t)||!xO(n))return null;const r=t.internals.handleBounds||wO(t.handles),i=n.internals.handleBounds||wO(n.handles),s=vO((r==null?void 0:r.source)??[],e.sourceHandle),o=vO(e.connectionMode===wg.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!s||!o)return(d=e.onError)==null||d.call(e,"008",vc.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(s==null?void 0:s.position)||at.Bottom,l=(o==null?void 0:o.position)||at.Top,f=s1(t,s,a),c=s1(n,o,l);return{sourceX:f.x,sourceY:f.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function wO(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function s1(e,t,n=at.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??od(e);if(r)return{x:i+o/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case at.Top:return{x:i+o/2,y:s};case at.Right:return{x:i+o,y:s+a/2};case at.Bottom:return{x:i+o/2,y:s+a};case at.Left:return{x:i,y:s+a/2}}}function vO(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function BC(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Tme(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const f=BC(l,t);s.has(f)||(o.push({id:f,color:l.color||n,...l}),s.add(f))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const fK=1e3,Ime=10,PT={nodeOrigin:[0,0],nodeExtent:q2,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Nme={...PT,checkEquality:!0};function DT(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Rme(e,t,n){const r=DT(PT,n);for(const i of e.values())if(i.parentId)OT(i,e,t,r);else{const s=dy(i,r.nodeOrigin),o=kg(i.extent)?i.extent:r.nodeExtent,a=i1(s,o,od(i));i.internals.positionAbsolute=a}}function _me(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const s={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(s):i.type==="target"&&r.push(s)}return{source:n,target:r}}function LT(e){return e==="manual"}function FC(e,t,n,r={}){var f,c;const i=DT(Nme,r),s={i:0},o=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!LT(i.zIndexMode)?fK:0;let l=e.length>0;t.clear(),n.clear();for(const d of e){let u=o.get(d.id);if(i.checkEquality&&d===(u==null?void 0:u.internals.userNode))t.set(d.id,u);else{const h=dy(d,i.nodeOrigin),g=kg(d.extent)?d.extent:i.nodeExtent,y=i1(h,g,od(d));u={...i.defaults,...d,measured:{width:(f=d.measured)==null?void 0:f.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:y,handleBounds:_me(d,u),z:dK(d,a,i.zIndexMode),userNode:d}},t.set(d.id,u)}(u.measured===void 0||u.measured.width===void 0||u.measured.height===void 0)&&!u.hidden&&(l=!1),d.parentId&&OT(u,t,n,r,s)}return l}function Pme(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function OT(e,t,n,r,i){const{elevateNodesOnSelect:s,nodeOrigin:o,nodeExtent:a,zIndexMode:l}=DT(PT,r),f=e.parentId,c=t.get(f);if(!c){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Pme(e,n),i&&!c.parentId&&c.internals.rootParentIndex===void 0&&l==="auto"&&(c.internals.rootParentIndex=++i.i,c.internals.z=c.internals.z+i.i*Ime),i&&c.internals.rootParentIndex!==void 0&&(i.i=c.internals.rootParentIndex);const d=s&&!LT(l)?fK:0,{x:u,y:h,z:g}=Dme(e,c,o,a,d,l),{positionAbsolute:y}=e.internals,U=u!==y.x||h!==y.y;(U||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:U?{x:u,y:h}:y,z:g}})}function dK(e,t,n){const r=ol(e.zIndex)?e.zIndex:0;return LT(n)?r:r+(e.selected?t:0)}function Dme(e,t,n,r,i,s){const{x:o,y:a}=t.internals.positionAbsolute,l=od(e),f=dy(e,n),c=kg(e.extent)?i1(f,e.extent,l):f;let d=i1({x:o+c.x,y:a+c.y},r,l);e.extent==="parent"&&(d=QX(d,l,t));const u=dK(e,i,s),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>=u?h+1:u}}function jT(e,t,n,r=[0,0]){var o;const i=[],s=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const f=((o=s.get(a.parentId))==null?void 0:o.expandedRect)??Eg(l),c=eK(f,a.rect);s.set(a.parentId,{expandedRect:c,parent:l})}return s.size>0&&s.forEach(({expandedRect:a,parent:l},f)=>{var E;const c=l.internals.positionAbsolute,d=od(l),u=l.origin??r,h=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,g=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,y=Math.max(d.width,Math.round(a.width)),U=Math.max(d.height,Math.round(a.height)),x=(y-d.width)*u[0],v=(U-d.height)*u[1];(h>0||g>0||x||v)&&(i.push({id:f,type:"position",position:{x:l.position.x-h+x,y:l.position.y-g+v}}),(E=n.get(f))==null||E.forEach(k=>{e.some(M=>M.id===k.id)||i.push({id:k.id,type:"position",position:{x:k.position.x+h,y:k.position.y+g}})})),(d.width<a.width||d.height<a.height||h||g)&&i.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:y+(h?u[0]*h-x:0),height:U+(g?u[1]*g-v:0)}})}),i}function Lme(e,t,n,r,i,s,o){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const f=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const h of e.values()){const g=t.get(h.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),l=!0;continue}const y=_T(h.nodeElement),U=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(U||!g.internals.handleBounds||h.force))){const v=h.nodeElement.getBoundingClientRect(),E=kg(g.extent)?g.extent:s;let{positionAbsolute:k}=g.internals;g.parentId&&g.extent==="parent"?k=QX(k,y,t.get(g.parentId)):E&&(k=i1(k,E,y));const M={...g,measured:y,internals:{...g.internals,positionAbsolute:k,handleBounds:{source:gO("source",h.nodeElement,v,d,g.id),target:gO("target",h.nodeElement,v,d,g.id)}}};t.set(g.id,M),g.parentId&&OT(M,t,n,{nodeOrigin:i,zIndexMode:o}),l=!0,U&&(f.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&u.push({id:g.id,parentId:g.parentId,rect:Eg(M,i)}))}}if(u.length>0){const h=jT(u,t,n,i);f.push(...h)}return{changes:f,updatedInternals:l}}async function Ome({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function EO(e,t,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${i}-${e}`;const l=r.get(o)||new Map;if(r.set(o,l.set(n,t)),s){o=`${i}-${e}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,t))}}function uK(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},f=`${i}-${o}--${s}-${a}`,c=`${s}-${a}--${i}-${o}`;EO("source",l,c,e,i,o),EO("target",l,f,e,s,a),t.set(r.id,r)}}function hK(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:hK(n,t):!1}function kO(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function jme(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!hK(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function AE({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,a,l;const i=[];for(const[f,c]of t){const d=(o=n.get(f))==null?void 0:o.internals.userNode;d&&i.push({...d,position:c.position,dragging:r})}if(!e)return[i[0],i];const s=(a=n.get(e))==null?void 0:a.internals.userNode;return[s?{...s,position:((l=t.get(e))==null?void 0:l.position)||s.position,dragging:r}:i[0],i]}function Bme({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=hy(s,t);return{x:o.x-s.x,y:o.y-s.y}}function Fme({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,l=!1,f={x:0,y:0},c=null,d=!1,u=null,h=!1,g=!1,y=null;function U({noDragClassName:v,handleSelector:E,domNode:k,isSelectable:M,nodeId:S,nodeClickDistance:A=0}){u=_o(k);function I({x:O,y:V}){const{nodeLookup:j,nodeExtent:F,snapGrid:z,snapToGrid:H,nodeOrigin:G,onNodeDrag:W,onSelectionDrag:B,onError:X,updateNodePositions:q}=t();s={x:O,y:V};let Y=!1;const oe=a.size>1,ge=oe&&F?OC(uy(a)):null,he=oe&&H?Bme({dragItems:a,snapGrid:z,x:O,y:V}):null;for(const[ce,ie]of a){if(!j.has(ce))continue;let we={x:O-ie.distance.x,y:V-ie.distance.y};H&&(we=he?{x:Math.round(we.x+he.x),y:Math.round(we.y+he.y)}:hy(we,z));let ke=null;if(oe&&F&&!ie.extent&&ge){const{positionAbsolute:$e}=ie.internals,ve=$e.x-ge.x+F[0][0],Le=$e.x+ie.measured.width-ge.x2+F[1][0],Ae=$e.y-ge.y+F[0][1],ct=$e.y+ie.measured.height-ge.y2+F[1][1];ke=[[ve,Ae],[Le,ct]]}const{position:Re,positionAbsolute:Fe}=qX({nodeId:ce,nextPosition:we,nodeLookup:j,nodeExtent:ke||F,nodeOrigin:G,onError:X});Y=Y||ie.position.x!==Re.x||ie.position.y!==Re.y,ie.position=Re,ie.internals.positionAbsolute=Fe}if(g=g||Y,!!Y&&(q(a,!0),y&&(r||W||!S&&B))){const[ce,ie]=AE({nodeId:S,dragItems:a,nodeLookup:j});r==null||r(y,a,ce,ie),W==null||W(y,ce,ie),S||B==null||B(y,ie)}}async function R(){if(!c)return;const{transform:O,panBy:V,autoPanSpeed:j,autoPanOnNodeDrag:F}=t();if(!F){l=!1,cancelAnimationFrame(o);return}const[z,H]=JX(f,c,j);(z!==0||H!==0)&&(s.x=(s.x??0)-z/O[2],s.y=(s.y??0)-H/O[2],await V({x:z,y:H})&&I(s)),o=requestAnimationFrame(R)}function P(O){var oe;const{nodeLookup:V,multiSelectionActive:j,nodesDraggable:F,transform:z,snapGrid:H,snapToGrid:G,selectNodesOnDrag:W,onNodeDragStart:B,onSelectionDragStart:X,unselectNodesAndEdges:q}=t();d=!0,(!W||!M)&&!j&&S&&((oe=V.get(S))!=null&&oe.selected||q()),M&&W&&S&&(e==null||e(S));const Y=i2(O.sourceEvent,{transform:z,snapGrid:H,snapToGrid:G,containerBounds:c});if(s=Y,a=jme(V,F,Y,S),a.size>0&&(n||B||!S&&X)){const[ge,he]=AE({nodeId:S,dragItems:a,nodeLookup:V});n==null||n(O.sourceEvent,a,ge,he),B==null||B(O.sourceEvent,ge,he),S||X==null||X(O.sourceEvent,he)}}const _=TX().clickDistance(A).on("start",O=>{const{domNode:V,nodeDragThreshold:j,transform:F,snapGrid:z,snapToGrid:H}=t();c=(V==null?void 0:V.getBoundingClientRect())||null,h=!1,g=!1,y=O.sourceEvent,j===0&&P(O),s=i2(O.sourceEvent,{transform:F,snapGrid:z,snapToGrid:H,containerBounds:c}),f=al(O.sourceEvent,c)}).on("drag",O=>{const{autoPanOnNodeDrag:V,transform:j,snapGrid:F,snapToGrid:z,nodeDragThreshold:H,nodeLookup:G}=t(),W=i2(O.sourceEvent,{transform:j,snapGrid:F,snapToGrid:z,containerBounds:c});if(y=O.sourceEvent,(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1||S&&!G.has(S))&&(h=!0),!h){if(!l&&V&&d&&(l=!0,R()),!d){const B=al(O.sourceEvent,c),X=B.x-f.x,q=B.y-f.y;Math.sqrt(X*X+q*q)>H&&P(O)}(s.x!==W.xSnapped||s.y!==W.ySnapped)&&a&&d&&(f=al(O.sourceEvent,c),I(W))}}).on("end",O=>{if(!(!d||h)&&(l=!1,d=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:V,updateNodePositions:j,onNodeDragStop:F,onSelectionDragStop:z}=t();if(g&&(j(a,!1),g=!1),i||F||!S&&z){const[H,G]=AE({nodeId:S,dragItems:a,nodeLookup:V,dragging:!1});i==null||i(O.sourceEvent,a,H,G),F==null||F(O.sourceEvent,H,G),S||z==null||z(O.sourceEvent,G)}}}).filter(O=>{const V=O.target;return!O.button&&(!v||!kO(V,`.${v}`,k))&&(!E||kO(V,E,k))});u.call(_)}function x(){u==null||u.on(".drag",null)}return{update:U,destroy:x}}function zme(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())J2(i,Eg(s))>0&&r.push(s);return r}const $me=250;function Hme(e,t,n,r){var a,l;let i=[],s=1/0;const o=zme(e,n,t+$me);for(const f of o){const c=[...((a=f.internals.handleBounds)==null?void 0:a.source)??[],...((l=f.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:u,y:h}=s1(f,d,d.position,!0),g=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(h-e.y,2));g>t||(g<s?(i=[{...d,x:u,y:h}],s=g):g===s&&i.push({...d,x:u,y:h}))}}if(!i.length)return null;if(i.length>1){const f=r.type==="source"?"target":"source";return i.find(c=>c.type===f)??i[0]}return i[0]}function pK(e,t,n,r,i,s=!1){var f,c,d;const o=r.get(e);if(!o)return null;const a=i==="strict"?(f=o.internals.handleBounds)==null?void 0:f[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((d=o.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(u=>u.id===n):a==null?void 0:a[0])??null;return l&&s?{...l,...s1(o,l,l.position,!0)}:l}function mK(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Vme(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const gK=()=>!0;function Wme(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:l,lib:f,autoPanOnConnect:c,flowId:d,panBy:u,cancelConnection:h,onConnectStart:g,onConnect:y,onConnectEnd:U,isValidConnection:x=gK,onReconnectEnd:v,updateConnection:E,getTransform:k,getFromHandle:M,autoPanSpeed:S,dragThreshold:A=1,handleDomNode:I}){const R=rK(e.target);let P=0,_;const{x:O,y:V}=al(e),j=mK(s,I),F=a==null?void 0:a.getBoundingClientRect();let z=!1;if(!F||!j)return;const H=pK(i,j,r,l,t);if(!H)return;let G=al(e,F),W=!1,B=null,X=!1,q=null;function Y(){if(!c||!F)return;const[Re,Fe]=JX(G,F,S);u({x:Re,y:Fe}),P=requestAnimationFrame(Y)}const oe={...H,nodeId:i,type:j,position:H.position},ge=l.get(i);let ce={inProgress:!0,isValid:null,from:s1(ge,oe,at.Left,!0),fromHandle:oe,fromPosition:oe.position,fromNode:ge,to:G,toHandle:null,toPosition:uO[oe.position],toNode:null,pointer:G};function ie(){z=!0,E(ce),g==null||g(e,{nodeId:i,handleId:r,handleType:j})}A===0&&ie();function we(Re){if(!z){const{x:ct,y:jt}=al(Re),xn=ct-O,Wt=jt-V;if(!(xn*xn+Wt*Wt>A*A))return;ie()}if(!M()||!oe){ke(Re);return}const Fe=k();G=al(Re,F),_=Hme(py(G,Fe,!1,[1,1]),n,l,oe),W||(Y(),W=!0);const $e=bK(Re,{handle:_,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:x,doc:R,lib:f,flowId:d,nodeLookup:l});q=$e.handleDomNode,B=$e.connection,X=Vme(!!_,$e.isValid);const ve=l.get(i),Le=ve?s1(ve,oe,at.Left,!0):ce.from,Ae={...ce,from:Le,isValid:X,to:$e.toHandle&&X?Ix({x:$e.toHandle.x,y:$e.toHandle.y},Fe):G,toHandle:$e.toHandle,toPosition:X&&$e.toHandle?$e.toHandle.position:uO[oe.position],toNode:$e.toHandle?l.get($e.toHandle.nodeId):null,pointer:G};E(Ae),ce=Ae}function ke(Re){if(!("touches"in Re&&Re.touches.length>0)){if(z){(_||q)&&B&&X&&(y==null||y(B));const{inProgress:Fe,...$e}=ce,ve={...$e,toPosition:ce.toHandle?ce.toPosition:null};U==null||U(Re,ve),s&&(v==null||v(Re,ve))}h(),cancelAnimationFrame(P),W=!1,X=!1,B=null,q=null,R.removeEventListener("mousemove",we),R.removeEventListener("mouseup",ke),R.removeEventListener("touchmove",we),R.removeEventListener("touchend",ke)}}R.addEventListener("mousemove",we),R.addEventListener("mouseup",ke),R.addEventListener("touchmove",we),R.addEventListener("touchend",ke)}function bK(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:l,isValidConnection:f=gK,nodeLookup:c}){const d=s==="target",u=t?o.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:g}=al(e),y=o.elementFromPoint(h,g),U=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:u,x={handleDomNode:U,isValid:!1,connection:null,toHandle:null};if(U){const v=mK(void 0,U),E=U.getAttribute("data-nodeid"),k=U.getAttribute("data-handleid"),M=U.classList.contains("connectable"),S=U.classList.contains("connectableend");if(!E||!v)return x;const A={source:d?E:r,sourceHandle:d?k:i,target:d?r:E,targetHandle:d?i:k};x.connection=A;const R=M&&S&&(n===wg.Strict?d&&v==="source"||!d&&v==="target":E!==r||k!==i);x.isValid=R&&f(A),x.toHandle=pK(E,v,k,c,n,!0)}return x}const zC={onPointerDown:Wme,isValid:bK};function Gme({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=_o(e);function s({translateExtent:a,width:l,height:f,zoomStep:c=1,pannable:d=!0,zoomable:u=!0,inversePan:h=!1}){const g=E=>{if(E.sourceEvent.type!=="wheel"||!t)return;const k=n(),M=E.sourceEvent.ctrlKey&&eb()?10:1,S=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*c,A=k[2]*Math.pow(2,S*M);t.scaleTo(A)};let y=[0,0];const U=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(y=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},x=E=>{const k=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const M=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],S=[M[0]-y[0],M[1]-y[1]];y=M;const A=r()*Math.max(k[2],Math.log(k[2]))*(h?-1:1),I={x:k[0]-S[0]*A,y:k[1]-S[1]*A},R=[[0,0],[l,f]];t.setViewportConstrained({x:I.x,y:I.y,zoom:k[2]},R,a)},v=WX().on("start",U).on("zoom",d?x:null).on("zoom.wheel",u?g:null);i.call(v,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:el}}const Y9=e=>({x:e.x,y:e.y,zoom:e.k}),ME=({x:e,y:t,zoom:n})=>G9.translate(e,t).scale(n),Wp=(e,t)=>e.target.closest(`.${t}`),yK=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xme=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,TE=(e,t=0,n=Xme,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},UK=e=>{const t=e.ctrlKey&&eb()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Kme({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:f}){return c=>{if(Wp(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&o){const U=el(c),x=UK(c),v=d*Math.pow(2,x);r.scaleTo(n,v,U,c);return}const u=c.deltaMode===1?20:1;let h=i===jh.Vertical?0:c.deltaX*u,g=i===jh.Horizontal?0:c.deltaY*u;!eb()&&c.shiftKey&&i!==jh.Vertical&&(h=c.deltaY*u,g=0),r.translateBy(n,-(h/d)*s,-(g/d)*s,{internal:!0});const y=Y9(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l==null||l(c,y),e.panScrollTimeout=setTimeout(()=>{f==null||f(c,y),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(c,y))}}function Yme({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,a=Wp(r,e);if(r.ctrlKey&&s&&a&&r.preventDefault(),o||a)return null;r.preventDefault(),n.call(this,r,i)}}function Zme({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var s,o,a;if((s=r.sourceEvent)!=null&&s.internal)return;const i=Y9(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function qme({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{var o,a;e.usedRightMouseButton=!!(n&&yK(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!((a=s.sourceEvent)!=null&&a.internal)&&(i==null||i(s.sourceEvent,Y9(s.transform)))}}function Qme({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,s&&yK(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const l=Y9(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(o.sourceEvent,l)},n?150:0)}}}function Jme({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:l,lib:f,connectionInProgress:c}){return d=>{var U;const u=e||t,h=n&&d.ctrlKey,g=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Wp(d,`${f}-flow__node`)||Wp(d,`${f}-flow__edge`)))return!0;if(!r&&!u&&!i&&!s&&!n||o||c&&!g||Wp(d,a)&&g||Wp(d,l)&&(!g||i&&g&&!e)||!n&&d.ctrlKey&&g)return!1;if(!n&&d.type==="touchstart"&&((U=d.touches)==null?void 0:U.length)>1)return d.preventDefault(),!1;if(!u&&!i&&!h&&g||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||g)&&y}}function ege({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:l}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),d=WX().scaleExtent([t,n]).translateExtent(r),u=_o(e).call(d);v({x:i.x,y:i.y,zoom:vg(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const h=u.on("wheel.zoom"),g=u.on("dblclick.zoom");d.wheelDelta(UK);function y(_,O){return u?new Promise(V=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?r2:y3).transform(TE(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>V(!0)),_)}):Promise.resolve(!1)}function U({noWheelClassName:_,noPanClassName:O,onPaneContextMenu:V,userSelectionActive:j,panOnScroll:F,panOnDrag:z,panOnScrollMode:H,panOnScrollSpeed:G,preventScrolling:W,zoomOnPinch:B,zoomOnScroll:X,zoomOnDoubleClick:q,zoomActivationKeyPressed:Y,lib:oe,onTransformChange:ge,connectionInProgress:he,paneClickDistance:ce,selectionOnDrag:ie}){j&&!f.isZoomingOrPanning&&x();const we=F&&!Y&&!j;d.clickDistance(ie?1/0:!ol(ce)||ce<0?0:ce);const ke=we?Kme({zoomPanValues:f,noWheelClassName:_,d3Selection:u,d3Zoom:d,panOnScrollMode:H,panOnScrollSpeed:G,zoomOnPinch:B,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a}):Yme({noWheelClassName:_,preventScrolling:W,d3ZoomHandler:h});if(u.on("wheel.zoom",ke,{passive:!1}),!j){const Fe=Zme({zoomPanValues:f,onDraggingChange:l,onPanZoomStart:o});d.on("start",Fe);const $e=qme({zoomPanValues:f,panOnDrag:z,onPaneContextMenu:!!V,onPanZoom:s,onTransformChange:ge});d.on("zoom",$e);const ve=Qme({zoomPanValues:f,panOnDrag:z,panOnScroll:F,onPaneContextMenu:V,onPanZoomEnd:a,onDraggingChange:l});d.on("end",ve)}const Re=Jme({zoomActivationKeyPressed:Y,panOnDrag:z,zoomOnScroll:X,panOnScroll:F,zoomOnDoubleClick:q,zoomOnPinch:B,userSelectionActive:j,noPanClassName:O,noWheelClassName:_,lib:oe,connectionInProgress:he});d.filter(Re),q?u.on("dblclick.zoom",g):u.on("dblclick.zoom",null)}function x(){d.on("zoom",null)}async function v(_,O,V){const j=ME(_),F=d==null?void 0:d.constrain()(j,O,V);return F&&await y(F),new Promise(z=>z(F))}async function E(_,O){const V=ME(_);return await y(V,O),new Promise(j=>j(V))}function k(_){if(u){const O=ME(_),V=u.property("__zoom");(V.k!==_.zoom||V.x!==_.x||V.y!==_.y)&&(d==null||d.transform(u,O,null,{sync:!0}))}}function M(){const _=u?VX(u.node()):{x:0,y:0,k:1};return{x:_.x,y:_.y,zoom:_.k}}function S(_,O){return u?new Promise(V=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?r2:y3).scaleTo(TE(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>V(!0)),_)}):Promise.resolve(!1)}function A(_,O){return u?new Promise(V=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?r2:y3).scaleBy(TE(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>V(!0)),_)}):Promise.resolve(!1)}function I(_){d==null||d.scaleExtent(_)}function R(_){d==null||d.translateExtent(_)}function P(_){const O=!ol(_)||_<0?0:_;d==null||d.clickDistance(O)}return{update:U,destroy:x,setViewport:E,setViewportConstrained:v,getViewport:M,scaleTo:S,scaleBy:A,setScaleExtent:I,setTranslateExtent:R,syncViewport:k,setClickDistance:P}}var Sg;(function(e){e.Line="line",e.Handle="handle"})(Sg||(Sg={}));function tge({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}function SO(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Bd(e,t){return Math.max(0,t-e)}function Fd(e,t){return Math.max(0,e-t)}function uU(e,t,n){return Math.max(0,t-e,e-n)}function CO(e,t){return e?!t:t}function nge(e,t,n,r,i,s,o,a){let{affectsX:l,affectsY:f}=t;const{isHorizontal:c,isVertical:d}=t,u=c&&d,{xSnapped:h,ySnapped:g}=n,{minWidth:y,maxWidth:U,minHeight:x,maxHeight:v}=r,{x:E,y:k,width:M,height:S,aspectRatio:A}=e;let I=Math.floor(c?h-e.pointerX:0),R=Math.floor(d?g-e.pointerY:0);const P=M+(l?-I:I),_=S+(f?-R:R),O=-s[0]*M,V=-s[1]*S;let j=uU(P,y,U),F=uU(_,x,v);if(o){let G=0,W=0;l&&I<0?G=Bd(E+I+O,o[0][0]):!l&&I>0&&(G=Fd(E+P+O,o[1][0])),f&&R<0?W=Bd(k+R+V,o[0][1]):!f&&R>0&&(W=Fd(k+_+V,o[1][1])),j=Math.max(j,G),F=Math.max(F,W)}if(a){let G=0,W=0;l&&I>0?G=Fd(E+I,a[0][0]):!l&&I<0&&(G=Bd(E+P,a[1][0])),f&&R>0?W=Fd(k+R,a[0][1]):!f&&R<0&&(W=Bd(k+_,a[1][1])),j=Math.max(j,G),F=Math.max(F,W)}if(i){if(c){const G=uU(P/A,x,v)*A;if(j=Math.max(j,G),o){let W=0;!l&&!f||l&&!f&&u?W=Fd(k+V+P/A,o[1][1])*A:W=Bd(k+V+(l?I:-I)/A,o[0][1])*A,j=Math.max(j,W)}if(a){let W=0;!l&&!f||l&&!f&&u?W=Bd(k+P/A,a[1][1])*A:W=Fd(k+(l?I:-I)/A,a[0][1])*A,j=Math.max(j,W)}}if(d){const G=uU(_*A,y,U)/A;if(F=Math.max(F,G),o){let W=0;!l&&!f||f&&!l&&u?W=Fd(E+_*A+O,o[1][0])/A:W=Bd(E+(f?R:-R)*A+O,o[0][0])/A,F=Math.max(F,W)}if(a){let W=0;!l&&!f||f&&!l&&u?W=Bd(E+_*A,a[1][0])/A:W=Fd(E+(f?R:-R)*A,a[0][0])/A,F=Math.max(F,W)}}}R=R+(R<0?F:-F),I=I+(I<0?j:-j),i&&(u?P>_*A?R=(CO(l,f)?-I:I)/A:I=(CO(l,f)?-R:R)*A:c?(R=I/A,f=l):(I=R*A,l=f));const z=l?E+I:E,H=f?k+R:k;return{width:M+(l?-I:I),height:S+(f?-R:R),x:s[0]*I*(l?-1:1)+z,y:s[1]*R*(f?-1:1)+H}}const xK={width:0,height:0,x:0,y:0},rge={...xK,pointerX:0,pointerY:0,aspectRatio:1};function ige(e){return[[0,0],[e.measured.width,e.measured.height]]}function sge(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,a=n[0]*s,l=n[1]*o;return[[r-a,i-l],[r+s-a,i+o-l]]}function oge({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=_o(e);let o={controlDirection:SO("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:f,boundaries:c,keepAspectRatio:d,resizeDirection:u,onResizeStart:h,onResize:g,onResizeEnd:y,shouldResize:U}){let x={...xK},v={...rge};o={boundaries:c,resizeDirection:u,keepAspectRatio:d,controlDirection:SO(f)};let E,k=null,M=[],S,A,I,R=!1;const P=TX().on("start",_=>{const{nodeLookup:O,transform:V,snapGrid:j,snapToGrid:F,nodeOrigin:z,paneDomNode:H}=n();if(E=O.get(t),!E)return;k=(H==null?void 0:H.getBoundingClientRect())??null;const{xSnapped:G,ySnapped:W}=i2(_.sourceEvent,{transform:V,snapGrid:j,snapToGrid:F,containerBounds:k});x={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},v={...x,pointerX:G,pointerY:W,aspectRatio:x.width/x.height},S=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(S=O.get(E.parentId),A=S&&E.extent==="parent"?ige(S):void 0),M=[],I=void 0;for(const[B,X]of O)if(X.parentId===t&&(M.push({id:B,position:{...X.position},extent:X.extent}),X.extent==="parent"||X.expandParent)){const q=sge(X,E,X.origin??z);I?I=[[Math.min(q[0][0],I[0][0]),Math.min(q[0][1],I[0][1])],[Math.max(q[1][0],I[1][0]),Math.max(q[1][1],I[1][1])]]:I=q}h==null||h(_,{...x})}).on("drag",_=>{const{transform:O,snapGrid:V,snapToGrid:j,nodeOrigin:F}=n(),z=i2(_.sourceEvent,{transform:O,snapGrid:V,snapToGrid:j,containerBounds:k}),H=[];if(!E)return;const{x:G,y:W,width:B,height:X}=x,q={},Y=E.origin??F,{width:oe,height:ge,x:he,y:ce}=nge(v,o.controlDirection,z,o.boundaries,o.keepAspectRatio,Y,A,I),ie=oe!==B,we=ge!==X,ke=he!==G&&ie,Re=ce!==W&&we;if(!ke&&!Re&&!ie&&!we)return;if((ke||Re||Y[0]===1||Y[1]===1)&&(q.x=ke?he:x.x,q.y=Re?ce:x.y,x.x=q.x,x.y=q.y,M.length>0)){const Le=he-G,Ae=ce-W;for(const ct of M)ct.position={x:ct.position.x-Le+Y[0]*(oe-B),y:ct.position.y-Ae+Y[1]*(ge-X)},H.push(ct)}if((ie||we)&&(q.width=ie&&(!o.resizeDirection||o.resizeDirection==="horizontal")?oe:x.width,q.height=we&&(!o.resizeDirection||o.resizeDirection==="vertical")?ge:x.height,x.width=q.width,x.height=q.height),S&&E.expandParent){const Le=Y[0]*(q.width??0);q.x&&q.x<Le&&(x.x=Le,v.x=v.x-(q.x-Le));const Ae=Y[1]*(q.height??0);q.y&&q.y<Ae&&(x.y=Ae,v.y=v.y-(q.y-Ae))}const Fe=tge({width:x.width,prevWidth:B,height:x.height,prevHeight:X,affectsX:o.controlDirection.affectsX,affectsY:o.controlDirection.affectsY}),$e={...x,direction:Fe};(U==null?void 0:U(_,$e))!==!1&&(R=!0,g==null||g(_,$e),r(q,H))}).on("end",_=>{R&&(y==null||y(_,{...x}),i==null||i({...x}),R=!1)});s.call(P)}function l(){s.on(".drag",null)}return{update:a,destroy:l}}var IE={exports:{}},NE={},RE={exports:{}},_E={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AO;function age(){if(AO)return _E;AO=1;var e=ny();function t(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function a(d,u){var h=u(),g=r({inst:{value:h,getSnapshot:u}}),y=g[0].inst,U=g[1];return s(function(){y.value=h,y.getSnapshot=u,l(y)&&U({inst:y})},[d,h,u]),i(function(){return l(y)&&U({inst:y}),d(function(){l(y)&&U({inst:y})})},[d]),o(h),h}function l(d){var u=d.getSnapshot;d=d.value;try{var h=u();return!n(d,h)}catch{return!0}}function f(d,u){return u()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:a;return _E.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,_E}var MO;function wK(){return MO||(MO=1,RE.exports=age()),RE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO;function lge(){if(TO)return NE;TO=1;var e=ny(),t=wK();function n(f,c){return f===c&&(f!==0||1/f===1/c)||f!==f&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return NE.useSyncExternalStoreWithSelector=function(f,c,d,u,h){var g=s(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=a(function(){function x(S){if(!v){if(v=!0,E=S,S=u(S),h!==void 0&&y.hasValue){var A=y.value;if(h(A,S))return k=A}return k=S}if(A=k,r(E,S))return A;var I=u(S);return h!==void 0&&h(A,I)?(E=S,A):(E=S,k=I)}var v=!1,E,k,M=d===void 0?null:d;return[function(){return x(c())},M===null?void 0:function(){return x(M())}]},[c,d,u,h]);var U=i(f,g[0],g[1]);return o(function(){y.hasValue=!0,y.value=U},[U]),l(U),U},NE}var IO;function cge(){return IO||(IO=1,IE.exports=lge()),IE.exports}var vK=cge();const EK=Ia(vK),NO=e=>{let t;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(t):c;if(!Object.is(u,t)){const h=t;t=d??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(g=>g(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>f,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}},f=t=e(r,i,l);return l},kK=e=>e?NO(e):NO,{useDebugValue:fge}=Ie,{useSyncExternalStoreWithSelector:dge}=EK,uge=e=>e;function SK(e,t=uge,n){const r=dge(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return fge(r),r}const RO=(e,t)=>{const n=kK(e),r=(i,s=t)=>SK(n,i,s);return Object.assign(r,n),r},hge=(e,t)=>e?RO(e,t):RO;function cr(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var fi=vW();const CK=Ia(fi),Z9=T.createContext(null),pge=Z9.Provider,AK=vc.error001();function rn(e,t){const n=T.useContext(Z9);if(n===null)throw new Error(AK);return SK(n,e,t)}function fr(){const e=T.useContext(Z9);if(e===null)throw new Error(AK);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const _O={display:"none"},mge={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},MK="react-flow__node-desc",TK="react-flow__edge-desc",gge="react-flow__aria-live",bge=e=>e.ariaLiveMessage,yge=e=>e.ariaLabelConfig;function Uge({rfId:e}){const t=rn(bge);return m.jsx("div",{id:`${gge}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:mge,children:t})}function xge({rfId:e,disableKeyboardA11y:t}){const n=rn(yge);return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:`${MK}-${e}`,style:_O,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),m.jsx("div",{id:`${TK}-${e}`,style:_O,children:n["edge.a11yDescription.default"]}),!t&&m.jsx(Uge,{rfId:e})]})}const q9=T.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return m.jsx("div",{className:ri(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});q9.displayName="Panel";function wge({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m.jsx(q9,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const vge=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},hU=e=>e.id;function Ege(e,t){return cr(e.selectedNodes.map(hU),t.selectedNodes.map(hU))&&cr(e.selectedEdges.map(hU),t.selectedEdges.map(hU))}function kge({onSelectionChange:e}){const t=fr(),{selectedNodes:n,selectedEdges:r}=rn(vge,Ege);return T.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const Sge=e=>!!e.onSelectionChangeHandlers;function Cge({onSelectionChange:e}){const t=rn(Sge);return e||t?m.jsx(kge,{onSelectionChange:e}):null}const IK=[0,0],Age={x:0,y:0,zoom:1},Mge=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],PO=[...Mge,"rfId"],Tge=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),DO={translateExtent:q2,nodeOrigin:IK,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Ige(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:l}=rn(Tge,cr),f=fr();T.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{c.current=DO,a()}),[]);const c=T.useRef(DO);return T.useEffect(()=>{for(const d of PO){const u=e[d],h=c.current[d];u!==h&&(typeof e[d]>"u"||(d==="nodes"?t(u):d==="edges"?n(u):d==="minZoom"?r(u):d==="maxZoom"?i(u):d==="translateExtent"?s(u):d==="nodeExtent"?o(u):d==="ariaLabelConfig"?f.setState({ariaLabelConfig:yme(u)}):d==="fitView"?f.setState({fitViewQueued:u}):d==="fitViewOptions"?f.setState({fitViewOptions:u}):f.setState({[d]:u})))}c.current=e},PO.map(d=>e[d])),null}function LO(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Nge(e){var r;const[t,n]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){n(e);return}const i=LO(),s=()=>n(i!=null&&i.matches?"dark":"light");return s(),i==null||i.addEventListener("change",s),()=>{i==null||i.removeEventListener("change",s)}},[e]),t!==null?t:(r=LO())!=null&&r.matches?"dark":"light"}const OO=typeof document<"u"?document:null;function tb(e=null,t={target:OO,actInsideInputWithModifier:!0}){const[n,r]=T.useState(!1),i=T.useRef(!1),s=T.useRef(new Set([])),[o,a]=T.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=f.reduce((d,u)=>d.concat(...u),[]);return[f,c]}return[[],[]]},[e]);return T.useEffect(()=>{const l=(t==null?void 0:t.target)??OO,f=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=h=>{var U,x;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!f)&&iK(h))return!1;const y=BO(h.code,a);if(s.current.add(h[y]),jO(o,s.current,!1)){const v=((x=(U=h.composedPath)==null?void 0:U.call(h))==null?void 0:x[0])||h.target,E=(v==null?void 0:v.nodeName)==="BUTTON"||(v==null?void 0:v.nodeName)==="A";t.preventDefault!==!1&&(i.current||!E)&&h.preventDefault(),r(!0)}},d=h=>{const g=BO(h.code,a);jO(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[g]),h.key==="Meta"&&s.current.clear(),i.current=!1},u=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,r]),n}function jO(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function BO(e,t){return t.includes(e)?"code":"key"}const Rge=()=>{const e=fr();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=e.getState(),l=RT(t,r,i,s,o,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:a,y:l}=o.getBoundingClientRect(),f={x:t.x-a,y:t.y-l},c=n.snapGrid??i,d=n.snapToGrid??s;return py(f,r,d,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Ix(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function NK(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const l of o)_ge(l,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function _ge(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function RK(e,t){return NK(e,t)}function _K(e,t){return NK(e,t)}function j0(e,t){return{id:e,type:"select",selected:t}}function Gp(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(j0(s.id,o)))}return r}function FO({items:e=[],lookup:t}){var i;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,o]of e.entries()){const a=t.get(o.id),l=((i=a==null?void 0:a.internals)==null?void 0:i.userNode)??a;l!==void 0&&l!==o&&n.push({id:o.id,item:o,type:"replace"}),l===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function zO(e){return{id:e.id,type:"remove"}}const $O=e=>lme(e),Pge=e=>ZX(e);function PK(e){return T.forwardRef(e)}const Dge=typeof window<"u"?T.useLayoutEffect:T.useEffect;function HO(e){const[t,n]=T.useState(BigInt(0)),[r]=T.useState(()=>Lge(()=>n(i=>i+BigInt(1))));return Dge(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function Lge(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const DK=T.createContext(null);function Oge({children:e}){const t=fr(),n=T.useCallback(a=>{const{nodes:l=[],setNodes:f,hasDefaultNodes:c,onNodesChange:d,nodeLookup:u,fitViewQueued:h,onNodesChangeMiddlewareMap:g}=t.getState();let y=l;for(const x of a)y=typeof x=="function"?x(y):x;let U=FO({items:y,lookup:u});for(const x of g.values())U=x(U);c&&f(y),U.length>0?d==null||d(U):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:v,setNodes:E}=t.getState();x&&E(v)})},[]),r=HO(n),i=T.useCallback(a=>{const{edges:l=[],setEdges:f,hasDefaultEdges:c,onEdgesChange:d,edgeLookup:u}=t.getState();let h=l;for(const g of a)h=typeof g=="function"?g(h):g;c?f(h):d&&d(FO({items:h,lookup:u}))},[]),s=HO(i),o=T.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return m.jsx(DK.Provider,{value:o,children:e})}function jge(){const e=T.useContext(DK);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Bge=e=>!!e.panZoom;function Q9(){const e=Rge(),t=fr(),n=jge(),r=rn(Bge),i=T.useMemo(()=>{const s=d=>t.getState().nodeLookup.get(d),o=d=>{n.nodeQueue.push(d)},a=d=>{n.edgeQueue.push(d)},l=d=>{var x,v;const{nodeLookup:u,nodeOrigin:h}=t.getState(),g=$O(d)?d:u.get(d.id),y=g.parentId?nK(g.position,g.measured,g.parentId,u,h):g.position,U={...g,position:y,width:((x=g.measured)==null?void 0:x.width)??g.width,height:((v=g.measured)==null?void 0:v.height)??g.height};return Eg(U)},f=(d,u,h={replace:!1})=>{o(g=>g.map(y=>{if(y.id===d){const U=typeof u=="function"?u(y):u;return h.replace&&$O(U)?U:{...y,...U}}return y}))},c=(d,u,h={replace:!1})=>{a(g=>g.map(y=>{if(y.id===d){const U=typeof u=="function"?u(y):u;return h.replace&&Pge(U)?U:{...y,...U}}return y}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var u;return(u=s(d))==null?void 0:u.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(u=>({...u}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:o,setEdges:a,addNodes:d=>{const u=Array.isArray(d)?d:[d];n.nodeQueue.push(h=>[...h,...u])},addEdges:d=>{const u=Array.isArray(d)?d:[d];n.edgeQueue.push(h=>[...h,...u])},toObject:()=>{const{nodes:d=[],edges:u=[],transform:h}=t.getState(),[g,y,U]=h;return{nodes:d.map(x=>({...x})),edges:u.map(x=>({...x})),viewport:{x:g,y,zoom:U}}},deleteElements:async({nodes:d=[],edges:u=[]})=>{const{nodes:h,edges:g,onNodesDelete:y,onEdgesDelete:U,triggerNodeChanges:x,triggerEdgeChanges:v,onDelete:E,onBeforeDelete:k}=t.getState(),{nodes:M,edges:S}=await hme({nodesToRemove:d,edgesToRemove:u,nodes:h,edges:g,onBeforeDelete:k}),A=S.length>0,I=M.length>0;if(A){const R=S.map(zO);U==null||U(S),v(R)}if(I){const R=M.map(zO);y==null||y(M),x(R)}return(I||A)&&(E==null||E({nodes:M,edges:S})),{deletedNodes:M,deletedEdges:S}},getIntersectingNodes:(d,u=!0,h)=>{const g=pO(d),y=g?d:l(d),U=h!==void 0;return y?(h||t.getState().nodes).filter(x=>{const v=t.getState().nodeLookup.get(x.id);if(v&&!g&&(x.id===d.id||!v.internals.positionAbsolute))return!1;const E=Eg(U?x:v),k=J2(E,y);return u&&k>0||k>=E.width*E.height||k>=y.width*y.height}):[]},isNodeIntersecting:(d,u,h=!0)=>{const y=pO(d)?d:l(d);if(!y)return!1;const U=J2(y,u);return h&&U>0||U>=u.width*u.height||U>=y.width*y.height},updateNode:f,updateNodeData:(d,u,h={replace:!1})=>{f(d,g=>{const y=typeof u=="function"?u(g):u;return h.replace?{...g,data:y}:{...g,data:{...g.data,...y}}},h)},updateEdge:c,updateEdgeData:(d,u,h={replace:!1})=>{c(d,g=>{const y=typeof u=="function"?u(g):u;return h.replace?{...g,data:y}:{...g,data:{...g.data,...y}}},h)},getNodesBounds:d=>{const{nodeLookup:u,nodeOrigin:h}=t.getState();return cme(d,{nodeLookup:u,nodeOrigin:h})},getHandleConnections:({type:d,id:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}-${d}${u?`-${u}`:""}`))==null?void 0:g.values())??[])},getNodeConnections:({type:d,handleId:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}${d?u?`-${d}-${u}`:`-${d}`:""}`))==null?void 0:g.values())??[])},fitView:async d=>{const u=t.getState().fitViewResolver??bme();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:u}),n.nodeQueue.push(h=>[...h]),u.promise}}},[]);return T.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const VO=e=>e.selected,Fge=typeof window<"u"?window:void 0;function zge({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=fr(),{deleteElements:r}=Q9(),i=tb(e,{actInsideInputWithModifier:!1}),s=tb(t,{target:Fge});T.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(VO),edges:o.filter(VO)}),n.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function $ge(e){const t=fr();T.useEffect(()=>{const n=()=>{var i,s,o,a;if(!e.current||!(((s=(i=e.current).checkVisibility)==null?void 0:s.call(i))??!0))return!1;const r=_T(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",vc.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const J9={position:"absolute",width:"100%",height:"100%",top:0,left:0},Hge=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function Vge({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=jh.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:f,minZoom:c,maxZoom:d,zoomActivationKeyCode:u,preventScrolling:h=!0,children:g,noWheelClassName:y,noPanClassName:U,onViewportChange:x,isControlledViewport:v,paneClickDistance:E,selectionOnDrag:k}){const M=fr(),S=T.useRef(null),{userSelectionActive:A,lib:I,connectionInProgress:R}=rn(Hge,cr),P=tb(u),_=T.useRef();$ge(S);const O=T.useCallback(V=>{x==null||x({x:V[0],y:V[1],zoom:V[2]}),v||M.setState({transform:V})},[x,v]);return T.useEffect(()=>{if(S.current){_.current=ege({domNode:S.current,minZoom:c,maxZoom:d,translateExtent:f,viewport:l,onDraggingChange:z=>M.setState(H=>H.paneDragging===z?H:{paneDragging:z}),onPanZoomStart:(z,H)=>{const{onViewportChangeStart:G,onMoveStart:W}=M.getState();W==null||W(z,H),G==null||G(H)},onPanZoom:(z,H)=>{const{onViewportChange:G,onMove:W}=M.getState();W==null||W(z,H),G==null||G(H)},onPanZoomEnd:(z,H)=>{const{onViewportChangeEnd:G,onMoveEnd:W}=M.getState();W==null||W(z,H),G==null||G(H)}});const{x:V,y:j,zoom:F}=_.current.getViewport();return M.setState({panZoom:_.current,transform:[V,j,F],domNode:S.current.closest(".react-flow")}),()=>{var z;(z=_.current)==null||z.destroy()}}},[]),T.useEffect(()=>{var V;(V=_.current)==null||V.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:P,preventScrolling:h,noPanClassName:U,userSelectionActive:A,noWheelClassName:y,lib:I,onTransformChange:O,connectionInProgress:R,selectionOnDrag:k,paneClickDistance:E})},[e,t,n,r,i,s,o,a,P,h,U,A,y,I,O,R,k,E]),m.jsx("div",{className:"react-flow__renderer",ref:S,style:J9,children:g})}const Wge=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Gge(){const{userSelectionActive:e,userSelectionRect:t}=rn(Wge,cr);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const PE=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Xge=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Kge({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Q2.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:s,onSelectionStart:o,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:f,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:h,children:g}){const y=fr(),{userSelectionActive:U,elementsSelectable:x,dragging:v,connectionInProgress:E}=rn(Xge,cr),k=x&&(e||U),M=T.useRef(null),S=T.useRef(),A=T.useRef(new Set),I=T.useRef(new Set),R=T.useRef(!1),P=G=>{if(R.current||E){R.current=!1;return}l==null||l(G),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},_=G=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){G.preventDefault();return}f==null||f(G)},O=c?G=>c(G):void 0,V=G=>{R.current&&(G.stopPropagation(),R.current=!1)},j=G=>{var ge,he;const{domNode:W}=y.getState();if(S.current=W==null?void 0:W.getBoundingClientRect(),!S.current)return;const B=G.target===M.current;if(!B&&!!G.target.closest(".nokey")||!e||!(s&&B||t)||G.button!==0||!G.isPrimary)return;(he=(ge=G.target)==null?void 0:ge.setPointerCapture)==null||he.call(ge,G.pointerId),R.current=!1;const{x:Y,y:oe}=al(G.nativeEvent,S.current);y.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:oe,x:Y,y:oe}}),B||(G.stopPropagation(),G.preventDefault())},F=G=>{const{userSelectionRect:W,transform:B,nodeLookup:X,edgeLookup:q,connectionLookup:Y,triggerNodeChanges:oe,triggerEdgeChanges:ge,defaultEdgeOptions:he,resetSelectedElements:ce}=y.getState();if(!S.current||!W)return;const{x:ie,y:we}=al(G.nativeEvent,S.current),{startX:ke,startY:Re}=W;if(!R.current){const Ae=t?0:i;if(Math.hypot(ie-ke,we-Re)<=Ae)return;ce(),o==null||o(G)}R.current=!0;const Fe={startX:ke,startY:Re,x:ie<ke?ie:ke,y:we<Re?we:Re,width:Math.abs(ie-ke),height:Math.abs(we-Re)},$e=A.current,ve=I.current;A.current=new Set(NT(X,Fe,B,n===Q2.Partial,!0).map(Ae=>Ae.id)),I.current=new Set;const Le=(he==null?void 0:he.selectable)??!0;for(const Ae of A.current){const ct=Y.get(Ae);if(ct)for(const{edgeId:jt}of ct.values()){const xn=q.get(jt);xn&&(xn.selectable??Le)&&I.current.add(jt)}}if(!mO($e,A.current)){const Ae=Gp(X,A.current,!0);oe(Ae)}if(!mO(ve,I.current)){const Ae=Gp(q,I.current);ge(Ae)}y.setState({userSelectionRect:Fe,userSelectionActive:!0,nodesSelectionActive:!1})},z=G=>{var W,B;G.button===0&&((B=(W=G.target)==null?void 0:W.releasePointerCapture)==null||B.call(W,G.pointerId),!U&&G.target===M.current&&y.getState().userSelectionRect&&(P==null||P(G)),y.setState({userSelectionActive:!1,userSelectionRect:null}),R.current&&(a==null||a(G),y.setState({nodesSelectionActive:A.current.size>0})))},H=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:ri(["react-flow__pane",{draggable:H,dragging:v,selection:e}]),onClick:k?void 0:PE(P,M),onContextMenu:PE(_,M),onWheel:PE(O,M),onPointerEnter:k?void 0:d,onPointerMove:k?F:u,onPointerUp:k?z:void 0,onPointerDownCapture:k?j:void 0,onClickCapture:k?V:void 0,onPointerLeave:h,ref:M,style:J9,children:[g,m.jsx(Gge,{})]})}function $C({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:l}=t.getState(),f=a.get(e);if(!f){l==null||l("012",vc.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function LK({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=fr(),[l,f]=T.useState(!1),c=T.useRef();return T.useEffect(()=>{c.current=Fme({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{$C({id:d,store:a,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),T.useEffect(()=>{if(!(t||!e.current||!c.current))return c.current.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{var d;(d=c.current)==null||d.destroy()}},[n,r,t,s,e,i,o]),l}const Yge=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function OK(){const e=fr();return T.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:l,nodeLookup:f,nodeOrigin:c}=e.getState(),d=new Map,u=Yge(o),h=i?s[0]:5,g=i?s[1]:5,y=n.direction.x*h*n.factor,U=n.direction.y*g*n.factor;for(const[,x]of f){if(!u(x))continue;let v={x:x.internals.positionAbsolute.x+y,y:x.internals.positionAbsolute.y+U};i&&(v=hy(v,s));const{position:E,positionAbsolute:k}=qX({nodeId:x.id,nextPosition:v,nodeLookup:f,nodeExtent:r,nodeOrigin:c,onError:a});x.position=E,x.internals.positionAbsolute=k,d.set(x.id,x)}l(d)},[])}const BT=T.createContext(null),Zge=BT.Provider;BT.Consumer;const jK=()=>T.useContext(BT),qge=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Qge=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:l,isValid:f}=o,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:s===wg.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&f}};function Jge({type:e="source",position:t=at.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:f,onMouseDown:c,onTouchStart:d,...u},h){var F,z;const g=o||null,y=e==="target",U=fr(),x=jK(),{connectOnClick:v,noPanClassName:E,rfId:k}=rn(qge,cr),{connectingFrom:M,connectingTo:S,clickConnecting:A,isPossibleEndHandle:I,connectionInProcess:R,clickConnectionInProcess:P,valid:_}=rn(Qge(x,g,e),cr);x||(z=(F=U.getState()).onError)==null||z.call(F,"010",vc.error010());const O=H=>{const{defaultEdgeOptions:G,onConnect:W,hasDefaultEdges:B}=U.getState(),X={...G,...H};if(B){const{edges:q,setEdges:Y}=U.getState();Y(kme(X,q))}W==null||W(X),a==null||a(X)},V=H=>{if(!x)return;const G=sK(H.nativeEvent);if(i&&(G&&H.button===0||!G)){const W=U.getState();zC.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:W.autoPanOnConnect,connectionMode:W.connectionMode,connectionRadius:W.connectionRadius,domNode:W.domNode,nodeLookup:W.nodeLookup,lib:W.lib,isTarget:y,handleId:g,nodeId:x,flowId:W.rfId,panBy:W.panBy,cancelConnection:W.cancelConnection,onConnectStart:W.onConnectStart,onConnectEnd:(...B)=>{var X,q;return(q=(X=U.getState()).onConnectEnd)==null?void 0:q.call(X,...B)},updateConnection:W.updateConnection,onConnect:O,isValidConnection:n||((...B)=>{var X,q;return((q=(X=U.getState()).isValidConnection)==null?void 0:q.call(X,...B))??!0}),getTransform:()=>U.getState().transform,getFromHandle:()=>U.getState().connection.fromHandle,autoPanSpeed:W.autoPanSpeed,dragThreshold:W.connectionDragThreshold})}G?c==null||c(H):d==null||d(H)},j=H=>{const{onClickConnectStart:G,onClickConnectEnd:W,connectionClickStartHandle:B,connectionMode:X,isValidConnection:q,lib:Y,rfId:oe,nodeLookup:ge,connection:he}=U.getState();if(!x||!B&&!i)return;if(!B){G==null||G(H.nativeEvent,{nodeId:x,handleId:g,handleType:e}),U.setState({connectionClickStartHandle:{nodeId:x,type:e,id:g}});return}const ce=rK(H.target),ie=n||q,{connection:we,isValid:ke}=zC.isValid(H.nativeEvent,{handle:{nodeId:x,id:g,type:e},connectionMode:X,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:ie,flowId:oe,doc:ce,lib:Y,nodeLookup:ge});ke&&we&&O(we);const Re=structuredClone(he);delete Re.inProgress,Re.toPosition=Re.toHandle?Re.toHandle.position:null,W==null||W(H,Re),U.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${k}-${x}-${g}-${e}`,className:ri(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,f,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:s,clickconnecting:A,connectingfrom:M,connectingto:S,valid:_,connectionindicator:r&&(!R||I)&&(R||P?s:i)}]),onMouseDown:V,onTouchStart:V,onClick:v?j:void 0,ref:h,...u,children:l})}const fa=T.memo(PK(Jge));function e6e({data:e,isConnectable:t,sourcePosition:n=at.Bottom}){return m.jsxs(m.Fragment,{children:[e==null?void 0:e.label,m.jsx(fa,{type:"source",position:n,isConnectable:t})]})}function t6e({data:e,isConnectable:t,targetPosition:n=at.Top,sourcePosition:r=at.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(fa,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m.jsx(fa,{type:"source",position:r,isConnectable:t})]})}function n6e(){return null}function r6e({data:e,isConnectable:t,targetPosition:n=at.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(fa,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Nx={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},WO={input:e6e,default:t6e,output:r6e,group:n6e};function i6e(e){var t,n,r,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const s6e=e=>{const{width:t,height:n,x:r,y:i}=uy(e.nodeLookup,{filter:s=>!!s.selected});return{width:ol(t)?t:null,height:ol(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function o6e({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=fr(),{width:i,height:s,transformString:o,userSelectionActive:a}=rn(s6e,cr),l=OK(),f=T.useRef(null);T.useEffect(()=>{var h;n||(h=f.current)==null||h.focus({preventScroll:!0})},[n]);const c=!a&&i!==null&&s!==null;if(LK({nodeRef:f,disabled:!c}),!c)return null;const d=e?h=>{const g=r.getState().nodes.filter(y=>y.selected);e(h,g)}:void 0,u=h=>{Object.prototype.hasOwnProperty.call(Nx,h.key)&&(h.preventDefault(),l({direction:Nx[h.key],factor:h.shiftKey?4:1}))};return m.jsx("div",{className:ri(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:m.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:u,style:{width:i,height:s}})})}const GO=typeof window<"u"?window:void 0,a6e=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function BK({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:f,selectionOnDrag:c,selectionMode:d,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:U,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:E,panOnScroll:k,panOnScrollSpeed:M,panOnScrollMode:S,zoomOnDoubleClick:A,panOnDrag:I,defaultViewport:R,translateExtent:P,minZoom:_,maxZoom:O,preventScrolling:V,onSelectionContextMenu:j,noWheelClassName:F,noPanClassName:z,disableKeyboardA11y:H,onViewportChange:G,isControlledViewport:W}){const{nodesSelectionActive:B,userSelectionActive:X}=rn(a6e,cr),q=tb(f,{target:GO}),Y=tb(y,{target:GO}),oe=Y||I,ge=Y||k,he=c&&oe!==!0,ce=q||X||he;return zge({deleteKeyCode:l,multiSelectionKeyCode:g}),m.jsx(Vge,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:E,panOnScroll:ge,panOnScrollSpeed:M,panOnScrollMode:S,zoomOnDoubleClick:A,panOnDrag:!q&&oe,defaultViewport:R,translateExtent:P,minZoom:_,maxZoom:O,zoomActivationKeyCode:U,preventScrolling:V,noWheelClassName:F,noPanClassName:z,onViewportChange:G,isControlledViewport:W,paneClickDistance:a,selectionOnDrag:he,children:m.jsxs(Kge,{onSelectionStart:u,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:oe,isSelecting:!!ce,selectionMode:d,selectionKeyPressed:q,paneClickDistance:a,selectionOnDrag:he,children:[e,B&&m.jsx(o6e,{onSelectionContextMenu:j,noPanClassName:z,disableKeyboardA11y:H})]})})}BK.displayName="FlowRenderer";const l6e=T.memo(BK),c6e=e=>t=>e?NT(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function f6e(e){return rn(T.useCallback(c6e(e),[e]),cr)}const d6e=e=>e.updateNodeInternals;function u6e(){const e=rn(d6e),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return T.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function h6e({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=fr(),s=T.useRef(null),o=T.useRef(null),a=T.useRef(e.sourcePosition),l=T.useRef(e.targetPosition),f=T.useRef(t),c=n&&!!e.internals.handleBounds;return T.useEffect(()=>{s.current&&!e.hidden&&(!c||o.current!==s.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(s.current),o.current=s.current)},[c,e.hidden]),T.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),T.useEffect(()=>{if(s.current){const d=f.current!==t,u=a.current!==e.sourcePosition,h=l.current!==e.targetPosition;(d||u||h)&&(f.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function p6e({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:l,nodesConnectable:f,nodesFocusable:c,resizeObserver:d,noDragClassName:u,noPanClassName:h,disableKeyboardA11y:g,rfId:y,nodeTypes:U,nodeClickDistance:x,onError:v}){const{node:E,internals:k,isParent:M}=rn(ie=>{const we=ie.nodeLookup.get(e),ke=ie.parentLookup.has(e);return{node:we,internals:we.internals,isParent:ke}},cr);let S=E.type||"default",A=(U==null?void 0:U[S])||WO[S];A===void 0&&(v==null||v("003",vc.error003(S)),S="default",A=(U==null?void 0:U.default)||WO.default);const I=!!(E.draggable||a&&typeof E.draggable>"u"),R=!!(E.selectable||l&&typeof E.selectable>"u"),P=!!(E.connectable||f&&typeof E.connectable>"u"),_=!!(E.focusable||c&&typeof E.focusable>"u"),O=fr(),V=tK(E),j=h6e({node:E,nodeType:S,hasDimensions:V,resizeObserver:d}),F=LK({nodeRef:j,disabled:E.hidden||!I,noDragClassName:u,handleSelector:E.dragHandle,nodeId:e,isSelectable:R,nodeClickDistance:x}),z=OK();if(E.hidden)return null;const H=od(E),G=i6e(E),W=R||I||t||n||r||i,B=n?ie=>n(ie,{...k.userNode}):void 0,X=r?ie=>r(ie,{...k.userNode}):void 0,q=i?ie=>i(ie,{...k.userNode}):void 0,Y=s?ie=>s(ie,{...k.userNode}):void 0,oe=o?ie=>o(ie,{...k.userNode}):void 0,ge=ie=>{const{selectNodesOnDrag:we,nodeDragThreshold:ke}=O.getState();R&&(!we||!I||ke>0)&&$C({id:e,store:O,nodeRef:j}),t&&t(ie,{...k.userNode})},he=ie=>{if(!(iK(ie.nativeEvent)||g)){if(GX.includes(ie.key)&&R){const we=ie.key==="Escape";$C({id:e,store:O,unselect:we,nodeRef:j})}else if(I&&E.selected&&Object.prototype.hasOwnProperty.call(Nx,ie.key)){ie.preventDefault();const{ariaLabelConfig:we}=O.getState();O.setState({ariaLiveMessage:we["node.a11yDescription.ariaLiveMessage"]({direction:ie.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),z({direction:Nx[ie.key],factor:ie.shiftKey?4:1})}}},ce=()=>{var ve;if(g||!((ve=j.current)!=null&&ve.matches(":focus-visible")))return;const{transform:ie,width:we,height:ke,autoPanOnNodeFocus:Re,setCenter:Fe}=O.getState();if(!Re)return;NT(new Map([[e,E]]),{x:0,y:0,width:we,height:ke},ie,!0).length>0||Fe(E.position.x+H.width/2,E.position.y+H.height/2,{zoom:ie[2]})};return m.jsx("div",{className:ri(["react-flow__node",`react-flow__node-${S}`,{[h]:I},E.className,{selected:E.selected,selectable:R,parent:M,draggable:I,dragging:F}]),ref:j,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:W?"all":"none",visibility:V?"visible":"hidden",...E.style,...G},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:X,onMouseLeave:q,onContextMenu:Y,onClick:ge,onDoubleClick:oe,onKeyDown:_?he:void 0,tabIndex:_?0:void 0,onFocus:_?ce:void 0,role:E.ariaRole??(_?"group":void 0),"aria-roledescription":"node","aria-describedby":g?void 0:`${MK}-${y}`,"aria-label":E.ariaLabel,...E.domAttributes,children:m.jsx(Zge,{value:e,children:m.jsx(A,{id:e,data:E.data,type:S,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:E.selected??!1,selectable:R,draggable:I,deletable:E.deletable??!0,isConnectable:P,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:F,dragHandle:E.dragHandle,zIndex:k.z,parentId:E.parentId,...H})})})}var m6e=T.memo(p6e);const g6e=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function FK(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=rn(g6e,cr),o=f6e(e.onlyRenderVisibleElements),a=u6e();return m.jsx("div",{className:"react-flow__nodes",style:J9,children:o.map(l=>m.jsx(m6e,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},l))})}FK.displayName="NodeRenderer";const b6e=T.memo(FK);function y6e(e){return rn(T.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&wme({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),cr)}const U6e=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return m.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},x6e=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return m.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},XO={[Mx.Arrow]:U6e,[Mx.ArrowClosed]:x6e};function w6e(e){const t=fr();return T.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(XO,e)?XO[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",vc.error009(e)),null)},[e])}const v6e=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=w6e(t);return l?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:m.jsx(l,{color:n,strokeWidth:o})}):null},zK=({defaultColor:e,rfId:t})=>{const n=rn(s=>s.edges),r=rn(s=>s.defaultEdgeOptions),i=T.useMemo(()=>Tme(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?m.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:m.jsx("defs",{children:i.map(s=>m.jsx(v6e,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};zK.displayName="MarkerDefinitions";var E6e=T.memo(zK);function $K({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:f,...c}){const[d,u]=T.useState({x:1,y:0,width:0,height:0}),h=ri(["react-flow__edge-textwrapper",f]),g=T.useRef(null);return T.useEffect(()=>{if(g.current){const y=g.current.getBBox();u({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),n?m.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...c,children:[i&&m.jsx("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),m.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:g,style:r,children:n}),l]}):null}$K.displayName="EdgeText";const k6e=T.memo($K);function ew({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:f=20,...c}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...c,d:e,fill:"none",className:ri(["react-flow__edge-path",c.className])}),f?m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,r&&ol(t)&&ol(n)?m.jsx(k6e,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function KO({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===at.Left||e===at.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function HK({sourceX:e,sourceY:t,sourcePosition:n=at.Bottom,targetX:r,targetY:i,targetPosition:s=at.Top}){const[o,a]=KO({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,f]=KO({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,d,u,h]=oK({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:f});return[`M${e},${t} C${o},${a} ${l},${f} ${r},${i}`,c,d,u,h]}function VK(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:a,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:U,interactionWidth:x})=>{const[v,E,k]=HK({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),M=e.isInternal?void 0:t;return m.jsx(ew,{id:M,path:v,labelX:E,labelY:k,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:U,interactionWidth:x})})}const S6e=VK({isInternal:!1}),WK=VK({isInternal:!0});S6e.displayName="SimpleBezierEdge";WK.displayName="SimpleBezierEdgeInternal";function GK(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,sourcePosition:h=at.Bottom,targetPosition:g=at.Top,markerEnd:y,markerStart:U,pathOptions:x,interactionWidth:v})=>{const[E,k,M]=jC({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:s,targetPosition:g,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset,stepPosition:x==null?void 0:x.stepPosition}),S=e.isInternal?void 0:t;return m.jsx(ew,{id:S,path:E,labelX:k,labelY:M,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:y,markerStart:U,interactionWidth:v})})}const XK=GK({isInternal:!1}),KK=GK({isInternal:!0});XK.displayName="SmoothStepEdge";KK.displayName="SmoothStepEdgeInternal";function YK(e){return T.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return m.jsx(XK,{...n,id:r,pathOptions:T.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const C6e=YK({isInternal:!1}),ZK=YK({isInternal:!0});C6e.displayName="StepEdge";ZK.displayName="StepEdgeInternal";function qK(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:y})=>{const[U,x,v]=cK({sourceX:n,sourceY:r,targetX:i,targetY:s}),E=e.isInternal?void 0:t;return m.jsx(ew,{id:E,path:U,labelX:x,labelY:v,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:y})})}const A6e=qK({isInternal:!1}),QK=qK({isInternal:!0});A6e.displayName="StraightEdge";QK.displayName="StraightEdgeInternal";function JK(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=at.Bottom,targetPosition:a=at.Top,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:U,pathOptions:x,interactionWidth:v})=>{const[E,k,M]=aK({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:x==null?void 0:x.curvature}),S=e.isInternal?void 0:t;return m.jsx(ew,{id:S,path:E,labelX:k,labelY:M,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:U,interactionWidth:v})})}const M6e=JK({isInternal:!1}),eY=JK({isInternal:!0});M6e.displayName="BezierEdge";eY.displayName="BezierEdgeInternal";const YO={default:eY,straight:QK,step:ZK,smoothstep:KK,simplebezier:WK},ZO={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},T6e=(e,t,n)=>n===at.Left?e-t:n===at.Right?e+t:e,I6e=(e,t,n)=>n===at.Top?e-t:n===at.Bottom?e+t:e,qO="react-flow__edgeupdater";function QO({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return m.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:ri([qO,`${qO}-${a}`]),cx:T6e(t,r,e),cy:I6e(n,r,e),r,stroke:"transparent",fill:"transparent"})}function N6e({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,onReconnect:f,onReconnectStart:c,onReconnectEnd:d,setReconnecting:u,setUpdateHover:h}){const g=fr(),y=(k,M)=>{if(k.button!==0)return;const{autoPanOnConnect:S,domNode:A,connectionMode:I,connectionRadius:R,lib:P,onConnectStart:_,cancelConnection:O,nodeLookup:V,rfId:j,panBy:F,updateConnection:z}=g.getState(),H=M.type==="target",G=(X,q)=>{u(!1),d==null||d(X,n,M.type,q)},W=X=>f==null?void 0:f(n,X),B=(X,q)=>{u(!0),c==null||c(k,n,M.type),_==null||_(X,q)};zC.onPointerDown(k.nativeEvent,{autoPanOnConnect:S,connectionMode:I,connectionRadius:R,domNode:A,handleId:M.id,nodeId:M.nodeId,nodeLookup:V,isTarget:H,edgeUpdaterType:M.type,lib:P,flowId:j,cancelConnection:O,panBy:F,isValidConnection:(...X)=>{var q,Y;return((Y=(q=g.getState()).isValidConnection)==null?void 0:Y.call(q,...X))??!0},onConnect:W,onConnectStart:B,onConnectEnd:(...X)=>{var q,Y;return(Y=(q=g.getState()).onConnectEnd)==null?void 0:Y.call(q,...X)},onReconnectEnd:G,updateConnection:z,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,dragThreshold:g.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},U=k=>y(k,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=k=>y(k,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),v=()=>h(!0),E=()=>h(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(QO,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:U,onMouseEnter:v,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&m.jsx(QO,{position:l,centerX:s,centerY:o,radius:t,onMouseDown:x,onMouseEnter:v,onMouseOut:E,type:"target"})]})}function R6e({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:f,reconnectRadius:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,rfId:g,edgeTypes:y,noPanClassName:U,onError:x,disableKeyboardA11y:v}){let E=rn(Fe=>Fe.edgeLookup.get(e));const k=rn(Fe=>Fe.defaultEdgeOptions);E=k?{...k,...E}:E;let M=E.type||"default",S=(y==null?void 0:y[M])||YO[M];S===void 0&&(x==null||x("011",vc.error011(M)),M="default",S=(y==null?void 0:y.default)||YO.default);const A=!!(E.focusable||t&&typeof E.focusable>"u"),I=typeof d<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),R=!!(E.selectable||r&&typeof E.selectable>"u"),P=T.useRef(null),[_,O]=T.useState(!1),[V,j]=T.useState(!1),F=fr(),{zIndex:z,sourceX:H,sourceY:G,targetX:W,targetY:B,sourcePosition:X,targetPosition:q}=rn(T.useCallback(Fe=>{const $e=Fe.nodeLookup.get(E.source),ve=Fe.nodeLookup.get(E.target);if(!$e||!ve)return{zIndex:E.zIndex,...ZO};const Le=Mme({id:e,sourceNode:$e,targetNode:ve,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Fe.connectionMode,onError:x});return{zIndex:xme({selected:E.selected,zIndex:E.zIndex,sourceNode:$e,targetNode:ve,elevateOnSelect:Fe.elevateEdgesOnSelect,zIndexMode:Fe.zIndexMode}),...Le||ZO}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),cr),Y=T.useMemo(()=>E.markerStart?`url('#${BC(E.markerStart,g)}')`:void 0,[E.markerStart,g]),oe=T.useMemo(()=>E.markerEnd?`url('#${BC(E.markerEnd,g)}')`:void 0,[E.markerEnd,g]);if(E.hidden||H===null||G===null||W===null||B===null)return null;const ge=Fe=>{var Ae;const{addSelectedEdges:$e,unselectNodesAndEdges:ve,multiSelectionActive:Le}=F.getState();R&&(F.setState({nodesSelectionActive:!1}),E.selected&&Le?(ve({nodes:[],edges:[E]}),(Ae=P.current)==null||Ae.blur()):$e([e])),i&&i(Fe,E)},he=s?Fe=>{s(Fe,{...E})}:void 0,ce=o?Fe=>{o(Fe,{...E})}:void 0,ie=a?Fe=>{a(Fe,{...E})}:void 0,we=l?Fe=>{l(Fe,{...E})}:void 0,ke=f?Fe=>{f(Fe,{...E})}:void 0,Re=Fe=>{var $e;if(!v&&GX.includes(Fe.key)&&R){const{unselectNodesAndEdges:ve,addSelectedEdges:Le}=F.getState();Fe.key==="Escape"?(($e=P.current)==null||$e.blur(),ve({edges:[E]})):Le([e])}};return m.jsx("svg",{style:{zIndex:z},children:m.jsxs("g",{className:ri(["react-flow__edge",`react-flow__edge-${M}`,E.className,U,{selected:E.selected,animated:E.animated,inactive:!R&&!i,updating:_,selectable:R}]),onClick:ge,onDoubleClick:he,onContextMenu:ce,onMouseEnter:ie,onMouseMove:we,onMouseLeave:ke,onKeyDown:A?Re:void 0,tabIndex:A?0:void 0,role:E.ariaRole??(A?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":A?`${TK}-${g}`:void 0,ref:P,...E.domAttributes,children:[!V&&m.jsx(S,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:R,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:H,sourceY:G,targetX:W,targetY:B,sourcePosition:X,targetPosition:q,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:Y,markerEnd:oe,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),I&&m.jsx(N6e,{edge:E,isReconnectable:I,reconnectRadius:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,sourceX:H,sourceY:G,targetX:W,targetY:B,sourcePosition:X,targetPosition:q,setUpdateHover:O,setReconnecting:j})]})})}var _6e=T.memo(R6e);const P6e=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function tY({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:f,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:y}){const{edgesFocusable:U,edgesReconnectable:x,elementsSelectable:v,onError:E}=rn(P6e,cr),k=y6e(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(E6e,{defaultColor:e,rfId:n}),k.map(M=>m.jsx(_6e,{id:M,edgesFocusable:U,edgesReconnectable:x,elementsSelectable:v,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:f,onClick:c,reconnectRadius:d,onDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:y},M))]})}tY.displayName="EdgeRenderer";const D6e=T.memo(tY),L6e=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function O6e({children:e}){const t=rn(L6e);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function j6e(e){const t=Q9(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const B6e=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function F6e(e){const t=rn(B6e),n=fr();return T.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function z6e(e){return e.connection.inProgress?{...e.connection,to:py(e.connection.to,e.transform)}:{...e.connection}}function $6e(e){return z6e}function H6e(e){const t=$6e();return rn(t,cr)}const V6e=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function W6e({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:l}=rn(V6e,cr);return!(s&&i&&l)?null:m.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:ri(["react-flow__connection",YX(a)]),children:m.jsx(nY,{style:t,type:n,CustomComponent:r,isValid:a})})})}const nY=({style:e,type:t=ou.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:l,to:f,toNode:c,toHandle:d,toPosition:u,pointer:h}=H6e();if(!i)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:l,toPosition:u,connectionStatus:YX(r),toNode:c,toHandle:d,pointer:h});let g="";const y={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:f.x,targetY:f.y,targetPosition:u};switch(t){case ou.Bezier:[g]=aK(y);break;case ou.SimpleBezier:[g]=HK(y);break;case ou.Step:[g]=jC({...y,borderRadius:0});break;case ou.SmoothStep:[g]=jC(y);break;default:[g]=cK(y)}return m.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};nY.displayName="ConnectionLine";const G6e={};function JO(e=G6e){T.useRef(e),fr(),T.useEffect(()=>{},[e])}function X6e(){fr(),T.useRef(!1),T.useEffect(()=>{},[])}function rY({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:u,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:U,connectionLineContainerStyle:x,selectionKeyCode:v,selectionOnDrag:E,selectionMode:k,multiSelectionKeyCode:M,panActivationKeyCode:S,zoomActivationKeyCode:A,deleteKeyCode:I,onlyRenderVisibleElements:R,elementsSelectable:P,defaultViewport:_,translateExtent:O,minZoom:V,maxZoom:j,preventScrolling:F,defaultMarkerColor:z,zoomOnScroll:H,zoomOnPinch:G,panOnScroll:W,panOnScrollSpeed:B,panOnScrollMode:X,zoomOnDoubleClick:q,panOnDrag:Y,onPaneClick:oe,onPaneMouseEnter:ge,onPaneMouseMove:he,onPaneMouseLeave:ce,onPaneScroll:ie,onPaneContextMenu:we,paneClickDistance:ke,nodeClickDistance:Re,onEdgeContextMenu:Fe,onEdgeMouseEnter:$e,onEdgeMouseMove:ve,onEdgeMouseLeave:Le,reconnectRadius:Ae,onReconnect:ct,onReconnectStart:jt,onReconnectEnd:xn,noDragClassName:Wt,noWheelClassName:Sn,noPanClassName:Ki,disableKeyboardA11y:Dr,nodeExtent:ii,rfId:ys,viewport:xe,onViewportChange:Pe}){return JO(e),JO(t),X6e(),j6e(n),F6e(xe),m.jsx(l6e,{onPaneClick:oe,onPaneMouseEnter:ge,onPaneMouseMove:he,onPaneMouseLeave:ce,onPaneContextMenu:we,onPaneScroll:ie,paneClickDistance:ke,deleteKeyCode:I,selectionKeyCode:v,selectionOnDrag:E,selectionMode:k,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:M,panActivationKeyCode:S,zoomActivationKeyCode:A,elementsSelectable:P,zoomOnScroll:H,zoomOnPinch:G,zoomOnDoubleClick:q,panOnScroll:W,panOnScrollSpeed:B,panOnScrollMode:X,panOnDrag:Y,defaultViewport:_,translateExtent:O,minZoom:V,maxZoom:j,onSelectionContextMenu:d,preventScrolling:F,noDragClassName:Wt,noWheelClassName:Sn,noPanClassName:Ki,disableKeyboardA11y:Dr,onViewportChange:Pe,isControlledViewport:!!xe,children:m.jsxs(O6e,{children:[m.jsx(D6e,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:ct,onReconnectStart:jt,onReconnectEnd:xn,onlyRenderVisibleElements:R,onEdgeContextMenu:Fe,onEdgeMouseEnter:$e,onEdgeMouseMove:ve,onEdgeMouseLeave:Le,reconnectRadius:Ae,defaultMarkerColor:z,noPanClassName:Ki,disableKeyboardA11y:Dr,rfId:ys}),m.jsx(W6e,{style:y,type:g,component:U,containerStyle:x}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(b6e,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:c,nodeClickDistance:Re,onlyRenderVisibleElements:R,noPanClassName:Ki,noDragClassName:Wt,disableKeyboardA11y:Dr,nodeExtent:ii,rfId:ys}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}rY.displayName="GraphView";const K6e=T.memo(rY),ej=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l=.5,maxZoom:f=2,nodeOrigin:c,nodeExtent:d,zIndexMode:u="basic"}={})=>{const h=new Map,g=new Map,y=new Map,U=new Map,x=r??t??[],v=n??e??[],E=c??[0,0],k=d??q2;uK(y,U,x);const M=FC(v,h,g,{nodeOrigin:E,nodeExtent:k,zIndexMode:u});let S=[0,0,1];if(o&&i&&s){const A=uy(h,{filter:_=>!!((_.width||_.initialWidth)&&(_.height||_.initialHeight))}),{x:I,y:R,zoom:P}=RT(A,i,s,l,f,(a==null?void 0:a.padding)??.1);S=[I,R,P]}return{rfId:"1",width:i??0,height:s??0,transform:S,nodes:v,nodesInitialized:M,nodeLookup:h,parentLookup:g,edges:x,edgeLookup:U,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:f,translateExtent:q2,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:wg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:a,fitViewResolver:null,connection:{...KX},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:pme,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:XX,zIndexMode:u,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},Y6e=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:f,nodeOrigin:c,nodeExtent:d,zIndexMode:u})=>hge((h,g)=>{async function y(){const{nodeLookup:U,panZoom:x,fitViewOptions:v,fitViewResolver:E,width:k,height:M,minZoom:S,maxZoom:A}=g();x&&(await ume({nodes:U,width:k,height:M,panZoom:x,minZoom:S,maxZoom:A},v),E==null||E.resolve(!0),h({fitViewResolver:null}))}return{...ej({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:f,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:u}),setNodes:U=>{const{nodeLookup:x,parentLookup:v,nodeOrigin:E,elevateNodesOnSelect:k,fitViewQueued:M,zIndexMode:S}=g(),A=FC(U,x,v,{nodeOrigin:E,nodeExtent:d,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:S});M&&A?(y(),h({nodes:U,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:U,nodesInitialized:A})},setEdges:U=>{const{connectionLookup:x,edgeLookup:v}=g();uK(x,v,U),h({edges:U})},setDefaultNodesAndEdges:(U,x)=>{if(U){const{setNodes:v}=g();v(U),h({hasDefaultNodes:!0})}if(x){const{setEdges:v}=g();v(x),h({hasDefaultEdges:!0})}},updateNodeInternals:U=>{const{triggerNodeChanges:x,nodeLookup:v,parentLookup:E,domNode:k,nodeOrigin:M,nodeExtent:S,debug:A,fitViewQueued:I,zIndexMode:R}=g(),{changes:P,updatedInternals:_}=Lme(U,v,E,k,M,S,R);_&&(Rme(v,E,{nodeOrigin:M,nodeExtent:S,zIndexMode:R}),I?(y(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(P==null?void 0:P.length)>0&&(A&&console.log("React Flow: trigger node changes",P),x==null||x(P)))},updateNodePositions:(U,x=!1)=>{const v=[];let E=[];const{nodeLookup:k,triggerNodeChanges:M,connection:S,updateConnection:A,onNodesChangeMiddlewareMap:I}=g();for(const[R,P]of U){const _=k.get(R),O=!!(_!=null&&_.expandParent&&(_!=null&&_.parentId)&&(P!=null&&P.position)),V={id:R,type:"position",position:O?{x:Math.max(0,P.position.x),y:Math.max(0,P.position.y)}:P.position,dragging:x};if(_&&S.inProgress&&S.fromNode.id===_.id){const j=s1(_,S.fromHandle,at.Left,!0);A({...S,from:j})}O&&_.parentId&&v.push({id:R,parentId:_.parentId,rect:{...P.internals.positionAbsolute,width:P.measured.width??0,height:P.measured.height??0}}),E.push(V)}if(v.length>0){const{parentLookup:R,nodeOrigin:P}=g(),_=jT(v,k,R,P);E.push(..._)}for(const R of I.values())E=R(E);M(E)},triggerNodeChanges:U=>{const{onNodesChange:x,setNodes:v,nodes:E,hasDefaultNodes:k,debug:M}=g();if(U!=null&&U.length){if(k){const S=RK(U,E);v(S)}M&&console.log("React Flow: trigger node changes",U),x==null||x(U)}},triggerEdgeChanges:U=>{const{onEdgesChange:x,setEdges:v,edges:E,hasDefaultEdges:k,debug:M}=g();if(U!=null&&U.length){if(k){const S=_K(U,E);v(S)}M&&console.log("React Flow: trigger edge changes",U),x==null||x(U)}},addSelectedNodes:U=>{const{multiSelectionActive:x,edgeLookup:v,nodeLookup:E,triggerNodeChanges:k,triggerEdgeChanges:M}=g();if(x){const S=U.map(A=>j0(A,!0));k(S);return}k(Gp(E,new Set([...U]),!0)),M(Gp(v))},addSelectedEdges:U=>{const{multiSelectionActive:x,edgeLookup:v,nodeLookup:E,triggerNodeChanges:k,triggerEdgeChanges:M}=g();if(x){const S=U.map(A=>j0(A,!0));M(S);return}M(Gp(v,new Set([...U]))),k(Gp(E,new Set,!0))},unselectNodesAndEdges:({nodes:U,edges:x}={})=>{const{edges:v,nodes:E,nodeLookup:k,triggerNodeChanges:M,triggerEdgeChanges:S}=g(),A=U||E,I=x||v,R=[];for(const _ of A){if(!_.selected)continue;const O=k.get(_.id);O&&(O.selected=!1),R.push(j0(_.id,!1))}const P=[];for(const _ of I)_.selected&&P.push(j0(_.id,!1));M(R),S(P)},setMinZoom:U=>{const{panZoom:x,maxZoom:v}=g();x==null||x.setScaleExtent([U,v]),h({minZoom:U})},setMaxZoom:U=>{const{panZoom:x,minZoom:v}=g();x==null||x.setScaleExtent([v,U]),h({maxZoom:U})},setTranslateExtent:U=>{var x;(x=g().panZoom)==null||x.setTranslateExtent(U),h({translateExtent:U})},resetSelectedElements:()=>{const{edges:U,nodes:x,triggerNodeChanges:v,triggerEdgeChanges:E,elementsSelectable:k}=g();if(!k)return;const M=x.reduce((A,I)=>I.selected?[...A,j0(I.id,!1)]:A,[]),S=U.reduce((A,I)=>I.selected?[...A,j0(I.id,!1)]:A,[]);v(M),E(S)},setNodeExtent:U=>{const{nodes:x,nodeLookup:v,parentLookup:E,nodeOrigin:k,elevateNodesOnSelect:M,nodeExtent:S,zIndexMode:A}=g();U[0][0]===S[0][0]&&U[0][1]===S[0][1]&&U[1][0]===S[1][0]&&U[1][1]===S[1][1]||(FC(x,v,E,{nodeOrigin:k,nodeExtent:U,elevateNodesOnSelect:M,checkEquality:!1,zIndexMode:A}),h({nodeExtent:U}))},panBy:U=>{const{transform:x,width:v,height:E,panZoom:k,translateExtent:M}=g();return Ome({delta:U,panZoom:k,transform:x,translateExtent:M,width:v,height:E})},setCenter:async(U,x,v)=>{const{width:E,height:k,maxZoom:M,panZoom:S}=g();if(!S)return Promise.resolve(!1);const A=typeof(v==null?void 0:v.zoom)<"u"?v.zoom:M;return await S.setViewport({x:E/2-U*A,y:k/2-x*A,zoom:A},{duration:v==null?void 0:v.duration,ease:v==null?void 0:v.ease,interpolate:v==null?void 0:v.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...KX}})},updateConnection:U=>{h({connection:U})},reset:()=>h({...ej()})}},Object.is);function iY({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:a,initialFitViewOptions:l,fitView:f,nodeOrigin:c,nodeExtent:d,zIndexMode:u,children:h}){const[g]=T.useState(()=>Y6e({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:f,minZoom:o,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:d,zIndexMode:u}));return m.jsx(pge,{value:g,children:m.jsx(Oge,{children:h})})}function Z6e({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,fitViewOptions:l,minZoom:f,maxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h}){return T.useContext(Z9)?m.jsx(m.Fragment,{children:e}):m.jsx(iY,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,initialFitViewOptions:l,initialMinZoom:f,initialMaxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h,children:e})}const q6e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Q6e({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:l,onInit:f,onMove:c,onMoveStart:d,onMoveEnd:u,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:U,onClickConnectEnd:x,onNodeMouseEnter:v,onNodeMouseMove:E,onNodeMouseLeave:k,onNodeContextMenu:M,onNodeDoubleClick:S,onNodeDragStart:A,onNodeDrag:I,onNodeDragStop:R,onNodesDelete:P,onEdgesDelete:_,onDelete:O,onSelectionChange:V,onSelectionDragStart:j,onSelectionDrag:F,onSelectionDragStop:z,onSelectionContextMenu:H,onSelectionStart:G,onSelectionEnd:W,onBeforeDelete:B,connectionMode:X,connectionLineType:q=ou.Bezier,connectionLineStyle:Y,connectionLineComponent:oe,connectionLineContainerStyle:ge,deleteKeyCode:he="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:ie=!1,selectionMode:we=Q2.Full,panActivationKeyCode:ke="Space",multiSelectionKeyCode:Re=eb()?"Meta":"Control",zoomActivationKeyCode:Fe=eb()?"Meta":"Control",snapToGrid:$e,snapGrid:ve,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:Ae,nodesDraggable:ct,autoPanOnNodeFocus:jt,nodesConnectable:xn,nodesFocusable:Wt,nodeOrigin:Sn=IK,edgesFocusable:Ki,edgesReconnectable:Dr,elementsSelectable:ii=!0,defaultViewport:ys=Age,minZoom:xe=.5,maxZoom:Pe=2,translateExtent:dt=q2,preventScrolling:It=!0,nodeExtent:Rt,defaultMarkerColor:fn="#b1b1b7",zoomOnScroll:Jn=!0,zoomOnPinch:Gt=!0,panOnScroll:Zt=!1,panOnScrollSpeed:dr=.5,panOnScrollMode:wn=jh.Free,zoomOnDoubleClick:Sr=!0,panOnDrag:Wr=!0,onPaneClick:$o,onPaneMouseEnter:Ho,onPaneMouseMove:Bs,onPaneMouseLeave:Fs,onPaneScroll:Ra,onPaneContextMenu:Bc,paneClickDistance:Fc=1,nodeClickDistance:zc=0,children:Nl,onReconnect:Ee,onReconnectStart:rt,onReconnectEnd:ze,onEdgeContextMenu:qt,onEdgeDoubleClick:Mn,onEdgeMouseEnter:Dt,onEdgeMouseMove:Dn,onEdgeMouseLeave:Us,reconnectRadius:_i=10,onNodesChange:$c,onEdgesChange:hd,noDragClassName:pd="nodrag",noWheelClassName:Hc="nowheel",noPanClassName:Pi="nopan",fitView:_a,fitViewOptions:ur,connectOnClick:er,attributionPosition:gi,proOptions:Gr,defaultEdgeOptions:md,elevateNodesOnSelect:O1=!0,elevateEdgesOnSelect:m6=!1,disableKeyboardA11y:Vy=!1,autoPanOnConnect:hr,autoPanOnNodeDrag:m7,autoPanSpeed:g6,connectionRadius:Wy,isValidConnection:j1,onError:g7,style:Gy,id:m0,nodeDragThreshold:Vo,connectionDragThreshold:b7,viewport:yo,onViewportChange:y7,width:U7,height:x7,colorMode:B1="light",debug:F1,onScroll:Rl,ariaLabelConfig:z1,zIndexMode:Xy="basic",...w7},b6){const $1=m0||"1",y6=Nge(B1),g0=T.useCallback(Ky=>{Ky.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Rl==null||Rl(Ky)},[Rl]);return m.jsx("div",{"data-testid":"rf__wrapper",...w7,onScroll:g0,style:{...Gy,...q6e},ref:b6,className:ri(["react-flow",i,y6]),id:m0,role:"application",children:m.jsxs(Z6e,{nodes:e,edges:t,width:U7,height:x7,fitView:_a,fitViewOptions:ur,minZoom:xe,maxZoom:Pe,nodeOrigin:Sn,nodeExtent:Rt,zIndexMode:Xy,children:[m.jsx(K6e,{onInit:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:E,onNodeMouseLeave:k,onNodeContextMenu:M,onNodeDoubleClick:S,nodeTypes:s,edgeTypes:o,connectionLineType:q,connectionLineStyle:Y,connectionLineComponent:oe,connectionLineContainerStyle:ge,selectionKeyCode:ce,selectionOnDrag:ie,selectionMode:we,deleteKeyCode:he,multiSelectionKeyCode:Re,panActivationKeyCode:ke,zoomActivationKeyCode:Fe,onlyRenderVisibleElements:Le,defaultViewport:ys,translateExtent:dt,minZoom:xe,maxZoom:Pe,preventScrolling:It,zoomOnScroll:Jn,zoomOnPinch:Gt,zoomOnDoubleClick:Sr,panOnScroll:Zt,panOnScrollSpeed:dr,panOnScrollMode:wn,panOnDrag:Wr,onPaneClick:$o,onPaneMouseEnter:Ho,onPaneMouseMove:Bs,onPaneMouseLeave:Fs,onPaneScroll:Ra,onPaneContextMenu:Bc,paneClickDistance:Fc,nodeClickDistance:zc,onSelectionContextMenu:H,onSelectionStart:G,onSelectionEnd:W,onReconnect:Ee,onReconnectStart:rt,onReconnectEnd:ze,onEdgeContextMenu:qt,onEdgeDoubleClick:Mn,onEdgeMouseEnter:Dt,onEdgeMouseMove:Dn,onEdgeMouseLeave:Us,reconnectRadius:_i,defaultMarkerColor:fn,noDragClassName:pd,noWheelClassName:Hc,noPanClassName:Pi,rfId:$1,disableKeyboardA11y:Vy,nodeExtent:Rt,viewport:yo,onViewportChange:y7}),m.jsx(Ige,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:U,onClickConnectEnd:x,nodesDraggable:ct,autoPanOnNodeFocus:jt,nodesConnectable:xn,nodesFocusable:Wt,edgesFocusable:Ki,edgesReconnectable:Dr,elementsSelectable:ii,elevateNodesOnSelect:O1,elevateEdgesOnSelect:m6,minZoom:xe,maxZoom:Pe,nodeExtent:Rt,onNodesChange:$c,onEdgesChange:hd,snapToGrid:$e,snapGrid:ve,connectionMode:X,translateExtent:dt,connectOnClick:er,defaultEdgeOptions:md,fitView:_a,fitViewOptions:ur,onNodesDelete:P,onEdgesDelete:_,onDelete:O,onNodeDragStart:A,onNodeDrag:I,onNodeDragStop:R,onSelectionDrag:F,onSelectionDragStart:j,onSelectionDragStop:z,onMove:c,onMoveStart:d,onMoveEnd:u,noPanClassName:Pi,nodeOrigin:Sn,rfId:$1,autoPanOnConnect:hr,autoPanOnNodeDrag:m7,autoPanSpeed:g6,onError:g7,connectionRadius:Wy,isValidConnection:j1,selectNodesOnDrag:Ae,nodeDragThreshold:Vo,connectionDragThreshold:b7,onBeforeDelete:B,debug:F1,ariaLabelConfig:z1,zIndexMode:Xy}),m.jsx(Cge,{onSelectionChange:V}),Nl,m.jsx(wge,{proOptions:Gr,position:gi}),m.jsx(xge,{rfId:$1,disableKeyboardA11y:Vy})]})})}var J6e=PK(Q6e);function e5e(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(s=>RK(i,s)),[]);return[t,n,r]}function t5e(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(s=>_K(i,s)),[]);return[t,n,r]}function n5e({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ri(["react-flow__background-pattern",n,r])})}function r5e({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:ri(["react-flow__background-pattern","dots",t])})}var Ou;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ou||(Ou={}));const i5e={[Ou.Dots]:1,[Ou.Lines]:1,[Ou.Cross]:6},s5e=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function sY({id:e,variant:t=Ou.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:l,className:f,patternClassName:c}){const d=T.useRef(null),{transform:u,patternId:h}=rn(s5e,cr),g=r||i5e[t],y=t===Ou.Dots,U=t===Ou.Cross,x=Array.isArray(n)?n:[n,n],v=[x[0]*u[2]||1,x[1]*u[2]||1],E=g*u[2],k=Array.isArray(s)?s:[s,s],M=U?[E,E]:v,S=[k[0]*u[2]||1+M[0]/2,k[1]*u[2]||1+M[1]/2],A=`${h}${e||""}`;return m.jsxs("svg",{className:ri(["react-flow__background",f]),style:{...l,...J9,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:d,"data-testid":"rf__background",children:[m.jsx("pattern",{id:A,x:u[0]%v[0],y:u[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`,children:y?m.jsx(r5e,{radius:E/2,className:c}):m.jsx(n5e,{dimensions:M,lineWidth:i,variant:t,className:c})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${A})`})]})}sY.displayName="Background";const o5e=T.memo(sY);function a5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function l5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function c5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function f5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function d5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function pU({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:ri(["react-flow__controls-button",t]),...n,children:e})}const u5e=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function oY({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:f,children:c,position:d="bottom-left",orientation:u="vertical","aria-label":h}){const g=fr(),{isInteractive:y,minZoomReached:U,maxZoomReached:x,ariaLabelConfig:v}=rn(u5e,cr),{zoomIn:E,zoomOut:k,fitView:M}=Q9(),S=()=>{E(),s==null||s()},A=()=>{k(),o==null||o()},I=()=>{M(i),a==null||a()},R=()=>{g.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)},P=u==="horizontal"?"horizontal":"vertical";return m.jsxs(q9,{className:ri(["react-flow__controls",P,f]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??v["controls.ariaLabel"],children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(pU,{onClick:S,className:"react-flow__controls-zoomin",title:v["controls.zoomIn.ariaLabel"],"aria-label":v["controls.zoomIn.ariaLabel"],disabled:x,children:m.jsx(a5e,{})}),m.jsx(pU,{onClick:A,className:"react-flow__controls-zoomout",title:v["controls.zoomOut.ariaLabel"],"aria-label":v["controls.zoomOut.ariaLabel"],disabled:U,children:m.jsx(l5e,{})})]}),n&&m.jsx(pU,{className:"react-flow__controls-fitview",onClick:I,title:v["controls.fitView.ariaLabel"],"aria-label":v["controls.fitView.ariaLabel"],children:m.jsx(c5e,{})}),r&&m.jsx(pU,{className:"react-flow__controls-interactive",onClick:R,title:v["controls.interactive.ariaLabel"],"aria-label":v["controls.interactive.ariaLabel"],children:y?m.jsx(d5e,{}):m.jsx(f5e,{})}),c]})}oY.displayName="Controls";T.memo(oY);function h5e({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:f,borderRadius:c,shapeRendering:d,selected:u,onClick:h}){const{background:g,backgroundColor:y}=s||{},U=o||g||y;return m.jsx("rect",{className:ri(["react-flow__minimap-node",{selected:u},f]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:U,stroke:a,strokeWidth:l},shapeRendering:d,onClick:h?x=>h(x,e):void 0})}const p5e=T.memo(h5e),m5e=e=>e.nodes.map(t=>t.id),DE=e=>e instanceof Function?e:()=>e;function g5e({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=p5e,onClick:o}){const a=rn(m5e,cr),l=DE(t),f=DE(e),c=DE(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:a.map(u=>m.jsx(y5e,{id:u,nodeColorFunc:l,nodeStrokeColorFunc:f,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:d},u))})}function b5e({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:l}){const{node:f,x:c,y:d,width:u,height:h}=rn(g=>{const y=g.nodeLookup.get(e);if(!y)return{node:void 0,x:0,y:0,width:0,height:0};const U=y.internals.userNode,{x,y:v}=y.internals.positionAbsolute,{width:E,height:k}=od(U);return{node:U,x,y:v,width:E,height:k}},cr);return!f||f.hidden||!tK(f)?null:m.jsx(a,{x:c,y:d,width:u,height:h,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:l,id:f.id})}const y5e=T.memo(b5e);var U5e=T.memo(g5e);const x5e=200,w5e=150,v5e=e=>!e.hidden,E5e=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?eK(uy(e.nodeLookup,{filter:v5e}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},k5e="react-flow__minimap-desc";function aY({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:l,maskColor:f,maskStrokeColor:c,maskStrokeWidth:d,position:u="bottom-right",onClick:h,onNodeClick:g,pannable:y=!1,zoomable:U=!1,ariaLabel:x,inversePan:v,zoomStep:E=1,offsetScale:k=5}){const M=fr(),S=T.useRef(null),{boundingRect:A,viewBB:I,rfId:R,panZoom:P,translateExtent:_,flowWidth:O,flowHeight:V,ariaLabelConfig:j}=rn(E5e,cr),F=(e==null?void 0:e.width)??x5e,z=(e==null?void 0:e.height)??w5e,H=A.width/F,G=A.height/z,W=Math.max(H,G),B=W*F,X=W*z,q=k*W,Y=A.x-(B-A.width)/2-q,oe=A.y-(X-A.height)/2-q,ge=B+q*2,he=X+q*2,ce=`${k5e}-${R}`,ie=T.useRef(0),we=T.useRef();ie.current=W,T.useEffect(()=>{if(S.current&&P)return we.current=Gme({domNode:S.current,panZoom:P,getTransform:()=>M.getState().transform,getViewScale:()=>ie.current}),()=>{var $e;($e=we.current)==null||$e.destroy()}},[P]),T.useEffect(()=>{var $e;($e=we.current)==null||$e.update({translateExtent:_,width:O,height:V,inversePan:v,pannable:y,zoomStep:E,zoomable:U})},[y,U,v,E,_,O,V]);const ke=h?$e=>{var Ae;const[ve,Le]=((Ae=we.current)==null?void 0:Ae.pointer($e))||[0,0];h($e,{x:ve,y:Le})}:void 0,Re=g?T.useCallback(($e,ve)=>{const Le=M.getState().nodeLookup.get(ve).internals.userNode;g($e,Le)},[]):void 0,Fe=x??j["minimap.ariaLabel"];return m.jsx(q9,{position:u,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*W:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:ri(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:F,height:z,viewBox:`${Y} ${oe} ${ge} ${he}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:S,onClick:ke,children:[Fe&&m.jsx("title",{id:ce,children:Fe}),m.jsx(U5e,{onClick:Re,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${Y-q},${oe-q}h${ge+q*2}v${he+q*2}h${-ge-q*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}aY.displayName="MiniMap";T.memo(aY);const S5e=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,C5e={[Sg.Line]:"right",[Sg.Handle]:"bottom-right"};function A5e({nodeId:e,position:t,variant:n=Sg.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:f=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:u,autoScale:h=!0,shouldResize:g,onResizeStart:y,onResize:U,onResizeEnd:x}){const v=jK(),E=typeof e=="string"?e:v,k=fr(),M=T.useRef(null),S=n===Sg.Handle,A=rn(T.useCallback(S5e(S&&h),[S,h]),cr),I=T.useRef(null),R=t??C5e[n];T.useEffect(()=>{if(!(!M.current||!E))return I.current||(I.current=oge({domNode:M.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:_,transform:O,snapGrid:V,snapToGrid:j,nodeOrigin:F,domNode:z}=k.getState();return{nodeLookup:_,transform:O,snapGrid:V,snapToGrid:j,nodeOrigin:F,paneDomNode:z}},onChange:(_,O)=>{const{triggerNodeChanges:V,nodeLookup:j,parentLookup:F,nodeOrigin:z}=k.getState(),H=[],G={x:_.x,y:_.y},W=j.get(E);if(W&&W.expandParent&&W.parentId){const B=W.origin??z,X=_.width??W.measured.width??0,q=_.height??W.measured.height??0,Y={id:W.id,parentId:W.parentId,rect:{width:X,height:q,...nK({x:_.x??W.position.x,y:_.y??W.position.y},{width:X,height:q},W.parentId,j,B)}},oe=jT([Y],j,F,z);H.push(...oe),G.x=_.x?Math.max(B[0]*X,_.x):void 0,G.y=_.y?Math.max(B[1]*q,_.y):void 0}if(G.x!==void 0&&G.y!==void 0){const B={id:E,type:"position",position:{...G}};H.push(B)}if(_.width!==void 0&&_.height!==void 0){const X={id:E,type:"dimensions",resizing:!0,setAttributes:u?u==="horizontal"?"width":"height":!0,dimensions:{width:_.width,height:_.height}};H.push(X)}for(const B of O){const X={...B,type:"position"};H.push(X)}V(H)},onEnd:({width:_,height:O})=>{const V={id:E,type:"dimensions",resizing:!1,dimensions:{width:_,height:O}};k.getState().triggerNodeChanges([V])}})),I.current.update({controlPosition:R,boundaries:{minWidth:a,minHeight:l,maxWidth:f,maxHeight:c},keepAspectRatio:d,resizeDirection:u,onResizeStart:y,onResize:U,onResizeEnd:x,shouldResize:g}),()=>{var _;(_=I.current)==null||_.destroy()}},[R,a,l,f,c,d,y,U,x,g]);const P=R.split("-");return m.jsx("div",{className:ri(["react-flow__resize-control","nodrag",...P,n,r]),ref:M,style:{...i,scale:A,...o&&{[S?"backgroundColor":"borderColor"]:o}},children:s})}T.memo(A5e);const Ln="/api";let HC=localStorage.getItem("authToken");function LE(e){HC=e,e?localStorage.setItem("authToken",e):localStorage.removeItem("authToken")}function Oi(){const e={"Content-Type":"application/json"};return HC?{...e,Authorization:`Bearer ${HC}`}:e}const Hn={async getThreads(){const e=await fetch(`${Ln}/threads`);if(!e.ok)throw new Error("Failed to fetch threads");return e.json()},async createThread({title:e,description:t,content:n,metadata:r}){const i=await fetch(`${Ln}/threads`,{method:"POST",headers:Oi(),body:JSON.stringify({title:e,description:t,content:n,metadata:r})});if(!i.ok)throw new Error("Failed to create thread");return i.json()},async searchThreads(e){const t=await fetch(`${Ln}/threads/search?query=${encodeURIComponent(e)}`);if(!t.ok)throw new Error("Failed to search threads");return t.json()},async generateThread(e){const t=await fetch(`${Ln}/threads/generate`,{method:"POST",headers:Oi(),body:JSON.stringify({topic:e})});if(!t.ok)throw new Error("Failed to generate thread");return t.json()},async getThreadNodes(e){const t=await fetch(`${Ln}/threads/${e}/nodes`);if(!t.ok)throw new Error("Failed to fetch nodes");return t.json()},async createNode({threadId:e,title:t,content:n,nodeType:r,parentId:i,metadata:s}){console.log("API createNode request:",{threadId:e,title:t,content:n,nodeType:r,parentId:i,metadata:s});const o=await fetch(`${Ln}/threads/${e}/nodes`,{method:"POST",headers:Oi(),body:JSON.stringify({title:t,content:n,nodeType:r,parentId:i,metadata:s})});if(!o.ok)throw new Error("Failed to create node");const a=await o.json();return console.log("API createNode response:",a),a},async createEdge({sourceId:e,targetId:t,relationshipType:n,metadata:r}){const i=await fetch(`${Ln}/edges`,{method:"POST",headers:Oi(),body:JSON.stringify({sourceId:e,targetId:t,relationshipType:n,metadata:r})});if(!i.ok)throw new Error("Failed to create edge");return i.json()},async saveThreadLayout(e,t){const n=await fetch(`${Ln}/threads/${e}/layout`,{method:"PUT",headers:Oi(),body:JSON.stringify({layout:t})});if(!n.ok)throw new Error("Failed to save thread layout");return n.json()},async loadThreadLayout(e){const t=await fetch(`${Ln}/threads/${e}/layout`);if(!t.ok)throw new Error("Failed to load thread layout");return t.json()},async deleteThreadLayout(e){const t=await fetch(`${Ln}/threads/${e}/layout`,{method:"DELETE",headers:Oi()});if(!t.ok)throw new Error("Failed to delete thread layout");return t.json()},async saveThreadCanvas(e,t){const n=await fetch(`${Ln}/threads/${e}/canvas`,{method:"PUT",headers:Oi(),body:JSON.stringify({canvas:t})});if(!n.ok)throw new Error(`Failed to save thread canvas: ${n.status}`);return n.json()},async loadThreadCanvas(e){const t=await fetch(`${Ln}/threads/${e}/canvas`);return t.ok?t.json():null},async deleteThreadCanvas(e){const t=await fetch(`${Ln}/threads/${e}/canvas`,{method:"DELETE",headers:Oi()});if(!t.ok)throw new Error("Failed to delete thread canvas");return t.json()},async updateThreadContent(e,t){const n=await fetch(`${Ln}/threads/${e}/content`,{method:"PUT",headers:Oi(),body:JSON.stringify({content:t})});if(!n.ok)throw new Error("Failed to update thread content");return n.json()},async saveArticleSequence(e,t){const n=await fetch(`${Ln}/threads/${e}/sequence`,{method:"PUT",headers:Oi(),body:JSON.stringify({sequence:t})});if(!n.ok)throw new Error("Failed to save article sequence");return n.json()},async loadArticleSequence(e){const t=await fetch(`${Ln}/threads/${e}/sequence`);return!t.ok||!(t.headers.get("content-type")||"").includes("application/json")?null:t.json()},async deleteArticleSequence(e){const t=await fetch(`${Ln}/threads/${e}/sequence`,{method:"DELETE",headers:Oi()});if(!t.ok)throw new Error("Failed to delete article sequence");return t.json()},async updateNode(e,t,{title:n,content:r}){const i=await fetch(`${Ln}/threads/${e}/nodes/${t}`,{method:"PUT",headers:Oi(),body:JSON.stringify({title:n,content:r})});if(!i.ok)throw new Error("Failed to update node");return i.json()},async chatStream({message:e,history:t,threadId:n,apiKey:r,nodeContext:i,onToken:s,onProcessing:o,onDone:a,onError:l}){const f=await fetch(`${Ln}/chat`,{method:"POST",headers:Oi(),body:JSON.stringify({message:e,history:t,threadId:n,apiKey:r,nodeContext:i})});if(!f.ok){const h=await f.json().catch(()=>({}));throw new Error(h.error||"Chat request failed")}const c=f.body.getReader(),d=new TextDecoder;let u="";for(;;){const{done:h,value:g}=await c.read();if(h)break;u+=d.decode(g,{stream:!0});const y=u.split(`
`);u=y.pop();for(const U of y)if(U.startsWith("data: "))try{const x=JSON.parse(U.slice(6));x.type==="token"?s==null||s(x.content):x.type==="processing"?o==null||o():x.type==="done"?setTimeout(()=>a==null?void 0:a(x),0):x.type==="error"&&(l==null||l(new Error(x.error)))}catch{}}},async getThreadChats(e){const t=await fetch(`${Ln}/threads/${e}/chats`);if(!t.ok)throw new Error("Failed to fetch chats");return t.json()},async getChat(e){const t=await fetch(`${Ln}/chats/${e}`);if(!t.ok)throw new Error("Failed to fetch chat");return t.json()},async createChat({threadId:e,title:t,messages:n}){const r=await fetch(`${Ln}/chats`,{method:"POST",headers:Oi(),body:JSON.stringify({threadId:e,title:t,messages:n})});if(!r.ok)throw new Error("Failed to create chat");return r.json()},async updateChat(e,{title:t,messages:n}){const r=await fetch(`${Ln}/chats/${e}`,{method:"PUT",headers:Oi(),body:JSON.stringify({title:t,messages:n})});if(!r.ok)throw new Error("Failed to update chat");return r.json()},async generateNodeSuggestions({nodeId:e,nodeType:t,content:n,title:r}){const i=await fetch(`${Ln}/nodes/suggest`,{method:"POST",headers:Oi(),body:JSON.stringify({nodeId:e,nodeType:t,content:n,title:r})});if(!i.ok)throw new Error("Failed to generate suggestions");return i.json()},async register({name:e,email:t,password:n}){const r=await fetch(`${Ln}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:n})}),i=await r.json();if(!r.ok)throw new Error(i.error||"Registration failed");return LE(i.token),i.user},async login({email:e,password:t}){const n=await fetch(`${Ln}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await n.json();if(!n.ok)throw new Error(r.error||"Login failed");return LE(r.token),r.user},async getMe(){const e=await fetch(`${Ln}/auth/me`,{headers:Oi()});if(!e.ok)throw new Error("Not authenticated");return e.json()},logout(){LE(null)}},I0=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],r5={ROOT:"#ffd700",EVIDENCE:"#ff6b6b",REFERENCE:"#4ecdc4",CONTEXT:"#45b7d1",EXAMPLE:"#96ceb4",COUNTERPOINT:"#ff7f50",SYNTHESIS:"#9b59b6",thread:"#00ff9d"};function M5e({data:e}){const t=e.nodeColor||"#666",n=e.isThread,r=n?25:15,i=e.isMatteMode?"matte":"";return m.jsxs("div",{className:`graph-node ${i} ${n?"thread-node":""}`,style:{position:"relative",width:r*2,height:r*2},children:[m.jsx(fa,{type:"target",position:at.Top,id:"t-top",style:{opacity:0,pointerEvents:"none"}}),m.jsx(fa,{type:"target",position:at.Bottom,id:"t-bottom",style:{opacity:0,pointerEvents:"none"}}),m.jsx(fa,{type:"target",position:at.Left,id:"t-left",style:{opacity:0,pointerEvents:"none"}}),m.jsx(fa,{type:"target",position:at.Right,id:"t-right",style:{opacity:0,pointerEvents:"none"}}),m.jsx(fa,{type:"source",position:at.Top,id:"s-top",style:{opacity:0,pointerEvents:"none"}}),m.jsx(fa,{type:"source",position:at.Bottom,id:"s-bottom",style:{opacity:0,pointerEvents:"none"}}),m.jsx(fa,{type:"source",position:at.Left,id:"s-left",style:{opacity:0,pointerEvents:"none"}}),m.jsx(fa,{type:"source",position:at.Right,id:"s-right",style:{opacity:0,pointerEvents:"none"}}),m.jsx("div",{className:"graph-node-circle",style:{width:r*2,height:r*2,borderRadius:"50%",background:t,border:"2px solid #fff",cursor:"pointer"}}),m.jsx("div",{className:"graph-node-label",children:e.label})]})}const T5e={graphNode:M5e},I5e=({threads:e,onNodeClick:t,onAddNode:n,onOpenEditor:r,onSelectedNodeChange:i,loading:s})=>{var ke,Re,Fe,$e;const[o,a,l]=e5e([]),[f,c,d]=t5e([]),[u,h]=T.useState(null),[g,y]=T.useState(!0),[U,x]=T.useState(!0),[v,E]=T.useState(!0),[k,M]=T.useState(!1),[S,A]=T.useState(!1),[I,R]=T.useState(null),{fitView:P}=Q9();T.useEffect(()=>{s!==void 0&&y(s)},[s]);function _(ve,Le){const Ae=Le.x-ve.x,ct=Le.y-ve.y;return Math.abs(Ae)>Math.abs(ct)?Ae>0?{sourceHandle:"s-right",targetHandle:"t-left"}:{sourceHandle:"s-left",targetHandle:"t-right"}:ct>0?{sourceHandle:"s-bottom",targetHandle:"t-top"}:{sourceHandle:"s-top",targetHandle:"t-bottom"}}const O=T.useRef(null),V=T.useRef(null),j=T.useRef(!1);T.useEffect(()=>{if(!e||e.length===0)return;const ve=e[0].id;V.current===ve&&O.current||(V.current=ve,j.current=!1,(async()=>{var Le;try{const Ae=await Hn.loadThreadLayout(ve);O.current=Ae,((Le=Ae==null?void 0:Ae.settings)==null?void 0:Le.isMatteMode)!==void 0&&x(Ae.settings.isMatteMode),F(e,Ae)}catch{O.current=null,F(e,null)}j.current||(j.current=!0,setTimeout(()=>P({padding:.2}),50))})())},[e]);const F=T.useCallback((ve,Le)=>{if(!ve||ve.length===0)return;const Ae={};o.forEach(Wt=>{Ae[Wt.id]=Wt.position});const ct=[],jt=[];let xn=0;ve.forEach(Wt=>{var It,Rt,fn,Jn,Gt;const Sn=((It=Wt.metadata)==null?void 0:It.title)||Wt.title||`Thread ${Wt.id}`,Ki=(Sn||"").split(/\s+/),Dr=Ki.length>2?Ki.slice(0,2).join(" ")+"...":Sn,ii=`thread-${Wt.id}`,ys=(Rt=Le==null?void 0:Le.nodes)==null?void 0:Rt[ii],xe=Ae[ii];ct.push({id:ii,type:"graphNode",position:ys?{x:ys.x,y:ys.y}:xe||{x:400,y:300+xn},data:{label:Dr,isThread:!0,nodeColor:r5.thread,isMatteMode:U,originalData:{...Wt,type:"thread",title:Sn,metadata:{...Wt.metadata,title:Sn}}},draggable:!0});const Pe=((fn=Wt.nodes)==null?void 0:fn.length)||0;(Jn=Wt.nodes)==null||Jn.forEach((Zt,dr)=>{var Nl;const wn=typeof Zt.type=="number"?Zt.type:I0.indexOf(Zt.node_type),Sr=I0[wn]||"",Wr=r5[Sr]||"#666";let $o=Zt.content;try{typeof Zt.content=="string"&&(Zt.content.startsWith("{")||Zt.content.startsWith("["))&&($o=JSON.parse(Zt.content))}catch{}const Ho=`node-${Zt.id}`,Bs=(Nl=Le==null?void 0:Le.nodes)==null?void 0:Nl[Ho],Fs=Ae[Ho];let Ra;if(Bs)Ra={x:Bs.x,y:Bs.y};else if(Fs)Ra=Fs;else{const Ee=2*Math.PI*dr/Math.max(Pe,1)-Math.PI/2,rt=180;Ra={x:400+rt*Math.cos(Ee),y:300+xn+rt*Math.sin(Ee)}}const Bc=Sr==="ROOT",Fc=Zt.parent_id?`node-${Zt.parent_id}`:null,zc=Bc&&Zt.title?Zt.title.split(/\s+/).slice(0,3).join(" ")+(Zt.title.split(/\s+/).length>3?"":""):Sr;ct.push({id:Ho,type:"graphNode",position:Ra,data:{label:zc,isThread:!1,isRoot:Bc,parentRfId:Fc,nodeColor:Wr,isMatteMode:U,originalData:{...Zt,type:wn,content:$o}},draggable:!0})});const dt={};ct.forEach(Zt=>{dt[Zt.id]=Zt.position}),(Gt=Wt.nodes)==null||Gt.forEach(Zt=>{let dr,wn;wn=`node-${Zt.id}`,Zt.parent_id?dr=Wt.nodes.some($o=>$o.id===Zt.parent_id)?`node-${Zt.parent_id}`:`thread-${Wt.id}`:dr=`thread-${Wt.id}`;const Sr=_(dt[dr]||{x:0,y:0},dt[wn]||{x:0,y:0});jt.push({id:`e-${dr}-${wn}`,source:dr,target:wn,sourceHandle:Sr.sourceHandle,targetHandle:Sr.targetHandle,style:{stroke:"rgba(0, 255, 157, 0.3)",strokeWidth:2},animated:!1})})}),a(ct),c(jt),y(!1)},[o,U]);T.useEffect(()=>{if(!e||e.length===0)return;const ve=e[0].id;V.current===ve&&O.current!==void 0&&F(e,O.current)},[e]),T.useEffect(()=>{a(ve=>ve.map(Le=>({...Le,data:{...Le.data,isMatteMode:U}})))},[U]);const z=T.useMemo(()=>o.map(ve=>{if(ve.id.startsWith("thread-")||ve.data.isRoot)return{...ve,hidden:!1};if(S)return{...ve,hidden:!1};const Le=I!==null&&ve.data.parentRfId===I;return{...ve,hidden:!Le}}),[o,S,I]),H=T.useMemo(()=>f.map(ve=>S?{...ve,hidden:!1}:ve.source.startsWith("thread-")?{...ve,hidden:!1}:I!==null&&ve.source===I?{...ve,hidden:!1}:{...ve,hidden:!0}),[f,S,I]),G=T.useCallback(ve=>{h(ve),i&&i((ve==null?void 0:ve.type)==="thread"?null:(ve==null?void 0:ve.id)??null)},[i]),W=T.useCallback((ve,Le)=>{G(Le.data.originalData)},[G]),B=()=>{h(null),i&&i(null)},X=ve=>{if(!e.length)return[];const Le=e[0];if(ve.startsWith("thread-"))return(Le.nodes||[]).filter(Ae=>!Ae.parent_id);{const Ae=parseInt(ve.replace("node-",""));return(Le.nodes||[]).filter(ct=>ct.parent_id===Ae)}},q=ve=>{G(ve)},Y=ve=>ve==="thread"?r5.thread:r5[I0[ve]]||"#666",oe=T.useRef(null),ge=T.useCallback(async()=>{if(!e||e.length===0)return;const ve=e[0].id,Le={nodes:{},settings:{isMatteMode:U}};o.forEach(Ae=>{Le.nodes[Ae.id]={x:Ae.position.x,y:Ae.position.y}}),O.current=Le;try{M(!0),await Hn.saveThreadLayout(ve,Le)}catch(Ae){console.error("Failed to save layout:",Ae)}finally{M(!1)}},[e,o,U]),he=T.useCallback(()=>{oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{ge()},500)},[ge]),ce=async()=>{if(!e||e.length===0)return;const ve=e[0].id;try{M(!0),await Hn.deleteThreadLayout(ve),a(Le=>{const Ae=Le.length-1;return Le.map((ct,jt)=>{if(ct.id.startsWith("thread-"))return{...ct,position:{x:400,y:300}};const xn=jt-1,Wt=2*Math.PI*xn/Math.max(Ae,1)-Math.PI/2,Sn=180;return{...ct,position:{x:400+Sn*Math.cos(Wt),y:300+Sn*Math.sin(Wt)}}})})}catch(Le){console.error("Failed to reset layout:",Le)}finally{M(!1)}},ie=ve=>{if(!ve)return null;const Le=String(ve);return/<[a-z][\s\S]*>/i.test(Le)?m.jsx("span",{dangerouslySetInnerHTML:{__html:Le}}):Le},we=(ve,Le)=>{if(!ve)return"No content available";try{let Ae=ve.content||ve;if(typeof Ae=="string"&&(Ae.startsWith("{")||Ae.startsWith("[")))try{Ae=JSON.parse(Ae)}catch{}if(["ROOT","EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(Le)){const jt=typeof Ae=="object"?Ae:typeof Ae=="string"&&Ae.startsWith("{")?JSON.parse(Ae):null;if(jt)switch(Le){case"ROOT":return m.jsxs("div",{className:"root-content",children:[m.jsx("h4",{className:"root-title",children:ie(jt.title)}),m.jsx("div",{className:"root-description",children:ie(jt.description)}),jt.keywords&&m.jsxs("div",{className:"root-keywords",children:[m.jsx("strong",{children:"Keywords: "}),Array.isArray(jt.keywords)?jt.keywords.join(", "):ie(jt.keywords)]})]});case"EVIDENCE":return m.jsxs("div",{className:"evidence-content",children:[m.jsx("div",{className:"evidence-point",children:ie(jt.point)}),m.jsx("p",{className:"evidence-source",children:m.jsxs("em",{children:["Source: ",ie(jt.source)]})})]});case"EXAMPLE":return m.jsxs("div",{className:"example-content",children:[m.jsx("h4",{className:"example-title",children:ie(jt.title)}),m.jsx("div",{className:"example-description",children:ie(jt.description)})]});case"COUNTERPOINT":return m.jsxs("div",{className:"counterpoint-content",children:[m.jsx("h4",{className:"counterpoint-argument",children:ie(jt.argument)}),m.jsx("div",{className:"counterpoint-explanation",children:ie(jt.explanation)})]})}}const ct=typeof Ae=="object"?JSON.stringify(Ae,null,2):String(Ae);return/<[a-z][\s\S]*>/i.test(ct)?m.jsx("div",{dangerouslySetInnerHTML:{__html:ct}}):ct.split(`
`).map((jt,xn)=>m.jsx("p",{className:"content-paragraph",children:jt},xn))}catch{return"Error displaying content"}};return m.jsxs("div",{className:`thread-graph ${U?"matte":""}`,children:[m.jsxs("div",{className:`graph-container ${u?"with-sidebar":""}`,children:[m.jsx(J6e,{nodes:z,edges:H,onNodesChange:l,onEdgesChange:d,onNodeClick:W,onNodeDragStop:he,onNodeMouseEnter:(ve,Le)=>{!S&&Le.data.isRoot&&R(Le.id)},onNodeMouseLeave:()=>R(null),nodeTypes:T5e,minZoom:.3,maxZoom:2,proOptions:{hideAttribution:!0},style:{background:"#1d1d1d"},children:m.jsx(o5e,{variant:v?"dots":"lines",gap:v?40:0,size:v?1:0,color:v?"rgba(255, 255, 255, 0.08)":"transparent"})}),g&&m.jsx("div",{className:"loading-overlay",children:m.jsx("div",{className:"loading-spinner"})}),m.jsxs("div",{className:"bottom-right-controls",children:[m.jsx("button",{className:`control-button ${S?"active":""}`,onClick:()=>A(ve=>!ve),title:S?"Hide secondary nodes (show roots only)":"Show all secondary nodes",children:S?"All":"Roots"}),m.jsx("button",{className:`control-button ${U?"active":""}`,onClick:()=>x(!U),title:U?"Switch to Glossy mode":"Switch to Matte mode",children:"M"}),m.jsx("button",{className:`control-button ${v?"active":""}`,onClick:()=>E(!v),title:v?"Switch to solid background":"Switch to dotted background",children:"D"}),m.jsx("button",{className:"control-button",onClick:()=>P({padding:.2,duration:300}),title:"Fit view",children:"F"}),m.jsx("button",{className:"control-button",onClick:ce,disabled:k,title:"Reset layout",children:"R"})]})]}),m.jsx("div",{className:`content-sidebar ${u?"open":""}`,children:u&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"content-sidebar-header",children:[u.type!=="thread"&&m.jsx("button",{className:"back-button",onClick:()=>{var Le;if(u.parent_id){const Ae=e[0].nodes.find(ct=>ct.id===u.parent_id);if(Ae){G(Ae);return}}const ve=e[0];G({...ve,type:"thread",metadata:{...ve.metadata,title:((Le=ve.metadata)==null?void 0:Le.title)||ve.title||`Thread ${ve.id}`}})},"aria-label":"Back to parent",children:""}),m.jsx("h2",{children:u.type==="thread"?((Re=(ke=u.originalData)==null?void 0:ke.metadata)==null?void 0:Re.title)||((Fe=u.originalData)==null?void 0:Fe.title)||u.title||`Thread ${u.id}`:(($e=u.metadata)==null?void 0:$e.title)||u.title||`Node ${u.id}`}),m.jsxs("div",{className:"header-actions",children:[m.jsx("button",{className:"add-node-button",onClick:()=>r&&r(u),children:"Add Node"}),m.jsx("button",{className:"content-sidebar-close",onClick:B,children:""})]})]}),m.jsxs("div",{className:"content-sidebar-body",children:[m.jsxs("div",{className:"child-nodes-list",children:[m.jsx("h3",{children:"Connected Nodes"}),X(`${u.type==="thread"?"thread-":"node-"}${u.id}`).length>0?m.jsx("div",{className:"nodes-grid",children:X(`${u.type==="thread"?"thread-":"node-"}${u.id}`).map(ve=>{var Le;return m.jsxs("div",{className:"node-card",onClick:()=>q(ve),children:[m.jsx("div",{className:"node-card-type",style:{backgroundColor:r5[I0[ve.type]]},children:I0[ve.type]}),m.jsx("div",{className:"node-card-title",children:((Le=ve.metadata)==null?void 0:Le.title)||`Node ${ve.id}`})]},ve.id)})}):m.jsx("p",{className:"no-nodes-message",children:"No nodes connected yet"})]}),m.jsxs("div",{className:"content-sidebar-metadata",children:[m.jsx("div",{className:"type-badge",style:{backgroundColor:Y(u.type)},children:u.type==="thread"?"THREAD":I0[u.type]}),m.jsxs("div",{className:"voting-stats",children:[m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Votes For:"}),m.jsx("span",{children:u.votesFor||"0"})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Votes Against:"}),m.jsx("span",{children:u.votesAgainst||"0"})]})]})]}),m.jsx("div",{className:"content-sidebar-content",children:we(u.content,u.type==="thread"?"thread":I0[u.type])})]})]})})]})},N5e=({node:e,onClose:t,onVote:n,onCreateProposal:r,onAddNode:i,loading:s,voteAmount:o,setVoteAmount:a})=>{T.useState(!1);const l=(c,d)=>{try{return d==="EVIDENCE"&&c.startsWith("{")&&JSON.parse(c).source||c}catch{return c}},f=(c,d)=>{if(!c)return console.log("No content provided for node type:",d),"No content available";console.log("Formatting content for node type:",d),console.log("Raw content:",c),console.log("Content type:",typeof c);let u=c.content||c;if(typeof u=="string"&&(u.startsWith("{")||u.startsWith("[")))try{u=JSON.parse(u)}catch(h){console.log("Failed to parse JSON content:",h)}try{if(["EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(d)){const g=typeof u=="object"?u:typeof u=="string"&&u.startsWith("{")?JSON.parse(u):null;if(g)switch(d){case"EVIDENCE":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"evidence-content",children:[m.jsx("p",{className:"evidence-point",children:g.point}),m.jsx("p",{className:"evidence-source",children:m.jsxs("em",{children:["Source: ",g.source]})})]})});case"EXAMPLE":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"example-content",children:[m.jsx("h4",{className:"example-title",children:g.title}),m.jsx("p",{className:"example-description",children:g.description})]})});case"COUNTERPOINT":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"counterpoint-content",children:[m.jsx("h4",{className:"counterpoint-argument",children:g.argument}),m.jsx("p",{className:"counterpoint-explanation",children:g.explanation})]})})}}if(["SYNTHESIS","CONTEXT"].includes(d)){const g=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:g.split(`
`).map((y,U)=>m.jsx("p",{className:"content-paragraph",children:y},U))})}const h=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:h})}catch(h){console.error("Error formatting content:",h);const g=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:g.split(`
`).map((y,U)=>m.jsx("p",{className:"content-paragraph",children:y},U))})}};return m.jsx("div",{className:"modal-overlay",onClick:t,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsxs("div",{className:"modal-title",children:[m.jsx("h3",{children:l(e.title,e.node_type)}),m.jsx("div",{className:"node-type-badge",children:e.node_type})]}),m.jsx("button",{className:"close-button",onClick:t,children:""})]}),m.jsx("div",{className:"modal-body",children:m.jsx("div",{className:"node-content",children:f(e.content,e.node_type)})})]})})};var lY=wK();function Bi(e){this.content=e}Bi.prototype={constructor:Bi,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Bi(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Bi(n)},addToStart:function(e,t){return new Bi([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Bi(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Bi(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Bi.from(e),e.size?new Bi(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Bi.from(e),e.size?new Bi(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Bi.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Bi.from=function(e){if(e instanceof Bi)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Bi(t)};function cY(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=cY(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function fY(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let f=0,c=Math.min(o.text.length,a.text.length);for(;f<c&&o.text[o.text.length-f-1]==a.text[a.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let f=fY(o.content,a.content,n-1,r-1);if(f)return f}n-=l,r-=l}}class Te{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],f=a+l.nodeSize;if(f>t&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,i+c)}a=f}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(a,l)=>{let f=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&f||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=f},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new Te(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Te(r,i)}cutByIndex(t,n){return t==n?Te.empty:t==0&&n==this.content.length?this:new Te(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new Te(i,s)}addToStart(t){return new Te([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Te(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return cY(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return fY(this,t,n,r)}findIndex(t){if(t==0)return mU(0,t);if(t==this.size)return mU(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?mU(n+1,s):mU(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Te.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Te(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Te.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Te(n||t,r)}static from(t){if(!t)return Te.empty;if(t instanceof Te)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Te([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Te.empty=new Te([],0);const OE={index:0,offset:0};function mU(e,t){return OE.index=e,OE.offset=t,OE}function Rx(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Rx(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Rx(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Bn=class VC{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Rx(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return VC.none;if(t instanceof VC)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Bn.none=[];class _x extends Error{}class qe{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=uY(this.content,t+this.openStart,n);return r&&new qe(r,this.openStart,this.openEnd)}removeBetween(t,n){return new qe(dY(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return qe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new qe(Te.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new qe(t,r,i)}}qe.empty=new qe(Te.empty,0,0);function dY(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(i==t||s.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(dY(s.content,t-i-1,n-i-1)))}function uY(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=uY(o.content,t-s-1,n,o);return a&&e.replaceChild(i,o.copy(a))}function R5e(e,t,n){if(n.openStart>e.depth)throw new _x("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new _x("Inconsistent open depths");return hY(e,t,n,0)}function hY(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=hY(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,a=o.content;return Fh(o,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=_5e(n,e);return Fh(s,mY(e,o,a,t,r))}else return Fh(s,Px(e,t,r))}function pY(e,t){if(!t.type.compatibleContent(e.type))throw new _x("Cannot join "+t.type.name+" onto "+e.type.name)}function WC(e,t,n){let r=e.node(n);return pY(r,t.node(n)),r}function Bh(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function s2(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Bh(e.nodeAfter,r),s++));for(let a=s;a<o;a++)Bh(i.child(a),r);t&&t.depth==n&&t.textOffset&&Bh(t.nodeBefore,r)}function Fh(e,t){return e.type.checkContent(t),e.copy(t)}function mY(e,t,n,r,i){let s=e.depth>i&&WC(e,t,i+1),o=r.depth>i&&WC(n,r,i+1),a=[];return s2(null,e,i,a),s&&o&&t.index(i)==n.index(i)?(pY(s,o),Bh(Fh(s,mY(e,t,n,r,i+1)),a)):(s&&Bh(Fh(s,Px(e,t,i+1)),a),s2(t,n,i,a),o&&Bh(Fh(o,Px(n,r,i+1)),a)),s2(r,null,i,a),new Te(a)}function Px(e,t,n){let r=[];if(s2(null,e,n,r),e.depth>n){let i=WC(e,t,n+1);Bh(Fh(i,Px(e,t,n+1)),r)}return s2(t,null,n,r),new Te(r)}function _5e(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(Te.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class nb{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Bn.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Dx(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),f=s-l;if(r.push(o,a,i+l),!f||(o=o.child(a),o.isText))break;s=f-1,i+=l+1}return new nb(n,r,s)}static resolveCached(t,n){let r=tj.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else tj.set(t,r=new P5e);let i=r.elts[r.i]=nb.resolve(t,n);return r.i=(r.i+1)%D5e,i}}class P5e{constructor(){this.elts=[],this.i=0}}const D5e=12,tj=new WeakMap;class Dx{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const L5e=Object.create(null);let ju=class GC{constructor(t,n,r,i=Bn.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||Te.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Rx(this.attrs,n||t.defaultAttrs||L5e)&&Bn.sameSet(this.marks,r||Bn.none)}copy(t=null){return t==this.content?this:new GC(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new GC(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return qe.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),f=i.node(o).content.cut(i.pos-a,s.pos-a);return new qe(f,i.depth-o,s.depth-o)}replace(t,n,r){return R5e(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return nb.resolveCached(this,t)}resolveNoCache(t){return nb.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),gY(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=Te.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Bn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Bn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=Te.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ju.prototype.text=void 0;class Lx extends ju{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gY(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Lx(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Lx(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function gY(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class o1{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new O5e(t,n);if(r.next==null)return o1.empty;let i=bY(r);r.next&&r.err("Unexpected trailing text");let s=V5e(H5e(i));return W5e(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(t,r);if(l&&(!n||l.validEnd))return Te.from(a.map(f=>f.createAndFill()));for(let f=0;f<o.next.length;f++){let{type:c,next:d}=o.next[f];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let u=s(d,a.concat(c));if(u)return u}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}o1.empty=new o1(!0);class O5e{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function bY(e){let t=[];do t.push(j5e(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function j5e(e){let t=[];do t.push(B5e(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function B5e(e){let t=$5e(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=F5e(e,t);else break;return t}function nj(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function F5e(e,t){let n=nj(e),r=n;return e.eat(",")&&(e.next!="}"?r=nj(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function z5e(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function $5e(e){if(e.eat("(")){let t=bY(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=z5e(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function H5e(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,a,l){let f={term:l,to:a};return t[o].push(f),f}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,f)=>l.concat(s(f,a)),[]);if(o.type=="seq")for(let l=0;;l++){let f=s(o.exprs[l],a);if(l==o.exprs.length-1)return f;i(f,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let f=0;f<o.min;f++){let c=n();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let f=o.min;f<o.max;f++){let c=n();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function yY(e,t){return t-e}function rj(e,t){let n=[];return r(t),n.sort(yY);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function V5e(e){let t=Object.create(null);return n(rj(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:a,to:l})=>{if(!a)return;let f;for(let c=0;c<i.length;c++)i[c][0]==a&&(f=i[c][1]);rj(e,l).forEach(c=>{f||i.push([a,f=[]]),f.indexOf(c)==-1&&f.push(c)})})});let s=t[r.join(",")]=new o1(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(yY);s.next.push({type:i[o][0],next:t[a.join(",")]||n(a)})}return s}}function W5e(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:f}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function UY(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function xY(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function wY(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function vY(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new X5e(e,r,t[r]);return n}let ij=class EY{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=vY(t,r.attrs),this.defaultAttrs=UY(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==o1.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:xY(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ju(this,this.computeAttrs(t),Te.from(n),Bn.setFrom(r))}createChecked(t=null,n,r){return n=Te.from(n),this.checkContent(n),new ju(this,this.computeAttrs(t),n,Bn.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=Te.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Te.empty,!0);return s?new ju(this,t,n.append(s),Bn.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){wY(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Bn.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new EY(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function G5e(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class X5e{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?G5e(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class tw{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=vY(t,i.attrs),this.excluded=null;let s=UY(this.attrs);this.instance=s?new Bn(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Bn(this,xY(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new tw(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){wY(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let kY=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Bi.from(t.nodes),n.marks=Bi.from(t.marks||{}),this.nodes=ij.compile(this.spec.nodes,this),this.marks=tw.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=o1.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?sj(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:sj(this,o.split(" "))}this.nodeFromJSON=i=>ju.fromJSON(this,i),this.markFromJSON=i=>Bn.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof ij){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Lx(r,r.defaultAttrs,t,Bn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function sj(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let a in e.marks){let l=e.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function K5e(e){return e.tag!=null}function Y5e(e){return e.style!=null}let o2=class XC{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(K5e(i))this.tags.push(i);else if(Y5e(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new aj(this,n,!1);return r.addAll(t,Bn.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new aj(this,n,!0);return r.addAll(t,Bn.none,n.from,n.to),qe.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Q5e(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=lj(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=lj(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new XC(t,XC.schemaRules(t)))}};const SY={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Z5e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},CY={ol:!0,ul:!0},rb=1,KC=2,a2=4;function oj(e,t,n){return t!=null?(t?rb:0)|(t==="full"?KC:0):e&&e.whitespace=="pre"?rb|KC:n&~a2}class gU{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Bn.none,this.match=s||(o&a2?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Te.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&rb)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Te.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Te.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!SY.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class aj{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=oj(null,n.preserveWhitespace,0)|(r?a2:0);i?s=new gU(i.type,i.attrs,Bn.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new gU(null,null,Bn.none,!0,null,o):s=new gU(t.schema.topNodeType,null,Bn.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&KC?"full":this.localPreserveWS||(i.options&rb)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),a;CY.hasOwnProperty(o)&&this.parser.normalizeLists&&q5e(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:Z5e.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let f,c=this.needsBlock;if(SY.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let d=l&&l.skip?n:this.readStyles(t,n);d&&this.addAll(t,d),f&&this.sync(s),this.needsBlock=c}else{let f=this.readStyles(t,n);f&&this.addElementByRule(t,l,f,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(f=>!l.clearMark(f)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,a=i==null?null:t.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],f=l.findWrapping(t);if(f&&(!i||i.length>f.length+a)&&(i=f,s=l,!f.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=Bn.none;for(let a of i.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):cj(a.type,t.type))&&(o=a.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=oj(t,s,o.options);o.options&a2&&o.content.length==0&&(a|=a2);let l=Bn.none;return r=r.filter(f=>(o.type?o.type.allowsMarkType(f.type):cj(f.type,t))?(l=f.addToSet(l),!1):!0),this.nodes.push(new gU(t,n,l,i,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=rb)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let f=n[a];if(f==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=f&&!c.isInGroup(f))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function q5e(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&CY.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function Q5e(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function lj(e){let t={};for(let n in e)t[n]=e[n];return t}function cj(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:f,next:c}=a.edge(l);if(f==t||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class T1{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=jE(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let f=o.marks[l];if(!this.marks[f.type.name]){l++;continue}if(!f.eq(s[a][0])||f.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let f=o.marks[l++],c=this.serializeMark(f,o.isInline,n);c&&(s.push([f,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=v3(jE(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&v3(jE(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return v3(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new T1(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=fj(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return fj(t.marks)}}function fj(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function jE(e){return e.document||window.document}const dj=new WeakMap;function J5e(e){let t=dj.get(e);return t===void 0&&dj.set(e,t=e2e(e)),t}function e2e(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function v3(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=J5e(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?e.createElementNS(n,i):e.createElement(i),f=t[1],c=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){c=2;for(let d in f)if(f[d]!=null){let u=d.indexOf(" ");u>0?l.setAttributeNS(d.slice(0,u),d.slice(u+1),f[d]):d=="style"&&l.style?l.style.cssText=f[d]:l.setAttribute(d,f[d])}}for(let d=c;d<t.length;d++){let u=t[d];if(u===0){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:g}=v3(e,u,n,r);if(l.appendChild(h),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const AY=65535,MY=Math.pow(2,16);function t2e(e,t){return e+t*MY}function uj(e){return e&AY}function n2e(e){return(e-(e&AY))/MY}const TY=1,IY=2,E3=4,NY=8;class YC{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&NY)>0}get deletedBefore(){return(this.delInfo&(TY|E3))>0}get deletedAfter(){return(this.delInfo&(IY|E3))>0}get deletedAcross(){return(this.delInfo&E3)>0}}class Po{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Po.empty)return Po.empty}recover(t){let n=0,r=uj(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+n2e(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let f=this.ranges[a+s],c=this.ranges[a+o],d=l+f;if(t<=d){let u=f?t==l?-1:t==d?1:n:n,h=l+i+(u<0?0:c);if(r)return h;let g=t==(n<0?l:d)?null:t2e(a/3,t-l),y=t==l?IY:t==d?TY:E3;return(n<0?t!=l:t!=d)&&(y|=NY),new YC(h,y,g)}i+=c-f}return r?t+i:new YC(t+i,0,null)}touches(t,n){let r=0,i=uj(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let f=this.ranges[a+s],c=l+f;if(t<=c&&a==i*3)return!0;r+=this.ranges[a+o]-f}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),f=this.ranges[i+n],c=this.ranges[i+r];t(a,a+f,l,l+c),s+=c-f}}invert(){return new Po(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Po.empty:new Po(t<0?[0,-t,0]:[0,0,t])}}Po.empty=new Po([]);class ib{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new ib(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new ib;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return r?t:new YC(t,i,null)}}const BE=Object.create(null);class ms{getMap(){return Po.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=BE[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in BE)throw new RangeError("Duplicate use of step JSON ID "+t);return BE[t]=n,n.prototype.jsonID=t,n}}class Qr{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Qr(t,null)}static fail(t){return new Qr(null,t)}static fromReplace(t,n,r,i){try{return Qr.ok(t.replace(n,r,i))}catch(s){if(s instanceof _x)return Qr.fail(s.message);throw s}}}function FT(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(FT(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return Te.fromArray(r)}class Mu extends ms{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new qe(FT(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Qr.fromReplace(t,this.from,this.to,s)}invert(){return new ll(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Mu(n.pos,r.pos,this.mark)}merge(t){return t instanceof Mu&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Mu(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Mu(n.from,n.to,t.markFromJSON(n.mark))}}ms.jsonID("addMark",Mu);class ll extends ms{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new qe(FT(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Qr.fromReplace(t,this.from,this.to,r)}invert(){return new Mu(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ll(n.pos,r.pos,this.mark)}merge(t){return t instanceof ll&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new ll(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ll(n.from,n.to,t.markFromJSON(n.mark))}}ms.jsonID("removeMark",ll);class Tu extends ms{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Qr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Qr.fromReplace(t,this.pos,this.pos+1,new qe(Te.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Tu(this.pos,n.marks[i]);return new Tu(this.pos,this.mark)}}return new a1(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Tu(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Tu(n.pos,t.markFromJSON(n.mark))}}ms.jsonID("addNodeMark",Tu);class a1 extends ms{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Qr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Qr.fromReplace(t,this.pos,this.pos+1,new qe(Te.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Tu(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new a1(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new a1(n.pos,t.markFromJSON(n.mark))}}ms.jsonID("removeNodeMark",a1);class Si extends ms{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&ZC(t,this.from,this.to)?Qr.fail("Structure replace would overwrite content"):Qr.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Po([this.from,this.to-this.from,this.slice.size])}invert(t){return new Si(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Si(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Si)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?qe.empty:new qe(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Si(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?qe.empty:new qe(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Si(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Si(n.from,n.to,qe.fromJSON(t,n.slice),!!n.structure)}}ms.jsonID("replace",Si);class Ti extends ms{constructor(t,n,r,i,s,o,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(ZC(t,this.from,this.gapFrom)||ZC(t,this.gapTo,this.to)))return Qr.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Qr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Qr.fromReplace(t,this.from,this.to,r):Qr.fail("Content does not fit in gap")}getMap(){return new Po([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Ti(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Ti(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ti(n.from,n.to,n.gapFrom,n.gapTo,qe.fromJSON(t,n.slice),n.insert,!!n.structure)}}ms.jsonID("replaceAround",Ti);function ZC(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function r2e(e,t,n,r){let i=[],s=[],o,a;e.doc.nodesBetween(t,n,(l,f,c)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let u=Math.max(f,t),h=Math.min(f+l.nodeSize,n),g=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(g)||(o&&o.to==u&&o.mark.eq(d[y])?o.to=h:i.push(o=new ll(u,h,d[y])));a&&a.to==u?a.to=h:s.push(a=new Mu(u,h,r))}}),i.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function i2e(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof tw){let f=o.marks,c;for(;c=r.isInSet(f);)(l||(l=[])).push(c),f=c.removeFromSet(f)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let f=Math.min(a+o.nodeSize,n);for(let c=0;c<l.length;c++){let d=l[c],u;for(let h=0;h<i.length;h++){let g=i[h];g.step==s-1&&d.eq(i[h].style)&&(u=g)}u?(u.to=f,u.step=s):i.push({style:d,from:Math.max(a,t),to:f,step:s})}}}),i.forEach(o=>e.step(new ll(o.from,o.to,o.style)))}function zT(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<s.childCount;l++){let f=s.child(l),c=a+f.nodeSize,d=r.matchType(f.type);if(!d)o.push(new Si(a,c,qe.empty));else{r=d;for(let u=0;u<f.marks.length;u++)n.allowsMarkType(f.marks[u].type)||e.step(new ll(a,c,f.marks[u]));if(i&&f.isText&&n.whitespace!="pre"){let u,h=/\r?\n|\r/g,g;for(;u=h.exec(f.text);)g||(g=new qe(Te.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),o.push(new Si(a+u.index,a+u.index+u[0].length,g))}}a=c}if(!r.validEnd){let l=r.fillBefore(Te.empty,!0);e.replace(a,a,new qe(l,0,0))}for(let l=o.length-1;l>=0;l--)e.step(o[l])}function s2e(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function e6(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,i=0,s=0;;--r){let o=e.$from.node(r),a=e.$from.index(r)+i,l=e.$to.indexAfter(r)-s;if(r<e.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!s2e(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function o2e(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),a=i.after(s+1),l=o,f=a,c=Te.empty,d=0;for(let g=s,y=!1;g>n;g--)y||r.index(g)>0?(y=!0,c=Te.from(r.node(g).copy(c)),d++):l--;let u=Te.empty,h=0;for(let g=s,y=!1;g>n;g--)y||i.after(g+1)<i.end(g)?(y=!0,u=Te.from(i.node(g).copy(u)),h++):f++;e.step(new Ti(l,f,o,a,new qe(c.append(u),d,h),c.size-d,!0))}function $T(e,t,n=null,r=e){let i=a2e(e,t),s=i&&l2e(r,t);return s?i.map(hj).concat({type:t,attrs:n}).concat(s.map(hj)):null}function hj(e){return{type:e,attrs:null}}function a2e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function l2e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let f=r;l&&f<i;f++)l=l.matchType(n.child(f).type);return!l||!l.validEnd?null:o}function c2e(e,t,n){let r=Te.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Te.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new Ti(i,s,i,s,new qe(r,0,0),n.length,!0))}function f2e(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&d2e(e.doc,e.mapping.slice(s).map(a),r)){let f=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!g?f=!1:!h&&g&&(f=!0)}f===!1&&_Y(e,o,a,s),zT(e,e.mapping.slice(s).map(a,1),r,void 0,f===null);let c=e.mapping.slice(s),d=c.map(a,1),u=c.map(a+o.nodeSize,1);return e.step(new Ti(d,u,d+1,u-1,new qe(Te.from(r.create(l,null,o.marks)),0,0),1,!0)),f===!0&&RY(e,o,a,s),!1}})}function RY(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function _Y(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function d2e(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function u2e(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Ti(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new qe(Te.from(o),0,0),1,!0))}function hm(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,c=n-2;f>s;f--,c--){let d=i.node(f),u=i.index(f);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(u,d.childCount),g=r&&r[c+1];g&&(h=h.replaceChild(0,g.type.create(g.attrs)));let y=r&&r[c]||d;if(!d.canReplace(u+1,d.childCount)||!y.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function h2e(e,t,n=1,r){let i=e.doc.resolve(t),s=Te.empty,o=Te.empty;for(let a=i.depth,l=i.depth-n,f=n-1;a>l;a--,f--){s=Te.from(i.node(a).copy(s));let c=r&&r[f];o=Te.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}e.step(new Si(t,t,new qe(s.append(o),n,n),!0))}function o0(e,t){let n=e.resolve(t),r=n.index();return PY(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function p2e(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function PY(e,t){return!!(e&&t&&!e.isLeaf&&p2e(e,t))}function nw(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&PY(s,o)&&r.node(i).canReplace(a,a+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function m2e(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let a=e.steps.length;if(r===!1){let c=e.doc.resolve(t+n);_Y(e,c.node(),c.before(),a)}o.inlineContent&&zT(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=e.mapping.slice(a),f=l.map(t-n);if(e.step(new Si(f,l.map(t+n,-1),qe.empty,!0)),r===!0){let c=e.doc.resolve(f);RY(e,c.node(),c.before(),e.steps.length)}return e}function g2e(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function DY(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),f=r.node(o),c=!1;if(s==1)c=f.canReplace(l,l,i);else{let d=f.contentMatchAt(l).findWrapping(i.firstChild.type);c=d&&f.canReplaceWith(l,l,d[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function rw(e,t,n=t,r=qe.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return LY(i,s,r)?new Si(t,n,r):new b2e(i,s,r).fit()}function LY(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class b2e{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Te.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=Te.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new qe(s,o,a);return t>-1?new Ti(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Si(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=FE(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:f}=this.frontier[a],c,d=null;if(n==1&&(o?f.matchType(o.type)||(d=f.fillBefore(Te.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(c=f.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&f.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=FE(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new qe(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=FE(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new qe(j5(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new qe(j5(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-t,f=0,c=[],{match:d,type:u}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)c.push(i.child(y));d=d.matchFragment(i)}let h=a.size+t-(o.content.size-o.openEnd);for(;f<a.childCount;){let y=a.child(f),U=d.matchType(y.type);if(!U)break;f++,(f>1||l==0||y.content.size)&&(d=U,c.push(OY(y.mark(u.allowedMarks(y.marks)),f==1?l:0,f==a.childCount?h:-1)))}let g=f==a.childCount;g||(h=-1),this.placed=B5(this.placed,n,Te.from(c)),this.frontier[n].match=d,g&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,U=a;y<h;y++){let x=U.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),U=x.content}this.unplaced=g?t==0?qe.empty:new qe(j5(o.content,t-1,1),t-1,h<0?o.openEnd:t-1):new qe(j5(o.content,t,f),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!zE(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=zE(t,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:f}=this.frontier[a],c=zE(t,a,f,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=B5(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=B5(this.placed,this.depth,Te.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Te.empty,!0);n.childCount&&(this.placed=B5(this.placed,this.frontier.length,n))}}function j5(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(j5(e.firstChild.content,t-1,n)))}function B5(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(B5(e.lastChild.content,t-1,n)))}function FE(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function OY(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,OY(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Te.empty,!0)))),e.copy(r)}function zE(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!y2e(n,s.content,o)?a:null}function y2e(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function U2e(e){return e.spec.defining||e.spec.definingForContent}function x2e(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(LY(i,s,r))return e.step(new Si(t,n,r));let o=BY(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let u=i.depth,h=i.pos-1;u>0;u--,h--){let g=i.node(u).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(u)>-1?a=u:i.before(u)==h&&o.splice(1,0,-u)}let l=o.indexOf(a),f=[],c=r.openStart;for(let u=r.content,h=0;;h++){let g=u.firstChild;if(f.push(g),h==r.openStart)break;u=g.content}for(let u=c-1;u>=0;u--){let h=f[u],g=U2e(h.type);if(g&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=u;else if(g||!h.type.isTextblock)break}for(let u=r.openStart;u>=0;u--){let h=(u+c+1)%(r.openStart+1),g=f[h];if(g)for(let y=0;y<o.length;y++){let U=o[(y+l)%o.length],x=!0;U<0&&(x=!1,U=-U);let v=i.node(U-1),E=i.index(U-1);if(v.canReplaceWith(E,E,g.type,g.marks))return e.replace(i.before(U),x?s.after(U):n,new qe(jY(r.content,0,r.openStart,h),h,r.openEnd))}}let d=e.steps.length;for(let u=o.length-1;u>=0&&(e.replace(t,n,r),!(e.steps.length>d));u--){let h=o[u];h<0||(t=i.before(h),n=s.after(h))}}function jY(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(jY(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(Te.empty,!0))}return e}function w2e(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=g2e(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new qe(Te.from(r),0,0))}function v2e(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=BY(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return e.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function BY(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class pm extends ms{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Qr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Qr.fromReplace(t,this.pos,this.pos+1,new qe(Te.from(i),0,n.isLeaf?0:1))}getMap(){return Po.empty}invert(t){return new pm(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new pm(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new pm(n.pos,n.attr,n.value)}}ms.jsonID("attr",pm);class sb extends ms{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Qr.ok(r)}getMap(){return Po.empty}invert(t){return new sb(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new sb(n.attr,n.value)}}ms.jsonID("docAttr",sb);let Cg=class extends Error{};Cg=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Cg.prototype=Object.create(Error.prototype);Cg.prototype.constructor=Cg;Cg.prototype.name="TransformError";class FY{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new ib}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Cg(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let t=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(t=i.map(t,1),n=i.map(n,-1)),i.forEach((s,o,a,l)=>{t=Math.min(t,a),n=Math.max(n,l)})}return t==1e9?null:{from:t,to:n}}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=qe.empty){let i=rw(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new qe(Te.from(r),0,0))}delete(t,n){return this.replace(t,n,qe.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return x2e(this,t,n,r),this}replaceRangeWith(t,n,r){return w2e(this,t,n,r),this}deleteRange(t,n){return v2e(this,t,n),this}lift(t,n){return o2e(this,t,n),this}join(t,n=1){return m2e(this,t,n),this}wrap(t,n){return c2e(this,t,n),this}setBlockType(t,n=t,r,i=null){return f2e(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return u2e(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new pm(t,n,r)),this}setDocAttribute(t,n){return this.step(new sb(t,n)),this}addNodeMark(t,n){return this.step(new Tu(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Bn)n.isInSet(r.marks)&&this.step(new a1(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new a1(t,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(t,n=1,r){return h2e(this,t,n,r),this}addMark(t,n,r){return r2e(this,t,n,r),this}removeMark(t,n,r){return i2e(this,t,n,r),this}clearIncompatible(t,n,r){return zT(this,t,n,r),this}}const $E=Object.create(null);class Vt{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new E2e(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=qe.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:f}=o[a],c=t.mapping.slice(s);t.replaceRange(c.map(l.pos),c.map(f.pos),a?qe.empty:n),a==0&&gj(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=t.mapping.slice(r),f=l.map(o.pos),c=l.map(a.pos);s?t.deleteRange(f,c):(t.replaceRangeWith(f,c,n),gj(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Nt(t):Dp(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?Dp(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):Dp(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Ua(t.node(0))}static atStart(t){return Dp(t,t,0,0,1)||new Ua(t)}static atEnd(t){return Dp(t,t,t.content.size,t.childCount,-1)||new Ua(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=$E[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in $E)throw new RangeError("Duplicate use of selection JSON ID "+t);return $E[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Nt.between(this.$anchor,this.$head).getBookmark()}}Vt.prototype.visible=!0;class E2e{constructor(t,n){this.$from=t,this.$to=n}}let pj=!1;function mj(e){!pj&&!e.parent.inlineContent&&(pj=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Nt extends Vt{constructor(t,n=t){mj(t),mj(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Vt.near(r);let i=t.resolve(n.map(this.anchor));return new Nt(i.parent.inlineContent?i:r,r)}replace(t,n=qe.empty){if(super.replace(t,n),n==qe.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Nt&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new iw(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Nt(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Vt.findFrom(n,r,!0)||Vt.findFrom(n,-r,!0);if(s)n=s.$head;else return Vt.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Vt.findFrom(t,-r,!0)||Vt.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Nt(t,n)}}Vt.jsonID("text",Nt);class iw{constructor(t,n){this.anchor=t,this.head=n}map(t){return new iw(t.map(this.anchor),t.map(this.head))}resolve(t){return Nt.between(t.resolve(this.anchor),t.resolve(this.head))}}class pt extends Vt{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Vt.near(s):new pt(s)}content(){return new qe(Te.from(this.node),0,0)}eq(t){return t instanceof pt&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new HT(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new pt(t.resolve(n.anchor))}static create(t,n){return new pt(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}pt.prototype.visible=!1;Vt.jsonID("node",pt);class HT{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new iw(r,r):new HT(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&pt.isSelectable(r)?new pt(n):Vt.near(n)}}class Ua extends Vt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=qe.empty){if(n==qe.empty){t.delete(0,t.doc.content.size);let r=Vt.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Ua(t)}map(t){return new Ua(t)}eq(t){return t instanceof Ua}getBookmark(){return k2e}}Vt.jsonID("all",Ua);const k2e={map(){return this},resolve(e){return new Ua(e)}};function Dp(e,t,n,r,i,s=!1){if(t.inlineContent)return Nt.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let a=t.child(o);if(a.isAtom){if(!s&&pt.isSelectable(a))return pt.create(e,n-(i<0?a.nodeSize:0))}else{let l=Dp(e,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function gj(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof Si||i instanceof Ti))return;let s=e.mapping.maps[r],o;s.forEach((a,l,f,c)=>{o==null&&(o=c)}),e.setSelection(Vt.near(e.doc.resolve(o),n))}const bj=1,bU=2,yj=4;class S2e extends FY{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|bj)&~bU,this.storedMarks=null,this}get selectionSet(){return(this.updated&bj)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=bU,this}ensureMarks(t){return Bn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&bU)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~bU,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Bn.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Vt.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=yj,this}get scrolledIntoView(){return(this.updated&yj)>0}}function Uj(e,t){return!t||!e?e:e.bind(t)}class F5{constructor(t,n,r){this.name=t,this.init=Uj(n.init,r),this.apply=Uj(n.apply,r)}}const C2e=[new F5("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new F5("selection",{init(e,t){return e.selection||Vt.atStart(t.doc)},apply(e){return e.selection}}),new F5("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new F5("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class HE{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=C2e.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new F5(r.key,r.spec.state,r))})}}class Xp{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,f=i?i[o].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,f,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Xp(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new S2e(this)}static create(t){let n=new HE(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Xp(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new HE(this.schema,t.plugins),r=n.fields,i=new Xp(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new HE(t.schema,t.plugins),s=new Xp(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=ju.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Vt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],f=l.spec.state;if(l.key==o.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=f.fromJSON.call(l,t,n[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function zY(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=zY(i,t,{})),n[r]=i}return n}class kr{constructor(t){this.spec=t,this.props={},t.props&&zY(t.props,this,this.props),this.key=t.key?t.key.key:$Y("plugin")}getState(t){return t[this.key]}}const VE=Object.create(null);function $Y(e){return e in VE?e+"$"+ ++VE[e]:(VE[e]=0,e+"$")}class hi{constructor(t="key"){this.key=$Y(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const A2e=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function HY(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const M2e=(e,t,n)=>{let r=HY(e,n);if(!r)return!1;let i=VT(r);if(!i){let o=r.blockRange(),a=o&&e6(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(XY(e,i,t,-1))return!0;if(r.parent.content.size==0&&(Ag(s,"end")||pt.isSelectable(s)))for(let o=r.depth;;o--){let a=rw(e.doc,r.before(o),r.after(o),qe.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(Ag(s,"end")?Vt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):pt.create(l.doc,i.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},T2e=(e,t,n)=>{let r=HY(e,n);if(!r)return!1;let i=VT(r);return i?VY(e,i,t):!1},I2e=(e,t,n)=>{let r=WY(e,n);if(!r)return!1;let i=WT(r);return i?VY(e,i,t):!1};function VY(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=t.nodeAfter,a=o,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let f=rw(e.doc,s,l,qe.empty);if(!f||f.from!=s||f instanceof Si&&f.slice.size>=l-s)return!1;if(n){let c=e.tr.step(f);c.setSelection(Nt.create(c.doc,s)),n(c.scrollIntoView())}return!0}function Ag(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const N2e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=VT(r)}let o=s&&s.nodeBefore;return!o||!pt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(pt.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function VT(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function WY(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const R2e=(e,t,n)=>{let r=WY(e,n);if(!r)return!1;let i=WT(r);if(!i)return!1;let s=i.nodeAfter;if(XY(e,i,t,1))return!0;if(r.parent.content.size==0&&(Ag(s,"start")||pt.isSelectable(s))){let o=rw(e.doc,r.before(),r.after(),qe.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(Ag(s,"start")?Vt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):pt.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},_2e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=WT(r)}let o=s&&s.nodeAfter;return!o||!pt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(pt.create(e.doc,s.pos)).scrollIntoView()),!0)};function WT(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const P2e=(e,t)=>{let n=e.selection,r=n instanceof pt,i;if(r){if(n.node.isTextblock||!o0(e.doc,n.from))return!1;i=n.from}else if(i=nw(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(pt.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},D2e=(e,t)=>{let n=e.selection,r;if(n instanceof pt){if(n.node.isTextblock||!o0(e.doc,n.to))return!1;r=n.to}else if(r=nw(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},L2e=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&e6(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},O2e=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function GY(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const j2e=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=GY(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Vt.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},B2e=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Ua||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=GY(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(Nt.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},F2e=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(hm(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&e6(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},z2e=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(pt.create(e.doc,i))),!0)};function $2e(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||o0(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function XY(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&$2e(e,t,n))return!0;let f=!l&&t.parent.canReplace(t.index(),t.index()+1);if(f&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let h=t.pos+s.nodeSize,g=Te.empty;for(let x=o.length-1;x>=0;x--)g=Te.from(o[x].create(null,g));g=Te.from(i.copy(g));let y=e.tr.step(new Ti(t.pos-1,h,t.pos,h,new qe(g,1,0),o.length,!0)),U=y.doc.resolve(h+2*o.length);U.nodeAfter&&U.nodeAfter.type==i.type&&o0(y.doc,U.pos)&&y.join(U.pos),n(y.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&l?null:Vt.findFrom(t,1),d=c&&c.$from.blockRange(c.$to),u=d&&e6(d);if(u!=null&&u>=t.depth)return n&&n(e.tr.lift(d,u).scrollIntoView()),!0;if(f&&Ag(s,"start",!0)&&Ag(i,"end")){let h=i,g=[];for(;g.push(h),!h.isTextblock;)h=h.lastChild;let y=s,U=1;for(;!y.isTextblock;y=y.firstChild)U++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(n){let x=Te.empty;for(let E=g.length-1;E>=0;E--)x=Te.from(g[E].copy(x));let v=e.tr.step(new Ti(t.pos-g.length,t.pos+s.nodeSize,t.pos+U,t.pos+s.nodeSize-U,new qe(x,g.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function KY(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Nt.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const H2e=KY(-1),V2e=KY(1);function W2e(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&$T(o,e,t);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function xj(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,f)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let c=n.doc.resolve(f),d=c.index();i=c.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,e,t)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function G2e(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return X2e(a,o,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function X2e(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=o.resolve(t.start-2);s=new Dx(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new Dx(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=$T(s,n,r,t);return a?(e&&K2e(e,t,a,i,n),!0):!1}function K2e(e,t,n,r,i){let s=Te.empty;for(let c=n.length-1;c>=0;c--)s=Te.from(n[c].type.create(n[c].attrs,s));e.step(new Ti(t.start-(r?2:0),t.end,t.start,t.end,new qe(s,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==i&&(o=c+1);let a=n.length-o,l=t.start+n.length-(r?2:0),f=t.parent;for(let c=t.startIndex,d=t.endIndex,u=!0;c<d;c++,u=!1)!u&&hm(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=f.child(c).nodeSize;return e}function Y2e(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?Z2e(t,n,e,s):q2e(t,n,s):!0:!1}}function Z2e(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ti(s-1,o,s,o,new qe(Te.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Dx(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=e6(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return o0(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function q2e(e,t,n){let r=e.tr,i=n.parent;for(let h=n.end,g=n.endIndex-1,y=n.startIndex;g>y;g--)h-=i.child(g).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,f=s.node(-1),c=s.index(-1);if(!f.canReplace(c+(a?0:1),c+1,o.content.append(l?Te.empty:Te.from(i))))return!1;let d=s.pos,u=d+o.nodeSize;return r.step(new Ti(d-(a?1:0),u+(l?1:0),d+1,u-1,new qe((a?Te.empty:Te.from(i.copy(Te.empty))).append(l?Te.empty:Te.from(i.copy(Te.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function Q2e(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=e)return!1;if(n){let f=l.lastChild&&l.lastChild.type==a.type,c=Te.from(f?e.create():null),d=new qe(Te.from(e.create(null,Te.from(a.type.create(null,c)))),f?3:1,0),u=s.start,h=s.end;n(t.tr.step(new Ti(u-(f?3:1),h,u,h,d,1,!0)).scrollIntoView())}return!0}}const $i=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Mg=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let qC=null;const df=function(e,t,n){let r=qC||(qC=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},J2e=function(){qC=null},l1=function(e,t,n,r){return n&&(wj(e,t,n,r,-1)||wj(e,t,n,r,1))},ebe=/^(img|br|input|textarea|hr)$/i;function wj(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:ga(e))){let o=e.parentNode;if(!o||o.nodeType!=1||my(e)||ebe.test(e.nodeName)||e.contentEditable=="false")return!1;t=$i(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?ga(e):0}else return!1}}function ga(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function tbe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=ga(e)}else if(e.parentNode&&!my(e))t=$i(e),e=e.parentNode;else return null}}function nbe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!my(e))t=$i(e)+1,e=e.parentNode;else return null}}function rbe(e,t,n){for(let r=t==0,i=t==ga(e);r||i;){if(e==n)return!0;let s=$i(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==ga(e)}}function my(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const sw=function(e){return e.focusNode&&l1(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function G0(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function ibe(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function sbe(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(ga(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(ga(r.startContainer),r.startOffset)}}}const Ec=typeof navigator<"u"?navigator:null,vj=typeof document<"u"?document:null,a0=Ec&&Ec.userAgent||"",QC=/Edge\/(\d+)/.exec(a0),YY=/MSIE \d/.exec(a0),JC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(a0),co=!!(YY||JC||QC),Bu=YY?document.documentMode:JC?+JC[1]:QC?+QC[1]:0,xa=!co&&/gecko\/(\d+)/i.test(a0);xa&&+(/Firefox\/(\d+)/.exec(a0)||[0,0])[1];const eA=!co&&/Chrome\/(\d+)/.exec(a0),Vi=!!eA,ZY=eA?+eA[1]:0,ps=!co&&!!Ec&&/Apple Computer/.test(Ec.vendor),Tg=ps&&(/Mobile\/\w+/.test(a0)||!!Ec&&Ec.maxTouchPoints>2),ua=Tg||(Ec?/Mac/.test(Ec.platform):!1),qY=Ec?/Win/.test(Ec.platform):!1,Df=/Android \d/.test(a0),gy=!!vj&&"webkitFontSmoothing"in vj.documentElement.style,obe=gy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function abe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ef(e,t){return typeof e=="number"?e:e[t]}function lbe(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Ej(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=Mg(o);continue}let a=o,l=a==s.body,f=l?abe(s):lbe(a),c=0,d=0;if(t.top<f.top+ef(r,"top")?d=-(f.top-t.top+ef(i,"top")):t.bottom>f.bottom-ef(r,"bottom")&&(d=t.bottom-t.top>f.bottom-f.top?t.top+ef(i,"top")-f.top:t.bottom-f.bottom+ef(i,"bottom")),t.left<f.left+ef(r,"left")?c=-(f.left-t.left+ef(i,"left")):t.right>f.right-ef(r,"right")&&(c=t.right-f.right+ef(i,"right")),c||d)if(l)s.defaultView.scrollBy(c,d);else{let h=a.scrollLeft,g=a.scrollTop;d&&(a.scrollTop+=d),c&&(a.scrollLeft+=c);let y=a.scrollLeft-h,U=a.scrollTop-g;t={left:t.left-y,top:t.top-U,right:t.right-y,bottom:t.bottom-U}}let u=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(u))break;o=u=="absolute"?o.offsetParent:Mg(o)}}function cbe(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=e.root.elementFromPoint(s,o);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:QY(e.dom)}}function QY(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Mg(r));return t}function fbe({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;JY(n,r==0?0:r-t)}function JY(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let gp=null;function dbe(e){if(e.setActive)return e.setActive();if(gp)return e.focus(gp);let t=QY(e);e.focus(gp==null?{get preventScroll(){return gp={preventScroll:!0},!0}}:void 0),gp||(gp=!1,JY(t,0))}function eZ(e,t){let n,r=2e8,i,s=0,o=t.top,a=t.top,l,f;for(let c=e.firstChild,d=0;c;c=c.nextSibling,d++){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=df(c).getClientRects();else continue;for(let h=0;h<u.length;h++){let g=u[h];if(g.top<=o&&g.bottom>=a){o=Math.max(g.bottom,o),a=Math.min(g.top,a);let y=g.left>t.left?g.left-t.left:g.right<t.left?t.left-g.right:0;if(y<r){n=c,r=y,i=y&&n.nodeType==3?{left:g.right<t.left?g.right:g.left,top:t.top}:t,c.nodeType==1&&y&&(s=d+(t.left>=(g.left+g.right)/2?1:0));continue}}else g.top>t.top&&!l&&g.left<=t.left&&g.right>=t.left&&(l=c,f={left:Math.max(g.left,Math.min(g.right,t.left)),top:g.top});!n&&(t.left>=g.right&&t.top>=g.top||t.left>=g.left&&t.top>=g.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=f,r=0),n&&n.nodeType==3?ube(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:eZ(n,i)}function ube(e,t){let n=e.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let o=Kd(r,1);if(o.top!=o.bottom&&GT(t,o)){i={node:e,offset:s+(t.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:e,offset:0}}function GT(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function hbe(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function pbe(e,t,n){let{node:r,offset:i}=eZ(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function mbe(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let a=e.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function tZ(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let f=a[l];if(GT(t,f))return tZ(o,t,f)}}if((s=(s+1)%r)==i)break}return e}function gbe(e,t){let n=e.dom.ownerDocument,r,i=0,s=sbe(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let f=e.dom.getBoundingClientRect();if(!GT(t,f)||(o=tZ(e.dom,t,f),!o))return null}if(ps)for(let f=o;r&&f;f=Mg(f))f.draggable&&(r=void 0);if(o=hbe(o,t),r){if(xa&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let f;gy&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=mbe(e,r,i,t))}a==null&&(a=pbe(e,o,t));let l=e.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function kj(e){return e.top<e.bottom||e.left<e.right}function Kd(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(kj(r))return r}return Array.prototype.find.call(n,kj)||e.getBoundingClientRect()}const bbe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function nZ(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=gy||xa;if(r.nodeType==3)if(o&&(bbe.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Kd(df(r,i,i),n);if(xa&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=Kd(df(r,i-1,i-1),-1);if(f.top==l.top){let c=Kd(df(r,i,i+1),-1);if(c.top!=l.top)return i5(c,c.left<f.left)}}return l}else{let l=i,f=i,c=n<0?1:-1;return n<0&&!i?(f++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:f++,i5(Kd(df(r,l,f),c),c<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ga(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return WE(l.getBoundingClientRect(),!1)}if(s==null&&i<ga(r)){let l=r.childNodes[i];if(l.nodeType==1)return WE(l.getBoundingClientRect(),!0)}return WE(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ga(r))){let l=r.childNodes[i-1],f=l.nodeType==3?df(l,ga(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(f)return i5(Kd(f,1),!1)}if(s==null&&i<ga(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let f=l?l.nodeType==3?df(l,0,o?0:1):l.nodeType==1?l:null:null;if(f)return i5(Kd(f,-1),!0)}return i5(Kd(r.nodeType==3?df(r):r,-n),n>=0)}function i5(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function WE(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function rZ(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function ybe(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return rZ(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=nZ(e,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=df(a,0,a.nodeValue.length).getClientRects();else continue;for(let f=0;f<l.length;f++){let c=l[f];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const Ube=/[\u0590-\u08ac]/;function xbe(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=e.domSelection();return a?!Ube.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:rZ(e,t,()=>{let{focusNode:l,focusOffset:f,anchorNode:c,anchorOffset:d}=e.domSelectionRange(),u=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:g,focusOffset:y}=e.domSelectionRange(),U=g&&!h.contains(g.nodeType==1?g:g.parentNode)||l==g&&f==y;try{a.collapse(c,d),l&&(l!=c||f!=d)&&a.extend&&a.extend(l,f)}catch{}return u!=null&&(a.caretBidiLevel=u),U}):r.pos==r.start()||r.pos==r.end()}let Sj=null,Cj=null,Aj=!1;function wbe(e,t,n){return Sj==t&&Cj==n?Aj:(Sj=t,Cj=n,Aj=n=="up"||n=="down"?ybe(e,t,n):xbe(e,t,n))}const wa=0,Mj=1,ih=2,kc=3;class by{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=wa,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>$i(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>t||o instanceof sZ){i=t-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof iZ&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?$i(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?$i(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],f=o+l.size;if(i==-1&&t<=f){let c=o+l.border;if(t>=c&&n<=f-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,c);t=o;for(let d=a;d>0;d--){let u=this.children[d-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){i=$i(u.dom)+1;break}t-=u.size}i==-1&&(i=0)}if(i>-1&&(f>n||a==this.children.length-1)){n=f;for(let c=a+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=$i(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=f}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let h=0,g=0;h<this.children.length;h++){let y=this.children[h],U=g+y.size;if(s>g&&o<U)return y.setSelection(t-g-y.border,n-g-y.border,r,i);g=U}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((xa||ps)&&t==n){let{node:h,offset:g}=a;if(h.nodeType==3){if(d=!!(g&&h.nodeValue[g-1]==`
`),d&&g==h.nodeValue.length)for(let y=h,U;y;y=y.parentNode){if(U=y.nextSibling){U.nodeName=="BR"&&(a=l={node:U.parentNode,offset:$i(U)+1});break}let x=y.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let y=h.childNodes[g-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(xa&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&ps)&&l1(a.node,a.offset,c.anchorNode,c.anchorOffset)&&l1(l.node,l.offset,c.focusNode,c.focusOffset))return;let u=!1;if((f.extend||t==n)&&!(d&&xa)){f.collapse(a.node,a.offset);try{t!=n&&f.extend(l.node,l.offset),u=!0}catch{}}if(!u){if(t>n){let g=a;a=l,l=g}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let a=r+s.border,l=o-s.border;if(t>=a&&n<=l){this.dirty=t==r||n==o?ih:Mj,t==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=kc:s.markDirty(t-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ih:kc}r=o}this.dirty=ih}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?ih:Mj;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class iZ extends by{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==wa&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class vbe extends by{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class c1 extends by{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=T1.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new c1(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&kc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=kc&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=wa){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=wa}}slice(t,n,r){let i=c1.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=nA(s,n,o,r)),t>0&&(s=nA(s,0,t,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Fu extends by{constructor(t,n,r,i,s,o,a,l,f){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(t,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,f=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=f&&f.dom,d=f&&f.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=T1.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let u=c;return c=lZ(c,r,n),f?l=new Ebe(t,n,r,i,c,d||null,u,f,s,o+1):n.isText?new ow(t,n,r,i,c,u,s):new Fu(t,n,r,i,c,d||null,u,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Te.empty)}return t}matchesNode(t,n,r){return this.dirty==wa&&t.eq(this.node)&&Ox(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Sbe(this,o&&o.node,t);Mbe(this.node,this.innerDeco,(f,c,d)=>{f.spec.marks?l.syncToMarks(f.spec.marks,r,t,c):f.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?Bn.none:this.node.child(c).marks,r,t,c),l.placeWidget(f,t,i)},(f,c,d,u)=>{l.syncToMarks(f.marks,r,t,u);let h;l.findNodeMatch(f,c,d,u)||a&&t.state.selection.from>i&&t.state.selection.to<i+f.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(f,c,d,h,t)||l.updateNextNode(f,c,d,t,u,i)||l.addNode(f,c,d,t,i),i+=f.nodeSize}),l.syncToMarks([],r,t,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ih)&&(o&&this.protectLocalComposition(t,o),oZ(this.contentDOM,this.children,t),Tg&&Tbe(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Nt)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=Ibe(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new vbe(this,s,n,i);t.input.compositionNodes.push(o),this.children=nA(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==kc||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=wa}updateOuterDeco(t){if(Ox(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=aZ(this.dom,this.nodeDOM,tA(this.outerDeco,this.node,n),tA(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Tj(e,t,n,r,i){lZ(r,t,e);let s=new Fu(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class ow extends Fu{constructor(t,n,r,i,s,o,a){super(t,n,r,i,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==kc||this.dirty!=wa&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=wa||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=wa,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new ow(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=kc)}get domAtom(){return!1}isText(t){return this.node.text==t}}class sZ extends by{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==wa&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Ebe extends Fu{constructor(t,n,r,i,s,o,a,l,f,c){super(t,n,r,i,s,o,a,f,c),this.spec=l}update(t,n,r,i){if(this.dirty==kc)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function oZ(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=r;)r=Ij(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(o instanceof c1){let l=r?r.previousSibling:e.lastChild;oZ(o.contentDOM,o.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=Ij(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const l2=function(e){e&&(this.nodeName=e)};l2.prototype=Object.create(null);const sh=[new l2];function tA(e,t,n){if(e.length==0)return sh;let r=n?sh[0]:new l2,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new l2(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new l2(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function aZ(e,t,n,r){if(n==sh&&r==sh)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=sh[0]),i=l}kbe(i,a||sh[0],o)}return i}function kbe(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function lZ(e,t,n){return aZ(e,e,sh,tA(t,n,e.nodeType!=1))}function Ox(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Ij(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Sbe{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Cbe(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r,i){let s=0,o=this.stack.length>>1,a=Math.min(o,t.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=wa,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let l=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let c=this.index;c<f;c++){let d=this.top.children[c];if(d.matchesMark(t[o])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=c1.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let f=this.top.children[a];if(f.matchesNode(t,n,r)&&!this.preMatch.matched.has(f)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==kc&&o.dom==o.contentDOM&&(o.dirty=ih),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Fu){let f=this.preMatch.matched.get(l);if(f!=null&&f!=s)return!1;let c=l.dom,d,u=this.isLocked(c)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=kc&&Ox(n,l.outerDeco));if(!u&&l.update(t,n,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!u&&(d=this.recreateWrapper(l,t,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ih,d.updateChildren(i,o+1),d.dirty=wa),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Ox(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let a=Fu.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,i,s){let o=Fu.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new iZ(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof c1;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof ow)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ps||Vi)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new sZ(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function Cbe(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let f=n.children[r-1];if(f instanceof c1)n=f,r=f.children.length;else{a=f,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function Abe(e,t){return e.type.side-t.type.side}function Mbe(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let f=0;f<e.childCount;f++){let c=e.child(f);r(c,i,t.forChild(s,c),f),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let f=0;;){let c,d;for(;o<i.length&&i[o].to==s;){let U=i[o++];U.widget&&(c?(d||(d=[c])).push(U):c=U)}if(c)if(d){d.sort(Abe);for(let U=0;U<d.length;U++)n(d[U],f,!!l)}else n(c,f,!!l);let u,h;if(l)h=-1,u=l,l=null;else if(f<e.childCount)h=f,u=e.child(f++);else break;for(let U=0;U<a.length;U++)a[U].to<=s&&a.splice(U--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let g=s+u.nodeSize;if(u.isText){let U=g;o<i.length&&i[o].from<U&&(U=i[o].from);for(let x=0;x<a.length;x++)a[x].to<U&&(U=a[x].to);U<g&&(l=u.cut(U-s),u=u.cut(0,U-s),g=U,h=-1)}else for(;o<i.length&&i[o].to<g;)o++;let y=u.isInline&&!u.isLeaf?a.filter(U=>!U.inline):a.slice();r(u,y,t.forChild(s,u),h),s=g}}function Tbe(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Ibe(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let f=e.child(i++);if(s+=f.nodeSize,!f.isText)break;l+=f.text}if(s>=n){if(s>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let f=a<r?l.lastIndexOf(t,r-a-1):-1;if(f>=0&&f+t.length+a>=n)return a+f;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function nA(e,t,n,r,i){let s=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],f=a,c=a+=l.size;f>=n||c<=t?s.push(l):(f<t&&s.push(l.slice(0,t-f,r)),i&&(s.push(i),i=void 0),c>n&&s.push(l.slice(n-f,l.size,r)))}return s}function XT(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,f;if(sw(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&pt.isSelectable(d)&&i.parent&&!(d.isInline&&rbe(n.focusNode,n.focusOffset,i.dom))){let u=i.posBefore;f=new pt(o==u?a:r.resolve(u))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,u=o;for(let h=0;h<n.rangeCount;h++){let g=n.getRangeAt(h);d=Math.min(d,e.docView.posFromDOM(g.startContainer,g.startOffset,1)),u=Math.max(u,e.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[l,o]=u==e.state.selection.anchor?[u,d]:[d,u],a=r.resolve(o)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!f){let d=t=="pointer"||e.state.selection.head<a.pos&&!s?1:-1;f=KT(e,c,a,d)}return f}function cZ(e){return e.editable?e.hasFocus():dZ(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function zf(e,t=!1){let n=e.state.selection;if(fZ(e,n),!!cZ(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Vi){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&l1(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Rbe(e);else{let{anchor:r,head:i}=n,s,o;Nj&&!(n instanceof Nt)&&(n.$from.parent.inlineContent||(s=Rj(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Rj(e,n.to))),e.docView.setSelection(r,i,e,t),Nj&&(s&&_j(s),o&&_j(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Nbe(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Nj=ps||Vi&&ZY<63;function Rj(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(ps&&i&&i.contentEditable=="false")return GE(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return GE(i);if(s)return GE(s)}}function GE(e){return e.contentEditable="true",ps&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function _j(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Nbe(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!cZ(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Rbe(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,$i(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&co&&Bu<=11&&(n.disabled=!0,n.disabled=!1)}function fZ(e,t){if(t instanceof pt){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Pj(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Pj(e)}function Pj(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function KT(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Nt.between(t,n,r)}function Dj(e){return e.editable&&!e.hasFocus()?!1:dZ(e)}function dZ(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function _be(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return l1(t.node,t.offset,n.anchorNode,n.anchorOffset)}function rA(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Vt.findFrom(s,t)}function eu(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Lj(e,t,n){let r=e.state.selection;if(r instanceof Nt)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return eu(e,new Nt(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=rA(e.state,t);return i&&i instanceof pt?eu(e,i):!1}else if(!(ua&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(a))&&!o.contentDOM?pt.isSelectable(s)?eu(e,new pt(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):gy?eu(e,new Nt(e.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof pt&&r.node.isInline)return eu(e,new Nt(t>0?r.$to:r.$from));{let i=rA(e.state,t);return i?eu(e,i):!1}}}function jx(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function c2(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function bp(e,t){return t<0?Pbe(e):Dbe(e)}function Pbe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(xa&&n.nodeType==1&&r<jx(n)&&c2(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(c2(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(uZ(n))break;{let a=n.previousSibling;for(;a&&c2(a,-1);)i=n.parentNode,s=$i(a),a=a.previousSibling;if(a)n=a,r=jx(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?iA(e,n,r):i&&iA(e,i,s)}function Dbe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=jx(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(c2(a,1))s=n,o=++r;else break}else{if(uZ(n))break;{let a=n.nextSibling;for(;a&&c2(a,1);)s=a.parentNode,o=$i(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=jx(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&iA(e,s,o)}function uZ(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Lbe(e,t){for(;e&&t==e.childNodes.length&&!my(e);)t=$i(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function Obe(e,t){for(;e&&!t&&!my(e);)t=$i(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function iA(e,t,n){if(t.nodeType!=3){let s,o;(o=Lbe(t,n))?(t=o,n=0):(s=Obe(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(sw(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&zf(e)},50)}function Oj(e,t){let n=e.state.doc.resolve(t);if(!(Vi||qY)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function jj(e,t,n){let r=e.state.selection;if(r instanceof Nt&&!r.empty||n.indexOf("s")>-1||ua&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=rA(e.state,t);if(o&&o instanceof pt)return eu(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,a=r instanceof Ua?Vt.near(o,t):Vt.findFrom(o,t);return a?eu(e,a):!1}return!1}function Bj(e,t){if(!(e.state.selection instanceof Nt))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function Fj(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function jbe(e){if(!ps||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;Fj(e,r,"true"),setTimeout(()=>Fj(e,r,"false"),20)}return!1}function Bbe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Fbe(e,t){let n=t.keyCode,r=Bbe(t);if(n==8||ua&&n==72&&r=="c")return Bj(e,-1)||bp(e,-1);if(n==46&&!t.shiftKey||ua&&n==68&&r=="c")return Bj(e,1)||bp(e,1);if(n==13||n==27)return!0;if(n==37||ua&&n==66&&r=="c"){let i=n==37?Oj(e,e.state.selection.from)=="ltr"?-1:1:-1;return Lj(e,i,r)||bp(e,i)}else if(n==39||ua&&n==70&&r=="c"){let i=n==39?Oj(e,e.state.selection.from)=="ltr"?1:-1:1;return Lj(e,i,r)||bp(e,i)}else{if(n==38||ua&&n==80&&r=="c")return jj(e,-1,r)||bp(e,-1);if(n==40||ua&&n==78&&r=="c")return jbe(e)||jj(e,1,r)||bp(e,1);if(r==(ua?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function YT(e,t){e.someProp("transformCopied",h=>{t=h(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=e.someProp("clipboardSerializer")||T1.fromSchema(e.state.schema),a=yZ(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let f=l.firstChild,c,d=0;for(;f&&f.nodeType==1&&(c=bZ[f.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let g=a.createElement(c[h]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),d++}f=l.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let u=e.someProp("clipboardTextSerializer",h=>h(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:u,slice:t}}function hZ(e,t,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!t)return null;let l=!!t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",u=>{t=u(t,s||r,e)}),s)return a=new qe(Te.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",u=>{a=u(a,e,!0)}),a;let d=e.someProp("clipboardTextParser",u=>u(t,i,r,e));if(d)a=d;else{let u=i.marks(),{schema:h}=e.state,g=T1.fromSchema(h);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(y=>{let U=o.appendChild(document.createElement("p"));y&&U.appendChild(g.serializeNode(h.text(y,u)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),o=Vbe(n),gy&&Wbe(o);let f=o&&o.querySelector("[data-pm-slice]"),c=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let u=o.firstChild;for(;u&&u.nodeType!=1;)u=u.nextSibling;if(!u)break;o=u}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||o2.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(u){return u.nodeName=="BR"&&!u.nextSibling&&u.parentNode&&!zbe.test(u.parentNode.nodeName)?{ignore:!0}:null}})),c)a=Gbe(zj(a,+c[1],+c[2]),c[4]);else if(a=qe.maxOpen($be(a.content,i),!0),a.openStart||a.openEnd){let d=0,u=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;u<a.openEnd&&!h.type.spec.isolating;u++,h=h.lastChild);a=zj(a,d,u)}return e.someProp("transformPasted",d=>{a=d(a,e,l)}),a}const zbe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $be(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),f;if(!l)return o=null;if(f=o.length&&s.length&&mZ(l,s,a,o[o.length-1],0))o[o.length-1]=f;else{o.length&&(o[o.length-1]=gZ(o[o.length-1],s.length));let c=pZ(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return Te.from(o)}return e}function pZ(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Te.from(e));return e}function mZ(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=mZ(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(Te.from(pZ(n,e,i+1))))}}function gZ(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,gZ(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Te.empty,!0);return e.copy(n.append(r))}function sA(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(s=0),i<r-1&&(a=sA(a,t,n,r,i+1,s)),i>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Te.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function zj(e,t,n){return t<e.openStart&&(e=new qe(sA(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new qe(sA(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const bZ={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let $j=null;function yZ(){return $j||($j=document.implementation.createHTMLDocument("title"))}let XE=null;function Hbe(e){let t=window.trustedTypes;return t?(XE||(XE=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),XE.createHTML(e)):e}function Vbe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=yZ().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&bZ[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=Hbe(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Wbe(e){let t=e.querySelectorAll(Vi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Gbe(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Te.from(l.create(r[a+1],i)),s++,o++}return new qe(i,s,o)}const _s={},Ps={},Xbe={touchstart:!0,touchmove:!0};class Kbe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ybe(e){for(let t in _s){let n=_s[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{qbe(e,r)&&!ZT(e,r)&&(e.editable||!(r.type in Ps))&&n(e,r)},Xbe[t]?{passive:!0}:void 0)}ps&&e.dom.addEventListener("input",()=>null),oA(e)}function Iu(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Zbe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function oA(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>ZT(e,r))})}function ZT(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function qbe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Qbe(e,t){!ZT(e,t)&&_s[t.type]&&(e.editable||!(t.type in Ps))&&_s[t.type](e,t)}Ps.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!xZ(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Df&&Vi&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Tg&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,G0(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||Fbe(e,n)?n.preventDefault():Iu(e,"key")};Ps.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Ps.keypress=(e,t)=>{let n=t;if(xZ(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||ua&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Nt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function aw(e){return{left:e.clientX,top:e.clientY}}function Jbe(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function qT(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,a=>o>s.depth?a(e,n,s.nodeAfter,s.before(o),i,!0):a(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function mm(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function eye(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&pt.isSelectable(r)?(mm(e,new pt(n)),!0):!1}function tye(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof pt&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(pt.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(mm(e,pt.create(e.state.doc,i)),!0):!1}function nye(e,t,n,r,i){return qT(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?tye(e,n):eye(e,n))}function rye(e,t,n,r){return qT(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function iye(e,t,n,r){return qT(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||sye(e,n,r)}function sye(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(mm(e,Nt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)mm(e,Nt.create(r,a+1,a+1+o.content.size));else if(pt.isSelectable(o))mm(e,pt.create(r,a));else continue;return!0}}function QT(e){return Bx(e)}const UZ=ua?"metaKey":"ctrlKey";_s.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=QT(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&Jbe(n,e.input.lastClick)&&!n[UZ]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(aw(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new oye(e,o,n,!!r)):(s=="doubleClick"?rye:iye)(e,o.pos,o.inside,n)?n.preventDefault():Iu(e,"pointer"))};class oye{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[UZ],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let c=t.state.doc.resolve(n.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:f}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof pt&&f.from<=o&&f.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&xa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Iu(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>zf(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(aw(t))),this.updateAllowDefault(t),this.allowDefault||!n?Iu(this.view,"pointer"):nye(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||ps&&this.mightDrag&&!this.mightDrag.node.isAtom||Vi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(mm(this.view,Vt.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Iu(this.view,"pointer")}move(t){this.updateAllowDefault(t),Iu(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}_s.touchstart=e=>{e.input.lastTouch=Date.now(),QT(e),Iu(e,"pointer")};_s.touchmove=e=>{e.input.lastTouch=Date.now(),Iu(e,"pointer")};_s.contextmenu=e=>QT(e);function xZ(e,t){return e.composing?!0:ps&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const aye=Df?5e3:-1;Ps.compositionstart=Ps.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Nt&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Vi&&qY&&lye(e)))e.markCursor=e.state.storedMarks||n.marks(),Bx(e,!0),e.markCursor=null;else if(Bx(e,!t.selection.empty),xa&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=e.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}wZ(e,aye)};function lye(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Ps.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.badSafariComposition?e.domObserver.forceFlush():e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,wZ(e,20))};function wZ(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Bx(e),t))}function vZ(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=fye());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function cye(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=tbe(t.focusNode,t.focusOffset),r=nbe(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function fye(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Bx(e,t=!1){if(!(Df&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),vZ(e),t||e.docView&&e.docView.dirty){let n=XT(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function dye(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const ob=co&&Bu<15||Tg&&obe<604;_s.copy=Ps.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=ob?null:n.clipboardData,o=r.content(),{dom:a,text:l}=YT(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):dye(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function uye(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function hye(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ab(e,r.value,null,i,t):ab(e,r.textContent,r.innerHTML,i,t)},50)}function ab(e,t,n,r,i){let s=hZ(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,s||qe.empty)))return!0;if(!s)return!1;let o=uye(s),a=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function EZ(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ps.paste=(e,t)=>{let n=t;if(e.composing&&!Df)return;let r=ob?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&ab(e,EZ(r),r.getData("text/html"),i,n)?n.preventDefault():hye(e,n)};class kZ{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const pye=ua?"altKey":"ctrlKey";function SZ(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[pye]}_s.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(aw(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof pt?i.to-1:i.to))){if(r&&r.mightDrag)o=pt.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(o=pt.create(e.state.doc,d.posBefore))}}let a=(o||e.state.selection).content(),{dom:l,text:f,slice:c}=YT(e,a);(!n.dataTransfer.files.length||!Vi||ZY>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ob?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",ob||n.dataTransfer.setData("text/plain",f),e.dragging=new kZ(c,SZ(e,n),o)};_s.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Ps.dragover=Ps.dragenter=(e,t)=>t.preventDefault();Ps.drop=(e,t)=>{try{mye(e,t,e.dragging)}finally{e.dragging=null}};function mye(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(aw(t));if(!r)return;let i=e.state.doc.resolve(r.pos),s=n&&n.slice;s?e.someProp("transformPasted",h=>{s=h(s,e,!1)}):s=hZ(e,EZ(t.dataTransfer),ob?null:t.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&SZ(e,t));if(e.someProp("handleDrop",h=>h(e,t,s||qe.empty,o))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?DY(e.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=e.state.tr;if(o){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let f=l.mapping.map(a),c=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=l.doc;if(c?l.replaceRangeWith(f,f,s.content.firstChild):l.replaceRange(f,f,s),l.doc.eq(d))return;let u=l.doc.resolve(f);if(c&&pt.isSelectable(s.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new pt(u));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((g,y,U,x)=>h=x),l.setSelection(KT(e,u,l.doc.resolve(h)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}_s.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&zf(e)},20))};_s.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};_s.beforeinput=(e,t)=>{if(Vi&&Df&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,G0(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Ps)_s[e]=Ps[e];function lb(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Fx{constructor(t,n){this.toDOM=t,this.spec=n||zh,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Rs(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Fx&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&lb(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class zu{constructor(t,n){this.attrs=t,this.spec=n||zh}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Rs(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof zu&&lb(this.attrs,t.attrs)&&lb(this.spec,t.spec)}static is(t){return t.type instanceof zu}destroy(){}}class JT{constructor(t,n){this.attrs=t,this.spec=n||zh}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Rs(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof JT&&lb(this.attrs,t.attrs)&&lb(this.spec,t.spec)}destroy(){}}class Rs{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Rs(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Rs(t,t,new Fx(n,r))}static inline(t,n,r,i){return new Rs(t,n,new zu(r,i))}static node(t,n,r,i){return new Rs(t,n,new JT(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof zu}get widget(){return this.type instanceof Fx}}const Lp=[],zh={};class yr{constructor(t,n){this.local=t.length?t:Lp,this.children=n.length?n:Lp}static create(t,n){return n.length?zx(n,t,0,zh):rs}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=t&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,n-a,r,i+a,s)}}map(t,n,r){return this==rs||t.maps.length==0?this:this.mapInner(t,n,0,0,r||zh)}mapInner(t,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?gye(this.children,o||[],t,n,r,i,s):o?new yr(o.sort($h),Lp):rs}add(t,n){return n.length?this==rs?yr.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((a,l)=>{let f=l+r,c;if(c=AZ(n,a,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,f+1):i.splice(s,0,l,l+a.nodeSize,zx(c,a,f+1,zh)),s+=3}});let o=CZ(s?MZ(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new yr(o.length?this.local.concat(o).sort($h):this.local,i||this.children)}remove(t){return t.length==0||this==rs?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let c=0,d;c<t.length;c++)(d=t[c])&&d.from>a&&d.to<l&&(t[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(o,a+1);f!=rs?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new yr(i,r):rs}forChild(t,n){if(this==rs)return this;if(n.isLeaf)return yr.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let s=t+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof zu){let f=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;f<c&&(i||(i=[])).push(l.copy(f,c))}}if(i){let a=new yr(i.sort($h),Lp);return r?new au([a,r]):a}return r||rs}eq(t){if(this==t)return!0;if(!(t instanceof yr)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return eI(this.localsInner(t))}localsInner(t){if(this==rs)return Lp;if(t.inlineContent||!this.local.some(zu.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof zu||n.push(this.local[r]);return n}forEachSet(t){t(this)}}yr.empty=new yr([],[]);yr.removeOverlap=eI;const rs=yr.empty;class au{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,zh));return au.from(r)}forChild(t,n){if(n.isLeaf)return yr.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=rs&&(s instanceof au?r=r.concat(s.members):r.push(s))}return au.from(r)}eq(t){if(!(t instanceof au)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?eI(r?n:n.sort($h)):Lp}static from(t){switch(t.length){case 0:return rs;case 1:return t[0];default:return new au(t.every(n=>n instanceof yr)?t:t.reduce((n,r)=>n.concat(r instanceof yr?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function gye(e,t,n,r,i,s,o){let a=e.slice();for(let f=0,c=s;f<n.maps.length;f++){let d=0;n.maps[f].forEach((u,h,g,y)=>{let U=y-g-(h-u);for(let x=0;x<a.length;x+=3){let v=a[x+1];if(v<0||u>v+c-d)continue;let E=a[x]+c-d;h>=E?a[x+1]=u<=E?-2:-1:u>=c&&U&&(a[x]+=U,a[x+1]+=U)}d+=U}),c=n.maps[f].map(c,-1)}let l=!1;for(let f=0;f<a.length;f+=3)if(a[f+1]<0){if(a[f+1]==-2){l=!0,a[f+1]=-1;continue}let c=n.map(e[f]+s),d=c-i;if(d<0||d>=r.content.size){l=!0;continue}let u=n.map(e[f+1]+s,-1),h=u-i,{index:g,offset:y}=r.content.findIndex(d),U=r.maybeChild(g);if(U&&y==d&&y+U.nodeSize==h){let x=a[f+2].mapInner(n,U,c+1,e[f]+s+1,o);x!=rs?(a[f]=d,a[f+1]=h,a[f+2]=x):(a[f+1]=-2,l=!0)}else l=!0}if(l){let f=bye(a,e,t,n,i,s,o),c=zx(f,r,0,o);t=c.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,u=0;d<c.children.length;d+=3){let h=c.children[d];for(;u<a.length&&a[u]<h;)u+=3;a.splice(u,0,c.children[d],c.children[d+1],c.children[d+2])}}return new yr(t.sort($h),a)}function CZ(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Rs(i.from+t,i.to+t,i.type))}return n}function bye(e,t,n,r,i,s,o){function a(l,f){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(r,i,f);d?n.push(d):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+f+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+s+1);return n}function AZ(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function MZ(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function zx(e,t,n,r){let i=[],s=!1;t.forEach((a,l)=>{let f=AZ(e,a,l+n);if(f){s=!0;let c=zx(f,a,n+l+1,r);c!=rs&&i.push(l,l+a.nodeSize,c)}});let o=CZ(s?MZ(e):e,-n).sort($h);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new yr(o,i):rs}function $h(e,t){return e.from-t.from||e.to-t.to}function eI(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),Hj(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),Hj(t,i,r.copy(s.from,r.to)));break}}}return t}function Hj(e,t,n){for(;t<e.length&&$h(n,e[t])>0;)t++;e.splice(t,0,n)}function KE(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=rs&&t.push(r)}),e.cursorWrapper&&t.push(yr.create(e.state.doc,[e.cursorWrapper.deco])),au.from(t)}const yye={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Uye=co&&Bu<=11;class xye{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class wye{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new xye,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);co&&Bu<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():ps&&t.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(t.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),Uye&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,yye)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Dj(this.view)){if(this.suppressingSelectionUpdates)return zf(this.view);if(co&&Bu<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&l1(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Mg(s))n.add(s);for(let s=t.anchorNode;s;s=Mg(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Dj(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(l.some(c=>c.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let c of l)if(c.nodeName=="BR"&&c.parentNode){let d=c.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&c.parentNode.removeChild(c)}}else if(xa&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,u]=c;d.parentNode&&d.parentNode.parentNode==u.parentNode?u.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let u of c){let h=u.parentNode;h&&h.nodeName=="LI"&&(!d||kye(t,d)!=h)&&u.remove()}}}let f=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&sw(r)&&(f=XT(t))&&f.eq(Vt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,zf(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),vye(t)),t.input.badSafariComposition&&(t.input.badSafariComposition=!1,Sye(t,l)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||zf(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++){let d=t.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(co&&Bu<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:d,nextSibling:u}=t.addedNodes[c];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(s=u)}let o=i&&i.parentNode==t.target?$i(i)+1:0,a=r.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?$i(s):t.target.childNodes.length,f=r.localPosFromDOM(t.target,l,1);return{from:a,to:f}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let Vj=new WeakMap,Wj=!1;function vye(e){if(!Vj.has(e)&&(Vj.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=xa,Wj)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Wj=!0}}function Gj(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return l1(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Eye(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return Gj(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?Gj(e,n):null}function kye(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Sye(e,t){var n;let{focusNode:r,focusOffset:i}=e.domSelectionRange();for(let s of t)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(s,a.firstChild),r==s&&e.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function Cye(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),f,c=l.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(f=[{node:c,offset:l.anchorOffset}],sw(l)||f.push({node:l.focusNode,offset:l.focusOffset})),Vi&&e.input.lastKeyCode===8)for(let U=s;U>i;U--){let x=r.childNodes[U-1],v=x.pmViewDesc;if(x.nodeName=="BR"&&!v){s=U;break}if(!v||v.size)break}let d=e.state.doc,u=e.someProp("domParser")||o2.fromSchema(e.state.schema),h=d.resolve(o),g=null,y=u.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:Aye,context:h});if(f&&f[0].pos!=null){let U=f[0].pos,x=f[1]&&f[1].pos;x==null&&(x=U),g={anchor:U+o,head:x+o}}return{doc:y,sel:g,from:o,to:a}}function Aye(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(ps&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||ps&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Mye=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Tye(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let A=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,I=XT(e,A);if(I&&!e.state.selection.eq(I)){if(Vi&&Df&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",P=>P(e,G0(13,"Enter"))))return;let R=e.state.tr.setSelection(I);A=="pointer"?R.setMeta("pointer",!0):A=="key"&&R.scrollIntoView(),s&&R.setMeta("composition",s),e.dispatch(R)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(n);t=o.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,f=Cye(e,t,n),c=e.state.doc,d=c.slice(f.from,f.to),u,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(u=e.state.selection.to,h="end"):(u=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let g=Rye(d.content,f.doc.content,f.from,u,h);if(g&&e.input.domChangeCount++,(Tg&&e.input.lastIOSEnter>Date.now()-225||Df)&&i.some(A=>A.nodeType==1&&!Mye.test(A.nodeName))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",A=>A(e,G0(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!g)if(r&&l instanceof Nt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(f.sel){let A=Xj(e,e.state.doc,f.sel);if(A&&!A.eq(e.state.selection)){let I=e.state.tr.setSelection(A);s&&I.setMeta("composition",s),e.dispatch(I)}}return}e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof Nt&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=f.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=f.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),co&&Bu<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>f.from&&f.doc.textBetween(g.start-f.from-1,g.start-f.from+1)==" "&&(g.start--,g.endA--,g.endB--);let y=f.doc.resolveNoCache(g.start-f.from),U=f.doc.resolveNoCache(g.endB-f.from),x=c.resolve(g.start),v=y.sameParent(U)&&y.parent.inlineContent&&x.end()>=g.endA;if((Tg&&e.input.lastIOSEnter>Date.now()-225&&(!v||i.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!v&&y.pos<f.doc.content.size&&(!y.sameParent(U)||!y.parent.inlineContent)&&y.pos<U.pos&&!/\S/.test(f.doc.textBetween(y.pos,U.pos,"","")))&&e.someProp("handleKeyDown",A=>A(e,G0(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>g.start&&Nye(c,g.start,g.endA,y,U)&&e.someProp("handleKeyDown",A=>A(e,G0(8,"Backspace")))){Df&&Vi&&e.domObserver.suppressSelectionUpdates();return}Vi&&g.endB==g.start&&(e.input.lastChromeDelete=Date.now()),Df&&!v&&y.start()!=U.start()&&U.parentOffset==0&&y.depth==U.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==g.endA&&(g.endB-=2,U=f.doc.resolveNoCache(g.endB-f.from),setTimeout(()=>{e.someProp("handleKeyDown",function(A){return A(e,G0(13,"Enter"))})},20));let E=g.start,k=g.endA,M=A=>{let I=A||e.state.tr.replace(E,k,f.doc.slice(g.start-f.from,g.endB-f.from));if(f.sel){let R=Xj(e,I.doc,f.sel);R&&!(Vi&&e.composing&&R.empty&&(g.start!=g.endB||e.input.lastChromeDelete<Date.now()-100)&&(R.head==E||R.head==I.mapping.map(k)-1)||co&&R.empty&&R.head==E)&&I.setSelection(R)}return s&&I.setMeta("composition",s),I.scrollIntoView()},S;if(v)if(y.pos==U.pos){co&&Bu<=11&&y.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>zf(e),20));let A=M(e.state.tr.delete(E,k)),I=c.resolve(g.start).marksAcross(c.resolve(g.endA));I&&A.ensureMarks(I),e.dispatch(A)}else if(g.endA==g.endB&&(S=Iye(y.parent.content.cut(y.parentOffset,U.parentOffset),x.parent.content.cut(x.parentOffset,g.endA-x.start())))){let A=M(e.state.tr);S.type=="add"?A.addMark(E,k,S.mark):A.removeMark(E,k,S.mark),e.dispatch(A)}else if(y.parent.child(y.index()).isText&&y.index()==U.index()-(U.textOffset?0:1)){let A=y.parent.textBetween(y.parentOffset,U.parentOffset),I=()=>M(e.state.tr.insertText(A,E,k));e.someProp("handleTextInput",R=>R(e,E,k,A,I))||e.dispatch(I())}else e.dispatch(M());else e.dispatch(M())}function Xj(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:KT(e,t.resolve(n.anchor),t.resolve(n.head))}function Iye(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let f=[];for(let c=0;c<t.childCount;c++)f.push(l(t.child(c)));if(Te.from(f).eq(e))return{mark:a,type:o}}function Nye(e,t,n,r,i){if(n-t<=i.pos-r.pos||YE(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(YE(s,!0,!0));return!o.parent.isTextblock||o.pos>n||YE(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function YE(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Rye(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&e.size<t.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<t.size&&Kj(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<e.size&&Kj(e.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Kj(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class TZ{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Kbe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Jj),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=qj(this),Zj(this),this.nodeViews=Qj(this),this.docView=Tj(this.state.doc,Yj(this),KE(this),this.dom,this),this.domObserver=new wye(this,(r,i,s,o)=>Tye(this,r,i,s,o)),this.domObserver.start(),Ybe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&oA(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Jj),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(vZ(this),o=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Qj(this);Pye(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&oA(this),this.editable=qj(this),Zj(this);let l=KE(this),f=Yj(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,f,l);(d||!t.selection.eq(i.selection))&&(o=!0);let u=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&cbe(this);if(o){this.domObserver.stop();let h=d&&(co||Vi)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&_ye(i.selection,t.selection);if(d){let g=Vi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=cye(this)),(s||!this.docView.update(t.doc,f,l,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=Tj(t.doc,f,l,this.dom,this)),g&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&_be(this))?zf(this,h):(fZ(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():u&&fbe(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof pt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Ej(this,n.getBoundingClientRect(),t)}else Ej(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new kZ(t.slice,t.move,i<0?void 0:pt.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(co){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&dbe(this.dom),zf(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return gbe(this,t)}coordsAtPos(t,n=1){return nZ(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return wbe(this,n||this.state,t)}pasteHTML(t,n){return ab(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return ab(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return YT(this,t)}destroy(){this.docView&&(Zbe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],KE(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,J2e())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Qbe(this,t)}domSelectionRange(){let t=this.domSelection();return t?ps&&this.root.nodeType===11&&ibe(this.dom.ownerDocument)==this.dom&&Eye(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}TZ.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function Yj(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Rs.node(0,e.state.doc.content.size,t)]}function Zj(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Rs.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function qj(e){return!e.someProp("editable",t=>t(e.state)===!1)}function _ye(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function Qj(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Pye(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function Jj(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Yu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$x={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Dye=typeof navigator<"u"&&/Mac/.test(navigator.platform),Lye=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Hi=0;Hi<10;Hi++)Yu[48+Hi]=Yu[96+Hi]=String(Hi);for(var Hi=1;Hi<=24;Hi++)Yu[Hi+111]="F"+Hi;for(var Hi=65;Hi<=90;Hi++)Yu[Hi]=String.fromCharCode(Hi+32),$x[Hi]=String.fromCharCode(Hi);for(var ZE in Yu)$x.hasOwnProperty(ZE)||($x[ZE]=Yu[ZE]);function Oye(e){var t=Dye&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Lye&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?$x:Yu)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const jye=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Bye=typeof navigator<"u"&&/Win/.test(navigator.platform);function Fye(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))jye?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function zye(e){let t=Object.create(null);for(let n in e)t[Fye(n)]=e[n];return t}function qE(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function $ye(e){return new kr({props:{handleKeyDown:IZ(e)}})}function IZ(e){let t=zye(e);return function(n,r){let i=Oye(r),s,o=t[qE(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=t[qE(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Bye&&r.ctrlKey&&r.altKey)&&(s=Yu[r.keyCode])&&s!=i){let a=t[qE(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var Hye=Object.defineProperty,tI=(e,t)=>{for(var n in t)Hye(e,n,{get:t[n],enumerable:!0})};function lw(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var cw=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,a])=>[o,(...f)=>{const c=a(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!e,l=e||i.tr,f=()=>(!a&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(n).map(([d,u])=>[d,(...g)=>{const y=this.buildProps(l,t),U=u(...g)(y);return o.push(U),c}])),run:f};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...f)=>l(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:lw({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...f)=>l(...f)(o)]))}};return o}},NZ={};tI(NZ,{blur:()=>Vye,clearContent:()=>Wye,clearNodes:()=>Gye,command:()=>Xye,createParagraphNear:()=>Kye,cut:()=>Yye,deleteCurrentNode:()=>Zye,deleteNode:()=>qye,deleteRange:()=>Qye,deleteSelection:()=>Jye,enter:()=>e8e,exitCode:()=>t8e,extendMarkRange:()=>n8e,first:()=>r8e,focus:()=>s8e,forEach:()=>o8e,insertContent:()=>a8e,insertContentAt:()=>f8e,joinBackward:()=>h8e,joinDown:()=>u8e,joinForward:()=>p8e,joinItemBackward:()=>m8e,joinItemForward:()=>g8e,joinTextblockBackward:()=>b8e,joinTextblockForward:()=>y8e,joinUp:()=>d8e,keyboardShortcut:()=>x8e,lift:()=>w8e,liftEmptyBlock:()=>v8e,liftListItem:()=>E8e,newlineInCode:()=>k8e,resetAttributes:()=>S8e,scrollIntoView:()=>C8e,selectAll:()=>A8e,selectNodeBackward:()=>M8e,selectNodeForward:()=>T8e,selectParentNode:()=>I8e,selectTextblockEnd:()=>N8e,selectTextblockStart:()=>R8e,setContent:()=>_8e,setMark:()=>J8e,setMeta:()=>eUe,setNode:()=>tUe,setNodeSelection:()=>nUe,setTextDirection:()=>rUe,setTextSelection:()=>iUe,sinkListItem:()=>sUe,splitBlock:()=>oUe,splitListItem:()=>aUe,toggleList:()=>lUe,toggleMark:()=>cUe,toggleNode:()=>fUe,toggleWrap:()=>dUe,undoInputRule:()=>uUe,unsetAllMarks:()=>hUe,unsetMark:()=>pUe,unsetTextDirection:()=>mUe,updateAttributes:()=>gUe,wrapIn:()=>bUe,wrapInList:()=>yUe});var Vye=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),Wye=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),Gye=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:f,mapping:c}=t,d=f.resolve(c.map(l)),u=f.resolve(c.map(l+a.nodeSize)),h=d.blockRange(u);if(!h)return;const g=e6(h);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(h.start,y)}(g||g===0)&&t.lift(h,g)})}),!0},Xye=e=>t=>e(t),Kye=()=>({state:e,dispatch:t})=>B2e(e,t),Yye=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Nt(r.doc.resolve(Math.max(o-1,0)))),!0},Zye=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const a=i.before(s),l=i.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1};function ni(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var qye=e=>({tr:t,state:n,dispatch:r})=>{const i=ni(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),f=s.after(o);t.delete(l,f).scrollIntoView()}return!0}return!1},Qye=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},Jye=()=>({state:e,dispatch:t})=>A2e(e,t),e8e=()=>({commands:e})=>e.keyboardShortcut("Enter"),t8e=()=>({state:e,dispatch:t})=>j2e(e,t);function nI(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Hx(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:nI(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function RZ(e,t,n={}){return e.find(r=>r.type===t&&Hx(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function eB(e,t,n={}){return!!RZ(e,t,n)}function rI(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!RZ([...i.node.marks],t,n)))return;let o=i.index,a=e.start()+i.offset,l=o+1,f=a+i.node.nodeSize;for(;o>0&&eB([...e.parent.child(o-1).marks],t,n);)o-=1,a-=e.parent.child(o).nodeSize;for(;l<e.parent.childCount&&eB([...e.parent.child(l).marks],t,n);)f+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:f}}function ad(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var n8e=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=ad(e,r.schema),{doc:o,selection:a}=n,{$from:l,from:f,to:c}=a;if(i){const d=rI(l,s,t);if(d&&d.from<=f&&d.to>=c){const u=Nt.create(o,d.from,d.to);n.setSelection(u)}}return!0},r8e=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function _Z(e){return e instanceof Nt}function oh(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function PZ(e,t=null){if(!t)return null;const n=Vt.atStart(e),r=Vt.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Nt.create(e,oh(0,i,s),oh(e.content.size,i,s)):Nt.create(e,oh(t,i,s),oh(t,i,s))}function tB(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Vx(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function i8e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var s8e=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(Vx()||tB())&&r.dom.focus(),i8e()&&!Vx()&&!tB()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&e===null||e===!1)return!0}catch{return!1}if(s&&e===null&&!_Z(n.state.selection))return o(),!0;const a=PZ(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},o8e=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),a8e=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),DZ=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&DZ(r)}return e};function yU(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return DZ(n)}function cb(e,t,n){if(e instanceof ju||e instanceof Te)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return Te.fromArray(e.map(a=>t.nodeFromJSON(a)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),cb("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new kY({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(o=!0,a=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?o2.fromSchema(l).parseSlice(yU(e),n.parseOptions):o2.fromSchema(l).parse(yU(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=o2.fromSchema(t);return n.slice?s.parseSlice(yU(e),n.parseOptions).content:s.parse(yU(e),n.parseOptions)}return cb("",t,n)}function l8e(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof Si||i instanceof Ti))return;const s=e.mapping.maps[r];let o=0;s.forEach((a,l,f,c)=>{o===0&&(o=c)}),e.setSelection(Vt.near(e.doc.resolve(o),n))}var c8e=e=>!("type"in e),f8e=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=U=>{s.emit("contentError",{editor:s,error:U,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{cb(t,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(U){l(U)}try{a=cb(t,s.schema,{parseOptions:f,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(U){return l(U),!1}let{from:c,to:d}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},u=!0,h=!0;if((c8e(a)?a:[a]).forEach(U=>{U.check(),u=u?U.isText&&U.marks.length===0:!1,h=h?U.isBlock:!1}),c===d&&h){const{parent:U}=r.doc.resolve(c);U.isTextblock&&!U.type.spec.code&&!U.childCount&&(c-=1,d+=1)}let y;if(u){if(Array.isArray(t))y=t.map(U=>U.text||"").join("");else if(t instanceof Te){let U="";t.forEach(x=>{x.text&&(U+=x.text)}),y=U}else typeof t=="object"&&t&&t.text?y=t.text:y=t;r.insertText(y,c,d)}else{y=a;const U=r.doc.resolve(c),x=U.node(),v=U.parentOffset===0,E=x.isText||x.isTextblock,k=x.content.size>0;v&&E&&k&&(c=Math.max(0,c-1)),r.replaceWith(c,d,y)}n.updateSelection&&l8e(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:y})}return!0},d8e=()=>({state:e,dispatch:t})=>P2e(e,t),u8e=()=>({state:e,dispatch:t})=>D2e(e,t),h8e=()=>({state:e,dispatch:t})=>M2e(e,t),p8e=()=>({state:e,dispatch:t})=>R2e(e,t),m8e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=nw(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},g8e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=nw(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},b8e=()=>({state:e,dispatch:t})=>T2e(e,t),y8e=()=>({state:e,dispatch:t})=>I2e(e,t);function LZ(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function U8e(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Vx()||LZ()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var x8e=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=U8e(e).split(/-(?!$)/),o=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,a))});return l==null||l.steps.forEach(f=>{const c=f.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Zu(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?ni(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(d,u)=>{if(d.isText)return;const h=Math.max(r,u),g=Math.min(i,u+d.nodeSize);a.push({node:d,from:h,to:g})});const l=i-r,f=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Hx(d.node.attrs,n,{strict:!1}));return s?!!f.length:f.reduce((d,u)=>d+u.to-u.from,0)>=l}var w8e=(e,t={})=>({state:n,dispatch:r})=>{const i=ni(e,n.schema);return Zu(n,i,t)?L2e(n,r):!1},v8e=()=>({state:e,dispatch:t})=>F2e(e,t),E8e=e=>({state:t,dispatch:n})=>{const r=ni(e,t.schema);return Y2e(r)(t,n)},k8e=()=>({state:e,dispatch:t})=>O2e(e,t);function fw(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function nB(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var S8e=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=fw(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=ni(e,r.schema)),a==="mark"&&(o=ad(e,r.schema));let l=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(c,d)=>{s&&s===c.type&&(l=!0,i&&n.setNodeMarkup(d,void 0,nB(c.attrs,t))),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&(l=!0,i&&n.addMark(d,d+c.nodeSize,o.create(nB(u.attrs,t))))})})}),l},C8e=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),A8e=()=>({tr:e,dispatch:t})=>{if(t){const n=new Ua(e.doc);e.setSelection(n)}return!0},M8e=()=>({state:e,dispatch:t})=>N2e(e,t),T8e=()=>({state:e,dispatch:t})=>_2e(e,t),I8e=()=>({state:e,dispatch:t})=>z2e(e,t),N8e=()=>({state:e,dispatch:t})=>V2e(e,t),R8e=()=>({state:e,dispatch:t})=>H2e(e,t);function aA(e,t,n={},r={}){return cb(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var _8e=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const f=aA(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,f).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function OZ(e,t){const n=ad(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function jZ(e,t){const n=new FY(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function P8e(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function D8e(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function L8e(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function dw(e){return t=>L8e(t.$from,e)}function ut(e,t,n){return e.config[t]===void 0&&e.parent?ut(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?ut(e.parent,t,n):null}):e.config[t]}function iI(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=ut(t,"addExtensions",n);return r?[t,...iI(r())]:t}).flat(10)}function sI(e,t){const n=T1.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function BZ(e){return typeof e=="function"}function bn(e,t=void 0,...n){return BZ(e)?t?e.bind(t)(...n):e(...n):e}function O8e(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Ig(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function FZ(e){const t=[],{nodeExtensions:n,markExtensions:r}=Ig(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},o=n.filter(f=>f.name!=="text").map(f=>f.name),a=r.map(f=>f.name),l=[...o,...a];return e.forEach(f=>{const c={name:f.name,options:f.options,storage:f.storage,extensions:i},d=ut(f,"addGlobalAttributes",c);if(!d)return;d().forEach(h=>{let g;Array.isArray(h.types)?g=h.types:h.types==="*"?g=l:h.types==="nodes"?g=o:h.types==="marks"?g=a:g=[],g.forEach(y=>{Object.entries(h.attributes).forEach(([U,x])=>{t.push({type:y,name:U,attribute:{...s,...x}})})})})}),i.forEach(f=>{const c={name:f.name,options:f.options,storage:f.storage},d=ut(f,"addAttributes",c);if(!d)return;const u=d();Object.entries(u).forEach(([h,g])=>{const y={...s,...g};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&(y==null?void 0:y.default)===void 0&&delete y.default,t.push({type:f.name,name:h,attribute:y})})}),t}function Hr(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],f=a.filter(c=>!l.includes(c));r[i]=[...l,...f].join(" ")}else if(i==="style"){const a=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],f=new Map;l.forEach(c=>{const[d,u]=c.split(":").map(h=>h.trim());f.set(d,u)}),a.forEach(c=>{const[d,u]=c.split(":").map(h=>h.trim());f.set(d,u)}),r[i]=Array.from(f.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function fb(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Hr(n,r),{})}function j8e(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function rB(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):j8e(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function iB(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&O8e(n)?!1:n!=null))}function sB(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function B8e(e,t){var n;const r=FZ(e),{nodeExtensions:i,markExtensions:s}=Ig(e),o=(n=i.find(f=>ut(f,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(f=>{const c=r.filter(x=>x.type===f.name),d={name:f.name,options:f.options,storage:f.storage,editor:t},u=e.reduce((x,v)=>{const E=ut(v,"extendNodeSchema",d);return{...x,...E?E(f):{}}},{}),h=iB({...u,content:bn(ut(f,"content",d)),marks:bn(ut(f,"marks",d)),group:bn(ut(f,"group",d)),inline:bn(ut(f,"inline",d)),atom:bn(ut(f,"atom",d)),selectable:bn(ut(f,"selectable",d)),draggable:bn(ut(f,"draggable",d)),code:bn(ut(f,"code",d)),whitespace:bn(ut(f,"whitespace",d)),linebreakReplacement:bn(ut(f,"linebreakReplacement",d)),defining:bn(ut(f,"defining",d)),isolating:bn(ut(f,"isolating",d)),attrs:Object.fromEntries(c.map(sB))}),g=bn(ut(f,"parseHTML",d));g&&(h.parseDOM=g.map(x=>rB(x,c)));const y=ut(f,"renderHTML",d);y&&(h.toDOM=x=>y({node:x,HTMLAttributes:fb(x,c)}));const U=ut(f,"renderText",d);return U&&(h.toText=U),[f.name,h]})),l=Object.fromEntries(s.map(f=>{const c=r.filter(U=>U.type===f.name),d={name:f.name,options:f.options,storage:f.storage,editor:t},u=e.reduce((U,x)=>{const v=ut(x,"extendMarkSchema",d);return{...U,...v?v(f):{}}},{}),h=iB({...u,inclusive:bn(ut(f,"inclusive",d)),excludes:bn(ut(f,"excludes",d)),group:bn(ut(f,"group",d)),spanning:bn(ut(f,"spanning",d)),code:bn(ut(f,"code",d)),attrs:Object.fromEntries(c.map(sB))}),g=bn(ut(f,"parseHTML",d));g&&(h.parseDOM=g.map(U=>rB(U,c)));const y=ut(f,"renderHTML",d);return y&&(h.toDOM=U=>y({mark:U,HTMLAttributes:fb(U,c)})),[f.name,h]}));return new kY({topNode:o,nodes:a,marks:l})}function F8e(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function f2(e){return e.sort((n,r)=>{const i=ut(n,"priority")||100,s=ut(r,"priority")||100;return i>s?-1:i<s?1:0})}function zZ(e){const t=f2(iI(e)),n=F8e(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function $Z(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return e.nodesBetween(r,i,(l,f,c,d)=>{var u;l.isBlock&&f>r&&(a+=s);const h=o==null?void 0:o[l.type.name];if(h)return c&&(a+=h({node:l,pos:f,parent:c,index:d,range:t})),!1;l.isText&&(a+=(u=l==null?void 0:l.text)==null?void 0:u.slice(Math.max(r,f)-f,i-f))}),a}function z8e(e,t){const n={from:0,to:e.content.size};return $Z(e,n,t)}function HZ(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function $8e(e,t){const n=ni(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function VZ(e,t){const n=fw(typeof t=="string"?t:t.name,e.schema);return n==="node"?$8e(e,t):n==="mark"?OZ(e,t):{}}function H8e(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function V8e(e){const t=H8e(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function WZ(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const f=t.slice(s).map(a,-1),c=t.slice(s).map(l),d=t.invert().map(f,-1),u=t.invert().map(c);r.push({oldRange:{from:d,to:u},newRange:{from:f,to:c}})})}),V8e(r)}function oI(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=rI(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var W8e=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===t?o=a:s-=1}return[o,s]};function s5(e,t){return t.nodes[e]||t.marks[e]||null}function k3(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var G8e=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,a)=>{var l,f;const c=((f=(l=i.type.spec).toText)==null?void 0:f.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function lA(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?ad(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Hx(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:u})=>{const h=d.pos,g=u.pos;e.doc.nodesBetween(h,g,(y,U)=>{if(s&&y.inlineContent&&!y.type.allowsMarkType(s))return!1;if(!y.isText&&!y.marks.length)return;const x=Math.max(h,U),v=Math.min(g,U+y.nodeSize),E=v-x;o+=E,a.push(...y.marks.map(k=>({mark:k,from:x,to:v})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Hx(d.mark.attrs,n,{strict:!1})).reduce((d,u)=>d+u.to-u.from,0),f=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,u)=>d+u.to-u.from,0);return(l>0?l+f:l)>=o}function X8e(e,t,n={}){if(!t)return Zu(e,null,n)||lA(e,null,n);const r=fw(t,e.schema);return r==="node"?Zu(e,t,n):r==="mark"?lA(e,t,n):!1}var K8e=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=dw(a=>a.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},Y8e=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function oB(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function aB(e,t){const{nodeExtensions:n}=Ig(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=bn(ut(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function uw(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(uw(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function GZ(e){return e instanceof pt}var XZ=class KZ{constructor(t){this.position=t}static fromJSON(t){return new KZ(t.position)}toJSON(){return{position:this.position}}};function Z8e(e,t){const n=t.mapping.mapResult(e.position);return{position:new XZ(n.pos),mapResult:n}}function q8e(e){return new XZ(e)}function Q8e(e,t,n){var r;const{selection:i}=t;let s=null;if(_Z(i)&&(s=i.$cursor),s){const a=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(f=>f.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let f=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(c,d,u)=>{if(f)return!1;if(c.isInline){const h=!u||u.type.allowsMarkType(n),g=!!n.isInSet(c.marks)||!c.marks.some(y=>y.type.excludes(n));f=h&&g}return!f}),f})}var J8e=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=ad(e,r.schema);if(i)if(o){const f=OZ(r,l);n.addStoredMark(l.create({...f,...t}))}else a.forEach(f=>{const c=f.$from.pos,d=f.$to.pos;r.doc.nodesBetween(c,d,(u,h)=>{const g=Math.max(h,c),y=Math.min(h+u.nodeSize,d);u.marks.find(x=>x.type===l)?u.marks.forEach(x=>{l===x.type&&n.addMark(g,y,l.create({...x.attrs,...t}))}):n.addMark(g,y,l.create(t))})});return Q8e(r,n,l)},eUe=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),tUe=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=ni(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>xj(s,{...o,...t})(n)?!0:a.clearNodes()).command(({state:a})=>xj(s,{...o,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},nUe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=oh(e,0,r.content.size),s=pt.create(r,i);t.setSelection(s)}return!0},rUe=(e,t)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let o,a;return typeof t=="number"?(o=t,a=t):t&&"from"in t&&"to"in t?(o=t.from,a=t.to):(o=s.from,a=s.to),i&&n.doc.nodesBetween(o,a,(l,f)=>{l.isText||n.setNodeMarkup(f,void 0,{...l.attrs,dir:e})}),!0},iUe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Nt.atStart(r).from,a=Nt.atEnd(r).to,l=oh(i,o,a),f=oh(s,o,a),c=Nt.create(r,l,f);t.setSelection(c)}return!0},sUe=e=>({state:t,dispatch:n})=>{const r=ni(e,t.schema);return Q2e(r)(t,n)};function lB(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var oUe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,f=i.extensionManager.attributes,c=k3(f,a.node().type.name,a.node().attrs);if(s instanceof pt&&s.node.isBlock)return!a.parentOffset||!hm(o,a.pos)?!1:(r&&(e&&lB(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,u=a.depth===0?void 0:P8e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&u?[{type:u,attrs:c}]:void 0,g=hm(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!g&&hm(t.doc,t.mapping.map(a.pos),1,u?[{type:u}]:void 0)&&(g=!0,h=u?[{type:u,attrs:c}]:void 0),r){if(g&&(s instanceof Nt&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,h),u&&!d&&!a.parentOffset&&a.parent.type!==u)){const y=t.mapping.map(a.before()),U=t.doc.resolve(y);a.node(-1).canReplaceWith(U.index(),U.index()+1,u)&&t.setNodeMarkup(t.mapping.map(a.before()),u)}e&&lB(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return g},aUe=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=ni(e,r.schema),{$from:l,$to:f}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(f))return!1;const d=l.node(-1);if(d.type!==a)return!1;const u=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let x=Te.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let I=l.depth-v;I>=l.depth-3;I-=1)x=Te.from(l.node(I).copy(x));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...k3(u,l.node().type.name,l.node().attrs),...t},M=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(k))||void 0;x=x.append(Te.from(a.createAndFill(null,M)||void 0));const S=l.before(l.depth-(v-1));n.replace(S,l.after(-E),new qe(x,4-v,0));let A=-1;n.doc.nodesBetween(S,n.doc.content.size,(I,R)=>{if(A>-1)return!1;I.isTextblock&&I.content.size===0&&(A=R+1)}),A>-1&&n.setSelection(Nt.near(n.doc.resolve(A))),n.scrollIntoView()}return!0}const h=f.pos===l.end()?d.contentMatchAt(0).defaultType:null,g={...k3(u,d.type.name,d.attrs),...t},y={...k3(u,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,f.pos);const U=h?[{type:a,attrs:g},{type:h,attrs:y}]:[{type:a,attrs:g}];if(!hm(n.doc,l.pos,2))return!1;if(i){const{selection:x,storedMarks:v}=r,{splittableMarks:E}=s.extensionManager,k=v||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,U).scrollIntoView(),!k||!i)return!0;const M=k.filter(S=>E.includes(S.type.name));n.ensureMarks(M)}return!0},QE=(e,t)=>{const n=dw(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&o0(e.doc,n.pos)&&e.join(n.pos),!0},JE=(e,t)=>{const n=dw(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&o0(e.doc,r)&&e.join(r),!0},lUe=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:f,can:c})=>{const{extensions:d,splittableMarks:u}=i.extensionManager,h=ni(e,o.schema),g=ni(t,o.schema),{selection:y,storedMarks:U}=o,{$from:x,$to:v}=y,E=x.blockRange(v),k=U||y.$to.parentOffset&&y.$from.marks();if(!E)return!1;const M=dw(S=>aB(S.type.name,d))(y);if(E.depth>=1&&M&&E.depth-M.depth<=1){if(M.node.type===h)return f.liftListItem(g);if(aB(M.node.type.name,d)&&h.validContent(M.node.content)&&a)return l().command(()=>(s.setNodeMarkup(M.pos,h),!0)).command(()=>QE(s,h)).command(()=>JE(s,h)).run()}return!n||!k||!a?l().command(()=>c().wrapInList(h,r)?!0:f.clearNodes()).wrapInList(h,r).command(()=>QE(s,h)).command(()=>JE(s,h)).run():l().command(()=>{const S=c().wrapInList(h,r),A=k.filter(I=>u.includes(I.type.name));return s.ensureMarks(A),S?!0:f.clearNodes()}).wrapInList(h,r).command(()=>QE(s,h)).command(()=>JE(s,h)).run()},cUe=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=ad(e,r.schema);return lA(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},fUe=(e,t,n={})=>({state:r,commands:i})=>{const s=ni(e,r.schema),o=ni(t,r.schema),a=Zu(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},dUe=(e,t={})=>({state:n,commands:r})=>{const i=ni(e,n.schema);return Zu(n,i,t)?r.lift(i):r.wrapIn(i,t)},uUe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},hUe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},pUe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=n,l=ad(e,r.schema),{$from:f,empty:c,ranges:d}=a;if(!i)return!0;if(c&&o){let{from:u,to:h}=a;const g=(s=f.marks().find(U=>U.type===l))==null?void 0:s.attrs,y=rI(f,l,g);y&&(u=y.from,h=y.to),n.removeMark(u,h,l)}else d.forEach(u=>{n.removeMark(u.$from.pos,u.$to.pos,l)});return n.removeStoredMark(l),!0},mUe=e=>({tr:t,state:n,dispatch:r})=>{const{selection:i}=n;let s,o;return typeof e=="number"?(s=e,o=e):e&&"from"in e&&"to"in e?(s=e.from,o=e.to):(s=i.from,o=i.to),r&&t.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const f={...a.attrs};delete f.dir,t.setNodeMarkup(l,void 0,f)}),!0},gUe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=fw(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=ni(e,r.schema)),a==="mark"&&(o=ad(e,r.schema));let l=!1;return n.selection.ranges.forEach(f=>{const c=f.$from.pos,d=f.$to.pos;let u,h,g,y;n.selection.empty?r.doc.nodesBetween(c,d,(U,x)=>{s&&s===U.type&&(l=!0,g=Math.max(x,c),y=Math.min(x+U.nodeSize,d),u=x,h=U)}):r.doc.nodesBetween(c,d,(U,x)=>{x<c&&s&&s===U.type&&(l=!0,g=Math.max(x,c),y=Math.min(x+U.nodeSize,d),u=x,h=U),x>=c&&x<=d&&(s&&s===U.type&&(l=!0,i&&n.setNodeMarkup(x,void 0,{...U.attrs,...t})),o&&U.marks.length&&U.marks.forEach(v=>{if(o===v.type&&(l=!0,i)){const E=Math.max(x,c),k=Math.min(x+U.nodeSize,d);n.addMark(E,k,o.create({...v.attrs,...t}))}}))}),h&&(u!==void 0&&i&&n.setNodeMarkup(u,void 0,{...h.attrs,...t}),o&&h.marks.length&&h.marks.forEach(U=>{o===U.type&&i&&n.addMark(g,y,o.create({...U.attrs,...t}))}))}),l},bUe=(e,t={})=>({state:n,dispatch:r})=>{const i=ni(e,n.schema);return W2e(i,t)(n,r)},yUe=(e,t={})=>({state:n,dispatch:r})=>{const i=ni(e,n.schema);return G2e(i,t)(n,r)},UUe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},hw=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},xUe=(e,t)=>{if(nI(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function UU(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const f=l.state.doc.resolve(r);if(f.parent.type.spec.code||(t=f.nodeBefore||f.nodeAfter)!=null&&t.marks.find(u=>u.type.spec.code))return!1;let c=!1;const d=G8e(f)+s;return o.forEach(u=>{if(c)return;const h=xUe(d,u.find);if(!h)return;const g=l.state.tr,y=lw({state:l.state,transaction:g}),U={from:r-(h[0].length-s.length),to:i},{commands:x,chain:v,can:E}=new cw({editor:n,state:y});u.handler({state:y,range:U,match:h,commands:x,chain:v,can:E})===null||!g.steps.length||(u.undoable&&g.setMeta(a,{transform:g,from:r,to:i,text:s}),l.dispatch(g),c=!0)}),c}function wUe(e){const{editor:t,rules:n}=e,r=new kr({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=sI(Te.from(c),o.schema);const{from:d}=l,u=d+c.length;UU({editor:t,from:d,to:u,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return UU({editor:t,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&UU({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?UU({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function vUe(e){return Object.prototype.toString.call(e).slice(8,-1)}function xU(e){return vUe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function YZ(e,t){const n={...e};return xU(e)&&xU(t)&&Object.keys(t).forEach(r=>{xU(t[r])&&xU(e[r])?n[r]=YZ(e[r],t[r]):n[r]=t[r]}),n}var aI=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...bn(ut(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...bn(ut(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>YZ(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},I1=class ZZ extends aI{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new ZZ(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const l=o.find(f=>(f==null?void 0:f.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function EUe(e){return typeof e=="number"}var qZ=class{constructor(e){this.find=e.find,this.handler=e.handler}},kUe=(e,t,n)=>{if(nI(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function SUe(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=e,{commands:l,chain:f,can:c}=new cw({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,g)=>{var y,U,x,v,E;if((U=(y=h.type)==null?void 0:y.spec)!=null&&U.code||!(h.isText||h.isTextblock||h.isInline))return;const k=(E=(v=(x=h.content)==null?void 0:x.size)!=null?v:h.nodeSize)!=null?E:0,M=Math.max(r,g),S=Math.min(i,g+k);if(M>=S)return;const A=h.isText?h.text||"":h.textBetween(M-g,S-g,void 0,"");kUe(A,s.find,o).forEach(R=>{if(R.index===void 0)return;const P=M+R.index+1,_=P+R[0].length,O={from:n.tr.mapping.map(P),to:n.tr.mapping.map(_)},V=s.handler({state:n,range:O,match:R,commands:l,chain:f,can:c,pasteEvent:o,dropEvent:a});d.push(V)})}),d.every(h=>h!==null)}var wU=null,CUe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function AUe(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:d,to:u,rule:h,pasteEvt:g})=>{const y=c.tr,U=lw({state:c,transaction:y});if(!(!SUe({editor:t,state:U,from:Math.max(d-1,0),to:u.b-1,rule:h,pasteEvent:g,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(c=>new kr({view(d){const u=g=>{var y;r=(y=d.dom.parentElement)!=null&&y.contains(g.target)?d.dom.parentElement:null,r&&(wU=t)},h=()=>{wU&&(wU=null)};return window.addEventListener("dragstart",u),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",u),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,u)=>{if(s=r===d.dom.parentElement,a=u,!s){const h=wU;h!=null&&h.isEditable&&setTimeout(()=>{const g=h.state.selection;g&&h.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,u)=>{var h;const g=(h=u.clipboardData)==null?void 0:h.getData("text/html");return o=u,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,u,h)=>{const g=d[0],y=g.getMeta("uiEvent")==="paste"&&!i,U=g.getMeta("uiEvent")==="drop"&&!s,x=g.getMeta("applyPasteRules"),v=!!x;if(!y&&!U&&!v)return;if(v){let{text:M}=x;typeof M=="string"?M=M:M=sI(Te.from(M),h.schema);const{from:S}=x,A=S+M.length,I=CUe(M);return l({rule:c,state:h,from:S,to:{b:A},pasteEvt:I})}const E=u.doc.content.findDiffStart(h.doc.content),k=u.doc.content.findDiffEnd(h.doc.content);if(!(!EUe(E)||!k||E===k.b))return l({rule:c,state:h,from:E,to:k,pasteEvt:o})}}))}var pw=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=zZ(e),this.schema=B8e(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:s5(t.name,this.schema)},r=ut(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return f2([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:s5(r.name,this.schema)},s=[],o=ut(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&ut(r,"exitable",i)&&(a.ArrowRight=()=>I1.handleExit({editor:e,mark:r})),o){const u=Object.fromEntries(Object.entries(o()).map(([h,g])=>[h,()=>g({editor:e})]));a={...a,...u}}const l=$ye(a);s.push(l);const f=ut(r,"addInputRules",i);if(oB(r,e.options.enableInputRules)&&f){const u=f();if(u&&u.length){const h=wUe({editor:e,rules:u}),g=Array.isArray(h)?h:[h];s.push(...g)}}const c=ut(r,"addPasteRules",i);if(oB(r,e.options.enablePasteRules)&&c){const u=c();if(u&&u.length){const h=AUe({editor:e,rules:u});s.push(...h)}}const d=ut(r,"addProseMirrorPlugins",i);if(d){const u=d();s.push(...u)}return s})}get attributes(){return FZ(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ig(this.extensions);return Object.fromEntries(t.filter(n=>!!ut(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:ni(n.name,this.schema)},s=ut(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,f,c,d,u)=>{const h=fb(l,r);return o({node:l,view:f,getPos:c,decorations:d,innerDecorations:u,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}dispatchTransaction(e){const{editor:t}=this;return f2([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:s5(i.name,this.schema)},o=ut(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:r})}:r},e)}transformPastedHTML(e){const{editor:t}=this;return f2([...this.extensions]).reduce((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:s5(i.name,this.schema)},o=ut(i,"transformPastedHTML",s);return o?(a,l)=>{const f=r(a,l);return o.call(s,f)}:r},e||(r=>r))}get markViews(){const{editor:e}=this,{markExtensions:t}=Ig(this.extensions);return Object.fromEntries(t.filter(n=>!!ut(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:ad(n.name,this.schema)},s=ut(n,"addMarkView",i);if(!s)return[];const o=(a,l,f)=>{const c=fb(a,r);return s()({mark:a,view:l,inline:f,editor:e,extension:n,HTMLAttributes:c,updateAttributes:d=>{FUe(a,e,d)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:s5(t.name,this.schema)};t.type==="mark"&&((n=bn(ut(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=ut(t,"onBeforeCreate",r),s=ut(t,"onCreate",r),o=ut(t,"onUpdate",r),a=ut(t,"onSelectionUpdate",r),l=ut(t,"onTransaction",r),f=ut(t,"onFocus",r),c=ut(t,"onBlur",r),d=ut(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),f&&this.editor.on("focus",f),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};pw.resolve=zZ;pw.sort=f2;pw.flatten=iI;var MUe={};tI(MUe,{ClipboardTextSerializer:()=>JZ,Commands:()=>eq,Delete:()=>tq,Drop:()=>nq,Editable:()=>rq,FocusEvents:()=>sq,Keymap:()=>oq,Paste:()=>aq,Tabindex:()=>lq,TextDirection:()=>cq,focusEventsPluginKey:()=>iq});var Vr=class QZ extends aI{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new QZ(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},JZ=Vr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new kr({key:new hi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=HZ(n);return $Z(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),eq=Vr.create({name:"commands",addCommands(){return{...NZ}}}),tq=Vr.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,a,l,f;if((f=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?f:e.getMeta("y-sync$"))return;const c=jZ(e.before,[e,...t]);WZ(c).forEach(h=>{c.mapping.mapResult(h.oldRange.from).deletedAfter&&c.mapping.mapResult(h.oldRange.to).deletedBefore&&c.before.nodesBetween(h.oldRange.from,h.oldRange.to,(g,y)=>{const U=y+g.nodeSize-2,x=h.oldRange.from<=y&&U<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:g,from:y,to:U,newFrom:c.mapping.map(y),newTo:c.mapping.map(U),deletedRange:h.oldRange,newRange:h.newRange,partial:!x,editor:this.editor,transaction:e,combinedTransform:c})})});const u=c.mapping;c.steps.forEach((h,g)=>{var y,U;if(h instanceof ll){const x=u.slice(g).map(h.from,-1),v=u.slice(g).map(h.to),E=u.invert().map(x,-1),k=u.invert().map(v),M=(y=c.doc.nodeAt(x-1))==null?void 0:y.marks.some(A=>A.eq(h.mark)),S=(U=c.doc.nodeAt(v))==null?void 0:U.marks.some(A=>A.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:E,to:k},newRange:{from:x,to:v},partial:!!(S||M),editor:this.editor,transaction:e,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),nq=Vr.create({name:"drop",addProseMirrorPlugins(){return[new kr({key:new hi("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),rq=Vr.create({name:"editable",addProseMirrorPlugins(){return[new kr({key:new hi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),iq=new hi("focusEvents"),sq=Vr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new kr({key:iq,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),oq=Vr.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:f}=a,{empty:c,$anchor:d}=l,{pos:u,parent:h}=d,g=d.parent.isTextblock&&u>0?a.doc.resolve(u-1):d,y=g.parent.type.spec.isolating,U=d.pos-d.parentOffset,x=y&&g.parent.childCount===1?U===d.pos:Vt.atStart(f).from===u;return!c||!h.type.isTextblock||h.textContent.length||!x||x&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Vx()||LZ()?s:i},addProseMirrorPlugins(){return[new kr({key:new hi("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(y=>y.getMeta("composition")))return;const r=e.some(y=>y.docChanged)&&!t.doc.eq(n.doc),i=e.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=t.selection,l=Vt.atStart(t.doc).from,f=Vt.atEnd(t.doc).to;if(s||!(o===l&&a===f)||!uw(n.doc))return;const u=n.tr,h=lw({state:n,transaction:u}),{commands:g}=new cw({editor:this.editor,state:h});if(g.clearNodes(),!!u.steps.length)return u}})]}}),aq=Vr.create({name:"paste",addProseMirrorPlugins(){return[new kr({key:new hi("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),lq=Vr.create({name:"tabindex",addProseMirrorPlugins(){return[new kr({key:new hi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),cq=Vr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=Ig(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new kr({key:new hi("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),TUe=class z5{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new z5(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new z5(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new z5(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=n.isInline,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!i&&!o&&l.depth<=this.depth)return;const f=new z5(l,this.editor,i,i||o?n:null);i&&(f.actualDepth=this.depth+1),t.push(f)}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},IUe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function NUe(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var RUe=class extends UUe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Z8e,createMappablePosition:q8e},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=PZ(t,this.options.autofocus);this.editorState=Xp.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=NUe(IUe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=BZ(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[rq,JZ.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),eq,sq,oq,lq,nq,aq,tq,cq.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new pw(r,this)}createCommandManager(){this.commandManager=new cw({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=aA(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=aA(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){const{editorProps:t,enableExtensionDispatchTransaction:n}=this.options,r=t.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r,s=t.transformPastedHTML,o=this.extensionManager.transformPastedHTML(s);this.editorView=new TZ(e,{...t,attributes:{role:"textbox",...t==null?void 0:t.attributes},dispatchTransaction:i,transformPastedHTML:o,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(f=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(f)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return VZ(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return X8e(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return sI(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return z8e(this.state.doc,{blockSeparator:t,textSerializers:{...HZ(this.schema),...n}})}get isEmpty(){return uw(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new TUe(t,this)}get $doc(){return this.$pos(0)}};function Ng(e){return new hw({find:e.find,handler:({state:t,range:n,match:r})=>{const i=bn(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),f=n.from+a.indexOf(o),c=f+o.length;if(oI(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(y=>y===e.type&&y!==h.mark.type)).filter(h=>h.to>f).length)return null;c<n.to&&s.delete(c,n.to),f>n.from&&s.delete(n.from+l,f);const u=n.from+l+o.length;s.addMark(n.from+l,u,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function _Ue(e){return new hw({find:e.find,handler:({state:t,range:n,match:r})=>{const i=bn(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let a=n.to;const l=e.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let c=o+f;c>a?c=a:a=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(c,a,l)}else if(r[0]){const f=e.type.isInline?o:o-1;s.insert(f,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:e.undoable})}function cA(e){return new hw({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=bn(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function Rg(e){return new hw({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=bn(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),f=l&&$T(l,e.type,s);if(!f)return null;if(o.wrap(l,f),e.keepMarks&&e.editor){const{selection:d,storedMarks:u}=t,{splittableMarks:h}=e.editor.extensionManager,g=u||d.$to.parentOffset&&d.$from.marks();if(g){const y=g.filter(U=>h.includes(U.type.name));o.ensureMarks(y)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&o0(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&o.join(n.from-1)},undoable:e.undoable})}function PUe(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof pt){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}var DUe={};tI(DUe,{createAtomBlockMarkdownSpec:()=>fq,createBlockMarkdownSpec:()=>LUe,createInlineMarkdownSpec:()=>BUe,parseAttributes:()=>lI,parseIndentedBlocks:()=>fA,renderNestedMarkdownContent:()=>fI,serializeAttributes:()=>cI});function lI(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(c=>c.trim().slice(1));t.class=f.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(t.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,f,c])=>{var d;const u=parseInt(((d=c.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),h=n[u];h&&(t[f]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(t[c]=!0)}),t}function cI(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function fq(e){const{nodeName:t,name:n,parseAttributes:r=lI,serializeAttributes:i=cI,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=e,l=n||t,f=c=>{if(!a)return c;const d={};return a.forEach(u=>{u in c&&(d[u]=c[u])}),d};return{parseMarkdown:(c,d)=>{const u={...s,...c.attributes};return d.createNode(t,u,[])},markdownTokenizer:{name:t,level:"block",start(c){var d;const u=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(d=c.match(u))==null?void 0:d.index;return h!==void 0?h:-1},tokenize(c,d,u){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),g=c.match(h);if(!g)return;const y=g[1]||"",U=r(y);if(!o.find(v=>!(v in U)))return{type:t,raw:g[0],attributes:U}}},renderMarkdown:c=>{const d=f(c.attrs||{}),u=i(d),h=u?` {${u}}`:"";return`:::${l}${h} :::`}}}function LUe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=lI,serializeAttributes:s=cI,defaultAttributes:o={},content:a="block",allowedAttributes:l}=e,f=n||t,c=d=>{if(!l)return d;const u={};return l.forEach(h=>{h in d&&(u[h]=d[h])}),u};return{parseMarkdown:(d,u)=>{let h;if(r){const y=r(d);h=typeof y=="string"?[{type:"text",text:y}]:y}else a==="block"?h=u.parseChildren(d.tokens||[]):h=u.parseInline(d.tokens||[]);const g={...o,...d.attributes};return u.createNode(t,g,h)},markdownTokenizer:{name:t,level:"block",start(d){var u;const h=new RegExp(`^:::${f}`,"m"),g=(u=d.match(h))==null?void 0:u.index;return g!==void 0?g:-1},tokenize(d,u,h){var g;const y=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),U=d.match(y);if(!U)return;const[x,v=""]=U,E=i(v);let k=1;const M=x.length;let S="";const A=/^:::([\w-]*)(\s.*)?/gm,I=d.slice(M);for(A.lastIndex=0;;){const R=A.exec(I);if(R===null)break;const P=R.index,_=R[1];if(!((g=R[2])!=null&&g.endsWith(":::"))){if(_)k+=1;else if(k-=1,k===0){const O=I.slice(0,P);S=O.trim();const V=d.slice(0,M+P+R[0].length);let j=[];if(S)if(a==="block")for(j=h.blockTokens(O),j.forEach(F=>{F.text&&(!F.tokens||F.tokens.length===0)&&(F.tokens=h.inlineTokens(F.text))});j.length>0;){const F=j[j.length-1];if(F.type==="paragraph"&&(!F.text||F.text.trim()===""))j.pop();else break}else j=h.inlineTokens(S);return{type:t,raw:V,attributes:E,content:S,tokens:j}}}}}},renderMarkdown:(d,u)=>{const h=c(d.attrs||{}),g=s(h),y=g?` {${g}}`:"",U=u.renderChildren(d.content||[],`

`);return`:::${f}${y}

${U}

:::`}}}function OUe(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,i,s,o]=r;t[i]=s||o,r=n.exec(e)}return t}function jUe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function BUe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=OUe,serializeAttributes:s=jUe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=e,f=n||t,c=u=>{if(!l)return u;const h={};return l.forEach(g=>{const y=typeof g=="string"?g:g.name,U=typeof g=="string"?void 0:g.skipIfDefault;if(y in u){const x=u[y];if(U!==void 0&&x===U)return;h[y]=x}}),h},d=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(u,h)=>{const g={...o,...u.attributes};if(a)return h.createNode(t,g);const y=r?r(u):u.content||"";return y?h.createNode(t,g,[h.createTextNode(y)]):h.createNode(t,g,[])},markdownTokenizer:{name:t,level:"inline",start(u){const h=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),g=u.match(h),y=g==null?void 0:g.index;return y!==void 0?y:-1},tokenize(u,h,g){const y=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),U=u.match(y);if(!U)return;let x="",v="";if(a){const[,k]=U;v=k}else{const[,k,M]=U;v=k,x=M||""}const E=i(v.trim());return{type:t,raw:U[0],content:x.trim(),attributes:E}}},renderMarkdown:u=>{let h="";r?h=r(u):u.content&&u.content.length>0&&(h=u.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const g=c(u.attrs||{}),y=s(g),U=y?` ${y}`:"";return a?`[${f}${U}]`:`[${f}${U}]${h}[/${f}]`}}}function fA(e,t,n){var r,i,s,o;const a=e.split(`
`),l=[];let f="",c=0;const d=t.baseIndentSize||2;for(;c<a.length;){const u=a[c],h=u.match(t.itemPattern);if(!h){if(l.length>0)break;if(u.trim()===""){c+=1,f=`${f}${u}
`;continue}else return}const g=t.extractItemData(h),{indentLevel:y,mainContent:U}=g;f=`${f}${u}
`;const x=[U];for(c+=1;c<a.length;){const M=a[c];if(M.trim()===""){const A=a.slice(c+1).findIndex(P=>P.trim()!=="");if(A===-1)break;if((((i=(r=a[c+1+A].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>y){x.push(M),f=`${f}${M}
`,c+=1;continue}else break}if((((o=(s=M.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>y)x.push(M),f=`${f}${M}
`,c+=1;else break}let v;const E=x.slice(1);if(E.length>0){const M=E.map(S=>S.slice(y+d)).join(`
`);M.trim()&&(t.customNestedParser?v=t.customNestedParser(M):v=n.blockTokens(M))}const k=t.createToken(g,v);l.push(k)}if(l.length!==0)return{items:l,raw:f}}function fI(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=e.content,a=t.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(f=>{const c=t.renderChildren([f]);if(c){const d=c.split(`
`).map(u=>u?t.indent(u):"").join(`
`);l.push(d)}}),l.join(`
`)}function FUe(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((a,l)=>{const f=s.mapping.map(l),c=s.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(h=>{if(h!==o)return!1;d=h}),!d)return;let u=!1;if(Object.keys(n).forEach(h=>{n[h]!==d.attrs[h]&&(u=!0)}),u){const h=e.type.create({...e.attrs,...n});s.removeMark(f,c,e.type),s.addMark(f,c,h)}}),s.docChanged&&t.view.dispatch(s)}var mo=class dq extends aI{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new dq(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function f1(e){return new qZ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=bn(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,a=r[r.length-1],l=r[0];let f=n.to;if(a){const c=l.search(/\S/),d=n.from+l.indexOf(a),u=d+a.length;if(oI(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(U=>U===e.type&&U!==g.mark.type)).filter(g=>g.to>d).length)return null;u<n.to&&o.delete(u,n.to),d>n.from&&o.delete(n.from+c,d),f=n.from+c+a.length,o.addMark(n.from+c,f,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function zUe(e){return new qZ({find:e.find,handler({match:t,chain:n,range:r,pasteEvent:i}){const s=bn(e.getAttributes,void 0,t,i),o=bn(e.getContent,void 0,s);if(s===!1||s===null)return null;const a={type:e.type.name,attrs:s};o&&(a.content=o),t.input&&n().deleteRange(r).insertContentAt(r.from,a)}})}const{getOwnPropertyNames:$Ue,getOwnPropertySymbols:HUe}=Object,{hasOwnProperty:VUe}=Object.prototype;function ek(e,t){return function(r,i,s){return e(r,i,s)&&t(r,i,s)}}function vU(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const l=e(n,r,i);return s.delete(n),s.delete(r),l}}function WUe(e){return e!=null?e[Symbol.toStringTag]:void 0}function cB(e){return $Ue(e).concat(HUe(e))}const GUe=Object.hasOwn||((e,t)=>VUe.call(e,t));function N1(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const XUe="__v",KUe="__o",YUe="_owner",{getOwnPropertyDescriptor:fB,keys:dB}=Object;function ZUe(e,t){return e.byteLength===t.byteLength&&Wx(new Uint8Array(e),new Uint8Array(t))}function qUe(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function QUe(e,t){return e.byteLength===t.byteLength&&Wx(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function JUe(e,t){return N1(e.getTime(),t.getTime())}function e3e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function t3e(e,t){return e===t}function uB(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const f=t.entries();let c=!1,d=0;for(;(a=f.next())&&!a.done;){if(i[d]){d++;continue}const u=o.value,h=a.value;if(n.equals(u[0],h[0],l,d,e,t,n)&&n.equals(u[1],h[1],u[0],h[0],e,t,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const n3e=N1;function r3e(e,t,n){const r=dB(e);let i=r.length;if(dB(t).length!==i)return!1;for(;i-- >0;)if(!uq(e,t,n,r[i]))return!1;return!0}function o5(e,t,n){const r=cB(e);let i=r.length;if(cB(t).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!uq(e,t,n,s)||(o=fB(e,s),a=fB(t,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function i3e(e,t){return N1(e.valueOf(),t.valueOf())}function s3e(e,t){return e.source===t.source&&e.flags===t.flags}function hB(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.values();let o,a;for(;(o=s.next())&&!o.done;){const l=t.values();let f=!1,c=0;for(;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,e,t,n)){f=i[c]=!0;break}c++}if(!f)return!1}return!0}function Wx(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function o3e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function uq(e,t,n,r){return(r===YUe||r===KUe||r===XUe)&&(e.$$typeof||t.$$typeof)?!0:GUe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const a3e="[object ArrayBuffer]",l3e="[object Arguments]",c3e="[object Boolean]",f3e="[object DataView]",d3e="[object Date]",u3e="[object Error]",h3e="[object Map]",p3e="[object Number]",m3e="[object Object]",g3e="[object RegExp]",b3e="[object Set]",y3e="[object String]",U3e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},x3e="[object URL]",w3e=Object.prototype.toString;function v3e({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:f,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:u,areUrlsEqual:h,unknownTagComparators:g}){return function(U,x,v){if(U===x)return!0;if(U==null||x==null)return!1;const E=typeof U;if(E!==typeof x)return!1;if(E!=="object")return E==="number"?a(U,x,v):E==="function"?s(U,x,v):!1;const k=U.constructor;if(k!==x.constructor)return!1;if(k===Object)return l(U,x,v);if(Array.isArray(U))return t(U,x,v);if(k===Date)return r(U,x,v);if(k===RegExp)return c(U,x,v);if(k===Map)return o(U,x,v);if(k===Set)return d(U,x,v);const M=w3e.call(U);if(M===d3e)return r(U,x,v);if(M===g3e)return c(U,x,v);if(M===h3e)return o(U,x,v);if(M===b3e)return d(U,x,v);if(M===m3e)return typeof U.then!="function"&&typeof x.then!="function"&&l(U,x,v);if(M===x3e)return h(U,x,v);if(M===u3e)return i(U,x,v);if(M===l3e)return l(U,x,v);if(U3e[M])return u(U,x,v);if(M===a3e)return e(U,x,v);if(M===f3e)return n(U,x,v);if(M===c3e||M===p3e||M===y3e)return f(U,x,v);if(g){let S=g[M];if(!S){const A=WUe(U);A&&(S=g[A])}if(S)return S(U,x,v)}return!1}}function E3e({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:ZUe,areArraysEqual:n?o5:qUe,areDataViewsEqual:QUe,areDatesEqual:JUe,areErrorsEqual:e3e,areFunctionsEqual:t3e,areMapsEqual:n?ek(uB,o5):uB,areNumbersEqual:n3e,areObjectsEqual:n?o5:r3e,arePrimitiveWrappersEqual:i3e,areRegExpsEqual:s3e,areSetsEqual:n?ek(hB,o5):hB,areTypedArraysEqual:n?ek(Wx,o5):Wx,areUrlsEqual:o3e,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const i=vU(r.areArraysEqual),s=vU(r.areMapsEqual),o=vU(r.areObjectsEqual),a=vU(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function k3e(e){return function(t,n,r,i,s,o,a){return e(t,n,a)}}function S3e({circular:e,comparator:t,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:f=e?new WeakMap:void 0,meta:c}=n();return t(a,l,{cache:f,equals:r,meta:c,strict:i})};if(e)return function(a,l){return t(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return t(a,l,s)}}const C3e=l0();l0({strict:!0});l0({circular:!0});l0({circular:!0,strict:!0});l0({createInternalComparator:()=>N1});l0({strict:!0,createInternalComparator:()=>N1});l0({circular:!0,createInternalComparator:()=>N1});l0({circular:!0,createInternalComparator:()=>N1,strict:!0});function l0(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:i=!1}=e,s=E3e(e),o=v3e(s),a=n?n(o):k3e(o);return S3e({circular:t,comparator:o,createState:r,equals:a,strict:i})}var A3e=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},M3e=({contentComponent:e})=>{const t=lY.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(t)})};function T3e(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:CK.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var I3e=class extends Ie.Component{constructor(e){var t;super(e),this.editorContentRef=Ie.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var e;const t=this.props.editor;if(t&&!t.isDestroyed&&((e=t.view.dom)!=null&&e.parentNode)){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n}),t.contentComponent=T3e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.parentNode))return;const n=document.createElement("div");n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:A3e(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&m.jsx(M3e,{contentComponent:e.contentComponent})]})}},N3e=T.forwardRef((e,t)=>{const n=Ie.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Ie.createElement(I3e,{key:n,innerRef:t,...e})}),mw=Ie.memo(N3e),R3e=typeof window<"u"?T.useLayoutEffect:T.useEffect,_3e=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function P3e(e){var t;const[n]=T.useState(()=>new _3e(e.editor)),r=vK.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:C3e);return R3e(()=>n.watch(e.editor),[e.editor,n]),T.useDebugValue(r),r}var D3e=!1,dA=typeof window>"u",L3e=dA||!!(typeof window<"u"&&window.next),O3e=class hq{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?dA||L3e?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new RUe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?hq.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function dI(e={},t=[]){const n=T.useRef(e);n.current=e;const[r]=T.useState(()=>new O3e(n)),i=lY.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return T.useDebugValue(i),T.useEffect(r.onRender(t)),P3e({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var pq=T.createContext({editor:null});pq.Consumer;var j3e=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),B3e=()=>T.useContext(j3e);Ie.forwardRef((e,t)=>{const{onDragStart:n}=B3e(),r=e.as||"div";return m.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Ie.createContext({markViewContentRef:()=>{}});var uI=T.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});uI.displayName="TiptapContext";var F3e=()=>T.useContext(uI);function mq({editor:e,instance:t,children:n}){const r=e??t;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=T.useMemo(()=>({editor:r}),[r]),s=T.useMemo(()=>({editor:r}),[r]);return m.jsx(pq.Provider,{value:s,children:m.jsx(uI.Provider,{value:i,children:n})})}mq.displayName="Tiptap";function gq({...e}){const{editor:t}=F3e();return m.jsx(mw,{editor:t,...e})}gq.displayName="Tiptap.Content";Object.assign(mq,{Content:gq});var Gx=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},z3e=/^\s*>\s$/,$3e=mo.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Gx("blockquote",{...Hr(this.options.HTMLAttributes,e),children:Gx("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(i=>{const a=t.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Rg({find:z3e,type:this.type})]}}),H3e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,V3e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,W3e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,G3e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,X3e=I1.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Gx("strong",{...Hr(this.options.HTMLAttributes,e),children:Gx("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ng({find:H3e,type:this.type}),Ng({find:W3e,type:this.type})]},addPasteRules(){return[f1({find:V3e,type:this.type}),f1({find:G3e,type:this.type})]}}),K3e=/(^|[^`])`([^`]+)`(?!`)$/,Y3e=/(^|[^`])`([^`]+)`(?!`)/g,Z3e=I1.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Hr(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ng({find:K3e,type:this.type})]},addPasteRules(){return[f1({find:Y3e,type:this.type})]}}),tk=4,q3e=/^```([a-z]+)?[\s\n]$/,Q3e=/^~~~([a-z]+)?[\s\n]$/,J3e=mo.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:tk,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Hr(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const i=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:tk,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?e.commands.insertContent(a):e.commands.command(({tr:l})=>{const{from:f,to:c}=i,h=r.doc.textBetween(f,c,`
`,`
`).split(`
`).map(g=>a+g).join(`
`);return l.replaceWith(f,c,r.schema.text(h)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:tk,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?e.commands.command(({tr:a})=>{var l;const{pos:f}=s,c=s.start(),d=s.end(),h=r.doc.textBetween(c,d,`
`,`
`).split(`
`);let g=0,y=0;const U=f-c;for(let S=0;S<h.length;S+=1){if(y+h[S].length>=U){g=S;break}y+=h[S].length+1}const v=((l=h[g].match(/^ */))==null?void 0:l[0])||"",E=Math.min(v.length,n);if(E===0)return!0;let k=c;for(let S=0;S<g;S+=1)k+=h[S].length+1;return a.delete(k,k+E),f-k<=E&&a.setSelection(Nt.create(a.doc,k)),!0}):e.commands.command(({tr:a})=>{const{from:l,to:f}=i,u=r.doc.textBetween(l,f,`
`,`
`).split(`
`).map(h=>{var g;const y=((g=h.match(/^ */))==null?void 0:g[0])||"",U=Math.min(y.length,n);return h.slice(U)}).join(`
`);return a.replaceWith(l,f,r.schema.text(u)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:f})=>(f.setSelection(Vt.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[cA({find:q3e,type:this.type,getAttributes:e=>({language:e[1]})}),cA({find:Q3e,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new kr({key:new hi("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Nt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),exe=mo.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),txe=mo.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Hr(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:f,dispatch:c})=>{if(c&&l&&o){const d=l.filter(u=>a.includes(u.type.name));f.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),nxe=mo.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Hr(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,i="#".repeat(r);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>cA({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),rxe=mo.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Hr(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!PUe(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return GZ(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,f=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Nt.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(pt.create(o.doc,l.pos)):o.setSelection(Nt.create(o.doc,l.pos));else{const c=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=c==null?void 0:c.create();d&&(o.insert(f,d),o.setSelection(Nt.create(o.doc,f+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[_Ue({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),ixe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,sxe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,oxe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,axe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,lxe=I1.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Hr(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ng({find:ixe,type:this.type}),Ng({find:oxe,type:this.type})]},addPasteRules(){return[f1({find:sxe,type:this.type}),f1({find:axe,type:this.type})]}});const cxe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",fxe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",uA="numeric",hA="ascii",pA="alpha",d2="asciinumeric",$5="alphanumeric",mA="domain",bq="emoji",dxe="scheme",uxe="slashscheme",nk="whitespace";function hxe(e,t){return e in t||(t[e]=[]),t[e]}function ah(e,t,n){t[uA]&&(t[d2]=!0,t[$5]=!0),t[hA]&&(t[d2]=!0,t[pA]=!0),t[d2]&&(t[$5]=!0),t[pA]&&(t[$5]=!0),t[$5]&&(t[mA]=!0),t[bq]&&(t[mA]=!0);for(const r in t){const i=hxe(r,n);i.indexOf(e)<0&&i.push(e)}}function pxe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function ro(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}ro.groups={};ro.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||ro.groups;let i;return t&&t.j?i=t:(i=new ro(t),n&&r&&ah(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||ro.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,a=i.go(e);if(a?(o=new ro,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new ro,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(pxe(o.t,r),n);ah(s,l,r)}else n&&ah(s,n,r);o.t=s}return i.j[e]=o,o}};const $t=(e,t,n,r,i)=>e.ta(t,n,r,i),Ar=(e,t,n,r,i)=>e.tr(t,n,r,i),pB=(e,t,n,r,i)=>e.ts(t,n,r,i),De=(e,t,n,r,i)=>e.tt(t,n,r,i),lf="WORD",gA="UWORD",yq="ASCIINUMERICAL",Uq="ALPHANUMERICAL",db="LOCALHOST",bA="TLD",yA="UTLD",S3="SCHEME",Op="SLASH_SCHEME",hI="NUM",UA="WS",pI="NL",u2="OPENBRACE",h2="CLOSEBRACE",Xx="OPENBRACKET",Kx="CLOSEBRACKET",Yx="OPENPAREN",Zx="CLOSEPAREN",qx="OPENANGLEBRACKET",Qx="CLOSEANGLEBRACKET",Jx="FULLWIDTHLEFTPAREN",e4="FULLWIDTHRIGHTPAREN",t4="LEFTCORNERBRACKET",n4="RIGHTCORNERBRACKET",r4="LEFTWHITECORNERBRACKET",i4="RIGHTWHITECORNERBRACKET",s4="FULLWIDTHLESSTHAN",o4="FULLWIDTHGREATERTHAN",a4="AMPERSAND",l4="APOSTROPHE",c4="ASTERISK",tu="AT",f4="BACKSLASH",d4="BACKTICK",u4="CARET",lu="COLON",mI="COMMA",h4="DOLLAR",Hl="DOT",p4="EQUALS",gI="EXCLAMATION",Jo="HYPHEN",p2="PERCENT",m4="PIPE",g4="PLUS",b4="POUND",m2="QUERY",bI="QUOTE",xq="FULLWIDTHMIDDLEDOT",yI="SEMI",Vl="SLASH",g2="TILDE",y4="UNDERSCORE",wq="EMOJI",U4="SYM";var vq=Object.freeze({__proto__:null,ALPHANUMERICAL:Uq,AMPERSAND:a4,APOSTROPHE:l4,ASCIINUMERICAL:yq,ASTERISK:c4,AT:tu,BACKSLASH:f4,BACKTICK:d4,CARET:u4,CLOSEANGLEBRACKET:Qx,CLOSEBRACE:h2,CLOSEBRACKET:Kx,CLOSEPAREN:Zx,COLON:lu,COMMA:mI,DOLLAR:h4,DOT:Hl,EMOJI:wq,EQUALS:p4,EXCLAMATION:gI,FULLWIDTHGREATERTHAN:o4,FULLWIDTHLEFTPAREN:Jx,FULLWIDTHLESSTHAN:s4,FULLWIDTHMIDDLEDOT:xq,FULLWIDTHRIGHTPAREN:e4,HYPHEN:Jo,LEFTCORNERBRACKET:t4,LEFTWHITECORNERBRACKET:r4,LOCALHOST:db,NL:pI,NUM:hI,OPENANGLEBRACKET:qx,OPENBRACE:u2,OPENBRACKET:Xx,OPENPAREN:Yx,PERCENT:p2,PIPE:m4,PLUS:g4,POUND:b4,QUERY:m2,QUOTE:bI,RIGHTCORNERBRACKET:n4,RIGHTWHITECORNERBRACKET:i4,SCHEME:S3,SEMI:yI,SLASH:Vl,SLASH_SCHEME:Op,SYM:U4,TILDE:g2,TLD:bA,UNDERSCORE:y4,UTLD:yA,UWORD:gA,WORD:lf,WS:UA});const tf=/[a-z]/,a5=new RegExp("\\p{L}","u"),rk=new RegExp("\\p{Emoji}","u"),nf=/\d/,ik=/\s/,mB="\r",sk=`
`,mxe="",gxe="",ok="";let EU=null,kU=null;function bxe(e=[]){const t={};ro.groups=t;const n=new ro;EU==null&&(EU=gB(cxe)),kU==null&&(kU=gB(fxe)),De(n,"'",l4),De(n,"{",u2),De(n,"}",h2),De(n,"[",Xx),De(n,"]",Kx),De(n,"(",Yx),De(n,")",Zx),De(n,"<",qx),De(n,">",Qx),De(n,"",Jx),De(n,"",e4),De(n,"",t4),De(n,"",n4),De(n,"",r4),De(n,"",i4),De(n,"",s4),De(n,"",o4),De(n,"&",a4),De(n,"*",c4),De(n,"@",tu),De(n,"`",d4),De(n,"^",u4),De(n,":",lu),De(n,",",mI),De(n,"$",h4),De(n,".",Hl),De(n,"=",p4),De(n,"!",gI),De(n,"-",Jo),De(n,"%",p2),De(n,"|",m4),De(n,"+",g4),De(n,"#",b4),De(n,"?",m2),De(n,'"',bI),De(n,"/",Vl),De(n,";",yI),De(n,"~",g2),De(n,"_",y4),De(n,"\\",f4),De(n,"",xq);const r=Ar(n,nf,hI,{[uA]:!0});Ar(r,nf,r);const i=Ar(r,tf,yq,{[d2]:!0}),s=Ar(r,a5,Uq,{[$5]:!0}),o=Ar(n,tf,lf,{[hA]:!0});Ar(o,nf,i),Ar(o,tf,o),Ar(i,nf,i),Ar(i,tf,i);const a=Ar(n,a5,gA,{[pA]:!0});Ar(a,tf),Ar(a,nf,s),Ar(a,a5,a),Ar(s,nf,s),Ar(s,tf),Ar(s,a5,s);const l=De(n,sk,pI,{[nk]:!0}),f=De(n,mB,UA,{[nk]:!0}),c=Ar(n,ik,UA,{[nk]:!0});De(n,ok,c),De(f,sk,l),De(f,ok,c),Ar(f,ik,c),De(c,mB),De(c,sk),Ar(c,ik,c),De(c,ok,c);const d=Ar(n,rk,wq,{[bq]:!0});De(d,"#"),Ar(d,rk,d),De(d,mxe,d);const u=De(d,gxe);De(u,"#"),Ar(u,rk,d);const h=[[tf,o],[nf,i]],g=[[tf,null],[a5,a],[nf,s]];for(let y=0;y<EU.length;y++)zd(n,EU[y],bA,lf,h);for(let y=0;y<kU.length;y++)zd(n,kU[y],yA,gA,g);ah(bA,{tld:!0,ascii:!0},t),ah(yA,{utld:!0,alpha:!0},t),zd(n,"file",S3,lf,h),zd(n,"mailto",S3,lf,h),zd(n,"http",Op,lf,h),zd(n,"https",Op,lf,h),zd(n,"ftp",Op,lf,h),zd(n,"ftps",Op,lf,h),ah(S3,{scheme:!0,ascii:!0},t),ah(Op,{slashscheme:!0,ascii:!0},t),e=e.sort((y,U)=>y[0]>U[0]?1:-1);for(let y=0;y<e.length;y++){const U=e[y][0],v=e[y][1]?{[dxe]:!0}:{[uxe]:!0};U.indexOf("-")>=0?v[mA]=!0:tf.test(U)?nf.test(U)?v[d2]=!0:v[hA]=!0:v[uA]=!0,pB(n,U,U,v)}return pB(n,"localhost",db,{ascii:!0}),n.jd=new ro(U4),{start:n,tokens:Object.assign({groups:t},vq)}}function Eq(e,t){const n=yxe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=e,l=null,f=0,c=null,d=-1,u=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,u=0,c=a):d>=0&&(d+=n[o].length,u++),f+=n[o].length,s+=n[o].length,o++;s-=d,o-=u,f-=d,i.push({t:c.t,v:t.slice(s-f,s),s:s-f,e:s})}return i}function yxe(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function zd(e,t,n,r,i){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];e.j[l]?s=e.j[l]:(s=new ro(r),s.jr=i.slice(),e.j[l]=s),e=s}return s=new ro(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function gB(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const ub={defaultProtocol:"http",events:null,format:bB,formatHref:bB,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function UI(e,t=null){let n=Object.assign({},ub);e&&(n=Object.assign(n,e instanceof UI?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}UI.prototype={o:ub,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:ub[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function bB(e){return e}function kq(e,t){this.t="token",this.v=e,this.tk=t}kq.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=ub.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},a=e.get("className",n,t),l=e.get("target",n,t),f=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return o.href=r,a&&(o.class=a),l&&(o.target=l),f&&(o.rel=f),c&&Object.assign(o,c),{tagName:i,attributes:o,content:s,eventListeners:d}}};function gw(e,t){class n extends kq{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const yB=gw("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),UB=gw("text"),Uxe=gw("nl"),SU=gw("url",{isLink:!0,toHref(e=ub.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==db&&e[1].t===lu}}),Qo=e=>new ro(e);function xxe({groups:e}){const t=e.domain.concat([a4,c4,tu,f4,d4,u4,h4,p4,Jo,hI,p2,m4,g4,b4,Vl,U4,g2,y4]),n=[l4,lu,mI,Hl,gI,p2,m2,bI,yI,qx,Qx,u2,h2,Kx,Xx,Yx,Zx,Jx,e4,t4,n4,r4,i4,s4,o4],r=[a4,l4,c4,f4,d4,u4,h4,p4,Jo,u2,h2,p2,m4,g4,b4,m2,Vl,U4,g2,y4],i=Qo(),s=De(i,g2);$t(s,r,s),$t(s,e.domain,s);const o=Qo(),a=Qo(),l=Qo();$t(i,e.domain,o),$t(i,e.scheme,a),$t(i,e.slashscheme,l),$t(o,r,s),$t(o,e.domain,o);const f=De(o,tu);De(s,tu,f),De(a,tu,f),De(l,tu,f);const c=De(s,Hl);$t(c,r,s),$t(c,e.domain,s);const d=Qo();$t(f,e.domain,d),$t(d,e.domain,d);const u=De(d,Hl);$t(u,e.domain,d);const h=Qo(yB);$t(u,e.tld,h),$t(u,e.utld,h),De(f,db,h);const g=De(d,Jo);De(g,Jo,g),$t(g,e.domain,d),$t(h,e.domain,d),De(h,Hl,u),De(h,Jo,g);const y=De(h,lu);$t(y,e.numeric,yB);const U=De(o,Jo),x=De(o,Hl);De(U,Jo,U),$t(U,e.domain,o),$t(x,r,s),$t(x,e.domain,o);const v=Qo(SU);$t(x,e.tld,v),$t(x,e.utld,v),$t(v,e.domain,o),$t(v,r,s),De(v,Hl,x),De(v,Jo,U),De(v,tu,f);const E=De(v,lu),k=Qo(SU);$t(E,e.numeric,k);const M=Qo(SU),S=Qo();$t(M,t,M),$t(M,n,S),$t(S,t,M),$t(S,n,S),De(v,Vl,M),De(k,Vl,M);const A=De(a,lu),I=De(l,lu),R=De(I,Vl),P=De(R,Vl);$t(a,e.domain,o),De(a,Hl,x),De(a,Jo,U),$t(l,e.domain,o),De(l,Hl,x),De(l,Jo,U),$t(A,e.domain,M),De(A,Vl,M),De(A,m2,M),$t(P,e.domain,M),$t(P,t,M),De(P,Vl,M);const _=[[u2,h2],[Xx,Kx],[Yx,Zx],[qx,Qx],[Jx,e4],[t4,n4],[r4,i4],[s4,o4]];for(let O=0;O<_.length;O++){const[V,j]=_[O],F=De(M,V);De(S,V,F),De(F,j,M);const z=Qo(SU);$t(F,t,z);const H=Qo();$t(F,n),$t(z,t,z),$t(z,n,H),$t(H,t,z),$t(H,n,H),De(z,j,M),De(H,j,M)}return De(i,db,v),De(i,pI,Uxe),{start:i,tokens:vq}}function wxe(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=e,l=null,f=null,c=0,d=null,u=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(f=l||a.go(n[i].t));)l=null,a=f,a.accepts()?(u=0,d=a):u>=0&&u++,i++,c++;if(u<0)i-=c,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(ak(UB,t,o)),o=[]),i-=u,c-=u;const h=d.t,g=n.slice(i-c,i);s.push(ak(h,t,g))}}return o.length>0&&s.push(ak(UB,t,o)),s}function ak(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const vxe=typeof console<"u"&&console&&console.warn||(()=>{}),Exe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Zn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function kxe(){return ro.groups={},Zn.scanner=null,Zn.parser=null,Zn.tokenQueue=[],Zn.pluginQueue=[],Zn.customSchemes=[],Zn.initialized=!1,Zn}function xB(e,t=!1){if(Zn.initialized&&vxe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${Exe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Zn.customSchemes.push([e,t])}function Sxe(){Zn.scanner=bxe(Zn.customSchemes);for(let e=0;e<Zn.tokenQueue.length;e++)Zn.tokenQueue[e][1]({scanner:Zn.scanner});Zn.parser=xxe(Zn.scanner.tokens);for(let e=0;e<Zn.pluginQueue.length;e++)Zn.pluginQueue[e][1]({scanner:Zn.scanner,parser:Zn.parser});return Zn.initialized=!0,Zn}function xI(e){return Zn.initialized||Sxe(),wxe(Zn.parser.start,e,Eq(Zn.scanner.start,e))}xI.scan=Eq;function Sq(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new UI(n),i=xI(e),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!t||a.t===t)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var wI="[\0- -\u2029]",Cxe=new RegExp(wI),Axe=new RegExp(`${wI}$`),Mxe=new RegExp(wI,"g");function Txe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Ixe(e){return new kr({key:new hi("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(f=>f.docChanged)&&!n.doc.eq(r.doc),s=t.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=jZ(n.doc,[...t]);if(WZ(a).forEach(({newRange:f})=>{const c=D8e(r.doc,f,h=>h.isTextblock);let d,u;if(c.length>1)d=c[0],u=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(f.from,f.to," "," ");if(!Axe.test(h))return;d=c[0],u=r.doc.textBetween(d.pos,f.to,void 0," ")}if(d&&u){const h=u.split(Cxe).filter(Boolean);if(h.length<=0)return!1;const g=h[h.length-1],y=d.pos+u.lastIndexOf(g);if(!g)return!1;const U=xI(g).map(x=>x.toObject(e.defaultProtocol));if(!Txe(U))return!1;U.filter(x=>x.isLink).map(x=>({...x,from:y+x.start+1,to:y+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{oI(x.from,x.to,r.doc).some(v=>v.mark.type===e.type)||o.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!o.steps.length)return o}})}function Nxe(e){return new kr({key:new hi("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const l=r.target;if(!l)return!1;const f=e.editor.view.dom;o=l.closest("a"),o&&!f.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(e.enableClickSelection&&(a=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){const l=VZ(t.state,e.type.name),f=(i=o.href)!=null?i:l.href,c=(s=o.target)!=null?s:l.target;f&&(window.open(f,c),a=!0)}return a}}})}function Rxe(e){return new kr({key:new hi("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:i}=e,{state:s}=t,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const f=Sq(l,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!f||i!==void 0&&!i(f.value)?!1:e.editor.commands.setMark(e.type,{href:f.href})}}})}function N0(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(Mxe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Cq=I1.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){xB(e);return}xB(e.scheme,e.optionalSlashes)})},onDestroy(){kxe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!N0(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>{const t=/^[a-z][a-z0-9+.-]*:\/\//i.test(e),n=/^[a-z][a-z0-9+.-]*:/i.test(e);if(t||n&&!e.includes("@"))return!0;const i=(e.includes("@")?e.split("@").pop():e).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!N0(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!N0(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Hr(this.options.HTMLAttributes,e),0]:["a",Hr(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n,r,i,s;const o=(r=(n=e.attrs)==null?void 0:n.href)!=null?r:"",a=(s=(i=e.attrs)==null?void 0:i.title)!=null?s:"",l=t.renderChildren(e);return a?`[${l}](${o} "${a}")`:`[${l}](${o})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!N0(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!N0(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[f1({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=Sq(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!N0(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&t.push({text:s.value,data:{href:s.href},index:s.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Ixe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!N0(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(Nxe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(Rxe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),vI=Cq,_xe=Object.defineProperty,Pxe=(e,t)=>{for(var n in t)_xe(e,n,{get:t[n],enumerable:!0})},Dxe="listItem",wB="textStyle",vB=/^\s*([-+*])\s$/,Aq=mo.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Hr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Dxe,this.editor.getAttributes(wB)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Rg({find:vB,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Rg({find:vB,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(wB),editor:this.editor})),[e]}}),Mq=mo.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Hr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))n=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),a=t.parseChildren(o);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>fI(e,t,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Lxe={};Pxe(Lxe,{findListItemPos:()=>yy,getNextListDepth:()=>EI,handleBackspace:()=>xA,handleDelete:()=>wA,hasListBefore:()=>Tq,hasListItemAfter:()=>Oxe,hasListItemBefore:()=>Iq,listItemHasSubList:()=>Nq,nextListIsDeeper:()=>Rq,nextListIsHigher:()=>_q});var yy=(e,t)=>{const{$from:n}=t.selection,r=ni(e,t.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:t.doc.resolve(o),depth:a}},EI=(e,t)=>{const n=yy(e,t);if(!n)return!1;const[,r]=W8e(t,e,n.$pos.pos+4);return r},Tq=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Iq=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},Nq=(e,t,n)=>{if(!n)return!1;const r=ni(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},xA=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Zu(e.state,t)&&Tq(e.state,t,n)){const{$anchor:a}=e.state.selection,l=e.state.doc.resolve(a.before()-1),f=[];l.node().descendants((u,h)=>{u.type.name===t&&f.push({node:u,pos:h})});const c=f.at(-1);if(!c)return!1;const d=e.state.doc.resolve(l.start()+c.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Zu(e.state,t)||!Y8e(e.state))return!1;const r=yy(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Nq(t,e.state,s);return Iq(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Rq=(e,t)=>{const n=EI(e,t),r=yy(e,t);return!r||!n?!1:n>r.depth},_q=(e,t)=>{const n=EI(e,t),r=yy(e,t);return!r||!n?!1:n<r.depth},wA=(e,t)=>{if(!Zu(e.state,t)||!K8e(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Rq(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():_q(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},Oxe=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},Pq=Vr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&wA(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&wA(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&xA(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&xA(e,n,r)&&(t=!0)}),t}}}}),EB=/^(\s*)(\d+)\.\s+(.*)$/,jxe=/^\s/;function Bxe(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n],s=i.match(EB);if(!s)break;const[,o,a,l]=s,f=o.length;let c=l,d=n+1;const u=[i];for(;d<e.length;){const h=e[d];if(h.match(EB))break;if(h.trim()==="")u.push(h),c+=`
`,d+=1;else if(h.match(jxe))u.push(h),c+=`
${h.slice(f+2)}`,d+=1;else break}t.push({indent:f,number:parseInt(a,10),content:c.trim(),raw:u.join(`
`)}),r=d,n=d}return[t,r]}function Dq(e,t,n){var r;const i=[];let s=0;for(;s<e.length;){const o=e[s];if(o.indent===t){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",f=[];l&&f.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const c=a.slice(1).join(`
`).trim();if(c){const h=n.blockTokens(c);f.push(...h)}let d=s+1;const u=[];for(;d<e.length&&e[d].indent>t;)u.push(e[d]),d+=1;if(u.length>0){const h=Math.min(...u.map(y=>y.indent)),g=Dq(u,h,n);f.push({type:"list",ordered:!0,start:u[0].number,items:g,raw:u.map(y=>y.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:f}),s=d}else s+=1}return i}function Fxe(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=t.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=t.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var zxe="listItem",kB="textStyle",SB=/^(\d+)\.\s$/,Lq=mo.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Hr(this.options.HTMLAttributes,n),0]:["ol",Hr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?Fxe(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const i=e.split(`
`),[s,o]=Bxe(i);if(s.length===0)return;const a=Dq(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zxe,this.editor.getAttributes(kB)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Rg({find:SB,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Rg({find:SB,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(kB)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),$xe=/^\s*(\[([( |x])?\])\s$/,Hxe=mo.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Hr(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const i=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return fI(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),f=d=>{var u,h;a.ariaLabel=((h=(u=this.options.a11y)==null?void 0:u.checkboxLabel)==null?void 0:h.call(u,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};f(e),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:u}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const g=n();if(typeof g!="number")return!1;const y=h.doc.nodeAt(g);return h.setNodeMarkup(g,void 0,{...y==null?void 0:y.attrs,checked:u}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,u)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,u])=>{i.setAttribute(d,u)}),i.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(t).forEach(([d,u])=>{i.setAttribute(d,u)});let c=new Set(Object.keys(t));return{dom:i,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;i.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,f(d);const u=r.extensionManager.attributes,h=fb(d,u),g=new Set(Object.keys(h)),y=this.options.HTMLAttributes;return c.forEach(U=>{g.has(U)||(U in y?i.setAttribute(U,y[U]):i.removeAttribute(U))}),Object.entries(h).forEach(([U,x])=>{x==null?U in y?i.setAttribute(U,y[U]):i.removeAttribute(U):i.setAttribute(U,x)}),c=g,!0}}}},addInputRules(){return[Rg({find:$xe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Vxe=mo.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Hr(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=s=>{const o=fA(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=fA(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Vr.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(Aq.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Mq.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Pq.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(Lq.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Hxe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Vxe.configure(this.options.taskList)),e}});var CB="&nbsp;",Wxe="",Gxe=mo.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Hr(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];if(n.length===1&&n[0].type==="image")return t.parseChildren([n[0]]);const r=t.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===CB||r[0].text===Wxe)?t.createNode("paragraph",void 0,[]):t.createNode("paragraph",void 0,r)},renderMarkdown:(e,t)=>{if(!e)return"";const n=Array.isArray(e.content)?e.content:[];return n.length===0?CB:t.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Xxe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Kxe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Yxe=I1.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Hr(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ng({find:Xxe,type:this.type})]},addPasteRules(){return[f1({find:Kxe,type:this.type})]}}),Zxe=mo.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),qxe=I1.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Hr(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Qxe(e={}){return new kr({view(t){return new Jxe(t,e)}})}class Jxe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=t.nodeBefore,u=t.nodeAfter;if(d||u){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let g=h.getBoundingClientRect(),y=d?g.bottom:g.top;d&&u&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let U=this.width/2*a;r={left:g.left,right:g.right,top:y-U,bottom:y+U}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),u=this.width/2*o;r={left:d.left-u,right:d.left+u,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")f=-pageXOffset,c=-pageYOffset;else{let d=l.getBoundingClientRect(),u=d.width/l.offsetWidth,h=d.height/l.offsetHeight;f=d.left-l.scrollLeft*u,c=d.top-l.scrollTop*h}this.element.style.left=(r.left-f)/o+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=DY(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Pr extends Vt{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Pr.valid(r)?new Pr(r):Vt.near(r)}content(){return qe.empty}eq(t){return t instanceof Pr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Pr(t.resolve(n.pos))}getBookmark(){return new kI(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!e4e(t)||!t4e(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Pr.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(n>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let l=t.doc.resolve(i);if(Pr.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!pt.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=t.doc.resolve(i);if(Pr.valid(a))return a}return null}}}Pr.prototype.visible=!1;Pr.findFrom=Pr.findGapCursorFrom;Vt.jsonID("gapcursor",Pr);class kI{constructor(t){this.pos=t}map(t){return new kI(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Pr.valid(n)?new Pr(n):Vt.near(n)}}function Oq(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function e4e(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Oq(i.type))return!0;if(i.inlineContent)return!1}}return!0}function t4e(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Oq(i.type))return!0;if(i.inlineContent)return!1}}return!0}function n4e(){return new kr({props:{decorations:o4e,createSelectionBetween(e,t,n){return t.pos==n.pos&&Pr.valid(n)?new Pr(n):null},handleClick:i4e,handleKeyDown:r4e,handleDOMEvents:{beforeinput:s4e}}})}const r4e=IZ({ArrowLeft:CU("horiz",-1),ArrowRight:CU("horiz",1),ArrowUp:CU("vert",-1),ArrowDown:CU("vert",1)});function CU(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof Nt){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let f=Pr.findGapCursorFrom(a,t,l);return f?(i&&i(r.tr.setSelection(new Pr(f))),!0):!1}}function i4e(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Pr.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&pt.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Pr(r))),!0)}function s4e(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Pr))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=Te.empty;for(let o=r.length-1;o>=0;o--)i=Te.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new qe(i,0,0));return s.setSelection(Nt.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function o4e(e){if(!(e.selection instanceof Pr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",yr.create(e.doc,[Rs.widget(e.selection.head,t,{key:"gapcursor"})])}var x4=200,Ii=function(){};Ii.prototype.append=function(t){return t.length?(t=Ii.from(t),!this.length&&t||t.length<x4&&this.leafAppend(t)||this.length<x4&&t.leafPrepend(this)||this.appendInner(t)):this};Ii.prototype.prepend=function(t){return t.length?Ii.from(t).append(this):this};Ii.prototype.appendInner=function(t){return new a4e(this,t)};Ii.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ii.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ii.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ii.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ii.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};Ii.from=function(t){return t instanceof Ii?t:t&&t.length?new jq(t):Ii.empty};var jq=function(e){function t(r){e.call(this),this.values=r}t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=x4)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=x4)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ii);Ii.empty=new jq([]);var a4e=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Ii);const l4e=500;class il{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,a,l,f=[],c=[];return this.items.forEach((d,u)=>{if(!d.step){i||(i=this.remapping(r,u+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new Wl(d.map));let h=d.step.map(i.slice(s)),g;h&&o.maybeStep(h).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],f.push(new Wl(g,void 0,void 0,f.length+c.length))),s--,g&&i.appendMap(g,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new il(this.items.slice(0,r).append(c.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<t.steps.length;c++){let d=t.steps[c].invert(t.docs[c]),u=new Wl(t.mapping.maps[c],d,n),h;(h=l&&l.merge(u))&&(u=h,c?s.pop():a=a.slice(0,a.length-1)),s.push(u),n&&(o++,n=void 0),i||(l=u)}let f=o-r.depth;return f>f4e&&(a=c4e(a,f),o-=f),new il(a.append(s),o)}remapping(t,n){let r=new ib;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new il(this.items.append(t.map(n=>new Wl(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(u=>{u.selection&&a--},i);let l=n;this.items.forEach(u=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let g=s.maps[h];if(u.step){let y=t.steps[h].invert(t.docs[h]),U=u.selection&&u.selection.map(s.slice(l+1,h));U&&a++,r.push(new Wl(g,y,U))}else r.push(new Wl(g))},i);let f=[];for(let u=n;u<o;u++)f.push(new Wl(s.maps[u]));let c=this.items.slice(0,i).append(f).append(r),d=new il(c,a);return d.emptyItemCount()>l4e&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),f=l&&l.getMap();if(r--,f&&n.appendMap(f,r),l){let c=o.selection&&o.selection.map(n.slice(r));c&&s++;let d=new Wl(f.invert(),l,c),u,h=i.length-1;(u=i.length&&i[h].merge(d))?i[h]=u:i.push(d)}}else o.map&&r--},this.items.length,0),new il(Ii.from(i.reverse()),s)}}il.empty=new il(Ii.empty,0);function c4e(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Wl{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Wl(n.getMap().invert(),n,this.selection)}}}class nu{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const f4e=20;function d4e(e,t,n,r){let i=n.getMeta(Hh),s;if(i)return i.historyState;n.getMeta(p4e)&&(e=new nu(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(Hh))return o.getMeta(Hh).redo?new nu(e.done.addTransform(n,void 0,r,C3(t)),e.undone,AB(n.mapping.maps),e.prevTime,e.prevComposition):new nu(e.done,e.undone.addTransform(n,void 0,r,C3(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!o&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!u4e(n,e.prevRanges)),f=o?lk(e.prevRanges,n.mapping):AB(n.mapping.maps);return new nu(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,C3(t)),il.empty,f,n.time,a??e.prevComposition)}else return(s=n.getMeta("rebased"))?new nu(e.done.rebased(n,s),e.undone.rebased(n,s),lk(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new nu(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),lk(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function u4e(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function AB(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function lk(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function h4e(e,t,n){let r=C3(t),i=Hh.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),l=new nu(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Hh,{redo:n,historyState:l})}let ck=!1,MB=null;function C3(e){let t=e.plugins;if(MB!=t){ck=!1,MB=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){ck=!0;break}}return ck}const Hh=new hi("history"),p4e=new hi("closeHistory");function m4e(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new kr({key:Hh,state:{init(){return new nu(il.empty,il.empty,null,0,-1)},apply(t,n,r){return d4e(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?Fq:r=="historyRedo"?zq:null;return!i||!t.editable?!1:(n.preventDefault(),i(t.state,t.dispatch))}}}})}function Bq(e,t){return(n,r)=>{let i=Hh.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=h4e(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const Fq=Bq(!1,!0),zq=Bq(!0,!0);Vr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new kr({key:new hi("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(a,l);return e=!0,f}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,l=s-r,f=a-l,c=a;return t.deleteRange(f,c),!(this.storage.characters({node:t.doc})>r)}})]}});var g4e=Vr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Qxe(this.options)]}});Vr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new kr({key:new hi("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return yr.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((l,f)=>{if(l.isText)return;if(!(i>=f&&i<=f+l.nodeSize-1))return!1;o+=1});let a=0;return e.descendants((l,f)=>{if(l.isText||!(i>=f&&i<=f+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Rs.node(f,f+l.nodeSize,{class:this.options.className}))}),yr.create(e,s)}}})]}});var b4e=Vr.create({name:"gapCursor",addProseMirrorPlugins(){return[n4e()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=bn(ut(e,"allowGapCursor",n)))!=null?t:null}}}),TB="placeholder";function y4e(e){return e.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var U4e=Vr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:TB,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const e=this.options.dataAttribute?`data-${y4e(this.options.dataAttribute)}`:`data-${TB}`;return[new kr({key:new hi("placeholder"),props:{decorations:({doc:t,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,s=[];if(!r)return null;const o=this.editor.isEmpty;return t.descendants((a,l)=>{const f=i>=l&&i<=l+a.nodeSize,c=!a.isLeaf&&uw(a);if((f||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const u=Rs.node(l,l+a.nodeSize,{class:d.join(" "),[e]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:f}):this.options.placeholder});s.push(u)}return this.options.includeChildren}),yr.create(t,s)}}})]}});Vr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new kr({key:new hi("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||GZ(n.selection)||e.view.dragging?null:yr.create(n.doc,[Rs.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function IB({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var x4e=Vr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new hi(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new kr({key:t,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:f}=o,c=t.getState(o),d=a.content.size,u=f.nodes[n];if(c)return l.insert(d,u.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!IB({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!IB({node:o,types:r})}}})]}}),w4e=Vr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Fq(e,t),redo:()=>({state:e,dispatch:t})=>zq(e,t)}},addProseMirrorPlugins(){return[m4e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),v4e=Vr.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(X3e.configure(this.options.bold)),this.options.blockquote!==!1&&i.push($3e.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Aq.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Z3e.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(J3e.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(exe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(g4e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(b4e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(txe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(nxe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(w4e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(rxe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(lxe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Mq.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Pq.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Cq.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(Lq.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Gxe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Yxe.configure(this.options.strike)),this.options.text!==!1&&i.push(Zxe.configure(this.options.text)),this.options.underline!==!1&&i.push(qxe.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(x4e.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),SI=v4e,E4e=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,k4e=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,$q=e=>e.match(E4e),NB=(e,t)=>t?"https://www.youtube-nocookie.com/embed/videoseries?list=":e?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",S4e=e=>{const{url:t,allowFullscreen:n,autoplay:r,ccLanguage:i,ccLoadPolicy:s,controls:o,disableKBcontrols:a,enableIFrameApi:l,endTime:f,interfaceLanguage:c,ivLoadPolicy:d,loop:u,modestBranding:h,nocookie:g,origin:y,playlist:U,progressBarColor:x,startAt:v,rel:E}=e;if(!$q(t))return null;if(t.includes("/embed/"))return t;if(t.includes("youtu.be")){const I=t.split("/").pop();return I?`${NB(g)}${I}`:null}const M=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(t);if(!M||!M[2])return null;let S=`${NB(g,M[1]==="list")}${M[2]}`;const A=[];return n===!1&&A.push("fs=0"),r&&A.push("autoplay=1"),i&&A.push(`cc_lang_pref=${i}`),s&&A.push("cc_load_policy=1"),o||A.push("controls=0"),a&&A.push("disablekb=1"),l&&A.push("enablejsapi=1"),f&&A.push(`end=${f}`),c&&A.push(`hl=${c}`),d&&A.push(`iv_load_policy=${d}`),u&&A.push("loop=1"),h&&A.push("modestbranding=1"),y&&A.push(`origin=${y}`),U&&A.push(`playlist=${U}`),v&&A.push(`start=${v}`),x&&A.push(`color=${x}`),E!==void 0&&A.push(`rel=${E}`),A.length&&(S+=`${M[1]==="list"?"&":"?"}${A.join("&")}`),S},C4e=mo.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:e=>({commands:t})=>$q(e.src)?t.insertContent({type:this.name,attrs:e}):!1}},addPasteRules(){return this.options.addPasteHandler?[zUe({find:k4e,type:this.type,getAttributes:e=>({src:e.input})})]:[]},renderHTML({HTMLAttributes:e}){const t=S4e({url:e.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:e.start||0,rel:this.options.rel});return e.src=t,["div",{"data-youtube-video":""},["iframe",Hr(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},e)]]},...fq({nodeName:"youtube",allowedAttributes:["src","width","height","start"]})}),CI=C4e,AI=U4e;const w4=({label:e,placeholder:t,onSubmit:n,onCancel:r})=>{const[i,s]=T.useState(""),o=T.useRef(null);T.useEffect(()=>{var f;(f=o.current)==null||f.focus()},[]);const a=()=>{i.trim()&&n(i.trim())},l=f=>{f.key==="Enter"?(f.preventDefault(),a()):f.key==="Escape"&&r()};return m.jsx("div",{className:"im-overlay",onMouseDown:r,children:m.jsxs("div",{className:"im-dialog",onMouseDown:f=>f.stopPropagation(),children:[m.jsx("label",{className:"im-label",children:e}),m.jsx("input",{ref:o,className:"im-input",type:"text",placeholder:t,value:i,onChange:f=>s(f.target.value),onKeyDown:l}),m.jsxs("div",{className:"im-actions",children:[m.jsx("button",{className:"im-cancel",onClick:r,children:"Cancel"}),m.jsx("button",{className:"im-submit",disabled:!i.trim(),onClick:a,children:"Add"})]})]})})};function A4e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const M4e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,T4e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,I4e={};function RB(e,t){return(I4e.jsx?T4e:M4e).test(e)}const N4e=/[ \t\n\f\r]/g;function R4e(e){return typeof e=="object"?e.type==="text"?_B(e.value):!1:_B(e)}function _B(e){return e.replace(N4e,"")===""}class Uy{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Uy.prototype.normal={};Uy.prototype.property={};Uy.prototype.space=void 0;function Hq(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Uy(n,r,t)}function vA(e){return e.toLowerCase()}class go{constructor(t,n){this.attribute=n,this.property=t}}go.prototype.attribute="";go.prototype.booleanish=!1;go.prototype.boolean=!1;go.prototype.commaOrSpaceSeparated=!1;go.prototype.commaSeparated=!1;go.prototype.defined=!1;go.prototype.mustUseProperty=!1;go.prototype.number=!1;go.prototype.overloadedBoolean=!1;go.prototype.property="";go.prototype.spaceSeparated=!1;go.prototype.space=void 0;let _4e=0;const Bt=R1(),Zr=R1(),EA=R1(),Oe=R1(),$n=R1(),gm=R1(),So=R1();function R1(){return 2**++_4e}const kA=Object.freeze(Object.defineProperty({__proto__:null,boolean:Bt,booleanish:Zr,commaOrSpaceSeparated:So,commaSeparated:gm,number:Oe,overloadedBoolean:EA,spaceSeparated:$n},Symbol.toStringTag,{value:"Module"})),fk=Object.keys(kA);class MI extends go{constructor(t,n,r,i){let s=-1;if(super(t,n),PB(this,"space",i),typeof r=="number")for(;++s<fk.length;){const o=fk[s];PB(this,fk[s],(r&kA[o])===kA[o])}}}MI.prototype.defined=!0;function PB(e,t,n){n&&(e[t]=n)}function t6(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new MI(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[vA(r)]=r,n[vA(s.attribute)]=r}return new Uy(t,n,e.space)}const Vq=t6({properties:{ariaActiveDescendant:null,ariaAtomic:Zr,ariaAutoComplete:null,ariaBusy:Zr,ariaChecked:Zr,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:$n,ariaCurrent:null,ariaDescribedBy:$n,ariaDetails:null,ariaDisabled:Zr,ariaDropEffect:$n,ariaErrorMessage:null,ariaExpanded:Zr,ariaFlowTo:$n,ariaGrabbed:Zr,ariaHasPopup:null,ariaHidden:Zr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:$n,ariaLevel:Oe,ariaLive:null,ariaModal:Zr,ariaMultiLine:Zr,ariaMultiSelectable:Zr,ariaOrientation:null,ariaOwns:$n,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:Zr,ariaReadOnly:Zr,ariaRelevant:null,ariaRequired:Zr,ariaRoleDescription:$n,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:Zr,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Wq(e,t){return t in e?e[t]:t}function Gq(e,t){return Wq(e,t.toLowerCase())}const P4e=t6({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gm,acceptCharset:$n,accessKey:$n,action:null,allow:null,allowFullScreen:Bt,allowPaymentRequest:Bt,allowUserMedia:Bt,alt:null,as:null,async:Bt,autoCapitalize:null,autoComplete:$n,autoFocus:Bt,autoPlay:Bt,blocking:$n,capture:null,charSet:null,checked:Bt,cite:null,className:$n,cols:Oe,colSpan:null,content:null,contentEditable:Zr,controls:Bt,controlsList:$n,coords:Oe|gm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Bt,defer:Bt,dir:null,dirName:null,disabled:Bt,download:EA,draggable:Zr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Bt,formTarget:null,headers:$n,height:Oe,hidden:EA,high:Oe,href:null,hrefLang:null,htmlFor:$n,httpEquiv:$n,id:null,imageSizes:null,imageSrcSet:null,inert:Bt,inputMode:null,integrity:null,is:null,isMap:Bt,itemId:null,itemProp:$n,itemRef:$n,itemScope:Bt,itemType:$n,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Bt,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:Bt,muted:Bt,name:null,nonce:null,noModule:Bt,noValidate:Bt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Bt,optimum:Oe,pattern:null,ping:$n,placeholder:null,playsInline:Bt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Bt,referrerPolicy:null,rel:$n,required:Bt,reversed:Bt,rows:Oe,rowSpan:Oe,sandbox:$n,scope:null,scoped:Bt,seamless:Bt,selected:Bt,shadowRootClonable:Bt,shadowRootDelegatesFocus:Bt,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:Zr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:Bt,useMap:null,value:Zr,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:$n,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Bt,declare:Bt,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:Bt,noHref:Bt,noShade:Bt,noWrap:Bt,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:Zr,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Bt,disableRemotePlayback:Bt,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:Gq}),D4e=t6({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:So,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:$n,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:Bt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gm,g2:gm,glyphName:gm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:So,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:$n,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:So,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:So,rev:So,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:So,requiredFeatures:So,requiredFonts:So,requiredFormats:So,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:So,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:So,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:So,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wq}),Xq=t6({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Kq=t6({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Gq}),Yq=t6({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),L4e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},O4e=/[A-Z]/g,DB=/-[a-z]/g,j4e=/^data[-\w.:]+$/i;function B4e(e,t){const n=vA(t);let r=t,i=go;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&j4e.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(DB,z4e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!DB.test(s)){let o=s.replace(O4e,F4e);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=MI}return new i(r,t)}function F4e(e){return"-"+e.toLowerCase()}function z4e(e){return e.charAt(1).toUpperCase()}const $4e=Hq([Vq,P4e,Xq,Kq,Yq],"html"),TI=Hq([Vq,D4e,Xq,Kq,Yq],"svg");function H4e(e){return e.join(" ").trim()}var l5={},dk,LB;function V4e(){if(LB)return dk;LB=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,f="/",c="*",d="",u="comment",h="declaration";function g(U,x){if(typeof U!="string")throw new TypeError("First argument must be a string");if(!U)return[];x=x||{};var v=1,E=1;function k(j){var F=j.match(t);F&&(v+=F.length);var z=j.lastIndexOf(l);E=~z?j.length-z:E+j.length}function M(){var j={line:v,column:E};return function(F){return F.position=new S(j),R(),F}}function S(j){this.start=j,this.end={line:v,column:E},this.source=x.source}S.prototype.content=U;function A(j){var F=new Error(x.source+":"+v+":"+E+": "+j);if(F.reason=j,F.filename=x.source,F.line=v,F.column=E,F.source=U,!x.silent)throw F}function I(j){var F=j.exec(U);if(F){var z=F[0];return k(z),U=U.slice(z.length),F}}function R(){I(n)}function P(j){var F;for(j=j||[];F=_();)F!==!1&&j.push(F);return j}function _(){var j=M();if(!(f!=U.charAt(0)||c!=U.charAt(1))){for(var F=2;d!=U.charAt(F)&&(c!=U.charAt(F)||f!=U.charAt(F+1));)++F;if(F+=2,d===U.charAt(F-1))return A("End of comment missing");var z=U.slice(2,F-2);return E+=2,k(z),U=U.slice(F),E+=2,j({type:u,comment:z})}}function O(){var j=M(),F=I(r);if(F){if(_(),!I(i))return A("property missing ':'");var z=I(s),H=j({type:h,property:y(F[0].replace(e,d)),value:z?y(z[0].replace(e,d)):d});return I(o),H}}function V(){var j=[];P(j);for(var F;F=O();)F!==!1&&(j.push(F),P(j));return j}return R(),V()}function y(U){return U?U.replace(a,d):d}return dk=g,dk}var OB;function W4e(){if(OB)return l5;OB=1;var e=l5.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l5,"__esModule",{value:!0}),l5.default=n;const t=e(V4e());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,t.default)(r),a=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:f,value:c}=l;a?i(f,c,l):c&&(s=s||{},s[f]=c)}),s}return l5}var c5={},jB;function G4e(){if(jB)return c5;jB=1,Object.defineProperty(c5,"__esModule",{value:!0}),c5.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(f){return!f||n.test(f)||e.test(f)},o=function(f,c){return c.toUpperCase()},a=function(f,c){return"".concat(c,"-")},l=function(f,c){return c===void 0&&(c={}),s(f)?f:(f=f.toLowerCase(),c.reactCompat?f=f.replace(i,a):f=f.replace(r,a),f.replace(t,o))};return c5.camelCase=l,c5}var f5,BB;function X4e(){if(BB)return f5;BB=1;var e=f5&&f5.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(W4e()),n=G4e();function r(i,s){var o={};return!i||typeof i!="string"||(0,t.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,f5=r,f5}var K4e=X4e();const Y4e=Ia(K4e),Zq=qq("end"),II=qq("start");function qq(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Z4e(e){const t=II(e),n=Zq(e);if(t&&n)return{start:t,end:n}}function q4e(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?FB(e.position):"start"in e||"end"in e?FB(e):"line"in e||"column"in e?SA(e):""}function SA(e){return zB(e&&e.line)+":"+zB(e&&e.column)}function FB(e){return SA(e&&e.start)+"-"+SA(e&&e.end)}function zB(e){return e&&typeof e=="number"?e:1}class gs extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=q4e(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}gs.prototype.file="";gs.prototype.name="";gs.prototype.reason="";gs.prototype.message="";gs.prototype.stack="";gs.prototype.column=void 0;gs.prototype.line=void 0;gs.prototype.ancestors=void 0;gs.prototype.cause=void 0;gs.prototype.fatal=void 0;gs.prototype.place=void 0;gs.prototype.ruleId=void 0;gs.prototype.source=void 0;const NI={}.hasOwnProperty,Q4e=new Map,J4e=/[A-Z]/g,e9e=new Set(["table","tbody","thead","tfoot","tr"]),t9e=new Set(["td","th"]),Qq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function n9e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=f9e(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=c9e(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?TI:$4e,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Jq(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Jq(e,t,n){if(t.type==="element")return r9e(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return i9e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return o9e(e,t,n);if(t.type==="mdxjsEsm")return s9e(e,t);if(t.type==="root")return a9e(e,t,n);if(t.type==="text")return l9e(e,t)}function r9e(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=TI,e.schema=i),e.ancestors.push(t);const s=tQ(e,t.tagName,!1),o=d9e(e,t);let a=_I(e,t);return e9e.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!R4e(l):!0})),eQ(e,o,s,t),RI(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function i9e(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}hb(e,t.position)}function s9e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);hb(e,t.position)}function o9e(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=TI,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:tQ(e,t.name,!0),o=u9e(e,t),a=_I(e,t);return eQ(e,o,s,t),RI(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function a9e(e,t,n){const r={};return RI(r,_I(e,t)),e.create(t,e.Fragment,r,n)}function l9e(e,t){return t.value}function eQ(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function RI(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function c9e(e,t,n){return r;function r(i,s,o,a){const f=Array.isArray(o.children)?n:t;return a?f(s,o,a):f(s,o)}}function f9e(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=II(r);return t(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function d9e(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&NI.call(t.properties,i)){const s=h9e(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&t9e.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function u9e(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else hb(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else hb(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function _I(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Q4e;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const f=i.get(l)||0;o=l+"-"+f,i.set(l,f+1)}}const a=Jq(e,s,o);a!==void 0&&n.push(a)}return n}function h9e(e,t,n){const r=B4e(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?A4e(n):H4e(n)),r.property==="style"){let i=typeof n=="object"?n:p9e(e,String(n));return e.stylePropertyNameCase==="css"&&(i=m9e(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?L4e[r.property]||r.property:r.attribute,n]}}function p9e(e,t){try{return Y4e(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new gs("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Qq+"#cannot-parse-style-attribute",i}}function tQ(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=RB(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=RB(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return NI.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);hb(e)}function hb(e,t){const n=new gs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Qq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function m9e(e){const t={};let n;for(n in e)NI.call(e,n)&&(t[g9e(n)]=e[n]);return t}function g9e(e){let t=e.replace(J4e,b9e);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function b9e(e){return"-"+e.toLowerCase()}const uk={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},y9e={};function U9e(e,t){const n=y9e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return nQ(e,r,i)}function nQ(e,t,n){if(x9e(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return $B(e.children,t,n)}return Array.isArray(e)?$B(e,t,n):""}function $B(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=nQ(e[i],t,n);return r.join("")}function x9e(e){return!!(e&&typeof e=="object")}const HB=document.createElement("i");function PI(e){const t="&"+e+";";HB.innerHTML=t;const n=HB.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Sc(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function pa(e,t){return e.length>0?(Sc(e,e.length,0,t),e):t}const VB={}.hasOwnProperty;function w9e(e){const t={};let n=-1;for(;++n<e.length;)v9e(t,e[n]);return t}function v9e(e,t){let n;for(n in t){const i=(VB.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){VB.call(i,o)||(i[o]=[]);const a=s[o];E9e(i[o],Array.isArray(a)?a:a?[a]:[])}}}function E9e(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Sc(e,0,0,r)}function rQ(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function bm(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fc=c0(/[A-Za-z]/),cl=c0(/[\dA-Za-z]/),k9e=c0(/[#-'*+\--9=?A-Z^-~]/);function CA(e){return e!==null&&(e<32||e===127)}const AA=c0(/\d/),S9e=c0(/[\dA-Fa-f]/),C9e=c0(/[!-/:-@[-`{-~]/);function kt(e){return e!==null&&e<-2}function fo(e){return e!==null&&(e<0||e===32)}function Un(e){return e===-2||e===-1||e===32}const A9e=c0(new RegExp("\\p{P}|\\p{S}","u")),M9e=c0(/\s/);function c0(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Wn(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Un(l)?(e.enter(n),a(l)):t(l)}function a(l){return Un(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const T9e={tokenize:I9e};function I9e(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Wn(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return kt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const N9e={tokenize:R9e},WB={tokenize:_9e};function R9e(e){const t=this,n=[];let r=0,i,s,o;return a;function a(E){if(r<n.length){const k=n[r];return t.containerState=k[1],e.attempt(k[0].continuation,l,f)(E)}return f(E)}function l(E){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const k=t.events.length;let M=k,S;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){S=t.events[M][1].end;break}x(r);let A=k;for(;A<t.events.length;)t.events[A][1].end={...S},A++;return Sc(t.events,M+1,0,t.events.slice(k)),t.events.length=A,f(E)}return a(E)}function f(E){if(r===n.length){if(!i)return u(E);if(i.currentConstruct&&i.currentConstruct.concrete)return g(E);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(WB,c,d)(E)}function c(E){return i&&v(),x(r),u(E)}function d(E){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(E)}function u(E){return t.containerState={},e.attempt(WB,h,g)(E)}function h(E){return r++,n.push([t.currentConstruct,t.containerState]),u(E)}function g(E){if(E===null){i&&v(),x(0),e.consume(E);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),y(E)}function y(E){if(E===null){U(e.exit("chunkFlow"),!0),x(0),e.consume(E);return}return kt(E)?(e.consume(E),U(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(E),y)}function U(E,k){const M=t.sliceStream(E);if(k&&M.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(M),t.parser.lazy[E.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const A=t.events.length;let I=A,R,P;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(R){P=t.events[I][1].end;break}R=!0}for(x(r),S=A;S<t.events.length;)t.events[S][1].end={...P},S++;Sc(t.events,I+1,0,t.events.slice(A)),t.events.length=S}}function x(E){let k=n.length;for(;k-- >E;){const M=n[k];t.containerState=M[1],M[0].exit.call(t,e)}n.length=E}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function _9e(e,t,n){return Wn(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function GB(e){if(e===null||fo(e)||M9e(e))return 1;if(A9e(e))return 2}function DI(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const MA={name:"attention",resolveAll:P9e,tokenize:D9e};function P9e(e,t){let n=-1,r,i,s,o,a,l,f,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},u={...e[n][1].start};XB(d,-l),XB(u,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:u},s={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[r][1].end={...o.start},e[n][1].start={...a.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=pa(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=pa(f,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),f=pa(f,DI(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=pa(f,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,f=pa(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Sc(e,r-1,n-r+3,f),n=r+f.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function D9e(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=GB(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const f=e.exit("attentionSequence"),c=GB(l),d=!c||c===2&&i||n.includes(l),u=!i||i===2&&c||n.includes(r);return f._open=!!(s===42?d:d&&(i||!u)),f._close=!!(s===42?u:u&&(c||!d)),t(l)}}function XB(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const L9e={name:"autolink",tokenize:O9e};function O9e(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return fc(h)?(e.consume(h),o):h===64?n(h):f(h)}function o(h){return h===43||h===45||h===46||cl(h)?(r=1,a(h)):f(h)}function a(h){return h===58?(e.consume(h),r=0,l):(h===43||h===45||h===46||cl(h))&&r++<32?(e.consume(h),a):(r=0,f(h))}function l(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||CA(h)?n(h):(e.consume(h),l)}function f(h){return h===64?(e.consume(h),c):k9e(h)?(e.consume(h),f):n(h)}function c(h){return cl(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):u(h)}function u(h){if((h===45||cl(h))&&r++<63){const g=h===45?u:d;return e.consume(h),g}return n(h)}}const bw={partial:!0,tokenize:j9e};function j9e(e,t,n){return r;function r(s){return Un(s)?Wn(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||kt(s)?t(s):n(s)}}const iQ={continuation:{tokenize:F9e},exit:z9e,name:"blockQuote",tokenize:B9e};function B9e(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Un(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function F9e(e,t,n){const r=this;return i;function i(o){return Un(o)?Wn(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(iQ,t,n)(o)}}function z9e(e){e.exit("blockQuote")}const sQ={name:"characterEscape",tokenize:$9e};function $9e(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return C9e(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const oQ={name:"characterReference",tokenize:H9e};function H9e(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),s=31,o=cl,c(d))}function f(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=S9e,c):(e.enter("characterReferenceValue"),s=7,o=AA,c(d))}function c(d){if(d===59&&i){const u=e.exit("characterReferenceValue");return o===cl&&!PI(r.sliceSerialize(u))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const KB={partial:!0,tokenize:W9e},YB={concrete:!0,name:"codeFenced",tokenize:V9e};function V9e(e,t,n){const r=this,i={partial:!0,tokenize:M};let s=0,o=0,a;return l;function l(S){return f(S)}function f(S){const A=r.events[r.events.length-1];return s=A&&A[1].type==="linePrefix"?A[2].sliceSerialize(A[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),Un(S)?Wn(e,d,"whitespace")(S):d(S))}function d(S){return S===null||kt(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(KB,y,k)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(S))}function u(S){return S===null||kt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(S)):Un(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Wn(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),u)}function h(S){return S===null||kt(S)?d(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||kt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(S)):S===96&&S===a?n(S):(e.consume(S),g)}function y(S){return e.attempt(i,k,U)(S)}function U(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),x}function x(S){return s>0&&Un(S)?Wn(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||kt(S)?e.check(KB,y,k)(S):(e.enter("codeFlowValue"),E(S))}function E(S){return S===null||kt(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),E)}function k(S){return e.exit("codeFenced"),t(S)}function M(S,A,I){let R=0;return P;function P(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),_}function _(F){return S.enter("codeFencedFence"),Un(F)?Wn(S,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(S.enter("codeFencedFenceSequence"),V(F)):I(F)}function V(F){return F===a?(R++,S.consume(F),V):R>=o?(S.exit("codeFencedFenceSequence"),Un(F)?Wn(S,j,"whitespace")(F):j(F)):I(F)}function j(F){return F===null||kt(F)?(S.exit("codeFencedFence"),A(F)):I(F)}}}function W9e(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const hk={name:"codeIndented",tokenize:X9e},G9e={partial:!0,tokenize:K9e};function X9e(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),Wn(e,s,"linePrefix",5)(f)}function s(f){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(f):n(f)}function o(f){return f===null?l(f):kt(f)?e.attempt(G9e,o,l)(f):(e.enter("codeFlowValue"),a(f))}function a(f){return f===null||kt(f)?(e.exit("codeFlowValue"),o(f)):(e.consume(f),a)}function l(f){return e.exit("codeIndented"),t(f)}}function K9e(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):kt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Wn(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):kt(o)?i(o):n(o)}}const Y9e={name:"codeText",previous:q9e,resolve:Z9e,tokenize:Q9e};function Z9e(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function q9e(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Q9e(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):kt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),f(d))}function f(d){return d===null||d===32||d===96||kt(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),f)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",f(d))}}class J9e{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&d5(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),d5(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),d5(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);d5(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);d5(this.left,n.reverse())}}}function d5(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function aQ(e){const t={};let n=-1,r,i,s,o,a,l,f;const c=new J9e(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,ewe(c,n)),n=t[n],f=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Sc(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!f}function ewe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],f={};let c,d,u=-1,h=n,g=0,y=0;const U=[y];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++u<a.length;)a[u][0]==="exit"&&a[u-1][0]==="enter"&&a[u][1].type===a[u-1][1].type&&a[u][1].start.line!==a[u][1].end.line&&(y=u+1,U.push(y),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):U.pop(),u=U.length;u--;){const x=a.slice(U[u],U[u+1]),v=s.pop();l.push([v,v+x.length-1]),e.splice(v,2,x)}for(l.reverse(),u=-1;++u<l.length;)f[g+l[u][0]]=g+l[u][1],g+=l[u][1]-l[u][0]-1;return f}const twe={resolve:rwe,tokenize:iwe},nwe={partial:!0,tokenize:swe};function rwe(e){return aQ(e),e}function iwe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):kt(a)?e.check(nwe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function swe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Wn(e,s,"linePrefix")}function s(o){if(o===null||kt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function lQ(e,t,n,r,i,s,o,a,l){const f=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(x){return x===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(x),e.exit(s),u):x===null||x===32||x===41||CA(x)?n(x):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),y(x))}function u(x){return x===62?(e.enter(s),e.consume(x),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===62?(e.exit("chunkString"),e.exit(a),u(x)):x===null||x===60||kt(x)?n(x):(e.consume(x),x===92?g:h)}function g(x){return x===60||x===62||x===92?(e.consume(x),h):h(x)}function y(x){return!c&&(x===null||x===41||fo(x))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(x)):c<f&&x===40?(e.consume(x),c++,y):x===41?(e.consume(x),c--,y):x===null||x===32||x===40||CA(x)?n(x):(e.consume(x),x===92?U:y)}function U(x){return x===40||x===41||x===92?(e.consume(x),y):y(x)}}function cQ(e,t,n,r,i,s){const o=this;let a=0,l;return f;function f(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):kt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||kt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),l||(l=!Un(h)),h===92?u:d)}function u(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function fQ(e,t,n,r,i,s){let o;return a;function a(u){return u===34||u===39||u===40?(e.enter(r),e.enter(i),e.consume(u),e.exit(i),o=u===40?41:u,l):n(u)}function l(u){return u===o?(e.enter(i),e.consume(u),e.exit(i),e.exit(r),t):(e.enter(s),f(u))}function f(u){return u===o?(e.exit(s),l(o)):u===null?n(u):kt(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Wn(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(u))}function c(u){return u===o||u===null||kt(u)?(e.exit("chunkString"),f(u)):(e.consume(u),u===92?d:c)}function d(u){return u===o||u===92?(e.consume(u),c):c(u)}}function b2(e,t){let n;return r;function r(i){return kt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Un(i)?Wn(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const owe={name:"definition",tokenize:lwe},awe={partial:!0,tokenize:cwe};function lwe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return cQ.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=bm(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),l):n(h)}function l(h){return fo(h)?b2(e,f)(h):f(h)}function f(h){return lQ(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(awe,d,d)(h)}function d(h){return Un(h)?Wn(e,u,"whitespace")(h):u(h)}function u(h){return h===null||kt(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function cwe(e,t,n){return r;function r(a){return fo(a)?b2(e,i)(a):n(a)}function i(a){return fQ(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Un(a)?Wn(e,o,"whitespace")(a):o(a)}function o(a){return a===null||kt(a)?t(a):n(a)}}const fwe={name:"hardBreakEscape",tokenize:dwe};function dwe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return kt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const uwe={name:"headingAtx",resolve:hwe,tokenize:pwe};function hwe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Sc(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function pwe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||fo(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||kt(c)?(e.exit("atxHeading"),t(c)):Un(c)?Wn(e,a,"whitespace")(c):(e.enter("atxHeadingText"),f(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function f(c){return c===null||c===35||fo(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),f)}}const mwe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ZB=["pre","script","style","textarea"],gwe={concrete:!0,name:"htmlFlow",resolveTo:Uwe,tokenize:xwe},bwe={partial:!0,tokenize:vwe},ywe={partial:!0,tokenize:wwe};function Uwe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function xwe(e,t,n){const r=this;let i,s,o,a,l;return f;function f(Y){return c(Y)}function c(Y){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Y),d}function d(Y){return Y===33?(e.consume(Y),u):Y===47?(e.consume(Y),s=!0,y):Y===63?(e.consume(Y),i=3,r.interrupt?t:B):fc(Y)?(e.consume(Y),o=String.fromCharCode(Y),U):n(Y)}function u(Y){return Y===45?(e.consume(Y),i=2,h):Y===91?(e.consume(Y),i=5,a=0,g):fc(Y)?(e.consume(Y),i=4,r.interrupt?t:B):n(Y)}function h(Y){return Y===45?(e.consume(Y),r.interrupt?t:B):n(Y)}function g(Y){const oe="CDATA[";return Y===oe.charCodeAt(a++)?(e.consume(Y),a===oe.length?r.interrupt?t:O:g):n(Y)}function y(Y){return fc(Y)?(e.consume(Y),o=String.fromCharCode(Y),U):n(Y)}function U(Y){if(Y===null||Y===47||Y===62||fo(Y)){const oe=Y===47,ge=o.toLowerCase();return!oe&&!s&&ZB.includes(ge)?(i=1,r.interrupt?t(Y):O(Y)):mwe.includes(o.toLowerCase())?(i=6,oe?(e.consume(Y),x):r.interrupt?t(Y):O(Y)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Y):s?v(Y):E(Y))}return Y===45||cl(Y)?(e.consume(Y),o+=String.fromCharCode(Y),U):n(Y)}function x(Y){return Y===62?(e.consume(Y),r.interrupt?t:O):n(Y)}function v(Y){return Un(Y)?(e.consume(Y),v):P(Y)}function E(Y){return Y===47?(e.consume(Y),P):Y===58||Y===95||fc(Y)?(e.consume(Y),k):Un(Y)?(e.consume(Y),E):P(Y)}function k(Y){return Y===45||Y===46||Y===58||Y===95||cl(Y)?(e.consume(Y),k):M(Y)}function M(Y){return Y===61?(e.consume(Y),S):Un(Y)?(e.consume(Y),M):E(Y)}function S(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(e.consume(Y),l=Y,A):Un(Y)?(e.consume(Y),S):I(Y)}function A(Y){return Y===l?(e.consume(Y),l=null,R):Y===null||kt(Y)?n(Y):(e.consume(Y),A)}function I(Y){return Y===null||Y===34||Y===39||Y===47||Y===60||Y===61||Y===62||Y===96||fo(Y)?M(Y):(e.consume(Y),I)}function R(Y){return Y===47||Y===62||Un(Y)?E(Y):n(Y)}function P(Y){return Y===62?(e.consume(Y),_):n(Y)}function _(Y){return Y===null||kt(Y)?O(Y):Un(Y)?(e.consume(Y),_):n(Y)}function O(Y){return Y===45&&i===2?(e.consume(Y),z):Y===60&&i===1?(e.consume(Y),H):Y===62&&i===4?(e.consume(Y),X):Y===63&&i===3?(e.consume(Y),B):Y===93&&i===5?(e.consume(Y),W):kt(Y)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(bwe,q,V)(Y)):Y===null||kt(Y)?(e.exit("htmlFlowData"),V(Y)):(e.consume(Y),O)}function V(Y){return e.check(ywe,j,q)(Y)}function j(Y){return e.enter("lineEnding"),e.consume(Y),e.exit("lineEnding"),F}function F(Y){return Y===null||kt(Y)?V(Y):(e.enter("htmlFlowData"),O(Y))}function z(Y){return Y===45?(e.consume(Y),B):O(Y)}function H(Y){return Y===47?(e.consume(Y),o="",G):O(Y)}function G(Y){if(Y===62){const oe=o.toLowerCase();return ZB.includes(oe)?(e.consume(Y),X):O(Y)}return fc(Y)&&o.length<8?(e.consume(Y),o+=String.fromCharCode(Y),G):O(Y)}function W(Y){return Y===93?(e.consume(Y),B):O(Y)}function B(Y){return Y===62?(e.consume(Y),X):Y===45&&i===2?(e.consume(Y),B):O(Y)}function X(Y){return Y===null||kt(Y)?(e.exit("htmlFlowData"),q(Y)):(e.consume(Y),X)}function q(Y){return e.exit("htmlFlow"),t(Y)}}function wwe(e,t,n){const r=this;return i;function i(o){return kt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function vwe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(bw,t,n)}}const Ewe={name:"htmlText",tokenize:kwe};function kwe(e,t,n){const r=this;let i,s,o;return a;function a(B){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(B),l}function l(B){return B===33?(e.consume(B),f):B===47?(e.consume(B),M):B===63?(e.consume(B),E):fc(B)?(e.consume(B),I):n(B)}function f(B){return B===45?(e.consume(B),c):B===91?(e.consume(B),s=0,g):fc(B)?(e.consume(B),v):n(B)}function c(B){return B===45?(e.consume(B),h):n(B)}function d(B){return B===null?n(B):B===45?(e.consume(B),u):kt(B)?(o=d,H(B)):(e.consume(B),d)}function u(B){return B===45?(e.consume(B),h):d(B)}function h(B){return B===62?z(B):B===45?u(B):d(B)}function g(B){const X="CDATA[";return B===X.charCodeAt(s++)?(e.consume(B),s===X.length?y:g):n(B)}function y(B){return B===null?n(B):B===93?(e.consume(B),U):kt(B)?(o=y,H(B)):(e.consume(B),y)}function U(B){return B===93?(e.consume(B),x):y(B)}function x(B){return B===62?z(B):B===93?(e.consume(B),x):y(B)}function v(B){return B===null||B===62?z(B):kt(B)?(o=v,H(B)):(e.consume(B),v)}function E(B){return B===null?n(B):B===63?(e.consume(B),k):kt(B)?(o=E,H(B)):(e.consume(B),E)}function k(B){return B===62?z(B):E(B)}function M(B){return fc(B)?(e.consume(B),S):n(B)}function S(B){return B===45||cl(B)?(e.consume(B),S):A(B)}function A(B){return kt(B)?(o=A,H(B)):Un(B)?(e.consume(B),A):z(B)}function I(B){return B===45||cl(B)?(e.consume(B),I):B===47||B===62||fo(B)?R(B):n(B)}function R(B){return B===47?(e.consume(B),z):B===58||B===95||fc(B)?(e.consume(B),P):kt(B)?(o=R,H(B)):Un(B)?(e.consume(B),R):z(B)}function P(B){return B===45||B===46||B===58||B===95||cl(B)?(e.consume(B),P):_(B)}function _(B){return B===61?(e.consume(B),O):kt(B)?(o=_,H(B)):Un(B)?(e.consume(B),_):R(B)}function O(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),i=B,V):kt(B)?(o=O,H(B)):Un(B)?(e.consume(B),O):(e.consume(B),j)}function V(B){return B===i?(e.consume(B),i=void 0,F):B===null?n(B):kt(B)?(o=V,H(B)):(e.consume(B),V)}function j(B){return B===null||B===34||B===39||B===60||B===61||B===96?n(B):B===47||B===62||fo(B)?R(B):(e.consume(B),j)}function F(B){return B===47||B===62||fo(B)?R(B):n(B)}function z(B){return B===62?(e.consume(B),e.exit("htmlTextData"),e.exit("htmlText"),t):n(B)}function H(B){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),G}function G(B){return Un(B)?Wn(e,W,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):W(B)}function W(B){return e.enter("htmlTextData"),o(B)}}const LI={name:"labelEnd",resolveAll:Mwe,resolveTo:Twe,tokenize:Iwe},Swe={tokenize:Nwe},Cwe={tokenize:Rwe},Awe={tokenize:_we};function Mwe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Sc(e,0,e.length,n),e}function Twe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},c={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return a=[["enter",l,t],["enter",f,t]],a=pa(a,e.slice(s+1,s+r+3)),a=pa(a,[["enter",c,t]]),a=pa(a,DI(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=pa(a,[["exit",c,t],e[o-2],e[o-1],["exit",f,t]]),a=pa(a,e.slice(o+1)),a=pa(a,[["exit",l,t]]),Sc(e,s,e.length,a),e}function Iwe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(u){return s?s._inactive?d(u):(o=r.parser.defined.includes(bm(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelEnd"),l):n(u)}function l(u){return u===40?e.attempt(Swe,c,o?c:d)(u):u===91?e.attempt(Cwe,c,o?f:d)(u):o?c(u):d(u)}function f(u){return e.attempt(Awe,c,d)(u)}function c(u){return t(u)}function d(u){return s._balanced=!0,n(u)}}function Nwe(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return fo(d)?b2(e,s)(d):s(d)}function s(d){return d===41?c(d):lQ(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return fo(d)?b2(e,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?fQ(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function f(d){return fo(d)?b2(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function Rwe(e,t,n){const r=this;return i;function i(a){return cQ.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(bm(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function _we(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Pwe={name:"labelStartImage",resolveAll:LI.resolveAll,tokenize:Dwe};function Dwe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Lwe={name:"labelStartLink",resolveAll:LI.resolveAll,tokenize:Owe};function Owe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const pk={name:"lineEnding",tokenize:jwe};function jwe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Wn(e,t,"linePrefix")}}const A3={name:"thematicBreak",tokenize:Bwe};function Bwe(e,t,n){let r=0,i;return s;function s(f){return e.enter("thematicBreak"),o(f)}function o(f){return i=f,a(f)}function a(f){return f===i?(e.enter("thematicBreakSequence"),l(f)):r>=3&&(f===null||kt(f))?(e.exit("thematicBreak"),t(f)):n(f)}function l(f){return f===i?(e.consume(f),r++,l):(e.exit("thematicBreakSequence"),Un(f)?Wn(e,a,"whitespace")(f):a(f))}}const Ys={continuation:{tokenize:Hwe},exit:Wwe,name:"list",tokenize:$we},Fwe={partial:!0,tokenize:Gwe},zwe={partial:!0,tokenize:Vwe};function $we(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const g=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:AA(h)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(A3,n,f)(h):f(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(h)}return n(h)}function l(h){return AA(h)&&++o<10?(e.consume(h),l):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),f(h)):n(h)}function f(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(bw,r.interrupt?n:c,e.attempt(Fwe,u,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,u(h)}function d(h){return Un(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),u):n(h)}function u(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Hwe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(bw,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Wn(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Un(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(zwe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Wn(e,e.attempt(Ys,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Vwe(e,t,n){const r=this;return Wn(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Wwe(e){e.exit(this.containerState.type)}function Gwe(e,t,n){const r=this;return Wn(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Un(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const qB={name:"setextUnderline",resolveTo:Xwe,tokenize:Kwe};function Xwe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Kwe(e,t,n){const r=this;let i;return s;function s(f){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=f,o(f)):n(f)}function o(f){return e.enter("setextHeadingLineSequence"),a(f)}function a(f){return f===i?(e.consume(f),a):(e.exit("setextHeadingLineSequence"),Un(f)?Wn(e,l,"lineSuffix")(f):l(f))}function l(f){return f===null||kt(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const Ywe={tokenize:Zwe};function Zwe(e){const t=this,n=e.attempt(bw,r,e.attempt(this.parser.constructs.flowInitial,i,Wn(e,e.attempt(this.parser.constructs.flow,i,e.attempt(twe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const qwe={resolveAll:uQ()},Qwe=dQ("string"),Jwe=dQ("text");function dQ(e){return{resolveAll:uQ(e==="text"?e7e:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return f(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return f(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function f(c){if(c===null)return!0;const d=i[c];let u=-1;if(d)for(;++u<d.length;){const h=d[u];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function uQ(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function e7e(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const f=i[s];if(typeof f=="string"){for(o=f.length;f.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(f===-2)l=!0,a++;else if(f!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const f={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const t7e={42:Ys,43:Ys,45:Ys,48:Ys,49:Ys,50:Ys,51:Ys,52:Ys,53:Ys,54:Ys,55:Ys,56:Ys,57:Ys,62:iQ},n7e={91:owe},r7e={[-2]:hk,[-1]:hk,32:hk},i7e={35:uwe,42:A3,45:[qB,A3],60:gwe,61:qB,95:A3,96:YB,126:YB},s7e={38:oQ,92:sQ},o7e={[-5]:pk,[-4]:pk,[-3]:pk,33:Pwe,38:oQ,42:MA,60:[L9e,Ewe],91:Lwe,92:[fwe,sQ],93:LI,95:MA,96:Y9e},a7e={null:[MA,qwe]},l7e={null:[42,95]},c7e={null:[]},f7e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:l7e,contentInitial:n7e,disable:c7e,document:t7e,flow:i7e,flowInitial:r7e,insideSpan:a7e,string:s7e,text:o7e},Symbol.toStringTag,{value:"Module"}));function d7e(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:A(M),check:A(S),consume:v,enter:E,exit:k,interrupt:A(S,{interrupt:!0})},f={code:null,containerState:{},defineSkip:y,events:[],now:g,parser:e,previous:null,sliceSerialize:u,sliceStream:h,write:d};let c=t.tokenize.call(f,l);return t.resolveAll&&s.push(t),f;function d(_){return o=pa(o,_),U(),o[o.length-1]!==null?[]:(I(t,0),f.events=DI(s,f.events,f),f.events)}function u(_,O){return h7e(h(_),O)}function h(_){return u7e(o,_)}function g(){const{_bufferIndex:_,_index:O,line:V,column:j,offset:F}=r;return{_bufferIndex:_,_index:O,line:V,column:j,offset:F}}function y(_){i[_.line]=_.column,P()}function U(){let _;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(_=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===_&&r._bufferIndex<O.length;)x(O.charCodeAt(r._bufferIndex));else x(O)}}function x(_){c=c(_)}function v(_){kt(_)?(r.line++,r.column=1,r.offset+=_===-3?2:1,P()):_!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=_}function E(_,O){const V=O||{};return V.type=_,V.start=g(),f.events.push(["enter",V,f]),a.push(V),V}function k(_){const O=a.pop();return O.end=g(),f.events.push(["exit",O,f]),O}function M(_,O){I(_,O.from)}function S(_,O){O.restore()}function A(_,O){return V;function V(j,F,z){let H,G,W,B;return Array.isArray(j)?q(j):"tokenize"in j?q([j]):X(j);function X(he){return ce;function ce(ie){const we=ie!==null&&he[ie],ke=ie!==null&&he.null,Re=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(ke)?ke:ke?[ke]:[]];return q(Re)(ie)}}function q(he){return H=he,G=0,he.length===0?z:Y(he[G])}function Y(he){return ce;function ce(ie){return B=R(),W=he,he.partial||(f.currentConstruct=he),he.name&&f.parser.constructs.disable.null.includes(he.name)?ge():he.tokenize.call(O?Object.assign(Object.create(f),O):f,l,oe,ge)(ie)}}function oe(he){return _(W,B),F}function ge(he){return B.restore(),++G<H.length?Y(H[G]):z}}}function I(_,O){_.resolveAll&&!s.includes(_)&&s.push(_),_.resolve&&Sc(f.events,O,f.events.length-O,_.resolve(f.events.slice(O),f)),_.resolveTo&&(f.events=_.resolveTo(f.events,f))}function R(){const _=g(),O=f.previous,V=f.currentConstruct,j=f.events.length,F=Array.from(a);return{from:j,restore:z};function z(){r=_,f.previous=O,f.currentConstruct=V,f.events.length=j,a=F,P()}}function P(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function u7e(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function h7e(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function p7e(e){const r={constructs:w9e([f7e,...(e||{}).extensions||[]]),content:i(T9e),defined:[],document:i(N9e),flow:i(Ywe),lazy:{},string:i(Qwe),text:i(Jwe)};return r;function i(s){return o;function o(a){return d7e(r,s,a)}}}function m7e(e){for(;!aQ(e););return e}const QB=/[\0\t\n\r]/g;function g7e(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let f,c,d,u,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(QB.lastIndex=d,f=QB.exec(s),u=f&&f.index!==void 0?f.index:s.length,h=s.charCodeAt(u),!f){t=s.slice(d);break}if(h===10&&d===u&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<u&&(l.push(s.slice(d,u)),e+=u-d),h){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=u+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const b7e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function y7e(e){return e.replace(b7e,U7e)}function U7e(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return rQ(n.slice(s?2:1),s?16:10)}return PI(n)||e}function M3(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?JB(e.position):"start"in e||"end"in e?JB(e):"line"in e||"column"in e?TA(e):""}function TA(e){return eF(e&&e.line)+":"+eF(e&&e.column)}function JB(e){return TA(e&&e.start)+"-"+TA(e&&e.end)}function eF(e){return e&&typeof e=="number"?e:1}const hQ={}.hasOwnProperty;function x7e(e,t,n){return t&&typeof t=="object"&&(n=t,t=void 0),w7e(n)(m7e(p7e(n).document().write(g7e()(e,t,!0))))}function w7e(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(xn),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(Le),blockQuote:s(ke),characterEscape:R,characterReference:R,codeFenced:s(Re),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Re,o),codeText:s(Fe,o),codeTextData:R,data:R,codeFlowValue:R,definition:s($e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ve),hardBreakEscape:s(Ae),hardBreakTrailing:s(Ae),htmlFlow:s(ct,o),htmlFlowData:R,htmlText:s(ct,o),htmlTextData:R,image:s(jt),label:o,link:s(xn),listItem:s(Sn),listItemValue:u,listOrdered:s(Wt,d),listUnordered:s(Wt),paragraph:s(Ki),reference:Y,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Le),strong:s(Dr),thematicBreak:s(ys)},exit:{atxHeading:l(),atxHeadingSequence:M,autolink:l(),autolinkEmail:we,autolinkProtocol:ie,blockQuote:l(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:he,characterReference:ce,codeFenced:l(U),codeFencedFence:y,codeFencedFenceInfo:h,codeFencedFenceMeta:g,codeFlowValue:P,codeIndented:l(x),codeText:l(F),codeTextData:P,data:P,definition:l(),definitionDestinationString:k,definitionLabelString:v,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(O),hardBreakTrailing:l(O),htmlFlow:l(V),htmlFlowData:P,htmlText:l(j),htmlTextData:P,image:l(H),label:W,labelText:G,lineEnding:_,link:l(z),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:oe,resourceDestinationString:B,resourceTitleString:X,resource:q,setextHeading:l(I),setextHeadingLineSequence:A,setextHeadingText:S,strong:l(),thematicBreak:l()}};pQ(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(xe){let Pe={type:"root",children:[]};const dt={stack:[Pe],tokenStack:[],config:t,enter:a,exit:f,buffer:o,resume:c,data:n},It=[];let Rt=-1;for(;++Rt<xe.length;)if(xe[Rt][1].type==="listOrdered"||xe[Rt][1].type==="listUnordered")if(xe[Rt][0]==="enter")It.push(Rt);else{const fn=It.pop();Rt=i(xe,fn,Rt)}for(Rt=-1;++Rt<xe.length;){const fn=t[xe[Rt][0]];hQ.call(fn,xe[Rt][1].type)&&fn[xe[Rt][1].type].call(Object.assign({sliceSerialize:xe[Rt][2].sliceSerialize},dt),xe[Rt][1])}if(dt.tokenStack.length>0){const fn=dt.tokenStack[dt.tokenStack.length-1];(fn[1]||tF).call(dt,void 0,fn[0])}for(Pe.position={start:$d(xe.length>0?xe[0][1].start:{line:1,column:1,offset:0}),end:$d(xe.length>0?xe[xe.length-2][1].end:{line:1,column:1,offset:0})},Rt=-1;++Rt<t.transforms.length;)Pe=t.transforms[Rt](Pe)||Pe;return Pe}function i(xe,Pe,dt){let It=Pe-1,Rt=-1,fn=!1,Jn,Gt,Zt,dr;for(;++It<=dt;){const wn=xe[It];switch(wn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{wn[0]==="enter"?Rt++:Rt--,dr=void 0;break}case"lineEndingBlank":{wn[0]==="enter"&&(Jn&&!dr&&!Rt&&!Zt&&(Zt=It),dr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:dr=void 0}if(!Rt&&wn[0]==="enter"&&wn[1].type==="listItemPrefix"||Rt===-1&&wn[0]==="exit"&&(wn[1].type==="listUnordered"||wn[1].type==="listOrdered")){if(Jn){let Sr=It;for(Gt=void 0;Sr--;){const Wr=xe[Sr];if(Wr[1].type==="lineEnding"||Wr[1].type==="lineEndingBlank"){if(Wr[0]==="exit")continue;Gt&&(xe[Gt][1].type="lineEndingBlank",fn=!0),Wr[1].type="lineEnding",Gt=Sr}else if(!(Wr[1].type==="linePrefix"||Wr[1].type==="blockQuotePrefix"||Wr[1].type==="blockQuotePrefixWhitespace"||Wr[1].type==="blockQuoteMarker"||Wr[1].type==="listItemIndent"))break}Zt&&(!Gt||Zt<Gt)&&(Jn._spread=!0),Jn.end=Object.assign({},Gt?xe[Gt][1].start:wn[1].end),xe.splice(Gt||It,0,["exit",Jn,wn[2]]),It++,dt++}if(wn[1].type==="listItemPrefix"){const Sr={type:"listItem",_spread:!1,start:Object.assign({},wn[1].start),end:void 0};Jn=Sr,xe.splice(It,0,["enter",Sr,wn[2]]),It++,dt++,Zt=void 0,dr=!0}}}return xe[Pe][1]._spread=fn,dt}function s(xe,Pe){return dt;function dt(It){a.call(this,xe(It),It),Pe&&Pe.call(this,It)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(xe,Pe,dt){this.stack[this.stack.length-1].children.push(xe),this.stack.push(xe),this.tokenStack.push([Pe,dt||void 0]),xe.position={start:$d(Pe.start),end:void 0}}function l(xe){return Pe;function Pe(dt){xe&&xe.call(this,dt),f.call(this,dt)}}function f(xe,Pe){const dt=this.stack.pop(),It=this.tokenStack.pop();if(It)It[0].type!==xe.type&&(Pe?Pe.call(this,xe,It[0]):(It[1]||tF).call(this,xe,It[0]));else throw new Error("Cannot close `"+xe.type+"` ("+M3({start:xe.start,end:xe.end})+"): its not open");dt.position.end=$d(xe.end)}function c(){return U9e(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function u(xe){if(this.data.expectingFirstListItemValue){const Pe=this.stack[this.stack.length-2];Pe.start=Number.parseInt(this.sliceSerialize(xe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.lang=xe}function g(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.meta=xe}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function U(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.value=xe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.value=xe.replace(/(\r?\n|\r)$/g,"")}function v(xe){const Pe=this.resume(),dt=this.stack[this.stack.length-1];dt.label=Pe,dt.identifier=bm(this.sliceSerialize(xe)).toLowerCase()}function E(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.title=xe}function k(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.url=xe}function M(xe){const Pe=this.stack[this.stack.length-1];if(!Pe.depth){const dt=this.sliceSerialize(xe).length;Pe.depth=dt}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function A(xe){const Pe=this.stack[this.stack.length-1];Pe.depth=this.sliceSerialize(xe).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function R(xe){const dt=this.stack[this.stack.length-1].children;let It=dt[dt.length-1];(!It||It.type!=="text")&&(It=ii(),It.position={start:$d(xe.start),end:void 0},dt.push(It)),this.stack.push(It)}function P(xe){const Pe=this.stack.pop();Pe.value+=this.sliceSerialize(xe),Pe.position.end=$d(xe.end)}function _(xe){const Pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const dt=Pe.children[Pe.children.length-1];dt.position.end=$d(xe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Pe.type)&&(R.call(this,xe),P.call(this,xe))}function O(){this.data.atHardBreak=!0}function V(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.value=xe}function j(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.value=xe}function F(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.value=xe}function z(){const xe=this.stack[this.stack.length-1];if(this.data.inReference){const Pe=this.data.referenceType||"shortcut";xe.type+="Reference",xe.referenceType=Pe,delete xe.url,delete xe.title}else delete xe.identifier,delete xe.label;this.data.referenceType=void 0}function H(){const xe=this.stack[this.stack.length-1];if(this.data.inReference){const Pe=this.data.referenceType||"shortcut";xe.type+="Reference",xe.referenceType=Pe,delete xe.url,delete xe.title}else delete xe.identifier,delete xe.label;this.data.referenceType=void 0}function G(xe){const Pe=this.sliceSerialize(xe),dt=this.stack[this.stack.length-2];dt.label=y7e(Pe),dt.identifier=bm(Pe).toLowerCase()}function W(){const xe=this.stack[this.stack.length-1],Pe=this.resume(),dt=this.stack[this.stack.length-1];if(this.data.inReference=!0,dt.type==="link"){const It=xe.children;dt.children=It}else dt.alt=Pe}function B(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.url=xe}function X(){const xe=this.resume(),Pe=this.stack[this.stack.length-1];Pe.title=xe}function q(){this.data.inReference=void 0}function Y(){this.data.referenceType="collapsed"}function oe(xe){const Pe=this.resume(),dt=this.stack[this.stack.length-1];dt.label=Pe,dt.identifier=bm(this.sliceSerialize(xe)).toLowerCase(),this.data.referenceType="full"}function ge(xe){this.data.characterReferenceType=xe.type}function he(xe){const Pe=this.sliceSerialize(xe),dt=this.data.characterReferenceType;let It;dt?(It=rQ(Pe,dt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):It=PI(Pe);const Rt=this.stack[this.stack.length-1];Rt.value+=It}function ce(xe){const Pe=this.stack.pop();Pe.position.end=$d(xe.end)}function ie(xe){P.call(this,xe);const Pe=this.stack[this.stack.length-1];Pe.url=this.sliceSerialize(xe)}function we(xe){P.call(this,xe);const Pe=this.stack[this.stack.length-1];Pe.url="mailto:"+this.sliceSerialize(xe)}function ke(){return{type:"blockquote",children:[]}}function Re(){return{type:"code",lang:null,meta:null,value:""}}function Fe(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ve(){return{type:"emphasis",children:[]}}function Le(){return{type:"heading",depth:0,children:[]}}function Ae(){return{type:"break"}}function ct(){return{type:"html",value:""}}function jt(){return{type:"image",title:null,url:"",alt:null}}function xn(){return{type:"link",title:null,url:"",children:[]}}function Wt(xe){return{type:"list",ordered:xe.type==="listOrdered",start:null,spread:xe._spread,children:[]}}function Sn(xe){return{type:"listItem",spread:xe._spread,checked:null,children:[]}}function Ki(){return{type:"paragraph",children:[]}}function Dr(){return{type:"strong",children:[]}}function ii(){return{type:"text",value:""}}function ys(){return{type:"thematicBreak"}}}function $d(e){return{line:e.line,column:e.column,offset:e.offset}}function pQ(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?pQ(e,r):v7e(e,r)}}function v7e(e,t){let n;for(n in t)if(hQ.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function tF(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+M3({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+M3({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+M3({start:t.start,end:t.end})+") is still open")}function E7e(e){const t=this;t.parser=n;function n(r){return x7e(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function k7e(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function S7e(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function C7e(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function A7e(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function M7e(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const nF=T7e(/[\dA-Za-z]/);function T7e(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function n6(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&nF(e.charCodeAt(n+1))&&nF(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function I7e(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=n6(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const f={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,f),e.applyData(t,f)}function N7e(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function R7e(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function mQ(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function _7e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return mQ(e,t);const i={src:n6(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function P7e(e,t){const n={src:n6(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function D7e(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function L7e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return mQ(e,t);const i={href:n6(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function O7e(e,t){const n={href:n6(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function j7e(e,t,n){const r=e.all(t),i=n?B7e(n):gQ(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,f),e.applyData(t,f)}function B7e(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=gQ(n[r])}return t}function gQ(e){const t=e.spread;return t??e.children.length>1}function F7e(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function z7e(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $7e(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function H7e(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function V7e(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=II(t.children[1]),l=Zq(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function W7e(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const f=[];for(;++l<a;){const d=t.children[l],u={},h=o?o[l]:void 0;h&&(u.align=h);let g={type:"element",tagName:s,properties:u,children:[]};d&&(g.children=e.all(d),e.patch(d,g),g=e.applyData(d,g)),f.push(g)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,c),e.applyData(t,c)}function G7e(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const rF=9,iF=32;function X7e(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(sF(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(sF(t.slice(i),i>0,!1)),s.join("")}function sF(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===rF||s===iF;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===rF||s===iF;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function K7e(e,t){const n={type:"text",value:X7e(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Y7e(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Z7e={blockquote:k7e,break:S7e,code:C7e,delete:A7e,emphasis:M7e,footnoteReference:I7e,heading:N7e,html:R7e,imageReference:_7e,image:P7e,inlineCode:D7e,linkReference:L7e,link:O7e,listItem:j7e,list:F7e,paragraph:z7e,root:$7e,strong:H7e,table:V7e,tableCell:G7e,tableRow:W7e,text:K7e,thematicBreak:Y7e,toml:AU,yaml:AU,definition:AU,footnoteDefinition:AU};function AU(){}const bQ=-1,yw=0,y2=1,v4=2,OI=3,jI=4,BI=5,FI=6,yQ=7,UQ=8,oF=typeof self=="object"?self:globalThis,q7e=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case yw:case bQ:return n(o,i);case y2:{const a=n([],i);for(const l of o)a.push(r(l));return a}case v4:{const a=n({},i);for(const[l,f]of o)a[r(l)]=r(f);return a}case OI:return n(new Date(o),i);case jI:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case BI:{const a=n(new Map,i);for(const[l,f]of o)a.set(r(l),r(f));return a}case FI:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case yQ:{const{name:a,message:l}=o;return n(new oF[a](l),i)}case UQ:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new oF[s](o),i)};return r},aF=e=>q7e(new Map,e)(0),yp="",{toString:Q7e}={},{keys:J7e}=Object,u5=e=>{const t=typeof e;if(t!=="object"||!e)return[yw,t];const n=Q7e.call(e).slice(8,-1);switch(n){case"Array":return[y2,yp];case"Object":return[v4,yp];case"Date":return[OI,yp];case"RegExp":return[jI,yp];case"Map":return[BI,yp];case"Set":return[FI,yp];case"DataView":return[y2,n]}return n.includes("Array")?[y2,n]:n.includes("Error")?[yQ,n]:[v4,n]},MU=([e,t])=>e===yw&&(t==="function"||t==="symbol"),eve=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=u5(o);switch(a){case yw:{let c=o;switch(l){case"bigint":a=UQ,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([bQ],o)}return i([a,c],o)}case y2:{if(l){let u=o;return l==="DataView"?u=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(u=new Uint8Array(o)),i([l,[...u]],o)}const c=[],d=i([a,c],o);for(const u of o)c.push(s(u));return d}case v4:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const u of J7e(o))(e||!MU(u5(o[u])))&&c.push([s(u),s(o[u])]);return d}case OI:return i([a,o.toISOString()],o);case jI:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case BI:{const c=[],d=i([a,c],o);for(const[u,h]of o)(e||!(MU(u5(u))||MU(u5(h))))&&c.push([s(u),s(h)]);return d}case FI:{const c=[],d=i([a,c],o);for(const u of o)(e||!MU(u5(u)))&&c.push(s(u));return d}}const{message:f}=o;return i([a,{name:l,message:f}],o)};return s},lF=(e,{json:t,lossy:n}={})=>{const r=[];return eve(!(t||n),!!t,new Map,r)(e),r},E4=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?aF(lF(e,t)):structuredClone(e):(e,t)=>aF(lF(e,t));function tve(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function nve(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function rve(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||tve,r=e.options.footnoteBackLabel||nve,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[l]);if(!f)continue;const c=e.all(f),d=String(f.identifier).toUpperCase(),u=n6(d.toLowerCase());let h=0;const g=[],y=e.footnoteCounts.get(d);for(;y!==void 0&&++h<=y;){g.length>0&&g.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,h);typeof v=="string"&&(v={type:"text",value:v}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+u+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const U=c[c.length-1];if(U&&U.type==="element"&&U.tagName==="p"){const v=U.children[U.children.length-1];v&&v.type==="text"?v.value+=" ":U.children.push({type:"text",value:" "}),U.children.push(...g)}else c.push(...g);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+u},children:e.wrap(c,!0)};e.patch(f,x),a.push(x)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...E4(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const xQ=function(e){if(e==null)return ave;if(typeof e=="function")return Uw(e);if(typeof e=="object")return Array.isArray(e)?ive(e):sve(e);if(typeof e=="string")return ove(e);throw new Error("Expected function, string, or object as test")};function ive(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=xQ(e[n]);return Uw(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function sve(e){const t=e;return Uw(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function ove(e){return Uw(t);function t(n){return n&&n.type===e}}function Uw(e){return t;function t(n,r,i){return!!(lve(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function ave(){return!0}function lve(e){return e!==null&&typeof e=="object"&&"type"in e}const wQ=[],cve=!0,cF=!1,fve="skip";function dve(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=xQ(i),o=r?-1:1;a(e,void 0,[])();function a(l,f,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(u,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return u;function u(){let h=wQ,g,y,U;if((!t||s(l,f,c[c.length-1]||void 0))&&(h=uve(n(l,c)),h[0]===cF))return h;if("children"in l&&l.children){const x=l;if(x.children&&h[0]!==fve)for(y=(r?x.children.length:-1)+o,U=c.concat(x);y>-1&&y<x.children.length;){const v=x.children[y];if(g=a(v,y,U)(),g[0]===cF)return g;y=typeof g[1]=="number"?g[1]:y+o}}return h}}}function uve(e){return Array.isArray(e)?e:typeof e=="number"?[cve,e]:e==null?wQ:[e]}function vQ(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),dve(e,s,a,i);function a(l,f){const c=f[f.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const IA={}.hasOwnProperty,hve={};function pve(e,t){const n=t||hve,r=new Map,i=new Map,s=new Map,o={...Z7e,...n.handlers},a={all:f,applyData:gve,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:mve,wrap:yve};return vQ(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,u=String(c.identifier).toUpperCase();d.has(u)||d.set(u,c)}}),a;function l(c,d){const u=c.type,h=a.handlers[u];if(IA.call(a.handlers,u)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(u)){if("children"in c){const{children:y,...U}=c,x=E4(U);return x.children=a.all(c),x}return E4(c)}return(a.options.unknownHandler||bve)(a,c,d)}function f(c){const d=[];if("children"in c){const u=c.children;let h=-1;for(;++h<u.length;){const g=a.one(u[h],c);if(g){if(h&&u[h-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=fF(g.value)),!Array.isArray(g)&&g.type==="element")){const y=g.children[0];y&&y.type==="text"&&(y.value=fF(y.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function mve(e,t){e.position&&(t.position=Z4e(e))}function gve(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,E4(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function bve(e,t){const n=t.data||{},r="value"in t&&!(IA.call(n,"hProperties")||IA.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function yve(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function fF(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function dF(e,t){const n=pve(e,t),r=n.one(e,void 0),i=rve(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Uve(e,t){return e&&"run"in e?async function(n,r){const i=dF(n,{file:r,...t});await e.run(i,r)}:function(n,r){return dF(n,{file:r,...e||t})}}function uF(e){if(e)throw e}var mk,hF;function xve(){if(hF)return mk;hF=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},s=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var c=e.call(f,"constructor"),d=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!c&&!d)return!1;var u;for(u in f);return typeof u>"u"||e.call(f,u)},o=function(f,c){n&&c.name==="__proto__"?n(f,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):f[c.name]=c.newValue},a=function(f,c){if(c==="__proto__")if(e.call(f,c)){if(r)return r(f,c).value}else return;return f[c]};return mk=function l(){var f,c,d,u,h,g,y=arguments[0],U=1,x=arguments.length,v=!1;for(typeof y=="boolean"&&(v=y,y=arguments[1]||{},U=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});U<x;++U)if(f=arguments[U],f!=null)for(c in f)d=a(y,c),u=a(f,c),y!==u&&(v&&u&&(s(u)||(h=i(u)))?(h?(h=!1,g=d&&i(d)?d:[]):g=d&&s(d)?d:{},o(y,{name:c,newValue:l(v,g,u)})):typeof u<"u"&&o(y,{name:c,newValue:u}));return y},mk}var wve=xve();const gk=Ia(wve);function NA(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function vve(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...f){const c=e[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(f[d]===null||f[d]===void 0)&&(f[d]=i[d]);i=f,c?Eve(c,a)(...f):o(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Eve(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(f){const c=f;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Gl={basename:kve,dirname:Sve,extname:Cve,join:Ave,sep:"/"};function kve(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');xy(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Sve(e){if(xy(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Cve(e){xy(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Ave(...e){let t=-1,n;for(;++t<e.length;)xy(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Mve(n)}function Mve(e){xy(e);const t=e.codePointAt(0)===47;let n=Tve(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Tve(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function xy(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ive={cwd:Nve};function Nve(){return"/"}function RA(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Rve(e){if(typeof e=="string")e=new URL(e);else if(!RA(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return _ve(e)}function _ve(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const bk=["history","path","basename","stem","extname","dirname"];class EQ{constructor(t){let n;t?RA(t)?n={path:t}:typeof t=="string"||Pve(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Ive.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<bk.length;){const s=bk[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)bk.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Gl.basename(this.path):void 0}set basename(t){Uk(t,"basename"),yk(t,"basename"),this.path=Gl.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Gl.dirname(this.path):void 0}set dirname(t){pF(this.basename,"dirname"),this.path=Gl.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Gl.extname(this.path):void 0}set extname(t){if(yk(t,"extname"),pF(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gl.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){RA(t)&&(t=Rve(t)),Uk(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Gl.basename(this.path,this.extname):void 0}set stem(t){Uk(t,"stem"),yk(t,"stem"),this.path=Gl.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new gs(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function yk(e,t){if(e&&e.includes(Gl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Gl.sep+"`")}function Uk(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function pF(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Pve(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Dve=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Lve={}.hasOwnProperty;class zI extends Dve{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=vve()}copy(){const t=new zI;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(gk(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(vk("data",this.frozen),this.namespace[t]=n,this):Lve.call(this.namespace,t)&&this.namespace[t]||void 0:t?(vk("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=TU(t),r=this.parser||this.Parser;return xk("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),xk("process",this.parser||this.Parser),wk("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=TU(t),l=r.parse(a);r.run(l,a,function(c,d,u){if(c||!d||!u)return f(c);const h=d,g=r.stringify(h,u);Bve(g)?u.value=g:u.result=g,f(c,u)});function f(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),xk("processSync",this.parser||this.Parser),wk("processSync",this.compiler||this.Compiler),this.process(t,i),gF("processSync","process",n),r;function i(s,o){n=!0,uF(s),r=o}}run(t,n,r){mF(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=TU(n);i.run(t,l,f);function f(c,d,u){const h=d||t;c?a(c):o?o(h):r(void 0,h,u)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),gF("runSync","run",r),i;function s(o,a){uF(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=TU(n),i=this.compiler||this.Compiler;return wk("stringify",i),mF(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(vk("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(f){if(typeof f=="function")l(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[c,...d]=f;l(c,d)}else o(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function o(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(f.plugins),f.settings&&(i.settings=gk(!0,i.settings,f.settings))}function a(f){let c=-1;if(f!=null)if(Array.isArray(f))for(;++c<f.length;){const d=f[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function l(f,c){let d=-1,u=-1;for(;++d<r.length;)if(r[d][0]===f){u=d;break}if(u===-1)r.push([f,...c]);else if(c.length>0){let[h,...g]=c;const y=r[u][1];NA(y)&&NA(h)&&(h=gk(!0,y,h)),r[u]=[f,h,...g]}}}}const Ove=new zI().freeze();function xk(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function wk(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function vk(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function mF(e){if(!NA(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function gF(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function TU(e){return jve(e)?e:new EQ(e)}function jve(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Bve(e){return typeof e=="string"||Fve(e)}function Fve(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zve="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",bF=[],yF={allowDangerousHtml:!0},$ve=/^(https?|ircs?|mailto|xmpp)$/i,Hve=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Vve(e){const t=Wve(e),n=Gve(e);return Xve(t.runSync(t.parse(n),n),e)}function Wve(e){const t=e.rehypePlugins||bF,n=e.remarkPlugins||bF,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...yF}:yF;return Ove().use(E7e).use(n).use(Uve,r).use(t)}function Gve(e){const t=e.children||"",n=new EQ;return typeof t=="string"&&(n.value=t),n}function Xve(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,o=t.skipHtml,a=t.unwrapDisallowed,l=t.urlTransform||Kve;for(const c of Hve)Object.hasOwn(t,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+zve+c.id,void 0);return vQ(e,f),n9e(e,{Fragment:m.Fragment,components:i,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function f(c,d,u){if(c.type==="raw"&&u&&typeof d=="number")return o?u.children.splice(d,1):u.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let h;for(h in uk)if(Object.hasOwn(uk,h)&&Object.hasOwn(c.properties,h)){const g=c.properties[h],y=uk[h];(y===null||y.includes(c.tagName))&&(c.properties[h]=l(String(g||""),h,c))}}if(c.type==="element"){let h=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!h&&r&&typeof d=="number"&&(h=!r(c,d,u)),h&&u&&typeof d=="number")return a&&c.children?u.children.splice(d,1,...c.children):u.children.splice(d,1),d}}}function Kve(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||$ve.test(e.slice(0,t))?e:""}const Yve=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/,Zve={a:({href:e,children:t})=>{const n=e==null?void 0:e.match(Yve);return n?m.jsx("div",{className:"cp-youtube",children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${n[1]}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`yt-${n[1]}`})}):m.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:t})}},UF={EVIDENCE:"#4ade80",EXAMPLE:"#60a5fa",CONTEXT:"#fbbf24",COUNTERPOINT:"#f87171",SYNTHESIS:"#a78bfa",REFERENCE:"#34d399"};function qve(e){if(!e)return"";const t=Date.now()-new Date(e).getTime(),n=Math.floor(t/864e5);return n===0?"Today":n===1?"Yesterday":n<7?`${n}d ago`:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function kQ({selectedThreadId:e,initialThreadId:t,onNodesCreated:n,onThreadCreated:r,articleContext:i,onProposedUpdate:s,defaultSidebarCollapsed:o=!1,currentUser:a,onAuthRequired:l}){const[f,c]=T.useState([]),[d,u]=T.useState(""),[h,g]=T.useState(!1),[y,U]=T.useState([]),[x,v]=T.useState(null),[E,k]=T.useState(o),M=T.useRef(t||null),S=T.useRef(null),A=T.useRef(""),I=T.useRef(null),R=T.useRef(null);T.useEffect(()=>{var z;(z=I.current)==null||z.scrollIntoView({behavior:"smooth"})},[f,h]);const P=T.useCallback(async z=>{if(!z){U([]);return}try{const H=await Hn.getThreadChats(z);U(H)}catch(H){console.error("Failed to load chat history:",H)}},[]);T.useEffect(()=>{P(e)},[e,P]);const _=()=>{c([]),u(""),M.current=t||e||null,S.current=null,v(null)},O=async z=>{try{const H=await Hn.getChat(z);c(H.messages||[]),S.current=z,v(z),H.threadId&&H.threadId!==M.current&&(M.current=H.threadId,await P(H.threadId))}catch(H){console.error("Failed to load chat:",H)}},V=T.useCallback(async()=>{if(!d.trim()||h)return;const z=d.trim();u(""),R.current&&(R.current.style.height="auto");const H=f.filter(W=>W.role==="user"||W.role==="assistant").map(({role:W,content:B})=>({role:W,content:B})),G=f.length+1;c(W=>[...W,{role:"user",content:z},{role:"assistant",content:"",citations:[],createdNodes:[],newThread:null,proposedUpdate:null,streaming:!0,processing:!1}]),g(!0),A.current="";try{await Hn.chatStream({message:z,history:H,threadId:M.current,nodeContext:i||null,onProcessing:()=>{fi.flushSync(()=>{c(W=>{const B=[...W],X=B[G];return(X==null?void 0:X.role)==="assistant"&&(B[G]={...X,streaming:!1,processing:!0}),B})})},onToken:W=>{A.current+=W,c(B=>{const X=[...B],q=X[G];return(q==null?void 0:q.role)==="assistant"&&(X[G]={...q,content:q.content+W}),X})},onDone:async W=>{var X;c(q=>{const Y=[...q],oe=Y[G];return(oe==null?void 0:oe.role)==="assistant"&&(Y[G]={...oe,streaming:!1,processing:!1,citations:W.citations||[],createdNodes:W.createdNodes||[],newThread:W.newThread||null,proposedUpdate:W.proposedUpdate||null}),Y});const B=W.threadId||M.current;if(W.newThread?(M.current=W.threadId,r==null||r(W.threadId)):((X=W.createdNodes)==null?void 0:X.length)>0&&(M.current=W.threadId,n==null||n(W.threadId)),B){const q=[...H,{role:"user",content:z},{role:"assistant",content:A.current,citations:W.citations||[],createdNodes:W.createdNodes||[]}],Y=z.substring(0,80);try{if(S.current)await Hn.updateChat(S.current,{messages:q});else{const oe=await Hn.createChat({threadId:B,title:Y,messages:q});S.current=oe.id,v(oe.id)}await P(B)}catch(oe){console.error("Failed to save chat:",oe)}}g(!1)},onError:W=>{c(B=>{const X=[...B];return X[G]={role:"error",content:`Error: ${W.message}`},X}),g(!1)}})}catch(W){c(B=>{const X=[...B];return X[G]={role:"error",content:`Error: ${W.message}`},X}),g(!1)}},[d,h,f,P,n,r,i,s]),j=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),V())},F=z=>{u(z.target.value),z.target.style.height="auto",z.target.style.height=Math.min(z.target.scrollHeight,160)+"px"};return m.jsxs("div",{className:"cp-panel",children:[m.jsxs("div",{className:`cp-sidebar${E?" cp-sidebar--collapsed":""}`,children:[m.jsxs("div",{className:"cp-sidebar-header",children:[m.jsx("button",{className:"cp-sidebar-toggle",onClick:()=>k(z=>!z),title:E?"Show chats":"Hide chats",children:E?"":""}),!E&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"cp-sidebar-title",children:"Chats"}),m.jsx("button",{className:"cp-new-btn",onClick:_,title:"New chat",children:"+ New"})]})]}),m.jsxs("div",{className:"cp-chat-list",style:{display:E?"none":void 0},children:[y.length===0&&m.jsx("p",{className:"cp-chat-empty",children:"No saved chats yet."}),y.map(z=>m.jsxs("button",{className:`cp-chat-item${z.id===x?" cp-chat-item--active":""}`,onClick:()=>O(z.id),children:[m.jsx("span",{className:"cp-chat-item-title",children:z.title}),m.jsxs("span",{className:"cp-chat-item-meta",children:[z.messageCount," ",z.messageCount===1?"exchange":"exchanges","  ",qve(z.created_at)]})]},z.id))]})]}),m.jsxs("div",{className:"cp-main",children:[m.jsx("div",{className:"cp-header",children:m.jsx("span",{className:"cp-title",children:"Research Chat"})}),m.jsxs("div",{className:"cp-messages",children:[f.length===0&&m.jsx("div",{className:"cp-empty",children:m.jsxs("p",{children:["Ask anything  nodes will be auto-created in your knowledge graph as you research.",m.jsx("br",{}),"Topic shifts automatically create new threads."]})}),f.map((z,H)=>{var G,W,B;return m.jsxs("div",{className:`cp-msg cp-msg--${z.role}`,children:[z.role==="user"&&m.jsx("div",{className:"cp-bubble cp-bubble--user",children:z.content}),z.role==="assistant"&&m.jsx("div",{className:`cp-bubble cp-bubble--assistant${z.streaming&&!z.content?" cp-bubble--loading":""}`,children:z.streaming&&!z.content?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"cp-markdown",children:m.jsx(Vve,{components:Zve,children:z.content})}),z.processing&&m.jsxs("div",{className:"cp-processing",children:[m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-processing-label",children:"Extracting knowledge"})]}),((G=z.citations)==null?void 0:G.length)>0&&m.jsxs("div",{className:"cp-citations",children:[m.jsx("span",{className:"cp-citations-label",children:"Sources"}),z.citations.map((X,q)=>m.jsxs("a",{href:X.url,target:"_blank",rel:"noopener noreferrer",className:"cp-citation",title:X.url,children:["[",q+1,"] ",(X.title||X.url).substring(0,60)]},q))]}),(((W=z.createdNodes)==null?void 0:W.length)>0||z.newThread)&&m.jsxs("div",{className:"cp-nodes-created",children:[z.newThread&&m.jsxs("span",{className:"cp-new-thread",children:[" New thread: ",z.newThread.title]}),(B=z.createdNodes)==null?void 0:B.map((X,q)=>m.jsx("span",{className:"cp-node-chip",style:{borderColor:UF[X.type]||"#555",color:UF[X.type]||"#aaa"},title:X.title,children:X.type},q))]}),z.proposedUpdate&&s&&m.jsxs("div",{className:"cp-proposed-update",children:[m.jsxs("div",{className:"cp-proposed-update-label",children:[" Proposed update to ",m.jsx("em",{children:z.proposedUpdate.title})]}),m.jsx("div",{className:"cp-proposed-update-preview",children:z.proposedUpdate.description}),m.jsxs("div",{className:"cp-proposed-update-actions",children:[m.jsx("button",{className:"cp-accept-btn",onClick:()=>s(z.proposedUpdate),children:"Accept"}),m.jsx("button",{className:"cp-dismiss-btn",onClick:()=>c(X=>X.map((q,Y)=>Y===H?{...q,proposedUpdate:null}:q)),children:"Dismiss"})]})]})]})}),z.role==="error"&&m.jsx("div",{className:"cp-bubble cp-bubble--error",children:z.content})]},H)}),m.jsx("div",{ref:I})]}),a===void 0||a?m.jsxs("div",{className:"cp-input-area",children:[m.jsx("textarea",{ref:R,className:"cp-input",placeholder:"Ask anything (Shift+Enter for new line)",value:d,onChange:F,onKeyDown:j,disabled:h,rows:1,autoFocus:!0}),m.jsx("button",{className:"cp-send",onClick:V,disabled:!d.trim()||h,"aria-label":"Send",children:""})]}):m.jsxs("div",{className:"cp-auth-gate",children:[m.jsx("p",{children:"Sign in to use AI chat"}),m.jsx("button",{className:"cp-auth-gate-btn",onClick:l,children:"Sign in"})]})]})]})}const Qve=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],Jve={ROOT:"#888",EVIDENCE:"#4fc3f7",REFERENCE:"#ab47bc",CONTEXT:"#ff8a65",EXAMPLE:"#66bb6a",COUNTERPOINT:"#ef5350",SYNTHESIS:"#fdd835"},SQ=({editor:e})=>{const[t,n]=T.useState(null);if(!e)return null;const r=({onClick:s,active:o,children:a})=>m.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:a}),i=()=>m.jsx("span",{className:"ar-toolbar-divider"});return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"ar-toolbar",children:[m.jsx(r,{onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold"),children:"B"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic"),children:"I"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike"),children:"S"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),active:e.isActive("heading",{level:1}),children:"H1"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2}),children:"H2"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3}),children:"H3"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList"),children:"Bullet"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList"),children:"Ordered"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote"),children:"Quote"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock"),children:"Code"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>n("link"),active:e.isActive("link"),children:"Link"}),m.jsx(r,{onClick:()=>n("youtube"),children:"YouTube"})]}),t==="link"&&m.jsx(w4,{label:"Enter URL",placeholder:"https://example.com",onSubmit:s=>{e.chain().focus().extendMarkRange("link").setLink({href:s}).run(),n(null)},onCancel:()=>n(null)}),t==="youtube"&&m.jsx(w4,{label:"Enter YouTube URL",placeholder:"https://youtube.com/watch?v=...",onSubmit:s=>{e.commands.setYoutubeVideo({src:s}),n(null)},onCancel:()=>n(null)})]})};function eEe(e){const t=T3(e);let n=e.content;n&&typeof n=="object"&&n.content!==void 0&&(n=n.content);let r=n;if(typeof n=="string"&&(n.startsWith("{")||n.startsWith("[")))try{r=JSON.parse(n)}catch{}switch(t){case"ROOT":return{title:(typeof r=="object"?r==null?void 0:r.title:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.description:null)||"",keywords:typeof r=="object"&&(r!=null&&r.keywords)?Array.isArray(r.keywords)?r.keywords.join(", "):r.keywords:""};case"EVIDENCE":return{title:(typeof r=="object"?r==null?void 0:r.source:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.point:null)||""};case"EXAMPLE":return{title:(typeof r=="object"?r==null?void 0:r.title:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.description:null)||""};case"COUNTERPOINT":return{title:(typeof r=="object"?r==null?void 0:r.argument:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.explanation:null)||""};default:return{title:e.title||"",html:typeof n=="string"?n:""}}}function tEe(e,t,n,r){switch(e){case"ROOT":return JSON.stringify({title:t,description:n,keywords:r?r.split(",").map(i=>i.trim()).filter(Boolean):[]});case"EVIDENCE":return JSON.stringify({point:n,source:t});case"EXAMPLE":return JSON.stringify({title:t,description:n});case"COUNTERPOINT":return JSON.stringify({argument:t,explanation:n});default:return n}}const nEe=e=>{if(!e)return m.jsx("p",{className:"ar-empty",children:"No content available."});let t=e;if(typeof t=="object"&&(t=t.content||t.text||JSON.stringify(t,null,2)),typeof t!="string")return m.jsx("p",{className:"ar-empty",children:"No content available."});if(t.trim().startsWith("<"))return m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:t}});const n=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/,r=/https?:\/\/[^\s<>"]+/g;return t.split(/\n{2,}/).flatMap(s=>s.includes(`
`)?s.split(`
`):[s]).filter(s=>s.trim()!=="").map((s,o)=>{const a=s.trim().match(n);if(a)return m.jsx("div",{className:"ar-youtube",children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${a[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`video-${o}`})},o);const l=[];let f=0,c;for(r.lastIndex=0;(c=r.exec(s))!==null;)c.index>f&&l.push(s.slice(f,c.index)),l.push(m.jsx("a",{href:c[0],target:"_blank",rel:"noopener noreferrer",children:c[0]},c.index)),f=c.index+c[0].length;return f<s.length&&l.push(s.slice(f)),m.jsx("p",{children:l.length?l:s},o)})},T3=e=>e.node_type?e.node_type:typeof e.type=="number"?Qve[e.type]||"ROOT":e.type||"ROOT",IU=e=>{if(!e)return null;const t=String(e);return/<[a-z][\s\S]*>/i.test(t)?m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:t}}):m.jsx("p",{children:t})},rEe=e=>{var n;let t=e.content;if(!t)return null;if(typeof t=="string")try{const r=JSON.parse(t);typeof r=="object"&&(t=r)}catch{}if(typeof t=="object"){if(t.title&&t.description&&"keywords"in t)return m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.title}),IU(t.description),((n=t.keywords)==null?void 0:n.length)>0&&m.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.9rem",marginTop:16},children:m.jsxs("em",{children:["Keywords: ",Array.isArray(t.keywords)?t.keywords.join(", "):t.keywords]})})]});if(t.point){const r=t.source,i=r==null?void 0:r.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/),s=r&&/^https?:\/\//.test(r);return m.jsxs("div",{children:[IU(t.point),r&&(i?m.jsx("div",{className:"ar-youtube",style:{marginTop:20},children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${i[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`yt-${i[1]}`})}):m.jsxs("p",{style:{color:"rgba(255,255,255,0.45)",fontStyle:"italic",marginTop:16,fontSize:"0.9rem"},children:["Source:"," ",s?m.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:{color:"#00ff9d",textDecoration:"underline",textUnderlineOffset:"3px",wordBreak:"break-all"},children:r}):r]}))]})}return t.title&&t.description?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.title}),IU(t.description)]}):t.argument?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.argument}),t.explanation&&IU(t.explanation)]}):t.content?t.content:t.text?t.text:JSON.stringify(t,null,2)}return t},iEe=({thread:e,onContentChange:t})=>{var u,h;const[n,r]=T.useState(!1),[i,s]=T.useState(!1),o=dI({extensions:[SI,vI.configure({openOnClick:!1}),CI.configure({width:640,height:360}),AI.configure({placeholder:"Write your thread notes here..."})],content:e.content||"",editable:!1});T.useEffect(()=>{o&&(o.commands.setContent(e.content||""),o.setEditable(!1),r(!1))},[e.id]);const a=()=>{o==null||o.setEditable(!0),r(!0)},l=async()=>{if(!o)return;s(!0);const g=o.getHTML();try{await Hn.updateThreadContent(e.id,g),t&&t(g),o.setEditable(!1),r(!1)}catch(y){console.error("Failed to save content:",y)}finally{s(!1)}},f=()=>{o==null||o.commands.setContent(e.content||""),o==null||o.setEditable(!1),r(!1)},c=((u=e.metadata)==null?void 0:u.title)||e.title||`Thread ${e.id}`,d=((h=e.metadata)==null?void 0:h.description)||e.description||"";return m.jsxs("article",{className:"ar-article",children:[m.jsxs("div",{className:"ar-node-header",children:[m.jsx("div",{className:"ar-node-badge",style:{color:"#777",borderColor:"#444"},children:"THREAD"}),!n&&m.jsx("button",{className:"ar-edit-btn",onClick:a,children:"Edit"}),n&&m.jsxs("div",{className:"ar-edit-actions",children:[m.jsx("button",{className:"ar-save-btn",onClick:l,disabled:i,children:i?"Saving":"Save"}),m.jsx("button",{className:"ar-cancel-btn",onClick:f,disabled:i,children:"Cancel"})]})]}),m.jsx("h1",{className:"ar-title",children:c}),d&&m.jsx("p",{className:"ar-description",children:d}),m.jsx("hr",{className:"ar-divider"}),n?m.jsxs("div",{className:"ar-editor-section",children:[m.jsx(SQ,{editor:o}),m.jsx("div",{className:"ar-editor-wrapper",children:m.jsx(mw,{editor:o})})]}):m.jsx("div",{className:"ar-content",children:e.content&&e.content!=="<p></p>"?m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:e.content}}):m.jsx("p",{className:"ar-empty",children:"No notes yet. Click Edit to add content."})})]})},sEe=({thread:e,initialNodeId:t,onContentChange:n,onUpdateNode:r,onNodesCreated:i,onThreadCreated:s,currentUser:o,onAuthRequired:a})=>{const[l,f]=T.useState(0),[c,d]=T.useState([]),[u,h]=T.useState(!0),[g,y]=T.useState(!1),[U,x]=T.useState(!1);T.useState(null);const[v,E]=T.useState(""),[k,M]=T.useState(""),[S,A]=T.useState(!1),I=dI({extensions:[SI,vI.configure({openOnClick:!1}),CI.configure({width:640,height:360}),AI.configure({placeholder:"Edit content..."})],content:""});T.useEffect(()=>{y(!1)},[l]),T.useEffect(()=>{e!=null&&e.id&&R()},[e==null?void 0:e.id]),T.useEffect(()=>{if(!t||c.length===0)return;const j=c.findIndex(F=>F.id===t);j>=0&&f(j+1)},[t,c]);const R=async()=>{h(!0);try{const j=e.nodes||[],F=await Hn.loadArticleSequence(e.id);let z;if(F&&Array.isArray(F)){const H=new Set(F),G=F.map(B=>j.find(X=>X.id===B)).filter(Boolean),W=j.filter(B=>!H.has(B.id));z=[...G,...W]}else z=[...j];if(d(z),t){const H=z.findIndex(G=>G.id===t);f(H>=0?H+1:0)}else f(0)}catch(j){console.error("Failed to load article sequence:",j);const F=[...e.nodes||[]];if(d(F),t){const z=F.findIndex(H=>H.id===t);f(z>=0?z+1:0)}else f(0)}finally{h(!1)}};if(!e)return null;const P=1+c.length,_=(()=>{if(u||l===0)return null;const j=c[l-1];return j?{nodeId:j.id,nodeType:T3(j),title:j.title||`Node ${j.id}`,content:j.content||""}:null})(),O=async j=>{if(!j||!j.nodeId||!r)return;const F=c.find(W=>W.id===j.nodeId);if(!F)return;const z=T3(F);let H={};if(typeof F.content=="string")try{H=JSON.parse(F.content)}catch{}let G;z==="ROOT"?G=JSON.stringify({title:j.title,description:j.description,keywords:H.keywords||[]}):z==="EXAMPLE"?G=JSON.stringify({title:j.title,description:j.description}):z==="COUNTERPOINT"?G=JSON.stringify({argument:j.title,explanation:j.description}):z==="EVIDENCE"?G=JSON.stringify({point:j.description,source:H.source||""}):G=j.description;try{await r({nodeId:j.nodeId,threadId:e.id},{title:j.title,content:G}),d(B=>B.map(X=>X.id===j.nodeId?{...X,title:j.title,content:G}:X));const W=c.findIndex(B=>B.id===j.nodeId);W>=0&&f(W+1)}catch(W){console.error("Failed to apply proposed update:",W)}},V=()=>{if(l===0)return m.jsx(iEe,{thread:e,onContentChange:n});const j=c[l-1];if(!j)return m.jsx("p",{className:"ar-empty",children:"Node not found."});const F=T3(j),z=Jve[F]||"#888",H=j.title||`Node ${j.id}`,G=rEe(j),W=Ie.isValidElement(G),B=()=>{const{title:q,html:Y,keywords:oe}=eEe(j);E(q),M(oe||""),I==null||I.commands.setContent(Y||""),y(!0)},X=async()=>{if(!I||!r)return;const q=I.getHTML(),Y=tEe(F,v,q,k);A(!0);try{await r({nodeId:j.id,threadId:e.id},{title:v,content:Y}),d(oe=>oe.map(ge=>ge.id===j.id?{...ge,title:v,content:Y}:ge)),y(!1)}catch(oe){console.error("Failed to save node:",oe)}finally{A(!1)}};return m.jsxs("article",{className:"ar-article",children:[m.jsxs("div",{className:"ar-node-header",children:[m.jsx("div",{className:"ar-node-badge",style:{color:z,borderColor:z},children:F}),!g&&r&&m.jsx("button",{className:"ar-edit-btn",onClick:B,children:"Edit"}),g&&m.jsxs("div",{className:"ar-edit-actions",children:[m.jsx("button",{className:"ar-save-btn",onClick:X,disabled:S,children:S?"Saving":"Save"}),m.jsx("button",{className:"ar-cancel-btn",onClick:()=>y(!1),disabled:S,children:"Cancel"})]})]}),g?m.jsxs(m.Fragment,{children:[m.jsx("input",{className:"ar-edit-title",type:"text",value:v,onChange:q=>E(q.target.value),placeholder:"Title"}),F==="ROOT"&&m.jsx("input",{className:"ar-edit-keywords",type:"text",value:k,onChange:q=>M(q.target.value),placeholder:"Keywords (comma-separated)"}),m.jsx("hr",{className:"ar-divider"}),m.jsxs("div",{className:"ar-editor-section",children:[m.jsx(SQ,{editor:I}),m.jsx("div",{className:"ar-editor-wrapper",children:m.jsx(mw,{editor:I})})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h1",{className:"ar-title",children:H}),m.jsx("hr",{className:"ar-divider"}),m.jsx("div",{className:"ar-content",children:W?G:nEe(G)})]})]})};return m.jsxs("div",{className:"ar-page",children:[m.jsxs("div",{className:"ar-content-row",children:[m.jsxs("div",{className:"ar-content-area",children:[m.jsx("main",{className:"ar-body",children:u?m.jsx("div",{className:"ar-loading",children:"Loading..."}):V()}),!u&&P>1&&m.jsxs("div",{className:"ar-nav",children:[m.jsx("button",{className:"ar-nav-btn",disabled:l===0,onClick:()=>f(j=>j-1),children:" Prev"}),m.jsxs("span",{className:"ar-nav-info",children:[l+1," / ",P]}),m.jsx("button",{className:"ar-nav-btn",disabled:l>=P-1,onClick:()=>f(j=>j+1),children:"Next "})]})]}),m.jsx("div",{className:`ar-chat-sidebar${U?" ar-chat-sidebar--open":""}`,children:m.jsx(kQ,{selectedThreadId:e.id,initialThreadId:e.id,currentUser:o,onAuthRequired:a,onNodesCreated:i,onThreadCreated:s,articleContext:_,onProposedUpdate:O,defaultSidebarCollapsed:!0})})]}),m.jsx("button",{className:`ar-chat-toggle${U?" ar-chat-toggle--open":""}`,onClick:()=>x(j=>!j),title:U?"Close chat":"Open chat",children:U?"":""})]})},oEe="modulepreload",aEe=function(e){return"/"+e},xF={},Ze=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=aEe(l),l in xF)return;xF[l]=!0;const f=l.endsWith(".css"),c=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":oEe,f||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),f)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var At={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"false",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",PKG_NAME:"@excalidraw/excalidraw",PKG_VERSION:"0.18.0",PROD:!0},CQ=Object.defineProperty,lEe=(e,t,n)=>t in e?CQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sqe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),cEe=e=>t=>{var n=e[t];if(n)return n();throw new Error("Module not found in bundle: "+t)},AQ=(e,t)=>{for(var n in t)CQ(e,n,{get:t[n],enumerable:!0})},Q=(e,t,n)=>(lEe(e,typeof t!="symbol"?t+"":t,n),n),Ek={},wF;function fEe(){return wF||(wF=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var f=0,c=new Array(256),d=0;d!=256;++d)f=d,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,c[d]=f;return typeof Int32Array<"u"?new Int32Array(c):c}var r=n(),i=typeof Buffer<"u";function s(f){if(f.length>32768&&i)return a(new Buffer(f));for(var c=-1,d=f.length-1,u=0;u<d;)c=r[(c^f.charCodeAt(u++))&255]^c>>>8,c=r[(c^f.charCodeAt(u++))&255]^c>>>8;return u===d&&(c=c>>>8^r[(c^f.charCodeAt(u))&255]),c^-1}function o(f){if(f.length>1e4)return a(f);for(var c=-1,d=0,u=f.length-3;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+3;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function a(f){for(var c=-1,d=0,u=f.length-7;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+7;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function l(f){for(var c=-1,d=0,u=f.length,h,g;d<u;)h=f.charCodeAt(d++),h<128?c=c>>>8^r[(c^h)&255]:h<2048?(c=c>>>8^r[(c^(192|h>>6&31))&255],c=c>>>8^r[(c^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,g=f.charCodeAt(d++)&1023,c=c>>>8^r[(c^(240|h>>8&7))&255],c=c>>>8^r[(c^(128|h>>2&63))&255],c=c>>>8^r[(c^(128|g>>6&15|h&3))&255],c=c>>>8^r[(c^(128|g&63))&255]):(c=c>>>8^r[(c^(224|h>>12&15))&255],c=c>>>8^r[(c^(128|h>>6&63))&255],c=c>>>8^r[(c^(128|h&63))&255]);return c^-1}t.table=r,t.bstr=s,t.buf=o,t.str=l})}(Ek)),Ek}var kk,vF;function dEe(){if(vF)return kk;vF=1;var e=fEe();kk=i;var t=new Uint8Array(4),n=new Int32Array(t.buffer),r=new Uint32Array(t.buffer);function i(s){if(s[0]!==137)throw new Error("Invalid .png file header");if(s[1]!==80)throw new Error("Invalid .png file header");if(s[2]!==78)throw new Error("Invalid .png file header");if(s[3]!==71)throw new Error("Invalid .png file header");if(s[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(s[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(s[6]!==26)throw new Error("Invalid .png file header");if(s[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var o=!1,a=[],l=8;l<s.length;){t[3]=s[l++],t[2]=s[l++],t[1]=s[l++],t[0]=s[l++];var f=r[0]+4,c=new Uint8Array(f);c[0]=s[l++],c[1]=s[l++],c[2]=s[l++],c[3]=s[l++];var d=String.fromCharCode(c[0])+String.fromCharCode(c[1])+String.fromCharCode(c[2])+String.fromCharCode(c[3]);if(!a.length&&d!=="IHDR")throw new Error("IHDR header missing");if(d==="IEND"){o=!0,a.push({name:d,data:new Uint8Array(0)});break}for(var u=4;u<f;u++)c[u]=s[l++];t[3]=s[l++],t[2]=s[l++],t[1]=s[l++],t[0]=s[l++];var h=n[0],g=e.buf(c);if(g!==h)throw new Error("CRC values for "+d+" header do not match, PNG file is likely corrupted");var y=new Uint8Array(c.buffer.slice(4));a.push({name:d,data:y})}if(!o)throw new Error(".png file ended prematurely: no IEND header was found");return a}return kk}var uEe=dEe();const MQ=Ia(uEe);var NU={},Sk,EF;function hEe(){if(EF)return Sk;EF=1,Sk=e;function e(t,n){if(t=String(t),n=String(n),!/^[\x00-\xFF]+$/.test(t)||!/^[\x00-\xFF]+$/.test(n))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(t.length>=80)throw new Error('Keyword "'+t+'" is longer than the 79-character limit imposed by the PNG specification');for(var r=t.length+n.length+1,i=new Uint8Array(r),s=0,o,a=0;a<t.length;a++){if(!(o=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt keywords");i[s++]=o}i[s++]=0;for(var l=0;l<n.length;l++){if(!(o=n.charCodeAt(l)))throw new Error("0x00 character is not permitted in tEXt content");i[s++]=o}return{name:"tEXt",data:i}}return Sk}var Ck,kF;function pEe(){if(kF)return Ck;kF=1,Ck=e;function e(t){t.data&&t.name&&(t=t.data);for(var n=!0,r="",i="",s=0;s<t.length;s++){var o=t[s];if(n)o?i+=String.fromCharCode(o):n=!1;else if(o)r+=String.fromCharCode(o);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:r}}return Ck}var SF;function mEe(){return SF||(SF=1,NU.encode=hEe(),NU.decode=pEe()),NU}var gEe=mEe();const TQ=Ia(gEe);var Ak,CF;function bEe(){return CF||(CF=1,Ak=function(e,t,n){var r=[],i=e.length;if(i===0)return r;var s=t<0?Math.max(0,t+i):t||0;for(n!==void 0&&(i=n<0?n+i:n);i-- >s;)r[i-s]=e[i];return r}),Ak}var Mk={},AF;function yEe(){return AF||(AF=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var f=0,c=new Array(256),d=0;d!=256;++d)f=d,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,c[d]=f;return typeof Int32Array<"u"?new Int32Array(c):c}var r=n(),i=typeof Buffer<"u";function s(f){if(f.length>32768&&i)return a(new Buffer(f));for(var c=-1,d=f.length-1,u=0;u<d;)c=r[(c^f.charCodeAt(u++))&255]^c>>>8,c=r[(c^f.charCodeAt(u++))&255]^c>>>8;return u===d&&(c=c>>>8^r[(c^f.charCodeAt(u))&255]),c^-1}function o(f){if(f.length>1e4)return a(f);for(var c=-1,d=0,u=f.length-3;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+3;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function a(f){for(var c=-1,d=0,u=f.length-7;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+7;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function l(f){for(var c=-1,d=0,u=f.length,h,g;d<u;)h=f.charCodeAt(d++),h<128?c=c>>>8^r[(c^h)&255]:h<2048?(c=c>>>8^r[(c^(192|h>>6&31))&255],c=c>>>8^r[(c^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,g=f.charCodeAt(d++)&1023,c=c>>>8^r[(c^(240|h>>8&7))&255],c=c>>>8^r[(c^(128|h>>2&63))&255],c=c>>>8^r[(c^(128|g>>6&15|h&3))&255],c=c>>>8^r[(c^(128|g&63))&255]):(c=c>>>8^r[(c^(224|h>>12&15))&255],c=c>>>8^r[(c^(128|h>>6&63))&255],c=c>>>8^r[(c^(128|h&63))&255]);return c^-1}t.table=r,t.bstr=s,t.buf=o,t.str=l})}(Mk)),Mk}var Tk,MF;function UEe(){if(MF)return Tk;MF=1;var e=bEe(),t=yEe();Tk=s;var n=new Uint8Array(4),r=new Int32Array(n.buffer),i=new Uint32Array(n.buffer);function s(o){var a=8,l=a,f;for(f=0;f<o.length;f++)a+=o[f].data.length,a+=12;var c=new Uint8Array(a);for(c[0]=137,c[1]=80,c[2]=78,c[3]=71,c[4]=13,c[5]=10,c[6]=26,c[7]=10,f=0;f<o.length;f++){var d=o[f],u=d.name,h=d.data,g=h.length,y=[u.charCodeAt(0),u.charCodeAt(1),u.charCodeAt(2),u.charCodeAt(3)];i[0]=g,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0],c[l++]=y[0],c[l++]=y[1],c[l++]=y[2],c[l++]=y[3];for(var U=0;U<g;)c[l++]=h[U++];var x=y.concat(e(h)),v=t.buf(x);r[0]=v,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0]}return c}return Tk}var xEe=UEe();const wEe=Ia(xEe);/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const vEe=4,TF=0,IF=1,EEe=2;function r6(e){let t=e.length;for(;--t>=0;)e[t]=0}const kEe=0,IQ=1,SEe=2,CEe=3,AEe=258,$I=29,wy=256,pb=wy+1+$I,ym=30,HI=19,NQ=2*pb+1,lh=15,Ik=16,MEe=7,VI=256,RQ=16,_Q=17,PQ=18,_A=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),I3=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),TEe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),DQ=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),IEe=512,gf=new Array((pb+2)*2);r6(gf);const U2=new Array(ym*2);r6(U2);const mb=new Array(IEe);r6(mb);const gb=new Array(AEe-CEe+1);r6(gb);const WI=new Array($I);r6(WI);const k4=new Array(ym);r6(k4);function Nk(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let LQ,OQ,jQ;function Rk(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const BQ=e=>e<256?mb[e]:mb[256+(e>>>7)],bb=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},ao=(e,t,n)=>{e.bi_valid>Ik-n?(e.bi_buf|=t<<e.bi_valid&65535,bb(e,e.bi_buf),e.bi_buf=t>>Ik-e.bi_valid,e.bi_valid+=n-Ik):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},dc=(e,t,n)=>{ao(e,n[t*2],n[t*2+1])},FQ=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},NEe=e=>{e.bi_valid===16?(bb(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},REe=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let f,c,d,u,h,g,y=0;for(u=0;u<=lh;u++)e.bl_count[u]=0;for(n[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<NQ;f++)c=e.heap[f],u=n[n[c*2+1]*2+1]+1,u>l&&(u=l,y++),n[c*2+1]=u,!(c>r)&&(e.bl_count[u]++,h=0,c>=a&&(h=o[c-a]),g=n[c*2],e.opt_len+=g*(u+h),s&&(e.static_len+=g*(i[c*2+1]+h)));if(y!==0){do{for(u=l-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,y-=2}while(y>0);for(u=l;u!==0;u--)for(c=e.bl_count[u];c!==0;)d=e.heap[--f],!(d>r)&&(n[d*2+1]!==u&&(e.opt_len+=(u-n[d*2+1])*n[d*2],n[d*2+1]=u),c--)}},zQ=(e,t,n)=>{const r=new Array(lh+1);let i=0,s,o;for(s=1;s<=lh;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=FQ(r[a]++,a))}},_Ee=()=>{let e,t,n,r,i;const s=new Array(lh+1);for(n=0,r=0;r<$I-1;r++)for(WI[r]=n,e=0;e<1<<_A[r];e++)gb[n++]=r;for(gb[n-1]=r,i=0,r=0;r<16;r++)for(k4[r]=i,e=0;e<1<<I3[r];e++)mb[i++]=r;for(i>>=7;r<ym;r++)for(k4[r]=i<<7,e=0;e<1<<I3[r]-7;e++)mb[256+i++]=r;for(t=0;t<=lh;t++)s[t]=0;for(e=0;e<=143;)gf[e*2+1]=8,e++,s[8]++;for(;e<=255;)gf[e*2+1]=9,e++,s[9]++;for(;e<=279;)gf[e*2+1]=7,e++,s[7]++;for(;e<=287;)gf[e*2+1]=8,e++,s[8]++;for(zQ(gf,pb+1,s),e=0;e<ym;e++)U2[e*2+1]=5,U2[e*2]=FQ(e,5);LQ=new Nk(gf,_A,wy+1,pb,lh),OQ=new Nk(U2,I3,0,ym,lh),jQ=new Nk(new Array(0),TEe,0,HI,MEe)},$Q=e=>{let t;for(t=0;t<pb;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ym;t++)e.dyn_dtree[t*2]=0;for(t=0;t<HI;t++)e.bl_tree[t*2]=0;e.dyn_ltree[VI*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},HQ=e=>{e.bi_valid>8?bb(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},PEe=(e,t,n,r)=>{HQ(e),bb(e,n),bb(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},NF=(e,t,n,r)=>{const i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},_k=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&NF(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!NF(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},RF=(e,t,n)=>{let r,i,s=0,o,a;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,r===0?dc(e,i,t):(o=gb[i],dc(e,o+wy+1,t),a=_A[o],a!==0&&(i-=WI[o],ao(e,i,a)),r--,o=BQ(r),dc(e,o,n),a=I3[o],a!==0&&(r-=k4[o],ao(e,r,a)));while(s<e.last_lit);dc(e,VI,t)},PA=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,f;for(e.heap_len=0,e.heap_max=NQ,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=l<2?++l:0,n[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=r[f*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)_k(e,n,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_k(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[f*2]=n[o*2]+n[a*2],e.depth[f]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=f,e.heap[1]=f++,_k(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],REe(e,t),zQ(n,l,e.bl_count)},_F=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)&&(a<f?e.bl_tree[s*2]+=a:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[RQ*2]++):a<=10?e.bl_tree[_Q*2]++:e.bl_tree[PQ*2]++,a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4))},PF=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),r=0;r<=n;r++)if(s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)){if(a<f)do dc(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==i&&(dc(e,s,e.bl_tree),a--),dc(e,RQ,e.bl_tree),ao(e,a-3,2)):a<=10?(dc(e,_Q,e.bl_tree),ao(e,a-3,3)):(dc(e,PQ,e.bl_tree),ao(e,a-11,7));a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4)}},DEe=e=>{let t;for(_F(e,e.dyn_ltree,e.l_desc.max_code),_F(e,e.dyn_dtree,e.d_desc.max_code),PA(e,e.bl_desc),t=HI-1;t>=3&&e.bl_tree[DQ[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},LEe=(e,t,n,r)=>{let i;for(ao(e,t-257,5),ao(e,n-1,5),ao(e,r-4,4),i=0;i<r;i++)ao(e,e.bl_tree[DQ[i]*2+1],3);PF(e,e.dyn_ltree,t-1),PF(e,e.dyn_dtree,n-1)},OEe=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return TF;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return IF;for(n=32;n<wy;n++)if(e.dyn_ltree[n*2]!==0)return IF;return TF};let DF=!1;const jEe=e=>{DF||(_Ee(),DF=!0),e.l_desc=new Rk(e.dyn_ltree,LQ),e.d_desc=new Rk(e.dyn_dtree,OQ),e.bl_desc=new Rk(e.bl_tree,jQ),e.bi_buf=0,e.bi_valid=0,$Q(e)},VQ=(e,t,n,r)=>{ao(e,(kEe<<1)+(r?1:0),3),PEe(e,t,n)},BEe=e=>{ao(e,IQ<<1,3),dc(e,VI,gf),NEe(e)},FEe=(e,t,n,r)=>{let i,s,o=0;e.level>0?(e.strm.data_type===EEe&&(e.strm.data_type=OEe(e)),PA(e,e.l_desc),PA(e,e.d_desc),o=DEe(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?VQ(e,t,n,r):e.strategy===vEe||s===i?(ao(e,(IQ<<1)+(r?1:0),3),RF(e,gf,U2)):(ao(e,(SEe<<1)+(r?1:0),3),LEe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),RF(e,e.dyn_ltree,e.dyn_dtree)),$Q(e),r&&HQ(e)},zEe=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(gb[n]+wy+1)*2]++,e.dyn_dtree[BQ(t)*2]++),e.last_lit===e.lit_bufsize-1);var $Ee=jEe,HEe=VQ,VEe=FEe,WEe=zEe,GEe=BEe,XEe={_tr_init:$Ee,_tr_stored_block:HEe,_tr_flush_block:VEe,_tr_tally:WEe,_tr_align:GEe};const KEe=(e,t,n,r)=>{let i=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var yb=KEe;const YEe=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},ZEe=new Uint32Array(YEe()),qEe=(e,t,n,r)=>{const i=ZEe,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var vi=qEe,d1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},i6={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:QEe,_tr_stored_block:JEe,_tr_flush_block:eke,_tr_tally:$u,_tr_align:tke}=XEe,{Z_NO_FLUSH:_1,Z_PARTIAL_FLUSH:nke,Z_FULL_FLUSH:rke,Z_FINISH:Hu,Z_BLOCK:LF,Z_OK:uc,Z_STREAM_END:OF,Z_STREAM_ERROR:va,Z_DATA_ERROR:ike,Z_BUF_ERROR:Pk,Z_DEFAULT_COMPRESSION:ske,Z_FILTERED:oke,Z_HUFFMAN_ONLY:RU,Z_RLE:ake,Z_FIXED:lke,Z_DEFAULT_STRATEGY:cke,Z_UNKNOWN:fke,Z_DEFLATED:xw}=i6,dke=9,uke=15,hke=8,pke=29,mke=256,DA=mke+1+pke,gke=30,bke=19,yke=2*DA+1,Uke=15,Qt=3,Nu=258,ml=Nu+Qt+1,xke=32,ww=42,LA=69,N3=73,R3=91,_3=103,ch=113,H5=666,di=1,vy=2,u1=3,s6=4,wke=3,Ru=(e,t)=>(e.msg=d1[t],t),jF=e=>(e<<1)-(e>4?9:0),cu=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let vke=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Vu=vke;const Yd=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Wi=(e,t)=>{eke(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Yd(e.strm)},hn=(e,t)=>{e.pending_buf[e.pending++]=t},h5=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Eke=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=yb(e.adler,t,i,n):e.state.wrap===2&&(e.adler=vi(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},WQ=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-ml?e.strstart-(e.w_size-ml):0,f=e.window,c=e.w_mask,d=e.prev,u=e.strstart+Nu;let h=f[r+o-1],g=f[r+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(f[i+o]!==g||f[i+o-1]!==h||f[i]!==f[r]||f[++i]!==f[r+1])){r+=2,i++;do;while(f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&r<u);if(s=Nu-(u-r),r=u-Nu,s>o){if(e.match_start=t,o=s,s>=a)break;h=f[r+o-1],g=f[r+o]}}while((t=d[t&c])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},h1=e=>{const t=e.w_size;let n,r,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ml)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);s+=t}if(e.strm.avail_in===0)break;if(r=Eke(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=Qt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Vu(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Vu(e,e.ins_h,e.window[o+Qt-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<Qt)););}while(e.lookahead<ml&&e.strm.avail_in!==0)},kke=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h1(e),e.lookahead===0&&t===_1)return di;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Wi(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-ml&&(Wi(e,!1),e.strm.avail_out===0))return di}return e.insert=0,t===Hu?(Wi(e,!0),e.strm.avail_out===0?u1:s6):(e.strstart>e.block_start&&(Wi(e,!1),e.strm.avail_out===0),di)},Dk=(e,t)=>{let n,r;for(;;){if(e.lookahead<ml){if(h1(e),e.lookahead<ml&&t===_1)return di;if(e.lookahead===0)break}if(n=0,e.lookahead>=Qt&&(e.ins_h=Vu(e,e.ins_h,e.window[e.strstart+Qt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ml&&(e.match_length=WQ(e,n)),e.match_length>=Qt)if(r=$u(e,e.strstart-e.match_start,e.match_length-Qt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Qt){e.match_length--;do e.strstart++,e.ins_h=Vu(e,e.ins_h,e.window[e.strstart+Qt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Vu(e,e.ins_h,e.window[e.strstart+1]);else r=$u(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Wi(e,!1),e.strm.avail_out===0))return di}return e.insert=e.strstart<Qt-1?e.strstart:Qt-1,t===Hu?(Wi(e,!0),e.strm.avail_out===0?u1:s6):e.last_lit&&(Wi(e,!1),e.strm.avail_out===0)?di:vy},Up=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<ml){if(h1(e),e.lookahead<ml&&t===_1)return di;if(e.lookahead===0)break}if(n=0,e.lookahead>=Qt&&(e.ins_h=Vu(e,e.ins_h,e.window[e.strstart+Qt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Qt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ml&&(e.match_length=WQ(e,n),e.match_length<=5&&(e.strategy===oke||e.match_length===Qt&&e.strstart-e.match_start>4096)&&(e.match_length=Qt-1)),e.prev_length>=Qt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Qt,r=$u(e,e.strstart-1-e.prev_match,e.prev_length-Qt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Vu(e,e.ins_h,e.window[e.strstart+Qt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Qt-1,e.strstart++,r&&(Wi(e,!1),e.strm.avail_out===0))return di}else if(e.match_available){if(r=$u(e,0,e.window[e.strstart-1]),r&&Wi(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return di}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=$u(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Qt-1?e.strstart:Qt-1,t===Hu?(Wi(e,!0),e.strm.avail_out===0?u1:s6):e.last_lit&&(Wi(e,!1),e.strm.avail_out===0)?di:vy},Ske=(e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=Nu){if(h1(e),e.lookahead<=Nu&&t===_1)return di;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Qt&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+Nu;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=Nu-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Qt?(n=$u(e,1,e.match_length-Qt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=$u(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Wi(e,!1),e.strm.avail_out===0))return di}return e.insert=0,t===Hu?(Wi(e,!0),e.strm.avail_out===0?u1:s6):e.last_lit&&(Wi(e,!1),e.strm.avail_out===0)?di:vy},Cke=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(h1(e),e.lookahead===0)){if(t===_1)return di;break}if(e.match_length=0,n=$u(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Wi(e,!1),e.strm.avail_out===0))return di}return e.insert=0,t===Hu?(Wi(e,!0),e.strm.avail_out===0?u1:s6):e.last_lit&&(Wi(e,!1),e.strm.avail_out===0)?di:vy};function jl(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const V5=[new jl(0,0,0,0,kke),new jl(4,4,8,4,Dk),new jl(4,5,16,8,Dk),new jl(4,6,32,32,Dk),new jl(4,4,16,16,Up),new jl(8,16,32,32,Up),new jl(8,16,128,128,Up),new jl(8,32,128,256,Up),new jl(32,128,258,1024,Up),new jl(32,258,258,4096,Up)],Ake=e=>{e.window_size=2*e.w_size,cu(e.head),e.max_lazy_match=V5[e.level].max_lazy,e.good_match=V5[e.level].good_length,e.nice_match=V5[e.level].nice_length,e.max_chain_length=V5[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Qt-1,e.match_available=0,e.ins_h=0};function Mke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xw,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(yke*2),this.dyn_dtree=new Uint16Array((2*gke+1)*2),this.bl_tree=new Uint16Array((2*bke+1)*2),cu(this.dyn_ltree),cu(this.dyn_dtree),cu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Uke+1),this.heap=new Uint16Array(2*DA+1),cu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*DA+1),cu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const GQ=e=>{if(!e||!e.state)return Ru(e,va);e.total_in=e.total_out=0,e.data_type=fke;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ww:ch,e.adler=t.wrap===2?0:1,t.last_flush=_1,QEe(t),uc},XQ=e=>{const t=GQ(e);return t===uc&&Ake(e.state),t},Tke=(e,t)=>!e||!e.state||e.state.wrap!==2?va:(e.state.gzhead=t,uc),KQ=(e,t,n,r,i,s)=>{if(!e)return va;let o=1;if(t===ske&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>dke||n!==xw||r<8||r>15||t<0||t>9||s<0||s>lke)return Ru(e,va);r===8&&(r=9);const a=new Mke;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Qt-1)/Qt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,XQ(e)},Ike=(e,t)=>KQ(e,t,xw,uke,hke,cke),Nke=(e,t)=>{let n,r;if(!e||!e.state||t>LF||t<0)return e?Ru(e,va):va;const i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===H5&&t!==Hu)return Ru(e,e.avail_out===0?Pk:va);i.strm=e;const s=i.last_flush;if(i.last_flush=t,i.status===ww)if(i.wrap===2)e.adler=0,hn(i,31),hn(i,139),hn(i,8),i.gzhead?(hn(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),hn(i,i.gzhead.time&255),hn(i,i.gzhead.time>>8&255),hn(i,i.gzhead.time>>16&255),hn(i,i.gzhead.time>>24&255),hn(i,i.level===9?2:i.strategy>=RU||i.level<2?4:0),hn(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(hn(i,i.gzhead.extra.length&255),hn(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=vi(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=LA):(hn(i,0),hn(i,0),hn(i,0),hn(i,0),hn(i,0),hn(i,i.level===9?2:i.strategy>=RU||i.level<2?4:0),hn(i,wke),i.status=ch);else{let o=xw+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=RU||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,o|=a<<6,i.strstart!==0&&(o|=xke),o+=31-o%31,i.status=ch,h5(i,o),i.strstart!==0&&(h5(i,e.adler>>>16),h5(i,e.adler&65535)),e.adler=1}if(i.status===LA)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=vi(e.adler,i.pending_buf,i.pending-n,n)),Yd(e),n=i.pending,i.pending===i.pending_buf_size));)hn(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=vi(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=N3)}else i.status=N3;if(i.status===N3)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=vi(e.adler,i.pending_buf,i.pending-n,n)),Yd(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.name.length?r=i.gzhead.name.charCodeAt(i.gzindex++)&255:r=0,hn(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=vi(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.gzindex=0,i.status=R3)}else i.status=R3;if(i.status===R3)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=vi(e.adler,i.pending_buf,i.pending-n,n)),Yd(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.comment.length?r=i.gzhead.comment.charCodeAt(i.gzindex++)&255:r=0,hn(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=vi(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.status=_3)}else i.status=_3;if(i.status===_3&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Yd(e),i.pending+2<=i.pending_buf_size&&(hn(i,e.adler&255),hn(i,e.adler>>8&255),e.adler=0,i.status=ch)):i.status=ch),i.pending!==0){if(Yd(e),e.avail_out===0)return i.last_flush=-1,uc}else if(e.avail_in===0&&jF(t)<=jF(s)&&t!==Hu)return Ru(e,Pk);if(i.status===H5&&e.avail_in!==0)return Ru(e,Pk);if(e.avail_in!==0||i.lookahead!==0||t!==_1&&i.status!==H5){let o=i.strategy===RU?Cke(i,t):i.strategy===ake?Ske(i,t):V5[i.level].func(i,t);if((o===u1||o===s6)&&(i.status=H5),o===di||o===u1)return e.avail_out===0&&(i.last_flush=-1),uc;if(o===vy&&(t===nke?tke(i):t!==LF&&(JEe(i,0,0,!1),t===rke&&(cu(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),Yd(e),e.avail_out===0))return i.last_flush=-1,uc}return t!==Hu?uc:i.wrap<=0?OF:(i.wrap===2?(hn(i,e.adler&255),hn(i,e.adler>>8&255),hn(i,e.adler>>16&255),hn(i,e.adler>>24&255),hn(i,e.total_in&255),hn(i,e.total_in>>8&255),hn(i,e.total_in>>16&255),hn(i,e.total_in>>24&255)):(h5(i,e.adler>>>16),h5(i,e.adler&65535)),Yd(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?uc:OF)},Rke=e=>{if(!e||!e.state)return va;const t=e.state.status;return t!==ww&&t!==LA&&t!==N3&&t!==R3&&t!==_3&&t!==ch&&t!==H5?Ru(e,va):(e.state=null,t===ch?Ru(e,ike):uc)},_ke=(e,t)=>{let n=t.length;if(!e||!e.state)return va;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==ww||r.lookahead)return va;if(i===1&&(e.adler=yb(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(cu(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,h1(r);r.lookahead>=Qt;){let l=r.strstart,f=r.lookahead-(Qt-1);do r.ins_h=Vu(r,r.ins_h,r.window[l+Qt-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--f);r.strstart=l,r.lookahead=Qt-1,h1(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Qt-1,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,uc};var Pke=Ike,Dke=KQ,Lke=XQ,Oke=GQ,jke=Tke,Bke=Nke,Fke=Rke,zke=_ke,$ke="pako deflate (from Nodeca project)",x2={deflateInit:Pke,deflateInit2:Dke,deflateReset:Lke,deflateResetKeep:Oke,deflateSetHeader:jke,deflate:Bke,deflateEnd:Fke,deflateSetDictionary:zke,deflateInfo:$ke};const Hke=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Vke=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Hke(n,r)&&(e[r]=n[r])}}return e},Wke=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let o=e[r];n.set(o,i),i+=o.length}return n},vw={assign:Vke,flattenChunks:Wke};let YQ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{YQ=!1}const Ub=new Uint8Array(256);for(let e=0;e<256;e++)Ub[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ub[254]=Ub[254]=1;var Gke=e=>{let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const Xke=(e,t)=>{if(t<65534&&e.subarray&&YQ)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var Kke=(e,t)=>{let n,r;const i=t||e.length,s=new Array(i*2);for(r=0,n=0;n<i;){let o=e[n++];if(o<128){s[r++]=o;continue}let a=Ub[o];if(a>4){s[r++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<i;)o=o<<6|e[n++]&63,a--;if(a>1){s[r++]=65533;continue}o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|o&1023)}return Xke(s,r)},Yke=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Ub[e[n]]>t?n:t},xb={string2buf:Gke,buf2string:Kke,utf8border:Yke};function Zke(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ZQ=Zke;const qQ=Object.prototype.toString,{Z_NO_FLUSH:qke,Z_SYNC_FLUSH:Qke,Z_FULL_FLUSH:Jke,Z_FINISH:eSe,Z_OK:S4,Z_STREAM_END:tSe,Z_DEFAULT_COMPRESSION:nSe,Z_DEFAULT_STRATEGY:rSe,Z_DEFLATED:iSe}=i6;function Ey(e){this.options=vw.assign({level:nSe,method:iSe,chunkSize:16384,windowBits:15,memLevel:8,strategy:rSe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZQ,this.strm.avail_out=0;let n=x2.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==S4)throw new Error(d1[n]);if(t.header&&x2.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=xb.string2buf(t.dictionary):qQ.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=x2.deflateSetDictionary(this.strm,r),n!==S4)throw new Error(d1[n]);this._dict_set=!0}}Ey.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?eSe:qke,typeof e=="string"?n.input=xb.string2buf(e):qQ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Qke||s===Jke)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=x2.deflate(n,s),i===tSe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=x2.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===S4;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Ey.prototype.onData=function(e){this.chunks.push(e)};Ey.prototype.onEnd=function(e){e===S4&&(this.result=vw.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function GI(e,t){const n=new Ey(t);if(n.push(e,!0),n.err)throw n.msg||d1[n.err];return n.result}function sSe(e,t){return t=t||{},t.raw=!0,GI(e,t)}function oSe(e,t){return t=t||{},t.gzip=!0,GI(e,t)}var aSe=Ey,lSe=GI,cSe=sSe,fSe=oSe,dSe=i6,uSe={Deflate:aSe,deflate:lSe,deflateRaw:cSe,gzip:fSe,constants:dSe};const _U=30,hSe=12;var pSe=function(t,n){let r,i,s,o,a,l,f,c,d,u,h,g,y,U,x,v,E,k,M,S,A,I,R,P;const _=t.state;r=t.next_in,R=t.input,i=r+(t.avail_in-5),s=t.next_out,P=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=_.dmax,f=_.wsize,c=_.whave,d=_.wnext,u=_.window,h=_.hold,g=_.bits,y=_.lencode,U=_.distcode,x=(1<<_.lenbits)-1,v=(1<<_.distbits)-1;e:do{g<15&&(h+=R[r++]<<g,g+=8,h+=R[r++]<<g,g+=8),E=y[h&x];t:for(;;){if(k=E>>>24,h>>>=k,g-=k,k=E>>>16&255,k===0)P[s++]=E&65535;else if(k&16){M=E&65535,k&=15,k&&(g<k&&(h+=R[r++]<<g,g+=8),M+=h&(1<<k)-1,h>>>=k,g-=k),g<15&&(h+=R[r++]<<g,g+=8,h+=R[r++]<<g,g+=8),E=U[h&v];n:for(;;){if(k=E>>>24,h>>>=k,g-=k,k=E>>>16&255,k&16){if(S=E&65535,k&=15,g<k&&(h+=R[r++]<<g,g+=8,g<k&&(h+=R[r++]<<g,g+=8)),S+=h&(1<<k)-1,S>l){t.msg="invalid distance too far back",_.mode=_U;break e}if(h>>>=k,g-=k,k=s-o,S>k){if(k=S-k,k>c&&_.sane){t.msg="invalid distance too far back",_.mode=_U;break e}if(A=0,I=u,d===0){if(A+=f-k,k<M){M-=k;do P[s++]=u[A++];while(--k);A=s-S,I=P}}else if(d<k){if(A+=f+d-k,k-=d,k<M){M-=k;do P[s++]=u[A++];while(--k);if(A=0,d<M){k=d,M-=k;do P[s++]=u[A++];while(--k);A=s-S,I=P}}}else if(A+=d-k,k<M){M-=k;do P[s++]=u[A++];while(--k);A=s-S,I=P}for(;M>2;)P[s++]=I[A++],P[s++]=I[A++],P[s++]=I[A++],M-=3;M&&(P[s++]=I[A++],M>1&&(P[s++]=I[A++]))}else{A=s-S;do P[s++]=P[A++],P[s++]=P[A++],P[s++]=P[A++],M-=3;while(M>2);M&&(P[s++]=P[A++],M>1&&(P[s++]=P[A++]))}}else if(k&64){t.msg="invalid distance code",_.mode=_U;break e}else{E=U[(E&65535)+(h&(1<<k)-1)];continue n}break}}else if(k&64)if(k&32){_.mode=hSe;break e}else{t.msg="invalid literal/length code",_.mode=_U;break e}else{E=y[(E&65535)+(h&(1<<k)-1)];continue t}break}}while(r<i&&s<a);M=g>>3,r-=M,g-=M<<3,h&=(1<<g)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=s<a?257+(a-s):257-(s-a),_.hold=h,_.bits=g};const xp=15,BF=852,FF=592,zF=0,Lk=1,$F=2,mSe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gSe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),bSe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ySe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),USe=(e,t,n,r,i,s,o,a)=>{const l=a.bits;let f=0,c=0,d=0,u=0,h=0,g=0,y=0,U=0,x=0,v=0,E,k,M,S,A,I=null,R=0,P;const _=new Uint16Array(xp+1),O=new Uint16Array(xp+1);let V=null,j=0,F,z,H;for(f=0;f<=xp;f++)_[f]=0;for(c=0;c<r;c++)_[t[n+c]]++;for(h=l,u=xp;u>=1&&_[u]===0;u--);if(h>u&&(h=u),u===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<u&&_[d]===0;d++);for(h<d&&(h=d),U=1,f=1;f<=xp;f++)if(U<<=1,U-=_[f],U<0)return-1;if(U>0&&(e===zF||u!==1))return-1;for(O[1]=0,f=1;f<xp;f++)O[f+1]=O[f]+_[f];for(c=0;c<r;c++)t[n+c]!==0&&(o[O[t[n+c]]++]=c);if(e===zF?(I=V=o,P=19):e===Lk?(I=mSe,R-=257,V=gSe,j-=257,P=256):(I=bSe,V=ySe,P=-1),v=0,c=0,f=d,A=s,g=h,y=0,M=-1,x=1<<h,S=x-1,e===Lk&&x>BF||e===$F&&x>FF)return 1;for(;;){F=f-y,o[c]<P?(z=0,H=o[c]):o[c]>P?(z=V[j+o[c]],H=I[R+o[c]]):(z=96,H=0),E=1<<f-y,k=1<<g,d=k;do k-=E,i[A+(v>>y)+k]=F<<24|z<<16|H|0;while(k!==0);for(E=1<<f-1;v&E;)E>>=1;if(E!==0?(v&=E-1,v+=E):v=0,c++,--_[f]===0){if(f===u)break;f=t[n+o[c]]}if(f>h&&(v&S)!==M){for(y===0&&(y=h),A+=d,g=f-y,U=1<<g;g+y<u&&(U-=_[g+y],!(U<=0));)g++,U<<=1;if(x+=1<<g,e===Lk&&x>BF||e===$F&&x>FF)return 1;M=v&S,i[M]=h<<24|g<<16|A-s|0}}return v!==0&&(i[A+v]=f-y<<24|64<<16|0),a.bits=h,0};var w2=USe;const xSe=0,QQ=1,JQ=2,{Z_FINISH:HF,Z_BLOCK:wSe,Z_TREES:PU,Z_OK:p1,Z_STREAM_END:vSe,Z_NEED_DICT:ESe,Z_STREAM_ERROR:Sa,Z_DATA_ERROR:eJ,Z_MEM_ERROR:tJ,Z_BUF_ERROR:kSe,Z_DEFLATED:VF}=i6,nJ=1,WF=2,GF=3,XF=4,KF=5,YF=6,ZF=7,qF=8,QF=9,JF=10,C4=11,rf=12,Ok=13,ez=14,jk=15,tz=16,nz=17,rz=18,iz=19,DU=20,LU=21,sz=22,oz=23,az=24,lz=25,cz=26,Bk=27,fz=28,dz=29,nr=30,rJ=31,SSe=32,CSe=852,ASe=592,MSe=15,TSe=MSe,uz=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function ISe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const iJ=e=>{if(!e||!e.state)return Sa;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=nJ,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(CSe),t.distcode=t.distdyn=new Int32Array(ASe),t.sane=1,t.back=-1,p1},sJ=e=>{if(!e||!e.state)return Sa;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,iJ(e)},oJ=(e,t)=>{let n;if(!e||!e.state)return Sa;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Sa:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,sJ(e))},aJ=(e,t)=>{if(!e)return Sa;const n=new ISe;e.state=n,n.window=null;const r=oJ(e,t);return r!==p1&&(e.state=null),r},NSe=e=>aJ(e,TSe);let hz=!0,Fk,zk;const RSe=e=>{if(hz){Fk=new Int32Array(512),zk=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(w2(QQ,e.lens,0,288,Fk,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;w2(JQ,e.lens,0,32,zk,0,e.work,{bits:5}),hz=!1}e.lencode=Fk,e.lenbits=9,e.distcode=zk,e.distbits=5},lJ=(e,t,n,r)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},_Se=(e,t)=>{let n,r,i,s,o,a,l,f,c,d,u,h,g,y,U=0,x,v,E,k,M,S,A,I;const R=new Uint8Array(4);let P,_;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Sa;n=e.state,n.mode===rf&&(n.mode=Ok),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,f=n.hold,c=n.bits,d=a,u=l,I=p1;e:for(;;)switch(n.mode){case nJ:if(n.wrap===0){n.mode=Ok;break}for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.wrap&2&&f===35615){n.check=0,R[0]=f&255,R[1]=f>>>8&255,n.check=vi(n.check,R,2,0),f=0,c=0,n.mode=WF;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=nr;break}if((f&15)!==VF){e.msg="unknown compression method",n.mode=nr;break}if(f>>>=4,c-=4,A=(f&15)+8,n.wbits===0)n.wbits=A;else if(A>n.wbits){e.msg="invalid window size",n.mode=nr;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=f&512?JF:rf,f=0,c=0;break;case WF:for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.flags=f,(n.flags&255)!==VF){e.msg="unknown compression method",n.mode=nr;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=nr;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=vi(n.check,R,2,0)),f=0,c=0,n.mode=GF;case GF:for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.head&&(n.head.time=f),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,R[2]=f>>>16&255,R[3]=f>>>24&255,n.check=vi(n.check,R,4,0)),f=0,c=0,n.mode=XF;case XF:for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=vi(n.check,R,2,0)),f=0,c=0,n.mode=KF;case KF:if(n.flags&1024){for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=vi(n.check,R,2,0)),f=0,c=0}else n.head&&(n.head.extra=null);n.mode=YF;case YF:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+h),A)),n.flags&512&&(n.check=vi(n.check,r,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=ZF;case ZF:if(n.flags&2048){if(a===0)break e;h=0;do A=r[s+h++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A));while(A&&h<a);if(n.flags&512&&(n.check=vi(n.check,r,h,s)),a-=h,s+=h,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=qF;case qF:if(n.flags&4096){if(a===0)break e;h=0;do A=r[s+h++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A));while(A&&h<a);if(n.flags&512&&(n.check=vi(n.check,r,h,s)),a-=h,s+=h,A)break e}else n.head&&(n.head.comment=null);n.mode=QF;case QF:if(n.flags&512){for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f!==(n.check&65535)){e.msg="header crc mismatch",n.mode=nr;break}f=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=rf;break;case JF:for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}e.adler=n.check=uz(f),f=0,c=0,n.mode=C4;case C4:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,ESe;e.adler=n.check=1,n.mode=rf;case rf:if(t===wSe||t===PU)break e;case Ok:if(n.last){f>>>=c&7,c-=c&7,n.mode=Bk;break}for(;c<3;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}switch(n.last=f&1,f>>>=1,c-=1,f&3){case 0:n.mode=ez;break;case 1:if(RSe(n),n.mode=DU,t===PU){f>>>=2,c-=2;break e}break;case 2:n.mode=nz;break;case 3:e.msg="invalid block type",n.mode=nr}f>>>=2,c-=2;break;case ez:for(f>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=nr;break}if(n.length=f&65535,f=0,c=0,n.mode=jk,t===PU)break e;case jk:n.mode=tz;case tz:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;i.set(r.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=rf;break;case nz:for(;c<14;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.nlen=(f&31)+257,f>>>=5,c-=5,n.ndist=(f&31)+1,f>>>=5,c-=5,n.ncode=(f&15)+4,f>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=nr;break}n.have=0,n.mode=rz;case rz:for(;n.have<n.ncode;){for(;c<3;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.lens[O[n.have++]]=f&7,f>>>=3,c-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},I=w2(xSe,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,I){e.msg="invalid code lengths set",n.mode=nr;break}n.have=0,n.mode=iz;case iz:for(;n.have<n.nlen+n.ndist;){for(;U=n.lencode[f&(1<<n.lenbits)-1],x=U>>>24,v=U>>>16&255,E=U&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(E<16)f>>>=x,c-=x,n.lens[n.have++]=E;else{if(E===16){for(_=x+2;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f>>>=x,c-=x,n.have===0){e.msg="invalid bit length repeat",n.mode=nr;break}A=n.lens[n.have-1],h=3+(f&3),f>>>=2,c-=2}else if(E===17){for(_=x+3;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=x,c-=x,A=0,h=3+(f&7),f>>>=3,c-=3}else{for(_=x+7;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=x,c-=x,A=0,h=11+(f&127),f>>>=7,c-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=nr;break}for(;h--;)n.lens[n.have++]=A}}if(n.mode===nr)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=nr;break}if(n.lenbits=9,P={bits:n.lenbits},I=w2(QQ,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,I){e.msg="invalid literal/lengths set",n.mode=nr;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},I=w2(JQ,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,I){e.msg="invalid distances set",n.mode=nr;break}if(n.mode=DU,t===PU)break e;case DU:n.mode=LU;case LU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,pSe(e,u),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,f=n.hold,c=n.bits,n.mode===rf&&(n.back=-1);break}for(n.back=0;U=n.lencode[f&(1<<n.lenbits)-1],x=U>>>24,v=U>>>16&255,E=U&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(v&&!(v&240)){for(k=x,M=v,S=E;U=n.lencode[S+((f&(1<<k+M)-1)>>k)],x=U>>>24,v=U>>>16&255,E=U&65535,!(k+x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=k,c-=k,n.back+=k}if(f>>>=x,c-=x,n.back+=x,n.length=E,v===0){n.mode=cz;break}if(v&32){n.back=-1,n.mode=rf;break}if(v&64){e.msg="invalid literal/length code",n.mode=nr;break}n.extra=v&15,n.mode=sz;case sz:if(n.extra){for(_=n.extra;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oz;case oz:for(;U=n.distcode[f&(1<<n.distbits)-1],x=U>>>24,v=U>>>16&255,E=U&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(!(v&240)){for(k=x,M=v,S=E;U=n.distcode[S+((f&(1<<k+M)-1)>>k)],x=U>>>24,v=U>>>16&255,E=U&65535,!(k+x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=k,c-=k,n.back+=k}if(f>>>=x,c-=x,n.back+=x,v&64){e.msg="invalid distance code",n.mode=nr;break}n.offset=E,n.extra=v&15,n.mode=az;case az:if(n.extra){for(_=n.extra;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=nr;break}n.mode=lz;case lz:if(l===0)break e;if(h=u-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=nr;break}h>n.wnext?(h-=n.wnext,g=n.wsize-h):g=n.wnext-h,h>n.length&&(h=n.length),y=n.window}else y=i,g=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[o++]=y[g++];while(--h);n.length===0&&(n.mode=LU);break;case cz:if(l===0)break e;i[o++]=n.length,l--,n.mode=LU;break;case Bk:if(n.wrap){for(;c<32;){if(a===0)break e;a--,f|=r[s++]<<c,c+=8}if(u-=l,e.total_out+=u,n.total+=u,u&&(e.adler=n.check=n.flags?vi(n.check,i,u,o-u):yb(n.check,i,u,o-u)),u=l,(n.flags?f:uz(f))!==n.check){e.msg="incorrect data check",n.mode=nr;break}f=0,c=0}n.mode=fz;case fz:if(n.wrap&&n.flags){for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=nr;break}f=0,c=0}n.mode=dz;case dz:I=vSe;break e;case nr:I=eJ;break e;case rJ:return tJ;case SSe:default:return Sa}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,(n.wsize||u!==e.avail_out&&n.mode<nr&&(n.mode<Bk||t!==HF))&&lJ(e,e.output,e.next_out,u-e.avail_out),d-=e.avail_in,u-=e.avail_out,e.total_in+=d,e.total_out+=u,n.total+=u,n.wrap&&u&&(e.adler=n.check=n.flags?vi(n.check,i,u,e.next_out-u):yb(n.check,i,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(n.mode===rf?128:0)+(n.mode===DU||n.mode===jk?256:0),(d===0&&u===0||t===HF)&&I===p1&&(I=kSe),I},PSe=e=>{if(!e||!e.state)return Sa;let t=e.state;return t.window&&(t.window=null),e.state=null,p1},DSe=(e,t)=>{if(!e||!e.state)return Sa;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,p1):Sa},LSe=(e,t)=>{const n=t.length;let r,i,s;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==C4)?Sa:r.mode===C4&&(i=1,i=yb(i,t,n,0),i!==r.check)?eJ:(s=lJ(e,t,n,n),s?(r.mode=rJ,tJ):(r.havedict=1,p1))};var OSe=sJ,jSe=oJ,BSe=iJ,FSe=NSe,zSe=aJ,$Se=_Se,HSe=PSe,VSe=DSe,WSe=LSe,GSe="pako inflate (from Nodeca project)",bf={inflateReset:OSe,inflateReset2:jSe,inflateResetKeep:BSe,inflateInit:FSe,inflateInit2:zSe,inflate:$Se,inflateEnd:HSe,inflateGetHeader:VSe,inflateSetDictionary:WSe,inflateInfo:GSe};function XSe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var KSe=XSe;const cJ=Object.prototype.toString,{Z_NO_FLUSH:YSe,Z_FINISH:ZSe,Z_OK:wb,Z_STREAM_END:$k,Z_NEED_DICT:Hk,Z_STREAM_ERROR:qSe,Z_DATA_ERROR:pz,Z_MEM_ERROR:QSe}=i6;function ky(e){this.options=vw.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZQ,this.strm.avail_out=0;let n=bf.inflateInit2(this.strm,t.windowBits);if(n!==wb)throw new Error(d1[n]);if(this.header=new KSe,bf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=xb.string2buf(t.dictionary):cJ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=bf.inflateSetDictionary(this.strm,t.dictionary),n!==wb)))throw new Error(d1[n])}ky.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?ZSe:YSe,cJ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=bf.inflate(n,o),s===Hk&&i&&(s=bf.inflateSetDictionary(n,i),s===wb?s=bf.inflate(n,o):s===pz&&(s=Hk));n.avail_in>0&&s===$k&&n.state.wrap>0&&e[n.next_in]!==0;)bf.inflateReset(n),s=bf.inflate(n,o);switch(s){case qSe:case pz:case Hk:case QSe:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===$k))if(this.options.to==="string"){let l=xb.utf8border(n.output,n.next_out),f=n.next_out-l,c=xb.buf2string(n.output,l);n.next_out=f,n.avail_out=r-f,f&&n.output.set(n.output.subarray(l,l+f),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===wb&&a===0)){if(s===$k)return s=bf.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};ky.prototype.onData=function(e){this.chunks.push(e)};ky.prototype.onEnd=function(e){e===wb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vw.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function XI(e,t){const n=new ky(t);if(n.push(e),n.err)throw n.msg||d1[n.err];return n.result}function JSe(e,t){return t=t||{},t.raw=!0,XI(e,t)}var eCe=ky,tCe=XI,nCe=JSe,rCe=XI,iCe=i6,sCe={Inflate:eCe,inflate:tCe,inflateRaw:nCe,ungzip:rCe,constants:iCe};const{Deflate:oqe,deflate:oCe,deflateRaw:aqe,gzip:lqe}=uSe,{Inflate:cqe,inflate:aCe,inflateRaw:fqe,ungzip:dqe}=sCe;var lCe=oCe,cCe=aCe;const fCe="#ffffff",dCe="#000000",uCe=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],hCe=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pCe=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],mCe=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],gCe=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],bCe=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],yCe=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],UCe=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],xCe=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],wCe=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],vCe=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],ECe=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],kCe=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],Mi={white:fCe,black:dCe,gray:uCe,red:hCe,pink:pCe,grape:mCe,violet:gCe,indigo:bCe,blue:yCe,cyan:UCe,teal:xCe,green:wCe,lime:vCe,yellow:ECe,orange:kCe};let KI=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var Vk,mz;function SCe(){if(mz)return Vk;mz=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Au=="object"&&Au&&Au.Object===Object&&Au,f=typeof self=="object"&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,u=d.toString,h=Math.max,g=Math.min,y=function(){return c.Date.now()};function U(S,A,I){var R,P,_,O,V,j,F=0,z=!1,H=!1,G=!0;if(typeof S!="function")throw new TypeError(e);A=M(A)||0,v(I)&&(z=!!I.leading,H="maxWait"in I,_=H?h(M(I.maxWait)||0,A):_,G="trailing"in I?!!I.trailing:G);function W(ie){var we=R,ke=P;return R=P=void 0,F=ie,O=S.apply(ke,we),O}function B(ie){return F=ie,V=setTimeout(Y,A),z?W(ie):O}function X(ie){var we=ie-j,ke=ie-F,Re=A-we;return H?g(Re,_-ke):Re}function q(ie){var we=ie-j,ke=ie-F;return j===void 0||we>=A||we<0||H&&ke>=_}function Y(){var ie=y();if(q(ie))return oe(ie);V=setTimeout(Y,X(ie))}function oe(ie){return V=void 0,G&&R?W(ie):(R=P=void 0,O)}function ge(){V!==void 0&&clearTimeout(V),F=0,R=j=P=V=void 0}function he(){return V===void 0?O:oe(y())}function ce(){var ie=y(),we=q(ie);if(R=arguments,P=this,j=ie,we){if(V===void 0)return B(j);if(H)return V=setTimeout(Y,A),W(j)}return V===void 0&&(V=setTimeout(Y,A)),O}return ce.cancel=ge,ce.flush=he,ce}function x(S,A,I){var R=!0,P=!0;if(typeof S!="function")throw new TypeError(e);return v(I)&&(R="leading"in I?!!I.leading:R,P="trailing"in I?!!I.trailing:P),U(S,A,{leading:R,maxWait:A,trailing:P})}function v(S){var A=typeof S;return!!S&&(A=="object"||A=="function")}function E(S){return!!S&&typeof S=="object"}function k(S){return typeof S=="symbol"||E(S)&&u.call(S)==n}function M(S){if(typeof S=="number")return S;if(k(S))return t;if(v(S)){var A=typeof S.valueOf=="function"?S.valueOf():S;S=v(A)?A+"":A}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var I=s.test(S);return I||o.test(S)?a(S.slice(2),I?2:8):i.test(S)?t:+S}return Vk=x,Vk}var CCe=SCe();const Sy=Ia(CCe);var P3={exports:{}},ACe=P3.exports,gz;function MCe(){return gz||(gz=1,function(e,t){(function(n,r){e.exports=r()})(ACe,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(f,c){this._listeners[f]=this._listeners[f]||[],this._listeners[f].indexOf(c)<0&&this._listeners[f].push(c)},n.prototype.removeEventListener=function(f,c){if(this._listeners[f]){var d=this._listeners[f].indexOf(c);d>=0&&this._listeners[f].splice(d,1)}},n.prototype.dispatchEvent=function(f){if(this._listeners[f.type]&&this._listeners[f.type].length)for(var c=this._listeners[f.type].slice(),d=0,u=c.length;d<u;++d)c[d].call(this,f)};var r=function(f){return typeof f.constructor=="function"&&f.constructor.name==="GeneratorFunction"},i=function(f){return{next:function(){var c=f();return c?{value:c}:{done:!0}}}},s=function(f){var c=!1;return{next:function(){return c?{done:!0}:(c=!0,{value:f})}}},o=function(f,c){var d=typeof f;if(d==="object"){if(typeof f.next=="function")return f;if(typeof f.then=="function")return s(f)}return d==="function"?r(f)?f():i(f):s(c.resolve(f))},a=function(f,c,d){this.target=f,this.type=c,this.data=d},l=function(f,c,d){if(n.call(this),typeof c!="number"||Math.floor(c)!==c||c<1)throw new Error("Invalid concurrency");this._concurrency=c,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(f,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(f){return typeof f<"u"&&(this._concurrency=f,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var f=this,c=this._options.promise;return this._promise=new c(function(d,u){f._callbacks={reject:u,resolve:d},f._proceed()}),this._promise},l.prototype._fireEvent=function(f,c){this.dispatchEvent(new a(this,f,c))},l.prototype._settle=function(f){f?this._callbacks.reject(f):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(f,c){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:f,result:c}),this._proceed())},l.prototype._onPooledPromiseRejected=function(f,c){this._size--,this.active()&&(this._fireEvent("rejected",{promise:f,error:c}),this._settle(c||new Error("Unknown error")))},l.prototype._trackPromise=function(f){var c=this;f.then(function(d){c._onPooledPromiseFulfilled(f,d)},function(d){c._onPooledPromiseRejected(f,d)}).catch(function(d){c._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var f={done:!1};this._size<this._concurrency&&!(f=this._iterator.next()).done;)this._size++,this._trackPromise(f.value);this._done=f===null||!!f.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})}(P3)),P3.exports}var TCe=MCe();const ICe=Ia(TCe);function OA(e,t,n){if(e&&e.length){const[r,i]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[f,c]=l;l[0]=(f-r)*o-(c-i)*a+r,l[1]=(f-r)*a+(c-i)*o+i}}}function NCe(e,t,n){const r=[];e.forEach(i=>r.push(...i)),OA(r,t,n)}function RCe(e,t){return e[0]===t[0]&&e[1]===t[1]}function _Ce(e,t,n,r=1){const i=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(i)for(const f of o)OA(f,a,i);const l=PCe(o,s,r);if(i){for(const f of o)OA(f,a,-i);NCe(l,a,-i)}return l}function PCe(e,t,n){const r=[];for(const f of e){const c=[...f];RCe(c[0],c[c.length-1])||c.push([c[0][0],c[0][1]]),c.length>2&&r.push(c)}const i=[];t=Math.max(t,.1);const s=[];for(const f of r)for(let c=0;c<f.length-1;c++){const d=f[c],u=f[c+1];if(d[1]!==u[1]){const h=Math.min(d[1],u[1]);s.push({ymin:h,ymax:Math.max(d[1],u[1]),x:h===d[1]?d[0]:u[0],islope:(u[0]-d[0])/(u[1]-d[1])})}}if(s.sort((f,c)=>f.ymin<c.ymin?-1:f.ymin>c.ymin?1:f.x<c.x?-1:f.x>c.x?1:f.ymax===c.ymax?0:(f.ymax-c.ymax)/Math.abs(f.ymax-c.ymax)),!s.length)return i;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let f=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)f=d;s.splice(0,f+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(f=>!(f.edge.ymax<=a)),o.sort((f,c)=>f.edge.x===c.edge.x?0:(f.edge.x-c.edge.x)/Math.abs(f.edge.x-c.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let f=0;f<o.length;f=f+2){const c=f+1;if(c>=o.length)break;const d=o[f].edge,u=o[c].edge;i.push([[Math.round(d.x),a],[Math.round(u.x),a]])}a+=n,o.forEach(f=>{f.edge.x=f.edge.x+n*f.edge.islope}),l++}return i}function Cy(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.max(i,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),_Ce(e,i,r,s||1)}class YI{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=Cy(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Ew(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class DCe extends YI{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),s=Cy(t,i),o=Math.PI/180*n.hachureAngle,a=[],l=r*.5*Math.cos(o),f=r*.5*Math.sin(o);for(const[d,u]of s)Ew([d,u])&&a.push([[d[0]-l,d[1]+f],[...u]],[[d[0]+l,d[1]-f],[...u]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class LCe extends YI{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,i);return r.ops=r.ops.concat(s.ops),r}}class OCe{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=Cy(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=i/4;for(const a of t){const l=Ew(a),f=l/i,c=Math.ceil(f)-1,d=l-c*i,u=(a[0][0]+a[1][0])/2-i/4,h=Math.min(a[0][1],a[1][1]);for(let g=0;g<c;g++){const y=h+d+g*i,U=u-o+Math.random()*2*o,x=y-o+Math.random()*2*o,v=this.helper.ellipse(U,x,s,s,n);r.push(...v.ops)}}return{type:"fillSketch",ops:r}}}class jCe{constructor(t){this.helper=t}fillPolygons(t,n){const r=Cy(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=Ew(o),l=Math.floor(a/(r+i)),f=(a+i-l*(r+i))/2;let c=o[0],d=o[1];c[0]>d[0]&&(c=o[1],d=o[0]);const u=Math.atan((d[1]-c[1])/(d[0]-c[0]));for(let h=0;h<l;h++){const g=h*(r+i),y=g+r,U=[c[0]+g*Math.cos(u)+f*Math.cos(u),c[1]+g*Math.sin(u)+f*Math.sin(u)],x=[c[0]+y*Math.cos(u)+f*Math.cos(u),c[1]+y*Math.sin(u)+f*Math.sin(u)];s.push(...this.helper.doubleLineOps(U[0],U[1],x[0],x[1],n))}}),s}}class BCe{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const s=Cy(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(s=>{const o=Ew(s),a=Math.round(o/(2*n));let l=s[0],f=s[1];l[0]>f[0]&&(l=s[1],f=s[0]);const c=Math.atan((f[1]-l[1])/(f[0]-l[0]));for(let d=0;d<a;d++){const u=d*2*n,h=(d+1)*2*n,g=Math.sqrt(2*Math.pow(n,2)),y=[l[0]+u*Math.cos(c),l[1]+u*Math.sin(c)],U=[l[0]+h*Math.cos(c),l[1]+h*Math.sin(c)],x=[y[0]+g*Math.cos(c+Math.PI/4),y[1]+g*Math.sin(c+Math.PI/4)];i.push(...this.helper.doubleLineOps(y[0],y[1],x[0],x[1],r),...this.helper.doubleLineOps(x[0],x[1],U[0],U[1],r))}}),i}}const Xs={};function FCe(e,t){let n=e.fillStyle||"hachure";if(!Xs[n])switch(n){case"zigzag":Xs[n]||(Xs[n]=new DCe(t));break;case"cross-hatch":Xs[n]||(Xs[n]=new LCe(t));break;case"dots":Xs[n]||(Xs[n]=new OCe(t));break;case"dashed":Xs[n]||(Xs[n]=new jCe(t));break;case"zigzag-line":Xs[n]||(Xs[n]=new BCe(t));break;case"hachure":default:n="hachure",Xs[n]||(Xs[n]=new YI(t));break}return Xs[n]}function zCe(){return Math.floor(Math.random()*2**31)}class fJ{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const $Ce=0,jA=1,dJ=2,OU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function HCe(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:$Ce,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:jA,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:dJ,text:""},t}function Wk(e,t){return e.type===t}function ZI(e){const t=[],n=HCe(e);let r="BOD",i=0,s=n[i];for(;!Wk(s,dJ);){let o=0;const a=[];if(r==="BOD")if(s.text==="M"||s.text==="m")i++,o=OU[s.text],r=s.text;else return ZI("M0,0"+e);else Wk(s,jA)?o=OU[r]:(i++,o=OU[s.text],r=s.text);if(i+o<n.length){for(let l=i;l<i+o;l++){const f=n[l];if(Wk(f,jA))a[a.length]=+f.text;else throw new Error("Param not a number: "+r+","+f.text)}if(typeof OU[r]=="number"){const l={key:r,data:a};t.push(l),i+=o,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function uJ(e){let t=0,n=0,r=0,i=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[r,i]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=r,n=i;break}return s}function hJ(e){const t=[];let n="",r=0,i=0,s=0,o=0,a=0,l=0;for(const{key:f,data:c}of e){switch(f){case"M":t.push({key:"M",data:[...c]}),[r,i]=c,[s,o]=c;break;case"C":t.push({key:"C",data:[...c]}),r=c[4],i=c[5],a=c[2],l=c[3];break;case"L":t.push({key:"L",data:[...c]}),[r,i]=c;break;case"H":r=c[0],t.push({key:"L",data:[r,i]});break;case"V":i=c[0],t.push({key:"L",data:[r,i]});break;case"S":{let d=0,u=0;n==="C"||n==="S"?(d=r+(r-a),u=i+(i-l)):(d=r,u=i),t.push({key:"C",data:[d,u,...c]}),a=c[0],l=c[1],r=c[2],i=c[3];break}case"T":{const[d,u]=c;let h=0,g=0;n==="Q"||n==="T"?(h=r+(r-a),g=i+(i-l)):(h=r,g=i);const y=r+2*(h-r)/3,U=i+2*(g-i)/3,x=d+2*(h-d)/3,v=u+2*(g-u)/3;t.push({key:"C",data:[y,U,x,v,d,u]}),a=h,l=g,r=d,i=u;break}case"Q":{const[d,u,h,g]=c,y=r+2*(d-r)/3,U=i+2*(u-i)/3,x=h+2*(d-h)/3,v=g+2*(u-g)/3;t.push({key:"C",data:[y,U,x,v,h,g]}),a=d,l=u,r=h,i=g;break}case"A":{const d=Math.abs(c[0]),u=Math.abs(c[1]),h=c[2],g=c[3],y=c[4],U=c[5],x=c[6];d===0||u===0?(t.push({key:"C",data:[r,i,U,x,U,x]}),r=U,i=x):(r!==U||i!==x)&&(pJ(r,i,U,x,d,u,h,g,y).forEach(function(E){t.push({key:"C",data:E})}),r=U,i=x);break}case"Z":t.push({key:"Z",data:[]}),r=s,i=o;break}n=f}return t}function VCe(e){return Math.PI*e/180}function p5(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function pJ(e,t,n,r,i,s,o,a,l,f){const c=VCe(o);let d=[],u=0,h=0,g=0,y=0;if(f)[u,h,g,y]=f;else{[e,t]=p5(e,t,-c),[n,r]=p5(n,r,-c);const O=(e-n)/2,V=(t-r)/2;let j=O*O/(i*i)+V*V/(s*s);j>1&&(j=Math.sqrt(j),i=j*i,s=j*s);const F=a===l?-1:1,z=i*i,H=s*s,G=z*H-z*V*V-H*O*O,W=z*V*V+H*O*O,B=F*Math.sqrt(Math.abs(G/W));g=B*i*V/s+(e+n)/2,y=B*-s*O/i+(t+r)/2,u=Math.asin(parseFloat(((t-y)/s).toFixed(9))),h=Math.asin(parseFloat(((r-y)/s).toFixed(9))),e<g&&(u=Math.PI-u),n<g&&(h=Math.PI-h),u<0&&(u=Math.PI*2+u),h<0&&(h=Math.PI*2+h),l&&u>h&&(u=u-Math.PI*2),!l&&h>u&&(h=h-Math.PI*2)}let U=h-u;if(Math.abs(U)>Math.PI*120/180){const O=h,V=n,j=r;l&&h>u?h=u+Math.PI*120/180*1:h=u+Math.PI*120/180*-1,n=g+i*Math.cos(h),r=y+s*Math.sin(h),d=pJ(n,r,V,j,i,s,o,0,l,[h,O,g,y])}U=h-u;const x=Math.cos(u),v=Math.sin(u),E=Math.cos(h),k=Math.sin(h),M=Math.tan(U/4),S=4/3*i*M,A=4/3*s*M,I=[e,t],R=[e+S*v,t-A*x],P=[n+S*k,r-A*E],_=[n,r];if(R[0]=2*I[0]-R[0],R[1]=2*I[1]-R[1],f)return[R,P,_].concat(d);{d=[R,P,_].concat(d);const O=[];for(let V=0;V<d.length;V+=3){const j=p5(d[V][0],d[V][1],c),F=p5(d[V+1][0],d[V+1][1],c),z=p5(d[V+2][0],d[V+2][1],c);O.push([j[0],j[1],F[0],F[1],z[0],z[1]])}return O}}const WCe={randOffset:ZCe,randOffsetWithRange:qCe,ellipse:KCe,doubleLineOps:QCe};function mJ(e,t,n,r,i){return{type:"path",ops:Xf(e,t,n,r,i)}}function D3(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...Xf(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&i.push(...Xf(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return mJ(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function GCe(e,t){return D3(e,!0,t)}function XCe(e,t,n,r,i){const s=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return GCe(s,i)}function bz(e,t){let n=wz(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const r=wz(e,1.5*(1+t.roughness*.22),JCe(t));n=n.concat(r)}return{type:"path",ops:n}}function KCe(e,t,n,r,i){const s=gJ(n,r,i);return BA(e,t,i,s).opset}function gJ(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=Math.PI*2/i;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=Ut(o*l,n),a+=Ut(a*l,n),{increment:s,rx:o,ry:a}}function BA(e,t,n,r){const[i,s]=vz(r.increment,e,t,r.rx,r.ry,1,r.increment*A4(.1,A4(.4,1,n),n),n);let o=M4(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=vz(r.increment,e,t,r.rx,r.ry,1.5,0,n),l=M4(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function yz(e,t,n,r,i,s,o,a,l){const f=e,c=t;let d=Math.abs(n/2),u=Math.abs(r/2);d+=Ut(d*.01,l),u+=Ut(u*.01,l);let h=i,g=s;for(;h<0;)h+=Math.PI*2,g+=Math.PI*2;g-h>Math.PI*2&&(h=0,g=Math.PI*2);const y=Math.PI*2/l.curveStepCount,U=Math.min(y/2,(g-h)/2),x=Ez(U,f,c,d,u,h,g,1,l);if(!l.disableMultiStroke){const v=Ez(U,f,c,d,u,h,g,1.5,l);x.push(...v)}return o&&(a?x.push(...Xf(f,c,f+d*Math.cos(h),c+u*Math.sin(h),l),...Xf(f,c,f+d*Math.cos(g),c+u*Math.sin(g),l)):x.push({op:"lineTo",data:[f,c]},{op:"lineTo",data:[f+d*Math.cos(h),c+u*Math.sin(h)]})),{type:"path",ops:x}}function Uz(e,t){const n=hJ(uJ(ZI(e))),r=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],i=[a[0],a[1]];break}case"L":r.push(...Xf(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,f,c,d,u,h]=a;r.push(...eAe(l,f,c,d,u,h,s,t)),s=[u,h];break}case"Z":r.push(...Xf(s[0],s[1],i[0],i[1],t)),s=[i[0],i[1]];break}return{type:"path",ops:r}}function Gk(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+Ut(i,t),r[0][1]+Ut(i,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[r[o][0]+Ut(i,t),r[o][1]+Ut(i,t)]})}}return{type:"fillPath",ops:n}}function jp(e,t){return FCe(t,WCe).fillPolygons(e,t)}function YCe(e,t,n,r,i,s,o){const a=e,l=t;let f=Math.abs(n/2),c=Math.abs(r/2);f+=Ut(f*.01,o),c+=Ut(c*.01,o);let d=i,u=s;for(;d<0;)d+=Math.PI*2,u+=Math.PI*2;u-d>Math.PI*2&&(d=0,u=Math.PI*2);const h=(u-d)/o.curveStepCount,g=[];for(let y=d;y<=u;y=y+h)g.push([a+f*Math.cos(y),l+c*Math.sin(y)]);return g.push([a+f*Math.cos(u),l+c*Math.sin(u)]),g.push([a,l]),jp([g],o)}function ZCe(e,t){return Ut(e,t)}function qCe(e,t,n){return A4(e,t,n)}function QCe(e,t,n,r,i){return Xf(e,t,n,r,i,!0)}function JCe(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function bJ(e){return e.randomizer||(e.randomizer=new fJ(e.seed||0)),e.randomizer.next()}function A4(e,t,n,r=1){return n.roughness*r*(bJ(n)*(t-e)+e)}function Ut(e,t,n=1){return A4(-e,e,t,n)}function Xf(e,t,n,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=xz(e,t,n,r,i,!0,!1);if(o)return a;const l=xz(e,t,n,r,i,!0,!0);return a.concat(l)}function xz(e,t,n,r,i,s,o){const a=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(a);let f=1;l<200?f=1:l>500?f=.4:f=-.0016668*l+1.233334;let c=i.maxRandomnessOffset||0;c*c*100>a&&(c=l/10);const d=c/2,u=.2+bJ(i)*.2;let h=i.bowing*i.maxRandomnessOffset*(r-t)/200,g=i.bowing*i.maxRandomnessOffset*(e-n)/200;h=Ut(h,i,f),g=Ut(g,i,f);const y=[],U=()=>Ut(d,i,f),x=()=>Ut(c,i,f),v=i.preserveVertices;return o?y.push({op:"move",data:[e+(v?0:U()),t+(v?0:U())]}):y.push({op:"move",data:[e+(v?0:Ut(c,i,f)),t+(v?0:Ut(c,i,f))]}),o?y.push({op:"bcurveTo",data:[h+e+(n-e)*u+U(),g+t+(r-t)*u+U(),h+e+2*(n-e)*u+U(),g+t+2*(r-t)*u+U(),n+(v?0:U()),r+(v?0:U())]}):y.push({op:"bcurveTo",data:[h+e+(n-e)*u+x(),g+t+(r-t)*u+x(),h+e+2*(n-e)*u+x(),g+t+2*(r-t)*u+x(),n+(v?0:x()),r+(v?0:x())]}),y}function wz(e,t,n){const r=[];r.push([e[0][0]+Ut(t,n),e[0][1]+Ut(t,n)]),r.push([e[0][0]+Ut(t,n),e[0][1]+Ut(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+Ut(t,n),e[i][1]+Ut(t,n)]),i===e.length-1&&r.push([e[i][0]+Ut(t,n),e[i][1]+Ut(t,n)]);return M4(r,null,n)}function M4(e,t,n){const r=e.length,i=[];if(r>3){const s=[],o=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<r;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...Xf(e[0][0],e[0][1],e[1][0],e[1][1],n));return i}function vz(e,t,n,r,i,s,o,a){const l=a.roughness===0,f=[],c=[];if(l){e=e/4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const u=[t+r*Math.cos(d),n+i*Math.sin(d)];f.push(u),c.push(u)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const d=Ut(.5,a)-Math.PI/2;c.push([Ut(s,a)+t+.9*r*Math.cos(d-e),Ut(s,a)+n+.9*i*Math.sin(d-e)]);const u=Math.PI*2+d-.01;for(let h=d;h<u;h=h+e){const g=[Ut(s,a)+t+r*Math.cos(h),Ut(s,a)+n+i*Math.sin(h)];f.push(g),c.push(g)}c.push([Ut(s,a)+t+r*Math.cos(d+Math.PI*2+o*.5),Ut(s,a)+n+i*Math.sin(d+Math.PI*2+o*.5)]),c.push([Ut(s,a)+t+.98*r*Math.cos(d+o),Ut(s,a)+n+.98*i*Math.sin(d+o)]),c.push([Ut(s,a)+t+.9*r*Math.cos(d+o*.5),Ut(s,a)+n+.9*i*Math.sin(d+o*.5)])}return[c,f]}function Ez(e,t,n,r,i,s,o,a,l){const f=s+Ut(.1,l),c=[];c.push([Ut(a,l)+t+.9*r*Math.cos(f-e),Ut(a,l)+n+.9*i*Math.sin(f-e)]);for(let d=f;d<=o;d=d+e)c.push([Ut(a,l)+t+r*Math.cos(d),Ut(a,l)+n+i*Math.sin(d)]);return c.push([t+r*Math.cos(o),n+i*Math.sin(o)]),c.push([t+r*Math.cos(o),n+i*Math.sin(o)]),M4(c,null,l)}function eAe(e,t,n,r,i,s,o,a){const l=[],f=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let c=[0,0];const d=a.disableMultiStroke?1:2,u=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(u?0:Ut(f[0],a)),o[1]+(u?0:Ut(f[0],a))]}),c=u?[i,s]:[i+Ut(f[h],a),s+Ut(f[h],a)],l.push({op:"bcurveTo",data:[e+Ut(f[h],a),t+Ut(f[h],a),n+Ut(f[h],a),r+Ut(f[h],a),c[0],c[1]]});return l}function m5(e){return[...e]}function tAe(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(m5(e[0]),m5(e[1]),m5(e[2]),m5(e[2]));else{const i=[];i.push(e[0],e[0]);for(let a=1;a<e.length;a++)i.push(e[a]),a===e.length-1&&i.push(e[a]);const s=[],o=1-t;r.push(m5(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],r.push(s[1],s[2],s[3])}}return r}function nAe(e,t){return Math.sqrt(L3(e,t))}function L3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function rAe(e,t,n){const r=L3(t,n);if(r===0)return L3(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),L3(e,B0(t,n,i))}function B0(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function iAe(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function FA(e,t,n,r){const i=r||[];if(iAe(e,t)<n){const s=e[t+0];i.length?nAe(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=B0(o,a,.5),d=B0(a,l,.5),u=B0(l,f,.5),h=B0(c,d,.5),g=B0(d,u,.5),y=B0(h,g,.5);FA([o,c,h,y],0,n,i),FA([y,g,u,f],0,n,i)}return i}function zA(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=rAe(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(zA(e,t,f+1,r,s),zA(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function sAe(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;FA(e,o,t,r)}return n&&n>0?zA(r,0,r.length,n):r}function oAe(e,t){return Math.sqrt(O3(e,t))}function O3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function aAe(e,t,n){const r=O3(t,n);if(r===0)return O3(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),O3(e,F0(t,n,i))}function F0(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function lAe(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function $A(e,t,n,r){const i=r||[];if(lAe(e,t)<n){const s=e[t+0];i.length?oAe(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=F0(o,a,.5),d=F0(a,l,.5),u=F0(l,f,.5),h=F0(c,d,.5),g=F0(d,u,.5),y=F0(h,g,.5);$A([o,c,h,y],0,n,i),$A([y,g,u,f],0,n,i)}return i}function cAe(e,t){return HA(e,0,e.length,t)}function HA(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=aAe(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(HA(e,t,f+1,r,s),HA(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function fAe(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;$A(e,o,t,r)}return r}function dAe(e,t,n){const r=ZI(e),i=hJ(uJ(r)),s=[];let o=[],a=[0,0],l=[];const f=()=>{l.length>=4&&o.push(...fAe(l,t)),l=[]},c=()=>{f(),o.length&&(s.push(o),o=[])};for(const{key:u,data:h}of i)switch(u){case"M":c(),a=[h[0],h[1]],o.push(a);break;case"L":f(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const g=o.length?o[o.length-1]:a;l.push([g[0],g[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":f(),o.push([a[0],a[1]]);break}if(c(),!n)return s;const d=[];for(const u of s){const h=cAe(u,n);h.length&&d.push(h)}return d}const Eo="none";class vb{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return zCe()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,s){const o=this._o(s);return this._d("line",[mJ(t,n,r,i,o)],o)}rectangle(t,n,r,i,s){const o=this._o(s),a=[],l=XCe(t,n,r,i,o);if(o.fill){const f=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];o.fillStyle==="solid"?a.push(Gk([f],o)):a.push(jp([f],o))}return o.stroke!==Eo&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,r,i,s){const o=this._o(s),a=[],l=gJ(r,i,o),f=BA(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const c=BA(t,n,o,l).opset;c.type="fillPath",a.push(c)}else a.push(jp([f.estimatedPoints],o));return o.stroke!==Eo&&a.push(f.opset),this._d("ellipse",a,o)}circle(t,n,r,i){const s=this.ellipse(t,n,r,r,i);return s.shape="circle",s}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[D3(t,!1,r)],r)}arc(t,n,r,i,s,o,a=!1,l){const f=this._o(l),c=[],d=yz(t,n,r,i,s,o,a,!0,f);if(a&&f.fill)if(f.fillStyle==="solid"){const u=Object.assign({},f);u.disableMultiStroke=!0;const h=yz(t,n,r,i,s,o,!0,!1,u);h.type="fillPath",c.push(h)}else c.push(YCe(t,n,r,i,s,o,f));return f.stroke!==Eo&&c.push(d),this._d("arc",c,f)}curve(t,n){const r=this._o(n),i=[],s=bz(t,r);if(r.fill&&r.fill!==Eo&&t.length>=3)if(r.fillStyle==="solid"){const o=bz(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=tAe(t),a=sAe(o,10,(1+r.roughness)/2);i.push(jp([a],r))}return r.stroke!==Eo&&i.push(s),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],s=D3(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(Gk([t],r)):i.push(jp([t],r))),r.stroke!==Eo&&i.push(s),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==Eo,o=r.stroke!==Eo,a=!!(r.simplification&&r.simplification<1),l=a?4-4*(r.simplification||1):(1+r.roughness)/2,f=dAe(t,1,l),c=Uz(t,r);if(s)if(r.fillStyle==="solid")if(f.length===1){const d=Uz(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else i.push(Gk(f,r));else i.push(jp(f,r));return o&&(a?f.forEach(d=>{i.push(D3(d,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const s=typeof n=="number"&&n>=0?i.data.map(o=>+o.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:Eo};break;case"fillPath":o={d:this.opsToPath(s),stroke:Eo,strokeWidth:0,fill:r.fill||Eo};break;case"fillSketch":o=this.fillSketch(s,r);break}o&&i.push(o)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Eo,strokeWidth:r,fill:Eo}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class uAe{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new vb(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof r=="number"&&r>=0?s.data.map(a=>+a.toFixed(r)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,s){const o=this.gen.line(t,n,r,i,s);return this.draw(o),o}rectangle(t,n,r,i,s){const o=this.gen.rectangle(t,n,r,i,s);return this.draw(o),o}ellipse(t,n,r,i,s){const o=this.gen.ellipse(t,n,r,i,s);return this.draw(o),o}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s),s}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,s,o,a=!1,l){const f=this.gen.arc(t,n,r,i,s,o,a,l);return this.draw(f),f}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const jU="http://www.w3.org/2000/svg";class hAe{constructor(t,n){this.svg=t,this.gen=new vb(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(jU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=i.createElementNS(jU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{l=i.createElementNS(jU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(i,a,r);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=t.createElementNS(jU,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,s){const o=this.gen.line(t,n,r,i,s);return this.draw(o)}rectangle(t,n,r,i,s){const o=this.gen.rectangle(t,n,r,i,s);return this.draw(o)}ellipse(t,n,r,i,s){const o=this.gen.ellipse(t,n,r,i,s);return this.draw(o)}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,s,o,a=!1,l){const f=this.gen.arc(t,n,r,i,s,o,a,l);return this.draw(f)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const f0={canvas(e,t){return new uAe(e,t)},svg(e,t){return new hAe(e,t)},generator(e){return new vb(e)},newSeed(){return vb.newSeed()}};function kz(e,t,n,r=i=>i){return e*r(.5-t*(.5-n))}function pAe(e){return[-e[0],-e[1]]}function Ka(e,t){return[e[0]+t[0],e[1]+t[1]]}function ia(e,t){return[e[0]-t[0],e[1]-t[1]]}function Va(e,t){return[e[0]*t,e[1]*t]}function mAe(e,t){return[e[0]/t,e[1]/t]}function g5(e){return[e[1],-e[0]]}function Sz(e,t){return e[0]*t[0]+e[1]*t[1]}function gAe(e,t){return e[0]===t[0]&&e[1]===t[1]}function bAe(e){return Math.hypot(e[0],e[1])}function yAe(e){return e[0]*e[0]+e[1]*e[1]}function Cz(e,t){return yAe(ia(e,t))}function yJ(e){return mAe(e,bAe(e))}function UAe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function b5(e,t,n){let r=Math.sin(n),i=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*i-o*r,l=s*r+o*i;return[a+t[0],l+t[1]]}function VA(e,t,n){return Ka(e,Va(ia(t,e),n))}function Az(e,t,n){return Ka(e,Va(t,n))}var{min:wp,PI:xAe}=Math,Mz=.275,y5=xAe+1e-4;function wAe(e,t={}){let{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:s=!0,easing:o=H=>H,start:a={},end:l={},last:f=!1}=t,{cap:c=!0,easing:d=H=>H*(2-H)}=a,{cap:u=!0,easing:h=H=>--H*H*H+1}=l;if(e.length===0||n<=0)return[];let g=e[e.length-1].runningLength,y=a.taper===!1?0:a.taper===!0?Math.max(n,g):a.taper,U=l.taper===!1?0:l.taper===!0?Math.max(n,g):l.taper,x=Math.pow(n*r,2),v=[],E=[],k=e.slice(0,10).reduce((H,G)=>{let W=G.pressure;if(s){let B=wp(1,G.distance/n),X=wp(1,1-B);W=wp(1,H+(X-H)*(B*Mz))}return(H+W)/2},e[0].pressure),M=kz(n,i,e[e.length-1].pressure,o),S,A=e[0].vector,I=e[0].point,R=I,P=I,_=R,O=!1;for(let H=0;H<e.length;H++){let{pressure:G}=e[H],{point:W,vector:B,distance:X,runningLength:q}=e[H];if(H<e.length-1&&g-q<3)continue;if(i){if(s){let ke=wp(1,X/n),Re=wp(1,1-ke);G=wp(1,k+(Re-k)*(ke*Mz))}M=kz(n,i,G,o)}else M=n/2;S===void 0&&(S=M);let Y=q<y?d(q/y):1,oe=g-q<U?h((g-q)/U):1;M=Math.max(.01,M*Math.min(Y,oe));let ge=(H<e.length-1?e[H+1]:e[H]).vector,he=H<e.length-1?Sz(B,ge):1,ce=Sz(B,A)<0&&!O,ie=he!==null&&he<0;if(ce||ie){let ke=Va(g5(A),M);for(let Re=1/13,Fe=0;Fe<=1;Fe+=Re)P=b5(ia(W,ke),W,y5*Fe),v.push(P),_=b5(Ka(W,ke),W,y5*-Fe),E.push(_);I=P,R=_,ie&&(O=!0);continue}if(O=!1,H===e.length-1){let ke=Va(g5(B),M);v.push(ia(W,ke)),E.push(Ka(W,ke));continue}let we=Va(g5(VA(ge,B,he)),M);P=ia(W,we),(H<=1||Cz(I,P)>x)&&(v.push(P),I=P),_=Ka(W,we),(H<=1||Cz(R,_)>x)&&(E.push(_),R=_),k=G,A=B}let V=e[0].point.slice(0,2),j=e.length>1?e[e.length-1].point.slice(0,2):Ka(e[0].point,[1,1]),F=[],z=[];if(e.length===1){if(!(y||U)||f){let H=Az(V,yJ(g5(ia(V,j))),-(S||M)),G=[];for(let W=1/13,B=W;B<=1;B+=W)G.push(b5(H,V,y5*2*B));return G}}else{if(!(y||U&&e.length===1))if(c)for(let G=1/13,W=G;W<=1;W+=G){let B=b5(E[0],V,y5*W);F.push(B)}else{let G=ia(v[0],E[0]),W=Va(G,.5),B=Va(G,.51);F.push(ia(V,W),ia(V,B),Ka(V,B),Ka(V,W))}let H=g5(pAe(e[e.length-1].vector));if(U||y&&e.length===1)z.push(j);else if(u){let G=Az(j,H,M);for(let W=1/29,B=W;B<1;B+=W)z.push(b5(G,j,y5*3*B))}else z.push(Ka(j,Va(H,M)),Ka(j,Va(H,M*.99)),ia(j,Va(H,M*.99)),ia(j,Va(H,M)))}return v.concat(z,E.reverse(),F)}function vAe(e,t={}){var n;let{streamline:r=.5,size:i=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-r)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:g,pressure:y=.5})=>[h,g,y]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let g=1;g<5;g++)a.push(VA(a[0],h,g/4))}a.length===1&&(a=[...a,[...Ka(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],f=!1,c=0,d=l[0],u=a.length-1;for(let h=1;h<a.length;h++){let g=s&&h===u?a[h].slice(0,2):VA(d.point,a[h],o);if(gAe(d.point,g))continue;let y=UAe(g,d.point);if(c+=y,h<u&&!f){if(c<i)continue;f=!0}d={point:g,pressure:a[h][2]>=0?a[h][2]:.5,vector:yJ(ia(d.point,g)),distance:y,runningLength:c},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function EAe(e,t={}){return wAe(vAe(e,t),t)}function UJ(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=UJ(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Ke(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=UJ(t))&&(r&&(r+=" "),r+=n);return r}function kAe(e,t){return Math.sqrt(j3(e,t))}function j3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function SAe(e,t,n){const r=j3(t,n);if(r===0)return j3(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),j3(e,z0(t,n,i))}function z0(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function CAe(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function WA(e,t,n,r){const i=r||[];if(CAe(e,t)<n){const s=e[t+0];i.length?kAe(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=z0(o,a,.5),d=z0(a,l,.5),u=z0(l,f,.5),h=z0(c,d,.5),g=z0(d,u,.5),y=z0(h,g,.5);WA([o,c,h,y],0,n,i),WA([y,g,u,f],0,n,i)}return i}function AAe(e,t){return T4(e,0,e.length,t)}function T4(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=SAe(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(T4(e,t,f+1,r,s),T4(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function MAe(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;WA(e,o,t,r)}return T4(r,0,r.length,n)}var U5={},Tz;function TAe(){if(Tz)return U5;Tz=1,Object.defineProperty(U5,"__esModule",{value:!0}),U5.sanitizeUrl=void 0;var e=/^([^\w]*)(javascript|data|vbscript)/im,t=/&#(\w+)(^\w|;)?/g,n=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,i=/^.+(:|&colon;)/gim,s=[".","/"];function o(f){return s.indexOf(f[0])>-1}function a(f){return f.replace(t,function(c,d){return String.fromCharCode(d)})}function l(f){var c=a(f||"").replace(n,"").replace(r,"").trim();if(!c)return"about:blank";if(o(c))return c;var d=c.match(i);if(!d)return c;var u=d[0];return e.test(u)?"about:blank":c}return U5.sanitizeUrl=l,U5}var IAe=TAe();const xJ="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Kp(e,t,n){const r=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||r)===t[o];)o++;if(o>0)return t.slice(0,o)+Kp(e.slice(o),t.slice(o),n)}const i=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-i>1){const o=Math.round(.5*(i+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[i]+Kp(e.slice(1),null,n)}function wJ(e){if(e.length!==vJ(e[0]))throw new Error("invalid integer part of order key: "+e)}function vJ(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function W5(e){const t=vJ(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function Iz(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=W5(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function Nz(e,t){wJ(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const o=t.indexOf(r[s])+1;o===t.length?r[s]=t[0]:(r[s]=t[o],i=!1)}if(i){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?r.push(t[0]):r.pop(),s+r.join("")}else return n+r.join("")}function NAe(e,t){wJ(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const o=t.indexOf(r[s])-1;o===-1?r[s]=t.slice(-1):(r[s]=t[o],i=!1)}if(i){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?r.push(t.slice(-1)):r.pop(),s+r.join("")}else return n+r.join("")}function vp(e,t,n=xJ){if(e!=null&&Iz(e,n),t!=null&&Iz(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=W5(t),f=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+Kp("",f,n);if(l<t)return l;const c=NAe(l,n);if(c==null)throw new Error("cannot decrement any more");return c}if(t==null){const l=W5(e),f=e.slice(l.length),c=Nz(l,n);return c??l+Kp(f,null,n)}const r=W5(e),i=e.slice(r.length),s=W5(t),o=t.slice(s.length);if(r===s)return r+Kp(i,o,n);const a=Nz(r,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:r+Kp(i,null,n)}function GA(e,t,n,r=xJ){if(n===0)return[];if(n===1)return[vp(e,t,r)];if(t==null){let o=vp(e,t,r);const a=[o];for(let l=0;l<n-1;l++)o=vp(o,t,r),a.push(o);return a}if(e==null){let o=vp(e,t,r);const a=[o];for(let l=0;l<n-1;l++)o=vp(e,o,r),a.push(o);return a.reverse(),a}const i=Math.floor(n/2),s=vp(e,t,r);return[...GA(e,s,i,r),s,...GA(s,t,n-i-1,r)]}const P1=(()=>{if(typeof self>"u")return!1;if(!("top"in self&&self!==top)){if("showOpenFilePicker"in self)return"showOpenFilePicker"}return!1})(),RAe=Ze(P1?()=>import("./file-open-002ab408-CQ9a1yTP.js"):()=>import("./file-open-7c801643-CD3BRLr1.js"),[]);async function _Ae(...e){return(await RAe).default(...e)}Ze(P1?()=>import("./directory-open-4ed118d0-BNgAhb94.js"):()=>import("./directory-open-01563666-DWU9wJ6I.js"),[]);const PAe=Ze(P1?()=>import("./file-save-745eba88-D6MGJDcB.js"):()=>import("./file-save-3189631c-x92wctJd.js"),[]);async function DAe(...e){return(await PAe).default(...e)}var LAe=(e,t)=>t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{}),OAe=5,Bp=5,jAe=4,G5=4,X5=1,Fa=[0,2,4,6,8],za=(e,t)=>t.map(n=>Mi[e][n]),Pt={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:za("gray",Fa),red:za("red",Fa),pink:za("pink",Fa),grape:za("grape",Fa),violet:za("violet",Fa),blue:za("blue",Fa),cyan:za("cyan",Fa),teal:za("teal",Fa),green:za("green",Fa),yellow:za("yellow",Fa),orange:za("orange",Fa),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},EJ=LAe(Pt,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),kJ=[Pt.black,Pt.red[G5],Pt.green[G5],Pt.blue[G5],Pt.yellow[G5]],SJ=[Pt.transparent,Pt.red[X5],Pt.green[X5],Pt.blue[X5],Pt.yellow[X5]],CJ=[Pt.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],BAe={transparent:Pt.transparent,white:Pt.white,gray:Pt.gray,black:Pt.black,bronze:Pt.bronze,...EJ},FAe={transparent:Pt.transparent,white:Pt.white,gray:Pt.gray,black:Pt.black,bronze:Pt.bronze,...EJ},zAe=e=>[Pt.cyan[e],Pt.blue[e],Pt.violet[e],Pt.grape[e],Pt.pink[e],Pt.green[e],Pt.teal[e],Pt.yellow[e],Pt.orange[e],Pt.red[e]],$Ae=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,Cc=/Mac|iPod|iPhone|iPad/.test(navigator.platform),AJ=/^Win/.test(navigator.platform),HAe=/\b(android)\b/i.test(navigator.userAgent),Eb="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,VAe=navigator.userAgent.indexOf("Chrome")!==-1,WAe=!VAe&&navigator.userAgent.indexOf("Safari")!==-1,MJ=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,GAe=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},XA=typeof window<"u"&&"ResizeObserver"in window,XAe="Excalidraw",KAe=36,$0=10,B3=8,YAe=5,Rz=1,ZAe=30,qu=Math.PI/12,qAe="red",gn={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},Zd={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},Ep={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"},BU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},lo={TEST:"test",DEVELOPMENT:"development"},_g={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper"},Yp="Xiaolai",kb="Segoe UI Emoji",sr={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},Zp={[Yp]:100,[kb]:1e3},TJ=e=>{switch(e){case sr.Excalifont:return[Yp,kb];default:return[kb]}},Ft={LIGHT:"light",DARK:"dark"},or={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},qI=1,ld=20,d0=sr.Excalifont,Ay="left",I4="top",m1=2,N4=2*m1,QAe=1e-5,JAe=2*N4-QAe,FU="#ffffff",eMe="#1e1e1e",tMe="#a2f1a6",R4=20,IJ=5,Pg={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},ft={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...Pg},nMe=[ft.text,ft.html,...Object.values(Pg)],Xk={png:"png",svg:"svg",clipboard:"clipboard"},Ea={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},QI=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,rMe=500,iMe=300,sMe=500,oMe=100,kw=.1,JI=.1,eN=30,aMe=300,tN="invert(93%) hue-rotate(180deg)",_z={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},lMe=730,cMe=1e3,fMe=500,dMe=1229,x5=2,nN=[1,2,3],o6=10,uMe=1440,Pz=4*1024*1024,en="http://www.w3.org/2000/svg",Sw={excalidraw:2,excalidrawLibrary:2},Jr=5,hMe=.7,pMe=11,Do={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},Sb={LEFT:"left",CENTER:"center",RIGHT:"right"},mMe=20,Kk=.25,gMe=32,ei={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},NJ={architect:0,artist:1,cartoonist:2},Yk={thin:1,bold:2,extraBold:4},br={strokeColor:Pt.black,backgroundColor:Pt.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:NJ.artist,opacity:100,locked:!1},_4="library",Um="search",gl={name:"default",defaultTab:_4},RJ=new Set(["iframe","embeddable","image"]),ci={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},v2={OAI_API_KEY:"excalidraw-oai-api-key",MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},_J="Untitled",qp={generalStats:1,elementProperties:2},da=1,Ei={sharp:"sharp",round:"round",elbow:"elbow"},PJ=.3,P4="element",bMe=Symbol.for("__test__originalId__"),yMe=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(yMe||{}),UMe=nN.includes(devicePixelRatio)?devicePixelRatio:1,Ac=()=>({showWelcomeScreen:!1,theme:Ft.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:br.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:br.fillStyle,currentItemFontFamily:d0,currentItemFontSize:ld,currentItemOpacity:br.opacity,currentItemRoughness:br.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:br.strokeColor,currentItemRoundness:"round",currentItemArrowType:Ei.round,currentItemStrokeStyle:br.strokeStyle,currentItemStrokeWidth:br.strokeWidth,currentItemTextAlign:Ay,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:br.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:UMe,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:R4,gridStep:IJ,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:qp.generalStats|qp.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:Pt.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:[]}),xMe=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}),wMe=(e,t)=>{var r;let n={};for(let i of Object.keys(e))if((r=xMe[i])!=null&&r[t]){let s=e[i];n[i]=s}return n},DJ=e=>wMe(e,"export"),Yl=({activeTool:e})=>e.type==="eraser",Dg=({activeTool:e})=>e.type==="hand",Lt=(e,t,n)=>Math.min(Math.max(e,t),n),Uc=(e,t,n="round")=>{let r=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*r)/r},vMe=(e,t,n="round")=>{let r=1/t;return Math[n](e*r)/r},zU=(e,t)=>(e+t)/2,E2=e=>typeof e=="number"&&Number.isFinite(e),Dz=(e,t,n=1e-4)=>Math.abs(e-t)<n,D4=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function Vh(e){return e*Math.PI/180}function My(e){return e*180/Math.PI}function EMe(e){return Math.abs(Math.sin(2*e))<1e-4}function Fi(e,t,n=0,r=0){return[e-n,t-r]}function et(e,t=[0,0]){return Fi(e[0]-t[0],e[1]-t[1])}function li(e,t){return e[0]*t[1]-t[0]*e[1]}function Lz(e,t){return e[0]*t[0]+e[1]*t[1]}function _u(e,t){return[e[0]+t[0],e[1]+t[1]]}function L4(e,t){return[e[0]-t[0],e[1]-t[1]]}function wr(e,t){return Fi(e[0]*t,e[1]*t)}function kMe(e){return e[0]*e[0]+e[1]*e[1]}function SMe(e){return Math.sqrt(kMe(e))}var cs=e=>{let t=SMe(e);return t===0?Fi(0,0):Fi(e[0]/t,e[1]/t)};function D(e,t){return[e,t]}function rN(e){return e.length===2?D(e[0],e[1]):void 0}function Ot(e,t=D(0,0)){return D(t[0]+e[0],t[1]+e[1])}function CMe(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function vl(e,t){let n=Math.abs;return n(e[0]-t[0])<1e-4&&n(e[1]-t[1])<1e-4}function ue([e,t],[n,r],i){return D((e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r)}function O4(e,t=[0,0]){return D(e[0]+t[0],e[1]+t[1])}function Ty(e,t){return D((e[0]+t[0])/2,(e[1]+t[1])/2)}function cn(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function Cb(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}var cf=(e,t,n)=>O4(t,wr(et(e,t),n)),LJ=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function KA(e,t){return[e,t]}function AMe(e,t){let n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],i=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-i*r;if(o!==0){let a=n*e[0][0]+r*e[0][1],l=i*t[0][0]+s*t[0][1];return D((a*s-l*r)/o,(n*l-i*a)/o)}return null}function it(e,t){return[e,t]}var g1=(e,t,n=1e-4)=>{let r=iN(e,t);return r===0?!0:r<n},iN=(e,t)=>{let[n,r]=e,[[i,s],[o,a]]=t,l=n-i,f=r-s,c=o-i,d=a-s,u=l*c+f*d,h=c*c+d*d,g=-1;h!==0&&(g=u/h);let y,U;g<0?(y=i,U=s):g>1?(y=o,U=a):(y=i+g*c,U=s+g*d);let x=n-y,v=r-U;return Math.sqrt(x*x+v*v)};function Ab(e,t){let n=AMe(KA(e[0],e[1]),KA(t[0],t[1]));return!n||!g1(n,t)||!g1(n,e)?null:n}function YA(e,t){return[e,t]}function MMe(e,t){return[it(e[0],D(e[1][0],e[0][1])),it(D(e[1][0],e[0][1]),e[1]),it(e[1],D(e[0][0],e[1][1])),it(D(e[0][0],e[1][1]),e[0])].map(n=>Ab(t,n)).filter(n=>!!n)}function Lf(e,t,n,r){return[e,t,n,r]}function Oz(e,t,n,r=1e-6){return[(e(t+r,n)-e(t-r,n))/(2*r),(e(t,n+r)-e(t,n-r))/(2*r)]}function TMe(e,t,n,r=.001,i=10){let s=1/0,o=0;for(;s>=r;){if(o>=i)return null;let a=e(t,n),l=[Oz((y,U)=>e(y,U)[0],t,n),Oz((y,U)=>e(y,U)[1],t,n)],f=[[-a[0]],[-a[1]]],c=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(c===0)return null;let d=[[l[1][1]/c,-l[0][1]/c],[-l[1][0]/c,l[0][0]/c]],u=[[d[0][0]*f[0][0]+d[0][1]*f[1][0]],[d[1][0]*f[0][0]+d[1][1]*f[1][0]]];t=t+u[0][0],n=n+u[1][0];let[h,g]=e(t,n);s=Math.max(Math.abs(h),Math.abs(g)),o+=1}return[t,n]}var k2=(e,t)=>D((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function OJ(e,t){let n=NMe(e);if(MMe(YA(D(n[0],n[1]),D(n[2],n[3])),t).length===0)return[];let r=a=>D(t[0][0]+a*(t[1][0]-t[0][0]),t[0][1]+a*(t[1][1]-t[0][1])),i=[[.5,0],[.2,0],[.8,0]],s=([a,l])=>{let f=TMe((u,h)=>{let g=k2(e,u),y=r(h);return[g[0]-y[0],g[1]-y[1]]},a,l);if(!f)return null;let[c,d]=f;return c<0||c>1||d<0||d>1?null:k2(e,c)},o=s(i[0]);return o?[o]:(o=s(i[1]),o?[o]:(o=s(i[2]),o?[o]:[]))}function IMe(e,t,n=.001){let r=(l,f,c,d=n)=>{let u=l,h=f,g;for(;h-u>d;)g=(h+u)/2,c(g-d)<c(g+d)?h=g:u=g;return g},i=0;for(let l=1/0,f=0;f<30;f++){let c=cn(t,k2(e,f/30));c<l&&(l=c,i=f)}let s=Math.max((i-1)/30,0),o=Math.min((i+1)/30,1),a=r(s,o,l=>cn(t,k2(e,l)));return a?k2(e,a):null}function jJ(e,t){let n=IMe(e,t);return n?cn(t,n):0}function NMe(e){let[t,n,r,i]=e,s=[t[0],n[0],r[0],i[0]],o=[t[1],n[1],r[1],i[1]];return[Math.min(...s),Math.min(...o),Math.max(...s),Math.max(...o)]}function jz(...e){return BJ(e)}function j4(e){return BJ(e)}var Bz=(e,t)=>{let n=e[0],r=e[1],i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){let a=t[s][0],l=t[s][1],f=t[o][0],c=t[o][1];(l>r&&c<=r||l<=r&&c>r)&&n<(f-a)*(r-l)/(c-l)+a&&(i=!i)}return i},RMe=(e,t,n=1e-4)=>{let r=!1;for(let i=0,s=t.length-1;i<s;i++)if(g1(e,it(t[i],t[i+1]),n)){r=!0;break}return r};function BJ(e){return _Me(e)?e:[...e,e[0]]}function _Me(e){return vl(e[0],e[e.length-1])}function is(e,t){return Ca([e,t])}var B4=([e,t],[n,r])=>e<=n?t>=n:e>=n?r>=e:!1,F4=([e,t],[n,r])=>{let i=Math.max(e,n),s=Math.min(t,r);return i<=s?Ca([i,s]):null},$U=(e,[t,n])=>e>=t&&e<=n;function kp([e,t,n],r){let i=(c,d,u)=>(c[0]-u[0])*(d[1]-u[1])-(d[0]-u[0])*(c[1]-u[1]),s=i(r,e,t),o=i(r,t,n),a=i(r,n,e),l=s<0||o<0||a<0,f=s>0||o>0||a>0;return!(l&&f)}var Fz=()=>{let e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),r=`${e.getDate()}`.padStart(2,"0"),i=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${r}-${i}${s}`},S2=e=>e.charAt(0).toUpperCase()+e.slice(1),PMe=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),ZA=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,DMe=e=>ZA(e)||e instanceof Element&&!!e.closest("label, button"),X0=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),Lg=({fontFamily:e})=>{for(let[t,n]of Object.entries(sr))if(n===e)return`${t}${TJ(n).map(r=>`, ${r}`).join("")}`;return kb},kn=({fontSize:e,fontFamily:t})=>`${e}px ${Lg({fontFamily:t})}`,Og=(e,t)=>{let n=0,r=null,i=(...s)=>{r=s,clearTimeout(n),n=window.setTimeout(()=>{r=null,e(...s)},t)};return i.flush=()=>{if(clearTimeout(n),r){let s=r;r=null,e(...s)}},i.cancel=()=>{r=null,clearTimeout(n)},i},Cw=(e,t)=>{let n=null,r=null,i=null,s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),r=null,i&&(r=i,i=null,s(r))})},o=(...a)=>{if(At.MODE==="test"){e(...a);return}r=a,n===null?s(r):t!=null&&t.trailing&&(i=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),r&&(e(...i||r),r=i=null)},o.cancel=()=>{r=i=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},Wh=e=>1-Math.pow(1-e,4),zz=(e,t,n)=>(t-e)*Wh(n)+e,LMe=({fromValues:e,toValues:t,onStep:n,duration:r=250,interpolateValue:i,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,f=0,c;function d(u){if(l)return;c===void 0&&(c=u,s==null||s());let h=Math.min(u-c,r),g=Wh(h/r),y={};if(Object.keys(e).forEach(U=>{let x=U,v=(t[x]-e[x])*g+e[x];y[x]=v}),n(y),h<r){let U=h/r,x={};Object.keys(e).forEach(v=>{let E=v,k=e[E],M=t[E],S;S=i?i(k,M,U,E):zz(k,M,U),S==null&&(S=zz(k,M,U)),x[E]=S}),n(x),f=window.requestAnimationFrame(d)}else n(t),o==null||o()}return f=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(f)}},OMe=(e,t)=>{if(!e.length||t<1)return[];let n=0,r=0,i=Array(Math.ceil(e.length/t));for(;n<e.length;)i[r++]=e.slice(n,n+=t);return i},ss=(e,t)=>Math.abs(e-t),jr=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},ye=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),Cc?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),On=({clientX:e,clientY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:o})=>{let a=(e-r)/n.value-s,l=(t-i)/n.value-o;return{x:a,y:l}},fl=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:o})=>{let a=(e+s)*n.value+r,l=(t+o)*n.value+i;return{x:a,y:l}},HU=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),jMe="A-Za-z--------",BMe="---",FMe=new RegExp(`^[^${jMe}]*[${BMe}]`),FJ=e=>FMe.test(e),dl=e=>{let[t,n]=e;return{x:t,y:n}},zJ=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},$J=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},K0=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},ul=e=>{let t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===Pt.transparent},Zk=e=>e.fillStyle!=="solid"||ul(e.backgroundColor),zMe=()=>{let e,t,n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},$Me=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;let{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},HMe=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},VMe=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),a6=()=>Kf()?1:Date.now(),mt=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),WMe=e=>e.reduce((t,n,r)=>(t.set(n.id,[n,r]),t),new Map),sf=(e,t)=>e.reduce((n,r)=>(n[t?t(r):String(r)]=r,n),{}),GMe=e=>e.reduce((t,n,r)=>{let i={...n,prev:null,next:null};if(r!==0){let s=t[r-1];if(i.prev=s,s.next=i,r===e.length-1){let o=t[0];i.next=o,o.prev=i}}return t.push(i),t},[]),Kf=()=>At.MODE==="test",HJ=()=>At.MODE==="development",XMe=()=>typeof process<"u"&&!0,VJ=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),F3=(e,t)=>{let n=!1;for(let r in t){let i=t[r];if(typeof i<"u"){if(e[r]===i&&(typeof i!="object"||i===null))continue;n=!0}}return n?{...e,...t}:e},KMe=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Iy=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,qA=e=>{let t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},$z=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Gi=(e,t,n,r=!1)=>{let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return r&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(let o of n)if(!(e[o]===t[o]||$z(e[o],t[o])))return r&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return i.every(o=>{let a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||$z(e[o],t[o]);return!l&&r&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},Aw=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},b1=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function us(e,t){if(!e)throw new Error(t)}var YMe=e=>{let t,n,r=function(i){let s=Object.entries(i);if(t){let a=!0;for(let[l,f]of s)if(t.get(l)!==f){a=!1;break}if(a)return n}let o=e(i);return t=new Map(s),n=o,o};return r.clear=()=>{t=void 0,n=void 0},r},WJ=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),$f=e=>JSON.parse(JSON.stringify(e)),w5=(e,t)=>Gi(e,t)?e:t;function rr(e,t,n,r){var i;return e?((i=e==null?void 0:e.addEventListener)==null||i.call(e,t,n,r),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,r)}):()=>{}}function ZMe(e,t=!0){let n=e.length;if(n<4)return"";let r=e[0],i=e[1],s=e[2],o=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${zU(i[0],s[0]).toFixed(2)},${zU(i[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)r=e[a],i=e[a+1],o+=`${zU(r[0],i[0]).toFixed(2)},${zU(r[1],i[1]).toFixed(2)} `;return t&&(o+="Z"),o}var GJ=e=>e.replace(/\r?\n|\r/g,`
`),Ca=e=>e,jg=async(e,...t)=>new Promise(n=>{n(e(...t))}),qMe=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Hz=class{constructor(e,t){Q(this,"pool"),Q(this,"entries",{}),this.pool=new ICe(e,t)}all(){let e=t=>{if(t.data.result){let[n,r]=t.data.result;this.entries[n]=r}};return this.pool.addEventListener("fulfilled",e),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",e)}),Object.values(this.entries)))}},z3=e=>e.replace(/"/g,"&quot;"),Vz=e=>Array.isArray(e)?e:[e],ma=e=>!!e&&e.type==="image"&&!!e.fileId,ln=e=>!!e&&e.type==="image",eo=e=>!!e&&e.type==="embeddable",ru=e=>!!e&&e.type==="iframe",ba=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),Ve=e=>e!=null&&e.type==="text",XJ=e=>e!=null&&e.type==="frame",$3=e=>e!=null&&e.type==="magicframe",ht=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),Aa=e=>e!=null&&QMe(e.type),QMe=e=>e==="freedraw",xt=e=>e!=null&&sN(e.type),Tt=e=>e!=null&&e.type==="arrow",Ge=e=>Tt(e)&&e.elbowed,sN=e=>e==="arrow"||e==="line",hc=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&KJ(e.type),KJ=e=>e==="arrow",El=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),JMe=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Gh=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||Tt(e)),YJ=e=>{let t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return b1(t,null),!1}},Mw=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",Ma=e=>{var t;return Gh(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Xn=e=>e!==null&&"containerId"in e&&e.containerId!==null&&Ve(e),l6=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",ZJ=e=>e==="line"||e==="arrow"||e==="diamond",eTe=(e,t)=>!!((e===ei.ADAPTIVE_RADIUS||e===ei.LEGACY)&&l6(t.type)||e===ei.PROPORTIONAL_RADIUS&&ZJ(t.type)),tTe=e=>ZJ(e.type)?{type:ei.PROPORTIONAL_RADIUS}:l6(e.type)?{type:ei.ADAPTIVE_RADIUS}:null,z4=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,hs=(e,t,n)=>{let r=e.split(`
`).map(o=>o||" ").join(`
`),i=parseFloat(t),s=sTe(r,i,n);return{width:lN(r,t),height:s}},qJ="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),QJ=(e,t)=>{let n=oTe(e);return n===0?hs(qJ.split("").join(`
`),e,t).width+Jr*2:n+Jr*2},oN=(e,t)=>hs("",e,t).width+Jr*2,nTe=()=>lN(qJ,kn({fontSize:ld,fontFamily:d0}))>0,Bg=e=>GJ(e).replace(/\t/g,"        "),aN=e=>Bg(e).split(`
`),rTe=e=>{let t=aN(e.text).length;return e.height/t/e.fontSize},Ny=(e,t)=>e*t,JJ=(e,t)=>Ny(e,t)+Jr*2,qk,iTe=class{constructor(){Q(this,"canvas"),this.canvas=document.createElement("canvas")}getLineWidth(e,t){let n=this.canvas.getContext("2d");n.font=t;let r=n.measureText(e).width;return Kf()?r*10:r}},y1=(e,t)=>(qk||(qk=new iTe),qk.getLineWidth(e,t)),lN=(e,t)=>{let n=aN(e),r=0;return n.forEach(i=>{r=Math.max(r,y1(i,t))}),r},sTe=(e,t,n)=>{let r=aN(e).length;return Ny(t,n)*r},Ry=(()=>{let e={};return{calculate:(t,n)=>{let r=t.charCodeAt(0);if(e[n]||(e[n]=[]),!e[n][r]){let i=y1(t,n);e[n][r]=i}return e[n][r]},getCache:t=>e[t],clearCache:t=>{e[t]=[]}}})(),oTe=e=>{let t=Ry.getCache(e);if(!t)return 0;let n=t.filter(r=>r!==void 0);return Math.max(...n)},Qk,VU,Jk,aTe=e=>(Qk||(Qk=pn.class(...Object.values(uf))),Qk.test(e)),lTe=()=>{if(!VU)try{VU=fTe()}catch{VU=cTe()}return VU},cN=()=>(Jk||(Jk=dTe()),Jk),ea={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?\//u},uf={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}","u"),OPENING://u,CLOSING://u,CURRENCY://u},R0={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},cTe=()=>pn.or(cN(),Nr.On(ea.HYPHEN,ea.WHITESPACE,uf.CHAR)),fTe=()=>pn.or(cN(),Nr.Before(ea.WHITESPACE).Build(),Nr.After(ea.WHITESPACE,ea.HYPHEN).Build(),Nr.Before(uf.CHAR,uf.CURRENCY).NotPrecededBy(ea.OPENING,uf.OPENING).Build(),Nr.After(uf.CHAR).NotFollowedBy(ea.HYPHEN,ea.CLOSING,uf.CLOSING).Build(),Nr.BeforeMany(uf.OPENING).NotPrecededBy(ea.OPENING).Build(),Nr.AfterMany(uf.CLOSING).NotFollowedBy(ea.CLOSING).Build(),Nr.AfterMany(ea.CLOSING).FollowedBy(ea.OPENING).Build()),dTe=()=>pn.group(pn.or(R0.FLAG,pn.and(R0.MOST,R0.JOINER,pn.build(`(?:${R0.ZWJ.source}(?:${R0.FLAG.source}|${R0.ANY.source}${R0.JOINER.source}))*`)))),pn={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>pn.build(pn.join(...e)),or:(...e)=>pn.build(e.map(t=>t.source).join("|")),group:(...e)=>pn.build(`(${pn.join(...e)})`),class:(...e)=>pn.build(`[${pn.join(...e)}]`)},Nr={On:(...e)=>{let t=pn.join(...e);return pn.build(`([${t}])`)},Before:(...e)=>{let t=pn.join(...e),n=()=>pn.build(`(?=[${t}])`);return Nr.Chain(n)},After:(...e)=>{let t=pn.join(...e),n=()=>pn.build(`(?<=[${t}])`);return Nr.Chain(n)},BeforeMany:(...e)=>{let t=pn.join(...e),n=()=>pn.build(`(?<![${t}])(?=[${t}])`);return Nr.Chain(n)},AfterMany:(...e)=>{let t=pn.join(...e),n=()=>pn.build(`(?<=[${t}])(?![${t}])`);return Nr.Chain(n)},NotBefore:(...e)=>{let t=pn.join(...e),n=()=>pn.build(`(?![${t}])`);return Nr.Chain(n)},NotAfter:(...e)=>{let t=pn.join(...e),n=()=>pn.build(`(?<![${t}])`);return Nr.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{let n=e(),r=Nr.After(...t).Build(),i=()=>pn.and(r,n);return Nr.Chain(i)},FollowedBy:(...t)=>{let n=e(),r=Nr.Before(...t).Build(),i=()=>pn.and(n,r);return Nr.Chain(i)},NotPrecededBy:(...t)=>{let n=e(),r=Nr.NotAfter(...t).Build(),i=()=>pn.and(r,n);return Nr.Chain(i)},NotFollowedBy:(...t)=>{let n=e(),r=Nr.NotBefore(...t).Build(),i=()=>pn.and(n,r);return Nr.Chain(i)}})},uTe=e=>{let t=lTe();return e.normalize("NFC").split(t).filter(Boolean)},D1=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;let r=[],i=e.split(`
`);for(let s of i){if(y1(s,t)<=n){r.push(s);continue}let o=hTe(s,t,n);r.push(...o)}return r.join(`
`)},hTe=(e,t,n)=>{let r=[],i=uTe(e)[Symbol.iterator](),s="",o=0,a=i.next();for(;!a.done;){let l=a.value,f=s+l,c=gTe(l)?o+Ry.calculate(l,t):y1(f,t);if(/\s/.test(l)||c<=n){s=f,o=c,a=i.next();continue}if(s)r.push(s.trimEnd()),s="",o=0;else{let d=pTe(l,t,n),u=d[d.length-1]??"",h=d.slice(0,-1);r.push(...h),s=u,o=y1(u,t),a=i.next()}}if(s){let l=mTe(s,t,n);r.push(l)}return r},pTe=(e,t,n)=>{if(cN().test(e))return[e];bTe(e);let r=[],i=Array.from(e),s="",o=0;for(let a of i){let l=Ry.calculate(a,t),f=o+l;if(f<=n){s=s+a,o=f;continue}s&&r.push(s),s=a,o=l}return s&&r.push(s),r},mTe=(e,t,n)=>{if(!(y1(e,t)>n))return e;let[,r,i]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],s=y1(r,t);for(let o of Array.from(i)){let a=Ry.calculate(o,t),l=s+a;if(l>n)break;r=r+o,s=l}return r},gTe=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,bTe=e=>{if((At.MODE===lo.TEST||At.DEV)&&/\s/.test(e))throw new Error("Word should not contain any whitespaces!")},vs=class{};Q(vs,"rg",new vb),Q(vs,"cache",new WeakMap),Q(vs,"get",e=>vs.cache.get(e)),Q(vs,"set",(e,t)=>vs.cache.set(e,t)),Q(vs,"delete",e=>vs.cache.delete(e)),Q(vs,"destroy",()=>{vs.cache=new WeakMap}),Q(vs,"generateElementShape",(e,t)=>{let n=t!=null&&t.isExporting?void 0:vs.get(e);if(n!==void 0)return n;oM.delete(e);let r=kLe(e,vs.rg,t||{isExporting:!1,canvasBackgroundColor:Pt.white,embedsValidationStatus:null});return vs.cache.set(e,r),r});var lr=vs,sl=e=>"var(--icon-fill-color)",eee=e=>e===Ft.LIGHT?Mi.white:"#1e1e1e",ae=(e,t=512)=>{let{width:n=512,height:r=n,mirror:i,style:s,...o}=typeof t=="number"?{width:t}:t;return m.jsx("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${r}`,className:Ke({"rtl-mirror":i}),style:s,...o,children:typeof e=="string"?m.jsx("path",{fill:"currentColor",d:e}):e})},He={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},vt={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("rect",{x:3,y:8,width:18,height:4,rx:1}),m.jsx("line",{x1:12,y1:8,x2:12,y2:21}),m.jsx("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),m.jsx("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),He);var fN=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),m.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),m.jsx("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),He),yTe=ae(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),He),UTe=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"1"}),m.jsx("circle",{cx:"12",cy:"19",r:"1"}),m.jsx("circle",{cx:"12",cy:"5",r:"1"})]}),He),xTe=ae(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),m.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),m.jsx("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),He),Tw=ae(m.jsxs("g",{children:[m.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:m.jsx("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),m.jsx("g",{mask:"url(#UnlockedIcon)",children:m.jsx("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),vt),dN=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),m.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),m.jsx("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),vt),wTe=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),m.jsx("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),vTe=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),m.jsx("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),ETe=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),m.jsx("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"});ae(m.jsx("g",{fill:"currentColor",children:m.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"});var kTe=ae(m.jsxs("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),m.jsx("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),STe=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),He),CTe=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),He),ATe=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"})]}),He),MTe=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),m.jsx("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),He),TTe=ae(m.jsx("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),vt),ITe=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),m.jsx("path",{d:"M16 7h4"}),m.jsx("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),He),Mb=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),m.jsx("path",{d:"m11.25 5.417 3.333 3.333"})]}),vt),tee=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),m.jsx("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),m.jsx("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),m.jsx("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),m.jsx("polyline",{points:"5 20 11 4 13 4 20 20"})]}),He),NTe=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M12.5 6.667h.01"}),m.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),m.jsx("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),m.jsx("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),vt),RTe=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),m.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]}),He),Wz=ae(m.jsx("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),vt),Gz=ae(m.jsx("path",{d:"M5 10h10",strokeWidth:"1.25"}),vt),_Te=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M21 21l-6 -6"}),m.jsx("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),m.jsx("path",{d:"M3 4v4h4"})]}),He),U1=ae(m.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),vt),PTe=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("polyline",{points:"12 16 18 10 12 4"}),m.jsx("polyline",{points:"8 4 2 10 8 16"})]}),vt),QA=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),m.jsx("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),vt),JA=ae(m.jsx("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),vt),eM=ae(m.jsx("g",{stroke:"currentColor",strokeLinejoin:"round",children:m.jsx("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...vt,strokeWidth:1.5}),nee=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),m.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),He),Iw=ae(m.jsx("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),vt),uN=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),He),DTe=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),He),Xz=ae(m.jsx("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),vt),ree=ae(m.jsx("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),vt),LTe=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),m.jsx("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),vt),OTe=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),m.jsx("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),He),jTe=ae(m.jsx("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),tM=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),m.jsx("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),vt),BTe=ae("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),FTe=ae("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),hN=ae(m.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),vt);ae("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});var zTe=ae("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),eS=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),m.jsx("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),m.jsx("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),He),iee=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 8h.01"}),m.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),m.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),m.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),m.jsx("path",{d:"M19 16v6"}),m.jsx("path",{d:"M22 19l-3 3l-3 -3"})]}),He),$Te=ae("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});ae("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});ae("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});var HTe=ae("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");ae("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");var Kz=ae(m.jsx("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),vt),Yz=ae(m.jsx("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),vt),VTe=ae("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0});ae(m.jsx("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),vt);ae("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");ae("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24});ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),m.jsx("path",{d:"M12 14v-11"}),m.jsx("path",{d:"M9 6l3 -3l3 3"})]}),He);ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),m.jsx("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});ae(m.jsx("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});var see=m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 10l0 10"}),m.jsx("path",{d:"M12 10l4 4"}),m.jsx("path",{d:"M12 10l-4 4"}),m.jsx("path",{d:"M4 4l16 0"})]}),oee=m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 5l0 14"}),m.jsx("path",{d:"M16 9l-4 -4"}),m.jsx("path",{d:"M8 9l4 -4"})]}),Zz=ae(oee,He),qz=ae(oee,{...He,style:{transform:"rotate(180deg)"}}),Qz=ae(see,He),Jz=ae(see,{...He,style:{transform:"rotate(180deg)"}}),e$=ae(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),t$=ae(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),n$=ae(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),r$=ae(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),WTe=ae(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),GTe=ae(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),i$=ae(m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),m.jsx("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),vt),s$=ae(m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),m.jsx("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),vt),aee=ae(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"9",cy:"7",r:"4"}),m.jsx("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),m.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),m.jsx("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),He);ae("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");ae("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");var c6=ae(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M15 5 5 15M5 5l10 10"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt);ae("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});ae("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});ae("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});var o$=Ie.memo(({theme:e})=>ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M25 26H111V111H25",fill:sl()}),m.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:sl(),strokeWidth:"2"}),m.jsx("path",{d:"M100 100H160V160H100",fill:sl()}),m.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:sl(),strokeWidth:"2"}),m.jsxs("g",{fill:eee(e),stroke:sl(),strokeWidth:"6",children:[m.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),a$=Ie.memo(({theme:e})=>ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M25 26H111V111H25",fill:sl()}),m.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:sl(),strokeWidth:"2"}),m.jsx("path",{d:"M100 100H160V160H100",fill:sl()}),m.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:sl(),strokeWidth:"2"}),m.jsxs("g",{fill:eee(e),stroke:sl(),strokeWidth:"6",children:[m.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),m.jsx("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),XTe=ae(m.jsx("g",{strokeWidth:1.25,children:m.jsx("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),vt),KTe=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),m.jsx("g",{mask:"url(#FillHachureIcon)",children:m.jsx("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),vt),YTe=ae(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",children:[m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:m.jsx("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("g",{mask:"url(#FillCrossHatchIcon)",children:m.jsx("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),ZTe=ae(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...vt,fill:"currentColor"}),lee=ae(m.jsx(m.Fragment,{children:m.jsx("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),vt),qTe=ae(m.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),vt),QTe=ae(m.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),vt);Ie.memo(({theme:e})=>ae(m.jsx("path",{d:"M6 10H34",stroke:sl(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));var JTe=ae(m.jsxs("g",{strokeWidth:"2",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12h2"}),m.jsx("path",{d:"M17 12h2"}),m.jsx("path",{d:"M11 12h2"})]}),He),eIe=ae(m.jsxs("g",{strokeWidth:"2",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 12v.01"}),m.jsx("path",{d:"M8 12v.01"}),m.jsx("path",{d:"M12 12v.01"}),m.jsx("path",{d:"M16 12v.01"}),m.jsx("path",{d:"M20 12v.01"})]}),He),tIe=ae(m.jsx("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),vt),nIe=ae(m.jsx("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),vt),rIe=ae(m.jsx("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),vt),iIe=ae(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),m.jsx("path",{d:"M13.3333 3.33331V3.34331"}),m.jsx("path",{d:"M16.6667 3.33331V3.34331"}),m.jsx("path",{d:"M16.6667 6.66669V6.67669"}),m.jsx("path",{d:"M16.6667 10V10.01"}),m.jsx("path",{d:"M3.33334 13.3333V13.3433"}),m.jsx("path",{d:"M16.6667 13.3333V13.3433"}),m.jsx("path",{d:"M3.33334 16.6667V16.6767"}),m.jsx("path",{d:"M6.66666 16.6667V16.6767"}),m.jsx("path",{d:"M10 16.6667V16.6767"}),m.jsx("path",{d:"M13.3333 16.6667V16.6767"}),m.jsx("path",{d:"M16.6667 16.6667V16.6767"})]}),vt),sIe=ae(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),m.jsx("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),m.jsx("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),m.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),m.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),m.jsx("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),m.jsx("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),m.jsx("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),m.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),m.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),m.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),m.jsx("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),He),oIe=ae(m.jsxs("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[m.jsx("path",{d:"M12 12l9 0"}),m.jsx("path",{d:"M3 9l6 6"}),m.jsx("path",{d:"M3 15l6 -6"})]}),He),aIe=Ie.memo(({flip:e=!1})=>ae(m.jsxs("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[m.jsx("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),m.jsx("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),lIe=Ie.memo(({flip:e=!1})=>ae(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[m.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),m.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),cIe=Ie.memo(({flip:e=!1})=>ae(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[m.jsx("path",{d:"M26 10L6 10"}),m.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),fIe=Ie.memo(({flip:e=!1})=>ae(m.jsx("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:m.jsx("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),dIe=Ie.memo(({flip:e=!1})=>ae(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[m.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),m.jsx("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),uIe=Ie.memo(({flip:e=!1})=>ae(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[m.jsx("path",{d:"M6,9.5H27"}),m.jsx("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),hIe=Ie.memo(({flip:e=!1})=>ae(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{d:"M6,9.5H20"}),m.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),pIe=Ie.memo(({flip:e=!1})=>ae(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{d:"M6,9.5H20"}),m.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),mIe=Ie.memo(({flip:e=!1})=>ae(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),gIe=Ie.memo(({flip:e=!1})=>ae(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),bIe=Ie.memo(({flip:e=!1})=>ae(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),yIe=ae(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),UIe=ae(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),xIe=ae(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),wIe=ae(m.jsx(m.Fragment,{children:m.jsx("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),vt),Nw=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 7v-2h13v2"}),m.jsx("path",{d:"M10 5v14"}),m.jsx("path",{d:"M12 19h-4"}),m.jsx("path",{d:"M15 13v-1h6v1"}),m.jsx("path",{d:"M18 12v7"}),m.jsx("path",{d:"M17 19h2"})]}),He),vIe=ae(m.jsx(m.Fragment,{children:m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 12h10"}),m.jsx("path",{d:"M7 5v14"}),m.jsx("path",{d:"M17 5v14"}),m.jsx("path",{d:"M15 19h4"}),m.jsx("path",{d:"M15 5h4"}),m.jsx("path",{d:"M5 19h4"}),m.jsx("path",{d:"M5 5h4"})]})}),He),$4=ae(m.jsx(m.Fragment,{children:m.jsx("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),vt),nM=ae(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),vt),EIe=ae(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),m.jsx("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),He),kIe=ae(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),m.jsx("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),He),SIe=ae(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),He),CIe=Ie.memo(({theme:e})=>ae(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),m.jsx("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),He)),AIe=Ie.memo(({theme:e})=>ae(m.jsxs("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),m.jsx("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),He)),MIe=Ie.memo(({theme:e})=>ae(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),m.jsx("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),m.jsx("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),He)),cee=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M21 19h-18l9 -15"}),m.jsx("path",{d:"M20.615 15.171h.015"}),m.jsx("path",{d:"M19.515 11.771h.015"}),m.jsx("path",{d:"M17.715 8.671h.015"}),m.jsx("path",{d:"M15.415 5.971h.015"})]}),He),TIe=ae(m.jsx("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});ae(m.jsx("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));var fee=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),m.jsx("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),m.jsx("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),m.jsx("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),He),l$=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M7 11l5 5l5 -5"}),m.jsx("path",{d:"M12 4l0 12"})]}),He),pN=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),m.jsx("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),He),IIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M9.15 14.85l8.85 -10.85"}),m.jsx("path",{d:"M6 4l8.85 10.85"})]}),He),NIe=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),m.jsx("path",{d:"M12 17l0 .01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),He);ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 4v16l13 -8z"})]}),He);ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),He);var RIe=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12l5 5l10 -10"})]}),He),_Ie=ae(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),m.jsx("path",{d:"M12 9v4"}),m.jsx("path",{d:"M12 17h.01"})]}),He),PIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 7l6 6"}),m.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),He),DIe=ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 3l-4 7h8z"}),m.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),He),dee=ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 7l16 0"}),m.jsx("path",{d:"M4 17l16 0"}),m.jsx("path",{d:"M7 4l0 16"}),m.jsx("path",{d:"M17 4l0 16"})]}),He),uee=ae(m.jsx("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),H3=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M4.16602 10H15.8327"}),m.jsx("path",{d:"M12.5 13.3333L15.8333 10"}),m.jsx("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),vt),hee=ae(m.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[m.jsx("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),m.jsx("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),pee=ae(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),m.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),He);ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),m.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),He);ae(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),m.jsx("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),m.jsx("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),m.jsx("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),m.jsx("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),m.jsx("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),He);var LIe=ae(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),m.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),m.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),m.jsx("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),He),mN=ae(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),m.jsx("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),He),OIe=ae(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),m.jsx("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),m.jsx("path",{d:"M3 3l18 18"})]}),He);ae(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),m.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),m.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),m.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),m.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),m.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),He);var jIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),m.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),m.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),m.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),m.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),m.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),He),x1=ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),m.jsx("path",{d:"M21 21l-6 -6"})]}),He),BIe=ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),m.jsx("path",{d:"M12 7v5l3 3"}),m.jsx("path",{d:"M19 16l-2 3h4l-2 3"})]}),He),FIe=ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),m.jsx("path",{d:"M5 10a7 7 0 0 0 14 0"}),m.jsx("path",{d:"M8 21l8 0"}),m.jsx("path",{d:"M12 17l0 4"})]}),He),zIe=ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 3l18 18"}),m.jsx("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),m.jsx("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),m.jsx("path",{d:"M8 21l8 0"}),m.jsx("path",{d:"M12 17l0 4"})]}),He),mee=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),He),$Ie=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M12 20v.01"}),m.jsx("path",{d:"M16 20v.01"}),m.jsx("path",{d:"M8 20v.01"}),m.jsx("path",{d:"M4 20v.01"}),m.jsx("path",{d:"M4 16v.01"}),m.jsx("path",{d:"M4 12v.01"}),m.jsx("path",{d:"M4 8v.01"}),m.jsx("path",{d:"M4 4v.01"}),m.jsx("path",{d:"M8 4v.01"}),m.jsx("path",{d:"M12 4v.01"}),m.jsx("path",{d:"M16 4v.01"}),m.jsx("path",{d:"M20 4v.01"}),m.jsx("path",{d:"M20 8v.01"}),m.jsx("path",{d:"M20 12v.01"}),m.jsx("path",{d:"M20 16v.01"}),m.jsx("path",{d:"M20 20v.01"})]}),He),HIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 3v18"}),m.jsx("path",{d:"M19 21v-18"}),m.jsx("path",{d:"M5 7h14"}),m.jsx("path",{d:"M5 15h14"}),m.jsx("path",{d:"M8 13v4"}),m.jsx("path",{d:"M11 13v4"}),m.jsx("path",{d:"M16 13v4"}),m.jsx("path",{d:"M14 5v4"}),m.jsx("path",{d:"M11 5v4"}),m.jsx("path",{d:"M8 5v4"}),m.jsx("path",{d:"M3 21h18"})]}),He),VIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 12l18 0"}),m.jsx("path",{d:"M7 16l10 0l-10 5l0 -5"}),m.jsx("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),He),WIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 3l0 18"}),m.jsx("path",{d:"M16 7l0 10l5 0l-5 -10"}),m.jsx("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),He),gee=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),m.jsx("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),m.jsx("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),He),gN=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),m.jsx("path",{d:"M22 22l-3 -3"}),m.jsx("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),m.jsx("path",{d:"M3 11v-1"}),m.jsx("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),m.jsx("path",{d:"M10 3h1"}),m.jsx("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),He),GIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),m.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),m.jsx("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),m.jsx("path",{d:"M10 15l2 6l2 -6"}),m.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),He),XIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),m.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),m.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),m.jsx("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),m.jsx("path",{d:"M11 21v-6l3 6v-6"})]}),He),KIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),m.jsx("path",{d:"M4 8l5 0"}),m.jsx("path",{d:"M15 8l4 0"})]}),He),YIe=ae(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),m.jsx("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),m.jsx("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),m.jsx("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),m.jsx("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),He),ZIe=ae(m.jsxs("g",{stroke:"currentColor",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...He,strokeWidth:1.5});ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M21 12h-13l3 -3"}),m.jsx("path",{d:"M11 15l-3 -3"})]}),He);var qIe=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),m.jsx("path",{d:"M10 9l5 3l-5 3z"})]}),He),QIe=ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 6h18"}),m.jsx("path",{d:"M3 12h18"}),m.jsx("path",{d:"M3 18h18"}),m.jsx("path",{d:"M6 3v18"}),m.jsx("path",{d:"M12 3v18"}),m.jsx("path",{d:"M18 3v18"})]}),He),JIe=ae(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),He),eNe=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 18l12 -12"}),m.jsx("path",{d:"M18 10v-4h-4"})]}),He),tNe=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),m.jsx("path",{d:"M18 4l3 3l-3 3"})]}),He),nNe=ae(m.jsxs("g",{children:[m.jsx("path",{d:"M16,12L20,9L16,6"}),m.jsx("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),He),bee=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 9l6 6l6 -6"})]}),He),rNe=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15l6 -6l6 6"})]}),He),iNe=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15l6 -6l6 6"})]}),He),c$=ae(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),m.jsx("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),He),yee=ae(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M5 7l0 10"}),m.jsx("path",{d:"M7 5l10 0"}),m.jsx("path",{d:"M7 19l10 0"}),m.jsx("path",{d:"M19 7l0 10"})]}),He),H4={[sr.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:Mb},[sr.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35},icon:$4},[sr["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15},icon:vIe},[sr["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25},icon:nM},[sr.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:Mb,deprecated:!0},[sr.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},icon:$4,deprecated:!0,local:!0},[sr.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},icon:nM,deprecated:!0},[sr["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[Zp.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[Zp["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},Y0={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},bN="local:",sNe=class extends Error{constructor(e="Couldn't export canvas.",t="CANVAS_ERROR"){super(),this.name=t,this.message=e}},Rw=class extends DOMException{constructor(e="Request Aborted"){super(e,"AbortError")}},fh=class extends Error{constructor(e="Image Scene Data Error",t="IMAGE_SCENE_DATA_ERROR"){super(e),Q(this,"code"),this.name="EncodingError",this.code=t}},oNe=class extends Error{constructor(){super(...arguments),Q(this,"code","ELEMENT_HAS_INVALID_INDEX")}},Uee=class extends Error{constructor(e="Worker URL is not defined!",t="WORKER_URL_NOT_DEFINED"){super(e),Q(this,"code"),this.name="WorkerUrlNotDefinedError",this.code=t}},xee=class extends Error{constructor(e="Worker has to be in a separate chunk!",t="WORKER_IN_THE_MAIN_CHUNK"){super(e),Q(this,"code"),this.name="WorkerInTheMainChunkError",this.code=t}},f$=class extends Error{constructor(e){super(e),this.name="ExcalidrawError"}},aNe=class{constructor(e){Q(this,"instance"),Q(this,"debounceTerminate"),this.instance=new Worker(e,{type:"module"})}},lNe=class wee{constructor(t,n){Q(this,"idleWorkers",new Set),Q(this,"workerUrl"),Q(this,"workerTTL"),this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new Uee;if(!import.meta.url||t.toString()===import.meta.url)throw new xee;return new wee(t,n)}async postMessage(t,n){let r,i=Array.from(this.idleWorkers).shift();return i?(this.idleWorkers.delete(i),r=i):r=await this.createWorker(),new Promise((s,o)=>{r.instance.onmessage=this.onMessageHandler(r,s),r.instance.onerror=this.onErrorHandler(r,o),r.instance.postMessage(t,n),r.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(let t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){let t=new aNe(this.workerUrl);return t.debounceTerminate=Og(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return r=>{t.debounceTerminate(),this.idleWorkers.add(t),n(r.data)}}onErrorHandler(t,n){return r=>{t.debounceTerminate(()=>n(r)),t.debounceTerminate.flush(),this.clear()}}},d$=typeof Worker<"u",cNe=async(e,t)=>{let{Commands:n,subsetToBase64:r,toBase64:i}=await dNe();return d$?jg(async()=>{try{let s=await uNe(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return i(a)}catch(s){return d$=!1,XMe()&&(s instanceof Uee||s instanceof xee)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),r(e,t)}}):r(e,t)},tS=null,nS=null,fNe=async()=>(tS||(tS=Ze(()=>import("./subset-worker.chunk-CHJCmIhj.js"),__vite__mapDeps([0,1]))),tS),dNe=async()=>(nS||(nS=Ze(()=>import("./subset-shared.chunk-CApT0-fb.js"),[])),nS),rS=null,uNe=()=>(rS||(rS=jg(async()=>{let{WorkerUrl:e}=await fNe();return lNe.create(e)})),rS),vee=class V3{constructor(t,n,r){Q(this,"urls"),Q(this,"fontFace"),this.urls=V3.createUrls(n);let i=this.urls.map(s=>`url(${s}) ${V3.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,i,{display:"swap",style:"normal",weight:"400",...r})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;let n=Array.from(t).map(r=>r.codePointAt(0));return this.getContent(n).then(r=>`@font-face { font-family: ${this.fontFace.family}; src: url(${r}); }`)}async getContent(t){let n=0,r=[];for(;n<this.urls.length;){let i=this.urls[n];try{let s=await this.fetchFont(i);return await cNe(s,t)}catch(s){r.push(`"${i.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(r,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return jg(async()=>{let n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){let r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){let t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{let[r,i]=n.replace("U+","").split("-");return i?`\\u{${r}}-\\u{${i}}`:`\\u{${r}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(bN))return[];if(t.startsWith("http"))return[new URL(t)];let n=t.replace(/^\/+/,""),r=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){let i=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);r.push(new URL(n,i))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(i=>{let s=this.normalizeBaseUrl(i);r.push(new URL(n,s))});return r.push(new URL(n,V3.ASSETS_FALLBACK_URL)),r}static getFormat(t){if(!(t instanceof URL))return"";try{let n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var r;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(r=window==null?void 0:window.location)==null?void 0:r.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};Q(vee,"ASSETS_FALLBACK_URL",`https://esm.sh/${`${At.PKG_NAME}@${At.PKG_VERSION}`}/dist/prod/`);var hNe=vee,pNe="./fonts/Cascadia/CascadiaCode-Regular.woff2",mNe=[{uri:pNe}],gNe="./fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",bNe="./fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",yNe="./fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",UNe="./fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",xNe=[{uri:gNe,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:bNe,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:yNe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:UNe,descriptors:{unicodeRange:"U+3bb"}}],wNe=[{uri:bN}],vNe="./fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",ENe="./fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",kNe="./fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",SNe="./fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",CNe="./fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",ANe="./fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",MNe="./fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",TNe=[{uri:vNe,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:ENe,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:kNe,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:SNe,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:CNe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:ANe,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:MNe,descriptors:{unicodeRange:"U+300-301,U+303"}}],INe=[{uri:bN}],NNe="./fonts/Liberation/LiberationSans-Regular.woff2",RNe=[{uri:NNe}],_Ne="./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",PNe="./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",DNe=[{uri:PNe,descriptors:{unicodeRange:Y0.LATIN_EXT}},{uri:_Ne,descriptors:{unicodeRange:Y0.LATIN}}],LNe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",ONe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",jNe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",BNe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",FNe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",zNe=[{uri:BNe,descriptors:{unicodeRange:Y0.CYRILIC_EXT,weight:"500"}},{uri:jNe,descriptors:{unicodeRange:Y0.CYRILIC,weight:"500"}},{uri:FNe,descriptors:{unicodeRange:Y0.VIETNAMESE,weight:"500"}},{uri:ONe,descriptors:{unicodeRange:Y0.LATIN_EXT,weight:"500"}},{uri:LNe,descriptors:{unicodeRange:Y0.LATIN,weight:"500"}}],$Ne="./fonts/Virgil/Virgil-Regular.woff2",HNe=[{uri:$Ne}],VNe="./fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",WNe="./fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",GNe="./fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",XNe="./fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",KNe="./fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",YNe="./fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",ZNe="./fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",qNe="./fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",QNe="./fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",JNe="./fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",eRe="./fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",tRe="./fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",nRe="./fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",rRe="./fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",iRe="./fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",sRe="./fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",oRe="./fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",aRe="./fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",lRe="./fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",cRe="./fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",fRe="./fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",dRe="./fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",uRe="./fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",hRe="./fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",pRe="./fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",mRe="./fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",gRe="./fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",bRe="./fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",yRe="./fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",URe="./fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",xRe="./fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",wRe="./fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",vRe="./fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",ERe="./fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",kRe="./fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",SRe="./fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",CRe="./fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",ARe="./fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",MRe="./fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",TRe="./fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",IRe="./fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",NRe="./fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",RRe="./fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",_Re="./fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",PRe="./fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",DRe="./fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",LRe="./fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",ORe="./fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",jRe="./fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",BRe="./fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",FRe="./fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",zRe="./fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",$Re="./fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",HRe="./fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",VRe="./fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",WRe="./fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",GRe="./fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",XRe="./fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",KRe="./fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",YRe="./fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",ZRe="./fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",qRe="./fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",QRe="./fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",JRe="./fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",e_e="./fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",t_e="./fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",n_e="./fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",r_e="./fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",i_e="./fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",s_e="./fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",o_e="./fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",a_e="./fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",l_e="./fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",c_e="./fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",f_e="./fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",d_e="./fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",u_e="./fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",h_e="./fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",p_e="./fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",m_e="./fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",g_e="./fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",b_e="./fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",y_e="./fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",U_e="./fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",x_e="./fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",w_e="./fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",v_e="./fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",E_e="./fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",k_e="./fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",S_e="./fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",C_e="./fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",A_e="./fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",M_e="./fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",T_e="./fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",I_e="./fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",N_e="./fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",R_e="./fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",__e="./fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",P_e="./fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",D_e="./fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",L_e="./fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",O_e="./fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",j_e="./fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",B_e="./fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",F_e="./fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",z_e="./fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",$_e="./fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",H_e="./fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",V_e="./fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",W_e="./fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",G_e="./fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",X_e="./fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",K_e="./fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",Y_e="./fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",Z_e="./fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",q_e="./fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",Q_e="./fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",J_e="./fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",ePe="./fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",tPe="./fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",nPe="./fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",rPe="./fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",iPe="./fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",sPe="./fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",oPe="./fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",aPe="./fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",lPe="./fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",cPe="./fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",fPe="./fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",dPe="./fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",uPe="./fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",hPe="./fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",pPe="./fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",mPe="./fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",gPe="./fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",bPe="./fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",yPe="./fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",UPe="./fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",xPe="./fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",wPe="./fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",vPe="./fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",EPe="./fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",kPe="./fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",SPe="./fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",CPe="./fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",APe="./fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",MPe="./fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",TPe="./fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",IPe="./fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",NPe="./fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",RPe="./fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",_Pe="./fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",PPe="./fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",DPe="./fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",LPe="./fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",OPe="./fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",jPe="./fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",BPe="./fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",FPe="./fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",zPe="./fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",$Pe="./fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",HPe="./fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",VPe="./fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",WPe="./fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",GPe="./fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",XPe="./fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",KPe="./fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",YPe="./fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",ZPe="./fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",qPe="./fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",QPe="./fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",JPe="./fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",eDe="./fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",tDe="./fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",nDe="./fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",rDe="./fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",iDe="./fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",sDe="./fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",oDe="./fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",aDe="./fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",lDe="./fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",cDe="./fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",fDe="./fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",dDe="./fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",uDe="./fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",hDe="./fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",pDe="./fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",mDe="./fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",gDe="./fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",bDe="./fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",yDe="./fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",UDe="./fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",xDe="./fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",wDe="./fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",vDe="./fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",EDe="./fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",kDe="./fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",SDe="./fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",CDe="./fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",ADe="./fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",MDe="./fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",TDe="./fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",IDe="./fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",NDe="./fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",RDe="./fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",_De="./fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",PDe="./fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",DDe="./fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",LDe="./fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",ODe=[{uri:VNe,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:WNe,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:GNe,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:XNe,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:KNe,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:YNe,descriptors:{unicodeRange:"U+d520-d608"}},{uri:ZNe,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:qNe,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:QNe,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:JNe,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:eRe,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:tRe,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:nRe,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:rRe,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:iRe,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:sRe,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:oRe,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:aRe,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:lRe,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:cRe,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:fRe,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:dRe,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:uRe,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:hRe,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:pRe,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:mRe,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:gRe,descriptors:{unicodeRange:"U+c258-c340"}},{uri:bRe,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:yRe,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:URe,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:xRe,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:wRe,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:vRe,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:ERe,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:kRe,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:SRe,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:CRe,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:ARe,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:MRe,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:TRe,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:IRe,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:NRe,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:RRe,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:_Re,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:PRe,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:DRe,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:LRe,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:ORe,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:jRe,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:BRe,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:FRe,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:zRe,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:$Re,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:HRe,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:VRe,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:WRe,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:GRe,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:XRe,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:KRe,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:YRe,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:ZRe,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:qRe,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:QRe,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:JRe,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:e_e,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:t_e,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:n_e,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:r_e,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:i_e,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:s_e,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:o_e,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:a_e,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:l_e,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:c_e,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:f_e,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:d_e,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:u_e,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:h_e,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:p_e,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:m_e,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:g_e,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:b_e,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:y_e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:U_e,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:x_e,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:w_e,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:v_e,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:E_e,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:k_e,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:S_e,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:C_e,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:A_e,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:M_e,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:T_e,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:I_e,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:N_e,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:R_e,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:__e,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:P_e,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:D_e,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:L_e,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:O_e,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:j_e,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:B_e,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:F_e,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:z_e,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:$_e,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:H_e,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:V_e,descriptors:{unicodeRange:"U+487a-4932"}},{uri:W_e,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:G_e,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:X_e,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:K_e,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:Y_e,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:Z_e,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:q_e,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:Q_e,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:J_e,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:ePe,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:tPe,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:nPe,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:rPe,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:iPe,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:sPe,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:oPe,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:aPe,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:lPe,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:cPe,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:fPe,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:dPe,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:uPe,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:hPe,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:pPe,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:mPe,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:gPe,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:bPe,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:yPe,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:UPe,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:xPe,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:wPe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:vPe,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:EPe,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:kPe,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:SPe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:CPe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:APe,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:MPe,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:TPe,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:IPe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:NPe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:RPe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:_Pe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:PPe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:DPe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:LPe,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:OPe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:jPe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:BPe,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:FPe,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:zPe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:$Pe,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:HPe,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:VPe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:WPe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:GPe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:XPe,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:KPe,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:YPe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:ZPe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:qPe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:QPe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:JPe,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:eDe,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:tDe,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:nDe,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:rDe,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:iDe,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:sDe,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:oDe,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:aDe,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:lDe,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:cDe,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:fDe,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:dDe,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:uDe,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:hDe,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:pDe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:mDe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:gDe,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:bDe,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:yDe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:UDe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:xDe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:wDe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:vDe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:EDe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:kDe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:SDe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:CDe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:ADe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:MDe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:TDe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:IDe,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:NDe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:RDe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:_De,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:PDe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:DDe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:LDe,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],qd=class An{constructor(t){Q(this,"scene"),Q(this,"getSceneFamilies",()=>An.getUniqueFamilies(this.scene.getNonDeletedElements())),Q(this,"onLoaded",n=>{let r=!0;for(let o of n){let a=`${o.family}-${o.style}-${o.weight}-${o.unicodeRange}`;An.loadedFontsCache.has(a)||(An.loadedFontsCache.add(a),r=!1)}if(r)return;let i=!1,s=this.scene.getNonDeletedElementsMap();for(let o of this.scene.getNonDeletedElements())if(Ve(o)){i=!0,lr.delete(o),Ry.clearCache(kn(o));let a=Ni(o,s);a&&lr.delete(a)}i&&this.scene.triggerUpdate()}),Q(this,"loadSceneFonts",async()=>{let n=this.getSceneFamilies(),r=An.getCharsPerFamily(this.scene.getNonDeletedElements());return An.loadFontFaces(n,r)}),this.scene=t}static get registered(){return An._registered?An._initialized||(An._registered=new Map([...An.init().entries(),...An._registered.entries()])):An._registered=An.init(),An._registered}get registered(){return An.registered}static async generateFontFaceDeclarations(t){let n=An.getUniqueFamilies(t),r=An.getCharsPerFamily(t),i=n.find(l=>TJ(l).includes(Yp));if(i){let l=An.getCharacters(r,i);if(aTe(l)){let f=Zp[Yp];r[f]=new Set(l),n.unshift(Zp[Yp])}}let s=An.fontFacesStylesGenerator(n,r),o=3,a=await new Hz(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(let{fontFaces:s,metadata:o}of An.registered.values())if(!o.local)for(let{fontFace:a}of s)window.document.fonts.has(a)||window.document.fonts.add(a);let r=An.fontFacesLoader(t,n),i=10;return(await new Hz(r,i).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(let[r,i]of t.entries()){let s=kn({fontFamily:i,fontSize:16}),o=An.getCharacters(n,i);window.document.fonts.check(s,o)||(yield jg(async()=>{var a;try{let l=await window.document.fonts.load(s,o);return[r,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=An.registered.get(i))==null?void 0:a.fontFaces.map(f=>f.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(let[r,i]of t.entries()){let{fontFaces:s,metadata:o}=An.registered.get(i)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${i}"`,An.registered);continue}if(!(o!=null&&o.local))for(let[a,l]of s.entries())yield jg(async()=>{try{let f=An.getCharacters(n,i),c=await l.toCSS(f);return c?[r*1e4+a,c]:void 0}catch(f){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,f)}})}}static register(t,n,...r){let i=sr[t]??Zp[t];return this.registered.get(i)||this.registered.set(i,{metadata:n,fontFaces:r.map(({uri:s,descriptors:o})=>new hNe(t,s,o))}),this.registered}static init(){let t={registered:new Map},n=(r,...i)=>{let s=sr[r]??Zp[r],o=H4[s]??H4[sr.Excalifont];An.register.call(t,r,o,...i)};return n("Cascadia",...mNe),n("Comic Shanns",...xNe),n("Excalifont",...TNe),n("Helvetica",...INe),n("Liberation Sans",...RNe),n("Lilita One",...DNe),n("Nunito",...zNe),n("Virgil",...HNe),n(Yp,...ODe),n(kb,...wNe),An._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,r)=>(Ve(r)&&n.add(r.fontFamily),n),new Set))}static getCharsPerFamily(t){let n={};for(let r of t)if(Ve(r))for(let i of r.originalText)n[r.fontFamily]||(n[r.fontFamily]=new Set),n[r.fontFamily].add(i);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(An.registered.keys())}};Q(qd,"loadedFontsCache",new Set),Q(qd,"_registered"),Q(qd,"_initialized",!1),Q(qd,"loadElementsFonts",async e=>{let t=qd.getUniqueFamilies(e),n=qd.getCharsPerFamily(e);return qd.loadFontFaces(t,n)});var Hf=qd,Eee=(e,t,n)=>{var l;let{unitsPerEm:r,ascender:i,descender:s}=((l=Hf.registered.get(e))==null?void 0:l.metadata.metrics)||H4[sr.Virgil].metrics,o=t/r,a=(n-o*i+o*s)/2;return o*i+a},w1=e=>{var n;let{lineHeight:t}=((n=Hf.registered.get(e))==null?void 0:n.metadata.metrics)||H4[sr.Excalifont].metrics;return t},kee=e=>{let{angle:t,width:n,height:r,x:i,y:s}=e,o=i+n/2,a=s+r/2,l=D(o,a),f;return e.type==="diamond"?f=jz(ue(D(o,s),l,t),ue(D(i+n,a),l,t),ue(D(o,s+r),l,t),ue(D(i,a),l,t)):f=jz(ue(D(i,s),l,t),ue(D(i+n,s),l,t),ue(D(i+n,s+r),l,t),ue(D(i,s+r),l,t)),{type:"polygon",data:f}},jDe=(e,t,n=10)=>{let[r,i,s,o,a,l]=wt(e,t,!0);r-=n,s+=n,i-=n,o+=n;let f=D(a,l),c=ue(D(r,i),f,e.angle),d=ue(D(s,i),f,e.angle),u=ue(D(r,o),f,e.angle),h=ue(D(s,o),f,e.angle);return{type:"polygon",data:[c,d,h,u]}},BDe=e=>{let{width:t,height:n,angle:r,x:i,y:s}=e;return{type:"ellipse",data:{center:D(i+t/2,s+n/2),angle:r,halfWidth:t/2,halfHeight:n/2}}},u0=e=>{if(!e)return[];for(let t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},FDe=(e,t=D(0,0),n,r)=>{let i=l=>ue(D(l[0]+t[0],l[1]+t[1]),r,n),s=u0(e),o=[],a=D(0,0);for(let l of s){if(l.op==="move"){let f=rN(l.data);us(f!=null,"Ops data is not a point"),a=i(f)}if(l.op==="bcurveTo"){let f=i(D(l.data[0],l.data[1])),c=i(D(l.data[2],l.data[3])),d=i(D(l.data[4],l.data[5]));o.push(Lf(a,f,c,d)),a=d}}return{type:"polycurve",data:o}},zDe=e=>{let t=e[0],n=[];for(let r=1;r<e.length;r++){let i=e[r];n.push(it(t,i)),t=i}return n},$De=(e,t,n=!1)=>{let r=s=>ue(Ot(_u(et(s),Fi(e.x,e.y))),t,e.angle),i=zDe(e.points.map(s=>r(s)));return n?{type:"polygon",data:j4(i.flat())}:{type:"polyline",data:i}},HDe=(e,t,n=D(0,0),r,i)=>{let s=c=>ue(D(c[0]+n[0],c[1]+n[1]),i,r);if(e.roundness===null)return{type:"polygon",data:j4(e.points.map(c=>s(c)))};let o=u0(t),a=[],l=!1;for(let c of o)c.op==="move"?(l=!l,l&&a.push(D(c.data[0],c.data[1]))):c.op==="bcurveTo"?l&&(a.push(D(c.data[0],c.data[1])),a.push(D(c.data[2],c.data[3])),a.push(D(c.data[4],c.data[5]))):c.op==="lineTo"&&l&&a.push(D(c.data[0],c.data[1]));let f=MAe(a,10,5).map(c=>s(c));return{type:"polygon",data:j4(f)}},VDe=(e,t)=>{let{angle:n,halfWidth:r,halfHeight:i,center:s}=t,o=r,a=i,l=_u(et(e),wr(et(s),-1)),[f,c]=ue(Ot(l),D(0,0),-n),d=Math.abs(f),u=Math.abs(c),h=.707,g=.707;for(let x=0;x<3;x++){let v=o*h,E=a*g,k=(o*o-a*a)*h**3/o,M=(a*a-o*o)*g**3/a,S=v-k,A=E-M,I=d-k,R=u-M,P=Math.hypot(A,S),_=Math.hypot(R,I);h=Math.min(1,Math.max(0,(I*P/_+k)/o)),g=Math.min(1,Math.max(0,(R*P/_+M)/a));let O=Math.hypot(g,h);h/=O,g/=O}let[y,U]=[o*h*Math.sign(f),a*g*Math.sign(c)];return cn(D(f,c),D(y,U))},WDe=(e,t,n=1e-4)=>VDe(e,t)<=n,GDe=(e,t)=>{let{center:n,angle:r,halfWidth:i,halfHeight:s}=t,o=_u(et(e),wr(et(n),-1)),[a,l]=ue(Ot(o),D(0,0),-r);return a/i*(a/i)+l/s*(l/s)<=1},rM=(e,t,n=0)=>{switch(t.type){case"polygon":return RMe(e,t.data,n);case"ellipse":return WDe(e,t.data,n);case"line":return g1(e,t.data,n);case"polyline":return Cee(e,t.data,n);case"curve":return See(e,t.data,n);case"polycurve":return XDe(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},V4=(e,t)=>{switch(t.type){case"polygon":return Bz(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return GDe(e,t.data);case"polyline":{let n=j4(t.data.flat());return Bz(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},XDe=(e,t,n)=>t.some(r=>See(e,r,n)),KDe=e=>{let[t,n,r,i]=e;return(s,o)=>Math.pow(1-s,3)*i[o]+3*s*Math.pow(1-s,2)*r[o]+3*Math.pow(s,2)*(1-s)*n[o]+t[o]*Math.pow(s,3)},YDe=(e,t=10)=>{let n=KDe(e),r=[n(0,0),n(0,1)],i=[],s=0,o=1/t;for(let a=0;a<t;a++)if(s+=o,s<=1){let l=D(n(s,0),n(s,1));i.push(it(r,l)),r=l}return i},See=(e,t,n)=>Cee(e,YDe(t),n),Cee=(e,t,n=1e-4)=>t.some(r=>g1(e,r,n));function Aee(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}var ZDe=(e,t)=>{let{halfWidth:n,halfHeight:r,center:i}=t,s=n,o=r,a=_u(et(e),wr(et(i),-1)),l=Math.abs(a[0]),f=Math.abs(a[1]),c=.707,d=.707;for(let g=0;g<3;g++){let y=s*c,U=o*d,x=(s*s-o*o)*c**3/s,v=(o*o-s*s)*d**3/o,E=y-x,k=U-v,M=l-x,S=f-v,A=Math.hypot(k,E),I=Math.hypot(S,M);c=Math.min(1,Math.max(0,(M*A/I+x)/s)),d=Math.min(1,Math.max(0,(S*A/I+v)/o));let R=Math.hypot(d,c);c/=R,d/=R}let[u,h]=[s*c*Math.sign(a[0]),o*d*Math.sign(a[1])];return cn(Ot(a),D(u,h))};function qDe({center:e,halfWidth:t,halfHeight:n},[r,i]){let[s,o]=e,a=r[0]-s,l=r[1]-o,f=i[0]-s,c=i[1]-o,d=Math.pow(f-a,2)/Math.pow(t,2)+Math.pow(c-l,2)/Math.pow(n,2),u=2*(a*(f-a)/Math.pow(t,2)+l*(c-l)/Math.pow(n,2)),h=Math.pow(a,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,g=(-u+Math.sqrt(Math.pow(u,2)-4*d*h))/(2*d),y=(-u-Math.sqrt(Math.pow(u,2)-4*d*h))/(2*d),U=[D(a+g*(f-a)+s,l+g*(c-l)+o),D(a+y*(f-a)+s,l+y*(c-l)+o)].filter(x=>!isNaN(x[0])&&!isNaN(x[1]));return U.length===2&&vl(U[0],U[1])?[U[0]]:U}function Mee(e,t=0){let n=bl(Math.min(e.width,e.height),e);if(n<=0){let d=YA(D(e.x-t,e.y-t),D(e.x+e.width+t,e.y+e.height+t)),u=it(D(d[0][0]+n,d[0][1]),D(d[1][0]-n,d[0][1])),h=it(D(d[1][0],d[0][1]+n),D(d[1][0],d[1][1]-n)),g=it(D(d[0][0]+n,d[1][1]),D(d[1][0]-n,d[1][1])),y=it(D(d[0][0],d[1][1]-n),D(d[0][0],d[0][1]+n));return[[u,h,g,y],[]]}let r=D(e.x+e.width/2,e.y+e.height/2),i=YA(D(e.x,e.y),D(e.x+e.width,e.y+e.height)),s=it(D(i[0][0]+n,i[0][1]),D(i[1][0]-n,i[0][1])),o=it(D(i[1][0],i[0][1]+n),D(i[1][0],i[1][1]-n)),a=it(D(i[0][0]+n,i[1][1]),D(i[1][0]-n,i[1][1])),l=it(D(i[0][0],i[1][1]-n),D(i[0][0],i[0][1]+n)),f=[wr(cs(et(D(i[0][0]-t,i[0][1]-t),r)),t),wr(cs(et(D(i[1][0]+t,i[0][1]-t),r)),t),wr(cs(et(D(i[1][0]+t,i[1][1]+t),r)),t),wr(cs(et(D(i[0][0]-t,i[1][1]+t),r)),t)],c=[Lf(Ot(f[0],l[1]),Ot(f[0],D(l[1][0]+2/3*(i[0][0]-l[1][0]),l[1][1]+2/3*(i[0][1]-l[1][1]))),Ot(f[0],D(s[0][0]+2/3*(i[0][0]-s[0][0]),s[0][1]+2/3*(i[0][1]-s[0][1]))),Ot(f[0],s[0])),Lf(Ot(f[1],s[1]),Ot(f[1],D(s[1][0]+2/3*(i[1][0]-s[1][0]),s[1][1]+2/3*(i[0][1]-s[1][1]))),Ot(f[1],D(o[0][0]+2/3*(i[1][0]-o[0][0]),o[0][1]+2/3*(i[0][1]-o[0][1]))),Ot(f[1],o[0])),Lf(Ot(f[2],o[1]),Ot(f[2],D(o[1][0]+2/3*(i[1][0]-o[1][0]),o[1][1]+2/3*(i[1][1]-o[1][1]))),Ot(f[2],D(a[1][0]+2/3*(i[1][0]-a[1][0]),a[1][1]+2/3*(i[1][1]-a[1][1]))),Ot(f[2],a[1])),Lf(Ot(f[3],a[0]),Ot(f[3],D(a[0][0]+2/3*(i[0][0]-a[0][0]),a[0][1]+2/3*(i[1][1]-a[0][1]))),Ot(f[3],D(l[0][0]+2/3*(i[0][0]-l[0][0]),l[0][1]+2/3*(i[1][1]-l[0][1]))),Ot(f[3],l[0]))];return[[it(c[0][3],c[1][0]),it(c[1][3],c[2][0]),it(c[2][3],c[3][0]),it(c[3][3],c[0][0])],c]}function Tee(e,t=0){var E;let[n,r,i,s,o,a,l,f]=Yee(e),c=bl(Math.abs(n-l),e),d=bl(Math.abs(s-r),e);if(((E=e.roundness)==null?void 0:E.type)==null){let[k,M,S,A]=[D(e.x+n,e.y+r-t),D(e.x+i+t,e.y+s),D(e.x+o,e.y+a+t),D(e.x+l-t,e.y+f)],I=it(D(k[0]+c,k[1]+d),D(M[0]-c,M[1]-d)),R=it(D(M[0]-c,M[1]+d),D(S[0]+c,S[1]-d)),P=it(D(S[0]-c,S[1]-d),D(A[0]+c,A[1]+d)),_=it(D(A[0]+c,A[1]-d),D(k[0]-c,k[1]+d));return[[I,R,P,_],[]]}let u=D(e.x+e.width/2,e.y+e.height/2),[h,g,y,U]=[D(e.x+n,e.y+r),D(e.x+i,e.y+s),D(e.x+o,e.y+a),D(e.x+l,e.y+f)],x=[wr(cs(et(g,u)),t),wr(cs(et(y,u)),t),wr(cs(et(U,u)),t),wr(cs(et(h,u)),t)],v=[Lf(Ot(x[0],D(g[0]-c,g[1]-d)),Ot(x[0],g),Ot(x[0],g),Ot(x[0],D(g[0]-c,g[1]+d))),Lf(Ot(x[1],D(y[0]+c,y[1]-d)),Ot(x[1],y),Ot(x[1],y),Ot(x[1],D(y[0]-c,y[1]-d))),Lf(Ot(x[2],D(U[0]+c,U[1]+d)),Ot(x[2],U),Ot(x[2],U),Ot(x[2],D(U[0]+c,U[1]-d))),Lf(Ot(x[3],D(h[0]-c,h[1]+d)),Ot(x[3],h),Ot(x[3],h),Ot(x[3],D(h[0]+c,h[1]+d)))];return[[it(v[0][3],v[1][0]),it(v[1][3],v[2][0]),it(v[2][3],v[3][0]),it(v[3][3],v[0][0])],v]}var iM=e=>{if(e.type==="arrow")return!1;let t=!ul(e.backgroundColor)||Ma(e)||ba(e)||Ve(e);return e.type==="line"||e.type==="freedraw"?t&&Yf(e.points):t||ln(e)},Fp=({x:e,y:t,element:n,shape:r,threshold:i=10,frameNameBound:s=null})=>{let o=iM(n)&&V4(D(e,t),r)||rM(D(e,t),r,i);return!o&&s&&(o=V4(D(e,t),{type:"polygon",data:kee(s).data})),o},yN=(e,t,n,r,i=0)=>{let[s,o,a,l]=kl(n,r);return s-=i,o-=i,a+=i,l+=i,LJ(D(s,o),D(e,t),D(a,l))},QDe=(e,t)=>!Fp(e)&&!Iee(e.x,e.y,Ree(e.element,t))&&yN(e.x,e.y,e.element,t),Iee=(e,t,n)=>!!n&&V4(D(e,t),n),Nee=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return JDe(e,t,n);case"diamond":return eLe(e,t,n);case"ellipse":return tLe(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},JDe=(e,t,n=0)=>{let r=D(e.x+e.width/2,e.y+e.height/2),i=ue(t[0],r,-e.angle),s=ue(t[1],r,-e.angle),[o,a]=Mee(e,n);return[...o.map(l=>Ab(it(i,s),l)).filter(l=>l!=null).map(l=>ue(l,r,e.angle)),...a.flatMap(l=>OJ(l,it(i,s))).filter(l=>l!=null).map(l=>ue(l,r,e.angle))].filter((l,f,c)=>c.findIndex(d=>vl(l,d))===f)},eLe=(e,t,n=0)=>{let r=D(e.x+e.width/2,e.y+e.height/2),i=ue(t[0],r,-e.angle),s=ue(t[1],r,-e.angle),[o,a]=Tee(e,n);return[...o.map(l=>Ab(it(i,s),l)).filter(l=>l!=null).map(l=>ue(l,r,e.angle)),...a.flatMap(l=>OJ(l,it(i,s))).filter(l=>l!=null).map(l=>ue(l,r,e.angle))].filter((l,f,c)=>c.findIndex(d=>vl(l,d))===f)},tLe=(e,t,n=0)=>{let r=D(e.x+e.width/2,e.y+e.height/2),i=ue(t[0],r,-e.angle),s=ue(t[1],r,-e.angle);return qDe(Aee(r,e.width/2+n,e.height/2+n),KA(i,s)).map(o=>ue(o,r,e.angle))},Jt={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},J={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:Cc?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},nLe=new Map([[J.Z,Jt.Z],[J.Y,Jt.Y]]),rLe=e=>/^[a-z]$/.test(e.toLowerCase()),sM=(e,t)=>{if(t===e.key.toLowerCase())return!0;let n=nLe.get(t);return!!(n&&!rLe(e.key)&&e.code===n)},K5=e=>e===J.ARROW_LEFT||e===J.ARROW_RIGHT||e===J.ARROW_DOWN||e===J.ARROW_UP,iS=e=>e.altKey,v5=e=>e.shiftKey,C2=e=>e.shiftKey,UN=[{icon:kTe,value:"selection",key:J.V,numericKey:J[1],fillable:!0},{icon:STe,value:"rectangle",key:J.R,numericKey:J[2],fillable:!0},{icon:CTe,value:"diamond",key:J.D,numericKey:J[3],fillable:!0},{icon:ATe,value:"ellipse",key:J.O,numericKey:J[4],fillable:!0},{icon:MTe,value:"arrow",key:J.A,numericKey:J[5],fillable:!0},{icon:TTe,value:"line",key:J.L,numericKey:J[6],fillable:!0},{icon:Mb,value:"freedraw",key:[J.P,J.X],numericKey:J[7],fillable:!1},{icon:tee,value:"text",key:J.T,numericKey:J[8],fillable:!1},{icon:NTe,value:"image",key:null,numericKey:J[9],fillable:!1},{icon:RTe,value:"eraser",key:J.E,numericKey:J[0],fillable:!1}],iLe=e=>{var t;return((t=UN.find((n,r)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e))))==null?void 0:t.value)||null},yf=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return kee(e);case"arrow":case"line":{let r=((n=lr.get(e))==null?void 0:n[0])??lr.generateElementShape(e,null)[0],[,,,,i,s]=wt(e,t);return iM(e)?HDe(e,r,D(e.x,e.y),e.angle,D(i,s)):FDe(r,D(e.x,e.y),e.angle,D(i,s))}case"ellipse":return BDe(e);case"freedraw":{let[,,,,r,i]=wt(e,t);return $De(e,D(r,i),iM(e))}}},Ree=(e,t)=>{let n=Ct(e,t);return n?e.type==="arrow"?yf({...n,...We.getBoundTextElementPosition(e,n,t)},t):yf(n,t):null},_ee=(e,t)=>{let n=lr.generateElementShape(e,null);if(!n)return null;let r=u0(n[0]),i=D(0,0),s=0,o=1/0,a=null;for(;s<r.length;){let{op:l,data:f}=r[s];if(l==="move"&&(us(CMe(f),"The returned ops is not compatible with a point"),i=f),l==="bcurveTo"){let c=i,d=D(f[0],f[1]),u=D(f[2],f[3]),h=D(f[4],f[5]),g=cn(h,t);g<o&&(o=g,a=[c,d,u,h]),i=h}s++}return a},Pee=(e,t,n,r,i)=>{let s=(l,f)=>Math.pow(1-l,3)*r[f]+3*l*Math.pow(1-l,2)*n[f]+3*Math.pow(l,2)*(1-l)*t[f]+e[f]*Math.pow(l,3),o=s(i,0),a=s(i,1);return D(o,a)},sLe=(e,t)=>{let n=_ee(e,t);if(!n)return[];let r=[],i=1;for(;i>0;){let s=Pee(n[0],n[1],n[2],n[3],i);r.push(D(s[0],s[1])),i-=.05}return r.length&&vl(r.at(-1),t)&&r.push(D(t[0],t[1])),r},Dee=(e,t)=>{let n=[];n[0]=0;let r=sLe(e,t),i=0,s=0;for(;i<r.length-1;){let o=cn(r[i],r[i+1]);s+=o,n.push(s),i++}return n},oLe=(e,t)=>Dee(e,t).at(-1),aLe=(e,t,n)=>{let r=Dee(e,t),i=r.length-1,s=r.at(-1),o=n*s,a=0,l=i,f=0;for(;a<l;)f=Math.floor(a+(l-a)/2),r[f]<o?a=f+1:l=f;return r[f]>o&&f--,r[f]===o?f/i:1-(f+(o-r[f])/(r[f+1]-r[f]))/i},ac=(e,t)=>{let n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=D(n.midX,n.midY),[i,s]=ue(D(n.minX,n.minY),r,e.angle),[o,a]=ue(D(n.maxX,n.minY),r,e.angle),[l,f]=ue(D(n.maxX,n.maxY),r,e.angle),[c,d]=ue(D(n.minX,n.maxY),r,e.angle),u=[Math.min(i,o,l,c),Math.min(s,a,f,d),Math.max(i,o,l,c),Math.max(s,a,f,d)];if(t){let[h,g,y,U]=t;return[u[0]-U,u[1]-h,u[2]+g,u[3]+y]}return u},Fg=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],bl=(e,t)=>{var n,r,i,s;if(((n=t.roundness)==null?void 0:n.type)===ei.PROPORTIONAL_RADIUS||((r=t.roundness)==null?void 0:r.type)===ei.LEGACY)return e*Kk;if(((i=t.roundness)==null?void 0:i.type)===ei.ADAPTIVE_RADIUS){let o=((s=t.roundness)==null?void 0:s.value)??gMe,a=o/Kk;return e<=a?e*Kk:o}return 0},Yf=(e,t=1)=>{if(e.length>=3){let[n,r]=[e[0],e[e.length-1]];return cn(n,r)<=B3/t}return!1},xi=10,lLe=(e,t,n,r,i,s,o)=>{var P,_;let{width:a,height:l}=Zf(e),f=n/a,c=r/l,d=(((P=e.crop)==null?void 0:P.x)??0)/f,u=(((_=e.crop)==null?void 0:_.y)??0)/c,h=ue(D(i,s),D(e.x+e.width/2,e.y+e.height/2),-e.angle);i=h[0],s=h[1];let g=e.width,y=e.height,U=e.crop??{x:0,y:0,width:n,height:r,naturalWidth:n,naturalHeight:r},x=U.height,v=U.width,E=e.scale[0]===-1,k=e.scale[1]===-1,M=s-e.y,S=i-e.x;t.includes("n")&&(y=Lt(e.height-M,xi,k?l-u:e.height+u)),t.includes("s")&&(M=s-e.y-e.height,y=Lt(e.height+M,xi,k?e.height+u:l-u)),t.includes("e")&&(S=i-e.x-e.width,g=Lt(e.width+S,xi,E?e.width+d:a-d)),t.includes("w")&&(g=Lt(e.width-S,xi,E?a-d:e.width+d));let A=O=>{O.height=y*c,O.width=g*f};A(U);let I=(O,V)=>{A(V),O.includes("n")&&(k||(V.y+=x-V.height)),O.includes("s")&&k&&(V.y+=x-V.height),O.includes("e")&&E&&(V.x+=v-V.width),O.includes("w")&&(E||(V.x+=v-V.width))};switch(t){case"n":{if(o){let O=d+e.width/2,V=a-d-e.width/2,j=Math.min(O,V)*2;g=Lt(y*o,xi,j),y=g/o}I(t,U),o&&(U.x+=(v-U.width)/2);break}case"s":{if(o){let O=d+e.width/2,V=a-d-e.width/2,j=Math.min(O,V)*2;g=Lt(y*o,xi,j),y=g/o}I(t,U),o&&(U.x+=(v-U.width)/2);break}case"w":{if(o){let O=u+e.height/2,V=l-u-e.height/2,j=Math.min(O,V)*2;y=Lt(g/o,xi,j),g=y*o}I(t,U),o&&(U.y+=(x-U.height)/2);break}case"e":{if(o){let O=u+e.height/2,V=l-u-e.height/2,j=Math.min(O,V)*2;y=Lt(g/o,xi,j),g=y*o}I(t,U),o&&(U.y+=(x-U.height)/2);break}case"ne":{if(o)if(S>-M){let O=k?l-u:u+e.height;y=Lt(g/o,xi,O),g=y*o}else{let O=E?d+e.width:a-d;g=Lt(y*o,xi,O),y=g/o}I(t,U);break}case"nw":{if(o)if(S<M){let O=k?l-u:u+e.height;y=Lt(g/o,xi,O),g=y*o}else{let O=E?a-d:d+e.width;g=Lt(y*o,xi,O),y=g/o}I(t,U);break}case"se":{if(o)if(S>M){let O=k?u+e.height:l-u;y=Lt(g/o,xi,O),g=y*o}else{let O=E?d+e.width:a-d;g=Lt(y*o,xi,O),y=g/o}I(t,U);break}case"sw":{if(o)if(-S>M){let O=k?u+e.height:l-u;y=Lt(g/o,xi,O),g=y*o}else{let O=E?a-d:d+e.width;g=Lt(y*o,xi,O),y=g/o}I(t,U);break}}let R=cLe(e,t,g,y,!!o);return Dz(U.width,U.naturalWidth)&&Dz(U.height,U.naturalHeight)&&(U=null),{x:R[0],y:R[1],width:g,height:y,crop:U}},cLe=(e,t,n,r,i)=>{let[s,o,a,l]=Wu(e,e.width,e.height,!0),f=D(s,o),c=D(a,l),d=Ty(f,c),[u,h,g,y]=Wu(e,n,r,!0),U=g-u,x=y-h,v=[...f];if(["n","w","nw"].includes(t)&&(v=[c[0]-Math.abs(U),c[1]-Math.abs(x)]),t==="ne"){let I=[f[0],c[1]];v=[I[0],I[1]-Math.abs(x)]}if(t==="sw"){let I=[c[0],f[1]];v=[I[0]-Math.abs(U),I[1]]}i&&(["s","n"].includes(t)&&(v[0]=d[0]-U/2),["e","w"].includes(t)&&(v[1]=d[1]-x/2));let E=e.angle,k=ue(v,d,E),M=[v[0]+Math.abs(U)/2,v[1]+Math.abs(x)/2],S=ue(M,d,E);v=ue(k,S,-E);let A=[...v];return A[0]+=e.x-u,A[1]+=e.y-h,A},fLe=(e,t)=>{if(e.crop){let{width:n,height:r}=Zf(e),[i,s,o,a,l,f]=wt(e,t),c=et(ue(D(i,s),D(l,f),e.angle)),d=et(ue(D(o,s),D(l,f),e.angle)),u=cs(L4(d,c)),h=et(ue(D(i,a),D(l,f),e.angle)),g=L4(h,c),y=cs(g),{cropX:U,cropY:x}=dLe(e.crop,e.scale),v=_u(_u(c,wr(u,-U*n/e.crop.naturalWidth)),wr(y,-x*r/e.crop.naturalHeight)),E=Ot(_u(_u(v,wr(u,n/2)),wr(y,r/2))),k=ue(Ot(v),E,-e.angle);return{...e,x:k[0],y:k[1],width:n,height:r,crop:null}}return e},Zf=e=>{if(e.crop){let t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},dLe=(e,t)=>{let n=e.x,r=e.y,i=t[0]===-1,s=t[1]===-1;return i&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(r=e.naturalHeight-Math.abs(r)-e.height),{cropX:n,cropY:r}},uLe=(e,t=!1)=>{let n=e.crop;if(!n)return null;let r=e.scale[0]===-1,i=e.scale[1]===-1,s=n.x,o=n.y;if(r&&(s=n.naturalWidth-n.width-n.x),i&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};let{width:a,height:l}=Zf(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},Lee="invert(100%) hue-rotate(180deg) saturate(1.25)",hLe=Ac(),Oee=(e,t)=>ma(e)&&!t.imageCache.has(e.fileId),jee=(e,t,n)=>{var r;return n.theme===Ft.DARK&&ma(e)&&!Oee(e,t)&&((r=t.imageCache.get(e.fileId))==null?void 0:r.mimeType)!==ft.svg},_w=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},Bee=(e,t,n,r,i=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*i;return(n.has(e.id)||r&&r.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=mMe/100),s},pLe=(e,t,n)=>{let r=_w(e),[i,s,o,a]=wt(e,t),l=xt(e)||Aa(e)?ss(i,o):e.width,f=xt(e)||Aa(e)?ss(s,a):e.height,c=l*window.devicePixelRatio+r*2,d=f*window.devicePixelRatio+r*2,u=n.value;return(c*u>32767||d*u>32767)&&(u=Math.min(32767/c,32767/d)),c*d*u*u>16777216&&(u=Math.sqrt(16777216/(c*d))),c=Math.floor(c*u),d=Math.floor(d*u),{width:c,height:d,scale:u}},Fee=(e,t,n,r,i)=>{var x,v;let s=document.createElement("canvas"),o=s.getContext("2d"),a=_w(e),{width:l,height:f,scale:c}=pLe(e,t,n);if(!l||!f)return null;s.width=l,s.height=f;let d=-100,u=0;if(xt(e)||Aa(e)){let[E,k]=wt(e,t);d=e.x>E?ss(e.x,E)*window.devicePixelRatio*c:0,u=e.y>k?ss(e.y,k)*window.devicePixelRatio*c:0,o.translate(d,u)}o.save(),o.translate(a*c,a*c),o.scale(window.devicePixelRatio*c,window.devicePixelRatio*c);let h=f0.canvas(s);jee(e,r,i)&&(o.filter=Lee),W3(e,h,o,r),o.restore();let g=Ct(e,t),y=document.createElement("canvas"),U=y.getContext("2d");if(Tt(e)&&g){let[E,k,M,S]=wt(e,t),A=Math.max(ss(E,M),ss(k,S));y.width=A*window.devicePixelRatio*c+a*c*10,y.height=A*window.devicePixelRatio*c+a*c*10,U.translate(y.width/2,y.height/2),U.rotate(e.angle),U.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);let[,,,,I,R]=wt(g,t);U.rotate(-e.angle);let P=(y.width-s.width)/2,_=(y.height-s.height)/2,O=y.width/2-(I-E)*window.devicePixelRatio*c-P-a*c,V=y.height/2-(R-k)*window.devicePixelRatio*c-_-a*c;U.translate(-O,-V),U.clearRect(-(g.width/2+Jr)*window.devicePixelRatio*c,-(g.height/2+Jr)*window.devicePixelRatio*c,(g.width+Jr*2)*window.devicePixelRatio*c,(g.height+Jr*2)*window.devicePixelRatio*c)}return{element:e,canvas:s,theme:i.theme,scale:c,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:u,boundTextElementVersion:((x=Ct(e,t))==null?void 0:x.version)||null,containingFrameOpacity:((v=ho(e,t))==null?void 0:v.opacity)||100,boundTextCanvas:y,angle:e.angle,imageCrop:ln(e)?e.crop:null}},mLe=14,zee=document.createElement("img");zee.src=`data:${ft.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;var $ee=document.createElement("img");$ee.src=`data:${ft.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;var gLe=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);let n=Math.min(e.width,e.height),r=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?$ee:zee,e.width/2-r/2,e.height/2-r/2,r,r)},W3=(e,t,n,r,i)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(lr.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",lr.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;let o=ULe(e),a=lr.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{let o=ma(e)?(s=r.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,bl(Math.min(e.width,e.height),e)),n.clip());let{x:a,y:l,width:f,height:c}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,f,c,0,0,e.width,e.height)}else gLe(e,n);break}default:if(Ve(e)){let o=FJ(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=kn(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;let l=e.text.replace(/\r\n?/g,`
`).split(`
`),f=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,c=Ny(e.fontSize,e.lineHeight),d=Eee(e.fontFamily,e.fontSize,c);for(let u=0;u<l.length;u++)n.fillText(l[u],f,u*c+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},oM=new WeakMap,u$=(e,t,n,r)=>{var d;let i=n?r.zoom:hLe.zoom,s=oM.get(e),o=s&&s.zoomValue!==i.value&&!(r!=null&&r.shouldCacheIgnoreZoom),a=Ct(e,t),l=(a==null?void 0:a.version)||null,f=ln(e)?e.crop:null,c=((d=ho(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==r.theme||s.boundTextElementVersion!==l||s.imageCrop!==f||s.containingFrameOpacity!==c||Tt(e)&&a&&e.angle!==s.angle){let u=Fee(e,t,i,n,r);return u?(oM.set(e,u),u):null}return s},sS=(e,t,n,r,i)=>{let s=e.element,o=_w(s),a=e.scale,[l,f,c,d]=wt(s,i),u=((l+c)/2+r.scrollX)*window.devicePixelRatio,h=((f+d)/2+r.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);let g=Ct(s,i);if(Tt(s)&&g){let y=(e.boundTextCanvas.width-e.canvas.width)/2,U=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(u,h),t.drawImage(e.boundTextCanvas,-(c-l)/2*window.devicePixelRatio-y/a-o,-(d-f)/2*window.devicePixelRatio-U/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(u,h),t.rotate(s.angle),"scale"in e.element&&!Oee(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-u,-h),t.drawImage(e.canvas,(l+r.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(f+r.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale),At.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX;t.restore()},bLe=(e,t,n,r)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";let i=.5/n.zoom.value;t.fillRect(i,i,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(i,i,e.width,e.height),t.restore()},H0=(e,t,n,r,i,s,o)=>{var l;let a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(i.globalAlpha=Bee(e,ho(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?PJ:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(i.save(),i.translate(e.x+o.scrollX,e.y+o.scrollY),i.fillStyle="rgba(0, 0, 200, 0.04)",i.lineWidth=or.strokeWidth/o.zoom.value,i.strokeStyle=or.strokeColor,$3(e)&&(i.strokeStyle=o.theme===Ft.LIGHT?"#7affd7":"#1d8264"),i.roundRect?(i.beginPath(),i.roundRect(0,0,e.width,e.height,or.radius/o.zoom.value),i.stroke(),i.closePath()):i.strokeRect(0,0,e.width,e.height),i.restore());break}case"freedraw":{if(lr.generateElementShape(e,null),s.isExporting){let[f,c,d,u]=wt(e,t),h=(f+d)/2+o.scrollX,g=(c+u)/2+o.scrollY,y=(d-f)/2-(e.x-f),U=(u-c)/2-(e.y-c);i.save(),i.translate(h,g),i.rotate(e.angle),i.translate(-y,-U),W3(e,r,i,s),i.restore()}else{let f=u$(e,n,s,o);if(!f)return;sS(f,i,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(lr.generateElementShape(e,s),s.isExporting){let[f,c,d,u]=wt(e,t),h=(f+d)/2+o.scrollX,g=(c+u)/2+o.scrollY,y=(d-f)/2-(e.x-f),U=(u-c)/2-(e.y-c);if(Ve(e)){let v=Ni(e,t);if(Tt(v)){let E=We.getBoundTextElementPosition(v,e,t);y=(d-f)/2-(E.x-f),U=(u-c)/2-(E.y-c)}}i.save(),i.translate(h,g),jee(e,s,o)&&(i.filter="none");let x=Ct(e,t);if(Tt(e)&&x){let v=document.createElement("canvas"),E=v.getContext("2d"),k=Math.max(ss(f,d),ss(c,u)),M=_w(e);v.width=k*o.exportScale+M*10*o.exportScale,v.height=k*o.exportScale+M*10*o.exportScale,E.translate(v.width/2,v.height/2),E.scale(o.exportScale,o.exportScale),y=e.width/2-(e.x-f),U=e.height/2-(e.y-c),E.rotate(e.angle);let S=f0.canvas(v);E.translate(-y,-U),W3(e,S,E,s),E.translate(y,U),E.rotate(-e.angle);let[,,,,A,I]=wt(x,t),R=(f+d)/2-A,P=(c+u)/2-I;E.translate(-R,-P),E.clearRect(-x.width/2,-x.height/2,x.width,x.height),i.scale(1/o.exportScale,1/o.exportScale),i.drawImage(v,-v.width/2,-v.height/2,v.width,v.height)}else i.rotate(e.angle),e.type==="image"&&i.scale(e.scale[0],e.scale[1]),i.translate(-y,-U),W3(e,r,i,s);i.restore()}else{let f=u$(e,n,s,o);if(!f)return;let c=i.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||EMe(e.angle))&&(i.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&ln(f.element)&&f.element.crop!==null){i.save(),i.globalAlpha=.1;let d=Fee(fLe(f.element,t),n,o.zoom,s,o);d&&sS(d,i,s,o,n),i.restore()}sS(f,i,s,o,n),i.imageSmoothingEnabled=c}break}default:throw new Error(`Unimplemented type ${e.type}`)}i.globalAlpha=1},Hee=new WeakMap([]);function yLe(e){let t=Vee(e),n=new Path2D(t);return Hee.set(e,n),n}function ULe(e){return Hee.get(e)}function Vee(e){let t=e.simulatePressure?e.points:e.points.length?e.points.map(([r,i],s)=>[r,i,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:r=>Math.sin(r*Math.PI/2),last:!!e.lastCommittedPoint};return wLe(EAe(t,n))}function h$(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var xLe=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function wLe(e){if(!e.length)return"";let t=e.length-1;return e.reduce((n,r,i,s)=>(i===t?n.push(r,h$(r,s[0]),"L",s[0],"Z"):n.push(r,h$(r,s[i+1])),n),["M",e[0],"Q"]).join(" ").replace(xLe,"$1")}var zg=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",aM=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",p$=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",m$=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",lM=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",g$=e=>e==="arrow",W4=e=>e==="arrow",xr=[1,0],Ci=[0,1],io=[-1,0],so=[0,-1],WU=(e,t)=>{let n=My(Math.atan2(t[1]-e[1],t[0]-e[0]));return n>=315||n<45?so:n>=45&&n<135?xr:n>=135&&n<225?Ci:io},v1=e=>{let[t,n]=e,r=Math.abs(t),i=Math.abs(n);return t>i?xr:t<=-i?io:n>r?Ci:so},Tb=(e,t)=>v1(et(e,t)),Rf=(e,t)=>Of(Tb(e,t)),vr=(e,t)=>e[0]===t[0]&&e[1]===t[1],Of=e=>vr(e,xr)||vr(e,io),Wee=(e,t,n)=>{let r=vN(t);if(e.type==="diamond"){if(n[0]<e.x)return io;if(n[1]<e.y)return so;if(n[0]>e.x+e.width)return xr;if(n[1]>e.y+e.height)return Ci;let l=ue(cf(D(e.x+e.width/2,e.y),r,2),r,e.angle),f=ue(cf(D(e.x+e.width,e.y+e.height/2),r,2),r,e.angle),c=ue(cf(D(e.x+e.width/2,e.y+e.height),r,2),r,e.angle),d=ue(cf(D(e.x,e.y+e.height/2),r,2),r,e.angle);return kp([l,f,r],n)?WU(l,f):kp([f,c,r],n)?WU(f,c):kp([c,d,r],n)?WU(c,d):WU(d,l)}let i=cf(D(t[0],t[1]),r,2),s=cf(D(t[2],t[1]),r,2),o=cf(D(t[0],t[3]),r,2),a=cf(D(t[2],t[3]),r,2);return kp([i,s,r],n)?so:kp([s,a,r],n)?xr:kp([a,o,r],n)?Ci:io},Gee=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],vLe=e=>[8,8+e],Xee=e=>[1.5,6+e];function ELe(e){let t=e.roughness,n=Math.max(e.width,e.height),r=Math.min(e.width,e.height);return r>=20&&n>=50||r>=15&&e.roundness&&lM(e.type)||xt(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}var No=(e,t=!1)=>{let n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?vLe(e.strokeWidth):e.strokeStyle==="dotted"?Xee(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:ELe(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<NJ.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=ul(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return Yf(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},b$=(e,t,n)=>ba(e)&&(t||eo(e)&&(n==null?void 0:n.get(e.id))!==!0)&&ul(e.backgroundColor)&&ul(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:ru(e)?{...e,strokeColor:ul(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:ul(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,y$=(e,t,n,r,i,s,o)=>{let a=v$(e,t,n,r);if(a===null)return[];let l=(f,c)=>{if(f===null)return[];let[,,d,u,h,g]=f;return[i.line(d,u,h,g,c)]};switch(r){case"dot":case"circle":case"circle_outline":{let[f,c,d]=a;return delete s.strokeLineDash,[i.circle(f,c,d,{...s,fill:r==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{let[f,c,d,u,h,g]=a;return delete s.strokeLineDash,[i.polygon([[f,c],[d,u],[h,g],[f,c]],{...s,fill:r==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{let[f,c,d,u,h,g,y,U]=a;return delete s.strokeLineDash,[i.polygon([[f,c],[d,u],[h,g],[y,U],[f,c]],{...s,fill:r==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{let[f,c,d,u,h,g]=a;if(e.strokeStyle==="dotted"){let y=Xee(e.strokeWidth-1);s.strokeLineDash=[y[0],y[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[i.line(d,u,f,c,s),i.line(h,g,f,c,s),...r==="crowfoot_one_or_many"?l(v$(e,t,n,"crowfoot_one"),s):[]]}}},kLe=(e,t,{isExporting:n,canvasBackgroundColor:r,embedsValidationStatus:i})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){let o=e.width,a=e.height,l=bl(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,No(b$(e,n,i),!0))}else s=t.rectangle(0,0,e.width,e.height,No(b$(e,n,i),!1));return s}case"diamond":{let s,[o,a,l,f,c,d,u,h]=Yee(e);if(e.roundness){let g=bl(Math.abs(o-u),e),y=bl(Math.abs(f-a),e);s=t.path(`M ${o+g} ${a+y} L ${l-g} ${f-y}
            C ${l} ${f}, ${l} ${f}, ${l-g} ${f+y}
            L ${c+g} ${d-y}
            C ${c} ${d}, ${c} ${d}, ${c-g} ${d-y}
            L ${u+g} ${h+y}
            C ${u} ${h}, ${u} ${h}, ${u+g} ${h-y}
            L ${o-g} ${a+y}
            C ${o} ${a}, ${o} ${a}, ${o+g} ${a+y}`,No(e,!0))}else s=t.polygon([[o,a],[l,f],[c,d],[u,h]],No(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,No(e));case"line":case"arrow":{let s,o=No(e),a=e.points.length?e.points:[D(0,0)];if(Ge(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(SLe(a,16),No(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){let{startArrowhead:l=null,endArrowhead:f="arrow"}=e;if(l!==null){let c=y$(e,s,"start",l,t,o,r);s.push(...c)}if(f!==null){let c=y$(e,s,"end",f,t,o,r);s.push(...c)}}return s}case"freedraw":{let s;if(yLe(e),Yf(e.points)){let o=AAe(e.points,.75);s=t.curve(o,{...No(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return b1(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},SLe=(e,t)=>{let n=[];for(let i=1;i<e.length-1;i+=1){let s=e[i-1],o=e[i+1],a=e[i],l=Rf(a,s),f=Rf(o,a),c=Math.min(t,cn(e[i],o)/2,cn(e[i],s)/2);l?s[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):s[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c]),n.push(e[i]),f?o[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):o[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c])}let r=[`M ${e[0][0]} ${e[0][1]}`];for(let i=0;i<n.length;i+=3)r.push(`L ${n[i][0]} ${n[i][1]}`),r.push(`Q ${n[i+1][0]} ${n[i+1][1]}, ${n[i+2][0]} ${n[i+2][1]}`);return r.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),r.join(" ")},$g=e=>{let t=e.map(r=>r[0]),n=e.map(r=>r[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},G4=(e,t,n,r)=>{let i=n.map(u=>u[e]),s=Math.max(...i),o=Math.min(...i),a=s-o,l=a===0?1:t/a,f=1/0,c=n.map(u=>{let h=u[e]*l,g=[...u];return g[e]=h,h<f&&(f=h),g});if(!r||c.length===2)return c;let d=o-f;return c.map(u=>u.map((h,g)=>g===e?h+d:h))},Kee=class G3{static getBounds(t,n){let r=G3.boundsCache.get(t);if(r!=null&&r.version&&r.version===t.version&&!Xn(t))return r.bounds;let i=G3.calculateBounds(t,n);return G3.boundsCache.set(t,{version:t.version,bounds:i}),i}static calculateBounds(t,n){let r,[i,s,o,a,l,f]=wt(t,n);if(Aa(t)){let[c,d,u,h]=xN(t.points.map(([g,y])=>ue(D(g,y),D(l-t.x,f-t.y),t.angle)));return[c+t.x,d+t.y,u+t.x,h+t.y]}else if(xt(t))r=RLe(t,l,f,n);else if(t.type==="diamond"){let[c,d]=ue(D(l,s),D(l,f),t.angle),[u,h]=ue(D(l,a),D(l,f),t.angle),[g,y]=ue(D(i,f),D(l,f),t.angle),[U,x]=ue(D(o,f),D(l,f),t.angle),v=Math.min(c,u,g,U),E=Math.min(d,h,y,x),k=Math.max(c,u,g,U),M=Math.max(d,h,y,x);r=[v,E,k,M]}else if(t.type==="ellipse"){let c=(o-i)/2,d=(a-s)/2,u=Math.cos(t.angle),h=Math.sin(t.angle),g=Math.hypot(c*u,d*h),y=Math.hypot(d*u,c*h);r=[l-g,f-y,l+g,f+y]}else{let[c,d]=ue(D(i,s),D(l,f),t.angle),[u,h]=ue(D(i,a),D(l,f),t.angle),[g,y]=ue(D(o,a),D(l,f),t.angle),[U,x]=ue(D(o,s),D(l,f),t.angle),v=Math.min(c,u,g,U),E=Math.min(d,h,y,x),k=Math.max(c,u,g,U),M=Math.max(d,h,y,x);r=[v,E,k,M]}return r}};Q(Kee,"boundsCache",new WeakMap);var CLe=Kee,wt=(e,t,n=!1)=>{if(Aa(e))return MLe(e);if(xt(e))return We.getElementAbsoluteCoords(e,t,n);if(Ve(e)){let r=t?Ni(e,t):null;if(Tt(r)){let{x:i,y:s}=We.getBoundTextElementPosition(r,e,t);return[i,s,i+e.width,s+e.height,i+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},U$=(e,t)=>{let[n,r,i,s,o,a]=wt(e,t),l=D(o,a);if(xt(e)||Aa(e)){let x=[],v=0;for(;v<e.points.length-1;)x.push(it(ue(D(e.points[v][0]+e.x,e.points[v][1]+e.y),l,e.angle),ue(D(e.points[v+1][0]+e.x,e.points[v+1][1]+e.y),l,e.angle))),v++;return x}let[f,c,d,u,h,g,y,U]=[[n,r],[i,r],[n,s],[i,s],[o,r],[o,s],[n,a],[i,a]].map(x=>ue(x,l,e.angle));return e.type==="diamond"?[it(h,y),it(h,U),it(g,y),it(g,U)]:e.type==="ellipse"?[it(h,y),it(h,U),it(g,y),it(g,U),it(h,y),it(h,U),it(g,y),it(g,U)]:[it(f,c),it(d,u),it(f,d),it(c,u),it(f,U),it(d,U),it(c,y),it(u,y)]},Yee=e=>{let t=Math.floor(e.width/2)+1,n=0,r=e.width,i=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,r,i,s,o,0,i]},x$=(e,t,n,r,i)=>{let s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*r+Math.pow(e,3)*i},w$=(e,t,n,r)=>{let i=t-e,s=n-t,o=r-n,a=3*i-6*s+3*o,l=6*s-6*i,f=3*i,c=l*l-4*a*f;if(!(c>=0))return!1;let d=null,u=null,h=1/0,g=1/0;return a===0?h=g=-f/l:(h=(-l+Math.sqrt(c))/(2*a),g=(-l-Math.sqrt(c))/(2*a)),h>=0&&h<=1&&(d=x$(h,e,t,n,r)),g>=0&&g<=1&&(u=x$(g,e,t,n,r)),[d,u]},ALe=(e,t,n,r)=>{let i=w$(e[0],t[0],n[0],r[0]),s=w$(e[1],t[1],n[1],r[1]),o=Math.min(e[0],r[0]),a=Math.max(e[0],r[0]);if(i){let c=i.filter(d=>d!==null);o=Math.min(o,...c),a=Math.max(a,...c)}let l=Math.min(e[1],r[1]),f=Math.max(e[1],r[1]);if(s){let c=s.filter(d=>d!==null);l=Math.min(l,...c),f=Math.max(f,...c)}return[o,l,a,f]},Pw=(e,t)=>{let n=D(0,0),{minX:r,minY:i,maxX:s,maxY:o}=e.reduce((a,{op:l,data:f})=>{if(l==="move"){let c=rN(f);us(c!=null,"Op data is not a point"),n=c}else if(l==="bcurveTo"){let c=D(f[0],f[1]),d=D(f[2],f[3]),u=D(f[4],f[5]),h=t?t(c):c,g=t?t(d):d,y=t?t(u):u,U=t?t(n):n;n=u;let[x,v,E,k]=ALe(U,h,g,y);a.minX=Math.min(a.minX,x),a.minY=Math.min(a.minY,v),a.maxX=Math.max(a.maxX,E),a.maxY=Math.max(a.maxY,k)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r,i,s,o]},xN=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),r=Math.max(r,s),i=Math.max(i,o);return[t,n,r,i]},MLe=e=>{let[t,n,r,i]=xN(e.points),s=t+e.x,o=n+e.y,a=r+e.x,l=i+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},TLe=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},ILe=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},v$=(e,t,n,r)=>{if(t.length<1)return null;let i=u0(t[0]);if(i.length<1)return null;let s=n==="start"?1:i.length-1,o=i[s].data;us(o.length===6,"Op data length is not 6");let a=D(o[4],o[5]),l=D(o[2],o[3]),f=D(o[0],o[1]),c=i[s-1],d=D(0,0);if(c.op==="move"){let j=rN(c.data);us(j!=null,"Op data is not a point"),d=j}else c.op==="bcurveTo"&&(d=D(c.data[4],c.data[5]));let u=(j,F)=>Math.pow(1-j,3)*a[F]+3*j*Math.pow(1-j,2)*l[F]+3*Math.pow(j,2)*(1-j)*f[F]+d[F]*Math.pow(j,3),[h,g]=n==="start"?d:a,[y,U]=[u(.3,0),u(.3,1)],x=Math.hypot(h-y,g-U),v=(h-y)/x,E=(g-U)/x,k=TLe(r),M=0;{let[j,F]=n==="end"?e.points[e.points.length-1]:e.points[0],[z,H]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];M=Math.hypot(j-z,F-H)}let S=Math.min(k,M*(r==="diamond"||r==="diamond_outline"?.25:.5)),A=h-v*S,I=g-E*S;if(r==="dot"||r==="circle"||r==="circle_outline"){let j=Math.hypot(I-g,A-h)+e.strokeWidth-2;return[h,g,j]}let R=ILe(r);if(r==="crowfoot_many"||r==="crowfoot_one_or_many"){let[j,F]=ue(D(h,g),D(A,I),Vh(-R)),[z,H]=ue(D(h,g),D(A,I),Vh(R));return[A,I,j,F,z,H]}let[P,_]=ue(D(A,I),D(h,g),-R*Math.PI/180),[O,V]=ue(D(A,I),D(h,g),Vh(R));if(r==="diamond"||r==="diamond_outline"){let j,F;if(n==="start"){let[z,H]=e.points.length>1?e.points[1]:[0,0];[j,F]=ue(D(h+S*2,g),D(h,g),Math.atan2(H-g,z-h))}else{let[z,H]=e.points.length>1?e.points[e.points.length-2]:[0,0];[j,F]=ue(D(h-S*2,g),D(h,g),Math.atan2(g-H,h-z))}return[h,g,P,_,j,F,O,V]}return[h,g,P,_,O,V]},NLe=e=>{let t=f0.generator(),n=No(e),r=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[r](e.points,n)},RLe=(e,t,n,r)=>{var f;let i=Ct(e,r);if(e.points.length<2){let[c,d]=e.points[0],[u,h]=ue(D(e.x+c,e.y+d),D(t,n),e.angle),g=[u,h,u,h];if(i){let y=We.getMinMaxXYWithBoundText(e,r,[u,h,u,h],i);g=[y[0],y[1],y[2],y[3]]}return g}let s=((f=lr.get(e))==null?void 0:f[0])??NLe(e),o=u0(s),a=Pw(o,([c,d])=>ue(D(e.x+c,e.y+d),D(t,n),e.angle)),l=[a[0],a[1],a[2],a[3]];if(i){let c=We.getMinMaxXYWithBoundText(e,r,l,i);l=[c[0],c[1],c[2],c[3]]}return l},kl=(e,t)=>CLe.getBounds(e,t),mn=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=-1/0,i=1/0,s=-1/0,o=t||mt(e);return e.forEach(a=>{let[l,f,c,d]=kl(a,o);n=Math.min(n,l),i=Math.min(i,f),r=Math.max(r,c),s=Math.max(s,d)}),[n,i,r,s]},wN=(e,t)=>{let[n,r,i,s]=mn(e);return[n+t.x,r+t.y,i+t.x,s+t.y]},Wu=(e,t,n,r)=>{if(!(xt(e)||Aa(e)))return[e.x,e.y,e.x+t,e.y+n];let i=G4(0,t,G4(1,n,e.points,r),r),s;if(Aa(e))s=xN(i);else{let c=f0.generator(),d=e.roundness?c.curve(i,No(e)):c.linearPath(i,No(e)),u=u0(d);s=Pw(u)}let[o,a,l,f]=s;return[o+e.x,a+e.y,l+e.x,f+e.y]},E$=(e,t)=>{let n=f0.generator(),r=e.roundness==null?n.linearPath(t,No(e)):n.curve(t,No(e)),i=u0(r),[s,o,a,l]=Pw(i);return[s+e.x,o+e.y,a+e.x,l+e.y]},_Le=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=e[0],i=mt(e);return e.forEach(s=>{let[o,a,l,f]=kl(s,i),c=cn(D((o+l)/2,(a+f)/2),D(t.x,t.y));c<n&&(n=c,r=s)}),kl(r,i)},yl=e=>{let[t,n,r,i]=mn(e);return{minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n,midX:(t+r)/2,midY:(n+i)/2}},PLe=({scrollX:e,scrollY:t,width:n,height:r,zoom:i})=>[-e,-t,-e+n/i.value,-t+r/i.value],vN=e=>D(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),DLe=(e,t)=>{if(e==null||t==null)return!1;let[n,r,i,s]=e,[o,a,l,f]=t;return n<l&&i>o&&r<f&&s>a},Dw=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return LLe(e,t);case"diamond":return OLe(e,t);case"ellipse":return jLe(e,t)}},LLe=(e,t)=>{let n=D(e.x+e.width/2,e.y+e.height/2),r=ue(t,n,-e.angle),[i,s]=Mee(e);return Math.min(...i.map(o=>iN(r,o)),...s.map(o=>jJ(o,r)).filter(o=>o!==null))},OLe=(e,t)=>{let n=D(e.x+e.width/2,e.y+e.height/2),r=ue(t,n,-e.angle),[i,s]=Tee(e);return Math.min(...i.map(o=>iN(r,o)),...s.map(o=>jJ(o,r)).filter(o=>o!==null))},jLe=(e,t)=>{let n=D(e.x+e.width/2,e.y+e.height/2);return ZDe(ue(t,n,-e.angle),Aee(n,e.width/2,e.height/2))},BLe=e=>!e[J.CTRL_OR_CMD],dh=e=>e.isBindingEnabled,Rn=5,EN=10,kN=4,FLe=(e,t)=>{let n=[];return t.forEach(r=>{let i=e.getNonDeletedElement(r);i!=null&&n.push(i)}),n},Lw=(e,t,n,r,i)=>{let s=new Set,o=new Set;k$(e,t,n,"start",s,o,r),k$(e,n,t,"end",s,o,r);let a=Array.from(o).filter(l=>!s.has(l));FLe(i,a).forEach(l=>{var f;Ue(l,{boundElements:(f=l.boundElements)==null?void 0:f.filter(c=>c.type!=="arrow"||c.id!==e.id)})})},k$=(e,t,n,r,i,s,o)=>{if(t!=="keep"){if(t===null){let a=WLe(e,r);a!=null&&s.add(a);return}Jee(e)?(n==null||(n==="keep"?!qee(e,t,r):r==="start"||n.id!==t.id))&&(Mc(e,t,r,o),i.add(t.id)):(Mc(e,t,r,o),i.add(t.id))}},zLe=(e,t,n,r)=>{var o,a;let i=ete(e,t,n),s=t==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){let l=n.get(s);if(El(l)&&X3(l,i,n,r))return l}return null},Zee=(e,t,n)=>["start","end"].map(r=>zLe(e,r,t,n)),$Le=(e,t,n,r,i,s)=>{let o=e.points.length-1,a=n.findIndex(d=>d===0)>-1,l=n.findIndex(d=>d===o)>-1,f=a?t?Qp(e,"start",r,i,s):null:Ge(e)?"keep":Qp(e,"start",r,i,s),c=l?t?Qp(e,"end",r,i,s):null:Ge(e)?"keep":Qp(e,"end",r,i,s);return[f,c]},HLe=(e,t,n,r,i)=>{if(Ge(e))return["keep","keep"];let[s,o]=Zee(e,t,i),a=s&&r?Qp(e,"start",t,n,i):null,l=o&&r?Qp(e,"end",t,n,i):null;return[a,l]},X4=(e,t,n,r,i,s,o)=>{e.forEach(a=>{let[l,f]=s!=null&&s.length?$Le(a,i,s??[],t,n,o):HLe(a,t,n,i,o);Lw(a,l,f,t,r)})},oS=(e,t,n)=>e.length>50?[]:e.filter(xt).flatMap(r=>Zee(r,t,n)).filter(r=>r!==null).filter(r=>e.filter(i=>i.id===(r==null?void 0:r.id)).length===0),cM=(e,t,n,r,i)=>{t.startBoundElement!=null&&Mc(e,t.startBoundElement,"start",r);let s=hl(n,i,r,t.zoom,Ge(e),Ge(e));s!==null&&(qee(e,s,"end")||Mc(e,s,"end",r))},VLe=(e,t)=>{let n=e.gap,r=_y(t,t.width,t.height);return n>r&&(n=EN+kN),{...e,gap:n}},Mc=(e,t,n,r)=>{if(!Tt(e))return;let i={elementId:t.id,...Ge(e)?{...K4(e,t,n),focus:0,gap:0}:{...VLe(KLe(e,t,n,r),t)}};Ue(e,{[n==="start"?"startBinding":"endBinding"]:i}),mt(t.boundElements||[]).has(e.id)||Ue(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},qee=(e,t,n)=>{let r=e[n==="start"?"endBinding":"startBinding"];return Qee(e,r==null?void 0:r.elementId,t)},Qee=(e,t,n)=>t===n.id&&Jee(e),Jee=e=>e.points.length<3,WLe=(e,t)=>{let n=t==="start"?"startBinding":"endBinding",r=e[n];return r==null?null:(Ue(e,{[n]:null}),r.elementId)},hl=(e,t,n,r,i,s)=>{if(s){let o=!1,a=XLe(t,f=>El(f,!1)&&X3(f,e,n,r,(i||!Zk(f))&&!ht(f))).filter(f=>o?!1:(Zk(f)||(o=!0),!0));if(!a||a.length===0)return null;if(a.length===1)return a[0];let l=a.filter(f=>X3(f,e,n,r,!1));return l.length===1?l[0]:a.sort((f,c)=>c.width**2+c.height**2-(f.width**2+f.height**2)).pop()}return GLe(t,o=>El(o,!1)&&X3(o,e,n,r,(i||!Zk(o))&&!ht(o)))},GLe=(e,t)=>{let n=null;for(let r=e.length-1;r>=0;--r){let i=e[r];if(!i.isDeleted&&t(i)){n=i;break}}return n},XLe=(e,t)=>{let n=[];for(let r=e.length-1;r>=0;--r){let i=e[r];i.isDeleted||t(i)&&n.push(i)}return n},KLe=(e,t,n,r)=>{let i=n==="start"?-1:1,s=i===-1?0:e.points.length-1,o=s-i,a=We.getPointAtIndexGlobalCoordinates(e,s,r),l=We.getPointAtIndexGlobalCoordinates(e,o,r);return{focus:rOe(t,l,a),gap:Math.max(1,Dw(t,a))}},uo=(e,t,n)=>{let{newSize:r,simultaneouslyUpdated:i}=n??{},s=ZLe(i);El(e)&&Ow(t,e,o=>{var g,y;if(!xt(o)||o.isDeleted||!YLe(o,e))return;let a=o.startBinding?t.get(o.startBinding.elementId):null,l=o.endBinding?t.get(o.endBinding.elementId):null,f=null,c=null;a&&l&&(f=kl(a,t),c=kl(l,t));let d={startBinding:S$(e,o.startBinding,r),endBinding:S$(e,o.endBinding,r)};if(s.has(o.id)){Ue(o,d,!0);return}let u=jw(t,o,(U,x)=>{var v,E;if(U&&El(U)&&(x==="startBinding"||x==="endBinding")&&(e.id===((v=o[x])==null?void 0:v.elementId)||e.id===((E=o[x==="startBinding"?"endBinding":"startBinding"])==null?void 0:E.elementId)&&!DLe(f,c))){let k=nOe(o,x,d[x],U,t);if(k)return{index:x==="startBinding"?0:o.points.length-1,point:k}}return null}).filter(U=>U!==null);We.movePoints(o,u,{...e.id===((g=o.startBinding)==null?void 0:g.elementId)?{startBinding:d.startBinding}:{},...e.id===((y=o.endBinding)==null?void 0:y.elementId)?{endBinding:d.endBinding}:{}});let h=Ct(o,t);h&&!h.isDeleted&&Py(o,t,!1)})},YLe=(e,t)=>{var n,r;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((r=e.endBinding)==null?void 0:r.elementId)===t.id},ZLe=e=>new Set((e||[]).map(t=>t.id)),qLe=(e,t,n,r,i,s,o)=>{let a=v1(et(t,e));return!n||!r?a:QLe(s,n,i,o)?Wee(n,r,e):v1(et(e,D(n.x+n.width/2,n.y+n.height/2)))},QLe=(e,t,n,r)=>{let i=Dw(t,e),s=_y(t,t.width,t.height,r);return i>s?null:i},Ib=(e,t,n)=>{let r=t&&ac(t),i=e.points[n==="start"?0:e.points.length-1],s=D(e.x+i[0],e.y+i[1]),o=JMe(t)?eOe(t,s):s;if(t&&r){let a=vN(r),l=Nee(t,it(a,Ot(wr(cs(et(o,a)),Math.max(t.width,t.height)),a)))[0],f=cn(o,a),c=Math.max(cn(l??o,a),1e-4),d=Uc(f/c,6);switch(!0){case d>.9:return f-c>Rn||Cb(o,l)<1e-4?o:Ot(wr(cs(et(o,l??a)),d>1?Rn:-Rn),l??a);default:return JLe(o,t,r)}}return o},JLe=(e,t,n)=>{let r=vN(n),i=v1(et(e,r));switch(!0){case vr(i,so):return ue(D((n[0]+n[2])/2+.1,n[1]),r,t.angle);case vr(i,xr):return ue(D(n[2],(n[1]+n[3])/2+.1),r,t.angle);case vr(i,Ci):return ue(D((n[0]+n[2])/2-.1,n[3]),r,t.angle);default:return ue(D(n[0],(n[1]+n[3])/2-.1),r,t.angle)}},eOe=(e,t)=>{let n=D(e.x+e.width/2,e.y+e.height/2),r=ue(t,n,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-Rn?ue(D(e.x-Rn,e.y),n,e.angle):ue(D(e.x,e.y-Rn),n,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-Rn?ue(D(e.x,e.y+e.height+Rn),n,e.angle):ue(D(e.x-Rn,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+Rn?ue(D(e.x+e.width,e.y+e.height+Rn),n,e.angle):ue(D(e.x+e.width+Rn,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+Rn?ue(D(e.x+e.width,e.y-Rn),n,e.angle):ue(D(e.x+e.width+Rn,e.y),n,e.angle):t},tOe=(e,t,n=.05)=>{let{x:r,y:i,width:s,height:o,angle:a}=e,l=D(r+s/2-.1,i+o/2-.1),f=ue(t,l,-a),c=Lt(n*o,5,80),d=Lt(n*s,5,80);return f[0]<=r+s/2&&f[1]>l[1]-c&&f[1]<l[1]+c?ue(D(r-Rn,l[1]),l,a):f[1]<=i+o/2&&f[0]>l[0]-d&&f[0]<l[0]+d?ue(D(l[0],i-Rn),l,a):f[0]>=r+s/2&&f[1]>l[1]-c&&f[1]<l[1]+c?ue(D(r+s+Rn,l[1]),l,a):f[1]>=i+o/2&&f[0]>l[0]-d&&f[0]<l[0]+d?ue(D(l[0],i+o+Rn),l,a):t},nOe=(e,t,n,r,i)=>{if(n==null||n.elementId!==r.id&&e.points.length>2)return null;let s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(Ge(e)&&z4(n)){let d=Bw(n.fixedPoint)??K4(e,r,t==="startBinding"?"start":"end").fixedPoint,u=D(r.x+r.width/2,r.y+r.height/2),h=D(r.x+d[0]*r.width,r.y+d[1]*r.height),g=ue(h,u,r.angle);return We.pointFromAbsoluteCoords(e,g,i)}let a=o-s,l=We.getPointAtIndexGlobalCoordinates(e,a,i),f=iOe(r,n.focus,l),c;if(n.gap===0)c=f;else{let d=We.getPointAtIndexGlobalCoordinates(e,o,i),u=D(r.x+r.width/2,r.y+r.height/2),h=cn(l,d)+cn(l,u)+Math.max(r.width,r.height)*2,g=Nee(r,it(l,Ot(wr(cs(et(f,l)),h),l)),n.gap).sort((y,U)=>Cb(y,l)-Cb(U,l));g.length>1?c=g[0]:g.length===1?c=f:c=d}return We.pointFromAbsoluteCoords(e,c,i)},K4=(e,t,n,r)=>{let i=[t.x,t.y,t.x+t.width,t.y+t.height],s=Ib(e,t,n),o=D(i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2),a=ue(s,o,-t.angle);return{fixedPoint:Bw([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},S$=(e,t,n)=>{if(t==null||n==null)return t;let{width:r,height:i}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(_y(e,r,i),t.gap*(r<i?r/s:i/o)));return{...t,gap:a}},Qp=(e,t,n,r,i)=>hl(ete(e,t,n),r,n,i,Ge(e),Ge(e)),ete=(e,t,n)=>{let r=t==="start"?0:-1;return dl(We.getPointAtIndexGlobalCoordinates(e,r,n))},tte=(e,t,n,r)=>{let i=new Set,s=new Set,o=r==="duplicatesServeAsOld",a=new Map([...n].map(([l,f])=>[f,l]));t.forEach(l=>{let{boundElements:f}=l;if(f!=null&&f.length>0&&(f.forEach(c=>{o&&!n.has(c.id)&&i.add(c.id)}),s.add(n.get(l.id))),hc(l)){if(l.startBinding!=null){let{elementId:c}=l.startBinding;o&&!n.has(c)&&s.add(c)}if(l.endBinding!=null){let{elementId:c}=l.endBinding;o&&!n.has(c)&&s.add(c)}(l.startBinding!=null||l.endBinding!=null)&&i.add(n.get(l.id))}}),e.filter(({id:l})=>i.has(l)).forEach(l=>{let{startBinding:f,endBinding:c}=l;Ue(l,{startBinding:C$(f,n),endBinding:C$(c,n)})}),e.filter(({id:l})=>s.has(l)).forEach(l=>{var d;let f=a.get(l.id),c=(d=e.find(({id:u})=>u===f))==null?void 0:d.boundElements;c&&c.length>0&&Ue(l,{boundElements:c.map(u=>n.has(u.id)?{id:n.get(u.id),type:u.type}:u)})})},C$=(e,t)=>e==null?null:{...e,elementId:t.get(e.elementId)??e.elementId},nte=(e,t)=>{let n=mt(e);for(let r of t)Jp.unbindAffected(n,r,Ue),em.unbindAffected(n,r,Ue)},Nb=(e,t,n=[])=>{if(!e)return null;let r=e.filter(i=>!t.has(i.id));return r.push(...n.map(i=>({id:i.id,type:i.type}))),r},X3=(e,{x:t,y:n},r,i,s)=>{let o=_y(e,e.width,e.height,i),a=yf(e,r);return rM(D(t,n),a,o)||s===!0&&Fg(D(t,n),ac(e))},_y=(e,t,n,r)=>{let i=r!=null&&r.value&&r.value<1?r.value:1,s=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*s,32),EN/i+kN)},rOe=(e,t,n)=>{let r=D(e.x+e.width/2,e.y+e.height/2);if(vl(t,n))return 0;let i=ue(t,r,-e.angle),s=ue(n,r,-e.angle),o=Math.sign(li(et(s,t),et(s,r)))*-1,a=it(s,Ot(wr(cs(et(s,i)),Math.max(e.width*2,e.height*2)),s)),l=e.type==="diamond"?[it(D(e.x+e.width/2,e.y),D(e.x+e.width/2,e.y+e.height)),it(D(e.x,e.y+e.height/2),D(e.x+e.width,e.y+e.height/2))]:[it(D(e.x,e.y),D(e.x+e.width,e.y+e.height)),it(D(e.x+e.width,e.y),D(e.x,e.y+e.height))],f=e.type==="diamond"?[it(D(e.x+e.width/2,e.y-e.height),D(e.x+e.width/2,e.y+e.height*2)),it(D(e.x-e.width,e.y+e.height/2),D(e.x+e.width*2,e.y+e.height/2))]:[it(D(e.x-e.width,e.y-e.height),D(e.x+e.width*2,e.y+e.height*2)),it(D(e.x+e.width*2,e.y-e.height),D(e.x-e.width,e.y+e.height*2))];return[Ab(a,f[0]),Ab(a,f[1])].filter(c=>c!==null).sort((c,d)=>Cb(c,n)-Cb(d,n)).map((c,d)=>o*cn(r,c)/(e.type==="diamond"?cn(l[d][0],l[d][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((c,d)=>Math.abs(c)-Math.abs(d))[0]??0},iOe=(e,t,n)=>{let r=D(e.x+e.width/2,e.y+e.height/2);if(t===0)return r;let i=(e.type==="diamond"?[D(e.x,e.y+e.height/2),D(e.x+e.width/2,e.y),D(e.x+e.width,e.y+e.height/2),D(e.x+e.width/2,e.y+e.height)]:[D(e.x,e.y),D(e.x+e.width,e.y),D(e.x+e.width,e.y+e.height),D(e.x,e.y+e.height)]).map(o=>Ot(wr(et(o,r),Math.abs(t)),r)).map(o=>ue(o,r,e.angle)),s=[li(et(n,i[0]),et(i[1],i[0]))>0&&(t>0?li(et(n,i[1]),et(i[2],i[1]))<0:li(et(n,i[3]),et(i[0],i[3]))<0),li(et(n,i[1]),et(i[2],i[1]))>0&&(t>0?li(et(n,i[2]),et(i[3],i[2]))<0:li(et(n,i[0]),et(i[1],i[0]))<0),li(et(n,i[2]),et(i[3],i[2]))>0&&(t>0?li(et(n,i[3]),et(i[0],i[3]))<0:li(et(n,i[1]),et(i[2],i[1]))<0),li(et(n,i[3]),et(i[0],i[3]))>0&&(t>0?li(et(n,i[0]),et(i[1],i[0]))<0:li(et(n,i[2]),et(i[3],i[2]))<0)];return s[0]?t>0?i[1]:i[0]:s[1]?t>0?i[2]:i[1]:s[2]?t>0?i[3]:i[2]:t>0?i[0]:i[3]},sOe=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),Ow=(e,t,n)=>{var r;El(t)&&(((r=t.boundElements)==null?void 0:r.slice())??[]).forEach(({id:i})=>{n(e.get(i),"boundElements",i)})},jw=(e,t,n)=>{let r=[];if(t.frameId){let i=t.frameId;r.push(n(e.get(i),"frameId",i))}if(Xn(t)){let i=t.containerId;r.push(n(e.get(i),"containerId",i))}if(Tt(t)){if(t.startBinding){let i=t.startBinding.elementId;r.push(n(e.get(i),"startBinding",i))}if(t.endBinding){let i=t.endBinding.elementId;r.push(n(e.get(i),"endBinding",i))}}return r},Jp=class{static unbindAffected(e,t,n){t&&jw(e,t,r=>{!r||r.isDeleted||Ow(e,r,(i,s,o)=>{o===t.id&&n(r,{boundElements:Nb(r.boundElements,new Set([o]))})})})}};Q(Jp,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||jw(e,t,(r,i)=>{var s,o;if(!r||r.isDeleted){n(t,{[i]:null});return}i!=="frameId"&&((s=r.boundElements)!=null&&s.find(a=>a.id===t.id)||(Tt(t)&&n(r,{boundElements:Nb(r.boundElements,new Set,new Array(t))}),Ve(t)&&((o=r.boundElements)!=null&&o.find(a=>a.type==="text")?n(t,{[i]:null}):n(r,{boundElements:Nb(r.boundElements,new Set,new Array(t))}))))})});var em=class{static unbindAffected(e,t,n){t&&Ow(e,t,r=>{!r||r.isDeleted||jw(e,r,(i,s,o)=>{o===t.id&&n(r,{[s]:null})})})}};Q(em,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||Ow(e,t,(r,i,s)=>{var o,a;if(!r||r.isDeleted){n(t,{boundElements:Nb(t.boundElements,new Set([s]))});return}Ve(r)&&(((a=(((o=t.boundElements)==null?void 0:o.slice())??[]).reverse().find(l=>l.type==="text"))==null?void 0:a.id)===r.id?r.containerId!==t.id&&n(r,{containerId:t.id}):(r.containerId!==null&&n(r,{containerId:null}),n(t,{boundElements:Nb(t.boundElements,new Set([r.id]))})))})});var fM=(e,t)=>{let[n,r]=Bw(e);return ue(D(t.x+t.width*n,t.y+t.height*r),D(t.x+t.width/2,t.y+t.height/2),t.angle)},oOe=(e,t)=>{let n=e.startBinding&&t.get(e.startBinding.elementId),r=e.endBinding&&t.get(e.endBinding.elementId),i=n&&e.startBinding?fM(e.startBinding.fixedPoint,n):D(e.x+e.points[0][0],e.y+e.points[0][1]),s=r&&e.endBinding?fM(e.endBinding.fixedPoint,r):D(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[i,s]},aOe=(e,t)=>{let[n,r]=oOe(e,t);return[We.pointFromAbsoluteCoords(e,n,t),We.pointFromAbsoluteCoords(e,r,t)]},Bw=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,lOe=(e,t)=>{let[n,r,i,s]=t,{x:o,y:a}=fl({sceneX:n,sceneY:r},e),{x:l,y:f}=fl({sceneX:i,sceneY:s},e);return l-o>e.width||f-a>e.height},rte=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:r})=>{let i=(t.width-((r==null?void 0:r.right)??0))/2/n.value-e.x;i+=((r==null?void 0:r.left)??0)/2/n.value;let s=(t.height-((r==null?void 0:r.bottom)??0))/2/n.value-e.y;return s+=((r==null?void 0:r.top)??0)/2/n.value,{scrollX:i,scrollY:s}},Rb=(e,t)=>{if(e=PBe(e),!e.length)return{scrollX:0,scrollY:0};let[n,r,i,s]=mn(e);lOe(t,[n,r,i,s])&&([n,r,i,s]=_Le(e,On({clientX:t.scrollX,clientY:t.scrollY},t)));let o=(n+i)/2,a=(r+s)/2;return rte({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},jf=e=>Lt(Uc(e,6),JI,eN),cOe=e=>Lt(Math.round(e),1,100),ite=e=>Lt(Math.round(e),1,100),ste=(e,t,n)=>{let r=n.reduce((i,s)=>(s.groupIds.includes(e)&&(i[s.id]=!0),i),{});return Object.keys(r).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...r}}},Ss=function(){let e=null,t=null,n=null,r=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;let f={};for(let u of s){let h=u.groupIds;if(a.editingGroupId){let g=h.indexOf(a.editingGroupId);g>-1&&(h=h.slice(0,g))}if(h.length>0){let g=h[h.length-1];f[g]=!0}}let c={},d=o.reduce((u,h)=>{if(h.isDeleted)return u;let g=h.groupIds.find(y=>f[y]);return g&&(u[h.id]=!0,Array.isArray(c[g])?c[g].push(h.id):c[g]=[h.id]),u},{});for(let u of Object.keys(c))c[u].length<2&&f[u]&&(f[u]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:f,selectedElementIds:an({...a.selectedElementIds,...d},l)},n},i=(s,o,a,l)=>{let f=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):Mt(o,s);return f.length?r(f,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:an(s.selectedElementIds,a)}};return i.clearCache=()=>{t=null,e=null,n=null},i}(),ote=(e,t)=>ate(e,t)!=null,ate=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),Xh=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),lte=(e,t)=>{let n={...t,selectedGroupIds:{}};for(let r of e){let i=r.groupIds;if(t.editingGroupId){let s=i.indexOf(t.editingGroupId);s>-1&&(i=i.slice(0,s))}if(i.length>0){let s=i[i.length-1];n={...n,...ste(s,n,e)}}}return n.selectedGroupIds},fOe=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),_b=(e,t)=>e.groupIds.includes(t),Vn=(e,t)=>{let n=[];for(let r of e.values())_b(r,t)&&n.push(r);return n},dOe=(e,t)=>e.groupIds.find(n=>t[n]),uOe=(e,t,n)=>{let r=[...e],i=t?e.indexOf(t):-1,s=i>-1?i:e.length;for(let o=0;o<s;o++)r[o]=n(r[o]);return r},hOe=(e,t,n)=>{let r=[...e],i=n?r.indexOf(n):-1,s=i>-1?i:r.length;return r.splice(s,0,t),r},pOe=(e,t)=>e.filter(n=>!t[n]),Fw=(e,t)=>{let n=new Map;return e.forEach(r=>{let i=r.groupIds.length===0?r.id:r.groupIds[r.groupIds.length-1],s=n.get(i)||[],o=Ct(r,t);o&&s.push(o),n.set(i,[...s,r])}),Array.from(n.values())},mOe=e=>{let t=new Set;for(let[,n]of e)if(!n.isDeleted)for(let r of n.groupIds??[])t.add(r);return t},cte=e=>{let t=e.flatMap(i=>i.groupIds),n=new Map,r=0;for(let i of t)n.set(i,(n.get(i)??0)+1),n.get(i)>r&&(r=n.get(i));return r===e.length},Hg=e=>e.groupIds.length>0,gOe=8,A$=99999,zw=e=>gOe/e,Zs=class{};Q(Zs,"referenceSnapPoints",null),Q(Zs,"visibleGaps",null),Q(Zs,"setReferenceSnapPoints",e=>{Zs.referenceSnapPoints=e}),Q(Zs,"getReferenceSnapPoints",()=>Zs.referenceSnapPoints),Q(Zs,"setVisibleGaps",e=>{Zs.visibleGaps=e}),Q(Zs,"getVisibleGaps",()=>Zs.visibleGaps),Q(Zs,"destroy",()=>{Zs.referenceSnapPoints=null,Zs.visibleGaps=null});var hf=Zs,Pb=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,Qu=({event:e,app:t,selectedElements:n})=>e?t.state.objectsSnapModeEnabled&&!e[J.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[J.CTRL_OR_CMD]&&!Pb(t):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,bOe=(e,t,n=.01)=>Math.abs(e-t)<=n,Db=(e,t,{omitCenter:n,boundingBoxCorners:r,dragOffset:i}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){let o=e[0],[a,l,f,c,d,u]=wt(o,t);i&&(a+=i.x,f+=i.x,d+=i.x,l+=i.y,c+=i.y,u+=i.y);let h=(f-a)/2,g=(c-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!r){let y=ue(D(a,l+g),D(d,u),o.angle),U=ue(D(a+h,l),D(d,u),o.angle),x=ue(D(f,l+g),D(d,u),o.angle),v=ue(D(a+h,c),D(d,u),o.angle),E=D(d,u);s=n?[y,U,x,v]:[y,U,x,v,E]}else{let y=ue(D(a,l),D(d,u),o.angle),U=ue(D(f,l),D(d,u),o.angle),x=ue(D(a,c),D(d,u),o.angle),v=ue(D(f,c),D(d,u),o.angle),E=D(d,u);s=n?[y,U,x,v]:[y,U,x,v,E]}}else if(e.length>1){let[o,a,l,f]=wN(e,i??{x:0,y:0}),c=l-o,d=f-a,u=D(o,a),h=D(l,a),g=D(o,f),y=D(l,f),U=D(o+c/2,a+d/2);s=n?[u,h,g,y]:[u,h,g,y,U]}return s.map(o=>D(ar(o[0]),ar(o[1])))},fte=(e,t,n,r)=>{let i=t.filter(s=>ht(s)).map(s=>s.id);return ine(e,t,n,r).filter(s=>!(s.frameId&&i.includes(s.frameId)))},yOe=(e,t,n,r)=>{let i=fte(e,t,n,r),s=Fw(i,r).filter(d=>!(d.length===1&&Xn(d[0]))).map(d=>mn(d).map(u=>ar(u))),o=s.sort((d,u)=>d[0]-u[0]),a=[],l=0;e:for(let d=0;d<o.length;d++){let u=o[d];for(let h=d+1;h<o.length;h++){if(++l>A$)break e;let g=o[h],[,y,U,x]=u,[v,E,,k]=g;U<v&&B4(is(y,x),is(E,k))&&a.push({startBounds:u,endBounds:g,startSide:[D(U,y),D(U,x)],endSide:[D(v,E),D(v,k)],length:v-U,overlap:F4(is(y,x),is(E,k))})}}let f=s.sort((d,u)=>d[1]-u[1]),c=[];l=0;e:for(let d=0;d<f.length;d++){let u=f[d];for(let h=d+1;h<f.length;h++){if(++l>A$)break e;let g=f[h],[y,,U,x]=u,[v,E,k]=g;x<E&&B4(is(y,U),is(v,k))&&c.push({startBounds:u,endBounds:g,startSide:[D(y,x),D(U,x)],endSide:[D(v,E),D(k,E)],length:E-x,overlap:F4(is(y,U),is(v,k))})}}return{horizontalGaps:a,verticalGaps:c}},M$=(e,t,n,r,i,s,o)=>{if(!Qu({app:n,event:r,selectedElements:e}))return[];if(e.length===0)return[];let a=hf.getVisibleGaps();if(a){let{horizontalGaps:l,verticalGaps:f}=a,[c,d,u,h]=wN(e,t).map(U=>ar(U)),g=(c+u)/2,y=(d+h)/2;for(let U of l){if(!B4(is(d,h),U.overlap))continue;let x=U.startSide[0][0]+U.length/2,v=ar(x-g);if(U.length>u-c&&Math.abs(v)<=o.x){Math.abs(v)<o.x&&(i.length=0),o.x=Math.abs(v);let R={type:"gap",direction:"center_horizontal",gap:U,offset:v};i.push(R);continue}let[,,E]=U.endBounds,k=c-E,M=ar(U.length-k);if(Math.abs(M)<=o.x){Math.abs(M)<o.x&&(i.length=0),o.x=Math.abs(M);let R={type:"gap",direction:"side_right",gap:U,offset:M};i.push(R);continue}let[S,,,]=U.startBounds,A=S-u,I=ar(A-U.length);if(Math.abs(I)<=o.x){Math.abs(I)<o.x&&(i.length=0),o.x=Math.abs(I);let R={type:"gap",direction:"side_left",gap:U,offset:I};i.push(R);continue}}for(let U of f){if(!B4(is(c,u),U.overlap))continue;let x=U.startSide[0][1]+U.length/2,v=ar(x-y);if(U.length>h-d&&Math.abs(v)<=o.y){Math.abs(v)<o.y&&(s.length=0),o.y=Math.abs(v);let R={type:"gap",direction:"center_vertical",gap:U,offset:v};s.push(R);continue}let[,E,,]=U.startBounds,k=E-h,M=ar(k-U.length);if(Math.abs(M)<=o.y){Math.abs(M)<o.y&&(s.length=0),o.y=Math.abs(M);let R={type:"gap",direction:"side_top",gap:U,offset:M};s.push(R);continue}let[,,,S]=U.endBounds,A=ar(d-S),I=U.length-A;if(Math.abs(I)<=o.y){Math.abs(I)<o.y&&(s.length=0),o.y=Math.abs(I);let R={type:"gap",direction:"side_bottom",gap:U,offset:I};s.push(R);continue}}}},UOe=(e,t,n,r)=>{let i=fte(e,t,n,r);return Fw(i,r).filter(s=>!(s.length===1&&Xn(s[0]))).flatMap(s=>Db(s,r))},Vg=(e,t,n,r,i,s,o)=>{if(!Qu({app:n,event:r,selectedElements:e})||e.length===0&&t.length===0)return[];let a=hf.getReferenceSnapPoints();if(a)for(let l of t)for(let f of a){let c=f[0]-l[0],d=f[1]-l[1];Math.abs(c)<=o.x&&(Math.abs(c)<o.x&&(i.length=0),i.push({type:"point",points:[l,f],offset:c}),o.x=Math.abs(c)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,f],offset:d}),o.y=Math.abs(d))}},xOe=(e,t,n,r,i)=>{var U,x;let s=n.state,o=Mt(e,s);if(!Qu({app:n,event:r,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=ar(t.x),t.y=ar(t.y);let a=[],l=[],f=zw(s.zoom.value),c={x:f,y:f},d=Db(o,i,{dragOffset:t});Vg(o,d,n,r,a,l,c),M$(o,t,n,r,a,l,c);let u={x:((U=a[0])==null?void 0:U.offset)??0,y:((x=l[0])==null?void 0:x.offset)??0};c.x=0,c.y=0,a.length=0,l.length=0;let h={x:ar(t.x+u.x),y:ar(t.y+u.y)};Vg(o,Db(o,i,{dragOffset:h}),n,r,a,l,c),M$(o,h,n,r,a,l,c);let g=SN(a,l),y=vOe(o,h,[...a,...l].filter(v=>v.type==="gap"));return{snapOffset:u,snapLines:[...g,...y]}},ar=e=>Math.round(e*10**6)/10**6,T$=e=>{let t=new Map;for(let n of e){let r=n.join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},SN=(e,t)=>{let n={},r={};if(e.length>0){for(let i of e)if(i.type==="point"){let s=ar(i.points[0][0]);n[s]||(n[s]=[]),n[s].push(...i.points.map(o=>D(ar(o[0]),ar(o[1]))))}}if(t.length>0){for(let i of t)if(i.type==="point"){let s=ar(i.points[0][1]);r[s]||(r[s]=[]),r[s].push(...i.points.map(o=>D(ar(o[0]),ar(o[1]))))}}return Object.entries(n).map(([i,s])=>({type:"points",points:T$(s.map(o=>D(Number(i),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(r).map(([i,s])=>({type:"points",points:T$(s.map(o=>D(o[0],Number(i))).sort((o,a)=>o[0]-a[0]))})))},wOe=e=>{let t=new Map;for(let n of e){let r=n.points.flat().map(i=>[ar(i)]).join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},vOe=(e,t,n)=>{let[r,i,s,o]=wN(e,t),a=[];for(let l of n){let[f,c,d,u]=l.gap.startBounds,[h,g,y,U]=l.gap.endBounds,x=F4(is(i,o),l.gap.overlap),v=F4(is(r,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[D(l.gap.startSide[0][0],E),D(r,E)]},{type:"gap",direction:"horizontal",points:[D(s,E),D(l.gap.endSide[0][0],E)]})}break}case"center_vertical":{if(v){let E=(v[0]+v[1])/2;a.push({type:"gap",direction:"vertical",points:[D(E,l.gap.startSide[0][1]),D(E,i)]},{type:"gap",direction:"vertical",points:[D(E,o),D(E,l.gap.endSide[0][1])]})}break}case"side_right":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[D(d,E),D(h,E)]},{type:"gap",direction:"horizontal",points:[D(y,E),D(r,E)]})}break}case"side_left":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[D(s,E),D(f,E)]},{type:"gap",direction:"horizontal",points:[D(d,E),D(h,E)]})}break}case"side_top":{if(v){let E=(v[0]+v[1])/2;a.push({type:"gap",direction:"vertical",points:[D(E,o),D(E,c)]},{type:"gap",direction:"vertical",points:[D(E,u),D(E,g)]})}break}case"side_bottom":{if(v){let E=(v[0]+v[1])/2;a.push({type:"gap",direction:"vertical",points:[D(E,u),D(E,g)]},{type:"gap",direction:"vertical",points:[D(E,U),D(E,i)]})}break}}}return wOe(a.map(l=>({...l,points:l.points.map(f=>D(ar(f[0]),ar(f[1])))})))},I$=(e,t,n,r,i,s)=>{var S,A;if(!Qu({event:r,selectedElements:e,app:n})||e.length===0||e.length===1&&!bOe(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,f]=mn(t);s&&(s.includes("e")?l+=i.x:s.includes("w")&&(o+=i.x),s.includes("n")?a+=i.y:s.includes("s")&&(f+=i.y));let c=[];if(s)switch(s){case"e":{c.push(D(l,a),D(l,f));break}case"w":{c.push(D(o,a),D(o,f));break}case"n":{c.push(D(o,a),D(l,a));break}case"s":{c.push(D(o,f),D(l,f));break}case"ne":{c.push(D(l,a));break}case"nw":{c.push(D(o,a));break}case"se":{c.push(D(l,f));break}case"sw":{c.push(D(o,f));break}}let d=zw(n.state.zoom.value),u={x:d,y:d},h=[],g=[];Vg(t,c,n,r,h,g,u);let y={x:((S=h[0])==null?void 0:S.offset)??0,y:((A=g[0])==null?void 0:A.offset)??0};u.x=0,u.y=0,h.length=0,g.length=0;let[U,x,v,E]=mn(e).map(I=>ar(I)),k=[D(U,x),D(U,E),D(v,x),D(v,E)];Vg(e,k,n,r,h,g,u);let M=SN(h,g);return{snapOffset:y,snapLines:M}},EOe=(e,t,n,r,i,s)=>{var g,y;if(!Qu({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};let o=[D(r.x+i.x,r.y+i.y)],a=zw(t.state.zoom.value),l={x:a,y:a},f=[],c=[];Vg([e],o,t,n,f,c,l);let d={x:((g=f[0])==null?void 0:g.offset)??0,y:((y=c[0])==null?void 0:y.offset)??0};l.x=0,l.y=0,f.length=0,c.length=0;let u=Db([e],s,{boundingBoxCorners:!0,omitCenter:!0});Vg([e],u,t,n,f,c,l);let h=SN(f,c);return{snapOffset:d,snapLines:h}},kOe=(e,t,n,r,i)=>{if(!Qu({event:r,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};let s=ine(e,[],t.state,i),o=zw(t.state.zoom.value),a={x:o,y:o},l=[],f=[];for(let c of s){let d=Db([c],i);for(let u of d){let h=u[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(f.length=0),f.push({type:"pointer",points:[u,D(u[0],n.y)],direction:"vertical"}),a.x=h);let g=u[1]-n.y;Math.abs(g)<=Math.abs(a.y)&&(Math.abs(g)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[u,D(n.x,u[1])],direction:"horizontal"}),a.y=g)}}return{originOffset:{x:f.length>0?f[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...f,...l]}},SOe=e=>e===ci.rectangle||e===ci.ellipse||e===ci.diamond||e===ci.frame||e===ci.magicframe||e===ci.image||e===ci.text,Yr=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t],Hd={version:null,points:[],zoom:null},Mr=class _t{constructor(t){Q(this,"elementId"),Q(this,"selectedPointsIndices"),Q(this,"pointerDownState"),Q(this,"isDragging"),Q(this,"lastUncommittedPoint"),Q(this,"pointerOffset"),Q(this,"startBindingElement"),Q(this,"endBindingElement"),Q(this,"hoverPointIndex"),Q(this,"segmentMidPointHoveredCoords"),Q(this,"elbowed"),this.elementId=t.id,vl(t.points[0],D(0,0))||console.error("Linear element is not normalized",Error().stack),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=Ge(t)&&t.elbowed}static getElement(t,n){return n.get(t)||null}static handleBoxSelection(t,n,r,i){if(!n.editingLinearElement||!n.selectionElement)return!1;let{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=_t.getElement(a,i);if(!l)return!1;let[f,c,d,u]=wt(n.selectionElement,i),h=_t.getPointsGlobalCoordinates(l,i).reduce((g,y,U)=>((y[0]>=f&&y[0]<=d&&y[1]>=c&&y[1]<=u||t.shiftKey&&(o!=null&&o.includes(U)))&&g.push(U),g),[]).filter(g=>!(Ge(l)&&g!==0&&g!==l.points.length-1));r({editingLinearElement:{...s,selectedPointsIndices:h.length?h:null}})}static handlePointDragging(t,n,r,i,s,o,a){var g;if(!o)return!1;let{elementId:l}=o,f=a.getNonDeletedElementsMap(),c=_t.getElement(l,f);if(!c||Ge(c)&&!o.pointerDownState.lastClickedIsEndPoint&&o.pointerDownState.lastClickedPoint!==0)return!1;let d=Ge(c)?(g=o.selectedPointsIndices)==null?void 0:g.reduce((y,U)=>U===0?[0,y[1]]:[y[0],c.points.length-1],[!1,!1]).filter(y=>typeof y=="number"):o.selectedPointsIndices,u=Ge(c)?o.pointerDownState.lastClickedPoint>0?c.points.length-1:0:o.pointerDownState.lastClickedPoint,h=c.points[u];if(d&&h){if(C2(t)&&d.length===1&&c.points.length>1){let y=d[0],U=c.points[y===0?1:y-1],[x,v]=_t._getShiftLockedDelta(c,f,U,D(r,i),t[J.CTRL_OR_CMD]?null:n.getEffectiveGridSize());_t.movePoints(c,[{index:y,point:D(x+U[0],v+U[1]),isDragging:y===u}])}else{let y=_t.createPointAt(c,f,r-o.pointerOffset.x,i-o.pointerOffset.y,t[J.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),U=y[0]-h[0],x=y[1]-h[1];_t.movePoints(c,d.map(v=>{let E=v===u?_t.createPointAt(c,f,r-o.pointerOffset.x,i-o.pointerOffset.y,t[J.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):D(c.points[v][0]+U,c.points[v][1]+x);return{index:v,point:E,isDragging:v===u}}))}if(Ct(c,f)&&Py(c,f,!1),hc(c,!1)){let y=[];d[0]===0&&y.push(dl(_t.getPointGlobalCoordinates(c,c.points[0],f)));let U=d[d.length-1];U===c.points.length-1&&y.push(dl(_t.getPointGlobalCoordinates(c,c.points[U],f))),y.length&&s(c,y)}return!0}return!1}static handlePointerUp(t,n,r,i){var h;let s=i.getNonDeletedElementsMap(),o=i.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:f,pointerDownState:c}=n,d=_t.getElement(a,s);if(!d)return n;let u={};if(f&&l){for(let g of l)if(g===0||g===d.points.length-1){Yf(d.points,r.zoom.value)&&_t.movePoints(d,[{index:g,point:g===0?d.points[d.points.length-1]:d.points[0]}]);let y=dh(r)?hl(dl(_t.getPointAtIndexGlobalCoordinates(d,g,s)),o,s,r.zoom,Ge(d),Ge(d)):null;u[g===0?"startBindingElement":"endBindingElement"]=y}}return{...n,...u,selectedPointsIndices:f||t.shiftKey?!f&&t.shiftKey&&((h=c.prevSelectedPointsIndices)!=null&&h.includes(c.lastClickedPoint))?l&&l.filter(g=>g!==c.lastClickedPoint):l:l!=null&&l.includes(c.lastClickedPoint)?[c.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,r,i,s){if(Ge(t))return i>=0&&i<t.points.length?cn(n,r)*s.value<_t.POINT_HANDLE_SIZE/2:!1;let o=cn(n,r);return t.points.length>2&&t.roundness&&(o=oLe(t,r)),o*s.value<_t.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,r,i,s){let o=Ty(n,r);if(t.points.length>2&&t.roundness){let a=_ee(t,t.points[i]);if(a){let l=aLe(t,t.points[i],.5);o=_t.getPointGlobalCoordinates(t,Pee(a[0],a[1],a[2],a[3],l),s)}}return o}static getSegmentMidPointIndex(t,n,r,i){let s=_t.getElement(t.elementId,i);if(!s)return-1;let o=_t.getEditorMidPoints(s,i,n),a=0;for(;a<o.length;){if(_t.arePointsEqual(r,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,r,i,s,o){var I;let a=n.state,l=o.getNonDeletedElementsMap(),f=o.getNonDeletedElements(),c={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return c;let{elementId:d}=s,u=_t.getElement(d,l);if(!u)return c;let h=_t.getSegmentMidpointHitCoords(s,i,a,l),g=null;if(h)g=_t.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(Ue(u,{points:[...u.points,_t.createPointAt(u,l,i.x,i.y,t[J.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),c.didAddPoint=!0),r.shouldCaptureIncrement(),c.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:h,index:g,added:!1}},selectedPointsIndices:[u.points.length-1],lastUncommittedPoint:null,endBindingElement:hl(i,f,l,n.state.zoom,s.elbowed)},c.didAddPoint=!0,c;let y=_t.getPointIndexUnderCursor(u,l,a.zoom,i.x,i.y);if(y>=0||h)c.hitElement=u;else{let{startBindingElement:R,endBindingElement:P}=s;dh(a)&&hc(u)&&Lw(u,R,P,l,o)}let[U,x,v,E]=wt(u,l),k=(U+v)/2,M=(x+E)/2,S=y>-1&&ue(D(u.x+u.points[y][0],u.y+u.points[y][1]),D(k,M),u.angle),A=y>-1||t.shiftKey?t.shiftKey||(I=s.selectedPointsIndices)!=null&&I.includes(y)?COe([...s.selectedPointsIndices||[],y]):[y]:null;return c.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:y,lastClickedIsEndPoint:y===u.points.length-1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:h,index:g,added:!1}},selectedPointsIndices:A,pointerOffset:S?{x:i.x-S[0],y:i.y-S[1]}:{x:0,y:0}},c}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:vl(t,n)}static handlePointerMove(t,n,r,i,s){let o=i.state;if(!o.editingLinearElement)return null;let{elementId:a,lastUncommittedPoint:l}=o.editingLinearElement,f=_t.getElement(a,s);if(!f)return o.editingLinearElement;let{points:c}=f,d=c[c.length-1];if(!t.altKey)return d===l&&_t.deletePoints(f,[c.length-1]),{...o.editingLinearElement,lastUncommittedPoint:null};let u;if(C2(t)&&c.length>=2){let h=c[c.length-2],[g,y]=_t._getShiftLockedDelta(f,s,h,D(n,r),t[J.CTRL_OR_CMD]?null:i.getEffectiveGridSize());u=D(g+h[0],y+h[1])}else u=_t.createPointAt(f,s,n-o.editingLinearElement.pointerOffset.x,r-o.editingLinearElement.pointerOffset.y,t[J.CTRL_OR_CMD]||Ge(f)?null:i.getEffectiveGridSize());return d===l?_t.movePoints(f,[{index:f.points.length-1,point:u}]):_t.addPoints(f,[{point:u}]),{...o.editingLinearElement,lastUncommittedPoint:f.points[f.points.length-1]}}static getPointGlobalCoordinates(t,n,r){let[i,s,o,a]=wt(t,r),l=(i+o)/2,f=(s+a)/2,{x:c,y:d}=t;return ue(D(c+n[0],d+n[1]),D(l,f),t.angle)}static getPointsGlobalCoordinates(t,n){let[r,i,s,o]=wt(t,n),a=(r+s)/2,l=(i+o)/2;return t.points.map(f=>{let{x:c,y:d}=t;return ue(D(c+f[0],d+f[1]),D(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,r){let i=n<0?t.points.length+n:n,[s,o,a,l]=wt(t,r),f=(s+a)/2,c=(o+l)/2,d=t.points[i],{x:u,y:h}=t;return ue(d?D(u+d[0],h+d[1]):D(u,h),D(f,c),t.angle)}static pointFromAbsoluteCoords(t,n,r){if(Ge(t))return D(n[0]-t.x,n[1]-t.y);let[i,s,o,a]=wt(t,r),l=(i+o)/2,f=(s+a)/2,[c,d]=ue(D(n[0],n[1]),D(l,f),-t.angle);return D(c-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,r,i,s){let o=_t.getPointsGlobalCoordinates(t,n),a=o.length;for(;--a>-1;){let l=o[a];if(cn(D(i,s),D(l[0],l[1]))*r.value<_t.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,r,i,s){let o=Yr(r,i,s),[a,l,f,c]=wt(t,n),d=(a+f)/2,u=(l+c)/2,[h,g]=ue(D(o[0],o[1]),D(d,u),-t.angle);return D(h-t.x,g-t.y)}static getNormalizedPoints(t){let{points:n}=t,r=n[0][0],i=n[0][1];return{points:n.map(s=>D(s[0]-r,s[1]-i)),x:t.x+r,y:t.y+i}}static normalizePoints(t){Ue(t,_t.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){us(t.editingLinearElement,"Not currently editing a linear element");let{selectedPointsIndices:r,elementId:i}=t.editingLinearElement,s=_t.getElement(i,n);us(s,"The linear element does not exist in the provided Scene"),us(r!=null,"There are no selected points to duplicate");let{points:o}=s,a=[],l=!1,f=-1,c=o.reduce((d,u,h)=>{if(++f,d.push(u),r.includes(h)){let g=o[h+1];g||(l=!0),d.push(g?D((u[0]+g[0])/2,(u[1]+g[1])/2):D(u[0],u[1])),a.push(f+1),++f}return d},[]);if(Ue(s,{points:c}),l){let d=s.points[s.points.length-1];_t.movePoints(s,[{index:s.points.length-1,point:D(d[0]+30,d[1]+30)}])}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:a}}}static deletePoints(t,n){let r=0,i=0;if(n.includes(0)){let o=t.points.find((a,l)=>!n.includes(l));o&&(r=o[0],i=o[1])}let s=t.points.reduce((o,a,l)=>(n.includes(l)||o.push(o.length?D(a[0]-r,a[1]-i):D(0,0)),o),[]);_t._updatePoints(t,s,r,i)}static addPoints(t,n){let r=[...t.points,...n.map(i=>i.point)];_t._updatePoints(t,r,0,0)}static movePoints(t,n,r){var c,d,u;let{points:i}=t,[s,o]=((c=n.find(({index:h})=>h===0))==null?void 0:c.point)??D(0,0),[a,l]=D(s-i[0][0],o-i[0][1]),f=Ge(t)?[((d=n.find(h=>h.index===0))==null?void 0:d.point)??i[0],((u=n.find(h=>h.index===i.length-1))==null?void 0:u.point)??i[i.length-1]]:i.map((h,g)=>{var U;let y=((U=n.find(x=>x.index===g))==null?void 0:U.point)??h;return D(y[0]-a,y[1]-l)});_t._updatePoints(t,f,a,l,r,{isDragging:n.reduce((h,g)=>h||g.isDragging===!0,!1)})}static shouldAddMidpoint(t,n,r,i){let s=_t.getElement(t.elementId,i);if(s&&Ge(s)||!s)return!1;let{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;let a=t.pointerDownState.origin,l=cn(D(a.x,a.y),D(n.x,n.y));return!(!r.editingLinearElement&&l<$0/r.zoom.value)}static addMidpoint(t,n,r,i,s){let o=_t.getElement(t.elementId,s);if(!o)return;let{segmentMidpoint:a}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},f=_t.createPointAt(o,s,n.x,n.y,i&&!Ge(o)?r.getEffectiveGridSize():null),c=[...o.points.slice(0,a.index),f,...o.points.slice(a.index)];return Ue(o,{points:c}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:a.index},l.selectedPointsIndices=[a.index],l}static _updatePoints(t,n,r,i,s,o){if(Ge(t)){let a={};(s==null?void 0:s.startBinding)!==void 0&&(a.startBinding=s.startBinding!==null&&z4(s.startBinding)?s.startBinding:null),(s==null?void 0:s.endBinding)!==void 0&&(a.endBinding=s.endBinding!==null&&z4(s.endBinding)?s.endBinding:null),a.points=Array.from(n),Ue(t,a,!0,{isDragging:o==null?void 0:o.isDragging})}else{let a=E$(t,n),l=E$(t,t.points),f=(a[0]+a[2])/2,c=(a[1]+a[3])/2,d=(l[0]+l[2])/2,u=(l[1]+l[3])/2,h=d-f,g=u-c,y=ue(D(r,i),D(h,g),t.angle);Ue(t,{...s,points:n,x:t.x+y[0],y:t.y+y[1]})}}static _getShiftLockedDelta(t,n,r,i,s){let o=_t.getPointGlobalCoordinates(t,r,n);if(Ge(t))return[i[0]-o[0],i[1]-o[1]];let[a,l]=Yr(i[0],i[1],s),{width:f,height:c}=UM(o[0],o[1],a,l);return ue(D(f,c),D(0,0),-t.angle)}static moveFixedSegment(t,n,r,i,s){let o=_t.getElement(t.elementId,s);if(!o||!Ge(o))return t;if(n&&n>0&&n<o.points.length){let a=Of(v1(et(o.points[n],o.points[n-1]))),l=(o.fixedSegments??[]).reduce((u,h)=>(u[h.index]=h,u),{});l[n]={index:n,start:D(a?o.points[n-1][0]:r-o.x,a?i-o.y:o.points[n-1][1]),end:D(a?o.points[n][0]:r-o.x,a?i-o.y:o.points[n][1])};let f=Object.values(l).sort((u,h)=>u.index-h.index),c=f.map(u=>u.index).reduce((u,h)=>h<n?u+1:u,0);Ue(o,{fixedSegments:f});let d=D(o.x+(o.fixedSegments[c].start[0]+o.fixedSegments[c].end[0])/2,o.y+(o.fixedSegments[c].start[1]+o.fixedSegments[c].end[1])/2);return{...t,segmentMidPointHoveredCoords:d,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:o.fixedSegments[c].index,value:d}}}}return t}static deleteFixedSegment(t,n){var r;Ue(t,{fixedSegments:(r=t.fixedSegments)==null?void 0:r.filter(i=>i.index!==n)}),Ue(t,{},!0)}};Q(Mr,"POINT_HANDLE_SIZE",10),Q(Mr,"getEditorMidPoints",(e,t,n)=>{let r=Ct(e,t);return!Ge(e)&&!n.editingLinearElement&&e.points.length>2&&!r?[]:(Hd.version===e.version&&Hd.zoom===n.zoom.value||Mr.updateEditorMidPointsCache(e,t,n),Hd.points)}),Q(Mr,"updateEditorMidPointsCache",(e,t,n)=>{let r=Mr.getPointsGlobalCoordinates(e,t),i=0,s=[];for(;i<r.length-1;){if(Mr.isSegmentTooShort(e,e.points[i],e.points[i+1],i,n.zoom)){s.push(null),i++;continue}let o=Mr.getSegmentMidPoint(e,r[i],r[i+1],i+1,t);s.push(o),i++}Hd.points=s,Hd.version=e.version,Hd.zoom=n.zoom.value}),Q(Mr,"getSegmentMidpointHitCoords",(e,t,n,r)=>{let{elementId:i}=e,s=Mr.getElement(i,r);if(!s)return null;let o=Mr.getPointIndexUnderCursor(s,r,n.zoom,t.x,t.y);if(!Ge(s)&&o>=0||Mr.getPointsGlobalCoordinates(s,r).length>=3&&!n.editingLinearElement&&!Ge(s))return null;let a=(Mr.POINT_HANDLE_SIZE+1)/n.zoom.value,l=e.segmentMidPointHoveredCoords;if(l&&cn(D(l[0],l[1]),D(t.x,t.y))<=a)return l;let f=0,c=Mr.getEditorMidPoints(s,r,n);for(;f<c.length;){if(c[f]!==null&&cn(c[f],D(t.x,t.y))<=a)return c[f];f++}return null}),Q(Mr,"getBoundTextElementPosition",(e,t,n)=>{let r=Mr.getPointsGlobalCoordinates(e,n);r.length<2&&Ue(t,{isDeleted:!0});let i=0,s=0;if(e.points.length%2===1){let o=Math.floor(e.points.length/2),a=Mr.getPointGlobalCoordinates(e,e.points[o],n);i=a[0]-t.width/2,s=a[1]-t.height/2}else{let o=e.points.length/2-1,a=Hd.points[o];e.points.length===2&&(a=Ty(r[0],r[1])),(!a||Hd.version!==e.version)&&(a=Mr.getSegmentMidPoint(e,r[o],r[o+1],o+1,n)),i=a[0]-t.width/2,s=a[1]-t.height/2}return{x:i,y:s}}),Q(Mr,"getMinMaxXYWithBoundText",(e,t,n,r)=>{let[i,s,o,a]=n,l=(i+o)/2,f=(s+a)/2,{x:c,y:d}=Mr.getBoundTextElementPosition(e,r,t),u=c+r.width,h=d+r.height,g=D(l,f),y=ue(D(i,s),g,e.angle),U=ue(D(o,s),g,e.angle),x=ue(D(c,d),g,-e.angle),v=ue(D(u,d),g,-e.angle),E=ue(D(c,h),g,-e.angle),k=ue(D(u,h),g,-e.angle);return y[0]<U[0]&&y[1]>=U[1]?(i=Math.min(i,E[0]),o=Math.max(o,Math.max(v[0],k[0])),s=Math.min(s,x[1]),a=Math.max(a,k[1])):y[0]>=U[0]&&y[1]>U[1]?(i=Math.min(i,k[0]),o=Math.max(o,Math.max(x[0],v[0])),s=Math.min(s,E[1]),a=Math.max(a,v[1])):y[0]>=U[0]?(i=Math.min(i,v[0]),o=Math.max(o,E[0]),s=Math.min(s,k[1]),a=Math.max(a,x[1])):y[1]<=U[1]&&(i=Math.min(i,Math.min(v[0],x[0])),o=Math.max(o,k[0]),s=Math.min(s,v[1]),a=Math.max(a,E[1])),[i,s,o,a,l,f]}),Q(Mr,"getElementAbsoluteCoords",(e,t,n=!1)=>{let r,i,s,o,a;if(e.points.length<2||!lr.get(e)){let{minX:d,minY:u,maxX:h,maxY:g}=e.points.reduce((y,[U,x])=>(y.minY=Math.min(y.minY,x),y.minX=Math.min(y.minX,U),y.maxX=Math.max(y.maxX,U),y.maxY=Math.max(y.maxY,x),y),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});i=d+e.x,s=u+e.y,o=h+e.x,a=g+e.y}else{let d=lr.generateElementShape(e,null),u=u0(d[0]),[h,g,y,U]=Pw(u);i=h+e.x,s=g+e.y,o=y+e.x,a=U+e.y}let l=(i+o)/2,f=(s+a)/2;if(r=[i,s,o,a,l,f],!n)return r;let c=Ct(e,t);return c&&(r=Mr.getMinMaxXYWithBoundText(e,t,[i,s,o,a],c)),r});var We=Mr,COe=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,r)=>n-r),t.length?t:null},Wg={},Y4=(e,t)=>{let n=Wg[e]||(Wg[e]={height:t});return n.height=t,n},dte=e=>{Wg[e]&&delete Wg[e]},AOe=e=>{var t;return((t=Wg[e])==null?void 0:t.height)??null},Ds=(e,t,n,r=!0)=>{let i,s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:(t==null?void 0:t.angle)??e.angle};s.text=e.text,(t||!e.autoResize)&&(i=t?Qf(t,e):e.width,s.text=D1(e.originalText,kn(e),i));let o=hs(s.text,kn(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){let a=Hw(t,e),l=Qf(t,e);if(!Tt(t)&&o.height>a){let u=E1(o.height,t.type);Ue(t,{height:u},r),Y4(t.id,u)}if(o.width>l){let u=E1(o.width,t.type);Ue(t,{width:u},r)}let f={...e,...s},{x:c,y:d}=$w(t,f,n);s.x=c,s.y=d}Ue(e,s,r)},ute=(e,t,n)=>{let r=mt(e);t.forEach(i=>{let s=n.get(i.id),o=qf(i);if(o){let a=n.get(o);if(a){let l=r.get(s);l&&Ue(l,{boundElements:(i.boundElements||[]).filter(c=>c.id!==a&&c.id!==o).concat({type:"text",id:a})});let f=r.get(a);f&&Ve(f)&&Ue(f,{containerId:l?s:null})}}})},Py=(e,t,n,r=!1)=>{if(!qf(e))return;dte(e.id);let i=Ct(e,t);if(i&&i.text){if(!e)return;let s=i.text,o=i.height,a=i.width,l=Qf(e,i),f=Hw(e,i),c=e.height;if(r||n!=="n"&&n!=="s"){s&&(s=D1(i.originalText,kn(i),l));let d=hs(s,kn(i),i.lineHeight);o=d.height,a=d.width}if(o>f){c=E1(o,e.type);let d=c-e.height,u=!Tt(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-d:e.y;Ue(e,{height:c,y:u})}Ue(i,{text:s,width:a,height:o}),Tt(e)||Ue(i,$w(e,i,t))}},$w=(e,t,n)=>{if(Tt(e))return We.getBoundTextElementPosition(e,t,n);let r=MOe(e),i=Hw(e,t),s=Qf(e,t),o,a;return t.verticalAlign===Do.TOP?a=r.y:t.verticalAlign===Do.BOTTOM?a=r.y+(i-t.height):a=r.y+(i/2-t.height/2),t.textAlign===Sb.LEFT?o=r.x:t.textAlign===Sb.RIGHT?o=r.x+(s-t.width):o=r.x+(s/2-t.width/2),{x:o,y:a}},qf=e=>{var t,n,r;return((t=e==null?void 0:e.boundElements)==null?void 0:t.length)&&((r=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(i=>i.type==="text"))==null?void 0:r.id)||null},Ct=(e,t)=>{if(!e)return null;let n=qf(e);return n&&t.get(n)||null},Ni=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,aS=(e,t,n)=>{if(!Tt(e))return{x:e.x+e.width/2,y:e.y+e.height/2};let r=We.getPointsGlobalCoordinates(e,n);if(r.length%2===1){let o=Math.floor(e.points.length/2),a=We.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}let i=e.points.length/2-1,s=We.getEditorMidPoints(e,n,t)[i];return s||(s=We.getSegmentMidPoint(e,r[i],r[i+1],i+1,n)),{x:s[0],y:s[1]}},MOe=e=>{let t=Jr,n=Jr;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},TOe=(e,t)=>!t||Tt(t)?e.angle:t.angle,IOe=(e,t)=>e.some(n=>{if(Xn(n)){let r=Ni(n,t);return!Tt(r)}return!1}),NOe=(e,t)=>e.some(n=>{if(Xn(n)){let r=Ni(n,t);return!Tt(r)}return Ve(n)}),ROe=new Set(["rectangle","ellipse","diamond","arrow"]),_Oe=e=>ROe.has(e.type),E1=(e,t)=>{e=Math.ceil(e);let n=Jr*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Qf=(e,t)=>{let{width:n}=e;if(Tt(e)){let r=((t==null?void 0:t.fontSize)??ld)*pMe;return Math.max(hMe*n,r)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Jr*2:e.type==="diamond"?Math.round(n/2)-Jr*2:n-Jr*2},Hw=(e,t)=>{let{height:n}=e;return Tt(e)?n-Jr*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Jr*2:e.type==="diamond"?Math.round(n/2)-Jr*2:n-Jr*2},POe=(e,t=`

`)=>e.reduce((n,r)=>(Ve(r)&&n.push(r.text),n),[]).join(t),Lo=e=>(e=e.trim(),e&&IAe.sanitizeUrl(z3(e))),hte=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),pte=e=>{if(e=Lo(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e},dM=[],je=e=>(dM=dM.concat(e),e),mte='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',DOe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',gte='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',LOe=`data:${ft.svg},${encodeURIComponent(`${mte}${gte}</svg>`)}`,OOe=`data:${ft.svg},${encodeURIComponent(`${mte}${DOe}${gte}</svg>`)}`,Wa=e=>{e&&(e.style.cursor="")},vn=(e,t)=>{e&&(e.style.cursor=t)},Bl,N$,bte=(e,t)=>{let n=()=>{let r=t===Ft.DARK;Bl=document.createElement("canvas"),Bl.theme=t,Bl.height=20,Bl.width=20;let i=Bl.getContext("2d");i.lineWidth=1,i.beginPath(),i.arc(Bl.width/2,Bl.height/2,5,0,2*Math.PI),i.fillStyle=r?Mi.black:Mi.white,i.fill(),i.strokeStyle=r?Mi.white:Mi.black,i.stroke(),N$=Bl.toDataURL(ft.svg)};(!Bl||Bl.theme!==t)&&n(),vn(e,`url(${N$}) ${20/2} ${20/2}, auto`)},Xl=(e,t)=>{if(e)if(t.activeTool.type==="selection")Wa(e);else if(Dg(t))e.style.cursor=gn.GRAB;else if(Yl(t))bte(e,t.theme);else if(t.activeTool.type==="laser"){let n=t.theme===Ft.LIGHT?LOe:OOe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=gn.AUTO):e.style.cursor=gn.CROSSHAIR},jOe=new fJ(Date.now()),BOe=0,Tc=()=>Math.floor(jOe.next()*2**31),Ta=()=>Kf()?`id${BOe++}`:KI(),Sl=(e,{x:t,y:n,strokeColor:r=br.strokeColor,backgroundColor:i=br.backgroundColor,fillStyle:s=br.fillStyle,strokeWidth:o=br.strokeWidth,strokeStyle:a=br.strokeStyle,roughness:l=br.roughness,opacity:f=br.opacity,width:c=0,height:d=0,angle:u=0,groupIds:h=[],frameId:g=null,index:y=null,roundness:U=null,boundElements:x=null,link:v=null,locked:E=br.locked,...k})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||c<-1e6||c>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:c,height:d,points:k.points}),{id:k.id||Ta(),type:e,x:t,y:n,width:c,height:d,angle:u,strokeColor:r,backgroundColor:i,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:f,groupIds:h,frameId:g,index:y,roundness:U,seed:k.seed??Tc(),version:k.version||1,versionNonce:k.versionNonce??0,isDeleted:!1,boundElements:x,updated:a6(),link:v,locked:E,customData:k.customData}),Ic=e=>Sl(e.type,e),R$=e=>Sl("embeddable",e),FOe=e=>({...Sl("iframe",e)}),CN=e=>St({...Sl("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),uM=e=>St({...Sl("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),yte=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),Bo=e=>{let t=e.fontFamily||d0,n=e.fontSize||ld,r=e.lineHeight||w1(t),i=Bg(e.text),s=hs(i,kn({fontFamily:t,fontSize:n}),r),o=e.textAlign||Ay,a=e.verticalAlign||I4,l=yte({textAlign:o,verticalAlign:a},s),f={...Sl("text",e),text:i,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??i,autoResize:e.autoResize??!0,lineHeight:r};return St(f,{})},zOe=(e,t,n)=>{let{width:r,height:i}=hs(n,kn(e),e.lineHeight);e.autoResize||(r=e.width);let{textAlign:s,verticalAlign:o}=e,a,l;if(s==="center"&&o===Do.MIDDLE&&!e.containerId&&e.autoResize){let f=hs(e.text,kn(e),e.lineHeight),c=yte(e,{width:r-f.width,height:i-f.height});a=e.x-c.x,l=e.y-c.y}else{let[f,c,d,u]=wt(e,t),[h,g,y,U]=Wu(e,r,i,!1),x=(f-h)/2,v=(c-g)/2,E=(d-y)/2,k=(u-U)/2;[a,l]=$Oe({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,x,v,E,k)}return{width:r,height:i,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},$Oe=(e,t,n,r,i,s,o,a)=>{let l=Math.cos(r),f=Math.sin(r);return e.e&&e.w?t+=i+o:e.e?(t+=i*(1+l),n+=i*f,t+=o*(1-l),n+=o*-f):e.w&&(t+=i*(1-l),n+=i*-f,t+=o*(1+l),n+=o*f),e.n&&e.s?n+=s+a:e.n?(t+=s*f,n+=s*(1-l),t+=a*-f,n+=a*(1+l)):(t+=s*-f,n+=s*(1+l),t+=a*f,n+=a*(1-l)),[t,n]},Ute=(e,t,n,r=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(r=D1(r,kn(e),t?Qf(t,e):e.width));let i=zOe(e,n,r);return{text:r,...i}},HOe=e=>({...Sl(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),Kh=e=>({...Sl(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),AN=e=>e.elbowed?{...Sl(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...Sl(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},xte=e=>({...Sl("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),Z4=(e,t=0)=>{if(e==null||typeof e!="object")return e;let n=Object.prototype.toString.call(e);if(n==="[object Object]"){let r=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(let i in e)if(e.hasOwnProperty(i)){if(t===0&&(i==="shape"||i==="canvas"))continue;r[i]=Z4(e[i],t+1)}return r}if(Array.isArray(e)){let r=e.length,i=new Array(r);for(;r--;)i[r]=Z4(e[r],t+1);return i}return At.DEV&&n!=="[object Object]"&&n!=="[object Array]"&&n.startsWith("[object ")&&console.warn(`_deepCloneElement: unexpected object type ${n}. This value will not be cloned!`),e},L1=e=>Z4(e),wte=(e,t)=>{Object.defineProperty(e,bMe,{value:t,writable:!1,enumerable:!1})},q4=()=>Ta(),vte=(e,t,n,r)=>{let i=L1(n);return Kf()&&wte(i,n.id),i.id=q4(),i.boundElements=null,i.updated=a6(),i.seed=Tc(),i.groupIds=uOe(i.groupIds,e,s=>(t.has(s)||t.set(s,q4()),t.get(s))),r&&(i=Object.assign(i,r)),i},Ete=(e,t)=>{let n=[],r=mt(e),i=new Map,s=a=>{if(i.has(a))return i.get(a);if(r.has(a)){let l=q4();return i.set(a,l),l}return null},o=new Map;for(let a of e){let l=Z4(a);if(l.id=s(a.id),Kf()&&wte(l,a.id),t!=null&&t.randomizeSeed&&(l.seed=Tc(),Kw(l)),l.groupIds&&(l.groupIds=l.groupIds.map(f=>(o.has(f)||o.set(f,q4()),o.get(f)))),"containerId"in l&&l.containerId){let f=s(l.containerId);l.containerId=f}if("boundElements"in l&&l.boundElements&&(l.boundElements=l.boundElements.reduce((f,c)=>{let d=s(c.id);return d&&f.push({...c,id:d}),f},[])),"endBinding"in l&&l.endBinding){let f=s(l.endBinding.elementId);l.endBinding=f?{...l.endBinding,elementId:f}:null}if("startBinding"in l&&l.startBinding){let f=s(l.startBinding.elementId);l.startBinding=f?{...l.startBinding,elementId:f}:null}l.frameId&&(l.frameId=s(l.frameId)),n.push(l)}return n},MN=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:r,reconciliationContext:i})=>{let s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(let[l,f]of a.entries()){let c=a[l-1],d=a[l+1];if(hM(f,c,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&Ma(e[l])){let u=e[l],h=Ct(u,mt(e));h&&h.index<=u.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(u)}"`)}}if(s.length){let l=new oNe,f=[];if(i&&(f.push("Additional reconciliation context:"),f.push(i.localElements.map(c=>o(c))),f.push(i.remoteElements.map(c=>o(c)))),r||console.error(s.join(`

`),l.stack,e.map(c=>o(c)),...f),t)throw l}},VOe=e=>e.sort((t,n)=>_$(t)&&_$(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),Nc=(e,t)=>{try{let n=WOe(e,t),r=kte(e,n),i=e.map(s=>r.has(s)?{...s,...r.get(s)}:s);MN(i,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(let[s,o]of r)Ue(s,o,!1)}catch{Jf(e)}return e},Jf=e=>{let t=GOe(e),n=kte(e,t);for(let[r,i]of n)Ue(r,i,!1);return e},WOe=(e,t)=>{let n=[],r=0;for(;r<e.length;)if(t.has(e[r].id)){let i=[r-1,r];for(;++r<e.length&&t.has(e[r].id);)i.push(r);i.push(r),n.push(i)}else r++;return n},GOe=e=>{let t=[],n,r,i=-1,s=0,o=f=>{var u;let c=e[i]?e[i].index:void 0,d=(u=e[f-1])==null?void 0:u.index;return!c&&d||c&&d&&d>c?[d,f-1]:[c,i]},a=f=>{var u;let c=e[s]?e[s].index:void 0;if(c&&f<s)return[c,s];let d=s;for(;++d<e.length;){let h=(u=e[d])==null?void 0:u.index;if(!c&&h||c&&h&&h>c)return[h,d]}return[void 0,d]},l=0;for(;l<e.length;){let f=e[l].index;if([n,i]=o(l),[r,s]=a(l),hM(f,n,r))l++;else{let c=[i,l];for(;++l<e.length;){let d=e[l].index,[u,h]=o(l),[g,y]=a(l);if(hM(d,u,g))break;[n,i]=[u,h],[r,s]=[g,y],c.push(l)}c.push(s),t.push(c)}}return t},hM=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,kte=(e,t)=>{var r,i;let n=new Map;for(let s of t){let o=s.shift(),a=s.pop(),l=GA((r=e[o])==null?void 0:r.index,(i=e[a])==null?void 0:i.index,s.length);for(let f=0;f<s.length;f++){let c=e[s[f]];n.set(c,{index:l[f]})}}return n},_$=e=>!!e.index,Or=class $l{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,r,i){let s=r&&i!=="inserted"?r(t):t,o=r&&i!=="deleted"?r(n):n;return new $l(s,o)}static calculate(t,n,r,i){if(t===n)return $l.empty();let s={},o={};for(let f of this.distinctKeysIterator("full",t,n))s[f]=t[f],o[f]=n[f];let[a,l]=i?i(s,o):[s,o];return $l.create(a,l,r)}static empty(){return new $l({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,r){let i={...t};for(let s of Object.keys(r))delete i[s];return{...i,...n}}static mergeArrays(t,n,r,i){return Object.values($l.mergeObjects(sf(t??[],i),sf(n??[],i),sf(r??[],i)))}static diffObjects(t,n,r,i){if(!(!t[r]&&!n[r])&&(typeof t[r]=="object"||typeof n[r]=="object")){let s=t[r]??{},o=n[r]??{},a=$l.getLeftDifferences(s,o).reduce((f,c)=>(f[c]=i(s[c]),f),{}),l=$l.getRightDifferences(s,o).reduce((f,c)=>(f[c]=i(o[c]),f),{});Object.keys(a).length||Object.keys(l).length?(Reflect.set(t,r,a),Reflect.set(n,r,l)):(Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r))}}static diffArrays(t,n,r,i){if(!(!t[r]&&!n[r])&&(Array.isArray(t[r])||Array.isArray(n[r]))){let s=Array.isArray(t[r])?t[r]:[],o=Array.isArray(n[r])?n[r]:[],a=sf($l.getLeftDifferences(sf(s,i),sf(o,i))),l=sf($l.getRightDifferences(sf(s,i),sf(o,i)));if(Object.keys(a).length||Object.keys(l).length){let f=s.filter(d=>a[i?i(d):String(d)]),c=o.filter(d=>l[i?i(d):String(d)]);Reflect.set(t,r,f),Reflect.set(n,r,c)}else Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r)}}static isLeftDifferent(t,n,r=!1){return!!this.distinctKeysIterator("left",t,n,r).next().value}static isRightDifferent(t,n,r=!1){return!!this.distinctKeysIterator("right",t,n,r).next().value}static getLeftDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("left",t,n,r))}static getRightDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("right",t,n,r))}static*distinctKeysIterator(t,n,r,i=!1){if(n===r)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(r):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(r)])):b1(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(let o of s){let a=n[o],l=r[o];if(a!==l){if(!i&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&Gi(a,l))continue;yield o}}}},P$=class qs{constructor(t){this.delta=t}static calculate(t,n){let r=Or.calculate(t,n,void 0,qs.postProcess);return new qs(r)}static empty(){return new qs(Or.create({},{}))}inverse(){let t=Or.create(this.delta.inserted,this.delta.deleted);return new qs(t)}applyTo(t,n){try{let{selectedElementIds:r={},selectedGroupIds:i={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...f}=this.delta.inserted,c=Or.mergeObjects(t.selectedElementIds,s,r),d=Or.mergeObjects(t.selectedGroupIds,o,i),u=a&&n.has(a)?new We(n.get(a)):null,h=l&&n.has(l)?new We(n.get(l)):null,g={...t,...f,selectedElementIds:c,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?u:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},y=this.filterInvisibleChanges(t,g,n);return[g,y]}catch(r){if(console.error("Couldn't apply appstate change",r),At.DEV||At.MODE===lo.TEST)throw r;return[t,!1]}}isEmpty(){return Or.isEmpty(this.delta)}static postProcess(t,n){try{Or.diffObjects(t,n,"selectedElementIds",r=>!0),Or.diffObjects(t,n,"selectedGroupIds",r=>r??!1)}catch(r){if(console.error("Couldn't postprocess appstate change deltas."),At.DEV||At.MODE===lo.TEST)throw r}finally{return[t,n]}}filterInvisibleChanges(t,n,r){let i=Q4(t),s=Q4(n),o=Or.isRightDifferent(qs.stripElementsProps(i),qs.stripElementsProps(s)),a=Or.isRightDifferent(qs.stripStandaloneProps(i),qs.stripStandaloneProps(s));if(!o&&!a)return!1;let l={value:o};if(a){let f=Or.getRightDifferences(qs.stripStandaloneProps(i),qs.stripStandaloneProps(s)),c=new Set;(f.includes("editingGroupId")||f.includes("selectedGroupIds"))&&(c=mOe(r));for(let d of f)switch(d){case"selectedElementIds":n[d]=qs.filterSelectedElements(n[d],r,l);break;case"selectedGroupIds":n[d]=qs.filterSelectedGroups(n[d],c,l);break;case"croppingElementId":{let y=n[d],U=y&&r.get(y);U&&!U.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":let u=n[d];u?c.has(u)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":let h=qs.convertToAppStateKey(d),g=n[h];if(!g)l.value=!0;else{let y=r.get(g.elementId);y&&!y.isDeleted?l.value=!0:n[h]=null}break;default:b1(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,r){let i=Object.keys(t);if(!i.length)return r.value=!0,t;let s={...t};for(let o of i){let a=n.get(o);a&&!a.isDeleted?r.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,r){if(!Object.keys(t).length)return r.value=!0,t;let i={...t};for(let s of Object.keys(i))n.has(s)?r.value=!0:delete i[s];return i}static stripElementsProps(t){let{editingGroupId:n,selectedGroupIds:r,selectedElementIds:i,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,...l}=t;return l}static stripStandaloneProps(t){let{name:n,viewBackgroundColor:r,...i}=t;return i}},Qd=class ir{constructor(t,n,r){this.added=t,this.removed=n,this.updated=r}static create(t,n,r,i={shouldRedistribute:!1}){let s;if(i.shouldRedistribute){let o=new Map,a=new Map,l=new Map,f=[...t,...n,...r];for(let[c,d]of f)this.satisfiesAddition(d)?o.set(c,d):this.satisfiesRemoval(d)?a.set(c,d):l.set(c,d);s=new ir(o,a,l)}else s=new ir(t,n,r);return(At.DEV||At.MODE===lo.TEST)&&(ir.validate(s,"added",this.satisfiesAddition),ir.validate(s,"removed",this.satisfiesRemoval),ir.validate(s,"updated",this.satisfiesUpdate)),s}static validate(t,n,r){for(let[i,s]of t[n].entries())if(!r(s))throw console.error(`Broken invariant for "${n}" delta, element "${i}", delta:`,s),new Error(`ElementsChange invariant broken for element "${i}".`)}static calculate(t,n){if(t===n)return ir.empty();let r=new Map,i=new Map,s=new Map;for(let o of t.values())if(!n.get(o.id)){let a={...o,isDeleted:!1},l={isDeleted:!0},f=Or.create(a,l,ir.stripIrrelevantProps);i.set(o.id,f)}for(let o of n.values()){let a=t.get(o.id);if(!a){let l={isDeleted:!0},f={...o,isDeleted:!1},c=Or.create(l,f,ir.stripIrrelevantProps);r.set(o.id,c);continue}if(a.versionNonce!==o.versionNonce){let l=Or.calculate(a,o,ir.stripIrrelevantProps,ir.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?r.set(o.id,l):i.set(o.id,l);continue}Or.isEmpty(l)||s.set(o.id,l)}}return ir.create(r,i,s)}static empty(){return ir.create(new Map,new Map,new Map)}inverse(){let t=s=>{let o=new Map;for(let[a,l]of s.entries())o.set(a,Or.create(l.inserted,l.deleted));return o},n=t(this.added),r=t(this.removed),i=t(this.updated);return ir.create(r,n,i)}isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}applyLatestChanges(t){let n=a=>l=>{let f={};for(let c of Object.keys(l))switch(c){case"boundElements":f[c]=l[c];break;default:f[c]=a[c]}return f},r=a=>{let l=new Map;for(let[f,c]of a.entries()){let d=t.get(f);if(d){let u=Or.create(c.deleted,c.inserted,n(d),"inserted");l.set(f,u)}else l.set(f,c)}return l},i=r(this.added),s=r(this.removed),o=r(this.updated);return ir.create(i,s,o,{shouldRedistribute:!0})}applyTo(t,n){let r=Ca(new Map(t)),i,s={containsVisibleDifference:!1,containsZindexDifference:!1};try{let o=ir.createApplier(r,n,s),a=o(this.added),l=o(this.removed),f=o(this.updated),c=this.resolveConflicts(t,r);i=new Map([...a,...l,...f,...c])}catch(o){if(console.error("Couldn't apply elements change",o),At.DEV||At.MODE===lo.TEST)throw o;return[t,!0]}try{ir.redrawTextBoundingBoxes(r,i),r=ir.reorderElements(r,i,s),ir.redrawBoundArrows(r,i)}catch(o){if(console.error("Couldn't mutate elements after applying elements change",o),At.DEV||At.MODE===lo.TEST)throw o}finally{return[r,s.containsVisibleDifference]}}static applyDelta(t,n,r={containsVisibleDifference:!0,containsZindexDifference:!0}){var o,a;let{boundElements:i,...s}=n.inserted;if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){let l=Or.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,f=>f.id);Object.assign(s,{boundElements:l})}if(ln(t)){let l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(s,{crop:l.inserted.crop??null})}if(!r.containsVisibleDifference){let{index:l,...f}=s,c=ir.checkForVisibleDifference(t,f);r.containsVisibleDifference=c}return r.containsZindexDifference||(r.containsZindexDifference=n.deleted.index!==n.inserted.index),St(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:Or.isRightDifferent(t,n)}resolveConflicts(t,n){let r=new Map,i=(f,c)=>{let d=n.get(f.id);if(!d)return;let u;t.get(f.id)===d?u=St(d,c):u=Ue(d,c),r.set(u.id,u),n.set(u.id,u)};for(let[f]of this.removed)ir.unbindAffected(t,n,f,i);for(let[f]of this.added)ir.rebindAffected(t,n,f,i);for(let[f]of Array.from(this.updated).filter(([c,d])=>Object.keys({...d.deleted,...d.inserted}).find(u=>sOe.has(u)))){let c=n.get(f);!c||c.isDeleted||ir.rebindAffected(t,n,f,i)}let s=new Map(Array.from(t).filter(([f])=>r.has(f))),{added:o,removed:a,updated:l}=ir.calculate(s,r);for(let[f,c]of o)this.added.set(f,c);for(let[f,c]of a)this.removed.set(f,c);for(let[f,c]of l)this.updated.set(f,c);return r}static unbindAffected(t,n,r,i){let s=()=>t.get(r),o=()=>n.get(r);Jp.unbindAffected(n,s(),i),Jp.unbindAffected(n,o(),i),em.unbindAffected(n,s(),i),em.unbindAffected(n,o(),i)}static rebindAffected(t,n,r,i){let s=()=>t.get(r),o=()=>n.get(r);Jp.unbindAffected(n,s(),i),Jp.rebindAffected(n,o(),i),em.unbindAffected(n,s(),(a,l)=>{Ve(a)&&i(a,l)}),em.rebindAffected(n,o(),i)}static redrawTextBoundingBoxes(t,n){let r=new Map;for(let i of n.values()){if(Xn(i)){let{containerId:s}=i,o=s?t.get(s):void 0;o&&r.set(o.id,{container:o,boundText:i})}if(Ma(i)){let s=qf(i),o=s?t.get(s):void 0;o&&r.set(i.id,{container:i,boundText:o})}}for(let{container:i,boundText:s}of r.values())i.isDeleted||s.isDeleted||Ds(s,i,t,!1)}static redrawBoundArrows(t,n){for(let r of n.values())!r.isDeleted&&El(r)&&uo(r,t,{changedElements:n})}static reorderElements(t,n,r){if(!r.containsZindexDifference)return t;let i=Array.from(t.values()),s=VOe([...i]),o=Or.getRightDifferences(i,s,!0).reduce((a,l)=>{let f=i[Number(l)];return f&&n.has(f.id)&&a.set(f.id,f),a},new Map);return!r.containsVisibleDifference&&o.size&&(r.containsVisibleDifference=!0),mt(Nc(s,o))}static postProcess(t,n){try{Or.diffArrays(t,n,"boundElements",r=>r.id)}catch(r){if(console.error("Couldn't postprocess elements change deltas."),At.DEV||At.MODE===lo.TEST)throw r}finally{return[t,n]}}static stripIrrelevantProps(t){let{id:n,updated:r,version:i,versionNonce:s,seed:o,...a}=t;return a}};Q(Qd,"satisfiesAddition",({deleted:e,inserted:t})=>e.isDeleted===!0&&!t.isDeleted),Q(Qd,"satisfiesRemoval",({deleted:e,inserted:t})=>!e.isDeleted&&t.isDeleted===!0),Q(Qd,"satisfiesUpdate",({deleted:e,inserted:t})=>!!e.isDeleted==!!t.isDeleted),Q(Qd,"createApplier",(e,t,n)=>{let r=Qd.createGetter(e,t,n);return i=>Array.from(i.entries()).reduce((s,[o,a])=>{let l=r(o,a.inserted);if(l){let f=Qd.applyDelta(l,a,n);e.set(f.id,f),s.set(f.id,f)}return s},new Map)}),Q(Qd,"createGetter",(e,t,n)=>(r,i)=>{let s=e.get(r);return s||(s=t.get(r),s&&(n.containsZindexDifference=!0,(i.isDeleted===!1||i.isDeleted!==!0&&s.isDeleted===!1)&&(n.containsVisibleDifference=!0))),s});var D$=Qd,Zl=class{constructor(){Q(this,"subscribers",[])}on(...e){let t=e.flat().filter(n=>typeof n=="function");return this.subscribers.push(...t),()=>this.off(t)}once(...e){let t=e.flat().filter(r=>typeof r=="function");t.push(()=>n());let n=this.on(...t);return n}off(...e){let t=e.flat();this.subscribers=this.subscribers.filter(n=>!t.includes(n))}trigger(...e){for(let t of this.subscribers)t(...e);return this}clear(){this.subscribers=[]}},Ste="__observedAppState",Q4=e=>{var n,r;let t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((r=e.selectedLinearElement)==null?void 0:r.elementId)||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,Ste,{value:!0,enumerable:!1}),t},XOe=e=>!!Reflect.get(e,Ste),pe={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"},KOe=class{constructor(e,t){this.elementsChange=e,this.appStateChange=t}},YOe=class{constructor(){Q(this,"onStoreIncrementEmitter",new Zl),Q(this,"scheduledActions",new Set),Q(this,"_snapshot",L$.empty()),Q(this,"shouldCaptureIncrement",()=>{this.scheduleAction(pe.IMMEDIATELY)}),Q(this,"shouldUpdateSnapshot",()=>{this.scheduleAction(pe.NEVER)}),Q(this,"scheduleAction",e=>{this.scheduledActions.add(e),this.satisfiesScheduledActionsInvariant()}),Q(this,"commit",(e,t)=>{try{this.scheduledActions.has(pe.IMMEDIATELY)?this.captureIncrement(e,t):this.scheduledActions.has(pe.NEVER)&&this.updateSnapshot(e,t)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}}),Q(this,"captureIncrement",(e,t)=>{let n=this.snapshot,r=this.snapshot.maybeClone(e,t);if(n!==r){let i=r.meta.didElementsChange?D$.calculate(n.elements,r.elements):D$.empty(),s=r.meta.didAppStateChange?P$.calculate(n.appState,r.appState):P$.empty();(!i.isEmpty()||!s.isEmpty())&&this.onStoreIncrementEmitter.trigger(new KOe(i,s)),this.snapshot=r}}),Q(this,"updateSnapshot",(e,t)=>{let n=this.snapshot.maybeClone(e,t);this.snapshot!==n&&(this.snapshot=n)}),Q(this,"filterUncomittedElements",(e,t)=>{for(let[n,r]of e.entries()){if(!t.get(n))continue;let i=this.snapshot.elements.get(n);i?i.version<r.version&&t.set(n,i):t.delete(n)}return t}),Q(this,"clear",()=>{this.snapshot=L$.empty(),this.scheduledActions=new Set}),Q(this,"satisfiesScheduledActionsInvariant",()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){let e=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;if(console.error(e,this.scheduledActions.values()),At.DEV||At.MODE===lo.TEST)throw new Error(e)}})}get snapshot(){return this._snapshot}set snapshot(e){this._snapshot=e}},L$=class pM{constructor(t,n,r={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t,this.appState=n,this.meta=r}static empty(){return new pM(new Map,Q4(Ac()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,n){let r=this.maybeCreateElementsSnapshot(t),i=this.maybeCreateAppStateSnapshot(n),s=!1,o=!1;return this.elements!==r&&(s=!0),this.appState!==i&&(o=!0),!s&&!o?this:new pM(r,i,{didElementsChange:s,didAppStateChange:o})}maybeCreateAppStateSnapshot(t){if(!t)return this.appState;let n=XOe(t)?t:Q4(t);return this.detectChangedAppState(n)?n:this.appState}detectChangedAppState(t){return!Gi(this.appState,t,{selectedElementIds:Gi,selectedGroupIds:Gi})}maybeCreateElementsSnapshot(t){return t?this.detectChangedElements(t)?this.createElementsSnapshot(t):this.elements:this.elements}detectChangedElements(t){if(this.elements===t)return!1;if(this.elements.size!==t.size)return!0;let n=Array.from(t.keys());for(let r=n.length-1;r>=0;r--){let i=this.elements.get(n[r]),s=t.get(n[r]);if(!i||!s||i.id!==s.id||i.versionNonce!==s.versionNonce)return!0}return!1}createElementsSnapshot(t){let n=new Map;for(let[r,i]of this.elements.entries())t.get(r)?n.set(r,i):n.set(r,St(i,{isDeleted:!0}));for(let[r,i]of t.entries()){let s=n.get(r);(!s||s&&s.versionNonce!==i.versionNonce)&&n.set(r,L1(i))}return n}},Fl=new Map,ZOe=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,qOe=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,QOe=/^https:\/\/(?:www\.)?figma\.com/,O$=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,JOe=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,j$=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,eje=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,tje=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,nje=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,B$=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,F$=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,rje=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,mM=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com"]),z$=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com"]),A2=e=>`<html><body>${e}</body></html>`,tm=e=>{if(!e)return null;if(Fl.has(e))return Fl.get(e);let t=e,n=z$.has(gM(e,z$)||""),r="generic",i={w:560,h:840},s=e.match(ZOe);if(s!=null&&s[2]){let l=s[3]?`&start=${s[3]}`:"",f=e.includes("shorts");switch(r="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${l}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${l}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${l}`;break}return i=f?{w:315,h:560}:{w:560,h:315},Fl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}}let o=e.match(qOe);if(o!=null&&o[1]){let l=o==null?void 0:o[1],f=/^\d+$/.test(l)?void 0:new URIError("Invalid embed link format");return r="video",e=`https://player.vimeo.com/video/${l}?api=1`,i={w:560,h:315},Fl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,error:f,sandbox:{allowSameOrigin:n}}}if(e.match(QOe))return r="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,i={w:550,h:550},Fl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};let a=e.match(tje);if(a)return e=a[1]==="embed"?a[0]:a[0].replace("/v","/embed"),Fl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};if(j$.test(e)){let l=e.match(j$)[1],f=z3(`https://twitter.com/x/status/${l}`),c={type:"document",srcdoc:d=>A2(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${d}"><a href="${f}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return Fl.set(t,c),c}if(F$.test(e)){let[,l,f,c]=e.match(F$),d=z3(`https://reddit.com/r/${l}/comments/${f}/${c}`),u={type:"document",srcdoc:h=>A2(`<blockquote class="reddit-embed-bq" data-embed-theme="${h}"><a href="${d}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return Fl.set(t,u),u}if(O$.test(e)){let[,l,f]=e.match(O$),c=z3(`https://gist.github.com/${l}/${f}`),d={type:"document",srcdoc:()=>A2(`
          <script src="${c}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return Fl.set(e,d),d}return Fl.set(e,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}},Cte=e=>{let t;ru(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;let n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),r=sr.Helvetica,i=kn({fontSize:n,fontFamily:r});return Bo({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:r,fontSize:n,text:D1(t,i,e.width-20),textAlign:"center",verticalAlign:Do.MIDDLE,angle:e.angle??0})};je({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,r)=>{let i=jr(t,{type:"embeddable"});return Xl(r.canvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:jr(t,{type:"embeddable"})},captureUpdate:pe.EVENTUALLY}}});var gM=(e,t)=>{try{let{hostname:n}=new URL(e),r=n.replace(/^www\./,"");if(t instanceof Set){if(mM.has(r))return r;let s=r.replace(/^([^.]+)/,"*");return mM.has(s)?s:null}let i=t.replace(/^www\./,"");if(r===i)return i}catch{}return null},ije=e=>{let t=e.match(eje);if(t&&t.length===2)return t[1];let n=e.match(rje);if(n&&n.length===2)return n[1];let r=e.match(JOe);if(r&&r.length===2)return r[1];if(B$.test(e))return`https://giphy.com/embed/${B$.exec(e)[1]}`;let i=e.match(nje);return i&&i.length===2?i[1]:e},K3=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){let n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(let n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(gM(e,n))return!0;return!1}}return!!gM(e,mM)},E5=(e,t,n)=>{let r={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(r)},k5=(e,t,n,r,i)=>{if(!r.enabled||!r.clip)return null;let s=ho(e,i);if(s){let o=t.ownerDocument.createElementNS(en,"g");return o.setAttributeNS(en,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},Y3=(e,t,n,r,i,s,o,a)=>{var E;let l={x:s,y:o},[f,c,d,u]=wt(e,t),h=(d-f)/2-(e.x-f),g=(u-c)/2-(e.y-c);if(Ve(e)){let k=Ni(e,t);if(Tt(k)){let[M,S,A,I]=wt(k,t),R=We.getBoundTextElementPosition(k,e,t);h=(A-M)/2-(R.x-M),g=(I-S)/2-(R.y-S),s=s+R.x-e.x,o=o+R.y-e.y}}let y=180*e.angle/Math.PI,U=r;if(e.link){let k=r.ownerDocument.createElementNS(en,"a");k.setAttribute("href",Lo(e.link)),U.appendChild(k),U=k}let x=(k,M)=>{Kf()&&k.setAttribute("data-id",M.id),U.appendChild(k)},v=(((E=ho(e,t))==null?void 0:E.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{let k=lr.generateElementShape(e,null),M=E5(n,k,x5);v!==1&&(M.setAttribute("stroke-opacity",`${v}`),M.setAttribute("fill-opacity",`${v}`)),M.setAttribute("stroke-linecap","round"),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`);let S=k5(e,U,[M],a.frameRendering,t);x(S||M,e);break}case"iframe":case"embeddable":{let k=lr.generateElementShape(e,a),M=E5(n,k,x5),S=e.opacity/100;S!==1&&(M.setAttribute("stroke-opacity",`${S}`),M.setAttribute("fill-opacity",`${S}`)),M.setAttribute("stroke-linecap","round"),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`),x(M,e);let A=Cte(e);Y3(A,t,n,U,i,A.x+l.x-e.x,A.y+l.y-e.y,a);let I=E5(n,k,x5);for(I.setAttribute("stroke-linecap","round"),I.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`);I.firstChild;)I.removeChild(I.firstChild);let R=bl(Math.min(e.width,e.height),e),P=tm(pte(e.link||""));if(a.renderEmbeddables===!1||(P==null?void 0:P.type)==="document"){let _=r.ownerDocument.createElementNS(en,"a");_.setAttribute("href",Lo(e.link||"")),_.setAttribute("target","_blank"),_.setAttribute("rel","noopener noreferrer"),_.style.borderRadius=`${R}px`,I.appendChild(_)}else{let _=r.ownerDocument.createElementNS(en,"foreignObject");_.style.width=`${e.width}px`,_.style.height=`${e.height}px`,_.style.border="none";let O=_.ownerDocument.createElementNS(en,"div");O.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),O.style.width="100%",O.style.height="100%";let V=O.ownerDocument.createElement("iframe");V.src=(P==null?void 0:P.link)??"",V.style.width="100%",V.style.height="100%",V.style.border="none",V.style.borderRadius=`${R}px`,V.style.top="0",V.style.left="0",V.allowFullscreen=!0,O.appendChild(V),_.appendChild(O),I.appendChild(_)}x(I,e);break}case"line":case"arrow":{let k=Ct(e,t),M=r.ownerDocument.createElementNS(en,"mask");if(k){M.setAttribute("id",`mask-${e.id}`);let I=r.ownerDocument.createElementNS(en,"rect");s=s||0,o=o||0,I.setAttribute("x","0"),I.setAttribute("y","0"),I.setAttribute("fill","#fff"),I.setAttribute("width",`${e.width+100+s}`),I.setAttribute("height",`${e.height+100+o}`),M.appendChild(I);let R=r.ownerDocument.createElementNS(en,"rect"),P=We.getBoundTextElementPosition(e,k,t),_=s+P.x-e.x,O=o+P.y-e.y;R.setAttribute("x",_.toString()),R.setAttribute("y",O.toString()),R.setAttribute("fill","#000"),R.setAttribute("width",`${k.width}`),R.setAttribute("height",`${k.height}`),R.setAttribute("opacity","1"),M.appendChild(R)}let S=r.ownerDocument.createElementNS(en,"g");k&&S.setAttribute("mask",`url(#mask-${e.id})`),S.setAttribute("stroke-linecap","round"),lr.generateElementShape(e,a).forEach(I=>{let R=E5(n,I,x5);v!==1&&(R.setAttribute("stroke-opacity",`${v}`),R.setAttribute("fill-opacity",`${v}`)),R.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`),e.type==="line"&&Yf(e.points)&&e.backgroundColor!=="transparent"&&R.setAttribute("fill-rule","evenodd"),S.appendChild(R)});let A=k5(e,U,[S,M],a.frameRendering,t);A?(x(A,e),U.appendChild(A)):(x(S,e),U.append(M));break}case"freedraw":{let k=lr.generateElementShape(e,a),M=k?E5(n,k,x5):r.ownerDocument.createElementNS(en,"g");v!==1&&(M.setAttribute("stroke-opacity",`${v}`),M.setAttribute("fill-opacity",`${v}`)),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`),M.setAttribute("stroke","none");let S=r.ownerDocument.createElementNS(en,"path");S.setAttribute("fill",e.strokeColor),S.setAttribute("d",Vee(e)),M.appendChild(S);let A=k5(e,U,[M],a.frameRendering,t);x(A||M,e);break}case"image":{let k=Math.round(e.width),M=Math.round(e.height),S=ma(e)&&i[e.fileId];if(S){let{reuseImages:A=!0}=a,I=`image-${S.id}`,R=e.width,P=e.height;e.crop&&({width:R,height:P}=Zf(e),I=`image-crop-${S.id}-${_Be(`${R}x${P}`)}`),A||(I=`image-${e.id}`);let _=r.querySelector(`#${I}`);if(!_){_=r.ownerDocument.createElementNS(en,"symbol"),_.id=I;let W=r.ownerDocument.createElementNS(en,"image");W.setAttribute("href",S.dataURL),W.setAttribute("preserveAspectRatio","none"),e.crop||!A?(W.setAttribute("width",`${R}`),W.setAttribute("height",`${P}`)):(W.setAttribute("width","100%"),W.setAttribute("height","100%")),_.appendChild(W),(U.querySelector("defs")||U).prepend(_)}let O=r.ownerDocument.createElementNS(en,"use");O.setAttribute("href",`#${I}`),a.exportWithDarkMode&&S.mimeType!==ft.svg&&O.setAttribute("filter",Lee);let V=0,j=0;if(e.crop){let{width:W,height:B}=Zf(e);V=e.crop.x/(e.crop.naturalWidth/W),j=e.crop.y/(e.crop.naturalHeight/B)}let F=h+V,z=g+j;O.setAttribute("width",`${k+V}`),O.setAttribute("height",`${M+j}`),O.setAttribute("opacity",`${v}`),(e.scale[0]!==1||e.scale[1]!==1)&&O.setAttribute("transform",`translate(${F} ${z}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-F} ${-z})`);let H=r.ownerDocument.createElementNS(en,"g");if(e.crop){let W=r.ownerDocument.createElementNS(en,"mask");W.setAttribute("id",`mask-image-crop-${e.id}`),W.setAttribute("fill","#fff");let B=r.ownerDocument.createElementNS(en,"rect");B.setAttribute("x",`${V}`),B.setAttribute("y",`${j}`),B.setAttribute("width",`${k}`),B.setAttribute("height",`${M}`),W.appendChild(B),U.appendChild(W),H.setAttribute("mask",`url(#${W.id})`)}if(H.appendChild(O),H.setAttribute("transform",`translate(${s-V} ${o-j}) rotate(${y} ${F} ${z})`),e.roundness){let W=r.ownerDocument.createElementNS(en,"clipPath");W.id=`image-clipPath-${e.id}`;let B=r.ownerDocument.createElementNS(en,"rect"),X=bl(Math.min(e.width,e.height),e);B.setAttribute("width",`${e.width}`),B.setAttribute("height",`${e.height}`),B.setAttribute("rx",`${X}`),B.setAttribute("ry",`${X}`),W.appendChild(B),x(W,e),H.setAttributeNS(en,"clip-path",`url(#${W.id})`)}let G=k5(e,U,[H],a.frameRendering,t);x(G||H,e)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){let k=document.createElementNS(en,"rect");k.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`),k.setAttribute("width",`${e.width}px`),k.setAttribute("height",`${e.height}px`),k.setAttribute("rx",or.radius.toString()),k.setAttribute("ry",or.radius.toString()),k.setAttribute("fill","none"),k.setAttribute("stroke",or.strokeColor),k.setAttribute("stroke-width",or.strokeWidth.toString()),x(k,e)}break}default:if(Ve(e)){let k=r.ownerDocument.createElementNS(en,"g");v!==1&&(k.setAttribute("stroke-opacity",`${v}`),k.setAttribute("fill-opacity",`${v}`)),k.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`);let M=e.text.replace(/\r\n?/g,`
`).split(`
`),S=Ny(e.fontSize,e.lineHeight),A=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,I=Eee(e.fontFamily,e.fontSize,S),R=FJ(e.text)?"rtl":"ltr",P=e.textAlign==="center"?"middle":e.textAlign==="right"||R==="rtl"?"end":"start";for(let O=0;O<M.length;O++){let V=r.ownerDocument.createElementNS(en,"text");V.textContent=M[O],V.setAttribute("x",`${A}`),V.setAttribute("y",`${O*S+I}`),V.setAttribute("font-family",Lg(e)),V.setAttribute("font-size",`${e.fontSize}px`),V.setAttribute("fill",e.strokeColor),V.setAttribute("text-anchor",P),V.setAttribute("style","white-space: pre;"),V.setAttribute("direction",R),V.setAttribute("dominant-baseline","alphabetic"),k.appendChild(V)}let _=k5(e,U,[k],a.frameRendering,t);x(_||k,e)}else throw new Error(`Unimplemented type ${e.type}`)}},sje=(e,t,n,r,i,s)=>{r&&(e.filter(o=>!ba(o)).forEach(o=>{if(!o.isDeleted){if(Ve(o)&&o.containerId&&t.has(o.containerId))return;try{Y3(o,t,n,r,i,o.x+s.offsetX,o.y+s.offsetY,s);let a=Ct(o,t);a&&Y3(a,t,n,r,i,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>ba(o)).forEach(o=>{if(!o.isDeleted)try{Y3(o,t,n,r,i,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},$$=500,TN=e=>{var r,i;let t=(r=e.extensions)==null?void 0:r.reduce((s,o)=>(s.push(ft[o]),s),[]),n=(i=e.extensions)==null?void 0:i.reduce((s,o)=>o==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${o}`),[]);return _Ae({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(s,o,a)=>{let l=Og(o,$$),f=()=>{c(),document.addEventListener("keyup",l),document.addEventListener("pointerup",l),l()},c=()=>{var u;if((u=a.files)!=null&&u.length){let h=e.multiple?[...a.files]:a.files[0];s(h)}};requestAnimationFrame(()=>{window.addEventListener("focus",f)});let d=window.setInterval(()=>{c()},$$);return u=>{clearInterval(d),l.cancel(),window.removeEventListener("focus",f),document.removeEventListener("keyup",l),document.removeEventListener("pointerup",l),u&&(console.warn("Opening the file was canceled (legacy-fs)."),u(new Rw))}}})},J4=(e,t)=>DAe(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),oje=(e,t)=>{let n={};for(let r of e)!r.isDeleted&&"fileId"in r&&r.fileId&&t[r.fileId]&&(n[r.fileId]=t[r.fileId]);return n},IN=(e,t,n,r)=>{let i={type:Ea.excalidraw,version:Sw.excalidraw,source:QI,elements:une(e),appState:DJ(t),files:oje(e,n)};return JSON.stringify(i,null,2)},Ate=async(e,t,n,r=t.name||_J)=>{let i=IN(e,t,n),s=new Blob([i],{type:ft.excalidraw});return{fileHandle:await J4(s,{name:r,extension:"excalidraw",description:"Excalidraw file",fileHandle:oR(t.fileHandle)?null:t.fileHandle})}},aje=async(e,t)=>{let n=await TN({description:"Excalidraw files"});return bne(await aR(n),e,t,n.handle)},lje=e=>(e==null?void 0:e.type)===Ea.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),Mte=e=>typeof e=="object"&&e&&e.type===Ea.excalidrawLibrary&&(e.version===1||e.version===2),Tte=e=>{let t={type:Ea.excalidrawLibrary,version:Sw.excalidrawLibrary,source:QI,libraryItems:e};return JSON.stringify(t,null,2)},cje=async e=>{let t=Tte(e);await J4(new Blob([t],{type:ft.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},Ite=e=>new Promise((t,n)=>{let r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Nte=async({fileIds:e,files:t,imageCache:n})=>{let r=new Map,i=new Map;return await Promise.all(e.reduce((s,o)=>{let a=t[o];return a&&!r.has(o)?(r.set(o,!0),s.concat((async()=>{try{if(a.mimeType===ft.binary)throw new Error("Only images can be added to ImageCache");let l=Ite(a.dataURL),f={image:l,mimeType:a.mimeType};n.set(o,f);let c=await l;n.set(o,{...f,image:c})}catch{i.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:r,erroredFiles:i}},Rte=e=>e.filter(t=>ma(t)),fje=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",H$=e=>{let t=new DOMParser().parseFromString(e,ft.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!fje(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",en);let r=n.getAttribute("width"),i=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(i!=null&&i.includes("%")||i==="auto")&&(i=null);let s=n.getAttribute("viewBox");if(!r||!i){if(r=r||"50",i=i||"50",s){let o=s.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);o&&([,r,i]=o)}n.setAttribute("width",r),n.setAttribute("height",i)}return s||n.setAttribute("viewBox",`0 0 ${r} ${i}`),n.outerHTML}},_te=document.createElement("img");_te.src=`data:${ft.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;var Pte=document.createElement("img");Pte.src=`data:${ft.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;var NN=([e,t,n,r],i,s)=>{let o=mLe,a=o/s.zoom.value,l=o/s.zoom.value,f=o/s.zoom.value,c=(e+n)/2,d=(t+r)/2,u=(o-8)/(2*s.zoom.value),h=4/s.zoom.value,g=n+h-u,y=t-h-f+u,[U,x]=ue(D(g+a/2,y+l/2),D(c,d),i);return[U-a/2,x-l/2,a,l]},Dte=(e,t,n,[r,i])=>{let s=4/n.zoom.value,[o,a,l,f]=wt(e,t),[c,d,u,h]=NN([o,a,l,f],e.angle,n);return r>c-s&&r<c+s+u&&i>d-s&&i<d+h+s},lS=(e,t,n,[r,i],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&yN(r,i,e,t)?!0:Dte(e,t,n,D(r,i)),Vw=(e,t,n,r,i=!0)=>{e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill(),i&&e.stroke()},RN=(e,t)=>[e.width/t,e.height/t],_N=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:r,theme:i,isExporting:s,viewBackgroundColor:o})=>{let a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&i===Ft.DARK&&(a.filter=tN),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,r),a.save(),a.fillStyle=o,a.fillRect(0,0,n,r),a.restore()):a.clearRect(0,0,n,r),a},Lte=(e,t)=>{let n=window.location.href;try{let r=new URL(n);return r.searchParams.set(P4,e),Lo(r.toString())}catch(r){console.error(r)}return Lo(n)},Ote=(e,t)=>{if(e.length>0&&e9(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){let n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},e9=e=>!!(e.length===1||e.length>1&&cte(e)),M2=e=>{try{let t=new URL(e);return t.searchParams.has(P4)&&t.host===window.location.host}catch{return!1}},dje=e=>{try{let{searchParams:t}=new URL(e);if(t.has(P4))return t.get(P4)}catch{}return null},GU={Bold:"#dddddd",Regular:"#e5e5e5"},uje=(e,t,n,r,i,s,o,a)=>{let l=r%t-t,f=i%t-t,c=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,f%1?0:.5);for(let u=l;u<l+o+t*2;u+=t){let h=n>1&&Math.round(u-r)%(n*t)===0;if(!h&&c<10)continue;let g=Math.min(1/s.value,h?4:1);e.lineWidth=g;let y=[g*3,d+(g+d)];e.beginPath(),e.setLineDash(h?[]:y),e.strokeStyle=h?GU.Bold:GU.Regular,e.moveTo(u,f-t),e.lineTo(u,Math.ceil(f+a+t*2)),e.stroke()}for(let u=f;u<f+a+t*2;u+=t){let h=n>1&&Math.round(u-i)%(n*t)===0;if(!h&&c<10)continue;let g=Math.min(1/s.value,h?4:1);e.lineWidth=g;let y=[g*3,d+(g+d)];e.beginPath(),e.setLineDash(h?[]:y),e.strokeStyle=h?GU.Bold:GU.Regular,e.moveTo(l-t,u),e.lineTo(Math.ceil(l+o+t*2),u),e.stroke()}e.restore()},V$=(e,t,n,r)=>{t.translate(e.x+r.scrollX,e.y+r.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,or.radius/r.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+r.scrollX),-(e.y+r.scrollY))},W$={regularLink:null,elementLink:null},G$=(e,t,n,r)=>{if(e.link&&!n.selectedElementIds[e.id]){let[i,s,o,a]=wt(e,r),[l,f,c,d]=NN([i,s,o,a],e.angle,n),u=l+c/2,h=f+d/2;t.save(),t.translate(n.scrollX+u,n.scrollY+h),t.rotate(e.angle);let g=M2(e.link)?"elementLink":"regularLink",y=W$[g];if(!y||y.zoom!==n.zoom.value){y=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),y.width=c*window.devicePixelRatio*n.zoom.value,y.height=d*window.devicePixelRatio*n.zoom.value,W$[g]=y;let U=y.getContext("2d");U.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),U.fillStyle="#fff",U.fillRect(0,0,c,d),g==="elementLink"?U.drawImage(Pte,0,0,c,d):U.drawImage(_te,0,0,c,d),U.restore()}t.drawImage(y,l-u,f-h,c,d),t.restore()}},jte=({canvas:e,rc:t,elementsMap:n,allElementsMap:r,visibleElements:i,scale:s,appState:o,renderConfig:a})=>{var y;if(e===null)return;let{renderGrid:l=!0,isExporting:f}=a,[c,d]=RN(e,s),u=_N({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:d,theme:o.theme,isExporting:f,viewBackgroundColor:o.viewBackgroundColor});u.scale(o.zoom.value,o.zoom.value),l&&uje(u,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,c/o.zoom.value,d/o.zoom.value);let h=new Set;i.forEach(U=>{U.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[U.id]&&(e0(U,o.frameToHighlight,n)||U.groupIds.find(x=>h.has(x)))&&U.groupIds.forEach(x=>h.add(x))});let g=new Map;i.filter(U=>!ba(U)).forEach(U=>{var x;try{let v=U.frameId||((x=o.frameToHighlight)==null?void 0:x.id);if(Ve(U)&&U.containerId&&n.has(U.containerId))return;if(u.save(),v&&o.frameRendering.enabled&&o.frameRendering.clip){let k=bM(U,n,o);k&&aH(U,k,o,n,g)&&V$(k,u,a,o),H0(U,n,r,t,u,a,o)}else H0(U,n,r,t,u,a,o);let E=Ct(U,n);E&&H0(E,n,r,t,u,a,o),u.restore(),f||G$(U,u,o,n)}catch(v){console.error(v,U.id,U.x,U.y,U.width,U.height)}}),i.filter(U=>ba(U)).forEach(U=>{var x;try{let v=()=>{if(H0(U,n,r,t,u,a,o),ba(U)&&(f||eo(U)&&a.embedsValidationStatus.get(U.id)!==!0)&&U.width&&U.height){let E=Cte(U);H0(E,n,r,t,u,a,o)}f||G$(U,u,o,n)};if((U.frameId||(x=o.frameToHighlight)!=null&&x.id)&&o.frameRendering.enabled&&o.frameRendering.clip){u.save();let E=bM(U,n,o);E&&aH(U,E,o,n,g)&&V$(E,u,a,o),v(),u.restore()}else v()}catch(v){console.error(v)}}),(y=a.pendingFlowchartNodes)==null||y.forEach(U=>{try{H0(U,n,r,t,u,a,o)}catch(x){console.error(x)}})},Bte=Cw(e=>{jte(e)},{trailing:!0}),Fte=(e,t)=>{if(t){Bte(e);return}jte(e)},hje=(e,t)=>{if(e.width<=t)return e;let n=document.createElement("canvas").getContext("2d");n.font=kn({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(n.measureText(r).width>t)for(let i=r.length;i>0;i--){let s=`${r.slice(0,i)}...`;if(n.measureText(s).width<=t){r=s;break}}return St(e,{text:r,width:t})},pje=(e,t)=>{let n=[];for(let r of e){if(ht(r)){let i=Bo({x:r.x,y:r.y-or.nameOffsetY,fontFamily:sr.Helvetica,fontSize:or.nameFontSize,lineHeight:or.nameLineHeight,strokeColor:t.exportWithDarkMode?or.nameColorDarkTheme:or.nameColorLightTheme,text:nne(r)});i.y-=i.height,i=hje(i,r.width),n.push(i)}n.push(r)}return n},zte=(e,t)=>(t=t||Ac().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),$te=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:r})=>{let i;return t?i=QN(e,t):n.enabled&&n.name?i=pje(e,{exportWithDarkMode:r}):i=e,i},Hte=async(e,t,n,{exportBackground:r,exportPadding:i=o6,viewBackgroundColor:s,exportingFrame:o},a=(f,c)=>{let d=document.createElement("canvas");return d.width=f*t.exportScale,d.height=c*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await Hf.loadElementsFonts(e)})=>{await l();let f=zte(o??null,t.frameRendering??null);o&&(f.clip=!1);let c=$te({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:f});o&&(i=0);let[d,u,h,g]=DN(o?[o]:qN(c),i),{canvas:y,scale:U=1}=a(h,g),x=Ac(),{imageCache:v}=await Nte({imageCache:new Map,fileIds:Rte(c).map(E=>E.fileId),files:n});return Fte({canvas:y,rc:f0.canvas(y),elementsMap:Ca(mt(c)),allElementsMap:Ca(mt(Jf(e))),visibleElements:c,scale:U,appState:{...t,frameRendering:f,viewBackgroundColor:r?s:null,scrollX:-d+i,scrollY:-u+i,zoom:x.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?Ft.DARK:Ft.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:v,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),y},Y5=e=>document.createComment(` ${e} `),PN=async(e,t,n,r)=>{let i=zte((r==null?void 0:r.exportingFrame)??null,t.frameRendering??null),{exportPadding:s=o6,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:f}=t,{exportingFrame:c=null}=r||{},d=$te({elements:e,exportingFrame:c,exportWithDarkMode:o,frameRendering:i});c&&(s=0);let[u,h,g,y]=DN(c?[c]:qN(d),s),U=-u+s,x=-h+s,v=document.createElementNS(en,"svg");v.setAttribute("version","1.1"),v.setAttribute("xmlns",en),v.setAttribute("viewBox",`0 0 ${g} ${y}`),v.setAttribute("width",`${g*l}`),v.setAttribute("height",`${y*l}`),o&&v.setAttribute("filter",tN);let E=v.ownerDocument.createElementNS(en,"defs"),k=v.ownerDocument.createElementNS(en,"metadata");if(v.appendChild(Y5("svg-source:excalidraw")),v.appendChild(k),v.appendChild(E),f)try{mje({metadataElement:k,payload:IN(e,t,n||{},"local")})}catch(_){console.error(_)}let M=ZN(e);if(M.length){let _=mt(e);for(let O of M){let V=v.ownerDocument.createElementNS(en,"clipPath");V.setAttribute("id",O.id);let[j,F,z,H]=wt(O,_),G=(z-j)/2-(O.x-j),W=(H-F)/2-(O.y-F),B=v.ownerDocument.createElementNS(en,"rect");B.setAttribute("transform",`translate(${O.x+U} ${O.y+x}) rotate(${O.angle} ${G} ${W})`),B.setAttribute("width",`${O.width}`),B.setAttribute("height",`${O.height}`),c||(B.setAttribute("rx",`${or.radius}`),B.setAttribute("ry",`${or.radius}`)),V.appendChild(B),E.appendChild(V)}}let S=r!=null&&r.skipInliningFonts?[]:await Hf.generateFontFaceDeclarations(e),A=`
      `,I=v.ownerDocument.createElementNS(en,"style");if(I.classList.add("style-fonts"),I.appendChild(document.createTextNode(`${A}${S.join(A)}`)),E.appendChild(I),t.exportBackground&&a){let _=v.ownerDocument.createElementNS(en,"rect");_.setAttribute("x","0"),_.setAttribute("y","0"),_.setAttribute("width",`${g}`),_.setAttribute("height",`${y}`),_.setAttribute("fill",a),v.appendChild(_)}let R=f0.svg(v),P=(r==null?void 0:r.renderEmbeddables)??!1;return sje(d,Ca(mt(d)),R,v,n||{},{offsetX:U,offsetY:x,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:P,frameRendering:i,canvasBackgroundColor:a,embedsValidationStatus:P?new Map(d.filter(_=>ht(_)).map(_=>[_.id,!0])):new Map,reuseImages:(r==null?void 0:r.reuseImages)??!0}),v},mje=({payload:e,metadataElement:t})=>{let n=wne(JSON.stringify(Ene({text:e})),!0);t.appendChild(Y5(`payload-type:${ft.excalidraw}`)),t.appendChild(Y5("payload-version:2")),t.appendChild(Y5("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(Y5("payload-end"))},gje=({svg:e})=>{var t;if(e.includes(`payload-type:${ft.excalidraw}`)){let n=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!n)throw new Error("INVALID");let r=(((t=e.match(/<!-- payload-version:(\d+) -->/))==null?void 0:t[1])||"1")!=="1";try{let i=vne(n[1],r),s=JSON.parse(i);if(!("encoded"in s)){if("type"in s&&s.type===Ea.excalidraw)return i;throw new Error("FAILED")}return kne(s)}catch(i){throw console.error(i),new Error("FAILED")}}throw new Error("INVALID")},DN=(e,t)=>{let[n,r,i,s]=mn(e),o=ss(n,i)+t*2,a=ss(r,s)+t*2;return[n,r,o,a]},bje=(e,t,n)=>{let[,,r,i]=DN(e,t).map(s=>Math.trunc(s*n));return[r,i]},yje=class{constructor(t){this.scoreFunction=t,Q(this,"content",[])}sinkDown(t){let n=this.content[t];for(;t>0;){let r=(t+1>>1)-1,i=this.content[r];if(this.scoreFunction(n)<this.scoreFunction(i))this.content[r]=n,this.content[t]=i,t=r;else break}}bubbleUp(t){let n=this.content.length,r=this.content[t],i=this.scoreFunction(r);for(;;){let s=t+1<<1,o=s-1,a=null,l=0;if(o<n){let f=this.content[o];l=this.scoreFunction(f),l<i&&(a=o)}if(s<n){let f=this.content[s];this.scoreFunction(f)<(a===null?i:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=r,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;let t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;let n=this.content.indexOf(t),r=this.content.pop();n<this.content.length&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}},LN=1,yn=40,Uje=(e,t)=>{let n=e.fixedSegments?e.fixedSegments.slice():null;if(n){let r=[];e.points.map(o=>D(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return r.push(o);let f=Tb(o,l[a-1]),c=Tb(l[a-1],l[a-2]);if(vr(f,c)){let d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,u=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;u!==-1&&(n[u].start=D(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),r.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return r.push(o)});let i=[];r.forEach((o,a,l)=>{if(a<3)return i.push(o);if(cn(l[a-2],l[a-1])<LN){let f=(n==null?void 0:n.findIndex(u=>u.index===a-2))??-1,c=(n==null?void 0:n.findIndex(u=>u.index===a-1))??-1;c!==-1&&n.splice(c,1),f!==-1&&n.splice(f,1),i.splice(-2,2),n.forEach(u=>{u.index>a-2&&(u.index-=2)});let d=Rf(o,l[a-1]);return i.push(D(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}i.push(o)});let s=n.filter(o=>o.index!==1&&o.index!==i.length-1);return s.length===0?Ju(FN(zN(BN(e,jN(e,t,i.map(o=>D(o[0]-e.x,o[1]-e.y)),e.startBinding&&Gg(e.startBinding.elementId,t),e.endBinding&&Gg(e.endBinding.elementId,t)))??[])),s,null,null):(At.DEV&&us($N(i),"Invalid elbow points with fixed segments"),Ju(i,s,e.startIsSpecial,e.endIsSpecial))}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},xje=(e,t,n)=>{var I,R;let r=t.map(P=>P.index),i=(((I=e.fixedSegments)==null?void 0:I.map(P=>P.index))??[]).findIndex(P=>!r.includes(P));if(i===-1||!((R=e.fixedSegments)!=null&&R[i]))return{points:e.points};let s=e.fixedSegments[i].index,o=e.fixedSegments[i-1],a=e.fixedSegments[i+1],l=e.x+(o?o.end[0]:0),f=e.y+(o?o.end[1]:0),c=o?null:e.startBinding,d=a?null:e.endBinding,{startHeading:u,endHeading:h,startGlobalPoint:g,endGlobalPoint:y,hoveredStartElement:U,hoveredEndElement:x,...v}=jN({x:l,y:f,startBinding:c,endBinding:d,startArrowhead:null,endArrowhead:null,points:e.points},n,[D(0,0),D(e.x+((a==null?void 0:a.start[0])??e.points[e.points.length-1][0])-l,e.y+((a==null?void 0:a.start[1])??e.points[e.points.length-1][1])-f)],c&&Gg(c.elementId,n),d&&Gg(d.elementId,n),{isDragging:!1}),{points:E}=Ju(FN(zN(BN(e,{startHeading:u,endHeading:h,startGlobalPoint:g,endGlobalPoint:y,hoveredStartElement:U,hoveredEndElement:x,...v})??[])),t,null,null),k=[];if(o)for(let P=0;P<o.index;P++)k.push(D(e.x+e.points[P][0],e.y+e.points[P][1]));if(E.forEach(P=>{k.push(D(e.x+(o?o.end[0]:0)+P[0],e.y+(o?o.end[1]:0)+P[1]))}),a)for(let P=a.index;P<e.points.length;P++)k.push(D(e.x+e.points[P][0],e.y+e.points[P][1]));let M=((a==null?void 0:a.index)??e.points.length)-((o==null?void 0:o.index)??0)-1,S=t.map(P=>P.index>s?{...P,index:P.index-M+(E.length-1)}:P),A=k.flatMap((P,_)=>{let O=k[_-1],V=k[_+1];if(O&&V){let j=Tb(P,O),F=Tb(V,P);if(vr(j,F))return S.forEach(z=>{z.index>_&&(z.index-=1)}),[];if(vr(j,Gee(F)))return S.forEach(z=>{z.index>_&&(z.index+=1)}),[P,P]}return[P]});return Ju(A,S,!1,!1)},wje=(e,t,n,r,i,s)=>{var M,S;let o=t.map((A,I)=>e.fixedSegments==null||e.fixedSegments[I]===void 0||e.fixedSegments[I].index!==A.index||(A.start[0]!==e.fixedSegments[I].start[0]&&A.end[0]!==e.fixedSegments[I].end[0])!=(A.start[1]!==e.fixedSegments[I].start[1]&&A.end[1]!==e.fixedSegments[I].end[1])?I:null).filter(A=>A!==null).shift();if(o==null)return{points:e.points};let a=((M=e.fixedSegments)==null?void 0:M.findIndex(A=>A.index===1))??-1,l=((S=e.fixedSegments)==null?void 0:S.findIndex(A=>A.index===e.points.length-1))??-1,f=cn(t[o].start,t[o].end),c=f<yn+5;if(a===-1&&t[o].index===1&&i){let A=Of(n),I=(A?vr(n,xr):vr(n,Ci))?c?f/2:yn:c?-f/2:-yn;t[o].start=D(t[o].start[0]+(A?I:0),t[o].start[1]+(A?0:I))}if(l===-1&&t[o].index===e.points.length-1&&s){let A=Of(r),I=(A?vr(r,xr):vr(r,Ci))?c?f/2:yn:c?-f/2:-yn;t[o].end=D(t[o].end[0]+(A?I:0),t[o].end[1]+(A?0:I))}let d=t.map(A=>({...A,start:D(e.x+A.start[0],e.y+A.start[1]),end:D(e.x+A.end[0],e.y+A.end[1])})),u=e.points.map((A,I)=>D(e.x+A[0],e.y+A[1])),h=d[o].index-1,g=d[o].index,y=d[o].start,U=d[o].end,x=u[h-1]&&!vl(u[h],u[h-1])?Rf(u[h-1],u[h]):void 0,v=u[g+1]&&!vl(u[g],u[g+1])?Rf(u[g+1],u[g]):void 0;if(x!==void 0){let A=x?1:0;u[h-1][A]=y[A]}if(u[h]=y,u[g]=U,v!==void 0){let A=v?1:0;u[g+1][A]=U[A]}let E=d.findIndex(A=>A.index===h);if(E!==-1){let A=Rf(d[E].end,d[E].start)?1:0;d[E].start[A]=y[A],d[E].end=y}let k=d.findIndex(A=>A.index===g+1);if(k!==-1){let A=Rf(d[k].end,d[k].start)?1:0;d[k].end[A]=U[A],d[k].start=U}if(a===-1&&h===0){let A=i?Of(n):Rf(u[1],u[0]);u.unshift(D(A?y[0]:e.x+e.points[0][0],A?e.y+e.points[0][1]:y[1])),i&&u.unshift(D(e.x+e.points[0][0],e.y+e.points[0][1]));for(let I of d)I.index+=i?2:1}if(l===-1&&g===e.points.length-1){let A=Of(r);u.push(D(A?U[0]:e.x+e.points[e.points.length-1][0],A?e.y+e.points[e.points.length-1][1]:U[1])),s&&u.push(D(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return Ju(u,d.map(A=>({...A,start:D(A.start[0]-e.x,A.start[1]-e.y),end:D(A.end[0]-e.x,A.end[1]-e.y)})),!1,!1)},vje=(e,t,n,r,i,s,o,a,l)=>{let f=e.startIsSpecial??null,c=e.endIsSpecial??null,d=t.map((U,x)=>x===0||x===t.length-1?D(e.x+U[0],e.y+U[1]):D(e.x+e.points[x][0],e.y+e.points[x][1])),u=n.map(U=>({...U,start:D(e.x+(U.start[0]-t[0][0]),e.y+(U.start[1]-t[0][1])),end:D(e.x+(U.end[0]-t[0][0]),e.y+(U.end[1]-t[0][1]))})),h=[],g=2+(f?1:0),y=2+(c?1:0);for(;h.length+g<d.length-y;)h.push(d[h.length+g]);{let U=d[f?2:1],x=d[f?3:2],v=Of(r),E=Of(v1(et(U,x)));if(a&&v===E){let k=v?vr(r,xr):vr(r,Ci);if(h.unshift(D(E?s[0]+(k?yn:-yn):x[0],E?x[1]:s[1]+(k?yn:-yn))),h.unshift(D(v?s[0]+(k?yn:-yn):s[0],v?s[1]:s[1]+(k?yn:-yn))),!f){f=!0;for(let M of u)M.index>1&&(M.index+=1)}}else if(h.unshift(D(E?s[0]:U[0],E?U[1]:s[1])),f){f=!1;for(let k of u)k.index>1&&(k.index-=1)}h.unshift(s)}{let U=d[d.length-(c?3:2)],x=d[d.length-(c?4:3)],v=Of(i),E=Rf(x,U);if(l&&v===E){let k=v?vr(i,xr):vr(i,Ci);h.push(D(E?o[0]+(k?yn:-yn):x[0],E?x[1]:o[1]+(k?yn:-yn))),h.push(D(v?o[0]+(k?yn:-yn):o[0],v?o[1]:o[1]+(k?yn:-yn))),c||(c=!0)}else h.push(D(E?o[0]:U[0],E?U[1]:o[1])),c&&(c=!1)}return h.push(o),Ju(h,u.map(({index:U})=>({index:U,start:h[U-1],end:h[U]})).map(U=>({...U,start:D(U.start[0]-s[0],U.start[1]-s[1]),end:D(U.end[0]-s[0],U.end[1]-s[1])})),f,c)},In=1e6,ON=(e,t,n,r)=>{var x,v,E,k,M,S,A,I,R,P,_,O,V,j,F,z,H,G,W,B,X,q,Y,oe,ge;if(e.points.length<2)return{points:n.points??e.points};(e.x<-In||e.x>In||e.y<-In||e.y>In||e.x+(((E=(v=n==null?void 0:n.points)==null?void 0:v[((x=n==null?void 0:n.points)==null?void 0:x.length)-1])==null?void 0:E[0])??0)<-In||e.x+(((S=(M=n==null?void 0:n.points)==null?void 0:M[((k=n==null?void 0:n.points)==null?void 0:k.length)-1])==null?void 0:S[0])??0)>In||e.y+(((R=(I=n==null?void 0:n.points)==null?void 0:I[((A=n==null?void 0:n.points)==null?void 0:A.length)-1])==null?void 0:R[1])??0)<-In||e.y+(((O=(_=n==null?void 0:n.points)==null?void 0:_[((P=n==null?void 0:n.points)==null?void 0:P.length)-1])==null?void 0:O[1])??0)>In||e.x+(((F=(j=e==null?void 0:e.points)==null?void 0:j[((V=e==null?void 0:e.points)==null?void 0:V.length)-1])==null?void 0:F[0])??0)<-In||e.x+(((G=(H=e==null?void 0:e.points)==null?void 0:H[((z=e==null?void 0:e.points)==null?void 0:z.length)-1])==null?void 0:G[0])??0)>In||e.y+(((X=(B=e==null?void 0:e.points)==null?void 0:B[((W=e==null?void 0:e.points)==null?void 0:W.length)-1])==null?void 0:X[1])??0)<-In||e.y+(((oe=(Y=e==null?void 0:e.points)==null?void 0:Y[((q=e==null?void 0:e.points)==null?void 0:q.length)-1])==null?void 0:oe[1])??0)>In)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=Lt(e.x,-In,In),e.y=Lt(e.y,-In,In),n.points&&(n.points=n.points.map(([he,ce])=>D(Lt(he,-In,In),Lt(ce,-In,In))));let i=n.points?n.points&&n.points.length===2?e.points.map((he,ce)=>ce===0?n.points[0]:ce===e.points.length-1?n.points[1]:he):n.points.slice():e.points.slice(),s=typeof n.startBinding<"u"?n.startBinding:e.startBinding,o=typeof n.endBinding<"u"?n.endBinding:e.endBinding,a=s&&Gg(s.elementId,t),l=o&&Gg(o.elementId,t);if(t.size===0&&$N(i)||(a==null?void 0:a.id)!==(s==null?void 0:s.elementId)||(l==null?void 0:l.id)!==(o==null?void 0:o.elementId))return Ju(i.map(he=>D(e.x+he[0],e.y+he[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);let{startHeading:f,endHeading:c,startGlobalPoint:d,endGlobalPoint:u,hoveredStartElement:h,hoveredEndElement:g,...y}=jN({x:e.x,y:e.y,startBinding:s,endBinding:o,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,i,a,l,r),U=n.fixedSegments??e.fixedSegments??[];return!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?Uje(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((he,ce)=>vl(he,e.points[ce]??D(1/0,1/0)))?{}:U.length===0?Ju(FN(zN(BN(e,{startHeading:f,endHeading:c,startGlobalPoint:d,endGlobalPoint:u,hoveredStartElement:h,hoveredEndElement:g,...y})??[])),U,null,null):(((ge=e.fixedSegments)==null?void 0:ge.length)??0)>U.length?xje(e,U,t):n.points?n.points&&n.fixedSegments?n:vje(e,i,U,f,c,d,u,h,g):wje(e,U,f,c,h,g)},jN=(e,t,n,r,i,s)=>{var A,I;let o=O4(n[0],Fi(e.x,e.y)),a=O4(n[n.length-1],Fi(e.x,e.y)),l=r,f=i;if(s!=null&&s.isDragging){let R=Array.from(t.values());l=Z$(o,t,R,s==null?void 0:s.zoom)||r,f=Z$(a,t,R,s==null?void 0:s.zoom)||i}let c=K$({...e,elbowed:!0,points:n},"start",(A=e.startBinding)==null?void 0:A.fixedPoint,o,r,l,s==null?void 0:s.isDragging),d=K$({...e,elbowed:!0,points:n},"end",(I=e.endBinding)==null?void 0:I.fixedPoint,a,i,f,s==null?void 0:s.isDragging),u=Y$(c,d,t,l,o),h=Y$(d,c,t,f,a),g=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],y=[d[0]-2,d[1]-2,d[0]+2,d[1]+2],U=l?ac(l,Vd(u,e.startArrowhead?Rn*6:Rn*2,1)):g,x=f?ac(f,Vd(h,e.endArrowhead?Rn*6:Rn*2,1)):y,v=Fg(c,f?ac(f,Vd(h,yn,yn)):y)||Fg(d,l?ac(l,Vd(u,yn,yn)):g),E=Vte(v?[g,y]:[U,x]),k=Sje(v?g:U,v?y:x,E,v?Vd(u,!l&&!f?0:yn,0):Vd(u,!l&&!f?0:yn-(e.startArrowhead?Rn*6:Rn*2),yn),v?Vd(h,!l&&!f?0:yn,0):Vd(h,!l&&!f?0:yn-(e.endArrowhead?Rn*6:Rn*2),yn),v,l&&ac(l),f&&ac(f)),M=X$(k[0],u,c),S=X$(k[1],h,d);return{dynamicAABBs:k,startDonglePosition:M,startGlobalPoint:c,startHeading:u,endDonglePosition:S,endGlobalPoint:d,endHeading:h,commonBounds:E,hoveredStartElement:l,hoveredEndElement:f,boundsOverlap:v,startElementBounds:U,endElementBounds:x}},BN=(e,t)=>{let{dynamicAABBs:n,startDonglePosition:r,startGlobalPoint:i,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:f,hoveredEndElement:c}=t,d=Cje(n,r||i,s,o||a,l,f),u=r&&XU(r,d),h=o&&XU(o,d),g=XU(a,d);g&&c&&(g.closed=!0);let y=XU(i,d);y&&e.startBinding&&(y.closed=!0);let U=u&&h&&(Fg(u.pos,n[1])||Fg(h.pos,n[0])),x=Eje(u||y,h||g,d,s||xr,l||xr,U?[]:n);if(x){let v=x.map(E=>[E.pos[0],E.pos[1]]);return u&&v.unshift(i),h&&v.push(a),v}return null},Vd=(e,t,n)=>{switch(e){case so:return[t,n,n,n];case xr:return[n,t,n,n];case Ci:return[n,n,t,n]}return[n,n,n,t]},Eje=(e,t,n,r,i,s)=>{let o=cS(e.pos,t.pos),a=new yje(l=>l.f);for(a.push(e);a.size()>0;){let l=a.pop();if(!l||l.closed)continue;if(l===t)return kje(e,l);l.closed=!0;let f=Mje(l.addr,n);for(let c=0;c<4;c++){let d=f[c];if(!d||d.closed)continue;let u=cf(d.pos,l.pos,.5);if(qMe(...s.map(E=>Fg(u,E))))continue;let h=Tje(c),g=l.parent?v1(et(l.pos,l.parent.pos)):r,y=Gee(g);if(vr(y,h)||q$(e.addr,d.addr)&&vr(h,r)||q$(t.addr,d.addr)&&vr(h,i))continue;let U=g!==h,x=l.g+cS(d.pos,l.pos)+(U?Math.pow(o,3):0),v=d.visited;if(!v||x<d.g){let E=Aje(d,t,h,i);d.visited=!0,d.parent=l,d.h=cS(t.pos,d.pos)+E*Math.pow(o,2),d.g=x,d.f=d.g+d.h,v?a.rescoreElement(d):a.push(d)}}}return null},kje=(e,t)=>{let n=t,r=[];for(;n.parent;)r.unshift(n),n=n.parent;return r.unshift(e),r},cS=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),Sje=(e,t,n,r,i,s,o,a)=>{let l=o??e,f=a??t,[c,d,u,h]=r??[0,0,0,0],[g,y,U,x]=i??[0,0,0,0],v=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+f[2])/2,e[0]-h):(l[0]+f[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+f[3])/2,e[1]-c):(l[1]+f[3])/2:e[1]>t[1]?e[1]-c:n[1]-c,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+f[0])/2,e[2]+d):(l[2]+f[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+f[1])/2,e[3]+u):(l[3]+f[1])/2:e[3]<t[3]?e[3]+u:n[3]+u],E=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((f[0]+l[2])/2,t[0]-x):(f[0]+l[2])/2:t[0]>e[0]?t[0]-x:n[0]-x,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((f[1]+l[3])/2,t[1]-g):(f[1]+l[3])/2:t[1]>e[1]?t[1]-g:n[1]-g,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((f[2]+l[0])/2,t[2]+y):(f[2]+l[0])/2:t[2]<e[2]?t[2]+y:n[2]+y,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((f[3]+l[1])/2,t[3]+U):(f[3]+l[1])/2:t[3]<e[3]?t[3]+U:n[3]+U],k=Vte([v,E]);if(!s&&v[2]-v[0]+E[2]-E[0]>k[2]-k[0]+1e-11&&v[3]-v[1]+E[3]-E[1]>k[3]-k[1]+1e-11){let[M,S]=[(E[0]+E[2])/2,(E[1]+E[3])/2];if(t[0]>e[2]&&e[1]>t[3]){let A=v[2]+(E[0]-v[2])/2,I=E[3]+(v[1]-E[3])/2;return li(Fi(e[2]-M,e[1]-S),Fi(e[0]-M,e[3]-S))>0?[[v[0],v[1],A,v[3]],[A,E[1],E[2],E[3]]]:[[v[0],I,v[2],v[3]],[E[0],E[1],E[2],I]]}else if(e[2]<t[0]&&e[3]<t[1]){let A=v[2]+(E[0]-v[2])/2,I=v[3]+(E[1]-v[3])/2;return li(Fi(e[0]-M,e[1]-S),Fi(e[2]-M,e[3]-S))>0?[[v[0],v[1],v[2],I],[E[0],I,E[2],E[3]]]:[[v[0],v[1],A,v[3]],[A,E[1],E[2],E[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){let A=E[2]+(v[0]-E[2])/2,I=v[3]+(E[1]-v[3])/2;return li(Fi(e[2]-M,e[1]-S),Fi(e[0]-M,e[3]-S))>0?[[A,v[1],v[2],v[3]],[E[0],E[1],A,E[3]]]:[[v[0],v[1],v[2],I],[E[0],I,E[2],E[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){let A=E[2]+(v[0]-E[2])/2,I=E[3]+(v[1]-E[3])/2;return li(Fi(e[0]-M,e[1]-S),Fi(e[2]-M,e[3]-S))>0?[[A,v[1],v[2],v[3]],[E[0],E[1],A,E[3]]]:[[v[0],I,v[2],v[3]],[E[0],E[1],E[2],I]]}}return[v,E]},Cje=(e,t,n,r,i,s)=>{let o=new Set,a=new Set;n===io||n===xr?a.add(t[1]):o.add(t[0]),i===io||i===xr?a.add(r[1]):o.add(r[0]),e.forEach(c=>{o.add(c[0]),o.add(c[2]),a.add(c[1]),a.add(c[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);let l=Array.from(a).sort((c,d)=>c-d),f=Array.from(o).sort((c,d)=>c-d);return{row:l.length,col:f.length,data:l.flatMap((c,d)=>f.map((u,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[u,c]})))}},X$=(e,t,n)=>{switch(t){case so:return D(n[0],e[1]);case xr:return D(e[2],n[1]);case Ci:return D(n[0],e[3])}return D(e[0],n[1])},Aje=(e,t,n,r)=>{if(r===xr)switch(n){case xr:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case so:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ci:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case io:return e.pos[1]===t.pos[1]?4:2}else if(r===io)switch(n){case xr:return e.pos[1]===t.pos[1]?4:2;case so:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case Ci:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case io:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(r===so)switch(n){case xr:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case so:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case Ci:return e.pos[0]===t.pos[0]?4:2;case io:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(r===Ci)switch(n){case xr:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case so:return e.pos[0]===t.pos[0]?4:2;case Ci:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case io:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},Mje=([e,t],n)=>[Z5([e,t-1],n),Z5([e+1,t],n),Z5([e,t+1],n),Z5([e-1,t],n)],Z5=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,XU=(e,t)=>{for(let n=0;n<t.col;n++)for(let r=0;r<t.row;r++){let i=Z5([n,r],t);if(i&&e[0]===i.pos[0]&&e[1]===i.pos[1])return i}return null},Vte=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],Gg=(e,t)=>{let n=t.get(e);return n&&El(n)?n:null},Ju=(e,t,n,r)=>{let i=e[0][0],s=e[0][1],o=e.map(a=>O4(a,wr(et(e[0]),-1)));return(i<-In||i>In||s<-In||s>In||i+o[o.length-1][0]<-In||s+o[o.length-1][0]>In||i+o[o.length-1][1]<-In||s+o[o.length-1][1]>In)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:i,y:s,points:o,...$g(o)}),o=o.map(([a,l])=>D(Lt(a,-1e6,1e6),Lt(l,-1e6,1e6))),{points:o,x:Lt(i,-1e6,1e6),y:Lt(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...$g(o),startIsSpecial:n,endIsSpecial:r}},FN=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,r)=>{if(r===0||r===e.length-1)return!0;let i=e[r+1],s=Math.abs(n[1]-i[1])<Math.abs(n[0]-i[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},zN=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;let r=e[n-1];return cn(r,t)>LN}):e,Tje=e=>{switch(e){case 0:return so;case 1:return xr;case 2:return Ci}return io},K$=(e,t,n,r,i,s,o)=>{if(o){if(s){let a=Ib(e,s,t);return tOe(s,a)}return r}if(i){let a=fM(n||[0,0],i);return Math.abs(Dw(i,a)-Rn)>.01?Ib(e,i,t):a}return r},Y$=(e,t,n,r,i)=>qLe(e,t,r,r&&ac(r,Array(4).fill(Dw(r,e))),n,i),Z$=(e,t,n,r)=>hl(dl(e),n,t,r,!0,!0),q$=(e,t)=>e[0]===t[0]&&e[1]===t[1],$N=(e,t=LN)=>e.slice(1).map((n,r)=>Math.abs(n[0]-e[r][0])<t||Math.abs(n[1]-e[r][1])<t).every(Boolean),Ije={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},Nje=e=>Object.keys(sr).includes(e)?sr[e]:d0,Sp=(e,t)=>{if(!t)return null;let n=t.focus||0;return Ge(e)?z4(t)?{...t,focus:n,fixedPoint:Bw(t.fixedPoint??[0,0])}:null:{...t,focus:n}},Wd=(e,t)=>{let n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||Ta(),fillStyle:e.fillStyle||br.fillStyle,strokeWidth:e.strokeWidth||br.strokeWidth,strokeStyle:e.strokeStyle??br.strokeStyle,roughness:e.roughness??br.roughness,opacity:e.opacity==null?br.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||br.strokeColor,backgroundColor:e.backgroundColor||br.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:l6(e.type)?ei.LEGACY:ei.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??a6(),link:e.link?Lo(e.link):null,locked:e.locked??!1};return("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData),{...e,...n,...one(n),...t}},Rje=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){let[c,d]=e.font.split(" ");t=parseFloat(c),n=Nje(d)}let r=typeof e.text=="string"&&e.text||"",i=e.lineHeight||(e.height?rTe(e):w1(e.fontFamily));return e=Wd(e,{fontSize:t,fontFamily:n,text:r,textAlign:e.textAlign||Ay,verticalAlign:e.verticalAlign||I4,containerId:e.containerId??null,originalText:e.originalText||r,autoResize:e.autoResize??!0,lineHeight:i}),!r&&!e.isDeleted&&(e={...e,originalText:r,isDeleted:!0},e=Kw(e)),e;case"freedraw":return Wd(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return Wd(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":let{startArrowhead:s=null,endArrowhead:o=null}=e,a=e.x,l=e.y,f=!Array.isArray(e.points)||e.points.length<2?[D(0,0),D(e.width,e.height)]:e.points;return(f[0][0]!==0||f[0][1]!==0)&&({points:f,x:a,y:l}=We.getNormalizedPoints(e)),Wd(e,{type:e.type==="draw"?"line":e.type,startBinding:Sp(e,e.startBinding),endBinding:Sp(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:f,x:a,y:l,...$g(f)});case"arrow":{let{startArrowhead:c=null,endArrowhead:d="arrow"}=e,u=e.x,h=e.y,g=!Array.isArray(e.points)||e.points.length<2?[D(0,0),D(e.width,e.height)]:e.points;(g[0][0]!==0||g[0][1]!==0)&&({points:g,x:u,y:h}=We.getNormalizedPoints(e));let y={type:e.type,startBinding:Sp(e,e.startBinding),endBinding:Sp(e,e.endBinding),lastCommittedPoint:null,startArrowhead:c,endArrowhead:d,points:g,x:u,y:h,elbowed:e.elbowed,...$g(g)};return Ge(e)?Wd(e,{...y,elbowed:!0,startBinding:Sp(e,e.startBinding),endBinding:Sp(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):Wd(e,y)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return Wd(e,{});case"magicframe":case"frame":return Wd(e,{name:e.name??null})}return null},_je=(e,t)=>{if(e.boundElements){let n=e.boundElements.slice(),r=new Set;e.boundElements=n.reduce((i,s)=>{let o=t.get(s.id);if(o&&!r.has(s.id)){if(r.add(s.id),o.isDeleted)return i;i.push(s),Ve(o)&&!o.containerId&&(o.containerId=e.id)}return i},[])}},Pje=(e,t)=>{let n=e.containerId?t.get(e.containerId):null;if(!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(r=>r.id===e.id)){let r=(n.boundElements||(n.boundElements=[])).slice();r.push({type:"text",id:e.id}),n.boundElements=r}},Dje=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},HN=(e,t,n)=>{let r=new Set,i=t?mt(t):null,s=Jf((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!Kg(l)){let f=Rje(l);if(f){let c=i==null?void 0:i.get(l.id);c&&c.version>f.version&&(f=Kw(f,c.version)),r.has(f.id)&&(f={...f,id:Ta()}),r.add(f.id),a.push(f)}}return a},[]));if(!(n!=null&&n.repairBindings))return s;let o=mt(s);for(let a of s)a.frameId&&Dje(a,o),Ve(a)&&a.containerId?Pje(a,o):a.boundElements&&_je(a,o),n.refreshDimensions&&Ve(a)&&Object.assign(a,Ute(a,Ni(a,o),o)),xt(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!Tt(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!Tt(a))&&(a.endBinding=null));return s.map(a=>{if(Ge(a)&&a.startBinding==null&&a.endBinding==null&&!$N(a.points))return{...a,...ON(a,o,{points:[D(0,0),a.points[a.points.length-1]]}),index:a.index};if(Ge(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,f])=>Math.abs(l)>1e6||Math.abs(f)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);let l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[D(0,0),D(0,-10),D(l.width/2+5,-10),D(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},Lje=(e,t,n)=>{let r=t[e];return r!==void 0?r:n[e]},Q$={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??Lje("defaultSidebarDockedPreference",e,t)]},Oje=(e,t)=>{var i;e=e||{};let n=Ac(),r={};for(let s of Object.keys(Q$))if(s in e){let[o,a]=Q$[s](e,n);r[o]=a}for(let[s,o]of Object.entries(n)){let a=e[s],l=t?t[s]:void 0;r[s]=a!==void 0?a:l!==void 0?l:o}return{...r,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...jr(n,r.activeTool.type&&Ije[r.activeTool.type]?r.activeTool:{type:"selection"}),lastActiveTool:null,locked:r.activeTool.locked??!1},zoom:{value:jf(E2(e.zoom)?e.zoom:((i=e.zoom)==null?void 0:i.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:gl.name}:r.openSidebar,gridSize:cOe(E2(e.gridSize)?e.gridSize:R4),gridStep:ite(E2(e.gridStep)?e.gridStep:IJ),editingFrame:null}},Ww=(e,t,n,r)=>({elements:HN(e==null?void 0:e.elements,n,r),appState:Oje(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),J$=e=>{let t=HN(Pn(e.elements),null);return t.length?{...e,elements:t}:null},VN=(e=[],t)=>{let n=[];for(let r of e)if(Array.isArray(r)){let i=J$({status:t,elements:r,id:Ta(),created:Date.now()});i&&n.push(i)}else{let i=r,s=J$({...i,id:i.id||Ta(),status:i.status||t,created:i.created||Date.now()});s&&n.push(s)}return n},tl=32,Nn=12,Gu=256,Wte=50,Z0="NOT_SPREADSHEET",Lb="VALID_SPREADSHEET",q5=e=>{let t=/^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},fS=(e,t)=>e.slice(1).every(n=>q5(n[t])!==null),eH=e=>{let t=e[0].length;if(t>2)return{type:Z0,reason:"More than 2 columns"};if(t===1){if(!fS(e,0))return{type:Z0,reason:"Value is not numeric"};let l=q5(e[0][0])===null,f=(l?e.slice(1):e).map(c=>q5(c[0]));return f.length<2?{type:Z0,reason:"Less than two rows"}:{type:Lb,spreadsheet:{title:l?e[0][0]:null,labels:null,values:f}}}let n=fS(e,0),r=fS(e,1);if(!n&&!r)return{type:Z0,reason:"Value is not numeric"};let[i,s]=r?[0,1]:[1,0],o=q5(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:Z0,reason:"Less than 2 rows"}:{type:Lb,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[i]),values:a.map(l=>q5(l[s]))}}},jje=e=>{let t=[];for(let n=0;n<e[0].length;n++){let r=[];for(let i=0;i<e.length;i++)r.push(e[i][n]);t.push(r)}return t},Bje=e=>{let t=e.trim().split(`
`).map(i=>i.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(i=>i.trim().split(","))),t.length===0)return{type:Z0,reason:"No values"};let n=t[0].length;if(!t.every(i=>i.length===n))return{type:Z0,reason:"All rows don't have same number of columns"};let r=eH(t);if(r.type!==Lb){let i=eH(jje(t));if(i.type===Lb)return i}return r},t9=zAe(jAe),ka={fillStyle:"hachure",fontFamily:d0,fontSize:ld,opacity:100,roughness:1,strokeColor:Pt.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:Do.MIDDLE,locked:!1},Gte=e=>{let t=(tl+Nn)*e.values.length+Nn,n=Gu+Nn*2;return{chartWidth:t,chartHeight:n}},Fje=(e,t,n,r,i)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>Bo({groupIds:[r],backgroundColor:i,...ka,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(tl+Nn)+Nn*2,y:n+Nn/2,width:tl,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},zje=(e,t,n,r,i)=>{let s=Bo({groupIds:[r],backgroundColor:i,...ka,x:t-Nn,y:n-Nn,text:"0",textAlign:"right"}),o=Bo({groupIds:[r],backgroundColor:i,...ka,x:t-Nn,y:n-Gu-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},$je=(e,t,n,r,i)=>{let{chartWidth:s,chartHeight:o}=Gte(e),a=Kh({backgroundColor:i,groupIds:[r],...ka,type:"line",x:t,y:n,width:s,points:[D(0,0),D(s,0)]}),l=Kh({backgroundColor:i,groupIds:[r],...ka,type:"line",x:t,y:n,height:o,points:[D(0,0),D(0,-o)]}),f=Kh({backgroundColor:i,groupIds:[r],...ka,type:"line",x:t,y:n-Gu-Nn,strokeStyle:"dotted",width:s,opacity:Wte,points:[D(0,0),D(s,0)]});return[a,l,f]},Xte=(e,t,n,r,i,s)=>{let{chartWidth:o,chartHeight:a}=Gte(e),l=e.title?Bo({backgroundColor:i,groupIds:[r],...ka,text:e.title,x:t+o/2,y:n-Gu-Nn*2-ld,roundness:null,textAlign:"center"}):null,f=s?Ic({backgroundColor:i,groupIds:[r],...ka,type:"rectangle",x:t,y:n-a,width:o,height:a,strokeColor:Pt.black,fillStyle:"solid",opacity:6}):null;return[...f?[f]:[],...l?[l]:[],...Fje(e,t,n,r,i),...zje(e,t,n,r,i),...$je(e,t,n,r,i)]},Hje=(e,t,n)=>{let r=Math.max(...e.values),i=Ta(),s=t9[Math.floor(Math.random()*t9.length)];return[...e.values.map((o,a)=>{let l=o/r*Gu;return Ic({backgroundColor:s,groupIds:[i],...ka,type:"rectangle",x:t+a*(tl+Nn)+Nn,y:n-l-Nn,width:tl,height:l})}),...Xte(e,t,n,i,s,At.DEV)]},Vje=(e,t,n)=>{let r=Math.max(...e.values),i=Ta(),s=t9[Math.floor(Math.random()*t9.length)],o=0,a=[];for(let y of e.values){let U=o*(tl+Nn),x=-(y/r)*Gu;a.push([U,x]),o++}let l=Math.max(...a.map(y=>y[0])),f=Math.max(...a.map(y=>y[1])),c=Math.min(...a.map(y=>y[0])),d=Math.min(...a.map(y=>y[1])),u=Kh({backgroundColor:s,groupIds:[i],...ka,type:"line",x:t+Nn+tl/2,y:n-Nn,height:f-d,width:l-c,strokeWidth:2,points:a}),h=e.values.map((y,U)=>{let x=U*(tl+Nn)+Nn/2,v=-(y/r)*Gu+Nn/2;return Ic({backgroundColor:s,groupIds:[i],...ka,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+x+tl/2,y:n+v-Nn*2,width:Nn,height:Nn})}),g=e.values.map((y,U)=>{let x=U*(tl+Nn)+Nn/2,v=y/r*Gu+Nn/2+Nn;return Kh({backgroundColor:s,groupIds:[i],...ka,type:"line",x:t+x+tl/2+Nn/2,y:n-v,height:v,strokeStyle:"dotted",opacity:Wte,points:[D(0,0),D(0,v)]})});return[...Xte(e,t,n,i,s,At.DEV),u,...g,...h]},Wje=(e,t,n,r)=>e==="line"?Vje(t,n,r):Hje(t,n,r),WN="clipboard"in navigator&&"writeText"in navigator.clipboard,GN="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,Gje=e=>!!([Ea.excalidraw,Ea.excalidrawClipboard,Ea.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),Xje=({types:e,files:t})=>{var r,i,s,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(let[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((r=n.clipboardData)==null||r.setData(a,l),((i=n.clipboardData)==null?void 0:i.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(f){throw new Error(f.message)}}if(t){let a=-1;for(let l of t){a++;try{if((s=n.clipboardData)==null||s.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(f){throw new Error(f.message)}}}return n},Kje=({elements:e,files:t})=>{let n=mt(e),r=new Set(e.filter(a=>ht(a))),i=!1,s=e.reduce((a,l)=>(ma(l)&&(i=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});i&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");let o={type:Ea.excalidrawClipboard,elements:e.map(a=>{if(ho(a,n)&&!r.has(ho(a,n))){let l=L1(a);return Ue(l,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},Yje=async(e,t,n)=>{await Dy(Kje({elements:e,files:t}),n)},Zje=e=>{let t=Bje(e);return t.type===Lb?{spreadsheet:t.spreadsheet}:null};function Kte(e){var n;let t=[];for(let r of e.childNodes)if(r.nodeType===3){let i=(n=r.textContent)==null?void 0:n.trim();i&&t.push({type:"text",value:i})}else if(r instanceof HTMLImageElement){let i=r.getAttribute("src");i&&i.startsWith("http")&&t.push({type:"imageUrl",value:i})}else t=t.concat(Kte(r));return t}var qje=e=>{var n;let t=(n=e.clipboardData)==null?void 0:n.getData(ft.html);if(!t)return null;try{let r=new DOMParser().parseFromString(t,ft.html),i=Kte(r.body);if(i.length)return{type:"mixedContent",value:i}}catch(r){console.error(`error in parseHTMLFromPaste: ${r.message}`)}return null},Qje=async()=>{var n,r,i,s;let e={},t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((r=navigator.clipboard)!=null&&r.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);let a=await((i=navigator.clipboard)==null?void 0:i.readText());if(a)return{[ft.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(let o of t)for(let a of o.types)if(WJ(nMe,a))try{if(a===ft.text||a===ft.html)e[a]=await(await o.getType(a)).text();else if(mne(a)){let l=await o.getType(a),f=Q5(l,a,void 0);e[a]=f}else throw new f$(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof f$?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},Jje=async(e,t=!1)=>{var n,r;try{let i=!t&&e&&qje(e);return i?i.value.every(s=>s.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(ft.text))||i.value.map(s=>s.value).join(`
`).trim()}:i:{type:"text",value:(((r=e.clipboardData)==null?void 0:r.getData(ft.text))||"").trim()}}catch{return{type:"text",value:""}}},Yte=async(e,t=!1)=>{let n=await Jje(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{let r=!t&&Zje(n.value);if(r)return r}catch(r){console.error(r)}try{let r=JSON.parse(n.value),i=r.type===Ea.excalidrawClipboardWithAPI;if(Gje(r))return{elements:r.elements,files:r.files,text:t?JSON.stringify(r.elements,null,2):void 0,programmaticAPI:i}}catch{}return{text:n.value}},eBe=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[ft.png]:e})])}catch(t){if(Iy(e))await navigator.clipboard.write([new window.ClipboardItem({[ft.png]:await e})]);else throw t}},Dy=async(e,t)=>{var n,r;if(WN)try{await navigator.clipboard.writeText(e||"");return}catch(i){console.error(i)}try{if(t){if((n=t.clipboardData)==null||n.setData(ft.text,e||""),((r=t.clipboardData)==null?void 0:r.getData(ft.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(i){console.error(i)}if(!tBe(e))throw new Error("Error copying to clipboard.")},tBe=e=>{e||(e=" ");let t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";let r=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${r}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let i=!1;try{n.select(),n.setSelectionRange(0,n.value.length),i=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),i},XN=({elements:e,appState:t,files:n,maxWidthOrHeight:r,getDimensions:i,exportPadding:s,exportingFrame:o})=>{let{elements:a,appState:l}=Ww({elements:e,appState:t},null,null),{exportBackground:f,viewBackgroundColor:c}=l;return Hte(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:f,exportPadding:s,viewBackgroundColor:c,exportingFrame:o},(d,u)=>{let h=document.createElement("canvas");if(r){typeof i=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");let y=Math.max(d,u),U=r<y?r/y:(t==null?void 0:t.exportScale)??1;return h.width=d*U,h.height=u*U,{canvas:h,scale:U}}let g=(i==null?void 0:i(d,u))||{width:d,height:u};return h.width=g.width,h.height=g.height,{canvas:h,scale:g.scale??1}})},Zte=async({elements:e,appState:t=Ac(),files:n={},exportPadding:r,renderEmbeddables:i,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{let{elements:l,appState:f}=Ww({elements:e,appState:t},null,null),c={...f,exportPadding:r};return PN(l,c,n,{exportingFrame:s,renderEmbeddables:i,skipInliningFonts:o,reuseImages:a})},nBe=e=>e.type==="diamond"?[D(e.width/2,0),D(e.width,e.height/2),D(e.width/2,e.height),D(0,e.height/2)]:[D(0,0),D(0+e.width,0),D(0+e.width,e.height),D(0,e.height)],rBe=e=>xt(e)||Aa(e)?e.points:nBe(e),tH=e=>{let t=e.reduce((n,[r,i])=>(n.minY=Math.min(n.minY,i),n.minX=Math.min(n.minX,r),n.maxX=Math.max(n.maxX,r),n.maxY=Math.max(n.maxY,i),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},qte=e=>{let t=rBe(e),{cx:n,cy:r}=tH(t),i=D(n,r),s=t.map(c=>ue(c,i,e.angle)),{minX:o,minY:a,maxX:l,maxY:f}=tH(s);return[o+e.x,a+e.y,l+e.x,f+e.y]},nH=(e,t,n=!1)=>{let r=qte(e),i=t[0]<=r[0]&&t[2]>=r[2]&&t[1]<=r[1]&&t[3]>=r[3];return n?i?!0:r[0]<=t[0]&&r[2]>=t[2]&&r[1]<=t[1]&&r[3]>=t[3]:i},iBe=(e,t)=>{let n=qte(e);return($U(n[0],is(t[0],t[2]))||$U(t[0],is(n[0],n[2])))&&($U(n[1],is(t[1],t[3]))||$U(t[1],is(n[1],n[3])))},sBe=({elements:e,bounds:t,type:n,errorMargin:r=0})=>{var o;YJ(t)&&(t=kl(t,mt(e)));let i=[t[0]-r,t[1]-r,t[2]+r,t[3]+r],s=new Set;for(let a of e)if(!s.has(a.id)&&(n==="overlap"?iBe(a,i):n==="inside"?nH(a,i):nH(a,i,!0))){if(s.add(a.id),a.boundElements)for(let l of a.boundElements)s.add(l.id);Ve(a)&&a.containerId&&s.add(a.containerId),Tt(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}return e.filter(a=>s.has(a.id))};function rH(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function oBe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}var aBe=1e-6;function iH(e,t){let n=et(e[1],e[0]),r=et(t,e[0]),i=li(n,r);return Math.abs(i)<aBe}function dS(e,t){let n=et(e[1],e[0]),r=et(t,e[0]);return li(n,r)<0}function sH(e,t){return iH(e,t[0])||iH(e,t[1])||(dS(e,t[0])?!dS(e,t[1]):dS(e,t[1]))}function lBe(e,t){return oBe(rH(e),rH(t))&&sH(e,t)&&sH(t,e)}var Qte=(e,t,n)=>{let r=mt(e);for(let i of t)if(i.frameId){let s=n.get(i.id),o=n.get(i.frameId);if(s){let a=r.get(s);a&&Ue(a,{frameId:o??i.frameId},!1)}}};function KN(e,t,n){let r=U$(t,n),i=U$(e,n);return r.some(s=>i.some(o=>lBe(s,o)))}var Jte=(e,t,n)=>Xw(eR(e,t,n,!1)).filter(r=>!ht(r)&&!r.frameId||r.frameId===t.id),YN=(e,t,n)=>eR([t],e,n).some(r=>r.id===t.id),Ly=(e,t,n)=>{let[r,i,s,o]=wt(t,n),[a,l,f,c]=mn(e);return r<=a&&i<=l&&s>=f&&o>=c},e0=(e,t,n)=>Ly([e],t,n)||KN(e,t,n)||YN(e,t,n),oH=(e,t,n)=>{let[r,i,s,o]=wt(t,n);return LJ(D(r,i),D(e.x,e.y),D(s,o))},cBe=e=>{let t=new Map;for(let n of e){let r=ht(n)?n.id:n.frameId;r&&!t.has(r)&&t.set(r,Rc(e,r))}return t},Rc=(e,t)=>{let n=[];for(let r of e.values())r.frameId===t&&n.push(r);return n},ZN=e=>e.filter(t=>ht(t)),qN=e=>{let t=mt(ZN(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},Z3=(e,t,n,r)=>{let i=Rc(e,t.id),s=new Set(i),o=new Set([...Jte(e,t,r),...i.filter(u=>YN(u,t,r))]),a=i.filter(u=>!o.has(u)),l=new Set(Array.from(o).flatMap(u=>u.groupIds));for(let u of a)if(!KN(u,t,r))u.groupIds.length===0&&s.delete(u);else if(u.groupIds.length>0)for(let h of u.groupIds)l.add(h);for(let u of a)if(u.groupIds.length>0){let h=!0;for(let g of u.groupIds)l.has(g)&&(h=!1);h&&s.delete(u)}let f=Array.from(o).filter(u=>u.groupIds.length===0);for(let u of f)s.add(u);let c=Array.from(o).filter(u=>u.groupIds.length>0),d=lte(c,n);for(let[u,h]of Object.entries(d))if(h){let g=Vn(e,u);if(Ly(g,t,r))for(let y of g)s.add(y)}return[...s].filter(u=>!(Ve(u)&&u.containerId))},fBe=(e,t,n)=>dBe(Xw(e,Jte(e,t,n)),t,n),dBe=(e,t,n)=>{let r=[],i=new Map;for(let s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>i.get(a)))o=!0;else{let a=new Set(s.groupIds.flatMap(l=>Vn(n,l)));o=!Ly(Array.from(a),t,n)}s.groupIds.forEach(a=>{i.set(a,o)})}o||r.push(s)}return r},ho=(e,t)=>e.frameId&&t.get(e.frameId)||null,uBe=(e,t)=>{let n=new Set,r=mt(e);e=Xw(e);for(let o of e)ht(o)&&o.id!==t.id&&n.add(o.id);let i=new Set,s=[];for(let o of e)if(!(ht(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){let a=o.groupIds.at(-1);if(!i.has(a)){i.add(a);let l=Vn(e,a);if(l.some(f=>e0(f,t,r)))for(let f of l)s.push(f)}}else e0(o,t,r)&&s.push(o);return s},T2=(e,t,n,r)=>{let i=mt(e),s=new Map;for(let f of e.values())f.frameId===n.id&&s.set(f.id,!0);let o=new Set(t.map(f=>f.id)),a=[],l=new Set;for(let f of t)ht(f)&&f.id!==n.id&&l.add(f.id);for(let f of Xw(e,t)){if(ht(f)||f.frameId&&l.has(f.frameId)||f.frameId&&r.selectedElementIds[f.id]&&r.selectedElementIds[f.frameId])continue;s.has(f.id)||a.push(f);let c=Ct(f,i);c&&!o.has(c.id)&&!s.has(c.id)&&a.push(c)}for(let f of a)Ue(f,{frameId:n.id},!1);return e},Gw=(e,t)=>{let n=new Map,r=new Map;for(let i of e)if(i.frameId){n.set(i.id,i);let s=r.get(i.frameId)||[];s.push(i);let o=Ct(i,t);o&&(n.set(o.id,o),s.push(o)),r.set(i.frameId,s)}for(let[,i]of n)Ue(i,{frameId:null},!1)},ene=(e,t)=>{let n=Rc(e,t.id);return Gw(n,mt(e)),e},tne=(e,t,n,r)=>T2(ene(e,n),t,n,r.state).slice(),Xg=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),i=new Set(r);if(t.editingGroupId)for(let a of r)a.groupIds.length===0?i.add(a):a.groupIds.flatMap(l=>Vn(e,l)).forEach(l=>i.add(l));let s=new Set,o=mt(e);return i.forEach(a=>{a.frameId&&!ht(a)&&!n9(a,o,t)&&s.add(a)}),s.size>0&&Gw(s,o),e},Xw=(e,t)=>{let n=new Set,r=t||e;for(let o of r.values()){let a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}let i=new Set;for(let o of n)Vn(e,o).some(a=>ht(a))&&i.add(o);let s=[];for(let o of r.values())i.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},bM=(e,t,n)=>{let r=Ve(e)&&Ni(e,t)||e;return r.frameId&&n.selectedElementIds[r.id]&&n.selectedElementIds[r.frameId]?ho(r,t):n.selectedElementIds[r.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:ho(r,t)},n9=(e,t,n,r)=>{var l;let i=(r==null?void 0:r.targetFrame)??bM(e,t,n);if(!i)return!1;let s=Ve(e)&&Ni(e,t)||e,o=f=>{r!=null&&r.checkedGroups&&s.groupIds.forEach(c=>{var d;(d=r.checkedGroups)==null||d.set(c,f)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[i.id])return!0;if(s.groupIds.length===0)return e0(s,i,t);for(let f of s.groupIds)if((l=r==null?void 0:r.checkedGroups)!=null&&l.has(f))return r.checkedGroups.get(f);let a=new Set(s.groupIds.filter(f=>r!=null&&r.checkedGroups?!r.checkedGroups.has(f):!0).flatMap(f=>Vn(t,f)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){let f=new Set(Mt(t,n));if(n.frameToHighlight!==null)return!0;f.forEach(c=>{a.delete(c)})}for(let f of a)if(ht(f))return o(!1),!1;for(let f of a)if(e0(f,i,t))return o(!0),!0;return!1},aH=(e,t,n,r,i)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;let s=KN(e,t,r)||YN(e,t,r);if(s){for(let o of e.groupIds)i==null||i.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!Ly([e],t,r)){let o=!1;if(n.selectedElementsAreBeingDragged)o=n9(e,r,n,{targetFrame:t,checkedGroups:i});else{o=e.frameId===t.id;for(let a of e.groupIds)i==null||i.set(a,o)}for(let a of e.groupIds)i==null||i.set(a,o);return o}return!1},nne=e=>e.name===null?XJ(e)?"Frame":"AI Frame":e.name,QN=(e,t)=>sBe({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),rne=e=>{let t=mt(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},JN=e=>{let t=new Set;return e.forEach(n=>{ht(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},eR=(e,t,n,r=!0)=>{let[i,s,o,a]=wt(t,n),l=e.filter(f=>{let[c,d,u,h]=kl(f,n),g=ho(f,n);if(g){let[y,U,x,v]=kl(g,n);c=Math.max(y,c),d=Math.max(U,d),u=Math.min(x,u),h=Math.min(v,h)}return f.locked===!1&&f.type!=="selection"&&!Xn(f)&&i<=c&&s<=d&&o>=u&&a>=h});return l=r?JN(l):l,l=l.filter(f=>{let c=ho(f,n);return c?e0(f,c,n):!0}),l},ine=(e,t,n,r)=>{let i=new Set(t.map(s=>s.id));return e.filter(s=>{let o=r9(s,n.width,n.height,n,r);return!i.has(s.id)&&o})},ti=function(){let e=null,t=null,n=null,r=(i,s)=>(n!=null&&i===e&&s.selectedElementIds===t||(n=i.some(o=>s.selectedElementIds[o.id]),e=i,t=s.selectedElementIds),n);return r.clearCache=()=>{e=null,t=null,n=null},r}(),hBe=(e,t,n)=>{let r=Array.from(new Set(Mt(e,t).map(i=>n(i))));return r.length===1?r[0]:null},Mt=(e,t,n)=>{let r=new Set,i=[];for(let s of e.values()){if(t.selectedElementIds[s.id]){i.push(s),r.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&Xn(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){i.push(s),r.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){let s=[];return i.forEach(o=>{ht(o)&&Rc(e,o.id).forEach(a=>!r.has(a.id)&&s.push(a)),s.push(o)}),s}return i},sne=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:Mt(e,t,{includeBoundTextElement:!0}),an=(e,t)=>Gi(t.selectedElementIds,e)?t.selectedElementIds:e,lH=e=>{let t=new Map,n=[];for(let r of e)r.isDeleted||(n.push(r),t.set(r.id,r));return{elementsMap:t,elements:n}},pBe=Sy(e=>{(At.DEV||At.MODE===lo.TEST||window!=null&&window.DEBUG_FRACTIONAL_INDICES)&&MN(e,{shouldThrow:At.DEV||At.MODE===lo.TEST,includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),mBe=e=>{let t=["includeBoundTextElement","includeElementsInFrames"],n="";for(let r of t)n+=`${r}:${e[r]?"1":"0"}`;return n},cH=e=>typeof e=="string",yM=class q3{constructor(){Q(this,"callbacks",new Set),Q(this,"nonDeletedElements",[]),Q(this,"nonDeletedElementsMap",Ca(new Map)),Q(this,"elements",[]),Q(this,"nonDeletedFramesLikes",[]),Q(this,"frames",[]),Q(this,"elementsMap",Ca(new Map)),Q(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map}),Q(this,"sceneNonce"),Q(this,"insertElement",t=>{let n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)}),Q(this,"insertElements",t=>{var r;if(!t.length)return;let n=(r=t[0])!=null&&r.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)}),Q(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null),Q(this,"getElementsFromId",t=>{let n=this.getNonDeletedElementsMap(),r=n.get(t);return r?[r]:Vn(n,t)})}static mapElementToScene(t,n){cH(t)?this.sceneMapById.set(t,n):(this.sceneMapByElement.set(t,n),this.sceneMapById.set(t.id,n))}static getScene(t){return cH(t)?this.sceneMapById.get(t)||null:this.sceneMapByElement.get(t)||null}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){let n=mBe(t),r=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===r&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){let s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();let i=Mt(r,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,i)),i}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){let n=this.getElement(t);return n&&wM(n)?n:null}mapElements(t){let n=!1,r=this.elements.map(i=>{let s=t(i);return s!==i&&(n=!0),s});return n&&this.replaceAllElements(r),n}replaceAllElements(t){let n=t instanceof Array?t:Array.from(t.values()),r=[];pBe(n),this.elements=Jf(n),this.elementsMap.clear(),this.elements.forEach(s=>{ht(s)&&r.push(s),this.elementsMap.set(s.id,s),q3.mapElementToScene(s,this)});let i=lH(this.elements);this.nonDeletedElements=i.elements,this.nonDeletedElementsMap=i.elementsMap,this.frames=r,this.nonDeletedFramesLikes=lH(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Tc();for(let t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),q3.sceneMapById.forEach((t,n)=>{t===this&&q3.sceneMapById.delete(n)}),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let r=[...this.elements.slice(0,n),t,...this.elements.slice(n)];Nc(r,mt([t])),this.replaceAllElements(r)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let r=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];Nc(r,mt(t)),this.replaceAllElements(r)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}};Q(yM,"sceneMapByElement",new WeakMap),Q(yM,"sceneMapById",new Map);var gBe=yM,ed=gBe,Ue=(e,t,n=!0,r)=>{var c,d;let i=!1,{points:s,fixedSegments:o,fileId:a,startBinding:l,endBinding:f}=t;if(Ge(e)&&(Object.keys(t).length===0||typeof s<"u"||typeof o<"u"||typeof l<"u"||typeof f<"u")){let u=Ca(((c=ed.getScene(e))==null?void 0:c.getNonDeletedElementsMap())??new Map);t={...t,angle:0,...ON({...e,x:t.x||e.x,y:t.y||e.y},u,{fixedSegments:o,points:s,startBinding:l,endBinding:f},{isDragging:r==null?void 0:r.isDragging})}}else typeof s<"u"&&(t={...$g(s),...t});for(let u in t){let h=t[u];if(typeof h<"u"){if(e[u]===h&&(typeof h!="object"||h===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){let g=e[u],y=h;if(g[0]===y[0]&&g[1]===y[1])continue}else if(u==="points"){let g=e[u],y=h;if(g.length===y.length){let U=!1,x=g.length;for(;--x;){let v=g[x],E=y[x];if(v[0]!==E[0]||v[1]!==E[1]){U=!0;break}}if(!U)continue}}e[u]=h,i=!0}}return i&&((typeof t.height<"u"||typeof t.width<"u"||typeof a<"u"||typeof s<"u")&&lr.delete(e),e.version++,e.versionNonce=Tc(),e.updated=a6(),n&&((d=ed.getScene(e))==null||d.triggerUpdate())),e},St=(e,t,n=!1)=>{let r=!1;for(let i in t){let s=t[i];if(typeof s<"u"){if(e[i]===s&&(typeof s!="object"||s===null))continue;r=!0}}return!r&&!n?e:{...e,...t,updated:a6(),version:e.version+1,versionNonce:Tc()}},Kw=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Tc(),e.updated=a6(),e),Kg=e=>xt(e)||Aa(e)?e.points.length<2:e.width===0&&e.height===0,r9=(e,t,n,r,i)=>{let[s,o,a,l]=kl(e,i),f=On({clientX:r.offsetLeft,clientY:r.offsetTop},r),c=On({clientX:r.offsetLeft+t,clientY:r.offsetTop+n},r);return f.x<=a&&f.y<=l&&c.x>=s&&c.y>=o},Q3=(e,t,n,r,i,s)=>{let[o,a,l,f]=mn(e,i),c=On({clientX:r.offsetLeft+((s==null?void 0:s.left)||0),clientY:r.offsetTop+((s==null?void 0:s.top)||0)},r),d=On({clientX:r.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:r.offsetTop+n-((s==null?void 0:s.bottom)||0)},r);return o>=c.x&&a>=c.y&&l<=d.x&&f<=d.y},fH=(e,t,n)=>{let r=Math.abs(t),i=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){let s=Math.round(Math.atan(i/r)/qu)*qu;s===0?n=0:s===Math.PI/2?t=0:n=r*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=r*Math.sign(n));return{width:t,height:n}},UM=(e,t,n,r)=>{let i=n-e,s=r-t,o=Math.round(Math.atan(s/i)/qu)*qu;if(o===0)s=0;else if(o===Math.PI/2)i=0;else{let a=Math.tan(o),l=-1,f=t-a*e,c=-1/a,d=-1,u=r-c*n,h=(l*u-d*f)/(a*d-c*l),g=(f*c-u*a)/(a*d-c*l);i=h-e,s=g-t}return{width:i,height:s}},one=e=>{let t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){let n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){let n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},dH={mouse:8,pen:16,touch:28},bBe=16,ane={e:!0,s:!0,n:!0,w:!0},uH={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},uS={e:!0,s:!0,n:!0,w:!0},of=(e,t,n,r,i,s,o)=>{let[a,l]=ue(D(e+n/2,t+r/2),D(i,s),o);return[a-n/2,l-r/2,n,r]},tR=e=>!(e.viewport.isMobile||e.isTouchScreen&&(HAe||MJ)),I2=e=>tR(e)?ane:{},nR=([e,t,n,r,i,s],o,a,l,f={},c=4,d=m1)=>{let u=dH[l],h=u/a.value,g=u/a.value,y=u/a.value,U=u/a.value,x=n-e,v=r-t,E=c/a.value,k=(u-d*2)/(2*a.value),M={nw:f.nw?void 0:of(e-E-y+k,t-E-U+k,h,g,i,s,o),ne:f.ne?void 0:of(n+E-k,t-E-U+k,h,g,i,s,o),sw:f.sw?void 0:of(e-E-y+k,r+E-k,h,g,i,s,o),se:f.se?void 0:of(n+E-k,r+E-k,h,g,i,s,o),rotation:f.rotation?void 0:of(e+x/2-h/2,t-E-U+k-bBe/a.value,h,g,i,s,o)},S=5*dH.mouse/a.value;return Math.abs(x)>S&&(f.n||(M.n=of(e+x/2-h/2,t-E-U+k,h,g,i,s,o)),f.s||(M.s=of(e+x/2-h/2,r+E-k,h,g,i,s,o))),Math.abs(v)>S&&(f.w||(M.w=of(e-E-y+k,t+v/2-g/2,h,g,i,s,o)),f.e||(M.e=of(n+E-k,t+v/2-g/2,h,g,i,s,o))),M},lne=(e,t,n,r="mouse",i=ane)=>{if(e.locked||Ge(e))return{};if(e.type==="freedraw"||xt(e)){if(e.points.length===2){let[,o]=e.points;o[0]===0||o[1]===0?i=uS:o[0]>0&&o[1]<0?i=uH:o[0]>0&&o[1]>0?i=uS:o[0]<0&&o[1]>0?i=uH:o[0]<0&&o[1]<0&&(i=uS)}}else ht(e)&&(i={...i,rotation:!0});let s=xt(e)?m1+8:ln(e)?0:m1;return nR(wt(e,n,!0),e.angle,t,r,i,s,ln(e)?0:void 0)},cne=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;let n=e[0];return Ge(n)?!1:xt(n)?n.points.length>2:!0},xM=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],yBe=(e,t,n,r,i,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;let{rotation:l,...f}=lne(e,s,t,o,I2(a));if(l&&xM(l,r,i))return"rotation";let c=Object.keys(f).filter(d=>{let u=f[d];return u?xM(u,r,i):!1});if(c.length>0)return c[0];if(tR(a)){let[d,u,h,g,y,U]=wt(e,t);if(!(xt(e)&&e.points.length<=2)){let x=ln(e)?0:N4/s.value,v=N4/s.value,E=fne(D(d-x,u-x),D(h+x,g+x),D(y,U),e.angle);for(let[k,M]of Object.entries(E))if(g1(D(r,i),M,v))return k}}return!1},hH=(e,t,n,r,i,s,o,a)=>e.reduce((l,f)=>{if(l)return l;let c=yBe(f,o,t,n,r,i,s,a);return c?{element:f,transformHandleType:c}:null},null),pH=([e,t,n,r],i,s,o,a,l)=>{let f=nR([e,t,n,r,(e+n)/2,(t+r)/2],0,o,a,I2(l)),c=Object.keys(f).find(d=>{let u=f[d];return u&&xM(u,i,s)});if(c)return c;if(tR(l)){let d=(e+n)/2,u=(t+r)/2,h=N4/o.value,g=fne(D(e-h,t-h),D(n+h,r+h),D(d,u),0);for(let[y,U]of Object.entries(g))if(g1(D(i,s),U,h))return y}return!1},hS=["ns","nesw","ew","nwse"],UBe=(e,t)=>{let n=hS.indexOf(e);if(n>=0){let r=Math.round(t/(Math.PI/4));e=hS[(n+r)%hS.length]}return e},mH=e=>{let{element:t,transformHandleType:n}=e,r=t&&Math.sign(t.height)*Math.sign(t.width)===-1,i=null;switch(n){case"n":case"s":i="ns";break;case"w":case"e":i="ew";break;case"nw":case"se":r?i="nesw":i="nwse";break;case"ne":case"sw":r?i="nwse":i="nesw";break;case"rotation":return"grab"}return i&&t&&(i=UBe(i,t.angle)),i?`${i}-resize`:""},fne=([e,t],[n,r],i,s)=>{let o=ue(D(e,t),i,s),a=ue(D(n,t),i,s),l=ue(D(e,r),i,s),f=ue(D(n,r),i,s);return{n:[o,a],e:[a,f],s:[f,l],w:[l,o]}},xBe=(e,t,n,r,i,s,o,a,l,f,c,d)=>{if(n.length===1){let[u]=n;if(t==="rotation")Ge(u)||(wBe(u,r,i,l,f,s),uo(u,r));else{if(Ve(u)&&t)return vBe(e,u,r,t,o,l,f),uo(u,r),!0;if(t){let h=n[0].id,g=r.get(h),y=e.get(h);if(g&&y){let{nextWidth:U,nextHeight:x}=MBe(g,y,r,e,t,l,f,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});Ob(U,x,g,y,r,e,t,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o})}}}return!0}else if(n.length>1){if(t==="rotation")return EBe(e,n,r,i,l,f,s,c,d),!0;if(t){let{nextWidth:u,nextHeight:h,flipByX:g,flipByY:y,originalBoundingBox:U}=TBe(n,e,r,t,l,f,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});return dne(n,r,t,i,e,{shouldResizeFromCenter:o,shouldMaintainAspectRatio:a,flipByX:g,flipByY:y,nextWidth:u,nextHeight:h,originalBoundingBox:U}),!0}}return!1},wBe=(e,t,n,r,i,s)=>{let[o,a,l,f]=wt(e,t),c=(o+l)/2,d=(a+f)/2,u;ht(e)?u=0:(u=5*Math.PI/2+Math.atan2(i-d,r-c),s&&(u=u+qu/2,u=u-u%qu),u=D4(u));let h=qf(e);if(Ue(e,{angle:u}),h){let g=n.getElement(h);g&&!Tt(e)&&Ue(g,{angle:u})}},rR=(e,t,n,r)=>xt(e)||Aa(e)?{points:G4(0,t,G4(1,n,e.points,r),r)}:{},iR=(e,t,n)=>{let r=e.width;if(Xn(e)){let s=Ni(e,t);s&&(r=Qf(s,e))}let i=e.fontSize*(n/r);return i<qI?null:{size:i}},vBe=(e,t,n,r,i,s,o)=>{let[a,l,f,c,d,u]=wt(t,n),[h,g]=ue(D(s,o),D(d,u),-t.angle),y=0,U=0;r!=="e"&&r!=="w"&&(r.includes("e")&&(y=(h-a)/(f-a)),r.includes("w")&&(y=(f-h)/(f-a)),r.includes("n")&&(U=(c-g)/(c-l)),r.includes("s")&&(U=(g-l)/(c-l)));let x=Math.max(y,U);if(x>0){let v=t.width*x,E=t.height*x,k=iR(t,n,v);if(k===null)return;let M=[a,l],S=[f,c],A=[d,u],I=D(a,l);if(["n","w","nw"].includes(r)&&(I=D(S[0]-Math.abs(v),S[1]-Math.abs(E))),r==="ne"){let F=[M[0],S[1]];I=D(F[0],F[1]-Math.abs(E))}if(r==="sw"){let F=[S[0],M[1]];I=D(F[0]-Math.abs(v),F[1])}["s","n"].includes(r)&&(I[0]=A[0]-v/2),["e","w"].includes(r)&&(I[1]=A[1]-E/2),i&&(I[0]=A[0]-Math.abs(v)/2,I[1]=A[1]-Math.abs(E)/2);let R=t.angle,P=ue(I,D(d,u),R),_=D(I[0]+Math.abs(v)/2,I[1]+Math.abs(E)/2),O=ue(_,D(d,u),R);I=ue(P,O,-R);let[V,j]=I;Ue(t,{fontSize:k.size,width:v,height:E,x:V,y:j})}if(r==="e"||r==="w"){let v=e.get(t.id),[E,k,M,S]=Wu(v,v.width,v.height,!0),A=D(E,k),I=D(M,S),R=Ty(A,I),P=ue(D(s,o),R,-v.angle),[_,,O]=Wu(t,t.width,t.height,!0),V=O-_,j=I[0]-A[0],F=oN(kn({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight),z=j/V;r.includes("e")&&(z=(P[0]-A[0])/V),r.includes("w")&&(z=(I[0]-P[0])/V);let H=t.width*z<F?F:t.width*z,G=D1(t.originalText,kn(t),Math.abs(H)),W=hs(G,kn(t),t.lineHeight),B=W.height,[X,q,Y,oe]=Wu(v,H,B,!0),ge=Y-X,he=oe-q,ce=[...A];["n","w","nw"].includes(r)&&(ce=[I[0]-Math.abs(ge),A[1]]);let ie=v.angle,we=ue(ce,R,ie),ke=D(ce[0]+Math.abs(ge)/2,ce[1]+Math.abs(he)/2),Re=ue(ke,R,ie);ce=ue(we,Re,-ie);let Fe={width:Math.abs(H),height:Math.abs(W.height),x:ce[0],y:ce[1],text:G,autoResize:!1};Ue(t,Fe)}},EBe=(e,t,n,r,i,s,o,a,l)=>{var c;let f=5*Math.PI/2+Math.atan2(s-l,i-a);o&&(f+=qu/2,f-=f%qu);for(let d of t)if(!ht(d)){let[u,h,g,y]=wt(d,n),U=(u+g)/2,x=(h+y)/2,v=((c=e.get(d.id))==null?void 0:c.angle)??d.angle,[E,k]=ue(D(U,x),D(a,l),f+v-d.angle);Ge(d)?Ue(d,{points:aOe(d,n)}):Ue(d,{x:d.x+(E-U),y:d.y+(k-x),angle:D4(f+v)},!1),uo(d,n,{simultaneouslyUpdated:t});let M=Ct(d,n);M&&!Tt(d)&&Ue(M,{x:M.x+(E-U),y:M.y+(k-x),angle:D4(f+v)},!1)}r.triggerUpdate()},kBe=(e,t,n,r,i)=>{let[s,o,a,l]=t.length===1?wt(t[0],n):mn(t),f=(s+a)/2,c=(o+l)/2,d=t.length===1?t[0].angle:0;switch([r,i]=ue(D(r,i),D(f,c),-d),e){case"n":return ue(D(r-(s+a)/2,i-o),D(0,0),d);case"s":return ue(D(r-(s+a)/2,i-l),D(0,0),d);case"w":return ue(D(r-s,i-(o+l)/2),D(0,0),d);case"e":return ue(D(r-a,i-(o+l)/2),D(0,0),d);case"nw":return ue(D(r-s,i-o),D(0,0),d);case"ne":return ue(D(r-a,i-o),D(0,0),d);case"sw":return ue(D(r-s,i-l),D(0,0),d);case"se":return ue(D(r-a,i-l),D(0,0),d);default:return[0,0]}},SBe=(e,t)=>{let[,[n,r]]=t.points;return e==="nw"&&(n<0||r<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||r>0)?"end":"origin"},CBe=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},ABe=(e,t,n,r,i,s,o,a,l)=>{let f=CBe(o,a,l),[c,d]=e;switch(f){case"top-left":return{x:c+(t-r)/2+(r-t)/2*Math.cos(s)+(n-i)/2*Math.sin(s),y:d+(n-i)/2+(r-t)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"top-right":return{x:c+(t-r)/2*(Math.cos(s)+1)+(n-i)/2*Math.sin(s),y:d+(n-i)/2+(t-r)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"bottom-left":return{x:c+(t-r)/2*(1-Math.cos(s))+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)+(r-t)/2*Math.sin(s)};case"bottom-right":return{x:c+(t-r)/2*(Math.cos(s)+1)+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)+(t-r)/2*Math.sin(s)};case"center":return{x:c-(r-t)/2,y:d-(i-n)/2};case"east-side":return{x:c+(t-r)/2*(Math.cos(s)+1),y:d+(t-r)/2*Math.sin(s)+(n-i)/2};case"west-side":return{x:c+(t-r)/2*(1-Math.cos(s)),y:d+(r-t)/2*Math.sin(s)+(n-i)/2};case"north-side":return{x:c+(t-r)/2+(n-i)/2*Math.sin(s),y:d+(i-n)/2*(Math.cos(s)-1)};case"south-side":return{x:c+(t-r)/2+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)}}},Ob=(e,t,n,r,i,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:f=!1}={})=>{let c={},d=Ct(n,i);if(d){let y=s.get(d.id);if(y&&(c={fontSize:y.fontSize}),l){let U={...n,width:e,height:t},x=iR(d,i,Qf(U,d));if(x===null)return;c={fontSize:x.size}}else{let U=QJ(kn(d),d.lineHeight),x=JJ(d.fontSize,d.lineHeight);e=Math.max(e,U),t=Math.max(t,x)}}let u=rR(r,e,t,!0),h=D(r.x,r.y);if(xt(r)){let[y,U]=kl(r,s);h=D(y,U)}let g=ABe(h,r.width,r.height,e,t,r.angle,o,l,f);if(xt(r)&&u.points){let y=r.x-h[0],U=r.y-h[1];g.x+=y,g.y+=U;let x=u.points[0][0],v=u.points[0][1];g.x+=x,g.y+=v,u.points=u.points.map(E=>D(E[0]-x,E[1]-v))}if(e<0&&(g.x=g.x+e),t<0&&(g.y=g.y+t),"scale"in n&&"scale"in r&&Ue(n,{scale:[(Math.sign(e)||r.scale[0])*r.scale[0],(Math.sign(t)||r.scale[1])*r.scale[1]]}),Tt(n)&&d&&l){let y=e/n.width*d.fontSize;if(y<qI)return;c.fontSize=y}if(e!==0&&t!==0&&Number.isFinite(g.x)&&Number.isFinite(g.y)){let y={...g,width:Math.abs(e),height:Math.abs(t),...u};Ue(n,y,a),uo(n,i,{newSize:{width:e,height:t}}),d&&c!=null&&Ue(d,{fontSize:c.fontSize}),Py(n,i,o,l)}},MBe=(e,t,n,r,i,s,o,{shouldMaintainAspectRatio:a=!1,shouldResizeFromCenter:l=!1}={})=>{let[f,c,d,u]=Wu(t,t.width,t.height,!0),h=D(f,c),g=D(d,u),y=Ty(h,g),U=ue(D(s,o),y,-t.angle),[x,v,E,k]=Wu(e,e.width,e.height,!0),M=E-x,S=k-v,A=g[0]-h[0],I=g[1]-h[1],R=A/M,P=I/S;i.includes("e")&&(R=(U[0]-h[0])/M),i.includes("s")&&(P=(U[1]-h[1])/S),i.includes("w")&&(R=(g[0]-U[0])/M),i.includes("n")&&(P=(g[1]-U[1])/S);let _=e.width*R,O=e.height*P;if(l&&(_=2*_-t.width,O=2*O-t.height),a){let V=Math.abs(_)/t.width,j=Math.abs(O)/t.height;if(i.length===1&&(O*=V,_*=j),i.length===2){let F=Math.max(V,j);_=t.width*F*Math.sign(_),O=t.height*F*Math.sign(O)}}return{nextWidth:_,nextHeight:O}},TBe=(e,t,n,r,i,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{let l=e.map(V=>t.get(V.id)),f=l.reduce((V,j)=>{if(!xt(j))return V;let F=qf(j);if(!F)return V;let z=t.get(F)??null;return Xn(z)?[...V,{...z,...We.getBoundTextElementPosition(j,z,n)}]:V},[]),c=yl(l.map(V=>V).concat(f)),{minX:d,minY:u,maxX:h,maxY:g,midX:y,midY:U}=c,x=h-d,v=g-u,E={ne:[d,g],se:[d,u],sw:[h,u],nw:[h,g],e:[d,u+v/2],w:[h,u+v/2],n:[d+x/2,g],s:[d+x/2,u]},[k,M]=a?[y,U]:E[r],S=a?2:1,A=Math.max(Math.abs(i-k)/x||0,Math.abs(s-M)/v||0)*S,I=r.includes("e")||r.includes("w")?Math.abs(i-k)*S:x,R=r.includes("n")||r.includes("s")?Math.abs(s-M)*S:v;o&&(I=x*A*Math.sign(i-k),R=v*A*Math.sign(s-M));let P={ne:[i<k,s>M],se:[i<k,s<M],sw:[i>k,s<M],nw:[i>k,s>M],e:[i<k,!1],w:[i>k,!1],n:[!1,s>M],s:[!1,s<M]},[_,O]=P[r].map(V=>V);return{originalBoundingBox:c,nextWidth:I,nextHeight:R,flipByX:_,flipByY:O}},dne=(e,t,n,r,i,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:f,nextWidth:c,originalBoundingBox:d}={})=>{if(c===void 0&&f===void 0&&a===void 0&&l===void 0||f===0||c===0)return;i||(i=t);let u=e.reduce((S,A)=>{let I=i.get(A.id);return I&&S.push({orig:I,latest:A}),S},[]),h;if(d)h=d;else{let S=u.reduce((A,{orig:I})=>{if(!xt(I))return A;let R=qf(I);if(!R)return A;let P=i.get(R)??null;return Xn(P)?[...A,{...P,...We.getBoundTextElementPosition(I,P,t)}]:A},[]);h=yl(u.map(({orig:A})=>A).concat(S))}let{minX:g,minY:y,maxX:U,maxY:x,midX:v,midY:E}=h,k=U-g,M=x-y;if(c===void 0&&f===void 0&&(c=k,f=M),s&&(c===void 0?c=f*(k/M):f===void 0?f=c*(M/k):Math.abs(c/f-k/M)>.001&&(c=f*(k/M))),c&&f){let S=n.includes("e")||n.includes("w")?Math.abs(c)/k:1,A=n.includes("n")||n.includes("s")?Math.abs(f)/M:1,I;n.length===1?I=n.includes("e")||n.includes("w")?S:A:I=Math.max(Math.abs(c)/k||0,Math.abs(f)/M||0);let R={ne:[g,x],se:[g,y],sw:[U,y],nw:[U,x],e:[g,y+M/2],w:[U,y+M/2],n:[g+k/2,x],s:[g+k/2,y]},[P,_]=o?[v,E]:R[n],O=s||u.some(H=>H.latest.angle!==0||Ve(H.latest)||Hg(H.latest));O&&(S=I,A=I);let[V,j]=[a?-1:1,l?-1:1],F=[];for(let{orig:H,latest:G}of u){if(Ve(H)&&Xn(H))continue;let W=H.width*S,B=H.height*A,X=D4(H.angle*V*j),q=xt(H)||Aa(H),Y=H.x-P,oe=H.y-_,ge=a&&!q?W:0,he=l&&!q?B:0,ce=P+V*(Y*S+ge),ie=_+j*(oe*A+he),we=rR(H,W*V,B*j,!1),ke={x:ce,y:ie,width:W,height:B,angle:X,...we};if(Ge(H)&&(H.startBinding&&(ke.startBinding={...H.startBinding,fixedPoint:[a?-H.startBinding.fixedPoint[0]+1:H.startBinding.fixedPoint[0],l?-H.startBinding.fixedPoint[1]+1:H.startBinding.fixedPoint[1]]}),H.endBinding&&(ke.endBinding={...H.endBinding,fixedPoint:[a?-H.endBinding.fixedPoint[0]+1:H.endBinding.fixedPoint[0],l?-H.endBinding.fixedPoint[1]+1:H.endBinding.fixedPoint[1]]}),H.fixedSegments&&we.points&&(ke.fixedSegments=H.fixedSegments.map(Fe=>({...Fe,start:we.points[Fe.index-1],end:we.points[Fe.index]})))),ln(H)&&(ke.scale=[H.scale[0]*V,H.scale[1]*j]),Ve(H)){let Fe=iR(H,t,W);if(!Fe)return;ke.fontSize=Fe.size}let Re=i.get(qf(H)??"");if(Re)if(O){let Fe=Re.fontSize*I;if(Fe<qI)return;ke.boundTextFontSize=Fe}else ke.boundTextFontSize=Re.fontSize;F.push({element:G,update:ke})}let z=F.map(({element:H})=>H);for(let{element:H,update:{boundTextFontSize:G,...W}}of F){let{width:B,height:X,angle:q}=W;Ue(H,W,!1,{isDragging:!0}),uo(H,t,{simultaneouslyUpdated:z,newSize:{width:B,height:X}});let Y=Ct(H,t);Y&&G&&(Ue(Y,{fontSize:G,angle:xt(H)?void 0:q},!1),Py(H,t,n,!0))}r.triggerUpdate()}},IBe=(e,t,n,r,i,s)=>{if(t.length===1&&Ge(t[0])&&(t[0].startBinding||t[0].endBinding))return;let o=t.filter(d=>{if(Ge(d)&&d.startBinding&&d.endBinding){let u=t.find(g=>{var y;return g.id===((y=d.startBinding)==null?void 0:y.elementId)}),h=t.find(g=>{var y;return g.id===((y=d.endBinding)==null?void 0:y.elementId)});return u&&h}return!0}),a=new Set(o),l=o.filter(d=>ht(d)).map(d=>d.id);if(l.length>0)for(let d of r.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);let f=mn(Array.from(a).map(d=>e.originalElements.get(d.id)??d)),c=NBe(f,n,i,s);a.forEach(d=>{if(gH(e,d,c),!Tt(d)){let u=Ct(d,r.getNonDeletedElementsMap());u&&gH(e,u,c),uo(d,r.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(a)})}})},NBe=(e,t,n,r)=>{let[i,s]=e,o=i+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){let[l,f]=Yr(i+t.x,s+t.y,r);n.x===0&&(o=l),n.y===0&&(a=f)}return{x:o-i,y:a-s}},gH=(e,t,n)=>{let r=e.originalElements.get(t.id)??t,i=r.x+n.x,s=r.y+n.y;Ue(t,{x:i,y:s})},RBe=(e,t,n)=>{let[r,i]=mn(e);return[t-r,n-i]},bH=({newElement:e,elementType:t,originX:n,originY:r,x:i,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:f,zoom:c,widthAspectRatio:d=null,originOffset:u=null,informMutation:h=!0})=>{l&&e.type!=="selection"&&(d?a=o/d:(Math.abs(s-r)>Math.abs(i-n)?{width:o,height:a}=fH(t,a,i<n?-o:o):{width:o,height:a}=fH(t,o,s<r?-a:a),a<0&&(a=-a)));let g=i<n?n-o:n,y=s<r?r-a:r;f&&(o+=o,a+=a,g=n-o/2,y=r-a/2);let U=null;if(Ve(e)){a=e.height;let x=oN(kn({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,x),Math.abs(i-n)>KAe/c&&(U={autoResize:!1}),y=r,f&&(g=n-o/2)}if(o!==0&&a!==0){let x=null;ln(e)&&(x={initialWidth:o,initialHeight:a}),Ue(e,{x:g+((u==null?void 0:u.x)??0),y:y+((u==null?void 0:u.y)??0),width:o,height:a,...U,...x},h)}},sR=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||Mt(t,e).length))},_Be=e=>{let t=5381;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)+t+r}return t>>>0},PBe=e=>e.filter(t=>!t.isDeleted&&!Kg(t)),Pn=e=>e.filter(t=>!t.isDeleted),wM=e=>!e.isDeleted,DBe=e=>Pn(e).map(t=>sN(t.type)?{...t,lastCommittedPoint:null}:t),une=e=>DBe(e),hne=async e=>{let t;if(e.type===ft.png)try{return await(await Ze(async()=>{const{decodePngMetadata:n}=await Promise.resolve().then(()=>zoe);return{decodePngMetadata:n}},void 0)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new fh("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new fh("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{let r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),e.type===ft.svg)try{return gje({svg:t})}catch(n){throw n.message==="INVALID"?new fh("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new fh("Error: cannot restore image")}return t},pne=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},LBe=e=>e==="png"||e==="svg",oR=e=>{let t=pne(e);return t==="png"||t==="svg"},mne=e=>!!e&&Object.values(Pg).includes(e),Yh=e=>{let{type:t}=e||{};return mne(t)},gne=async(e,t,n,r)=>{let i=await hne(e),s;try{try{s=JSON.parse(i)}catch(o){throw Yh(e)?new fh("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(lje(s))return{type:ft.excalidraw,data:Ww({elements:une(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:r||e.handle||null,...DJ(s.appState||{}),...t?Rb(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(Mte(s))return{type:ft.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof fh?o:new Error("Error: invalid file")}},bne=async(e,t,n,r)=>{let i=await gne(e,t,n,r);if(i.type!==ft.excalidraw)throw new Error("Error: invalid file");return i.data},yne=(e,t="unpublished")=>{let n=JSON.parse(e);if(!Mte(n))throw new Error("Invalid library");let r=n.libraryItems||n.library;return VN(r,t)},OBe=async(e,t="unpublished")=>yne(await hne(e),t),jb=async e=>new Promise(async(t,n)=>{try{Iy(e)&&(e=await e),e.toBlob(r=>{if(!r)return n(new sNe("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(r)})}catch(r){n(r)}}),jBe=async e=>{try{let t=await window.crypto.subtle.digest("SHA-1",await uh(e));return VMe(new Uint8Array(t))}catch(t){return console.error(t),KI(40)}},yH=async e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),BBe=(e,t)=>`data:${t};base64,${wne(i9(e),!0)}`,FBe=(e,t="")=>{let n=e.indexOf(","),r=atob(e.slice(n+1)),i=e.slice(0,n).split(":")[1].split(";")[0],s=new ArrayBuffer(r.length),o=new Uint8Array(s);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return new File([s],t,{type:i})},zBe=e=>vne(e.slice(e.indexOf(",")+1)),vM=async(e,t)=>{if(e.type===ft.svg)return e;let[n,r]=await Promise.all([Ze(()=>import("./pica-DQwaUF9c.js").then(s=>s.p),__vite__mapDeps([2,3])).then(s=>s.default),Ze(()=>import("./image-blob-reduce.esm-xKov1Fz_.js"),[]).then(s=>s.default)]),i=r({pica:n({features:["js","wasm"]})});if(t.outputType){let{outputType:s}=t;i._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!Yh(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await i.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},UH=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:ft.svg}),$Be=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});let r=await n.blob();if(r.type&&Yh(r)){let i=t||r.name||"";return new File([r],i,{type:r.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},HBe=async e=>{let t=e.dataTransfer.files.item(0),n=await VBe(e);return{file:t?await aR(t):null,fileHandle:n}},VBe=async e=>{if(P1)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},xH=e=>{let t=null,n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,r={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===r.png?t=ft.png:n.startsWith(r.jpg)?t=ft.jpg:n.startsWith(r.gif)&&(t=ft.gif),t},Q5=(e,t,n)=>new File([e],n||"",{type:t}),aR=async e=>{var t,n;if(e.type){if(Yh(e)){let r=await uh(e),i=xH(r);i&&i!==e.type&&(e=Q5(r,i,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=Q5(await uh(e),ft.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=Q5(await uh(e),ft.excalidraw,e.name);else{let r=await uh(e),i=xH(r);i&&(e=Q5(r,i,e.name))}return e},uh=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{let r=new FileReader;r.onload=i=>{var s;if(!((s=i.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),i9=e=>{let t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e),n="";for(let r of t)n+=String.fromCharCode(r);return n},Une=e=>{let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},xne=e=>new TextDecoder("utf-8").decode(Une(e)),wne=(e,t=!1)=>t?window.btoa(e):window.btoa(i9(e)),vne=(e,t=!1)=>t?window.atob(e):xne(window.atob(e)),Ene=({text:e,compress:t})=>{let n;if(t!==!1)try{n=i9(lCe(e))}catch(r){console.error("encode: cannot deflate",r)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||i9(e)}},kne=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:xne(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?cCe(new Uint8Array(Une(t)),{to:"string"}):t},Sne=async e=>{let t=MQ(new Uint8Array(await uh(e))).find(n=>n.name==="tEXt");return t?TQ.decode(t.data):null},WBe=async({blob:e,metadata:t})=>{let n=MQ(new Uint8Array(await uh(e))),r=TQ.encode(ft.excalidraw,JSON.stringify(Ene({text:t,compress:!0})));return n.splice(-1,0,r),new Blob([wEe(n)],{type:ft.png})},GBe=async e=>{let t=await Sne(e);if((t==null?void 0:t.keyword)===ft.excalidraw)try{let n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===Ea.excalidraw)return t.text;throw new Error("FAILED")}return kne(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},Cne={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library",libraries:"Browse libraries",loadingScene:"Loading scene",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame"},Ane={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},Mne={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},Tne={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas..."},Ine={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},Nne={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},Rne={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},_ne={selection:"Selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw"},Pne={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},Dne={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},Lne={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},One={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},jne={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},Bne={or:"Or"},Fne={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},zne={title:"Error"},$ne={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},Hne={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},Vne={title:"Clear canvas"},Wne={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},Gne={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},Xne={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},Kne={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},Yne={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},Zne={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},qne={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},Qne={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},Jne={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},ere={mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},tre={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},nre={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},rre={placeholder:"Quick search"},ire={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},sre={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},ore={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},lR={labels:Cne,elementLink:Ane,library:Mne,search:Tne,buttons:Ine,alerts:Nne,errors:Rne,toolBar:_ne,element:Pne,headings:Dne,hints:Lne,canvasError:One,errorSplash:jne,shareDialog:Bne,roomDialog:Fne,errorDialog:zne,exportDialog:$ne,helpDialog:Hne,clearCanvasDialog:Vne,publishDialog:Wne,publishSuccessDialog:Gne,confirmDialog:Xne,imageExportDialog:Kne,encrypted:Yne,stats:Zne,toast:qne,colors:Qne,welcomeScreen:Jne,colorPicker:ere,overwriteConfirm:tre,mermaid:nre,quickSearch:rre,fontList:ire,userList:sre,commandPalette:ore},are=100,lre=36,cre={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:are,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:lre,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100};let XBe=0;function Ri(e,t){const n=`atom${++XBe}`,r={toString(){return n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=KBe,r.write=YBe),r}function KBe(e){return e(this)}function YBe(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const wH=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,vH=e=>"init"in e,EH=e=>!!e.write,s9=new WeakMap,EM=e=>{var t;return kM(e)&&!((t=s9.get(e))!=null&&t[1])},ZBe=(e,t)=>{const n=s9.get(e);n&&(n[1]=!0,n[0].forEach(r=>r(t)))},qBe=e=>{if(s9.has(e))return;const t=[new Set,!1];s9.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=r=>{t[0].add(r)}},kM=e=>typeof(e==null?void 0:e.then)=="function",kH=e=>"v"in e||"e"in e,KU=e=>{if("e"in e)throw e.e;return e.v},fre=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},SH=(e,t,n,r,i)=>{var s;n.d.set(r,i.n),EM(n.v)&&fre(t,n.v,i),(s=i.m)==null||s.t.add(t),e&&QBe(e,r,t)},S5=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),N2=(e,t,n)=>{e[t].add(n)},CH=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),N2(e,"M",()=>{var r;(r=n.m)==null||r.l.forEach(i=>N2(e,"M",i))}))},QBe=(e,t,n)=>{const r=e.D.get(t);r&&r.add(n)},JBe=(e,t)=>e.D.get(t),_0=e=>{let t,n=!1;const r=i=>{try{i()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(r),e.H.clear(),e.M.forEach(r),e.M.clear(),e.L.forEach(r),e.L.clear();if(n)throw t},dre=(...[e,t,n,r])=>{const i=(x,v,E)=>{const k="v"in v,M=v.v,S=EM(v.v)?v.v:null;if(kM(E)){qBe(E);for(const A of v.d.keys())fre(x,E,e(A));v.v=E}else v.v=E;delete v.e,delete v.x,(!k||!Object.is(M,v.v))&&(++v.n,S&&ZBe(S,E))},s=(x,v)=>{var E;const k=e(v);if(kH(k)&&(k.m&&!k.x||Array.from(k.d).every(([P,_])=>s(x,P).n===_)))return k;k.d.clear();let M=!0;const S=P=>{if(wH(v,P)){const O=e(P);if(!kH(O))if(vH(P))i(P,O,P.init);else throw new Error("no atom init");return KU(O)}const _=s(x,P);try{return KU(_)}finally{if(M)SH(x,v,k,P,_);else{const O=S5();SH(O,v,k,P,_),d(O,v,k),_0(O)}}};let A,I;const R={get signal(){return A||(A=new AbortController),A.signal},get setSelf(){return!I&&EH(v)&&(I=(...P)=>{if(!M)return c(v,...P)}),I}};try{const P=t(v,S,R);if(i(v,k,P),kM(P)){(E=P.onCancel)==null||E.call(P,()=>A==null?void 0:A.abort());const _=()=>{if(k.m){const O=S5();d(O,v,k),_0(O)}};P.then(_,_)}return k}catch(P){return delete k.v,k.e=P,delete k.x,++k.n,k}finally{M=!1}},o=x=>KU(s(void 0,x)),a=(x,v,E)=>{var k,M;const S=new Map;for(const A of((k=E.m)==null?void 0:k.t)||[]){const I=e(A);I.m&&S.set(A,I)}for(const A of E.p)S.set(A,e(A));return(M=JBe(x,v))==null||M.forEach(A=>{S.set(A,e(A))}),S},l=(x,v,E)=>{const k=[],M=new Set,S=new Set,A=[[v,E]];for(;A.length>0;){const[I,R]=A[A.length-1];if(S.has(I)){A.pop();continue}if(M.has(I)){k.push([I,R,R.n]),S.add(I),R.x=!0,A.pop();continue}M.add(I);for(const[P,_]of a(x,I,R))I!==P&&!M.has(P)&&A.push([P,_])}N2(x,"H",()=>{const I=new Set([v]);for(let R=k.length-1;R>=0;--R){const[P,_,O]=k[R];let V=!1;for(const j of _.d.keys())if(j!==P&&I.has(j)){V=!0;break}V&&(s(x,P),d(x,P,_),O!==_.n&&(CH(x,P,_),I.add(P))),delete _.x}})},f=(x,v,...E)=>{let k=!0;const M=A=>KU(s(x,A)),S=(A,...I)=>{const R=e(A);try{if(wH(v,A)){if(!vH(A))throw new Error("atom not writable");const P=R.n,_=I[0];i(A,R,_),d(x,A,R),P!==R.n&&(CH(x,A,R),l(x,A,R));return}else return f(x,A,...I)}finally{k||_0(x)}};try{return n(v,M,S,...E)}finally{k=!1}},c=(x,...v)=>{const E=S5();try{return f(E,x,...v)}finally{_0(E)}},d=(x,v,E)=>{if(E.m&&!EM(E.v)){for(const k of E.d.keys())E.m.d.has(k)||(u(x,k,e(k)).t.add(v),E.m.d.add(k));for(const k of E.m.d||[])if(!E.d.has(k)){E.m.d.delete(k);const M=h(x,k,e(k));M==null||M.t.delete(v)}}},u=(x,v,E)=>{if(!E.m){s(x,v);for(const k of E.d.keys())u(x,k,e(k)).t.add(v);if(E.m={l:new Set,d:new Set(E.d.keys()),t:new Set},EH(v)){const k=E.m;let M;const S=(A,I)=>{let R=!0;M=(...P)=>{try{return f(A,v,...P)}finally{R||_0(A)}};try{return I()}finally{R=!1}};N2(x,"L",()=>{const A=S(x,()=>r(v,(...I)=>M(...I)));A&&(k.u=I=>S(I,A))})}}return E.m},h=(x,v,E)=>{if(E.m&&!E.m.l.size&&!Array.from(E.m.t).some(k=>{var M;return(M=e(k).m)==null?void 0:M.d.has(v)})){const k=E.m.u;k&&N2(x,"L",()=>k(x)),delete E.m;for(const M of E.d.keys()){const S=h(x,M,e(M));S==null||S.t.delete(v)}return}return E.m};return{get:o,set:c,sub:(x,v)=>{const E=S5(),k=e(x),S=u(E,x,k).l;return S.add(v),_0(E),()=>{S.delete(v);const A=S5();h(A,x,k),_0(A)}},unstable_derive:x=>dre(...x(e,t,n,r))}},cR=()=>{const e=new WeakMap;return dre(r=>{let i=e.get(r);return i||(i={d:new Map,p:new Set,n:0},e.set(r,i)),i},(r,...i)=>r.read(...i),(r,...i)=>r.write(...i),(r,...i)=>{var s;return(s=r.onMount)==null?void 0:s.call(r,...i)})};let pS;const eFe=()=>(pS||(pS=cR()),pS),tFe=T.createContext(void 0),Yw=e=>{const t=T.useContext(tFe);return(e==null?void 0:e.store)||t||eFe()},SM=e=>typeof(e==null?void 0:e.then)=="function",ure=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},nFe=Ie.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(ure(e),e)}),mS=new WeakMap,AH=e=>{let t=mS.get(e);return t||(t=new Promise((n,r)=>{let i=e;const s=l=>f=>{i===l&&n(f)},o=l=>f=>{i===l&&r(f)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(f=>{SM(f)?(mS.set(f,t),i=f,f.then(s(f),o(f)),a(f)):n(f)})};e.then(s(e),o(e)),a(e)}),mS.set(e,t)),t};function hre(e,t){const n=Yw(t),[[r,i,s],o]=T.useReducer(f=>{const c=n.get(e);return Object.is(f[0],c)&&f[1]===n&&f[2]===e?f:[c,n,e]},void 0,()=>[n.get(e),n,e]);let a=r;(i!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(T.useEffect(()=>{const f=n.sub(e,()=>{if(typeof l=="number"){const c=n.get(e);SM(c)&&ure(AH(c)),setTimeout(o,l);return}o()});return o(),f},[n,e,l]),T.useDebugValue(a),SM(a)){const f=AH(a);return nFe(f)}return a}function pre(e,t){const n=Yw(t);return T.useCallback((...i)=>n.set(e,...i),[n,e])}function rFe(e,t){return[hre(e,t),pre(e,t)]}const MH=new WeakMap;function iFe(e,t){const n=Yw(t),r=sFe(n);for(const[i,s]of e)(!r.has(i)||t!=null&&t.dangerouslyForceHydrate)&&(r.add(i),n.set(i,s))}const sFe=e=>{let t=MH.get(e);return t||(t=new WeakSet,MH.set(e,t)),t};function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nm.apply(this,arguments)}function mre(){const e=T.createContext(null);function t({store:o,initialValues:a=[],children:l}){const f=T.useRef(o);return f.current||(f.current=cR()),iFe(a,{store:f.current}),m.jsx(e.Provider,{value:f.current,children:l})}const n=o=>{const a=T.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return Yw(nm({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return rFe(o,nm({store:l},a))},useAtomValue:(o,a)=>{const l=n();return hre(o,nm({store:l},a))},useSetAtom:(o,a)=>{const l=n();return pre(o,nm({store:l},a))}}}Ri(null);T.createContext({scope:void 0,baseStore:void 0});function Xu(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function TH(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function gre(...e){return t=>{let n=!1;const r=e.map(i=>{const s=TH(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():TH(e[i],null)}}}}function h0(...e){return T.useCallback(gre(...e),e)}function bre(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];const f=d=>{var x;const{scope:u,children:h,...g}=d,y=((x=u==null?void 0:u[e])==null?void 0:x[l])||a,U=T.useMemo(()=>g,Object.values(g));return m.jsx(y.Provider,{value:U,children:h})};f.displayName=s+"Provider";function c(d,u){var y;const h=((y=u==null?void 0:u[e])==null?void 0:y[l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,oFe(i,...t)]}function oFe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var fR=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(lFe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return m.jsx(CM,{...r,ref:t,children:T.isValidElement(o)?T.cloneElement(o,void 0,a):null})}return m.jsx(CM,{...r,ref:t,children:n})});fR.displayName="Slot";var CM=T.forwardRef((e,t)=>{const{children:n,...r}=e;if(T.isValidElement(n)){const i=fFe(n),s=cFe(r,n.props);return n.type!==T.Fragment&&(s.ref=t?gre(t,i):i),T.cloneElement(n,s)}return T.Children.count(n)>1?T.Children.only(null):null});CM.displayName="SlotClone";var aFe=({children:e})=>m.jsx(m.Fragment,{children:e});function lFe(e){return T.isValidElement(e)&&e.type===aFe}function cFe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function fFe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var dFe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cd=dFe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?fR:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function uFe(e,t){e&&fi.flushSync(()=>e.dispatchEvent(t))}function t0(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function hFe(e,t=globalThis==null?void 0:globalThis.document){const n=t0(e);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var pFe="DismissableLayer",AM="dismissableLayer.update",mFe="dismissableLayer.pointerDownOutside",gFe="dismissableLayer.focusOutside",IH,yre=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ure=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,f=T.useContext(yre),[c,d]=T.useState(null),u=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=T.useState({}),g=h0(t,A=>d(A)),y=Array.from(f.layers),[U]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(U),v=c?y.indexOf(c):-1,E=f.layersWithOutsidePointerEventsDisabled.size>0,k=v>=x,M=UFe(A=>{const I=A.target,R=[...f.branches].some(P=>P.contains(I));!k||R||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},u),S=xFe(A=>{const I=A.target;[...f.branches].some(P=>P.contains(I))||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},u);return hFe(A=>{v===f.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},u),T.useEffect(()=>{if(c)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(IH=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(c)),f.layers.add(c),NH(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(u.body.style.pointerEvents=IH)}},[c,u,n,f]),T.useEffect(()=>()=>{c&&(f.layers.delete(c),f.layersWithOutsidePointerEventsDisabled.delete(c),NH())},[c,f]),T.useEffect(()=>{const A=()=>h({});return document.addEventListener(AM,A),()=>document.removeEventListener(AM,A)},[]),m.jsx(cd.div,{...l,ref:g,style:{pointerEvents:E?k?"auto":"none":void 0,...e.style},onFocusCapture:Xu(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Xu(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Xu(e.onPointerDownCapture,M.onPointerDownCapture)})});Ure.displayName=pFe;var bFe="DismissableLayerBranch",yFe=T.forwardRef((e,t)=>{const n=T.useContext(yre),r=T.useRef(null),i=h0(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.jsx(cd.div,{...e,ref:i})});yFe.displayName=bFe;function UFe(e,t=globalThis==null?void 0:globalThis.document){const n=t0(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){xre(mFe,n,f,{discrete:!0})};const f={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function xFe(e,t=globalThis==null?void 0:globalThis.document){const n=t0(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&xre(gFe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function NH(){const e=new CustomEvent(AM);document.dispatchEvent(e)}function xre(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?uFe(i,s):i.dispatchEvent(s)}var gS=0;function wFe(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??RH()),document.body.insertAdjacentElement("beforeend",e[1]??RH()),gS++,()=>{gS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),gS--}},[])}function RH(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var bS="focusScope.autoFocusOnMount",yS="focusScope.autoFocusOnUnmount",_H={bubbles:!1,cancelable:!0},vFe="FocusScope",wre=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[a,l]=T.useState(null),f=t0(i),c=t0(s),d=T.useRef(null),u=h0(t,y=>l(y)),h=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let y=function(E){if(h.paused||!a)return;const k=E.target;a.contains(k)?d.current=k:Jd(d.current,{select:!0})},U=function(E){if(h.paused||!a)return;const k=E.relatedTarget;k!==null&&(a.contains(k)||Jd(d.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const M of E)M.removedNodes.length>0&&Jd(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",U);const v=new MutationObserver(x);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",U),v.disconnect()}}},[r,a,h.paused]),T.useEffect(()=>{if(a){DH.add(h);const y=document.activeElement;if(!a.contains(y)){const x=new CustomEvent(bS,_H);a.addEventListener(bS,f),a.dispatchEvent(x),x.defaultPrevented||(EFe(MFe(vre(a)),{select:!0}),document.activeElement===y&&Jd(a))}return()=>{a.removeEventListener(bS,f),setTimeout(()=>{const x=new CustomEvent(yS,_H);a.addEventListener(yS,c),a.dispatchEvent(x),x.defaultPrevented||Jd(y??document.body,{select:!0}),a.removeEventListener(yS,c),DH.remove(h)},0)}}},[a,f,c,h]);const g=T.useCallback(y=>{if(!n&&!r||h.paused)return;const U=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(U&&x){const v=y.currentTarget,[E,k]=kFe(v);E&&k?!y.shiftKey&&x===k?(y.preventDefault(),n&&Jd(E,{select:!0})):y.shiftKey&&x===E&&(y.preventDefault(),n&&Jd(k,{select:!0})):x===v&&y.preventDefault()}},[n,r,h.paused]);return m.jsx(cd.div,{tabIndex:-1,...o,ref:u,onKeyDown:g})});wre.displayName=vFe;function EFe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Jd(r,{select:t}),document.activeElement!==n)return}function kFe(e){const t=vre(e),n=PH(t,e),r=PH(t.reverse(),e);return[n,r]}function vre(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function PH(e,t){for(const n of e)if(!SFe(n,{upTo:t}))return n}function SFe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function CFe(e){return e instanceof HTMLInputElement&&"select"in e}function Jd(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&CFe(e)&&t&&e.select()}}var DH=AFe();function AFe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=LH(e,t),e.unshift(t)},remove(t){var n;e=LH(e,t),(n=e[0])==null||n.resume()}}}function LH(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function MFe(e){return e.filter(t=>t.tagName!=="A")}var k1=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},TFe=tT.useId||(()=>{}),IFe=0;function NFe(e){const[t,n]=T.useState(TFe());return k1(()=>{e||n(r=>r??String(IFe++))},[e]),e||(t?`radix-${t}`:"")}const RFe=["top","right","bottom","left"],n0=Math.min,Ro=Math.max,o9=Math.round,YU=Math.floor,xc=e=>({x:e,y:e}),_Fe={left:"right",right:"left",bottom:"top",top:"bottom"},PFe={start:"end",end:"start"};function MM(e,t,n){return Ro(e,n0(t,n))}function td(e,t){return typeof e=="function"?e(t):e}function nd(e){return e.split("-")[0]}function f6(e){return e.split("-")[1]}function dR(e){return e==="x"?"y":"x"}function uR(e){return e==="y"?"height":"width"}const DFe=new Set(["top","bottom"]);function gc(e){return DFe.has(nd(e))?"y":"x"}function hR(e){return dR(gc(e))}function LFe(e,t,n){n===void 0&&(n=!1);const r=f6(e),i=hR(e),s=uR(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=a9(o)),[o,a9(o)]}function OFe(e){const t=a9(e);return[TM(e),t,TM(t)]}function TM(e){return e.replace(/start|end/g,t=>PFe[t])}const OH=["left","right"],jH=["right","left"],jFe=["top","bottom"],BFe=["bottom","top"];function FFe(e,t,n){switch(e){case"top":case"bottom":return n?t?jH:OH:t?OH:jH;case"left":case"right":return t?jFe:BFe;default:return[]}}function zFe(e,t,n,r){const i=f6(e);let s=FFe(nd(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(TM)))),s}function a9(e){return e.replace(/left|right|bottom|top/g,t=>_Fe[t])}function $Fe(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ere(e){return typeof e!="number"?$Fe(e):{top:e,right:e,bottom:e,left:e}}function l9(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function BH(e,t,n){let{reference:r,floating:i}=e;const s=gc(t),o=hR(t),a=uR(o),l=nd(t),f=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,u=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(f6(t)){case"start":h[o]-=u*(n&&f?-1:1);break;case"end":h[o]+=u*(n&&f?-1:1);break}return h}async function HFe(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:f="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:u=!1,padding:h=0}=td(t,e),g=Ere(h),U=a[u?d==="floating"?"reference":"floating":d],x=l9(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(U)))==null||n?U:U.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:f,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},M=l9(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:E,strategy:l}):v);return{top:(x.top-M.top+g.top)/k.y,bottom:(M.bottom-x.bottom+g.bottom)/k.y,left:(x.left-M.left+g.left)/k.x,right:(M.right-x.right+g.right)/k.x}}const VFe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=BH(f,r,l),u=r,h={},g=0;for(let U=0;U<a.length;U++){var y;const{name:x,fn:v}=a[U],{x:E,y:k,data:M,reset:S}=await v({x:c,y:d,initialPlacement:r,placement:u,strategy:i,middlewareData:h,rects:f,platform:{...o,detectOverflow:(y=o.detectOverflow)!=null?y:HFe},elements:{reference:e,floating:t}});c=E??c,d=k??d,h={...h,[x]:{...h[x],...M}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(u=S.placement),S.rects&&(f=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:d}=BH(f,u,l)),U=-1)}return{x:c,y:d,placement:u,strategy:i,middlewareData:h}},WFe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:f,padding:c=0}=td(e,t)||{};if(f==null)return{};const d=Ere(c),u={x:n,y:r},h=hR(i),g=uR(h),y=await o.getDimensions(f),U=h==="y",x=U?"top":"left",v=U?"bottom":"right",E=U?"clientHeight":"clientWidth",k=s.reference[g]+s.reference[h]-u[h]-s.floating[g],M=u[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let A=S?S[E]:0;(!A||!await(o.isElement==null?void 0:o.isElement(S)))&&(A=a.floating[E]||s.floating[g]);const I=k/2-M/2,R=A/2-y[g]/2-1,P=n0(d[x],R),_=n0(d[v],R),O=P,V=A-y[g]-_,j=A/2-y[g]/2+I,F=MM(O,j,V),z=!l.arrow&&f6(i)!=null&&j!==F&&s.reference[g]/2-(j<O?P:_)-y[g]/2<0,H=z?j<O?j-O:j-V:0;return{[h]:u[h]+H,data:{[h]:F,centerOffset:j-F-H,...z&&{alignmentOffset:H}},reset:z}}}),GFe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:f}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...U}=td(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=nd(i),v=gc(a),E=nd(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(f.floating)),M=u||(E||!y?[a9(a)]:OFe(a)),S=g!=="none";!u&&S&&M.push(...zFe(a,y,g,k));const A=[a,...M],I=await l.detectOverflow(t,U),R=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(I[x]),d){const j=LFe(i,o,k);R.push(I[j[0]],I[j[1]])}if(P=[...P,{placement:i,overflows:R}],!R.every(j=>j<=0)){var _,O;const j=(((_=s.flip)==null?void 0:_.index)||0)+1,F=A[j];if(F&&(!(d==="alignment"?v!==gc(F):!1)||P.every(G=>gc(G.placement)===v?G.overflows[0]>0:!0)))return{data:{index:j,overflows:P},reset:{placement:F}};let z=(O=P.filter(H=>H.overflows[0]<=0).sort((H,G)=>H.overflows[1]-G.overflows[1])[0])==null?void 0:O.placement;if(!z)switch(h){case"bestFit":{var V;const H=(V=P.filter(G=>{if(S){const W=gc(G.placement);return W===v||W==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(W=>W>0).reduce((W,B)=>W+B,0)]).sort((G,W)=>G[1]-W[1])[0])==null?void 0:V[0];H&&(z=H);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function FH(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function zH(e){return RFe.some(t=>e[t]>=0)}const XFe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:i="referenceHidden",...s}=td(e,t);switch(i){case"referenceHidden":{const o=await r.detectOverflow(t,{...s,elementContext:"reference"}),a=FH(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:zH(a)}}}case"escaped":{const o=await r.detectOverflow(t,{...s,altBoundary:!0}),a=FH(o,n.floating);return{data:{escapedOffsets:a,escaped:zH(a)}}}default:return{}}}}},kre=new Set(["left","top"]);async function KFe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=nd(n),a=f6(n),l=gc(n)==="y",f=kre.has(o)?-1:1,c=s&&l?-1:1,d=td(t,e);let{mainAxis:u,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),l?{x:h*c,y:u*f}:{x:u*f,y:h*c}}const YFe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await KFe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},ZFe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i,platform:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:v,y:E}=x;return{x:v,y:E}}},...f}=td(e,t),c={x:n,y:r},d=await s.detectOverflow(t,f),u=gc(nd(i)),h=dR(u);let g=c[h],y=c[u];if(o){const x=h==="y"?"top":"left",v=h==="y"?"bottom":"right",E=g+d[x],k=g-d[v];g=MM(E,g,k)}if(a){const x=u==="y"?"top":"left",v=u==="y"?"bottom":"right",E=y+d[x],k=y-d[v];y=MM(E,y,k)}const U=l.fn({...t,[h]:g,[u]:y});return{...U,data:{x:U.x-n,y:U.y-r,enabled:{[h]:o,[u]:a}}}}}},qFe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:f=!0}=td(e,t),c={x:n,y:r},d=gc(i),u=dR(d);let h=c[u],g=c[d];const y=td(a,t),U=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const E=u==="y"?"height":"width",k=s.reference[u]-s.floating[E]+U.mainAxis,M=s.reference[u]+s.reference[E]-U.mainAxis;h<k?h=k:h>M&&(h=M)}if(f){var x,v;const E=u==="y"?"width":"height",k=kre.has(nd(i)),M=s.reference[d]-s.floating[E]+(k&&((x=o.offset)==null?void 0:x[d])||0)+(k?0:U.crossAxis),S=s.reference[d]+s.reference[E]+(k?0:((v=o.offset)==null?void 0:v[d])||0)-(k?U.crossAxis:0);g<M?g=M:g>S&&(g=S)}return{[u]:h,[d]:g}}}},QFe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...f}=td(e,t),c=await o.detectOverflow(t,f),d=nd(i),u=f6(i),h=gc(i)==="y",{width:g,height:y}=s.floating;let U,x;d==="top"||d==="bottom"?(U=d,x=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,U=u==="end"?"top":"bottom");const v=y-c.top-c.bottom,E=g-c.left-c.right,k=n0(y-c[U],v),M=n0(g-c[x],E),S=!t.middlewareData.shift;let A=k,I=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=v),S&&!u){const P=Ro(c.left,0),_=Ro(c.right,0),O=Ro(c.top,0),V=Ro(c.bottom,0);h?I=g-2*(P!==0||_!==0?P+_:Ro(c.left,c.right)):A=y-2*(O!==0||V!==0?O+V:Ro(c.top,c.bottom))}await l({...t,availableWidth:I,availableHeight:A});const R=await o.getDimensions(a.floating);return g!==R.width||y!==R.height?{reset:{rects:!0}}:{}}}};function Zw(){return typeof window<"u"}function d6(e){return Sre(e)?(e.nodeName||"").toLowerCase():"#document"}function Oo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Dc(e){var t;return(t=(Sre(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Sre(e){return Zw()?e instanceof Node||e instanceof Oo(e).Node:!1}function Cl(e){return Zw()?e instanceof Element||e instanceof Oo(e).Element:!1}function _c(e){return Zw()?e instanceof HTMLElement||e instanceof Oo(e).HTMLElement:!1}function $H(e){return!Zw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Oo(e).ShadowRoot}const JFe=new Set(["inline","contents"]);function Oy(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Al(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!JFe.has(i)}const eze=new Set(["table","td","th"]);function tze(e){return eze.has(d6(e))}const nze=[":popover-open",":modal"];function qw(e){return nze.some(t=>{try{return e.matches(t)}catch{return!1}})}const rze=["transform","translate","scale","rotate","perspective"],ize=["transform","translate","scale","rotate","perspective","filter"],sze=["paint","layout","strict","content"];function pR(e){const t=mR(),n=Cl(e)?Al(e):e;return rze.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||ize.some(r=>(n.willChange||"").includes(r))||sze.some(r=>(n.contain||"").includes(r))}function oze(e){let t=r0(e);for(;_c(t)&&!Yg(t);){if(pR(t))return t;if(qw(t))return null;t=r0(t)}return null}function mR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aze=new Set(["html","body","#document"]);function Yg(e){return aze.has(d6(e))}function Al(e){return Oo(e).getComputedStyle(e)}function Qw(e){return Cl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function r0(e){if(d6(e)==="html")return e;const t=e.assignedSlot||e.parentNode||$H(e)&&e.host||Dc(e);return $H(t)?t.host:t}function Cre(e){const t=r0(e);return Yg(t)?e.ownerDocument?e.ownerDocument.body:e.body:_c(t)&&Oy(t)?t:Cre(t)}function Bb(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Cre(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Oo(i);if(s){const a=IM(o);return t.concat(o,o.visualViewport||[],Oy(i)?i:[],a&&n?Bb(a):[])}return t.concat(i,Bb(i,[],n))}function IM(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Are(e){const t=Al(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=_c(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=o9(n)!==s||o9(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function gR(e){return Cl(e)?e:e.contextElement}function xm(e){const t=gR(e);if(!_c(t))return xc(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Are(t);let o=(s?o9(n.width):n.width)/r,a=(s?o9(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const lze=xc(0);function Mre(e){const t=Oo(e);return!mR()||!t.visualViewport?lze:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cze(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Oo(e)?!1:t}function S1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=gR(e);let o=xc(1);t&&(r?Cl(r)&&(o=xm(r)):o=xm(e));const a=cze(s,n,r)?Mre(s):xc(0);let l=(i.left+a.x)/o.x,f=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const u=Oo(s),h=r&&Cl(r)?Oo(r):r;let g=u,y=IM(g);for(;y&&r&&h!==g;){const U=xm(y),x=y.getBoundingClientRect(),v=Al(y),E=x.left+(y.clientLeft+parseFloat(v.paddingLeft))*U.x,k=x.top+(y.clientTop+parseFloat(v.paddingTop))*U.y;l*=U.x,f*=U.y,c*=U.x,d*=U.y,l+=E,f+=k,g=Oo(y),y=IM(g)}}return l9({width:c,height:d,x:l,y:f})}function Jw(e,t){const n=Qw(e).scrollLeft;return t?t.left+n:S1(Dc(e)).left+n}function Tre(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Jw(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function fze(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Dc(r),a=t?qw(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},f=xc(1);const c=xc(0),d=_c(r);if((d||!d&&!s)&&((d6(r)!=="body"||Oy(o))&&(l=Qw(r)),_c(r))){const h=S1(r);f=xm(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const u=o&&!d&&!s?Tre(o,l):xc(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-l.scrollLeft*f.x+c.x+u.x,y:n.y*f.y-l.scrollTop*f.y+c.y+u.y}}function dze(e){return Array.from(e.getClientRects())}function uze(e){const t=Dc(e),n=Qw(e),r=e.ownerDocument.body,i=Ro(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ro(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Jw(e);const a=-n.scrollTop;return Al(r).direction==="rtl"&&(o+=Ro(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const HH=25;function hze(e,t){const n=Oo(e),r=Dc(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=mR();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const f=Jw(r);if(f<=0){const c=r.ownerDocument,d=c.body,u=getComputedStyle(d),h=c.compatMode==="CSS1Compat"&&parseFloat(u.marginLeft)+parseFloat(u.marginRight)||0,g=Math.abs(r.clientWidth-d.clientWidth-h);g<=HH&&(s-=g)}else f<=HH&&(s+=f);return{width:s,height:o,x:a,y:l}}const pze=new Set(["absolute","fixed"]);function mze(e,t){const n=S1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=_c(e)?xm(e):xc(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,f=r*s.y;return{width:o,height:a,x:l,y:f}}function VH(e,t,n){let r;if(t==="viewport")r=hze(e,n);else if(t==="document")r=uze(Dc(e));else if(Cl(t))r=mze(t,n);else{const i=Mre(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return l9(r)}function Ire(e,t){const n=r0(e);return n===t||!Cl(n)||Yg(n)?!1:Al(n).position==="fixed"||Ire(n,t)}function gze(e,t){const n=t.get(e);if(n)return n;let r=Bb(e,[],!1).filter(a=>Cl(a)&&d6(a)!=="body"),i=null;const s=Al(e).position==="fixed";let o=s?r0(e):e;for(;Cl(o)&&!Yg(o);){const a=Al(o),l=pR(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&pze.has(i.position)||Oy(o)&&!l&&Ire(e,o))?r=r.filter(c=>c!==o):i=a,o=r0(o)}return t.set(e,r),r}function bze(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?qw(t)?[]:gze(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((f,c)=>{const d=VH(t,c,i);return f.top=Ro(d.top,f.top),f.right=n0(d.right,f.right),f.bottom=n0(d.bottom,f.bottom),f.left=Ro(d.left,f.left),f},VH(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yze(e){const{width:t,height:n}=Are(e);return{width:t,height:n}}function Uze(e,t,n){const r=_c(t),i=Dc(t),s=n==="fixed",o=S1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=xc(0);function f(){l.x=Jw(i)}if(r||!r&&!s)if((d6(t)!=="body"||Oy(i))&&(a=Qw(t)),r){const h=S1(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&f();s&&!r&&i&&f();const c=i&&!r&&!s?Tre(i,a):xc(0),d=o.left+a.scrollLeft-l.x-c.x,u=o.top+a.scrollTop-l.y-c.y;return{x:d,y:u,width:o.width,height:o.height}}function US(e){return Al(e).position==="static"}function WH(e,t){if(!_c(e)||Al(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Dc(e)===n&&(n=n.ownerDocument.body),n}function Nre(e,t){const n=Oo(e);if(qw(e))return n;if(!_c(e)){let i=r0(e);for(;i&&!Yg(i);){if(Cl(i)&&!US(i))return i;i=r0(i)}return n}let r=WH(e,t);for(;r&&tze(r)&&US(r);)r=WH(r,t);return r&&Yg(r)&&US(r)&&!pR(r)?n:r||oze(e)||n}const xze=async function(e){const t=this.getOffsetParent||Nre,n=this.getDimensions,r=await n(e.floating);return{reference:Uze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function wze(e){return Al(e).direction==="rtl"}const vze={convertOffsetParentRelativeRectToViewportRelativeRect:fze,getDocumentElement:Dc,getClippingRect:bze,getOffsetParent:Nre,getElementRects:xze,getClientRects:dze,getDimensions:yze,getScale:xm,isElement:Cl,isRTL:wze};function Rre(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Eze(e,t){let n=null,r;const i=Dc(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const f=e.getBoundingClientRect(),{left:c,top:d,width:u,height:h}=f;if(a||t(),!u||!h)return;const g=YU(d),y=YU(i.clientWidth-(c+u)),U=YU(i.clientHeight-(d+h)),x=YU(c),E={rootMargin:-g+"px "+-y+"px "+-U+"px "+-x+"px",threshold:Ro(0,n0(1,l))||1};let k=!0;function M(S){const A=S[0].intersectionRatio;if(A!==l){if(!k)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!Rre(f,e.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(M,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,E)}n.observe(e)}return o(!0),s}function kze(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,f=gR(e),c=i||s?[...f?Bb(f):[],...Bb(t)]:[];c.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const d=f&&a?Eze(f,n):null;let u=-1,h=null;o&&(h=new ResizeObserver(x=>{let[v]=x;v&&v.target===f&&h&&(h.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),f&&!l&&h.observe(f),h.observe(t));let g,y=l?S1(e):null;l&&U();function U(){const x=S1(e);y&&!Rre(y,x)&&n(),y=x,g=requestAnimationFrame(U)}return n(),()=>{var x;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d==null||d(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(g)}}const Sze=YFe,Cze=ZFe,Aze=GFe,Mze=QFe,Tze=XFe,GH=WFe,Ize=qFe,Nze=(e,t,n)=>{const r=new Map,i={platform:vze,...n},s={...i.platform,_c:r};return VFe(e,t,{...i,platform:s})};var Rze=typeof document<"u",_ze=function(){},J3=Rze?T.useLayoutEffect:_ze;function c9(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!c9(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!c9(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function _re(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function XH(e,t){const n=_re(e);return Math.round(t*n)/n}function xS(e){const t=T.useRef(e);return J3(()=>{t.current=e}),t}function Pze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:f}=e,[c,d]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,h]=T.useState(r);c9(u,r)||h(r);const[g,y]=T.useState(null),[U,x]=T.useState(null),v=T.useCallback(G=>{G!==S.current&&(S.current=G,y(G))},[]),E=T.useCallback(G=>{G!==A.current&&(A.current=G,x(G))},[]),k=s||g,M=o||U,S=T.useRef(null),A=T.useRef(null),I=T.useRef(c),R=l!=null,P=xS(l),_=xS(i),O=xS(f),V=T.useCallback(()=>{if(!S.current||!A.current)return;const G={placement:t,strategy:n,middleware:u};_.current&&(G.platform=_.current),Nze(S.current,A.current,G).then(W=>{const B={...W,isPositioned:O.current!==!1};j.current&&!c9(I.current,B)&&(I.current=B,fi.flushSync(()=>{d(B)}))})},[u,t,n,_,O]);J3(()=>{f===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(G=>({...G,isPositioned:!1})))},[f]);const j=T.useRef(!1);J3(()=>(j.current=!0,()=>{j.current=!1}),[]),J3(()=>{if(k&&(S.current=k),M&&(A.current=M),k&&M){if(P.current)return P.current(k,M,V);V()}},[k,M,V,P,R]);const F=T.useMemo(()=>({reference:S,floating:A,setReference:v,setFloating:E}),[v,E]),z=T.useMemo(()=>({reference:k,floating:M}),[k,M]),H=T.useMemo(()=>{const G={position:n,left:0,top:0};if(!z.floating)return G;const W=XH(z.floating,c.x),B=XH(z.floating,c.y);return a?{...G,transform:"translate("+W+"px, "+B+"px)",..._re(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:B}},[n,a,z.floating,c.x,c.y]);return T.useMemo(()=>({...c,update:V,refs:F,elements:z,floatingStyles:H}),[c,V,F,z,H])}const Dze=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?GH({element:r.current,padding:i}).fn(n):{}:r?GH({element:r,padding:i}).fn(n):{}}}},Lze=(e,t)=>({...Sze(e),options:[e,t]}),Oze=(e,t)=>({...Cze(e),options:[e,t]}),jze=(e,t)=>({...Ize(e),options:[e,t]}),Bze=(e,t)=>({...Aze(e),options:[e,t]}),Fze=(e,t)=>({...Mze(e),options:[e,t]}),zze=(e,t)=>({...Tze(e),options:[e,t]}),$ze=(e,t)=>({...Dze(e),options:[e,t]});var Hze="Arrow",Pre=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return m.jsx(cd.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});Pre.displayName=Hze;var Vze=Pre;function Wze(e){const[t,n]=T.useState(void 0);return k1(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,f=Array.isArray(l)?l[0]:l;o=f.inlineSize,a=f.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var bR="Popper",[Dre,Lre]=bre(bR),[Gze,Ore]=Dre(bR),jre=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return m.jsx(Gze,{scope:t,anchor:r,onAnchorChange:i,children:n})};jre.displayName=bR;var Bre="PopperAnchor",Fre=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=Ore(Bre,n),o=T.useRef(null),a=h0(t,o);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(cd.div,{...i,ref:a})});Fre.displayName=Bre;var yR="PopperContent",[Xze,Kze]=Dre(yR),zre=T.forwardRef((e,t)=>{var ce,ie,we,ke,Re,Fe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:f=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:u=!1,updatePositionStrategy:h="optimized",onPlaced:g,...y}=e,U=Ore(yR,n),[x,v]=T.useState(null),E=h0(t,$e=>v($e)),[k,M]=T.useState(null),S=Wze(k),A=(S==null?void 0:S.width)??0,I=(S==null?void 0:S.height)??0,R=r+(s!=="center"?"-"+s:""),P=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},_=Array.isArray(f)?f:[f],O=_.length>0,V={padding:P,boundary:_.filter(Zze),altBoundary:O},{refs:j,floatingStyles:F,placement:z,isPositioned:H,middlewareData:G}=Pze({strategy:"fixed",placement:R,whileElementsMounted:(...$e)=>kze(...$e,{animationFrame:h==="always"}),elements:{reference:U.anchor},middleware:[Lze({mainAxis:i+I,alignmentAxis:o}),l&&Oze({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?jze():void 0,...V}),l&&Bze({...V}),Fze({...V,apply:({elements:$e,rects:ve,availableWidth:Le,availableHeight:Ae})=>{const{width:ct,height:jt}=ve.reference,xn=$e.floating.style;xn.setProperty("--radix-popper-available-width",`${Le}px`),xn.setProperty("--radix-popper-available-height",`${Ae}px`),xn.setProperty("--radix-popper-anchor-width",`${ct}px`),xn.setProperty("--radix-popper-anchor-height",`${jt}px`)}}),k&&$ze({element:k,padding:a}),qze({arrowWidth:A,arrowHeight:I}),u&&zze({strategy:"referenceHidden",...V})]}),[W,B]=Vre(z),X=t0(g);k1(()=>{H&&(X==null||X())},[H,X]);const q=(ce=G.arrow)==null?void 0:ce.x,Y=(ie=G.arrow)==null?void 0:ie.y,oe=((we=G.arrow)==null?void 0:we.centerOffset)!==0,[ge,he]=T.useState();return k1(()=>{x&&he(window.getComputedStyle(x).zIndex)},[x]),m.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:H?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(ke=G.transformOrigin)==null?void 0:ke.x,(Re=G.transformOrigin)==null?void 0:Re.y].join(" "),...((Fe=G.hide)==null?void 0:Fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:m.jsx(Xze,{scope:n,placedSide:W,onArrowChange:M,arrowX:q,arrowY:Y,shouldHideArrow:oe,children:m.jsx(cd.div,{"data-side":W,"data-align":B,...y,ref:E,style:{...y.style,animation:H?void 0:"none"}})})})});zre.displayName=yR;var $re="PopperArrow",Yze={top:"bottom",right:"left",bottom:"top",left:"right"},Hre=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=Kze($re,r),o=Yze[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(Vze,{...i,ref:n,style:{...i.style,display:"block"}})})});Hre.displayName=$re;function Zze(e){return e!==null}var qze=e=>({name:"transformOrigin",options:e,fn(t){var U,x,v;const{placement:n,rects:r,middlewareData:i}=t,o=((U=i.arrow)==null?void 0:U.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[f,c]=Vre(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(((x=i.arrow)==null?void 0:x.x)??0)+a/2,h=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let g="",y="";return f==="bottom"?(g=o?d:`${u}px`,y=`${-l}px`):f==="top"?(g=o?d:`${u}px`,y=`${r.floating.height+l}px`):f==="right"?(g=`${-l}px`,y=o?d:`${h}px`):f==="left"&&(g=`${r.floating.width+l}px`,y=o?d:`${h}px`),{data:{x:g,y}}}});function Vre(e){const[t,n="center"]=e.split("-");return[t,n]}var Qze=jre,Wre=Fre,Jze=zre,e$e=Hre,t$e="Portal",Gre=T.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[i,s]=T.useState(!1);k1(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?CK.createPortal(m.jsx(cd.div,{...r,ref:t}),o):null});Gre.displayName=t$e;function n$e(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var UR=e=>{const{present:t,children:n}=e,r=r$e(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=h0(r.ref,i$e(i));return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};UR.displayName="Presence";function r$e(e){const[t,n]=T.useState(),r=T.useRef({}),i=T.useRef(e),s=T.useRef("none"),o=e?"mounted":"unmounted",[a,l]=n$e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const f=ZU(r.current);s.current=a==="mounted"?f:"none"},[a]),k1(()=>{const f=r.current,c=i.current;if(c!==e){const u=s.current,h=ZU(f);e?l("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(c&&u!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),k1(()=>{if(t){let f;const c=t.ownerDocument.defaultView??window,d=h=>{const y=ZU(r.current).includes(h.animationName);if(h.target===t&&y&&(l("ANIMATION_END"),!i.current)){const U=t.style.animationFillMode;t.style.animationFillMode="forwards",f=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=U)})}},u=h=>{h.target===t&&(s.current=ZU(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{c.clearTimeout(f),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function ZU(e){return(e==null?void 0:e.animationName)||"none"}function i$e(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function s$e({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=o$e({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=t0(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function o$e({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=t0(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var a$e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Cp=new WeakMap,qU=new WeakMap,QU={},wS=0,Xre=function(e){return e&&(e.host||Xre(e.parentNode))},l$e=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Xre(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},c$e=function(e,t,n,r){var i=l$e(t,Array.isArray(e)?e:[e]);QU[n]||(QU[n]=new WeakMap);var s=QU[n],o=[],a=new Set,l=new Set(i),f=function(d){!d||a.has(d)||(a.add(d),f(d.parentNode))};i.forEach(f);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(u){if(a.has(u))c(u);else try{var h=u.getAttribute(r),g=h!==null&&h!=="false",y=(Cp.get(u)||0)+1,U=(s.get(u)||0)+1;Cp.set(u,y),s.set(u,U),o.push(u),y===1&&g&&qU.set(u,!0),U===1&&u.setAttribute(n,"true"),g||u.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",u,x)}})};return c(t),a.clear(),wS++,function(){o.forEach(function(d){var u=Cp.get(d)-1,h=s.get(d)-1;Cp.set(d,u),s.set(d,h),u||(qU.has(d)||d.removeAttribute(r),qU.delete(d)),h||d.removeAttribute(n)}),wS--,wS||(Cp=new WeakMap,Cp=new WeakMap,qU=new WeakMap,QU={})}},f$e=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=a$e(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),c$e(r,i,n,"aria-hidden")):function(){return null}},pc=function(){return pc=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},pc.apply(this,arguments)};function Kre(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function d$e(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var ex="right-scroll-bar-position",tx="width-before-scroll-bar",u$e="with-scroll-bars-hidden",h$e="--removed-body-scroll-bar-size";function vS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function p$e(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var m$e=typeof window<"u"?T.useLayoutEffect:T.useEffect,KH=new WeakMap;function g$e(e,t){var n=p$e(null,function(r){return e.forEach(function(i){return vS(i,r)})});return m$e(function(){var r=KH.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||vS(a,null)}),s.forEach(function(a){i.has(a)||vS(a,o)})}KH.set(n,e)},[e]),n}function b$e(e){return e}function y$e(e,t){t===void 0&&(t=b$e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},f=function(){return Promise.resolve().then(l)};f(),n={push:function(c){o.push(c),f()},filter:function(c){return o=o.filter(c),n}}}};return i}function U$e(e){e===void 0&&(e={});var t=y$e(null);return t.options=pc({async:!0,ssr:!1},e),t}var Yre=function(e){var t=e.sideCar,n=Kre(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,pc({},n))};Yre.isSideCarExport=!0;function x$e(e,t){return e.useMedium(t),Yre}var Zre=U$e(),ES=function(){},e7=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:ES,onWheelCapture:ES,onTouchMoveCapture:ES}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,f=e.removeScrollBar,c=e.enabled,d=e.shards,u=e.sideCar,h=e.noRelative,g=e.noIsolation,y=e.inert,U=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,E=e.gapMode,k=Kre(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=u,S=g$e([n,t]),A=pc(pc({},k),i);return T.createElement(T.Fragment,null,c&&T.createElement(M,{sideCar:Zre,removeScrollBar:f,shards:d,noRelative:h,noIsolation:g,inert:y,setCallbacks:s,allowPinchZoom:!!U,lockRef:n,gapMode:E}),o?T.cloneElement(T.Children.only(a),pc(pc({},A),{ref:S})):T.createElement(v,pc({},A,{className:l,ref:S}),a))});e7.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};e7.classNames={fullWidth:tx,zeroRight:ex};var w$e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function v$e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=w$e();return t&&e.setAttribute("nonce",t),e}function E$e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function k$e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var S$e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=v$e())&&(E$e(t,n),k$e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},C$e=function(){var e=S$e();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},qre=function(){var e=C$e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},A$e={left:0,top:0,right:0,gap:0},kS=function(e){return parseInt(e||"",10)||0},M$e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[kS(n),kS(r),kS(i)]},T$e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return A$e;var t=M$e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},I$e=qre(),wm="data-scroll-locked",N$e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(u$e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(wm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ex,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(tx,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ex," .").concat(ex,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(tx," .").concat(tx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wm,`] {
    `).concat(h$e,": ").concat(a,`px;
  }
`)},YH=function(){var e=parseInt(document.body.getAttribute(wm)||"0",10);return isFinite(e)?e:0},R$e=function(){T.useEffect(function(){return document.body.setAttribute(wm,(YH()+1).toString()),function(){var e=YH()-1;e<=0?document.body.removeAttribute(wm):document.body.setAttribute(wm,e.toString())}},[])},_$e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;R$e();var s=T.useMemo(function(){return T$e(i)},[i]);return T.createElement(I$e,{styles:N$e(s,!t,i,n?"":"!important")})},NM=!1;if(typeof window<"u")try{var JU=Object.defineProperty({},"passive",{get:function(){return NM=!0,!0}});window.addEventListener("test",JU,JU),window.removeEventListener("test",JU,JU)}catch{NM=!1}var Ap=NM?{passive:!1}:!1,P$e=function(e){return e.tagName==="TEXTAREA"},Qre=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!P$e(e)&&n[t]==="visible")},D$e=function(e){return Qre(e,"overflowY")},L$e=function(e){return Qre(e,"overflowX")},ZH=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Jre(e,r);if(i){var s=eie(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},O$e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},j$e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Jre=function(e,t){return e==="v"?D$e(t):L$e(t)},eie=function(e,t){return e==="v"?O$e(t):j$e(t)},B$e=function(e,t){return e==="h"&&t==="rtl"?-1:1},F$e=function(e,t,n,r,i){var s=B$e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),f=!1,c=o>0,d=0,u=0;do{if(!a)break;var h=eie(e,a),g=h[0],y=h[1],U=h[2],x=y-U-s*g;(g||x)&&Jre(e,a)&&(d+=x,u+=g);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(d)<1||!i)||!c&&(Math.abs(u)<1||!i))&&(f=!0),f},e3=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},qH=function(e){return[e.deltaX,e.deltaY]},QH=function(e){return e&&"current"in e?e.current:e},z$e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},$$e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},H$e=0,Mp=[];function V$e(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(H$e++)[0],s=T.useState(qre)[0],o=T.useRef(e);T.useEffect(function(){o.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var y=d$e([e.lockRef.current],(e.shards||[]).map(QH)).filter(Boolean);return y.forEach(function(U){return U.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(U){return U.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=T.useCallback(function(y,U){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var x=e3(y),v=n.current,E="deltaX"in y?y.deltaX:v[0]-x[0],k="deltaY"in y?y.deltaY:v[1]-x[1],M,S=y.target,A=Math.abs(E)>Math.abs(k)?"h":"v";if("touches"in y&&A==="h"&&S.type==="range")return!1;var I=window.getSelection(),R=I&&I.anchorNode,P=R?R===S||R.contains(S):!1;if(P)return!1;var _=ZH(A,S);if(!_)return!0;if(_?M=A:(M=A==="v"?"h":"v",_=ZH(A,S)),!_)return!1;if(!r.current&&"changedTouches"in y&&(E||k)&&(r.current=M),!M)return!0;var O=r.current||M;return F$e(O,U,y,O==="h"?E:k,!0)},[]),l=T.useCallback(function(y){var U=y;if(!(!Mp.length||Mp[Mp.length-1]!==s)){var x="deltaY"in U?qH(U):e3(U),v=t.current.filter(function(M){return M.name===U.type&&(M.target===U.target||U.target===M.shadowParent)&&z$e(M.delta,x)})[0];if(v&&v.should){U.cancelable&&U.preventDefault();return}if(!v){var E=(o.current.shards||[]).map(QH).filter(Boolean).filter(function(M){return M.contains(U.target)}),k=E.length>0?a(U,E[0]):!o.current.noIsolation;k&&U.cancelable&&U.preventDefault()}}},[]),f=T.useCallback(function(y,U,x,v){var E={name:y,delta:U,target:x,should:v,shadowParent:W$e(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(k){return k!==E})},1)},[]),c=T.useCallback(function(y){n.current=e3(y),r.current=void 0},[]),d=T.useCallback(function(y){f(y.type,qH(y),y.target,a(y,e.lockRef.current))},[]),u=T.useCallback(function(y){f(y.type,e3(y),y.target,a(y,e.lockRef.current))},[]);T.useEffect(function(){return Mp.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:u}),document.addEventListener("wheel",l,Ap),document.addEventListener("touchmove",l,Ap),document.addEventListener("touchstart",c,Ap),function(){Mp=Mp.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Ap),document.removeEventListener("touchmove",l,Ap),document.removeEventListener("touchstart",c,Ap)}},[]);var h=e.removeScrollBar,g=e.inert;return T.createElement(T.Fragment,null,g?T.createElement(s,{styles:$$e(i)}):null,h?T.createElement(_$e,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function W$e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const G$e=x$e(Zre,V$e);var tie=T.forwardRef(function(e,t){return T.createElement(e7,pc({},e,{ref:t,sideCar:G$e}))});tie.classNames=e7.classNames;var xR="Popover",[nie,mqe]=bre(xR,[Lre]),jy=Lre(),[X$e,p0]=nie(xR),rie=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,a=jy(t),l=T.useRef(null),[f,c]=T.useState(!1),[d=!1,u]=s$e({prop:r,defaultProp:i,onChange:s});return m.jsx(Qze,{...a,children:m.jsx(X$e,{scope:t,contentId:NFe(),triggerRef:l,open:d,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(h=>!h),[u]),hasCustomAnchor:f,onCustomAnchorAdd:T.useCallback(()=>c(!0),[]),onCustomAnchorRemove:T.useCallback(()=>c(!1),[]),modal:o,children:n})})};rie.displayName=xR;var iie="PopoverAnchor",K$e=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=p0(iie,n),s=jy(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return T.useEffect(()=>(o(),()=>a()),[o,a]),m.jsx(Wre,{...s,...r,ref:t})});K$e.displayName=iie;var sie="PopoverTrigger",oie=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=p0(sie,n),s=jy(n),o=h0(t,i.triggerRef),a=m.jsx(cd.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":uie(i.open),...r,ref:o,onClick:Xu(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:m.jsx(Wre,{asChild:!0,...s,children:a})});oie.displayName=sie;var wR="PopoverPortal",[Y$e,Z$e]=nie(wR,{forceMount:void 0}),aie=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=p0(wR,t);return m.jsx(Y$e,{scope:t,forceMount:n,children:m.jsx(UR,{present:n||s.open,children:m.jsx(Gre,{asChild:!0,container:i,children:r})})})};aie.displayName=wR;var Zg="PopoverContent",lie=T.forwardRef((e,t)=>{const n=Z$e(Zg,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,s=p0(Zg,e.__scopePopover);return m.jsx(UR,{present:r||s.open,children:s.modal?m.jsx(q$e,{...i,ref:t}):m.jsx(Q$e,{...i,ref:t})})});lie.displayName=Zg;var q$e=T.forwardRef((e,t)=>{const n=p0(Zg,e.__scopePopover),r=T.useRef(null),i=h0(t,r),s=T.useRef(!1);return T.useEffect(()=>{const o=r.current;if(o)return f$e(o)},[]),m.jsx(tie,{as:fR,allowPinchZoom:!0,children:m.jsx(cie,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xu(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Xu(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,f=a.button===2||l;s.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:Xu(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Q$e=T.forwardRef((e,t)=>{const n=p0(Zg,e.__scopePopover),r=T.useRef(!1),i=T.useRef(!1);return m.jsx(cie,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,f;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((f=n.triggerRef.current)==null?void 0:f.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),cie=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:c,...d}=e,u=p0(Zg,n),h=jy(n);return wFe(),m.jsx(wre,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(Ure,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f,onDismiss:()=>u.onOpenChange(!1),children:m.jsx(Jze,{"data-state":uie(u.open),role:"dialog",id:u.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),fie="PopoverClose",J$e=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=p0(fie,n);return m.jsx(cd.button,{type:"button",...r,ref:t,onClick:Xu(e.onClick,()=>i.onOpenChange(!1))})});J$e.displayName=fie;var eHe="PopoverArrow",die=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=jy(n);return m.jsx(e$e,{...i,...r,ref:t})});die.displayName=eHe;function uie(e){return e?"open":"closed"}var t7=rie,n7=oie,tHe=aie,vR=lie,hie=die,SS={exports:{}},JH;function nHe(){return JH||(JH=1,function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,i){return i.filter(function(s){return n.test(r,s)})},n.test=function(r,i){return n.match(r,i)!==null},n.match=function(r,i,s){s=s||{};var o=0,a=[],l=i.length,f=0,c=0,d=s.pre||"",u=s.post||"",h=s.caseSensitive&&i||i.toLowerCase(),g;r=s.caseSensitive&&r||r.toLowerCase();for(var y=0;y<l;y++)g=i[y],h[y]===r[o]?(g=d+g+u,o+=1,c+=1+c):c=0,f+=c,a[a.length]=g;return o===r.length?(f=h===r?1/0:f,{rendered:a.join(""),score:f}):null},n.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(o,a,l,f){var c=a;s.extract&&(c=s.extract(a));var d=n.match(r,c,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()}(SS)),SS.exports}var rHe=nHe();const iHe=Ia(rHe),{useDebugValue:sHe}=Ie,{useSyncExternalStoreWithSelector:oHe}=EK,aHe=e=>e;function lHe(e,t=aHe,n){const r=oHe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return sHe(r),r}const cHe=e=>{const t=typeof e=="function"?kK(e):e,n=(r,i)=>lHe(t,r,i);return Object.assign(n,t),n},fHe=e=>cHe(e);var eV,tV;const nV=typeof window<"u"&&((eV=window.document)!=null&&eV.createElement||((tV=window.navigator)==null?void 0:tV.product)==="ReactNative")?Ie.useLayoutEffect:Ie.useEffect;function zl(){const e=fHe(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(i=>i.set),r=e(i=>i.version);return nV(()=>{n(i=>({version:i.version+1}))},[]),nV(()=>(n(({current:i})=>({current:[...i,t]})),()=>n(({current:i})=>({current:i.filter(s=>s!==t)}))),[t,r]),null},Out:()=>{const t=e(n=>n.current);return Ie.createElement(Ie.Fragment,null,t)}}}function ui(){return ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ui.apply(null,arguments)}function CS(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function dHe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,y=(u==null?void 0:u[e][l])||a,U=T.useMemo(()=>g,Object.values(g));return T.createElement(y.Provider,{value:U},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,uHe(i,...t)]}function uHe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function vm(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function hHe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,y=(u==null?void 0:u[e][l])||a,U=T.useMemo(()=>g,Object.values(g));return T.createElement(y.Provider,{value:U},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,pHe(i,...t)]}function pHe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function mHe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function pie(...e){return t=>e.forEach(n=>mHe(n,t))}function rV(...e){return T.useCallback(pie(...e),e)}const RM=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(bHe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(_M,ui({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(_M,ui({},r,{ref:t}),n)});RM.displayName="Slot";const _M=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...yHe(r,n.props),ref:pie(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});_M.displayName="SlotClone";const gHe=({children:e})=>T.createElement(T.Fragment,null,e);function bHe(e){return T.isValidElement(e)&&e.type===gHe}function yHe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function UHe(e){const t=e+"CollectionProvider",[n,r]=hHe(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:g,children:y}=h,U=Ie.useRef(null),x=Ie.useRef(new Map).current;return Ie.createElement(i,{scope:g,itemMap:x,collectionRef:U},y)},a=e+"CollectionSlot",l=Ie.forwardRef((h,g)=>{const{scope:y,children:U}=h,x=s(a,y),v=rV(g,x.collectionRef);return Ie.createElement(RM,{ref:v},U)}),f=e+"CollectionItemSlot",c="data-radix-collection-item",d=Ie.forwardRef((h,g)=>{const{scope:y,children:U,...x}=h,v=Ie.useRef(null),E=rV(g,v),k=s(f,y);return Ie.useEffect(()=>(k.itemMap.set(v,{ref:v,...x}),()=>void k.itemMap.delete(v))),Ie.createElement(RM,{[c]:"",ref:E},U)});function u(h){const g=s(e+"CollectionConsumer",h);return Ie.useCallback(()=>{const U=g.collectionRef.current;if(!U)return[];const x=Array.from(U.querySelectorAll(`[${c}]`));return Array.from(g.itemMap.values()).sort((k,M)=>x.indexOf(k.ref.current)-x.indexOf(M.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},u,r]}function xHe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function mie(...e){return t=>e.forEach(n=>xHe(n,t))}function wHe(...e){return T.useCallback(mie(...e),e)}function vHe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,y=(u==null?void 0:u[e][l])||a,U=T.useMemo(()=>g,Object.values(g));return T.createElement(y.Provider,{value:U},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,EHe(i,...t)]}function EHe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}const kHe=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},SHe=tT.useId||(()=>{});let CHe=0;function AHe(e){const[t,n]=T.useState(SHe());return kHe(()=>{n(r=>r??String(CHe++))},[e]),t?`radix-${t}`:""}const gie=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(THe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(PM,ui({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(PM,ui({},r,{ref:t}),n)});gie.displayName="Slot";const PM=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...IHe(r,n.props),ref:mie(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});PM.displayName="SlotClone";const MHe=({children:e})=>T.createElement(T.Fragment,null,e);function THe(e){return T.isValidElement(e)&&e.type===MHe}function IHe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const NHe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],bie=NHe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?gie:t;return T.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),T.createElement(a,ui({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function ER(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function RHe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=_He({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=ER(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function _He({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=ER(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const PHe=T.createContext(void 0);function yie(e){const t=T.useContext(PHe);return e||t||"ltr"}const AS="rovingFocusGroup.onEntryFocus",DHe={bubbles:!1,cancelable:!0},kR="RovingFocusGroup",[DM,Uie,LHe]=UHe(kR),[OHe,xie]=vHe(kR,[LHe]),[jHe,BHe]=OHe(kR),FHe=T.forwardRef((e,t)=>T.createElement(DM.Provider,{scope:e.__scopeRovingFocusGroup},T.createElement(DM.Slot,{scope:e.__scopeRovingFocusGroup},T.createElement(zHe,ui({},e,{ref:t}))))),zHe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:f,...c}=e,d=T.useRef(null),u=wHe(t,d),h=yie(s),[g=null,y]=RHe({prop:o,defaultProp:a,onChange:l}),[U,x]=T.useState(!1),v=ER(f),E=Uie(n),k=T.useRef(!1),[M,S]=T.useState(0);return T.useEffect(()=>{const A=d.current;if(A)return A.addEventListener(AS,v),()=>A.removeEventListener(AS,v)},[v]),T.createElement(jHe,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:g,onItemFocus:T.useCallback(A=>y(A),[y]),onItemShiftTab:T.useCallback(()=>x(!0),[]),onFocusableItemAdd:T.useCallback(()=>S(A=>A+1),[]),onFocusableItemRemove:T.useCallback(()=>S(A=>A-1),[])},T.createElement(bie.div,ui({tabIndex:U||M===0?-1:0,"data-orientation":r},c,{ref:u,style:{outline:"none",...e.style},onMouseDown:vm(e.onMouseDown,()=>{k.current=!0}),onFocus:vm(e.onFocus,A=>{const I=!k.current;if(A.target===A.currentTarget&&I&&!U){const R=new CustomEvent(AS,DHe);if(A.currentTarget.dispatchEvent(R),!R.defaultPrevented){const P=E().filter(F=>F.focusable),_=P.find(F=>F.active),O=P.find(F=>F.id===g),j=[_,O,...P].filter(Boolean).map(F=>F.ref.current);wie(j)}}k.current=!1}),onBlur:vm(e.onBlur,()=>x(!1))})))}),$He="RovingFocusGroupItem",HHe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=e,a=AHe(),l=s||a,f=BHe($He,n),c=f.currentTabStopId===l,d=Uie(n),{onFocusableItemAdd:u,onFocusableItemRemove:h}=f;return T.useEffect(()=>{if(r)return u(),()=>h()},[r,u,h]),T.createElement(DM.ItemSlot,{scope:n,id:l,focusable:r,active:i},T.createElement(bie.span,ui({tabIndex:c?0:-1,"data-orientation":f.orientation},o,{ref:t,onMouseDown:vm(e.onMouseDown,g=>{r?f.onItemFocus(l):g.preventDefault()}),onFocus:vm(e.onFocus,()=>f.onItemFocus(l)),onKeyDown:vm(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){f.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=GHe(g,f.orientation,f.dir);if(y!==void 0){g.preventDefault();let x=d().filter(v=>v.focusable).map(v=>v.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const v=x.indexOf(g.currentTarget);x=f.loop?XHe(x,v+1):x.slice(v+1)}setTimeout(()=>wie(x))}})})))}),VHe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function WHe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function GHe(e,t,n){const r=WHe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return VHe[r]}function wie(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function XHe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const KHe=FHe,YHe=HHe;function ZHe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function vie(...e){return t=>e.forEach(n=>ZHe(n,t))}function qHe(...e){return T.useCallback(vie(...e),e)}const LM=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{};function QHe(e,t){return T.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const Eie=e=>{const{present:t,children:n}=e,r=JHe(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=qHe(r.ref,i.ref);return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};Eie.displayName="Presence";function JHe(e){const[t,n]=T.useState(),r=T.useRef({}),i=T.useRef(e),s=T.useRef("none"),o=e?"mounted":"unmounted",[a,l]=QHe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const f=t3(r.current);s.current=a==="mounted"?f:"none"},[a]),LM(()=>{const f=r.current,c=i.current;if(c!==e){const u=s.current,h=t3(f);e?l("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(c&&u!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),LM(()=>{if(t){const f=d=>{const h=t3(r.current).includes(d.animationName);d.target===t&&h&&fi.flushSync(()=>l("ANIMATION_END"))},c=d=>{d.target===t&&(s.current=t3(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function t3(e){return(e==null?void 0:e.animationName)||"none"}const kie=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(tVe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(OM,ui({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(OM,ui({},r,{ref:t}),n)});kie.displayName="Slot";const OM=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...nVe(r,n.props),ref:vie(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});OM.displayName="SlotClone";const eVe=({children:e})=>T.createElement(T.Fragment,null,e);function tVe(e){return T.isValidElement(e)&&e.type===eVe}function nVe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const rVe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],r7=rVe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?kie:t;return T.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),T.createElement(a,ui({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Sie(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function iVe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=sVe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=Sie(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function sVe({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=Sie(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const oVe=tT.useId||(()=>{});let aVe=0;function lVe(e){const[t,n]=T.useState(oVe());return LM(()=>{e||n(r=>r??String(aVe++))},[e]),e||(t?`radix-${t}`:"")}const Cie="Tabs",[cVe,gqe]=dHe(Cie,[xie]),Aie=xie(),[fVe,SR]=cVe(Cie),dVe=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...f}=e,c=yie(a),[d,u]=iVe({prop:r,onChange:i,defaultProp:s});return T.createElement(fVe,{scope:n,baseId:lVe(),value:d,onValueChange:u,orientation:o,dir:c,activationMode:l},T.createElement(r7.div,ui({dir:c,"data-orientation":o},f,{ref:t})))}),uVe="TabsList",hVe=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=SR(uVe,n),o=Aie(n);return T.createElement(KHe,ui({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),T.createElement(r7.div,ui({role:"tablist","aria-orientation":s.orientation},i,{ref:t})))}),pVe="TabsTrigger",mVe=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,o=SR(pVe,n),a=Aie(n),l=Mie(o.baseId,r),f=Tie(o.baseId,r),c=r===o.value;return T.createElement(YHe,ui({asChild:!0},a,{focusable:!i,active:c}),T.createElement(r7.button,ui({type:"button",role:"tab","aria-selected":c,"aria-controls":f,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:t,onMouseDown:CS(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:CS(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:CS(e.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!i&&d&&o.onValueChange(r)})})))}),gVe="TabsContent",bVe=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=e,a=SR(gVe,n),l=Mie(a.baseId,r),f=Tie(a.baseId,r),c=r===a.value,d=T.useRef(c);return T.useEffect(()=>{const u=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(u)},[]),T.createElement(Eie,{present:i||c},({present:u})=>T.createElement(r7.div,ui({"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!u,id:f,tabIndex:0},o,{ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0}}),u&&s))});function Mie(e,t){return`${e}-trigger-${t}`}function Tie(e,t){return`${e}-content-${t}`}const Iie=dVe,Nie=hVe,Rie=mVe,_ie=bVe;var MS,iV;function yVe(){if(iV)return MS;iV=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Au=="object"&&Au&&Au.Object===Object&&Au,f=typeof self=="object"&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,u=d.toString,h=Math.max,g=Math.min,y=function(){return c.Date.now()};function U(M,S,A){var I,R,P,_,O,V,j=0,F=!1,z=!1,H=!0;if(typeof M!="function")throw new TypeError(e);S=k(S)||0,x(A)&&(F=!!A.leading,z="maxWait"in A,P=z?h(k(A.maxWait)||0,S):P,H="trailing"in A?!!A.trailing:H);function G(ce){var ie=I,we=R;return I=R=void 0,j=ce,_=M.apply(we,ie),_}function W(ce){return j=ce,O=setTimeout(q,S),F?G(ce):_}function B(ce){var ie=ce-V,we=ce-j,ke=S-ie;return z?g(ke,P-we):ke}function X(ce){var ie=ce-V,we=ce-j;return V===void 0||ie>=S||ie<0||z&&we>=P}function q(){var ce=y();if(X(ce))return Y(ce);O=setTimeout(q,B(ce))}function Y(ce){return O=void 0,H&&I?G(ce):(I=R=void 0,_)}function oe(){O!==void 0&&clearTimeout(O),j=0,I=V=R=O=void 0}function ge(){return O===void 0?_:Y(y())}function he(){var ce=y(),ie=X(ce);if(I=arguments,R=this,V=ce,ie){if(O===void 0)return W(V);if(z)return O=setTimeout(q,S),G(V)}return O===void 0&&(O=setTimeout(q,S)),_}return he.cancel=oe,he.flush=ge,he}function x(M){var S=typeof M;return!!M&&(S=="object"||S=="function")}function v(M){return!!M&&typeof M=="object"}function E(M){return typeof M=="symbol"||v(M)&&u.call(M)==n}function k(M){if(typeof M=="number")return M;if(E(M))return t;if(x(M)){var S=typeof M.valueOf=="function"?M.valueOf():M;M=x(S)?S+"":S}if(typeof M!="string")return M===0?M:+M;M=M.replace(r,"");var A=s.test(M);return A||o.test(M)?a(M.slice(2),A?2:8):i.test(M)?t:+M}return MS=U,MS}var UVe=yVe();const xVe=Ia(UVe);function wVe(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var vVe={};wVe(vVe,"LaserPointer",()=>d9);function Tr([e,t,n],[r,i,s]){return[e+r,t+i,n+s]}function J5([e,t,n],[r,i,s]){return[e-r,t-i,n-s]}function Kr([e,t,n],r){return[e*r,t*r,n*r]}function Tp([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Ji([e,t,n],r){return[Math.cos(r)*e-Math.sin(r)*t,Math.sin(r)*e+Math.cos(r)*t,n]}function EVe(e,t,n){return Tr(e,Kr(J5(t,e),n))}function sV(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function oV(e){return Math.atan2(Math.sin(e),Math.cos(e))}function aV([e,t]){return Math.sqrt(e**2+t**2)}function Em([e,t],[n,r]){return Math.sqrt((n-e)**2+(r-t)**2)}function kVe(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=Em(e[n-1],e[n]);return t+=Em(e[e.length-2],e[e.length-1]),t}const SVe=(e,t,n)=>Math.max(t,Math.min(n,e));function CVe(e,t,n){const r=Em(t,n);if(r===0)return Em(e,t);const i=SVe(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r**2,0,1),s=[t[0]+i*(n[0]-t[0]),t[1]+i*(n[1]-t[1]),e[2]];return Em(s,e)}function f9(e,t){if(t===0||e.length<=2)return e;const n=e[0],r=e[e.length-1],[i,s]=e.reduce(([o,a],l,f)=>{const c=CVe(l,n,r);return c>o?[c,f]:[o,a]},[0,-1]);if(i>=t){const o=e[s];return[...f9([n,...e.slice(1,s),o],t).slice(0,-1),o,...f9([o,...e.slice(s,-1),r],t).slice(1)]}else return[n,r]}const su=class su{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},su.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=EVe(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),kVe(this.tailPoints)>su.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,r,i,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:r,totalLength:i})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=f9(n,this.options.simplify));const r=n.length;if(r===0)return[];if(r===1){const A=n[0],I=this.getSize(t,A[2],0,r,0);if(I<.5)return[];const R=[];for(let P=0;P<=Math.PI*2;P+=Math.PI/16)R.push(Tr(A,Kr(Ji([1,0,0],P),I)));return R.push(Tr(A,Kr([1,0,0],this.getSize(t,A[2],0,r,0)))),R}if(r===2){const A=n[0],I=n[1],R=this.getSize(t,A[2],0,r,0),P=this.getSize(t,I[2],0,r,0);if(R<.5||P<.5)return[];const _=[],O=sV(A,[A[0],A[1]-100,A[2]],I);for(let V=O;V<=Math.PI+O;V+=Math.PI/16)_.push(Tr(A,Kr(Ji([1,0,0],V),R)));for(let V=Math.PI+O;V<=Math.PI*2+O;V+=Math.PI/16)_.push(Tr(I,Kr(Ji([1,0,0],V),P)));return _.push(_[0]),_}const i=[],s=[];let o=0,a=0,l=0,f=0;for(let A=1;A<r-1;A++){const I=n[A-1],R=n[A],P=n[A+1];let _=R[2];const O=Em(I,R);f+=O,o=a+(O-a)*.2;const V=this.getSize(t,_,A,r,f);if(V===0){l=A+1;continue}const j=Tp(J5(I,R)),F=Tp(J5(P,R)),z=Ji(j,Math.PI/2),H=Ji(j,-Math.PI/2),G=Ji(F,Math.PI/2),W=Ji(F,-Math.PI/2),B=Tr(R,Kr(z,V)),X=Tr(R,Kr(H,V)),q=Tr(R,Kr(G,V)),Y=Tr(R,Kr(W,V)),oe=Tr(z,W),ge=Tr(H,G),he=Tr(R,Kr(aV(oe)===0?j:Tp(oe),V)),ce=Tr(R,Kr(aV(ge)===0?F:Tp(ge),V)),ie=oV(sV(R,I,P)),we=su.constants.cornerDetectionMaxAngle/180*Math.PI*su.constants.cornerDetectionVariance(o);if(Math.abs(ie)<we){const ke=Math.abs(oV(Math.PI-ie));if(ke===0)continue;if(ie<0){s.push(X,ce);for(let Re=0;Re<=ke;Re+=ke/4)i.push(Tr(R,Ji(Kr(z,V),Re)));for(let Re=ke;Re>=0;Re-=ke/4)s.push(Tr(R,Ji(Kr(z,V),Re)));s.push(ce,q)}else{i.push(B,he);for(let Re=0;Re<=ke;Re+=ke/4)s.push(Tr(R,Ji(Kr(z,-V),-Re)));for(let Re=ke;Re>=0;Re-=ke/4)i.push(Tr(R,Ji(Kr(z,-V),-Re)));i.push(he,Y)}}else i.push(he),s.push(ce);a=o}if(l>=r-2)if(this.options.keepHead){const A=n[r-1],I=[];for(let R=0;R<=Math.PI*2;R+=Math.PI/16)I.push(Tr(A,Kr(Ji([1,0,0],R),this.options.size)));return I.push(Tr(A,Kr([1,0,0],this.options.size))),I}else return[];const c=n[l],d=n[l+1],u=n[r-2],h=n[r-1],g=Tp(J5(d,c)),y=Tp(J5(u,h)),U=Ji(g,-Math.PI/2),x=Ji(y,Math.PI/2),v=this.getSize(t,c[2],0,r,0),E=[],k=this.options.keepHead?this.options.size:this.getSize(t,u[2],r-2,r,f),M=[];if(v>1){for(let A=0;A<=Math.PI;A+=Math.PI/16)E.unshift(Tr(c,Ji(Kr(U,v),-A)));E.unshift(Tr(c,Kr(U,-v)))}else E.push(c);for(let A=0;A<=Math.PI*3;A+=Math.PI/16)M.push(Tr(h,Ji(Kr(x,-k),-A)));const S=[...E,...i,...M.reverse(),...s.reverse()];return E.length>0&&S.push(E[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?f9(S,this.options.simplify):S}};su.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},su.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let d9=su;var Pie=mre(),{useAtom:Er,useSetAtom:i7,useAtomValue:Die,useStore:bqe}=Pie,AVe=Pie.Provider,pl=cR(),MVe=cEe({"./locales/ar-SA.json":()=>Ze(()=>import("./ar-SA-G6X2FPQ2-CyJETpU1.js"),[]),"./locales/az-AZ.json":()=>Ze(()=>import("./az-AZ-76LH7QW2-DuRLU2Tg.js"),[]),"./locales/bg-BG.json":()=>Ze(()=>import("./bg-BG-XCXSNQG7-CSrAZXmf.js"),[]),"./locales/bn-BD.json":()=>Ze(()=>import("./bn-BD-2XOGV67Q-DKtYQT7x.js"),[]),"./locales/ca-ES.json":()=>Ze(()=>import("./ca-ES-6MX7JW3Y-GL8nrMbU.js"),[]),"./locales/cs-CZ.json":()=>Ze(()=>import("./cs-CZ-2BRQDIVT-DlqBnYoJ.js"),[]),"./locales/da-DK.json":()=>Ze(()=>import("./da-DK-5WZEPLOC-Dh-wE2Ek.js"),[]),"./locales/de-DE.json":()=>Ze(()=>import("./de-DE-XR44H4JA-DwT8O2vQ.js"),[]),"./locales/el-GR.json":()=>Ze(()=>import("./el-GR-BZB4AONW-C2O3kJWd.js"),[]),"./locales/en.json":()=>Ze(()=>Promise.resolve().then(()=>JZe),void 0),"./locales/es-ES.json":()=>Ze(()=>import("./es-ES-U4NZUMDT-DSPArvZw.js"),[]),"./locales/eu-ES.json":()=>Ze(()=>import("./eu-ES-A7QVB2H4-Dj3OWi90.js"),[]),"./locales/fa-IR.json":()=>Ze(()=>import("./fa-IR-HGAKTJCU-B2ZzX37o.js"),[]),"./locales/fi-FI.json":()=>Ze(()=>import("./fi-FI-Z5N7JZ37-Con_oKbN.js"),[]),"./locales/fr-FR.json":()=>Ze(()=>import("./fr-FR-RHASNOE6-DmZ7TlsX.js"),[]),"./locales/gl-ES.json":()=>Ze(()=>import("./gl-ES-HMX3MZ6V-Ks1lDuxC.js"),[]),"./locales/he-IL.json":()=>Ze(()=>import("./he-IL-6SHJWFNN-VRdC6R-g.js"),[]),"./locales/hi-IN.json":()=>Ze(()=>import("./hi-IN-IWLTKZ5I-BM-P9A--.js"),[]),"./locales/hu-HU.json":()=>Ze(()=>import("./hu-HU-A5ZG7DT2-P--ywuuu.js"),[]),"./locales/id-ID.json":()=>Ze(()=>import("./id-ID-SAP4L64H-l7T04V88.js"),[]),"./locales/it-IT.json":()=>Ze(()=>import("./it-IT-JPQ66NNP-NPY30YQJ.js"),[]),"./locales/ja-JP.json":()=>Ze(()=>import("./ja-JP-DBVTYXUO-DpP7mZ6L.js"),[]),"./locales/kaa.json":()=>Ze(()=>import("./kaa-6HZHGXH3-Dzoo1g_C.js"),[]),"./locales/kab-KAB.json":()=>Ze(()=>import("./kab-KAB-ZGHBKWFO-Bwv-2nN1.js"),[]),"./locales/kk-KZ.json":()=>Ze(()=>import("./kk-KZ-P5N5QNE5-BBL2IQCO.js"),[]),"./locales/km-KH.json":()=>Ze(()=>import("./km-KH-HSX4SM5Z-w102d6V2.js"),[]),"./locales/ko-KR.json":()=>Ze(()=>import("./ko-KR-MTYHY66A-6W4jCmgm.js"),[]),"./locales/ku-TR.json":()=>Ze(()=>import("./ku-TR-6OUDTVRD-fv2xkADx.js"),[]),"./locales/lt-LT.json":()=>Ze(()=>import("./lt-LT-XHIRWOB4-lGpfZtSP.js"),[]),"./locales/lv-LV.json":()=>Ze(()=>import("./lv-LV-5QDEKY6T-CLuwYp3D.js"),[]),"./locales/mr-IN.json":()=>Ze(()=>import("./mr-IN-CRQNXWMA-BXPcI6or.js"),[]),"./locales/my-MM.json":()=>Ze(()=>import("./my-MM-5M5IBNSE-BP6rTKEu.js"),[]),"./locales/nb-NO.json":()=>Ze(()=>import("./nb-NO-T6EIAALU-CBA-jNiQ.js"),[]),"./locales/nl-NL.json":()=>Ze(()=>import("./nl-NL-IS3SIHDZ-D7ugQbN9.js"),[]),"./locales/nn-NO.json":()=>Ze(()=>import("./nn-NO-6E72VCQL-BD-QyMJs.js"),[]),"./locales/oc-FR.json":()=>Ze(()=>import("./oc-FR-POXYY2M6-CYEZbifG.js"),[]),"./locales/pa-IN.json":()=>Ze(()=>import("./pa-IN-N4M65BXN-BPer1x-R.js"),[]),"./locales/percentages.json":()=>Ze(()=>Promise.resolve().then(()=>eqe),void 0),"./locales/pl-PL.json":()=>Ze(()=>import("./pl-PL-T2D74RX3-Bo-TZohv.js"),[]),"./locales/pt-BR.json":()=>Ze(()=>import("./pt-BR-5N22H2LF-C85FF75V.js"),[]),"./locales/pt-PT.json":()=>Ze(()=>import("./pt-PT-UZXXM6DQ-BWmqCGL7.js"),[]),"./locales/ro-RO.json":()=>Ze(()=>import("./ro-RO-JPDTUUEW-1Qs04FFF.js"),[]),"./locales/ru-RU.json":()=>Ze(()=>import("./ru-RU-B4JR7IUQ-CpJ8HgHs.js"),[]),"./locales/si-LK.json":()=>Ze(()=>import("./si-LK-N5RQ5JYF-Coifl8iv.js"),[]),"./locales/sk-SK.json":()=>Ze(()=>import("./sk-SK-C5VTKIMK-BPYls6GV.js"),[]),"./locales/sl-SI.json":()=>Ze(()=>import("./sl-SI-NN7IZMDC-CxTKV6Oo.js"),[]),"./locales/sv-SE.json":()=>Ze(()=>import("./sv-SE-XGPEYMSR-Cy_yUHKZ.js"),[]),"./locales/ta-IN.json":()=>Ze(()=>import("./ta-IN-2NMHFXQM-DIXw0EGN.js"),[]),"./locales/th-TH.json":()=>Ze(()=>import("./th-TH-HPSO5L25-lCJ9SAWE.js"),[]),"./locales/tr-TR.json":()=>Ze(()=>import("./tr-TR-DEFEU3FU-Dw9UPZdp.js"),[]),"./locales/uk-UA.json":()=>Ze(()=>import("./uk-UA-QMV73CPH-Cs84qapF.js"),[]),"./locales/vi-VN.json":()=>Ze(()=>import("./vi-VN-M7AON7JQ-C9W5mWpX.js"),[]),"./locales/zh-CN.json":()=>Ze(()=>import("./zh-CN-LNUGB5OW-D0ygrSG3.js"),[]),"./locales/zh-HK.json":()=>Ze(()=>import("./zh-HK-E62DVLB3-BzG2m20x.js"),[]),"./locales/zh-TW.json":()=>Ze(()=>import("./zh-TW-RAJ6MFWO-zqC_sSft.js"),[])}),TVe=85,u6={code:"en",label:"English"},CR=[u6,...[{code:"ar-SA",label:"",rtl:!0},{code:"bg-BG",label:""},{code:"ca-ES",label:"Catal"},{code:"cs-CZ",label:"esky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:""},{code:"es-ES",label:"Espaol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Franais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"",rtl:!0},{code:"hi-IN",label:""},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:""},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:" "},{code:"ko-KR",label:""},{code:"ku-TR",label:"Kurd"},{code:"lt-LT",label:"Lietuvi"},{code:"lv-LV",label:"Latvieu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokml"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:""},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugus Brasileiro"},{code:"pt-PT",label:"Portugus"},{code:"ro-RO",label:"Romn"},{code:"ru-RU",label:""},{code:"sk-SK",label:"Slovenina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenina"},{code:"tr-TR",label:"Trke"},{code:"uk-UA",label:""},{code:"zh-CN",label:""},{code:"zh-TW",label:""},{code:"vi-VN",label:"Ting Vit"},{code:"mr-IN",label:""}].filter(e=>cre[e.code]>=TVe).sort((e,t)=>e.label>t.label?1:-1)],u9="__test__";At.DEV&&CR.unshift({code:u9,label:"test language"},{code:`${u9}.rtl`,label:"test language (rtl)",rtl:!0});var rm=u6,nx={},Lie=async e=>{if(rm=e,document.documentElement.dir=rm.rtl?"rtl":"ltr",document.documentElement.lang=rm.code,e.code.startsWith(u9))nx={};else try{nx=await MVe(`./locales/${rm.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),nx=lR}pl.set(Oie,e.code)},Fb=()=>rm,lV=(e,t)=>{for(let n=0;n<t.length;++n){let r=t[n];if(e[r]===void 0)return;e=e[r]}if(typeof e=="string")return e},$=(e,t,n)=>{if(rm.code.startsWith(u9))return`[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]`;let r=e.split("."),i=lV(nx,r)||lV(lR,r)||n;if(i===void 0){let s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(let s in t)i=i.replace(`{{${s}}}`,String(t[s]));return i},Oie=Ri(u6.code),bs=()=>{let e=Die(Oie);return{t:$,langCode:e}},IVe=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:r=""})=>{let i=-(Ie.useRef(Date.now()).current%1600);return m.jsx("div",{className:`Spinner ${r}`,children:m.jsx("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${i}ms`:0},children:m.jsx("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},rd=IVe,jie=({delay:e,theme:t})=>{let[n,r]=T.useState(!!e);return T.useEffect(()=>{if(!e)return;let i=setTimeout(()=>{r(!1)},e);return()=>clearTimeout(i)},[e]),n?null:m.jsxs("div",{className:Ke("LoadingMessage",{"LoadingMessage--dark":t===Ft.DARK}),children:[m.jsx("div",{children:m.jsx(rd,{})}),m.jsx("div",{className:"LoadingMessage-text",children:$("labels.loadingScene")})]})},NVe=e=>{let[t,n]=T.useState(!0);return T.useEffect(()=>{let r=async()=>{await Lie(i),n(!1)},i=CR.find(s=>s.code===e.langCode)||u6;r()},[e.langCode]),t?m.jsx(jie,{theme:e.theme}):e.children},Yt=Ie.forwardRef(({size:e="medium",visible:t=!0,className:n="",...r},i)=>{let{id:s}=jc(),o=Ie.useRef(null);Ie.useImperativeHandle(i,()=>o.current);let a=`ToolIcon_size_${e}`,[l,f]=T.useState(!1),c=T.useRef(!0),d=async h=>{var y;let g="onClick"in r&&((y=r.onClick)==null?void 0:y.call(r,h));if(Iy(g))try{f(!0),await g}catch(U){if(U instanceof Rw)console.warn(U);else throw U}finally{c.current&&f(!1)}};T.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]);let u=T.useRef(null);if(r.type==="button"||r.type==="icon"||r.type==="submit"){let h=r.type==="icon"?"button":r.type;return m.jsxs("button",{className:Ke("ToolIcon_type_button",a,n,t&&!r.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!r.hidden,"ToolIcon--selected":r.selected,"ToolIcon--plain":r.type==="icon"}),style:r.style,"data-testid":r["data-testid"],hidden:r.hidden,title:r.title,"aria-label":r["aria-label"],type:h,onClick:d,ref:o,disabled:l||r.isLoading||!!r.disabled,children:[(r.icon||r.label)&&m.jsxs("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!r.disabled,children:[r.icon||r.label,r.keyBindingLabel&&m.jsx("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel}),r.isLoading&&m.jsx(rd,{})]}),r.showAriaLabel&&m.jsxs("div",{className:"ToolIcon__label",children:[r["aria-label"]," ",l&&m.jsx(rd,{})]}),r.children]})}return m.jsxs("label",{className:Ke("ToolIcon",n),title:r.title,onPointerDown:h=>{var g;u.current=h.pointerType||null,(g=r.onPointerDown)==null||g.call(r,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{u.current=null})},children:[m.jsx("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:r.name,"aria-label":r["aria-label"],"aria-keyshortcuts":r["aria-keyshortcuts"],"data-testid":r["data-testid"],id:`${s}-${r.id}`,onChange:()=>{var h;(h=r.onChange)==null||h.call(r,{pointerType:u.current})},checked:r.checked,ref:o}),m.jsxs("div",{className:"ToolIcon__icon",children:[r.icon,r.keyBindingLabel&&m.jsx("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel})]})]})});Yt.displayName="ToolButton";var RVe=(e,t,n)=>{let r=new Set(Mt(e.filter(c=>ht(c)),t).map(c=>c.id)),i={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(let c of r){let d=Rc(e,c);for(let u of d)if(!o.has(u.id)){if(Xn(u)){let h=Ni(u,s);h&&(i[h.id]=!0)}else i[u.id]=!0;o.add(u.id)}}let a=!0,l=e.map(c=>{if(t.selectedElementIds[c.id]){let d=Xn(c)?Ni(c,s):null;return c.frameId&&r.has(c.frameId)?(a=!1,i[c.id]=!0,c):d!=null&&d.frameId&&r.has(d==null?void 0:d.frameId)?c:(c.boundElements&&c.boundElements.forEach(u=>{var g,y;let h=n.scene.getNonDeletedElementsMap().get(u.id);h&&Ge(h)&&(Ue(h,{startBinding:c.id===((g=h.startBinding)==null?void 0:g.elementId)?null:h.startBinding,endBinding:c.id===((y=h.endBinding)==null?void 0:y.elementId)?null:h.endBinding}),Ue(h,{points:h.points}))}),St(c,{isDeleted:!0}))}return c.frameId&&r.has(c.frameId)?(a=!1,Xn(c)||(i[c.id]=!0),St(c,{frameId:null})):Xn(c)&&t.selectedElementIds[c.containerId]?St(c,{isDeleted:!0}):c}),f=t.editingGroupId;if(a&&t.editingGroupId){let c=Vn(l,t.editingGroupId).filter(d=>!d.isDeleted);if(c.length>1)c[0]&&(i[c[0].id]=!0);else{f=null,c[0]&&(i[c[0].id]=!0);let d=c[0];if(d){let u=d.groupIds.findIndex(g=>g===t.editingGroupId),h=d.groupIds[u+1];if(h){let g=Vn(l,h).filter(y=>!y.isDeleted);g.length>1&&(f=h,g.forEach(y=>{i[y.id]=!0}))}}}}return{elements:l,appState:{...t,...Ss({selectedElementIds:i,editingGroupId:f},l,t,null)}}},cV=(e,t)=>{if(e.editingGroupId){let n=Vn(Pn(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},Bie=je({name:"deleteSelectedElements",label:"labels.delete",icon:U1,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,r)=>{if(t.editingLinearElement){let{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:f}=t.editingLinearElement,c=r.scene.getNonDeletedElementsMap(),d=We.getElement(o,c);if(!d||a==null)return!1;if(d.points.length<2){let h=e.map(y=>y.id===d.id?St(y,{isDeleted:!0}):y),g=cV(t,h);return{elements:h,appState:{...g,editingLinearElement:null},captureUpdate:pe.IMMEDIATELY}}let u={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:f};return We.deletePoints(d,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...u,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:pe.IMMEDIATELY}}let{elements:i,appState:s}=RVe(e,t,r);return nte(i,i.filter(o=>o.isDeleted)),s=cV(s,i),{elements:i,appState:{...s,activeTool:jr(t,{type:"selection"}),multiElement:null,activeEmbeddable:null},captureUpdate:ti(Pn(e),t)?pe.IMMEDIATELY:pe.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===J.BACKSPACE||e.key===J.DELETE)&&!e[J.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Yt,{type:"button",icon:U1,title:$("labels.delete"),"aria-label":$("labels.delete"),onClick:()=>n(null),visible:ti(Pn(e),t)})}),jM=(e,t)=>e.frameId===t||e.id===t,Fie=(e,t,n)=>{let r=[],i=[],s=null,o=-1,a=mt(n||Mt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){let l=e[o];a.get(l.id)?(i.length&&(r=r.concat(i),i=[]),r.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,i.push(o)):i=[]}return r},_Ve=e=>{let t=0;return e.reduce((n,r,i)=>(i>0&&e[i-1]!==r-1&&(t=++t),(n[t]||(n[t]=[])).push(r),n),[])},fV=(e,t,n)=>{var r,i;if("containerId"in e&&e.containerId){let s=ed.getScene(e).getElement(e.containerId);if(s)return n==="left"?Math.min(t.indexOf(s),t.indexOf(e)):Math.max(t.indexOf(s),t.indexOf(e))}else{let s=(i=(r=e.boundElements)==null?void 0:r.find(o=>o.type!=="arrow"))==null?void 0:i.id;if(s){let o=ed.getScene(e).getElement(s);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}}},PVe=(e,t)=>{let n=-1,r=-1;return e.forEach((i,s)=>{jM(i,t)&&(n===-1&&(n=s),r=s)}),n===-1?[]:e.slice(n,r+1)},DVe=(e,t,n,r,i)=>{let s=t[n],o=d=>d.isDeleted?!1:i?d.frameId===i:e.editingGroupId?d.groupIds.includes(e.editingGroupId):!0,a=r==="left"?K0(t,d=>o(d),Math.max(0,n-1)):$J(t,d=>o(d),n+1),l=t[a];if(!l)return-1;if(e.editingGroupId){if((s==null?void 0:s.groupIds.join(""))===(l==null?void 0:l.groupIds.join("")))return fV(l,t,r)??a;if(!(l!=null&&l.groupIds.includes(e.editingGroupId)))return-1}if(!i&&(l.frameId||ht(l))){let d=PVe(t,l.frameId||l.id);return r==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1])}if(!l.groupIds.length)return fV(l,t,r)??a;let f=e.editingGroupId?l.groupIds[l.groupIds.indexOf(e.editingGroupId)-1]:l.groupIds[l.groupIds.length-1],c=Vn(t,f);return c.length?r==="left"?t.indexOf(c[0]):t.indexOf(c[c.length-1]):a},zie=(e,t)=>t.reduce((n,r)=>{let i=e[r];return n.set(i.id,i),n},new Map),$ie=(e,t,n)=>{let r=Fie(e,t),i=zie(e,r),s=_Ve(r);n==="right"&&(s=s.reverse());let o=new Set(r.filter(a=>ht(e[a])).map(a=>e[a].id));return s.forEach((a,l)=>{var v;let f=a[0],c=a[a.length-1],d=n==="left"?f:c,u=a.some(E=>{let k=e[E];return k.frameId&&o.has(k.frameId)})?null:(v=e[d])==null?void 0:v.frameId,h=DVe(t,e,d,n,u);if(h===-1||d===h)return;let g=n==="left"?e.slice(0,h):e.slice(0,f),y=e.slice(f,c+1),U=n==="left"?e.slice(h,f):e.slice(c+1,h+1),x=n==="left"?e.slice(c+1):e.slice(h+1);e=n==="left"?[...g,...y,...U,...x]:[...g,...U,...y,...x]}),Nc(e,i),e},Hie=(e,t,n,r,i)=>{let s=Fie(e,t,i),o=zie(e,s),a=[],l,f;if(n==="left"){if(r)l=$J(e,g=>jM(g,r));else if(t.editingGroupId){let g=Vn(e,t.editingGroupId);if(!g.length)return e;l=e.indexOf(g[0])}else l=0;f=s[s.length-1]}else{if(r)f=K0(e,g=>jM(g,r));else if(t.editingGroupId){let g=Vn(e,t.editingGroupId);if(!g.length)return e;f=e.indexOf(g[g.length-1])}else f=e.length-1;l=s[0]}l===-1&&(l=0);for(let g=l;g<f+1;g++)s.includes(g)||a.push(e[g]);let c=Array.from(o.values()),d=e.slice(0,l),u=e.slice(f+1),h=n==="left"?[...d,...c,...a,...u]:[...d,...a,...c,...u];return Nc(h,o),h};function Vie(e,t,n,r){let i=mt(Mt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(let f of e)i.has(f.id)&&ht(f)&&o.add(f.id);for(let f of e)if(i.has(f.id))if(ht(f)||f.frameId&&o.has(f.frameId))s.regularElements.push(f);else if(!f.frameId)s.regularElements.push(f);else{let c=s.frameChildren.get(f.frameId)||[];c.push(f),s.frameChildren.set(f.frameId,c)}let a=e,l=Array.from(s.frameChildren.entries());for(let[f,c]of l)a=r(e,t,n,f,c);return r(a,t,n,null,s.regularElements)}var LVe=(e,t)=>$ie(e,t,"left"),OVe=(e,t)=>$ie(e,t,"right"),jVe=(e,t)=>Vie(e,t,"left",Hie),BVe=(e,t)=>Vie(e,t,"right",Hie),FVe=je({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:qz,trackEvent:{category:"element"},perform:(e,t)=>({elements:LVe(e,t),appState:t,captureUpdate:pe.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[J.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Jt.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${$("labels.sendBackward")}  ${ye("CtrlOrCmd+[")}`,children:qz})}),zVe=je({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:Zz,trackEvent:{category:"element"},perform:(e,t)=>({elements:OVe(e,t),appState:t,captureUpdate:pe.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[J.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Jt.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${$("labels.bringForward")}  ${ye("CtrlOrCmd+]")}`,children:Zz})}),$Ve=je({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:Jz,trackEvent:{category:"element"},perform:(e,t)=>({elements:jVe(e,t),appState:t,captureUpdate:pe.IMMEDIATELY}),keyTest:e=>Cc?e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.BRACKET_LEFT:e[J.CTRL_OR_CMD]&&e.shiftKey&&e.code===Jt.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${$("labels.sendToBack")}  ${ye(Cc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:Jz})}),HVe=je({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:Qz,trackEvent:{category:"element"},perform:(e,t)=>({elements:BVe(e,t),appState:t,captureUpdate:pe.IMMEDIATELY}),keyTest:e=>Cc?e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.BRACKET_RIGHT:e[J.CTRL_OR_CMD]&&e.shiftKey&&e.code===Jt.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${$("labels.bringToFront")}  ${ye(Cc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:Qz})}),VVe=je({name:"selectAll",label:"labels.selectAll",icon:$Ie,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,r)=>{if(t.editingLinearElement)return!1;let i=e.filter(s=>!s.isDeleted&&!(Ve(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...Ss({editingGroupId:null,selectedElementIds:i},Pn(e),t,r),selectedLinearElement:Object.keys(i).length===1&&xt(e[0])?new We(e[0]):null},captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.A}),WVe=e=>{let t=e.slice(),n=new Set,r=s=>{var f,c,d;let o=(c=(f=s[0])==null?void 0:f.groupIds)==null?void 0:c.join(""),a=[s[0]],l=[];for(let u of s.slice(1))((d=u.groupIds)==null?void 0:d.join(""))===o?a.push(u):l.push(u);return l.length?[...a,...r(l)]:a},i=new Map;return t.forEach((s,o)=>{var a;if(!i.has(s.id))if((a=s.groupIds)!=null&&a.length){let l=s.groupIds[s.groupIds.length-1],f=t.slice(o).filter(c=>{var u;let d=(u=c==null?void 0:c.groupIds)==null?void 0:u.some(h=>h===l);return d&&i.set(c.id,!0),d});for(let c of r(f))n.add(c)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},GVe=e=>{let t=WMe(e),n=e.slice(),r=new Set;return n.forEach((i,s)=>{var o,a,l;i&&((o=i.boundElements)!=null&&o.length?(r.add(i),n[s]=null,i.boundElements.forEach(f=>{let c=t.get(f.id);c&&f.type==="text"&&(r.add(c[0]),n[c[1]]=null)})):i.type==="text"&&i.containerId&&((l=(a=t.get(i.containerId))==null?void 0:a[0].boundElements)!=null&&l.find(f=>f.id===i.id))||(r.add(i),n[s]=null))}),r.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...r]},XVe=e=>GVe(WVe(e)),KVe=je({name:"duplicateSelection",label:"labels.duplicateSelection",icon:QA,trackEvent:{category:"element"},perform:(e,t,n,r)=>{if(t.editingLinearElement)try{let s=We.duplicateSelectedPoints(t,r.scene.getNonDeletedElementsMap());return{elements:e,appState:s,captureUpdate:pe.IMMEDIATELY}}catch{return!1}let i=YVe(e,t);if(r.props.onDuplicate&&i.elements){let s=r.props.onDuplicate(i.elements,e);s&&(i.elements=s)}return{...i,captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.D,PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Yt,{type:"button",icon:QA,title:`${$("labels.duplicateSelection")}  ${ye("CtrlOrCmd+D")}`,"aria-label":$("labels.duplicateSelection"),onClick:()=>n(null),visible:ti(Pn(e),t)})}),YVe=(e,t)=>{let n=new Map,r=[],i=[],s=new Map,o=new Map,a=mt(e),l=y=>{let U=Vz(y).reduce((x,v)=>{if(c.has(v.id))return x;c.set(v.id,!0);let E=vte(t.editingGroupId,n,v,{x:v.x+R4/2,y:v.y+R4/2});return c.set(E.id,!0),o.set(E.id,E),s.set(v.id,E.id),i.push(v),r.push(E),x.push(E),x},[]);return Array.isArray(y)?U:U[0]||null};e=XVe(e);let f=mt(Mt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),c=new Map,d=e.slice(),u=(y,U)=>{us(y!==-1,"targetIndex === -1 "),!(!Array.isArray(U)&&!U)&&d.splice(y+1,0,...Vz(U))},h=new Set(e.filter(y=>f.has(y.id)&&ht(y)).map(y=>y.id));for(let y of e){if(c.has(y.id)||!f.has(y.id))continue;let U=ate(t,y);if(U){let x=Vn(e,U).flatMap(E=>ht(E)?[...Rc(e,E.id),E]:[E]),v=K0(d,E=>{var k;return(k=E.groupIds)==null?void 0:k.includes(U)});u(v,l(x));continue}if(!(y.frameId&&h.has(y.frameId))){if(ht(y)){let x=y.id,v=Rc(e,x),E=K0(d,k=>k.frameId===x||k.id===x);u(E,l([...v,y]));continue}if(Ma(y)){let x=Ct(y,a),v=K0(d,E=>E.id===y.id||"containerId"in E&&E.containerId===y.id);x?u(v,l([y,x])):u(v,l(y));continue}if(Xn(y)){let x=Ni(y,a),v=K0(d,E=>E.id===y.id||E.id===(x==null?void 0:x.id));x?u(v,l([x,y])):u(v,l(y));continue}u(K0(d,x=>x.id===y.id),l(y))}}ute(d,i,s),tte(d,i,s),Qte(d,i,s);let g=JN(r);return{elements:d,appState:{...t,...Ss({editingGroupId:t.editingGroupId,selectedElementIds:g.reduce((y,U)=>(Xn(U)||(y[U.id]=!0),y),{})},Pn(d),t,null)}}},ZVe=new Set(["command_palette","export"]),jn=(e,t,n,r)=>{try{if(typeof window>"u"||At.VITE_WORKER_ID||At.VITE_APP_ENABLE_TRACKING!=="true"||!ZVe.has(e)||At.DEV)return;At.PROD||console.info("trackEvent",{category:e,action:t,label:n,value:r}),window.sa_event&&window.sa_event(t,{category:e,label:n,value:r})}catch(i){console.error("error during analytics",i)}},Wie=T.forwardRef((e,t)=>{let{title:n,className:r,testId:i,active:s,standalone:o,icon:a,onClick:l}=e;return m.jsx("button",{type:"button",ref:t,title:n,"data-testid":i,className:Ke(r,{standalone:o,active:s}),onClick:l,children:a},n)}),Lc=e=>m.jsx("div",{className:"buttonList",children:e.options.map(t=>e.type==="button"?m.jsx(Wie,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):m.jsxs("label",{className:Ke({active:e.value===t.value}),title:t.text,children:[m.jsx("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))}),qVe=({onChange:e,type:t,activeColor:n,topPicks:r})=>{let i;return t==="elementStroke"&&(i=kJ),t==="elementBackground"&&(i=SJ),t==="canvasBackground"&&(i=CJ),r&&(i=r),i?m.jsx("div",{className:"color-picker__top-picks",children:i.map(s=>m.jsx("button",{className:Ke("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:m.jsx("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},Gie=()=>m.jsx("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),s7=({palette:e,color:t})=>{for(let[n,r]of Object.entries(e))if(Array.isArray(r)){let i=r.indexOf(t);if(i>-1)return{colorName:n,shade:i}}else if(r===t)return{colorName:n,shade:null};return null},BM=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),Xie=({color:e,palette:t})=>!Object.values(t).flat().includes(e),QVe=(e,t,n)=>{let r={elementBackground:"backgroundColor",elementStroke:"strokeColor"},i=e.filter(o=>{if(o.isDeleted)return!1;let a=o[r[t]];return Xie({color:a,palette:n})}),s=new Map;return i.forEach(o=>{let a=o[r[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,OAe)},h6=Ri(null),dV=(e,t,n)=>(e*299+t*587+n*114)/1e3>=160?"black":"white",JVe=(e,t)=>{if(t){let s=new Option().style;if(s.color=e,s.color){let o=s.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),a=parseInt(o[0]),l=parseInt(o[1]),f=parseInt(o[2]);return dV(a,l,f)}}if(e==="transparent")return"black";let n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return dV(n,r,i)},eWe=({color:e,keyLabel:t,isCustomColor:n=!1,isShade:r=!1})=>m.jsxs("div",{className:"color-picker__button__hotkey-label",style:{color:JVe(e,n)},children:[r&&"",t]}),AR=eWe,tWe=({hex:e,onChange:t,palette:n})=>{let r=s7({color:e||"transparent",palette:n}),[i,s]=Er(h6),o=T.useRef(null);if(T.useEffect(()=>{o.current&&i==="shades"&&o.current.focus()},[r,i]),r){let{colorName:a,shade:l}=r,f=n[a];if(Array.isArray(f))return m.jsx("div",{className:"color-picker-content--default shades",children:f.map((c,d)=>m.jsxs("button",{ref:d===l&&i==="shades"?o:void 0,tabIndex:-1,type:"button",className:Ke("color-picker__button color-picker__button--large",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:c?{"--swatch-color":c}:void 0,onClick:()=>{t(c),s("shades")},children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(AR,{color:c,keyLabel:d+1,isShade:!0})]},d))})}return m.jsxs("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[m.jsx("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),m.jsx("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:$("colorPicker.noShades")})]})},nWe=({palette:e,color:t,onChange:n,label:r,activeShade:i})=>{let s=s7({color:t||"transparent",palette:e}),[o,a]=Er(h6),l=T.useRef(null);return T.useEffect(()=>{l.current&&o==="baseColors"&&l.current.focus()},[s==null?void 0:s.colorName,o]),m.jsx("div",{className:"color-picker-content--default",children:Object.entries(e).map(([f,c],d)=>{let u=(Array.isArray(c)?c[i]:c)||"transparent",h=BM[d],g=$(`colors.${f.replace(/\d+/,"")}`,null,"");return m.jsxs("button",{ref:(s==null?void 0:s.colorName)===f?l:void 0,tabIndex:-1,type:"button",className:Ke("color-picker__button color-picker__button--large",{active:(s==null?void 0:s.colorName)===f,"is-transparent":u==="transparent"||!u}),onClick:()=>{n(u),a("baseColors")},title:`${g}${u.startsWith("#")?` ${u}`:""}  ${h}`,"aria-label":`${g}  ${h}`,style:{"--swatch-color":u},"data-testid":`color-${f}`,children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(AR,{color:u,keyLabel:h})]},f)})})},rWe=nWe,iWe=({colors:e,color:t,onChange:n,label:r})=>{let[i,s]=Er(h6),o=T.useRef(null);return T.useEffect(()=>{o.current&&o.current.focus()},[t,i]),m.jsx("div",{className:"color-picker-content--default",children:e.map((a,l)=>m.jsxs("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:Ke("color-picker__button color-picker__button--large",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":r,style:{"--swatch-color":a},children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(AR,{color:a,keyLabel:l+1,isCustomColor:!0})]},l))})},TS=(e,t,n)=>{let r=Math.ceil(n/Bp);switch(t=t??-1,e){case"ArrowLeft":{let i=t-1;return i<0?n-1:i}case"ArrowRight":return(t+1)%n;case"ArrowDown":{let i=t+Bp;return i>=n?t%Bp:i}case"ArrowUp":{let i=t-Bp,s=i<0?Bp*r+i:i;return s>=n?void 0:s}}},sWe=({e,colorObj:t,onChange:n,palette:r,customColors:i,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){let a=Number(e.code.slice(-1))-1;return n(r[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&i[Number(e.key)-1])return n(i[Number(e.key)-1]),s("custom"),!0;if(BM.includes(e.key)){let a=BM.indexOf(e.key),l=Object.keys(r)[a],f=r[l],c=Array.isArray(f)?f[o]:f;return n(c),s("baseColors"),!0}return!1},oWe=({event:e,activeColorPickerSection:t,palette:n,color:r,onChange:i,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:f,onEscape:c})=>{if(e[J.CTRL_OR_CMD])return!1;if(e.key===J.ESCAPE)return c(e),!0;if(e.key===J.ALT)return f(!0),!0;if(e.key===J.I)return f(),!0;let d=s7({color:r,palette:n});if(e.key===J.TAB){let u={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(u).reduce((v,[E,k])=>(k&&v.push(E),v),[]),g=h.indexOf(t),y=e.shiftKey?-1:1,U=g+y>h.length-1?0:g+y<0?h.length-1:g+y,x=h[U];return x&&o(x),x==="custom"?i(s[0]):x==="baseColors"&&(Object.entries(n).find(([v,E])=>Array.isArray(E)?E.includes(r):E===r?v:null)||i(Pt.black)),e.preventDefault(),e.stopPropagation(),!0}if(sWe({e,colorObj:d,onChange:i,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){let{shade:u}=d,h=TS(e.key,u,Bp);if(h!==void 0)return i(n[d.colorName][h]),!0}if(t==="baseColors"&&d){let{colorName:u}=d,h=Object.keys(n),g=h.indexOf(u),y=TS(e.key,g,h.length);if(y!==void 0){let U=h[y],x=n[U];return i(Array.isArray(x)?x[l]:x),!0}}if(t==="custom"){let u=s.indexOf(r),h=TS(e.key,u,s.length);if(h!==void 0){let g=s[h];return i(g),!0}}return!1},aWe=({children:e})=>m.jsx("div",{className:"color-picker__heading",children:e}),rx=aWe,lWe=({color:e,onChange:t,label:n,type:r,elements:i,palette:s,updateData:o,children:a,onEyeDropperToggle:l,onEscape:f})=>{let[c]=Ie.useState(()=>r==="canvasBackground"?[]:QVe(i,r,s)),[d,u]=Er(h6),h=s7({color:e,palette:s});T.useEffect(()=>{if(!d){let x=Xie({color:e,palette:s}),v=x&&!c.includes(e);u(v?"hex":x?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,s,u,h,c]);let[g,y]=T.useState((h==null?void 0:h.shade)??(r==="elementBackground"?X5:G5));T.useEffect(()=>{(h==null?void 0:h.shade)!=null&&y(h.shade);let x=v=>{v.key===J.ALT&&l(!1)};return document.addEventListener("keyup",x,{capture:!0}),()=>{document.removeEventListener("keyup",x,{capture:!0})}},[h,l]);let U=Ie.useRef(null);return m.jsx("div",{role:"dialog","aria-modal":"true","aria-label":$("labels.colorPicker"),children:m.jsxs("div",{ref:U,onKeyDown:x=>{oWe({event:x,activeColorPickerSection:d,palette:s,color:e,onChange:t,onEyeDropperToggle:l,customColors:c,setActiveColorPickerSection:u,updateData:o,activeShade:g,onEscape:f})&&(x.preventDefault(),x.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!c.length&&m.jsxs("div",{children:[m.jsx(rx,{children:$("colorPicker.mostUsedCustomColors")}),m.jsx(iWe,{colors:c,color:e,label:$("colorPicker.mostUsedCustomColors"),onChange:t})]}),m.jsxs("div",{children:[m.jsx(rx,{children:$("colorPicker.colors")}),m.jsx(rWe,{color:e,label:n,palette:s,onChange:t,activeShade:g})]}),m.jsxs("div",{children:[m.jsx(rx,{children:$("colorPicker.shades")}),m.jsx(tWe,{hex:e,onChange:t,palette:s})]}),a]})})},Kie=Ie.createContext(null),js=()=>Ie.useContext(Kie),Yie=e=>{let[t,n]=T.useState(null),r=pi(),{theme:i}=js(),{container:s}=jc();return T.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",r.editor.isMobile),t.classList.toggle("theme--dark",i===Ft.DARK))},[t,i,r.editor.isMobile,e==null?void 0:e.className]),T.useLayoutEffect(()=>{let o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;let a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function MR(e,t,n){T.useEffect(()=>{function r(i){let s=i;if(!e.current)return;let o=n==null?void 0:n(s,e.current);if(o!==!0){if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}}return document.addEventListener("pointerdown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("pointerdown",r),document.removeEventListener("touchstart",r)}},[e,t,n])}var o7=e=>{let t=T.useRef(e);return Object.assign(t.current,e),t.current},a7=Ri(null),cWe=({onCancel:e,onChange:t,onSelect:n,colorPickerType:r})=>{let i=Yie({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=js(),o=p7(),a=Oc(),l=Mt(o,s),f=o7({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:c}=jc();T.useEffect(()=>{let u=d.current;if(!u||!a.canvas||!i)return;let h=!1,g=a.canvas.getContext("2d"),y=({clientX:S,clientY:A})=>{let I=g.getImageData((S-s.offsetLeft)*window.devicePixelRatio,(A-s.offsetTop)*window.devicePixelRatio,1,1).data;return $Ae(I[0],I[1],I[2])},U=({clientX:S,clientY:A,altKey:I})=>{u.style.top=`${A+20}px`,u.style.left=`${S+20}px`;let R=y({clientX:S,clientY:A});h&&f.onChange(r,R,f.selectedElements,{altKey:I}),u.style.background=R},x=()=>{f.onCancel()},v=(S,A)=>{f.onSelect(S,A)},E=S=>{h=!0,S.stopImmediatePropagation()},k=S=>{h=!1,c==null||c.focus(),S.stopImmediatePropagation(),S.preventDefault(),v(y(S),S)},M=S=>{S.key===J.ESCAPE&&(S.preventDefault(),S.stopImmediatePropagation(),x())};return i.tabIndex=-1,i.focus(),U({clientX:f.app.lastViewportPosition.x,clientY:f.app.lastViewportPosition.y,altKey:!1}),i.addEventListener("keydown",M),i.addEventListener("pointerdown",E),i.addEventListener("pointerup",k),window.addEventListener("pointermove",U,{passive:!0}),window.addEventListener("blur",x),()=>{h=!1,i.removeEventListener("keydown",M),i.removeEventListener("pointerdown",E),i.removeEventListener("pointerup",k),window.removeEventListener("pointermove",U),window.removeEventListener("blur",x)}},[f,a.canvas,i,r,c,s.offsetLeft,s.offsetTop]);let d=T.useRef(null);return MR(d,()=>{e()},u=>!!u.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),i?fi.createPortal(m.jsx("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),i):null},fWe=({color:e,onChange:t,label:n,colorPickerType:r})=>{let i=pi(),[s,o]=T.useState(e),[a,l]=Er(h6);T.useEffect(()=>{o(e)},[e]);let f=T.useCallback(g=>{let y=g.toLowerCase(),U=dWe(y);U&&t(U),o(y)},[t]),c=T.useRef(null),d=T.useRef(null);T.useEffect(()=>{c.current&&c.current.focus()},[a]);let[u,h]=Er(a7);return T.useEffect(()=>()=>{h(null)},[h]),m.jsxs("div",{className:"color-picker__input-label",children:[m.jsx("div",{className:"color-picker__input-hash",children:"#"}),m.jsx("input",{ref:a==="hex"?c:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:g=>{f(g.target.value)},value:(s||"").replace(/^#/,""),onBlur:()=>{o(e)},tabIndex:-1,onFocus:()=>l("hex"),onKeyDown:g=>{var y;g.key!==J.TAB&&(g.key===J.ESCAPE&&((y=d.current)==null||y.focus()),g.stopPropagation())}}),!i.editor.isMobile&&m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),m.jsx("div",{ref:d,className:Ke("excalidraw-eye-dropper-trigger",{selected:u}),onClick:()=>h(g=>g?null:{keepOpenOnAlt:!1,onSelect:y=>t(y),colorPickerType:r}),title:`${$("labels.eyeDropper")}  ${J.I.toLocaleUpperCase()} or ${ye("Alt")} `,children:PIe})]})]})},Ul=Ie.forwardRef(({children:e,padding:t,className:n,style:r},i)=>m.jsx("div",{className:Ke("Island",n),style:{"--padding":t,...r},ref:i,children:e})),Zie=Ie.forwardRef(({className:e,container:t,children:n,style:r,onClose:i,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},f)=>{let c=pi();return m.jsx(tHe,{container:t,children:m.jsxs(vR,{ref:f,className:Ke("focus-visible-none",e),"data-prevent-outside-click":!0,side:c.editor.isMobile&&!c.viewport.isLandscape?"bottom":"right",align:c.editor.isMobile&&!c.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!DMe(document.activeElement)&&t.focus(),i()},children:[m.jsx(Ul,{padding:3,style:r,children:n}),m.jsx(hie,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),uV=e=>{let t=new Option().style;return t.color=e,!!t.color},dWe=e=>ul(e)?e:uV(`#${e}`)?`#${e}`:uV(e)?e:null,uWe=({type:e,color:t,onChange:n,label:r,elements:i,palette:s=Pt,updateData:o})=>{let{container:a}=jc(),[,l]=Er(h6),[f,c]=Er(a7),d=m.jsxs("div",{children:[m.jsx(rx,{children:$("colorPicker.hexCode")}),m.jsx(fWe,{color:t,label:r,onChange:g=>{n(g)},colorPickerType:e})]}),u=T.useRef(null),h=()=>{var g,y;(y=(g=u.current)==null?void 0:g.querySelector(".color-picker-content"))==null||y.focus()};return m.jsx(Zie,{container:a,style:{maxWidth:"13rem"},onFocusOutside:g=>{h(),g.preventDefault()},onPointerDownOutside:g=>{f&&g.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?m.jsx(lWe,{palette:s,color:t,onChange:g=>{n(g)},onEyeDropperToggle:g=>{c(y=>g?(y=y||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},y.keepOpenOnAlt=!0,y):g===!1||y?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:g=>{f?c(null):o({openPopup:null})},label:r,type:e,elements:i,updateData:o,children:d}):d})},hWe=({label:e,color:t,type:n})=>m.jsx(n7,{type:"button",className:Ke("color-picker__button active-color properties-trigger",{"is-transparent":t==="transparent"||!t}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:$(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:m.jsx("div",{className:"color-picker__button-outline"})}),TR=({type:e,color:t,onChange:n,label:r,elements:i,palette:s=Pt,topPicks:o,updateData:a,appState:l})=>m.jsx("div",{children:m.jsxs("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[m.jsx(qVe,{activeColor:t,onChange:n,type:e,topPicks:o}),m.jsx(Gie,{}),m.jsxs(t7,{open:l.openPopup===e,onOpenChange:f=>{a({openPopup:f?e:null})},children:[m.jsx(hWe,{color:t,label:r,type:e}),l.openPopup===e&&m.jsx(uWe,{type:e,color:t,onChange:n,label:r,elements:i,palette:s,updateData:a})]})]})}),l7=({icon:e})=>m.jsx("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),pWe=({label:e,open:t,openTrigger:n,children:r,className:i})=>m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:i,onClick:n,children:[e,m.jsx(l7,{icon:t?rNe:bee})]}),t&&m.jsx("div",{style:{display:"flex",flexDirection:"column"},children:r})]}),FM=pWe,mWe=Ri(!1);function gWe({options:e,value:t,label:n,onChange:r,onClose:i,numberOfOptionsToAlwaysShow:s=e.length}){let o=pi(),a=h=>{let g=e.find(y=>y.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&g)r(g.value),h.preventDefault();else if(h.key===J.TAB){let y=e.findIndex(x=>x.value===t),U=h.shiftKey?(e.length+y-1)%e.length:(y+1)%e.length;r(e[U].value)}else if(K5(h.key)){let y=Fb().rtl,U=e.findIndex(x=>x.value===t);if(U!==-1){let x=e.length,v=U;switch(h.key){case(y?J.ARROW_LEFT:J.ARROW_RIGHT):v=(U+1)%x;break;case(y?J.ARROW_RIGHT:J.ARROW_LEFT):v=(x+U-1)%x;break;case J.ARROW_DOWN:{v=(U+(s??1))%x;break}case J.ARROW_UP:{v=(x+U-(s??1))%x;break}}r(e[v].value)}h.preventDefault()}else(h.key===J.ESCAPE||h.key===J.ENTER)&&(h.preventDefault(),i());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,f]=Er(mWe),c=Ie.useMemo(()=>e.slice(0,s),[e,s]),d=Ie.useMemo(()=>e.slice(s),[e,s]);T.useEffect(()=>{c.some(h=>h.value===t)||f(!0)},[t,c,f]);let u=h=>m.jsx("div",{className:"picker-content",children:h.map((g,y)=>m.jsxs("button",{type:"button",className:Ke("picker-option",{active:t===g.value}),onClick:U=>{r(g.value)},title:`${g.text} ${g.keyBinding&&` ${g.keyBinding.toUpperCase()}`}`,"aria-label":g.text||"none","aria-keyshortcuts":g.keyBinding||void 0,ref:U=>{t===g.value&&setTimeout(()=>{U==null||U.focus()},0)},children:[g.icon,g.keyBinding&&m.jsx("span",{className:"picker-keybinding",children:g.keyBinding})]},g.text))});return m.jsx(vR,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:m.jsxs("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[u(c),d.length>0&&m.jsx(FM,{label:$("labels.more_options"),open:l,openTrigger:()=>{f(h=>!h)},className:"picker-collapsible",children:u(d)})]})})}function hV({value:e,label:t,options:n,onChange:r,group:i="",numberOfOptionsToAlwaysShow:s}){var f;let[o,a]=Ie.useState(!1),l=Ie.useRef(null);return m.jsx("div",{children:m.jsxs(t7,{open:o,onOpenChange:c=>a(c),children:[m.jsx(n7,{name:i,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(f=n.find(c=>c.value===e))==null?void 0:f.icon}),o&&m.jsx(gWe,{options:n,value:e,label:t,onChange:r,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}var qie=Ie.forwardRef(({className:e,placeholder:t,onChange:n},r)=>m.jsxs("div",{className:Ke("QuickSearch__wrapper",e),children:[x1,m.jsx("input",{ref:r,className:"QuickSearch__input",type:"text",placeholder:t,onChange:i=>n(i.target.value.trim().toLowerCase())})]})),Qie=({className:e,placeholder:t,children:n})=>{let r=!T.Children.count(n);return m.jsx("div",{className:Ke("ScrollableList__wrapper",e),role:"menu",children:r?m.jsx("div",{className:"empty",children:t}):n})},Jie=({children:e,className:t="",style:n,title:r})=>m.jsxs("div",{className:`dropdown-menu-group ${t}`,style:n,children:[r&&m.jsx("p",{className:"dropdown-menu-group-title",children:r}),e]}),zM=Jie;Jie.displayName="DropdownMenuGroup";var ese=Ie.createContext({}),tse=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),nse=(e,t)=>{let n=T.useContext(ese);return Aw(e,r=>{var s;let i=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||((s=n.onSelect)==null||s.call(n,i))})},bWe=({textStyle:e,icon:t,shortcut:n,children:r})=>{let i=pi();return m.jsxs(m.Fragment,{children:[t&&m.jsx("div",{className:"dropdown-menu-item__icon",children:t}),m.jsx("div",{style:e,className:"dropdown-menu-item__text",children:r}),n&&!i.editor.isMobile&&m.jsx("div",{className:"dropdown-menu-item__shortcut",children:n})]})},rse=bWe,IR=({icon:e,value:t,order:n,children:r,shortcut:i,className:s,hovered:o,selected:a,textStyle:l,onSelect:f,onClick:c,...d})=>{let u=nse(c,f),h=T.useRef(null);return T.useEffect(()=>{var g,y;o&&(n===0?(g=h.current)==null||g.scrollIntoView({block:"end"}):(y=h.current)==null||y.scrollIntoView({block:"nearest"}))},[o,n]),m.jsx("button",{...d,ref:h,value:t,onClick:u,className:tse(s,a,o),title:d.title??d["aria-label"],children:m.jsx(rse,{textStyle:l,icon:e,shortcut:i,children:r})})};IR.displayName="DropdownMenuItem";var e2={GREEN:"green",RED:"red",BLUE:"blue"},NR=({type:e=e2.BLUE,children:t})=>{let{theme:n}=$y(),r={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===Ft.LIGHT?"1.5px solid white":"none"};switch(e){case e2.GREEN:Object.assign(r,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case e2.RED:Object.assign(r,{backgroundColor:"pink",color:"darkred"});break;case e2.BLUE:default:Object.assign(r,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return m.jsx("div",{className:"DropDownMenuItemBadge",style:r,children:t})};NR.displayName="DropdownMenuItemBadge";IR.Badge=NR;var Na=IR,yWe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:r,onClose:i,onSelect:s,onHover:o})=>{var a,l,f;if(!e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===J.F)return(a=t.current)==null||a.focus(),!0;if(e.key===J.ESCAPE)return i(),!0;if(e.key===J.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===J.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=r[0])!=null&&l.value&&o(r[0].value),!0;if(e.key===J.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(f=r[r.length-1])!=null&&f.value&&o(r[r.length-1].value),!0},UWe=Ie.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:r,onLeave:i,onOpen:s,onClose:o})=>{let{container:a}=jc(),{fonts:l}=Oc(),{showDeprecatedFonts:f}=zy(),[c,d]=T.useState(""),u=T.useRef(null),h=T.useMemo(()=>Array.from(Hf.registered.entries()).filter(([I,{metadata:R}])=>!R.serverSide&&!R.fallback).map(([I,{metadata:R,fontFaces:P}])=>{var O,V;let _={value:I,icon:R.icon??$4,text:((V=(O=P[0])==null?void 0:O.fontFace)==null?void 0:V.family)??"Unknown"};return R.deprecated&&Object.assign(_,{deprecated:R.deprecated,badge:{type:e2.RED,placeholder:$("fontList.badge.old")}}),_}).sort((I,R)=>I.text.toLowerCase()>R.text.toLowerCase()?1:-1),[]),g=T.useMemo(()=>new Set(l.getSceneFamilies()),[e]),y=T.useMemo(()=>h.filter(I=>g.has(I.value)),[h,g]),U=T.useMemo(()=>h.filter(I=>!g.has(I.value)&&(f||!I.deprecated)),[h,g,f]),x=T.useMemo(()=>GMe([...y,...U].filter(I=>{var R;return(R=I.text)==null?void 0:R.toLowerCase().includes(c)})),[y,U,c]),v=T.useMemo(()=>{var R;let I;return t?I=x.find(P=>P.value===t):e&&(I=x.find(P=>P.value===e)),!I&&c&&((R=x[0])!=null&&R.value?r(x[0].value):i()),I},[t,e,c,x,r,i]),E=T.useCallback(I=>{yWe({event:I,inputRef:u,hoveredFont:v,filteredFonts:x,onSelect:n,onHover:r,onClose:o})&&(I.preventDefault(),I.stopPropagation())},[v,x,n,r,o]);T.useEffect(()=>(s(),()=>{o()}),[]);let k=T.useMemo(()=>x.filter(I=>g.has(I.value)),[x,g]),M=T.useMemo(()=>x.filter(I=>!g.has(I.value)),[x,g]),S=(I,R)=>m.jsxs(Na,{icon:I.icon,value:I.value,order:R,textStyle:{fontFamily:Lg({fontFamily:I.value})},hovered:I.value===(v==null?void 0:v.value),selected:I.value===e,tabIndex:I.value===e?0:-1,onClick:P=>{n(Number(P.currentTarget.value))},onMouseMove:()=>{(v==null?void 0:v.value)!==I.value&&r(I.value)},children:[I.text,I.badge&&m.jsx(NR,{type:I.badge.type,children:I.badge.placeholder})]},I.value),A=[];return k.length&&A.push(m.jsx(zM,{title:$("fontList.sceneFonts"),children:k.map(S)},"group_1")),M.length&&A.push(m.jsx(zM,{title:$("fontList.availableFonts"),children:M.map((I,R)=>S(I,R+k.length))},"group_2")),m.jsxs(Zie,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:i,onKeyDown:E,children:[m.jsx(qie,{ref:u,placeholder:$("quickSearch.placeholder"),onChange:Og(d,20)}),m.jsx(Qie,{className:"dropdown-menu fonts manual-hover",placeholder:$("fontList.empty"),children:A.length?A:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),xWe=({selectedFontFamily:e})=>{let t=T.useMemo(()=>!!(e&&!vWe(e)),[e]);return m.jsx(n7,{asChild:!0,children:m.jsx("div",{children:m.jsx(Wie,{standalone:!0,icon:tee,title:$("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},ise=[{value:sr.Excalifont,icon:Mb,text:$("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:sr.Nunito,icon:$4,text:$("labels.normal"),testId:"font-family-normal"},{value:sr["Comic Shanns"],icon:nM,text:$("labels.code"),testId:"font-family-code"}],wWe=new Set(ise.map(e=>e.value)),vWe=e=>e?wWe.has(e):!1,EWe=Ie.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:r,onHover:i,onLeave:s,onPopupChange:o})=>{let a=T.useMemo(()=>ise,[]),l=T.useCallback(f=>{f&&r(f)},[r]);return m.jsxs("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[m.jsx(Lc,{type:"button",options:a,value:t,onClick:l}),m.jsx(Gie,{}),m.jsxs(t7,{open:e,onOpenChange:o,children:[m.jsx(xWe,{selectedFontFamily:t}),e&&m.jsx(UWe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:i,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),kWe=({updateData:e,appState:t,elements:n,testId:r})=>{let i=Ie.useRef(null),s=Ie.useRef(null),o=Os(n,t,a=>a.opacity,!0,t.currentItemOpacity);return T.useEffect(()=>{if(i.current&&s.current){let a=i.current,l=s.current,f=a.offsetWidth,c=15,d=o/100*(f-c)+c/2;l.style.left=`${d}px`,a.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${o}%, var(--button-bg) ${o}%, var(--button-bg) 100%)`}},[o]),m.jsxs("label",{className:"control-label",children:[$("labels.opacity"),m.jsxs("div",{className:"range-wrapper",children:[m.jsx("input",{ref:i,type:"range",min:"0",max:"100",step:"10",onChange:a=>{e(+a.target.value)},value:o,className:"range-input","data-testid":r}),m.jsx("div",{className:"value-bubble",ref:s,children:o!==0?o:null}),m.jsx("div",{className:"zero-label",children:"0"})]})]})},sse=.1,Ls=(e,t,n,r=!1)=>{let i=mt(Mt(e,t,{includeBoundTextElement:r}));return e.map(s=>{var o;return i.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},Os=function(e,t,n,r,i){let s=t.editingTextElement,o=Pn(e),a=null;return s&&(a=n(s)),a||(ti(o,t)?a=hBe(r===!0?o:o.filter(l=>r(l)),t,n)??(typeof i=="function"?i(!0):i):a=typeof i=="function"?i(!1):i),a},SWe=(e,t)=>Xn(t)||!t.autoResize?t:Ue(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2},!1),RR=(e,t,n,r,i)=>{let s=new Set,o=Ls(e,t,l=>{if(Ve(l)){let f=r(l);s.add(f);let c=St(l,{fontSize:f});return Ds(c,n.scene.getContainerElement(l),n.scene.getNonDeletedElementsMap()),c=SWe(l,c),c}return l},!0),a=mt(o);return Mt(e,t,{includeBoundTextElement:!0}).forEach(l=>{Ve(l)&&uo(l,a)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:i??t.currentItemFontSize},captureUpdate:pe.IMMEDIATELY}};je({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:Ls(e,t,r=>aM(r.type)?St(r,{strokeColor:n.currentItemStrokeColor}):r,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?pe.IMMEDIATELY:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{"aria-hidden":"true",children:$("labels.stroke")}),m.jsx(TR,{topPicks:kJ,palette:BAe,type:"elementStroke",label:$("labels.stroke"),color:Os(e,t,i=>i.strokeColor,!0,t.currentItemStrokeColor),onChange:i=>n({currentItemStrokeColor:i}),elements:e,appState:t,updateData:n})]})});je({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:Ls(e,t,r=>St(r,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?pe.IMMEDIATELY:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{"aria-hidden":"true",children:$("labels.background")}),m.jsx(TR,{topPicks:SJ,palette:FAe,type:"elementBackground",label:$("labels.background"),color:Os(e,t,i=>i.backgroundColor,!0,t.currentItemBackgroundColor),onChange:i=>n({currentItemBackgroundColor:i}),elements:e,appState:t,updateData:n})]})});je({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,r)=>(jn("element","changeFillStyle",`${n} (${r.device.editor.isMobile?"mobile":"desktop"})`),{elements:Ls(e,t,i=>St(i,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Mt(e,t),i=r.length>0&&r.every(s=>s.fillStyle==="zigzag");return m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.fill")}),m.jsx(Lc,{type:"button",options:[{value:"hachure",text:`${$(i?"labels.zigzag":"labels.hachure")} (${ye("Alt-Click")})`,icon:i?XTe:KTe,active:i?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:$("labels.crossHatch"),icon:YTe,testId:"fill-cross-hatch"},{value:"solid",text:$("labels.solid"),icon:ZTe,testId:"fill-solid"}],value:Os(e,t,s=>s.fillStyle,s=>s.hasOwnProperty("fillStyle"),s=>s?null:t.currentItemFillStyle),onClick:(s,o)=>{let a=o.altKey&&s==="hachure"&&r.every(l=>l.fillStyle==="hachure")?"zigzag":s;n(a)}})]})}});je({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:Ls(e,t,r=>St(r,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.strokeWidth")}),m.jsx(Lc,{group:"stroke-width",options:[{value:Yk.thin,text:$("labels.thin"),icon:lee,testId:"strokeWidth-thin"},{value:Yk.bold,text:$("labels.bold"),icon:qTe,testId:"strokeWidth-bold"},{value:Yk.extraBold,text:$("labels.extraBold"),icon:QTe,testId:"strokeWidth-extraBold"}],value:Os(e,t,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:t.currentItemStrokeWidth),onChange:r=>n(r)})]})});je({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:Ls(e,t,r=>St(r,{seed:Tc(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.sloppiness")}),m.jsx(Lc,{group:"sloppiness",options:[{value:0,text:$("labels.architect"),icon:tIe},{value:1,text:$("labels.artist"),icon:nIe},{value:2,text:$("labels.cartoonist"),icon:rIe}],value:Os(e,t,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:t.currentItemRoughness),onChange:r=>n(r)})]})});je({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:Ls(e,t,r=>St(r,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.strokeStyle")}),m.jsx(Lc,{group:"strokeStyle",options:[{value:"solid",text:$("labels.strokeStyle_solid"),icon:lee},{value:"dashed",text:$("labels.strokeStyle_dashed"),icon:JTe},{value:"dotted",text:$("labels.strokeStyle_dotted"),icon:eIe}],value:Os(e,t,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:t.currentItemStrokeStyle),onChange:r=>n(r)})]})});je({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:Ls(e,t,r=>St(r,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(kWe,{updateData:n,elements:e,appState:t,testId:"opacity"})});je({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,r)=>RR(e,t,r,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.fontSize")}),m.jsx(Lc,{group:"font-size",options:[{value:16,text:$("labels.small"),icon:yIe,testId:"fontSize-small"},{value:20,text:$("labels.medium"),icon:UIe,testId:"fontSize-medium"},{value:28,text:$("labels.large"),icon:xIe,testId:"fontSize-large"},{value:36,text:$("labels.veryLarge"),icon:wIe,testId:"fontSize-veryLarge"}],value:Os(e,t,i=>{if(Ve(i))return i.fontSize;let s=Ct(i,r.scene.getNonDeletedElementsMap());return s?s.fontSize:null},i=>Ve(i)||Ct(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:t.currentItemFontSize||ld),onChange:i=>n(i)})]})});var pV=je({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:Nw,trackEvent:!1,perform:(e,t,n,r)=>RR(e,t,r,i=>Math.round(1/(1+sse)*i.fontSize)),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&(e.key===J.CHEVRON_LEFT||e.key===J.COMMA)}),mV=je({name:"increaseFontSize",label:"labels.increaseFontSize",icon:Nw,trackEvent:!1,perform:(e,t,n,r)=>RR(e,t,r,i=>Math.round(i.fontSize*(1+sse))),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&(e.key===J.CHEVRON_RIGHT||e.key===J.PERIOD)});je({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,r)=>{var g;let{cachedElements:i,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:Ls(e,t,y=>{let U=i==null?void 0:i.get(y.id);return U?St(y,{...U}):y},!0),appState:{...t,...a},captureUpdate:pe.NEVER};let{currentItemFontFamily:l,currentHoveredFontFamily:f}=n,c=pe.EVENTUALLY,d,u=!1;if(l)d=l,c=pe.IMMEDIATELY;else if(f){d=f,c=pe.EVENTUALLY;let y=Mt(e,t,{includeBoundTextElement:!0}).filter(U=>Ve(U));if(y.length>200)u=!0;else{let U=0,x=0;for(;U<y.length&&x<5e3;){let v=y[U];x+=(v==null?void 0:v.originalText.length)||0,U++}x>5e3&&(u=!0)}}let h={appState:{...t,...a},captureUpdate:c};if(d&&!u){let y=new Map,U=new Set,x=!1,v=Array.from(Hf.loadedFontsCache.values()),E=(g=Object.entries(sr).find(([S,A])=>A===d))==null?void 0:g[0];f&&E&&v.some(S=>S.startsWith(E))&&(x=!0),Object.assign(h,{elements:Ls(e,t,S=>{if(Ve(S)&&(S.fontFamily!==d||l)){let A=St(S,{fontFamily:d,lineHeight:w1(d)}),I=(i==null?void 0:i.get(S.containerId||""))||{},R=r.scene.getContainerElement(S);return o&&R&&I&&Ue(R,{...I},!1),x||(U=new Set([...U,...Array.from(A.originalText)])),y.set(A,R),A}return S},!0)});let k=`10px ${Lg({fontFamily:d})}`,M=Array.from(U.values()).join();if(x||window.document.fonts.check(k,M))for(let[S,A]of y)Ds(S,A,r.scene.getNonDeletedElementsMap(),!1);else window.document.fonts.load(k,M).then(S=>{for(let[A,I]of y){let R=r.scene.getElement(A.id),P=I?r.scene.getElement(I.id):null;R&&Ds(R,P,r.scene.getNonDeletedElementsMap(),!1)}r.fonts.onLoaded(S)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:r})=>{let i=T.useRef(new Map),s=T.useRef(null),[o,a]=T.useState({}),l=T.useRef(!0),f=T.useMemo(()=>{var d;let c=(u,h)=>Os(u,t,g=>{if(Ve(g))return g.fontFamily;let y=Ct(g,h);return y?y.fontFamily:null},g=>Ve(g)||Ct(g,h)!==null,g=>g?null:t.currentItemFontFamily||d0);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?c(Array.from(((d=i.current)==null?void 0:d.values())??[]),i.current):!o.openPopup&&t.openPopup!=="fontFamily"?c(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n.scene]);return T.useEffect(()=>{s.current=f},[f]),T.useEffect(()=>{Object.keys(o).length&&(r(o),a({}))},[o]),T.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.fontFamily")}),m.jsx(EWe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:f,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:c=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:c}),i.current.clear()},onHover:c=>{a({currentHoveredFontFamily:c,cachedElements:new Map(i.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0})},onPopupChange:c=>{if(c){i.current.clear();let{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){let u=n.scene.getElement(d.id);i.current.set(d.id,St(u||d,{},!0))}else{let u=Mt(e,t,{includeBoundTextElement:!0});for(let h of u)i.current.set(h.id,St(h,{},!0))}a({openPopup:"fontFamily"})}else{let d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0};l.current?r({...o,...d}):a(d),i.current.clear()}}})]})}});je({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,r)=>({elements:Ls(e,t,i=>{if(Ve(i)){let s=St(i,{textAlign:n});return Ds(s,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),s}return i},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>{let i=r.scene.getNonDeletedElementsMap();return m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.textAlign")}),m.jsx(Lc,{group:"text-align",options:[{value:"left",text:$("labels.left"),icon:EIe,testId:"align-left"},{value:"center",text:$("labels.center"),icon:kIe,testId:"align-horizontal-center"},{value:"right",text:$("labels.right"),icon:SIe,testId:"align-right"}],value:Os(e,t,s=>{if(Ve(s))return s.textAlign;let o=Ct(s,i);return o?o.textAlign:null},s=>Ve(s)||Ct(s,i)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})]})}});je({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:Ls(e,t,i=>{if(Ve(i)){let s=St(i,{verticalAlign:n});return Ds(s,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),s}return i},!0),appState:{...t},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx("fieldset",{children:m.jsx(Lc,{group:"text-align",options:[{value:Do.TOP,text:$("labels.alignTop"),icon:m.jsx(CIe,{theme:t.theme}),testId:"align-top"},{value:Do.MIDDLE,text:$("labels.centerVertically"),icon:m.jsx(MIe,{theme:t.theme}),testId:"align-middle"},{value:Do.BOTTOM,text:$("labels.alignBottom"),icon:m.jsx(AIe,{theme:t.theme}),testId:"align-bottom"}],value:Os(e,t,i=>{if(Ve(i)&&i.containerId)return i.verticalAlign;let s=Ct(i,r.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},i=>Ve(i)||Ct(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:Do.MIDDLE),onChange:i=>n(i)})})});je({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:Ls(e,t,r=>Ge(r)?r:St(r,{roundness:n==="round"?{type:l6(r.type)?ei.ADAPTIVE_RADIUS:ei.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=sne(Pn(e),t).some(i=>{var s;return((s=i.roundness)==null?void 0:s.type)===ei.LEGACY});return m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.edges")}),m.jsx(Lc,{group:"edges",options:[{value:"sharp",text:$("labels.sharp"),icon:iIe},{value:"round",text:$("labels.round"),icon:sIe}],value:Os(e,t,i=>r?null:i.roundness?"round":"sharp",i=>!Tt(i)&&i.hasOwnProperty("roundness"),i=>i?null:t.currentItemRoundness),onChange:i=>n(i)})]})}});var gV=e=>[{value:null,text:$("labels.arrowhead_none"),keyBinding:"q",icon:oIe},{value:"arrow",text:$("labels.arrowhead_arrow"),keyBinding:"w",icon:m.jsx(aIe,{flip:e})},{value:"triangle",text:$("labels.arrowhead_triangle"),icon:m.jsx(dIe,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:$("labels.arrowhead_triangle_outline"),icon:m.jsx(uIe,{flip:e}),keyBinding:"r"},{value:"circle",text:$("labels.arrowhead_circle"),keyBinding:"a",icon:m.jsx(lIe,{flip:e})},{value:"circle_outline",text:$("labels.arrowhead_circle_outline"),keyBinding:"s",icon:m.jsx(cIe,{flip:e})},{value:"diamond",text:$("labels.arrowhead_diamond"),icon:m.jsx(hIe,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:$("labels.arrowhead_diamond_outline"),icon:m.jsx(pIe,{flip:e}),keyBinding:"f"},{value:"bar",text:$("labels.arrowhead_bar"),keyBinding:"z",icon:m.jsx(fIe,{flip:e})},{value:"crowfoot_one",text:$("labels.arrowhead_crowfoot_one"),icon:m.jsx(gIe,{flip:e}),keyBinding:"c"},{value:"crowfoot_many",text:$("labels.arrowhead_crowfoot_many"),icon:m.jsx(mIe,{flip:e}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:$("labels.arrowhead_crowfoot_one_or_many"),icon:m.jsx(bIe,{flip:e}),keyBinding:"v"}];je({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:Ls(e,t,r=>{if(xt(r)){let{position:i,type:s}=n;if(i==="start")return St(r,{startArrowhead:s});if(i==="end")return St(r,{endArrowhead:s})}return r}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Fb().rtl;return m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.arrowheads")}),m.jsxs("div",{className:"iconSelectList buttonList",children:[m.jsx(hV,{label:"arrowhead_start",options:gV(!r),value:Os(e,t,i=>xt(i)&&W4(i.type)?i.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:i=>n({position:"start",type:i}),numberOfOptionsToAlwaysShow:4}),m.jsx(hV,{label:"arrowhead_end",group:"arrowheads",options:gV(!!r),value:Os(e,t,i=>xt(i)&&W4(i.type)?i.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:i=>n({position:"end",type:i}),numberOfOptionsToAlwaysShow:4})]})]})}});je({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,r)=>{var a;let i=Ls(e,t,l=>{if(!Tt(l))return l;let f=St(l,{roundness:n===Ei.round?{type:ei.PROPORTIONAL_RADIUS}:null,elbowed:n===Ei.elbow,points:n===Ei.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(Ge(f)){let c=r.scene.getNonDeletedElementsMap();r.dismissLinearEditor();let d=We.getPointAtIndexGlobalCoordinates(f,0,c),u=We.getPointAtIndexGlobalCoordinates(f,-1,c),h=!f.startBinding&&hl(dl(d),e,c,t.zoom,!1,!0),g=!f.endBinding&&hl(dl(u),e,c,t.zoom,!1,!0),y=h||f.startBinding&&c.get(f.startBinding.elementId),U=g||f.endBinding&&c.get(f.endBinding.elementId),x=h?Ib(f,h,"start"):d,v=g?Ib(f,g,"end"):u;h&&Mc(f,h,"start",c),g&&Mc(f,g,"end",c),Ue(f,{points:[x,v].map(E=>D(E[0]-f.x,E[1]-f.y)),...y&&f.startBinding?{startBinding:{...f.startBinding,...K4(f,y,"start")}}:{},...U&&f.endBinding?{endBinding:{...f.endBinding,...K4(f,U,"end")}}:{}}),We.updateEditorMidPointsCache(f,c,r.state)}return f}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){let l=i.find(f=>f.id===o);l&&(s.selectedLinearElement=new We(l))}return{elements:i,appState:s,captureUpdate:pe.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.arrowtypes")}),m.jsx(Lc,{group:"arrowtypes",options:[{value:Ei.sharp,text:$("labels.arrowtype_sharp"),icon:eNe,testId:"sharp-arrow"},{value:Ei.round,text:$("labels.arrowtype_round"),icon:nNe,testId:"round-arrow"},{value:Ei.elbow,text:$("labels.arrowtype_elbowed"),icon:tNe,testId:"elbow-arrow"}],value:Os(e,t,r=>Tt(r)?r.elbowed?Ei.elbow:r.roundness?Ei.round:Ei.sharp:null,r=>Tt(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})]})});var hh=({viewportX:e,viewportY:t,nextZoom:n},r)=>{let i=e-r.offsetLeft,s=t-r.offsetTop,o=r.zoom.value,a=r.scrollX+(i-i/o),l=r.scrollY+(s-s/o),f=-(i-i/n),c=-(s-s/n);return{scrollX:a+f,scrollY:l+c,zoom:{value:n}}},R2=()=>{let e=document.querySelector(".excalidraw-tooltip");if(e)return e;let t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},ose=(e,t,n="bottom")=>{let r=e.getBoundingClientRect(),i=window.innerWidth,s=window.innerHeight,o=5,a=t.left+t.width/2-r.width/2;a<0?a=o:a+r.width>=i&&(a=i-r.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+r.height>=s&&(l=t.top-r.height-o)):(l=t.top-r.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},CWe=(e,t,n,r)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=r?"50ch":"10ch",t.style.maxWidth=r?"50ch":"15ch",t.textContent=n;let i=e.getBoundingClientRect();ose(t,i)},C1=({children:e,label:t,long:n=!1,style:r,disabled:i})=>(T.useEffect(()=>()=>R2().classList.remove("excalidraw-tooltip--visible"),[]),i?null:m.jsx("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>CWe(s.currentTarget,R2(),t,n),onPointerLeave:()=>R2().classList.remove("excalidraw-tooltip--visible"),style:r,children:e}));je({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?pe.IMMEDIATELY:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsx(TR,{palette:null,topPicks:CJ,label:$("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:i=>n({viewBackgroundColor:i}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});var _2=je({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:U1,trackEvent:{category:"canvas"},predicate:(e,t,n,r)=>{var i;return!!r.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((i=t.openDialog)==null?void 0:i.name)!=="elementLinkSelector"},perform:(e,t,n,r)=>(r.imageCache.clear(),{elements:e.map(i=>St(i,{isDeleted:!0})),appState:{...Ac(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:pe.IMMEDIATELY})}),bV=je({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:Wz,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...hh({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:jf(t.zoom.value+kw)},t),userToFollow:null},captureUpdate:pe.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(Yt,{type:"button",className:"zoom-in-button zoom-button",icon:Wz,title:`${$("buttons.zoomIn")}  ${ye("CtrlOrCmd++")}`,"aria-label":$("buttons.zoomIn"),disabled:t.zoom.value>=eN,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Jt.EQUAL||e.code===Jt.NUM_ADD)&&(e[J.CTRL_OR_CMD]||e.shiftKey)}),yV=je({name:"zoomOut",label:"buttons.zoomOut",icon:Gz,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...hh({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:jf(t.zoom.value-kw)},t),userToFollow:null},captureUpdate:pe.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(Yt,{type:"button",className:"zoom-out-button zoom-button",icon:Gz,title:`${$("buttons.zoomOut")}  ${ye("CtrlOrCmd+-")}`,"aria-label":$("buttons.zoomOut"),disabled:t.zoom.value<=JI,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Jt.MINUS||e.code===Jt.NUM_SUBTRACT)&&(e[J.CTRL_OR_CMD]||e.shiftKey)}),UV=je({name:"resetZoom",label:"buttons.resetZoom",icon:_Te,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...hh({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:jf(1)},t),userToFollow:null},captureUpdate:pe.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(C1,{label:$("buttons.resetZoom"),style:{height:"100%"},children:m.jsxs(Yt,{type:"button",className:"reset-zoom-button zoom-button",title:$("buttons.resetZoom"),"aria-label":$("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===Jt.ZERO||e.code===Jt.NUM_ZERO)&&(e[J.CTRL_OR_CMD]||e.shiftKey)}),AWe=(e,t,n=1)=>{let[r,i,s,o]=e,a=s-r,l=t.width/a,f=o-i,c=t.height/f,d=Math.min(l,c)*Lt(n,.1,1);return Math.min(d,1)},MWe=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:r=!1,viewportZoomFactor:i=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{i=Lt(i,JI,eN);let[a,l,f,c]=e,d=(a+f)/2,u=(l+c)/2,h=(n==null?void 0:n.left)??0,g=(n==null?void 0:n.top)??0,y=(n==null?void 0:n.right)??0,U=(n==null?void 0:n.bottom)??0,x=t.width-h-y,v=t.height-g-U,E;if(r){let S=f-a,A=c-l;E=Math.min(x/S,v/A)*i}else E=AWe(e,{width:x,height:v},i);let k=jf(Lt(vMe(E,kw,"floor"),s,o)),M=rte({scenePoint:{x:d,y:u},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:k}});return{appState:{...t,scrollX:M.scrollX,scrollY:M.scrollY,zoom:{value:k}},captureUpdate:pe.EVENTUALLY}},c7=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:o})=>{let a=mn(Pn(t));return MWe({canvasOffsets:e,bounds:a,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:o})};je({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:gN,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return c7({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===Jt.TWO&&e.shiftKey&&!e.altKey&&!e[J.CTRL_OR_CMD]});je({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:gN,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return c7({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===Jt.THREE&&e.shiftKey&&!e.altKey&&!e[J.CTRL_OR_CMD]});je({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:gN,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>c7({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()}),keyTest:e=>e.code===Jt.ONE&&e.shiftKey&&!e.altKey&&!e[J.CTRL_OR_CMD]});var h9=je({name:"toggleTheme",label:(e,t)=>t.theme===Ft.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===Ft.LIGHT?JA:eM,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===Ft.LIGHT?Ft.DARK:Ft.LIGHT)},captureUpdate:pe.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===Jt.D,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.toggleTheme});je({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return Yl(t)?n=jr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=jr(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e.key===J.E});var TWe=je({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:fee,viewMode:!1,perform:(e,t,n,r)=>{let i;return Dg(t)?i=jr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(i=jr(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),vn(r.interactiveCanvas,gn.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:i},captureUpdate:pe.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[J.CTRL_OR_CMD]&&e.key===J.H}),$a=je({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,r)=>{var u;let{interactiveCanvas:i,focusContainer:s,scene:o}=r,a=o.getNonDeletedElementsMap();if(t.editingLinearElement){let{elementId:h,startBindingElement:g,endBindingElement:y}=t.editingLinearElement,U=We.getElement(h,a);if(U)return hc(U)&&Lw(U,g,y,a,o),{elements:U.points.length<2||Kg(U)?e.filter(x=>x.id!==U.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:pe.IMMEDIATELY}}let l=e,f=t.pendingImageElementId&&o.getElement(t.pendingImageElementId);f&&Ue(f,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&s();let c=t.multiElement?t.multiElement:((u=t.newElement)==null?void 0:u.type)==="freedraw"?t.newElement:null;if(c){if(c.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){let{points:g,lastCommittedPoint:y}=c;(!y||g[g.length-1]!==y)&&Ue(c,{points:c.points.slice(0,-1)})}Kg(c)&&(l=l.filter(g=>g.id!==c.id));let h=Yf(c.points,t.zoom.value);if((c.type==="line"||c.type==="freedraw")&&h){let g=c.points,y=g[0];Ue(c,{points:g.map((U,x)=>x===g.length-1?D(y[0],y[1]):U)})}if(hc(c)&&!h&&c.points.length>1){let[g,y]=We.getPointAtIndexGlobalCoordinates(c,-1,mt(e));cM(c,t,{x:g,y},a,e)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!c)&&Wa(i);let d;return t.activeTool.type==="eraser"?d=jr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=jr(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&c?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:c&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[c.id]:!0}:t.selectedElementIds,selectedLinearElement:c&&xt(c)?new We(c):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:pe.IMMEDIATELY}},keyTest:(e,t)=>e.key===J.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===J.ESCAPE||e.key===J.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>m.jsx(Yt,{type:"button",icon:HTe,title:$("buttons.done"),"aria-label":$("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),IWe=e=>{let{id:t}=jc(),[n,r]=T.useState(e.value),i=o=>{e.ignoreFocus||HMe(o.target);let a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===J.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return m.jsxs("div",{className:"ProjectName",children:[m.jsx("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),m.jsx("input",{type:"text",className:"TextInput",onBlur:i,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>r(o.target.value)})]})},NWe=e=>{let t=e.title||(e.value===Ft.DARK?$("buttons.lightMode"):$("buttons.darkMode"));return m.jsx(Yt,{type:"icon",icon:e.value===Ft.LIGHT?xV.MOON:xV.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===Ft.DARK?Ft.LIGHT:Ft.DARK),"data-testid":"toggle-dark-mode"})},xV={SUN:m.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:m.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},f7=(e,{selectedElementIds:t},n)=>{e=Pn(e);let r=n&&ti(e,{selectedElementIds:t}),i=null,s=r?Mt(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return r&&(s.length===1&&ht(s[0])?(i=s[0],s=QN(e,i)):s.length>1&&(s=Mt(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:i,exportedElements:$f(s)}},d7=async(e,t,n,r,{exportBackground:i,exportPadding:s=o6,viewBackgroundColor:o,name:a=n.name||_J,fileHandle:l=null,exportingFrame:f=null})=>{if(t.length===0)throw new Error($("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){let d=PN(t,{exportBackground:i,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},r,{exportingFrame:f});if(e==="svg")return J4(d.then(u=>new Blob([u.outerHTML],{type:ft.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[Pg.svg],fileHandle:l});if(e==="clipboard-svg"){let u=await d.then(h=>h.outerHTML);try{await Dy(u)}catch{throw new Error($("errors.copyToSystemClipboardFailed"))}return}}let c=Hte(t,n,r,{exportBackground:i,viewBackgroundColor:o,exportPadding:s,exportingFrame:f});if(e==="png"){let d=jb(c);return n.exportEmbedScene&&(d=d.then(u=>Ze(async()=>{const{encodePngMetadata:h}=await Promise.resolve().then(()=>zoe);return{encodePngMetadata:h}},void 0).then(({encodePngMetadata:h})=>h({blob:u,metadata:IN(t,n,r)})))),J4(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[Pg.png],fileHandle:l})}else if(e==="clipboard")try{let d=jb(c);await eBe(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error($("canvasError.canvasTooBig")):Eb&&d.name==="TypeError"?new Error(`${$("alerts.couldNotCopyToClipboard")}

${$("hints.firefox_clipboard_write")}`):new Error($("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},RWe=async(e,t,n,r)=>{let{exportBackground:i,viewBackgroundColor:s,fileHandle:o}=t,a=pne(o);if(!o||!LBe(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};let{exportedElements:l,exportingFrame:f}=f7(e,t,!1);return await d7(a,l,t,n,{exportBackground:i,viewBackgroundColor:s,name:r,fileHandle:o,exportingFrame:f}),{fileHandle:o}},_R=({children:e,checked:t,onChange:n,className:r})=>m.jsxs("div",{className:Ke("Checkbox",r,{"is-checked":t}),onClick:i=>{n(!t,i),i.currentTarget.querySelector(".Checkbox-box").focus()},children:[m.jsx("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:jTe}),m.jsx("div",{className:"Checkbox-label",children:e})]}),_We=je({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:r,app:i})=>m.jsx(IWe,{label:$("labels.fileTitle"),value:i.getName(),onChange:s=>t(s),ignoreFocus:(r==null?void 0:r.ignoreFocus)??!1})}),PWe=je({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Pn(e),i=ti(r,t)?Mt(r,t):r;return m.jsx(m.Fragment,{children:nN.map(s=>{let[o,a]=bje(i,o6,s),l=`${$("imageExportDialog.label.scale")} ${s}x (${o}x${a})`;return m.jsx(Yt,{size:"small",type:"radio",icon:`${s}x`,name:"export-canvas-scale",title:l,"aria-label":l,id:"export-canvas-scale",checked:s===t.exportScale,onChange:()=>n(s)},s)})})}}),DWe=je({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx(_R,{checked:e.exportBackground,onChange:n=>t(n),children:$("imageExportDialog.label.withBackground")})}),ase=je({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsxs(_R,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[$("imageExportDialog.label.embedScene"),m.jsx(C1,{label:$("imageExportDialog.tooltip.embedScene"),long:!0,children:m.jsx("div",{className:"excalidraw-tooltip-icon",children:VTe})})]})}),wV=je({name:"saveToActiveFile",label:"buttons.save",icon:Iw,trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{let i=!!t.fileHandle;try{let{fileHandle:s}=oR(t.fileHandle)?await RWe(e,t,r.files,r.getName()):await Ate(e,t,r.files,r.getName());return{captureUpdate:pe.EVENTUALLY,appState:{...t,fileHandle:s,toast:i?{message:s!=null&&s.name?$("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):$("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:pe.EVENTUALLY}}},keyTest:e=>e.key===J.S&&e[J.CTRL_OR_CMD]&&!e.shiftKey}),lse=je({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:Iw,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,r)=>{try{let{fileHandle:i}=await Ate(e,{...t,fileHandle:null},r.files,r.getName());return{captureUpdate:pe.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:i,toast:{message:$("toast.fileSaved")}}}}catch(i){return(i==null?void 0:i.name)!=="AbortError"?console.error(i):console.warn(i),{captureUpdate:pe.EVENTUALLY}}},keyTest:e=>e.key===J.S&&e.shiftKey&&e[J.CTRL_OR_CMD],PanelComponent:({updateData:e})=>m.jsx(Yt,{type:"button",icon:FTe,title:$("buttons.saveAs"),"aria-label":$("buttons.saveAs"),showAriaLabel:pi().editor.isMobile,hidden:!P1,onClick:()=>e(null),"data-testid":"save-as-button"})}),$M=je({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{try{let{elements:i,appState:s,files:o}=await aje(t,e);return{elements:i,appState:s,files:o,captureUpdate:pe.IMMEDIATELY}}catch(i){return(i==null?void 0:i.name)==="AbortError"?(console.warn(i),!1):{elements:e,appState:{...t,errorMessage:i.message},files:r.files,captureUpdate:pe.EVENTUALLY}}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.O}),LWe=je({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:m.jsx(NWe,{value:e.exportWithDarkMode?Ft.DARK:Ft.LIGHT,onChange:n=>{t(n===Ft.DARK)},title:$("imageExportDialog.label.darkMode")})})}),cse="{}",OWe=je({name:"copyStyles",label:"labels.copyStyles",icon:gee,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=[],s=e.find(o=>t.selectedElementIds[o.id]);if(i.push(s),s&&Ma(s)){let o=Ct(s,r.scene.getNonDeletedElementsMap());i.push(o)}return s&&(cse=JSON.stringify(i)),{appState:{...t,toast:{message:$("toast.copyStyles")}},captureUpdate:pe.EVENTUALLY}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.C}),jWe=je({name:"pasteStyles",label:"labels.pasteStyles",icon:gee,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=JSON.parse(cse),s=i[0],o=i[1];if(!YJ(s))return{elements:e,captureUpdate:pe.EVENTUALLY};let a=Mt(e,t,{includeBoundTextElement:!0}),l=a.map(f=>f.id);return{elements:e.map(f=>{if(l.includes(f.id)){let c=s;if(Ve(f)&&f.containerId&&(c=o),!c)return f;let d=St(f,{backgroundColor:c==null?void 0:c.backgroundColor,strokeWidth:c==null?void 0:c.strokeWidth,strokeColor:c==null?void 0:c.strokeColor,strokeStyle:c==null?void 0:c.strokeStyle,fillStyle:c==null?void 0:c.fillStyle,opacity:c==null?void 0:c.opacity,roughness:c==null?void 0:c.roughness,roundness:c.roundness?eTe(c.roundness.type,f)?c.roundness:tTe(f):null});if(Ve(d)){let u=c.fontSize||ld,h=c.fontFamily||d0;d=St(d,{fontSize:u,fontFamily:h,textAlign:c.textAlign||Ay,lineHeight:c.lineHeight||w1(h)});let g=null;d.containerId&&(g=a.find(y=>Ve(d)&&y.id===d.containerId)||null),Ds(d,g,r.scene.getNonDeletedElementsMap())}return d.type==="arrow"&&Tt(c)&&(d=St(d,{startArrowhead:c.startArrowhead,endArrowhead:c.endArrowhead})),ht(f)&&(d=St(d,{roundness:null,backgroundColor:"transparent"})),d}return f}),captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.V});je({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx(Yt,{type:"button",icon:nee,"aria-label":$("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});je({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Yt,{visible:sR(t,Pn(e)),type:"button",icon:zTe,"aria-label":$("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});var PR=je({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:DTe,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:r})=>{var i,s;return((i=t.openDialog)==null?void 0:i.name)==="help"&&r(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"}},captureUpdate:pe.EVENTUALLY}},keyTest:e=>e.key===J.QUESTION_MARK}),BWe=e=>{if(e.length>=2){let t=e[0].groupIds;for(let n of t)if(e.reduce((r,i)=>r&&_b(i,n),!0))return!0}return!1},vV=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return r.length>=2&&!BWe(r)&&!rne(r)},FWe=je({name:"group",label:"labels.group",icon:e=>m.jsx(o$,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=qN(r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(i.length<2)return{appState:t,elements:e,captureUpdate:pe.EVENTUALLY};let s=Xh(t);if(s.length===1){let y=s[0],U=new Set(Vn(e,y).map(v=>v.id)),x=new Set(i.map(v=>v.id));if(new Set([...Array.from(U),...Array.from(x)]).size===U.size)return{appState:t,elements:e,captureUpdate:pe.EVENTUALLY}}let o=[...e];new Set(i.map(y=>y.frameId)).size>1&&cBe(i).forEach((y,U)=>{Gw(y,r.scene.getNonDeletedElementsMap())});let a=Ta(),l=mt(i);o=o.map(y=>l.get(y.id)?St(y,{groupIds:hOe(y.groupIds,a,t.editingGroupId)}):y);let f=Vn(o,a),c=f[f.length-1],d=o.lastIndexOf(c),u=o.slice(d+1),h=o.slice(0,d).filter(y=>!_b(y,a)),g=Nc([...h,...f,...u],mt(f));return{appState:{...t,...ste(a,{...t,selectedGroupIds:{}},Pn(o))},elements:g,captureUpdate:pe.IMMEDIATELY}},predicate:(e,t,n,r)=>vV(e,t,r),keyTest:e=>!e.shiftKey&&e[J.CTRL_OR_CMD]&&e.key===J.G,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!vV(e,t,r),type:"button",icon:m.jsx(o$,{theme:t.theme}),onClick:()=>n(null),title:`${$("labels.group")}  ${ye("CtrlOrCmd+G")}`,"aria-label":$("labels.group"),visible:ti(Pn(e),t)})}),zWe=je({name:"ungroup",label:"labels.ungroup",icon:e=>m.jsx(a$,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=Xh(t),s=mt(e);if(i.length===0)return{appState:t,elements:e,captureUpdate:pe.EVENTUALLY};let o=[...e],a=[];o=o.map(d=>{Xn(d)&&a.push(d.id);let u=pOe(d.groupIds,t.selectedGroupIds);return u.length===d.groupIds.length?d:St(d,{groupIds:u})});let l=Ss(t,Pn(o),t,null),f=r.scene.getSelectedElements(t),c=new Set(f.filter(d=>d.frameId).map(d=>d.frameId));return ZN(e).filter(d=>c.has(d.id)).forEach(d=>{d&&(o=tne(o,Z3(o,d,t,s),d,r))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((d,[u,h])=>(h&&!a.includes(u)&&(d[u]=!0),d),{}),{appState:{...t,...l},elements:o,captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[J.CTRL_OR_CMD]&&e.key===J.G.toUpperCase(),predicate:(e,t)=>Xh(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Yt,{type:"button",hidden:Xh(t).length===0,icon:m.jsx(a$,{theme:t.theme}),onClick:()=>n(null),title:`${$("labels.ungroup")}  ${ye("CtrlOrCmd+Shift+G")}`,"aria-label":$("labels.ungroup"),visible:ti(Pn(e),t)})}),fse=(e,t,n,r,i,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadraticCurveTo(t+r,n+i,t+r-s,n+i),e.lineTo(t+s,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function $We(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)-t+r}return t}var u7=(e,t)=>`hsl(${Math.abs($We((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,HWe=e=>{var n;let t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},VWe=({context:e,renderConfig:t,appState:n,normalizedWidth:r,normalizedHeight:i})=>{for(let[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o,f=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;let c=11,d=14,u=a<0||a>r-c||l<0||l>i-d;a=Math.max(a,0),a=Math.min(a,r-c),l=Math.max(l,0),l=Math.min(l,i-d);let h=u7(s,f);e.save(),e.strokeStyle=h,e.fillStyle=h;let g=t.remotePointerUserStates.get(s),y=u||g==="idle"||g==="away";y&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());let U=n.theme===Ft.DARK?"#2f6330":tMe,x=f==null?void 0:f.isSpeaking;x&&(e.fillStyle=U,e.strokeStyle=U,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=FU,e.strokeStyle=FU,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),y?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());let v=t.remotePointerUsernames.get(s)||"";if(!u&&v){e.font="600 12px sans-serif";let E=(x?a+0:a)+c/2,k=(x?l+0:l)+d+2,M=5,S=3,A=e.measureText(v),I=A.actualBoundingBoxDescent+A.actualBoundingBoxAscent,R=Math.max(I,12),P=E-1,_=k-1,O=A.width+2+M*2+2,V=R+2+S*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(P,_,O,V,8),e.fillStyle=h,e.fill(),e.strokeStyle=FU,e.stroke(),x&&(e.beginPath(),e.roundRect(P-2,_-2,O+4,V+4,8),e.strokeStyle=U,e.stroke())):fse(e,P,_,O,V,8,FU),e.fillStyle=eMe,e.fillText(v,E+M+1,k+S+A.actualBoundingBoxAscent+Math.floor((R-I)/2)+2),x){e.fillStyle=U;let j=8,F=8,z=5;e.fillRect(P+O+F,_+(V/2-j/2),2,j),e.fillRect(P+O+F+z,_+(V/2-j*2/2),2,j*2),e.fillRect(P+O+F+z*2,_+(V/2-j/2),2,j)}}e.restore(),e.closePath()}},EV=({color:e,onClick:t,name:n,src:r,className:i})=>{let s=HWe(n),[o,a]=T.useState(!1),l=!o&&r,f=l?void 0:{background:e};return m.jsx("div",{className:Ke("Avatar",i),style:f,onClick:t,children:l?m.jsx("img",{className:"Avatar-img",src:r,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};je({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var r;return!n.socketId||((r=t.userToFollow)==null?void 0:r.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:pe.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:pe.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{let{socketId:r,collaborator:i,withName:s,isBeingFollowed:o}=t,a=u7(r,i),l=Ke({"is-followed":o,"is-current-user":i.isCurrentUser===!0,"is-speaking":i.isSpeaking,"is-in-call":i.isInCall,"is-muted":i.isMuted}),f=i.isInCall?i.isSpeaking?m.jsxs("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:$("userList.hint.isSpeaking"),children:[m.jsx("div",{}),m.jsx("div",{}),m.jsx("div",{})]}):i.isMuted?m.jsx("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:$("userList.hint.micMuted"),children:zIe}):m.jsx("div",{title:$("userList.hint.inCall"),children:FIe}):null;return s?m.jsxs("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(i),children:[m.jsx(EV,{color:a,onClick:()=>{},name:i.username||"",src:i.avatarUrl,className:l}),m.jsx("div",{className:"UserList__collaborator-name",children:i.username}),m.jsxs("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&m.jsx("div",{className:"UserList__collaborator-status-icon-is-followed",title:$("userList.hint.followStatus"),children:mN}),f]})]}):m.jsxs("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[m.jsx(EV,{color:a,onClick:()=>{e(i)},name:i.username||"",src:i.avatarUrl,className:l}),f&&m.jsx("div",{className:"UserList__collaborator-status-icon",children:f})]})}});var WWe=je({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(let s of RJ)if(i.some(o=>o.type===s))return{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:$(`errors.libraryElementTypeError.${s}`)}};return r.library.getLatestLibrary().then(s=>r.library.setLibrary([{id:Ta(),status:"unpublished",elements:i.map(L1),created:Date.now()},...s])).then(()=>({captureUpdate:pe.EVENTUALLY,appState:{...t,toast:{message:$("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),GWe=(e,t,n,r)=>{let i=Fw(e,t),s=yl(e);return i.flatMap(o=>{let a=XWe(o,s,n);return o.map(l=>{let f=Ue(l,{x:l.x+a.x,y:l.y+a.y});return uo(l,r.getNonDeletedElementsMap(),{simultaneouslyUpdated:o}),f})})},XWe=(e,t,{axis:n,position:r})=>{let i=yl(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return r==="start"?{...a,[n]:t[s]-i[s]}:r==="end"?{...a,[n]:t[o]-i[o]}:{...a,[n]:(t[s]+t[o])/2-(i[s]+i[o])/2}},Fo=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>ht(r))},p6=(e,t,n,r)=>{let i=n.scene.getSelectedElements(t),s=mt(e),o=GWe(i,s,r,n.scene),a=mt(o);return Xg(e.map(l=>a.get(l.id)||l),t,n)};je({name:"alignTop",label:"labels.alignTop",icon:e$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Fo(t,r),perform:(e,t,n,r)=>({appState:t,elements:p6(e,t,r,{position:"start",axis:"y"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key===J.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!Fo(t,r),type:"button",icon:e$,onClick:()=>n(null),title:`${$("labels.alignTop")}  ${ye("CtrlOrCmd+Shift+Up")}`,"aria-label":$("labels.alignTop"),visible:ti(Pn(e),t)})});je({name:"alignBottom",label:"labels.alignBottom",icon:t$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Fo(t,r),perform:(e,t,n,r)=>({appState:t,elements:p6(e,t,r,{position:"end",axis:"y"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key===J.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!Fo(t,r),type:"button",icon:t$,onClick:()=>n(null),title:`${$("labels.alignBottom")}  ${ye("CtrlOrCmd+Shift+Down")}`,"aria-label":$("labels.alignBottom"),visible:ti(Pn(e),t)})});je({name:"alignLeft",label:"labels.alignLeft",icon:n$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Fo(t,r),perform:(e,t,n,r)=>({appState:t,elements:p6(e,t,r,{position:"start",axis:"x"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key===J.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!Fo(t,r),type:"button",icon:n$,onClick:()=>n(null),title:`${$("labels.alignLeft")}  ${ye("CtrlOrCmd+Shift+Left")}`,"aria-label":$("labels.alignLeft"),visible:ti(Pn(e),t)})});je({name:"alignRight",label:"labels.alignRight",icon:r$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Fo(t,r),perform:(e,t,n,r)=>({appState:t,elements:p6(e,t,r,{position:"end",axis:"x"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key===J.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!Fo(t,r),type:"button",icon:r$,onClick:()=>n(null),title:`${$("labels.alignRight")}  ${ye("CtrlOrCmd+Shift+Right")}`,"aria-label":$("labels.alignRight"),visible:ti(Pn(e),t)})});je({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:i$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Fo(t,r),perform:(e,t,n,r)=>({appState:t,elements:p6(e,t,r,{position:"center",axis:"y"}),captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!Fo(t,r),type:"button",icon:i$,onClick:()=>n(null),title:$("labels.centerVertically"),"aria-label":$("labels.centerVertically"),visible:ti(Pn(e),t)})});je({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:s$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Fo(t,r),perform:(e,t,n,r)=>({appState:t,elements:p6(e,t,r,{position:"center",axis:"x"}),captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!Fo(t,r),type:"button",icon:s$,onClick:()=>n(null),title:$("labels.centerHorizontally"),"aria-label":$("labels.centerHorizontally"),visible:ti(Pn(e),t)})});var KWe=(e,t,n)=>{let[r,i,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=yl(e),l=Fw(e,t).map(u=>[u,yl(u)]).sort((u,h)=>u[1][i]-h[1][i]),f=0;for(let u of l)f+=u[1][o];let c=(a[o]-f)/(l.length-1);if(c<0){let u=l.findIndex(U=>U[1][r]===a[r]),h=l.findIndex(U=>U[1][s]===a[s]),g=(l[h][1][i]-l[u][1][i])/(l.length-1),y=l[u][1][i];return l.flatMap(([U,x],v)=>{let E={x:0,y:0};return v!==u&&v!==h&&(y+=g,E[n.axis]=y-x[i]),U.map(k=>St(k,{x:k.x+E.x,y:k.y+E.y}))})}let d=a[r];return l.flatMap(([u,h])=>{let g={x:0,y:0};return g[n.axis]=d-h[r],d+=c,d+=h[o],u.map(y=>St(y,{x:y.x+g.x,y:y.y+g.y}))})},dse=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>ht(r))},use=(e,t,n,r)=>{let i=n.scene.getSelectedElements(t),s=KWe(i,n.scene.getNonDeletedElementsMap(),r),o=mt(s);return Xg(e.map(a=>o.get(a.id)||a),t,n)};je({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:use(e,t,r,{space:"between",axis:"x"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.H,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!dse(t,r),type:"button",icon:WTe,onClick:()=>n(null),title:`${$("labels.distributeHorizontally")}  ${ye("Alt+H")}`,"aria-label":$("labels.distributeHorizontally"),visible:ti(Pn(e),t)})});je({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:use(e,t,r,{space:"between",axis:"y"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.V,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Yt,{hidden:!dse(t,r),type:"button",icon:GTe,onClick:()=>n(null),title:`${$("labels.distributeVertically")}  ${ye("Alt+V")}`,"aria-label":$("labels.distributeVertically"),visible:ti(Pn(e),t)})});var YWe=je({name:"flipHorizontal",label:"labels.flipHorizontal",icon:WIe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:Xg(hse(e,r.scene.getNonDeletedElementsMap(),t,"horizontal",r),t,r),appState:t,captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Jt.H}),ZWe=je({name:"flipVertical",label:"labels.flipVertical",icon:VIe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:Xg(hse(e,r.scene.getNonDeletedElementsMap(),t,"vertical",r),t,r),appState:t,captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Jt.V&&!e[J.CTRL_OR_CMD]}),hse=(e,t,n,r,i)=>{let s=Mt(Pn(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=qWe(s,t,n,r,i),a=mt(o);return e.map(l=>a.get(l.id)||l)},qWe=(e,t,n,r,i)=>{if(e.every(h=>Tt(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{let g=h;return St(g,{startArrowhead:g.endArrowhead,endArrowhead:g.startArrowhead})});let{midX:s,midY:o}=yl(e);dne(e,t,"nw",i.scene,new Map(Array.from(t.values()).map(h=>[h.id,L1(h)])),{flipByX:r==="horizontal",flipByY:r==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),X4(e.filter(xt),t,i.scene.getNonDeletedElements(),i.scene,dh(n),[],n.zoom);let{elbowArrows:a,otherElements:l}=e.reduce((h,g)=>Ge(g)?{...h,elbowArrows:h.elbowArrows.concat(g)}:{...h,otherElements:h.otherElements.concat(g)},{elbowArrows:[],otherElements:[]}),{midX:f,midY:c}=yl(e),[d,u]=[s-f,o-c];return l.forEach(h=>Ue(h,{x:h.x+d,y:h.y+u})),a.forEach(h=>Ue(h,{x:h.x+d,y:h.y+u})),e},ix=je({name:"copy",label:"labels.copy",icon:QA,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await Yje(i,r.files,n)}catch(s){return{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:pe.EVENTUALLY}},keyTest:void 0}),kV=je({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i;try{i=await Qje()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),Eb?{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:$("hints.firefox_clipboard_write")}}:{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:$("errors.asyncPasteFailedOnRead")}})}try{r.pasteFromClipboard(Xje({types:i}))}catch(s){return console.error(s),{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:$("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:pe.EVENTUALLY}},keyTest:void 0}),SV=je({name:"cut",label:"labels.cut",icon:IIe,trackEvent:{category:"element"},perform:(e,t,n,r)=>(ix.perform(e,t,n,r),Bie.perform(e,t,null,r)),keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.X}),CV=je({name:"copyAsSvg",label:"labels.copyAsSvg",icon:GIe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:pe.EVENTUALLY};let{exportedElements:i,exportingFrame:s}=f7(e,t,!0);try{await d7("clipboard-svg",i,t,r.files,{...t,exportingFrame:s,name:r.getName()});let o=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:$("toast.copyToClipboardAsSvg",{exportSelection:o.length?$("toast.selection"):$("toast.canvas"),exportColorScheme:t.exportWithDarkMode?$("buttons.darkMode"):$("buttons.lightMode")})}},captureUpdate:pe.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:pe.EVENTUALLY}}},predicate:e=>WN&&e.length>0,keywords:["svg","clipboard","copy"]}),AV=je({name:"copyAsPng",label:"labels.copyAsPng",icon:XIe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:pe.EVENTUALLY};let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=f7(e,t,!0);try{return await d7("clipboard",s,t,r.files,{...t,exportingFrame:o,name:r.getName()}),{appState:{...t,toast:{message:$("toast.copyToClipboardAsPng",{exportSelection:i.length?$("toast.selection"):$("toast.canvas"),exportColorScheme:t.exportWithDarkMode?$("buttons.darkMode"):$("buttons.lightMode")})}},captureUpdate:pe.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:pe.EVENTUALLY}}},predicate:e=>GN&&e.length>0,keyTest:e=>e.code===Jt.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),MV=je({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{Dy(POe(i))}catch{throw new Error($("errors.copyToSystemClipboardFailed"))}return{captureUpdate:pe.EVENTUALLY}},predicate:(e,t,n,r)=>WN&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(Ve),keywords:["text","clipboard","copy"]}),TV=je({name:"gridMode",icon:QIe,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:pe.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[J.CTRL_OR_CMD]&&e.code===Jt.QUOTE}),HM=je({name:"zenMode",label:"buttons.zenMode",icon:YIe,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:pe.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.Z}),QWe=je({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:KIe,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:pe.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.S}),VM=je({name:"stats",label:"stats.fullTitle",icon:HIe,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:pe.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.SLASH}),JWe=je({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>r.scene.getSelectedElements(t).some(i=>Ma(i)),perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=r.scene.getNonDeletedElementsMap();return i.forEach(o=>{var l;let a=Ct(o,s);if(a){let{width:f,height:c}=hs(a.originalText,kn(a),a.lineHeight),d=AOe(o.id);dte(o.id);let{x:u,y:h}=$w(o,a,s);Ue(a,{containerId:null,width:f,height:c,text:a.originalText,x:u,y:h}),Ue(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(g=>g.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:pe.IMMEDIATELY}}}),eGe=je({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);if(i.length===2){let s=Ve(i[0])||Ve(i[1]),o;if(Gh(i[0])?o=i[0]:Gh(i[1])&&(o=i[1]),s&&o&&Ct(o,r.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s,o;Ve(i[0])&&Gh(i[1])?(s=i[0],o=i[1]):(s=i[1],o=i[0]),Ue(s,{containerId:o.id,verticalAlign:Do.MIDDLE,textAlign:Sb.CENTER,autoResize:!0}),Ue(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});let a=o.height;return Ds(s,o,r.scene.getNonDeletedElementsMap()),Y4(o.id,a),{elements:tGe(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:pe.IMMEDIATELY}}}),tGe=(e,t,n)=>{let r=e.slice(),i=r.findIndex(o=>o.id===n.id);r.splice(i,1);let s=r.findIndex(o=>o.id===t.id);return r.splice(s+1,0,n),Nc(r,mt([t,n])),r},nGe=(e,t,n)=>{let r=e.slice(),i=r.findIndex(o=>o.id===t.id);r.splice(i,1);let s=r.findIndex(o=>o.id===n.id);return r.splice(s,0,t),Nc(r,mt([t,n])),r},rGe=je({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=i.every(o=>Ve(o));return i.length>0&&s},perform:(e,t,n,r)=>{var a;let i=r.scene.getSelectedElements(t),s=e.slice(),o={};for(let l of i)if(Ve(l)){let f=Ic({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:l6("rectangle")?ei.ADAPTIVE_RADIUS:ei.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-Jr,y:l.y-Jr,width:E1(l.width,"rectangle"),height:E1(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){let c=l.boundElements.filter(d=>d.type==="arrow").map(d=>d.id);s.filter(d=>c.includes(d.id)).forEach(d=>{let u=d.startBinding,h=d.endBinding;(u==null?void 0:u.elementId)===l.id&&(u={...u,elementId:f.id}),(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:f.id}),(u||h)&&Ue(d,{startBinding:u,endBinding:h},!1)})}Ue(l,{containerId:f.id,verticalAlign:Do.MIDDLE,boundElements:null,textAlign:Sb.CENTER,autoResize:!0},!1),Ds(l,f,r.scene.getNonDeletedElementsMap()),s=nGe([...s,f],f,l),o[f.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:pe.IMMEDIATELY}}}),DR=380,iGe=42,WM=5,pse=85,sGe=500,GM=!1,n3=new Map,oGe=({element:e,elementsMap:t,setAppState:n,onLinkOpen:r,setToast:i,updateEmbedValidationStatus:s})=>{let o=$y(),a=zy(),l=pi(),f=e.link||"",[c,d]=T.useState(f),u=T.useRef(null),h=o.showHyperlinkPopup==="editor",g=T.useCallback(()=>{var k;if(!u.current)return;let E=Lo(u.current.value)||null;if(!e.link&&E&&jn("hyperlink","create"),eo(e)){if(((k=o.activeEmbeddable)==null?void 0:k.element)===e&&n({activeEmbeddable:null}),!E){Ue(e,{link:null}),s(e,!1);return}if(!K3(E,a.validateEmbeddable))E&&i({message:$("toast.unableToEmbed"),closable:!0}),e.link&&n3.set(e.id,e.link),Ue(e,{link:E}),s(e,!1);else{let{width:M,height:S}=e,A=tm(E);(A==null?void 0:A.error)instanceof URIError&&i({message:$("toast.unrecognizedLinkFormat"),closable:!0});let I=A?A.intrinsicSize.w/A.intrinsicSize.h:1,R=n3.get(e.id)!==e.link;Ue(e,{...R?{width:(A==null?void 0:A.type)==="video"?M>S?M:S*I:M,height:(A==null?void 0:A.type)==="video"&&M>S?M/I:S}:{},link:E}),s(e,!0),n3.has(e.id)&&n3.delete(e.id)}}else Ue(e,{link:E})},[e,i,a.validateEmbeddable,o.activeEmbeddable,n,s]);T.useLayoutEffect(()=>()=>{g()},[g]),T.useEffect(()=>{h&&(u!=null&&u.current)&&!(l.viewport.isMobile||l.isTouchScreen)&&u.current.select()},[h,l.viewport.isMobile,l.isTouchScreen]),T.useEffect(()=>{let E=null,k=M=>{h||(E&&clearTimeout(E),cGe(e,t,o,D(M.clientX,M.clientY))&&(E=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},sGe)))};return window.addEventListener("pointermove",k,!1),()=>{window.removeEventListener("pointermove",k,!1),E&&clearTimeout(E)}},[o,e,h,n,t]);let y=T.useCallback(()=>{jn("hyperlink","delete"),Ue(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e]),U=()=>{jn("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x,y:v}=mse(e,o,t);return o.contextMenu||o.selectedElementsAreBeingDragged||o.resizingElement||o.isRotating||o.openMenu||o.viewModeEnabled?null:m.jsxs("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${v}px`,left:`${x}px`,width:DR,padding:WM},children:[h?m.jsx("input",{className:Ke("excalidraw-hyperlinkContainer-input"),placeholder:$("labels.link.hint"),ref:u,value:c,onChange:E=>d(E.target.value),autoFocus:!0,onKeyDown:E=>{E.stopPropagation(),E[J.CTRL_OR_CMD]&&E.key===J.K&&E.preventDefault(),(E.key===J.ENTER||E.key===J.ESCAPE)&&(g(),n({showHyperlinkPopup:"info"}))}}):e.link?m.jsx("a",{href:Lo(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:hte(e.link)?"_self":"_blank",onClick:E=>{if(e.link&&r){let k=VJ("excalidraw-link",E.nativeEvent);r({...e,link:Lo(e.link)},k),k.defaultPrevented&&E.preventDefault()}},rel:"noopener noreferrer",children:e.link}):m.jsx("div",{className:"excalidraw-hyperlinkContainer-link",children:$("labels.link.empty")}),m.jsxs("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!h&&m.jsx(Yt,{type:"button",title:$("buttons.edit"),"aria-label":$("buttons.edit"),label:$("buttons.edit"),onClick:U,className:"excalidraw-hyperlinkContainer--edit",icon:Mb}),m.jsx(Yt,{type:"button",title:$("labels.linkToElement"),"aria-label":$("labels.linkToElement"),label:$("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:yee}),f&&!eo(e)&&m.jsx(Yt,{type:"button",title:$("buttons.remove"),"aria-label":$("buttons.remove"),label:$("buttons.remove"),onClick:y,className:"excalidraw-hyperlinkContainer--remove",icon:U1})]})]})},mse=(e,t,n)=>{let[r,i]=wt(e,n),{x:s,y:o}=fl({sceneX:r+e.width/2,sceneY:i},t),a=s-t.offsetLeft-DR/2,l=o-t.offsetTop-pse;return{x:a,y:l}},IV=(e,t)=>{var r;let n=Mt(e,t);return eo(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"},P2=null,aGe=(e,t,n)=>{P2&&clearTimeout(P2),P2=window.setTimeout(()=>lGe(e,t,n),aMe)},lGe=(e,t,n)=>{if(!e.link)return;let r=R2();r.classList.add("excalidraw-tooltip--visible"),r.style.maxWidth="20rem",r.textContent=M2(e.link)?$("labels.link.goToElement"):e.link;let[i,s,o,a]=wt(e,n),[l,f,c,d]=NN([i,s,o,a],e.angle,t),u=fl({sceneX:l,sceneY:f},t);ose(r,{left:u.x,top:u.y,width:c,height:d},"top"),jn("hyperlink","tooltip","link-icon"),GM=!0},NV=()=>{P2&&clearTimeout(P2),GM&&(GM=!1,R2().classList.remove("excalidraw-tooltip--visible"))},cGe=(e,t,n,[r,i])=>{let{x:s,y:o}=On({clientX:r,clientY:i},n),a=15/n.zoom.value;if(yN(s,o,e,t))return!1;let[l,f,c]=wt(e,t);if(s>=l&&s<=c&&o>=f-pse&&o<=f)return!1;let{x:d,y:u}=mse(e,n,t);return!(r>=d-a&&r<=d+DR+WM*2+a&&i>=u-a&&i<=u+a+WM*2+iGe)},gse=je({name:"hyperlink",label:(e,t)=>IV(e,t),icon:tM,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:pe.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.K,predicate:(e,t)=>Mt(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Mt(e,t);return m.jsx(Yt,{type:"button",icon:tM,"aria-label":$(IV(e,t)),title:`${eo(e[0])?$("labels.link.labelEmbed"):$("labels.link.label")} - ${ye("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:r.length===1&&!!r[0].link})}}),IS=e=>e.every(t=>!t.locked),fGe=je({name:"toggleElementLock",label:(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return r.length===1&&!ht(r[0])?r[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":IS(r)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{let n=Mt(t,e);return IS(n)?dN:Tw},trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return i.length>0&&!i.some(s=>s.locked&&s.frameId)},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!i.length)return!1;let s=IS(i),o=mt(i);return{elements:e.map(a=>o.has(a.id)?St(a,{locked:s}):a),appState:{...t,selectedLinearElement:s?null:t.selectedLinearElement},captureUpdate:pe.IMMEDIATELY}},keyTest:(e,t,n,r)=>e.key.toLocaleLowerCase()===J.L&&e[J.CTRL_OR_CMD]&&e.shiftKey&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),dGe=je({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:Tw,predicate:(e,t)=>Mt(e,t).length===0&&e.some(n=>n.locked),perform:(e,t)=>{let n=e.filter(r=>r.locked);return{elements:e.map(r=>r.locked?St(r,{locked:!1}):r),appState:{...t,selectedElementIds:Object.fromEntries(n.map(r=>[r.id,!0]))},captureUpdate:pe.IMMEDIATELY}},label:"labels.elementLock.unlockAll"}),uGe=()=>{let[e,t]=T.useState(null),n=T.useCallback(r=>t(r),[]);return[e,n]},hGe=e=>{let{closeOnClickOutside:t=!0}=e,n=Yie({className:"excalidraw-modal-container"}),r=T.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;let i=s=>{s.key===J.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return fi.createPortal(m.jsxs("div",{className:Ke("Modal",e.className,{"animations-disabled":r.current}),role:"dialog","aria-modal":"true",onKeyDown:i,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[m.jsx("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),m.jsx("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)},bse=Ri(new Map),RV=async e=>await Zte({elements:e,appState:{exportBackground:!1,viewBackgroundColor:Pt.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),pGe=(e,t,n)=>{let[r,i]=T.useState();return T.useEffect(()=>{if(t)if(e){let s=n.get(e);s?i(s):(async()=>{var a;let o=await RV(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),i(o))})()}else(async()=>{let s=await RV(t);i(s)})()},[e,t,n,i]),r},yse=()=>{let[e]=Er(bse);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:t=>{t.forEach(n=>e.delete(n))},svgCache:e}},mGe=class{constructor(){Q(this,"jobs",[]),Q(this,"running",!1)}tick(){if(this.running)return;let e=this.jobs.shift();e?(this.running=!0,e.promise.resolve(jg(e.jobFactory,...e.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(e,...t){let n=zMe();return this.jobs.push({jobFactory:e,promise:n,args:t}),this.tick(),n}},gGe=new Zl,zb=Ri({status:"loaded",isInitialized:!1,libraryItems:[]}),C5=e=>$f(e),bGe=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((r,i)=>r.id===t.elements[i].id&&r.versionNonce===t.elements[i].versionNonce)),yGe=(e,t)=>{let n=[];for(let r of t)bGe(e,r)&&n.push(r);return[...n,...e]},UGe=(e,t)=>{let n=mt(t),r={deletedItems:new Map,addedItems:new Map};for(let s of e)n.has(s.id)||r.deletedItems.set(s.id,s);let i=mt(e);for(let s of t)i.has(s.id)||r.addedItems.set(s.id,s);return r},xGe=class{constructor(e){Q(this,"currLibraryItems",[]),Q(this,"prevLibraryItems",C5(this.currLibraryItems)),Q(this,"app"),Q(this,"updateQueue",[]),Q(this,"getLastUpdateTask",()=>this.updateQueue[this.updateQueue.length-1]),Q(this,"notifyListeners",()=>{var t,n;if(this.updateQueue.length>0)pl.set(zb,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{pl.set(zb,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{let r=this.prevLibraryItems;this.prevLibraryItems=C5(this.currLibraryItems);let i=C5(this.currLibraryItems);(n=(t=this.app.props).onLibraryChange)==null||n.call(t,i),gGe.trigger(UGe(r,i),i)}catch(r){console.error(r)}}}),Q(this,"destroy",()=>{this.updateQueue=[],this.currLibraryItems=[],pl.set(bse,new Map)}),Q(this,"resetLibrary",()=>this.setLibrary([])),Q(this,"getLatestLibrary",()=>new Promise(async t=>{try{let n=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?t(this.getLatestLibrary()):t(C5(n))}catch{return t(this.currLibraryItems)}})),Q(this,"updateLibrary",async({libraryItems:t,prompt:n=!1,merge:r=!1,openLibraryMenu:i=!1,defaultStatus:s="unpublished"})=>(i&&this.app.setState({openSidebar:{name:gl.name,tab:_4}}),this.setLibrary(()=>new Promise(async(o,a)=>{try{let l=await(typeof t=="function"&&!(t instanceof Blob)?t(this.currLibraryItems):t),f;l instanceof Blob?f=await OBe(l,s):f=VN(l,s),!n||window.confirm($("alerts.confirmAddLibrary",{numShapes:f.length}))?(n&&this.app.focusContainer(),o(r?yGe(this.currLibraryItems,f):f)):a(new Rw)}catch(l){a(l)}})))),Q(this,"setLibrary",t=>{let n=new Promise(async(r,i)=>{try{await this.getLastUpdateTask(),typeof t=="function"&&(t=t(this.currLibraryItems)),this.currLibraryItems=C5(await t),r(this.currLibraryItems)}catch(s){i(s)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==n),this.notifyListeners()});return this.updateQueue.push(n),this.notifyListeners(),n}),this.app=e}},wGe=xGe,Use=e=>{let t=Math.ceil(Math.sqrt(e.length)),n=[],r=u=>e.slice(u*t,u*t+t).reduce((h,g)=>{let{height:y}=yl(g.elements);return Math.max(h,y)},0),i=u=>{let h=0,g=0,y=0;for(let U of e){if(h%t===0&&(g=0),g===u){let{width:x}=yl(U.elements);y=Math.max(y,x)}h++,g++}return y},s=0,o=0,a=0,l=0,f=0,c=0,d=0;for(let u of e){f&&f%t===0&&(o+=a+50,s=0,c=0,d++),c===0&&(a=r(d)),l=i(c);let{minX:h,minY:g,width:y,height:U}=yl(u.elements),x=(l-y)/2,v=(a-U)/2;n.push(...u.elements.map(E=>({...E,x:E.x+s+x-h,y:E.y+o+v-g}))),s+=l+50,f++,c++}return n},r3=class XM{constructor(t){Q(this,"adapter"),this.adapter=t}static async getLibraryItems(t,n,r=!0){let i=()=>new Promise(async(s,o)=>{try{let a=await t.load({source:n});s(VN((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return r?XM.queue.push(i):i()}getLibraryItems(t){return XM.getLibraryItems(this.adapter,t,!1)}};Q(r3,"queue",new mGe),Q(r3,"run",async(e,t)=>{let n=new r3(e);return r3.queue.push(()=>t(n))});var vGe=T.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:s},o)=>m.jsx("div",{className:Ke("Stack Stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...s},ref:o,children:e})),EGe=T.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:s},o)=>m.jsx("div",{className:Ke("Stack Stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...s},ref:o,children:e})),ya={Row:vGe,Col:EGe},kGe=({theme:e,id:t,libraryReturnUrl:n})=>{let r=n||window.location.origin+window.location.pathname;return m.jsx("a",{className:"library-menu-browse-button",href:`${At.VITE_APP_LIBRARY_URL}?target=${window.name||"_blank"}&referrer=${r}&useHash=true&token=${t}&theme=${e}&version=${Sw.excalidrawLibrary}`,target:"_excalidraw_libraries",children:$("labels.libraries")})},SGe=kGe,xse=({libraryReturnUrl:e,theme:t,id:n,style:r,children:i,className:s})=>m.jsxs("div",{className:Ke("library-menu-control-buttons",s),style:r,children:[m.jsx(SGe,{id:n,libraryReturnUrl:e,theme:t}),i]}),CGe=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,AGe=/{{([\w-]+)}}/,MGe=/<([\w-]+)>/,TGe=/<\/([\w-]+)>/,IGe=(e,t)=>{let n=[{name:"",children:[]}];return e.split(CGe).filter(Boolean).forEach(r=>{let i=r.match(MGe),s=r.match(TGe),o=r.match(AGe);if(i!==null){let a=i[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){let a=n.pop(),l=Ie.createElement(Ie.Fragment,{},...a.children),f=t[a.name];typeof f=="function"&&n[n.length-1].children.push(f(l))}else console.warn(`Trans: unexpected end tag ${r} for interpolating ${e}`);else if(o!==null){let a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(r)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},NGe=({i18nKey:e,children:t,...n})=>{let{t:r}=bs();return Ie.createElement(Ie.Fragment,{},...IGe(r(e),n))},bc=NGe,RGe=({label:e,onClick:t,className:n,children:r,actionType:i,type:s="button",isLoading:o,...a})=>{let l=i?`Dialog__action-button--${i}`:"";return m.jsxs("button",{className:Ke("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[r&&m.jsx("div",{style:o?{visibility:"hidden"}:{},children:r}),m.jsx("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&m.jsx("div",{style:{position:"absolute",inset:0},children:m.jsx(rd,{})})]})},qg=RGe,_Ge=e=>{let{onConfirm:t,onCancel:n,children:r,confirmText:i=$("buttons.confirm"),cancelText:s=$("buttons.cancel"),className:o="",...a}=e,l=mi(),f=i7(LR),{container:c}=jc();return m.jsxs(Il,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[r,m.jsxs("div",{className:"confirm-dialog-buttons",children:[m.jsx(qg,{label:s,onClick:()=>{l({openMenu:null}),f(!1),fi.flushSync(()=>{n()}),c==null||c.focus()}}),m.jsx(qg,{label:i,onClick:()=>{l({openMenu:null}),f(!1),fi.flushSync(()=>{t()}),c==null||c.focus()},actionType:"danger"})]})]})},wse=_Ge,Zh=class{static has(e){try{return!!window.localStorage.getItem(e)}catch(t){return console.warn(`localStorage.getItem error: ${t.message}`),!1}}static get(e){try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn(`localStorage.getItem error: ${t.message}`),null}}};Q(Zh,"set",(e,t)=>{try{return window.localStorage.setItem(e,JSON.stringify(t)),!0}catch(n){return console.warn(`localStorage.setItem error: ${n.message}`),!1}}),Q(Zh,"delete",e=>{try{window.localStorage.removeItem(e)}catch(t){console.warn(`localStorage.removeItem error: ${t.message}`)}});var PGe=async e=>{let t=Math.round(8),n=Math.max(Math.round(128/64),2),r=OMe(e,6),i=document.createElement("canvas");i.width=r[0].length*128+(r[0].length+1)*(t*2)-t*2,i.height=r.length*128+(r.length+1)*(t*2)-t*2;let s=i.getContext("2d");s.fillStyle=Mi.white,s.fillRect(0,0,i.width,i.height);for(let[o,a]of e.entries()){let l=await XN({elements:a.elements,files:null,maxWidthOrHeight:128}),{width:f,height:c}=l,d=Math.floor(o/6)*(128+t*2),u=o%6*(128+t*2);s.drawImage(l,u+(128-f)/2+t,d+(128-c)/2+t),s.lineWidth=n,s.strokeStyle=Mi.gray[4],s.strokeRect(u+t/2,d+t/2,128+t,128+t)}return await vM(new File([await jb(i)],"preview",{type:ft.png}),{outputType:ft.jpg,maxWidthOrHeight:5e3})},DGe=({libItem:e,appState:t,index:n,onChange:r,onRemove:i})=>{let s=T.useRef(null),o=T.useRef(null);return T.useEffect(()=>{let a=s.current;a&&(async()=>{let l=await Zte({elements:e.elements,appState:{...t,viewBackgroundColor:Mi.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),m.jsxs("div",{className:"single-library-item",children:[e.status==="published"&&m.jsx("span",{className:"single-library-item-status",children:$("labels.statusPublished")}),m.jsx("div",{ref:s,className:"single-library-item__svg"}),m.jsx(Yt,{"aria-label":$("buttons.remove"),type:"button",icon:c6,className:"single-library-item--remove",onClick:i.bind(null,e.id),title:$("buttons.remove")}),m.jsxs("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[m.jsxs("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[m.jsxs("div",{style:{padding:"0.5em 0"},children:[m.jsx("span",{style:{fontWeight:500,color:Mi.gray[6]},children:$("publishDialog.itemName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{r(a.target.value,n)}})]}),m.jsx("span",{className:"error",children:e.error})]})]})},LGe=({onClose:e,libraryItems:t,appState:n,onSuccess:r,onError:i,updateItemsInStorage:s,onRemove:o})=>{let[a,l]=T.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[f,c]=T.useState(!1);T.useEffect(()=>{let E=Zh.get(v2.PUBLISH_LIBRARY);E&&l(E)},[]);let[d,u]=T.useState(t.slice());T.useEffect(()=>{u(t.slice())},[t]);let h=E=>{l({...a,[E.target.name]:E.target.value})},g=async E=>{E.preventDefault(),c(!0);let k=[],M=!1;if(d.forEach(_=>{let O="";_.name||(O=$("publishDialog.errors.required"),M=!0),k.push({..._,error:O})}),M){u(k),c(!1);return}let S=await PGe(d),A={type:Ea.excalidrawLibrary,version:Sw.excalidrawLibrary,source:QI,libraryItems:d},I=JSON.stringify(A,null,2),R=new Blob([I],{type:"application/json"}),P=new FormData;P.append("excalidrawLib",R),P.append("previewImage",S),P.append("previewImageType",S.type),P.append("title",a.name),P.append("authorName",a.authorName),P.append("githubHandle",a.githubHandle),P.append("name",a.name),P.append("description",a.description),P.append("twitterHandle",a.twitterHandle),P.append("website",a.website),fetch(`${At.VITE_APP_LIBRARY_BACKEND}/submit`,{method:"post",body:P}).then(_=>_.ok?_.json().then(({url:O})=>{Zh.delete(v2.PUBLISH_LIBRARY),r({url:O,authorName:a.authorName,items:d})}):_.json().catch(()=>{throw new Error(_.statusText||"something went wrong")}).then(O=>{throw new Error(O.message||_.statusText||"something went wrong")}),_=>{console.error(_),i(_),c(!1)}).catch(_=>{console.error(_),i(_),c(!1)})},y=()=>{let E=[];return d.forEach((k,M)=>{E.push(m.jsx("div",{className:"single-library-item-wrapper",children:m.jsx(DGe,{libItem:k,appState:n,index:M,onChange:(S,A)=>{let I=d.slice();I[A].name=S,u(I)},onRemove:o})},M))}),m.jsx("div",{className:"selected-library-items",children:E})},U=T.useCallback(()=>{s(d),Zh.set(v2.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),x=!!t.length,v=t.some(E=>E.status==="published");return m.jsx(Il,{onCloseRequest:U,title:$("publishDialog.title"),className:"publish-library",children:x?m.jsxs("form",{onSubmit:g,children:[m.jsx("div",{className:"publish-library-note",children:m.jsx(bc,{i18nKey:"publishDialog.noteDescription",link:E=>m.jsx("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:E})})}),m.jsx("span",{className:"publish-library-note",children:m.jsx(bc,{i18nKey:"publishDialog.noteGuidelines",link:E=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:E})})}),m.jsx("div",{className:"publish-library-note",children:$("publishDialog.noteItems")}),v&&m.jsx("span",{className:"publish-library-note publish-library-warning",children:$("publishDialog.republishWarning")}),y(),m.jsxs("div",{className:"publish-library__fields",children:[m.jsxs("label",{children:[m.jsxs("div",{children:[m.jsx("span",{children:$("publishDialog.libraryName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:$("publishDialog.placeholder.libraryName")})]}),m.jsxs("label",{style:{alignItems:"flex-start"},children:[m.jsxs("div",{children:[m.jsx("span",{children:$("publishDialog.libraryDesc")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:$("publishDialog.placeholder.libraryDesc")})]}),m.jsxs("label",{children:[m.jsxs("div",{children:[m.jsx("span",{children:$("publishDialog.authorName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:$("publishDialog.placeholder.authorName")})]}),m.jsxs("label",{children:[m.jsx("span",{children:$("publishDialog.githubUsername")}),m.jsx("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:$("publishDialog.placeholder.githubHandle")})]}),m.jsxs("label",{children:[m.jsx("span",{children:$("publishDialog.twitterUsername")}),m.jsx("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:$("publishDialog.placeholder.twitterHandle")})]}),m.jsxs("label",{children:[m.jsx("span",{children:$("publishDialog.website")}),m.jsx("input",{type:"text",name:"website",pattern:"https?://.+",title:$("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:$("publishDialog.placeholder.website")})]}),m.jsx("span",{className:"publish-library-note",children:m.jsx(bc,{i18nKey:"publishDialog.noteLicense",link:E=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:E})})})]}),m.jsxs("div",{className:"publish-library__buttons",children:[m.jsx(qg,{label:$("buttons.cancel"),onClick:U,"data-testid":"cancel-clear-canvas-button"}),m.jsx(qg,{type:"submit",label:$("buttons.submit"),actionType:"primary",isLoading:f})]})]}):m.jsx("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:$("publishDialog.atleastOneLibItem")})})},OGe=LGe,vse=({className:e="",children:t,onToggle:n,title:r,...i})=>{let s=pi(),o=Ke(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return m.jsx("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:r,...i,children:t})},jGe=vse;vse.displayName="DropdownMenuTrigger";var Ese=()=>m.jsx("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}}),BGe=Ese;Ese.displayName="DropdownMenuSeparator";var kse=({children:e,onClickOutside:t,className:n="",onSelect:r,style:i})=>{let s=pi(),o=T.useRef(null),a=o7({onClickOutside:t});MR(o,()=>{var f;(f=a.onClickOutside)==null||f.call(a)}),T.useEffect(()=>{let f=d=>{var u;d.key===J.ESCAPE&&(d.stopImmediatePropagation(),(u=a.onClickOutside)==null||u.call(a))},c={capture:!0};return document.addEventListener("keydown",f,c),()=>{document.removeEventListener("keydown",f,c)}},[a]);let l=Ke(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return m.jsx(ese.Provider,{value:{onSelect:r},children:m.jsx("div",{ref:o,className:l,style:i,"data-testid":"dropdown-menu",children:s.editor.isMobile?m.jsx(ya.Col,{className:"dropdown-menu-container",children:e}):m.jsx(Ul,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};kse.displayName="DropdownMenuContent";var FGe=kse,Sse=({icon:e,shortcut:t,href:n,children:r,onSelect:i,className:s="",selected:o,rel:a="noreferrer",...l})=>{let f=nse(l.onClick,i);return m.jsx("a",{...l,href:n,target:"_blank",rel:"noreferrer",className:tse(s,o),title:l.title??l["aria-label"],onClick:f,children:m.jsx(rse,{icon:e,shortcut:t,children:r})})},sx=Sse;Sse.displayName="DropdownMenuItemLink";var zGe=({children:e,className:t="",selected:n,...r})=>m.jsx("div",{...r,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),$Ge=zGe,HGe=e=>Ie.Children.toArray(e).find(n=>Ie.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger")||null,VGe=e=>Ie.Children.toArray(e).find(n=>Ie.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent")||null,fd=({children:e,open:t})=>{let n=HGe(e),r=VGe(e);return m.jsxs(m.Fragment,{children:[n,t&&r]})};fd.Trigger=jGe;fd.Content=FGe;fd.Item=Na;fd.ItemLink=sx;fd.ItemCustom=$Ge;fd.Group=zM;fd.Separator=BGe;var qn=fd;fd.displayName="DropdownMenu";var WGe=(e,t)=>e.filter(n=>t.includes(n.id)),GGe=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:r,resetLibrary:i,onSelectItems:s,appState:o,className:a})=>{let[l]=Er(zb),[f,c]=Er(LR),d=()=>{let P=t.length?$("alerts.removeItemsFromsLibrary",{count:t.length}):$("alerts.resetLibrary"),_=t.length?$("confirmDialog.removeItemsFromLib"):$("confirmDialog.resetLibrary");return m.jsx(wse,{onConfirm:()=>{t.length?r():i(),h(!1)},onCancel:()=>{h(!1)},title:_,children:m.jsx("p",{children:P})})},[u,h]=T.useState(!1),g=!!t.length,y=g?l.libraryItems.filter(P=>t.includes(P.id)):l.libraryItems,U=$(g?"buttons.remove":"buttons.resetLibrary"),[x,v]=T.useState(!1),[E,k]=T.useState(null),M=T.useCallback(()=>m.jsxs(Il,{onCloseRequest:()=>k(null),title:$("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[m.jsx("p",{children:m.jsx(bc,{i18nKey:"publishSuccessDialog.content",authorName:E.authorName,link:P=>m.jsx("a",{href:E==null?void 0:E.url,target:"_blank",rel:"noopener noreferrer",children:P})})}),m.jsx(Yt,{type:"button",title:$("buttons.close"),"aria-label":$("buttons.close"),label:$("buttons.close"),onClick:()=>k(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[k,E]),S=(P,_)=>{v(!1),k({url:P.url,authorName:P.authorName});let O=_.slice();O.forEach(V=>{t.includes(V.id)&&(V.status="published")}),n.setLibrary(O)},A=async()=>{try{await n.updateLibrary({libraryItems:TN({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(P){if((P==null?void 0:P.name)==="AbortError"){console.warn(P);return}e({errorMessage:$("errors.importLibraryError")})}},I=async()=>{let P=g?y:await n.getLatestLibrary();cje(P).catch(zJ).catch(_=>{e({errorMessage:_.message})})},R=()=>m.jsxs(qn,{open:f,children:[m.jsx(qn.Trigger,{onToggle:()=>c(!f),children:UTe}),m.jsxs(qn.Content,{onClickOutside:()=>c(!1),onSelect:()=>c(!1),className:"library-menu",children:[!g&&m.jsx(qn.Item,{onSelect:A,icon:hN,"data-testid":"lib-dropdown--load",children:$("buttons.load")}),!!y.length&&m.jsx(qn.Item,{onSelect:I,icon:Iw,"data-testid":"lib-dropdown--export",children:$("buttons.export")}),!!y.length&&m.jsx(qn.Item,{onSelect:()=>h(!0),icon:U1,children:U}),g&&m.jsx(qn.Item,{icon:TIe,onSelect:()=>v(!0),"data-testid":"lib-dropdown--remove",children:$("buttons.publishLibrary")})]})]});return m.jsxs("div",{className:Ke("library-menu-dropdown-container",a),children:[R(),t.length>0&&m.jsx("div",{className:"library-actions-counter",children:t.length}),u&&d(),x&&m.jsx(OGe,{onClose:()=>v(!1),libraryItems:WGe(l.libraryItems,t),appState:o,onSuccess:P=>S(P,l.libraryItems),onError:P=>window.alert(P),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:P=>s(t.filter(_=>_!==P))}),E&&M()]})},_V=({selectedItems:e,onSelectItems:t,className:n})=>{let{library:r}=Oc(),{clearLibraryCache:i,deleteItemsFromLibraryCache:s}=yse(),o=js(),a=mi(),[l]=Er(zb),f=async c=>{let d=c.filter(u=>!e.includes(u.id));r.setLibrary(d).catch(()=>{a({errorMessage:$("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return m.jsx(GGe,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:r,onRemoveFromLibrary:()=>f(l.libraryItems),resetLibrary:()=>{r.resetLibrary(),i()},className:n})},XGe=T.memo(({id:e,elements:t,isPending:n,onClick:r,selected:i,onToggle:s,onDrag:o,svgCache:a})=>{let l=T.useRef(null),f=pGe(e,t,a);T.useEffect(()=>{let g=l.current;if(g)return f&&(g.innerHTML=f.outerHTML),()=>{g.innerHTML=""}},[f]);let[c,d]=T.useState(!1),u=pi().editor.isMobile,h=n&&m.jsx("div",{className:"library-unit__adder",children:yTe});return m.jsxs("div",{className:Ke("library-unit",{"library-unit__active":t,"library-unit--hover":t&&c,"library-unit--selected":i,"library-unit--skeleton":!f}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[m.jsx("div",{className:Ke("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?g=>{e&&g.shiftKey?s(e,g):r(e)}:void 0,onDragStart:g=>{if(!e){g.preventDefault();return}d(!1),o(e,g)}}),h,e&&t&&(c||u||i)&&m.jsx(_R,{checked:i,onChange:(g,y)=>s(e,y),className:"library-unit__checkbox"})]})}),KGe=()=>m.jsx("div",{className:"library-unit library-unit--skeleton"});function YGe(){return[!1,T.useCallback(e=>e(),[])]}var ZGe=Ie.useTransition||YGe,PV=({children:e})=>m.jsx("div",{className:"library-menu-items-container__grid",children:e}),NS=T.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:r,onClick:i,svgCache:s,itemsRenderedPerBatch:o})=>{let[,a]=ZGe(),[l,f]=T.useState(0);return T.useEffect(()=>{l<e.length&&a(()=>{f(l+o)})},[l,e.length,a,o]),m.jsx(m.Fragment,{children:e.map((c,d)=>d<l?m.jsx(XGe,{elements:c==null?void 0:c.elements,isPending:!(c!=null&&c.id)&&!!(c!=null&&c.elements),onClick:i,svgCache:s,id:c==null?void 0:c.id,selected:r(c.id),onToggle:t,onDrag:n},(c==null?void 0:c.id)??d):m.jsx(KGe,{},d))})}),qGe=Ri(0),QGe=e=>{let[t,n]=Er(qGe);return T.useEffect(()=>{let{current:r}=e;if(!r)return;let i=Sy(()=>{let{scrollTop:s}=r;n(s)},200);return r.addEventListener("scroll",i),()=>{i.cancel(),r.removeEventListener("scroll",i)}},[e,n]),t},JGe=17,eXe=64;function tXe({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:r,pendingElements:i,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:f}){let c=T.useRef(null),d=QGe(c);T.useEffect(()=>{var P;d>0&&((P=c.current)==null||P.scrollTo(0,d))},[]);let{svgCache:u}=yse(),h=T.useMemo(()=>t.filter(P=>P.status!=="published"),[t]),g=T.useMemo(()=>t.filter(P=>P.status==="published"),[t]),y=!t.length&&!i.length,U=!i.length&&!h.length&&!g.length,[x,v]=T.useState(null),E=T.useCallback((P,_)=>{let O=!f.includes(P),V=[...h,...g];if(O){if(_.shiftKey&&x){let j=V.findIndex(G=>G.id===x),F=V.findIndex(G=>G.id===P);if(j===-1||F===-1){l([...f,P]);return}let z=mt(f),H=V.reduce((G,W,B)=>((B>=j&&B<=F||z.has(W.id))&&G.push(W.id),G),[]);l(H)}else l([...f,P]);v(P)}else v(null),l(f.filter(j=>j!==P))},[x,l,g,f,h]),k=T.useCallback(P=>{let _;return f.includes(P)?_=t.filter(O=>f.includes(O.id)):_=t.filter(O=>O.id===P),_.map(O=>({...O,elements:Ete(O.elements,{randomizeSeed:!0})}))},[t,f]),M=T.useCallback((P,_)=>{_.dataTransfer.setData(ft.excalidrawlib,Tte(k(P)))},[k]),S=T.useCallback(P=>P?f.includes(P):!1,[f]),A=T.useCallback(()=>{n(i)},[i,n]),I=T.useCallback(P=>{P&&r(k(P))},[k,r]),R=u.size>=t.length?eXe:JGe;return m.jsxs("div",{className:"library-menu-items-container",style:i.length||h.length||g.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!U&&m.jsx(_V,{selectedItems:f,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),m.jsxs(ya.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:g.length>0?1:"0 1 auto",marginBottom:0},ref:c,children:[m.jsxs(m.Fragment,{children:[!U&&m.jsx("div",{className:"library-menu-items-container__header",children:$("labels.personalLib")}),e&&m.jsx("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:m.jsx(rd,{})}),!i.length&&!h.length?m.jsxs("div",{className:"library-menu-items__no-items",children:[m.jsx("div",{className:"library-menu-items__no-items__label",children:$("library.noItems")}),m.jsx("div",{className:"library-menu-items__no-items__hint",children:g.length>0?$("library.hint_emptyPrivateLibrary"):$("library.hint_emptyLibrary")})]}):m.jsxs(PV,{children:[i.length>0&&m.jsx(NS,{itemsRenderedPerBatch:R,items:[{id:null,elements:i}],onItemSelectToggle:E,onItemDrag:M,onClick:A,isItemSelected:S,svgCache:u}),m.jsx(NS,{itemsRenderedPerBatch:R,items:h,onItemSelectToggle:E,onItemDrag:M,onClick:I,isItemSelected:S,svgCache:u})]})]}),m.jsxs(m.Fragment,{children:[(g.length>0||i.length>0||h.length>0)&&m.jsx("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:$("labels.excalidrawLib")}),g.length>0?m.jsx(PV,{children:m.jsx(NS,{itemsRenderedPerBatch:R,items:g,onItemSelectToggle:E,onItemDrag:M,onClick:I,isItemSelected:S,svgCache:u})}):h.length>0?m.jsx("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:$("library.noItems")}):null]}),y&&m.jsx(xse,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:m.jsx(_V,{selectedItems:f,onSelectItems:l})})]})]})}var LR=Ri(!1),DV=({children:e})=>m.jsx("div",{className:"layer-ui__library",children:e}),nXe=T.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:r,libraryReturnUrl:i,library:s,id:o,theme:a,selectedItems:l,onSelectItems:f})=>{let[c]=Er(zb),d=T.useCallback(g=>{(async(y,U)=>{jn("element","addToLibrary","ui");for(let v of RJ)if(y.some(E=>E.type===v))return r({errorMessage:$(`errors.libraryElementTypeError.${v}`)});let x=[{status:"unpublished",elements:y,id:Ta(),created:Date.now()},...U];n(),s.setLibrary(x).catch(()=>{r({errorMessage:$("alerts.errorAddingToLibrary")})})})(g,c.libraryItems)},[n,s,r,c.libraryItems]),u=T.useMemo(()=>c.libraryItems,[c]);if(c.status==="loading"&&!c.isInitialized)return m.jsx(DV,{children:m.jsx("div",{className:"layer-ui__library-message",children:m.jsxs("div",{children:[m.jsx(rd,{size:"2em"}),m.jsx("span",{children:$("labels.libraryLoadingMessage")})]})})});let h=c.libraryItems.length>0||t.length>0;return m.jsxs(DV,{children:[m.jsx(tXe,{isLoading:c.status==="loading",libraryItems:u,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:i,theme:a,onSelectItems:f,selectedItems:l}),h&&m.jsx(xse,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:i,theme:a})]})}),RS=(e,t)=>({elements:e,pending:Mt(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),rXe=(e,t)=>{let n=p7(),[r,i]=T.useState(()=>RS(n,e.selectedElementIds)),s=T.useRef(new Map);return T.useEffect(()=>{for(let o of r.pending)s.current.set(o.id,o.version)},[r.pending]),T.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&i(o=>{var l;if(!Gi(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),RS(n,e.selectedElementIds);let a=t.scene.getNonDeletedElementsMap();for(let f of Object.keys(e.selectedElementIds)){let c=(l=a.get(f))==null?void 0:l.version;if(c&&c!==s.current.get(f))return RS(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),r.pending},iXe=T.memo(()=>{let e=Oc(),{onInsertElements:t}=e,n=zy(),r=js(),i=mi(),[s,o]=T.useState([]),a=T.useMemo(()=>e.library,[e.library]),l=rXe(r,e),f=T.useCallback(d=>{t(Use(d))},[t]),c=T.useCallback(()=>{i({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[i]);return m.jsx(nXe,{pendingElements:l,onInsertLibraryItems:f,onAddToLibrary:c,setAppState:i,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:r.theme,selectedItems:s,onSelectItems:o})});function sXe(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}var Il=e=>{let[t,n]=uGe(),[r]=T.useState(document.activeElement),{id:i}=jc(),s=pi().viewport.isMobile;T.useEffect(()=>{if(!t)return;let f=qA(t);setTimeout(()=>{f.length>0&&e.autofocus!==!1&&(f[1]||f[0]).focus()});let c=d=>{if(d.key===J.TAB){let u=qA(t),{activeElement:h}=document,g=u.findIndex(y=>y===h);g===0&&d.shiftKey?(u[u.length-1].focus(),d.preventDefault()):g===u.length-1&&!d.shiftKey&&(u[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",c),()=>t.removeEventListener("keydown",c)},[t,e.autofocus]);let o=mi(),a=i7(LR),l=()=>{o({openMenu:null}),a(!1),r.focus(),e.onCloseRequest()};return m.jsx(hGe,{className:Ke("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:sXe(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:m.jsxs(Ul,{ref:n,children:[e.title&&m.jsx("h2",{id:`${i}-dialog-title`,className:"Dialog__title",children:m.jsx("span",{className:"Dialog__titleContent",children:e.title})}),s&&m.jsx("button",{className:"Dialog__close",onClick:l,title:$("buttons.close"),"aria-label":$("buttons.close"),type:"button",children:c6}),m.jsx("div",{className:"Dialog__content",children:e.children})]})})},Qg=({type:e="button",onSelect:t,selected:n,children:r,className:i="",...s})=>m.jsx("button",{onClick:Aw(s.onClick,o=>{t()}),type:e,className:Ke("excalidraw-button",i,{selected:n}),...s,children:r}),OR=T.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:r,readonly:i,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:f,...c},d)=>{let u=T.useRef(null);T.useImperativeHandle(d,()=>u.current),T.useLayoutEffect(()=>{var y,U;s&&((y=u.current)==null||y.focus(),(U=u.current)==null||U.select())},[s]);let[h,g]=T.useState(!1);return m.jsxs("div",{className:Ke("ExcTextField",f,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var y;(y=u.current)==null||y.focus()},children:[l,t&&m.jsx("div",{className:"ExcTextField__label",children:t}),m.jsxs("div",{className:Ke("ExcTextField__input",{"ExcTextField__input--readonly":i}),children:[m.jsx("input",{className:Ke({"is-redacted":"value"in c&&c.value&&a&&!h}),readOnly:i,value:"value"in c?c.value:void 0,defaultValue:"defaultValue"in c?c.defaultValue:void 0,placeholder:r,ref:u,onChange:y=>e==null?void 0:e(y.target.value),onKeyDown:o}),a&&m.jsx(Qg,{onSelect:()=>g(!h),style:{border:0,userSelect:"none"},children:h?OIe:mN})]})]})}),oXe={toggleTheme:[ye("Shift+Alt+D")],saveScene:[ye("CtrlOrCmd+S")],loadScene:[ye("CtrlOrCmd+O")],clearCanvas:[ye("CtrlOrCmd+Delete")],imageExport:[ye("CtrlOrCmd+Shift+E")],commandPalette:[ye("CtrlOrCmd+/"),ye("CtrlOrCmd+Shift+P")],cut:[ye("CtrlOrCmd+X")],copy:[ye("CtrlOrCmd+C")],paste:[ye("CtrlOrCmd+V")],copyStyles:[ye("CtrlOrCmd+Alt+C")],pasteStyles:[ye("CtrlOrCmd+Alt+V")],selectAll:[ye("CtrlOrCmd+A")],deleteSelectedElements:[ye("Delete")],duplicateSelection:[ye("CtrlOrCmd+D"),ye(`Alt+${$("helpDialog.drag")}`)],sendBackward:[ye("CtrlOrCmd+[")],bringForward:[ye("CtrlOrCmd+]")],sendToBack:[ye(Cc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[ye(Cc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[ye("Shift+Alt+C")],group:[ye("CtrlOrCmd+G")],ungroup:[ye("CtrlOrCmd+Shift+G")],gridMode:[ye("CtrlOrCmd+'")],zenMode:[ye("Alt+Z")],objectsSnapMode:[ye("Alt+S")],stats:[ye("Alt+/")],addToLibrary:[],flipHorizontal:[ye("Shift+H")],flipVertical:[ye("Shift+V")],viewMode:[ye("Alt+R")],hyperlink:[ye("CtrlOrCmd+K")],toggleElementLock:[ye("CtrlOrCmd+Shift+L")],resetZoom:[ye("CtrlOrCmd+0")],zoomOut:[ye("CtrlOrCmd+-")],zoomIn:[ye("CtrlOrCmd++")],zoomToFitSelection:[ye("Shift+3")],zoomToFit:[ye("Shift+1")],zoomToFitSelectionInViewport:[ye("Shift+2")],toggleEraserTool:[ye("E")],toggleHandTool:[ye("H")],setFrameAsActiveTool:[ye("F")],saveFileToDisk:[ye("CtrlOrCmd+S")],saveToActiveFile:[ye("CtrlOrCmd+S")],toggleShortcuts:[ye("?")],searchMenu:[ye("CtrlOrCmd+F")],wrapSelectionInFrame:[]},fs=(e,t=0)=>{let n=oXe[e];return n&&n.length>0?n[t]||n[0]:""},aXe="\\u0300-\\u036f",lXe="\\ufe20-\\ufe2f",cXe="\\u20d0-\\u20ff",fXe=aXe+lXe+cXe,dXe=`[${fXe}]`,uXe=RegExp(dXe,"g"),hXe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pXe={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"E",:"e",:"T",:"t",:"s",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"I",:"i",:"E",:"e",:"n",:"s"},LV=e=>e.replace(hXe,t=>pXe[t]||t).replace(uXe,""),Cse=Ie.createContext(null),zo=()=>Ie.useContext(Cse),mXe=mre(),gXe=()=>Ie.useMemo(()=>({MainMenuTunnel:zl(),WelcomeScreenMenuHintTunnel:zl(),WelcomeScreenToolbarHintTunnel:zl(),WelcomeScreenHelpHintTunnel:zl(),WelcomeScreenCenterTunnel:zl(),FooterCenterTunnel:zl(),DefaultSidebarTriggerTunnel:zl(),DefaultSidebarTabTriggersTunnel:zl(),OverwriteConfirmDialogTunnel:zl(),TTDDialogTriggerTunnel:zl(),tunnelsJotai:mXe}),[]),Ase=(e,t)=>{var r;let n=((r=t[0])==null?void 0:r.type)||null;for(let i of t)if(i.type!==n){n=null;break}return aM(e.activeTool.type)&&e.activeTool.type!=="image"&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(i=>aM(i.type))},Mse=(e,t)=>zg(e.activeTool.type)||t.some(n=>zg(n.type)),Tse=({appState:e,elementsMap:t,renderAction:n,app:r})=>{let i=sne(t,e),s=!1;i.length===2&&(Ma(i[0])||Ma(i[1]))&&(s=!0);let o=!!(e.editingTextElement||e.newElement),a=pi(),l=document.documentElement.getAttribute("dir")==="rtl",f=zg(e.activeTool.type)&&!ul(e.currentItemBackgroundColor)||i.some(g=>zg(g.type)&&!ul(g.backgroundColor)),c=i.length===1||s,d=!e.editingLinearElement&&i.length===1&&xt(i[0])&&!Ge(i[0]),u=!e.croppingElementId&&i.length===1&&ln(i[0]),h=!s&&Fo(e,r);return m.jsxs("div",{className:"panelColumn",children:[m.jsx("div",{children:Ase(e,i)&&n("changeStrokeColor")}),Mse(e,i)&&m.jsx("div",{children:n("changeBackgroundColor")}),f&&n("changeFillStyle"),(p$(e.activeTool.type)||i.some(g=>p$(g.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||i.some(g=>g.type==="freedraw"))&&n("changeStrokeShape"),(m$(e.activeTool.type)||i.some(g=>m$(g.type)))&&m.jsxs(m.Fragment,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(lM(e.activeTool.type)||i.some(g=>lM(g.type)))&&m.jsx(m.Fragment,{children:n("changeRoundness")}),(g$(e.activeTool.type)||i.some(g=>g$(g.type)))&&m.jsx(m.Fragment,{children:n("changeArrowType")}),(e.activeTool.type==="text"||i.some(Ve))&&m.jsxs(m.Fragment,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||NOe(i,t))&&n("changeTextAlign")]}),IOe(i,t)&&n("changeVerticalAlign"),(W4(e.activeTool.type)||i.some(g=>W4(g.type)))&&m.jsx(m.Fragment,{children:n("changeArrowhead")}),n("changeOpacity"),m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.layers")}),m.jsxs("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.align")}),m.jsxs("div",{className:"buttonList",children:[l?m.jsxs(m.Fragment,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):m.jsxs(m.Fragment,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),i.length>2&&n("distributeHorizontally"),m.jsx("div",{style:{flexBasis:"100%",height:0}}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),i.length>2&&n("distributeVertically")]})]})]}),!o&&i.length>0&&m.jsxs("fieldset",{children:[m.jsx("legend",{children:$("labels.actions")}),m.jsxs("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),c&&n("hyperlink"),u&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},Ise=({activeTool:e,appState:t,app:n,UIOptions:r})=>{let[i,s]=T.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="embeddable",{TTDDialogTriggerTunnel:f}=zo();return m.jsxs(m.Fragment,{children:[UN.map(({value:c,icon:d,key:u,numericKey:h,fillable:g},y)=>{var E;if(((E=r.tools)==null?void 0:E[c])===!1)return null;let U=$(`toolBar.${c}`),x=u&&S2(typeof u=="string"?u:u[0]),v=x?`${x} ${$("helpDialog.or")} ${h}`:`${h}`;return m.jsx(Yt,{className:Ke("Shape",{fillable:g}),type:"radio",icon:d,checked:e.type===c,name:"editor-current-shape",title:`${S2(U)}  ${v}`,keyBindingLabel:h||x,"aria-label":S2(U),"aria-keyshortcuts":v,"data-testid":`toolbar-${c}`,onPointerDown:({pointerType:k})=>{!t.penDetected&&k==="pen"&&n.togglePenMode(!0)},onChange:({pointerType:k})=>{t.activeTool.type!==c&&jn("toolbar",c,"ui"),c==="image"?n.setActiveTool({type:c,insertOnCanvasDirectly:k!=="mouse"}):n.setActiveTool({type:c})}},c)}),m.jsx("div",{className:"App-toolbar__divider"}),m.jsxs(qn,{open:i,children:[m.jsx(qn.Trigger,{className:Ke("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!i),title:$("toolBar.extraTools"),children:DIe}),m.jsxs(qn.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[m.jsx(qn.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:dee,shortcut:J.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:$("toolBar.frame")}),m.jsx(qn.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:PTe,"data-testid":"toolbar-embeddable",selected:l,children:$("toolBar.embeddable")}),m.jsx(qn.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:hee,"data-testid":"toolbar-laser",selected:a,shortcut:J.K.toLocaleUpperCase(),children:$("toolBar.laser")}),m.jsx("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&m.jsx(f.Out,{}),m.jsx(qn.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:uee,"data-testid":"toolbar-embeddable",children:$("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&m.jsx(m.Fragment,{children:m.jsxs(qn.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:pee,"data-testid":"toolbar-magicframe",children:[$("toolBar.magicframe"),m.jsx(qn.Item.Badge,{children:"AI"})]})})]})]})]})},bXe=({renderAction:e,zoom:t})=>m.jsx(ya.Col,{gap:1,className:_g.ZOOM_ACTIONS,children:m.jsxs(ya.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),yXe=({renderAction:e,className:t})=>m.jsxs("div",{className:`undo-redo-buttons ${t}`,children:[m.jsx("div",{className:"undo-button-container",children:m.jsx(C1,{label:$("buttons.undo"),children:e("undo")})}),m.jsx("div",{className:"redo-button-container",children:m.jsxs(C1,{label:$("buttons.redo"),children:[" ",e("redo")]})})]}),UXe=({actionManager:e,showExitZenModeBtn:t})=>m.jsx("button",{type:"button",className:Ke("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(HM),children:$("buttons.exitZenMode")}),xXe=({renderAction:e,className:t})=>m.jsx("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),OV=e=>{let t=T.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},h7=Ri(null),wXe=()=>{let[e,t]=Er(h7),n=bo();return e&&e==="clearCanvas"?m.jsx(wse,{onConfirm:()=>{n.executeAction(_2),t(null)},onCancel:()=>t(null),title:$("clearCanvasDialog.title"),children:m.jsxs("p",{className:"clear-canvas__content",children:[" ",$("alerts.clearReset")]})}):null},Nse={};AQ(Nse,{toggleTheme:()=>vXe});var vXe={...h9,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(h9,"commandPalette")}},Rse=je({name:"copyElementLink",label:"labels.copyElementLink",icon:pN,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=Mt(e,t);try{if(window.location){let s=Ote(i,t);return s?(await Dy(r.props.generateLinkForSelection?r.props.generateLinkForSelection(s.id,s.type):Lte(s.id,s.type)),{appState:{toast:{message:$("toast.elementLinkCopied"),closable:!0}},captureUpdate:pe.EVENTUALLY}):{appState:t,elements:e,app:r,captureUpdate:pe.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:r,captureUpdate:pe.EVENTUALLY}},predicate:(e,t)=>e9(Mt(e,t))}),EXe=je({name:"linkToElement",label:"labels.linkToElement",icon:yee,perform:(e,t,n,r)=>{let i=Mt(e,t);return i.length!==1||!e9(i)?{elements:e,appState:t,app:r,captureUpdate:pe.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:Mt(e,t)[0].id}},captureUpdate:pe.IMMEDIATELY}},predicate:(e,t,n,r)=>{var s;let i=Mt(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&i.length===1&&e9(i)},trackEvent:!1}),kXe=Ri(null),Ir={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},SXe=e=>{switch(e){case Ir.app:return 1;case Ir.export:return 2;case Ir.editor:return 3;case Ir.tools:return 4;case Ir.elements:return 5;case Ir.links:return 6;default:return 10}},ox=({shortcut:e,className:t,children:n})=>{let r=e.replace("++","+$").split("+");return m.jsxs("div",{className:Ke("shortcut",t),children:[r.map((i,s)=>m.jsx("div",{className:"shortcut-wrapper",children:m.jsx("div",{className:"shortcut-key",children:i==="$"?"+":i})},i)),m.jsx("div",{className:"shortcut-desc",children:n})]})},_se=e=>!e.altKey&&e[J.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===J.P||e.key===J.SLASH);Object.assign(e=>{var r;let t=js(),n=mi();return T.useEffect(()=>{let i=s=>{_se(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;let a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&jn("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener("keydown",i,{capture:!0}),()=>window.removeEventListener("keydown",i,{capture:!0})},[n]),((r=t.openDialog)==null?void 0:r.name)!=="commandPalette"?null:m.jsx(CXe,{...e})},{defaultItems:Nse});function CXe({customCommandPaletteItems:e}){let t=Oc(),n=js(),r=mi(),i=zy(),s=bo(),[o,a]=Er(kXe),[l,f]=T.useState(null),c=T.useRef(null),d=o7({uiAppState:n,customCommandPaletteItems:e,appProps:i});T.useEffect(()=>{let{uiAppState:S,customCommandPaletteItems:A,appProps:I}=d,R=V=>{let j="";return V.label&&(typeof V.label=="function"?j=$(V.label(t.scene.getNonDeletedElements(),S,t)):j=$(V.label)),j},P=V=>typeof V.icon=="function"?V.icon(S,t.scene.getNonDeletedElements()):V.icon,_=[],O=(V,j,F)=>{let z={label:R(V),icon:P(V),category:j,shortcut:fs(V.name),keywords:V.keywords,predicate:V.predicate,viewMode:V.viewMode,perform:()=>{s.executeAction(V,"commandPalette")}};return F?F(z,V):z};if(S&&t.scene&&s){let V=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,gse,Rse,EXe].map(W=>O(W,Ir.elements,(B,X)=>({...B,predicate:X.predicate?X.predicate:(q,Y,oe,ge)=>Mt(q,Y).length>0}))),j=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool].map(W=>O(W,Ir.tools)),F=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(W=>O(W,Ir.editor)),z=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(W=>O(W,Ir.export));_=[...V,...F,{label:R(_2),icon:P(_2),shortcut:fs(_2.name),category:Ir.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{pl.set(h7,"clearCanvas")}},{label:$("buttons.exportImage"),category:Ir.export,icon:iee,shortcut:fs("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{r({openDialog:{name:"imageExport"}})}},...z];let H=[{label:$("toolBar.library"),category:Ir.app,icon:fN,viewMode:!1,perform:()=>{S.openSidebar?r({openSidebar:null}):r({openSidebar:{name:gl.name,tab:gl.defaultTab}})}},{label:$("search.title"),category:Ir.app,icon:x1,viewMode:!0,perform:()=>{s.executeAction(Pse)}},{label:$("labels.changeStroke"),keywords:["color","outline"],category:Ir.elements,icon:eS,viewMode:!1,predicate:(W,B)=>{let X=Mt(W,B);return X.length>0&&Ase(B,X)},perform:()=>{r(W=>({openMenu:W.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:$("labels.changeBackground"),keywords:["color","fill"],icon:eS,category:Ir.elements,viewMode:!1,predicate:(W,B)=>{let X=Mt(W,B);return X.length>0&&Mse(B,X)},perform:()=>{r(W=>({openMenu:W.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:$("labels.canvasBackground"),keywords:["color"],icon:eS,category:Ir.editor,viewMode:!1,perform:()=>{r(W=>({openMenu:W.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...UN.reduce((W,B)=>{var ce;let{value:X,icon:q,key:Y,numericKey:oe}=B;if(((ce=I.UIOptions.tools)==null?void 0:ce[X])===!1)return W;let ge=Y&&S2(typeof Y=="string"?Y:Y[0])||oe,he={label:$(`toolBar.${X}`),category:Ir.tools,shortcut:ge,icon:q,keywords:["toolbar"],viewMode:!1,perform:({event:ie})=>{X==="image"?t.setActiveTool({type:X,insertOnCanvasDirectly:ie.type==="keydown"}):t.setActiveTool({type:X})}};return W.push(he),W},[]),...j,{label:$("toolBar.lock"),category:Ir.tools,icon:S.activeTool.locked?dN:Tw,shortcut:J.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${$("labels.textToDiagram")}...`,category:Ir.tools,icon:jIe,viewMode:!1,predicate:I.aiEnabled,perform:()=>{r(W=>({...W,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${$("toolBar.mermaidToExcalidraw")}...`,category:Ir.tools,icon:uee,viewMode:!1,predicate:I.aiEnabled,perform:()=>{r(W=>({...W,openDialog:{name:"ttd",tab:"mermaid"}}))}}],G=[..._,...H,...A||[]].map(W=>{var B;return{...W,icon:W.icon||mee,order:W.order??SXe(W.category),haystack:`${LV(W.label.toLocaleLowerCase())} ${((B=W.keywords)==null?void 0:B.join(" "))||""}`}});f(G),a(G.find(W=>W.label===(o==null?void 0:o.label))??null)}},[d,t,s,f,o==null?void 0:o.label,a,r]);let[u,h]=T.useState(""),[g,y]=T.useState(null),[U,x]=T.useState({}),v=S=>{r({openDialog:null},S),h("")},E=(S,A)=>{var I;((I=n.openDialog)==null?void 0:I.name)==="commandPalette"&&(A.stopPropagation(),A.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),v(()=>{S.perform({actionManager:s,event:A}),a(S),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},k=OV(S=>S.viewMode===!1&&n.viewModeEnabled?!1:typeof S.predicate=="function"?S.predicate(t.scene.getNonDeletedElements(),n,i,t):S.predicate===void 0||S.predicate),M=OV(S=>{var P;let A=X0(S.target)||_se(S)||S.key===J.ESCAPE;if(A&&S.key!==J.ARROW_UP&&S.key!==J.ARROW_DOWN&&S.key!==J.ENTER)return;let I=Object.values(U).flat(),R=o&&!u&&k(o);if(S.key===J.ARROW_UP){S.preventDefault();let _=I.findIndex(j=>j.label===(g==null?void 0:g.label));if(R){if(_===0){y(o);return}if(g===o){let j=I[I.length-1];j&&y(j);return}}let O;_===-1?O=I.length-1:O=_===0?I.length-1:(_-1)%I.length;let V=I[O];V&&y(V);return}if(S.key===J.ARROW_DOWN){S.preventDefault();let _=I.findIndex(j=>j.label===(g==null?void 0:g.label));if(R){if(!g||_===I.length-1){y(o);return}if(g===o){let j=I[0];j&&y(j);return}}let O=(_+1)%I.length,V=I[O];V&&y(V);return}if(S.key===J.ENTER&&g&&setTimeout(()=>{E(g,S)}),!A){if(S.stopPropagation(),/^[a-zA-Z0-9]$/.test(S.key)){(P=c==null?void 0:c.current)==null||P.focus();return}S.preventDefault()}});return T.useEffect(()=>(window.addEventListener("keydown",M,{capture:!0}),()=>window.removeEventListener("keydown",M,{capture:!0})),[M]),T.useEffect(()=>{if(!l)return;let S=P=>{let _={};for(let O of P)_[O.category]?_[O.category].push(O):_[O.category]=[O];return _},A=l.filter(k).sort((P,_)=>P.order-_.order),I=!u&&o&&k(o);if(!u){x(S(I?A.filter(P=>P.label!==(o==null?void 0:o.label)):A)),y(I?o:A[0]||null);return}let R=LV(u.toLocaleLowerCase().replace(/[<>_| -]/g,""));A=iHe.filter(R,A,{extract:P=>P.haystack}).sort((P,_)=>_.score-P.score).map(P=>P.original),x(S(A)),y(A[0]??null)},[u,l,k,o]),m.jsxs(Il,{onCloseRequest:()=>v(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[m.jsx(OR,{value:u,placeholder:$("commandPalette.search.placeholder"),onChange:S=>{h(S)},selectOnRender:!0,ref:c}),!t.device.viewport.isMobile&&m.jsxs("div",{className:"shortcuts-wrapper",children:[m.jsx(ox,{shortcut:"",children:$("commandPalette.shortcuts.select")}),m.jsx(ox,{shortcut:"",children:$("commandPalette.shortcuts.confirm")}),m.jsx(ox,{shortcut:ye("Esc"),children:$("commandPalette.shortcuts.close")})]}),m.jsxs("div",{className:"commands",children:[o&&!u&&m.jsxs("div",{className:"command-category",children:[m.jsxs("div",{className:"command-category-title",children:[$("commandPalette.recents"),m.jsx("div",{className:"icon",style:{marginLeft:"6px"},children:BIe})]}),m.jsx(jV,{command:o,isSelected:o.label===(g==null?void 0:g.label),onClick:S=>E(o,S),disabled:!k(o),onMouseMove:()=>y(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(U).length>0?Object.keys(U).map((S,A)=>m.jsxs("div",{className:"command-category",children:[m.jsx("div",{className:"command-category-title",children:S}),U[S].map(I=>m.jsx(jV,{command:I,isSelected:I.label===(g==null?void 0:g.label),onClick:R=>E(I,R),onMouseMove:()=>y(I),showShortcut:!t.device.viewport.isMobile,appState:n},I.label))]},S)):l?m.jsxs("div",{className:"no-match",children:[m.jsx("div",{className:"icon",children:x1})," ",$("commandPalette.search.noMatch")]}):null]})]})}var jV=({command:e,isSelected:t,disabled:n,onMouseMove:r,onClick:i,showShortcut:s,appState:o})=>{let a=()=>{};return m.jsxs("div",{className:Ke("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var f;t&&!n&&((f=l==null?void 0:l.scrollIntoView)==null||f.call(l,{block:"nearest"}))},onClick:n?a:i,onMouseMove:n?a:r,title:n?$("commandPalette.itemNotAvailable"):"",children:[m.jsxs("div",{className:"name",children:[e.icon&&m.jsx(l7,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&m.jsx(ox,{shortcut:e.shortcut})]})},AXe=je({name:"toggleLinearEditor",category:Ir.elements,label:(e,t,n)=>{var r;return((r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0])==null?void 0:r.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&i.length===1&&xt(i[0])&&!Ge(i[0]))},perform(e,t,n,r){var o;let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=((o=t.editingLinearElement)==null?void 0:o.elementId)===i.id?null:new We(i);return{appState:{...t,editingLinearElement:s},captureUpdate:pe.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{let r=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],i=$(r.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return m.jsx(Yt,{type:"button",icon:JIe,title:i,"aria-label":i,onClick:()=>t(null)})}}),Pse=je({name:"searchMenu",icon:x1,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,r){var i,s;if(((i=t.openSidebar)==null?void 0:i.name)===gl.name&&t.openSidebar.tab===Um){let o=(s=r.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${_g.SEARCH_MENU_INPUT_WRAPPER} input`);return o!=null&&o.matches(":focus")?{appState:{...t,openSidebar:null},captureUpdate:pe.EVENTUALLY}:(o==null||o.focus(),o==null||o.select(),!1)}return{appState:{...t,openSidebar:{name:gl.name,tab:Um},openDialog:null},captureUpdate:pe.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.F}),MXe=je({name:"cropEditor",label:"helpDialog.cropStart",icon:c$,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,r){let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:i.id},captureUpdate:pe.IMMEDIATELY}},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!!(!t.croppingElementId&&i.length===1&&ln(i[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{let r=$("helpDialog.cropStart");return m.jsx(Yt,{type:"button",icon:c$,title:r,"aria-label":r,onClick:()=>t(null)})}}),p9=class{constructor(e=!0,t=!0){this.isUndoStackEmpty=e,this.isRedoStackEmpty=t}},BV=class t2{constructor(){Q(this,"onHistoryChangedEmitter",new Zl),Q(this,"undoStack",[]),Q(this,"redoStack",[])}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t,n){let r=TXe.create(n,t);r.isEmpty()||(this.undoStack.push(r.inverse()),r.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new p9(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,n,r){return this.perform(t,n,r,()=>t2.pop(this.undoStack),i=>t2.push(this.redoStack,i,t))}redo(t,n,r){return this.perform(t,n,r,()=>t2.pop(this.redoStack),i=>t2.push(this.undoStack,i,t))}perform(t,n,r,i,s){try{let o=i();if(o===null)return;let a=t,l=n,f=!1;for(;o;){try{[a,l,f]=o.applyTo(a,l,r)}finally{s(o)}if(f)break;o=i()}return[a,l]}finally{this.onHistoryChangedEmitter.trigger(new p9(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;let n=t.pop();return n!==void 0?n:null}static push(t,n,r){let i=n.inverse().applyLatestChanges(r);return t.push(i)}},TXe=class ax{constructor(t,n){this.appStateChange=t,this.elementsChange=n}static create(t,n){return new ax(t,n)}inverse(){return new ax(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(t,n,r){let[i,s]=this.elementsChange.applyTo(t,r.elements),[o,a]=this.appStateChange.applyTo(n,i);return[i,o,s||a]}applyLatestChanges(t){let n=this.elementsChange.applyLatestChanges(t);return ax.create(this.appStateChange,n)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}},Dse=(e,t)=>{let[n,r]=T.useState(t);return T.useEffect(()=>{let i=e.on(s=>{r(s)});return()=>{i()}},[e]),n},Lse=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){let r=n();if(!r)return{captureUpdate:pe.EVENTUALLY};let[i,s]=r,o=Array.from(i.values());return{appState:s,elements:o,captureUpdate:pe.NEVER}}return{captureUpdate:pe.EVENTUALLY}},IXe=(e,t)=>({name:"undo",label:"buttons.undo",icon:Kz,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,s)=>Lse(s,r,()=>e.undo(mt(n),r,t.snapshot)),keyTest:n=>n[J.CTRL_OR_CMD]&&sM(n,J.Z)&&!n.shiftKey,PanelComponent:({updateData:n,data:r})=>{let{isUndoStackEmpty:i}=Dse(e.onHistoryChangedEmitter,new p9(e.isUndoStackEmpty,e.isRedoStackEmpty));return m.jsx(Yt,{type:"button",icon:Kz,"aria-label":$("buttons.undo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-undo"})}}),NXe=(e,t)=>({name:"redo",label:"buttons.redo",icon:Yz,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,s)=>Lse(s,r,()=>e.redo(mt(n),r,t.snapshot)),keyTest:n=>n[J.CTRL_OR_CMD]&&n.shiftKey&&sM(n,J.Z)||AJ&&n.ctrlKey&&!n.shiftKey&&sM(n,J.Y),PanelComponent:({updateData:n,data:r})=>{let{isRedoStackEmpty:i}=Dse(e.onHistoryChangedEmitter,new p9(e.isUndoStackEmpty,e.isRedoStackEmpty));return m.jsx(Yt,{type:"button",icon:Yz,"aria-label":$("buttons.redo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-redo"})}}),_S=(e,t,n,r,i,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,r,s))&&jn(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${i.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}},RXe=class{constructor(e,t,n,r){Q(this,"actions",{}),Q(this,"updater"),Q(this,"getAppState"),Q(this,"getElementsIncludingDeleted"),Q(this,"app"),Q(this,"renderAction",(i,s)=>{let o=this.app.props.UIOptions.canvasActions;if(this.actions[i]&&"PanelComponent"in this.actions[i]&&(!(i in o)||o[i])){let a=this.actions[i],l=a.PanelComponent;l.displayName="PanelComponent";let f=this.getElementsIncludingDeleted(),c=this.getAppState(),d=u=>{_S(a,"ui",c,f,this.app,u),this.updater(a.perform(this.getElementsIncludingDeleted(),this.getAppState(),u,this.app))};return m.jsx(l,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:d,appProps:this.app.props,app:this.app,data:s})}return null}),Q(this,"isActionEnabled",i=>{let s=this.getElementsIncludingDeleted(),o=this.getAppState();return!i.predicate||i.predicate(s,o,this.app.props,this.app)}),this.updater=i=>{if(Iy(i))i.then(s=>e(s));else return e(i)},this.getAppState=t,this.getElementsIncludingDeleted=n,this.app=r}registerAction(e){this.actions[e.name]=e}registerAll(e){e.forEach(t=>this.registerAction(t))}handleKeyDown(e){let t=this.app.props.UIOptions.canvasActions,n=Object.values(this.actions).sort((a,l)=>(l.keyPriority||0)-(a.keyPriority||0)).filter(a=>(a.name in t?t[a.name]:!0)&&a.keyTest&&a.keyTest(e,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(n.length!==1)return n.length>1&&console.warn("Canceling as multiple actions match this shortcut",n),!1;let r=n[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;let i=this.getElementsIncludingDeleted(),s=this.getAppState();return _S(r,"keyboard",s,i,this.app,null),e.preventDefault(),e.stopPropagation(),this.updater(n[0].perform(i,s,null,this.app)),!0}executeAction(e,t="api",n=null){let r=this.getElementsIncludingDeleted(),i=this.getAppState();_S(e,t,i,r,this.app,n),this.updater(e.perform(r,i,n,this.app))}},FV=e=>{let t=Array.from(e.values());return{x:$V(t,n=>n.x)/t.length,y:$V(t,n=>n.y)/t.length}},zV=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),$V=(e,t)=>e.reduce((n,r)=>n+t(r),0),_Xe=({children:e,left:t,top:n,onCloseRequest:r,fitInViewport:i=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{let f=T.useRef(null);T.useEffect(()=>{let d=f.current;if(!d)return;d.contains(document.activeElement)||d.focus();let u=h=>{var g,y,U;if(h.key===J.TAB){let x=qA(d),{activeElement:v}=document,E=x.findIndex(k=>k===v);v===d?(h.shiftKey?(g=x[x.length-1])==null||g.focus():x[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):E===0&&h.shiftKey?((y=x[x.length-1])==null||y.focus(),h.preventDefault(),h.stopImmediatePropagation()):E===x.length-1&&!h.shiftKey&&((U=x[0])==null||U.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",u),()=>d.removeEventListener("keydown",u)},[]);let c=T.useRef(null);return T.useLayoutEffect(()=>{var d,u;if(i&&f.current&&n!=null&&t!=null){let h=f.current,{width:g,height:y}=h.getBoundingClientRect();if(((d=c.current)==null?void 0:d.top)===n&&((u=c.current)==null?void 0:u.left)===t)return;c.current={top:n,left:t},g>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+g-s>a?h.style.left=`${a-g-10}px`:h.style.left=`${t}px`,y>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+y-o>l?h.style.top=`${l-y}px`:h.style.top=`${n}px`}},[n,t,i,a,l,s,o]),T.useEffect(()=>{if(r){let d=u=>{var h;(h=f.current)!=null&&h.contains(u.target)||fi.unstable_batchedUpdates(()=>r(u))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[r]),m.jsx("div",{className:"popover",ref:f,tabIndex:-1,children:e})},ai="separator",PXe=Ie.memo(({actionManager:e,items:t,top:n,left:r,onClose:i})=>{let s=$y(),o=p7(),a=t.reduce((l,f)=>(f&&(f===ai||!f.predicate||f.predicate(o,s,e.app.props,e.app))&&l.push(f),l),[]);return m.jsx(_Xe,{onCloseRequest:()=>{i()},top:n,left:r,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:m.jsx("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,f)=>{var u;if(l===ai)return!a[f-1]||a[f-1]===ai?null:m.jsx("hr",{className:"context-menu-item-separator"},f);let c=l.name,d="";return l.label&&(typeof l.label=="function"?d=$(l.label(o,s,e.app)):d=$(l.label)),m.jsx("li",{"data-testid":c,onClick:()=>{i(()=>{e.executeAction(l,"contextMenu")})},children:m.jsxs("button",{type:"button",className:Ke("context-menu-item",{dangerous:c==="deleteSelectedElements",checkmark:(u=l.checked)==null?void 0:u.call(l,s)}),children:[m.jsx("div",{className:"context-menu-item__label",children:d}),m.jsx("kbd",{className:"context-menu-item__shortcut",children:c?fs(c):""})]})},f)})})})}),DXe=({children:e,onClose:t})=>{let[n,r]=T.useState(!!e),{container:i}=jc(),s=Ie.useCallback(()=>{r(!1),t&&t(),i==null||i.focus()},[t,i]);return m.jsx(m.Fragment,{children:n&&m.jsx(Il,{size:"small",onCloseRequest:s,title:$("errorDialog.title"),children:m.jsx("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},Ose=function({onChange:e,value:t,choices:n,name:r}){return m.jsx("div",{className:"RadioGroup",children:n.map(i=>m.jsxs("div",{className:Ke("RadioGroup__choice",{active:i.value===t}),title:i.ariaLabel,children:[m.jsx("input",{name:r,type:"radio",checked:i.value===t,onChange:()=>e(i.value),"aria-label":i.ariaLabel}),i.label]},String(i.value)))})},i3=({title:e,name:t,checked:n,onChange:r,disabled:i=!1})=>m.jsx("div",{className:Ke("Switch",{toggled:n,disabled:i}),children:m.jsx("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:i,onChange:()=>r(!n),onKeyDown:s=>{s.key===" "&&r(!n)}})}),D2=T.forwardRef(({children:e,icon:t,onClick:n,label:r,variant:i="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:f},c)=>{let[d,u]=T.useState(!1),h=async y=>{let U=n==null?void 0:n(y);if(Iy(U)){let x=window.setTimeout(()=>{u(!0)},50);try{await U}catch(v){if(v instanceof Rw)console.warn(v);else throw v}finally{clearTimeout(x),u(!1)}}},g=d?"loading":f;return s=g==="success"?"success":s,m.jsx("button",{className:Ke("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${i}`,`ExcButton--size-${o}`,`ExcButton--status-${g}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":r,ref:c,disabled:g==="loading"||g==="success",children:m.jsxs("div",{className:"ExcButton__contents",children:[g==="loading"?m.jsx(rd,{className:"ExcButton__statusIcon"}):g==="success"&&m.jsx("div",{className:"ExcButton__statusIcon",children:RIe}),t&&m.jsx("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),i!=="icon"&&(e??r)]})})}),LXe=2e3,OXe=()=>{let[e,t]=T.useState(null),n=T.useRef(0),r=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},LXe)},i=T.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:i,onCopy:r}},jXe="filter"in document.createElement("canvas").getContext("2d"),BXe=()=>m.jsxs("div",{children:[m.jsx("h3",{children:$("canvasError.cannotShowPreview")}),m.jsx("p",{children:m.jsx("span",{children:$("canvasError.canvasTooBig")})}),m.jsxs("em",{children:["(",$("canvasError.canvasTooBigTip"),")"]})]}),FXe=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:r,onExportImage:i,name:s})=>{let o=ti(t,e),[a,l]=T.useState(s),[f,c]=T.useState(o),[d,u]=T.useState(e.exportBackground),[h,g]=T.useState(e.exportWithDarkMode),[y,U]=T.useState(e.exportEmbedScene),[x,v]=T.useState(e.exportScale),E=T.useRef(null),[k,M]=T.useState(null),{onCopy:S,copyStatus:A,resetCopyStatus:I}=OXe();T.useEffect(()=>{I()},[a,d,h,x,y,I]);let{exportedElements:R,exportingFrame:P}=f7(t,e,f);return T.useEffect(()=>{let _=E.current;if(!_)return;let O=_.offsetWidth,V=_.offsetHeight;O&&XN({elements:R,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:x,exportEmbedScene:y},files:n,exportPadding:o6,maxWidthOrHeight:Math.max(O,V),exportingFrame:P}).then(j=>(M(null),jb(j).then(()=>{_.replaceChildren(j)}).catch(F=>{throw F.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error($("canvasError.canvasTooBig")):F}))).catch(j=>{console.error(j),M(j)})},[e,n,R,P,a,d,h,x,y]),m.jsxs("div",{className:"ImageExportModal",children:[m.jsx("h3",{children:$("imageExportDialog.header")}),m.jsxs("div",{className:"ImageExportModal__preview",children:[m.jsx("div",{className:"ImageExportModal__preview__canvas",ref:E,children:k&&m.jsx(BXe,{})}),m.jsx("div",{className:"ImageExportModal__preview__filename",children:!P1&&m.jsx("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:_=>{l(_.target.value),r.executeAction(_We,"ui",_.target.value)}})})]}),m.jsxs("div",{className:"ImageExportModal__settings",children:[m.jsx("h3",{children:$("imageExportDialog.header")}),o&&m.jsx(A5,{label:$("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:m.jsx(i3,{name:"exportOnlySelected",checked:f,onChange:_=>{c(_)}})}),m.jsx(A5,{label:$("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:m.jsx(i3,{name:"exportBackgroundSwitch",checked:d,onChange:_=>{u(_),r.executeAction(DWe,"ui",_)}})}),jXe&&m.jsx(A5,{label:$("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:m.jsx(i3,{name:"exportDarkModeSwitch",checked:h,onChange:_=>{g(_),r.executeAction(LWe,"ui",_)}})}),m.jsx(A5,{label:$("imageExportDialog.label.embedScene"),tooltip:$("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:m.jsx(i3,{name:"exportEmbedSwitch",checked:y,onChange:_=>{U(_),r.executeAction(ase,"ui",_)}})}),m.jsx(A5,{label:$("imageExportDialog.label.scale"),name:"exportScale",children:m.jsx(Ose,{name:"exportScale",value:x,onChange:_=>{v(_),r.executeAction(PWe,"ui",_)},choices:nN.map(_=>({value:_,label:`${_}`}))})}),m.jsxs("div",{className:"ImageExportModal__settings__buttons",children:[m.jsx(D2,{className:"ImageExportModal__settings__buttons__button",label:$("imageExportDialog.title.exportToPng"),onClick:()=>i(Xk.png,R,{exportingFrame:P}),icon:l$,children:$("imageExportDialog.button.exportToPng")}),m.jsx(D2,{className:"ImageExportModal__settings__buttons__button",label:$("imageExportDialog.title.exportToSvg"),onClick:()=>i(Xk.svg,R,{exportingFrame:P}),icon:l$,children:$("imageExportDialog.button.exportToSvg")}),(GN||Eb)&&m.jsx(D2,{className:"ImageExportModal__settings__buttons__button",label:$("imageExportDialog.title.copyPngToClipboard"),status:A,onClick:async()=>{await i(Xk.clipboard,R,{exportingFrame:P}),S()},icon:pN,children:$("imageExportDialog.button.copyPngToClipboard")})]})]})]})},A5=({label:e,children:t,tooltip:n,name:r})=>m.jsxs("div",{className:"ImageExportModal__settings__setting",title:e,children:[m.jsxs("label",{htmlFor:r,className:"ImageExportModal__settings__setting__label",children:[e,n&&m.jsx(C1,{label:n,long:!0,children:NIe})]}),m.jsx("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),zXe=({elements:e,appState:t,files:n,actionManager:r,onExportImage:i,onCloseRequest:s,name:o})=>{let[{appStateSnapshot:a,elementsSnapshot:l}]=T.useState(()=>({appStateSnapshot:$f(t),elementsSnapshot:$f(e)}));return m.jsx(Il,{onCloseRequest:s,size:"wide",title:!1,children:m.jsx(FXe,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:r,onExportImage:i,name:o})})},jse=({children:e,side:t,className:n})=>m.jsx("div",{className:Ke("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),km=100,Sm=100,HV=e=>{switch(e){case J.ARROW_UP:return"up";case J.ARROW_DOWN:return"down";case J.ARROW_RIGHT:return"right";case J.ARROW_LEFT:return"left";default:return"right"}},Bse=(e,t,n,r)=>{let i=[...n.values()].reduce((s,o)=>{var l;let a;if(Ge(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){let f=n.get(a.elementId);if(!f)return s;us(El(f),"not an ExcalidrawBindableElement");let c=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=Wee(t,ac(t),[c[0]+o.x,c[1]+o.y]);s.push({relative:f,heading:d})}return s},[]);switch(r){case"up":return i.filter(s=>vr(s.heading,so)).map(s=>s.relative);case"down":return i.filter(s=>vr(s.heading,Ci)).map(s=>s.relative);case"right":return i.filter(s=>vr(s.heading,xr)).map(s=>s.relative);case"left":return i.filter(s=>vr(s.heading,io)).map(s=>s.relative)}},KM=(e,t,n)=>Bse("successors",e,t,n),YM=(e,t,n)=>Bse("predecessors",e,t,n),$Xe=(e,t,n)=>{let r=Sm+e.width;if(n==="up"||n==="down"){let a=km+e.height,l=e.x,f=e.x+e.width;if(t.every(c=>c.x+c.width<l||c.x>f))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){let a=e.y,l=e.y+e.height;if(t.every(f=>f.y+f.height<a||f.y>l))return{x:(Sm+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){let a=km+e.height,l=(t.length,a),f=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="up"?{x:f,y:l*-1}:{x:f,y:l}}let i=km+e.height,s=(t.length,Sm+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},HXe=(e,t,n,r)=>{let i=KM(e,t,r),s=YM(e,t,r),o=$Xe(e,[...i,...s],r),a=Ic({type:e.type,x:e.x+o.x,y:e.y+o.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});us(Mw(a),"not an ExcalidrawFlowchartNodeElement");let l=Fse(e,a,t,r,n);return{nextNode:a,bindingArrow:l}},VXe=(e,t,n,r,i)=>{let s=[];for(let o=0;o<i;o++){let a,l;if(r==="left"||r==="right"){let d=km*(i-1)+i*e.height,u=e.y+e.height/2-d/2,h=Sm+e.width;r==="left"&&(h*=-1),a=e.x+h;let g=(km+e.height)*o;l=u+g}else{let d=Sm*(i-1)+i*e.width,u=e.x+e.width/2-d/2,h=km+e.height;r==="up"&&(h*=-1),l=e.y+h;let g=(Sm+e.width)*o;a=u+g}let f=Ic({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});us(Mw(f),"not an ExcalidrawFlowchartNodeElement");let c=Fse(e,f,t,r,n);s.push(f),s.push(c)}return s},Fse=(e,t,n,r,i)=>{let s,o;switch(r){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let a,l;switch(r){case"up":{a=t.x+t.width/2-s,l=t.y+t.height-o+6;break}case"down":{a=t.x+t.width/2-s,l=t.y-o-6;break}case"right":{a=t.x-s-6,l=t.y-o+t.height/2;break}case"left":{a=t.x+t.width-s+6,l=t.y-o+t.height/2;break}}let f=AN({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[D(0,0),D(a,l)],elbowed:!0});Mc(f,e,"start",n),Mc(f,t,"end",n);let c=new Map;c.set(e.id,e),c.set(t.id,t),c.set(f.id,f),We.movePoints(f,[{index:1,point:f.points[1]}]);let d=ON(f,Ca(new Map([...n.entries(),[e.id,e],[t.id,t],[f.id,f]])),{points:f.points});return{...f,...d}},WXe=class{constructor(){Q(this,"isExploring",!1),Q(this,"sameLevelNodes",[]),Q(this,"sameLevelIndex",0),Q(this,"direction",null),Q(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(e,t,n){if(!El(e))return null;if(n!==this.direction&&this.clear(),this.visitedNodes.has(e.id)||this.visitedNodes.add(e.id),this.isExploring&&n===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;let r=[...KM(e,t,n),...YM(e,t,n)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=n,this.visitedNodes.add(r[0].id),r[0].id;if(n===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(e.id);let i=["up","right","down","left"].filter(s=>s!==n).map(s=>[...KM(e,t,s),...YM(e,t,s)]).flat().filter(s=>!this.visitedNodes.has(s.id));for(let s of i)if(!this.visitedNodes.has(s.id))return this.visitedNodes.add(s.id),this.isExploring=!0,this.direction=n,s.id}return null}},GXe=class{constructor(){Q(this,"isCreatingChart",!1),Q(this,"numberOfNodes",0),Q(this,"direction","right"),Q(this,"pendingNodes",null)}createNodes(e,t,n,r){if(r!==this.direction){let{nextNode:i,bindingArrow:s}=HXe(e,t,n,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=r,this.pendingNodes=[i,s]}else{this.numberOfNodes+=1;let i=VXe(e,t,n,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=r,this.pendingNodes=i}if(e.frameId){let i=t.get(e.frameId);us(i&&XJ(i),"not an ExcalidrawFrameElement"),i&&this.pendingNodes.every(s=>Ly([s],i,t)||e0(s,i,t))&&(this.pendingNodes=this.pendingNodes.map(s=>Ue(s,{frameId:e.frameId},!1)))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}},XXe=(e,t)=>{var n,r;for(let[,i]of t)if(i.type==="arrow"&&(((n=i.startBinding)==null?void 0:n.elementId)===e.id||((r=i.endBinding)==null?void 0:r.elementId)===e.id))return!0;return!1},KXe=({appState:e,isMobile:t,device:n,app:r})=>{var c,d;let{activeTool:i,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((c=e.openSidebar)==null?void 0:c.name)===gl.name&&e.openSidebar.tab===Um&&((d=e.searchMatches)!=null&&d.length))return $("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(Yl(e))return $("hints.eraserRevert");if(i.type==="arrow"||i.type==="line")return l?$("hints.linearElementMulti"):i.type==="arrow"?$("hints.arrowTool",{arrowShortcut:ye("A")}):$("hints.linearElement");if(i.type==="freedraw")return $("hints.freeDraw");if(i.type==="text")return $("hints.text");if(i.type==="embeddable")return $("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return $("hints.placeImage");let f=r.scene.getSelectedElements(e);if(s&&a==="mouse"&&f.length===1){let u=f[0];return xt(u)&&u.points.length===2?$("hints.lockAngle"):ln(u)?$("hints.resizeImage"):$("hints.resize")}if(o&&a==="mouse")return $("hints.rotate");if(f.length===1&&Ve(f[0]))return $("hints.text_selected");if(e.editingTextElement)return $("hints.text_editing");if(e.croppingElementId)return $("hints.leaveCropEditor");if(f.length===1&&ln(f[0]))return $("hints.enterCropEditor");if(i.type==="selection"){if(e.selectionElement&&!f.length&&!e.editingTextElement&&!e.editingLinearElement)return $("hints.deepBoxSelect");if(Pb(r)&&e.selectedElementsAreBeingDragged)return $("hints.disableSnapping");if(!f.length&&!t)return $("hints.canvasPanning");if(f.length===1){if(xt(f[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?$("hints.lineEditor_pointSelected"):$("hints.lineEditor_nothingSelected"):$("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&Gh(f[0]))return Mw(f[0])?XXe(f[0],r.scene.getNonDeletedElementsMap())?[$("hints.bindTextToElement"),$("hints.createFlowchart")]:[$("hints.bindTextToElement"),$("hints.createFlowchart")]:$("hints.bindTextToElement")}}return null},zse=({appState:e,isMobile:t,device:n,app:r})=>{let i=KXe({appState:e,isMobile:t,device:n,app:r});if(!i)return null;let s=Array.isArray(i)?i.map(o=>ye(o).replace(/\. ?$/,"")).join(". "):ye(i);return m.jsx("div",{className:"HintViewer",children:m.jsx("span",{children:s})})},YXe="medium",VV={CHECKED:dN,UNCHECKED:Tw},$se=e=>m.jsxs("label",{className:Ke("ToolIcon ToolIcon__lock",`ToolIcon_size_${YXe}`,{"is-mobile":e.isMobile}),title:`${e.title}  Q`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),m.jsx("div",{className:"ToolIcon__icon",children:e.checked?VV.CHECKED:VV.UNCHECKED})]}),$b=({heading:e,children:t,...n})=>{let{id:r}=jc(),i=m.jsx("h2",{className:"visually-hidden",id:`${r}-${e}-title`,children:$(`headings.${e}`)});return m.jsx("section",{...n,"aria-labelledby":`${r}-${e}-title`,children:typeof t=="function"?t(i):m.jsxs(m.Fragment,{children:[i,t]})})},ql=4,Pu=6,ZXe="rgba(0,0,0,0.3)",qXe=(e,t,n,r)=>{if(!e.length)return{horizontal:null,vertical:null};let[i,s,o,a]=mn(e),l=t/r.zoom.value,f=n/r.zoom.value,c=t-l,d=n-f,u={top:parseInt(HU("sat"))||0,bottom:parseInt(HU("sab"))||0,left:parseInt(HU("sal"))||0,right:parseInt(HU("sar"))||0},h=Fb().rtl,g=-r.scrollX+c/2+u.left,y=-r.scrollY+d/2+u.top,U=g+l-u.right,x=y+f-u.bottom,v=Math.min(i,g),E=Math.min(s,y),k=Math.max(o,U),M=Math.max(a,x);return{horizontal:g===v&&U===k?null:{x:Math.max(u.left,ql)+(g-v)/(k-v)*t,y:n-Pu-Math.max(ql,u.bottom),width:(U-g)/(k-v)*t-Math.max(ql*2,u.left+u.right),height:Pu},vertical:y===E&&x===M?null:{x:h?Math.max(u.left,ql):t-Pu-Math.max(u.right,ql),y:(y-E)/(M-E)*n+Math.max(u.top,ql),width:Pu,height:(x-y)/(M-E)*n-Math.max(ql*2,u.top+u.bottom)}}},WV=(e,t,n)=>{let[r,i]=[e.horizontal,e.vertical].map(s=>s!=null&&s.x<=t&&t<=s.x+s.width&&s.y<=n&&n<=s.y+s.height);return{isOverEither:r||i,isOverHorizontal:r,isOverVertical:i}},QXe="medium",Hse=e=>e.penDetected?m.jsxs("label",{className:Ke("ToolIcon ToolIcon__penMode",`ToolIcon_size_${QXe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m.jsx("div",{className:"ToolIcon__icon",children:ITe})]}):null,Vse=e=>m.jsx(Yt,{className:Ke("Shape",{fillable:!1}),type:"radio",icon:fee,name:"editor-current-shape",checked:e.checked,title:`${e.title}  H`,keyBindingLabel:e.isMobile?void 0:J.H.toLocaleUpperCase(),"aria-label":`${e.title}  H`,"aria-keyshortcuts":J.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),JXe=({appState:e,elements:t,actionManager:n,setAppState:r,onLockToggle:i,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:f,device:c,renderWelcomeScreen:d,UIOptions:u,app:h})=>{var E,k;let{WelcomeScreenCenterTunnel:g,MainMenuTunnel:y,DefaultSidebarTriggerTunnel:U}=zo(),x=()=>m.jsxs(jse,{side:"top",className:"App-top-bar",children:[d&&m.jsx(g.Out,{}),m.jsx($b,{heading:"shapes",children:M=>{var S;return m.jsx(ya.Col,{gap:4,align:"center",children:m.jsxs(ya.Row,{gap:1,className:"App-toolbar-container",children:[m.jsxs(Ul,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[M,m.jsx(ya.Row,{gap:1,children:m.jsx(Ise,{appState:e,activeTool:e.activeTool,UIOptions:u,app:h})})]}),a&&a(!0,e),m.jsxs("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((S=e.openDialog)==null?void 0:S.name)!=="elementLinkSelector"&&m.jsx(U.Out,{}),m.jsx(Hse,{checked:e.penMode,onChange:()=>o(null),title:$("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),m.jsx($se,{checked:e.activeTool.locked,onChange:i,title:$("toolBar.lock"),isMobile:!0}),m.jsx(Vse,{checked:Dg(e),onChange:()=>s(),title:$("toolBar.hand"),isMobile:!0})]})]})})}}),m.jsx(zse,{appState:e,isMobile:!0,device:c,app:h})]}),v=()=>{var M;return e.viewModeEnabled||((M=e.openDialog)==null?void 0:M.name)==="elementLinkSelector"?m.jsx("div",{className:"App-toolbar-content",children:m.jsx(y.Out,{})}):m.jsxs("div",{className:"App-toolbar-content",children:[m.jsx(y.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),m.jsxs("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return m.jsxs(m.Fragment,{children:[f(),!e.viewModeEnabled&&((E=e.openDialog)==null?void 0:E.name)!=="elementLinkSelector"&&x(),m.jsx("div",{className:"App-bottom-bar",style:{marginBottom:Pu+ql*2,marginLeft:Pu+ql*2,marginRight:Pu+ql*2},children:m.jsxs(Ul,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((k=e.openDialog)==null?void 0:k.name)!=="elementLinkSelector"&&sR(e,t)?m.jsx($b,{className:"App-mobile-menu",heading:"selectedShapeActions",children:m.jsx(Tse,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,m.jsxs("footer",{className:"App-toolbar",children:[v(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&m.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(M=>({...Rb(t,M)}))},children:$("buttons.scrollBackToContent")})]})]})})]})},GV=e=>{let t=T.useRef(null),[n,r]=T.useState(null);return T.useLayoutEffect(()=>{if(!e.spreadsheet)return;let i=Wje(e.chartType,e.spreadsheet,0,0);r(i);let s,o=t.current;return(async()=>{var a;return s=await PN(i,{exportBackground:!1,viewBackgroundColor:Mi.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),m.jsx("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:m.jsx("div",{ref:t})})},eKe=({setAppState:e,appState:t,onClose:n})=>{let{onInsertElements:r}=Oc(),i=Ie.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{r(a),jn("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return m.jsx(Il,{size:"small",onCloseRequest:i,title:$("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:m.jsxs("div",{className:"container",children:[m.jsx(GV,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),m.jsx(GV,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},tKe=()=>m.jsxs("div",{className:"HelpDialog__header",children:[m.jsxs("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:Xz}),$("helpDialog.documentation")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:Xz}),$("helpDialog.blog")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:ree}),$("helpDialog.github")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:qIe}),"YouTube"]})]}),nKe=e=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{children:e.title}),m.jsx("div",{className:"HelpDialog__islands-container",children:e.children})]}),PS=e=>m.jsxs("div",{className:`HelpDialog__island ${e.className}`,children:[m.jsx("h4",{className:"HelpDialog__island-title",children:e.caption}),m.jsx("div",{className:"HelpDialog__island-content",children:e.children})]});function*rKe(e,t){let n=!0;for(let r of e)n||(yield t),n=!1,yield r}var iKe=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),Xe=({label:e,shortcuts:t,isOr:n=!0})=>{let r=t.map(i=>(i.endsWith("++")?[...i.slice(0,-2).split("+"),"+"]:i.split("+")).map(s=>m.jsx(sKe,{children:iKe(s)},s)));return m.jsxs("div",{className:"HelpDialog__shortcut",children:[m.jsx("div",{children:e}),m.jsx("div",{className:"HelpDialog__key-container",children:[...rKe(r,n?$("helpDialog.or"):null)]})]})},sKe=e=>m.jsx("kbd",{className:"HelpDialog__key",...e}),oKe=({onClose:e})=>{let t=Ie.useCallback(()=>{e&&e()},[e]);return m.jsx(m.Fragment,{children:m.jsxs(Il,{onCloseRequest:t,title:$("helpDialog.title"),className:"HelpDialog",children:[m.jsx(tKe,{}),m.jsxs(nKe,{title:$("helpDialog.shortcuts"),children:[m.jsxs(PS,{className:"HelpDialog__island--tools",caption:$("helpDialog.tools"),children:[m.jsx(Xe,{label:$("toolBar.hand"),shortcuts:[J.H]}),m.jsx(Xe,{label:$("toolBar.selection"),shortcuts:[J.V,J[1]]}),m.jsx(Xe,{label:$("toolBar.rectangle"),shortcuts:[J.R,J[2]]}),m.jsx(Xe,{label:$("toolBar.diamond"),shortcuts:[J.D,J[3]]}),m.jsx(Xe,{label:$("toolBar.ellipse"),shortcuts:[J.O,J[4]]}),m.jsx(Xe,{label:$("toolBar.arrow"),shortcuts:[J.A,J[5]]}),m.jsx(Xe,{label:$("toolBar.line"),shortcuts:[J.L,J[6]]}),m.jsx(Xe,{label:$("toolBar.freedraw"),shortcuts:[J.P,J[7]]}),m.jsx(Xe,{label:$("toolBar.text"),shortcuts:[J.T,J[8]]}),m.jsx(Xe,{label:$("toolBar.image"),shortcuts:[J[9]]}),m.jsx(Xe,{label:$("toolBar.eraser"),shortcuts:[J.E,J[0]]}),m.jsx(Xe,{label:$("toolBar.frame"),shortcuts:[J.F]}),m.jsx(Xe,{label:$("toolBar.laser"),shortcuts:[J.K]}),m.jsx(Xe,{label:$("labels.eyeDropper"),shortcuts:[J.I,"Shift+S","Shift+G"]}),m.jsx(Xe,{label:$("helpDialog.editLineArrowPoints"),shortcuts:[ye("CtrlOrCmd+Enter")]}),m.jsx(Xe,{label:$("helpDialog.editText"),shortcuts:[ye("Enter")]}),m.jsx(Xe,{label:$("helpDialog.textNewLine"),shortcuts:[ye("Enter"),ye("Shift+Enter")]}),m.jsx(Xe,{label:$("helpDialog.textFinish"),shortcuts:[ye("Esc"),ye("CtrlOrCmd+Enter")]}),m.jsx(Xe,{label:$("helpDialog.curvedArrow"),shortcuts:["A",$("helpDialog.click"),$("helpDialog.click"),$("helpDialog.click")],isOr:!1}),m.jsx(Xe,{label:$("helpDialog.curvedLine"),shortcuts:["L",$("helpDialog.click"),$("helpDialog.click"),$("helpDialog.click")],isOr:!1}),m.jsx(Xe,{label:$("helpDialog.cropStart"),shortcuts:[$("helpDialog.doubleClick"),ye("Enter")],isOr:!0}),m.jsx(Xe,{label:$("helpDialog.cropFinish"),shortcuts:[ye("Enter"),ye("Escape")],isOr:!0}),m.jsx(Xe,{label:$("toolBar.lock"),shortcuts:[J.Q]}),m.jsx(Xe,{label:$("helpDialog.preventBinding"),shortcuts:[ye("CtrlOrCmd")]}),m.jsx(Xe,{label:$("toolBar.link"),shortcuts:[ye("CtrlOrCmd+K")]})]}),m.jsxs(PS,{className:"HelpDialog__island--view",caption:$("helpDialog.view"),children:[m.jsx(Xe,{label:$("buttons.zoomIn"),shortcuts:[ye("CtrlOrCmd++")]}),m.jsx(Xe,{label:$("buttons.zoomOut"),shortcuts:[ye("CtrlOrCmd+-")]}),m.jsx(Xe,{label:$("buttons.resetZoom"),shortcuts:[ye("CtrlOrCmd+0")]}),m.jsx(Xe,{label:$("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),m.jsx(Xe,{label:$("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),m.jsx(Xe,{label:$("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),m.jsx(Xe,{label:$("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),m.jsx(Xe,{label:$("buttons.zenMode"),shortcuts:[ye("Alt+Z")]}),m.jsx(Xe,{label:$("buttons.objectsSnapMode"),shortcuts:[ye("Alt+S")]}),m.jsx(Xe,{label:$("labels.toggleGrid"),shortcuts:[ye("CtrlOrCmd+'")]}),m.jsx(Xe,{label:$("labels.viewMode"),shortcuts:[ye("Alt+R")]}),m.jsx(Xe,{label:$("labels.toggleTheme"),shortcuts:[ye("Alt+Shift+D")]}),m.jsx(Xe,{label:$("stats.fullTitle"),shortcuts:[ye("Alt+/")]}),m.jsx(Xe,{label:$("search.title"),shortcuts:[fs("searchMenu")]}),m.jsx(Xe,{label:$("commandPalette.title"),shortcuts:Eb?[fs("commandPalette")]:[fs("commandPalette"),fs("commandPalette",1)]})]}),m.jsxs(PS,{className:"HelpDialog__island--editor",caption:$("helpDialog.editor"),children:[m.jsx(Xe,{label:$("helpDialog.createFlowchart"),shortcuts:[ye("CtrlOrCmd+Arrow Key")],isOr:!0}),m.jsx(Xe,{label:$("helpDialog.navigateFlowchart"),shortcuts:[ye("Alt+Arrow Key")],isOr:!0}),m.jsx(Xe,{label:$("labels.moveCanvas"),shortcuts:[ye(`Space+${$("helpDialog.drag")}`),ye(`Wheel+${$("helpDialog.drag")}`)],isOr:!0}),m.jsx(Xe,{label:$("buttons.clearReset"),shortcuts:[ye("CtrlOrCmd+Delete")]}),m.jsx(Xe,{label:$("labels.delete"),shortcuts:[ye("Delete")]}),m.jsx(Xe,{label:$("labels.cut"),shortcuts:[ye("CtrlOrCmd+X")]}),m.jsx(Xe,{label:$("labels.copy"),shortcuts:[ye("CtrlOrCmd+C")]}),m.jsx(Xe,{label:$("labels.paste"),shortcuts:[ye("CtrlOrCmd+V")]}),m.jsx(Xe,{label:$("labels.pasteAsPlaintext"),shortcuts:[ye("CtrlOrCmd+Shift+V")]}),m.jsx(Xe,{label:$("labels.selectAll"),shortcuts:[ye("CtrlOrCmd+A")]}),m.jsx(Xe,{label:$("labels.multiSelect"),shortcuts:[ye(`Shift+${$("helpDialog.click")}`)]}),m.jsx(Xe,{label:$("helpDialog.deepSelect"),shortcuts:[ye(`CtrlOrCmd+${$("helpDialog.click")}`)]}),m.jsx(Xe,{label:$("helpDialog.deepBoxSelect"),shortcuts:[ye(`CtrlOrCmd+${$("helpDialog.drag")}`)]}),(GN||Eb)&&m.jsx(Xe,{label:$("labels.copyAsPng"),shortcuts:[ye("Shift+Alt+C")]}),m.jsx(Xe,{label:$("labels.copyStyles"),shortcuts:[ye("CtrlOrCmd+Alt+C")]}),m.jsx(Xe,{label:$("labels.pasteStyles"),shortcuts:[ye("CtrlOrCmd+Alt+V")]}),m.jsx(Xe,{label:$("labels.sendToBack"),shortcuts:[ye(Cc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),m.jsx(Xe,{label:$("labels.bringToFront"),shortcuts:[ye(Cc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),m.jsx(Xe,{label:$("labels.sendBackward"),shortcuts:[ye("CtrlOrCmd+[")]}),m.jsx(Xe,{label:$("labels.bringForward"),shortcuts:[ye("CtrlOrCmd+]")]}),m.jsx(Xe,{label:$("labels.alignTop"),shortcuts:[ye("CtrlOrCmd+Shift+Up")]}),m.jsx(Xe,{label:$("labels.alignBottom"),shortcuts:[ye("CtrlOrCmd+Shift+Down")]}),m.jsx(Xe,{label:$("labels.alignLeft"),shortcuts:[ye("CtrlOrCmd+Shift+Left")]}),m.jsx(Xe,{label:$("labels.alignRight"),shortcuts:[ye("CtrlOrCmd+Shift+Right")]}),m.jsx(Xe,{label:$("labels.duplicateSelection"),shortcuts:[ye("CtrlOrCmd+D"),ye(`Alt+${$("helpDialog.drag")}`)]}),m.jsx(Xe,{label:$("helpDialog.toggleElementLock"),shortcuts:[ye("CtrlOrCmd+Shift+L")]}),m.jsx(Xe,{label:$("buttons.undo"),shortcuts:[ye("CtrlOrCmd+Z")]}),m.jsx(Xe,{label:$("buttons.redo"),shortcuts:AJ?[ye("CtrlOrCmd+Y"),ye("CtrlOrCmd+Shift+Z")]:[ye("CtrlOrCmd+Shift+Z")]}),m.jsx(Xe,{label:$("labels.group"),shortcuts:[ye("CtrlOrCmd+G")]}),m.jsx(Xe,{label:$("labels.ungroup"),shortcuts:[ye("CtrlOrCmd+Shift+G")]}),m.jsx(Xe,{label:$("labels.flipHorizontal"),shortcuts:[ye("Shift+H")]}),m.jsx(Xe,{label:$("labels.flipVertical"),shortcuts:[ye("Shift+V")]}),m.jsx(Xe,{label:$("labels.showStroke"),shortcuts:[ye("S")]}),m.jsx(Xe,{label:$("labels.showBackground"),shortcuts:[ye("G")]}),m.jsx(Xe,{label:$("labels.showFonts"),shortcuts:[ye("Shift+F")]}),m.jsx(Xe,{label:$("labels.decreaseFontSize"),shortcuts:[ye("CtrlOrCmd+Shift+<")]}),m.jsx(Xe,{label:$("labels.increaseFontSize"),shortcuts:[ye("CtrlOrCmd+Shift+>")]})]})]})]})})},aKe=4,lKe=8,cKe=({shouldWrap:e,children:t,username:n})=>e?m.jsx(C1,{label:n||"Unknown user",children:t}):m.jsx(m.Fragment,{children:t}),DS=({actionManager:e,collaborator:t,socketId:n,withName:r=!1,shouldWrapWithTooltip:i=!1,isBeingFollowed:s})=>{let o={socketId:n,collaborator:t,withName:r,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return m.jsx(cKe,{username:t.username,shouldWrap:i,children:a},n)},fKe=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],Wse=Ie.memo(({className:e,mobile:t,collaborators:n,userToFollow:r})=>{let i=bo(),s=new Map;n.forEach((g,y)=>{let U=g.id||y;s.set(U,{...g,socketId:y})});let o=Array.from(s.values()).filter(g=>{var y;return(y=g.username)==null?void 0:y.trim()}),[a,l]=Ie.useState(""),f=o.filter(g=>{var y;return(y=g.username)==null?void 0:y.toLowerCase().includes(a)}),c=Ie.useRef(null);T.useLayoutEffect(()=>{if(c.current){let g=U=>{let x=Math.max(1,Math.min(8,Math.floor(U/38)));u(x)};if(g(c.current.clientWidth),!XA)return;let y=new ResizeObserver(U=>{for(let x of U){let{width:v}=x.contentRect;g(v)}});return y.observe(c.current),()=>{y.disconnect()}}},[]);let[d,u]=Ie.useState(aKe),h=o.slice(0,d-1).map(g=>DS({actionManager:i,collaborator:g,socketId:g.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:g.socketId===r}));return t?m.jsx("div",{className:Ke("UserList UserList_mobile",e),children:o.map(g=>DS({actionManager:i,collaborator:g,socketId:g.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:g.socketId===r}))}):m.jsx("div",{className:"UserList__wrapper",ref:c,children:m.jsxs("div",{className:Ke("UserList",e),style:{"--max-avatars":d},children:[h,o.length>d-1&&m.jsxs(t7,{children:[m.jsxs(n7,{className:"UserList__more",children:["+",o.length-d+1]}),m.jsx(vR,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:m.jsxs(Ul,{padding:2,children:[o.length>=lKe&&m.jsx(qie,{placeholder:$("quickSearch.placeholder"),onChange:l}),m.jsx(Qie,{className:"dropdown-menu UserList__collaborators",placeholder:$("userList.empty"),children:f.length>0?[m.jsx("div",{className:"hint",children:$("userList.hint.text")}),f.map(g=>DS({actionManager:i,collaborator:g,socketId:g.socketId,withName:!0,isBeingFollowed:g.socketId===r}))]:[]}),m.jsx(hie,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;let n=t.collaborators.keys();for(let[r,i]of e.collaborators){let s=t.collaborators.get(r);if(!s||r!==n.next().value||!Gi(i,s,fKe))return!1}return!0}),XV=({children:e,color:t})=>m.jsx("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":Mi[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":Mi[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":Mi[t][9]},children:e}),dKe=({elements:e,appState:t,setAppState:n,files:r,actionManager:i,exportOpts:s,canvas:o,onCloseRequest:a})=>{let{onExportToBackend:l}=s;return m.jsx("div",{className:"ExportDialog ExportDialog--json",children:m.jsxs("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&m.jsxs(XV,{color:"lime",children:[m.jsx("div",{className:"Card-icon",children:$Te}),m.jsx("h2",{children:$("exportDialog.disk_title")}),m.jsxs("div",{className:"Card-details",children:[$("exportDialog.disk_details"),!P1&&i.renderAction("changeProjectName")]}),m.jsx(Yt,{className:"Card-button",type:"button",title:$("exportDialog.disk_button"),"aria-label":$("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{i.executeAction(lse,"ui")}})]}),l&&m.jsxs(XV,{color:"pink",children:[m.jsx("div",{className:"Card-icon",children:tM}),m.jsx("h2",{children:$("exportDialog.link_title")}),m.jsx("div",{className:"Card-details",children:$("exportDialog.link_details")}),m.jsx(Yt,{className:"Card-button",type:"button",title:$("exportDialog.link_button"),"aria-label":$("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{jn("export","link",`ui (${KMe()})`),await l(e,t,r),a()}catch(f){n({errorMessage:f.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,r,o)]})})},uKe=({elements:e,appState:t,files:n,actionManager:r,exportOpts:i,canvas:s,setAppState:o})=>{var l;let a=Ie.useCallback(()=>{o({openDialog:null})},[o]);return m.jsx(m.Fragment,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&m.jsx(Il,{onCloseRequest:a,title:$("buttons.export"),children:m.jsx(dKe,{elements:e,appState:t,setAppState:o,files:n,actionManager:r,onCloseRequest:a,exportOpts:i,canvas:s})})})},hKe=e=>m.jsx("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${$("helpDialog.title")}  ?`,"aria-label":$("helpDialog.title"),children:uN}),Gse=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:r})=>{let{FooterCenterTunnel:i,WelcomeScreenHelpHintTunnel:s}=zo(),o=pi(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return m.jsxs("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[m.jsx("div",{className:Ke("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:m.jsx(ya.Col,{gap:2,children:m.jsxs($b,{heading:"canvasActions",children:[m.jsx(bXe,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&m.jsx(yXe,{renderAction:t.renderAction,className:Ke("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&m.jsx(xXe,{renderAction:t.renderAction,className:Ke("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),m.jsx(i.Out,{}),m.jsx("div",{className:Ke("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:m.jsxs("div",{style:{position:"relative"},children:[r&&m.jsx(s.Out,{}),m.jsx(hKe,{onClick:()=>t.executeAction(PR)})]})}),m.jsx(UXe,{actionManager:t,showExitZenModeBtn:n})]})},pKe=Gse;Gse.displayName="Footer";var Xse=Ie.createContext({}),Kse=({children:e,className:t})=>{let n=pi(),r=T.useContext(Xse),i=!!(n.editor.canFitSidebar&&r.shouldRenderDockButton);return m.jsxs("div",{className:Ke("sidebar__header",t),"data-testid":"sidebar-header",children:[e,m.jsxs("div",{className:"sidebar__header__buttons",children:[i&&m.jsx(C1,{label:$("labels.sidebarLock"),children:m.jsx(Qg,{onSelect:()=>{var s;return(s=r.onDock)==null?void 0:s.call(r,!r.docked)},selected:!!r.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":$("labels.sidebarLock"),children:xTe})}),m.jsx(Qg,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:r.onCloseRequest,"aria-label":$("buttons.close"),children:c6})]})]})};Kse.displayName="SidebarHeader";var Yse=({name:e,tab:t,icon:n,title:r,children:i,onToggle:s,className:o,style:a})=>{var c;let l=mi(),f=js();return m.jsxs("label",{title:r,className:"sidebar-trigger__label-element",children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");let u=d.target.checked;l({openSidebar:u?{name:e,tab:t}:null}),s==null||s(u)},checked:((c=f.openSidebar)==null?void 0:c.name)===e,"aria-label":r,"aria-keyshortcuts":"0"}),m.jsxs("div",{className:Ke("sidebar-trigger",o),style:a,children:[n&&m.jsx("div",{children:n}),i&&m.jsx("div",{className:"sidebar-trigger__label",children:i})]})]})};Yse.displayName="SidebarTrigger";var Zse=({children:e,...t})=>m.jsx(Nie,{className:"sidebar-triggers",...t,children:e});Zse.displayName="SidebarTabTriggers";var qse=({children:e,tab:t,onSelect:n,...r})=>m.jsx(Rie,{value:t,asChild:!0,onSelect:n,children:m.jsx("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...r,children:e})});qse.displayName="SidebarTabTrigger";var Qse=({children:e,...t})=>{let n=js(),r=mi();if(!n.openSidebar)return null;let{name:i}=n.openSidebar;return m.jsx(Iie,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>r(o=>({...o,openSidebar:{...o.openSidebar,name:i,tab:s}})),...t,children:e})};Qse.displayName="SidebarTabs";var Jse=({tab:e,children:t,...n})=>m.jsx(_ie,{...n,value:e,"data-testid":e,children:t});Jse.displayName="SidebarTab";var jR=Ri(!1),eoe=T.forwardRef(({name:e,children:t,onDock:n,docked:r,className:i,...s},o)=>{At.DEV&&n&&r==null&&console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");let a=mi(),l=i7(jR);T.useLayoutEffect(()=>(l(!!r),()=>{l(!1)}),[l,r]);let f=T.useRef({});f.current.onCloseRequest=()=>{a({openSidebar:null})},f.current.onDock=h=>n==null?void 0:n(h),f.current=F3(f.current,{docked:r,shouldRenderDockButton:!!n&&r!=null});let c=T.useRef(null);T.useImperativeHandle(o,()=>c.current);let d=pi(),u=T.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return MR(c,T.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!r||!d.editor.canFitSidebar)&&u()},[u,r,d.editor.canFitSidebar])),T.useEffect(()=>{let h=g=>{g.key===J.ESCAPE&&(!r||!d.editor.canFitSidebar)&&u()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[u,r,d.editor.canFitSidebar]),m.jsx(Ul,{...s,className:Ke("sidebar",{"sidebar--docked":r},i),ref:c,children:m.jsx(Xse.Provider,{value:f.current,children:t})})});eoe.displayName="SidebarInner";var Kl=Object.assign(T.forwardRef((e,t)=>{var a;let n=js(),{onStateChange:r}=e,i=T.useRef(n.openSidebar);T.useEffect(()=>{var l,f,c,d,u;(!n.openSidebar&&((l=i==null?void 0:i.current)==null?void 0:l.name)===e.name||((f=n.openSidebar)==null?void 0:f.name)===e.name&&((c=i==null?void 0:i.current)==null?void 0:c.name)!==e.name||((d=i.current)==null?void 0:d.name)===e.name)&&n.openSidebar!==i.current&&(r==null||r(((u=n.openSidebar)==null?void 0:u.name)!==e.name?null:n.openSidebar)),i.current=n.openSidebar},[n.openSidebar,r,e.name]);let[s,o]=T.useState(!1);return T.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((a=n.openSidebar)==null?void 0:a.name)===e.name?T.createElement(eoe,{...e,ref:t,key:e.name}):null}),{Header:Kse,TabTriggers:Zse,TabTrigger:qse,Tabs:Qse,Tab:Jse,Trigger:Yse});Kl.displayName="Sidebar";var toe={};AQ(toe,{ChangeCanvasBackground:()=>uoe,ClearCanvas:()=>foe,CommandPalette:()=>aoe,Export:()=>hoe,Help:()=>coe,LiveCollaborationTrigger:()=>moe,LoadScene:()=>ioe,SaveAsImage:()=>ooe,SaveToActiveFile:()=>soe,SearchMenu:()=>loe,Socials:()=>poe,ToggleTheme:()=>doe});var noe=Ri({active:!1});async function mKe({title:e,description:t,actionLabel:n,color:r}){return new Promise(i=>{pl.set(noe,{active:!0,onConfirm:()=>i(!0),onClose:()=>i(!1),onReject:()=>i(!1),title:e,description:t,actionLabel:n,color:r})})}var roe=({value:e,shortcut:t,onChange:n,choices:r,children:i,name:s})=>{let o=pi();return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[m.jsx("label",{className:"dropdown-menu-item__text",htmlFor:s,children:i}),m.jsx(Ose,{name:s,value:e,onChange:n,choices:r})]}),t&&!o.editor.isMobile&&m.jsx("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};roe.displayName="DropdownMenuItemContentRadio";var gKe=roe,ioe=()=>{let{t:e}=bs(),t=bo(),n=p7();return t.isActionEnabled($M)?m.jsx(Na,{icon:hN,onSelect:async()=>{(!n.length||await mKe({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:m.jsx(bc,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>m.jsx("strong",{children:r}),br:()=>m.jsx("br",{})})}))&&t.executeAction($M)},"data-testid":"load-button",shortcut:fs("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};ioe.displayName="LoadScene";var soe=()=>{let{t:e}=bs(),t=bo();return t.isActionEnabled(wV)?m.jsx(Na,{shortcut:fs("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(wV),icon:BTe,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};soe.displayName="SaveToActiveFile";var ooe=()=>{let e=mi(),{t}=bs();return m.jsx(Na,{icon:iee,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:fs("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};ooe.displayName="SaveAsImage";var aoe=e=>{let t=mi(),{t:n}=bs();return m.jsx(Na,{icon:mee,"data-testid":"command-palette-button",onSelect:()=>{jn("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:fs("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};aoe.displayName="CommandPalette";var loe=e=>{let{t}=bs(),n=bo();return m.jsx(Na,{icon:x1,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(Pse)},shortcut:fs("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};loe.displayName="SearchMenu";var coe=()=>{let{t:e}=bs(),t=bo();return m.jsx(Na,{"data-testid":"help-menu-item",icon:uN,onSelect:()=>t.executeAction(PR),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};coe.displayName="Help";var foe=()=>{let{t:e}=bs(),t=i7(h7);return bo().isActionEnabled(_2)?m.jsx(Na,{icon:U1,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};foe.displayName="ClearCanvas";var doe=e=>{let{t}=bs(),n=js(),r=bo(),i=fs("toggleTheme");return r.isActionEnabled(h9)?e!=null&&e.allowSystemTheme?m.jsx(gKe,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:Ft.LIGHT,label:eM,ariaLabel:`${t("buttons.lightMode")} - ${i}`},{value:Ft.DARK,label:JA,ariaLabel:`${t("buttons.darkMode")} - ${i}`},{value:"system",label:ZIe,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):m.jsx(Na,{onSelect:s=>{if(s.preventDefault(),e==null?void 0:e.onSelect)e.onSelect(n.theme===Ft.DARK?Ft.LIGHT:Ft.DARK);else return r.executeAction(h9)},icon:n.theme===Ft.DARK?eM:JA,"data-testid":"toggle-dark-mode",shortcut:i,"aria-label":n.theme===Ft.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===Ft.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};doe.displayName="ToggleTheme";var uoe=()=>{let{t:e}=bs(),t=js(),n=bo(),r=zy();return t.viewModeEnabled||!r.UIOptions.canvasActions.changeViewBackgroundColor?null:m.jsxs("div",{style:{marginTop:"0.5rem"},children:[m.jsx("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),m.jsx("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};uoe.displayName="ChangeCanvasBackground";var hoe=()=>{let{t:e}=bs(),t=mi();return m.jsx(Na,{icon:Iw,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};hoe.displayName="Export";var poe=()=>{let{t:e}=bs();return m.jsxs(m.Fragment,{children:[m.jsx(sx,{icon:ree,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),m.jsx(sx,{icon:OTe,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),m.jsx(sx,{icon:LTe,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};poe.displayName="Socials";var moe=({onSelect:e,isCollaborating:t})=>{let{t:n}=bs();return m.jsx(Na,{"data-testid":"collab-button",icon:aee,className:Ke({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};moe.displayName="LiveCollaborationTrigger";var By=(e,t)=>{let n=Ri(0),r=i=>{let{tunnelsJotai:{useAtom:s}}=zo(),[,o]=s(n),a=T.useRef({preferHost:!1,counter:0});return T.useLayoutEffect(()=>{let l=a.current;return o(f=>{let c=f+1;return l.counter=c,c}),()=>{o(f=>{let c=f-1;return l.counter=c,c||(l.preferHost=!1),c})}},[o]),i.__fallback||(a.current.preferHost=!0),!a.current.counter&&i.__fallback&&a.current.preferHost||a.current.counter>1&&i.__fallback?null:m.jsx(t,{...i})};return r.displayName=e,r},bKe=Object.assign(By("MainMenu",({children:e,onSelect:t})=>{var a;let{MainMenuTunnel:n}=zo(),r=pi(),i=js(),s=mi(),o=r.editor.isMobile?void 0:()=>s({openMenu:null});return m.jsx(n.In,{children:m.jsxs(qn,{open:i.openMenu==="canvas",children:[m.jsx(qn.Trigger,{onToggle:()=>{s({openMenu:i.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:nee}),m.jsxs(qn.Content,{onClickOutside:o,onSelect:Aw(t,()=>{s({openMenu:null})}),children:[e,r.editor.isMobile&&i.collaborators.size>0&&m.jsxs("fieldset",{className:"UserList-Wrapper",children:[m.jsx("legend",{children:$("labels.collaborators")}),m.jsx(Wse,{mobile:!0,collaborators:i.collaborators,userToFollow:((a=i.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:qn.Trigger,Item:qn.Item,ItemLink:qn.ItemLink,ItemCustom:qn.ItemCustom,Group:qn.Group,Separator:qn.Separator,DefaultItems:toe}),Ks=bKe,BR=({title:e,children:t,actionLabel:n,onClick:r})=>m.jsxs("div",{className:"OverwriteConfirm__Actions__Action",children:[m.jsx("h4",{children:e}),m.jsx("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),m.jsx(D2,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:r})]}),yKe=()=>{let{t:e}=bs(),t=bo(),n=mi();return m.jsx(BR,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(ase,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},UKe=()=>{let{t:e}=bs(),t=bo();return m.jsx(BR,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(lse,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},KV=Object.assign(({children:e})=>m.jsx("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:yKe,SaveToDisk:UKe}),LS=Object.assign(By("OverwriteConfirmDialog",({children:e})=>{let{OverwriteConfirmDialogTunnel:t}=zo(),[n,r]=Er(noe);if(!n.active)return null;let i=()=>{n.onClose(),r(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),r(o=>({...o,active:!1}))};return m.jsx(t.In,{children:m.jsx(Il,{onCloseRequest:i,title:!1,size:916,children:m.jsxs("div",{className:"OverwriteConfirm",children:[m.jsx("h3",{children:n.title}),m.jsxs("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[m.jsx("div",{className:"OverwriteConfirm__Description__icon",children:_Ie}),m.jsx("div",{children:n.description}),m.jsx("div",{className:"OverwriteConfirm__Description__spacer"}),m.jsx(D2,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),m.jsx(KV,{children:e})]})})})}),{Actions:KV,Action:BR}),xKe=Ri(""),goe=Ri(null),wKe=350,vKe=()=>{let e=Oc(),t=mi(),n=T.useRef(null),[r,i]=Er(xKe),s=r.trim(),[o,a]=T.useState(!1),[l,f]=T.useState({nonce:null,items:[]}),c=T.useRef(null),d=T.useRef(void 0),[u,h]=Er(goe),g=e.scene.getNonDeletedElementsMap();T.useEffect(()=>{o||(s!==c.current||e.scene.getSceneNonce()!==d.current)&&(c.current=null,YV(s,e,(E,k)=>{f({nonce:Tc(),items:E}),c.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:E.map(M=>({id:M.textElement.id,focus:!1,matchedLines:M.matchedLines}))})}))},[o,s,g,e,t,h,d]);let y=()=>{l.items.length>0&&h(E=>E===null?0:(E+1)%l.items.length)},U=()=>{l.items.length>0&&h(E=>E===null?0:E-1<0?l.items.length-1:E-1)};T.useEffect(()=>{t(E=>({searchMatches:E.searchMatches.map((k,M)=>M===u?{...k,focus:!0}:{...k,focus:!1})}))},[u,t]),T.useEffect(()=>{var E,k,M,S;if(l.items.length>0&&u!==null){let A=l.items[u];if(A){let I=e.state.zoom.value,R=Bo({text:A.searchQuery,x:A.textElement.x+(((E=A.matchedLines[0])==null?void 0:E.offsetX)??0),y:A.textElement.y+(((k=A.matchedLines[0])==null?void 0:k.offsetY)??0),width:(M=A.matchedLines[0])==null?void 0:M.width,height:(S=A.matchedLines[0])==null?void 0:S.height,fontSize:A.textElement.fontSize,fontFamily:A.textElement.fontFamily}),P=14,_=A.textElement.fontSize,O=_*I<P;if(!Q3([R],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||O){let V;O?_>=P?V={fitToContent:!0}:V={fitToViewport:!0,maxZoom:Uc(P/_,1)}:V={fitToContent:!0},e.scrollToContent(R,{animate:!0,duration:300,...V,canvasOffsets:e.getEditorUIOffsets()})}}}},[u,l,e]),T.useEffect(()=>()=>{h(null),c.current=null,d.current=void 0,t({searchMatches:[]}),a(!1)},[t,h]);let x=o7({goToNextItem:y,goToPreviousItem:U,searchMatches:l});T.useEffect(()=>rr(window,"keydown",k=>{var M,S,A;if(k.key===J.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){k.preventDefault(),k.stopPropagation(),t({openSidebar:null});return}k[J.CTRL_OR_CMD]&&k.key===J.F&&(k.preventDefault(),k.stopPropagation(),(M=n.current)!=null&&M.matches(":focus")?t({openSidebar:null}):(e.state.openDialog&&t({openDialog:null}),(S=n.current)==null||S.focus(),(A=n.current)==null||A.select())),k.target instanceof HTMLElement&&k.target.closest(".layer-ui__search")&&x.searchMatches.items.length&&(k.key===J.ENTER&&(k.stopPropagation(),x.goToNextItem()),k.key===J.ARROW_UP?(k.stopPropagation(),x.goToPreviousItem()):k.key===J.ARROW_DOWN&&(k.stopPropagation(),x.goToNextItem()))},{capture:!0,passive:!1}),[t,x,e]);let v=`${l.items.length} ${l.items.length===1?$("search.singleResult"):$("search.multipleResults")}`;return m.jsxs("div",{className:"layer-ui__search",children:[m.jsx("div",{className:"layer-ui__search-header",children:m.jsx(OR,{className:_g.SEARCH_MENU_INPUT_WRAPPER,value:r,ref:n,placeholder:$("search.placeholder"),icon:x1,onChange:E=>{i(E),a(!0);let k=E.trim();YV(k,e,(M,S)=>{f({nonce:Tc(),items:M}),h(S),c.current=k,d.current=e.scene.getSceneNonce(),t({searchMatches:M.map(A=>({id:A.textElement.id,focus:!1,matchedLines:A.matchedLines}))}),a(!1)})},selectOnRender:!0})}),m.jsxs("div",{className:"layer-ui__search-count",children:[l.items.length>0&&m.jsxs(m.Fragment,{children:[u!==null&&u>-1?m.jsxs("div",{children:[u+1," / ",v]}):m.jsx("div",{children:v}),m.jsxs("div",{className:"result-nav",children:[m.jsx(Qg,{onSelect:()=>{y()},className:"result-nav-btn",children:bee}),m.jsx(Qg,{onSelect:()=>{U()},className:"result-nav-btn",children:iNe})]})]}),l.items.length===0&&s&&c.current&&m.jsx("div",{style:{margin:"1rem auto"},children:$("search.noMatch")})]}),m.jsx(CKe,{matches:l,onItemClick:h,focusIndex:u,searchQuery:s})]})},EKe=e=>{let t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return m.jsx("div",{tabIndex:-1,className:Ke("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:m.jsx("div",{className:"preview-text",children:t.flatMap((n,r)=>m.jsx(T.Fragment,{children:r===2?m.jsx("b",{children:n}):n},r))})})},kKe=e=>m.jsx("div",{className:"layer-ui__search-result-container",children:e.matches.items.map((t,n)=>m.jsx(EKe,{searchQuery:e.searchQuery,preview:t.preview,highlighted:n===e.focusIndex,onClick:()=>e.onItemClick(n)},t.textElement.id+t.index))}),SKe=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,CKe=T.memo(kKe,SKe),AKe=(e,t,n)=>{let r=e.slice(0,t),i=r.split(/\s+/),s=r.endsWith(" "),o=i.length-2-1-(s?0:1),a=i.slice(o<=0?0:o).join(" ")+(s?" ":""),l=20;a=a.length>l?a.slice(-l):a;let f=e.slice(t+n.length),c=f.split(/\s+/),d=!f.startsWith(" "),u=d?6:5,h=(d?"":" ")+c.slice(0,u).join(" ");return{indexInSearchQuery:a.length,previewText:a+n+h,moreBefore:o>0,moreAfter:c.length>u}},MKe=(e,t)=>{let n=e.split(`
`),r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s],a=n[s+1];if(a){let l=t.indexOf(a,i);if(l>o.length+i){let f=l-(o.length+i);for(;f>0;)o+=" ",f--}}r.push(o),i=i+o.length}return r.join(`
`)},TKe=(e,t,n)=>{let r=MKe(e.text,e.originalText).split(`
`),i=[],s=0,o=0;for(let c of r){let d=s,u=d+c.length-1;i.push({line:c,startIndex:d,endIndex:u,lineNumber:o}),s=u+1,o++}let a=n,l=e.originalText.slice(n,n+t.length),f=[];for(let c of i){if(l==="")break;if(a>=c.startIndex&&a<=c.endIndex){let d=c.endIndex+1-a,u=c.line.slice(0,a-c.startIndex),h=l.slice(0,d);l=l.slice(d);let g=hs(u,kn(e),e.lineHeight);if(u===""&&(g.width=0),e.textAlign!=="left"&&c.line.length>0){let E=hs(c.line,kn(e),e.lineHeight),k=e.textAlign==="center"?(e.width-E.width)/2:e.width-E.width;g.width+=k}let{width:y,height:U}=hs(h,kn(e),e.lineHeight),x=g.width,v=c.lineNumber*g.height;f.push({offsetX:x,offsetY:v,width:y,height:U}),a+=d}}return f},IKe=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),YV=xVe((e,t,n)=>{if(!e||e===""){n([],null);return}let r=t.scene.getNonDeletedElements().filter(l=>Ve(l));r.sort((l,f)=>l.y-f.y);let i=[],s=new RegExp(IKe(e),"gi");for(let l of r){let f=null,c=l.originalText;for(;(f=s.exec(c))!==null;){let d=AKe(c,f.index,e),u=TKe(l,e,f.index);u.length>0&&i.push({textElement:l,searchQuery:e,preview:d,index:f.index,matchedLines:u})}}let o=new Set(t.visibleElements.map(l=>l.id)),a=i.findIndex(l=>o.has(l.textElement.id))??null;n(i,a)},wKe),boe=By("DefaultSidebarTrigger",e=>{let{DefaultSidebarTriggerTunnel:t}=zo();return m.jsx(t.In,{children:m.jsx(Kl.Trigger,{...e,className:"default-sidebar-trigger",name:gl.name})})});boe.displayName="DefaultSidebarTrigger";var yoe=({children:e})=>{let{DefaultSidebarTabTriggersTunnel:t}=zo();return m.jsx(t.In,{children:e})};yoe.displayName="DefaultTabTriggers";var ZV=Object.assign(By("DefaultSidebar",({children:e,className:t,onDock:n,docked:r,...i})=>{var f;let s=js(),o=mi(),{DefaultSidebarTabTriggersTunnel:a}=zo(),l=((f=s.openSidebar)==null?void 0:f.tab)===Um;return T.createElement(Kl,{...i,name:"default",key:"default",className:Ke("default-sidebar",t),docked:l||(r??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&r!=null?void 0:Aw(n,c=>{o({defaultSidebarDockedPreference:c})})},m.jsxs(Kl.Tabs,{children:[m.jsx(Kl.Header,{children:m.jsxs(Kl.TabTriggers,{children:[m.jsx(Kl.TabTrigger,{tab:Um,children:x1}),m.jsx(Kl.TabTrigger,{tab:_4,children:fN}),m.jsx(a.Out,{})]})}),m.jsx(Kl.Tab,{tab:_4,children:m.jsx(iXe,{})}),m.jsx(Kl.Tab,{tab:Um,children:m.jsx(vKe,{})}),e]}))}),{Trigger:boe,TabTriggers:yoe}),NKe="small",RKe=e=>m.jsxs("label",{className:Ke("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${NKe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),m.jsx("div",{className:"ToolIcon__icon",children:hee})]}),_Ke=({canvasRef:e,setError:t})=>{let n=e.current;if(!n)return;let r=n.parentElement;r&&(r.style.background="",t(null),n.replaceChildren())},Uoe=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:r,data:i})=>{let s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){_Ke({canvasRef:e,setError:r});return}try{let a=await t.api,l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}let{elements:f,files:c}=l;r(null),i.current={elements:JM(f,{regenerateIds:!0}),files:c};let d=await XN({elements:i.current.elements,files:i.current.files,exportPadding:o6,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await jb(d)}catch(u){throw u.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error($("canvasError.canvasTooBig")):u}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&r(a),a}}},FR=e=>{Zh.set(v2.MERMAID_TO_EXCALIDRAW,e)},xoe=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:r})=>{let{elements:i,files:s}=t.current;i.length&&(e.addElementsFromPasteOrLibrary({elements:i,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),r&&n&&FR(n))},woe=({children:e})=>m.jsx("div",{className:"ttd-dialog-panels",children:e}),m9=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgess:i,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>m.jsxs("div",{className:"ttd-dialog-panel",children:[m.jsxs("div",{className:"ttd-dialog-panel__header",children:[m.jsx("label",{children:e}),s==null?void 0:s()]}),t,m.jsxs("div",{className:Ke("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[m.jsxs(Qg,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:r||i,children:[m.jsxs("div",{className:Ke({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&m.jsx("span",{children:n.icon})]}),i&&m.jsx(rd,{})]}),!r&&!i&&(o==null?void 0:o()),a==null?void 0:a()]})]}),voe=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{let i=T.useRef(null),s=T.useRef(r);return s.current=r,T.useEffect(()=>{if(!s.current)return;let o=i.current;if(o){let a=l=>{var f;l[J.CTRL_OR_CMD]&&l.key===J.ENTER&&(l.preventDefault(),(f=s.current)==null||f.call(s))};return o.addEventListener("keydown",a),()=>{o.removeEventListener("keydown",a)}}},[]),m.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},PKe=({error:e})=>m.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",m.jsx("p",{children:e})]}),Eoe=({error:e,canvasRef:t,loaded:n})=>m.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&m.jsx(PKe,{error:e.message}),n?m.jsx("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):m.jsx(rd,{size:"2rem"})]}),koe=()=>m.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[m.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:ye("CtrlOrCmd")}),m.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:ye("Enter")})]}),DKe=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,qV=Og(FR,300),LKe=({mermaidToExcalidrawLib:e})=>{let[t,n]=T.useState(()=>Zh.get(v2.MERMAID_TO_EXCALIDRAW)||DKe),r=T.useDeferredValue(t.trim()),[i,s]=T.useState(null),o=T.useRef(null),a=T.useRef({elements:[],files:null}),l=Oc();T.useEffect(()=>{Uoe({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:r}).catch(c=>{HJ()&&console.error("Failed to parse mermaid definition",c)}),qV(r)},[r,e]),T.useEffect(()=>()=>{qV.flush()},[]);let f=()=>{xoe({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"ttd-dialog-desc",children:m.jsx(bc,{i18nKey:"mermaid.description",flowchartLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:c}),sequenceLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:c}),classLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:c})})}),m.jsxs(woe,{children:[m.jsx(m9,{label:$("mermaid.syntax"),children:m.jsx(voe,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:c=>n(c.target.value),onKeyboardSubmit:()=>{f()}})}),m.jsx(m9,{label:$("mermaid.preview"),panelAction:{action:()=>{f()},label:$("mermaid.button"),icon:H3},renderSubmitShortcut:()=>m.jsx(koe,{}),children:m.jsx(Eoe,{canvasRef:o,loaded:e.loaded,error:i})})]})]})},OKe=LKe,Soe=e=>{let t=mi(),n=T.useRef(null),r=T.useRef(0);return m.jsx(Iie,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:i=>{var o;if(!i)return;let s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){let a=s.offsetHeight||0;a>r.current&&(r.current=a,s.style.minHeight=`min(${r.current}px, 100%)`)}e.dialog==="ttd"&&WJ(["text-to-diagram","mermaid"],i)&&t({openDialog:{name:e.dialog,tab:i}})},children:e.children})};Soe.displayName="TTDDialogTabs";var jKe=Soe,Coe=({children:e,...t})=>m.jsx(Nie,{className:"ttd-dialog-triggers",...t,children:e});Coe.displayName="TTDDialogTabTriggers";var ZM=({children:e,tab:t,onSelect:n,...r})=>m.jsx(Rie,{value:t,asChild:!0,onSelect:n,children:m.jsx("button",{type:"button",className:"ttd-dialog-tab-trigger",...r,children:e})});ZM.displayName="TTDDialogTabTrigger";var qM=({tab:e,children:t,...n})=>m.jsx(_ie,{...n,value:e,children:t});qM.displayName="TTDDialogTab";var OS=3,Ip=1e3,BKe=Ri(null),FKe=Ri(null),zKe=e=>{var n;let t=js();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:m.jsx($Ke,{...e,tab:t.openDialog.tab})},$Ke=By("TTDDialogBase",({tab:e,...t})=>{let n=Oc(),r=mi(),i=T.useRef(null),[s,o]=Er(FKe),[a,l]=T.useState((s==null?void 0:s.prompt)??""),f=a.trim(),c=S=>{l(S.target.value),o(A=>({generatedResponse:(A==null?void 0:A.generatedResponse)??null,prompt:S.target.value}))},[d,u]=T.useState(!1),[h,g]=Er(BKe),y=async()=>{if(f.length>Ip||f.length<OS||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){f.length<OS&&M(new Error(`Prompt is too short (min ${OS} characters)`)),f.length>Ip&&M(new Error(`Prompt is too long (max ${Ip} characters)`));return}try{u(!0),jn("ai","generate","ttd");let{generatedResponse:S,error:A,rateLimit:I,rateLimitRemaining:R}=await t.onTextSubmit(f);if(typeof S=="string"&&o(P=>({generatedResponse:S,prompt:(P==null?void 0:P.prompt)??null})),E2(I)&&E2(R)&&g({rateLimit:I,rateLimitRemaining:R}),A){M(A);return}if(!S){M(new Error("Generation failed"));return}try{await Uoe({canvasRef:i,data:E,mermaidToExcalidrawLib:x,setError:M,mermaidDefinition:S}),jn("ai","mermaid parse success","ttd")}catch(P){console.info(`%cTTD mermaid render errror: ${P.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${P.message}`,"color: yellow"),jn("ai","mermaid parse failed","ttd"),M(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(S){let A=S.message;(!A||A==="Failed to fetch")&&(A="Request failed"),M(new Error(A))}finally{u(!1)}},U=T.useRef(y);U.current=y;let[x,v]=T.useState({loaded:!1,api:Ze(()=>import("./index-COs400dY.js").then(S=>S.aR),[])});T.useEffect(()=>{(async()=>(await x.api,v(S=>({...S,loaded:!0}))))()},[x.api]);let E=T.useRef({elements:[],files:null}),[k,M]=T.useState(null);return m.jsx(Il,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:m.jsxs(jKe,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?m.jsx("p",{className:"dialog-mermaid-title",children:$("mermaid.title")}):m.jsxs(Coe,{children:[m.jsx(ZM,{tab:"text-to-diagram",children:m.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[$("labels.textToDiagram"),m.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),m.jsx(ZM,{tab:"mermaid",children:"Mermaid"})]}),m.jsx(qM,{className:"ttd-dialog-content",tab:"mermaid",children:m.jsx(OKe,{mermaidToExcalidrawLib:x})}),!("__fallback"in t)&&m.jsxs(qM,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[m.jsx("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),m.jsxs(woe,{children:[m.jsx(m9,{label:$("labels.prompt"),panelAction:{action:y,label:"Generate",icon:H3},onTextSubmitInProgess:d,panelActionDisabled:f.length>Ip||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?m.jsxs("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>m.jsx(koe,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return m.jsxs("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(FR(s.generatedResponse),r({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",m.jsx(l7,{icon:H3})]});let S=f.length/Ip;return S>.8?m.jsxs("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:S>1?"var(--color-danger)":void 0},children:["Length: ",f.length,"/",Ip]}):null},children:m.jsx(voe,{onChange:c,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{U.current()}})}),m.jsx(m9,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),xoe({app:n,data:E})},label:"Insert",icon:H3},children:m.jsx(Eoe,{canvasRef:i,error:k,loaded:x.loaded})})]})]})]})})}),HKe=.01,id=(e,t)=>!(t==="height"&&Ve(e)||t==="width"&&Ve(e)||t==="angle"&&ht(e)),as=(e,t)=>{let n=e+t/2;return n-n%t},g9=(e,t,n)=>Object.keys(e).map(r=>({original:(n??t).get(r),latest:t.get(r)})).filter(r=>r.original!==void 0&&r.latest!==void 0),Hb=(e,t,n,r,i,s,o,a=!0)=>{let l=r.get(n.id);if(!l)return;let[f,c]=[n.x+n.width/2,n.y+n.height/2],[d,u]=ue(D(n.x,n.y),D(f,c),n.angle),h=e-d,g=t-u,[y,U]=ue(D(e,t),D(f+h,c+g),-n.angle);Ue(l,{x:y,y:U},a),QM(l,r,i,s);let x=Ct(n,o);if(x){let v=r.get(x.id);v&&Ue(v,{x:x.x+h,y:x.y+g},a)}},zR=(e,t)=>{let n=Xh(t).map(r=>Vn(e,r).reduce((i,s)=>(i[s.id]=!0,i),{}));return e.filter(r=>!Hg(r)).forEach(r=>{n.push({[r.id]:!0})}),n},QM=(e,t,n,r,i)=>{xt(e)?X4([e],t,n,r,!0,[],i==null?void 0:i.zoom):uo(e,t,i)},VKe=({label:e,icon:t,dragInputCallback:n,value:r,elements:i,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:f,sensitivity:c=1})=>{let d=Oc(),u=T.useRef(null),h=T.useRef(null),[g,y]=T.useState(r.toString()),U=T.useRef(null);U.current||(U.current={originalAppState:$f(f),originalElements:i,lastUpdatedValue:g,updatePending:!1}),T.useEffect(()=>{let E=r.toString();y(E),U.current.lastUpdatedValue=E},[r]);let x=(E,k,M)=>{if(!U.current.updatePending)return!1;U.current.updatePending=!1;let S=Number(E);if(isNaN(S)){y(r.toString());return}let A=Number(S.toFixed(2)),I=Number(r);(isNaN(I)||Math.abs(A-I)>=HKe)&&(U.current.lastUpdatedValue=E,n({accumulatedChange:0,instantChange:0,originalElements:k,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:A,property:a,originalAppState:M,setInputValue:R=>y(String(R))}),d.syncActionResult({captureUpdate:pe.IMMEDIATELY}))},v=T.useRef({});return v.current.handleInputValue=x,T.useEffect(()=>{let E=u.current,k=v.current;return()=>{var S;let M=E==null?void 0:E.value;M&&((S=k.handleInputValue)==null||S.call(k,M,U.current.originalElements,U.current.originalAppState)),window.removeEventListener("pointermove",k.onPointerMove,!1),window.removeEventListener("pointerup",k.onPointerUp,!1)}},[s]),s?m.jsxs("div",{className:Ke("drag-input-container",!s&&"disabled"),"data-testid":e,children:[m.jsx("div",{className:"drag-input-label",ref:h,onPointerDown:E=>{if(u.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(u.current.value);let k=null,M=d.scene.getNonDeletedElements().reduce((O,V)=>(O.set(V.id,L1(V)),O),new Map),S=i.map(O=>M.get(O.id)),A=$f(f),I=0,R=0,P=O=>{if(k&&M!==null&&S!==null){let V=O.clientX-k.x;V!==0&&(R+=V,Math.abs(R)>=c&&(R=Math.sign(R)*Math.floor(Math.abs(R)/c),I+=R,n({accumulatedChange:I,instantChange:R,originalElements:S,originalElementsMap:M,shouldKeepAspectRatio:o,shouldChangeByStepSize:O.shiftKey,property:a,scene:l,originalAppState:A,setInputValue:j=>y(String(j))}),R=0))}k={x:O.clientX,y:O.clientY}},_=()=>{window.removeEventListener("pointermove",P,!1),d.syncActionResult({captureUpdate:pe.IMMEDIATELY}),k=null,I=0,R=0,S=null,M=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener("pointerup",_,!1)};v.current.onPointerMove=P,v.current.onPointerUp=_,window.addEventListener("pointermove",P,!1),window.addEventListener("pointerup",_,!1)}},onPointerEnter:()=>{h.current&&(h.current.style.cursor="ew-resize")},children:t?m.jsx(l7,{icon:t}):e}),m.jsx("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:E=>{if(s){let k=E.target;k instanceof HTMLInputElement&&E.key===J.ENTER&&(x(k.value,i,f),d.focusContainer())}},ref:u,value:g,onChange:E=>{U.current.updatePending=!0,y(E.target.value)},onFocus:E=>{E.target.select(),U.current.originalElements=i,U.current.originalAppState=$f(f)},onBlur:E=>{g?s&&x(E.target.value,U.current.originalElements,U.current.originalAppState):y(r.toString())},disabled:!s})]}):null},dd=VKe,QV=10,WKe=e=>e.type==="image",GKe=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:r,shouldChangeByStepSize:i,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:f})=>{let c=f.getNonDeletedElementsMap(),d=t[0],u=c.get(d.id);if(d&&u){let h=r||WKe(d),g=d.width/d.height;if(a.croppingElementId===d.id){let E=c.get(d.id);if(!E||!ln(E)||!E.crop)return;let k=E.crop,M={...k},S=E.scale[0]===-1,A=E.scale[1]===-1,{width:I,height:R}=Zf(E),P=k.naturalWidth/I,_=k.naturalHeight/R,O=S?k.width+k.x:k.naturalWidth-k.x,V=A?k.height+k.y:k.naturalHeight-k.y,j=xi*P,F=xi*_;if(s!==void 0){if(o==="width"){let B=s*P,X=Lt(B,j,O);M={...M,width:X,x:S?k.x+k.width-X:k.x}}else if(o==="height"){let B=s*_,X=Lt(B,F,V);M={...M,height:X,y:A?k.y+k.height-X:k.y}}Ue(E,{crop:M,width:M.width/(k.naturalWidth/I),height:M.height/(k.naturalHeight/R)});return}let z=o==="width"?l:0,H=o==="height"?l:0,G=Lt(k.width+z,j,O),W=Lt(k.height+H,j,V);M={...k,x:S?k.x+k.width-G:k.x,y:A?k.y+k.height-W:k.y,width:G,height:W},Ue(E,{crop:M,width:M.width/(k.naturalWidth/I),height:M.height/(k.naturalHeight/R)});return}if(s!==void 0){let E=Math.max(o==="width"?s:h?s*g:d.width,da),k=Math.max(o==="height"?s:h?s/g:d.height,da);Ob(E,k,u,d,c,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h});return}let y=o==="width"?e:0,U=o==="height"?e:0,x=Math.max(0,d.width+y);o==="width"&&(i?x=as(x,QV):x=Math.round(x));let v=Math.max(0,d.height+U);o==="height"&&(i?v=as(v,QV):v=Math.round(v)),h&&(o==="width"?v=Math.round(x/g*100)/100:x=Math.round(v*g*100)/100),v=Math.max(da,v),x=Math.max(da,x),Ob(x,v,u,d,c,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h})}},XKe=({property:e,element:t,scene:n,appState:r})=>{let i=Uc(e==="width"?t.width:t.height,2);if(r.croppingElementId&&r.croppingElementId===t.id&&ln(t)&&t.crop){let{width:s,height:o}=Zf(t);if(e==="width"){let a=s/t.crop.naturalWidth;i=Uc(t.crop.width*a,2)}if(e==="height"){let a=o/t.crop.naturalHeight;i=Uc(t.crop.height*a,2)}}return m.jsx(dd,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:GKe,value:i,editable:id(t,e),scene:n,appState:r,property:e})},JV=XKe,KKe=15,YKe=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=i.getNonDeletedElements(),a=t[0];if(a&&!Ge(a)){let l=s.get(a.id);if(!l)return;if(r!==void 0){let g=Vh(r);Ue(l,{angle:g}),QM(l,s,o,i);let y=Ct(l,s);y&&!Tt(l)&&Ue(y,{angle:g});return}let f=Math.round(My(a.angle)*100)/100,c=Math.round(e),d=(f+c)%360;n&&(d=as(d,KKe)),d=d<0?d+360:d;let u=Vh(d);Ue(l,{angle:u}),QM(l,s,o,i);let h=Ct(l,s);h&&!Tt(l)&&Ue(h,{angle:u})}},ZKe=({element:e,scene:t,appState:n,property:r})=>m.jsx(dd,{label:"A",icon:cee,value:Math.round(My(e.angle)%360*100)/100,elements:[e],dragInputCallback:YKe,editable:id(e,"angle"),scene:t,appState:n,property:r}),qKe=ZKe,eW=4,QKe=4,JKe=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=t[0];if(o){let a=s.get(o.id);if(!a||!Ve(a))return;let l;if(r!==void 0)l=Math.max(Math.round(r),eW);else if(o.type==="text"){let f=Math.round(o.fontSize),c=Math.round(e);l=Math.max(f+c,eW),n&&(l=as(l,QKe))}l&&(Ue(a,{fontSize:l}),Ds(a,i.getContainerElement(a),i.getNonDeletedElementsMap()))}},eYe=({element:e,scene:t,appState:n,property:r})=>{let i=Ve(e)?e:Ma(e)?Ct(e,t.getNonDeletedElementsMap()):null;return i?m.jsx(dd,{label:"F",value:Math.round(i.fontSize*10)/10,elements:[i],dragInputCallback:JKe,icon:Nw,appState:n,scene:t,property:r}):null},tYe=eYe,Np=10,nYe=(e,t,n,r)=>{let i=r.x-e,s=r.y-t,o=r.width*n,a=r.height*n,l=e+i*n,f=t+s*n;return{width:o,height:a,x:l,y:f,...rR(r,o,a,!1),...Ve(r)?{fontSize:r.fontSize*n}:{}}},rYe=(e,t,n,r,i,s,o,a)=>{let l=nYe(e,t,r,s);Ue(i,l,!1);let f=Ct(s,a);if(f){let c=f.fontSize*r;uo(i,o,{newSize:{width:l.width,height:l.height}});let d=o.get(f.id);d&&Ve(d)&&(Ue(d,{fontSize:c},!1),Py(i,o,n==="width"?"e":"s",!0))}},tW=(e,t,n,r,i,s,o,a,l,f)=>{s==="width"?t=Math.round(e/r*100)/100:e=Math.round(t*r*100)/100;let c=t/n;for(let d=0;d<a.length;d++){let u=a[d],h=o[d];rYe(i[0],i[1],s,c,h,u,l,f)}},iYe=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:r,shouldChangeByStepSize:i,nextValue:s,scene:o,property:a})=>{let l=o.getNonDeletedElementsMap(),f=zR(t,r);if(s!==void 0){for(let u of f){let h=g9(u,l,n);if(h.length>1){let g=h.map(R=>R.latest),y=h.map(R=>R.original),[U,x,v,E]=mn(y),k=v-U,M=E-x,S=k/M,A=Math.max(da,a==="width"?Math.max(0,s):k),I=Math.max(da,a==="height"?Math.max(0,s):M);tW(A,I,M,S,D(U,x),a,g,y,l,n)}else{let[g]=h,y=g==null?void 0:g.latest,U=g==null?void 0:g.original;if(y&&U&&id(y,a)){let x=a==="width"?Math.max(0,s):y.width;a==="width"&&(i?x=as(x,Np):x=Math.round(x));let v=a==="height"?Math.max(0,s):y.height;a==="height"&&(i?v=as(v,Np):v=Math.round(v)),x=Math.max(da,x),v=Math.max(da,v),Ob(x,v,y,U,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate();return}let c=a==="width"?e:0,d=a==="height"?e:0;for(let u of f){let h=g9(u,l,n);if(h.length>1){let g=h.map(R=>R.latest),y=h.map(R=>R.original),[U,x,v,E]=mn(y),k=v-U,M=E-x,S=k/M,A=Math.max(0,k+c);a==="width"&&(i?A=as(A,Np):A=Math.round(A));let I=Math.max(0,M+d);a==="height"&&(i?I=as(I,Np):I=Math.round(I)),A=Math.max(da,A),I=Math.max(da,I),tW(A,I,M,S,D(U,x),a,g,y,l,n)}else{let[g]=h,y=g==null?void 0:g.latest,U=g==null?void 0:g.original;if(y&&U&&id(y,a)){let x=Math.max(0,U.width+c);a==="width"&&(i?x=as(x,Np):x=Math.round(x));let v=Math.max(0,U.height+d);a==="height"&&(i?v=as(v,Np):v=Math.round(v)),x=Math.max(da,x),v=Math.max(da,v),Ob(x,v,y,U,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate()},sYe=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:s})=>{let o=T.useMemo(()=>r.map(f=>{let c=g9(f,n);if(c.length>1){let[u,h,g,y]=mn(c.map(U=>U.latest));return Math.round((e==="width"?g-u:y-h)*100)/100}let[d]=c;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,r,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return m.jsx(dd,{label:e==="width"?"W":"H",elements:t,dragInputCallback:iYe,value:a,editable:l,appState:s,property:e,scene:i})},nW=sYe,oYe=15,aYe=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,property:i,scene:s})=>{let o=s.getNonDeletedElementsMap(),a=t.map(f=>o.get(f.id)).filter(f=>f&&!Hg(f)&&id(f,i)),l=t.filter(f=>!Hg(f)&&id(f,i));if(r!==void 0){let f=Vh(r);for(let c of a){if(!c)continue;Ue(c,{angle:f},!1);let d=Ct(c,o);d&&!Tt(c)&&Ue(d,{angle:f},!1)}s.triggerUpdate();return}for(let f=0;f<a.length;f++){let c=a[f];if(!c)continue;let d=l[f],u=Math.round(My(d.angle)*100)/100,h=Math.round(e),g=(u+h)%360;n&&(g=as(g,oYe)),g=g<0?g+360:g;let y=Vh(g);Ue(c,{angle:y},!1);let U=Ct(c,o);U&&!Tt(c)&&Ue(U,{angle:y},!1)}s.triggerUpdate()},lYe=({elements:e,scene:t,appState:n,property:r})=>{let i=e.filter(l=>!Hg(l)&&id(l,"angle")),s=i.map(l=>Math.round(My(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=i.some(l=>id(l,"angle"));return m.jsx(dd,{label:"A",icon:cee,value:o,elements:e,dragInputCallback:aYe,editable:a,appState:n,scene:t,property:r})},cYe=lYe,rW=4,fYe=4,dYe=(e,t)=>e.reduce((n,r)=>{if(!r||Hg(r))return n;if(Ve(r))return n.push(r),n;if(Ma(r)){let i=Ct(r,t);if(i)return n.push(i),n}return n},[]),uYe=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id)),a;if(r){a=Math.max(Math.round(r),rW);for(let l of o)Ue(l,{fontSize:a},!1),Ds(l,i.getContainerElement(l),s,!1);i.triggerUpdate()}else{let l=t;for(let f=0;f<o.length;f++){let c=o[f],d=l[f],u=Math.round(d.fontSize),h=Math.round(e),g=Math.max(u+h,rW);n&&(g=as(g,fYe)),Ue(c,{fontSize:g},!1),Ds(c,i.getContainerElement(c),s,!1)}i.triggerUpdate()}},hYe=({elements:e,scene:t,appState:n,property:r,elementsMap:i})=>{let s=dYe(e,i);if(!s.length)return null;let o=s.map(f=>Math.round(f.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return m.jsx(dd,{label:"F",icon:Nw,elements:s,dragInputCallback:uYe,value:a,editable:l,scene:t,property:r,appState:n})},pYe=hYe,iW=10,mYe=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:r,shouldChangeByStepSize:i,nextValue:s,property:o,scene:a,originalAppState:l})=>{let f=a.getNonDeletedElementsMap(),c=a.getNonDeletedElements(),d=n[0],[u,h]=[d.x+d.width/2,d.y+d.height/2],[g,y]=ue(D(d.x,d.y),D(u,h),d.angle);if(l.croppingElementId===d.id){let k=f.get(d.id);if(!k||!ln(k)||!k.crop)return;let M=k.crop,S=M,A=k.scale[0]===-1,I=k.scale[1]===-1,{width:R,height:P}=Zf(k);if(s!==void 0){if(o==="x"){let V=s*(M.naturalWidth/R);A?S={...M,x:Lt(M.naturalWidth-V-M.width,0,M.naturalWidth-M.width)}:S={...M,x:Lt(s*(M.naturalWidth/R),0,M.naturalWidth-M.width)}}o==="y"&&(S={...M,y:Lt(s*(M.naturalHeight/P),0,M.naturalHeight-M.height)}),Ue(k,{crop:S});return}let _=(o==="x"?t:0)*(A?-1:1),O=(o==="y"?t:0)*(I?-1:1);S={...M,x:Lt(M.x+_,0,M.naturalWidth-M.width),y:Lt(M.y+O,0,M.naturalHeight-M.height)},Ue(k,{crop:S});return}if(s!==void 0){Hb(o==="x"?s:g,o==="y"?s:y,d,f,c,a,r);return}let U=o==="x"?e:0,x=o==="y"?e:0,v=o==="x"?Math.round(i?as(d.x+U,iW):g+U):g,E=o==="y"?Math.round(i?as(d.y+x,iW):y+x):y;Hb(v,E,d,f,c,a,r)},gYe=({property:e,element:t,elementsMap:n,scene:r,appState:i})=>{let[s,o]=ue(D(t.x,t.y),D(t.x+t.width/2,t.y+t.height/2),t.angle),a=Uc(e==="x"?s:o,2);if(i.croppingElementId===t.id&&ln(t)&&t.crop){let l=uLe(t);l&&(a=Uc(e==="x"?l.x:l.y,2))}return m.jsx(dd,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:mYe,scene:r,value:a,property:e,appState:i})},sW=gYe,bYe=10,yYe=(e,t,n,r,i,s,o,a)=>{for(let l=0;l<r.length;l++){let f=i[l],[c,d]=[f.x+f.width/2,f.y+f.height/2],[u,h]=ue(D(f.x,f.y),D(c,d),f.angle),g=e==="x"?Math.round(u+t):u,y=e==="y"?Math.round(h+n):h;Hb(g,y,f,s,r,a,o,!1)}},UYe=(e,t,n,r,i,s,o)=>{let[a,l,,]=mn(n),f=e-a,c=t-l;for(let d=0;d<n.length;d++){let u=n[d],h=r.get(u.id);if(h&&(!Ve(h)||!h.containerId)){let[g,y]=[h.x+h.width/2,h.y+h.height/2],[U,x]=ue(D(h.x,h.y),D(g,y),h.angle);Hb(U+f,x+c,u,r,i,o,s,!1)}}},xYe=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:r,nextValue:i,property:s,scene:o,originalAppState:a})=>{var d,u;let l=o.getNonDeletedElementsMap(),f=o.getNonDeletedElements();if(i!==void 0){for(let h of zR(t,a)){let g=g9(h,l,n);if(g.length>1){let[y,U,,]=mn(g.map(x=>x.latest));UYe(s==="x"?i:y,s==="y"?i:U,g.map(x=>x.original),l,f,n,o)}else{let y=(d=g[0])==null?void 0:d.original,U=(u=g[0])==null?void 0:u.latest;if(y&&U&&id(U,s)){let[x,v]=[y.x+y.width/2,y.y+y.height/2],[E,k]=ue(D(y.x,y.y),D(x,v),y.angle);Hb(s==="x"?i:E,s==="y"?i:k,y,l,f,o,n,!1)}}}o.triggerUpdate();return}let c=r?as(e,bYe):e;yYe(s,s==="x"?c:0,s==="y"?c:0,t,t,l,n,o),o.triggerUpdate()},wYe=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:s})=>{let o=T.useMemo(()=>r.map(l=>{let f=Object.keys(l).map(y=>n.get(y)).filter(y=>y!==void 0);if(f.length>1){let[y,U]=mn(f);return Math.round((e==="x"?y:U)*100)/100}let[c]=f,[d,u]=[c.x+c.width/2,c.y+c.height/2],[h,g]=ue(D(c.x,c.y),D(d,u),c.angle);return Math.round((e==="x"?h:g)*100)/100}),[r,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return m.jsx(dd,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:xYe,value:a,property:e,scene:i,appState:s})},oW=wYe,aW=5,vYe=({property:e,scene:t,appState:n,setAppState:r})=>m.jsx(dd,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:i,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{r(l=>{let f;return i?f=i:s&&(f=o?as(l.gridStep+aW*Math.sign(s),aW):l.gridStep+s),f?(f=ite(f),a(f),{gridStep:f}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),EYe=vYe,kYe=50,$R=e=>{let t=$y(),n=e.app.scene.getSceneNonce()||1,r=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),i=Pb(e.app);return m.jsx(SYe,{...e,appState:t,sceneNonce:n,selectedElements:r,gridModeEnabled:i})},zn=({children:e,columns:t=1,heading:n,style:r,...i})=>m.jsx("div",{className:Ke("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...r},...i,children:e});zn.displayName="StatsRow";var b9=({children:e,order:t,style:n,...r})=>m.jsx("div",{className:"exc-stats__rows",style:{order:t,...n},...r,children:e});b9.displayName="StatsRows";$R.StatsRow=zn;$R.StatsRows=b9;var SYe=T.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:r,appState:i,sceneNonce:s,gridModeEnabled:o})=>{let a=e.scene,l=a.getNonDeletedElements(),f=a.getNonDeletedElementsMap(),c=mi(),d=r.length===1?r[0]:null,u=r.length>1?r:null,h=i.croppingElementId&&ln(d),g=h?Zf(d):null,[y,U]=T.useState({width:0,height:0}),x=T.useMemo(()=>Sy(k=>{let M=mn(k);U({width:Math.round(M[2])-Math.round(M[0]),height:Math.round(M[3])-Math.round(M[1])})},kYe),[]);T.useEffect(()=>{x(l)},[s,l,x]),T.useEffect(()=>()=>x.cancel(),[x]);let v=T.useMemo(()=>zR(r,i),[r,i]),E=T.useMemo(()=>rne(r),[r]);return m.jsx("div",{className:"exc-stats",children:m.jsxs(Ul,{padding:3,children:[m.jsxs("div",{className:"title",children:[m.jsx("h2",{children:$("stats.title")}),m.jsx("div",{className:"close",onClick:t,children:c6})]}),m.jsxs(FM,{label:m.jsx("h3",{children:$("stats.generalStats")}),open:!!(i.stats.panels&qp.generalStats),openTrigger:()=>c(k=>({stats:{open:!0,panels:k.stats.panels^qp.generalStats}})),children:[m.jsxs(b9,{children:[m.jsx(zn,{heading:!0,children:$("stats.scene")}),m.jsxs(zn,{columns:2,children:[m.jsx("div",{children:$("stats.shapes")}),m.jsx("div",{children:l.length})]}),m.jsxs(zn,{columns:2,children:[m.jsx("div",{children:$("stats.width")}),m.jsx("div",{children:y.width})]}),m.jsxs(zn,{columns:2,children:[m.jsx("div",{children:$("stats.height")}),m.jsx("div",{children:y.height})]}),o&&m.jsxs(m.Fragment,{children:[m.jsx(zn,{heading:!0,children:"Canvas"}),m.jsx(zn,{children:m.jsx(EYe,{property:"gridStep",scene:a,appState:i,setAppState:c})})]})]}),n==null?void 0:n(l,i)]}),!E&&r.length>0&&m.jsx("div",{id:"elementStats",style:{marginTop:12},children:m.jsx(FM,{label:m.jsx("h3",{children:$("stats.elementProperties")}),open:!!(i.stats.panels&qp.elementProperties),openTrigger:()=>c(k=>({stats:{open:!0,panels:k.stats.panels^qp.elementProperties}})),children:m.jsxs(b9,{children:[d&&m.jsxs(m.Fragment,{children:[h&&m.jsx(zn,{heading:!0,children:$("labels.unCroppedDimension")}),i.croppingElementId&&ln(d)&&g&&m.jsxs(zn,{columns:2,children:[m.jsx("div",{children:$("stats.width")}),m.jsx("div",{children:Uc(g.width,2)})]}),i.croppingElementId&&ln(d)&&g&&m.jsxs(zn,{columns:2,children:[m.jsx("div",{children:$("stats.height")}),m.jsx("div",{children:Uc(g.height,2)})]}),m.jsx(zn,{heading:!0,"data-testid":"stats-element-type",children:i.croppingElementId?$("labels.imageCropping"):$(`element.${d.type}`)}),m.jsx(zn,{children:m.jsx(sW,{element:d,property:"x",elementsMap:f,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(sW,{element:d,property:"y",elementsMap:f,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(JV,{property:"width",element:d,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(JV,{property:"height",element:d,scene:a,appState:i})}),!Ge(d)&&m.jsx(zn,{children:m.jsx(qKe,{property:"angle",element:d,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(tYe,{property:"fontSize",element:d,scene:a,appState:i})})]}),u&&m.jsxs(m.Fragment,{children:[cte(u)&&m.jsx(zn,{heading:!0,children:$("element.group")}),m.jsxs(zn,{columns:2,style:{margin:"0.3125rem 0"},children:[m.jsx("div",{children:$("stats.shapes")}),m.jsx("div",{children:r.length})]}),m.jsx(zn,{children:m.jsx(oW,{property:"x",elements:u,elementsMap:f,atomicUnits:v,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(oW,{property:"y",elements:u,elementsMap:f,atomicUnits:v,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(nW,{property:"width",elements:u,elementsMap:f,atomicUnits:v,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(nW,{property:"height",elements:u,elementsMap:f,atomicUnits:v,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(cYe,{property:"angle",elements:u,scene:a,appState:i})}),m.jsx(zn,{children:m.jsx(pYe,{property:"fontSize",elements:u,scene:a,appState:i,elementsMap:f})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),CYe=({sourceElementId:e,onClose:t,elementsMap:n,appState:r,generateLinkForSelection:i=Lte})=>{var d;let s=((d=n.get(e))==null?void 0:d.link)??null,[o,a]=T.useState(s),[l,f]=T.useState(!1);T.useEffect(()=>{let u=Mt(n,r),h=s;if(u.length>0&&i){let g=Ote(u,r);g&&(h=Lo(i(g.id,g.type)))}a(h)},[n,r,r.selectedElementIds,s,i]);let c=T.useCallback(()=>{var u;if(o&&o!==((u=n.get(e))==null?void 0:u.link)){let h=n.get(e);h&&Ue(h,{link:o})}if(!o&&l&&e){let h=n.get(e);h&&Ue(h,{link:null})}t==null||t()},[e,o,n,l,t]);return T.useEffect(()=>{let u=h=>{var g,y;((g=r.openDialog)==null?void 0:g.name)==="elementLinkSelector"&&h.key===J.ENTER&&c(),((y=r.openDialog)==null?void 0:y.name)==="elementLinkSelector"&&h.key===J.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[r,t,c]),m.jsxs("div",{className:"ElementLinkDialog",children:[m.jsxs("div",{className:"ElementLinkDialog__header",children:[m.jsx("h2",{children:$("elementLink.title")}),m.jsx("p",{children:$("elementLink.desc")})]}),m.jsxs("div",{className:"ElementLinkDialog__input",children:[m.jsx(OR,{value:o??"",onChange:u=>{l||f(!0),a(u)},onKeyDown:u=>{u.key===J.ENTER&&c()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),s&&o&&m.jsx(Yt,{type:"button",title:$("buttons.remove"),"aria-label":$("buttons.remove"),label:$("buttons.remove"),onClick:()=>{a(null),f(!0)},className:"ElementLinkDialog__remove",icon:U1})]}),m.jsxs("div",{className:"ElementLinkDialog__actions",children:[m.jsx(qg,{label:$("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),m.jsx(qg,{label:$("buttons.confirm"),onClick:c,actionType:"primary"})]})]})},AYe=CYe,MYe=({UIOptions:e})=>m.jsxs(Ks,{__fallback:!0,children:[m.jsx(Ks.DefaultItems.LoadScene,{}),m.jsx(Ks.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&m.jsx(Ks.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&m.jsx(Ks.DefaultItems.SaveAsImage,{}),m.jsx(Ks.DefaultItems.SearchMenu,{}),m.jsx(Ks.DefaultItems.Help,{}),m.jsx(Ks.DefaultItems.ClearCanvas,{}),m.jsx(Ks.Separator,{}),m.jsx(Ks.Group,{title:"Excalidraw links",children:m.jsx(Ks.DefaultItems.Socials,{})}),m.jsx(Ks.Separator,{}),m.jsx(Ks.DefaultItems.ToggleTheme,{}),m.jsx(Ks.DefaultItems.ChangeCanvasBackground,{})]}),TYe=()=>m.jsxs(LS,{__fallback:!0,children:[m.jsx(LS.Actions.SaveToDisk,{}),m.jsx(LS.Actions.ExportToImage,{})]}),IYe=({actionManager:e,appState:t,files:n,setAppState:r,elements:i,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:f,renderTopRightUI:c,renderCustomStats:d,UIOptions:u,onExportImage:h,renderWelcomeScreen:g,children:y,app:U,isCollaborating:x,generateLinkForSelection:v})=>{var z,H,G;let E=pi(),k=gXe(),M=k.tunnelsJotai.Provider,[S,A]=Er(a7),I=()=>u.canvasActions.export?m.jsx(uKe,{elements:i,appState:t,files:n,actionManager:e,exportOpts:u.canvasActions.export,canvas:s,setAppState:r}):null,R=()=>{var W;return!u.canvasActions.saveAsImage||((W=t.openDialog)==null?void 0:W.name)!=="imageExport"?null:m.jsx(zXe,{elements:i,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>r({openDialog:null}),name:U.getName()})},P=()=>m.jsxs("div",{style:{position:"relative"},children:[m.jsx(k.MainMenuTunnel.Out,{}),g&&m.jsx(k.WelcomeScreenMenuHintTunnel.Out,{})]}),_=()=>m.jsx($b,{heading:"selectedShapeActions",className:Ke("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:m.jsx(Ul,{className:_g.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:m.jsx(Tse,{appState:t,elementsMap:U.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:U})})}),O=()=>{var X,q,Y,oe,ge;let W=sR(t,i),B=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((X=t.openDialog)==null?void 0:X.name)!=="elementLinkSelector";return m.jsx(jse,{side:"top",children:m.jsxs("div",{className:"App-menu App-menu_top",children:[m.jsxs(ya.Col,{gap:6,className:Ke("App-menu_top__left"),children:[P(),W&&_()]}),!t.viewModeEnabled&&((q=t.openDialog)==null?void 0:q.name)!=="elementLinkSelector"&&m.jsx($b,{heading:"shapes",className:"shapes-section",children:he=>m.jsxs("div",{style:{position:"relative"},children:[g&&m.jsx(k.WelcomeScreenToolbarHintTunnel.Out,{}),m.jsx(ya.Col,{gap:4,align:"start",children:m.jsxs(ya.Row,{gap:1,className:Ke("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[m.jsxs(Ul,{padding:1,className:Ke("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[m.jsx(zse,{appState:t,isMobile:E.editor.isMobile,device:E,app:U}),he,m.jsxs(ya.Row,{gap:1,children:[m.jsx(Hse,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:$("toolBar.penMode"),penDetected:t.penDetected}),m.jsx($se,{checked:t.activeTool.locked,onChange:o,title:$("toolBar.lock")}),m.jsx("div",{className:"App-toolbar__divider"}),m.jsx(Vse,{checked:Dg(t),onChange:()=>a(),title:$("toolBar.hand"),isMobile:!0}),m.jsx(Ise,{appState:t,activeTool:t.activeTool,UIOptions:u,app:U})]})]}),x&&m.jsx(Ul,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:m.jsx(RKe,{title:$("toolBar.laser"),checked:t.activeTool.type===ci.laser,onChange:()=>U.setActiveTool({type:ci.laser}),isMobile:!0})})]})})]})}),m.jsxs("div",{className:Ke("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&m.jsx(Wse,{collaborators:t.collaborators,userToFollow:((Y=t.userToFollow)==null?void 0:Y.socketId)||null}),c==null?void 0:c(E.editor.isMobile,t),!t.viewModeEnabled&&((oe=t.openDialog)==null?void 0:oe.name)!=="elementLinkSelector"&&(!j||((ge=t.openSidebar)==null?void 0:ge.name)!==gl.name)&&m.jsx(k.DefaultSidebarTriggerTunnel.Out,{}),B&&m.jsx($R,{app:U,onClose:()=>{e.executeAction(VM)},renderCustomStats:d})]})]})})},V=()=>m.jsx(ZV,{__fallback:!0,onDock:W=>{jn("sidebar",`toggleDock (${W?"dock":"undock"})`,`(${E.editor.isMobile?"mobile":"desktop"})`)}}),j=Die(jR),F=m.jsxs(m.Fragment,{children:[y,m.jsx(MYe,{UIOptions:u}),m.jsx(ZV.Trigger,{__fallback:!0,icon:fN,title:S2($("toolBar.library")),onToggle:W=>{W&&jn("sidebar",`${gl.name} (open)`,`button (${E.editor.isMobile?"mobile":"desktop"})`)},tab:gl.defaultTab,children:$("toolBar.library")}),m.jsx(TYe,{}),((z=t.openDialog)==null?void 0:z.name)==="ttd"&&m.jsx(zKe,{__fallback:!0}),t.isLoading&&m.jsx(jie,{delay:250}),t.errorMessage&&m.jsx(DXe,{onClose:()=>r({errorMessage:null}),children:t.errorMessage}),S&&!E.editor.isMobile&&m.jsx(cWe,{colorPickerType:S.colorPickerType,onCancel:()=>{A(null)},onChange:(W,B,X,{altKey:q})=>{var Y;if(!(W!=="elementBackground"&&W!=="elementStroke"))if(X.length){for(let oe of X)Ue(oe,{[q&&S.swapPreviewOnAlt?W==="elementBackground"?"strokeColor":"backgroundColor":W==="elementBackground"?"backgroundColor":"strokeColor"]:B},!1),lr.delete(oe);(Y=ed.getScene(X[0]))==null||Y.triggerUpdate()}else r(W==="elementBackground"?{currentItemBackgroundColor:B}:{currentItemStrokeColor:B})},onSelect:(W,B)=>{var X;A(q=>q!=null&&q.keepOpenOnAlt&&B.altKey?q:null),(X=S==null?void 0:S.onSelect)==null||X.call(S,W,B)}}),((H=t.openDialog)==null?void 0:H.name)==="help"&&m.jsx(oKe,{onClose:()=>{r({openDialog:null})}}),m.jsx(wXe,{}),((G=t.openDialog)==null?void 0:G.name)==="elementLinkSelector"&&m.jsx(AYe,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{r({openDialog:null})},elementsMap:U.scene.getNonDeletedElementsMap(),appState:t,generateLinkForSelection:v}),m.jsx(k.OverwriteConfirmDialogTunnel.Out,{}),R(),I(),t.pasteDialog.shown&&m.jsx(eKe,{setAppState:r,appState:t,onClose:()=>r({pasteDialog:{shown:!1,data:null}})}),E.editor.isMobile&&m.jsx(JXe,{app:U,appState:t,elements:i,actionManager:e,renderJSONExportDialog:I,renderImageExportDialog:R,setAppState:r,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:c,renderCustomStats:d,renderSidebars:V,device:E,renderWelcomeScreen:g,UIOptions:u}),!E.editor.isMobile&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"layer-ui__wrapper",style:t.openSidebar&&j&&E.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[g&&m.jsx(k.WelcomeScreenCenterTunnel.Out,{}),O(),m.jsx(pKe,{appState:t,actionManager:e,showExitZenModeBtn:f,renderWelcomeScreen:g}),t.scrolledOutside&&m.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(W=>({...Rb(i,W)}))},children:$("buttons.scrollBackToContent")})]}),V()]})]});return m.jsx(Kie.Provider,{value:t,children:m.jsx(M,{children:m.jsx(Cse.Provider,{value:k,children:F})})})},lW=e=>{let{suggestedBindings:t,startBoundElement:n,cursorButton:r,scrollX:i,scrollY:s,...o}=e;return o},NYe=(e,t)=>{if(e.children!==t.children)return!1;let{canvas:n,appState:r,...i}=e,{canvas:s,appState:o,...a}=t;return Gi(lW(r),lW(o),{selectedElementIds:Gi,selectedGroupIds:Gi})&&Gi(i,a)},RYe=Ie.memo(IYe,NYe),_Ye=5e3,PYe=({message:e,onClose:t,closable:n=!1,duration:r=_Ye,style:i})=>{let s=T.useRef(0),o=r!==1/0,a=T.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),r))},[t,r,o]);return T.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,r,o]),m.jsxs("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:i,children:[m.jsx("p",{className:"Toast__message",children:e}),n&&m.jsx(Yt,{icon:c6,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},cW=je({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:mN,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:pe.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.R}),Aoe=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length===1&&ht(n[0])},DYe=je({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;if(ht(i)){let s=Rc(Pn(e),i.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:pe.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:pe.EVENTUALLY}},predicate:(e,t,n,r)=>Aoe(t,r)}),LYe=je({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;return ht(i)?{elements:ene(e,i),appState:{...t,selectedElementIds:{[i.id]:!0}},captureUpdate:pe.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:pe.EVENTUALLY}},predicate:(e,t,n,r)=>Aoe(t,r)});je({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:pe.EVENTUALLY}),checked:e=>e.frameRendering.enabled});je({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:dee,viewMode:!1,perform:(e,t,n,r)=>{let i=jr(t,{type:"frame"});return Xl(r.interactiveCanvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:jr(t,{type:"frame"})},captureUpdate:pe.EVENTUALLY}},keyTest:e=>!e[J.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===J.F});var OYe=je({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=Mt(e,t);return i.length>0&&!i.some(s=>ht(s))},perform:(e,t,n,r)=>{let i=Mt(e,t),[s,o,a,l]=mn(i,r.scene.getNonDeletedElementsMap()),f=16,c=CN({x:s-f,y:o-f,width:a-s+f*2,height:l-o+f*2});if(t.editingGroupId){let d=Vn(i,t.editingGroupId);for(let u of d){let h=u.groupIds.indexOf(t.editingGroupId);Ue(u,{groupIds:u.groupIds.slice(0,h)},!1)}}return{elements:T2([...r.scene.getElementsIncludingDeleted(),c],i,c,t),appState:{selectedElementIds:{[c.id]:!0}},captureUpdate:pe.IMMEDIATELY}}}),jYe=()=>m.jsxs("div",{"data-testid":"brave-measure-text-error",children:[m.jsx("p",{children:m.jsx(bc,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>m.jsx("span",{style:{fontWeight:600},children:e})})}),m.jsx("p",{children:m.jsx(bc,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>m.jsx("span",{style:{fontWeight:600},children:e})})}),m.jsx("p",{children:m.jsx(bc,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>m.jsx("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),m.jsx("p",{children:m.jsx(bc,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>m.jsxs("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),BYe=jYe,s3={width:100,height:0},Du=100,FYe=(e,t,n)=>{let r=Bo({x:0,y:0,textAlign:Sb.CENTER,verticalAlign:Do.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:r.id})}),Ds(r,e,n),[e,r]},fW=(e,t,n,r,i)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){let c=(t==null?void 0:t.width)??Du,d=(t==null?void 0:t.height)??Du,u;t.id&&(u=r.getElement(t.id),u||console.error(`No element for start binding with id ${t.id} found`));let h=t.x||e.x-c,g=t.y||e.y-d/2,y=u?u.type:t.type;if(y){if(y==="text"){let U="";u&&u.type==="text"?U=u.text:t.type==="text"&&(U=t.text),U||console.error(`No text found for start binding text element for ${e.id}`),s=Bo({x:h,y:g,type:"text",...u,...t,text:U}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(y){case"rectangle":case"ellipse":case"diamond":{s=Ic({x:h,y:g,width:c,height:d,...u,...t,type:y});break}default:b1(e,`Unhandled element start type "${t.type}"`,!0)}Mc(e,s,"start",i)}}if(n){let c=(n==null?void 0:n.height)??Du,d=(n==null?void 0:n.width)??Du,u;n.id&&(u=r.getElement(n.id),u||console.error(`No element for end binding with id ${n.id} found`));let h=n.x||e.x+e.width,g=n.y||e.y-c/2,y=u?u.type:n.type;if(y){if(y==="text"){let U="";u&&u.type==="text"?U=u.text:n.type==="text"&&(U=n.text),U||console.error(`No text found for end binding text element for ${e.id}`),o=Bo({x:h,y:g,type:"text",...u,...n,text:U}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(y){case"rectangle":case"ellipse":case"diamond":{o=Ic({x:h,y:g,width:d,height:c,...u,...n,type:y});break}default:b1(e,`Unhandled element end type "${y}"`,!0)}Mc(e,o,"end",i)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};let a=e.points.length-1,l=.5,f=$f(e.points);return e.points[a][0]>e.points[a-1][0]&&(f[0][0]=l,f[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(f[0][0]=-l,f[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(f[0][1]=l,f[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(f[0][1]=-l,f[a][1]+=l),Object.assign(e,{points:f}),{linearElement:e,startBoundElement:s,endBoundElement:o}},zYe=class{constructor(){Q(this,"excalidrawElements",new Map),Q(this,"add",e=>{e&&this.excalidrawElements.set(e.id,e)}),Q(this,"getElements",()=>Jf(Array.from(this.excalidrawElements.values()))),Q(this,"getElementsMap",()=>Ca(mt(this.getElements()))),Q(this,"getElement",e=>this.excalidrawElements.get(e))}},JM=(e,t)=>{var a,l,f;if(!e)return[];let n=$f(e),r=new zYe,i=new Map,s=new Map;for(let c of n){let d,u=c.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(c,{id:Ta()}),c.type){case"rectangle":case"ellipse":case"diamond":{let h=(a=c==null?void 0:c.label)!=null&&a.text&&c.width===void 0?0:(c==null?void 0:c.width)||Du,g=(l=c==null?void 0:c.label)!=null&&l.text&&c.height===void 0?0:(c==null?void 0:c.height)||Du;d=Ic({...c,width:h,height:g});break}case"line":{let h=c.width||s3.width,g=c.height||s3.height;d=Kh({width:h,height:g,points:[D(0,0),D(h,g)],...c});break}case"arrow":{let h=c.width||s3.width,g=c.height||s3.height;d=AN({width:h,height:g,endArrowhead:"arrow",points:[D(0,0),D(h,g)],...c,type:"arrow"}),Object.assign(d,$g(d.points));break}case"text":{let h=(c==null?void 0:c.fontFamily)||d0,g=(c==null?void 0:c.fontSize)||ld,y=(c==null?void 0:c.lineHeight)||w1(h),U=c.text??"",x=Bg(U),v=hs(x,kn({fontFamily:h,fontSize:g}),y);d=Bo({width:v.width,height:v.height,fontFamily:h,fontSize:g,...c});break}case"image":{d=xte({width:(c==null?void 0:c.width)||Du,height:(c==null?void 0:c.height)||Du,...c});break}case"frame":{d=CN({x:0,y:0,...c});break}case"magicframe":{d=uM({x:0,y:0,...c});break}case"freedraw":case"iframe":case"embeddable":{d=c;break}default:d=c,b1(c,`Unhandled element type "${c.type}"`,!0)}r.getElement(d.id)?console.error(`Duplicate id found for ${d.id}`):(r.add(d),i.set(d.id,c),u&&s.set(u,d.id))}let o=r.getElementsMap();for(let[c,d]of i){let u=r.getElement(c);switch(d.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((f=d.label)!=null&&f.text){let[h,g]=FYe(u,d==null?void 0:d.label,o);if(r.add(h),r.add(g),Tt(h)){let y=d.type==="arrow"?d==null?void 0:d.start:void 0,U=d.type==="arrow"?d==null?void 0:d.end:void 0;if(y&&y.id){let k=s.get(y.id);k&&Object.assign(y,{id:k})}if(U&&U.id){let k=s.get(U.id);k&&Object.assign(U,{id:k})}let{linearElement:x,startBoundElement:v,endBoundElement:E}=fW(h,y,U,r,o);h=x,r.add(x),r.add(v),r.add(E)}}else switch(d.type){case"arrow":{let{start:h,end:g}=d;if(h&&h.id){let v=s.get(h.id);Object.assign(h,{id:v})}if(g&&g.id){let v=s.get(g.id);Object.assign(g,{id:v})}let{linearElement:y,startBoundElement:U,endBoundElement:x}=fW(u,h,g,r,o);r.add(y),r.add(U),r.add(x);break}}break}}}for(let[c,d]of i){if(d.type!=="frame"&&d.type!=="magicframe")continue;let u=r.getElement(c);if(!u)throw new Error(`Excalidraw element with id ${c} doesn't exist`);let h=[];d.children.forEach(A=>{var P;let I=s.get(A);if(!I)throw new Error(`Element with ${A} wasn't mapped correctly`);let R=r.getElement(I);if(!R)throw new Error(`Frame element with id ${I} doesn't exist`);Object.assign(R,{frameId:u.id}),(P=R==null?void 0:R.boundElements)==null||P.forEach(_=>{let O=r.getElement(_.id);if(!O)throw new Error(`Bound element with id ${_.id} doesn't exist`);Object.assign(O,{frameId:u.id}),h.push(O)}),h.push(R)});let[g,y,U,x]=mn(h),v=10;g=g-v,y=y-v,U=U+v,x=x+v;let E=(u==null?void 0:u.x)||g,k=(u==null?void 0:u.y)||y,M=(u==null?void 0:u.width)||U-g,S=(u==null?void 0:u.height)||x-y;Object.assign(u,{x:E,y:k,width:M,height:S}),HJ()&&d.children.length&&(u!=null&&u.x||u!=null&&u.y||u!=null&&u.width||u!=null&&u.height)&&console.info("User provided frame attributes are being considered, if you find this inaccurate, please remove any of the attributes - x, y, width and height so frame coordinates and dimensions are calculated automatically")}return r.getElements()},gr=e=>t=>{fi.unstable_batchedUpdates(e,t)},jS=e=>Cw(t=>{fi.unstable_batchedUpdates(e,t)}),HR=(()=>{let e;try{let n=T.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),$Ye="#ff6b6b",HYe="#ff0000",dW=1,uW=2,VYe=(e,t)=>{if(!t.snapLines.length)return;let n=t.theme===Ft.LIGHT||t.zenModeEnabled?$Ye:HYe,r=(t.zenModeEnabled?dW*1.5:dW)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(let i of t.snapLines)i.type==="pointer"?(e.lineWidth=r,e.strokeStyle=n,GYe(i,e,t)):i.type==="gap"?(e.lineWidth=r,e.strokeStyle=n,XYe(i.points[0],i.points[1],i.direction,t,e)):i.type==="points"&&(e.lineWidth=r,e.strokeStyle=n,WYe(i,e,t));e.restore()},WYe=(e,t,n)=>{if(!n.zenModeEnabled){let r=e.points[0],i=e.points[e.points.length-1];ta(r,i,t)}for(let r of e.points)Moe(r,n,t)},GYe=(e,t,n)=>{Moe(e.points[0],n,t),n.zenModeEnabled||ta(e.points[0],e.points[1],t)},Moe=([e,t],n,r)=>{r.save();let i=(n.zenModeEnabled?uW*1.5:uW)/n.zoom.value;r.beginPath(),r.moveTo(e-i,t-i),r.lineTo(e+i,t+i),r.moveTo(e+i,t-i),r.lineTo(e-i,t+i),r.stroke(),r.restore()},ta=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},XYe=(e,t,n,r,i)=>{let s=8/r.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){let l=[(e[0]+t[0])/2,e[1]];r.zenModeEnabled||ta(D(e[0],e[1]-s),D(e[0],e[1]+s),i),ta(D(l[0]-a,l[1]-o),D(l[0]-a,l[1]+o),i),ta(D(l[0]+a,l[1]-o),D(l[0]+a,l[1]+o),i),r.zenModeEnabled||(ta(D(t[0],t[1]-s),D(t[0],t[1]+s),i),ta(e,t,i))}else{let l=[e[0],(e[1]+t[1])/2];r.zenModeEnabled||ta(D(e[0]-s,e[1]),D(e[0]+s,e[1]),i),ta(D(l[0]-o,l[1]-a),D(l[0]+o,l[1]-a),i),ta(D(l[0]-o,l[1]+a),D(l[0]+o,l[1]+a),i),r.zenModeEnabled||(ta(D(t[0]-s,t[1]),D(t[0]+s,t[1]),i),ta(e,t,i))}},KYe=(e,t)=>{us(t.selectedLinearElement,"selectedLinearElement is null");let{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;us(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),Toe(n,e,t),e.restore()},YYe=(e,t,n)=>{var a,l;let{elementId:r,hoverPointIndex:i}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(i))return;let s=We.getElement(r,n);if(!s)return;let o=We.getPointAtIndexGlobalCoordinates(s,i,n);e.save(),e.translate(t.scrollX,t.scrollY),Toe(o,e,t),e.restore()},Toe=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",Vw(t,e[0],e[1],We.POINT_HANDLE_SIZE/n.zoom.value,!1)},Fy=(e,t,n,r,i,s,o,a,l=!1,f=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,r,i),f&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,r,i,f),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,r,i),e.restore()},ZYe=(e,t,n,r,i,s)=>{e.save(),e.translate(r,i),e.rotate(s),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()},BS=(e,t,n,r,i,s=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",i?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),Vw(e,n[0],n[1],r/t.zoom.value,!s)},qYe=(e,t,n,r,i,s)=>{e.beginPath(),e.ellipse(r,i,t/2,n/2,s,0,Math.PI*2),e.stroke()},QYe=(e,t,n,r)=>{let[i,s,o,a]=wt(t,n),l=o-i,f=a-s;e.strokeStyle="rgba(0,0,0,.05)";let c=r.value<1?r.value:1;e.lineWidth=EN/c;let d=e.lineWidth/2+kN,u=bl(Math.min(t.width,t.height),t);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":Fy(e,i-d,s-d,l+d*2,f+d*2,i+l/2,s+f/2,t.angle,void 0,u);break;case"diamond":let h=Math.hypot(l,f),g=d*h/f,y=d*h/l;ZYe(e,l+g*2,f+y*2,i+l/2,s+f/2,t.angle);break;case"ellipse":qYe(e,l+d*2,f+d*2,i+l/2,s+f/2,t.angle);break}},JYe=(e,t,n,r)=>{let[i,s,o]=t,a=_y(o,o.width,o.height,r);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(l=>{let[f,c]=We.getPointAtIndexGlobalCoordinates(i,l,n);Vw(e,f,c,a)})},Ioe=(e,t,n)=>{let{angle:r,x1:i,y1:s,x2:o,y2:a,selectionColors:l,cx:f,cy:c,dashed:d,activeEmbeddable:u}=n,h=o-i,g=a-s,y=(n.padding??m1*2)/t.zoom.value,U=8/t.zoom.value,x=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(u?4:1)/t.zoom.value;let v=l.length;for(let E=0;E<v;++E)e.strokeStyle=l[E],d&&e.setLineDash([U,x+(U+x)*(v-1)]),e.lineDashOffset=(U+x)*E,Fy(e,i-y,s-y,h+y*2,g+y*2,f,c,r);e.restore()},eZe=(e,t,n,r)=>{let i=Array.isArray(n)?JYe:QYe;e.save(),e.translate(t.scrollX,t.scrollY),i(e,n,r,t.zoom),e.restore()},tZe=(e,t,n,r)=>{let[i,s,o,a]=wt(n,r),l=o-i,f=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=or.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Fy(e,i,s,l,f,i+l/2,s+f/2,n.angle,!1,or.radius/t.zoom.value),e.restore()},nZe=(e,t,n)=>{let r=n.filter(a=>a.groupIds.length===0),i=n.filter(a=>a.groupIds.length>0),s=a=>{let[l,f,c,d]=mn(a);return{angle:0,x1:l,x2:c,y1:f,y2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(c-l)/2,cy:f+(d-f)/2,activeEmbeddable:!1}},o=a=>{let l=Vn(n,a);return s(l)};Object.entries(lte(i,t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>o(a)).concat(r.map(a=>s([a]))).forEach(a=>Ioe(e,t,a))},FS=(e,t,n,r)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;let i=We.getPointsGlobalCoordinates(n,r),{POINT_HANDLE_SIZE:s}=We,o=t.editingLinearElement?s:s/2;if(i.forEach((l,f)=>{var d,u;if(Ge(n)&&f!==0&&f!==i.length-1)return;let c=!!((u=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&u.includes(f));BS(e,t,l,o,c)}),Ge(n)){let l=((a=n.fixedSegments)==null?void 0:a.map(f=>f.index))||[];i.slice(0,-1).forEach((f,c)=>{We.isSegmentTooShort(n,i[c+1],i[c],c,t.zoom)||BS(e,t,D((f[0]+i[c+1][0])/2,(f[1]+i[c+1][1])/2),s/2,!1,!l.includes(c+1))})}else We.getEditorMidPoints(n,r,t).filter((l,f,c)=>l!==null&&!(Ge(n)&&(f===0||f===c.length-1))).forEach(l=>{(t.editingLinearElement||i.length===2)&&BS(e,t,l,s/2,!1,!0)});e.restore()},hW=(e,t,n,r,i)=>{Object.keys(r).forEach(s=>{let o=r[s];if(o!==void 0){let[a,l,f,c]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?Vw(e,a+f/2,l+c/2,f/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,f,c,2/n.zoom.value),e.fill(),e.stroke()):Fy(e,a,l,f,c,a+f/2,l+c/2,i,!0),e.restore()}})},rZe=(e,t,n,r,i)=>{let[s,o,,,a,l]=wt(r,i),f=3,c=20,d=f/n.zoom.value,u=d/2,h=a-s+d,g=l-o+d,y=Math.min(c/n.zoom.value,h),U=Math.min(c/n.zoom.value,g);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-g],[0,u],[y,u],[u,0],[u,U]],[[h-u,-g],[u,u],[-y+u,u],[0,0],[0,U]],[[-h,g],[0,-u],[y,-u],[u,0],[u,-U]],[[h-u,g],[u,-u],[-y+u,-u],[0,0],[0,-U]]].forEach(x=>{let[[v,E],[k,M],[S,A],[I,R],[P,_]]=x;e.save(),e.translate(a,l),e.rotate(r.angle),e.beginPath(),e.moveTo(v+k,E+M),e.lineTo(v+S,E+A),e.stroke(),e.beginPath(),e.moveTo(v+I,E+R),e.lineTo(v+P,E+_),e.stroke(),e.restore()}),e.restore()},iZe=(e,t,n,r)=>{t.save();let i=m1*2/n.zoom.value,s=e.width+i*2,o=e.height+i*2,a=e.x+s/2,l=e.y+o/2,f=-(s/2+i),c=-(o/2+i);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(f,c,s,o),t.restore()},Noe=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:r,allElementsMap:i,scale:s,appState:o,renderConfig:a,device:l})=>{var y,U,x;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};let[f,c]=RN(e,s),d=_N({canvas:e,scale:s,normalizedWidth:f,normalizedHeight:c});d.save(),d.scale(o.zoom.value,o.zoom.value);let u;if(n.forEach(v=>{var E;((E=o.editingLinearElement)==null?void 0:E.elementId)===v.id&&v&&(u=v)}),u&&FS(d,o,u,t),o.selectionElement&&!o.isCropping)try{bLe(o.selectionElement,d,o,a.selectionColor)}catch(v){console.error(v)}if(o.editingTextElement&&Ve(o.editingTextElement)){let v=i.get(o.editingTextElement.id);v&&!v.autoResize&&iZe(v,d,o,a.selectionColor)}o.isBindingEnabled&&o.suggestedBindings.filter(v=>v!=null).forEach(v=>{eZe(d,o,v,t)}),o.frameToHighlight&&tZe(d,o,o.frameToHighlight,t),o.elementsToHighlight&&nZe(d,o,o.elementsToHighlight);let h=r.some(v=>ht(v));if(r.length===1&&((y=o.editingLinearElement)==null?void 0:y.elementId)===r[0].id&&FS(d,o,r[0],t),Ge(r[0])&&o.selectedLinearElement&&o.selectedLinearElement.segmentMidPointHoveredCoords?KYe(d,o):o.selectedLinearElement&&o.selectedLinearElement.hoverPointIndex>=0&&!(Ge(r[0])&&o.selectedLinearElement.hoverPointIndex>0&&o.selectedLinearElement.hoverPointIndex<r[0].points.length-1)&&YYe(d,o,t),!o.multiElement&&!o.editingLinearElement){let v=cne(r,o),E=r.length===1&&xt(r[0]);E&&((U=o.selectedLinearElement)==null?void 0:U.elementId)===r[0].id&&!r[0].locked&&FS(d,o,r[0],t);let k=a.selectionColor||Mi.black;if(v){let M=mt(r),S=[];for(let I of t.values()){let R=[],P=a.remoteSelectedElementIds.get(I.id);if(E&&Ge(I)&&(I.startBinding||I.endBinding)||(M.has(I.id)&&!ote(o,I)&&R.push(k),P&&R.push(...P.map(_=>u7(_,o.collaborators.get(_))))),R.length){let[_,O,V,j,F,z]=wt(I,t,!0);S.push({angle:I.angle,x1:_,y1:O,x2:V,y2:j,selectionColors:R,dashed:!!P,cx:F,cy:z,activeEmbeddable:((x=o.activeEmbeddable)==null?void 0:x.element)===I&&o.activeEmbeddable.state==="active",padding:I.id===o.croppingElementId||ln(I)?0:void 0})}}let A=I=>{let R=Vn(t,I),[P,_,O,V]=mn(R);S.push({angle:0,x1:P,x2:O,y1:_,y2:V,selectionColors:[Mi.black],dashed:!0,cx:P+(O-P)/2,cy:_+(V-_)/2,activeEmbeddable:!1})};for(let I of Xh(o))A(I);o.editingGroupId&&A(o.editingGroupId),S.forEach(I=>Ioe(d,o,I))}if(d.save(),d.translate(o.scrollX,o.scrollY),r.length===1){d.fillStyle=Mi.white;let M=lne(r[0],o.zoom,t,"mouse",I2(l));if(!o.viewModeEnabled&&v&&!Ve(o.editingTextElement)&&!o.croppingElementId&&hW(d,a,o,M,r[0].angle),o.croppingElementId&&!o.isCropping){let S=t.get(o.croppingElementId);S&&ln(S)&&rZe(d,a,o,S,t)}}else if(r.length>1&&!o.isRotating){let M=m1*2/o.zoom.value;d.fillStyle=Mi.white;let[S,A,I,R]=mn(r),P=d.getLineDash();d.setLineDash([2/o.zoom.value]);let _=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=k,Fy(d,S-M,A-M,I-S+M*2,R-A+M*2,(S+I)/2,(A+R)/2,0),d.lineWidth=_,d.setLineDash(P);let O=nR([S,A,I,R,(S+I)/2,(A+R)/2],0,o.zoom,"mouse",h?{...I2(l),rotation:!0}:I2(l));r.some(V=>!V.locked)&&hW(d,a,o,O,0)}d.restore()}o.searchMatches.forEach(({id:v,focus:E,matchedLines:k})=>{let M=t.get(v);if(M&&Ve(M)){let[S,A,,,I,R]=wt(M,t,!0);d.save(),o.theme===Ft.LIGHT?E?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":E?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)",d.translate(o.scrollX,o.scrollY),d.translate(I,R),d.rotate(M.angle),k.forEach(P=>{d.fillRect(S+P.offsetX-I,A+P.offsetY-R,P.width,P.height)}),d.restore()}}),VYe(d,o),d.restore(),VWe({context:d,renderConfig:a,appState:o,normalizedWidth:f,normalizedHeight:c});let g;return a.renderScrollbars&&(g=qXe(n,f,c,o),d.save(),d.fillStyle=ZXe,d.strokeStyle="rgba(255,255,255,0.8)",[g.horizontal,g.vertical].forEach(v=>{v&&fse(d,v.x,v.y,v.width,v.height,Pu/2)}),d.restore()),{scrollBars:g,atLeastOneVisibleElement:n.length>0,elementsMap:t}},Roe=Cw(e=>{var n;let t=Noe(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),sZe=(e,t)=>{if(t){Roe(e);return}let n=Noe(e);return e.callback(n),n},oZe=e=>{let t=T.useRef(!1);return T.useEffect(()=>{var l;if(!t.current){t.current=!0;return}let n=new Map,r=new Map,i=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((f,c)=>{if(f.selectedElementIds)for(let d of Object.keys(f.selectedElementIds))i.has(d)||i.set(d,[]),i.get(d).push(c);!f.pointer||f.pointer.renderCursor===!1||(f.username&&s.set(c,f.username),f.userState&&o.set(c,f.userState),r.set(c,fl({sceneX:f.pointer.x,sceneY:f.pointer.y},e.appState)),n.set(c,f.button))});let a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";sZe({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:r,remotePointerButton:n,remoteSelectedElementIds:i,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:!1},device:e.device,callback:e.renderInteractiveSceneCallback},HR())}),m.jsx("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?gn.GRAB:gn.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:$("labels.drawingCanvas")})},pW=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),aZe=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements?!1:Gi(pW(e.appState),pW(t.appState)),lZe=Ie.memo(oZe,aZe),cZe=e=>{let t=T.useRef(null),n=T.useRef(!1);return T.useEffect(()=>{let r=t.current;if(!r)return;let i=e.canvas;n.current||(n.current=!0,r.replaceChildren(i),i.classList.add("excalidraw__canvas","static"));let s=`${e.appState.width}px`,o=`${e.appState.height}px`;i.style.width!==s&&(i.style.width=s),i.style.height!==o&&(i.style.height=o);let a=e.appState.width*e.scale,l=e.appState.height*e.scale;i.width!==a&&(i.width=a),i.height!==l&&(i.height=l),Fte({canvas:i,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},HR())}),m.jsx("div",{className:"excalidraw__canvas-wrapper",ref:t})},mW=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),fZe=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:Gi(mW(e.appState),mW(t.appState))&&Gi(e.renderConfig,t.renderConfig),dZe=Ie.memo(cZe,fZe),gW=class{constructor(e){Q(this,"scene"),Q(this,"getRenderableElements",(()=>{let t=({elementsMap:r,zoom:i,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:f,width:c})=>{let d=[];for(let u of r.values())r9(u,c,f,{zoom:i,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},r)&&d.push(u);return d},n=({elements:r,editingTextElement:i,newElementId:s,pendingImageElementId:o})=>{let a=Ca(new Map);for(let l of r)ln(l)&&o===l.id||s!==l.id&&(!i||i.type!=="text"||l.id!==i.id)&&a.set(l.id,l);return a};return YMe(({zoom:r,offsetLeft:i,offsetTop:s,scrollX:o,scrollY:a,height:l,width:f,editingTextElement:c,newElementId:d,pendingImageElementId:u,sceneNonce:h})=>{let g=this.scene.getNonDeletedElements(),y=n({elements:g,editingTextElement:c,newElementId:d,pendingImageElementId:u}),U=t({elementsMap:y,zoom:r,offsetLeft:i,offsetTop:s,scrollX:o,scrollY:a,height:l,width:f});return{elementsMap:y,visibleElements:U}})})()),this.scene=e}destroy(){Roe.cancel(),Bte.cancel(),this.getRenderableElements.clear()}},uZe=({trails:e})=>{let t=T.useRef(null);return T.useEffect(()=>{if(t.current)for(let n of e)n.start(t.current);return()=>{for(let n of e)n.stop()}},e),m.jsx("div",{className:"SVGLayer",children:m.jsx("svg",{ref:t})})},hZe=5,pZe=(e,t,n)=>{let[r,i]=wt(e,n),{x:s,y:o}=fl({sceneX:r+e.width,sceneY:i},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},bW=({children:e,element:t,elementsMap:n})=>{let r=$y();if(r.contextMenu||r.newElement||r.resizingElement||r.isRotating||r.openMenu||r.viewModeEnabled)return null;let{x:i,y:s}=pZe(t,r,n);return m.jsx("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${i}px`,padding:hZe},children:e})},mZe="small",zS=e=>m.jsxs("label",{className:Ke("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${mZe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m.jsx("div",{className:"ToolIcon__icon",children:e.icon})]}),gZe=({height:e,width:t,userToFollow:n,onDisconnect:r})=>m.jsx("div",{className:"follow-mode",style:{width:t,height:e},children:m.jsxs("div",{className:"follow-mode__badge",children:[m.jsxs("div",{className:"follow-mode__badge__label",children:["Following"," ",m.jsx("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),m.jsx("button",{type:"button",onClick:r,className:"follow-mode__disconnect-btn",children:c6})]})}),bZe=gZe,yZe=class{constructor(){Q(this,"targets",new WeakMap),Q(this,"rafIds",new WeakMap)}register(e,t){this.targets.set(e,{callback:t,stopped:!0})}start(e){let t=this.targets.get(e);t&&(this.rafIds.has(e)||(this.targets.set(e,{...t,stopped:!1}),this.scheduleFrame(e)))}stop(e){let t=this.targets.get(e);t&&!t.stopped&&this.targets.set(e,{...t,stopped:!0}),this.cancelFrame(e)}constructFrame(e){return t=>{let n=this.targets.get(e);if(!n)return;let r=this.onFrame(n,t);!n.stopped&&!r?this.scheduleFrame(e):this.cancelFrame(e)}}scheduleFrame(e){let t=requestAnimationFrame(this.constructFrame(e));this.rafIds.set(e,t)}cancelFrame(e){if(this.rafIds.has(e)){let t=this.rafIds.get(e);cancelAnimationFrame(t)}this.rafIds.delete(e)}onFrame(e,t){return e.callback(t)??!1}},eT=class{constructor(e,t,n){this.animationFrameHandler=e,this.app=t,this.options=n,Q(this,"currentTrail"),Q(this,"pastTrails",[]),Q(this,"container"),Q(this,"trailElement"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(en,"path")}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(e,t){if(this.currentTrail){let n=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[n-1][0]===e&&this.currentTrail.originalPoints[n-1][1]===t}return!1}start(e){e&&(this.container=e),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var e;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((e=this.container)==null||e.removeChild(this.trailElement))}startPath(e,t){this.currentTrail=new d9(this.options),this.currentTrail.addPoint([e,t,performance.now()]),this.update()}addPointToPath(e,t){this.currentTrail&&(this.currentTrail.addPoint([e,t,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){let e=[];for(let n of this.pastTrails)e.push(this.drawTrail(n,this.app.state));if(this.currentTrail){let n=this.drawTrail(this.currentTrail,this.app.state);e.push(n)}this.pastTrails=this.pastTrails.filter(n=>n.getStrokeOutline().length!==0),e.length===0&&this.stop();let t=e.join(" ").trim();this.trailElement.setAttribute("d",t),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(e,t){let n=e.getStrokeOutline(e.options.size/t.zoom.value).map(([r,i])=>{let s=fl({sceneX:r,sceneY:i},t);return[s.x,s.y]});return ZMe(n,!0)}},UZe=class{constructor(e,t){this.animationFrameHandler=e,this.app=t,Q(this,"localTrail"),Q(this,"collabTrails",new Map),Q(this,"container"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new eT(e,t,{...this.getTrailOptions(),fill:()=>qAe})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:e=>{let t=Math.max(0,1-(performance.now()-e.pressure)/1e3),n=(50-Math.min(50,e.totalLength-e.currentIndex))/50;return Math.min(Wh(n),Wh(t))}}}startPath(e,t){this.localTrail.startPath(e,t)}addPointToPath(e,t){this.localTrail.addPointToPath(e,t)}endPath(){this.localTrail.endPath()}start(e){this.container=e,this.animationFrameHandler.start(this),this.localTrail.start(e)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(let[e,t]of this.app.state.collaborators.entries()){let n;this.collabTrails.has(e)?n=this.collabTrails.get(e):(n=new eT(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=t.pointer)==null?void 0:r.laserColor)||u7(e,t)}}),n.start(this.container),this.collabTrails.set(e,n)),t.pointer&&t.pointer.tool==="laser"&&(t.button==="down"&&!n.hasCurrentTrail&&n.startPath(t.pointer.x,t.pointer.y),t.button==="down"&&n.hasCurrentTrail&&!n.hasLastPoint(t.pointer.x,t.pointer.y)&&n.addPointToPath(t.pointer.x,t.pointer.y),t.button==="up"&&n.hasCurrentTrail&&(n.addPointToPath(t.pointer.x,t.pointer.y),n.endPath()))}for(let e of this.collabTrails.keys())this.app.state.collaborators.has(e)||(this.collabTrails.get(e).stop(),this.collabTrails.delete(e))}}},xZe=(e,t,n,r,i,s)=>{let{zoom:o}=r,a=180*n/Math.PI,l=e*(o.value-1)/2,f=t*(o.value-1)/2;return e>i&&o.value!==1&&(l=i*(o.value-1)/2),t>s&&o.value!==1&&(f=s*(o.value-1)/2),`translate(${l}px, ${f}px) scale(${o.value}) rotate(${a}deg)`},wZe=({id:e,onChange:t,onSubmit:n,getViewportCoords:r,element:i,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{let f=(F,z)=>{if(!z.style.fontFamily||!z.style.fontSize)return!1;let H=z.style.fontFamily.replace(/"/g,"");return Lg({fontFamily:F.fontFamily})!==H||`${F.fontSize}px`!==z.style.fontSize},c=()=>{var B;let F=a.state,z=(B=ed.getScene(i))==null?void 0:B.getElement(e);if(!z)return;let{textAlign:H,verticalAlign:G}=z,W=a.scene.getNonDeletedElementsMap();if(z&&Ve(z)){let X=z.x,q=z.y,Y=Ni(z,a.scene.getNonDeletedElementsMap()),oe=z.width,ge=z.height,he=z.width,ce=z.height;if(Y&&z.containerId){if(Tt(Y)){let ct=We.getBoundTextElementPosition(Y,z,W);X=ct.x,q=ct.y}let Le=f(z,d),Ae;if(Le?Ae=Y4(Y.id,Y.height):(Ae=Wg[Y.id],Ae||(Ae=Y4(Y.id,Y.height))),he=Qf(Y,z),ce=Hw(Y,z),!Tt(Y)&&ge>ce){let ct=E1(ge,Y.type);Ue(Y,{height:ct});return}else if(!Tt(Y)&&Y.height>Ae.height&&ge<ce){let ct=E1(ge,Y.type);Ue(Y,{height:ct})}else{let{y:ct}=$w(Y,z,W);q=ct}}let[ie,we]=r(X,q),ke=d.selectionStart,Re=d.selectionEnd,Fe=d.value.length;if(ke===Re&&Re!==Fe){let Le=Fe-Re;d.selectionStart=d.value.length-Le,d.selectionEnd=d.value.length-Le}Y?oe+=.5:(he=(F.width-8-ie)/F.zoom.value,oe=Math.min(oe,he)),ge*=1.05;let $e=kn(z),ve=(F.height-we)/F.zoom.value;Object.assign(d.style,{font:$e,lineHeight:z.lineHeight,width:`${oe}px`,height:`${ge}px`,left:`${ie}px`,top:`${we}px`,transform:xZe(oe,ge,TOe(z,Y),F,he,ve),textAlign:H,verticalAlign:G,color:z.strokeColor,opacity:z.opacity/100,filter:"var(--theme-filter)",maxHeight:`${ve}px`}),d.scrollTop=0,Kf()&&(d.style.fontFamily=Lg(z)),Ue(z,{x:X,y:q})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let u="pre",h="normal";(Xn(i)||!i.autoResize)&&(u="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:u,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=i.originalText,c(),t&&(d.onpaste=async F=>{let z=await Yte(F,!0);if(!z.text)return;let H=Bg(z.text);if(!H)return;let G=Ni(i,a.scene.getNonDeletedElementsMap()),W=kn({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(G){let B=Ct(G,a.scene.getNonDeletedElementsMap()),X=D1(`${d.value}${H}`,W,Qf(G,B)),q=lN(X,W);d.style.width=`${q}px`}},d.oninput=()=>{let F=Bg(d.value);if(d.value!==F){let z=d.selectionStart;d.value=F,d.selectionStart=z,d.selectionEnd=z}t(d.value)}),d.onkeydown=F=>{if(!F.shiftKey&&bV.keyTest(F))F.preventDefault(),a.actionManager.executeAction(bV),c();else if(!F.shiftKey&&yV.keyTest(F))F.preventDefault(),a.actionManager.executeAction(yV),c();else if(!F.shiftKey&&UV.keyTest(F))F.preventDefault(),a.actionManager.executeAction(UV),c();else if(pV.keyTest(F))a.actionManager.executeAction(pV);else if(mV.keyTest(F))a.actionManager.executeAction(mV);else if(F.key===J.ESCAPE)F.preventDefault(),M=!0,S();else if(F.key===J.ENTER&&F[J.CTRL_OR_CMD]){if(F.preventDefault(),F.isComposing||F.keyCode===229)return;M=!0,S()}else if(F.key===J.TAB||F[J.CTRL_OR_CMD]&&(F.code===Jt.BRACKET_LEFT||F.code===Jt.BRACKET_RIGHT)){if(F.preventDefault(),F.isComposing)return;F.shiftKey||F.code===Jt.BRACKET_LEFT?v():x(),d.dispatchEvent(new Event("input"))}};let g=4,y=" ".repeat(g),U=new RegExp(`^ {1,${g}}`),x=()=>{let{selectionStart:F,selectionEnd:z}=d,H=E(),G=d.value;H.forEach(W=>{let B=G.slice(0,W),X=G.slice(W);G=`${B}${y}${X}`}),d.value=G,d.selectionStart=F+g,d.selectionEnd=z+g*H.length},v=()=>{let{selectionStart:F,selectionEnd:z}=d,H=E(),G=[],W=d.value;H.forEach(B=>{let X=W.slice(B,B+g).match(U);if(X){let q=W.slice(0,B),Y=W.slice(B+X[0].length);W=`${q}${Y}`,G.push(B)}}),d.value=W,G.length&&(F>G[G.length-1]?d.selectionStart=Math.max(F-g,G[G.length-1]):d.selectionStart=F,d.selectionEnd=Math.max(d.selectionStart,z-g*G.length))},E=()=>{let{selectionStart:F,selectionEnd:z,value:H}=d,G=H.slice(0,F).match(/[^\n]*$/)[0].length;return F=F-G,H.slice(F,z).split(`
`).reduce((W,B,X,q)=>W.concat(X?W[X-1]+q[X-1].length+1:F),[]).reverse()},k=F=>{F.target instanceof HTMLCanvasElement&&(F.preventDefault(),F.stopPropagation())},M=!1,S=()=>{var H,G;if(V)return;V=!0,A();let F=(H=ed.getScene(i))==null?void 0:H.getElement(i.id);if(!F)return;let z=Ni(F,a.scene.getNonDeletedElementsMap());if(z){if(d.value.trim()){let W=qf(z);!W||W!==i.id?Ue(z,{boundElements:(z.boundElements||[]).concat({type:"text",id:i.id})}):Tt(z)&&Kw(z)}else Ue(z,{boundElements:(G=z.boundElements)==null?void 0:G.filter(W=>!Ve(W))});Ds(F,z,a.scene.getNonDeletedElementsMap())}n({viaKeyboard:M,nextOriginalText:d.value})},A=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,j&&j.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("wheel",k,!0),window.removeEventListener("pointerdown",P),window.removeEventListener("pointerup",I),window.removeEventListener("blur",S),window.removeEventListener("beforeunload",S),_(),O(),d.remove()},I=F=>{window.removeEventListener("pointerup",I);let z=F==null?void 0:F.target,H=z instanceof HTMLElement&&z.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=S,H||d.focus()})},R=()=>{d.onblur=null,window.addEventListener("pointerup",I),window.addEventListener("blur",S)},P=F=>{let z=F==null?void 0:F.target;if(F.button===Zd.WHEEL){z instanceof HTMLTextAreaElement&&(F.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(F)),R();return}let H=z instanceof HTMLElement&&z.classList.contains("properties-trigger");(F.target instanceof HTMLElement||F.target instanceof SVGElement)&&F.target.closest(`.${_g.SHAPE_ACTIONS_MENU}, .${_g.ZOOM_ACTIONS}`)&&!X0(F.target)||H?R():F.target instanceof HTMLCanvasElement&&!Kf()&&requestAnimationFrame(()=>{S()})},_=a.scene.onUpdate(()=>{var F;c(),(F=document.activeElement)!=null&&F.closest(".properties-content")||d.focus()}),O=a.onScrollChangeEmitter.on(()=>{c()}),V=!1;l&&d.select(),I();let j=null;s&&"ResizeObserver"in window?(j=new window.ResizeObserver(()=>{c()}),j.observe(s)):window.addEventListener("resize",c),d.onpointerdown=F=>F.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",P,{capture:!0})}),window.addEventListener("beforeunload",S),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d)},vZe=je({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=Mt(e,t);return i.length===1&&Ve(i[0])&&!i[0].autoResize},perform:(e,t,n,r)=>{let i=Mt(e,t);return{appState:t,elements:e.map(s=>{if(s.id===i[0].id&&Ve(s)){let o=hs(s.originalText,kn(s),s.lineHeight);return St(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:pe.IMMEDIATELY}}}),EZe=e=>{let t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(n=>`\\s*${n}(-beta)?`).join("|")})\\b`).test(e.trim())},_oe=({canvas:e,rc:t,newElement:n,elementsMap:r,allElementsMap:i,scale:s,appState:o,renderConfig:a})=>{if(e){let[l,f]=RN(e,s),c=_N({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:f});c.save(),c.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?H0(n,r,i,t,c,a,o):c.clearRect(0,0,l,f)}},kZe=Cw(e=>{_oe(e)},{trailing:!0}),SZe=(e,t)=>{if(t){kZe(e);return}_oe(e)},CZe=e=>{let t=T.useRef(null);return T.useEffect(()=>{t.current&&SZe({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},HR())}),m.jsx("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},AZe=CZe,Poe=Ie.createContext(null),Doe=Ie.createContext(null),Loe={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},VR=Ie.createContext(Loe);VR.displayName="DeviceContext";var WR=Ie.createContext({container:null,id:null});WR.displayName="ExcalidrawContainerContext";var GR=Ie.createContext([]);GR.displayName="ExcalidrawElementsContext";var XR=Ie.createContext({...Ac(),width:0,height:0,offsetLeft:0,offsetTop:0});XR.displayName="ExcalidrawAppStateContext";var KR=Ie.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});KR.displayName="ExcalidrawSetAppStateContext";var YR=Ie.createContext(null);YR.displayName="ExcalidrawActionManagerContext";var Oc=()=>T.useContext(Poe),zy=()=>T.useContext(Doe),pi=()=>T.useContext(VR),jc=()=>T.useContext(WR),p7=()=>T.useContext(GR),$y=()=>T.useContext(XR),mi=()=>T.useContext(KR),bo=()=>T.useContext(YR),M5=!1,$S=0,P0=!1,T5=!1,HS=!1,VS={horizontal:null,vertical:null},Gd=0,I5=!1,WS=new Map,o3=!1,yW=0,UW=!1,D0=null,on={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},MZe=class Ooe extends Ie.Component{constructor(t){super(t),Q(this,"canvas"),Q(this,"interactiveCanvas",null),Q(this,"rc"),Q(this,"unmounted",!1),Q(this,"actionManager"),Q(this,"device",Loe),Q(this,"excalidrawContainerRef",Ie.createRef()),Q(this,"scene"),Q(this,"fonts"),Q(this,"renderer"),Q(this,"visibleElements"),Q(this,"resizeObserver"),Q(this,"nearestScrollableContainer"),Q(this,"library"),Q(this,"libraryItemsFromStorage"),Q(this,"id"),Q(this,"store"),Q(this,"history"),Q(this,"excalidrawContainerValue"),Q(this,"files",{}),Q(this,"imageCache",new Map),Q(this,"iFrameRefs",new Map),Q(this,"embedsValidationStatus",new Map),Q(this,"initializedEmbeds",new Set),Q(this,"elementsPendingErasure",new Set),Q(this,"flowChartCreator",new GXe),Q(this,"flowChartNavigator",new WXe),Q(this,"hitLinkElement"),Q(this,"lastPointerDownEvent",null),Q(this,"lastPointerUpEvent",null),Q(this,"lastPointerMoveEvent",null),Q(this,"lastPointerMoveCoords",null),Q(this,"lastViewportPosition",{x:0,y:0}),Q(this,"animationFrameHandler",new yZe),Q(this,"laserTrails",new UZe(this.animationFrameHandler,this)),Q(this,"eraserTrail",new eT(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:c=>{let d=Math.max(0,1-(performance.now()-c.pressure)/200),u=(10-Math.min(10,c.totalLength-c.currentIndex))/10;return Math.min(Wh(u),Wh(d))},fill:()=>this.state.theme===Ft.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"})),Q(this,"onChangeEmitter",new Zl),Q(this,"onPointerDownEmitter",new Zl),Q(this,"onPointerUpEmitter",new Zl),Q(this,"onUserFollowEmitter",new Zl),Q(this,"onScrollChangeEmitter",new Zl),Q(this,"missingPointerEventCleanupEmitter",new Zl),Q(this,"onRemoveEventListenersEmitter",new Zl),Q(this,"getEffectiveGridSize",()=>Pb(this)?this.state.gridSize:null),Q(this,"updateEmbedValidationStatus",(c,d)=>{this.embedsValidationStatus.set(c.id,d),lr.delete(c)}),Q(this,"updateEmbeddables",()=>{let c=new Set,d=!1;this.scene.getNonDeletedElements().filter(u=>{if(eo(u)){if(c.add(u.id),!this.embedsValidationStatus.has(u.id)){d=!0;let h=K3(u.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(u,h)}}else ru(u)&&c.add(u.id);return!1}),d&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((u,h)=>{c.has(h)||this.iFrameRefs.delete(h)})}),Q(this,"getFrameNameDOMId",c=>`${this.id}-frame-name-${c.id}`),Q(this,"frameNameBoundsCache",{get:c=>{let d=this.frameNameBoundsCache._cache.get(c.id);if(!d||d.zoom!==this.state.zoom.value||d.versionNonce!==c.versionNonce){let u=document.getElementById(this.getFrameNameDOMId(c));if(u){let h=u.getBoundingClientRect(),g=On({clientX:h.x,clientY:h.y},this.state),y=On({clientX:h.right,clientY:h.bottom},this.state);return d={x:g.x,y:g.y,width:y.x-g.x,height:y.y-g.y,angle:0,zoom:this.state.zoom.value,versionNonce:c.versionNonce},this.frameNameBoundsCache._cache.set(c.id,d),d}return null}return d},_cache:new Map}),Q(this,"resetEditingFrame",c=>{var d;c&&Ue(c,{name:((d=c.name)==null?void 0:d.trim())||null}),this.setState({editingFrame:null})}),Q(this,"renderFrameNames",()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;let c=this.state.theme===Ft.DARK;return this.scene.getNonDeletedFramesLikes().map(d=>{if(!r9(d,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===d.id&&this.resetEditingFrame(d),null;let{x:u,y:h}=fl({sceneX:d.x,sceneY:d.y},this.state),g=6,y,U=nne(d);if(d.id===this.state.editingFrame){let x=U;y=m.jsx("input",{autoFocus:!0,value:x,onChange:v=>{Ue(d,{name:v.target.value})},onFocus:v=>v.target.select(),onBlur:()=>this.resetEditingFrame(d),onKeyDown:v=>{(v.key===J.ESCAPE||v.key===J.ENTER)&&this.resetEditingFrame(d)},style:{background:this.state.viewBackgroundColor,filter:c?tN:"none",zIndex:2,border:"none",display:"block",padding:`${g}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${g}px, ${g}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-u-g}px`},size:x.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else y=U;return m.jsx("div",{id:this.getFrameNameDOMId(d),style:{position:"absolute",bottom:`${this.state.height+or.nameOffsetY-h+this.state.offsetTop}px`,left:`${u-this.state.offsetLeft}px`,zIndex:2,fontSize:or.nameFontSize,color:c?or.nameColorDarkTheme:or.nameColorLightTheme,lineHeight:or.nameLineHeight,width:"max-content",maxWidth:`${d.width}px`,overflow:d.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:gn.MOVE,pointerEvents:this.state.viewModeEnabled?Ep.disabled:Ep.enabled},onPointerDown:x=>this.handleCanvasPointerDown(x),onWheel:x=>this.handleWheel(x),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:d.id})},children:y},d.id)})}),Q(this,"focusContainer",()=>{var c;(c=this.excalidrawContainerRef.current)==null||c.focus()}),Q(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted()),Q(this,"getSceneElements",()=>this.scene.getNonDeletedElements()),Q(this,"onInsertElements",c=>{this.addElementsFromPasteOrLibrary({elements:c,position:"center",files:null})}),Q(this,"onExportImage",async(c,d,u)=>{jn("export",c,"ui");let h=await d7(c,d,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:u.exportingFrame}).catch(zJ).catch(g=>{console.error(g),this.setState({errorMessage:g.message})});this.state.exportEmbedScene&&h&&oR(h)&&this.setState({fileHandle:h})}),Q(this,"magicGenerations",new Map),Q(this,"updateMagicGeneration",({frameElement:c,data:d})=>{d.status==="pending"?Ue(c,{customData:{generationData:void 0}},!1):Ue(c,{customData:{generationData:d}},!1),this.magicGenerations.set(c.id,d),this.triggerRender()}),Q(this,"plugins",{}),Q(this,"onMagicframeToolSelect",()=>{let c=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(c.length===0)this.setActiveTool({type:ci.magicframe}),jn("ai","tool-select (empty-selection)","d2c");else{let d=c.length===1&&$3(c[0])&&c[0];if(!d&&c.some(h=>ht(h)||h.frameId)){this.setActiveTool({type:ci.magicframe});return}jn("ai","tool-select (existing selection)","d2c");let u;if(d)u=d;else{let[h,g,y,U]=mn(c),x=50;u=uM({...or,x:h-x,y:g-x,width:y-h+x*2,height:U-g+x*2,opacity:100,locked:!1}),this.scene.insertElement(u);for(let v of c)Ue(v,{frameId:u.id});this.setState({selectedElementIds:{[u.id]:!0}})}this.onMagicFrameGenerate(u,"upstream")}}),Q(this,"openEyeDropper",({type:c})=>{pl.set(a7,{swapPreviewOnAlt:!0,colorPickerType:c==="stroke"?"elementStroke":"elementBackground",onSelect:(d,u)=>{let h=c==="background"&&u.altKey||c==="stroke"&&!u.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?h?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:d},captureUpdate:pe.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:d},captureUpdate:pe.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(g=>this.state.selectedElementIds[g.id]?St(g,{[h?"strokeColor":"backgroundColor"]:d}):g),captureUpdate:pe.IMMEDIATELY})},keepOpenOnAlt:!1})}),Q(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})}),Q(this,"syncActionResult",gr(c=>{var h,g,y,U,x,v;if(this.unmounted||c===!1)return;c.captureUpdate===pe.NEVER?this.store.shouldUpdateSnapshot():c.captureUpdate===pe.IMMEDIATELY&&this.store.shouldCaptureIncrement();let d=!1,u=null;if(c.elements&&(this.scene.replaceAllElements(c.elements),d=!0),c.files&&(this.addMissingFiles(c.files,c.replaceFiles),this.addNewImagesToImageCache()),c.appState||u||this.state.contextMenu){let E=((h=c==null?void 0:c.appState)==null?void 0:h.viewModeEnabled)||!1,k=((g=c==null?void 0:c.appState)==null?void 0:g.zenModeEnabled)||!1,M=((y=c==null?void 0:c.appState)==null?void 0:y.theme)||this.props.theme||Ft.LIGHT,S=((U=c==null?void 0:c.appState)==null?void 0:U.name)??this.state.name,A=((x=c==null?void 0:c.appState)==null?void 0:x.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(E=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(k=this.props.zenModeEnabled),u=((v=c.appState)==null?void 0:v.editingTextElement)||null,c.elements&&u&&c.elements.forEach(I=>{(u==null?void 0:u.id)===I.id&&u!==I&&wM(I)&&Ve(I)&&(u=I)}),u!=null&&u.isDeleted&&(u=null),this.setState(I=>{let R=c.appState||{};return{...I,...R,contextMenu:null,editingTextElement:u,viewModeEnabled:E,zenModeEnabled:k,theme:M,name:S,errorMessage:A}}),d=!0}!d&&c.captureUpdate!==pe.EVENTUALLY&&this.scene.triggerUpdate()})),Q(this,"onBlur",gr(()=>{P0=!1,this.setState({isBindingEnabled:!0})})),Q(this,"onUnload",()=>{this.onBlur()}),Q(this,"disableEvent",c=>{c.preventDefault()}),Q(this,"resetHistory",()=>{this.history.clear()}),Q(this,"resetStore",()=>{this.store.clear()}),Q(this,"resetScene",gr(c=>{this.scene.replaceAllElements([]),this.setState(d=>({...Ac(),isLoading:c!=null&&c.resetLoadingState?!1:d.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()})),Q(this,"initializeScene",async()=>{var u;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async h=>{if(!h.files.length)return;let g=h.files[0],y=await g.getFile();this.loadFileToCanvas(new File([y],y.name||"",{type:y.type}),g)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let c=null;try{typeof this.props.initialData=="function"?c=await this.props.initialData()||null:c=await this.props.initialData||null,c!=null&&c.libraryItems&&this.library.updateLibrary({libraryItems:c.libraryItems,merge:!0}).catch(h=>{console.error(h)})}catch(h){console.error(h),c={appState:{errorMessage:h.message||"Encountered an error during importing or restoring scene data"}}}let d=Ww(c,null,null,{repairBindings:!0});d.appState={...d.appState,theme:this.props.theme||d.appState.theme,openSidebar:((u=d.appState)==null?void 0:u.openSidebar)||this.state.openSidebar,activeTool:d.appState.activeTool.type==="image"?{...d.appState.activeTool,type:"selection"}:d.appState.activeTool,isLoading:!1,toast:this.state.toast},c!=null&&c.scrollToContent&&(d.appState={...d.appState,...Rb(d.elements,{...d.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...d,captureUpdate:pe.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(h=>{this.fonts.onLoaded(h)}),M2(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})}),Q(this,"isMobileBreakpoint",(c,d)=>c<lMe||d<fMe&&c<cMe),Q(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;let{clientWidth:c,clientHeight:d}=document.body,u=this.device.viewport,h=F3(u,{isLandscape:c>d,isMobile:this.isMobileBreakpoint(c,d)});return u!==h?(this.device={...this.device,viewport:h},!0):!1}),Q(this,"refreshEditorBreakpoints",()=>{let c=this.excalidrawContainerRef.current;if(!c)return;let{width:d,height:u}=c.getBoundingClientRect(),h=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:dMe,g=this.device.editor,y=F3(g,{isMobile:this.isMobileBreakpoint(d,u),canFitSidebar:d>h});return g!==y?(this.device={...this.device,editor:y},!0):!1}),Q(this,"onResize",gr(()=>{this.scene.getElementsIncludingDeleted().forEach(c=>lr.delete(c)),this.refreshViewportBreakpoints(),this.updateDOMRect(),XA||this.refreshEditorBreakpoints(),this.setState({})})),Q(this,"onFullscreenChange",()=>{var c;!document.fullscreenElement&&((c=this.state.activeEmbeddable)==null?void 0:c.state)==="active"&&this.setState({activeEmbeddable:null})}),Q(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:c,scrollBars:d,elementsMap:u})=>{d&&(VS=d);let h=this.state.editingTextElement?!1:!c&&u.size>0;this.state.scrolledOutside!==h&&this.setState({scrolledOutside:h}),this.scheduleImageRefresh()}),Q(this,"onScroll",Og(()=>{let{offsetTop:c,offsetLeft:d}=this.getCanvasOffsets();this.setState(u=>u.offsetLeft===d&&u.offsetTop===c?null:{offsetTop:c,offsetLeft:d})},oMe)),Q(this,"onCut",gr(c=>{var d;!((d=this.excalidrawContainerRef.current)!=null&&d.contains(document.activeElement))||X0(c.target)||(this.actionManager.executeAction(SV,"keyboard",c),c.preventDefault(),c.stopPropagation())})),Q(this,"onCopy",gr(c=>{var d;!((d=this.excalidrawContainerRef.current)!=null&&d.contains(document.activeElement))||X0(c.target)||(this.actionManager.executeAction(ix,"keyboard",c),c.preventDefault(),c.stopPropagation())})),Q(this,"onTouchStart",c=>{if(MJ&&c.preventDefault(),!M5){M5=!0,clearTimeout($S),$S=window.setTimeout(Ooe.resetTapTwice,iMe);return}if(M5&&c.touches.length===1){let d=c.touches[0];this.handleCanvasDoubleClick({clientX:d.clientX,clientY:d.clientY}),M5=!1,clearTimeout($S)}c.touches.length===2&&this.setState({selectedElementIds:an({},this.state),activeEmbeddable:null})}),Q(this,"onTouchEnd",c=>{this.resetContextMenuTimer(),c.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:an(this.state.previousSelectedElementIds,this.state)}):on.pointers.clear()}),Q(this,"pasteFromClipboard",gr(async c=>{var E,k;let d=!!o3,u=document.activeElement,h=(E=this.excalidrawContainerRef.current)==null?void 0:E.contains(u);if(c&&!h)return;let g=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(c&&(!(g instanceof HTMLCanvasElement)||X0(u)))return;let{x:y,y:U}=On({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),x=(k=c==null?void 0:c.clipboardData)==null?void 0:k.files[0],v=await Yte(c,d);if(!x&&!d){if(v.mixedContent)return this.addElementsFromMixedContentPaste(v.mixedContent,{isPlainPaste:d,sceneX:y,sceneY:U});if(v.text){let M=v.text.trim();M.startsWith("<svg")&&M.endsWith("</svg>")&&(x=UH(M))}}if(Yh(x)&&!v.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:$("errors.imageToolNotSupported")});return}let M=this.createImageElement({sceneX:y,sceneY:U});this.insertImageElement(M,x),this.initializeImageDimensions(M),this.setState({selectedElementIds:an({[M.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(v,c)===!1)return}catch(M){console.error(M)}if(v.errorMessage)this.setState({errorMessage:v.errorMessage});else if(v.spreadsheet&&!d)this.setState({pasteDialog:{data:v.spreadsheet,shown:!0}});else if(v.elements){let M=v.programmaticAPI?JM(v.elements):v.elements;this.addElementsFromPasteOrLibrary({elements:M,files:v.files||null,position:"cursor",retainSeed:d})}else if(v.text){if(v.text&&EZe(v.text)){let A=await Ze(()=>import("./index-COs400dY.js").then(I=>I.aR),[]);try{let{elements:I,files:R}=await A.parseMermaidToExcalidraw(v.text),P=JM(I,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:P,files:R,position:"cursor"});return}catch(I){console.warn(`parsing pasted text as mermaid definition failed: ${I.message}`)}}let M=GJ(v.text).split(/\n+/).map(A=>A.trim()).filter(Boolean),S=M.map(A=>ije(A)).filter(A=>{var I;return K3(A,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(A)||((I=tm(A))==null?void 0:I.type)==="video")});if(!o3&&S.length>0&&S.length===M.length){let A=[];for(let I of S){let R=A[A.length-1],P=this.insertEmbeddableElement({sceneX:R?R.x+R.width+20:y,sceneY:U,link:Lo(I)});P&&A.push(P)}A.length&&this.setState({selectedElementIds:Object.fromEntries(A.map(I=>[I.id,!0]))});return}this.addTextFromPaste(v.text,d)}this.setActiveTool({type:"selection"}),c==null||c.preventDefault()})),Q(this,"addElementsFromPasteOrLibrary",c=>{var F,z;let d=HN(c.elements,null,void 0),[u,h,g,y]=mn(d),U=ss(u,g)/2,x=ss(h,y)/2,v=typeof c.position=="object"?c.position.clientX:c.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,E=typeof c.position=="object"?c.position.clientY:c.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:k,y:M}=On({clientX:v,clientY:E},this.state),S=k-U,A=M-x,[I,R]=Yr(S,A,this.getEffectiveGridSize()),P=Ete(d.map(H=>St(H,{x:H.x+I-u,y:H.y+R-h})),{randomizeSeed:!c.retainSeed}),_=this.scene.getElementsIncludingDeleted(),O=[..._,...P];O=((z=(F=this.props).onDuplicate)==null?void 0:z.call(F,O,_))||O,Nc(O,mt(P));let V=this.getTopLayerFrameAtSceneCoords({x:k,y:M});if(V){let H=uBe(P,V);T2(O,H,V,this.state)}this.scene.replaceAllElements(O),P.forEach(H=>{if(Ve(H)&&Xn(H)){let G=Ni(H,this.scene.getElementsMapIncludingDeleted());Ds(H,G,this.scene.getElementsMapIncludingDeleted())}}),WAe&&Hf.loadElementsFonts(P).then(H=>{this.fonts.onLoaded(H)}),c.files&&this.addMissingFiles(c.files),this.store.shouldCaptureIncrement();let j=JN(P);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&pl.get(jR)?this.state.openSidebar:null,...Ss({editingGroupId:null,selectedElementIds:j.reduce((H,G)=>(Xn(G)||(H[G.id]=!0),H),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{c.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),c.fitToContent&&this.scrollToContent(P,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})}),Q(this,"setAppState",(c,d)=>{this.setState(c,d)}),Q(this,"removePointer",c=>{Gd&&this.resetContextMenuTimer(),on.pointers.delete(c.pointerId)}),Q(this,"toggleLock",(c="ui")=>{this.state.activeTool.locked||jn("toolbar","toggleLock",`${c} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(d=>({activeTool:{...d.activeTool,...jr(this.state,d.activeTool.locked?{type:"selection"}:d.activeTool),locked:!d.activeTool.locked}}))}),Q(this,"updateFrameRendering",c=>{this.setState(d=>{let u=typeof c=="function"?c(d.frameRendering):c;return{frameRendering:{enabled:(u==null?void 0:u.enabled)??d.frameRendering.enabled,clip:(u==null?void 0:u.clip)??d.frameRendering.clip,name:(u==null?void 0:u.name)??d.frameRendering.name,outline:(u==null?void 0:u.outline)??d.frameRendering.outline}}})}),Q(this,"togglePenMode",c=>{this.setState(d=>({penMode:c??!d.penMode,penDetected:!0}))}),Q(this,"onHandToolToggle",()=>{this.actionManager.executeAction(TWe)}),Q(this,"zoomCanvas",c=>{this.setState({...hh({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:jf(c)},this.state)})}),Q(this,"cancelInProgressAnimation",null),Q(this,"scrollToContent",(c=this.scene.getNonDeletedElements(),d)=>{var U;if(typeof c=="string"){let x;if(M2(c)?x=dje(c):x=c,x){let v=this.scene.getElementsFromId(x);v!=null&&v.length?this.scrollToContent(v,{fitToContent:(d==null?void 0:d.fitToContent)??!0,animate:(d==null?void 0:d.animate)??!0}):M2(c)&&this.setState({toast:{message:$("elementLink.notFound"),duration:3e3,closable:!0}})}return}(U=this.cancelInProgressAnimation)==null||U.call(this);let u=Array.isArray(c)?c:[c],h=this.state.zoom,g=this.state.scrollX,y=this.state.scrollY;if(d!=null&&d.fitToContent||d!=null&&d.fitToViewport){let{appState:x}=c7({canvasOffsets:d.canvasOffsets,targetElements:u,appState:this.state,fitToViewport:!!(d!=null&&d.fitToViewport),viewportZoomFactor:d==null?void 0:d.viewportZoomFactor,minZoom:d==null?void 0:d.minZoom,maxZoom:d==null?void 0:d.maxZoom});h=x.zoom,g=x.scrollX,y=x.scrollY}else{let x=Rb(u,this.state);g=x.scrollX,y=x.scrollY}if(d!=null&&d.animate){let x=this.state.scrollX,v=this.state.scrollY,E=this.state.zoom.value,k=LMe({fromValues:{scrollX:x,scrollY:v,zoom:E},toValues:{scrollX:g,scrollY:y,zoom:h.value},interpolateValue:(M,S,A,I)=>{if(I==="zoom")return M*Math.pow(S/M,Wh(A))},onStep:({scrollX:M,scrollY:S,zoom:A})=>{this.setState({scrollX:M,scrollY:S,zoom:{value:A}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(d==null?void 0:d.duration)??500});this.cancelInProgressAnimation=()=>{k(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:g,scrollY:y,zoom:h})}),Q(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})}),Q(this,"translateCanvas",c=>{var d;(d=this.cancelInProgressAnimation)==null||d.call(this),this.maybeUnfollowRemoteUser(),this.setState(c)}),Q(this,"setToast",c=>{this.setState({toast:c})}),Q(this,"restoreFileFromShare",async()=>{try{let c=await caches.open("web-share-target"),d=await c.match("shared-file");if(d){let u=await d.blob(),h=new File([u],u.name||"",{type:u.type});this.loadFileToCanvas(h,null),await c.delete("shared-file"),window.history.replaceState(null,XAe,window.location.pathname)}}catch(c){this.setState({errorMessage:c.message})}}),Q(this,"addFiles",gr(c=>{let{addedFiles:d}=this.addMissingFiles(c);this.clearImageShapeCache(d),this.scene.triggerUpdate(),this.addNewImagesToImageCache()})),Q(this,"addMissingFiles",(c,d=!1)=>{let u=d?{}:{...this.files},h={},g=Array.isArray(c)?c:Object.values(c);for(let y of g)if(!u[y.id]&&(h[y.id]=y,u[y.id]=y,y.mimeType===ft.svg))try{let U=BBe(H$(zBe(y.dataURL)),ft.svg);y.dataURL!==U&&(y.version=(y.version??1)+1,y.dataURL=U)}catch(U){console.error(U)}return this.files=u,{addedFiles:h}}),Q(this,"updateScene",gr(c=>{let d=Jf(c.elements??[]);if(c.captureUpdate&&c.captureUpdate!==pe.EVENTUALLY){let u=this.store.snapshot.appState,h=this.store.snapshot.elements,g=c.appState?Object.assign({},u,c.appState):u,y=c.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),mt(d)):h;c.captureUpdate===pe.IMMEDIATELY?this.store.captureIncrement(y,g):c.captureUpdate===pe.NEVER&&this.store.updateSnapshot(y,g)}c.appState&&this.setState(c.appState),c.elements&&this.scene.replaceAllElements(d),c.collaborators&&this.setState({collaborators:c.collaborators})})),Q(this,"triggerRender",c=>{c===!0?this.scene.triggerUpdate():this.setState({})}),Q(this,"toggleSidebar",({name:c,tab:d,force:u})=>{var y,U;let h;u===void 0?h=((y=this.state.openSidebar)==null?void 0:y.name)===c&&((U=this.state.openSidebar)==null?void 0:U.tab)===d?null:c:h=u?c:null;let g=h?{name:h}:null;return g&&d&&(g.tab=d),this.setState({openSidebar:g}),!!h}),Q(this,"updateCurrentCursorPosition",gr(c=>{this.lastViewportPosition.x=c.clientX,this.lastViewportPosition.y=c.clientY})),Q(this,"getEditorUIOffsets",()=>{var g,y,U,x,v,E,k,M,S,A;let c=((x=(U=(y=(g=this.excalidrawContainerRef)==null?void 0:g.current)==null?void 0:y.querySelector(".App-toolbar"))==null?void 0:U.getBoundingClientRect())==null?void 0:x.bottom)??0,d=(k=(E=(v=this.excalidrawContainerRef)==null?void 0:v.current)==null?void 0:E.querySelector(".sidebar"))==null?void 0:k.getBoundingClientRect(),u=(A=(S=(M=this.excalidrawContainerRef)==null?void 0:M.current)==null?void 0:S.querySelector(".App-menu__left"))==null?void 0:A.getBoundingClientRect(),h=16;return Fb().rtl?{top:c+h,right:Math.max(this.state.width-((u==null?void 0:u.left)??this.state.width),0)+h,bottom:h,left:Math.max((d==null?void 0:d.right)??0,0)+h}:{top:c+h,right:Math.max(this.state.width-((d==null?void 0:d.left)??this.state.width)+h,0),bottom:h,left:Math.max((u==null?void 0:u.right)??0,0)+h}}),Q(this,"onKeyDown",gr(c=>{var g,y;if("Proxy"in window&&(!c.shiftKey&&/^[A-Z]$/.test(c.key)||c.shiftKey&&/^[a-z]$/.test(c.key))&&(c=new Proxy(c,{get(U,x){let v=U[x];return typeof v=="function"?v.bind(U):x==="key"?c.shiftKey?U.key.toUpperCase():U.key.toLowerCase():v}})),!ZA(c.target)){if((c.key===J.ESCAPE||c.key===J.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}let U=Mt(this.scene.getNonDeletedElementsMap(),this.state);if(U.length===1&&ln(U[0])&&c.key===J.ENTER){this.startImageCropping(U[0]);return}if(c.key===J.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}let x=K5(c.key);if(c[J.CTRL_OR_CMD]&&x&&!c.shiftKey){c.preventDefault();let v=Mt(this.scene.getNonDeletedElementsMap(),this.state);v.length===1&&Mw(v[0])&&this.flowChartCreator.createNodes(v[0],this.scene.getNonDeletedElementsMap(),this.state,HV(c.key)),(g=this.flowChartCreator.pendingNodes)!=null&&g.length&&!Q3(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(c.altKey){let v=Mt(this.scene.getNonDeletedElementsMap(),this.state);if(v.length===1&&x){c.preventDefault();let E=this.flowChartNavigator.exploreByDirection(v[0],this.scene.getNonDeletedElementsMap(),HV(c.key));if(E){this.setState(M=>({selectedElementIds:an({[E]:!0},M)}));let k=this.scene.getNonDeletedElementsMap().get(E);k&&!Q3([k],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(k,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(c[J.CTRL_OR_CMD]&&c.key===J.P&&!c.shiftKey&&!c.altKey){this.setToast({message:$("commandPalette.shortcutHint",{shortcut:fs("commandPalette")})}),c.preventDefault();return}if(c[J.CTRL_OR_CMD]&&c.key.toLowerCase()===J.V&&(o3=c.shiftKey,clearTimeout(yW),yW=window.setTimeout(()=>{o3=!1},100)),c[J.CTRL_OR_CMD]&&X0(c.target)&&(c.code===Jt.MINUS||c.code===Jt.EQUAL)){c.preventDefault();return}if(X0(c.target)&&c.key!==J.ESCAPE||K5(c.key)&&ZA(c.target))return;if(c.key===J.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(c.key.toLowerCase()===J.E&&c.shiftKey&&c[J.CTRL_OR_CMD]){c.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(c.key===J.PAGE_UP||c.key===J.PAGE_DOWN){let U=(c.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;c.key===J.PAGE_DOWN&&(U=-U),c.shiftKey?this.translateCanvas(x=>({scrollX:x.scrollX+U})):this.translateCanvas(x=>({scrollY:x.scrollY+U}))}if(((y=this.state.openDialog)==null?void 0:y.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(c)||this.state.viewModeEnabled)return;if(c[J.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),K5(c.key)){let U=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),x=U.find(Ge),v=new Set;U.filter(Ge).filter(S=>{let A=S.startBinding&&!U.some(R=>{var P;return R.id===((P=S.startBinding)==null?void 0:P.elementId)}),I=S.endBinding&&!U.some(R=>{var P;return R.id===((P=S.endBinding)==null?void 0:P.elementId)});return A||I}).forEach(S=>v.add(S.id)),U=U.filter(S=>!v.has(S.id));let E=this.getEffectiveGridSize()&&(c.shiftKey?Rz:this.getEffectiveGridSize())||(c.shiftKey?YAe:Rz),k=0,M=0;c.key===J.ARROW_LEFT?k=-E:c.key===J.ARROW_RIGHT?k=E:c.key===J.ARROW_UP?M=-E:c.key===J.ARROW_DOWN&&(M=E),U.forEach(S=>{Ue(S,{x:S.x+k,y:S.y+M},!1),uo(S,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:U})}),this.setState({suggestedBindings:oS(U.filter(S=>S.id!==(x==null?void 0:x.id)||E!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),c.preventDefault()}else if(c.key===J.ENTER){let U=this.scene.getSelectedElements(this.state);if(U.length===1){let x=U[0];if(c[J.CTRL_OR_CMD])xt(x)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==U[0].id)&&(this.store.shouldCaptureIncrement(),Ge(x)||this.setState({editingLinearElement:new We(x)}));else if(Ve(x)||_Oe(x)){let v;Ve(x)||(v=x);let E=aS(x,this.state,this.scene.getNonDeletedElementsMap()),k=E.x,M=E.y;this.startTextEditing({sceneX:k,sceneY:M,container:v}),c.preventDefault();return}else ht(x)&&this.setState({editingFrame:x.id})}}else if(!c.ctrlKey&&!c.altKey&&!c.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){let U=iLe(c.key);U?(this.state.activeTool.type!==U&&jn("toolbar",U,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),U==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(x=>({currentItemArrowType:x.currentItemArrowType===Ei.sharp?Ei.round:x.currentItemArrowType===Ei.round?Ei.elbow:Ei.sharp})),this.setActiveTool({type:U}),c.stopPropagation()):c.key===J.Q&&(this.toggleLock("keyboard"),c.stopPropagation())}if(c.key===J.SPACE&&on.pointers.size===0&&(P0=!0,vn(this.interactiveCanvas,gn.GRAB),c.preventDefault()),(c.key===J.G||c.key===J.S)&&!c.altKey&&!c[J.CTRL_OR_CMD]){let U=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!U.length)return;c.key===J.G&&(zg(this.state.activeTool.type)||U.some(x=>zg(x.type)))&&(this.setState({openPopup:"elementBackground"}),c.stopPropagation()),c.key===J.S&&(this.setState({openPopup:"elementStroke"}),c.stopPropagation())}if(!c[J.CTRL_OR_CMD]&&c.shiftKey&&c.key.toLowerCase()===J.F){let U=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!U.length)return;(this.state.activeTool.type==="text"||U.find(x=>Ve(x)||Ct(x,this.scene.getNonDeletedElementsMap())))&&(c.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(c.key===J.K&&!c.altKey&&!c[J.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}c[J.CTRL_OR_CMD]&&(c.key===J.BACKSPACE||c.key===J.DELETE)&&pl.set(h7,"clearCanvas");let d=c.key.toLocaleLowerCase(),u=d===J.S&&c.shiftKey,h=c.key===J.I||d===J.G&&c.shiftKey;(u||h)&&this.openEyeDropper({type:u?"stroke":"background"})})),Q(this,"onKeyUp",gr(c=>{var d,u,h,g;if(c.key===J.SPACE&&(this.state.viewModeEnabled||((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?vn(this.interactiveCanvas,gn.GRAB):this.state.activeTool.type==="selection"?Wa(this.interactiveCanvas):(Xl(this.interactiveCanvas,this.state),this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),P0=!1),!c[J.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),K5(c.key)&&(X4(this.scene.getSelectedElements(this.state).filter(xt),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,dh(this.state),((u=this.state.selectedLinearElement)==null?void 0:u.selectedPointsIndices)??[],this.state.zoom),this.setState({suggestedBindings:[]})),c.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:pe.IMMEDIATELY})),!c[J.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(h=this.flowChartCreator.pendingNodes)!=null&&h.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);let y=(g=this.flowChartCreator.pendingNodes)==null?void 0:g[0];y&&(this.setState(U=>({selectedElementIds:an({[y.id]:!0},U)})),Q3([y],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(y,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:pe.IMMEDIATELY})}})),Q(this,"isToolSupported",c=>{var d;return((d=this.props.UIOptions.tools)==null?void 0:d[c])!==!1}),Q(this,"setActiveTool",c=>{if(!this.isToolSupported(c.type)){console.warn(`"${c.type}" tool is disabled via "UIOptions.canvasActions.tools.${c.type}"`);return}let d=jr(this.state,c);d.type==="hand"?vn(this.interactiveCanvas,gn.GRAB):P0||Xl(this.interactiveCanvas,{...this.state,activeTool:d}),PMe(document.activeElement)&&this.focusContainer(),sN(d.type)||this.setState({suggestedBindings:[]}),d.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(c.type==="image"&&c.insertOnCanvasDirectly)??!1}),this.setState(u=>{let h={snapLines:u.snapLines.length?[]:u.snapLines,originSnapOffset:null,activeEmbeddable:null};return d.type==="freedraw"&&this.store.shouldCaptureIncrement(),d.type!=="selection"?{...u,activeTool:d,selectedElementIds:an({},u),selectedGroupIds:an({},u),editingGroupId:null,multiElement:null,...h}:{...u,activeTool:d,...h}})}),Q(this,"setOpenDialog",c=>{this.setState({openDialog:c})}),Q(this,"setCursor",c=>{vn(this.interactiveCanvas,c)}),Q(this,"resetCursor",()=>{Wa(this.interactiveCanvas)}),Q(this,"isTouchScreenMultiTouchGesture",()=>on.pointers.size>=2),Q(this,"getName",()=>this.state.name||this.props.name||`${$("labels.untitled")}-${Fz()}`),Q(this,"onGestureStart",gr(c=>{c.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:an({},this.state),activeEmbeddable:null}),on.initialScale=this.state.zoom.value})),Q(this,"onGestureChange",gr(c=>{if(c.preventDefault(),this.isTouchScreenMultiTouchGesture())return;let d=on.initialScale;d&&this.setState(u=>({...hh({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:jf(d*c.scale)},u)}))})),Q(this,"onGestureEnd",gr(c=>{c.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:an(this.state.previousSelectedElementIds,this.state)}),on.initialScale=null})),Q(this,"startTextEditing",({sceneX:c,sceneY:d,insertAtParentCenter:u=!0,container:h,autoEdit:g=!0})=>{let y=!1,U=u&&this.getTextWysiwygSnappedToCenterPosition(c,d,this.state,h);h&&U&&(Ct(h,this.scene.getNonDeletedElementsMap())||(y=!0));let x=null,v=this.scene.getSelectedElements(this.state);v.length===1?Ve(v[0])?x=v[0]:h?x=Ct(v[0],this.scene.getNonDeletedElementsMap()):x=this.getTextElementAtPosition(c,d):x=this.getTextElementAtPosition(c,d);let E=(x==null?void 0:x.fontFamily)||this.state.currentItemFontFamily,k=(x==null?void 0:x.lineHeight)||w1(E),M=this.state.currentItemFontSize;if(!x&&y&&h&&!Tt(h)){let I=QJ(kn({fontSize:M,fontFamily:E}),k),R=JJ(M,k),P=Math.max(h.height,R),_=Math.max(h.width,I);Ue(h,{height:P,width:_}),c=h.x+_/2,d=h.y+P/2,U&&(U=this.getTextWysiwygSnappedToCenterPosition(c,d,this.state,h))}let S=this.getTopLayerFrameAtSceneCoords({x:c,y:d}),A=x||Bo({x:U?U.elementCenterX:c,y:U?U.elementCenterY:d,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:M,fontFamily:E,textAlign:U?"center":this.state.currentItemTextAlign,verticalAlign:U?Do.MIDDLE:I4,containerId:y?h==null?void 0:h.id:void 0,groupIds:(h==null?void 0:h.groupIds)??[],lineHeight:k,angle:(h==null?void 0:h.angle)??0,frameId:S?S.id:null});if(!x&&y&&h&&Ue(h,{boundElements:(h.boundElements||[]).concat({type:"text",id:A.id})}),this.setState({editingTextElement:A}),!x)if(h&&y){let I=this.scene.getElementIndex(h.id);this.scene.insertElementAtIndex(A,I+1)}else this.scene.insertElement(A);g||x||h?this.handleTextWysiwyg(A,{isExistingElement:!!x}):this.setState({newElement:A,multiElement:null})}),Q(this,"startImageCropping",c=>{this.store.shouldCaptureIncrement(),this.setState({croppingElementId:c.id})}),Q(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.shouldCaptureIncrement(),this.setState({croppingElementId:null}))}),Q(this,"handleCanvasDoubleClick",c=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;let d=this.scene.getSelectedElements(this.state),{x:u,y:h}=On(c,this.state);if(d.length===1&&xt(d[0])){if(c[J.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==d[0].id)&&!Ge(d[0])){this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new We(d[0])});return}else if(this.state.selectedLinearElement&&Ge(d[0])){let g=We.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:u,y:h},this.state,this.scene.getNonDeletedElementsMap()),y=g?We.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,g,this.scene.getNonDeletedElementsMap()):-1;if(y&&y>-1){this.store.shouldCaptureIncrement(),We.deleteFixedSegment(d[0],y);let U=We.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:u,y:h},this.state,this.scene.getNonDeletedElementsMap()),x=U?We.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,U,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:x,value:g,added:!1}},segmentMidPointHoveredCoords:U}});return}}}if(d.length===1&&ln(d[0])){this.startImageCropping(d[0]);return}if(Wa(this.interactiveCanvas),Xh(this.state).length>0){let g=this.getElementAtPosition(u,h),y=g&&dOe(g,this.state.selectedGroupIds);if(y){this.store.shouldCaptureIncrement(),this.setState(U=>({...U,...Ss({editingGroupId:y,selectedElementIds:{[g.id]:!0}},this.scene.getNonDeletedElements(),U,this)}));return}}if(Wa(this.interactiveCanvas),!c[J.CTRL_OR_CMD]&&!this.state.viewModeEnabled){let g=this.getElementAtPosition(u,h);if(ba(g)){this.setState({activeEmbeddable:{element:g,state:"active"}});return}let y=this.getTextBindableContainerAtPosition(u,h);if(y&&(Ma(y)||!ul(y.backgroundColor)||Fp({x:u,y:h,element:y,shape:yf(y,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){let U=aS(y,this.state,this.scene.getNonDeletedElementsMap());u=U.x,h=U.y}this.startTextEditing({sceneX:u,sceneY:h,insertAtParentCenter:!c.altKey,container:y})}}),Q(this,"getElementLinkAtPosition",(c,d)=>{let u=this.scene.getNonDeletedElements(),h=-1;for(let g=u.length-1;g>=0;g--){let y=u[g];if(d&&y.id===d.id&&(h=g),y.link&&g>=h&&lS(y,this.scene.getNonDeletedElementsMap(),this.state,D(c.x,c.y),this.device.editor.isMobile))return y}}),Q(this,"redirectToLink",(c,d)=>{let u=cn(D(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),D(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||u>$0)return;let h=On(this.lastPointerDownEvent,this.state),g=this.scene.getNonDeletedElementsMap(),y=lS(this.hitLinkElement,g,this.state,D(h.x,h.y),this.device.editor.isMobile),U=On(this.lastPointerUpEvent,this.state),x=lS(this.hitLinkElement,g,this.state,D(U.x,U.y),this.device.editor.isMobile);if(y&&x){NV();let v=this.hitLinkElement.link;if(v){v=Lo(v);let E;if(this.props.onLinkOpen&&(E=VJ("excalidraw-link",c.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:v},E)),!(E!=null&&E.defaultPrevented)){let k=hte(v)?"_self":"_blank",M=window.open(void 0,k);M&&(M.opener=null,M.location=v)}}}}),Q(this,"getTopLayerFrameAtSceneCoords",c=>{let d=this.scene.getNonDeletedElementsMap(),u=this.scene.getNonDeletedFramesLikes().filter(h=>oH(c,h,d));return u.length?u[u.length-1]:null}),Q(this,"handleCanvasPointerMove",c=>{var E,k,M,S,A,I;this.savePointer(c.clientX,c.clientY,this.state.cursorButton),this.lastPointerMoveEvent=c.nativeEvent,on.pointers.has(c.pointerId)&&on.pointers.set(c.pointerId,{x:c.clientX,y:c.clientY});let d=on.initialScale;if(on.pointers.size===2&&on.lastCenter&&d&&on.initialDistance){let R=FV(on.pointers),P=R.x-on.lastCenter.x,_=R.y-on.lastCenter.y;on.lastCenter=R;let O=zV(Array.from(on.pointers.values())),V=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:O/on.initialDistance,j=V?jf(d*V):this.state.zoom.value;this.setState(F=>{let z=hh({viewportX:R.x,viewportY:R.y,nextZoom:j},F);this.translateCanvas({zoom:z.zoom,scrollX:z.scrollX+2*(P/j),scrollY:z.scrollY+2*(_/j),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else on.lastCenter=on.initialDistance=on.initialScale=null;if(P0||T5||HS||Dg(this.state))return;let u=WV(VS,c.clientX-this.state.offsetLeft,c.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(u?Wa(this.interactiveCanvas):Xl(this.interactiveCanvas,this.state));let h=On(c,this.state),{x:g,y}=h;if(!this.state.newElement&&SOe(this.state.activeTool.type)){let{originOffset:R,snapLines:P}=kOe(this.scene.getNonDeletedElements(),this,{x:g,y},c,this.scene.getNonDeletedElementsMap());this.setState(_=>{let O=w5(_.snapLines,P),V=_.originSnapOffset?w5(_.originSnapOffset,R):R;return _.snapLines===O&&_.originSnapOffset===V?null:{snapLines:O,originSnapOffset:V}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(R=>R.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){let R=We.handlePointerMove(c,g,y,this,this.scene.getNonDeletedElementsMap());R&&R!==this.state.editingLinearElement&&fi.flushSync(()=>{this.setState({editingLinearElement:R})}),(R==null?void 0:R.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(h,R.elbowed):fi.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(KJ(this.state.activeTool.type)){let{newElement:R}=this.state;hc(R,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(R,[h],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(h,!1)}if(this.state.multiElement){let{multiElement:R}=this.state,{x:P,y:_}=R,{points:O,lastCommittedPoint:V}=R,j=O[O.length-1];if(Xl(this.interactiveCanvas,this.state),j===V)cn(D(g-P,y-_),j)>=B3?Ue(R,{points:[...O,D(g-P,y-_)]},!1):vn(this.interactiveCanvas,gn.POINTER);else if(O.length>2&&V&&cn(D(g-P,y-_),V)<B3)vn(this.interactiveCanvas,gn.POINTER),Ue(R,{points:O.slice(0,-1)},!1);else{let[F,z]=Yr(g,y,c[J.CTRL_OR_CMD]||Ge(R)?null:this.getEffectiveGridSize()),[H,G]=(R==null?void 0:R.lastCommittedPoint)??[0,0],W=F-P-H,B=z-_-G;C2(c)&&({width:W,height:B}=UM(H+P,G+_,F,z)),Yf(O,this.state.zoom.value)&&vn(this.interactiveCanvas,gn.POINTER),Ue(R,{points:[...O.slice(0,-1),D(H+W,G+B)]},!1,{isDragging:!0}),this.triggerRender(!1)}return}if(c.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;let U=this.scene.getNonDeletedElements(),x=this.scene.getSelectedElements(this.state);if(x.length===1&&!u&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,g,y),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((E=this.state.openDialog)==null?void 0:E.name)!=="elementLinkSelector"&&!(x.length===1&&Ge(x[0]))){let R=hH(U,this.state,g,y,this.state.zoom,c.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(R&&R.transformHandleType){vn(this.interactiveCanvas,mH(R));return}}}else if(x.length>1&&!u&&((k=this.state.openDialog)==null?void 0:k.name)!=="elementLinkSelector"){let R=pH(mn(x),g,y,this.state.zoom,c.pointerType,this.device);if(R){vn(this.interactiveCanvas,mH({transformHandleType:R}));return}}let v=this.getElementAtPosition(h.x,h.y);this.hitLinkElement=this.getElementLinkAtPosition(h,v),!Yl(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(vn(this.interactiveCanvas,gn.POINTER),aGe(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(NV(),v&&(v.link||eo(v))&&this.state.selectedElementIds[v.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?vn(this.interactiveCanvas,Ve(v)?gn.TEXT:gn.CROSSHAIR):this.state.viewModeEnabled?vn(this.interactiveCanvas,gn.GRAB):((M=this.state.openDialog)==null?void 0:M.name)==="elementLinkSelector"?vn(this.interactiveCanvas,gn.AUTO):u?vn(this.interactiveCanvas,gn.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,g,y):c[J.CTRL_OR_CMD]?vn(this.interactiveCanvas,gn.AUTO):(v||this.isHittingCommonBoundingBoxOfSelectedElements(h,x))&&!(v!=null&&v.locked)&&(v&&ba(v)&&this.isIframeLikeElementCenter(v,c,g,y)?(vn(this.interactiveCanvas,gn.POINTER),this.setState({activeEmbeddable:{element:v,state:"hover"}})):(!v||!Ge(v))&&(vn(this.interactiveCanvas,gn.MOVE),((S=this.state.activeEmbeddable)==null?void 0:S.state)==="hover"&&this.setState({activeEmbeddable:null})))),((A=this.state.openDialog)==null?void 0:A.name)==="elementLinkSelector"&&v?this.setState(R=>({hoveredElementIds:w5(R.hoveredElementIds,Ss({editingGroupId:R.editingGroupId,selectedElementIds:{[v.id]:!0}},this.scene.getNonDeletedElements(),R,this).selectedElementIds)})):((I=this.state.openDialog)==null?void 0:I.name)==="elementLinkSelector"&&!v&&this.setState(R=>({hoveredElementIds:w5(R.hoveredElementIds,{})})))}),Q(this,"handleEraser",(c,d,u)=>{this.eraserTrail.addPointToPath(u.x,u.y);let h=!1,g=new Set,y=this.scene.getNonDeletedElements(),U=M=>{var S;for(let A of M){if(A.locked)return;if(c.altKey?this.elementsPendingErasure.delete(A.id)&&(h=!0):this.elementsPendingErasure.has(A.id)||(h=!0,this.elementsPendingErasure.add(A.id)),h&&((S=A.groupIds)==null?void 0:S.length)){let I=A.groupIds.at(-1);if(!g.has(I)){g.add(I);let R=Vn(y,I);for(let P of R)c.altKey?this.elementsPendingErasure.delete(P.id):this.elementsPendingErasure.add(P.id)}}}},x=cn(D(d.lastCoords.x,d.lastCoords.y),D(u.x,u.y)),v=this.getElementHitThreshold(),E={...d.lastCoords},k=0;for(;k<=x;){let M=this.getElementsAtPosition(E.x,E.y);if(U(M),k===x)break;k=Math.min(k+v,x);let S=k/x,A=(1-S)*E.x+S*u.x,I=(1-S)*E.y+S*u.y;E.x=A,E.y=I}if(d.lastCoords.x=u.x,d.lastCoords.y=u.y,h){for(let M of this.scene.getNonDeletedElements())Xn(M)&&(this.elementsPendingErasure.has(M.id)||this.elementsPendingErasure.has(M.containerId))&&(c.altKey?(this.elementsPendingErasure.delete(M.id),this.elementsPendingErasure.delete(M.containerId)):(this.elementsPendingErasure.add(M.id),this.elementsPendingErasure.add(M.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.triggerRender()}}),Q(this,"handleTouchMove",c=>{I5=!0}),Q(this,"handleCanvasPointerDown",c=>{var v,E,k;let d=c.target;if(d.setPointerCapture&&d.setPointerCapture(c.pointerId),this.maybeCleanupAfterMissingPointerUp(c.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(M=>({searchMatches:M.searchMatches.map(S=>({...S,focus:!1}))})),pl.set(goe,null)),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(c),c.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){let M=this.state.newElement;this.updateScene({...M.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(S=>S.id!==M.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:an(Object.keys(this.state.selectedElementIds).filter(S=>S!==M.id).reduce((S,A)=>(S[A]=this.state.selectedElementIds[A],S),{}),this.state)},captureUpdate:((v=this.state.openDialog)==null?void 0:v.name)==="elementLinkSelector"?pe.EVENTUALLY:pe.NEVER});return}let u=document.getSelection();if(u!=null&&u.anchorNode&&u.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(c),!this.state.penDetected&&c.pointerType==="pen"&&this.setState(M=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(c.pointerType)&&(this.device=F3(this.device,{isTouchScreen:!0})),T5||(this.lastPointerDownEvent=c,this.handleCanvasPanUsingWheelOrSpaceDrag(c)))return;if(this.setState({lastPointerDownWith:c.pointerType,cursorButton:"down"}),this.savePointer(c.clientX,c.clientY,"down"),c.button===Zd.ERASER&&this.state.activeTool.type!==ci.eraser){this.setState({activeTool:jr(this.state,{type:ci.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(c);let M=()=>{S(),A==null||A(),Yl(this.state)&&this.setState({activeTool:jr(this.state,{...this.state.activeTool.lastActiveTool||{type:ci.selection},lastActiveToolBeforeEraser:null})})},S=rr(window,"pointerup",M,{once:!0}),A;requestAnimationFrame(()=>{A=this.missingPointerEventCleanupEmitter.once(M)})});return}if(c.button!==Zd.MAIN&&c.button!==Zd.TOUCH&&c.button!==Zd.ERASER||on.pointers.size>1)return;let h=this.initialPointerDownState(c);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(c,h)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(c),this.handleSelectionOnPointerDown(c,h))||!(!this.state.penMode||c.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(c,h);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(c,this.state.activeTool.type,h);else if(this.state.activeTool.type==="image"){vn(this.interactiveCanvas,gn.CROSSHAIR);let M=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!M)return;this.setState({newElement:M,pendingImageElementId:null,multiElement:null});let{x:S,y:A}=On(c,this.state),I=this.getTopLayerFrameAtSceneCoords({x:S,y:A});Ue(M,{x:S,y:A,frameId:I?I.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(c,this.state.activeTool.type,h):this.state.activeTool.type==="custom"?Xl(this.interactiveCanvas,this.state):this.state.activeTool.type===ci.frame||this.state.activeTool.type===ci.magicframe?this.createFrameElementOnPointerDown(h,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(h.lastCoords.x,h.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,h);(k=(E=this.props)==null?void 0:E.onPointerDown)==null||k.call(E,this.state.activeTool,h),this.onPointerDownEmitter.trigger(this.state.activeTool,h,c),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(h.lastCoords.x,h.lastCoords.y);let g=this.onPointerMoveFromPointerDownHandler(h),y=this.onPointerUpFromPointerDownHandler(h),U=this.onKeyDownFromPointerDownHandler(h),x=this.onKeyUpFromPointerDownHandler(h);this.missingPointerEventCleanupEmitter.once(M=>y(M||c.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener("pointermove",g),window.addEventListener("pointerup",y),window.addEventListener("keydown",U),window.addEventListener("keyup",x),h.eventListeners.onMove=g,h.eventListeners.onUp=y,h.eventListeners.onKeyUp=x,h.eventListeners.onKeyDown=U)}),Q(this,"handleCanvasPointerUp",c=>{var h;this.removePointer(c),this.lastPointerUpEvent=c;let d=On({clientX:c.clientX,clientY:c.clientY},this.state),u=c.timeStamp-(((h=this.lastPointerDownEvent)==null?void 0:h.timeStamp)??0);if(this.device.editor.isMobile&&u<300){let g=this.getElementAtPosition(d.x,d.y);if(ba(g)&&this.isIframeLikeElementCenter(g,c,d.x,d.y)){this.handleEmbeddableCenterClick(g);return}}if(this.device.isTouchScreen){let g=this.getElementAtPosition(d.x,d.y);this.hitLinkElement=this.getElementLinkAtPosition(d,g)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?u<300&&ba(this.hitLinkElement)&&!Dte(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,D(d.x,d.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(c,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})}),Q(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",c=>{c.pointerType==="touch"&&(I5=!1,Gd?I5=!0:Gd=window.setTimeout(()=>{Gd=0,I5||this.handleCanvasContextMenu(c)},sMe))}),Q(this,"resetContextMenuTimer",()=>{clearTimeout(Gd),Gd=0,I5=!1}),Q(this,"maybeCleanupAfterMissingPointerUp",c=>{D0==null||D0(),this.missingPointerEventCleanupEmitter.trigger(c).clear()}),Q(this,"handleCanvasPanUsingWheelOrSpaceDrag",c=>{if(!(on.pointers.size<=1&&(c.button===Zd.WHEEL||c.button===Zd.MAIN&&P0||Dg(this.state)||this.state.viewModeEnabled)))return!1;T5=!0,this.focusContainer(),this.state.editingTextElement||c.preventDefault();let d=!1,u=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);vn(this.interactiveCanvas,gn.GRABBING);let{clientX:h,clientY:g}=c,y=jS(x=>{let v=h-x.clientX,E=g-x.clientY;if(h=x.clientX,g=x.clientY,u&&!d&&(Math.abs(v)>1||Math.abs(E)>1)){d=!0;let k=S=>{document.body.removeEventListener("paste",k),S.stopPropagation()},M=()=>{setTimeout(()=>{document.body.removeEventListener("paste",k),window.removeEventListener("pointerup",M)},100)};document.body.addEventListener("paste",k),window.addEventListener("pointerup",M)}this.translateCanvas({scrollX:this.state.scrollX-v/this.state.zoom.value,scrollY:this.state.scrollY-E/this.state.zoom.value})}),U=gr(D0=()=>{D0=null,T5=!1,P0||(this.state.viewModeEnabled?vn(this.interactiveCanvas,gn.GRAB):Xl(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(c.clientX,c.clientY,"up"),window.removeEventListener("pointermove",y),window.removeEventListener("pointerup",U),window.removeEventListener("blur",U),y.flush()});return window.addEventListener("blur",U),window.addEventListener("pointermove",y,{passive:!0}),window.addEventListener("pointerup",U),!0}),Q(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}),Q(this,"handleSelectionOnPointerDown",(c,d)=>{var u;if(this.state.activeTool.type==="selection"){let h=this.scene.getNonDeletedElements(),g=this.scene.getNonDeletedElementsMap(),y=this.scene.getSelectedElements(this.state);if(y.length===1&&!this.state.editingLinearElement&&!Ge(y[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){let U=hH(h,this.state,d.origin.x,d.origin.y,this.state.zoom,c.pointerType,this.scene.getNonDeletedElementsMap(),this.device);U!=null&&(U.transformHandleType==="rotation"?(this.setState({resizingElement:U.element}),d.resize.handleType=U.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:U.element}),d.resize.handleType=U.transformHandleType))}else y.length>1&&(d.resize.handleType=pH(mn(y),d.origin.x,d.origin.y,this.state.zoom,c.pointerType,this.device));if(d.resize.handleType)d.resize.isResizing=!0,d.resize.offset=dl(kBe(d.resize.handleType,y,g,d.origin.x,d.origin.y)),y.length===1&&xt(y[0])&&y[0].points.length===2&&(d.resize.arrowDirection=SBe(d.resize.handleType,y[0]));else{if(this.state.selectedLinearElement){let v=this.state.editingLinearElement||this.state.selectedLinearElement,E=We.handlePointerDown(c,this,this.store,d.origin,v,this.scene);if(E.hitElement&&(d.hit.element=E.hitElement),E.linearElementEditor&&(this.setState({selectedLinearElement:E.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:E.linearElementEditor})),E.didAddPoint)return!0}if(d.hit.element=d.hit.element??this.getElementAtPosition(d.origin.x,d.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(d.origin,d.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((u=d.hit.element)==null?void 0:u.id)!==this.state.croppingElementId&&this.finishImageCropping(),d.hit.element&&this.getElementLinkAtPosition({x:d.origin.x,y:d.origin.y},d.hit.element))return!1;d.hit.allHitElements=this.getElementsAtPosition(d.origin.x,d.origin.y);let U=d.hit.element,x=d.hit.allHitElements.some(v=>this.isASelectedElement(v));if((U===null||!x)&&!c.shiftKey&&!d.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(U),this.state.editingLinearElement)this.setState({selectedElementIds:an({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(U!=null){if(c[J.CTRL_OR_CMD])return this.state.selectedElementIds[U.id]||(d.hit.wasAddedToSelection=!0),this.setState(v=>({...fOe(v,U),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[U.id]||(this.state.editingGroupId&&!_b(U,this.state.editingGroupId)&&this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!x&&!d.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(v=>{var M;let E={...v.selectedElementIds,[U.id]:!0},k=[];if(Object.keys(v.selectedElementIds).forEach(S=>{let A=this.scene.getElement(S);A&&k.push(A)}),ht(U))Rc(k,U.id).forEach(S=>{delete E[S.id]});else if(U.frameId)E[U.frameId]&&delete E[U.id];else{let S=U.groupIds,A=new Set(S.flatMap(I=>Vn(this.scene.getNonDeletedElements(),I)).filter(I=>ht(I)).map(I=>I.id));A.size>0&&k.forEach(I=>{I.frameId&&A.has(I.frameId)&&(delete E[I.id],I.groupIds.flatMap(R=>Vn(this.scene.getNonDeletedElements(),R)).forEach(R=>{delete E[R.id]}))})}return((M=v.openDialog)==null?void 0:M.name)==="elementLinkSelector"&&(U.groupIds.some(S=>v.selectedGroupIds[S])||(E={[U.id]:!0})),{...Ss({editingGroupId:v.editingGroupId,selectedElementIds:E},this.scene.getNonDeletedElements(),v,this),showHyperlinkPopup:U.link||eo(U)?"info":!1}}),d.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1}),Q(this,"handleTextOnPointerDown",(c,d)=>{if(this.state.editingTextElement)return;let u=d.origin.x,h=d.origin.y,g=this.getElementAtPosition(u,h,{includeBoundTextElement:!0}),y=this.getTextBindableContainerAtPosition(u,h);Ma(g)&&(y=g,u=g.x+g.width/2,h=g.y+g.height/2),this.startTextEditing({sceneX:u,sceneY:h,insertAtParentCenter:!c.altKey,container:y,autoEdit:!1}),Wa(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:jr(this.state,{type:"selection"})})}),Q(this,"handleFreeDrawElementOnPointerDown",(c,d,u)=>{let[h,g]=Yr(u.origin.x,u.origin.y,null),y=this.getTopLayerFrameAtSceneCoords({x:h,y:g}),U=c.pressure===.5,x=HOe({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:U,locked:!1,frameId:y?y.id:null,points:[D(0,0)],pressures:U?[]:[c.pressure]});this.scene.insertElement(x),this.setState(E=>{let k={...E.selectedElementIds};return delete k[x.id],{selectedElementIds:an(k,E)}});let v=hl(u.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:x,startBoundElement:v,suggestedBindings:[]})}),Q(this,"insertIframeElement",({sceneX:c,sceneY:d,width:u,height:h})=>{var x;let[g,y]=Yr(c,d,(x=this.lastPointerDownEvent)!=null&&x[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=FOe({type:"iframe",x:g,y,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:u,height:h});return this.scene.insertElement(U),U}),Q(this,"insertEmbeddableElement",({sceneX:c,sceneY:d,link:u})=>{var x;let[h,g]=Yr(c,d,(x=this.lastPointerDownEvent)!=null&&x[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=tm(u);if(!y)return;y.error instanceof URIError&&this.setToast({message:$("toast.unrecognizedLinkFormat"),closable:!0});let U=R$({type:"embeddable",x:h,y:g,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:y.intrinsicSize.w,height:y.intrinsicSize.h,link:u});return this.scene.insertElement(U),U}),Q(this,"createImageElement",({sceneX:c,sceneY:d,addToFrameUnderCursor:u=!0})=>{var U;let[h,g]=Yr(c,d,(U=this.lastPointerDownEvent)!=null&&U[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=u?this.getTopLayerFrameAtSceneCoords({x:h,y:g}):null;return xte({type:"image",x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:y?y.id:null})}),Q(this,"handleLinearElementOnPointerDown",(c,d,u)=>{if(this.state.multiElement){let{multiElement:h}=this.state;if(h.type==="line"&&Yf(h.points,this.state.zoom.value)){Ue(h,{lastCommittedPoint:h.points[h.points.length-1]}),this.actionManager.executeAction($a);return}if(Ge(h)&&h.points.length>1){Ue(h,{lastCommittedPoint:h.points[h.points.length-1]}),this.actionManager.executeAction($a);return}let{x:g,y,lastCommittedPoint:U}=h;if(h.points.length>1&&U&&cn(D(u.origin.x-g,u.origin.y-y),U)<B3){this.actionManager.executeAction($a);return}this.setState(x=>({selectedElementIds:an({...x.selectedElementIds,[h.id]:!0},x)})),Ue(h,{lastCommittedPoint:h.points[h.points.length-1]}),vn(this.interactiveCanvas,gn.POINTER)}else{let[h,g]=Yr(u.origin.x,u.origin.y,c[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=this.getTopLayerFrameAtSceneCoords({x:h,y:g}),{currentItemStartArrowhead:U,currentItemEndArrowhead:x}=this.state,[v,E]=d==="arrow"?[U,x]:[null,null],k=d==="arrow"?AN({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===Ei.round?{type:ei.PROPORTIONAL_RADIUS}:null,startArrowhead:v,endArrowhead:E,locked:!1,frameId:y?y.id:null,elbowed:this.state.currentItemArrowType===Ei.elbow,fixedSegments:this.state.currentItemArrowType===Ei.elbow?[]:null}):Kh({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:ei.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:y?y.id:null});this.setState(S=>{let A={...S.selectedElementIds};return delete A[k.id],{selectedElementIds:an(A,S)}}),Ue(k,{points:[...k.points,D(0,0)]});let M=hl(u.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,Ge(k),Ge(k));this.scene.insertElement(k),this.setState({newElement:k,startBoundElement:M,suggestedBindings:[]})}}),Q(this,"createGenericElementOnPointerDown",(c,d)=>{var x;let[u,h]=Yr(d.origin.x,d.origin.y,(x=this.lastPointerDownEvent)!=null&&x[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g=this.getTopLayerFrameAtSceneCoords({x:u,y:h}),y={x:u,y:h,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(c),locked:!1,frameId:g?g.id:null},U;c==="embeddable"?U=R$({type:"embeddable",...y}):U=Ic({type:c,...y}),U.type==="selection"?this.setState({selectionElement:U}):(this.scene.insertElement(U),this.setState({multiElement:null,newElement:U}))}),Q(this,"createFrameElementOnPointerDown",(c,d)=>{var U;let[u,h]=Yr(c.origin.x,c.origin.y,(U=this.lastPointerDownEvent)!=null&&U[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g={x:u,y:h,opacity:this.state.currentItemOpacity,locked:!1,...or},y=d===ci.magicframe?uM(g):CN(g);this.scene.insertElement(y),this.setState({multiElement:null,newElement:y})}),Q(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()}),Q(this,"eraseElements",()=>{let c=!1,d=this.scene.getElementsIncludingDeleted().map(u=>this.elementsPendingErasure.has(u.id)||u.frameId&&this.elementsPendingErasure.has(u.frameId)||Xn(u)&&this.elementsPendingErasure.has(u.containerId)?(c=!0,St(u,{isDeleted:!0})):u);this.elementsPendingErasure=new Set,c&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(d))}),Q(this,"initializeImage",async({imageFile:c,imageElement:d,showCursorImagePreview:u=!1})=>{var x,v,E,k,M;if(!Yh(c))throw new Error($("errors.unsupportedFileType"));let h=c.type;if(vn(this.interactiveCanvas,"wait"),h===ft.svg)try{c=UH(H$(await c.text()),c.name)}catch(S){throw console.warn(S),new Error($("errors.svgImageInsertError"))}let g=await(((v=(x=this.props).generateIdForFile)==null?void 0:v.call(x,c))||jBe(c));if(!g)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error($("errors.imageInsertError"));if(!((E=this.files[g])!=null&&E.dataURL)){try{c=await vM(c,{maxWidthOrHeight:uMe})}catch(S){console.error("Error trying to resizing image file on insertion",S)}if(c.size>Pz)throw new Error($("errors.fileTooBig",{maxSize:`${Math.trunc(Pz/1024/1024)}MB`}))}if(u){let S=(k=this.files[g])==null?void 0:k.dataURL,A=S&&FBe(S);this.setImagePreviewCursor(A||c)}let y=((M=this.files[g])==null?void 0:M.dataURL)||await yH(c),U=Ue(d,{fileId:g},!1);return new Promise(async(S,A)=>{var I;try{this.addMissingFiles([{mimeType:h,id:g,dataURL:y,created:Date.now(),lastRetrieved:Date.now()}]);let R=this.imageCache.get(g);R||(this.addNewImagesToImageCache(),await this.updateImageCache([U])),(R==null?void 0:R.image)instanceof Promise&&await R.image,this.state.pendingImageElementId!==U.id&&((I=this.state.newElement)==null?void 0:I.id)!==U.id&&this.initializeImageDimensions(U,!0),S(U)}catch(R){console.error(R),A(new Error($("errors.imageInsertError")))}finally{u||Wa(this.interactiveCanvas)}})}),Q(this,"insertImageElement",async(c,d,u)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:$("errors.imageToolNotSupported")});return}this.scene.insertElement(c);try{return await this.initializeImage({imageFile:d,imageElement:c,showCursorImagePreview:u})}catch(h){return Ue(c,{isDeleted:!0}),this.actionManager.executeAction($a),this.setState({errorMessage:h.message||$("errors.imageInsertError")}),null}}),Q(this,"setImagePreviewCursor",async c=>{let d;try{d=await vM(c,{maxWidthOrHeight:96})}catch(h){throw h.cause==="UNSUPPORTED"?new Error($("errors.unsupportedFileType")):h}let u=await yH(d);if(c.type===ft.svg){let h=await Ite(u),g=Math.min(h.height,96),y=g*(h.width/h.height);y>96&&(y=96,g=y*(h.height/h.width));let U=document.createElement("canvas");U.height=g,U.width=y,U.getContext("2d").drawImage(h,0,0,y,g),u=U.toDataURL(ft.svg)}this.state.pendingImageElementId&&vn(this.interactiveCanvas,`url(${u}) 4 4, auto`)}),Q(this,"onImageAction",async({insertOnCanvasDirectly:c})=>{try{let d=this.state.width/2+this.state.offsetLeft,u=this.state.height/2+this.state.offsetTop,{x:h,y:g}=On({clientX:d,clientY:u},this.state),y=await TN({description:"Image",extensions:Object.keys(Pg)}),U=this.createImageElement({sceneX:h,sceneY:g,addToFrameUnderCursor:!1});c?(this.insertImageElement(U,y),this.initializeImageDimensions(U),this.setState({selectedElementIds:an({[U.id]:!0},this.state)},()=>{this.actionManager.executeAction($a)})):this.setState({pendingImageElementId:U.id},()=>{this.insertImageElement(U,y,!0)})}catch(d){d.name!=="AbortError"?console.error(d):console.warn(d),this.setState({pendingImageElementId:null,newElement:null,activeTool:jr(this.state,{type:"selection"})},()=>{this.actionManager.executeAction($a)})}}),Q(this,"initializeImageDimensions",(c,d=!1)=>{var h;let u=ma(c)&&((h=this.imageCache.get(c.fileId))==null?void 0:h.image);if(!u||u instanceof Promise){if(c.width<$0/this.state.zoom.value&&c.height<$0/this.state.zoom.value){let g=100/this.state.zoom.value;Ue(c,{x:c.x-g/2,y:c.y-g/2,width:g,height:g})}return}if(d||c.width<$0/this.state.zoom.value&&c.height<$0/this.state.zoom.value){let g=Math.max(this.state.height-120,160),y=Math.min(g,Math.floor(this.state.height*.5)/this.state.zoom.value),U=Math.min(u.naturalHeight,y),x=U*(u.naturalWidth/u.naturalHeight),v=c.x+c.width/2-x/2,E=c.y+c.height/2-U/2;Ue(c,{x:v,y:E,width:x,height:U,crop:null})}}),Q(this,"updateImageCache",async(c,d=this.files)=>{let{updatedFiles:u,erroredFiles:h}=await Nte({imageCache:this.imageCache,fileIds:c.map(g=>g.fileId),files:d});if(u.size||h.size)for(let g of c)u.has(g.fileId)&&lr.delete(g);return h.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(g=>ma(g)&&h.has(g.fileId)?St(g,{status:"error"}):g)),{updatedFiles:u,erroredFiles:h}}),Q(this,"addNewImagesToImageCache",async(c=Rte(this.scene.getNonDeletedElements()),d=this.files)=>{let u=c.filter(h=>!h.isDeleted&&!this.imageCache.has(h.fileId));if(u.length){let{updatedFiles:h}=await this.updateImageCache(u,d);h.size&&this.scene.triggerUpdate()}}),Q(this,"scheduleImageRefresh",Sy(()=>{this.addNewImagesToImageCache()},rMe)),Q(this,"updateBindingEnabledOnPointerMove",c=>{let d=BLe(c);this.state.isBindingEnabled!==d&&this.setState({isBindingEnabled:d})}),Q(this,"maybeSuggestBindingAtCursor",(c,d)=>{let u=hl(c,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,d);this.setState({suggestedBindings:u!=null?[u]:[]})}),Q(this,"maybeSuggestBindingsForLinearElementAtCoords",(c,d,u)=>{if(!d.length)return;let h=d.reduce((g,y)=>{let U=hl(y,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,Ge(c),Ge(c));return U!=null&&!Qee(c,u==null?void 0:u.id,U)&&g.push(U),g},[]);this.setState({suggestedBindings:h})}),Q(this,"handleInteractiveCanvasRef",c=>{var d,u;c!==null?(this.interactiveCanvas=c,this.interactiveCanvas.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener("touchend",this.onTouchEnd)):((d=this.interactiveCanvas)==null||d.removeEventListener("touchstart",this.onTouchStart),(u=this.interactiveCanvas)==null||u.removeEventListener("touchend",this.onTouchEnd))}),Q(this,"handleAppOnDrop",async c=>{var U,x,v,E;let{file:d,fileHandle:u}=await HBe(c),{x:h,y:g}=On(c,this.state);try{if(Yh(d)&&this.isToolSupported("image")){if((d==null?void 0:d.type)===ft.png||(d==null?void 0:d.type)===ft.svg)try{let M=await bne(d,this.state,this.scene.getElementsIncludingDeleted(),u);this.syncActionResult({...M,appState:{...M.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:pe.IMMEDIATELY});return}catch(M){if(M.name!=="EncodingError")throw new Error($("alerts.couldNotLoadInvalidFile"))}let k=this.createImageElement({sceneX:h,sceneY:g});this.insertImageElement(k,d),this.initializeImageDimensions(k),this.setState({selectedElementIds:an({[k.id]:!0},this.state)});return}}catch(k){return this.setState({isLoading:!1,errorMessage:k.message})}let y=c.dataTransfer.getData(ft.excalidrawlib);if(y&&typeof y=="string"){try{let k=yne(y);this.addElementsFromPasteOrLibrary({elements:Use(k),position:c,files:null})}catch(k){this.setState({errorMessage:k.message})}return}if(d&&await this.loadFileToCanvas(d,u),(x=(U=c.dataTransfer)==null?void 0:U.types)==null?void 0:x.includes("text/plain")){let k=(v=c.dataTransfer)==null?void 0:v.getData("text");if(k&&K3(k,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(k)||((E=tm(k))==null?void 0:E.type)==="video")){let M=this.insertEmbeddableElement({sceneX:h,sceneY:g,link:Lo(k)});M&&this.setState({selectedElementIds:{[M.id]:!0}})}}}),Q(this,"loadFileToCanvas",async(c,d)=>{c=await aR(c);try{let u=this.scene.getElementsIncludingDeleted(),h;try{h=await gne(c,this.state,u,d)}catch(g){let y=g instanceof fh;if(y&&g.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:$("errors.imageToolNotSupported")});return}let U=$(y?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:U})}if(!h)return;h.type===ft.excalidraw?(Jf(u.concat(h.data.elements)),this.store.updateSnapshot(mt(u),this.state),this.setState({isLoading:!0}),this.syncActionResult({...h.data,appState:{...h.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:pe.IMMEDIATELY})):h.type===ft.excalidrawlib&&await this.library.updateLibrary({libraryItems:c,merge:!0,openLibraryMenu:!0}).catch(g=>{console.error(g),this.setState({errorMessage:$("errors.importLibraryError")})})}catch(u){this.setState({isLoading:!1,errorMessage:u.message})}}),Q(this,"handleCanvasContextMenu",c=>{if(c.preventDefault(),("pointerType"in c.nativeEvent&&c.nativeEvent.pointerType==="touch"||"pointerType"in c.nativeEvent&&c.nativeEvent.pointerType==="pen"&&c.button!==Zd.SECONDARY)&&this.state.activeTool.type!=="selection")return;let{x:d,y:u}=On(c,this.state),h=this.getElementAtPosition(d,u,{preferSelected:!0,includeLockedElements:!0}),g=this.scene.getSelectedElements(this.state),y=this.isHittingCommonBoundingBoxOfSelectedElements({x:d,y:u},g),U=h||y?"element":"canvas",x=this.excalidrawContainerRef.current,{top:v,left:E}=x.getBoundingClientRect(),k=c.clientX-E,M=c.clientY-v;jn("contextMenu","openContextMenu",U),this.setState({...h&&!this.state.selectedElementIds[h.id]?{...this.state,...Ss({editingGroupId:this.state.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:xt(h)?new We(h):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:M,left:k,items:this.getContextMenuItems(U)}})})}),Q(this,"maybeDragNewGenericElement",(c,d,u=!0)=>{var S,A,I;let h=this.state.selectionElement,g=c.lastCoords;if(h&&this.state.activeTool.type!=="eraser"){bH({newElement:h,elementType:this.state.activeTool.type,originX:c.origin.x,originY:c.origin.y,x:g.x,y:g.y,width:ss(c.origin.x,g.x),height:ss(c.origin.y,g.y),shouldMaintainAspectRatio:v5(d),shouldResizeFromCenter:iS(d),zoom:this.state.zoom.value,informMutation:u});return}let y=this.state.newElement;if(!y)return;let[U,x]=Yr(g.x,g.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),v=ma(y)&&((S=this.imageCache.get(y.fileId))==null?void 0:S.image),E=v&&!(v instanceof Promise)?v.width/v.height:null;this.maybeCacheReferenceSnapPoints(d,[y]);let{snapOffset:k,snapLines:M}=EOe(y,this,d,{x:c.originInGrid.x+(((A=this.state.originSnapOffset)==null?void 0:A.x)??0),y:c.originInGrid.y+(((I=this.state.originSnapOffset)==null?void 0:I.y)??0)},{x:U-c.originInGrid.x,y:x-c.originInGrid.y},this.scene.getNonDeletedElementsMap());U+=k.x,x+=k.y,this.setState({snapLines:M}),bH({newElement:y,elementType:this.state.activeTool.type,originX:c.originInGrid.x,originY:c.originInGrid.y,x:U,y:x,width:ss(c.originInGrid.x,U),height:ss(c.originInGrid.y,x),shouldMaintainAspectRatio:ln(y)?!v5(d):v5(d),shouldResizeFromCenter:iS(d),zoom:this.state.zoom.value,widthAspectRatio:E,originOffset:this.state.originSnapOffset,informMutation:u}),this.setState({newElement:y}),(this.state.activeTool.type===ci.frame||this.state.activeTool.type===ci.magicframe)&&this.setState({elementsToHighlight:Z3(this.scene.getNonDeletedElements(),y,this.state,this.scene.getNonDeletedElementsMap())})}),Q(this,"maybeHandleCrop",(c,d)=>{var x;if(!this.state.croppingElementId)return!1;let u=c.resize.handleType,h=c.lastCoords,[g,y]=Yr(h.x-c.resize.offset.x,h.y-c.resize.offset.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(u&&U&&ln(U)){let v=c.originalElements.get(U.id),E=ma(U)&&((x=this.imageCache.get(U.fileId))==null?void 0:x.image);if(v&&ln(v)&&E&&!(E instanceof Promise)){let[k,M]=Yr(h.x,h.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),S={x:k-c.originInGrid.x,y:M-c.originInGrid.y};this.maybeCacheReferenceSnapPoints(d,[U]);let{snapOffset:A,snapLines:I}=I$([U],[v],this,d,S,u);Ue(U,lLe(U,u,E.naturalWidth,E.naturalHeight,g+A.x,y+A.y,d.shiftKey?v.width/v.height:void 0)),uo(U,this.scene.getNonDeletedElementsMap(),{newSize:{width:U.width,height:U.height}}),this.setState({isCropping:u&&u!=="rotation",snapLines:I})}return!0}return!1}),Q(this,"maybeHandleResize",(c,d)=>{let u=this.scene.getSelectedElements(this.state),h=u.filter(E=>ht(E)),g=c.resize.handleType;if(h.length>0&&g==="rotation"||u.length===1&&Ge(u[0])||this.state.croppingElementId)return!1;this.setState({isResizing:g&&g!=="rotation",isRotating:g==="rotation",activeEmbeddable:null});let y=c.lastCoords,[U,x]=Yr(y.x-c.resize.offset.x,y.y-c.resize.offset.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),v=new Map;if(h.forEach(E=>{Rc(this.scene.getNonDeletedElements(),E.id).forEach(k=>{v.set(E.id+k.id,{x:k.x-E.x,y:k.y-E.y})})}),!this.state.selectedElementsAreBeingDragged){let[E,k]=Yr(y.x,y.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),M={x:E-c.originInGrid.x,y:k-c.originInGrid.y},S=[...c.originalElements.values()];this.maybeCacheReferenceSnapPoints(d,u);let{snapOffset:A,snapLines:I}=I$(u,Mt(S,this.state),this,d,M,g);U+=A.x,x+=A.y,this.setState({snapLines:I})}if(xBe(c.originalElements,g,u,this.scene.getElementsMapIncludingDeleted(),this.scene,C2(d),iS(d),u.some(E=>ln(E))?!v5(d):v5(d),U,x,c.resize.center.x,c.resize.center.y)){let E=oS(u,this.scene.getNonDeletedElementsMap(),this.state.zoom),k=new Set;return h.forEach(M=>{Z3(this.scene.getNonDeletedElements(),M,this.state,this.scene.getNonDeletedElementsMap()).forEach(S=>k.add(S))}),this.setState({elementsToHighlight:[...k],suggestedBindings:E}),!0}return!1}),Q(this,"getContextMenuItems",c=>{let d=[];return d.push(AV,CV),c==="canvas"?this.state.viewModeEnabled?[...d,TV,HM,cW,VM]:[kV,ai,AV,CV,MV,ai,VVe,dGe,ai,TV,QWe,HM,cW,VM]:(d.push(MV),this.state.viewModeEnabled?[ix,...d]:[ai,SV,ix,kV,ai,DYe,LYe,OYe,ai,MXe,ai,...d,ai,OWe,jWe,ai,FWe,vZe,JWe,eGe,rGe,zWe,ai,WWe,ai,FVe,zVe,$Ve,HVe,ai,YWe,ZWe,ai,AXe,ai,gse,Rse,ai,KVe,fGe,ai,Bie])}),Q(this,"handleWheel",gr(c=>{if(!(c.target instanceof HTMLCanvasElement||c.target instanceof HTMLTextAreaElement||c.target instanceof HTMLIFrameElement)){c[J.CTRL_OR_CMD]&&c.preventDefault();return}if(c.preventDefault(),T5)return;let{deltaX:d,deltaY:u}=c;if(c.metaKey||c.ctrlKey){let h=Math.sign(u),g=kw*100,y=Math.abs(u),U=u;y>g&&(U=g*h);let x=this.state.zoom.value-U/100;x+=Math.log10(Math.max(1,this.state.zoom.value))*-h*Math.min(1,y/20),this.translateCanvas(v=>({...hh({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:jf(x)},v),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(c.shiftKey){this.translateCanvas(({zoom:h,scrollX:g})=>({scrollX:g-(u||d)/h.value}));return}this.translateCanvas(({zoom:h,scrollX:g,scrollY:y})=>({scrollX:g-d/h.value,scrollY:y-u/h.value}))})),Q(this,"savePointer",(c,d,u)=>{var U,x;if(!c||!d)return;let{x:h,y:g}=On({clientX:c,clientY:d},this.state),y={x:h,y:g,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(x=(U=this.props).onPointerUpdate)==null||x.call(U,{pointer:y,button:u,pointersMap:on.pointers})}),Q(this,"resetShouldCacheIgnoreZoomDebounced",Og(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300)),Q(this,"updateDOMRect",c=>{var d;if((d=this.excalidrawContainerRef)!=null&&d.current){let u=this.excalidrawContainerRef.current,{width:h,height:g,left:y,top:U}=u.getBoundingClientRect(),{width:x,height:v,offsetTop:E,offsetLeft:k}=this.state;if(h===x&&g===v&&y===k&&U===E){c&&c();return}this.setState({width:h,height:g,offsetLeft:y,offsetTop:U},()=>{c&&c()})}}),Q(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});let n=Ac(),{excalidrawAPI:r,viewModeEnabled:i=!1,zenModeEnabled:s=!1,gridModeEnabled:o=!1,objectsSnapModeEnabled:a=!1,theme:l=n.theme,name:f=`${$("labels.untitled")}-${Fz()}`}=t;if(this.state={...n,theme:l,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:i,zenModeEnabled:s,objectsSnapModeEnabled:a,gridModeEnabled:o??n.gridModeEnabled,name:f,width:window.innerWidth,height:window.innerHeight},this.id=KI(),this.library=new wGe(this),this.actionManager=new RXe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new ed,this.canvas=document.createElement("canvas"),this.rc=f0.canvas(this.canvas),this.renderer=new gW(this.scene),this.visibleElements=[],this.store=new YOe,this.history=new BV,r){let c={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:d=>{this.actionManager.registerAction(d)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:d=>this.onChangeEmitter.on(d),onPointerDown:d=>this.onPointerDownEmitter.on(d),onPointerUp:d=>this.onPointerUpEmitter.on(d),onScrollChange:d=>this.onScrollChangeEmitter.on(d),onUserFollow:d=>this.onUserFollowEmitter.on(d)};typeof r=="function"?r(c):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new Hf(this.scene),this.history=new BV,this.actionManager.registerAll(dM),this.actionManager.registerAction(IXe(this.history,this.store)),this.actionManager.registerAction(NXe(this.history,this.store))}onWindowMessage(t){if(t.origin!=="https://player.vimeo.com"&&t.origin!=="https://www.youtube.com")return;let n=null;try{n=JSON.parse(t.data)}catch{}if(n)switch(t.origin){case"https://player.vimeo.com":if(n.method==="paused"){let r=null,i=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!i)break;for(let s of i)s.contentWindow===t.source&&(r=s.contentWindow);r==null||r.postMessage(JSON.stringify({method:n.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(n.event==="infoDelivery"&&n.info&&n.id&&typeof n.info.playerState=="number"){let r=n.id,i=n.info.playerState;Object.values(BU).includes(i)&&WS.set(r,i)}break}}cacheEmbeddableRef(t,n){n&&this.iFrameRefs.set(t.id,n)}getHTMLIFrameElement(t){return this.iFrameRefs.get(t.id)}handleEmbeddableCenterClick(t){var r,i,s,o;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===t&&((i=this.state.activeEmbeddable)==null?void 0:i.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:t,state:"active"},selectedElementIds:{[t.id]:!0},newElement:null,selectionElement:null})},100),ru(t)))return;let n=this.getHTMLIFrameElement(t);if(n!=null&&n.contentWindow){if(n.src.includes("youtube")){let a=WS.get(t.id);switch(a||(WS.set(t.id,BU.UNSTARTED),n.contentWindow.postMessage(JSON.stringify({event:"listening",id:t.id}),"*")),a){case BU.PLAYING:case BU.BUFFERING:(s=n.contentWindow)==null||s.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(o=n.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}n.src.includes("player.vimeo.com")&&n.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(t,n,r,i){var s,o;return t&&!n.altKey&&!n.shiftKey&&!n.metaKey&&!n.ctrlKey&&(((s=this.state.activeEmbeddable)==null?void 0:s.element)!==t||((o=this.state.activeEmbeddable)==null?void 0:o.state)==="hover"||!this.state.activeEmbeddable)&&r>=t.x+t.width/3&&r<=t.x+2*t.width/3&&i>=t.y+t.height/3&&i<=t.y+2*t.height/3}renderEmbeddables(){let t=this.state.zoom.value,n=this.state.width,r=this.state.height,i=this.scene.getNonDeletedElements().filter(s=>eo(s)&&this.embedsValidationStatus.get(s.id)===!0||ru(s));return m.jsx(m.Fragment,{children:i.map(s=>{var h,g,y,U,x,v,E,k,M;let{x:o,y:a}=fl({sceneX:s.x,sceneY:s.y},this.state),l=r9(s,n,r,this.state,this.scene.getNonDeletedElementsMap()),f=this.initializedEmbeds.has(s.id);if(l&&!f&&this.initializedEmbeds.add(s.id),!(l||f))return null;let c;if(ru(s)){c=null;let S=(((h=s.customData)==null?void 0:h.generationData)??this.magicGenerations.get(s.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(S.status==="done"){let A=S.html;c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>A}}else if(S.status==="pending")c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>A2(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===Ft.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let A;S.code==="ERR_GENERATION_INTERRUPTED"?A="Generation was interrupted...":A=S.message||"Generation failed",c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>A2(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Pt.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${A}</h3>
                  `)}}}else c=tm(pte(s.link||""));let d=((g=this.state.activeEmbeddable)==null?void 0:g.element)===s&&((y=this.state.activeEmbeddable)==null?void 0:y.state)==="active",u=((U=this.state.activeEmbeddable)==null?void 0:U.element)===s&&((x=this.state.activeEmbeddable)==null?void 0:x.state)==="hover";return m.jsx("div",{className:Ke("excalidraw__embeddable-container",{"is-hovered":u}),style:{transform:l?`translate(${o-this.state.offsetLeft}px, ${a-this.state.offsetTop}px) scale(${t})`:"none",display:l?"block":"none",opacity:Bee(s,ho(s,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((v=this.state.openDialog)==null?void 0:v.name)==="elementLinkSelector"?PJ:1),"--embeddable-radius":`${bl(Math.min(s.width,s.height),s)}px`},children:m.jsxs("div",{className:"excalidraw__embeddable-container__inner",style:{width:l?`${s.width}px`:0,height:l?`${s.height}px`:0,transform:l?`rotate(${s.angle}rad)`:"none",pointerEvents:d?Ep.enabled:Ep.disabled},children:[u&&m.jsx("div",{className:"excalidraw__embeddable-hint",children:$("buttons.embeddableInteractionButton")}),m.jsx("div",{className:"excalidraw__embeddable__outer",style:{padding:`${s.strokeWidth}px`},children:(eo(s)?(k=(E=this.props).renderEmbeddable)==null?void 0:k.call(E,s,this.state):null)??m.jsx("iframe",{ref:S=>this.cacheEmbeddableRef(s,S),className:"excalidraw__embeddable",srcDoc:(c==null?void 0:c.type)==="document"?c.srcdoc(this.state.theme):void 0,src:(c==null?void 0:c.type)!=="document"?(c==null?void 0:c.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(M=c==null?void 0:c.sandbox)!=null&&M.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},s.id)})})}toggleOverscrollBehavior(t){document.documentElement.style.overscrollBehaviorX=t.type==="pointerenter"?"none":"auto"}render(){var c,d,u,h,g,y,U,x;let t=this.scene.getSelectedElements(this.state),{renderTopRightUI:n,renderCustomStats:r}=this.props,i=this.scene.getSceneNonce(),{elementsMap:s,visibleElements:o}=this.renderer.getRenderableElements({sceneNonce:i,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(c=this.state.newElement)==null?void 0:c.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=o;let a=this.scene.getNonDeletedElementsMap(),l="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",f=t[0];return m.jsx("div",{className:Ke("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":l?Ep.disabled:Ep.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:m.jsx(Poe.Provider,{value:this,children:m.jsx(Doe.Provider,{value:this.props,children:m.jsx(WR.Provider,{value:this.excalidrawContainerValue,children:m.jsx(VR.Provider,{value:this.device,children:m.jsx(KR.Provider,{value:this.setAppState,children:m.jsx(XR.Provider,{value:this.state,children:m.jsxs(GR.Provider,{value:this.scene.getNonDeletedElements(),children:[m.jsxs(YR.Provider,{value:this.actionManager,children:[m.jsx(RYe,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:Fb().code,renderTopRightUI:n,renderCustomStats:r,showExitZenModeBtn:typeof((u=this.props)==null?void 0:u.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),m.jsx("div",{className:"excalidraw-textEditorContainer"}),m.jsx("div",{className:"excalidraw-contextMenuContainer"}),m.jsx("div",{className:"excalidraw-eye-dropper-container"}),m.jsx(uZe,{trails:[this.laserTrails,this.eraserTrail]}),t.length===1&&((h=this.state.openDialog)==null?void 0:h.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&m.jsx(oGe,{element:f,elementsMap:a,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},f.id),this.props.aiEnabled!==!1&&t.length===1&&$3(f)&&m.jsx(bW,{element:f,elementsMap:s,children:m.jsx(zS,{title:$("labels.convertToCode"),icon:pee,checked:!1,onChange:()=>this.onMagicFrameGenerate(f,"button")})}),t.length===1&&ru(f)&&((y=(g=f.customData)==null?void 0:g.generationData)==null?void 0:y.status)==="done"&&m.jsxs(bW,{element:f,elementsMap:s,children:[m.jsx(zS,{title:$("labels.copySource"),icon:pN,checked:!1,onChange:()=>this.onIframeSrcCopy(f)}),m.jsx(zS,{title:"Enter fullscreen",icon:LIe,checked:!1,onChange:()=>{let v=this.getHTMLIFrameElement(f);if(v)try{v.requestFullscreen(),this.setState({activeEmbeddable:{element:f,state:"active"},selectedElementIds:{[f.id]:!0},newElement:null,selectionElement:null})}catch(E){console.warn(E),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&m.jsx(PYe,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&m.jsx(PXe,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:v=>{this.setState({contextMenu:null},()=>{this.focusContainer(),v==null||v()})}}),m.jsx(dZe,{canvas:this.canvas,rc:this.rc,elementsMap:s,allElementsMap:a,visibleElements:o,sceneNonce:i,selectionNonce:(U=this.state.selectionElement)==null?void 0:U.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:Pb(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&m.jsx(AZe,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:s,allElementsMap:a,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),m.jsx(lZe,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:s,visibleElements:o,allElementsMap:a,selectedElements:t,sceneNonce:i,selectionNonce:(x=this.state.selectionElement)==null?void 0:x.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&m.jsx(bZe,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(t){Object.assign(this.plugins,t)}async onMagicFrameGenerate(t,n){var o;let r=(o=this.plugins.diagramToCode)==null?void 0:o.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}let i=QN(this.scene.getNonDeletedElements(),t).filter(a=>!$3(a));if(!i.length){n==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),jn("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}let s=this.insertIframeElement({sceneX:t.x+t.width+30,sceneY:t.y,width:t.width,height:t.height});if(s){this.updateMagicGeneration({frameElement:s,data:{status:"pending"}}),this.setState({selectedElementIds:{[s.id]:!0}}),jn("ai","generate (start)","d2c");try{let{html:a}=await r({frame:t,children:i});if(jn("ai","generate (success)","d2c"),!a.trim()){this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}let l=a.includes("<!DOCTYPE html>")&&a.includes("</html>")?a.slice(a.indexOf("<!DOCTYPE html>"),a.indexOf("</html>")+7):a;this.updateMagicGeneration({frameElement:s,data:{status:"done",html:l}})}catch(a){jn("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:a.message||"Unknown error during generation"}})}}}onIframeSrcCopy(t){var n,r;((r=(n=t.customData)==null?void 0:n.generationData)==null?void 0:r.status)==="done"&&(Dy(t.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(t){let n=t??this.files;this.scene.getNonDeletedElements().forEach(r=>{ma(r)&&n[r.fileId]&&(this.imageCache.delete(r.fileId),lr.delete(r))})}async componentDidMount(){var t;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,(At.MODE===lo.TEST||At.DEV)&&(this.setState.bind(this),Object.defineProperties(window.h,{state:{configurable:!0,get:()=>this.state},setState:{configurable:!0,value:(...n)=>this.setState(...n)},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history},store:{configurable:!0,value:this.store},fonts:{configurable:!0,value:this.fonts}})),this.store.onStoreIncrementEmitter.on(n=>{this.history.record(n.elementsChange,n.appStateChange)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),Kf()||(this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints()),XA&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(t=this.resizeObserver)==null||t.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),GAe()&&!nTe()&&this.setState({errorMessage:m.jsx(BYe,{})})}componentWillUnmount(){var t,n;(t=window.launchQueue)==null||t.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new ed,this.fonts=new Hf(this.scene),this.renderer=new gW(this.scene),this.files={},this.imageCache.clear(),(n=this.resizeObserver)==null||n.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),lr.destroy(),hf.destroy(),clearTimeout(Gd),ti.clearCache(),Ss.clearCache(),Gd=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(rr(document,"keydown",this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(rr(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),rr(window,"message",this.onWindowMessage,!1),rr(document,"pointerup",this.removePointer,{passive:!1}),rr(document,"copy",this.onCopy,{passive:!1}),rr(document,"keyup",this.onKeyUp,{passive:!0}),rr(document,"pointermove",this.updateCurrentCursorPosition,{passive:!1}),rr(document.fonts,"loadingdone",t=>{let n=t.fontfaces;this.fonts.onLoaded(n)},{passive:!1}),rr(document,"gesturestart",this.onGestureStart,!1),rr(document,"gesturechange",this.onGestureChange,!1),rr(document,"gestureend",this.onGestureEnd,!1),rr(window,"focus",()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(rr(document,"fullscreenchange",this.onFullscreenChange,{passive:!1}),rr(document,"paste",this.pasteFromClipboard,{passive:!1}),rr(document,"cut",this.onCut,{passive:!1}),rr(window,"resize",this.onResize,!1),rr(window,"unload",this.onUnload,!1),rr(window,"blur",this.onBlur,!1),rr(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),rr(this.excalidrawContainerRef.current,"dragover",this.disableEvent,!1),rr(this.excalidrawContainerRef.current,"drop",this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(rr($Me(this.excalidrawContainerRef.current),"scroll",this.onScroll,{passive:!1})))}componentDidUpdate(t,n){var a,l,f,c,d,u,h,g,y,U;this.updateEmbeddables();let r=this.scene.getElementsIncludingDeleted(),i=this.scene.getElementsMapIncludingDeleted(),s=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),t.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),n.userToFollow&&!this.state.collaborators.has(n.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(n.zoom.value!==this.state.zoom.value||n.scrollX!==this.state.scrollX||n.scrollY!==this.state.scrollY)&&((l=(a=this.props)==null?void 0:a.onScrollChange)==null||l.call(a,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),n.userToFollow!==this.state.userToFollow&&(n.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:n.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Yl(this.state)&&this.setState({activeTool:jr(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&n.theme!==this.state.theme&&bte(this.interactiveCanvas,this.state.theme),n.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),t.langCode!==this.props.langCode&&this.updateLanguage(),Yl(n)&&!Yl(this.state)&&this.eraserTrail.endPath(),t.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),n.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((f=n.openDialog)==null?void 0:f.name)==="elementLinkSelector"||((c=this.state.openDialog)==null?void 0:c.name)==="elementLinkSelector")&&((d=n.openDialog)==null?void 0:d.name)!==((u=this.state.openDialog)==null?void 0:u.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),t.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),t.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(h=this.excalidrawContainerRef.current)==null||h.classList.toggle("theme--dark",this.state.theme===Ft.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction($a)}),(g=this.state.editingTextElement)!=null&&g.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});let{multiElement:o}=n;n.activeTool!==this.state.activeTool&&o!=null&&dh(this.state)&&hc(o,!1)&&cM(o,this.state,dl(We.getPointAtIndexGlobalCoordinates(o,-1,s)),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.store.commit(i,this.state),this.state.isLoading||((U=(y=this.props).onChange)==null||U.call(y,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){M5=!1}async addElementsFromMixedContentPaste(t,{isPlainPaste:n,sceneX:r,sceneY:i}){if(!n&&t.some(s=>s.type==="imageUrl")&&this.isToolSupported("image")){let s=t.filter(d=>d.type==="imageUrl").map(d=>d.value),o=await Promise.all(s.map(async d=>{try{return{file:await $Be(d)}}catch(u){let h=u.message;return u.cause==="FETCH_ERROR"?h=$("errors.failedToFetchImage"):u.cause==="UNSUPPORTED"&&(h=$("errors.unsupportedFileType")),{errorMessage:h}}})),a=i,l=!1,f={};for(let d of o)if(d.file){let u=this.createImageElement({sceneX:r,sceneY:a}),h=await this.insertImageElement(u,d.file);h&&(l||(l=!0,a-=h.height/2),Ue(h,{y:a},!1),a=u.y+u.height+25,f[u.id]=!0)}this.setState({selectedElementIds:an(f,this.state)});let c=o.find(d=>!!d.errorMessage);c&&c.errorMessage&&this.setState({errorMessage:c.errorMessage})}else{let s=t.filter(o=>o.type==="text");s.length&&this.addTextFromPaste(s.map(o=>o.value).join(`

`),n)}}addTextFromPaste(t,n=!1){let{x:r,y:i}=On({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),s={x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:t,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Ay,verticalAlign:I4,locked:!1},o=kn({fontSize:s.fontSize,fontFamily:s.fontFamily}),a=w1(s.fontFamily),[l,,f]=PLe(this.state),c=Math.max(Math.min((f-l)*.5,800),200),d=10,u=i,h=n?[t]:t.split(`
`),g=h.reduce((y,U,x)=>{var E;let v=Bg(U).trim();if(v.length){let k=this.getTopLayerFrameAtSceneCoords({x:r,y:u}),M=hs(v,o,a),S=M.width>c,A=S?D1(v,o,c):v;M=S?hs(A,o,a):M;let I=r-M.width/2,R=u-M.height/2,P=Bo({...s,x:I,y:R,text:A,originalText:v,lineHeight:a,autoResize:!S,frameId:k?k.id:null});y.push(P),u+=P.height+d}else(E=h[x-1])!=null&&E.trim()&&(u+=Ny(s.fontSize,a)+d);return y},[]);g.length!==0&&(this.scene.insertElements(g),this.setState({selectedElementIds:an(Object.fromEntries(g.map(y=>[y.id,!0])),this.state)}),!n&&g.length>1&&UW===!1&&!this.device.editor.isMobile&&(this.setToast({message:$("toast.pasteAsSingleElement",{shortcut:ye("CtrlOrCmd+Shift+V")}),duration:5e3}),UW=!0),this.store.shouldCaptureIncrement())}handleTextWysiwyg(t,{isExistingElement:n=!1}){let r=this.scene.getElementsMapIncludingDeleted(),i=(s,o)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(a=>a.id===t.id&&Ve(a)?St(a,{originalText:s,isDeleted:o??a.isDeleted,...Ute(a,Ni(a,r),r,s)}):a)])};wZe({id:t.id,canvas:this.canvas,getViewportCoords:(s,o)=>{let{x:a,y:l}=fl({sceneX:s,sceneY:o},this.state);return[a-this.state.offsetLeft,l-this.state.offsetTop]},onChange:gr(s=>{i(s,!1),wM(t)&&uo(t,this.scene.getNonDeletedElementsMap())}),onSubmit:gr(({viaKeyboard:s,nextOriginalText:o})=>{let a=!o.trim();if(i(o,a),!a&&s){let l=t.containerId?t.containerId:t.id;fi.flushSync(()=>{this.setState(f=>({selectedElementIds:an({...f.selectedElementIds,[l]:!0},f)}))})}a&&nte(this.scene.getNonDeletedElements(),[t]),(!a||n)&&this.store.shouldCaptureIncrement(),fi.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&Xl(this.interactiveCanvas,this.state),this.focusContainer()}),element:t,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),i(t.originalText,!1)}deselectElements(){this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(t,n){let r=this.getElementAtPosition(t,n,{includeBoundTextElement:!0});return r&&Ve(r)&&!r.isDeleted?r:null}getElementAtPosition(t,n,r){let i=this.getElementsAtPosition(t,n,r==null?void 0:r.includeBoundTextElement,r==null?void 0:r.includeLockedElements);if(i.length>1){if(r!=null&&r.preferSelected){for(let o=i.length-1;o>-1;o--)if(this.state.selectedElementIds[i[o].id])return i[o]}let s=i[i.length-1];return Fp({x:t,y:n,element:s,shape:yf(s,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:ht(s)?this.frameNameBoundsCache.get(s):null})?s:i[i.length-2]}return i.length===1?i[0]:null}getElementsAtPosition(t,n,r=!1,i=!1){let s=[],o=this.scene.getNonDeletedElementsMap();return(r&&i?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(a=>(i||!a.locked)&&(r||!(Ve(a)&&a.containerId)))).filter(a=>this.hitElement(t,n,a)).filter(a=>{let l=ho(a,o);return l&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?oH({x:t,y:n},l,o):!0}).filter(a=>ru(a)?(s.push(a),!1):!0).concat(s)}getElementHitThreshold(){return JAe/this.state.zoom.value}hitElement(t,n,r,i=!0){if(i&&this.state.selectedElementIds[r.id]&&cne([r],this.state)){let s=jDe(r,this.scene.getNonDeletedElementsMap(),ln(r)?0:this.getElementHitThreshold());if(V4(D(t,n),s))return!0}return Iee(t,n,Ree(r,this.scene.getNonDeletedElementsMap()))?!0:Fp({x:t,y:n,element:r,shape:yf(r,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:ht(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(t,n){let r=this.scene.getNonDeletedElements(),i=this.scene.getSelectedElements(this.state);if(i.length===1)return Gh(i[0],!1)?i[0]:null;let s=null;for(let o=r.length-1;o>=0;--o){if(r[o].isDeleted)continue;let[a,l,f,c]=wt(r[o],this.scene.getNonDeletedElementsMap());if(Tt(r[o])&&Fp({x:t,y:n,element:r[o],shape:yf(r[o],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){s=r[o];break}else if(a<t&&t<f&&l<n&&n<c){s=r[o];break}}return Gh(s,!1)?s:null}handleHoverSelectedLinearElement(t,n,r){let i=this.scene.getNonDeletedElementsMap(),s=We.getElement(t.elementId,i);if(s)if(this.state.selectedLinearElement){let o=-1,a=null;Fp({x:n,y:r,element:s,shape:yf(s,this.scene.getNonDeletedElementsMap())})?(o=We.getPointIndexUnderCursor(s,i,this.state.zoom,n,r),a=We.getSegmentMidpointHitCoords(t,{x:n,y:r},this.state,this.scene.getNonDeletedElementsMap()),(Ge(s)?o===0||o===s.points.length-1:o>=0)||a?vn(this.interactiveCanvas,gn.POINTER):this.hitElement(n,r,s)&&vn(this.interactiveCanvas,gn.MOVE)):this.hitElement(n,r,s)&&(!Ge(s)||!(s.startBinding||s.endBinding))&&vn(this.interactiveCanvas,gn.MOVE),this.state.selectedLinearElement.hoverPointIndex!==o&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:o}}),We.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,a)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:a}})}else vn(this.interactiveCanvas,gn.AUTO)}updateGestureOnPointerDown(t){on.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY}),on.pointers.size===2&&(on.lastCenter=FV(on.pointers),on.initialScale=this.state.zoom.value,on.initialDistance=zV(Array.from(on.pointers.values())))}initialPointerDownState(t){let n=On(t,this.state),r=this.scene.getSelectedElements(this.state),[i,s,o,a]=mn(r),l=r.findIndex(Ge)===0;return{origin:n,withCmdOrCtrl:t[J.CTRL_OR_CMD],originInGrid:dl(Yr(n.x,n.y,t[J.CTRL_OR_CMD]||l?null:this.getEffectiveGridSize())),scrollbars:WV(VS,t.clientX-this.state.offsetLeft,t.clientY-this.state.offsetTop),lastCoords:{...n},originalElements:this.scene.getNonDeletedElements().reduce((f,c)=>(f.set(c.id,L1(c)),f),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(o+i)/2,y:(a+s)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(n,r)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(t,n){if(!(n.scrollbars.isOverEither&&!this.state.multiElement))return!1;HS=!0,n.lastCoords.x=t.clientX,n.lastCoords.y=t.clientY;let r=jS(s=>{s.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(s,n)}),i=gr(()=>{D0=null,HS=!1,Xl(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),r.flush()});return D0=i,window.addEventListener("pointermove",r),window.addEventListener("pointerup",i),!0}isASelectedElement(t){return t!=null&&this.state.selectedElementIds[t.id]}isHittingCommonBoundingBoxOfSelectedElements(t,n){if(n.length<2)return!1;let r=this.getElementHitThreshold(),[i,s,o,a]=mn(n);return t.x>i-r&&t.x<o+r&&t.y>s-r&&t.y<a+r}getCurrentItemRoundness(t){return this.state.currentItemRoundness==="round"?{type:l6(t)?ei.ADAPTIVE_RADIUS:ei.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(t,n,r=!1){Qu({event:t,app:this,selectedElements:n})&&(r||!hf.getReferenceSnapPoints())&&hf.setReferenceSnapPoints(UOe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(t,n,r=!1){Qu({event:t,app:this,selectedElements:n})&&(r||!hf.getVisibleGaps())&&hf.setVisibleGaps(yOe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(t){return gr(n=>{this.maybeHandleResize(t,n)||this.maybeDragNewGenericElement(t,n)})}onKeyUpFromPointerDownHandler(t){return gr(n=>{n.key===J.ALT&&n.preventDefault(),!this.maybeHandleResize(t,n)&&this.maybeDragNewGenericElement(t,n)})}onPointerMoveFromPointerDownHandler(t){return jS(n=>{var c,d,u,h,g,y;if(((c=this.state.openDialog)==null?void 0:c.name)==="elementLinkSelector")return;let r=On(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){let[U,x]=Yr(r.x,r.y,n[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),v=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(v<0){let k=We.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:U,y:x},this.state,this.scene.getNonDeletedElementsMap());v=k?We.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,k,this.scene.getNonDeletedElementsMap()):-1}let E=We.moveFixedSegment(this.state.selectedLinearElement,v,U,x,this.scene.getNonDeletedElementsMap());fi.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:E.segmentMidPointHoveredCoords,pointerDownState:E.pointerDownState}})});return}let i=this.lastPointerMoveCoords??t.origin;if(this.lastPointerMoveCoords=r,t.drag.offset===null&&(t.drag.offset=dl(RBe(this.scene.getSelectedElements(this.state),t.origin.x,t.origin.y))),!(n.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(n,t))return;if(Yl(this.state)){this.handleEraser(n,t,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);let[s,o]=Yr(r.x,r.y,n[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!t.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&cn(D(r.x,r.y),D(t.origin.x,t.origin.y))<$0)return;if(t.resize.isResizing&&(t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeHandleCrop(t,n)||this.maybeHandleResize(t,n)))return!0;let a=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){let U=this.state.editingLinearElement||this.state.selectedLinearElement;if(We.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,a)){let x=We.addMidpoint(this.state.selectedLinearElement,r,this,!n[J.CTRL_OR_CMD],a);if(!x)return;fi.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices}})});return}else if(U.pointerDownState.segmentMidpoint.value!==null&&!U.pointerDownState.segmentMidpoint.added)return;if(We.handlePointDragging(n,this,r.x,r.y,(x,v)=>{this.maybeSuggestBindingsForLinearElementAtCoords(x,v)},U,this.scene)){t.lastCoords.x=r.x,t.lastCoords.y=r.y,t.drag.hasOccurred=!0,this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging&&this.setState({editingLinearElement:{...this.state.editingLinearElement,isDragging:!0}}),this.state.selectedLinearElement.isDragging||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isDragging:!0}});return}}let l=t.hit.allHitElements.some(U=>this.isASelectedElement(U)),f=this.state.editingLinearElement&&n.shiftKey&&this.state.editingLinearElement.elementId===((d=t.hit.element)==null?void 0:d.id);if((l||t.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!f){let U=this.scene.getSelectedElements(this.state);if(U.every(k=>k.locked))return;let x=U.find(k=>ht(k)),v=this.getTopLayerFrameAtSceneCoords(r),E=v&&!x?v:null;if(this.state.frameToHighlight!==E&&fi.flushSync(()=>{this.setState({frameToHighlight:E})}),t.drag.hasOccurred=!0,U.length>0&&!t.withCmdOrCtrl&&!this.state.editingTextElement&&((u=this.state.activeEmbeddable)==null?void 0:u.state)!=="active"){let k={x:r.x-t.origin.x,y:r.y-t.origin.y},M=[...t.originalElements.values()],S=n.shiftKey;if(S){let R=Math.abs(k.x),P=Math.abs(k.y),_=S&&R<P,O=S&&R>P;_&&(k.x=0),O&&(k.y=0)}if(this.state.croppingElementId){let R=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(R&&ln(R)&&R.crop!==null&&t.hit.element===R){let P=R.crop,_=ma(R)&&((h=this.imageCache.get(R.fileId))==null?void 0:h.image);if(_&&!(_ instanceof Promise)){let O=wr(Fi(r.x-i.x,r.y-i.y),Math.max(this.state.zoom.value,2)),[V,j,F,z,H,G]=wt(R,a),W=et(ue(D(V,j),D(H,G),R.angle)),B=et(ue(D(F,j),D(H,G),R.angle)),X=et(ue(D(V,z),D(H,G),R.angle)),q=cs(L4(B,W)),Y=cs(L4(X,W)),oe=Fi(Lz(O,q),Lz(O,Y)),ge={...P,x:Lt(P.x-oe[0]*Math.sign(R.scale[0]),0,_.naturalWidth-P.width),y:Lt(P.y-oe[1]*Math.sign(R.scale[1]),0,_.naturalHeight-P.height)};Ue(R,{crop:ge});return}}}this.maybeCacheVisibleGaps(n,U),this.maybeCacheReferenceSnapPoints(n,U);let{snapOffset:A,snapLines:I}=xOe(M,k,this,n,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:I}),this.state.editingFrame||IBe(t,U,k,this.scene,A,n[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(U.length!==1||!Ge(U[0]))&&this.setState({suggestedBindings:oS(U,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),n.altKey&&!t.hit.hasBeenDuplicated){t.hit.hasBeenDuplicated=!0;let R=[],P=[],_=new Map,O=new Map,V=t.hit.element,j=new Set(this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}).map(H=>H.id)),F=this.scene.getElementsIncludingDeleted();for(let H of F){let G=j.has(H.id)||H.id===(V==null?void 0:V.id)&&t.hit.wasAddedToSelection;if(Math.abs(H.x)>1e7||Math.abs(H.x)>1e7||Math.abs(H.width)>1e7||Math.abs(H.height)>1e7){console.error("Alt+dragging element in scene with invalid dimensions",H.x,H.y,H.width,H.height,G);return}if(G){let W=vte(this.state.editingGroupId,_,H);if(Math.abs(W.x)>1e7||Math.abs(W.x)>1e7||Math.abs(W.width)>1e7||Math.abs(W.height)>1e7){console.error("Alt+dragging duplicated element with invalid dimensions",W.x,W.y,W.width,W.height);return}let B=t.originalElements.get(H.id);if(Math.abs(B.x)>1e7||Math.abs(B.x)>1e7||Math.abs(B.width)>1e7||Math.abs(B.height)>1e7){console.error("Alt+dragging duplicated element with invalid dimensions",B.x,B.y,B.width,B.height);return}Ue(W,{x:B.x,y:B.y}),t.originalElements.set(W.id,W),R.push(W),P.push(H),O.set(H.id,W.id)}else R.push(H)}let z=[...R,...P];z=((y=(g=this.props).onDuplicate)==null?void 0:y.call(g,z,F))||z,Nc(z,mt(P)),ute(R,P,O),tte(z,P,O,"duplicatesServeAsOld"),Qte(z,P,O),this.scene.replaceAllElements(z),this.maybeCacheVisibleGaps(n,U,!0),this.maybeCacheReferenceSnapPoints(n,U,!0)}return}}if(this.state.selectionElement)t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeDragNewGenericElement(t,n);else{let U=this.state.newElement;if(!U)return;if(U.type==="freedraw"){let x=U.points,v=r.x-U.x,E=r.y-U.y,k=x.length>0&&x[x.length-1];if(!(k&&k[0]===v&&k[1]===E)){let M=U.simulatePressure?U.pressures:[...U.pressures,n.pressure];Ue(U,{points:[...x,D(v,E)],pressures:M},!1),this.setState({newElement:U})}}else if(xt(U)){t.drag.hasOccurred=!0;let x=U.points,v=s-U.x,E=o-U.y;C2(n)&&x.length===2&&({width:v,height:E}=UM(U.x,U.y,r.x,r.y)),x.length===1?Ue(U,{points:[...x,D(v,E)]},!1):(x.length===2||x.length>1&&Ge(U))&&Ue(U,{points:[...x.slice(0,-1),D(v,E)]},!1,{isDragging:!0}),this.setState({newElement:U}),hc(U,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(U,[r],this.state.startBoundElement)}else t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeDragNewGenericElement(t,n,!1)}if(this.state.activeTool.type==="selection"){t.boxSelection.hasOccurred=!0;let U=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)We.handleBoxSelection(n,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let x=!0;!n.shiftKey&&ti(U,this.state)&&(t.withCmdOrCtrl&&t.hit.element?this.setState(E=>Ss({...E,selectedElementIds:{[t.hit.element.id]:!0}},this.scene.getNonDeletedElements(),E,this)):x=!1);let v=this.state.selectionElement?eR(U,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(E=>{let k={...x&&E.selectedElementIds,...v.reduce((M,S)=>(M[S.id]=!0,M),{})};return t.hit.element&&(v.length?delete k[t.hit.element.id]:k[t.hit.element.id]=!0),E=x?E:{...E,selectedGroupIds:{},editingGroupId:null},{...Ss({editingGroupId:E.editingGroupId,selectedElementIds:k},this.scene.getNonDeletedElements(),E,this),selectedLinearElement:v.length===1&&xt(v[0])?new We(v[0]):null,showHyperlinkPopup:v.length===1&&(v[0].link||eo(v[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(t,n){if(n.scrollbars.isOverHorizontal){let r=t.clientX,i=r-n.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-i/this.state.zoom.value}),n.lastCoords.x=r,!0}if(n.scrollbars.isOverVertical){let r=t.clientY,i=r-n.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-i/this.state.zoom.value}),n.lastCoords.y=r,!0}return!1}onPointerUpFromPointerDownHandler(t){return gr(n=>{var y,U,x,v,E,k,M,S,A,I,R,P;this.removePointer(n),t.eventListeners.onMove&&t.eventListeners.onMove.flush();let{newElement:r,resizingElement:i,croppingElementId:s,multiElement:o,activeTool:a,isResizing:l,isRotating:f,isCropping:c}=this.state;this.setState(_=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:w5(_.snapLines,[]),originSnapOffset:null})),this.lastPointerMoveCoords=null,hf.setReferenceSnapPoints(null),hf.setVisibleGaps(null),this.savePointer(n.clientX,n.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});let d=this.scene.getNonDeletedElementsMap();if(t.drag.hasOccurred&&((U=(y=t.hit)==null?void 0:y.element)!=null&&U.id)){let _=d.get(t.hit.element.id);El(_)&&((x=_.boundElements)==null||x.filter(O=>O.type==="arrow").map(O=>d.get(O.id)).filter(O=>Ge(O)).forEach(O=>{O&&Ue(O,{},!0)}))}if(this.state.editingLinearElement)if(!t.boxSelection.hasOccurred&&((E=(v=t.hit)==null?void 0:v.element)==null?void 0:E.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction($a);else{let _=We.handlePointerUp(n,this.state.editingLinearElement,this.state,this.scene);_!==this.state.editingLinearElement&&this.setState({editingLinearElement:_,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){let _=We.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());_&&Ue(_,{},!0)}if(((M=(k=t.hit)==null?void 0:k.element)==null?void 0:M.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{let _=We.handlePointerUp(n,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:O,endBindingElement:V}=_,j=this.scene.getElement(_.elementId);hc(j)&&Lw(j,O,V,d,this.scene),_!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{..._,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener("pointermove",t.eventListeners.onMove),window.removeEventListener("pointerup",t.eventListeners.onUp),window.removeEventListener("keydown",t.eventListeners.onKeyDown),window.removeEventListener("keyup",t.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(A=(S=this.props)==null?void 0:S.onPointerUp)==null||A.call(S,a,t),this.onPointerUpEmitter.trigger(this.state.activeTool,t,n),(r==null?void 0:r.type)==="freedraw"){let _=On(n,this.state),O=r.points,V=_.x-r.x,j=_.y-r.y;V===O[0][0]&&j===O[0][1]&&(j+=1e-4,V+=1e-4);let F=r.simulatePressure?[]:[...r.pressures,n.pressure];Ue(r,{points:[...O,D(V,j)],pressures:F,lastCommittedPoint:D(V,j)}),this.actionManager.executeAction($a);return}if(ln(r)){let _=r;try{this.initializeImageDimensions(_),this.setState({selectedElementIds:an({[_.id]:!0},this.state)},()=>{this.actionManager.executeAction($a)})}catch(O){console.error(O),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(V=>V.id!==_.id)),this.actionManager.executeAction($a)}return}if(xt(r)){r.points.length>1&&this.store.shouldCaptureIncrement();let _=On(n,this.state);!t.drag.hasOccurred&&r&&!o?(Ue(r,{points:[...r.points,D(_.x-r.x,_.y-r.y)]}),this.setState({multiElement:r,newElement:r})):t.drag.hasOccurred&&!o&&(dh(this.state)&&hc(r,!1)&&cM(r,this.state,_,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.setState({suggestedBindings:[],startBoundElement:null}),a.locked?this.setState(O=>({newElement:null})):(Wa(this.interactiveCanvas),this.setState(O=>({newElement:null,activeTool:jr(this.state,{type:"selection"}),selectedElementIds:an({...O.selectedElementIds,[r.id]:!0},O),selectedLinearElement:new We(r)}))),this.scene.triggerUpdate());return}if(Ve(r)){let _=oN(kn({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<_&&Ue(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(a.type!=="selection"&&r&&Kg(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(_=>_.id!==r.id),appState:{newElement:null},captureUpdate:pe.NEVER});return}if(ht(r)){let _=fBe(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(T2(this.scene.getElementsMapIncludingDeleted(),_,r,this.state))}if(r&&(Ue(r,one(r)),this.scene.triggerUpdate()),t.drag.hasOccurred){let _=On(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){let O=this.scene.getElement(this.state.selectedLinearElement.elementId);if(O!=null&&O.frameId){let V=ho(O,d);V&&O&&(e0(O,V,this.scene.getNonDeletedElementsMap())||(Ue(O,{groupIds:[]}),Gw([O],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{let O=this.getTopLayerFrameAtSceneCoords(_),V=this.scene.getSelectedElements(this.state),j=this.scene.getElementsMapIncludingDeleted(),F=z=>{if(z.length>0){for(let H of z){let G=H.groupIds.indexOf(this.state.editingGroupId);Ue(H,{groupIds:H.groupIds.slice(0,G)},!1)}j.forEach(H=>{H.groupIds.length&&Vn(j,H.groupIds[H.groupIds.length-1]).length<2&&Ue(H,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(O&&!this.state.selectedElementIds[O.id]){let z=V.filter(H=>H.frameId!==O.id&&n9(H,j,this.state));this.state.editingGroupId&&F(z),j=T2(j,z,O,this.state)}else if(!O&&this.state.editingGroupId){let z=V.filter(H=>H.frameId&&!n9(H,j,this.state));F(z)}j=Xg(j,this.state,this),this.scene.replaceAllElements(j)}}if(i&&this.store.shouldCaptureIncrement(),i&&Kg(i)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(_=>_.id!==i.id),captureUpdate:pe.NEVER}),t.resize.isResizing){let _=Xg(this.scene.getElementsIncludingDeleted(),this.state,this),O=this.scene.getSelectedElements(this.state).filter(V=>ht(V));for(let V of O)_=tne(_,Z3(this.scene.getElementsIncludingDeleted(),V,this.state,d),V,this);this.scene.replaceAllElements(_)}let u=t.hit.element;((I=this.state.selectedLinearElement)==null?void 0:I.elementId)!==(u==null?void 0:u.id)&&xt(u)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new We(u)}),(!s||s&&(!u&&!c||u&&u.id!==s))&&this.finishImageCropping();let h=this.lastPointerDownEvent,g=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Yl(this.state)&&h&&g){if(this.eraserTrail.endPath(),cn(D(h.clientX,h.clientY),D(g.clientX,g.clientY))===0){let _=On({clientX:g.clientX,clientY:g.clientY},this.state);this.getElementsAtPosition(_.x,_.y).forEach(O=>this.elementsPendingErasure.add(O.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(u&&!t.drag.hasOccurred&&!t.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!t.boxSelection.hasOccurred)&&(n.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[u.id]?ote(this.state,u)?this.setState(_=>{let O={..._.selectedElementIds};for(let V of u.groupIds.flatMap(j=>Vn(this.scene.getNonDeletedElements(),j)))delete O[V.id];return{selectedGroupIds:{..._.selectedElementIds,...u.groupIds.map(V=>({[V]:!1})).reduce((V,j)=>({...V,...j}),{})},selectedElementIds:an(O,_)}}):(R=this.state.selectedLinearElement)!=null&&R.isDragging||this.setState(_=>{let O={..._.selectedElementIds};delete O[u.id];let V=Mt(this.scene.getNonDeletedElements(),{selectedElementIds:O});return{...Ss({editingGroupId:_.editingGroupId,selectedElementIds:O},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:V.length===1&&xt(V[0])?new We(V[0]):_.selectedLinearElement}}):u.frameId&&this.state.selectedElementIds[u.frameId]?this.setState(_=>{var V;let O={..._.selectedElementIds,[u.id]:!0};return delete O[u.frameId],(((V=this.scene.getElement(u.frameId))==null?void 0:V.groupIds)??[]).flatMap(j=>Vn(this.scene.getNonDeletedElements(),j)).forEach(j=>{delete O[j.id]}),{...Ss({editingGroupId:_.editingGroupId,selectedElementIds:O},this.scene.getNonDeletedElements(),_,this),showHyperlinkPopup:u.link||eo(u)?"info":!1}}):this.setState(_=>({selectedElementIds:an({..._.selectedElementIds,[u.id]:!0},_)})):this.setState(_=>{var O;return{...Ss({editingGroupId:_.editingGroupId,selectedElementIds:{[u.id]:!0}},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:xt(u)&&((O=_.selectedLinearElement)==null?void 0:O.elementId)!==u.id?new We(u):_.selectedLinearElement}})),!(u&&Ge(u))&&!t.drag.hasOccurred&&!this.state.isResizing&&(u&&QDe({x:t.origin.x,y:t.origin.y,element:u,shape:yf(u,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:ht(u)?this.frameNameBoundsCache.get(u):null},d)||!u&&t.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),vn(this.interactiveCanvas,gn.AUTO);return}if(!a.locked&&a.type!=="freedraw"&&r&&this.setState(_=>({selectedElementIds:an({..._.selectedElementIds,[r.id]:!0},_),showHyperlinkPopup:eo(r)&&!r.link?"editor":_.showHyperlinkPopup})),(a.type!=="selection"||ti(this.scene.getNonDeletedElements(),this.state)||!Gi(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),t.drag.hasOccurred||l||f||c){let _=this.scene.getSelectedElements(this.state).filter(xt);X4(_,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,dh(this.state),((P=this.state.selectedLinearElement)==null?void 0:P.selectedPointsIndices)??[],this.state.zoom)}if(a.type==="laser"){this.laserTrails.endPath();return}!a.locked&&a.type!=="freedraw"?(Wa(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:jr(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),u&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&on.pointers.size<=1&&ba(u)&&this.isIframeLikeElementCenter(u,this.lastPointerUpEvent,t.origin.x,t.origin.y)&&this.handleEmbeddableCenterClick(u)})}clearSelection(t){this.setState(n=>({selectedElementIds:an({},n),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:n.editingGroupId&&t!=null&&_b(t,n.editingGroupId)?n.editingGroupId:null})),this.setState({selectedElementIds:an({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(t,n,r,i){if(i){let s=i.x+i.width/2,o=i.y+i.height/2,a=aS(i,r,this.scene.getNonDeletedElementsMap());if(a&&(s=a.x,o=a.y),Math.hypot(t-s,n-o)<ZAe){let{x:l,y:f}=fl({sceneX:s,sceneY:o},r);return{viewportX:l,viewportY:f,elementCenterX:s,elementCenterY:o}}}}getCanvasOffsets(){var t;if((t=this.excalidrawContainerRef)!=null&&t.current){let n=this.excalidrawContainerRef.current,{left:r,top:i}=n.getBoundingClientRect();return{offsetLeft:r,offsetTop:i}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){let t=CR.find(n=>n.code===this.props.langCode)||u6;await Lie(t),this.setAppState({})}},TZe=()=>{(At.MODE===lo.TEST||At.DEV)&&(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene.getElementsIncludingDeleted()},set(e){var t;return(t=this.app)==null?void 0:t.scene.replaceAllElements(Jf(e))}},scene:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene}}}))};TZe();var IZe=MZe,NZe=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},RZe=NZe,_Ze=()=>m.jsx("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:m.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),PZe=()=>m.jsxs("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[m.jsx("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),DZe=({style:e,size:t="small",withText:n})=>m.jsxs("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[m.jsx(_Ze,{}),n&&m.jsx(PZe,{})]}),ZR=({icon:e,shortcut:t,children:n})=>{let r=pi();return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"welcome-screen-menu-item__icon",children:e}),m.jsx("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!r.editor.isMobile&&m.jsx("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};ZR.displayName="WelcomeScreenMenuItemContent";var Hy=({onSelect:e,children:t,icon:n,shortcut:r,className:i="",...s})=>m.jsx("button",{...s,type:"button",className:`welcome-screen-menu-item ${i}`,onClick:e,children:m.jsx(ZR,{icon:n,shortcut:r,children:t})});Hy.displayName="WelcomeScreenMenuItem";var joe=({children:e,href:t,icon:n,shortcut:r,className:i="",...s})=>m.jsx("a",{...s,className:`welcome-screen-menu-item ${i}`,href:t,target:"_blank",rel:"noreferrer",children:m.jsx(ZR,{icon:n,shortcut:r,children:e})});joe.displayName="WelcomeScreenMenuItemLink";var ud=({children:e})=>{let{WelcomeScreenCenterTunnel:t}=zo();return m.jsx(t.In,{children:m.jsx("div",{className:"welcome-screen-center",children:e||m.jsxs(m.Fragment,{children:[m.jsx(qR,{}),m.jsx(QR,{children:$("welcomeScreen.defaults.center_heading")}),m.jsxs(JR,{children:[m.jsx(t_,{}),m.jsx(e_,{})]})]})})})};ud.displayName="Center";var qR=({children:e})=>m.jsx("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||m.jsx(DZe,{withText:!0})});qR.displayName="Logo";var QR=({children:e})=>m.jsx("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});QR.displayName="Heading";var JR=({children:e})=>m.jsx("div",{className:"welcome-screen-menu",children:e});JR.displayName="Menu";var e_=()=>{let e=bo();return m.jsx(Hy,{onSelect:()=>e.executeAction(PR),shortcut:"?",icon:uN,children:$("helpDialog.title")})};e_.displayName="MenuItemHelp";var t_=()=>{let e=js(),t=bo();return e.viewModeEnabled?null:m.jsx(Hy,{onSelect:()=>t.executeAction($M),shortcut:fs("loadScene"),icon:hN,children:$("buttons.load")})};t_.displayName="MenuItemLoadScene";var Boe=({onSelect:e})=>{let{t}=bs();return m.jsx(Hy,{shortcut:null,onSelect:e,icon:aee,children:t("labels.liveCollaboration")})};Boe.displayName="MenuItemLiveCollaborationTrigger";ud.Logo=qR;ud.Heading=QR;ud.Menu=JR;ud.MenuItem=Hy;ud.MenuItemLink=joe;ud.MenuItemHelp=e_;ud.MenuItemLoadScene=t_;ud.MenuItemLiveCollaborationTrigger=Boe;var LZe=({children:e})=>{let{WelcomeScreenMenuHintTunnel:t}=zo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[wTe,m.jsx("div",{className:"welcome-screen-decor-hint__label",children:e||$("welcomeScreen.defaults.menuHint")})]})})};LZe.displayName="MenuHint";var OZe=({children:e})=>{let{WelcomeScreenToolbarHintTunnel:t}=zo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[m.jsx("div",{className:"welcome-screen-decor-hint__label",children:e||$("welcomeScreen.defaults.toolbarHint")}),ETe]})})};OZe.displayName="ToolbarHint";var jZe=({children:e})=>{let{WelcomeScreenHelpHintTunnel:t}=zo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[m.jsx("div",{children:e||$("welcomeScreen.defaults.helpHint")}),vTe]})})};jZe.displayName="HelpHint";Sy((e,t,n)=>{if(At.DEV||At.MODE===lo.TEST||window!=null&&window.DEBUG_FRACTIONAL_INDICES){let r=Jf(e.map(i=>({...i})));MN(r,{shouldThrow:At.DEV||At.MODE===lo.TEST,includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1});RZe();var BZe=e=>{var G,W,B,X;let{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i=!1,onPointerUpdate:s,renderTopRightUI:o,langCode:a=u6.code,viewModeEnabled:l,zenModeEnabled:f,gridModeEnabled:c,libraryReturnUrl:d,theme:u,name:h,renderCustomStats:g,onPaste:y,detectScroll:U=!0,handleKeyboardGlobally:x=!1,onLibraryChange:v,autoFocus:E=!1,generateIdForFile:k,onLinkOpen:M,generateLinkForSelection:S,onPointerDown:A,onPointerUp:I,onScrollChange:R,onDuplicate:P,children:_,validateEmbeddable:O,renderEmbeddable:V,aiEnabled:j,showDeprecatedFonts:F}=e,z=(G=e.UIOptions)==null?void 0:G.canvasActions,H={...e.UIOptions,canvasActions:{..._z.canvasActions,...z},tools:{image:((B=(W=e.UIOptions)==null?void 0:W.tools)==null?void 0:B.image)??!0}};return z!=null&&z.export&&(H.canvasActions.export.saveFileToDisk=((X=z.export)==null?void 0:X.saveFileToDisk)??_z.canvasActions.export.saveFileToDisk),H.canvasActions.toggleTheme===null&&typeof u>"u"&&(H.canvasActions.toggleTheme=!0),T.useEffect(()=>{(async()=>await Ze(()=>import("./roundRect-0PYZxl1G.js"),[]))();let q=Y=>{typeof Y.scale=="number"&&Y.scale!==1&&Y.preventDefault()};return document.addEventListener("touchmove",q,{passive:!1}),()=>{document.removeEventListener("touchmove",q)}},[]),m.jsx(AVe,{store:pl,children:m.jsx(NVe,{langCode:a,theme:u,children:m.jsx(IZe,{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i,onPointerUpdate:s,renderTopRightUI:o,langCode:a,viewModeEnabled:l,zenModeEnabled:f,gridModeEnabled:c,libraryReturnUrl:d,theme:u,name:h,renderCustomStats:g,UIOptions:H,onPaste:y,detectScroll:U,handleKeyboardGlobally:x,onLibraryChange:v,autoFocus:E,generateIdForFile:k,onLinkOpen:M,generateLinkForSelection:S,onPointerDown:A,onPointerUp:I,onScrollChange:R,onDuplicate:P,validateEmbeddable:O,renderEmbeddable:V,aiEnabled:j!==!1,showDeprecatedFonts:F,children:_})})})},FZe=(e,t)=>{if(e.children!==t.children)return!1;let{initialData:n,UIOptions:r={},...i}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(r),f=Object.keys(o);return l.length!==f.length?!1:l.every(c=>c==="canvasActions"?Object.keys(r.canvasActions).every(d=>{var u,h,g,y;return d==="export"&&((u=r==null?void 0:r.canvasActions)!=null&&u.export)&&((h=o==null?void 0:o.canvasActions)!=null&&h.export)?r.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((g=r==null?void 0:r.canvasActions)==null?void 0:g[d])===((y=o==null?void 0:o.canvasActions)==null?void 0:y[d])}):r[c]===o[c])&&Gi(i,a)},Foe=Ie.memo(BZe,FZe);Foe.displayName="Excalidraw";const zZe=({thread:e})=>{const[t,n]=T.useState(null),[r,i]=T.useState(!0),s=T.useRef(null);T.useRef(null),T.useEffect(()=>{let a=!1;return(async()=>{try{const l=await Hn.loadThreadCanvas(e.id);a||n(l)}catch(l){console.error("Failed to load canvas:",l)}finally{a||i(!1)}})(),()=>{a=!0}},[e.id]);const o=T.useCallback((a,l)=>{r||(s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{const f={elements:a,appState:{viewBackgroundColor:l.viewBackgroundColor,zoom:l.zoom,scrollX:l.scrollX,scrollY:l.scrollY}};Hn.saveThreadCanvas(e.id,f).catch(c=>console.error("Failed to save canvas:",c))},2e3))},[e.id,r]);return T.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),r?m.jsx("div",{className:"thread-canvas-loading",children:m.jsx("div",{className:"loading-spinner"})}):m.jsx("div",{className:"thread-canvas",children:m.jsx(Foe,{initialData:t||void 0,theme:"dark",onChange:o,UIOptions:{canvasActions:{loadScene:!1}}})})},$Ze={ROOT:"#888",EVIDENCE:"#4fc3f7",REFERENCE:"#ab47bc",CONTEXT:"#ff8a65",EXAMPLE:"#66bb6a",COUNTERPOINT:"#ef5350",SYNTHESIS:"#fdd835"},HZe=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],VZe=({thread:e,onDone:t})=>{const[n,r]=T.useState([]),[i,s]=T.useState(!0),o=T.useRef(null),a=T.useRef(null),l=T.useRef(null);T.useEffect(()=>{e!=null&&e.id&&f()},[e==null?void 0:e.id]);const f=async()=>{s(!0);try{const y=e.nodes||[],U=await Hn.loadArticleSequence(e.id);if(U&&Array.isArray(U)){const x=new Set(U),v=U.map(k=>y.find(M=>M.id===k)).filter(Boolean),E=y.filter(k=>!x.has(k.id));r([...v,...E])}else r([...y])}catch(y){console.error("Failed to load sequence:",y),r([...e.nodes||[]])}finally{s(!1)}},c=T.useCallback(y=>{l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{try{const U=y.map(x=>x.id);await Hn.saveArticleSequence(e.id,U)}catch(U){console.error("Failed to save sequence:",U)}},400)},[e==null?void 0:e.id]),d=y=>{o.current=y},u=y=>{a.current=y},h=()=>{if(o.current===null||a.current===null)return;if(o.current===a.current){o.current=null,a.current=null;return}const y=[...n],[U]=y.splice(o.current,1);y.splice(a.current,0,U),r(y),c(y),o.current=null,a.current=null},g=y=>y.node_type?y.node_type:typeof y.type=="number"?HZe[y.type]||"ROOT":y.type||"ROOT";return i?m.jsx("div",{className:"se-page",children:m.jsx("div",{className:"se-loading",children:"Loading sequence..."})}):m.jsx("div",{className:"se-page",children:m.jsxs("div",{className:"se-container",children:[m.jsxs("div",{className:"se-header",children:[m.jsx("h2",{className:"se-title",children:"Reading Order"}),m.jsx("button",{className:"se-done-btn",onClick:t,children:"Done"})]}),m.jsx("p",{className:"se-hint",children:"Drag items to reorder. The article reader will follow this sequence."}),n.length===0?m.jsx("div",{className:"se-empty",children:"No nodes in this thread yet."}):m.jsx("ul",{className:"se-list",children:n.map((y,U)=>{const x=g(y),v=$Ze[x]||"#888";return m.jsxs("li",{className:"se-item",draggable:!0,onDragStart:()=>d(U),onDragEnter:()=>u(U),onDragEnd:h,onDragOver:E=>E.preventDefault(),children:[m.jsx("span",{className:"se-handle",children:""}),m.jsx("span",{className:"se-index",children:U+1}),m.jsx("span",{className:"se-badge",style:{background:v},children:x}),m.jsx("span",{className:"se-node-title",children:y.title||`Node ${y.id}`})]},y.id)})})]})})},WZe=[{key:"graph",label:"Graph"},{key:"article",label:"Article"},{key:"sequence",label:"Sequence"},{key:"canvas",label:"Canvas"},{key:"chat",label:"Chat"}],GZe=({view:e,onChangeView:t,threadTitle:n,onPrevThread:r,onNextThread:i,hasPrev:s,hasNext:o})=>m.jsxs("div",{className:"view-tab-bar",children:[m.jsxs("div",{className:"vtb-thread-nav",children:[m.jsx("button",{className:"vtb-arrow",disabled:!s,onClick:r,"aria-label":"Previous thread",children:""}),m.jsx("span",{className:"vtb-thread-title",title:n,children:n}),m.jsx("button",{className:"vtb-arrow",disabled:!o,onClick:i,"aria-label":"Next thread",children:""})]}),m.jsx("div",{className:"vtb-tabs",children:WZe.map(({key:a,label:l})=>m.jsx("button",{className:`vtb-tab ${e===a?"vtb-tab--active":""}`,onClick:()=>t(a),children:l},a))})]}),xW=[{value:0,label:"ROOT"},{value:1,label:"EVIDENCE"},{value:2,label:"REFERENCE"},{value:3,label:"CONTEXT"},{value:4,label:"EXAMPLE"},{value:5,label:"COUNTERPOINT"},{value:6,label:"SYNTHESIS"}],XZe={ROOT:"Root Title",EVIDENCE:"Source",EXAMPLE:"Example Title",COUNTERPOINT:"Argument",REFERENCE:"Title",CONTEXT:"Title",SYNTHESIS:"Title"},KZe={ROOT:"Describe this root node...",EVIDENCE:"Present your evidence...",EXAMPLE:"Describe this example...",COUNTERPOINT:"Explain the counterpoint...",REFERENCE:"Write reference content...",CONTEXT:"Provide context...",SYNTHESIS:"Write your synthesis..."},YZe=({editor:e})=>{const[t,n]=T.useState(null);if(!e)return null;const r=({onClick:s,active:o,children:a})=>m.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:a}),i=()=>m.jsx("span",{className:"ne-toolbar-divider"});return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"ne-toolbar",children:[m.jsx(r,{onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold"),children:"B"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic"),children:"I"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike"),children:"S"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),active:e.isActive("heading",{level:1}),children:"H1"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2}),children:"H2"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3}),children:"H3"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList"),children:"Bullet"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList"),children:"Ordered"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote"),children:"Quote"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock"),children:"Code"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>n("link"),active:e.isActive("link"),children:"Link"}),m.jsx(r,{onClick:()=>n("youtube"),children:"YouTube"})]}),t==="link"&&m.jsx(w4,{label:"Enter URL",placeholder:"https://example.com",onSubmit:s=>{e.chain().focus().extendMarkRange("link").setLink({href:s}).run(),n(null)},onCancel:()=>n(null)}),t==="youtube"&&m.jsx(w4,{label:"Enter YouTube URL",placeholder:"https://youtube.com/watch?v=...",onSubmit:s=>{e.commands.setYoutubeVideo({src:s}),n(null)},onCancel:()=>n(null)})]})},ZZe=({thread:e,selectedNode:t,onSubmit:n,onCancel:r})=>{var x;const i=(t==null?void 0:t.type)==="thread",[s,o]=T.useState(()=>i?"0":"1"),[a,l]=T.useState(""),[f,c]=T.useState(""),[d,u]=T.useState(!1),h=((x=xW[Number(s)])==null?void 0:x.label)||"EVIDENCE",g=dI({extensions:[SI,vI.configure({openOnClick:!1}),CI.configure({width:640,height:360}),AI.configure({placeholder:KZe[h]||"Write your content..."})],content:"",onUpdate:({editor:v})=>{u(!v.isEmpty)}}),y=()=>{if(!g||!a.trim())return;const v=g.getHTML();let E,k;switch(h){case"ROOT":E=JSON.stringify({title:a,description:v,keywords:f.split(",").map(S=>S.trim()).filter(Boolean)}),k=a;break;case"EVIDENCE":E=JSON.stringify({point:v,source:a}),k=g.getText().substring(0,100);break;case"EXAMPLE":E=JSON.stringify({title:a,description:v}),k=g.getText().substring(0,100);break;case"COUNTERPOINT":E=JSON.stringify({argument:a,explanation:v}),k=a;break;default:E=v,k=g.getText().substring(0,100)}k.length===100&&(k+="...");const M=i?null:parseInt(String(t.id).replace("node-",""),10);n({id:t.id,type:t.type,newNode:{title:a,content:E,description:k,type:Number(s),parentId:M,threadId:e.id,metadata:{title:a||"New Node",description:k,content:E,type:h}}})},U=a.trim()&&g&&d;return m.jsxs("div",{className:"ne-page",children:[m.jsxs("header",{className:"ne-header",children:[m.jsx("button",{className:"ne-back",onClick:r,children:" Back to graph"}),m.jsx("button",{className:"ne-submit",disabled:!U,onClick:y,children:"Add Node"})]}),m.jsx("div",{className:"ne-body",children:m.jsxs("div",{className:"ne-column",children:[m.jsx("select",{className:"ne-select",value:s,onChange:v=>o(v.target.value),children:xW.filter(v=>i||v.label!=="ROOT").map(v=>m.jsx("option",{value:v.value,children:v.label},v.value))}),m.jsx("input",{className:"ne-title-input",type:"text",placeholder:XZe[h]||"Title",value:a,onChange:v=>l(v.target.value)}),h==="ROOT"&&m.jsx("input",{className:"ne-keywords-input",type:"text",placeholder:"Keywords (comma-separated)",value:f,onChange:v=>c(v.target.value)}),m.jsxs("div",{children:[m.jsx(YZe,{editor:g}),m.jsx("div",{className:"ne-editor-wrapper",children:m.jsx(mw,{editor:g})})]})]})})]})};function qZe({onSuccess:e,onClose:t}){const[n,r]=T.useState("signin"),[i,s]=T.useState(""),[o,a]=T.useState(""),[l,f]=T.useState(""),[c,d]=T.useState(""),[u,h]=T.useState(!1),g=async U=>{U.preventDefault(),d(""),h(!0);try{let x;n==="signin"?x=await Hn.login({email:o,password:l}):x=await Hn.register({name:i,email:o,password:l}),e(x)}catch(x){d(x.message)}finally{h(!1)}},y=U=>{r(U),d("")};return m.jsx("div",{className:"auth-overlay",onClick:t,children:m.jsxs("div",{className:"auth-modal",onClick:U=>U.stopPropagation(),children:[m.jsx("button",{className:"auth-close",onClick:t,children:""}),m.jsxs("div",{className:"auth-tabs",children:[m.jsx("button",{className:`auth-tab${n==="signin"?" auth-tab--active":""}`,onClick:()=>y("signin"),type:"button",children:"Sign In"}),m.jsx("button",{className:`auth-tab${n==="register"?" auth-tab--active":""}`,onClick:()=>y("register"),type:"button",style:{display:"none"},children:"Register"})]}),m.jsxs("form",{className:"auth-form",onSubmit:g,children:[n==="register"&&m.jsx("input",{className:"auth-input",type:"text",placeholder:"Name",value:i,onChange:U=>s(U.target.value),autoComplete:"name"}),m.jsx("input",{className:"auth-input",type:"email",placeholder:"Email",value:o,onChange:U=>a(U.target.value),required:!0,autoComplete:"email"}),m.jsx("input",{className:"auth-input",type:"password",placeholder:"Password",value:l,onChange:U=>f(U.target.value),required:!0,autoComplete:n==="signin"?"current-password":"new-password"}),c&&m.jsx("div",{className:"auth-error",children:c}),m.jsx("button",{className:"auth-submit",type:"submit",disabled:u,children:u?"...":n==="signin"?"Sign In":"Create Account"})]})]})})}function QZe(){var Fc,zc,Nl;const[e,t]=T.useState(null),[n,r]=T.useState(null),[i,s]=T.useState([]),[o,a]=T.useState(""),[l,f]=T.useState(""),[c,d]=T.useState(""),[u,h]=T.useState(!1),[g,y]=T.useState(null),[U,x]=T.useState(null);T.useState(""),T.useState(0);const[v,E]=T.useState(null),[k,M]=T.useState("");T.useState({});const[S,A]=T.useState(null),[I,R]=T.useState(!1),[P,_]=T.useState(""),[O,V]=T.useState(!1),[j,F]=T.useState(!1),[z,H]=T.useState(!1),[G,W]=T.useState(!1),[B,X]=T.useState([]),[q,Y]=T.useState(!1),oe=T.useRef(null),[ge,he]=T.useState(!1),[ce,ie]=T.useState("graph"),[we,ke]=T.useState(null),[Re,Fe]=T.useState(null),[$e,ve]=T.useState(null),[Le,Ae]=T.useState(!1),ct=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"];T.useEffect(()=>{Hn.getMe().then(ve).catch(()=>{})},[]);function jt(Ee){if(!$e){Ae(!0);return}Ee()}T.useEffect(()=>{G&&Wt()},[]);async function xn(){try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7A69",chainName:"Hardhat Local",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["http://127.0.0.1:8545"]}]}),!0}catch(Ee){return console.error("Error setting up network:",Ee),!1}}async function Wt(){if(typeof window.ethereum<"u")try{console.log("Connecting to wallet and setting up contract...");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7A69"}]})}catch(Dt){if(Dt.code===4902){if(!await xn())return}else{console.error("Failed to switch network:",Dt);return}}const Ee=await window.ethereum.request({method:"eth_requestAccounts"});t(Ee[0]);const rt=new l0e("http://127.0.0.1:8545"),ze=await rt.getSigner(Ee[0]);console.log("Setting up contract with address:",sU.canonThread);const qt=new Lh(sU.canonThread,y0e.abi,ze);try{if(await rt.getCode(sU.canonThread)==="0x"){console.error("No contract deployed at the specified address");return}}catch(Dt){console.error("Error verifying contract deployment:",Dt);return}r(qt),console.log("Contract setup complete");const Mn=new Lh(sU.canonToken,A0e.abi,ze);E(Mn),y(null),await ii(),window.ethereum.on("accountsChanged",Dt=>{Dt.length===0?(t(null),r(null)):(t(Dt[0]),Wt())}),window.ethereum.on("chainChanged",()=>{window.location.reload()})}catch(Ee){console.error("Error connecting to wallet:",Ee)}}async function Sn(Ee){try{const rt=new FormData,ze=new Blob([JSON.stringify(Ee)],{type:"application/json"});rt.append("path",ze);const Dt=(await(await fetch("http://localhost:5001/api/v0/add",{method:"POST",body:rt})).json()).Hash;if(!Dt||Dt.length!==46||!Dt.startsWith("Qm"))throw new Error("Invalid IPFS hash format. Must start with Qm and be 46 characters long.");return Dt}catch(rt){throw console.error("Error uploading to IPFS:",rt),rt}}async function Ki(){try{if(h(!0),y(null),!o.trim()){y("Title is required"),h(!1);return}if(console.log("Creating thread with content:",{title:o,description:l,content:c}),G&&n){const Ee={title:o,description:l,createdAt:new Date().toISOString(),version:1},rt={title:o,content:c,lastUpdated:new Date().toISOString()},ze=await Sn(Ee),qt=await Sn(rt);await(await n.createThread(ze,qt)).wait();const Dt=await n.threadCounter();a(""),f(""),d(""),R(!1),await ii(),A(Number(Dt))}else{const Ee=await Hn.createThread({title:o,description:l,content:"",metadata:{createdAt:new Date().toISOString(),version:1,title:o,description:l}});console.log("Created thread:",Ee),a(""),f(""),d(""),R(!1),await fn(),A(Ee.id),ie("article")}}catch(Ee){console.error("Error creating thread:",Ee),y("Failed to create thread: "+Ee.message)}finally{h(!1)}}async function Dr(Ee){try{const rt=await fetch(`http://localhost:8080/ipfs/${Ee}`);if(!rt.ok)throw new Error(`IPFS request failed with status ${rt.status}`);return await rt.json()}catch(rt){console.error("Error fetching from IPFS:",rt);try{const ze=await fetch(`http://localhost:5001/api/v0/cat?arg=${Ee}`);if(!ze.ok)throw new Error(`IPFS API request failed with status ${ze.status}`);return await ze.json()}catch(ze){return console.error("Error fetching from IPFS API:",ze),null}}}async function ii(){if(!n||!e){console.log("Contract or account not initialized:",{contract:!!n,account:!!e});return}try{console.log("Loading on-chain threads...");const Ee=await n.threadCounter();if(console.log("Thread count:",Ee),Ee>0){const ze=Number(Ee),qt=await n.threads(ze);if(qt&&qt.creator!=="0x0000000000000000000000000000000000000000"){const Mn=await Dr(qt.metadataHash),Dt=await Dr(qt.contentHash),Dn={...qt,metadata:Mn,content:Dt,nodes:[],id:ze,hasVoted:!1,votesFor:Qc("0"),votesAgainst:Qc("0"),proposalDeadline:0,hasActiveProposal:!1};s([Dn]),A(ze),(async()=>{const _i=await n.nodeCounter(),$c=await n.proposalCounter(),hd=Math.floor(Date.now()/1e3),pd=await n.hasVoted(ze,e),Hc=[];for(let gi=1;gi<=_i;gi++){const Gr=await n.nodes(gi);if(Gr&&Gr.threadId.toString()===ze.toString()&&Gr.contentHash!==""){const md=await Dr(Gr.metadataHash),O1=await Dr(Gr.contentHash),m6=await n.hasVoted(gi,e);Hc.push({...Gr,metadata:md,content:O1,id:gi,type:Number(Gr.nodeType),hasVoted:m6})}}let Pi=Qc("0"),_a=Qc("0"),ur=0,er=!1;for(let gi=1;gi<=$c;gi++){const Gr=await n.proposals(gi);if(Gr.threadId.toString()===ze.toString()&&!Gr.executed){Pi=Gr.votesFor,_a=Gr.votesAgainst,ur=Number(Gr.deadline),er=hd<ur+60;break}}s(gi=>[{...gi[0],nodes:Hc,hasVoted:pd,votesFor:Pi,votesAgainst:_a,proposalDeadline:ur,hasActiveProposal:er}])})()}}(async()=>{const ze=await n.nodeCounter(),qt=await n.proposalCounter(),Mn=Math.floor(Date.now()/1e3);for(let Dt=Ee-1;Dt>=1;Dt--){const Dn=await n.threads(Dt);if(Dn&&Dn.creator!=="0x0000000000000000000000000000000000000000"){const Us=await Dr(Dn.metadataHash),_i=await Dr(Dn.contentHash);s(ur=>[...ur,{...Dn,metadata:Us,content:_i,nodes:[],id:Dt,hasVoted:!1,votesFor:Qc("0"),votesAgainst:Qc("0"),proposalDeadline:0,hasActiveProposal:!1}]);const $c=await n.hasVoted(Dt,e),hd=[];for(let ur=1;ur<=ze;ur++){const er=await n.nodes(ur);if(er&&er.threadId.toString()===Dt.toString()&&er.contentHash!==""){const gi=await Dr(er.metadataHash),Gr=await Dr(er.contentHash),md=await n.hasVoted(ur,e);hd.push({...er,metadata:gi,content:Gr,id:ur,type:Number(er.nodeType),hasVoted:md})}}let pd=Qc("0"),Hc=Qc("0"),Pi=0,_a=!1;for(let ur=1;ur<=qt;ur++){const er=await n.proposals(ur);if(er.threadId.toString()===Dt.toString()&&!er.executed){pd=er.votesFor,Hc=er.votesAgainst,Pi=Number(er.deadline),_a=Mn<Pi+60;break}}s(ur=>ur.map(er=>er.id===Dt?{...er,nodes:hd,hasVoted:$c,votesFor:pd,votesAgainst:Hc,proposalDeadline:Pi,hasActiveProposal:_a}:er))}}})()}catch(Ee){console.error("Error loading threads:",Ee),y("Failed to load on-chain threads: "+Ee.message)}}const ys=Ee=>{x(Ee)},xe=()=>{x(null)},Pe=async(Ee,rt)=>{if(!(!n||!v||!e))try{h(!0),y(null);const ze=Qc(k);await(await v.approve(n.target,ze)).wait(),await(await n.vote(Ee,rt,ze)).wait(),M(""),x(null),ii()}catch(ze){console.error("Error voting:",ze),y("Error voting: "+(ze.message||"Unknown error occurred"))}finally{h(!1)}},dt=async Ee=>{var rt;if(!(!n||!v||!e))try{h(!0),y(null);const ze=await n.MINIMUM_STAKE();console.log("Minimum stake required:",tce(ze),"CANON");const qt={title:`Update Proposal for ${Ee.type==="thread"?"Thread":"Node"} ${Ee.id}`,description:"Proposal to update content",createdAt:new Date().toISOString()},Mn={content:((rt=Ee.content)==null?void 0:rt.content)||"",lastUpdated:new Date().toISOString()},Dt=await Sn(qt),Dn=await Sn(Mn);console.log("Approving tokens..."),await(await v.approve(n.target,ze)).wait(),console.log("Creating proposal..."),await(await n.proposeUpdate(Ee.id,Dt,Dn,ze)).wait(),console.log("Proposal created"),await ii(),x(null)}catch(ze){console.error("Error creating proposal:",ze),y("Error creating proposal: "+(ze.message||"Unknown error occurred"))}finally{h(!1)}},It=async({nodeId:Ee,threadId:rt},{title:ze,content:qt})=>{try{await Hn.updateNode(rt,Ee,{title:ze,content:qt}),await fn()}catch(Mn){console.error("Error updating node:",Mn),y("Failed to update node: "+Mn.message)}},Rt=async Ee=>{if(G&&(!n||!e)){console.log("No contract or account for on-chain operation");return}const{id:rt,newNode:ze}=Ee;if(console.log("Creating node with data:",ze),!(ze!=null&&ze.title)||!(ze!=null&&ze.content)){console.log("Missing node data");return}try{if(h(!0),y(null),G){const qt={title:ze.title,description:ze.content.substring(0,100)+(ze.content.length>100?"...":""),createdAt:new Date().toISOString()},Mn={content:ze.content,lastUpdated:new Date().toISOString()},Dt=await Sn(qt),Dn=await Sn(Mn);await(await n.createNode(rt,Dt,Dn,ze.type)).wait(),await ii()}else{console.log("Creating off-chain node with type:",ze.type);const qt=typeof ze.type=="number"?ct[ze.type]:ze.type||ct[0],Mn=await Hn.createNode({threadId:ze.threadId,title:ze.title,content:ze.content,nodeType:qt,parentId:ze.parentId,metadata:{title:ze.title,description:ze.content.substring(0,100)+(ze.content.length>100?"...":""),createdAt:new Date().toISOString()}}),{nodes:Dt,edges:Dn}=await Hn.getThreadNodes(ze.threadId),Us={...Ee,nodes:Dt.map(_i=>({..._i,id:_i.id,type:ct.indexOf(_i.node_type),content:_i.content,parent_id:_i.parent_id})),edges:Dn};await fn()}x(null)}catch(qt){console.error("Error creating node:",qt),y("Failed to create node: "+qt.message)}finally{h(!1)}},fn=async()=>{try{const Ee=await Hn.getThreads();console.log("Loaded threads:",Ee);const rt=await Promise.all(Ee.map(async ze=>{var Dt;const{nodes:qt,edges:Mn}=await Hn.getThreadNodes(ze.id);return console.log(`Loaded nodes for thread ${ze.id}:`,qt),{...ze,content:ze.content||((Dt=ze.metadata)==null?void 0:Dt.content),nodes:qt.map(Dn=>{var Us;return{...Dn,content:Dn.content||((Us=Dn.metadata)==null?void 0:Us.content),type:ct.indexOf(Dn.node_type)}}),edges:Mn}}));console.log("Threads with nodes:",rt),X(rt),!S&&rt.length>0&&A(rt[0].id)}catch(Ee){console.error("Error loading off-chain threads:",Ee),y("Failed to load off-chain threads")}};T.useEffect(()=>{G?Wt():fn()},[]);const Jn=G?i:B;T.useEffect(()=>{n&&G&&ii()},[n]);const Gt=Jn.find(Ee=>Ee.id===S),Zt=Gt?[Gt]:[],dr=Jn.findIndex(Ee=>Ee.id===S),wn=dr>0,Sr=dr>=0&&dr<Jn.length-1,Wr=()=>{wn&&A(Jn[dr-1].id)},$o=()=>{Sr&&A(Jn[dr+1].id)},Ho=T.useMemo(()=>P?Jn.filter(Ee=>{var rt,ze;return(ze=(rt=Ee.metadata)==null?void 0:rt.title)==null?void 0:ze.toLowerCase().includes(P.toLowerCase())}):[],[Jn,P]),Bs=T.useCallback(()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),F(!1)):(document.documentElement.requestFullscreen().catch(Ee=>{console.error(`Error attempting to enable full-screen mode: ${Ee.message}`)}),F(!0))},[]),Fs=async()=>{if(G)try{const Ee=await fetch("http://localhost:5001/api/v0/id",{method:"POST",headers:{"Content-Type":"application/json"}});if(!Ee.ok)throw new Error(`IPFS request failed with status ${Ee.status}`);const rt=await Ee.json();if(rt&&rt.ID)return Y(!0),!0;throw new Error("Invalid IPFS response")}catch(Ee){return Ee.message.includes("Failed to fetch")?console.error("IPFS daemon not running"):console.error("IPFS connection failed:",Ee),Y(!1),!1}};T.useEffect(()=>{if(G){Fs();const Ee=setInterval(Fs,3e4);return()=>clearInterval(Ee)}else Y(!1)},[G]),T.useEffect(()=>{function Ee(rt){oe.current&&!oe.current.contains(rt.target)&&H(!1)}return document.addEventListener("mousedown",Ee),()=>{document.removeEventListener("mousedown",Ee)}},[]);const Ra=async Ee=>{const rt=Ee.target.value;_(rt),V(!!rt)},Bc=async Ee=>{if(Ee.key==="Enter"&&P.trim()){Ee.preventDefault();try{he(!0);const rt=await Hn.searchThreads(P);if(rt.length===0){if(!$e){Ae(!0);return}const ze=await Hn.generateThread(P);A(ze.id),await fn(),_(""),V(!1)}else X(ze=>{const qt=new Set(ze.map(Dt=>Dt.id)),Mn=rt.filter(Dt=>!qt.has(Dt.id));return[...ze,...Mn]}),V(!0)}catch(rt){console.error("Search/Generate error:",rt),y("Failed to search or generate thread")}finally{he(!1)}}};return m.jsxs("div",{className:"app",children:[g&&m.jsx("div",{className:"error",children:g}),m.jsxs("div",{className:"header",children:[m.jsx("div",{className:"header-center",children:m.jsx("h1",{children:"canonthread"})}),m.jsxs("div",{className:"header-right",children:[$e?m.jsxs("div",{className:"user-menu",children:[m.jsx("span",{className:"user-email",children:$e.email}),m.jsx("button",{className:"btn-outline",onClick:()=>{Hn.logout(),ve(null)},children:"Sign out"})]}):m.jsx("button",{className:"btn-primary",onClick:()=>Ae(!0),children:"Sign in"}),m.jsx("button",{className:"fullscreen-toggle",onClick:Bs,title:j?"Exit full screen":"Enter full screen","aria-label":j?"Exit full screen":"Enter full screen"})]})]}),m.jsxs("div",{className:"main-content",children:[(Gt||ce==="chat")&&m.jsx(GZe,{view:ce,onChangeView:Ee=>{Ee==="sequence"||Ee==="editor"?jt(()=>ie(Ee)):ie(Ee)},threadTitle:((Fc=Gt==null?void 0:Gt.metadata)==null?void 0:Fc.title)||(Gt==null?void 0:Gt.title)||(Gt?`Thread ${Gt.id}`:""),onPrevThread:Wr,onNextThread:$o,hasPrev:wn,hasNext:Sr}),ce==="editor"&&we&&Gt?m.jsx(ZZe,{thread:Gt,selectedNode:we,onSubmit:async Ee=>{await Rt(Ee),ie("graph"),ke(null)},onCancel:()=>{ie("graph"),ke(null)}}):ce==="sequence"&&Gt?m.jsx(VZe,{thread:Gt,onDone:()=>ie("article")}):ce==="canvas"&&Gt?m.jsx(zZe,{thread:Gt}):ce==="article"&&Gt?m.jsx(sEe,{thread:Gt,initialNodeId:Re,currentUser:$e,onAuthRequired:()=>Ae(!0),onContentChange:Ee=>{X(rt=>rt.map(ze=>ze.id===Gt.id?{...ze,content:Ee}:ze))},onUpdateNode:It,onNodesCreated:async Ee=>{await fn(),A(Ee)},onThreadCreated:async Ee=>{await fn(),A(Ee)}}):null,m.jsx("div",{style:{display:ce==="chat"?void 0:"none",flex:1,minHeight:0,overflow:"hidden"},children:m.jsx(kQ,{selectedThreadId:S,currentUser:$e,onAuthRequired:()=>Ae(!0),onNodesCreated:async Ee=>{await fn(),A(Ee)},onThreadCreated:async Ee=>{await fn(),A(Ee)}})}),m.jsxs("div",{className:"visualization-container",style:{display:ce==="graph"?void 0:"none"},children:[m.jsxs("div",{className:"thread-controls",children:[m.jsxs("div",{className:"custom-select",ref:oe,children:[m.jsx("button",{className:"thread-selector",onClick:()=>H(!z),children:S?((Nl=(zc=Jn.find(Ee=>Ee.id===S))==null?void 0:zc.metadata)==null?void 0:Nl.title)||`Thread ${S}`:"Select a Thread"}),z&&m.jsxs("div",{className:"dropdown-menu",children:[m.jsx("div",{className:"dropdown-item create-thread-option",onClick:()=>jt(()=>{R(!0),H(!1)}),children:"+ Create New Thread"}),Jn.map(Ee=>{var rt;return m.jsx("div",{className:"dropdown-item",onClick:()=>{A(Ee.id),H(!1)},children:((rt=Ee.metadata)==null?void 0:rt.title)||`Thread ${Ee.id}`},Ee.id)})]})]}),m.jsxs("div",{className:"search-container",children:[m.jsx("input",{type:"text",className:"search-input",placeholder:"Search threads...",value:P,onChange:Ra,onKeyDown:Bc,onFocus:()=>V(!0)}),O&&P&&m.jsx("div",{className:"search-results",children:ge?m.jsxs("div",{className:"loading-results",children:[m.jsx("div",{className:"loading-spinner"}),m.jsxs("p",{children:['Generating thread for "',P,'"...']})]}):Ho.length>0?Ho.map(Ee=>{var rt;return m.jsx("div",{className:"search-result-item",onClick:()=>{A(Ee.id),_(""),V(!1)},children:((rt=Ee.metadata)==null?void 0:rt.title)||`Thread ${Ee.id}`},Ee.id)}):m.jsxs("div",{className:"no-results",children:['Press Enter to generate a new thread about "',P,'"']})})]})]}),S?m.jsx(iY,{children:m.jsx(I5e,{threads:Zt,onNodeClick:ys,onAddNode:Rt,onOpenEditor:Ee=>jt(()=>{ke(Ee),ie("editor")}),onSelectedNodeChange:Fe,loading:u})}):m.jsx("div",{className:"no-thread-message",children:"Please select a thread from the dropdown"})]}),I&&m.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:m.jsxs("div",{className:"modal-content",onClick:Ee=>Ee.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Create New Thread"}),m.jsx("button",{className:"close-button",onClick:()=>R(!1),children:""})]}),m.jsx("div",{className:"modal-body",children:m.jsxs("div",{className:"create-thread-form",children:[m.jsx("input",{type:"text",placeholder:"Title",value:o,onChange:Ee=>a(Ee.target.value),className:"thread-input"}),m.jsx("input",{type:"text",placeholder:"Description",value:l,onChange:Ee=>f(Ee.target.value),className:"thread-input"}),m.jsxs("div",{className:"form-buttons",children:[m.jsx("button",{className:"cancel-button",onClick:()=>R(!1),disabled:u,children:"Cancel"}),m.jsx("button",{className:"submit-button",onClick:async()=>{await Ki(),g||R(!1)},disabled:u||G&&!n,children:u?"Creating...":"Create Thread"})]})]})})]})}),U&&m.jsx(N5e,{node:U,onClose:xe,onVote:Pe,onCreateProposal:dt,onAddNode:Rt,loading:u,voteAmount:k,setVoteAmount:M}),Le&&m.jsx(qZe,{onSuccess:Ee=>{ve(Ee),Ae(!1)},onClose:()=>Ae(!1)})]})]})}Tle.createRoot(document.getElementById("root")).render(m.jsx(T.StrictMode,{children:m.jsx(QZe,{})}));const zoe=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:GBe,encodePngMetadata:WBe,getTEXtChunk:Sne},Symbol.toStringTag,{value:"Module"})),JZe=Object.freeze(Object.defineProperty({__proto__:null,alerts:Nne,buttons:Ine,canvasError:One,clearCanvasDialog:Vne,colorPicker:ere,colors:Qne,commandPalette:ore,confirmDialog:Xne,default:lR,element:Pne,elementLink:Ane,encrypted:Yne,errorDialog:zne,errorSplash:jne,errors:Rne,exportDialog:$ne,fontList:ire,headings:Dne,helpDialog:Hne,hints:Lne,imageExportDialog:Kne,labels:Cne,library:Mne,mermaid:nre,overwriteConfirm:tre,publishDialog:Wne,publishSuccessDialog:Gne,quickSearch:rre,roomDialog:Fne,search:Tne,shareDialog:Bne,stats:Zne,toast:qne,toolBar:_ne,userList:sre,welcomeScreen:Jne},Symbol.toStringTag,{value:"Module"})),eqe=Object.freeze(Object.defineProperty({__proto__:null,default:cre,en:are,kaa:lre},Symbol.toStringTag,{value:"Module"}));export{fy as C,oo as R,jo as S,Ze as _,O0e as a,r2 as b,Au as c,IAe as d,CT as e,IX as f,Ia as g,C1e as h,oc as i,rqe as j,PI as k,sqe as l,_X as n,CX as r,_o as s};
