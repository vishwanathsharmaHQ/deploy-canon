const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/subset-worker.chunk-Bd5gH6yC.js","assets/subset-shared.chunk-CYmretqf.js","assets/pica-BYMevxCt.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
var Use=Object.defineProperty;var K_=e=>{throw TypeError(e)};var yse=(e,t,n)=>t in e?Use(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ce=(e,t,n)=>yse(e,typeof t!="symbol"?t+"":t,n),ow=(e,t,n)=>t.has(e)||K_("Cannot "+n);var W=(e,t,n)=>(ow(e,t,"read from private field"),n?n.call(e):t.get(e)),be=(e,t,n)=>t.has(e)?K_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),J=(e,t,n,r)=>(ow(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ie=(e,t,n)=>(ow(e,t,"access private method"),n);var yg=(e,t,n,r)=>({set _(i){J(e,t,i,n)},get _(){return W(e,t,r)}});function xse(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aw={exports:{}},xg={},lw={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function vse(){if(Y_)return Lt;Y_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function u(K){return K===null||typeof K!="object"?null:(K=d&&K[d]||K["@@iterator"],typeof K=="function"?K:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,U={};function y(K,q,se){this.props=K,this.context=q,this.refs=U,this.updater=se||h}y.prototype.isReactComponent={},y.prototype.setState=function(K,q){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,q,"setState")},y.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function x(){}x.prototype=y.prototype;function w(K,q,se){this.props=K,this.context=q,this.refs=U,this.updater=se||h}var E=w.prototype=new x;E.constructor=w,g(E,y.prototype),E.isPureReactComponent=!0;var S=Array.isArray,A=Object.prototype.hasOwnProperty,M={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(K,q,se){var de,xe={},ve=null,ue=null;if(q!=null)for(de in q.ref!==void 0&&(ue=q.ref),q.key!==void 0&&(ve=""+q.key),q)A.call(q,de)&&!C.hasOwnProperty(de)&&(xe[de]=q[de]);var te=arguments.length-2;if(te===1)xe.children=se;else if(1<te){for(var le=Array(te),he=0;he<te;he++)le[he]=arguments[he+2];xe.children=le}if(K&&K.defaultProps)for(de in te=K.defaultProps,te)xe[de]===void 0&&(xe[de]=te[de]);return{$$typeof:e,type:K,key:ve,ref:ue,props:xe,_owner:M.current}}function R(K,q){return{$$typeof:e,type:K.type,key:q,ref:K.ref,props:K.props,_owner:K._owner}}function P(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function _(K){var q={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(se){return q[se]})}var O=/\/+/g;function F(K,q){return typeof K=="object"&&K!==null&&K.key!=null?_(""+K.key):q.toString(36)}function B(K,q,se,de,xe){var ve=typeof K;(ve==="undefined"||ve==="boolean")&&(K=null);var ue=!1;if(K===null)ue=!0;else switch(ve){case"string":case"number":ue=!0;break;case"object":switch(K.$$typeof){case e:case t:ue=!0}}if(ue)return ue=K,xe=xe(ue),K=de===""?"."+F(ue,0):de,S(xe)?(se="",K!=null&&(se=K.replace(O,"$&/")+"/"),B(xe,q,se,"",function(he){return he})):xe!=null&&(P(xe)&&(xe=R(xe,se+(!xe.key||ue&&ue.key===xe.key?"":(""+xe.key).replace(O,"$&/")+"/")+K)),q.push(xe)),1;if(ue=0,de=de===""?".":de+":",S(K))for(var te=0;te<K.length;te++){ve=K[te];var le=de+F(ve,te);ue+=B(ve,q,se,le,xe)}else if(le=u(K),typeof le=="function")for(K=le.call(K),te=0;!(ve=K.next()).done;)ve=ve.value,le=de+F(ve,te++),ue+=B(ve,q,se,le,xe);else if(ve==="object")throw q=String(K),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ue}function $(K,q,se){if(K==null)return K;var de=[],xe=0;return B(K,de,"","",function(ve){return q.call(se,ve,xe++)}),de}function z(K){if(K._status===-1){var q=K._result;q=q(),q.then(function(se){(K._status===0||K._status===-1)&&(K._status=1,K._result=se)},function(se){(K._status===0||K._status===-1)&&(K._status=2,K._result=se)}),K._status===-1&&(K._status=0,K._result=q)}if(K._status===1)return K._result.default;throw K._result}var H={current:null},G={transition:null},V={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:G,ReactCurrentOwner:M};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Lt.Children={map:$,forEach:function(K,q,se){$(K,function(){q.apply(this,arguments)},se)},count:function(K){var q=0;return $(K,function(){q++}),q},toArray:function(K){return $(K,function(q){return q})||[]},only:function(K){if(!P(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Lt.Component=y,Lt.Fragment=n,Lt.Profiler=i,Lt.PureComponent=w,Lt.StrictMode=r,Lt.Suspense=l,Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Lt.act=Y,Lt.cloneElement=function(K,q,se){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var de=g({},K.props),xe=K.key,ve=K.ref,ue=K._owner;if(q!=null){if(q.ref!==void 0&&(ve=q.ref,ue=M.current),q.key!==void 0&&(xe=""+q.key),K.type&&K.type.defaultProps)var te=K.type.defaultProps;for(le in q)A.call(q,le)&&!C.hasOwnProperty(le)&&(de[le]=q[le]===void 0&&te!==void 0?te[le]:q[le])}var le=arguments.length-2;if(le===1)de.children=se;else if(1<le){te=Array(le);for(var he=0;he<le;he++)te[he]=arguments[he+2];de.children=te}return{$$typeof:e,type:K.type,key:xe,ref:ve,props:de,_owner:ue}},Lt.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:s,_context:K},K.Consumer=K},Lt.createElement=T,Lt.createFactory=function(K){var q=T.bind(null,K);return q.type=K,q},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(K){return{$$typeof:a,render:K}},Lt.isValidElement=P,Lt.lazy=function(K){return{$$typeof:c,_payload:{_status:-1,_result:K},_init:z}},Lt.memo=function(K,q){return{$$typeof:f,type:K,compare:q===void 0?null:q}},Lt.startTransition=function(K){var q=G.transition;G.transition={};try{K()}finally{G.transition=q}},Lt.unstable_act=Y,Lt.useCallback=function(K,q){return H.current.useCallback(K,q)},Lt.useContext=function(K){return H.current.useContext(K)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(K){return H.current.useDeferredValue(K)},Lt.useEffect=function(K,q){return H.current.useEffect(K,q)},Lt.useId=function(){return H.current.useId()},Lt.useImperativeHandle=function(K,q,se){return H.current.useImperativeHandle(K,q,se)},Lt.useInsertionEffect=function(K,q){return H.current.useInsertionEffect(K,q)},Lt.useLayoutEffect=function(K,q){return H.current.useLayoutEffect(K,q)},Lt.useMemo=function(K,q){return H.current.useMemo(K,q)},Lt.useReducer=function(K,q,se){return H.current.useReducer(K,q,se)},Lt.useRef=function(K){return H.current.useRef(K)},Lt.useState=function(K){return H.current.useState(K)},Lt.useSyncExternalStore=function(K,q,se){return H.current.useSyncExternalStore(K,q,se)},Lt.useTransition=function(){return H.current.useTransition()},Lt.version="18.3.1",Lt}var Z_;function bb(){return Z_||(Z_=1,lw.exports=vse()),lw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function wse(){if(q_)return xg;q_=1;var e=bb(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,f){var c,d={},u=null,h=null;f!==void 0&&(u=""+f),l.key!==void 0&&(u=""+l.key),l.ref!==void 0&&(h=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:a,key:u,ref:h,props:d,_owner:i.current}}return xg.Fragment=n,xg.jsx=o,xg.jsxs=o,xg}var Q_;function Ese(){return Q_||(Q_=1,aw.exports=wse()),aw.exports}var m=Ese(),I=bb();const Te=mc(I),LA=xse({__proto__:null,default:Te},[I]);var uU={},cw={exports:{}},ks={},fw={exports:{}},dw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function Sse(){return J_||(J_=1,function(e){function t(G,V){var Y=G.length;G.push(V);e:for(;0<Y;){var K=Y-1>>>1,q=G[K];if(0<i(q,V))G[K]=V,G[Y]=q,Y=K;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var V=G[0],Y=G.pop();if(Y!==V){G[0]=Y;e:for(var K=0,q=G.length,se=q>>>1;K<se;){var de=2*(K+1)-1,xe=G[de],ve=de+1,ue=G[ve];if(0>i(xe,Y))ve<q&&0>i(ue,xe)?(G[K]=ue,G[ve]=Y,K=ve):(G[K]=xe,G[de]=Y,K=de);else if(ve<q&&0>i(ue,Y))G[K]=ue,G[ve]=Y,K=ve;else break e}}return V}function i(G,V){var Y=G.sortIndex-V.sortIndex;return Y!==0?Y:G.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],f=[],c=1,d=null,u=3,h=!1,g=!1,U=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var V=n(f);V!==null;){if(V.callback===null)r(f);else if(V.startTime<=G)r(f),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(f)}}function S(G){if(U=!1,E(G),!g)if(n(l)!==null)g=!0,z(A);else{var V=n(f);V!==null&&H(S,V.startTime-G)}}function A(G,V){g=!1,U&&(U=!1,x(T),T=-1),h=!0;var Y=u;try{for(E(V),d=n(l);d!==null&&(!(d.expirationTime>V)||G&&!_());){var K=d.callback;if(typeof K=="function"){d.callback=null,u=d.priorityLevel;var q=K(d.expirationTime<=V);V=e.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),E(V)}else r(l);d=n(l)}if(d!==null)var se=!0;else{var de=n(f);de!==null&&H(S,de.startTime-V),se=!1}return se}finally{d=null,u=Y,h=!1}}var M=!1,C=null,T=-1,R=5,P=-1;function _(){return!(e.unstable_now()-P<R)}function O(){if(C!==null){var G=e.unstable_now();P=G;var V=!0;try{V=C(!0,G)}finally{V?F():(M=!1,C=null)}}else M=!1}var F;if(typeof w=="function")F=function(){w(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=O,F=function(){$.postMessage(null)}}else F=function(){y(O,0)};function z(G){C=G,M||(M=!0,F())}function H(G,V){T=y(function(){G(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,z(A))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(G){switch(u){case 1:case 2:case 3:var V=3;break;default:V=u}var Y=u;u=V;try{return G()}finally{u=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,V){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=u;u=G;try{return V()}finally{u=Y}},e.unstable_scheduleCallback=function(G,V,Y){var K=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?K+Y:K):Y=K,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Y+q,G={id:c++,callback:V,priorityLevel:G,startTime:Y,expirationTime:q,sortIndex:-1},Y>K?(G.sortIndex=Y,t(f,G),n(l)===null&&G===n(f)&&(U?(x(T),T=-1):U=!0,H(S,Y-K))):(G.sortIndex=q,t(l,G),g||h||(g=!0,z(A))),G},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(G){var V=u;return function(){var Y=u;u=V;try{return G.apply(this,arguments)}finally{u=Y}}}}(dw)),dw}var eP;function kse(){return eP||(eP=1,fw.exports=Sse()),fw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tP;function Cse(){if(tP)return ks;tP=1;var e=bb(),t=kse();function n(p){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+p,v=1;v<arguments.length;v++)b+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(p,b){o(p,b),o(p+"Capture",b)}function o(p,b){for(i[p]=b,p=0;p<b.length;p++)r.add(b[p])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function u(p){return l.call(d,p)?!0:l.call(c,p)?!1:f.test(p)?d[p]=!0:(c[p]=!0,!1)}function h(p,b,v,k){if(v!==null&&v.type===0)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return k?!1:v!==null?!v.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function g(p,b,v,k){if(b===null||typeof b>"u"||h(p,b,v,k))return!0;if(k)return!1;if(v!==null)switch(v.type){case 3:return!b;case 4:return b===!1;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function U(p,b,v,k,N,L,X){this.acceptsBooleans=b===2||b===3||b===4,this.attributeName=k,this.attributeNamespace=N,this.mustUseProperty=v,this.propertyName=p,this.type=b,this.sanitizeURL=L,this.removeEmptyString=X}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){y[p]=new U(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var b=p[0];y[b]=new U(b,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){y[p]=new U(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){y[p]=new U(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){y[p]=new U(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){y[p]=new U(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){y[p]=new U(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){y[p]=new U(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){y[p]=new U(p,5,!1,p.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function w(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var b=p.replace(x,w);y[b]=new U(b,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var b=p.replace(x,w);y[b]=new U(b,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var b=p.replace(x,w);y[b]=new U(b,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){y[p]=new U(p,1,!1,p.toLowerCase(),null,!1,!1)}),y.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){y[p]=new U(p,1,!1,p.toLowerCase(),null,!0,!0)});function E(p,b,v,k){var N=y.hasOwnProperty(b)?y[b]:null;(N!==null?N.type!==0:k||!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(g(b,v,N,k)&&(v=null),k||N===null?u(b)&&(v===null?p.removeAttribute(b):p.setAttribute(b,""+v)):N.mustUseProperty?p[N.propertyName]=v===null?N.type===3?!1:"":v:(b=N.attributeName,k=N.attributeNamespace,v===null?p.removeAttribute(b):(N=N.type,v=N===3||N===4&&v===!0?"":""+v,k?p.setAttributeNS(k,b,v):p.setAttribute(b,v))))}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),M=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),_=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),G=Symbol.iterator;function V(p){return p===null||typeof p!="object"?null:(p=G&&p[G]||p["@@iterator"],typeof p=="function"?p:null)}var Y=Object.assign,K;function q(p){if(K===void 0)try{throw Error()}catch(v){var b=v.stack.trim().match(/\n( *(at )?)/);K=b&&b[1]||""}return`
`+K+p}var se=!1;function de(p,b){if(!p||se)return"";se=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(ge){var k=ge}Reflect.construct(p,[],b)}else{try{b.call()}catch(ge){k=ge}p.call(b.prototype)}else{try{throw Error()}catch(ge){k=ge}p()}}catch(ge){if(ge&&k&&typeof ge.stack=="string"){for(var N=ge.stack.split(`
`),L=k.stack.split(`
`),X=N.length-1,ee=L.length-1;1<=X&&0<=ee&&N[X]!==L[ee];)ee--;for(;1<=X&&0<=ee;X--,ee--)if(N[X]!==L[ee]){if(X!==1||ee!==1)do if(X--,ee--,0>ee||N[X]!==L[ee]){var ne=`
`+N[X].replace(" at new "," at ");return p.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",p.displayName)),ne}while(1<=X&&0<=ee);break}}}finally{se=!1,Error.prepareStackTrace=v}return(p=p?p.displayName||p.name:"")?q(p):""}function xe(p){switch(p.tag){case 5:return q(p.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return p=de(p.type,!1),p;case 11:return p=de(p.type.render,!1),p;case 1:return p=de(p.type,!0),p;default:return""}}function ve(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case C:return"Fragment";case M:return"Portal";case R:return"Profiler";case T:return"StrictMode";case F:return"Suspense";case B:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case _:return(p.displayName||"Context")+".Consumer";case P:return(p._context.displayName||"Context")+".Provider";case O:var b=p.render;return p=p.displayName,p||(p=b.displayName||b.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case $:return b=p.displayName||null,b!==null?b:ve(p.type)||"Memo";case z:b=p._payload,p=p._init;try{return ve(p(b))}catch{}}return null}function ue(p){var b=p.type;switch(p.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=b.render,p=p.displayName||p.name||"",b.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(b);case 8:return b===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function te(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function le(p){var b=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function he(p){var b=le(p)?"checked":"value",v=Object.getOwnPropertyDescriptor(p.constructor.prototype,b),k=""+p[b];if(!p.hasOwnProperty(b)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var N=v.get,L=v.set;return Object.defineProperty(p,b,{configurable:!0,get:function(){return N.call(this)},set:function(X){k=""+X,L.call(this,X)}}),Object.defineProperty(p,b,{enumerable:v.enumerable}),{getValue:function(){return k},setValue:function(X){k=""+X},stopTracking:function(){p._valueTracker=null,delete p[b]}}}}function we(p){p._valueTracker||(p._valueTracker=he(p))}function Se(p){if(!p)return!1;var b=p._valueTracker;if(!b)return!0;var v=b.getValue(),k="";return p&&(k=le(p)?p.checked?"true":"false":p.value),p=k,p!==v?(b.setValue(p),!0):!1}function De(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Ge(p,b){var v=b.checked;return Y({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??p._wrapperState.initialChecked})}function ht(p,b){var v=b.defaultValue==null?"":b.defaultValue,k=b.checked!=null?b.checked:b.defaultChecked;v=te(b.value!=null?b.value:v),p._wrapperState={initialChecked:k,initialValue:v,controlled:b.type==="checkbox"||b.type==="radio"?b.checked!=null:b.value!=null}}function ot(p,b){b=b.checked,b!=null&&E(p,"checked",b,!1)}function Bt(p,b){ot(p,b);var v=te(b.value),k=b.type;if(v!=null)k==="number"?(v===0&&p.value===""||p.value!=v)&&(p.value=""+v):p.value!==""+v&&(p.value=""+v);else if(k==="submit"||k==="reset"){p.removeAttribute("value");return}b.hasOwnProperty("value")?fn(p,b.type,v):b.hasOwnProperty("defaultValue")&&fn(p,b.type,te(b.defaultValue)),b.checked==null&&b.defaultChecked!=null&&(p.defaultChecked=!!b.defaultChecked)}function wn(p,b,v){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var k=b.type;if(!(k!=="submit"&&k!=="reset"||b.value!==void 0&&b.value!==null))return;b=""+p._wrapperState.initialValue,v||b===p.value||(p.value=b),p.defaultValue=b}v=p.name,v!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,v!==""&&(p.name=v)}function fn(p,b,v){(b!=="number"||De(p.ownerDocument)!==p)&&(v==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+v&&(p.defaultValue=""+v))}var ui=Array.isArray;function Ci(p,b,v,k){if(p=p.options,b){b={};for(var N=0;N<v.length;N++)b["$"+v[N]]=!0;for(v=0;v<p.length;v++)N=b.hasOwnProperty("$"+p[v].value),p[v].selected!==N&&(p[v].selected=N),N&&k&&(p[v].defaultSelected=!0)}else{for(v=""+te(v),b=null,N=0;N<p.length;N++){if(p[N].value===v){p[N].selected=!0,k&&(p[N].defaultSelected=!0);return}b!==null||p[N].disabled||(b=p[N])}b!==null&&(b.selected=!0)}}function qi(p,b){if(b.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},b,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function Xs(p,b){var v=b.value;if(v==null){if(v=b.children,b=b.defaultValue,v!=null){if(b!=null)throw Error(n(92));if(ui(v)){if(1<v.length)throw Error(n(93));v=v[0]}b=v}b==null&&(b=""),v=b}p._wrapperState={initialValue:te(v)}}function la(p,b){var v=te(b.value),k=te(b.defaultValue);v!=null&&(v=""+v,v!==p.value&&(p.value=v),b.defaultValue==null&&p.defaultValue!==v&&(p.defaultValue=v)),k!=null&&(p.defaultValue=""+k)}function Us(p){var b=p.textContent;b===p._wrapperState.initialValue&&b!==""&&b!==null&&(p.value=b)}function Cr(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function or(p,b){return p==null||p==="http://www.w3.org/1999/xhtml"?Cr(b):p==="http://www.w3.org/2000/svg"&&b==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var It,ys=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(b,v,k,N){MSApp.execUnsafeLocalFunction(function(){return p(b,v,k,N)})}:p}(function(p,b){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=b;else{for(It=It||document.createElement("div"),It.innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=It.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;b.firstChild;)p.appendChild(b.firstChild)}});function Xn(p,b){if(b){var v=p.firstChild;if(v&&v===p.lastChild&&v.nodeType===3){v.nodeValue=b;return}}p.textContent=b}var Ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vc=["Webkit","ms","Moz","O"];Object.keys(Ai).forEach(function(p){vc.forEach(function(b){b=b+p.charAt(0).toUpperCase()+p.substring(1),Ai[b]=Ai[p]})});function ca(p,b,v){return b==null||typeof b=="boolean"||b===""?"":v||typeof b!="number"||b===0||Ai.hasOwnProperty(p)&&Ai[p]?(""+b).trim():b+"px"}function ul(p,b){p=p.style;for(var v in b)if(b.hasOwnProperty(v)){var k=v.indexOf("--")===0,N=ca(v,b[v],k);v==="float"&&(v="cssFloat"),k?p.setProperty(v,N):p[v]=N}}var hl=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pl(p,b){if(b){if(hl[p]&&(b.children!=null||b.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(b.dangerouslySetInnerHTML!=null){if(b.children!=null)throw Error(n(60));if(typeof b.dangerouslySetInnerHTML!="object"||!("__html"in b.dangerouslySetInnerHTML))throw Error(n(61))}if(b.style!=null&&typeof b.style!="object")throw Error(n(62))}}function Ks(p,b){if(p.indexOf("-")===-1)return typeof b.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=null;function fa(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var da=null,ua=null,ha=null;function ke(p){if(p=ig(p)){if(typeof da!="function")throw Error(n(280));var b=p.stateNode;b&&(b=A8(b),da(p.stateNode,p.type,b))}}function nt(p){ua?ha?ha.push(p):ha=[p]:ua=p}function Oe(){if(ua){var p=ua,b=ha;if(ha=ua=null,ke(p),b)for(p=0;p<b.length;p++)ke(b[p])}}function Ft(p,b){return p(b)}function Tn(){}var St=!1;function Dn(p,b,v){if(St)return p(b,v);St=!0;try{return Ft(p,b,v)}finally{St=!1,(ua!==null||ha!==null)&&(Tn(),Oe())}}function Mi(p,b){var v=p.stateNode;if(v===null)return null;var k=A8(v);if(k===null)return null;v=k[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(p=p.type,k=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!k;break e;default:p=!1}if(p)return null;if(v&&typeof v!="function")throw Error(n(231,b,typeof v));return v}var Ti=!1;if(a)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Ti=!1}function Gf(p,b,v,k,N,L,X,ee,ne){var ge=Array.prototype.slice.call(arguments,3);try{b.apply(v,ge)}catch(Ae){this.onError(Ae)}}var xo=!1,vo=null,Ys=!1,ma=null,gr={onError:function(p){xo=!0,vo=p}};function Ln(p,b,v,k,N,L,X,ee,ne){xo=!1,vo=null,Gf.apply(gr,arguments)}function hi(p,b,v,k,N,L,X,ee,ne){if(Ln.apply(this,arguments),xo){if(xo){var ge=vo;xo=!1,vo=null}else throw Error(n(198));Ys||(Ys=!0,ma=ge)}}function En(p){var b=p,v=p;if(p.alternate)for(;b.return;)b=b.return;else{p=b;do b=p,b.flags&4098&&(v=b.return),p=b.return;while(p)}return b.tag===3?v:null}function wc(p){if(p.tag===13){var b=p.memoizedState;if(b===null&&(p=p.alternate,p!==null&&(b=p.memoizedState)),b!==null)return b.dehydrated}return null}function V0(p){if(En(p)!==p)throw Error(n(188))}function j6(p){var b=p.alternate;if(!b){if(b=En(p),b===null)throw Error(n(188));return b!==p?null:p}for(var v=p,k=b;;){var N=v.return;if(N===null)break;var L=N.alternate;if(L===null){if(k=N.return,k!==null){v=k;continue}break}if(N.child===L.child){for(L=N.child;L;){if(L===v)return V0(N),p;if(L===k)return V0(N),b;L=L.sibling}throw Error(n(188))}if(v.return!==k.return)v=N,k=L;else{for(var X=!1,ee=N.child;ee;){if(ee===v){X=!0,v=N,k=L;break}if(ee===k){X=!0,k=N,v=L;break}ee=ee.sibling}if(!X){for(ee=L.child;ee;){if(ee===v){X=!0,v=L,k=N;break}if(ee===k){X=!0,k=L,v=N;break}ee=ee.sibling}if(!X)throw Error(n(189))}}if(v.alternate!==k)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?p:b}function r8(p){return p=j6(p),p!==null?i8(p):null}function i8(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var b=i8(p);if(b!==null)return b;p=p.sibling}return null}var s8=t.unstable_scheduleCallback,o8=t.unstable_cancelCallback,vx=t.unstable_shouldYield,a8=t.unstable_requestPaint,Kn=t.unstable_now,wx=t.unstable_getCurrentPriorityLevel,B6=t.unstable_ImmediatePriority,l8=t.unstable_UserBlockingPriority,u1=t.unstable_NormalPriority,Ex=t.unstable_LowPriority,c8=t.unstable_IdlePriority,W0=null,wo=null;function Sx(p){if(wo&&typeof wo.onCommitFiberRoot=="function")try{wo.onCommitFiberRoot(W0,p,void 0,(p.current.flags&128)===128)}catch{}}var Zs=Math.clz32?Math.clz32:Ax,kx=Math.log,Cx=Math.LN2;function Ax(p){return p>>>=0,p===0?32:31-(kx(p)/Cx|0)|0}var h1=64,p1=4194304;function gl(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function m1(p,b){var v=p.pendingLanes;if(v===0)return 0;var k=0,N=p.suspendedLanes,L=p.pingedLanes,X=v&268435455;if(X!==0){var ee=X&~N;ee!==0?k=gl(ee):(L&=X,L!==0&&(k=gl(L)))}else X=v&~N,X!==0?k=gl(X):L!==0&&(k=gl(L));if(k===0)return 0;if(b!==0&&b!==k&&!(b&N)&&(N=k&-k,L=b&-b,N>=L||N===16&&(L&4194240)!==0))return b;if(k&4&&(k|=v&16),b=p.entangledLanes,b!==0)for(p=p.entanglements,b&=k;0<b;)v=31-Zs(b),N=1<<v,k|=p[v],b&=~N;return k}function f8(p,b){switch(p){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mx(p,b){for(var v=p.suspendedLanes,k=p.pingedLanes,N=p.expirationTimes,L=p.pendingLanes;0<L;){var X=31-Zs(L),ee=1<<X,ne=N[X];ne===-1?(!(ee&v)||ee&k)&&(N[X]=f8(ee,b)):ne<=b&&(p.expiredLanes|=ee),L&=~ee}}function F6(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function g1(){var p=h1;return h1<<=1,!(h1&4194240)&&(h1=64),p}function $6(p){for(var b=[],v=0;31>v;v++)b.push(p);return b}function G0(p,b,v){p.pendingLanes|=b,b!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,b=31-Zs(b),p[b]=v}function d8(p,b){var v=p.pendingLanes&~b;p.pendingLanes=b,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=b,p.mutableReadLanes&=b,p.entangledLanes&=b,b=p.entanglements;var k=p.eventTimes;for(p=p.expirationTimes;0<v;){var N=31-Zs(v),L=1<<N;b[N]=0,k[N]=-1,p[N]=-1,v&=~L}}function Tx(p,b){var v=p.entangledLanes|=b;for(p=p.entanglements;v;){var k=31-Zs(v),N=1<<k;N&b|p[k]&b&&(p[k]|=b),v&=~N}}var dn=0;function CN(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var AN,Ix,MN,TN,IN,Nx=!1,u8=[],Xf=null,Kf=null,Yf=null,z6=new Map,H6=new Map,Zf=[],$re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function NN(p,b){switch(p){case"focusin":case"focusout":Xf=null;break;case"dragenter":case"dragleave":Kf=null;break;case"mouseover":case"mouseout":Yf=null;break;case"pointerover":case"pointerout":z6.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":H6.delete(b.pointerId)}}function V6(p,b,v,k,N,L){return p===null||p.nativeEvent!==L?(p={blockedOn:b,domEventName:v,eventSystemFlags:k,nativeEvent:L,targetContainers:[N]},b!==null&&(b=ig(b),b!==null&&Ix(b)),p):(p.eventSystemFlags|=k,b=p.targetContainers,N!==null&&b.indexOf(N)===-1&&b.push(N),p)}function zre(p,b,v,k,N){switch(b){case"focusin":return Xf=V6(Xf,p,b,v,k,N),!0;case"dragenter":return Kf=V6(Kf,p,b,v,k,N),!0;case"mouseover":return Yf=V6(Yf,p,b,v,k,N),!0;case"pointerover":var L=N.pointerId;return z6.set(L,V6(z6.get(L)||null,p,b,v,k,N)),!0;case"gotpointercapture":return L=N.pointerId,H6.set(L,V6(H6.get(L)||null,p,b,v,k,N)),!0}return!1}function RN(p){var b=X0(p.target);if(b!==null){var v=En(b);if(v!==null){if(b=v.tag,b===13){if(b=wc(v),b!==null){p.blockedOn=b,IN(p.priority,function(){MN(v)});return}}else if(b===3&&v.stateNode.current.memoizedState.isDehydrated){p.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}p.blockedOn=null}function h8(p){if(p.blockedOn!==null)return!1;for(var b=p.targetContainers;0<b.length;){var v=_x(p.domEventName,p.eventSystemFlags,b[0],p.nativeEvent);if(v===null){v=p.nativeEvent;var k=new v.constructor(v.type,v);ml=k,v.target.dispatchEvent(k),ml=null}else return b=ig(v),b!==null&&Ix(b),p.blockedOn=v,!1;b.shift()}return!0}function _N(p,b,v){h8(p)&&v.delete(b)}function Hre(){Nx=!1,Xf!==null&&h8(Xf)&&(Xf=null),Kf!==null&&h8(Kf)&&(Kf=null),Yf!==null&&h8(Yf)&&(Yf=null),z6.forEach(_N),H6.forEach(_N)}function W6(p,b){p.blockedOn===b&&(p.blockedOn=null,Nx||(Nx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Hre)))}function G6(p){function b(N){return W6(N,p)}if(0<u8.length){W6(u8[0],p);for(var v=1;v<u8.length;v++){var k=u8[v];k.blockedOn===p&&(k.blockedOn=null)}}for(Xf!==null&&W6(Xf,p),Kf!==null&&W6(Kf,p),Yf!==null&&W6(Yf,p),z6.forEach(b),H6.forEach(b),v=0;v<Zf.length;v++)k=Zf[v],k.blockedOn===p&&(k.blockedOn=null);for(;0<Zf.length&&(v=Zf[0],v.blockedOn===null);)RN(v),v.blockedOn===null&&Zf.shift()}var b1=S.ReactCurrentBatchConfig,p8=!0;function Vre(p,b,v,k){var N=dn,L=b1.transition;b1.transition=null;try{dn=1,Rx(p,b,v,k)}finally{dn=N,b1.transition=L}}function Wre(p,b,v,k){var N=dn,L=b1.transition;b1.transition=null;try{dn=4,Rx(p,b,v,k)}finally{dn=N,b1.transition=L}}function Rx(p,b,v,k){if(p8){var N=_x(p,b,v,k);if(N===null)Zx(p,b,k,m8,v),NN(p,k);else if(zre(N,p,b,v,k))k.stopPropagation();else if(NN(p,k),b&4&&-1<$re.indexOf(p)){for(;N!==null;){var L=ig(N);if(L!==null&&AN(L),L=_x(p,b,v,k),L===null&&Zx(p,b,k,m8,v),L===N)break;N=L}N!==null&&k.stopPropagation()}else Zx(p,b,k,null,v)}}var m8=null;function _x(p,b,v,k){if(m8=null,p=fa(k),p=X0(p),p!==null)if(b=En(p),b===null)p=null;else if(v=b.tag,v===13){if(p=wc(b),p!==null)return p;p=null}else if(v===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;p=null}else b!==p&&(p=null);return m8=p,null}function PN(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wx()){case B6:return 1;case l8:return 4;case u1:case Ex:return 16;case c8:return 536870912;default:return 16}default:return 16}}var qf=null,Px=null,g8=null;function DN(){if(g8)return g8;var p,b=Px,v=b.length,k,N="value"in qf?qf.value:qf.textContent,L=N.length;for(p=0;p<v&&b[p]===N[p];p++);var X=v-p;for(k=1;k<=X&&b[v-k]===N[L-k];k++);return g8=N.slice(p,1<k?1-k:void 0)}function b8(p){var b=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&b===13&&(p=13)):p=b,p===10&&(p=13),32<=p||p===13?p:0}function U8(){return!0}function LN(){return!1}function qs(p){function b(v,k,N,L,X){this._reactName=v,this._targetInst=N,this.type=k,this.nativeEvent=L,this.target=X,this.currentTarget=null;for(var ee in p)p.hasOwnProperty(ee)&&(v=p[ee],this[ee]=v?v(L):L[ee]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?U8:LN,this.isPropagationStopped=LN,this}return Y(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=U8)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=U8)},persist:function(){},isPersistent:U8}),b}var U1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dx=qs(U1),X6=Y({},U1,{view:0,detail:0}),Gre=qs(X6),Lx,Ox,K6,y8=Y({},X6,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bx,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==K6&&(K6&&p.type==="mousemove"?(Lx=p.screenX-K6.screenX,Ox=p.screenY-K6.screenY):Ox=Lx=0,K6=p),Lx)},movementY:function(p){return"movementY"in p?p.movementY:Ox}}),ON=qs(y8),Xre=Y({},y8,{dataTransfer:0}),Kre=qs(Xre),Yre=Y({},X6,{relatedTarget:0}),jx=qs(Yre),Zre=Y({},U1,{animationName:0,elapsedTime:0,pseudoElement:0}),qre=qs(Zre),Qre=Y({},U1,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Jre=qs(Qre),eie=Y({},U1,{data:0}),jN=qs(eie),tie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iie(p){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(p):(p=rie[p])?!!b[p]:!1}function Bx(){return iie}var sie=Y({},X6,{key:function(p){if(p.key){var b=tie[p.key]||p.key;if(b!=="Unidentified")return b}return p.type==="keypress"?(p=b8(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?nie[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bx,charCode:function(p){return p.type==="keypress"?b8(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?b8(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),oie=qs(sie),aie=Y({},y8,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),BN=qs(aie),lie=Y({},X6,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bx}),cie=qs(lie),fie=Y({},U1,{propertyName:0,elapsedTime:0,pseudoElement:0}),die=qs(fie),uie=Y({},y8,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),hie=qs(uie),pie=[9,13,27,32],Fx=a&&"CompositionEvent"in window,Y6=null;a&&"documentMode"in document&&(Y6=document.documentMode);var mie=a&&"TextEvent"in window&&!Y6,FN=a&&(!Fx||Y6&&8<Y6&&11>=Y6),$N=" ",zN=!1;function HN(p,b){switch(p){case"keyup":return pie.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VN(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var y1=!1;function gie(p,b){switch(p){case"compositionend":return VN(b);case"keypress":return b.which!==32?null:(zN=!0,$N);case"textInput":return p=b.data,p===$N&&zN?null:p;default:return null}}function bie(p,b){if(y1)return p==="compositionend"||!Fx&&HN(p,b)?(p=DN(),g8=Px=qf=null,y1=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return FN&&b.locale!=="ko"?null:b.data;default:return null}}var Uie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WN(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b==="input"?!!Uie[p.type]:b==="textarea"}function GN(p,b,v,k){nt(k),b=S8(b,"onChange"),0<b.length&&(v=new Dx("onChange","change",null,v,k),p.push({event:v,listeners:b}))}var Z6=null,q6=null;function yie(p){fR(p,0)}function x8(p){var b=S1(p);if(Se(b))return p}function xie(p,b){if(p==="change")return b}var XN=!1;if(a){var $x;if(a){var zx="oninput"in document;if(!zx){var KN=document.createElement("div");KN.setAttribute("oninput","return;"),zx=typeof KN.oninput=="function"}$x=zx}else $x=!1;XN=$x&&(!document.documentMode||9<document.documentMode)}function YN(){Z6&&(Z6.detachEvent("onpropertychange",ZN),q6=Z6=null)}function ZN(p){if(p.propertyName==="value"&&x8(q6)){var b=[];GN(b,q6,p,fa(p)),Dn(yie,b)}}function vie(p,b,v){p==="focusin"?(YN(),Z6=b,q6=v,Z6.attachEvent("onpropertychange",ZN)):p==="focusout"&&YN()}function wie(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return x8(q6)}function Eie(p,b){if(p==="click")return x8(b)}function Sie(p,b){if(p==="input"||p==="change")return x8(b)}function kie(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var ga=typeof Object.is=="function"?Object.is:kie;function Q6(p,b){if(ga(p,b))return!0;if(typeof p!="object"||p===null||typeof b!="object"||b===null)return!1;var v=Object.keys(p),k=Object.keys(b);if(v.length!==k.length)return!1;for(k=0;k<v.length;k++){var N=v[k];if(!l.call(b,N)||!ga(p[N],b[N]))return!1}return!0}function qN(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function QN(p,b){var v=qN(p);p=0;for(var k;v;){if(v.nodeType===3){if(k=p+v.textContent.length,p<=b&&k>=b)return{node:v,offset:b-p};p=k}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=qN(v)}}function JN(p,b){return p&&b?p===b?!0:p&&p.nodeType===3?!1:b&&b.nodeType===3?JN(p,b.parentNode):"contains"in p?p.contains(b):p.compareDocumentPosition?!!(p.compareDocumentPosition(b)&16):!1:!1}function eR(){for(var p=window,b=De();b instanceof p.HTMLIFrameElement;){try{var v=typeof b.contentWindow.location.href=="string"}catch{v=!1}if(v)p=b.contentWindow;else break;b=De(p.document)}return b}function Hx(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b&&(b==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||b==="textarea"||p.contentEditable==="true")}function Cie(p){var b=eR(),v=p.focusedElem,k=p.selectionRange;if(b!==v&&v&&v.ownerDocument&&JN(v.ownerDocument.documentElement,v)){if(k!==null&&Hx(v)){if(b=k.start,p=k.end,p===void 0&&(p=b),"selectionStart"in v)v.selectionStart=b,v.selectionEnd=Math.min(p,v.value.length);else if(p=(b=v.ownerDocument||document)&&b.defaultView||window,p.getSelection){p=p.getSelection();var N=v.textContent.length,L=Math.min(k.start,N);k=k.end===void 0?L:Math.min(k.end,N),!p.extend&&L>k&&(N=k,k=L,L=N),N=QN(v,L);var X=QN(v,k);N&&X&&(p.rangeCount!==1||p.anchorNode!==N.node||p.anchorOffset!==N.offset||p.focusNode!==X.node||p.focusOffset!==X.offset)&&(b=b.createRange(),b.setStart(N.node,N.offset),p.removeAllRanges(),L>k?(p.addRange(b),p.extend(X.node,X.offset)):(b.setEnd(X.node,X.offset),p.addRange(b)))}}for(b=[],p=v;p=p.parentNode;)p.nodeType===1&&b.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<b.length;v++)p=b[v],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Aie=a&&"documentMode"in document&&11>=document.documentMode,x1=null,Vx=null,J6=null,Wx=!1;function tR(p,b,v){var k=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Wx||x1==null||x1!==De(k)||(k=x1,"selectionStart"in k&&Hx(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),J6&&Q6(J6,k)||(J6=k,k=S8(Vx,"onSelect"),0<k.length&&(b=new Dx("onSelect","select",null,b,v),p.push({event:b,listeners:k}),b.target=x1)))}function v8(p,b){var v={};return v[p.toLowerCase()]=b.toLowerCase(),v["Webkit"+p]="webkit"+b,v["Moz"+p]="moz"+b,v}var v1={animationend:v8("Animation","AnimationEnd"),animationiteration:v8("Animation","AnimationIteration"),animationstart:v8("Animation","AnimationStart"),transitionend:v8("Transition","TransitionEnd")},Gx={},nR={};a&&(nR=document.createElement("div").style,"AnimationEvent"in window||(delete v1.animationend.animation,delete v1.animationiteration.animation,delete v1.animationstart.animation),"TransitionEvent"in window||delete v1.transitionend.transition);function w8(p){if(Gx[p])return Gx[p];if(!v1[p])return p;var b=v1[p],v;for(v in b)if(b.hasOwnProperty(v)&&v in nR)return Gx[p]=b[v];return p}var rR=w8("animationend"),iR=w8("animationiteration"),sR=w8("animationstart"),oR=w8("transitionend"),aR=new Map,lR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qf(p,b){aR.set(p,b),s(b,[p])}for(var Xx=0;Xx<lR.length;Xx++){var Kx=lR[Xx],Mie=Kx.toLowerCase(),Tie=Kx[0].toUpperCase()+Kx.slice(1);Qf(Mie,"on"+Tie)}Qf(rR,"onAnimationEnd"),Qf(iR,"onAnimationIteration"),Qf(sR,"onAnimationStart"),Qf("dblclick","onDoubleClick"),Qf("focusin","onFocus"),Qf("focusout","onBlur"),Qf(oR,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iie=new Set("cancel close invalid load scroll toggle".split(" ").concat(eg));function cR(p,b,v){var k=p.type||"unknown-event";p.currentTarget=v,hi(k,b,void 0,p),p.currentTarget=null}function fR(p,b){b=(b&4)!==0;for(var v=0;v<p.length;v++){var k=p[v],N=k.event;k=k.listeners;e:{var L=void 0;if(b)for(var X=k.length-1;0<=X;X--){var ee=k[X],ne=ee.instance,ge=ee.currentTarget;if(ee=ee.listener,ne!==L&&N.isPropagationStopped())break e;cR(N,ee,ge),L=ne}else for(X=0;X<k.length;X++){if(ee=k[X],ne=ee.instance,ge=ee.currentTarget,ee=ee.listener,ne!==L&&N.isPropagationStopped())break e;cR(N,ee,ge),L=ne}}}if(Ys)throw p=ma,Ys=!1,ma=null,p}function In(p,b){var v=b[nv];v===void 0&&(v=b[nv]=new Set);var k=p+"__bubble";v.has(k)||(dR(b,p,2,!1),v.add(k))}function Yx(p,b,v){var k=0;b&&(k|=4),dR(v,p,k,b)}var E8="_reactListening"+Math.random().toString(36).slice(2);function tg(p){if(!p[E8]){p[E8]=!0,r.forEach(function(v){v!=="selectionchange"&&(Iie.has(v)||Yx(v,!1,p),Yx(v,!0,p))});var b=p.nodeType===9?p:p.ownerDocument;b===null||b[E8]||(b[E8]=!0,Yx("selectionchange",!1,b))}}function dR(p,b,v,k){switch(PN(b)){case 1:var N=Vre;break;case 4:N=Wre;break;default:N=Rx}v=N.bind(null,b,v,p),N=void 0,!Ti||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(N=!0),k?N!==void 0?p.addEventListener(b,v,{capture:!0,passive:N}):p.addEventListener(b,v,!0):N!==void 0?p.addEventListener(b,v,{passive:N}):p.addEventListener(b,v,!1)}function Zx(p,b,v,k,N){var L=k;if(!(b&1)&&!(b&2)&&k!==null)e:for(;;){if(k===null)return;var X=k.tag;if(X===3||X===4){var ee=k.stateNode.containerInfo;if(ee===N||ee.nodeType===8&&ee.parentNode===N)break;if(X===4)for(X=k.return;X!==null;){var ne=X.tag;if((ne===3||ne===4)&&(ne=X.stateNode.containerInfo,ne===N||ne.nodeType===8&&ne.parentNode===N))return;X=X.return}for(;ee!==null;){if(X=X0(ee),X===null)return;if(ne=X.tag,ne===5||ne===6){k=L=X;continue e}ee=ee.parentNode}}k=k.return}Dn(function(){var ge=L,Ae=fa(v),Ne=[];e:{var Ce=aR.get(p);if(Ce!==void 0){var He=Dx,qe=p;switch(p){case"keypress":if(b8(v)===0)break e;case"keydown":case"keyup":He=oie;break;case"focusin":qe="focus",He=jx;break;case"focusout":qe="blur",He=jx;break;case"beforeblur":case"afterblur":He=jx;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=ON;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=Kre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=cie;break;case rR:case iR:case sR:He=qre;break;case oR:He=die;break;case"scroll":He=Gre;break;case"wheel":He=hie;break;case"copy":case"cut":case"paste":He=Jre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=BN}var Je=(b&4)!==0,br=!Je&&p==="scroll",ae=Je?Ce!==null?Ce+"Capture":null:Ce;Je=[];for(var re=ge,fe;re!==null;){fe=re;var Pe=fe.stateNode;if(fe.tag===5&&Pe!==null&&(fe=Pe,ae!==null&&(Pe=Mi(re,ae),Pe!=null&&Je.push(ng(re,Pe,fe)))),br)break;re=re.return}0<Je.length&&(Ce=new He(Ce,qe,null,v,Ae),Ne.push({event:Ce,listeners:Je}))}}if(!(b&7)){e:{if(Ce=p==="mouseover"||p==="pointerover",He=p==="mouseout"||p==="pointerout",Ce&&v!==ml&&(qe=v.relatedTarget||v.fromElement)&&(X0(qe)||qe[Ec]))break e;if((He||Ce)&&(Ce=Ae.window===Ae?Ae:(Ce=Ae.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,He?(qe=v.relatedTarget||v.toElement,He=ge,qe=qe?X0(qe):null,qe!==null&&(br=En(qe),qe!==br||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(He=null,qe=ge),He!==qe)){if(Je=ON,Pe="onMouseLeave",ae="onMouseEnter",re="mouse",(p==="pointerout"||p==="pointerover")&&(Je=BN,Pe="onPointerLeave",ae="onPointerEnter",re="pointer"),br=He==null?Ce:S1(He),fe=qe==null?Ce:S1(qe),Ce=new Je(Pe,re+"leave",He,v,Ae),Ce.target=br,Ce.relatedTarget=fe,Pe=null,X0(Ae)===ge&&(Je=new Je(ae,re+"enter",qe,v,Ae),Je.target=fe,Je.relatedTarget=br,Pe=Je),br=Pe,He&&qe)t:{for(Je=He,ae=qe,re=0,fe=Je;fe;fe=w1(fe))re++;for(fe=0,Pe=ae;Pe;Pe=w1(Pe))fe++;for(;0<re-fe;)Je=w1(Je),re--;for(;0<fe-re;)ae=w1(ae),fe--;for(;re--;){if(Je===ae||ae!==null&&Je===ae.alternate)break t;Je=w1(Je),ae=w1(ae)}Je=null}else Je=null;He!==null&&uR(Ne,Ce,He,Je,!1),qe!==null&&br!==null&&uR(Ne,br,qe,Je,!0)}}e:{if(Ce=ge?S1(ge):window,He=Ce.nodeName&&Ce.nodeName.toLowerCase(),He==="select"||He==="input"&&Ce.type==="file")var rt=xie;else if(WN(Ce))if(XN)rt=Sie;else{rt=wie;var ft=vie}else(He=Ce.nodeName)&&He.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(rt=Eie);if(rt&&(rt=rt(p,ge))){GN(Ne,rt,v,Ae);break e}ft&&ft(p,Ce,ge),p==="focusout"&&(ft=Ce._wrapperState)&&ft.controlled&&Ce.type==="number"&&fn(Ce,"number",Ce.value)}switch(ft=ge?S1(ge):window,p){case"focusin":(WN(ft)||ft.contentEditable==="true")&&(x1=ft,Vx=ge,J6=null);break;case"focusout":J6=Vx=x1=null;break;case"mousedown":Wx=!0;break;case"contextmenu":case"mouseup":case"dragend":Wx=!1,tR(Ne,v,Ae);break;case"selectionchange":if(Aie)break;case"keydown":case"keyup":tR(Ne,v,Ae)}var dt;if(Fx)e:{switch(p){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else y1?HN(p,v)&&(Ut="onCompositionEnd"):p==="keydown"&&v.keyCode===229&&(Ut="onCompositionStart");Ut&&(FN&&v.locale!=="ko"&&(y1||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&y1&&(dt=DN()):(qf=Ae,Px="value"in qf?qf.value:qf.textContent,y1=!0)),ft=S8(ge,Ut),0<ft.length&&(Ut=new jN(Ut,p,null,v,Ae),Ne.push({event:Ut,listeners:ft}),dt?Ut.data=dt:(dt=VN(v),dt!==null&&(Ut.data=dt)))),(dt=mie?gie(p,v):bie(p,v))&&(ge=S8(ge,"onBeforeInput"),0<ge.length&&(Ae=new jN("onBeforeInput","beforeinput",null,v,Ae),Ne.push({event:Ae,listeners:ge}),Ae.data=dt))}fR(Ne,b)})}function ng(p,b,v){return{instance:p,listener:b,currentTarget:v}}function S8(p,b){for(var v=b+"Capture",k=[];p!==null;){var N=p,L=N.stateNode;N.tag===5&&L!==null&&(N=L,L=Mi(p,v),L!=null&&k.unshift(ng(p,L,N)),L=Mi(p,b),L!=null&&k.push(ng(p,L,N))),p=p.return}return k}function w1(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function uR(p,b,v,k,N){for(var L=b._reactName,X=[];v!==null&&v!==k;){var ee=v,ne=ee.alternate,ge=ee.stateNode;if(ne!==null&&ne===k)break;ee.tag===5&&ge!==null&&(ee=ge,N?(ne=Mi(v,L),ne!=null&&X.unshift(ng(v,ne,ee))):N||(ne=Mi(v,L),ne!=null&&X.push(ng(v,ne,ee)))),v=v.return}X.length!==0&&p.push({event:b,listeners:X})}var Nie=/\r\n?/g,Rie=/\u0000|\uFFFD/g;function hR(p){return(typeof p=="string"?p:""+p).replace(Nie,`
`).replace(Rie,"")}function k8(p,b,v){if(b=hR(b),hR(p)!==b&&v)throw Error(n(425))}function C8(){}var qx=null,Qx=null;function Jx(p,b){return p==="textarea"||p==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var ev=typeof setTimeout=="function"?setTimeout:void 0,_ie=typeof clearTimeout=="function"?clearTimeout:void 0,pR=typeof Promise=="function"?Promise:void 0,Pie=typeof queueMicrotask=="function"?queueMicrotask:typeof pR<"u"?function(p){return pR.resolve(null).then(p).catch(Die)}:ev;function Die(p){setTimeout(function(){throw p})}function tv(p,b){var v=b,k=0;do{var N=v.nextSibling;if(p.removeChild(v),N&&N.nodeType===8)if(v=N.data,v==="/$"){if(k===0){p.removeChild(N),G6(b);return}k--}else v!=="$"&&v!=="$?"&&v!=="$!"||k++;v=N}while(v);G6(b)}function Jf(p){for(;p!=null;p=p.nextSibling){var b=p.nodeType;if(b===1||b===3)break;if(b===8){if(b=p.data,b==="$"||b==="$!"||b==="$?")break;if(b==="/$")return null}}return p}function mR(p){p=p.previousSibling;for(var b=0;p;){if(p.nodeType===8){var v=p.data;if(v==="$"||v==="$!"||v==="$?"){if(b===0)return p;b--}else v==="/$"&&b++}p=p.previousSibling}return null}var E1=Math.random().toString(36).slice(2),bl="__reactFiber$"+E1,rg="__reactProps$"+E1,Ec="__reactContainer$"+E1,nv="__reactEvents$"+E1,Lie="__reactListeners$"+E1,Oie="__reactHandles$"+E1;function X0(p){var b=p[bl];if(b)return b;for(var v=p.parentNode;v;){if(b=v[Ec]||v[bl]){if(v=b.alternate,b.child!==null||v!==null&&v.child!==null)for(p=mR(p);p!==null;){if(v=p[bl])return v;p=mR(p)}return b}p=v,v=p.parentNode}return null}function ig(p){return p=p[bl]||p[Ec],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function S1(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function A8(p){return p[rg]||null}var rv=[],k1=-1;function ed(p){return{current:p}}function Nn(p){0>k1||(p.current=rv[k1],rv[k1]=null,k1--)}function Sn(p,b){k1++,rv[k1]=p.current,p.current=b}var td={},Ii=ed(td),xs=ed(!1),K0=td;function C1(p,b){var v=p.type.contextTypes;if(!v)return td;var k=p.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===b)return k.__reactInternalMemoizedMaskedChildContext;var N={},L;for(L in v)N[L]=b[L];return k&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=b,p.__reactInternalMemoizedMaskedChildContext=N),N}function vs(p){return p=p.childContextTypes,p!=null}function M8(){Nn(xs),Nn(Ii)}function gR(p,b,v){if(Ii.current!==td)throw Error(n(168));Sn(Ii,b),Sn(xs,v)}function bR(p,b,v){var k=p.stateNode;if(b=b.childContextTypes,typeof k.getChildContext!="function")return v;k=k.getChildContext();for(var N in k)if(!(N in b))throw Error(n(108,ue(p)||"Unknown",N));return Y({},v,k)}function T8(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||td,K0=Ii.current,Sn(Ii,p),Sn(xs,xs.current),!0}function UR(p,b,v){var k=p.stateNode;if(!k)throw Error(n(169));v?(p=bR(p,b,K0),k.__reactInternalMemoizedMergedChildContext=p,Nn(xs),Nn(Ii),Sn(Ii,p)):Nn(xs),Sn(xs,v)}var Sc=null,I8=!1,iv=!1;function yR(p){Sc===null?Sc=[p]:Sc.push(p)}function jie(p){I8=!0,yR(p)}function nd(){if(!iv&&Sc!==null){iv=!0;var p=0,b=dn;try{var v=Sc;for(dn=1;p<v.length;p++){var k=v[p];do k=k(!0);while(k!==null)}Sc=null,I8=!1}catch(N){throw Sc!==null&&(Sc=Sc.slice(p+1)),s8(B6,nd),N}finally{dn=b,iv=!1}}return null}var A1=[],M1=0,N8=null,R8=0,Eo=[],So=0,Y0=null,kc=1,Cc="";function Z0(p,b){A1[M1++]=R8,A1[M1++]=N8,N8=p,R8=b}function xR(p,b,v){Eo[So++]=kc,Eo[So++]=Cc,Eo[So++]=Y0,Y0=p;var k=kc;p=Cc;var N=32-Zs(k)-1;k&=~(1<<N),v+=1;var L=32-Zs(b)+N;if(30<L){var X=N-N%5;L=(k&(1<<X)-1).toString(32),k>>=X,N-=X,kc=1<<32-Zs(b)+N|v<<N|k,Cc=L+p}else kc=1<<L|v<<N|k,Cc=p}function sv(p){p.return!==null&&(Z0(p,1),xR(p,1,0))}function ov(p){for(;p===N8;)N8=A1[--M1],A1[M1]=null,R8=A1[--M1],A1[M1]=null;for(;p===Y0;)Y0=Eo[--So],Eo[So]=null,Cc=Eo[--So],Eo[So]=null,kc=Eo[--So],Eo[So]=null}var Qs=null,Js=null,On=!1,ba=null;function vR(p,b){var v=Mo(5,null,null,0);v.elementType="DELETED",v.stateNode=b,v.return=p,b=p.deletions,b===null?(p.deletions=[v],p.flags|=16):b.push(v)}function wR(p,b){switch(p.tag){case 5:var v=p.type;return b=b.nodeType!==1||v.toLowerCase()!==b.nodeName.toLowerCase()?null:b,b!==null?(p.stateNode=b,Qs=p,Js=Jf(b.firstChild),!0):!1;case 6:return b=p.pendingProps===""||b.nodeType!==3?null:b,b!==null?(p.stateNode=b,Qs=p,Js=null,!0):!1;case 13:return b=b.nodeType!==8?null:b,b!==null?(v=Y0!==null?{id:kc,overflow:Cc}:null,p.memoizedState={dehydrated:b,treeContext:v,retryLane:1073741824},v=Mo(18,null,null,0),v.stateNode=b,v.return=p,p.child=v,Qs=p,Js=null,!0):!1;default:return!1}}function av(p){return(p.mode&1)!==0&&(p.flags&128)===0}function lv(p){if(On){var b=Js;if(b){var v=b;if(!wR(p,b)){if(av(p))throw Error(n(418));b=Jf(v.nextSibling);var k=Qs;b&&wR(p,b)?vR(k,v):(p.flags=p.flags&-4097|2,On=!1,Qs=p)}}else{if(av(p))throw Error(n(418));p.flags=p.flags&-4097|2,On=!1,Qs=p}}}function ER(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;Qs=p}function _8(p){if(p!==Qs)return!1;if(!On)return ER(p),On=!0,!1;var b;if((b=p.tag!==3)&&!(b=p.tag!==5)&&(b=p.type,b=b!=="head"&&b!=="body"&&!Jx(p.type,p.memoizedProps)),b&&(b=Js)){if(av(p))throw SR(),Error(n(418));for(;b;)vR(p,b),b=Jf(b.nextSibling)}if(ER(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,b=0;p;){if(p.nodeType===8){var v=p.data;if(v==="/$"){if(b===0){Js=Jf(p.nextSibling);break e}b--}else v!=="$"&&v!=="$!"&&v!=="$?"||b++}p=p.nextSibling}Js=null}}else Js=Qs?Jf(p.stateNode.nextSibling):null;return!0}function SR(){for(var p=Js;p;)p=Jf(p.nextSibling)}function T1(){Js=Qs=null,On=!1}function cv(p){ba===null?ba=[p]:ba.push(p)}var Bie=S.ReactCurrentBatchConfig;function sg(p,b,v){if(p=v.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(n(309));var k=v.stateNode}if(!k)throw Error(n(147,p));var N=k,L=""+p;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===L?b.ref:(b=function(X){var ee=N.refs;X===null?delete ee[L]:ee[L]=X},b._stringRef=L,b)}if(typeof p!="string")throw Error(n(284));if(!v._owner)throw Error(n(290,p))}return p}function P8(p,b){throw p=Object.prototype.toString.call(b),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":p))}function kR(p){var b=p._init;return b(p._payload)}function CR(p){function b(ae,re){if(p){var fe=ae.deletions;fe===null?(ae.deletions=[re],ae.flags|=16):fe.push(re)}}function v(ae,re){if(!p)return null;for(;re!==null;)b(ae,re),re=re.sibling;return null}function k(ae,re){for(ae=new Map;re!==null;)re.key!==null?ae.set(re.key,re):ae.set(re.index,re),re=re.sibling;return ae}function N(ae,re){return ae=fd(ae,re),ae.index=0,ae.sibling=null,ae}function L(ae,re,fe){return ae.index=fe,p?(fe=ae.alternate,fe!==null?(fe=fe.index,fe<re?(ae.flags|=2,re):fe):(ae.flags|=2,re)):(ae.flags|=1048576,re)}function X(ae){return p&&ae.alternate===null&&(ae.flags|=2),ae}function ee(ae,re,fe,Pe){return re===null||re.tag!==6?(re=ew(fe,ae.mode,Pe),re.return=ae,re):(re=N(re,fe),re.return=ae,re)}function ne(ae,re,fe,Pe){var rt=fe.type;return rt===C?Ae(ae,re,fe.props.children,Pe,fe.key):re!==null&&(re.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===z&&kR(rt)===re.type)?(Pe=N(re,fe.props),Pe.ref=sg(ae,re,fe),Pe.return=ae,Pe):(Pe=iU(fe.type,fe.key,fe.props,null,ae.mode,Pe),Pe.ref=sg(ae,re,fe),Pe.return=ae,Pe)}function ge(ae,re,fe,Pe){return re===null||re.tag!==4||re.stateNode.containerInfo!==fe.containerInfo||re.stateNode.implementation!==fe.implementation?(re=tw(fe,ae.mode,Pe),re.return=ae,re):(re=N(re,fe.children||[]),re.return=ae,re)}function Ae(ae,re,fe,Pe,rt){return re===null||re.tag!==7?(re=iu(fe,ae.mode,Pe,rt),re.return=ae,re):(re=N(re,fe),re.return=ae,re)}function Ne(ae,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=ew(""+re,ae.mode,fe),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case A:return fe=iU(re.type,re.key,re.props,null,ae.mode,fe),fe.ref=sg(ae,null,re),fe.return=ae,fe;case M:return re=tw(re,ae.mode,fe),re.return=ae,re;case z:var Pe=re._init;return Ne(ae,Pe(re._payload),fe)}if(ui(re)||V(re))return re=iu(re,ae.mode,fe,null),re.return=ae,re;P8(ae,re)}return null}function Ce(ae,re,fe,Pe){var rt=re!==null?re.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return rt!==null?null:ee(ae,re,""+fe,Pe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:return fe.key===rt?ne(ae,re,fe,Pe):null;case M:return fe.key===rt?ge(ae,re,fe,Pe):null;case z:return rt=fe._init,Ce(ae,re,rt(fe._payload),Pe)}if(ui(fe)||V(fe))return rt!==null?null:Ae(ae,re,fe,Pe,null);P8(ae,fe)}return null}function He(ae,re,fe,Pe,rt){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return ae=ae.get(fe)||null,ee(re,ae,""+Pe,rt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case A:return ae=ae.get(Pe.key===null?fe:Pe.key)||null,ne(re,ae,Pe,rt);case M:return ae=ae.get(Pe.key===null?fe:Pe.key)||null,ge(re,ae,Pe,rt);case z:var ft=Pe._init;return He(ae,re,fe,ft(Pe._payload),rt)}if(ui(Pe)||V(Pe))return ae=ae.get(fe)||null,Ae(re,ae,Pe,rt,null);P8(re,Pe)}return null}function qe(ae,re,fe,Pe){for(var rt=null,ft=null,dt=re,Ut=re=0,Zr=null;dt!==null&&Ut<fe.length;Ut++){dt.index>Ut?(Zr=dt,dt=null):Zr=dt.sibling;var Qt=Ce(ae,dt,fe[Ut],Pe);if(Qt===null){dt===null&&(dt=Zr);break}p&&dt&&Qt.alternate===null&&b(ae,dt),re=L(Qt,re,Ut),ft===null?rt=Qt:ft.sibling=Qt,ft=Qt,dt=Zr}if(Ut===fe.length)return v(ae,dt),On&&Z0(ae,Ut),rt;if(dt===null){for(;Ut<fe.length;Ut++)dt=Ne(ae,fe[Ut],Pe),dt!==null&&(re=L(dt,re,Ut),ft===null?rt=dt:ft.sibling=dt,ft=dt);return On&&Z0(ae,Ut),rt}for(dt=k(ae,dt);Ut<fe.length;Ut++)Zr=He(dt,ae,Ut,fe[Ut],Pe),Zr!==null&&(p&&Zr.alternate!==null&&dt.delete(Zr.key===null?Ut:Zr.key),re=L(Zr,re,Ut),ft===null?rt=Zr:ft.sibling=Zr,ft=Zr);return p&&dt.forEach(function(dd){return b(ae,dd)}),On&&Z0(ae,Ut),rt}function Je(ae,re,fe,Pe){var rt=V(fe);if(typeof rt!="function")throw Error(n(150));if(fe=rt.call(fe),fe==null)throw Error(n(151));for(var ft=rt=null,dt=re,Ut=re=0,Zr=null,Qt=fe.next();dt!==null&&!Qt.done;Ut++,Qt=fe.next()){dt.index>Ut?(Zr=dt,dt=null):Zr=dt.sibling;var dd=Ce(ae,dt,Qt.value,Pe);if(dd===null){dt===null&&(dt=Zr);break}p&&dt&&dd.alternate===null&&b(ae,dt),re=L(dd,re,Ut),ft===null?rt=dd:ft.sibling=dd,ft=dd,dt=Zr}if(Qt.done)return v(ae,dt),On&&Z0(ae,Ut),rt;if(dt===null){for(;!Qt.done;Ut++,Qt=fe.next())Qt=Ne(ae,Qt.value,Pe),Qt!==null&&(re=L(Qt,re,Ut),ft===null?rt=Qt:ft.sibling=Qt,ft=Qt);return On&&Z0(ae,Ut),rt}for(dt=k(ae,dt);!Qt.done;Ut++,Qt=fe.next())Qt=He(dt,ae,Ut,Qt.value,Pe),Qt!==null&&(p&&Qt.alternate!==null&&dt.delete(Qt.key===null?Ut:Qt.key),re=L(Qt,re,Ut),ft===null?rt=Qt:ft.sibling=Qt,ft=Qt);return p&&dt.forEach(function(bse){return b(ae,bse)}),On&&Z0(ae,Ut),rt}function br(ae,re,fe,Pe){if(typeof fe=="object"&&fe!==null&&fe.type===C&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:e:{for(var rt=fe.key,ft=re;ft!==null;){if(ft.key===rt){if(rt=fe.type,rt===C){if(ft.tag===7){v(ae,ft.sibling),re=N(ft,fe.props.children),re.return=ae,ae=re;break e}}else if(ft.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===z&&kR(rt)===ft.type){v(ae,ft.sibling),re=N(ft,fe.props),re.ref=sg(ae,ft,fe),re.return=ae,ae=re;break e}v(ae,ft);break}else b(ae,ft);ft=ft.sibling}fe.type===C?(re=iu(fe.props.children,ae.mode,Pe,fe.key),re.return=ae,ae=re):(Pe=iU(fe.type,fe.key,fe.props,null,ae.mode,Pe),Pe.ref=sg(ae,re,fe),Pe.return=ae,ae=Pe)}return X(ae);case M:e:{for(ft=fe.key;re!==null;){if(re.key===ft)if(re.tag===4&&re.stateNode.containerInfo===fe.containerInfo&&re.stateNode.implementation===fe.implementation){v(ae,re.sibling),re=N(re,fe.children||[]),re.return=ae,ae=re;break e}else{v(ae,re);break}else b(ae,re);re=re.sibling}re=tw(fe,ae.mode,Pe),re.return=ae,ae=re}return X(ae);case z:return ft=fe._init,br(ae,re,ft(fe._payload),Pe)}if(ui(fe))return qe(ae,re,fe,Pe);if(V(fe))return Je(ae,re,fe,Pe);P8(ae,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,re!==null&&re.tag===6?(v(ae,re.sibling),re=N(re,fe),re.return=ae,ae=re):(v(ae,re),re=ew(fe,ae.mode,Pe),re.return=ae,ae=re),X(ae)):v(ae,re)}return br}var I1=CR(!0),AR=CR(!1),D8=ed(null),L8=null,N1=null,fv=null;function dv(){fv=N1=L8=null}function uv(p){var b=D8.current;Nn(D8),p._currentValue=b}function hv(p,b,v){for(;p!==null;){var k=p.alternate;if((p.childLanes&b)!==b?(p.childLanes|=b,k!==null&&(k.childLanes|=b)):k!==null&&(k.childLanes&b)!==b&&(k.childLanes|=b),p===v)break;p=p.return}}function R1(p,b){L8=p,fv=N1=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&b&&(ws=!0),p.firstContext=null)}function ko(p){var b=p._currentValue;if(fv!==p)if(p={context:p,memoizedValue:b,next:null},N1===null){if(L8===null)throw Error(n(308));N1=p,L8.dependencies={lanes:0,firstContext:p}}else N1=N1.next=p;return b}var q0=null;function pv(p){q0===null?q0=[p]:q0.push(p)}function MR(p,b,v,k){var N=b.interleaved;return N===null?(v.next=v,pv(b)):(v.next=N.next,N.next=v),b.interleaved=v,Ac(p,k)}function Ac(p,b){p.lanes|=b;var v=p.alternate;for(v!==null&&(v.lanes|=b),v=p,p=p.return;p!==null;)p.childLanes|=b,v=p.alternate,v!==null&&(v.childLanes|=b),v=p,p=p.return;return v.tag===3?v.stateNode:null}var rd=!1;function mv(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TR(p,b){p=p.updateQueue,b.updateQueue===p&&(b.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Mc(p,b){return{eventTime:p,lane:b,tag:0,payload:null,callback:null,next:null}}function id(p,b,v){var k=p.updateQueue;if(k===null)return null;if(k=k.shared,Xt&2){var N=k.pending;return N===null?b.next=b:(b.next=N.next,N.next=b),k.pending=b,Ac(p,v)}return N=k.interleaved,N===null?(b.next=b,pv(k)):(b.next=N.next,N.next=b),k.interleaved=b,Ac(p,v)}function O8(p,b,v){if(b=b.updateQueue,b!==null&&(b=b.shared,(v&4194240)!==0)){var k=b.lanes;k&=p.pendingLanes,v|=k,b.lanes=v,Tx(p,v)}}function IR(p,b){var v=p.updateQueue,k=p.alternate;if(k!==null&&(k=k.updateQueue,v===k)){var N=null,L=null;if(v=v.firstBaseUpdate,v!==null){do{var X={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};L===null?N=L=X:L=L.next=X,v=v.next}while(v!==null);L===null?N=L=b:L=L.next=b}else N=L=b;v={baseState:k.baseState,firstBaseUpdate:N,lastBaseUpdate:L,shared:k.shared,effects:k.effects},p.updateQueue=v;return}p=v.lastBaseUpdate,p===null?v.firstBaseUpdate=b:p.next=b,v.lastBaseUpdate=b}function j8(p,b,v,k){var N=p.updateQueue;rd=!1;var L=N.firstBaseUpdate,X=N.lastBaseUpdate,ee=N.shared.pending;if(ee!==null){N.shared.pending=null;var ne=ee,ge=ne.next;ne.next=null,X===null?L=ge:X.next=ge,X=ne;var Ae=p.alternate;Ae!==null&&(Ae=Ae.updateQueue,ee=Ae.lastBaseUpdate,ee!==X&&(ee===null?Ae.firstBaseUpdate=ge:ee.next=ge,Ae.lastBaseUpdate=ne))}if(L!==null){var Ne=N.baseState;X=0,Ae=ge=ne=null,ee=L;do{var Ce=ee.lane,He=ee.eventTime;if((k&Ce)===Ce){Ae!==null&&(Ae=Ae.next={eventTime:He,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var qe=p,Je=ee;switch(Ce=b,He=v,Je.tag){case 1:if(qe=Je.payload,typeof qe=="function"){Ne=qe.call(He,Ne,Ce);break e}Ne=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Je.payload,Ce=typeof qe=="function"?qe.call(He,Ne,Ce):qe,Ce==null)break e;Ne=Y({},Ne,Ce);break e;case 2:rd=!0}}ee.callback!==null&&ee.lane!==0&&(p.flags|=64,Ce=N.effects,Ce===null?N.effects=[ee]:Ce.push(ee))}else He={eventTime:He,lane:Ce,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Ae===null?(ge=Ae=He,ne=Ne):Ae=Ae.next=He,X|=Ce;if(ee=ee.next,ee===null){if(ee=N.shared.pending,ee===null)break;Ce=ee,ee=Ce.next,Ce.next=null,N.lastBaseUpdate=Ce,N.shared.pending=null}}while(!0);if(Ae===null&&(ne=Ne),N.baseState=ne,N.firstBaseUpdate=ge,N.lastBaseUpdate=Ae,b=N.shared.interleaved,b!==null){N=b;do X|=N.lane,N=N.next;while(N!==b)}else L===null&&(N.shared.lanes=0);eu|=X,p.lanes=X,p.memoizedState=Ne}}function NR(p,b,v){if(p=b.effects,b.effects=null,p!==null)for(b=0;b<p.length;b++){var k=p[b],N=k.callback;if(N!==null){if(k.callback=null,k=v,typeof N!="function")throw Error(n(191,N));N.call(k)}}}var og={},Ul=ed(og),ag=ed(og),lg=ed(og);function Q0(p){if(p===og)throw Error(n(174));return p}function gv(p,b){switch(Sn(lg,b),Sn(ag,p),Sn(Ul,og),p=b.nodeType,p){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:or(null,"");break;default:p=p===8?b.parentNode:b,b=p.namespaceURI||null,p=p.tagName,b=or(b,p)}Nn(Ul),Sn(Ul,b)}function _1(){Nn(Ul),Nn(ag),Nn(lg)}function RR(p){Q0(lg.current);var b=Q0(Ul.current),v=or(b,p.type);b!==v&&(Sn(ag,p),Sn(Ul,v))}function bv(p){ag.current===p&&(Nn(Ul),Nn(ag))}var Yn=ed(0);function B8(p){for(var b=p;b!==null;){if(b.tag===13){var v=b.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if(b.flags&128)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var Uv=[];function yv(){for(var p=0;p<Uv.length;p++)Uv[p]._workInProgressVersionPrimary=null;Uv.length=0}var F8=S.ReactCurrentDispatcher,xv=S.ReactCurrentBatchConfig,J0=0,Zn=null,jr=null,Kr=null,$8=!1,cg=!1,fg=0,Fie=0;function Ni(){throw Error(n(321))}function vv(p,b){if(b===null)return!1;for(var v=0;v<b.length&&v<p.length;v++)if(!ga(p[v],b[v]))return!1;return!0}function wv(p,b,v,k,N,L){if(J0=L,Zn=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,F8.current=p===null||p.memoizedState===null?Vie:Wie,p=v(k,N),cg){L=0;do{if(cg=!1,fg=0,25<=L)throw Error(n(301));L+=1,Kr=jr=null,b.updateQueue=null,F8.current=Gie,p=v(k,N)}while(cg)}if(F8.current=V8,b=jr!==null&&jr.next!==null,J0=0,Kr=jr=Zn=null,$8=!1,b)throw Error(n(300));return p}function Ev(){var p=fg!==0;return fg=0,p}function yl(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?Zn.memoizedState=Kr=p:Kr=Kr.next=p,Kr}function Co(){if(jr===null){var p=Zn.alternate;p=p!==null?p.memoizedState:null}else p=jr.next;var b=Kr===null?Zn.memoizedState:Kr.next;if(b!==null)Kr=b,jr=p;else{if(p===null)throw Error(n(310));jr=p,p={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Kr===null?Zn.memoizedState=Kr=p:Kr=Kr.next=p}return Kr}function dg(p,b){return typeof b=="function"?b(p):b}function Sv(p){var b=Co(),v=b.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var k=jr,N=k.baseQueue,L=v.pending;if(L!==null){if(N!==null){var X=N.next;N.next=L.next,L.next=X}k.baseQueue=N=L,v.pending=null}if(N!==null){L=N.next,k=k.baseState;var ee=X=null,ne=null,ge=L;do{var Ae=ge.lane;if((J0&Ae)===Ae)ne!==null&&(ne=ne.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),k=ge.hasEagerState?ge.eagerState:p(k,ge.action);else{var Ne={lane:Ae,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};ne===null?(ee=ne=Ne,X=k):ne=ne.next=Ne,Zn.lanes|=Ae,eu|=Ae}ge=ge.next}while(ge!==null&&ge!==L);ne===null?X=k:ne.next=ee,ga(k,b.memoizedState)||(ws=!0),b.memoizedState=k,b.baseState=X,b.baseQueue=ne,v.lastRenderedState=k}if(p=v.interleaved,p!==null){N=p;do L=N.lane,Zn.lanes|=L,eu|=L,N=N.next;while(N!==p)}else N===null&&(v.lanes=0);return[b.memoizedState,v.dispatch]}function kv(p){var b=Co(),v=b.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var k=v.dispatch,N=v.pending,L=b.memoizedState;if(N!==null){v.pending=null;var X=N=N.next;do L=p(L,X.action),X=X.next;while(X!==N);ga(L,b.memoizedState)||(ws=!0),b.memoizedState=L,b.baseQueue===null&&(b.baseState=L),v.lastRenderedState=L}return[L,k]}function _R(){}function PR(p,b){var v=Zn,k=Co(),N=b(),L=!ga(k.memoizedState,N);if(L&&(k.memoizedState=N,ws=!0),k=k.queue,Cv(OR.bind(null,v,k,p),[p]),k.getSnapshot!==b||L||Kr!==null&&Kr.memoizedState.tag&1){if(v.flags|=2048,ug(9,LR.bind(null,v,k,N,b),void 0,null),Yr===null)throw Error(n(349));J0&30||DR(v,b,N)}return N}function DR(p,b,v){p.flags|=16384,p={getSnapshot:b,value:v},b=Zn.updateQueue,b===null?(b={lastEffect:null,stores:null},Zn.updateQueue=b,b.stores=[p]):(v=b.stores,v===null?b.stores=[p]:v.push(p))}function LR(p,b,v,k){b.value=v,b.getSnapshot=k,jR(b)&&BR(p)}function OR(p,b,v){return v(function(){jR(b)&&BR(p)})}function jR(p){var b=p.getSnapshot;p=p.value;try{var v=b();return!ga(p,v)}catch{return!0}}function BR(p){var b=Ac(p,1);b!==null&&va(b,p,1,-1)}function FR(p){var b=yl();return typeof p=="function"&&(p=p()),b.memoizedState=b.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dg,lastRenderedState:p},b.queue=p,p=p.dispatch=Hie.bind(null,Zn,p),[b.memoizedState,p]}function ug(p,b,v,k){return p={tag:p,create:b,destroy:v,deps:k,next:null},b=Zn.updateQueue,b===null?(b={lastEffect:null,stores:null},Zn.updateQueue=b,b.lastEffect=p.next=p):(v=b.lastEffect,v===null?b.lastEffect=p.next=p:(k=v.next,v.next=p,p.next=k,b.lastEffect=p)),p}function $R(){return Co().memoizedState}function z8(p,b,v,k){var N=yl();Zn.flags|=p,N.memoizedState=ug(1|b,v,void 0,k===void 0?null:k)}function H8(p,b,v,k){var N=Co();k=k===void 0?null:k;var L=void 0;if(jr!==null){var X=jr.memoizedState;if(L=X.destroy,k!==null&&vv(k,X.deps)){N.memoizedState=ug(b,v,L,k);return}}Zn.flags|=p,N.memoizedState=ug(1|b,v,L,k)}function zR(p,b){return z8(8390656,8,p,b)}function Cv(p,b){return H8(2048,8,p,b)}function HR(p,b){return H8(4,2,p,b)}function VR(p,b){return H8(4,4,p,b)}function WR(p,b){if(typeof b=="function")return p=p(),b(p),function(){b(null)};if(b!=null)return p=p(),b.current=p,function(){b.current=null}}function GR(p,b,v){return v=v!=null?v.concat([p]):null,H8(4,4,WR.bind(null,b,p),v)}function Av(){}function XR(p,b){var v=Co();b=b===void 0?null:b;var k=v.memoizedState;return k!==null&&b!==null&&vv(b,k[1])?k[0]:(v.memoizedState=[p,b],p)}function KR(p,b){var v=Co();b=b===void 0?null:b;var k=v.memoizedState;return k!==null&&b!==null&&vv(b,k[1])?k[0]:(p=p(),v.memoizedState=[p,b],p)}function YR(p,b,v){return J0&21?(ga(v,b)||(v=g1(),Zn.lanes|=v,eu|=v,p.baseState=!0),b):(p.baseState&&(p.baseState=!1,ws=!0),p.memoizedState=v)}function $ie(p,b){var v=dn;dn=v!==0&&4>v?v:4,p(!0);var k=xv.transition;xv.transition={};try{p(!1),b()}finally{dn=v,xv.transition=k}}function ZR(){return Co().memoizedState}function zie(p,b,v){var k=ld(p);if(v={lane:k,action:v,hasEagerState:!1,eagerState:null,next:null},qR(p))QR(b,v);else if(v=MR(p,b,v,k),v!==null){var N=Ji();va(v,p,k,N),JR(v,b,k)}}function Hie(p,b,v){var k=ld(p),N={lane:k,action:v,hasEagerState:!1,eagerState:null,next:null};if(qR(p))QR(b,N);else{var L=p.alternate;if(p.lanes===0&&(L===null||L.lanes===0)&&(L=b.lastRenderedReducer,L!==null))try{var X=b.lastRenderedState,ee=L(X,v);if(N.hasEagerState=!0,N.eagerState=ee,ga(ee,X)){var ne=b.interleaved;ne===null?(N.next=N,pv(b)):(N.next=ne.next,ne.next=N),b.interleaved=N;return}}catch{}finally{}v=MR(p,b,N,k),v!==null&&(N=Ji(),va(v,p,k,N),JR(v,b,k))}}function qR(p){var b=p.alternate;return p===Zn||b!==null&&b===Zn}function QR(p,b){cg=$8=!0;var v=p.pending;v===null?b.next=b:(b.next=v.next,v.next=b),p.pending=b}function JR(p,b,v){if(v&4194240){var k=b.lanes;k&=p.pendingLanes,v|=k,b.lanes=v,Tx(p,v)}}var V8={readContext:ko,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},Vie={readContext:ko,useCallback:function(p,b){return yl().memoizedState=[p,b===void 0?null:b],p},useContext:ko,useEffect:zR,useImperativeHandle:function(p,b,v){return v=v!=null?v.concat([p]):null,z8(4194308,4,WR.bind(null,b,p),v)},useLayoutEffect:function(p,b){return z8(4194308,4,p,b)},useInsertionEffect:function(p,b){return z8(4,2,p,b)},useMemo:function(p,b){var v=yl();return b=b===void 0?null:b,p=p(),v.memoizedState=[p,b],p},useReducer:function(p,b,v){var k=yl();return b=v!==void 0?v(b):b,k.memoizedState=k.baseState=b,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:b},k.queue=p,p=p.dispatch=zie.bind(null,Zn,p),[k.memoizedState,p]},useRef:function(p){var b=yl();return p={current:p},b.memoizedState=p},useState:FR,useDebugValue:Av,useDeferredValue:function(p){return yl().memoizedState=p},useTransition:function(){var p=FR(!1),b=p[0];return p=$ie.bind(null,p[1]),yl().memoizedState=p,[b,p]},useMutableSource:function(){},useSyncExternalStore:function(p,b,v){var k=Zn,N=yl();if(On){if(v===void 0)throw Error(n(407));v=v()}else{if(v=b(),Yr===null)throw Error(n(349));J0&30||DR(k,b,v)}N.memoizedState=v;var L={value:v,getSnapshot:b};return N.queue=L,zR(OR.bind(null,k,L,p),[p]),k.flags|=2048,ug(9,LR.bind(null,k,L,v,b),void 0,null),v},useId:function(){var p=yl(),b=Yr.identifierPrefix;if(On){var v=Cc,k=kc;v=(k&~(1<<32-Zs(k)-1)).toString(32)+v,b=":"+b+"R"+v,v=fg++,0<v&&(b+="H"+v.toString(32)),b+=":"}else v=Fie++,b=":"+b+"r"+v.toString(32)+":";return p.memoizedState=b},unstable_isNewReconciler:!1},Wie={readContext:ko,useCallback:XR,useContext:ko,useEffect:Cv,useImperativeHandle:GR,useInsertionEffect:HR,useLayoutEffect:VR,useMemo:KR,useReducer:Sv,useRef:$R,useState:function(){return Sv(dg)},useDebugValue:Av,useDeferredValue:function(p){var b=Co();return YR(b,jr.memoizedState,p)},useTransition:function(){var p=Sv(dg)[0],b=Co().memoizedState;return[p,b]},useMutableSource:_R,useSyncExternalStore:PR,useId:ZR,unstable_isNewReconciler:!1},Gie={readContext:ko,useCallback:XR,useContext:ko,useEffect:Cv,useImperativeHandle:GR,useInsertionEffect:HR,useLayoutEffect:VR,useMemo:KR,useReducer:kv,useRef:$R,useState:function(){return kv(dg)},useDebugValue:Av,useDeferredValue:function(p){var b=Co();return jr===null?b.memoizedState=p:YR(b,jr.memoizedState,p)},useTransition:function(){var p=kv(dg)[0],b=Co().memoizedState;return[p,b]},useMutableSource:_R,useSyncExternalStore:PR,useId:ZR,unstable_isNewReconciler:!1};function Ua(p,b){if(p&&p.defaultProps){b=Y({},b),p=p.defaultProps;for(var v in p)b[v]===void 0&&(b[v]=p[v]);return b}return b}function Mv(p,b,v,k){b=p.memoizedState,v=v(k,b),v=v==null?b:Y({},b,v),p.memoizedState=v,p.lanes===0&&(p.updateQueue.baseState=v)}var W8={isMounted:function(p){return(p=p._reactInternals)?En(p)===p:!1},enqueueSetState:function(p,b,v){p=p._reactInternals;var k=Ji(),N=ld(p),L=Mc(k,N);L.payload=b,v!=null&&(L.callback=v),b=id(p,L,N),b!==null&&(va(b,p,N,k),O8(b,p,N))},enqueueReplaceState:function(p,b,v){p=p._reactInternals;var k=Ji(),N=ld(p),L=Mc(k,N);L.tag=1,L.payload=b,v!=null&&(L.callback=v),b=id(p,L,N),b!==null&&(va(b,p,N,k),O8(b,p,N))},enqueueForceUpdate:function(p,b){p=p._reactInternals;var v=Ji(),k=ld(p),N=Mc(v,k);N.tag=2,b!=null&&(N.callback=b),b=id(p,N,k),b!==null&&(va(b,p,k,v),O8(b,p,k))}};function e_(p,b,v,k,N,L,X){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(k,L,X):b.prototype&&b.prototype.isPureReactComponent?!Q6(v,k)||!Q6(N,L):!0}function t_(p,b,v){var k=!1,N=td,L=b.contextType;return typeof L=="object"&&L!==null?L=ko(L):(N=vs(b)?K0:Ii.current,k=b.contextTypes,L=(k=k!=null)?C1(p,N):td),b=new b(v,L),p.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=W8,p.stateNode=b,b._reactInternals=p,k&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=N,p.__reactInternalMemoizedMaskedChildContext=L),b}function n_(p,b,v,k){p=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(v,k),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(v,k),b.state!==p&&W8.enqueueReplaceState(b,b.state,null)}function Tv(p,b,v,k){var N=p.stateNode;N.props=v,N.state=p.memoizedState,N.refs={},mv(p);var L=b.contextType;typeof L=="object"&&L!==null?N.context=ko(L):(L=vs(b)?K0:Ii.current,N.context=C1(p,L)),N.state=p.memoizedState,L=b.getDerivedStateFromProps,typeof L=="function"&&(Mv(p,b,L,v),N.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(b=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),b!==N.state&&W8.enqueueReplaceState(N,N.state,null),j8(p,v,N,k),N.state=p.memoizedState),typeof N.componentDidMount=="function"&&(p.flags|=4194308)}function P1(p,b){try{var v="",k=b;do v+=xe(k),k=k.return;while(k);var N=v}catch(L){N=`
Error generating stack: `+L.message+`
`+L.stack}return{value:p,source:b,stack:N,digest:null}}function Iv(p,b,v){return{value:p,source:null,stack:v??null,digest:b??null}}function Nv(p,b){try{console.error(b.value)}catch(v){setTimeout(function(){throw v})}}var Xie=typeof WeakMap=="function"?WeakMap:Map;function r_(p,b,v){v=Mc(-1,v),v.tag=3,v.payload={element:null};var k=b.value;return v.callback=function(){Q8||(Q8=!0,Gv=k),Nv(p,b)},v}function i_(p,b,v){v=Mc(-1,v),v.tag=3;var k=p.type.getDerivedStateFromError;if(typeof k=="function"){var N=b.value;v.payload=function(){return k(N)},v.callback=function(){Nv(p,b)}}var L=p.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(v.callback=function(){Nv(p,b),typeof k!="function"&&(od===null?od=new Set([this]):od.add(this));var X=b.stack;this.componentDidCatch(b.value,{componentStack:X!==null?X:""})}),v}function s_(p,b,v){var k=p.pingCache;if(k===null){k=p.pingCache=new Xie;var N=new Set;k.set(b,N)}else N=k.get(b),N===void 0&&(N=new Set,k.set(b,N));N.has(v)||(N.add(v),p=ase.bind(null,p,b,v),b.then(p,p))}function o_(p){do{var b;if((b=p.tag===13)&&(b=p.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return p;p=p.return}while(p!==null);return null}function a_(p,b,v,k,N){return p.mode&1?(p.flags|=65536,p.lanes=N,p):(p===b?p.flags|=65536:(p.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(b=Mc(-1,1),b.tag=2,id(v,b,1))),v.lanes|=1),p)}var Kie=S.ReactCurrentOwner,ws=!1;function Qi(p,b,v,k){b.child=p===null?AR(b,null,v,k):I1(b,p.child,v,k)}function l_(p,b,v,k,N){v=v.render;var L=b.ref;return R1(b,N),k=wv(p,b,v,k,L,N),v=Ev(),p!==null&&!ws?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~N,Tc(p,b,N)):(On&&v&&sv(b),b.flags|=1,Qi(p,b,k,N),b.child)}function c_(p,b,v,k,N){if(p===null){var L=v.type;return typeof L=="function"&&!Jv(L)&&L.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(b.tag=15,b.type=L,f_(p,b,L,k,N)):(p=iU(v.type,null,k,b,b.mode,N),p.ref=b.ref,p.return=b,b.child=p)}if(L=p.child,!(p.lanes&N)){var X=L.memoizedProps;if(v=v.compare,v=v!==null?v:Q6,v(X,k)&&p.ref===b.ref)return Tc(p,b,N)}return b.flags|=1,p=fd(L,k),p.ref=b.ref,p.return=b,b.child=p}function f_(p,b,v,k,N){if(p!==null){var L=p.memoizedProps;if(Q6(L,k)&&p.ref===b.ref)if(ws=!1,b.pendingProps=k=L,(p.lanes&N)!==0)p.flags&131072&&(ws=!0);else return b.lanes=p.lanes,Tc(p,b,N)}return Rv(p,b,v,k,N)}function d_(p,b,v){var k=b.pendingProps,N=k.children,L=p!==null?p.memoizedState:null;if(k.mode==="hidden")if(!(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(L1,eo),eo|=v;else{if(!(v&1073741824))return p=L!==null?L.baseLanes|v:v,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:p,cachePool:null,transitions:null},b.updateQueue=null,Sn(L1,eo),eo|=p,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=L!==null?L.baseLanes:v,Sn(L1,eo),eo|=k}else L!==null?(k=L.baseLanes|v,b.memoizedState=null):k=v,Sn(L1,eo),eo|=k;return Qi(p,b,N,v),b.child}function u_(p,b){var v=b.ref;(p===null&&v!==null||p!==null&&p.ref!==v)&&(b.flags|=512,b.flags|=2097152)}function Rv(p,b,v,k,N){var L=vs(v)?K0:Ii.current;return L=C1(b,L),R1(b,N),v=wv(p,b,v,k,L,N),k=Ev(),p!==null&&!ws?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~N,Tc(p,b,N)):(On&&k&&sv(b),b.flags|=1,Qi(p,b,v,N),b.child)}function h_(p,b,v,k,N){if(vs(v)){var L=!0;T8(b)}else L=!1;if(R1(b,N),b.stateNode===null)X8(p,b),t_(b,v,k),Tv(b,v,k,N),k=!0;else if(p===null){var X=b.stateNode,ee=b.memoizedProps;X.props=ee;var ne=X.context,ge=v.contextType;typeof ge=="object"&&ge!==null?ge=ko(ge):(ge=vs(v)?K0:Ii.current,ge=C1(b,ge));var Ae=v.getDerivedStateFromProps,Ne=typeof Ae=="function"||typeof X.getSnapshotBeforeUpdate=="function";Ne||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ee!==k||ne!==ge)&&n_(b,X,k,ge),rd=!1;var Ce=b.memoizedState;X.state=Ce,j8(b,k,X,N),ne=b.memoizedState,ee!==k||Ce!==ne||xs.current||rd?(typeof Ae=="function"&&(Mv(b,v,Ae,k),ne=b.memoizedState),(ee=rd||e_(b,v,ee,k,Ce,ne,ge))?(Ne||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(b.flags|=4194308)):(typeof X.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=k,b.memoizedState=ne),X.props=k,X.state=ne,X.context=ge,k=ee):(typeof X.componentDidMount=="function"&&(b.flags|=4194308),k=!1)}else{X=b.stateNode,TR(p,b),ee=b.memoizedProps,ge=b.type===b.elementType?ee:Ua(b.type,ee),X.props=ge,Ne=b.pendingProps,Ce=X.context,ne=v.contextType,typeof ne=="object"&&ne!==null?ne=ko(ne):(ne=vs(v)?K0:Ii.current,ne=C1(b,ne));var He=v.getDerivedStateFromProps;(Ae=typeof He=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ee!==Ne||Ce!==ne)&&n_(b,X,k,ne),rd=!1,Ce=b.memoizedState,X.state=Ce,j8(b,k,X,N);var qe=b.memoizedState;ee!==Ne||Ce!==qe||xs.current||rd?(typeof He=="function"&&(Mv(b,v,He,k),qe=b.memoizedState),(ge=rd||e_(b,v,ge,k,Ce,qe,ne)||!1)?(Ae||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(k,qe,ne),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(k,qe,ne)),typeof X.componentDidUpdate=="function"&&(b.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof X.componentDidUpdate!="function"||ee===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ee===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=1024),b.memoizedProps=k,b.memoizedState=qe),X.props=k,X.state=qe,X.context=ne,k=ge):(typeof X.componentDidUpdate!="function"||ee===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ee===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=1024),k=!1)}return _v(p,b,v,k,L,N)}function _v(p,b,v,k,N,L){u_(p,b);var X=(b.flags&128)!==0;if(!k&&!X)return N&&UR(b,v,!1),Tc(p,b,L);k=b.stateNode,Kie.current=b;var ee=X&&typeof v.getDerivedStateFromError!="function"?null:k.render();return b.flags|=1,p!==null&&X?(b.child=I1(b,p.child,null,L),b.child=I1(b,null,ee,L)):Qi(p,b,ee,L),b.memoizedState=k.state,N&&UR(b,v,!0),b.child}function p_(p){var b=p.stateNode;b.pendingContext?gR(p,b.pendingContext,b.pendingContext!==b.context):b.context&&gR(p,b.context,!1),gv(p,b.containerInfo)}function m_(p,b,v,k,N){return T1(),cv(N),b.flags|=256,Qi(p,b,v,k),b.child}var Pv={dehydrated:null,treeContext:null,retryLane:0};function Dv(p){return{baseLanes:p,cachePool:null,transitions:null}}function g_(p,b,v){var k=b.pendingProps,N=Yn.current,L=!1,X=(b.flags&128)!==0,ee;if((ee=X)||(ee=p!==null&&p.memoizedState===null?!1:(N&2)!==0),ee?(L=!0,b.flags&=-129):(p===null||p.memoizedState!==null)&&(N|=1),Sn(Yn,N&1),p===null)return lv(b),p=b.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(b.mode&1?p.data==="$!"?b.lanes=8:b.lanes=1073741824:b.lanes=1,null):(X=k.children,p=k.fallback,L?(k=b.mode,L=b.child,X={mode:"hidden",children:X},!(k&1)&&L!==null?(L.childLanes=0,L.pendingProps=X):L=sU(X,k,0,null),p=iu(p,k,v,null),L.return=b,p.return=b,L.sibling=p,b.child=L,b.child.memoizedState=Dv(v),b.memoizedState=Pv,p):Lv(b,X));if(N=p.memoizedState,N!==null&&(ee=N.dehydrated,ee!==null))return Yie(p,b,X,k,ee,N,v);if(L){L=k.fallback,X=b.mode,N=p.child,ee=N.sibling;var ne={mode:"hidden",children:k.children};return!(X&1)&&b.child!==N?(k=b.child,k.childLanes=0,k.pendingProps=ne,b.deletions=null):(k=fd(N,ne),k.subtreeFlags=N.subtreeFlags&14680064),ee!==null?L=fd(ee,L):(L=iu(L,X,v,null),L.flags|=2),L.return=b,k.return=b,k.sibling=L,b.child=k,k=L,L=b.child,X=p.child.memoizedState,X=X===null?Dv(v):{baseLanes:X.baseLanes|v,cachePool:null,transitions:X.transitions},L.memoizedState=X,L.childLanes=p.childLanes&~v,b.memoizedState=Pv,k}return L=p.child,p=L.sibling,k=fd(L,{mode:"visible",children:k.children}),!(b.mode&1)&&(k.lanes=v),k.return=b,k.sibling=null,p!==null&&(v=b.deletions,v===null?(b.deletions=[p],b.flags|=16):v.push(p)),b.child=k,b.memoizedState=null,k}function Lv(p,b){return b=sU({mode:"visible",children:b},p.mode,0,null),b.return=p,p.child=b}function G8(p,b,v,k){return k!==null&&cv(k),I1(b,p.child,null,v),p=Lv(b,b.pendingProps.children),p.flags|=2,b.memoizedState=null,p}function Yie(p,b,v,k,N,L,X){if(v)return b.flags&256?(b.flags&=-257,k=Iv(Error(n(422))),G8(p,b,X,k)):b.memoizedState!==null?(b.child=p.child,b.flags|=128,null):(L=k.fallback,N=b.mode,k=sU({mode:"visible",children:k.children},N,0,null),L=iu(L,N,X,null),L.flags|=2,k.return=b,L.return=b,k.sibling=L,b.child=k,b.mode&1&&I1(b,p.child,null,X),b.child.memoizedState=Dv(X),b.memoizedState=Pv,L);if(!(b.mode&1))return G8(p,b,X,null);if(N.data==="$!"){if(k=N.nextSibling&&N.nextSibling.dataset,k)var ee=k.dgst;return k=ee,L=Error(n(419)),k=Iv(L,k,void 0),G8(p,b,X,k)}if(ee=(X&p.childLanes)!==0,ws||ee){if(k=Yr,k!==null){switch(X&-X){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=N&(k.suspendedLanes|X)?0:N,N!==0&&N!==L.retryLane&&(L.retryLane=N,Ac(p,N),va(k,p,N,-1))}return Qv(),k=Iv(Error(n(421))),G8(p,b,X,k)}return N.data==="$?"?(b.flags|=128,b.child=p.child,b=lse.bind(null,p),N._reactRetry=b,null):(p=L.treeContext,Js=Jf(N.nextSibling),Qs=b,On=!0,ba=null,p!==null&&(Eo[So++]=kc,Eo[So++]=Cc,Eo[So++]=Y0,kc=p.id,Cc=p.overflow,Y0=b),b=Lv(b,k.children),b.flags|=4096,b)}function b_(p,b,v){p.lanes|=b;var k=p.alternate;k!==null&&(k.lanes|=b),hv(p.return,b,v)}function Ov(p,b,v,k,N){var L=p.memoizedState;L===null?p.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:k,tail:v,tailMode:N}:(L.isBackwards=b,L.rendering=null,L.renderingStartTime=0,L.last=k,L.tail=v,L.tailMode=N)}function U_(p,b,v){var k=b.pendingProps,N=k.revealOrder,L=k.tail;if(Qi(p,b,k.children,v),k=Yn.current,k&2)k=k&1|2,b.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=b.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&b_(p,v,b);else if(p.tag===19)b_(p,v,b);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===b)break e;for(;p.sibling===null;){if(p.return===null||p.return===b)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}k&=1}if(Sn(Yn,k),!(b.mode&1))b.memoizedState=null;else switch(N){case"forwards":for(v=b.child,N=null;v!==null;)p=v.alternate,p!==null&&B8(p)===null&&(N=v),v=v.sibling;v=N,v===null?(N=b.child,b.child=null):(N=v.sibling,v.sibling=null),Ov(b,!1,N,v,L);break;case"backwards":for(v=null,N=b.child,b.child=null;N!==null;){if(p=N.alternate,p!==null&&B8(p)===null){b.child=N;break}p=N.sibling,N.sibling=v,v=N,N=p}Ov(b,!0,v,null,L);break;case"together":Ov(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function X8(p,b){!(b.mode&1)&&p!==null&&(p.alternate=null,b.alternate=null,b.flags|=2)}function Tc(p,b,v){if(p!==null&&(b.dependencies=p.dependencies),eu|=b.lanes,!(v&b.childLanes))return null;if(p!==null&&b.child!==p.child)throw Error(n(153));if(b.child!==null){for(p=b.child,v=fd(p,p.pendingProps),b.child=v,v.return=b;p.sibling!==null;)p=p.sibling,v=v.sibling=fd(p,p.pendingProps),v.return=b;v.sibling=null}return b.child}function Zie(p,b,v){switch(b.tag){case 3:p_(b),T1();break;case 5:RR(b);break;case 1:vs(b.type)&&T8(b);break;case 4:gv(b,b.stateNode.containerInfo);break;case 10:var k=b.type._context,N=b.memoizedProps.value;Sn(D8,k._currentValue),k._currentValue=N;break;case 13:if(k=b.memoizedState,k!==null)return k.dehydrated!==null?(Sn(Yn,Yn.current&1),b.flags|=128,null):v&b.child.childLanes?g_(p,b,v):(Sn(Yn,Yn.current&1),p=Tc(p,b,v),p!==null?p.sibling:null);Sn(Yn,Yn.current&1);break;case 19:if(k=(v&b.childLanes)!==0,p.flags&128){if(k)return U_(p,b,v);b.flags|=128}if(N=b.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Sn(Yn,Yn.current),k)break;return null;case 22:case 23:return b.lanes=0,d_(p,b,v)}return Tc(p,b,v)}var y_,jv,x_,v_;y_=function(p,b){for(var v=b.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===b)break;for(;v.sibling===null;){if(v.return===null||v.return===b)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},jv=function(){},x_=function(p,b,v,k){var N=p.memoizedProps;if(N!==k){p=b.stateNode,Q0(Ul.current);var L=null;switch(v){case"input":N=Ge(p,N),k=Ge(p,k),L=[];break;case"select":N=Y({},N,{value:void 0}),k=Y({},k,{value:void 0}),L=[];break;case"textarea":N=qi(p,N),k=qi(p,k),L=[];break;default:typeof N.onClick!="function"&&typeof k.onClick=="function"&&(p.onclick=C8)}pl(v,k);var X;v=null;for(ge in N)if(!k.hasOwnProperty(ge)&&N.hasOwnProperty(ge)&&N[ge]!=null)if(ge==="style"){var ee=N[ge];for(X in ee)ee.hasOwnProperty(X)&&(v||(v={}),v[X]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?L||(L=[]):(L=L||[]).push(ge,null));for(ge in k){var ne=k[ge];if(ee=N!=null?N[ge]:void 0,k.hasOwnProperty(ge)&&ne!==ee&&(ne!=null||ee!=null))if(ge==="style")if(ee){for(X in ee)!ee.hasOwnProperty(X)||ne&&ne.hasOwnProperty(X)||(v||(v={}),v[X]="");for(X in ne)ne.hasOwnProperty(X)&&ee[X]!==ne[X]&&(v||(v={}),v[X]=ne[X])}else v||(L||(L=[]),L.push(ge,v)),v=ne;else ge==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ee=ee?ee.__html:void 0,ne!=null&&ee!==ne&&(L=L||[]).push(ge,ne)):ge==="children"?typeof ne!="string"&&typeof ne!="number"||(L=L||[]).push(ge,""+ne):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(i.hasOwnProperty(ge)?(ne!=null&&ge==="onScroll"&&In("scroll",p),L||ee===ne||(L=[])):(L=L||[]).push(ge,ne))}v&&(L=L||[]).push("style",v);var ge=L;(b.updateQueue=ge)&&(b.flags|=4)}},v_=function(p,b,v,k){v!==k&&(b.flags|=4)};function hg(p,b){if(!On)switch(p.tailMode){case"hidden":b=p.tail;for(var v=null;b!==null;)b.alternate!==null&&(v=b),b=b.sibling;v===null?p.tail=null:v.sibling=null;break;case"collapsed":v=p.tail;for(var k=null;v!==null;)v.alternate!==null&&(k=v),v=v.sibling;k===null?b||p.tail===null?p.tail=null:p.tail.sibling=null:k.sibling=null}}function Ri(p){var b=p.alternate!==null&&p.alternate.child===p.child,v=0,k=0;if(b)for(var N=p.child;N!==null;)v|=N.lanes|N.childLanes,k|=N.subtreeFlags&14680064,k|=N.flags&14680064,N.return=p,N=N.sibling;else for(N=p.child;N!==null;)v|=N.lanes|N.childLanes,k|=N.subtreeFlags,k|=N.flags,N.return=p,N=N.sibling;return p.subtreeFlags|=k,p.childLanes=v,b}function qie(p,b,v){var k=b.pendingProps;switch(ov(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(b),null;case 1:return vs(b.type)&&M8(),Ri(b),null;case 3:return k=b.stateNode,_1(),Nn(xs),Nn(Ii),yv(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(p===null||p.child===null)&&(_8(b)?b.flags|=4:p===null||p.memoizedState.isDehydrated&&!(b.flags&256)||(b.flags|=1024,ba!==null&&(Yv(ba),ba=null))),jv(p,b),Ri(b),null;case 5:bv(b);var N=Q0(lg.current);if(v=b.type,p!==null&&b.stateNode!=null)x_(p,b,v,k,N),p.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!k){if(b.stateNode===null)throw Error(n(166));return Ri(b),null}if(p=Q0(Ul.current),_8(b)){k=b.stateNode,v=b.type;var L=b.memoizedProps;switch(k[bl]=b,k[rg]=L,p=(b.mode&1)!==0,v){case"dialog":In("cancel",k),In("close",k);break;case"iframe":case"object":case"embed":In("load",k);break;case"video":case"audio":for(N=0;N<eg.length;N++)In(eg[N],k);break;case"source":In("error",k);break;case"img":case"image":case"link":In("error",k),In("load",k);break;case"details":In("toggle",k);break;case"input":ht(k,L),In("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!L.multiple},In("invalid",k);break;case"textarea":Xs(k,L),In("invalid",k)}pl(v,L),N=null;for(var X in L)if(L.hasOwnProperty(X)){var ee=L[X];X==="children"?typeof ee=="string"?k.textContent!==ee&&(L.suppressHydrationWarning!==!0&&k8(k.textContent,ee,p),N=["children",ee]):typeof ee=="number"&&k.textContent!==""+ee&&(L.suppressHydrationWarning!==!0&&k8(k.textContent,ee,p),N=["children",""+ee]):i.hasOwnProperty(X)&&ee!=null&&X==="onScroll"&&In("scroll",k)}switch(v){case"input":we(k),wn(k,L,!0);break;case"textarea":we(k),Us(k);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(k.onclick=C8)}k=N,b.updateQueue=k,k!==null&&(b.flags|=4)}else{X=N.nodeType===9?N:N.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=Cr(v)),p==="http://www.w3.org/1999/xhtml"?v==="script"?(p=X.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof k.is=="string"?p=X.createElement(v,{is:k.is}):(p=X.createElement(v),v==="select"&&(X=p,k.multiple?X.multiple=!0:k.size&&(X.size=k.size))):p=X.createElementNS(p,v),p[bl]=b,p[rg]=k,y_(p,b,!1,!1),b.stateNode=p;e:{switch(X=Ks(v,k),v){case"dialog":In("cancel",p),In("close",p),N=k;break;case"iframe":case"object":case"embed":In("load",p),N=k;break;case"video":case"audio":for(N=0;N<eg.length;N++)In(eg[N],p);N=k;break;case"source":In("error",p),N=k;break;case"img":case"image":case"link":In("error",p),In("load",p),N=k;break;case"details":In("toggle",p),N=k;break;case"input":ht(p,k),N=Ge(p,k),In("invalid",p);break;case"option":N=k;break;case"select":p._wrapperState={wasMultiple:!!k.multiple},N=Y({},k,{value:void 0}),In("invalid",p);break;case"textarea":Xs(p,k),N=qi(p,k),In("invalid",p);break;default:N=k}pl(v,N),ee=N;for(L in ee)if(ee.hasOwnProperty(L)){var ne=ee[L];L==="style"?ul(p,ne):L==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&ys(p,ne)):L==="children"?typeof ne=="string"?(v!=="textarea"||ne!=="")&&Xn(p,ne):typeof ne=="number"&&Xn(p,""+ne):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?ne!=null&&L==="onScroll"&&In("scroll",p):ne!=null&&E(p,L,ne,X))}switch(v){case"input":we(p),wn(p,k,!1);break;case"textarea":we(p),Us(p);break;case"option":k.value!=null&&p.setAttribute("value",""+te(k.value));break;case"select":p.multiple=!!k.multiple,L=k.value,L!=null?Ci(p,!!k.multiple,L,!1):k.defaultValue!=null&&Ci(p,!!k.multiple,k.defaultValue,!0);break;default:typeof N.onClick=="function"&&(p.onclick=C8)}switch(v){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(b.flags|=4)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return Ri(b),null;case 6:if(p&&b.stateNode!=null)v_(p,b,p.memoizedProps,k);else{if(typeof k!="string"&&b.stateNode===null)throw Error(n(166));if(v=Q0(lg.current),Q0(Ul.current),_8(b)){if(k=b.stateNode,v=b.memoizedProps,k[bl]=b,(L=k.nodeValue!==v)&&(p=Qs,p!==null))switch(p.tag){case 3:k8(k.nodeValue,v,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&k8(k.nodeValue,v,(p.mode&1)!==0)}L&&(b.flags|=4)}else k=(v.nodeType===9?v:v.ownerDocument).createTextNode(k),k[bl]=b,b.stateNode=k}return Ri(b),null;case 13:if(Nn(Yn),k=b.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(On&&Js!==null&&b.mode&1&&!(b.flags&128))SR(),T1(),b.flags|=98560,L=!1;else if(L=_8(b),k!==null&&k.dehydrated!==null){if(p===null){if(!L)throw Error(n(318));if(L=b.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[bl]=b}else T1(),!(b.flags&128)&&(b.memoizedState=null),b.flags|=4;Ri(b),L=!1}else ba!==null&&(Yv(ba),ba=null),L=!0;if(!L)return b.flags&65536?b:null}return b.flags&128?(b.lanes=v,b):(k=k!==null,k!==(p!==null&&p.memoizedState!==null)&&k&&(b.child.flags|=8192,b.mode&1&&(p===null||Yn.current&1?Br===0&&(Br=3):Qv())),b.updateQueue!==null&&(b.flags|=4),Ri(b),null);case 4:return _1(),jv(p,b),p===null&&tg(b.stateNode.containerInfo),Ri(b),null;case 10:return uv(b.type._context),Ri(b),null;case 17:return vs(b.type)&&M8(),Ri(b),null;case 19:if(Nn(Yn),L=b.memoizedState,L===null)return Ri(b),null;if(k=(b.flags&128)!==0,X=L.rendering,X===null)if(k)hg(L,!1);else{if(Br!==0||p!==null&&p.flags&128)for(p=b.child;p!==null;){if(X=B8(p),X!==null){for(b.flags|=128,hg(L,!1),k=X.updateQueue,k!==null&&(b.updateQueue=k,b.flags|=4),b.subtreeFlags=0,k=v,v=b.child;v!==null;)L=v,p=k,L.flags&=14680066,X=L.alternate,X===null?(L.childLanes=0,L.lanes=p,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=X.childLanes,L.lanes=X.lanes,L.child=X.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=X.memoizedProps,L.memoizedState=X.memoizedState,L.updateQueue=X.updateQueue,L.type=X.type,p=X.dependencies,L.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),v=v.sibling;return Sn(Yn,Yn.current&1|2),b.child}p=p.sibling}L.tail!==null&&Kn()>O1&&(b.flags|=128,k=!0,hg(L,!1),b.lanes=4194304)}else{if(!k)if(p=B8(X),p!==null){if(b.flags|=128,k=!0,v=p.updateQueue,v!==null&&(b.updateQueue=v,b.flags|=4),hg(L,!0),L.tail===null&&L.tailMode==="hidden"&&!X.alternate&&!On)return Ri(b),null}else 2*Kn()-L.renderingStartTime>O1&&v!==1073741824&&(b.flags|=128,k=!0,hg(L,!1),b.lanes=4194304);L.isBackwards?(X.sibling=b.child,b.child=X):(v=L.last,v!==null?v.sibling=X:b.child=X,L.last=X)}return L.tail!==null?(b=L.tail,L.rendering=b,L.tail=b.sibling,L.renderingStartTime=Kn(),b.sibling=null,v=Yn.current,Sn(Yn,k?v&1|2:v&1),b):(Ri(b),null);case 22:case 23:return qv(),k=b.memoizedState!==null,p!==null&&p.memoizedState!==null!==k&&(b.flags|=8192),k&&b.mode&1?eo&1073741824&&(Ri(b),b.subtreeFlags&6&&(b.flags|=8192)):Ri(b),null;case 24:return null;case 25:return null}throw Error(n(156,b.tag))}function Qie(p,b){switch(ov(b),b.tag){case 1:return vs(b.type)&&M8(),p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 3:return _1(),Nn(xs),Nn(Ii),yv(),p=b.flags,p&65536&&!(p&128)?(b.flags=p&-65537|128,b):null;case 5:return bv(b),null;case 13:if(Nn(Yn),p=b.memoizedState,p!==null&&p.dehydrated!==null){if(b.alternate===null)throw Error(n(340));T1()}return p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 19:return Nn(Yn),null;case 4:return _1(),null;case 10:return uv(b.type._context),null;case 22:case 23:return qv(),null;case 24:return null;default:return null}}var K8=!1,_i=!1,Jie=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function D1(p,b){var v=p.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(k){ar(p,b,k)}else v.current=null}function Bv(p,b,v){try{v()}catch(k){ar(p,b,k)}}var w_=!1;function ese(p,b){if(qx=p8,p=eR(),Hx(p)){if("selectionStart"in p)var v={start:p.selectionStart,end:p.selectionEnd};else e:{v=(v=p.ownerDocument)&&v.defaultView||window;var k=v.getSelection&&v.getSelection();if(k&&k.rangeCount!==0){v=k.anchorNode;var N=k.anchorOffset,L=k.focusNode;k=k.focusOffset;try{v.nodeType,L.nodeType}catch{v=null;break e}var X=0,ee=-1,ne=-1,ge=0,Ae=0,Ne=p,Ce=null;t:for(;;){for(var He;Ne!==v||N!==0&&Ne.nodeType!==3||(ee=X+N),Ne!==L||k!==0&&Ne.nodeType!==3||(ne=X+k),Ne.nodeType===3&&(X+=Ne.nodeValue.length),(He=Ne.firstChild)!==null;)Ce=Ne,Ne=He;for(;;){if(Ne===p)break t;if(Ce===v&&++ge===N&&(ee=X),Ce===L&&++Ae===k&&(ne=X),(He=Ne.nextSibling)!==null)break;Ne=Ce,Ce=Ne.parentNode}Ne=He}v=ee===-1||ne===-1?null:{start:ee,end:ne}}else v=null}v=v||{start:0,end:0}}else v=null;for(Qx={focusedElem:p,selectionRange:v},p8=!1,Xe=b;Xe!==null;)if(b=Xe,p=b.child,(b.subtreeFlags&1028)!==0&&p!==null)p.return=b,Xe=p;else for(;Xe!==null;){b=Xe;try{var qe=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Je=qe.memoizedProps,br=qe.memoizedState,ae=b.stateNode,re=ae.getSnapshotBeforeUpdate(b.elementType===b.type?Je:Ua(b.type,Je),br);ae.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var fe=b.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Pe){ar(b,b.return,Pe)}if(p=b.sibling,p!==null){p.return=b.return,Xe=p;break}Xe=b.return}return qe=w_,w_=!1,qe}function pg(p,b,v){var k=b.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var N=k=k.next;do{if((N.tag&p)===p){var L=N.destroy;N.destroy=void 0,L!==void 0&&Bv(b,v,L)}N=N.next}while(N!==k)}}function Y8(p,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var v=b=b.next;do{if((v.tag&p)===p){var k=v.create;v.destroy=k()}v=v.next}while(v!==b)}}function Fv(p){var b=p.ref;if(b!==null){var v=p.stateNode;switch(p.tag){case 5:p=v;break;default:p=v}typeof b=="function"?b(p):b.current=p}}function E_(p){var b=p.alternate;b!==null&&(p.alternate=null,E_(b)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(b=p.stateNode,b!==null&&(delete b[bl],delete b[rg],delete b[nv],delete b[Lie],delete b[Oie])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function S_(p){return p.tag===5||p.tag===3||p.tag===4}function k_(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||S_(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function $v(p,b,v){var k=p.tag;if(k===5||k===6)p=p.stateNode,b?v.nodeType===8?v.parentNode.insertBefore(p,b):v.insertBefore(p,b):(v.nodeType===8?(b=v.parentNode,b.insertBefore(p,v)):(b=v,b.appendChild(p)),v=v._reactRootContainer,v!=null||b.onclick!==null||(b.onclick=C8));else if(k!==4&&(p=p.child,p!==null))for($v(p,b,v),p=p.sibling;p!==null;)$v(p,b,v),p=p.sibling}function zv(p,b,v){var k=p.tag;if(k===5||k===6)p=p.stateNode,b?v.insertBefore(p,b):v.appendChild(p);else if(k!==4&&(p=p.child,p!==null))for(zv(p,b,v),p=p.sibling;p!==null;)zv(p,b,v),p=p.sibling}var pi=null,ya=!1;function sd(p,b,v){for(v=v.child;v!==null;)C_(p,b,v),v=v.sibling}function C_(p,b,v){if(wo&&typeof wo.onCommitFiberUnmount=="function")try{wo.onCommitFiberUnmount(W0,v)}catch{}switch(v.tag){case 5:_i||D1(v,b);case 6:var k=pi,N=ya;pi=null,sd(p,b,v),pi=k,ya=N,pi!==null&&(ya?(p=pi,v=v.stateNode,p.nodeType===8?p.parentNode.removeChild(v):p.removeChild(v)):pi.removeChild(v.stateNode));break;case 18:pi!==null&&(ya?(p=pi,v=v.stateNode,p.nodeType===8?tv(p.parentNode,v):p.nodeType===1&&tv(p,v),G6(p)):tv(pi,v.stateNode));break;case 4:k=pi,N=ya,pi=v.stateNode.containerInfo,ya=!0,sd(p,b,v),pi=k,ya=N;break;case 0:case 11:case 14:case 15:if(!_i&&(k=v.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){N=k=k.next;do{var L=N,X=L.destroy;L=L.tag,X!==void 0&&(L&2||L&4)&&Bv(v,b,X),N=N.next}while(N!==k)}sd(p,b,v);break;case 1:if(!_i&&(D1(v,b),k=v.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=v.memoizedProps,k.state=v.memoizedState,k.componentWillUnmount()}catch(ee){ar(v,b,ee)}sd(p,b,v);break;case 21:sd(p,b,v);break;case 22:v.mode&1?(_i=(k=_i)||v.memoizedState!==null,sd(p,b,v),_i=k):sd(p,b,v);break;default:sd(p,b,v)}}function A_(p){var b=p.updateQueue;if(b!==null){p.updateQueue=null;var v=p.stateNode;v===null&&(v=p.stateNode=new Jie),b.forEach(function(k){var N=cse.bind(null,p,k);v.has(k)||(v.add(k),k.then(N,N))})}}function xa(p,b){var v=b.deletions;if(v!==null)for(var k=0;k<v.length;k++){var N=v[k];try{var L=p,X=b,ee=X;e:for(;ee!==null;){switch(ee.tag){case 5:pi=ee.stateNode,ya=!1;break e;case 3:pi=ee.stateNode.containerInfo,ya=!0;break e;case 4:pi=ee.stateNode.containerInfo,ya=!0;break e}ee=ee.return}if(pi===null)throw Error(n(160));C_(L,X,N),pi=null,ya=!1;var ne=N.alternate;ne!==null&&(ne.return=null),N.return=null}catch(ge){ar(N,b,ge)}}if(b.subtreeFlags&12854)for(b=b.child;b!==null;)M_(b,p),b=b.sibling}function M_(p,b){var v=p.alternate,k=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(xa(b,p),xl(p),k&4){try{pg(3,p,p.return),Y8(3,p)}catch(Je){ar(p,p.return,Je)}try{pg(5,p,p.return)}catch(Je){ar(p,p.return,Je)}}break;case 1:xa(b,p),xl(p),k&512&&v!==null&&D1(v,v.return);break;case 5:if(xa(b,p),xl(p),k&512&&v!==null&&D1(v,v.return),p.flags&32){var N=p.stateNode;try{Xn(N,"")}catch(Je){ar(p,p.return,Je)}}if(k&4&&(N=p.stateNode,N!=null)){var L=p.memoizedProps,X=v!==null?v.memoizedProps:L,ee=p.type,ne=p.updateQueue;if(p.updateQueue=null,ne!==null)try{ee==="input"&&L.type==="radio"&&L.name!=null&&ot(N,L),Ks(ee,X);var ge=Ks(ee,L);for(X=0;X<ne.length;X+=2){var Ae=ne[X],Ne=ne[X+1];Ae==="style"?ul(N,Ne):Ae==="dangerouslySetInnerHTML"?ys(N,Ne):Ae==="children"?Xn(N,Ne):E(N,Ae,Ne,ge)}switch(ee){case"input":Bt(N,L);break;case"textarea":la(N,L);break;case"select":var Ce=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!L.multiple;var He=L.value;He!=null?Ci(N,!!L.multiple,He,!1):Ce!==!!L.multiple&&(L.defaultValue!=null?Ci(N,!!L.multiple,L.defaultValue,!0):Ci(N,!!L.multiple,L.multiple?[]:"",!1))}N[rg]=L}catch(Je){ar(p,p.return,Je)}}break;case 6:if(xa(b,p),xl(p),k&4){if(p.stateNode===null)throw Error(n(162));N=p.stateNode,L=p.memoizedProps;try{N.nodeValue=L}catch(Je){ar(p,p.return,Je)}}break;case 3:if(xa(b,p),xl(p),k&4&&v!==null&&v.memoizedState.isDehydrated)try{G6(b.containerInfo)}catch(Je){ar(p,p.return,Je)}break;case 4:xa(b,p),xl(p);break;case 13:xa(b,p),xl(p),N=p.child,N.flags&8192&&(L=N.memoizedState!==null,N.stateNode.isHidden=L,!L||N.alternate!==null&&N.alternate.memoizedState!==null||(Wv=Kn())),k&4&&A_(p);break;case 22:if(Ae=v!==null&&v.memoizedState!==null,p.mode&1?(_i=(ge=_i)||Ae,xa(b,p),_i=ge):xa(b,p),xl(p),k&8192){if(ge=p.memoizedState!==null,(p.stateNode.isHidden=ge)&&!Ae&&p.mode&1)for(Xe=p,Ae=p.child;Ae!==null;){for(Ne=Xe=Ae;Xe!==null;){switch(Ce=Xe,He=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:pg(4,Ce,Ce.return);break;case 1:D1(Ce,Ce.return);var qe=Ce.stateNode;if(typeof qe.componentWillUnmount=="function"){k=Ce,v=Ce.return;try{b=k,qe.props=b.memoizedProps,qe.state=b.memoizedState,qe.componentWillUnmount()}catch(Je){ar(k,v,Je)}}break;case 5:D1(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){N_(Ne);continue}}He!==null?(He.return=Ce,Xe=He):N_(Ne)}Ae=Ae.sibling}e:for(Ae=null,Ne=p;;){if(Ne.tag===5){if(Ae===null){Ae=Ne;try{N=Ne.stateNode,ge?(L=N.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(ee=Ne.stateNode,ne=Ne.memoizedProps.style,X=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,ee.style.display=ca("display",X))}catch(Je){ar(p,p.return,Je)}}}else if(Ne.tag===6){if(Ae===null)try{Ne.stateNode.nodeValue=ge?"":Ne.memoizedProps}catch(Je){ar(p,p.return,Je)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===p)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===p)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===p)break e;Ae===Ne&&(Ae=null),Ne=Ne.return}Ae===Ne&&(Ae=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:xa(b,p),xl(p),k&4&&A_(p);break;case 21:break;default:xa(b,p),xl(p)}}function xl(p){var b=p.flags;if(b&2){try{e:{for(var v=p.return;v!==null;){if(S_(v)){var k=v;break e}v=v.return}throw Error(n(160))}switch(k.tag){case 5:var N=k.stateNode;k.flags&32&&(Xn(N,""),k.flags&=-33);var L=k_(p);zv(p,L,N);break;case 3:case 4:var X=k.stateNode.containerInfo,ee=k_(p);$v(p,ee,X);break;default:throw Error(n(161))}}catch(ne){ar(p,p.return,ne)}p.flags&=-3}b&4096&&(p.flags&=-4097)}function tse(p,b,v){Xe=p,T_(p)}function T_(p,b,v){for(var k=(p.mode&1)!==0;Xe!==null;){var N=Xe,L=N.child;if(N.tag===22&&k){var X=N.memoizedState!==null||K8;if(!X){var ee=N.alternate,ne=ee!==null&&ee.memoizedState!==null||_i;ee=K8;var ge=_i;if(K8=X,(_i=ne)&&!ge)for(Xe=N;Xe!==null;)X=Xe,ne=X.child,X.tag===22&&X.memoizedState!==null?R_(N):ne!==null?(ne.return=X,Xe=ne):R_(N);for(;L!==null;)Xe=L,T_(L),L=L.sibling;Xe=N,K8=ee,_i=ge}I_(p)}else N.subtreeFlags&8772&&L!==null?(L.return=N,Xe=L):I_(p)}}function I_(p){for(;Xe!==null;){var b=Xe;if(b.flags&8772){var v=b.alternate;try{if(b.flags&8772)switch(b.tag){case 0:case 11:case 15:_i||Y8(5,b);break;case 1:var k=b.stateNode;if(b.flags&4&&!_i)if(v===null)k.componentDidMount();else{var N=b.elementType===b.type?v.memoizedProps:Ua(b.type,v.memoizedProps);k.componentDidUpdate(N,v.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var L=b.updateQueue;L!==null&&NR(b,L,k);break;case 3:var X=b.updateQueue;if(X!==null){if(v=null,b.child!==null)switch(b.child.tag){case 5:v=b.child.stateNode;break;case 1:v=b.child.stateNode}NR(b,X,v)}break;case 5:var ee=b.stateNode;if(v===null&&b.flags&4){v=ee;var ne=b.memoizedProps;switch(b.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&v.focus();break;case"img":ne.src&&(v.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(b.memoizedState===null){var ge=b.alternate;if(ge!==null){var Ae=ge.memoizedState;if(Ae!==null){var Ne=Ae.dehydrated;Ne!==null&&G6(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}_i||b.flags&512&&Fv(b)}catch(Ce){ar(b,b.return,Ce)}}if(b===p){Xe=null;break}if(v=b.sibling,v!==null){v.return=b.return,Xe=v;break}Xe=b.return}}function N_(p){for(;Xe!==null;){var b=Xe;if(b===p){Xe=null;break}var v=b.sibling;if(v!==null){v.return=b.return,Xe=v;break}Xe=b.return}}function R_(p){for(;Xe!==null;){var b=Xe;try{switch(b.tag){case 0:case 11:case 15:var v=b.return;try{Y8(4,b)}catch(ne){ar(b,v,ne)}break;case 1:var k=b.stateNode;if(typeof k.componentDidMount=="function"){var N=b.return;try{k.componentDidMount()}catch(ne){ar(b,N,ne)}}var L=b.return;try{Fv(b)}catch(ne){ar(b,L,ne)}break;case 5:var X=b.return;try{Fv(b)}catch(ne){ar(b,X,ne)}}}catch(ne){ar(b,b.return,ne)}if(b===p){Xe=null;break}var ee=b.sibling;if(ee!==null){ee.return=b.return,Xe=ee;break}Xe=b.return}}var nse=Math.ceil,Z8=S.ReactCurrentDispatcher,Hv=S.ReactCurrentOwner,Ao=S.ReactCurrentBatchConfig,Xt=0,Yr=null,Ar=null,mi=0,eo=0,L1=ed(0),Br=0,mg=null,eu=0,q8=0,Vv=0,gg=null,Es=null,Wv=0,O1=1/0,Ic=null,Q8=!1,Gv=null,od=null,J8=!1,ad=null,eU=0,bg=0,Xv=null,tU=-1,nU=0;function Ji(){return Xt&6?Kn():tU!==-1?tU:tU=Kn()}function ld(p){return p.mode&1?Xt&2&&mi!==0?mi&-mi:Bie.transition!==null?(nU===0&&(nU=g1()),nU):(p=dn,p!==0||(p=window.event,p=p===void 0?16:PN(p.type)),p):1}function va(p,b,v,k){if(50<bg)throw bg=0,Xv=null,Error(n(185));G0(p,v,k),(!(Xt&2)||p!==Yr)&&(p===Yr&&(!(Xt&2)&&(q8|=v),Br===4&&cd(p,mi)),Ss(p,k),v===1&&Xt===0&&!(b.mode&1)&&(O1=Kn()+500,I8&&nd()))}function Ss(p,b){var v=p.callbackNode;Mx(p,b);var k=m1(p,p===Yr?mi:0);if(k===0)v!==null&&o8(v),p.callbackNode=null,p.callbackPriority=0;else if(b=k&-k,p.callbackPriority!==b){if(v!=null&&o8(v),b===1)p.tag===0?jie(P_.bind(null,p)):yR(P_.bind(null,p)),Pie(function(){!(Xt&6)&&nd()}),v=null;else{switch(CN(k)){case 1:v=B6;break;case 4:v=l8;break;case 16:v=u1;break;case 536870912:v=c8;break;default:v=u1}v=z_(v,__.bind(null,p))}p.callbackPriority=b,p.callbackNode=v}}function __(p,b){if(tU=-1,nU=0,Xt&6)throw Error(n(327));var v=p.callbackNode;if(j1()&&p.callbackNode!==v)return null;var k=m1(p,p===Yr?mi:0);if(k===0)return null;if(k&30||k&p.expiredLanes||b)b=rU(p,k);else{b=k;var N=Xt;Xt|=2;var L=L_();(Yr!==p||mi!==b)&&(Ic=null,O1=Kn()+500,nu(p,b));do try{sse();break}catch(ee){D_(p,ee)}while(!0);dv(),Z8.current=L,Xt=N,Ar!==null?b=0:(Yr=null,mi=0,b=Br)}if(b!==0){if(b===2&&(N=F6(p),N!==0&&(k=N,b=Kv(p,N))),b===1)throw v=mg,nu(p,0),cd(p,k),Ss(p,Kn()),v;if(b===6)cd(p,k);else{if(N=p.current.alternate,!(k&30)&&!rse(N)&&(b=rU(p,k),b===2&&(L=F6(p),L!==0&&(k=L,b=Kv(p,L))),b===1))throw v=mg,nu(p,0),cd(p,k),Ss(p,Kn()),v;switch(p.finishedWork=N,p.finishedLanes=k,b){case 0:case 1:throw Error(n(345));case 2:ru(p,Es,Ic);break;case 3:if(cd(p,k),(k&130023424)===k&&(b=Wv+500-Kn(),10<b)){if(m1(p,0)!==0)break;if(N=p.suspendedLanes,(N&k)!==k){Ji(),p.pingedLanes|=p.suspendedLanes&N;break}p.timeoutHandle=ev(ru.bind(null,p,Es,Ic),b);break}ru(p,Es,Ic);break;case 4:if(cd(p,k),(k&4194240)===k)break;for(b=p.eventTimes,N=-1;0<k;){var X=31-Zs(k);L=1<<X,X=b[X],X>N&&(N=X),k&=~L}if(k=N,k=Kn()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*nse(k/1960))-k,10<k){p.timeoutHandle=ev(ru.bind(null,p,Es,Ic),k);break}ru(p,Es,Ic);break;case 5:ru(p,Es,Ic);break;default:throw Error(n(329))}}}return Ss(p,Kn()),p.callbackNode===v?__.bind(null,p):null}function Kv(p,b){var v=gg;return p.current.memoizedState.isDehydrated&&(nu(p,b).flags|=256),p=rU(p,b),p!==2&&(b=Es,Es=v,b!==null&&Yv(b)),p}function Yv(p){Es===null?Es=p:Es.push.apply(Es,p)}function rse(p){for(var b=p;;){if(b.flags&16384){var v=b.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var k=0;k<v.length;k++){var N=v[k],L=N.getSnapshot;N=N.value;try{if(!ga(L(),N))return!1}catch{return!1}}}if(v=b.child,b.subtreeFlags&16384&&v!==null)v.return=b,b=v;else{if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function cd(p,b){for(b&=~Vv,b&=~q8,p.suspendedLanes|=b,p.pingedLanes&=~b,p=p.expirationTimes;0<b;){var v=31-Zs(b),k=1<<v;p[v]=-1,b&=~k}}function P_(p){if(Xt&6)throw Error(n(327));j1();var b=m1(p,0);if(!(b&1))return Ss(p,Kn()),null;var v=rU(p,b);if(p.tag!==0&&v===2){var k=F6(p);k!==0&&(b=k,v=Kv(p,k))}if(v===1)throw v=mg,nu(p,0),cd(p,b),Ss(p,Kn()),v;if(v===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=b,ru(p,Es,Ic),Ss(p,Kn()),null}function Zv(p,b){var v=Xt;Xt|=1;try{return p(b)}finally{Xt=v,Xt===0&&(O1=Kn()+500,I8&&nd())}}function tu(p){ad!==null&&ad.tag===0&&!(Xt&6)&&j1();var b=Xt;Xt|=1;var v=Ao.transition,k=dn;try{if(Ao.transition=null,dn=1,p)return p()}finally{dn=k,Ao.transition=v,Xt=b,!(Xt&6)&&nd()}}function qv(){eo=L1.current,Nn(L1)}function nu(p,b){p.finishedWork=null,p.finishedLanes=0;var v=p.timeoutHandle;if(v!==-1&&(p.timeoutHandle=-1,_ie(v)),Ar!==null)for(v=Ar.return;v!==null;){var k=v;switch(ov(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&M8();break;case 3:_1(),Nn(xs),Nn(Ii),yv();break;case 5:bv(k);break;case 4:_1();break;case 13:Nn(Yn);break;case 19:Nn(Yn);break;case 10:uv(k.type._context);break;case 22:case 23:qv()}v=v.return}if(Yr=p,Ar=p=fd(p.current,null),mi=eo=b,Br=0,mg=null,Vv=q8=eu=0,Es=gg=null,q0!==null){for(b=0;b<q0.length;b++)if(v=q0[b],k=v.interleaved,k!==null){v.interleaved=null;var N=k.next,L=v.pending;if(L!==null){var X=L.next;L.next=N,k.next=X}v.pending=k}q0=null}return p}function D_(p,b){do{var v=Ar;try{if(dv(),F8.current=V8,$8){for(var k=Zn.memoizedState;k!==null;){var N=k.queue;N!==null&&(N.pending=null),k=k.next}$8=!1}if(J0=0,Kr=jr=Zn=null,cg=!1,fg=0,Hv.current=null,v===null||v.return===null){Br=1,mg=b,Ar=null;break}e:{var L=p,X=v.return,ee=v,ne=b;if(b=mi,ee.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ge=ne,Ae=ee,Ne=Ae.tag;if(!(Ae.mode&1)&&(Ne===0||Ne===11||Ne===15)){var Ce=Ae.alternate;Ce?(Ae.updateQueue=Ce.updateQueue,Ae.memoizedState=Ce.memoizedState,Ae.lanes=Ce.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var He=o_(X);if(He!==null){He.flags&=-257,a_(He,X,ee,L,b),He.mode&1&&s_(L,ge,b),b=He,ne=ge;var qe=b.updateQueue;if(qe===null){var Je=new Set;Je.add(ne),b.updateQueue=Je}else qe.add(ne);break e}else{if(!(b&1)){s_(L,ge,b),Qv();break e}ne=Error(n(426))}}else if(On&&ee.mode&1){var br=o_(X);if(br!==null){!(br.flags&65536)&&(br.flags|=256),a_(br,X,ee,L,b),cv(P1(ne,ee));break e}}L=ne=P1(ne,ee),Br!==4&&(Br=2),gg===null?gg=[L]:gg.push(L),L=X;do{switch(L.tag){case 3:L.flags|=65536,b&=-b,L.lanes|=b;var ae=r_(L,ne,b);IR(L,ae);break e;case 1:ee=ne;var re=L.type,fe=L.stateNode;if(!(L.flags&128)&&(typeof re.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(od===null||!od.has(fe)))){L.flags|=65536,b&=-b,L.lanes|=b;var Pe=i_(L,ee,b);IR(L,Pe);break e}}L=L.return}while(L!==null)}j_(v)}catch(rt){b=rt,Ar===v&&v!==null&&(Ar=v=v.return);continue}break}while(!0)}function L_(){var p=Z8.current;return Z8.current=V8,p===null?V8:p}function Qv(){(Br===0||Br===3||Br===2)&&(Br=4),Yr===null||!(eu&268435455)&&!(q8&268435455)||cd(Yr,mi)}function rU(p,b){var v=Xt;Xt|=2;var k=L_();(Yr!==p||mi!==b)&&(Ic=null,nu(p,b));do try{ise();break}catch(N){D_(p,N)}while(!0);if(dv(),Xt=v,Z8.current=k,Ar!==null)throw Error(n(261));return Yr=null,mi=0,Br}function ise(){for(;Ar!==null;)O_(Ar)}function sse(){for(;Ar!==null&&!vx();)O_(Ar)}function O_(p){var b=$_(p.alternate,p,eo);p.memoizedProps=p.pendingProps,b===null?j_(p):Ar=b,Hv.current=null}function j_(p){var b=p;do{var v=b.alternate;if(p=b.return,b.flags&32768){if(v=Qie(v,b),v!==null){v.flags&=32767,Ar=v;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Br=6,Ar=null;return}}else if(v=qie(v,b,eo),v!==null){Ar=v;return}if(b=b.sibling,b!==null){Ar=b;return}Ar=b=p}while(b!==null);Br===0&&(Br=5)}function ru(p,b,v){var k=dn,N=Ao.transition;try{Ao.transition=null,dn=1,ose(p,b,v,k)}finally{Ao.transition=N,dn=k}return null}function ose(p,b,v,k){do j1();while(ad!==null);if(Xt&6)throw Error(n(327));v=p.finishedWork;var N=p.finishedLanes;if(v===null)return null;if(p.finishedWork=null,p.finishedLanes=0,v===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var L=v.lanes|v.childLanes;if(d8(p,L),p===Yr&&(Ar=Yr=null,mi=0),!(v.subtreeFlags&2064)&&!(v.flags&2064)||J8||(J8=!0,z_(u1,function(){return j1(),null})),L=(v.flags&15990)!==0,v.subtreeFlags&15990||L){L=Ao.transition,Ao.transition=null;var X=dn;dn=1;var ee=Xt;Xt|=4,Hv.current=null,ese(p,v),M_(v,p),Cie(Qx),p8=!!qx,Qx=qx=null,p.current=v,tse(v),a8(),Xt=ee,dn=X,Ao.transition=L}else p.current=v;if(J8&&(J8=!1,ad=p,eU=N),L=p.pendingLanes,L===0&&(od=null),Sx(v.stateNode),Ss(p,Kn()),b!==null)for(k=p.onRecoverableError,v=0;v<b.length;v++)N=b[v],k(N.value,{componentStack:N.stack,digest:N.digest});if(Q8)throw Q8=!1,p=Gv,Gv=null,p;return eU&1&&p.tag!==0&&j1(),L=p.pendingLanes,L&1?p===Xv?bg++:(bg=0,Xv=p):bg=0,nd(),null}function j1(){if(ad!==null){var p=CN(eU),b=Ao.transition,v=dn;try{if(Ao.transition=null,dn=16>p?16:p,ad===null)var k=!1;else{if(p=ad,ad=null,eU=0,Xt&6)throw Error(n(331));var N=Xt;for(Xt|=4,Xe=p.current;Xe!==null;){var L=Xe,X=L.child;if(Xe.flags&16){var ee=L.deletions;if(ee!==null){for(var ne=0;ne<ee.length;ne++){var ge=ee[ne];for(Xe=ge;Xe!==null;){var Ae=Xe;switch(Ae.tag){case 0:case 11:case 15:pg(8,Ae,L)}var Ne=Ae.child;if(Ne!==null)Ne.return=Ae,Xe=Ne;else for(;Xe!==null;){Ae=Xe;var Ce=Ae.sibling,He=Ae.return;if(E_(Ae),Ae===ge){Xe=null;break}if(Ce!==null){Ce.return=He,Xe=Ce;break}Xe=He}}}var qe=L.alternate;if(qe!==null){var Je=qe.child;if(Je!==null){qe.child=null;do{var br=Je.sibling;Je.sibling=null,Je=br}while(Je!==null)}}Xe=L}}if(L.subtreeFlags&2064&&X!==null)X.return=L,Xe=X;else e:for(;Xe!==null;){if(L=Xe,L.flags&2048)switch(L.tag){case 0:case 11:case 15:pg(9,L,L.return)}var ae=L.sibling;if(ae!==null){ae.return=L.return,Xe=ae;break e}Xe=L.return}}var re=p.current;for(Xe=re;Xe!==null;){X=Xe;var fe=X.child;if(X.subtreeFlags&2064&&fe!==null)fe.return=X,Xe=fe;else e:for(X=re;Xe!==null;){if(ee=Xe,ee.flags&2048)try{switch(ee.tag){case 0:case 11:case 15:Y8(9,ee)}}catch(rt){ar(ee,ee.return,rt)}if(ee===X){Xe=null;break e}var Pe=ee.sibling;if(Pe!==null){Pe.return=ee.return,Xe=Pe;break e}Xe=ee.return}}if(Xt=N,nd(),wo&&typeof wo.onPostCommitFiberRoot=="function")try{wo.onPostCommitFiberRoot(W0,p)}catch{}k=!0}return k}finally{dn=v,Ao.transition=b}}return!1}function B_(p,b,v){b=P1(v,b),b=r_(p,b,1),p=id(p,b,1),b=Ji(),p!==null&&(G0(p,1,b),Ss(p,b))}function ar(p,b,v){if(p.tag===3)B_(p,p,v);else for(;b!==null;){if(b.tag===3){B_(b,p,v);break}else if(b.tag===1){var k=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(od===null||!od.has(k))){p=P1(v,p),p=i_(b,p,1),b=id(b,p,1),p=Ji(),b!==null&&(G0(b,1,p),Ss(b,p));break}}b=b.return}}function ase(p,b,v){var k=p.pingCache;k!==null&&k.delete(b),b=Ji(),p.pingedLanes|=p.suspendedLanes&v,Yr===p&&(mi&v)===v&&(Br===4||Br===3&&(mi&130023424)===mi&&500>Kn()-Wv?nu(p,0):Vv|=v),Ss(p,b)}function F_(p,b){b===0&&(p.mode&1?(b=p1,p1<<=1,!(p1&130023424)&&(p1=4194304)):b=1);var v=Ji();p=Ac(p,b),p!==null&&(G0(p,b,v),Ss(p,v))}function lse(p){var b=p.memoizedState,v=0;b!==null&&(v=b.retryLane),F_(p,v)}function cse(p,b){var v=0;switch(p.tag){case 13:var k=p.stateNode,N=p.memoizedState;N!==null&&(v=N.retryLane);break;case 19:k=p.stateNode;break;default:throw Error(n(314))}k!==null&&k.delete(b),F_(p,v)}var $_;$_=function(p,b,v){if(p!==null)if(p.memoizedProps!==b.pendingProps||xs.current)ws=!0;else{if(!(p.lanes&v)&&!(b.flags&128))return ws=!1,Zie(p,b,v);ws=!!(p.flags&131072)}else ws=!1,On&&b.flags&1048576&&xR(b,R8,b.index);switch(b.lanes=0,b.tag){case 2:var k=b.type;X8(p,b),p=b.pendingProps;var N=C1(b,Ii.current);R1(b,v),N=wv(null,b,k,p,N,v);var L=Ev();return b.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,vs(k)?(L=!0,T8(b)):L=!1,b.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,mv(b),N.updater=W8,b.stateNode=N,N._reactInternals=b,Tv(b,k,p,v),b=_v(null,b,k,!0,L,v)):(b.tag=0,On&&L&&sv(b),Qi(null,b,N,v),b=b.child),b;case 16:k=b.elementType;e:{switch(X8(p,b),p=b.pendingProps,N=k._init,k=N(k._payload),b.type=k,N=b.tag=dse(k),p=Ua(k,p),N){case 0:b=Rv(null,b,k,p,v);break e;case 1:b=h_(null,b,k,p,v);break e;case 11:b=l_(null,b,k,p,v);break e;case 14:b=c_(null,b,k,Ua(k.type,p),v);break e}throw Error(n(306,k,""))}return b;case 0:return k=b.type,N=b.pendingProps,N=b.elementType===k?N:Ua(k,N),Rv(p,b,k,N,v);case 1:return k=b.type,N=b.pendingProps,N=b.elementType===k?N:Ua(k,N),h_(p,b,k,N,v);case 3:e:{if(p_(b),p===null)throw Error(n(387));k=b.pendingProps,L=b.memoizedState,N=L.element,TR(p,b),j8(b,k,null,v);var X=b.memoizedState;if(k=X.element,L.isDehydrated)if(L={element:k,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},b.updateQueue.baseState=L,b.memoizedState=L,b.flags&256){N=P1(Error(n(423)),b),b=m_(p,b,k,v,N);break e}else if(k!==N){N=P1(Error(n(424)),b),b=m_(p,b,k,v,N);break e}else for(Js=Jf(b.stateNode.containerInfo.firstChild),Qs=b,On=!0,ba=null,v=AR(b,null,k,v),b.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(T1(),k===N){b=Tc(p,b,v);break e}Qi(p,b,k,v)}b=b.child}return b;case 5:return RR(b),p===null&&lv(b),k=b.type,N=b.pendingProps,L=p!==null?p.memoizedProps:null,X=N.children,Jx(k,N)?X=null:L!==null&&Jx(k,L)&&(b.flags|=32),u_(p,b),Qi(p,b,X,v),b.child;case 6:return p===null&&lv(b),null;case 13:return g_(p,b,v);case 4:return gv(b,b.stateNode.containerInfo),k=b.pendingProps,p===null?b.child=I1(b,null,k,v):Qi(p,b,k,v),b.child;case 11:return k=b.type,N=b.pendingProps,N=b.elementType===k?N:Ua(k,N),l_(p,b,k,N,v);case 7:return Qi(p,b,b.pendingProps,v),b.child;case 8:return Qi(p,b,b.pendingProps.children,v),b.child;case 12:return Qi(p,b,b.pendingProps.children,v),b.child;case 10:e:{if(k=b.type._context,N=b.pendingProps,L=b.memoizedProps,X=N.value,Sn(D8,k._currentValue),k._currentValue=X,L!==null)if(ga(L.value,X)){if(L.children===N.children&&!xs.current){b=Tc(p,b,v);break e}}else for(L=b.child,L!==null&&(L.return=b);L!==null;){var ee=L.dependencies;if(ee!==null){X=L.child;for(var ne=ee.firstContext;ne!==null;){if(ne.context===k){if(L.tag===1){ne=Mc(-1,v&-v),ne.tag=2;var ge=L.updateQueue;if(ge!==null){ge=ge.shared;var Ae=ge.pending;Ae===null?ne.next=ne:(ne.next=Ae.next,Ae.next=ne),ge.pending=ne}}L.lanes|=v,ne=L.alternate,ne!==null&&(ne.lanes|=v),hv(L.return,v,b),ee.lanes|=v;break}ne=ne.next}}else if(L.tag===10)X=L.type===b.type?null:L.child;else if(L.tag===18){if(X=L.return,X===null)throw Error(n(341));X.lanes|=v,ee=X.alternate,ee!==null&&(ee.lanes|=v),hv(X,v,b),X=L.sibling}else X=L.child;if(X!==null)X.return=L;else for(X=L;X!==null;){if(X===b){X=null;break}if(L=X.sibling,L!==null){L.return=X.return,X=L;break}X=X.return}L=X}Qi(p,b,N.children,v),b=b.child}return b;case 9:return N=b.type,k=b.pendingProps.children,R1(b,v),N=ko(N),k=k(N),b.flags|=1,Qi(p,b,k,v),b.child;case 14:return k=b.type,N=Ua(k,b.pendingProps),N=Ua(k.type,N),c_(p,b,k,N,v);case 15:return f_(p,b,b.type,b.pendingProps,v);case 17:return k=b.type,N=b.pendingProps,N=b.elementType===k?N:Ua(k,N),X8(p,b),b.tag=1,vs(k)?(p=!0,T8(b)):p=!1,R1(b,v),t_(b,k,N),Tv(b,k,N,v),_v(null,b,k,!0,p,v);case 19:return U_(p,b,v);case 22:return d_(p,b,v)}throw Error(n(156,b.tag))};function z_(p,b){return s8(p,b)}function fse(p,b,v,k){this.tag=p,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mo(p,b,v,k){return new fse(p,b,v,k)}function Jv(p){return p=p.prototype,!(!p||!p.isReactComponent)}function dse(p){if(typeof p=="function")return Jv(p)?1:0;if(p!=null){if(p=p.$$typeof,p===O)return 11;if(p===$)return 14}return 2}function fd(p,b){var v=p.alternate;return v===null?(v=Mo(p.tag,b,p.key,p.mode),v.elementType=p.elementType,v.type=p.type,v.stateNode=p.stateNode,v.alternate=p,p.alternate=v):(v.pendingProps=b,v.type=p.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=p.flags&14680064,v.childLanes=p.childLanes,v.lanes=p.lanes,v.child=p.child,v.memoizedProps=p.memoizedProps,v.memoizedState=p.memoizedState,v.updateQueue=p.updateQueue,b=p.dependencies,v.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},v.sibling=p.sibling,v.index=p.index,v.ref=p.ref,v}function iU(p,b,v,k,N,L){var X=2;if(k=p,typeof p=="function")Jv(p)&&(X=1);else if(typeof p=="string")X=5;else e:switch(p){case C:return iu(v.children,N,L,b);case T:X=8,N|=8;break;case R:return p=Mo(12,v,b,N|2),p.elementType=R,p.lanes=L,p;case F:return p=Mo(13,v,b,N),p.elementType=F,p.lanes=L,p;case B:return p=Mo(19,v,b,N),p.elementType=B,p.lanes=L,p;case H:return sU(v,N,L,b);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case P:X=10;break e;case _:X=9;break e;case O:X=11;break e;case $:X=14;break e;case z:X=16,k=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return b=Mo(X,v,b,N),b.elementType=p,b.type=k,b.lanes=L,b}function iu(p,b,v,k){return p=Mo(7,p,k,b),p.lanes=v,p}function sU(p,b,v,k){return p=Mo(22,p,k,b),p.elementType=H,p.lanes=v,p.stateNode={isHidden:!1},p}function ew(p,b,v){return p=Mo(6,p,null,b),p.lanes=v,p}function tw(p,b,v){return b=Mo(4,p.children!==null?p.children:[],p.key,b),b.lanes=v,b.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},b}function use(p,b,v,k,N){this.tag=b,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$6(0),this.expirationTimes=$6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$6(0),this.identifierPrefix=k,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function nw(p,b,v,k,N,L,X,ee,ne){return p=new use(p,b,v,ee,ne),b===1?(b=1,L===!0&&(b|=8)):b=0,L=Mo(3,null,null,b),p.current=L,L.stateNode=p,L.memoizedState={element:k,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},mv(L),p}function hse(p,b,v){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:k==null?null:""+k,children:p,containerInfo:b,implementation:v}}function H_(p){if(!p)return td;p=p._reactInternals;e:{if(En(p)!==p||p.tag!==1)throw Error(n(170));var b=p;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if(vs(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(n(171))}if(p.tag===1){var v=p.type;if(vs(v))return bR(p,v,b)}return b}function V_(p,b,v,k,N,L,X,ee,ne){return p=nw(v,k,!0,p,N,L,X,ee,ne),p.context=H_(null),v=p.current,k=Ji(),N=ld(v),L=Mc(k,N),L.callback=b??null,id(v,L,N),p.current.lanes=N,G0(p,N,k),Ss(p,k),p}function oU(p,b,v,k){var N=b.current,L=Ji(),X=ld(N);return v=H_(v),b.context===null?b.context=v:b.pendingContext=v,b=Mc(L,X),b.payload={element:p},k=k===void 0?null:k,k!==null&&(b.callback=k),p=id(N,b,X),p!==null&&(va(p,N,X,L),O8(p,N,X)),X}function aU(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function W_(p,b){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var v=p.retryLane;p.retryLane=v!==0&&v<b?v:b}}function rw(p,b){W_(p,b),(p=p.alternate)&&W_(p,b)}var G_=typeof reportError=="function"?reportError:function(p){console.error(p)};function iw(p){this._internalRoot=p}lU.prototype.render=iw.prototype.render=function(p){var b=this._internalRoot;if(b===null)throw Error(n(409));oU(p,b,null,null)},lU.prototype.unmount=iw.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var b=p.containerInfo;tu(function(){oU(null,p,null,null)}),b[Ec]=null}};function lU(p){this._internalRoot=p}lU.prototype.unstable_scheduleHydration=function(p){if(p){var b=TN();p={blockedOn:null,target:p,priority:b};for(var v=0;v<Zf.length&&b!==0&&b<Zf[v].priority;v++);Zf.splice(v,0,p),v===0&&RN(p)}};function sw(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function cU(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function X_(){}function pse(p,b,v,k,N){if(N){if(typeof k=="function"){var L=k;k=function(){var ge=aU(X);L.call(ge)}}var X=V_(b,k,p,0,null,!1,!1,"",X_);return p._reactRootContainer=X,p[Ec]=X.current,tg(p.nodeType===8?p.parentNode:p),tu(),X}for(;N=p.lastChild;)p.removeChild(N);if(typeof k=="function"){var ee=k;k=function(){var ge=aU(ne);ee.call(ge)}}var ne=nw(p,0,!1,null,null,!1,!1,"",X_);return p._reactRootContainer=ne,p[Ec]=ne.current,tg(p.nodeType===8?p.parentNode:p),tu(function(){oU(b,ne,v,k)}),ne}function fU(p,b,v,k,N){var L=v._reactRootContainer;if(L){var X=L;if(typeof N=="function"){var ee=N;N=function(){var ne=aU(X);ee.call(ne)}}oU(b,X,p,N)}else X=pse(v,b,p,N,k);return aU(X)}AN=function(p){switch(p.tag){case 3:var b=p.stateNode;if(b.current.memoizedState.isDehydrated){var v=gl(b.pendingLanes);v!==0&&(Tx(b,v|1),Ss(b,Kn()),!(Xt&6)&&(O1=Kn()+500,nd()))}break;case 13:tu(function(){var k=Ac(p,1);if(k!==null){var N=Ji();va(k,p,1,N)}}),rw(p,1)}},Ix=function(p){if(p.tag===13){var b=Ac(p,134217728);if(b!==null){var v=Ji();va(b,p,134217728,v)}rw(p,134217728)}},MN=function(p){if(p.tag===13){var b=ld(p),v=Ac(p,b);if(v!==null){var k=Ji();va(v,p,b,k)}rw(p,b)}},TN=function(){return dn},IN=function(p,b){var v=dn;try{return dn=p,b()}finally{dn=v}},da=function(p,b,v){switch(b){case"input":if(Bt(p,v),b=v.name,v.type==="radio"&&b!=null){for(v=p;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<v.length;b++){var k=v[b];if(k!==p&&k.form===p.form){var N=A8(k);if(!N)throw Error(n(90));Se(k),Bt(k,N)}}}break;case"textarea":la(p,v);break;case"select":b=v.value,b!=null&&Ci(p,!!v.multiple,b,!1)}},Ft=Zv,Tn=tu;var mse={usingClientEntryPoint:!1,Events:[ig,S1,A8,nt,Oe,Zv]},Ug={findFiberByHostInstance:X0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gse={bundleType:Ug.bundleType,version:Ug.version,rendererPackageName:Ug.rendererPackageName,rendererConfig:Ug.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=r8(p),p===null?null:p.stateNode},findFiberByHostInstance:Ug.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dU=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dU.isDisabled&&dU.supportsFiber)try{W0=dU.inject(gse),wo=dU}catch{}}return ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mse,ks.createPortal=function(p,b){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sw(b))throw Error(n(200));return hse(p,b,null,v)},ks.createRoot=function(p,b){if(!sw(p))throw Error(n(299));var v=!1,k="",N=G_;return b!=null&&(b.unstable_strictMode===!0&&(v=!0),b.identifierPrefix!==void 0&&(k=b.identifierPrefix),b.onRecoverableError!==void 0&&(N=b.onRecoverableError)),b=nw(p,1,!1,null,null,v,!1,k,N),p[Ec]=b.current,tg(p.nodeType===8?p.parentNode:p),new iw(b)},ks.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var b=p._reactInternals;if(b===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=r8(b),p=p===null?null:p.stateNode,p},ks.flushSync=function(p){return tu(p)},ks.hydrate=function(p,b,v){if(!cU(b))throw Error(n(200));return fU(null,p,b,!0,v)},ks.hydrateRoot=function(p,b,v){if(!sw(p))throw Error(n(405));var k=v!=null&&v.hydratedSources||null,N=!1,L="",X=G_;if(v!=null&&(v.unstable_strictMode===!0&&(N=!0),v.identifierPrefix!==void 0&&(L=v.identifierPrefix),v.onRecoverableError!==void 0&&(X=v.onRecoverableError)),b=V_(b,null,p,1,v??null,N,!1,L,X),p[Ec]=b.current,tg(p),k)for(p=0;p<k.length;p++)v=k[p],N=v._getVersion,N=N(v._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[v,N]:b.mutableSourceEagerHydrationData.push(v,N);return new lU(b)},ks.render=function(p,b,v){if(!cU(b))throw Error(n(200));return fU(null,p,b,!1,v)},ks.unmountComponentAtNode=function(p){if(!cU(p))throw Error(n(40));return p._reactRootContainer?(tu(function(){fU(null,null,p,!1,function(){p._reactRootContainer=null,p[Ec]=null})}),!0):!1},ks.unstable_batchedUpdates=Zv,ks.unstable_renderSubtreeIntoContainer=function(p,b,v,k){if(!cU(v))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return fU(p,b,v,!1,k)},ks.version="18.3.1-next-f1338f8080-20240426",ks}var nP;function nH(){if(nP)return cw.exports;nP=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),cw.exports=Cse(),cw.exports}var rP;function Ase(){if(rP)return uU;rP=1;var e=nH();return uU.createRoot=e.createRoot,uU.hydrateRoot=e.hydrateRoot,uU}var Mse=Ase();const Tse="6.13.1";function Ise(e,t,n){const r=t.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const i=new Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=e,i}async function is(e){const t=Object.keys(e);return(await Promise.all(t.map(r=>Promise.resolve(e[r])))).reduce((r,i,s)=>(r[t[s]]=i,r),{})}function ut(e,t,n){for(let r in t){let i=t[r];const s=n?n[r]:null;s&&Ise(i,s,r),Object.defineProperty(e,r,{enumerable:!0,value:i,writable:!1})}}function pp(e){if(e==null)return"null";if(Array.isArray(e))return"[ "+e.map(pp).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[e[r]&15];return n}if(typeof e=="object"&&typeof e.toJSON=="function")return pp(e.toJSON());switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"number":return e.toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map(n=>`${pp(n)}: ${pp(e[n])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function zi(e,t){return e&&e.code===t}function OA(e){return zi(e,"CALL_EXCEPTION")}function hr(e,t,n){let r=e;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${pp(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+pp(a))}}s.push(`code=${t}`),s.push(`version=${Tse}`),s.length&&(e+=" ("+s.join(", ")+")")}let i;switch(t){case"INVALID_ARGUMENT":i=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(e);break;default:i=new Error(e)}return ut(i,{code:t}),n&&Object.assign(i,n),i.shortMessage==null&&ut(i,{shortMessage:r}),i}function Ee(e,t,n,r){if(!e)throw hr(t,n,r)}function ie(e,t,n,r){Ee(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function rH(e,t,n){n==null&&(n=""),n&&(n=": "+n),Ee(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Ee(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");e.push(t)}catch{}return e},[]);function Ub(e,t,n){if(n==null&&(n=""),e!==t){let r=n,i="new";n&&(r+=".",i+=" "+n),Ee(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function iH(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if(typeof e=="string"&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((e.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(e.substring(i,i+2),16),i+=2;return r}ie(!1,"invalid BytesLike value",t||"value",e)}function Wt(e,t){return iH(e,t,!1)}function ss(e,t){return iH(e,t,!0)}function An(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&e.length!==2+2*t||t===!0&&e.length%2!==0)}function jA(e){return An(e,!0)||e instanceof Uint8Array}const iP="0123456789abcdef";function Ze(e){const t=Wt(e);let n="0x";for(let r=0;r<t.length;r++){const i=t[r];n+=iP[(i&240)>>4]+iP[i&15]}return n}function Er(e){return"0x"+e.map(t=>Ze(t).substring(2)).join("")}function Pp(e){return An(e,!0)?(e.length-2)/2:Wt(e).length}function pr(e,t,n){const r=Wt(e);return n!=null&&n>r.length&&Ee(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Ze(r.slice(t??0,n??r.length))}function sH(e,t,n){const r=Wt(e);Ee(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const i=new Uint8Array(t);return i.fill(0),n?i.set(r,t-r.length):i.set(r,0),Ze(i)}function Ah(e,t){return sH(e,t,!0)}function Nse(e,t){return sH(e,t,!1)}const P9=BigInt(0),ja=BigInt(1),mp=9007199254740991;function y3(e,t){const n=D9(e,"value"),r=BigInt(Rt(t,"width"));if(Ee(n>>r===P9,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-ja){const i=(ja<<r)-ja;return-((~n&i)+ja)}return n}function oH(e,t){let n=et(e,"value");const r=BigInt(Rt(t,"width")),i=ja<<r-ja;if(n<P9){n=-n,Ee(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});const s=(ja<<r)-ja;return(~n&s)+ja}else Ee(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return n}function Tu(e,t){const n=D9(e,"value"),r=BigInt(Rt(t,"bits"));return n&(ja<<r)-ja}function et(e,t){switch(typeof e){case"bigint":return e;case"number":return ie(Number.isInteger(e),"underflow",t||"value",e),ie(e>=-mp&&e<=mp,"overflow",t||"value",e),BigInt(e);case"string":try{if(e==="")throw new Error("empty string");return e[0]==="-"&&e[1]!=="-"?-BigInt(e.substring(1)):BigInt(e)}catch(n){ie(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}ie(!1,"invalid BigNumberish value",t||"value",e)}function D9(e,t){const n=et(e,t);return Ee(n>=P9,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const sP="0123456789abcdef";function L9(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=sP[n>>4],t+=sP[n&15];return BigInt(t)}return et(e)}function Rt(e,t){switch(typeof e){case"bigint":return ie(e>=-mp&&e<=mp,"overflow",t||"value",e),Number(e);case"number":return ie(Number.isInteger(e),"underflow",t||"value",e),ie(e>=-mp&&e<=mp,"overflow",t||"value",e),e;case"string":try{if(e==="")throw new Error("empty string");return Rt(BigInt(e),t)}catch(n){ie(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}ie(!1,"invalid numeric value",t||"value",e)}function Rse(e){return Rt(L9(e))}function S0(e,t){let r=D9(e,"value").toString(16);if(t==null)r.length%2&&(r="0"+r);else{const i=Rt(t,"width");for(Ee(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<i*2;)r="0"+r}return"0x"+r}function as(e){const t=D9(e,"value");if(t===P9)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(n.substring(s,s+2),16)}return r}function gp(e){let t=Ze(jA(e)?e:as(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const oP="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const aP=BigInt(58);function _se(e){const t=Wt(e);let n=L9(t),r="";for(;n;)r=oP[Number(n%aP)]+r,n/=aP;for(let i=0;i<t.length&&!t[i];i++)r=oP[0]+r;return r}function Pse(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return Wt(t)}function Dse(e){const t=Wt(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}var qp;class aH{constructor(t,n,r){ce(this,"filter");ce(this,"emitter");be(this,qp);J(this,qp,n),ut(this,{emitter:t,filter:r})}async removeListener(){W(this,qp)!=null&&await this.emitter.off(this.filter,W(this,qp))}}qp=new WeakMap;function Lse(e,t,n,r,i){ie(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)}function lH(e,t,n,r,i){if(e==="BAD_PREFIX"||e==="UNEXPECTED_CONTINUE"){let s=0;for(let o=t+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return e==="OVERRUN"?n.length-t-1:0}function Ose(e,t,n,r,i){return e==="OVERLONG"?(ie(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),lH(e,t,n))}const jse=Object.freeze({error:Lse,ignore:lH,replace:Ose});function Bse(e,t){t==null&&(t=jse.error);const n=Wt(e,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(!(s>>7)){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=t("UNEXPECTED_CONTINUE",i-1,n,r):i+=t("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=t("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let f=0;f<o;f++){let c=n[i];if((c&192)!=128){i+=t("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|c&63,i++}if(l!==null){if(l>1114111){i+=t("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=t("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=t("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function Uf(e,t){ie(typeof e=="string","invalid string value","str",e);let n=[];for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=e.charCodeAt(r);ie(r<e.length&&(s&64512)===56320,"invalid surrogate pair","str",e);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function Fse(e){return e.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function x3(e,t){return Fse(Bse(e,t))}function cH(e){async function t(n,r){Ee(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Ee(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Ee(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=hr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=hr("request cancelled","CANCELLED"),o.abort()});const l={method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal};let f;try{f=await fetch(n.url,l)}catch(h){throw clearTimeout(a),s||h}clearTimeout(a);const c={};f.headers.forEach((h,g)=>{c[g.toLowerCase()]=h});const d=await f.arrayBuffer(),u=d==null?null:new Uint8Array(d);return{statusCode:f.status,statusMessage:f.statusText,headers:c,body:u}}return t}const $se=12,zse=250;let lP=cH();const Hse=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Vse=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let uw=!1;async function fH(e,t){try{const n=e.match(Hse);if(!n)throw new Error("invalid data");return new u0(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Pse(n[3]):Gse(n[3]))}catch{return new u0(599,"BAD REQUEST (invalid data: URI)",{},null,new Ef(e))}}function dH(e){async function t(n,r){try{const i=n.match(Vse);if(!i)throw new Error("invalid link");return new Ef(`${e}${i[2]}`)}catch{return new u0(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ef(n))}}return t}const hU={data:fH,ipfs:dH("https://gateway.ipfs.io/ipfs/")},uH=new WeakMap;var Vu,Fd;class Wse{constructor(t){be(this,Vu);be(this,Fd);J(this,Vu,[]),J(this,Fd,!1),uH.set(t,()=>{if(!W(this,Fd)){J(this,Fd,!0);for(const n of W(this,Vu))setTimeout(()=>{n()},0);J(this,Vu,[])}})}addListener(t){Ee(!W(this,Fd),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),W(this,Vu).push(t)}get cancelled(){return W(this,Fd)}checkSignal(){Ee(!this.cancelled,"cancelled","CANCELLED",{})}}Vu=new WeakMap,Fd=new WeakMap;function pU(e){if(e==null)throw new Error("missing signal; should not happen");return e.checkSignal(),e}var Qp,Jp,Na,qc,em,tm,Qr,io,Qc,Wu,Gu,Xu,Dl,Ra,$d,Ku,Yg;const A9=class A9{constructor(t){be(this,Ku);be(this,Qp);be(this,Jp);be(this,Na);be(this,qc);be(this,em);be(this,tm);be(this,Qr);be(this,io);be(this,Qc);be(this,Wu);be(this,Gu);be(this,Xu);be(this,Dl);be(this,Ra);be(this,$d);J(this,tm,String(t)),J(this,Qp,!1),J(this,Jp,!0),J(this,Na,{}),J(this,qc,""),J(this,em,3e5),J(this,Ra,{slotInterval:zse,maxAttempts:$se}),J(this,$d,null)}get url(){return W(this,tm)}set url(t){J(this,tm,String(t))}get body(){return W(this,Qr)==null?null:new Uint8Array(W(this,Qr))}set body(t){if(t==null)J(this,Qr,void 0),J(this,io,void 0);else if(typeof t=="string")J(this,Qr,Uf(t)),J(this,io,"text/plain");else if(t instanceof Uint8Array)J(this,Qr,t),J(this,io,"application/octet-stream");else if(typeof t=="object")J(this,Qr,Uf(JSON.stringify(t))),J(this,io,"application/json");else throw new Error("invalid body")}hasBody(){return W(this,Qr)!=null}get method(){return W(this,qc)?W(this,qc):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),J(this,qc,String(t).toUpperCase())}get headers(){const t=Object.assign({},W(this,Na));return W(this,Qc)&&(t.authorization=`Basic ${Dse(Uf(W(this,Qc)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&W(this,io)&&(t["content-type"]=W(this,io)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,n){W(this,Na)[String(t).toLowerCase()]=String(n)}clearHeaders(){J(this,Na,{})}[Symbol.iterator](){const t=this.headers,n=Object.keys(t);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return W(this,Qc)||null}setCredentials(t,n){ie(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),J(this,Qc,`${t}:${n}`)}get allowGzip(){return W(this,Jp)}set allowGzip(t){J(this,Jp,!!t)}get allowInsecureAuthentication(){return!!W(this,Qp)}set allowInsecureAuthentication(t){J(this,Qp,!!t)}get timeout(){return W(this,em)}set timeout(t){ie(t>=0,"timeout must be non-zero","timeout",t),J(this,em,t)}get preflightFunc(){return W(this,Wu)||null}set preflightFunc(t){J(this,Wu,t)}get processFunc(){return W(this,Gu)||null}set processFunc(t){J(this,Gu,t)}get retryFunc(){return W(this,Xu)||null}set retryFunc(t){J(this,Xu,t)}get getUrlFunc(){return W(this,$d)||lP}set getUrlFunc(t){J(this,$d,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${W(this,Qr)?Ze(W(this,Qr)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(W(this,Ra).slotInterval=t.slotInterval),t.maxAttempts!=null&&(W(this,Ra).maxAttempts=t.maxAttempts)}send(){return Ee(W(this,Dl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),J(this,Dl,new Wse(this)),Ie(this,Ku,Yg).call(this,0,cP()+this.timeout,0,this,new u0(0,"",{},null,this))}cancel(){Ee(W(this,Dl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=uH.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const n=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();Ee(this.method==="GET"&&(n!=="https"||r!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const i=new A9(t);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,J(i,Na,Object.assign({},W(this,Na))),W(this,Qr)&&J(i,Qr,new Uint8Array(W(this,Qr))),J(i,io,W(this,io)),i}clone(){const t=new A9(this.url);return J(t,qc,W(this,qc)),W(this,Qr)&&J(t,Qr,W(this,Qr)),J(t,io,W(this,io)),J(t,Na,Object.assign({},W(this,Na))),J(t,Qc,W(this,Qc)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),J(t,Wu,W(this,Wu)),J(t,Gu,W(this,Gu)),J(t,Xu,W(this,Xu)),J(t,Ra,Object.assign({},W(this,Ra))),J(t,$d,W(this,$d)),t}static lockConfig(){uw=!0}static getGateway(t){return hU[t.toLowerCase()]||null}static registerGateway(t,n){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(uw)throw new Error("gateways locked");hU[t]=n}static registerGetUrl(t){if(uw)throw new Error("gateways locked");lP=t}static createGetUrlFunc(t){return cH()}static createDataGateway(){return fH}static createIpfsGatewayFunc(t){return dH(t)}};Qp=new WeakMap,Jp=new WeakMap,Na=new WeakMap,qc=new WeakMap,em=new WeakMap,tm=new WeakMap,Qr=new WeakMap,io=new WeakMap,Qc=new WeakMap,Wu=new WeakMap,Gu=new WeakMap,Xu=new WeakMap,Dl=new WeakMap,Ra=new WeakMap,$d=new WeakMap,Ku=new WeakSet,Yg=async function(t,n,r,i,s){var c,d,u;if(t>=W(this,Ra).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Ee(cP()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await Xse(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in hU){const h=await hU[a](o.url,pU(W(i,Dl)));if(h instanceof u0){let g=h;if(this.processFunc){pU(W(i,Dl));try{g=await this.processFunc(o,g)}catch(U){(U.throttle==null||typeof U.stall!="number")&&g.makeServerError("error in post-processing function",U).assertOk()}}return g}o=h}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,pU(W(i,Dl)));let f=new u0(l.statusCode,l.statusMessage,l.headers,l.body,i);if(f.statusCode===301||f.statusCode===302){try{const h=f.headers.location||"";return Ie(c=o.redirect(h),Ku,Yg).call(c,t+1,n,0,i,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,f,t))){const h=f.headers["retry-after"];let g=W(this,Ra).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(g=parseInt(h)),Ie(d=o.clone(),Ku,Yg).call(d,t+1,n,g,i,f)}if(this.processFunc){pU(W(i,Dl));try{f=await this.processFunc(o,f)}catch(h){(h.throttle==null||typeof h.stall!="number")&&f.makeServerError("error in post-processing function",h).assertOk();let g=W(this,Ra).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return h.stall>=0&&(g=h.stall),Ie(u=o.clone(),Ku,Yg).call(u,t+1,n,g,i,f)}}return f};let Ef=A9;var sb,ob,ab,so,nm,Yu;const EN=class EN{constructor(t,n,r,i,s){be(this,sb);be(this,ob);be(this,ab);be(this,so);be(this,nm);be(this,Yu);J(this,sb,t),J(this,ob,n),J(this,ab,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),J(this,so,i==null?null:new Uint8Array(i)),J(this,nm,s||null),J(this,Yu,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${W(this,so)?Ze(W(this,so)):"null"}>`}get statusCode(){return W(this,sb)}get statusMessage(){return W(this,ob)}get headers(){return Object.assign({},W(this,ab))}get body(){return W(this,so)==null?null:new Uint8Array(W(this,so))}get bodyText(){try{return W(this,so)==null?"":x3(W(this,so))}catch{Ee(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Ee(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,n=Object.keys(t);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,n){let r;t?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${t})`);const i=new EN(599,r,this.headers,this.body,W(this,nm)||void 0);return J(i,Yu,{message:t,error:n}),i}throwThrottleError(t,n){n==null?n=-1:ie(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(t||"throttling requests");throw ut(r,{stall:n,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return W(this,so)!=null}get request(){return W(this,nm)}ok(){return W(this,Yu).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:n}=W(this,Yu);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{W(this,so)&&(i=x3(W(this,so)))}catch{}Ee(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};sb=new WeakMap,ob=new WeakMap,ab=new WeakMap,so=new WeakMap,nm=new WeakMap,Yu=new WeakMap;let u0=EN;function cP(){return new Date().getTime()}function Gse(e){return Uf(e.replace(/%([0-9a-f][0-9a-f])/gi,(t,n)=>String.fromCharCode(parseInt(n,16))))}function Xse(e){return new Promise(t=>setTimeout(t,e))}const Kse=BigInt(-1),ka=BigInt(0),bp=BigInt(1),Yse=BigInt(5),B1={};let Dp="0000";for(;Dp.length<80;)Dp+=Dp;function su(e){let t=Dp;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function vg(e,t,n){const r=BigInt(t.width);if(t.signed){const i=bp<<r-bp;Ee(n==null||e>=-i&&e<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e>ka?e=y3(Tu(e,r),r):e=-y3(Tu(-e,r),r)}else{const i=bp<<r;Ee(n==null||e>=0&&e<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%i+i)%i&i-bp}return e}function hw(e){typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,n=128,r=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ie(s,"invalid fixed format","format",e),t=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(e){const s=e,o=(a,l,f)=>s[a]==null?f:(ie(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);t=o("signed","boolean",t),n=o("width","number",n),r=o("decimals","number",r)}ie(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),ie(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(t?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:t,width:n,decimals:r,name:i}}function Zse(e,t){let n="";e<ka&&(n="-",e*=Kse);let r=e.toString();if(t===0)return n+r;for(;r.length<=t;)r=Dp+r;const i=r.length-t;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var _a,hn,ts,ln,uu,Bc,BS,FS,$S,zS;const Pd=class Pd{constructor(t,n,r){be(this,ln);ce(this,"format");be(this,_a);be(this,hn);be(this,ts);ce(this,"_value");Ub(t,B1,"FixedNumber"),J(this,hn,n),J(this,_a,r);const i=Zse(n,r.decimals);ut(this,{format:r.name,_value:i}),J(this,ts,su(r.decimals))}get signed(){return W(this,_a).signed}get width(){return W(this,_a).width}get decimals(){return W(this,_a).decimals}get value(){return W(this,hn)}addUnsafe(t){return Ie(this,ln,BS).call(this,t)}add(t){return Ie(this,ln,BS).call(this,t,"add")}subUnsafe(t){return Ie(this,ln,FS).call(this,t)}sub(t){return Ie(this,ln,FS).call(this,t,"sub")}mulUnsafe(t){return Ie(this,ln,$S).call(this,t)}mul(t){return Ie(this,ln,$S).call(this,t,"mul")}mulSignal(t){Ie(this,ln,uu).call(this,t);const n=W(this,hn)*W(t,hn);return Ee(n%W(this,ts)===ka,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Ie(this,ln,Bc).call(this,n/W(this,ts),"mulSignal")}divUnsafe(t){return Ie(this,ln,zS).call(this,t)}div(t){return Ie(this,ln,zS).call(this,t,"div")}divSignal(t){Ee(W(t,hn)!==ka,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ie(this,ln,uu).call(this,t);const n=W(this,hn)*W(this,ts);return Ee(n%W(t,hn)===ka,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Ie(this,ln,Bc).call(this,n/W(t,hn),"divSignal")}cmp(t){let n=this.value,r=t.value;const i=this.decimals-t.decimals;return i>0?r*=su(i):i<0&&(n*=su(-i)),n<r?-1:n>r?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=W(this,hn);return W(this,hn)<ka&&(t-=W(this,ts)-bp),t=W(this,hn)/W(this,ts)*W(this,ts),Ie(this,ln,Bc).call(this,t,"floor")}ceiling(){let t=W(this,hn);return W(this,hn)>ka&&(t+=W(this,ts)-bp),t=W(this,hn)/W(this,ts)*W(this,ts),Ie(this,ln,Bc).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const n=this.decimals-t,r=Yse*su(n-1);let i=this.value+r;const s=su(n);return i=i/s*s,vg(i,W(this,_a),"round"),new Pd(B1,i,W(this,_a))}isZero(){return W(this,hn)===ka}isNegative(){return W(this,hn)<ka}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Pd.fromString(this.toString(),t)}static fromValue(t,n,r){const i=n==null?0:Rt(n),s=hw(r);let o=et(t,"value");const a=i-s.decimals;if(a>0){const l=su(a);Ee(o%l===ka,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=l}else a<0&&(o*=su(-a));return vg(o,s,"fromValue"),new Pd(B1,o,s)}static fromString(t,n){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ie(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const i=hw(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=Dp;Ee(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return vg(a,i,"fromString"),new Pd(B1,a,i)}static fromBytes(t,n){let r=L9(Wt(t,"value"));const i=hw(n);return i.signed&&(r=y3(r,i.width)),vg(r,i,"fromBytes"),new Pd(B1,r,i)}};_a=new WeakMap,hn=new WeakMap,ts=new WeakMap,ln=new WeakSet,uu=function(t){ie(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},Bc=function(t,n){return t=vg(t,W(this,_a),n),new Pd(B1,t,W(this,_a))},BS=function(t,n){return Ie(this,ln,uu).call(this,t),Ie(this,ln,Bc).call(this,W(this,hn)+W(t,hn),n)},FS=function(t,n){return Ie(this,ln,uu).call(this,t),Ie(this,ln,Bc).call(this,W(this,hn)-W(t,hn),n)},$S=function(t,n){return Ie(this,ln,uu).call(this,t),Ie(this,ln,Bc).call(this,W(this,hn)*W(t,hn)/W(this,ts),n)},zS=function(t,n){return Ee(W(t,hn)!==ka,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ie(this,ln,uu).call(this,t),Ie(this,ln,Bc).call(this,W(this,hn)*W(this,ts)/W(t,hn),n)};let v3=Pd;function qse(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function fP(e,t,n){let r=0;for(let i=0;i<n;i++)r=r*256+e[t+i];return r}function dP(e,t,n,r){const i=[];for(;n<t+1+r;){const s=hH(e,n);i.push(s.result),n+=s.consumed,Ee(n<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:i}}function hH(e,t){Ee(e.length!==0,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=r=>{Ee(r<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:r})};if(e[t]>=248){const r=e[t]-247;n(t+1+r);const i=fP(e,t+1,r);return n(t+1+r+i),dP(e,t,t+1+r,r+i)}else if(e[t]>=192){const r=e[t]-192;return n(t+1+r),dP(e,t,t+1,r)}else if(e[t]>=184){const r=e[t]-183;n(t+1+r);const i=fP(e,t+1,r);n(t+1+r+i);const s=Ze(e.slice(t+1+r,t+1+r+i));return{consumed:1+r+i,result:s}}else if(e[t]>=128){const r=e[t]-128;n(t+1+r);const i=Ze(e.slice(t+1,t+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:qse(e[t])}}function O9(e){const t=Wt(e,"data"),n=hH(t,0);return ie(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function uP(e){const t=[];for(;e;)t.unshift(e&255),e>>=8;return t}function pH(e){if(Array.isArray(e)){let r=[];if(e.forEach(function(s){r=r.concat(pH(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=uP(r.length);return i.unshift(247+i.length),i.concat(r)}const t=Array.prototype.slice.call(Wt(e,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=uP(t.length);return n.unshift(183+n.length),n.concat(t)}const hP="0123456789abcdef";function Mh(e){let t="0x";for(const n of pH(e))t+=hP[n>>4],t+=hP[n&15];return t}function Qse(e,t){let n=18;return n=Rt(t,"unit"),v3.fromValue(e,n,{decimals:n,width:512}).toString()}function Jse(e,t){ie(typeof e=="string","value must be a string","value",e);let n=18;return n=Rt(t,"unit"),v3.fromString(e,{decimals:n,width:512}).value}function eoe(e){return Qse(e,18)}function Nc(e){return Jse(e,18)}const ls=32,HS=new Uint8Array(ls),toe=["then"],mU={},mH=new WeakMap;function xu(e){return mH.get(e)}function pP(e,t){mH.set(e,t)}function wg(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}function VS(e,t,n){return e.indexOf(null)>=0?t.map((r,i)=>r instanceof Lm?VS(xu(r),r,n):r):e.reduce((r,i,s)=>{let o=t.getValue(i);return i in r||(n&&o instanceof Lm&&(o=VS(xu(o),o,n)),r[i]=o),r},{})}var rm;const Np=class Np extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==mU&&(i=n,s=[],o=!1);super(i.length);be(this,rm);i.forEach((f,c)=>{this[c]=f});const a=s.reduce((f,c)=>(typeof c=="string"&&f.set(c,(f.get(c)||0)+1),f),new Map);if(pP(this,Object.freeze(i.map((f,c)=>{const d=s[c];return d!=null&&a.get(d)===1?d:null}))),J(this,rm,[]),W(this,rm)==null&&W(this,rm),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(f,c,d)=>{if(typeof c=="string"){if(c.match(/^[0-9]+$/)){const h=Rt(c,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const g=f[h];return g instanceof Error&&wg(`index ${h}`,g),g}if(toe.indexOf(c)>=0)return Reflect.get(f,c,d);const u=f[c];if(u instanceof Function)return function(...h){return u.apply(this===d?f:this,h)};if(!(c in f))return f.getValue.apply(this===d?f:this,[c])}return Reflect.get(f,c,d)}});return pP(l,xu(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&wg(`index ${s}`,i),n&&i instanceof Np&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=xu(this);return r.reduce((i,s,o)=>(Ee(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),VS(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=xu(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Np(mU,s,o)}filter(n,r){const i=xu(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&wg(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Np(mU,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&wg(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=xu(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&wg(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Np(mU,n,r)}};rm=new WeakMap;let Lm=Np;function mP(e){let t=as(e);return Ee(t.length<=ls,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:ls,offset:t.length}),t.length!==ls&&(t=ss(Er([HS.slice(t.length%ls),t]))),t}class jf{constructor(t,n,r,i){ce(this,"name");ce(this,"type");ce(this,"localName");ce(this,"dynamic");ut(this,{name:t,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,n){ie(!1,t,this.localName,n)}}var Jc,Zu,im,vy;class WS{constructor(){be(this,im);be(this,Jc);be(this,Zu);J(this,Jc,[]),J(this,Zu,0)}get data(){return Er(W(this,Jc))}get length(){return W(this,Zu)}appendWriter(t){return Ie(this,im,vy).call(this,ss(t.data))}writeBytes(t){let n=ss(t);const r=n.length%ls;return r&&(n=ss(Er([n,HS.slice(r)]))),Ie(this,im,vy).call(this,n)}writeValue(t){return Ie(this,im,vy).call(this,mP(t))}writeUpdatableValue(){const t=W(this,Jc).length;return W(this,Jc).push(HS),J(this,Zu,W(this,Zu)+ls),n=>{W(this,Jc)[t]=mP(n)}}}Jc=new WeakMap,Zu=new WeakMap,im=new WeakSet,vy=function(t){return W(this,Jc).push(t),J(this,Zu,W(this,Zu)+t.length),t.length};var Is,oo,qu,Qu,zd,r1,XS,gH;const SN=class SN{constructor(t,n,r){be(this,r1);ce(this,"allowLoose");be(this,Is);be(this,oo);be(this,qu);be(this,Qu);be(this,zd);ut(this,{allowLoose:!!n}),J(this,Is,ss(t)),J(this,qu,0),J(this,Qu,null),J(this,zd,r??1024),J(this,oo,0)}get data(){return Ze(W(this,Is))}get dataLength(){return W(this,Is).length}get consumed(){return W(this,oo)}get bytes(){return new Uint8Array(W(this,Is))}subReader(t){const n=new SN(W(this,Is).slice(W(this,oo)+t),this.allowLoose,W(this,zd));return J(n,Qu,this),n}readBytes(t,n){let r=Ie(this,r1,gH).call(this,0,t,!!n);return Ie(this,r1,XS).call(this,t),J(this,oo,W(this,oo)+r.length),r.slice(0,t)}readValue(){return L9(this.readBytes(ls))}readIndex(){return Rse(this.readBytes(ls))}};Is=new WeakMap,oo=new WeakMap,qu=new WeakMap,Qu=new WeakMap,zd=new WeakMap,r1=new WeakSet,XS=function(t){var n;if(W(this,Qu))return Ie(n=W(this,Qu),r1,XS).call(n,t);J(this,qu,W(this,qu)+t),Ee(W(this,zd)<1||W(this,qu)<=W(this,zd)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${W(this,zd)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:ss(W(this,Is)),offset:W(this,oo),length:t,info:{bytesRead:W(this,qu),dataLength:this.dataLength}})},gH=function(t,n,r){let i=Math.ceil(n/ls)*ls;return W(this,oo)+i>W(this,Is).length&&(this.allowLoose&&r&&W(this,oo)+n<=W(this,Is).length?i=n:Ee(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ss(W(this,Is)),length:W(this,Is).length,offset:W(this,oo)+i})),W(this,Is).slice(W(this,oo),W(this,oo)+i)};let GS=SN;function w3(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function BA(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function noe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");w3(e.outputLen),w3(e.blockLen)}function Om(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function bH(e,t){BA(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const pw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const UH=e=>e instanceof Uint8Array,roe=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),mw=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),vl=(e,t)=>e<<32-t|e>>>t,ioe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ioe)throw new Error("Non little-endian hardware is not supported");function soe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function j9(e){if(typeof e=="string"&&(e=soe(e)),!UH(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function ooe(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!UH(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class FA{clone(){return this._cloneInto()}}function $A(e){const t=r=>e().update(j9(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function aoe(e=32){if(pw&&typeof pw.getRandomValues=="function")return pw.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class yH extends FA{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,noe(t);const r=j9(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Om(this),this.iHash.update(t),this}digestInto(t){Om(this),BA(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const xH=(e,t,n)=>new yH(e,t).update(n).digest();xH.create=(e,t)=>new yH(e,t);function loe(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,f=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+f,a,r)}class vH extends FA{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=mw(this.buffer)}update(t){Om(this);const{view:n,buffer:r,blockLen:i}=this;t=j9(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=mw(t);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Om(this),bH(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;loe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=mw(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=l/4,c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)a.setUint32(4*d,c[d],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}}const coe=(e,t,n)=>e&t^~e&n,foe=(e,t,n)=>e&t^e&n^t&n,doe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ud=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hd=new Uint32Array(64);class uoe extends vH{constructor(){super(64,32,8,!1),this.A=ud[0]|0,this.B=ud[1]|0,this.C=ud[2]|0,this.D=ud[3]|0,this.E=ud[4]|0,this.F=ud[5]|0,this.G=ud[6]|0,this.H=ud[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[t,n,r,i,s,o,a,l]}set(t,n,r,i,s,o,a,l){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(t,n){for(let d=0;d<16;d++,n+=4)hd[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const u=hd[d-15],h=hd[d-2],g=vl(u,7)^vl(u,18)^u>>>3,U=vl(h,17)^vl(h,19)^h>>>10;hd[d]=U+hd[d-7]+g+hd[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:f,H:c}=this;for(let d=0;d<64;d++){const u=vl(a,6)^vl(a,11)^vl(a,25),h=c+u+coe(a,l,f)+doe[d]+hd[d]|0,U=(vl(r,2)^vl(r,13)^vl(r,22))+foe(r,i,s)|0;c=f,f=l,l=a,a=o+h|0,o=s,s=i,i=r,r=h+U|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,c=c+this.H|0,this.set(r,i,s,o,a,l,f,c)}roundClean(){hd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const wH=$A(()=>new uoe),gU=BigInt(2**32-1),KS=BigInt(32);function EH(e,t=!1){return t?{h:Number(e&gU),l:Number(e>>KS&gU)}:{h:Number(e>>KS&gU)|0,l:Number(e&gU)|0}}function SH(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=EH(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const hoe=(e,t)=>BigInt(e>>>0)<<KS|BigInt(t>>>0),poe=(e,t,n)=>e>>>n,moe=(e,t,n)=>e<<32-n|t>>>n,goe=(e,t,n)=>e>>>n|t<<32-n,boe=(e,t,n)=>e<<32-n|t>>>n,Uoe=(e,t,n)=>e<<64-n|t>>>n-32,yoe=(e,t,n)=>e>>>n-32|t<<64-n,xoe=(e,t)=>t,voe=(e,t)=>e,kH=(e,t,n)=>e<<n|t>>>32-n,CH=(e,t,n)=>t<<n|e>>>32-n,AH=(e,t,n)=>t<<n-32|e>>>64-n,MH=(e,t,n)=>e<<n-32|t>>>64-n;function woe(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const Eoe=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Soe=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,koe=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Coe=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,Aoe=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Moe=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,Pt={fromBig:EH,split:SH,toBig:hoe,shrSH:poe,shrSL:moe,rotrSH:goe,rotrSL:boe,rotrBH:Uoe,rotrBL:yoe,rotr32H:xoe,rotr32L:voe,rotlSH:kH,rotlSL:CH,rotlBH:AH,rotlBL:MH,add:woe,add3L:Eoe,add3H:Soe,add4L:koe,add4H:Coe,add5H:Moe,add5L:Aoe},[Toe,Ioe]=Pt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),pd=new Uint32Array(80),md=new Uint32Array(80);class Noe extends vH{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:f,El:c,Fh:d,Fl:u,Gh:h,Gl:g,Hh:U,Hl:y}=this;return[t,n,r,i,s,o,a,l,f,c,d,u,h,g,U,y]}set(t,n,r,i,s,o,a,l,f,c,d,u,h,g,U,y){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=f|0,this.El=c|0,this.Fh=d|0,this.Fl=u|0,this.Gh=h|0,this.Gl=g|0,this.Hh=U|0,this.Hl=y|0}process(t,n){for(let E=0;E<16;E++,n+=4)pd[E]=t.getUint32(n),md[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const S=pd[E-15]|0,A=md[E-15]|0,M=Pt.rotrSH(S,A,1)^Pt.rotrSH(S,A,8)^Pt.shrSH(S,A,7),C=Pt.rotrSL(S,A,1)^Pt.rotrSL(S,A,8)^Pt.shrSL(S,A,7),T=pd[E-2]|0,R=md[E-2]|0,P=Pt.rotrSH(T,R,19)^Pt.rotrBH(T,R,61)^Pt.shrSH(T,R,6),_=Pt.rotrSL(T,R,19)^Pt.rotrBL(T,R,61)^Pt.shrSL(T,R,6),O=Pt.add4L(C,_,md[E-7],md[E-16]),F=Pt.add4H(O,M,P,pd[E-7],pd[E-16]);pd[E]=F|0,md[E]=O|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:f,Dl:c,Eh:d,El:u,Fh:h,Fl:g,Gh:U,Gl:y,Hh:x,Hl:w}=this;for(let E=0;E<80;E++){const S=Pt.rotrSH(d,u,14)^Pt.rotrSH(d,u,18)^Pt.rotrBH(d,u,41),A=Pt.rotrSL(d,u,14)^Pt.rotrSL(d,u,18)^Pt.rotrBL(d,u,41),M=d&h^~d&U,C=u&g^~u&y,T=Pt.add5L(w,A,C,Ioe[E],md[E]),R=Pt.add5H(T,x,S,M,Toe[E],pd[E]),P=T|0,_=Pt.rotrSH(r,i,28)^Pt.rotrBH(r,i,34)^Pt.rotrBH(r,i,39),O=Pt.rotrSL(r,i,28)^Pt.rotrBL(r,i,34)^Pt.rotrBL(r,i,39),F=r&s^r&a^s&a,B=i&o^i&l^o&l;x=U|0,w=y|0,U=h|0,y=g|0,h=d|0,g=u|0,{h:d,l:u}=Pt.add(f|0,c|0,R|0,P|0),f=a|0,c=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const $=Pt.add3L(P,O,B);r=Pt.add3H($,R,_,F),i=$|0}({h:r,l:i}=Pt.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Pt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Pt.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:f,l:c}=Pt.add(this.Dh|0,this.Dl|0,f|0,c|0),{h:d,l:u}=Pt.add(this.Eh|0,this.El|0,d|0,u|0),{h,l:g}=Pt.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:U,l:y}=Pt.add(this.Gh|0,this.Gl|0,U|0,y|0),{h:x,l:w}=Pt.add(this.Hh|0,this.Hl|0,x|0,w|0),this.set(r,i,s,o,a,l,f,c,d,u,h,g,U,y,x,w)}roundClean(){pd.fill(0),md.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Roe=$A(()=>new Noe);function _oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const gP=_oe();gP.crypto||gP.msCrypto;function Poe(e){switch(e){case"sha256":return wH.create();case"sha512":return Roe.create()}ie(!1,"invalid hashing algorithm name","algorithm",e)}const[TH,IH,NH]=[[],[],[]],Doe=BigInt(0),Eg=BigInt(1),Loe=BigInt(2),Ooe=BigInt(7),joe=BigInt(256),Boe=BigInt(113);for(let e=0,t=Eg,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],TH.push(2*(5*r+n)),IH.push((e+1)*(e+2)/2%64);let i=Doe;for(let s=0;s<7;s++)t=(t<<Eg^(t>>Ooe)*Boe)%joe,t&Loe&&(i^=Eg<<(Eg<<BigInt(s))-Eg);NH.push(i)}const[Foe,$oe]=SH(NH,!0),bP=(e,t,n)=>n>32?AH(e,t,n):kH(e,t,n),UP=(e,t,n)=>n>32?MH(e,t,n):CH(e,t,n);function zoe(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,f=n[l],c=n[l+1],d=bP(f,c,1)^n[a],u=UP(f,c,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=u}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=IH[o],l=bP(i,s,a),f=UP(i,s,a),c=TH[o];i=e[c],s=e[c+1],e[c]=l,e[c+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=Foe[r],e[1]^=$oe[r]}n.fill(0)}class zA extends FA{constructor(t,n,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,w3(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=roe(this.state)}keccak(){zoe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Om(this);const{blockLen:n,state:r}=this;t=j9(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Om(this,!1),BA(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return w3(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(bH(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new zA(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Hoe=(e,t,n)=>$A(()=>new zA(t,e,n)),Voe=Hoe(1,136,256/8);let RH=!1;const _H=function(e){return Voe(e)};let PH=_H;function Nr(e){const t=Wt(e,"data");return Ze(PH(t))}Nr._=_H;Nr.lock=function(){RH=!0};Nr.register=function(e){if(RH)throw new TypeError("keccak256 is locked");PH=e};Object.freeze(Nr);const DH=function(e){return Poe("sha256").update(e).digest()};let LH=DH,OH=!1;function S6(e){const t=Wt(e,"data");return Ze(LH(t))}S6._=DH;S6.lock=function(){OH=!0};S6.register=function(e){if(OH)throw new Error("sha256 is locked");LH=e};Object.freeze(S6);Object.freeze(S6);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jH=BigInt(0),B9=BigInt(1),Woe=BigInt(2),F9=e=>e instanceof Uint8Array,Goe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function jm(e){if(!F9(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Goe[e[n]];return t}function BH(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function HA(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Bm(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function fh(e){return HA(jm(e))}function VA(e){if(!F9(e))throw new Error("Uint8Array expected");return HA(jm(Uint8Array.from(e).reverse()))}function Fm(e,t){return Bm(e.toString(16).padStart(t*2,"0"))}function WA(e,t){return Fm(e,t).reverse()}function Xoe(e){return Bm(BH(e))}function Ta(e,t,n){let r;if(typeof t=="string")try{r=Bm(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(F9(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function J5(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!F9(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function Koe(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Yoe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Zoe(e){let t;for(t=0;e>jH;e>>=B9,t+=1);return t}function qoe(e,t){return e>>BigInt(t)&B9}const Qoe=(e,t,n)=>e|(n?B9:jH)<<BigInt(t),GA=e=>(Woe<<BigInt(e-1))-B9,gw=e=>new Uint8Array(e),yP=e=>Uint8Array.from(e);function FH(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=gw(e),i=gw(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),l=(d=gw())=>{i=a(yP([0]),d),r=a(),d.length!==0&&(i=a(yP([1]),d),r=a())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const u=[];for(;d<t;){r=a();const h=r.slice();u.push(h),d+=r.length}return J5(...u)};return(d,u)=>{o(),l(d);let h;for(;!(h=u(f()));)l();return o(),h}}const Joe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function yb(e,t,n={}){const r=(i,s,o)=>{const a=Joe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const eae=Object.freeze(Object.defineProperty({__proto__:null,bitGet:qoe,bitLen:Zoe,bitMask:GA,bitSet:Qoe,bytesToHex:jm,bytesToNumberBE:fh,bytesToNumberLE:VA,concatBytes:J5,createHmacDrbg:FH,ensureBytes:Ta,equalBytes:Koe,hexToBytes:Bm,hexToNumber:HA,numberToBytesBE:Fm,numberToBytesLE:WA,numberToHexUnpadded:BH,numberToVarBytesBE:Xoe,utf8ToBytes:Yoe,validateObject:yb},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oi=BigInt(0),vr=BigInt(1),vu=BigInt(2),tae=BigInt(3),YS=BigInt(4),xP=BigInt(5),vP=BigInt(8);BigInt(9);BigInt(16);function _s(e,t){const n=e%t;return n>=oi?n:t+n}function nae(e,t,n){if(n<=oi||t<oi)throw new Error("Expected power/modulo > 0");if(n===vr)return oi;let r=vr;for(;t>oi;)t&vr&&(r=r*e%n),e=e*e%n,t>>=vr;return r}function To(e,t,n){let r=e;for(;t-- >oi;)r*=r,r%=n;return r}function ZS(e,t){if(e===oi||t<=oi)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=_s(e,t),r=t,i=oi,s=vr;for(;n!==oi;){const a=r/n,l=r%n,f=i-s*a;r=n,n=l,i=s,s=f}if(r!==vr)throw new Error("invert: does not exist");return _s(i,t)}function rae(e){const t=(e-vr)/vu;let n,r,i;for(n=e-vr,r=0;n%vu===oi;n/=vu,r++);for(i=vu;i<e&&nae(i,t,e)!==e-vr;i++);if(r===1){const o=(e+vr)/YS;return function(l,f){const c=l.pow(f,o);if(!l.eql(l.sqr(c),f))throw new Error("Cannot find square root");return c}}const s=(n+vr)/vu;return function(a,l){if(a.pow(l,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=r,c=a.pow(a.mul(a.ONE,i),n),d=a.pow(l,s),u=a.pow(l,n);for(;!a.eql(u,a.ONE);){if(a.eql(u,a.ZERO))return a.ZERO;let h=1;for(let U=a.sqr(u);h<f&&!a.eql(U,a.ONE);h++)U=a.sqr(U);const g=a.pow(c,vr<<BigInt(f-h-1));c=a.sqr(g),d=a.mul(d,g),u=a.mul(u,c),f=h}return d}}function iae(e){if(e%YS===tae){const t=(e+vr)/YS;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%vP===xP){const t=(e-xP)/vP;return function(r,i){const s=r.mul(i,vu),o=r.pow(s,t),a=r.mul(i,o),l=r.mul(r.mul(a,vu),o),f=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(f),i))throw new Error("Cannot find square root");return f}}return rae(e)}const sae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oae(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=sae.reduce((r,i)=>(r[i]="function",r),t);return yb(e,n)}function aae(e,t,n){if(n<oi)throw new Error("Expected power > 0");if(n===oi)return e.ONE;if(n===vr)return t;let r=e.ONE,i=t;for(;n>oi;)n&vr&&(r=e.mul(r,i)),i=e.sqr(i),n>>=vr;return r}function lae(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function $H(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function cae(e,t,n=!1,r={}){if(e<=oi)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=$H(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=iae(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:GA(i),ZERO:oi,ONE:vr,create:l=>_s(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return oi<=l&&l<e},is0:l=>l===oi,isOdd:l=>(l&vr)===vr,neg:l=>_s(-l,e),eql:(l,f)=>l===f,sqr:l=>_s(l*l,e),add:(l,f)=>_s(l+f,e),sub:(l,f)=>_s(l-f,e),mul:(l,f)=>_s(l*f,e),pow:(l,f)=>aae(a,l,f),div:(l,f)=>_s(l*ZS(f,e),e),sqrN:l=>l*l,addN:(l,f)=>l+f,subN:(l,f)=>l-f,mulN:(l,f)=>l*f,inv:l=>ZS(l,e),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>lae(a,l),cmov:(l,f,c)=>c?f:l,toBytes:l=>n?WA(l,s):Fm(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?VA(l):fh(l)}});return Object.freeze(a)}function zH(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function HH(e){const t=zH(e);return t+Math.ceil(t/2)}function fae(e,t,n=!1){const r=e.length,i=zH(t),s=HH(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?fh(e):VA(e),a=_s(o,t-vr)+vr;return n?WA(a,i):Fm(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dae=BigInt(0),bw=BigInt(1);function uae(e,t){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>dae;)s&bw&&(o=o.add(a)),a=a.double(),s>>=bw;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let f=i,c=f;for(let d=0;d<o;d++){c=f,l.push(c);for(let u=1;u<a;u++)c=c.add(f),l.push(c);f=c.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let f=e.ZERO,c=e.BASE;const d=BigInt(2**i-1),u=2**i,h=BigInt(i);for(let g=0;g<a;g++){const U=g*l;let y=Number(o&d);o>>=h,y>l&&(y-=u,o+=bw);const x=U,w=U+Math.abs(y)-1,E=g%2!==0,S=y<0;y===0?c=c.add(n(E,s[x])):f=f.add(n(S,s[w]))}return{p:f,f:c}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let f=s.get(i);return f||(f=this.precomputeWindow(i,l),l!==1&&s.set(i,a(f))),this.wNAF(l,f,o)}}}function VH(e){return oae(e.Fp),yb(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$H(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hae(e){const t=VH(e);yb(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:pae,hexToBytes:mae}=eae,Iu={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Iu;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:pae(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Iu,n=typeof e=="string"?mae(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Iu._parseInt(n.subarray(2)),{d:o,l:a}=Iu._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,n=f=>{const c=f.toString(16);return c.length&1?`0${c}`:c},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},ff=BigInt(0),$o=BigInt(1);BigInt(2);const wP=BigInt(3);BigInt(4);function gae(e){const t=hae(e),{Fp:n}=t,r=t.toBytes||((g,U,y)=>{const x=U.toAffine();return J5(Uint8Array.from([4]),n.toBytes(x.x),n.toBytes(x.y))}),i=t.fromBytes||(g=>{const U=g.subarray(1),y=n.fromBytes(U.subarray(0,n.BYTES)),x=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:y,y:x}});function s(g){const{a:U,b:y}=t,x=n.sqr(g),w=n.mul(x,g);return n.add(n.add(w,n.mul(g,U)),y)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&ff<g&&g<t.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(g){const{allowedPrivateKeyLengths:U,nByteLength:y,wrapPrivateKey:x,n:w}=t;if(U&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=jm(g)),typeof g!="string"||!U.includes(g.length))throw new Error("Invalid key");g=g.padStart(y*2,"0")}let E;try{E=typeof g=="bigint"?g:fh(Ta("private key",g,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof g}`)}return x&&(E=_s(E,w)),a(E),E}const f=new Map;function c(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(U,y,x){if(this.px=U,this.py=y,this.pz=x,U==null||!n.isValid(U))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(x==null||!n.isValid(x))throw new Error("z required")}static fromAffine(U){const{x:y,y:x}=U||{};if(!U||!n.isValid(y)||!n.isValid(x))throw new Error("invalid affine point");if(U instanceof d)throw new Error("projective point not allowed");const w=E=>n.eql(E,n.ZERO);return w(y)&&w(x)?d.ZERO:new d(y,x,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(U){const y=n.invertBatch(U.map(x=>x.pz));return U.map((x,w)=>x.toAffine(y[w])).map(d.fromAffine)}static fromHex(U){const y=d.fromAffine(i(Ta("pointHex",U)));return y.assertValidity(),y}static fromPrivateKey(U){return d.BASE.multiply(l(U))}_setWindowSize(U){this._WINDOW_SIZE=U,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:U,y}=this.toAffine();if(!n.isValid(U)||!n.isValid(y))throw new Error("bad point: x or y not FE");const x=n.sqr(y),w=s(U);if(!n.eql(x,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:U}=this.toAffine();if(n.isOdd)return!n.isOdd(U);throw new Error("Field doesn't support isOdd")}equals(U){c(U);const{px:y,py:x,pz:w}=this,{px:E,py:S,pz:A}=U,M=n.eql(n.mul(y,A),n.mul(E,w)),C=n.eql(n.mul(x,A),n.mul(S,w));return M&&C}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:U,b:y}=t,x=n.mul(y,wP),{px:w,py:E,pz:S}=this;let A=n.ZERO,M=n.ZERO,C=n.ZERO,T=n.mul(w,w),R=n.mul(E,E),P=n.mul(S,S),_=n.mul(w,E);return _=n.add(_,_),C=n.mul(w,S),C=n.add(C,C),A=n.mul(U,C),M=n.mul(x,P),M=n.add(A,M),A=n.sub(R,M),M=n.add(R,M),M=n.mul(A,M),A=n.mul(_,A),C=n.mul(x,C),P=n.mul(U,P),_=n.sub(T,P),_=n.mul(U,_),_=n.add(_,C),C=n.add(T,T),T=n.add(C,T),T=n.add(T,P),T=n.mul(T,_),M=n.add(M,T),P=n.mul(E,S),P=n.add(P,P),T=n.mul(P,_),A=n.sub(A,T),C=n.mul(P,R),C=n.add(C,C),C=n.add(C,C),new d(A,M,C)}add(U){c(U);const{px:y,py:x,pz:w}=this,{px:E,py:S,pz:A}=U;let M=n.ZERO,C=n.ZERO,T=n.ZERO;const R=t.a,P=n.mul(t.b,wP);let _=n.mul(y,E),O=n.mul(x,S),F=n.mul(w,A),B=n.add(y,x),$=n.add(E,S);B=n.mul(B,$),$=n.add(_,O),B=n.sub(B,$),$=n.add(y,w);let z=n.add(E,A);return $=n.mul($,z),z=n.add(_,F),$=n.sub($,z),z=n.add(x,w),M=n.add(S,A),z=n.mul(z,M),M=n.add(O,F),z=n.sub(z,M),T=n.mul(R,$),M=n.mul(P,F),T=n.add(M,T),M=n.sub(O,T),T=n.add(O,T),C=n.mul(M,T),O=n.add(_,_),O=n.add(O,_),F=n.mul(R,F),$=n.mul(P,$),O=n.add(O,F),F=n.sub(_,F),F=n.mul(R,F),$=n.add($,F),_=n.mul(O,$),C=n.add(C,_),_=n.mul(z,$),M=n.mul(B,M),M=n.sub(M,_),_=n.mul(B,O),T=n.mul(z,T),T=n.add(T,_),new d(M,C,T)}subtract(U){return this.add(U.negate())}is0(){return this.equals(d.ZERO)}wNAF(U){return h.wNAFCached(this,f,U,y=>{const x=n.invertBatch(y.map(w=>w.pz));return y.map((w,E)=>w.toAffine(x[E])).map(d.fromAffine)})}multiplyUnsafe(U){const y=d.ZERO;if(U===ff)return y;if(a(U),U===$o)return this;const{endo:x}=t;if(!x)return h.unsafeLadder(this,U);let{k1neg:w,k1:E,k2neg:S,k2:A}=x.splitScalar(U),M=y,C=y,T=this;for(;E>ff||A>ff;)E&$o&&(M=M.add(T)),A&$o&&(C=C.add(T)),T=T.double(),E>>=$o,A>>=$o;return w&&(M=M.negate()),S&&(C=C.negate()),C=new d(n.mul(C.px,x.beta),C.py,C.pz),M.add(C)}multiply(U){a(U);let y=U,x,w;const{endo:E}=t;if(E){const{k1neg:S,k1:A,k2neg:M,k2:C}=E.splitScalar(y);let{p:T,f:R}=this.wNAF(A),{p:P,f:_}=this.wNAF(C);T=h.constTimeNegate(S,T),P=h.constTimeNegate(M,P),P=new d(n.mul(P.px,E.beta),P.py,P.pz),x=T.add(P),w=R.add(_)}else{const{p:S,f:A}=this.wNAF(y);x=S,w=A}return d.normalizeZ([x,w])[0]}multiplyAndAddUnsafe(U,y,x){const w=d.BASE,E=(A,M)=>M===ff||M===$o||!A.equals(w)?A.multiplyUnsafe(M):A.multiply(M),S=E(this,y).add(E(U,x));return S.is0()?void 0:S}toAffine(U){const{px:y,py:x,pz:w}=this,E=this.is0();U==null&&(U=E?n.ONE:n.inv(w));const S=n.mul(y,U),A=n.mul(x,U),M=n.mul(w,U);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:S,y:A}}isTorsionFree(){const{h:U,isTorsionFree:y}=t;if(U===$o)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:U,clearCofactor:y}=t;return U===$o?this:y?y(d,this):this.multiplyUnsafe(t.h)}toRawBytes(U=!0){return this.assertValidity(),r(d,this,U)}toHex(U=!0){return jm(this.toRawBytes(U))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const u=t.nBitLength,h=uae(d,t.endo?Math.ceil(u/2):u);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function bae(e){const t=VH(e);return yb(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Uae(e){const t=bae(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o($){return ff<$&&$<n.ORDER}function a($){return _s($,r)}function l($){return ZS($,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:u}=gae({...t,toBytes($,z,H){const G=z.toAffine(),V=n.toBytes(G.x),Y=J5;return H?Y(Uint8Array.from([z.hasEvenY()?2:3]),V):Y(Uint8Array.from([4]),V,n.toBytes(G.y))},fromBytes($){const z=$.length,H=$[0],G=$.subarray(1);if(z===i&&(H===2||H===3)){const V=fh(G);if(!o(V))throw new Error("Point is not on curve");const Y=d(V);let K=n.sqrt(Y);const q=(K&$o)===$o;return(H&1)===1!==q&&(K=n.neg(K)),{x:V,y:K}}else if(z===s&&H===4){const V=n.fromBytes(G.subarray(0,n.BYTES)),Y=n.fromBytes(G.subarray(n.BYTES,2*n.BYTES));return{x:V,y:Y}}else throw new Error(`Point of length ${z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=$=>jm(Fm($,t.nByteLength));function g($){const z=r>>$o;return $>z}function U($){return g($)?a(-$):$}const y=($,z,H)=>fh($.slice(z,H));class x{constructor(z,H,G){this.r=z,this.s=H,this.recovery=G,this.assertValidity()}static fromCompact(z){const H=t.nByteLength;return z=Ta("compactSignature",z,H*2),new x(y(z,0,H),y(z,H,2*H))}static fromDER(z){const{r:H,s:G}=Iu.toSig(Ta("DER",z));return new x(H,G)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new x(this.r,this.s,z)}recoverPublicKey(z){const{r:H,s:G,recovery:V}=this,Y=C(Ta("msgHash",z));if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");const K=V===2||V===3?H+t.n:H;if(K>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=V&1?"03":"02",se=f.fromHex(q+h(K)),de=l(K),xe=a(-Y*de),ve=a(G*de),ue=f.BASE.multiplyAndAddUnsafe(se,xe,ve);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Bm(this.toDERHex())}toDERHex(){return Iu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bm(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const w={isValidPrivateKey($){try{return c($),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const $=HH(t.n);return fae(t.randomBytes($),t.n)},precompute($=8,z=f.BASE){return z._setWindowSize($),z.multiply(BigInt(3)),z}};function E($,z=!0){return f.fromPrivateKey($).toRawBytes(z)}function S($){const z=$ instanceof Uint8Array,H=typeof $=="string",G=(z||H)&&$.length;return z?G===i||G===s:H?G===2*i||G===2*s:$ instanceof f}function A($,z,H=!0){if(S($))throw new Error("first arg must be private key");if(!S(z))throw new Error("second arg must be public key");return f.fromHex(z).multiply(c($)).toRawBytes(H)}const M=t.bits2int||function($){const z=fh($),H=$.length*8-t.nBitLength;return H>0?z>>BigInt(H):z},C=t.bits2int_modN||function($){return a(M($))},T=GA(t.nBitLength);function R($){if(typeof $!="bigint")throw new Error("bigint expected");if(!(ff<=$&&$<T))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Fm($,t.nByteLength)}function P($,z,H=_){if(["recovered","canonical"].some(le=>le in H))throw new Error("sign() legacy options not supported");const{hash:G,randomBytes:V}=t;let{lowS:Y,prehash:K,extraEntropy:q}=H;Y==null&&(Y=!0),$=Ta("msgHash",$),K&&($=Ta("prehashed msgHash",G($)));const se=C($),de=c(z),xe=[R(de),R(se)];if(q!=null){const le=q===!0?V(n.BYTES):q;xe.push(Ta("extraEntropy",le))}const ve=J5(...xe),ue=se;function te(le){const he=M(le);if(!u(he))return;const we=l(he),Se=f.BASE.multiply(he).toAffine(),De=a(Se.x);if(De===ff)return;const Ge=a(we*a(ue+De*de));if(Ge===ff)return;let ht=(Se.x===De?0:2)|Number(Se.y&$o),ot=Ge;return Y&&g(Ge)&&(ot=U(Ge),ht^=1),new x(De,ot,ht)}return{seed:ve,k2sig:te}}const _={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};function F($,z,H=_){const{seed:G,k2sig:V}=P($,z,H),Y=t;return FH(Y.hash.outputLen,Y.nByteLength,Y.hmac)(G,V)}f.BASE._setWindowSize(8);function B($,z,H,G=O){var Se;const V=$;if(z=Ta("msgHash",z),H=Ta("publicKey",H),"strict"in G)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:K}=G;let q,se;try{if(typeof V=="string"||V instanceof Uint8Array)try{q=x.fromDER(V)}catch(De){if(!(De instanceof Iu.Err))throw De;q=x.fromCompact(V)}else if(typeof V=="object"&&typeof V.r=="bigint"&&typeof V.s=="bigint"){const{r:De,s:Ge}=V;q=new x(De,Ge)}else throw new Error("PARSE");se=f.fromHex(H)}catch(De){if(De.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&q.hasHighS())return!1;K&&(z=t.hash(z));const{r:de,s:xe}=q,ve=C(z),ue=l(xe),te=a(ve*ue),le=a(de*ue),he=(Se=f.BASE.multiplyAndAddUnsafe(se,te,le))==null?void 0:Se.toAffine();return he?a(he.x)===de:!1}return{CURVE:t,getPublicKey:E,getSharedSecret:A,sign:F,verify:B,ProjectivePoint:f,Signature:x,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yae(e){return{hash:e,hmac:(t,...n)=>xH(e,t,ooe(...n)),randomBytes:aoe}}function xae(e,t){const n=r=>Uae({...e,...yae(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const WH=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),EP=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),vae=BigInt(1),qS=BigInt(2),SP=(e,t)=>(e+t/qS)/t;function wae(e){const t=WH,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),f=e*e*e%t,c=f*f*e%t,d=To(c,n,t)*c%t,u=To(d,n,t)*c%t,h=To(u,qS,t)*f%t,g=To(h,i,t)*h%t,U=To(g,s,t)*g%t,y=To(U,a,t)*U%t,x=To(y,l,t)*y%t,w=To(x,a,t)*U%t,E=To(w,n,t)*c%t,S=To(E,o,t)*g%t,A=To(S,r,t)*f%t,M=To(A,qS,t);if(!QS.eql(QS.sqr(M),e))throw new Error("Cannot find square root");return M}const QS=cae(WH,void 0,void 0,{sqrt:wae}),Ed=xae({a:BigInt(0),b:BigInt(7),Fp:QS,n:EP,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=EP,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-vae*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=SP(s*e,t),l=SP(-r*e,t);let f=_s(e-a*n-l*i,t),c=_s(-a*r-l*s,t);const d=f>o,u=c>o;if(d&&(f=t-f),u&&(c=t-c),f>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:f,k2neg:u,k2:c}}}},wH);BigInt(0);Ed.ProjectivePoint;const e2="0x0000000000000000000000000000000000000000",kP="0x0000000000000000000000000000000000000000000000000000000000000000",CP=BigInt(0),AP=BigInt(1),MP=BigInt(2),TP=BigInt(27),IP=BigInt(28),bU=BigInt(35),F1={};function NP(e){return Ah(as(e),32)}var sm,om,am,Ju;const Ma=class Ma{constructor(t,n,r,i){be(this,sm);be(this,om);be(this,am);be(this,Ju);Ub(t,F1,"Signature"),J(this,sm,n),J(this,om,r),J(this,am,i),J(this,Ju,null)}get r(){return W(this,sm)}set r(t){ie(Pp(t)===32,"invalid r","value",t),J(this,sm,Ze(t))}get s(){return W(this,om)}set s(t){ie(Pp(t)===32,"invalid s","value",t);const n=Ze(t);ie(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),J(this,om,n)}get v(){return W(this,am)}set v(t){const n=Rt(t,"value");ie(n===27||n===28,"invalid v","v",t),J(this,am,n)}get networkV(){return W(this,Ju)}get legacyChainId(){const t=this.networkV;return t==null?null:Ma.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=Wt(this.s);return this.yParity&&(t[0]|=128),Ze(t)}get compactSerialized(){return Er([this.r,this.yParityAndS])}get serialized(){return Er([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Ma(F1,this.r,this.s,this.v);return this.networkV&&J(t,Ju,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const n=et(t,"v");return n==TP||n==IP?CP:(ie(n>=bU,"invalid EIP-155 v","v",t),(n-bU)/MP)}static getChainIdV(t,n){return et(t)*MP+BigInt(35+n-27)}static getNormalizedV(t){const n=et(t);return n===CP||n===TP?27:n===AP||n===IP?28:(ie(n>=bU,"invalid v","v",t),n&AP?27:28)}static from(t){function n(f,c){ie(f,c,"signature",t)}if(t==null)return new Ma(F1,kP,kP,27);if(typeof t=="string"){const f=Wt(t,"signature");if(f.length===64){const c=Ze(f.slice(0,32)),d=f.slice(32,64),u=d[0]&128?28:27;return d[0]&=127,new Ma(F1,c,Ze(d),u)}if(f.length===65){const c=Ze(f.slice(0,32)),d=f.slice(32,64);n((d[0]&128)===0,"non-canonical s");const u=Ma.getNormalizedV(f[64]);return new Ma(F1,c,Ze(d),u)}n(!1,"invalid raw signature length")}if(t instanceof Ma)return t.clone();const r=t.r;n(r!=null,"missing r");const i=NP(r),s=function(f,c){if(f!=null)return NP(f);if(c!=null){n(An(c,32),"invalid yParityAndS");const d=Wt(c);return d[0]&=127,Ze(d)}n(!1,"missing s")}(t.s,t.yParityAndS);n((Wt(s)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(f,c,d){if(f!=null){const u=et(f);return{networkV:u>=bU?u:void 0,v:Ma.getNormalizedV(u)}}if(c!=null)return n(An(c,32),"invalid yParityAndS"),{v:Wt(c)[0]&128?28:27};if(d!=null){switch(Rt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),l=new Ma(F1,i,s,a);return o&&J(l,Ju,o),n(t.yParity==null||Rt(t.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(t.yParityAndS==null||t.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};sm=new WeakMap,om=new WeakMap,am=new WeakMap,Ju=new WeakMap;let tl=Ma;var ef;const Au=class Au{constructor(t){be(this,ef);ie(Pp(t)===32,"invalid private key","privateKey","[REDACTED]"),J(this,ef,Ze(t))}get privateKey(){return W(this,ef)}get publicKey(){return Au.computePublicKey(W(this,ef))}get compressedPublicKey(){return Au.computePublicKey(W(this,ef),!0)}sign(t){ie(Pp(t)===32,"invalid digest length","digest",t);const n=Ed.sign(ss(t),ss(W(this,ef)),{lowS:!0});return tl.from({r:S0(n.r,32),s:S0(n.s,32),v:n.recovery?28:27})}computeSharedSecret(t){const n=Au.computePublicKey(t);return Ze(Ed.getSharedSecret(ss(W(this,ef)),Wt(n),!1))}static computePublicKey(t,n){let r=Wt(t,"key");if(r.length===32){const s=Ed.getPublicKey(r,!!n);return Ze(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Ed.ProjectivePoint.fromHex(r);return Ze(i.toRawBytes(n))}static recoverPublicKey(t,n){ie(Pp(t)===32,"invalid digest length","digest",t);const r=tl.from(n);let i=Ed.Signature.fromCompact(ss(Er([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(ss(t));return ie(s!=null,"invalid signautre for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(t,n,r){const i=Ed.ProjectivePoint.fromHex(Au.computePublicKey(t).substring(2)),s=Ed.ProjectivePoint.fromHex(Au.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};ef=new WeakMap;let t2=Au;const Eae=BigInt(0),Sae=BigInt(36);function RP(e){e=e.toLowerCase();const t=e.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=t[i].charCodeAt(0);const r=Wt(Nr(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(r[i>>1]&15)>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const XA={};for(let e=0;e<10;e++)XA[String(e)]=String(e);for(let e=0;e<26;e++)XA[String.fromCharCode(65+e)]=String(10+e);const _P=15;function kae(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map(r=>XA[r]).join("");for(;t.length>=_P;){let r=t.substring(0,_P);t=parseInt(r,10)%97+t.substring(r.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const Cae=function(){const e={};for(let t=0;t<36;t++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[t];e[n]=BigInt(t)}return e}();function Aae(e){e=e.toLowerCase();let t=Eae;for(let n=0;n<e.length;n++)t=t*Sae+Cae[e[n]];return t}function bn(e){if(ie(typeof e=="string","invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=RP(e);return ie(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ie(e.substring(2,4)===kae(e),"bad icap checksum","address",e);let t=Aae(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return RP("0x"+t)}ie(!1,"invalid address","address",e)}function Mae(e){const t=bn(e.from);let r=et(e.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,bn(pr(Nr(Mh([t,r])),12))}function GH(e){return e&&typeof e.getAddress=="function"}async function Uw(e,t){const n=await t;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ee(typeof e!="string","unconfigured name","UNCONFIGURED_NAME",{value:e}),ie(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),bn(n)}function cs(e,t){if(typeof e=="string")return e.match(/^0x[0-9a-f]{40}$/i)?bn(e):(Ee(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Uw(e,t.resolveName(e)));if(GH(e))return Uw(e,e.getAddress());if(e&&typeof e.then=="function")return Uw(e,e);ie(!1,"unsupported addressable value","target",e)}const zc={};function Ke(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new Wi(zc,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function Jt(e,t){return new Wi(zc,`bytes${t||""}`,e,{size:t})}const PP=Symbol.for("_ethers_typed");var eh;const Gc=class Gc{constructor(t,n,r,i){ce(this,"type");ce(this,"value");be(this,eh);ce(this,"_typedSymbol");i==null&&(i=null),Ub(zc,t,"Typed"),ut(this,{_typedSymbol:PP,type:n,value:r}),J(this,eh,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return W(this,eh)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return W(this,eh)===!0?-1:W(this,eh)===!1?this.value.length:null}static from(t,n){return new Gc(zc,t,n)}static uint8(t){return Ke(t,8)}static uint16(t){return Ke(t,16)}static uint24(t){return Ke(t,24)}static uint32(t){return Ke(t,32)}static uint40(t){return Ke(t,40)}static uint48(t){return Ke(t,48)}static uint56(t){return Ke(t,56)}static uint64(t){return Ke(t,64)}static uint72(t){return Ke(t,72)}static uint80(t){return Ke(t,80)}static uint88(t){return Ke(t,88)}static uint96(t){return Ke(t,96)}static uint104(t){return Ke(t,104)}static uint112(t){return Ke(t,112)}static uint120(t){return Ke(t,120)}static uint128(t){return Ke(t,128)}static uint136(t){return Ke(t,136)}static uint144(t){return Ke(t,144)}static uint152(t){return Ke(t,152)}static uint160(t){return Ke(t,160)}static uint168(t){return Ke(t,168)}static uint176(t){return Ke(t,176)}static uint184(t){return Ke(t,184)}static uint192(t){return Ke(t,192)}static uint200(t){return Ke(t,200)}static uint208(t){return Ke(t,208)}static uint216(t){return Ke(t,216)}static uint224(t){return Ke(t,224)}static uint232(t){return Ke(t,232)}static uint240(t){return Ke(t,240)}static uint248(t){return Ke(t,248)}static uint256(t){return Ke(t,256)}static uint(t){return Ke(t,256)}static int8(t){return Ke(t,-8)}static int16(t){return Ke(t,-16)}static int24(t){return Ke(t,-24)}static int32(t){return Ke(t,-32)}static int40(t){return Ke(t,-40)}static int48(t){return Ke(t,-48)}static int56(t){return Ke(t,-56)}static int64(t){return Ke(t,-64)}static int72(t){return Ke(t,-72)}static int80(t){return Ke(t,-80)}static int88(t){return Ke(t,-88)}static int96(t){return Ke(t,-96)}static int104(t){return Ke(t,-104)}static int112(t){return Ke(t,-112)}static int120(t){return Ke(t,-120)}static int128(t){return Ke(t,-128)}static int136(t){return Ke(t,-136)}static int144(t){return Ke(t,-144)}static int152(t){return Ke(t,-152)}static int160(t){return Ke(t,-160)}static int168(t){return Ke(t,-168)}static int176(t){return Ke(t,-176)}static int184(t){return Ke(t,-184)}static int192(t){return Ke(t,-192)}static int200(t){return Ke(t,-200)}static int208(t){return Ke(t,-208)}static int216(t){return Ke(t,-216)}static int224(t){return Ke(t,-224)}static int232(t){return Ke(t,-232)}static int240(t){return Ke(t,-240)}static int248(t){return Ke(t,-248)}static int256(t){return Ke(t,-256)}static int(t){return Ke(t,-256)}static bytes1(t){return Jt(t,1)}static bytes2(t){return Jt(t,2)}static bytes3(t){return Jt(t,3)}static bytes4(t){return Jt(t,4)}static bytes5(t){return Jt(t,5)}static bytes6(t){return Jt(t,6)}static bytes7(t){return Jt(t,7)}static bytes8(t){return Jt(t,8)}static bytes9(t){return Jt(t,9)}static bytes10(t){return Jt(t,10)}static bytes11(t){return Jt(t,11)}static bytes12(t){return Jt(t,12)}static bytes13(t){return Jt(t,13)}static bytes14(t){return Jt(t,14)}static bytes15(t){return Jt(t,15)}static bytes16(t){return Jt(t,16)}static bytes17(t){return Jt(t,17)}static bytes18(t){return Jt(t,18)}static bytes19(t){return Jt(t,19)}static bytes20(t){return Jt(t,20)}static bytes21(t){return Jt(t,21)}static bytes22(t){return Jt(t,22)}static bytes23(t){return Jt(t,23)}static bytes24(t){return Jt(t,24)}static bytes25(t){return Jt(t,25)}static bytes26(t){return Jt(t,26)}static bytes27(t){return Jt(t,27)}static bytes28(t){return Jt(t,28)}static bytes29(t){return Jt(t,29)}static bytes30(t){return Jt(t,30)}static bytes31(t){return Jt(t,31)}static bytes32(t){return Jt(t,32)}static address(t){return new Gc(zc,"address",t)}static bool(t){return new Gc(zc,"bool",!!t)}static bytes(t){return new Gc(zc,"bytes",t)}static string(t){return new Gc(zc,"string",t)}static array(t,n){throw new Error("not implemented yet")}static tuple(t,n){throw new Error("not implemented yet")}static overrides(t){return new Gc(zc,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===PP}static dereference(t,n){if(Gc.isTyped(t)){if(t.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${t.type}`);return t.value}return t}};eh=new WeakMap;let Wi=Gc;class Tae extends jf{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,n){let r=Wi.dereference(n,"string");try{r=bn(r)}catch(i){return this._throwError(i.message,n)}return t.writeValue(r)}decode(t){return bn(S0(t.readValue(),20))}}class Iae extends jf{constructor(n){super(n.name,n.type,"_",n.dynamic);ce(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function XH(e,t,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=t.map(f=>{const c=f.localName;return Ee(c,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:n}),Ee(!l[c],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:n}),l[c]=!0,n[c]})}else ie(!1,"invalid tuple value","tuple",n);ie(t.length===r.length,"types/value length mismatch","tuple",n);let i=new WS,s=new WS,o=[];t.forEach((l,f)=>{let c=r[f];if(l.dynamic){let d=s.length;l.encode(s,c);let u=i.writeUpdatableValue();o.push(h=>{u(h+d)})}else l.encode(i,c)}),o.forEach(l=>{l(i.length)});let a=e.appendWriter(i);return a+=e.appendWriter(s),a}function KH(e,t){let n=[],r=[],i=e.subReader(0);return t.forEach(s=>{let o=null;if(s.dynamic){let a=e.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(f){if(zi(f,"BUFFER_OVERRUN"))throw f;o=f,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(e)}catch(a){if(zi(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),Lm.fromItems(n,r)}class Nae extends jf{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);ce(this,"coder");ce(this,"length");ut(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=Wi.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),rH(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return XH(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Ee(r*ls<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*ls,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new Iae(this.coder));return KH(n,i)}}class Rae extends jf{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,n){const r=Wi.dereference(n,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class YH extends jf{constructor(t,n){super(t,t,n,!0)}defaultValue(){return"0x"}encode(t,n){n=ss(n);let r=t.writeValue(n.length);return r+=t.writeBytes(n),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class _ae extends YH{constructor(t){super("bytes",t)}decode(t){return Ze(super.decode(t))}}class Pae extends jf{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);ce(this,"size");ut(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=ss(Wi.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return Ze(n.readBytes(this.size))}}const Dae=new Uint8Array([]);class Lae extends jf{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,n){return n!=null&&this._throwError("not null",n),t.writeBytes(Dae)}decode(t){return t.readBytes(0),null}}const Oae=BigInt(0),jae=BigInt(1),Bae=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Fae extends jf{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);ce(this,"size");ce(this,"signed");ut(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=et(Wi.dereference(r,this.type)),s=Tu(Bae,ls*8);if(this.signed){let o=Tu(s,this.size*8-1);(i>o||i<-(o+jae))&&this._throwError("value out-of-bounds",r),i=oH(i,8*ls)}else(i<Oae||i>Tu(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=Tu(n.readValue(),this.size*8);return this.signed&&(r=y3(r,this.size*8)),r}}class $ae extends YH{constructor(t){super("string",t)}defaultValue(){return""}encode(t,n){return super.encode(t,Uf(Wi.dereference(n,"string")))}decode(t){return x3(super.decode(t))}}class UU extends jf{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);ce(this,"coders");ut(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=Wi.dereference(r,"tuple");return XH(n,this.coders,i)}decode(n){return KH(n,this.coders)}}function Th(e){return Nr(Uf(e))}var zae="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const DP=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),LP=4;function Hae(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),i=1,s=[0,1];for(let A=1;A<r;A++)s.push(i+=n());let o=n(),a=t;t+=o;let l=0,f=0;function c(){return l==0&&(f=f<<8|e[t++],l=8),f>>--l&1}const d=31,u=2**d,h=u>>>1,g=h>>1,U=u-1;let y=0;for(let A=0;A<d;A++)y=y<<1|c();let x=[],w=0,E=u;for(;;){let A=Math.floor(((y-w+1)*i-1)/E),M=0,C=r;for(;C-M>1;){let P=M+C>>>1;A<s[P]?C=P:M=P}if(M==0)break;x.push(M);let T=w+Math.floor(E*s[M]/i),R=w+Math.floor(E*s[M+1]/i)-1;for(;!((T^R)&h);)y=y<<1&U|c(),T=T<<1&U,R=R<<1&U|1;for(;T&~R&g;)y=y&h|y<<1&U>>>1|c(),T=T<<1^h,R=(R^h)<<1|h|1;w=T,E=1+R-T}let S=r-4;return x.map(A=>{switch(A-S){case 3:return S+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return S+256+(e[a++]<<8|e[a++]);case 1:return S+e[a++];default:return A-1}})}function Vae(e){let t=0;return()=>e[t++]}function ZH(e){return Vae(Hae(Wae(e)))}function Wae(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>t[i.charCodeAt(0)]=s);let n=e.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|t[e.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function Gae(e){return e&1?~e>>1:e>>1}function Xae(e,t){let n=Array(e);for(let r=0,i=0;r<e;r++)n[r]=i+=Gae(t());return n}function n2(e,t=0){let n=[];for(;;){let r=e(),i=e();if(!i)break;t+=r;for(let s=0;s<i;s++)n.push(t+s);t+=i+1}return n}function qH(e){return r2(()=>{let t=n2(e);if(t.length)return t})}function QH(e){let t=[];for(;;){let n=e();if(n==0)break;t.push(Kae(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(Yae(n,e))}return t.flat()}function r2(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function JH(e,t,n){let r=Array(e).fill().map(()=>[]);for(let i=0;i<t;i++)Xae(e,n).forEach((s,o)=>r[o].push(s));return r}function Kae(e,t){let n=1+t(),r=t(),i=r2(t);return JH(i.length,1+e,t).flatMap((o,a)=>{let[l,...f]=o;return Array(i[a]).fill().map((c,d)=>{let u=d*r;return[l+d*n,f.map(h=>h+u)]})})}function Yae(e,t){let n=1+t();return JH(n,1+e,t).map(i=>[i[0],i.slice(1)])}function Zae(e){let t=[],n=n2(e);return i(r([]),[]),t;function r(s){let o=e(),a=r2(()=>{let l=n2(e).map(f=>n[f]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&t.push(a);for(let f of o)for(let c of f.Q)i(f,[...a,c],l)}}}function qae(e){return e.toString(16).toUpperCase().padStart(2,"0")}function eV(e){return`{${qae(e)}}`}function Qae(e){let t=[];for(let n=0,r=e.length;n<r;){let i=e.codePointAt(n);n+=i<65536?1:2,t.push(i)}return t}function $m(e){let n=e.length;if(n<4096)return String.fromCodePoint(...e);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...e.slice(i,i+=4096)));return r.join("")}function Jae(e,t){let n=e.length,r=n-t.length;for(let i=0;r==0&&i<n;i++)r=e[i]-t[i];return r}var ele="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const i2=44032,E3=4352,S3=4449,k3=4519,tV=19,nV=21,zm=28,C3=nV*zm,tle=tV*C3,nle=i2+tle,rle=E3+tV,ile=S3+nV,sle=k3+zm;function Zg(e){return e>>24&255}function rV(e){return e&16777215}let JS,OP,ek,wy;function ole(){let e=ZH(ele);JS=new Map(qH(e).flatMap((t,n)=>t.map(r=>[r,n+1<<24]))),OP=new Set(n2(e)),ek=new Map,wy=new Map;for(let[t,n]of QH(e)){if(!OP.has(t)&&n.length==2){let[r,i]=n,s=wy.get(r);s||(s=new Map,wy.set(r,s)),s.set(i,t)}ek.set(t,n.reverse())}}function iV(e){return e>=i2&&e<nle}function ale(e,t){if(e>=E3&&e<rle&&t>=S3&&t<ile)return i2+(e-E3)*C3+(t-S3)*zm;if(iV(e)&&t>k3&&t<sle&&(e-i2)%zm==0)return e+(t-k3);{let n=wy.get(e);return n&&(n=n.get(t),n)?n:-1}}function sV(e){JS||ole();let t=[],n=[],r=!1;function i(s){let o=JS.get(s);o&&(r=!0,s|=o),t.push(s)}for(let s of e)for(;;){if(s<128)t.push(s);else if(iV(s)){let o=s-i2,a=o/C3|0,l=o%C3/zm|0,f=o%zm;i(E3+a),i(S3+l),f>0&&i(k3+f)}else{let o=ek.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&t.length>1){let s=Zg(t[0]);for(let o=1;o<t.length;o++){let a=Zg(t[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let f=t[l+1];if(t[l+1]=t[l],t[l]=f,!l||(s=Zg(t[--l]),s<=a))break}s=Zg(t[o])}}return t}function lle(e){let t=[],n=[],r=-1,i=0;for(let s of e){let o=Zg(s),a=rV(s);if(r==-1)o==0?r=a:t.push(a);else if(i>0&&i>=o)o==0?(t.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=ale(r,a);l>=0?r=l:i==0&&o==0?(t.push(r),r=a):(n.push(a),i=o)}}return r>=0&&t.push(r,...n),t}function oV(e){return sV(e).map(rV)}function cle(e){return lle(sV(e))}const jP=45,aV=".",lV=65039,cV=1,A3=e=>Array.from(e);function s2(e,t){return e.P.has(t)||e.Q.has(t)}class fle extends Array{get is_emoji(){return!0}}let tk,fV,Nu,nk,dV,Lp,yw,sp,hu,BP,rk;function KA(){if(tk)return;let e=ZH(zae);const t=()=>n2(e),n=()=>new Set(t()),r=(c,d)=>d.forEach(u=>c.add(u));tk=new Map(QH(e)),fV=n(),Nu=t(),nk=new Set(t().map(c=>Nu[c])),Nu=new Set(Nu),dV=n(),n();let i=qH(e),s=e();const o=()=>{let c=new Set;return t().forEach(d=>r(c,i[d])),r(c,t()),c};Lp=r2(c=>{let d=r2(e).map(u=>u+96);if(d.length){let u=c>=s;d[0]-=32,d=$m(d),u&&(d=`Restricted[${d}]`);let h=o(),g=o(),U=!e();return{N:d,P:h,Q:g,M:U,R:u}}}),yw=n(),sp=new Map;let a=t().concat(A3(yw)).sort((c,d)=>c-d);a.forEach((c,d)=>{let u=e(),h=a[d]=u?a[d-u]:{V:[],M:new Map};h.V.push(c),yw.has(c)||sp.set(c,h)});for(let{V:c,M:d}of new Set(sp.values())){let u=[];for(let g of c){let U=Lp.filter(x=>s2(x,g)),y=u.find(({G:x})=>U.some(w=>x.has(w)));y||(y={G:new Set,V:[]},u.push(y)),y.V.push(g),r(y.G,U)}let h=u.flatMap(g=>A3(g.G));for(let{G:g,V:U}of u){let y=new Set(h.filter(x=>!g.has(x)));for(let x of U)d.set(x,y)}}hu=new Set;let l=new Set;const f=c=>hu.has(c)?l.add(c):hu.add(c);for(let c of Lp){for(let d of c.P)f(d);for(let d of c.Q)f(d)}for(let c of hu)!sp.has(c)&&!l.has(c)&&sp.set(c,cV);r(hu,oV(hu)),BP=Zae(e).map(c=>fle.from(c)).sort(Jae),rk=new Map;for(let c of BP){let d=[rk];for(let u of c){let h=d.map(g=>{let U=g.get(u);return U||(U=new Map,g.set(u,U)),U});u===lV?d.push(...h):d=h}for(let u of d)u.V=c}}function YA(e){return(uV(e)?"":`${ZA($9([e]))} `)+eV(e)}function ZA(e){return`"${e}"`}function dle(e){if(e.length>=4&&e[2]==jP&&e[3]==jP)throw new Error(`invalid label extension: "${$m(e.slice(0,4))}"`)}function ule(e){for(let n=e.lastIndexOf(95);n>0;)if(e[--n]!==95)throw new Error("underscore allowed only at start")}function hle(e){let t=e[0],n=DP.get(t);if(n)throw x5(`leading ${n}`);let r=e.length,i=-1;for(let s=1;s<r;s++){t=e[s];let o=DP.get(t);if(o){if(i==s)throw x5(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw x5(`trailing ${n}`)}function $9(e,t=1/0,n=eV){let r=[];ple(e[0])&&r.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,s=e.length;for(let o=0;o<s;o++){let a=e[o];uV(a)&&(r.push($m(e.slice(i,o))),r.push(n(a)),i=o+1)}return r.push($m(e.slice(i,s))),r.join("")}function ple(e){return KA(),Nu.has(e)}function uV(e){return KA(),dV.has(e)}function mle(e){return yle(gle(e,cle,wle))}function gle(e,t,n){if(!e)return[];KA();let r=0;return e.split(aV).map(i=>{let s=Qae(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=vle(s,t,n),l=a.length,f;if(!l)throw new Error("empty label");let c=o.output=a.flat();if(ule(c),!(o.emoji=l>1||a[0].is_emoji)&&c.every(u=>u<128))dle(c),f="ASCII";else{let u=a.flatMap(h=>h.is_emoji?[]:h);if(!u.length)f="Emoji";else{if(Nu.has(c[0]))throw x5("leading combining mark");for(let U=1;U<l;U++){let y=a[U];if(!y.is_emoji&&Nu.has(y[0]))throw x5(`emoji + combining mark: "${$m(a[U-1])} + ${$9([y[0]])}"`)}hle(c);let h=A3(new Set(u)),[g]=Ule(h);xle(g,u),ble(g,h),f=g.N}}o.type=f}catch(a){o.error=a}return o})}function ble(e,t){let n,r=[];for(let i of t){let s=sp.get(i);if(s===cV)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):A3(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>s2(i,s)))throw new Error(`whole-script confusable: ${e.N}/${i.N}`)}}function Ule(e){let t=Lp;for(let n of e){let r=t.filter(i=>s2(i,n));if(!r.length)throw Lp.some(i=>s2(i,n))?pV(t[0],n):hV(n);if(t=r,r.length==1)break}return t}function yle(e){return e.map(({input:t,error:n,output:r})=>{if(n){let i=n.message;throw new Error(e.length==1?i:`Invalid label ${ZA($9(t,63))}: ${i}`)}return $m(r)}).join(aV)}function hV(e){return new Error(`disallowed character: ${YA(e)}`)}function pV(e,t){let n=YA(t),r=Lp.find(i=>i.P.has(t));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function x5(e){return new Error(`illegal placement: ${e}`)}function xle(e,t){for(let n of t)if(!s2(e,n))throw pV(e,n);if(e.M){let n=oV(t);for(let r=1,i=n.length;r<i;r++)if(nk.has(n[r])){let s=r+1;for(let o;s<i&&nk.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${YA(o)}`);if(s-r>LP)throw new Error(`excessive non-spacing marks: ${ZA($9(n.slice(r-1,s)))} (${s-r}/${LP})`);r=s}}}function vle(e,t,n){let r=[],i=[];for(e=e.slice().reverse();e.length;){let s=Ele(e);if(s)i.length&&(r.push(t(i)),i=[]),r.push(n(s));else{let o=e.pop();if(hu.has(o))i.push(o);else{let a=tk.get(o);if(a)i.push(...a);else if(!fV.has(o))throw hV(o)}}}return i.length&&r.push(t(i)),r}function wle(e){return e.filter(t=>t!=lV)}function Ele(e,t){let n=rk,r,i=e.length;for(;i&&(n=n.get(e[--i]),!!n);){let{V:s}=n;s&&(r=s,e.length=i)}return r}const mV=new Uint8Array(32);mV.fill(0);function FP(e){return ie(e.length!==0,"invalid ENS name; empty component","comp",e),e}function gV(e){const t=Uf(Sle(e)),n=[];if(e.length===0)return n;let r=0;for(let i=0;i<t.length;i++)t[i]===46&&(n.push(FP(t.slice(r,i))),r=i+1);return ie(r<t.length,"invalid ENS name; empty component","name",e),n.push(FP(t.slice(r))),n}function Sle(e){try{if(e.length===0)throw new Error("empty label");return mle(e)}catch(t){ie(!1,`invalid ENS name (${t.message})`,"name",e)}}function ik(e){ie(typeof e=="string","invalid ENS name; not a string","name",e),ie(e.length,"invalid ENS name (empty label)","name",e);let t=mV;const n=gV(e);for(;n.length;)t=Nr(Er([t,Nr(n.pop())]));return Ze(t)}function kle(e,t){const n=t;return ie(n<=255,"DNS encoded label cannot exceed 255","length",n),Ze(Er(gV(e).map(r=>{ie(r.length<=n,`label ${JSON.stringify(e)} exceeds ${n} bytes`,"name",e);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function xw(e,t){return{address:bn(e),storageKeys:t.map((n,r)=>(ie(An(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function i1(e){if(Array.isArray(e))return e.map((n,r)=>Array.isArray(n)?(ie(n.length===2,"invalid slot set",`value[${r}]`,n),xw(n[0],n[1])):(ie(n!=null&&typeof n=="object","invalid address-slot set","value",e),xw(n.address,n.storageKeys)));ie(e!=null&&typeof e=="object","invalid access list","value",e);const t=Object.keys(e).map(n=>{const r=e[n].reduce((i,s)=>(i[s]=!0,i),{});return xw(n,Object.keys(r).sort())});return t.sort((n,r)=>n.address.localeCompare(r.address)),t}function Cle(e){let t;return typeof e=="string"?t=t2.computePublicKey(e,!1):t=e.publicKey,bn(Nr("0x"+t.substring(4)).substring(26))}function Ale(e,t){return Cle(t2.recoverPublicKey(e,t))}const ni=BigInt(0),Mle=BigInt(2),Tle=BigInt(27),Ile=BigInt(28),Nle=BigInt(35),Rle=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),vw=4096*32;function $P(e,t){let n=e.toString(16);for(;n.length<2;)n="0"+n;return n+=S6(t).substring(4),"0x"+n}function z9(e){return e==="0x"?null:bn(e)}function qA(e,t){try{return i1(e)}catch(n){ie(!1,n.message,t,e)}}function xb(e,t){return e==="0x"?0:Rt(e,t)}function wr(e,t){if(e==="0x")return ni;const n=et(e,t);return ie(n<=Rle,"value exceeds uint size",t,n),n}function Pn(e,t){const n=et(e,"value"),r=as(n);return ie(r.length<=32,"value too large",`tx.${t}`,n),r}function QA(e){return i1(e).map(t=>[t.address,t.storageKeys])}function _le(e,t){ie(Array.isArray(e),`invalid ${t}`,"value",e);for(let n=0;n<e.length;n++)ie(An(e[n],32),"invalid ${ param } hash",`value[${n}]`,e[n]);return e}function Ple(e){const t=O9(e);ie(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:xb(t[0],"nonce"),gasPrice:wr(t[1],"gasPrice"),gasLimit:wr(t[2],"gasLimit"),to:z9(t[3]),value:wr(t[4],"value"),data:Ze(t[5]),chainId:ni};if(t.length===6)return n;const r=wr(t[6],"v"),i=wr(t[7],"r"),s=wr(t[8],"s");if(i===ni&&s===ni)n.chainId=r;else{let o=(r-Nle)/Mle;o<ni&&(o=ni),n.chainId=o,ie(o!==ni||r===Tle||r===Ile,"non-canonical legacy v","v",t[6]),n.signature=tl.from({r:Ah(t[7],32),s:Ah(t[8],32),v:r})}return n}function Dle(e,t){const n=[Pn(e.nonce,"nonce"),Pn(e.gasPrice||0,"gasPrice"),Pn(e.gasLimit,"gasLimit"),e.to||"0x",Pn(e.value,"value"),e.data];let r=ni;if(e.chainId!=ni)r=et(e.chainId,"tx.chainId"),ie(!t||t.networkV==null||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const s=e.signature.legacyChainId;s!=null&&(r=s)}if(!t)return r!==ni&&(n.push(as(r)),n.push("0x"),n.push("0x")),Mh(n);let i=BigInt(27+t.yParity);return r!==ni?i=tl.getChainIdV(r,t.v):BigInt(t.v)!==i&&ie(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(as(i)),n.push(as(t.r)),n.push(as(t.s)),Mh(n)}function JA(e,t){let n;try{if(n=xb(t[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{ie(!1,"invalid yParity","yParity",t[0])}const r=Ah(t[1],32),i=Ah(t[2],32),s=tl.from({r,s:i,yParity:n});e.signature=s}function Lle(e){const t=O9(Wt(e).slice(1));ie(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",Ze(e));const n={type:2,chainId:wr(t[0],"chainId"),nonce:xb(t[1],"nonce"),maxPriorityFeePerGas:wr(t[2],"maxPriorityFeePerGas"),maxFeePerGas:wr(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:wr(t[4],"gasLimit"),to:z9(t[5]),value:wr(t[6],"value"),data:Ze(t[7]),accessList:qA(t[8],"accessList")};return t.length===9||JA(n,t.slice(9)),n}function Ole(e,t){const n=[Pn(e.chainId,"chainId"),Pn(e.nonce,"nonce"),Pn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pn(e.maxFeePerGas||0,"maxFeePerGas"),Pn(e.gasLimit,"gasLimit"),e.to||"0x",Pn(e.value,"value"),e.data,QA(e.accessList||[])];return t&&(n.push(Pn(t.yParity,"yParity")),n.push(as(t.r)),n.push(as(t.s))),Er(["0x02",Mh(n)])}function jle(e){const t=O9(Wt(e).slice(1));ie(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",Ze(e));const n={type:1,chainId:wr(t[0],"chainId"),nonce:xb(t[1],"nonce"),gasPrice:wr(t[2],"gasPrice"),gasLimit:wr(t[3],"gasLimit"),to:z9(t[4]),value:wr(t[5],"value"),data:Ze(t[6]),accessList:qA(t[7],"accessList")};return t.length===8||JA(n,t.slice(8)),n}function Ble(e,t){const n=[Pn(e.chainId,"chainId"),Pn(e.nonce,"nonce"),Pn(e.gasPrice||0,"gasPrice"),Pn(e.gasLimit,"gasLimit"),e.to||"0x",Pn(e.value,"value"),e.data,QA(e.accessList||[])];return t&&(n.push(Pn(t.yParity,"recoveryParam")),n.push(as(t.r)),n.push(as(t.s))),Er(["0x01",Mh(n)])}function Fle(e){let t=O9(Wt(e).slice(1)),n="3",r=null;if(t.length===4&&Array.isArray(t[0])){n="3 (network format)";const s=t[1],o=t[2],a=t[3];ie(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),ie(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),ie(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),ie(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),ie(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let l=0;l<t[1].length;l++)r.push({data:s[l],commitment:o[l],proof:a[l]});t=t[0]}ie(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${n}`,"data",Ze(e));const i={type:3,chainId:wr(t[0],"chainId"),nonce:xb(t[1],"nonce"),maxPriorityFeePerGas:wr(t[2],"maxPriorityFeePerGas"),maxFeePerGas:wr(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:wr(t[4],"gasLimit"),to:z9(t[5]),value:wr(t[6],"value"),data:Ze(t[7]),accessList:qA(t[8],"accessList"),maxFeePerBlobGas:wr(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(i.blobs=r),ie(i.to!=null,`invalid address for transaction type: ${n}`,"data",e),ie(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let s=0;s<i.blobVersionedHashes.length;s++)ie(An(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",e);return t.length===11||JA(i,t.slice(11)),i}function $le(e,t,n){const r=[Pn(e.chainId,"chainId"),Pn(e.nonce,"nonce"),Pn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pn(e.maxFeePerGas||0,"maxFeePerGas"),Pn(e.gasLimit,"gasLimit"),e.to||e2,Pn(e.value,"value"),e.data,QA(e.accessList||[]),Pn(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),_le(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(Pn(t.yParity,"yParity")),r.push(as(t.r)),r.push(as(t.s)),n)?Er(["0x03",Mh([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):Er(["0x03",Mh(r)])}var Ll,lm,cm,fm,dm,um,hm,pm,mm,gm,bm,Um,th,Hd,tf,Vd,ym,Ey,Wo;let bV=(Wo=class{constructor(){be(this,ym);be(this,Ll);be(this,lm);be(this,cm);be(this,fm);be(this,dm);be(this,um);be(this,hm);be(this,pm);be(this,mm);be(this,gm);be(this,bm);be(this,Um);be(this,th);be(this,Hd);be(this,tf);be(this,Vd);J(this,Ll,null),J(this,lm,null),J(this,fm,0),J(this,dm,ni),J(this,um,null),J(this,hm,null),J(this,pm,null),J(this,cm,"0x"),J(this,mm,ni),J(this,gm,ni),J(this,bm,null),J(this,Um,null),J(this,th,null),J(this,Hd,null),J(this,Vd,null),J(this,tf,null)}get type(){return W(this,Ll)}set type(t){switch(t){case null:J(this,Ll,null);break;case 0:case"legacy":J(this,Ll,0);break;case 1:case"berlin":case"eip-2930":J(this,Ll,1);break;case 2:case"london":case"eip-1559":J(this,Ll,2);break;case 3:case"cancun":case"eip-4844":J(this,Ll,3);break;default:ie(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const t=W(this,lm);return t==null&&this.type===3?e2:t}set to(t){J(this,lm,t==null?null:bn(t))}get nonce(){return W(this,fm)}set nonce(t){J(this,fm,Rt(t,"value"))}get gasLimit(){return W(this,dm)}set gasLimit(t){J(this,dm,et(t))}get gasPrice(){const t=W(this,um);return t==null&&(this.type===0||this.type===1)?ni:t}set gasPrice(t){J(this,um,t==null?null:et(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=W(this,hm);return t??(this.type===2||this.type===3?ni:null)}set maxPriorityFeePerGas(t){J(this,hm,t==null?null:et(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=W(this,pm);return t??(this.type===2||this.type===3?ni:null)}set maxFeePerGas(t){J(this,pm,t==null?null:et(t,"maxFeePerGas"))}get data(){return W(this,cm)}set data(t){J(this,cm,Ze(t))}get value(){return W(this,mm)}set value(t){J(this,mm,et(t,"value"))}get chainId(){return W(this,gm)}set chainId(t){J(this,gm,et(t))}get signature(){return W(this,bm)||null}set signature(t){J(this,bm,t==null?null:tl.from(t))}get accessList(){const t=W(this,Um)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){J(this,Um,t==null?null:i1(t))}get maxFeePerBlobGas(){const t=W(this,th);return t==null&&this.type===3?ni:t}set maxFeePerBlobGas(t){J(this,th,t==null?null:et(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=W(this,Hd);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){ie(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let n=0;n<t.length;n++)ie(An(t[n],32),"invalid blobVersionedHash",`value[${n}]`,t[n])}J(this,Hd,t)}get blobs(){return W(this,Vd)==null?null:W(this,Vd).map(t=>Object.assign({},t))}set blobs(t){if(t==null){J(this,Vd,null);return}const n=[],r=[];for(let i=0;i<t.length;i++){const s=t[i];if(jA(s)){Ee(W(this,tf),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Wt(s);if(ie(o.length<=vw,"blob is too large",`blobs[${i}]`,s),o.length!==vw){const f=new Uint8Array(vw);f.set(o),o=f}const a=W(this,tf).blobToKzgCommitment(o),l=Ze(W(this,tf).computeBlobKzgProof(o,a));n.push({data:Ze(o),commitment:Ze(a),proof:l}),r.push($P(1,a))}else{const o=Ze(s.commitment);n.push({data:Ze(s.data),commitment:o,proof:Ze(s.proof)}),r.push($P(1,o))}}J(this,Vd,n),J(this,Hd,r)}get kzg(){return W(this,tf)}set kzg(t){J(this,tf,t)}get hash(){return this.signature==null?null:Nr(Ie(this,ym,Ey).call(this,!0,!1))}get unsignedHash(){return Nr(this.unsignedSerialized)}get from(){return this.signature==null?null:Ale(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:t2.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Ie(this,ym,Ey).call(this,!0,!0)}get unsignedSerialized(){return Ie(this,ym,Ey).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=W(this,th)!=null||W(this,Hd);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ee(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ee(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ee(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):n?s.push(2):t?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Wo.from(this)}toJSON(){const t=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new Wo;if(typeof t=="string"){const r=Wt(t);if(r[0]>=127)return Wo.from(Ple(r));switch(r[0]){case 1:return Wo.from(jle(r));case 2:return Wo.from(Lle(r));case 3:return Wo.from(Fle(r))}Ee(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Wo;return t.type!=null&&(n.type=t.type),t.to!=null&&(n.to=t.to),t.nonce!=null&&(n.nonce=t.nonce),t.gasLimit!=null&&(n.gasLimit=t.gasLimit),t.gasPrice!=null&&(n.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(n.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(n.data=t.data),t.value!=null&&(n.value=t.value),t.chainId!=null&&(n.chainId=t.chainId),t.signature!=null&&(n.signature=tl.from(t.signature)),t.accessList!=null&&(n.accessList=t.accessList),t.blobVersionedHashes!=null&&(n.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(n.kzg=t.kzg),t.blobs!=null&&(n.blobs=t.blobs),t.hash!=null&&(ie(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),ie(n.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(ie(n.isSigned(),"unsigned transaction cannot define '.from'","tx",t),ie(n.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),n}},Ll=new WeakMap,lm=new WeakMap,cm=new WeakMap,fm=new WeakMap,dm=new WeakMap,um=new WeakMap,hm=new WeakMap,pm=new WeakMap,mm=new WeakMap,gm=new WeakMap,bm=new WeakMap,Um=new WeakMap,th=new WeakMap,Hd=new WeakMap,tf=new WeakMap,Vd=new WeakMap,ym=new WeakSet,Ey=function(t,n){Ee(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=t?this.signature:null;switch(this.inferType()){case 0:return Dle(this,r);case 1:return Ble(this,r);case 2:return Ole(this,r);case 3:return $le(this,r,n?this.blobs:null)}Ee(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},Wo);const UV=new Uint8Array(32);UV.fill(0);const zle=BigInt(-1),yV=BigInt(0),xV=BigInt(1),Hle=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Vle(e){const t=Wt(e),n=t.length%32;return n?Er([t,UV.slice(n)]):Ze(t)}const Wle=S0(xV,32),Gle=S0(yV,32),zP={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},ww=["name","version","chainId","verifyingContract","salt"];function HP(e){return function(t){return ie(typeof t=="string",`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Xle={name:HP("name"),version:HP("version"),chainId:function(e){const t=et(e,"domain.chainId");return ie(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):gp(t)},verifyingContract:function(e){try{return bn(e).toLowerCase()}catch{}ie(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=Wt(e,"domain.salt");return ie(t.length===32,'invalid domain value "salt"',"domain.salt",e),Ze(t)}};function Ew(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=t[1]==="",r=parseInt(t[2]);ie(r%8===0&&r!==0&&r<=256&&t[2]===String(r),"invalid numeric width","type",e);const i=Tu(Hle,n?r-1:r),s=n?(i+xV)*zle:yV;return function(o){const a=et(o,"value");return ie(a>=s&&a<=i,`value out-of-bounds for ${e}`,"value",a),S0(n?oH(a,256):a,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return ie(n!==0&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(r){const i=Wt(r);return ie(i.length===n,`invalid length for ${e}`,"value",r),Vle(r)}}}switch(e){case"address":return function(t){return Ah(bn(t),32)};case"bool":return function(t){return t?Wle:Gle};case"bytes":return function(t){return Nr(t)};case"string":return function(t){return Th(t)}}return null}function VP(e,t){return`${e}(${t.map(({name:n,type:r})=>r+" "+n).join(",")})`}function yU(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}var lb,nf,xm,M9,vV;const Po=class Po{constructor(t){be(this,M9);ce(this,"primaryType");be(this,lb);be(this,nf);be(this,xm);J(this,nf,new Map),J(this,xm,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(t).forEach(l=>{s[l]=t[l].map(({name:f,type:c})=>{let{base:d,index:u}=yU(c);return d==="int"&&!t.int&&(d="int256"),d==="uint"&&!t.uint&&(d="uint256"),{name:f,type:d+(u||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),J(this,lb,JSON.stringify(s));for(const l in s){const f=new Set;for(const c of s[l]){ie(!f.has(c.name),`duplicate variable name ${JSON.stringify(c.name)} in ${JSON.stringify(l)}`,"types",t),f.add(c.name);const d=yU(c.type).base;ie(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",t),!Ew(d)&&(ie(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",t),r.get(d).push(l),n.get(l).add(d))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);ie(o.length!==0,"missing primary type","types",t),ie(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",t),ut(this,{primaryType:o[0]});function a(l,f){ie(!f.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",t),f.add(l);for(const c of n.get(l))if(r.has(c)){a(c,f);for(const d of f)i.get(d).add(c)}f.delete(l)}a(this.primaryType,new Set);for(const[l,f]of i){const c=Array.from(f);c.sort(),W(this,nf).set(l,VP(l,s[l])+c.map(d=>VP(d,s[d])).join(""))}}get types(){return JSON.parse(W(this,lb))}getEncoder(t){let n=W(this,xm).get(t);return n||(n=Ie(this,M9,vV).call(this,t),W(this,xm).set(t,n)),n}encodeType(t){const n=W(this,nf).get(t);return ie(n,`unknown type: ${JSON.stringify(t)}`,"name",t),n}encodeData(t,n){return this.getEncoder(t)(n)}hashStruct(t,n){return Nr(this.encodeData(t,n))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,n,r){if(Ew(t))return r(t,n);const i=yU(t).array;if(i)return ie(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[t];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});ie(!1,`unknown type: ${t}`,"type",t)}visit(t,n){return this._visit(this.primaryType,t,n)}static from(t){return new Po(t)}static getPrimaryType(t){return Po.from(t).primaryType}static hashStruct(t,n,r){return Po.from(n).hashStruct(t,r)}static hashDomain(t){const n=[];for(const r in t){if(t[r]==null)continue;const i=zP[r];ie(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),n.push({name:r,type:i})}return n.sort((r,i)=>ww.indexOf(r.name)-ww.indexOf(i.name)),Po.hashStruct("EIP712Domain",{EIP712Domain:n},t)}static encode(t,n,r){return Er(["0x1901",Po.hashDomain(t),Po.from(n).hash(r)])}static hash(t,n,r){return Nr(Po.encode(t,n,r))}static async resolveNames(t,n,r,i){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const s={};t.verifyingContract&&!An(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const o=Po.from(n);o.visit(r,(a,l)=>(a==="address"&&!An(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:t,value:r}}static getPayload(t,n,r){Po.hashDomain(t);const i={},s=[];ww.forEach(l=>{const f=t[l];f!=null&&(i[l]=Xle[l](f),s.push({name:l,type:zP[l]}))});const o=Po.from(n);n=o.types;const a=Object.assign({},n);return ie(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,f)=>{if(l.match(/^bytes(\d*)/))return Ze(Wt(f));if(l.match(/^u?int/))return et(f).toString();switch(l){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return ie(typeof f=="string","invalid string","value",f),f}ie(!1,"unsupported type","type",l)})}}};lb=new WeakMap,nf=new WeakMap,xm=new WeakMap,M9=new WeakSet,vV=function(t){{const i=Ew(t);if(i)return i}const n=yU(t).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{ie(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return W(this,nf).has(i)&&(a=a.map(Nr)),Nr(Er(a))}}const r=this.types[t];if(r){const i=Th(W(this,nf).get(t));return s=>{const o=r.map(({name:a,type:l})=>{const f=this.getEncoder(l)(s[a]);return W(this,nf).has(l)?Nr(f):f});return o.unshift(i),Er(o)}}ie(!1,`unknown type: ${t}`,"type",t)};let M3=Po;function fs(e){const t=new Set;return e.forEach(n=>t.add(n)),Object.freeze(t)}const Kle="external public payable override",Yle=fs(Kle.split(" ")),wV="constant external internal payable private public pure view override",Zle=fs(wV.split(" ")),EV="constructor error event fallback function receive struct",SV=fs(EV.split(" ")),kV="calldata memory storage payable indexed",qle=fs(kV.split(" ")),Qle="tuple returns",Jle=[EV,kV,Qle,wV].join(" "),ece=fs(Jle.split(" ")),tce={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},nce=new RegExp("^(\\s*)"),rce=new RegExp("^([0-9]+)"),ice=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),CV=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),AV=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var gi,Pa,cb,sk;const T9=class T9{constructor(t){be(this,cb);be(this,gi);be(this,Pa);J(this,gi,0),J(this,Pa,t.slice())}get offset(){return W(this,gi)}get length(){return W(this,Pa).length-W(this,gi)}clone(){return new T9(W(this,Pa))}reset(){J(this,gi,0)}popKeyword(t){const n=this.peek();if(n.type!=="KEYWORD"||!t.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const n=this.peek();throw new Error(`expected ${t}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const n=Ie(this,cb,sk).call(this,W(this,gi)+1,t.match+1);return J(this,gi,t.match+1),n}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;W(this,gi)<t.match-1;){const r=this.peek().linkNext;n.push(Ie(this,cb,sk).call(this,W(this,gi)+1,r)),J(this,gi,r)}return J(this,gi,t.match+1),n}peek(){if(W(this,gi)>=W(this,Pa).length)throw new Error("out-of-bounds");return W(this,Pa)[W(this,gi)]}peekKeyword(t){const n=this.peekType("KEYWORD");return n!=null&&t.has(n)?n:null}peekType(t){if(this.length===0)return null;const n=this.peek();return n.type===t?n.text:null}pop(){const t=this.peek();return yg(this,gi)._++,t}toString(){const t=[];for(let n=W(this,gi);n<W(this,Pa).length;n++){const r=W(this,Pa)[n];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}};gi=new WeakMap,Pa=new WeakMap,cb=new WeakSet,sk=function(t=0,n=0){return new T9(W(this,Pa).slice(t,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-t,linkBack:r.linkBack-t,linkNext:r.linkNext-t}))))};let nl=T9;function D0(e){const t=[],n=o=>{const a=s<e.length?JSON.stringify(e[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<e.length;){let o=e.substring(s),a=o.match(nce);a&&(s+=a[1].length,o=e.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(l);let f=tce[o[0]]||"";if(f){if(l.type=f,l.text=o[0],s++,f==="OPEN_PAREN")r.push(t.length-1),i.push(t.length-1);else if(f=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1;else if(f==="COMMA")l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1,i.push(t.length-1);else if(f==="OPEN_BRACKET")l.type="BRACKET";else if(f==="CLOSE_BRACKET"){let c=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const d=t.pop().text;c=d+c,t[t.length-1].value=Rt(d)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=c}continue}if(a=o.match(ice),a){if(l.text=a[1],s+=l.text.length,ece.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(AV)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(rce),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new nl(t.map(o=>Object.freeze(o)))}function WP(e,t){let n=[];for(const r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function H9(e,t){if(t.peekKeyword(SV)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function Sf(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(r==null||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function MV(e){let t=Sf(e,Zle);return WP(t,fs("constant payable nonpayable".split(" "))),WP(t,fs("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function yf(e,t){return e.popParams().map(n=>ki.from(n,t))}function TV(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return et(e.pop().text);throw new Error("invalid gas")}return null}function Ih(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const sce=new RegExp(/^(.*)\[([0-9]*)\]$/);function GP(e){const t=e.match(AV);if(ie(t,"invalid type","type",e),e==="uint")return"uint256";if(e==="int")return"int256";if(t[2]){const n=parseInt(t[2]);ie(n!==0&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);ie(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",e)}return e}const er={},Vs=Symbol.for("_ethers_internal"),XP="_ParamTypeInternal",KP="_ErrorInternal",YP="_EventInternal",ZP="_ConstructorInternal",qP="_FallbackInternal",QP="_FunctionInternal",JP="_StructInternal";var vm,Sy;const Do=class Do{constructor(t,n,r,i,s,o,a,l){be(this,vm);ce(this,"name");ce(this,"type");ce(this,"baseType");ce(this,"indexed");ce(this,"components");ce(this,"arrayLength");ce(this,"arrayChildren");if(Ub(t,er,"ParamType"),Object.defineProperty(this,Vs,{value:XP}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");ut(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(t){if(t==null&&(t="sighash"),t==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(t)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(t),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(t)).join(t==="full"?", ":",")+")":n+=this.type,t!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),t==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,n){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,t)}async walkAsync(t,n){const r=[],i=[t];return Ie(this,vm,Sy).call(this,r,t,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(t,n){if(Do.isParamType(t))return t;if(typeof t=="string")try{return Do.from(D0(t),n)}catch{ie(!1,"invalid param type","obj",t)}else if(t instanceof nl){let a="",l="",f=null;Sf(t,fs(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(l="tuple",f=t.popParams().map(U=>Do.from(U)),a=`tuple(${f.map(U=>U.format()).join(",")})`):(a=GP(t.popType("TYPE")),l=a);let c=null,d=null;for(;t.length&&t.peekType("BRACKET");){const U=t.pop();c=new Do(er,"",a,l,null,f,d,c),d=U.value,a+=U.text,l="array",f=null}let u=null;if(Sf(t,qle).has("indexed")){if(!n)throw new Error("");u=!0}const g=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new Do(er,g,a,l,u,f,d,c)}const r=t.name;ie(!r||typeof r=="string"&&r.match(CV),"invalid name","obj.name",r);let i=t.indexed;i!=null&&(ie(n,"parameter cannot be indexed","obj.indexed",t.indexed),i=!!i);let s=t.type,o=s.match(sce);if(o){const a=parseInt(o[2]||"-1"),l=Do.from({type:o[1],components:t.components});return new Do(er,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=t.components!=null?t.components.map(f=>Do.from(f)):null;return new Do(er,r||"",s,"tuple",i,a,null,null)}return s=GP(t.type),new Do(er,r||"",s,s,i,null,null,null)}static isParamType(t){return t&&t[Vs]===XP}};vm=new WeakSet,Sy=function(t,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,f)=>{var c;Ie(c=o,vm,Sy).call(c,t,l,r,d=>{a[f]=d})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,f)=>{var c;Ie(c=o[f],vm,Sy).call(c,t,l,r,d=>{a[f]=d})}),i(a);return}const s=r(this.type,n);s.then?t.push(async function(){i(await s)}()):i(s)};let ki=Do,V9=class ok{constructor(t,n,r){ce(this,"type");ce(this,"inputs");Ub(t,er,"Fragment"),r=Object.freeze(r.slice()),ut(this,{type:n,inputs:r})}static from(t){if(typeof t=="string"){try{ok.from(JSON.parse(t))}catch{}return ok.from(D0(t))}if(t instanceof nl)switch(t.peekKeyword(SV)){case"constructor":return uf.from(t);case"error":return Ps.from(t);case"event":return Wl.from(t);case"fallback":case"receive":return Xc.from(t);case"function":return Gl.from(t);case"struct":return dh.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return uf.from(t);case"error":return Ps.from(t);case"event":return Wl.from(t);case"fallback":case"receive":return Xc.from(t);case"function":return Gl.from(t);case"struct":return dh.from(t)}Ee(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ie(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return uf.isFragment(t)}static isError(t){return Ps.isFragment(t)}static isEvent(t){return Wl.isFragment(t)}static isFunction(t){return Gl.isFragment(t)}static isStruct(t){return dh.isFragment(t)}};class W9 extends V9{constructor(n,r,i,s){super(n,r,s);ce(this,"name");ie(typeof i=="string"&&i.match(CV),"invalid identifier","name",i),s=Object.freeze(s.slice()),ut(this,{name:i})}}function o2(e,t){return"("+t.map(n=>n.format(e)).join(e==="full"?", ":",")+")"}class Ps extends W9{constructor(t,n,r){super(t,"error",n,r),Object.defineProperty(this,Vs,{value:KP})}get selector(){return Th(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(t)))});const n=[];return t!=="sighash"&&n.push("error"),n.push(this.name+o2(t,this.inputs)),n.join(" ")}static from(t){if(Ps.isFragment(t))return t;if(typeof t=="string")return Ps.from(D0(t));if(t instanceof nl){const n=H9("error",t),r=yf(t);return Ih(t),new Ps(er,n,r)}return new Ps(er,t.name,t.inputs?t.inputs.map(ki.from):[])}static isFragment(t){return t&&t[Vs]===KP}}class Wl extends W9{constructor(n,r,i,s){super(n,"event",r,i);ce(this,"anonymous");Object.defineProperty(this,Vs,{value:YP}),ut(this,{anonymous:s})}get topicHash(){return Th(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+o2(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>ki.from(s)),new Wl(er,n,r,!1).topicHash}static from(n){if(Wl.isFragment(n))return n;if(typeof n=="string")try{return Wl.from(D0(n))}catch{ie(!1,"invalid event fragment","obj",n)}else if(n instanceof nl){const r=H9("event",n),i=yf(n,!0),s=!!Sf(n,fs(["anonymous"])).has("anonymous");return Ih(n),new Wl(er,r,i,s)}return new Wl(er,n.name,n.inputs?n.inputs.map(r=>ki.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Vs]===YP}}class uf extends V9{constructor(n,r,i,s,o){super(n,r,i);ce(this,"payable");ce(this,"gas");Object.defineProperty(this,Vs,{value:ZP}),ut(this,{payable:s,gas:o})}format(n){if(Ee(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${o2(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(uf.isFragment(n))return n;if(typeof n=="string")try{return uf.from(D0(n))}catch{ie(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof nl){Sf(n,fs(["constructor"]));const r=yf(n),i=!!Sf(n,Yle).has("payable"),s=TV(n);return Ih(n),new uf(er,"constructor",r,i,s)}return new uf(er,"constructor",n.inputs?n.inputs.map(ki.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Vs]===ZP}}class Xc extends V9{constructor(n,r,i){super(n,"fallback",r);ce(this,"payable");Object.defineProperty(this,Vs,{value:qP}),ut(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Xc.isFragment(n))return n;if(typeof n=="string")try{return Xc.from(D0(n))}catch{ie(!1,"invalid fallback fragment","obj",n)}else if(n instanceof nl){const r=n.toString(),i=n.peekKeyword(fs(["fallback","receive"]));if(ie(i,"type must be fallback or receive","obj",r),n.popKeyword(fs(["fallback","receive"]))==="receive"){const l=yf(n);return ie(l.length===0,"receive cannot have arguments","obj.inputs",l),Sf(n,fs(["payable"])),Ih(n),new Xc(er,[],!0)}let o=yf(n);o.length?ie(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[ki.from("bytes")];const a=MV(n);if(ie(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Sf(n,fs(["returns"])).has("returns")){const l=yf(n);ie(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(f=>f.format("minimal")).join(", "))}return Ih(n),new Xc(er,o,a==="payable")}if(n.type==="receive")return new Xc(er,[],!0);if(n.type==="fallback"){const r=[ki.from("bytes")],i=n.stateMutability==="payable";return new Xc(er,r,i)}ie(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Vs]===qP}}class Gl extends W9{constructor(n,r,i,s,o,a){super(n,"function",r,s);ce(this,"constant");ce(this,"outputs");ce(this,"stateMutability");ce(this,"payable");ce(this,"gas");Object.defineProperty(this,Vs,{value:QP}),o=Object.freeze(o.slice()),ut(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return Th(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+o2(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(o2(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>ki.from(s)),new Gl(er,n,"view",r,[],null).selector}static from(n){if(Gl.isFragment(n))return n;if(typeof n=="string")try{return Gl.from(D0(n))}catch{ie(!1,"invalid function fragment","obj",n)}else if(n instanceof nl){const i=H9("function",n),s=yf(n),o=MV(n);let a=[];Sf(n,fs(["returns"])).has("returns")&&(a=yf(n));const l=TV(n);return Ih(n),new Gl(er,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Gl(er,n.name,r,n.inputs?n.inputs.map(ki.from):[],n.outputs?n.outputs.map(ki.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Vs]===QP}}class dh extends W9{constructor(t,n,r){super(t,"struct",n,r),Object.defineProperty(this,Vs,{value:JP})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return dh.from(D0(t))}catch{ie(!1,"invalid struct fragment","obj",t)}else if(t instanceof nl){const n=H9("struct",t),r=yf(t);return Ih(t),new dh(er,n,r)}return new dh(er,t.name,t.inputs?t.inputs.map(ki.from):[])}static isFragment(t){return t&&t[Vs]===JP}}const cl=new Map;cl.set(0,"GENERIC_PANIC");cl.set(1,"ASSERT_FALSE");cl.set(17,"OVERFLOW");cl.set(18,"DIVIDE_BY_ZERO");cl.set(33,"ENUM_RANGE_ERROR");cl.set(34,"BAD_STORAGE_DATA");cl.set(49,"STACK_UNDERFLOW");cl.set(50,"ARRAY_RANGE_ERROR");cl.set(65,"OUT_OF_MEMORY");cl.set(81,"UNINITIALIZED_FUNCTION_CALL");const oce=new RegExp(/^bytes([0-9]*)$/),ace=new RegExp(/^(u?int)([0-9]*)$/);let Sw=null,eD=1024;function lce(e,t,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const f=Wt(n);if(n=Ze(n),f.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(f.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Ze(f.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],f.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Ze(f.slice(0,4))==="0x4e487b71")try{const c=Number(r.decode(["uint256"],f.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[c]},s=`Panic due to ${cl.get(c)||"UNKNOWN"}(${c})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:t.to?bn(t.to):null,data:t.data||"0x"};return t.from&&(l.from=bn(t.from)),hr(i,"CALL_EXCEPTION",{action:e,data:n,reason:s,transaction:l,invocation:o,revert:a})}var Wd,op;const I9=class I9{constructor(){be(this,Wd)}getDefaultValue(t){const n=t.map(i=>Ie(this,Wd,op).call(this,ki.from(i)));return new UU(n,"_").defaultValue()}encode(t,n){rH(n.length,t.length,"types/values length mismatch");const r=t.map(o=>Ie(this,Wd,op).call(this,ki.from(o))),i=new UU(r,"_"),s=new WS;return i.encode(s,n),s.data}decode(t,n,r){const i=t.map(o=>Ie(this,Wd,op).call(this,ki.from(o)));return new UU(i,"_").decode(new GS(n,r,eD))}static _setDefaultMaxInflation(t){ie(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),eD=t}static defaultAbiCoder(){return Sw==null&&(Sw=new I9),Sw}static getBuiltinCallException(t,n,r){return lce(t,n,r,I9.defaultAbiCoder())}};Wd=new WeakSet,op=function(t){if(t.isArray())return new Nae(Ie(this,Wd,op).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new UU(t.components.map(r=>Ie(this,Wd,op).call(this,r)),t.name);switch(t.baseType){case"address":return new Tae(t.name);case"bool":return new Rae(t.name);case"string":return new $ae(t.name);case"bytes":return new _ae(t.name);case"":return new Lae(t.name)}let n=t.type.match(ace);if(n){let r=parseInt(n[2]||"256");return ie(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",t),new Fae(r/8,n[1]==="int",t.name)}if(n=t.type.match(oce),n){let r=parseInt(n[1]);return ie(r!==0&&r<=32,"invalid bytes length","param",t),new Pae(r,t.name)}ie(!1,"invalid type","type",t.type)};let a2=I9;class cce{constructor(t,n,r){ce(this,"fragment");ce(this,"name");ce(this,"signature");ce(this,"topic");ce(this,"args");const i=t.name,s=t.format();ut(this,{fragment:t,name:i,signature:s,topic:n,args:r})}}class fce{constructor(t,n,r,i){ce(this,"fragment");ce(this,"name");ce(this,"args");ce(this,"signature");ce(this,"selector");ce(this,"value");const s=t.name,o=t.format();ut(this,{fragment:t,name:s,args:r,signature:o,selector:n,value:i})}}class dce{constructor(t,n,r){ce(this,"fragment");ce(this,"name");ce(this,"args");ce(this,"signature");ce(this,"selector");const i=t.name,s=t.format();ut(this,{fragment:t,name:i,args:r,signature:s,selector:n})}}class tD{constructor(t){ce(this,"hash");ce(this,"_isIndexed");ut(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const nD={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},rD={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&nD[e.toString()]&&(t=nD[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};var Ol,jl,Bl,Di,rc,ky,Cy;const Mu=class Mu{constructor(t){be(this,rc);ce(this,"fragments");ce(this,"deploy");ce(this,"fallback");ce(this,"receive");be(this,Ol);be(this,jl);be(this,Bl);be(this,Di);let n=[];typeof t=="string"?n=JSON.parse(t):n=t,J(this,Bl,new Map),J(this,Ol,new Map),J(this,jl,new Map);const r=[];for(const o of n)try{r.push(V9.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}ut(this,{fragments:Object.freeze(r)});let i=null,s=!1;J(this,Di,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}ut(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(ie(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=W(this,Bl);break;case"event":l=W(this,jl);break;case"error":l=W(this,Ol);break;default:return}const f=o.format();l.has(f)||l.set(f,o)}),this.deploy||ut(this,{deploy:uf.from("constructor()")}),ut(this,{fallback:i,receive:s})}format(t){const n=t?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const t=this.fragments.map(n=>n.format("json"));return JSON.stringify(t.map(n=>JSON.parse(n)))}getAbiCoder(){return a2.defaultAbiCoder()}getFunctionName(t){const n=Ie(this,rc,ky).call(this,t,null,!1);return ie(n,"no matching function","key",t),n.name}hasFunction(t){return!!Ie(this,rc,ky).call(this,t,null,!1)}getFunction(t,n){return Ie(this,rc,ky).call(this,t,n||null,!0)}forEachFunction(t){const n=Array.from(W(this,Bl).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(W(this,Bl).get(i),r)}}getEventName(t){const n=Ie(this,rc,Cy).call(this,t,null,!1);return ie(n,"no matching event","key",t),n.name}hasEvent(t){return!!Ie(this,rc,Cy).call(this,t,null,!1)}getEvent(t,n){return Ie(this,rc,Cy).call(this,t,n||null,!0)}forEachEvent(t){const n=Array.from(W(this,jl).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(W(this,jl).get(i),r)}}getError(t,n){if(An(t)){const i=t.toLowerCase();if(rD[i])return Ps.from(rD[i].signature);for(const s of W(this,Ol).values())if(i===s.selector)return s;return null}if(t.indexOf("(")===-1){const i=[];for(const[s,o]of W(this,Ol))s.split("(")[0]===t&&i.push(o);if(i.length===0)return t==="Error"?Ps.from("error Error(string)"):t==="Panic"?Ps.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");ie(!1,`ambiguous error description (i.e. ${s})`,"name",t)}return i[0]}if(t=Ps.from(t).format(),t==="Error(string)")return Ps.from("error Error(string)");if(t==="Panic(uint256)")return Ps.from("error Panic(uint256)");const r=W(this,Ol).get(t);return r||null}forEachError(t){const n=Array.from(W(this,Ol).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(W(this,Ol).get(i),r)}}_decodeParams(t,n){return W(this,Di).decode(t,n)}_encodeParams(t,n){return W(this,Di).encode(t,n)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,n){if(typeof t=="string"){const r=this.getError(t);ie(r,"unknown error","fragment",t),t=r}return ie(pr(n,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",n),this._decodeParams(t.inputs,pr(n,4))}encodeErrorResult(t,n){if(typeof t=="string"){const r=this.getError(t);ie(r,"unknown error","fragment",t),t=r}return Er([t.selector,this._encodeParams(t.inputs,n||[])])}decodeFunctionData(t,n){if(typeof t=="string"){const r=this.getFunction(t);ie(r,"unknown function","fragment",t),t=r}return ie(pr(n,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",n),this._decodeParams(t.inputs,pr(n,4))}encodeFunctionData(t,n){if(typeof t=="string"){const r=this.getFunction(t);ie(r,"unknown function","fragment",t),t=r}return Er([t.selector,this._encodeParams(t.inputs,n||[])])}decodeFunctionResult(t,n){if(typeof t=="string"){const s=this.getFunction(t);ie(s,"unknown function","fragment",t),t=s}let r="invalid length for result data";const i=ss(n);if(i.length%32===0)try{return W(this,Di).decode(t.outputs,i)}catch{r="could not decode result data"}Ee(!1,r,"BAD_DATA",{value:Ze(i),info:{method:t.name,signature:t.format()}})}makeError(t,n){const r=Wt(t,"data"),i=a2.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=Ze(r.slice(0,4)),l=this.getError(a);if(l)try{const f=W(this,Di).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:f},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(t,n){if(typeof t=="string"){const r=this.getFunction(t);ie(r,"unknown function","fragment",t),t=r}return Ze(W(this,Di).encode(t.outputs,n||[]))}encodeFilterTopics(t,n){if(typeof t=="string"){const s=this.getEvent(t);ie(s,"unknown event","eventFragment",t),t=s}Ee(n.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const i=(s,o)=>s.type==="string"?Th(o):s.type==="bytes"?Nr(Ze(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=S0(o):s.type.match(/^bytes/)?o=Nse(o,32):s.type==="address"&&W(this,Di).encode(["address"],[o]),Ah(Ze(o),32));for(n.forEach((s,o)=>{const a=t.inputs[o];if(!a.indexed){ie(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?ie(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(t,n){if(typeof t=="string"){const o=this.getEvent(t);ie(o,"unknown event","eventFragment",t),t=o}const r=[],i=[],s=[];return t.anonymous||r.push(t.topicHash),ie(n.length===t.inputs.length,"event arguments/values mismatch","values",n),t.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(Th(l));else if(o.type==="bytes")r.push(Nr(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(W(this,Di).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:W(this,Di).encode(i,s),topics:r}}decodeEventLog(t,n,r){if(typeof t=="string"){const h=this.getEvent(t);ie(h,"unknown event","eventFragment",t),t=h}if(r!=null&&!t.anonymous){const h=t.topicHash;ie(An(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];t.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(ki.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=r!=null?W(this,Di).decode(i,Er(r)):null,l=W(this,Di).decode(s,n,!0),f=[],c=[];let d=0,u=0;return t.inputs.forEach((h,g)=>{let U=null;if(h.indexed)if(a==null)U=new tD(null);else if(o[g])U=new tD(a[u++]);else try{U=a[u++]}catch(y){U=y}else try{U=l[d++]}catch(y){U=y}f.push(U),c.push(h.name||null)}),Lm.fromItems(f,c)}parseTransaction(t){const n=Wt(t.data,"tx.data"),r=et(t.value!=null?t.value:0,"tx.value"),i=this.getFunction(Ze(n.slice(0,4)));if(!i)return null;const s=W(this,Di).decode(i.inputs,n.slice(4));return new fce(i,i.selector,s,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const n=this.getEvent(t.topics[0]);return!n||n.anonymous?null:new cce(n,n.topicHash,this.decodeEventLog(n,t.data,t.topics))}parseError(t){const n=Ze(t),r=this.getError(pr(n,0,4));if(!r)return null;const i=W(this,Di).decode(r.inputs,pr(n,4));return new dce(r,r.selector,i)}static from(t){return t instanceof Mu?t:typeof t=="string"?new Mu(JSON.parse(t)):typeof t.formatJson=="function"?new Mu(t.formatJson()):typeof t.format=="function"?new Mu(t.format("json")):new Mu(t)}};Ol=new WeakMap,jl=new WeakMap,Bl=new WeakMap,Di=new WeakMap,rc=new WeakSet,ky=function(t,n,r){if(An(t)){const s=t.toLowerCase();for(const o of W(this,Bl).values())if(s===o.selector)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of W(this,Bl))o.split("(")[0]===t&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;Wi.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let f=s.length-1;f>=0;f--){const c=s[f].inputs.length;c!==a&&(!l||c!==a-1)&&s.splice(f,1)}for(let f=s.length-1;f>=0;f--){const c=s[f].inputs;for(let d=0;d<n.length;d++)if(Wi.isTyped(n[d])){if(d>=c.length){if(n[d].type==="overrides")continue;s.splice(f,1);break}if(n[d].type!==c[d].baseType){s.splice(f,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ie(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return s[0]}const i=W(this,Bl).get(Gl.from(t).format());return i||null},Cy=function(t,n,r){if(An(t)){const s=t.toLowerCase();for(const o of W(this,jl).values())if(s===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of W(this,jl))o.split("(")[0]===t&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(Wi.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ie(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return s[0]}const i=W(this,jl).get(Wl.from(t).format());return i||null};let ak=Mu;const IV=BigInt(0);function Op(e){return e??null}function xr(e){return e==null?null:e.toString()}class iD{constructor(t,n,r){ce(this,"gasPrice");ce(this,"maxFeePerGas");ce(this,"maxPriorityFeePerGas");ut(this,{gasPrice:Op(t),maxFeePerGas:Op(n),maxPriorityFeePerGas:Op(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:xr(t),maxFeePerGas:xr(n),maxPriorityFeePerGas:xr(r)}}}function T3(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=Ze(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in e)||e[i]==null||(t[i]=et(e[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in e)||e[i]==null||(t[i]=Rt(e[i],`request.${i}`));return e.accessList&&(t.accessList=i1(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(i=>jA(i)?Ze(i):Object.assign({},i))),t}var rf;class uce{constructor(t,n){ce(this,"provider");ce(this,"number");ce(this,"hash");ce(this,"timestamp");ce(this,"parentHash");ce(this,"parentBeaconBlockRoot");ce(this,"nonce");ce(this,"difficulty");ce(this,"gasLimit");ce(this,"gasUsed");ce(this,"stateRoot");ce(this,"receiptsRoot");ce(this,"blobGasUsed");ce(this,"excessBlobGas");ce(this,"miner");ce(this,"prevRandao");ce(this,"extraData");ce(this,"baseFeePerGas");be(this,rf);J(this,rf,t.transactions.map(r=>typeof r!="string"?new l2(r,n):r)),ut(this,{provider:n,hash:Op(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:Op(t.prevRandao),extraData:t.extraData,baseFeePerGas:Op(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return W(this,rf).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=W(this,rf).slice();return t.length===0?[]:(Ee(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:f,number:c,parentHash:d,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:g,timestamp:U,transactions:y}=this;return{_type:"Block",baseFeePerGas:xr(t),difficulty:xr(n),extraData:r,gasLimit:xr(i),gasUsed:xr(s),blobGasUsed:xr(this.blobGasUsed),excessBlobGas:xr(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:f,number:c,parentHash:d,timestamp:U,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:g,transactions:y}}[Symbol.iterator](){let t=0;const n=this.transactions;return{next:()=>t<this.length?{value:n[t++],done:!1}:{value:void 0,done:!0}}}get length(){return W(this,rf).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let n;if(typeof t=="number")n=W(this,rf)[t];else{const r=t.toLowerCase();for(const i of W(this,rf))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash===r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(t){const n=this.prefetchedTransactions;if(typeof t=="number")return n[t];t=t.toLowerCase();for(const r of n)if(r.hash===t)return r;ie(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return hce(this)}}rf=new WeakMap;class vb{constructor(t,n){ce(this,"provider");ce(this,"transactionHash");ce(this,"blockHash");ce(this,"blockNumber");ce(this,"removed");ce(this,"address");ce(this,"data");ce(this,"topics");ce(this,"index");ce(this,"transactionIndex");this.provider=n;const r=Object.freeze(t.topics.slice());ut(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:f}=this;return{_type:"log",address:t,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:f}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return Ee(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return Ee(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return Ee(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return pce(this)}}var fb;class NV{constructor(t,n){ce(this,"provider");ce(this,"to");ce(this,"from");ce(this,"contractAddress");ce(this,"hash");ce(this,"index");ce(this,"blockHash");ce(this,"blockNumber");ce(this,"logsBloom");ce(this,"gasUsed");ce(this,"blobGasUsed");ce(this,"cumulativeGasUsed");ce(this,"gasPrice");ce(this,"blobGasPrice");ce(this,"type");ce(this,"status");ce(this,"root");be(this,fb);J(this,fb,Object.freeze(t.logs.map(i=>new vb(i,n))));let r=IV;t.effectiveGasPrice!=null?r=t.effectiveGasPrice:t.gasPrice!=null&&(r=t.gasPrice),ut(this,{provider:n,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return W(this,fb)}toJSON(){const{to:t,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:f,status:c,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:xr(this.cumulativeGasUsed),from:n,gasPrice:xr(this.gasPrice),blobGasUsed:xr(this.blobGasUsed),blobGasPrice:xr(this.blobGasPrice),gasUsed:xr(this.gasUsed),hash:i,index:s,logs:f,logsBloom:l,root:d,status:c,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return _V(this)}reorderedEvent(t){return Ee(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),RV(this,t)}}fb=new WeakMap;var Gd;const kN=class kN{constructor(t,n){ce(this,"provider");ce(this,"blockNumber");ce(this,"blockHash");ce(this,"index");ce(this,"hash");ce(this,"type");ce(this,"to");ce(this,"from");ce(this,"nonce");ce(this,"gasLimit");ce(this,"gasPrice");ce(this,"maxPriorityFeePerGas");ce(this,"maxFeePerGas");ce(this,"maxFeePerBlobGas");ce(this,"data");ce(this,"value");ce(this,"chainId");ce(this,"signature");ce(this,"accessList");ce(this,"blobVersionedHashes");be(this,Gd);this.provider=n,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,J(this,Gd,-1)}toJSON(){const{blockNumber:t,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:f,signature:c,accessList:d,blobVersionedHashes:u}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:t,blockHash:n,blobVersionedHashes:u,chainId:xr(this.chainId),data:f,from:a,gasLimit:xr(this.gasLimit),gasPrice:xr(this.gasPrice),hash:i,maxFeePerGas:xr(this.maxFeePerGas),maxPriorityFeePerGas:xr(this.maxPriorityFeePerGas),maxFeePerBlobGas:xr(this.maxFeePerBlobGas),nonce:l,signature:c,to:o,index:r,type:s,value:xr(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const r=await this.getTransaction();r&&(t=r.blockNumber)}if(t==null)return null;const n=this.provider.getBlock(t);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await is({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,n){const r=t??1,i=n??0;let s=W(this,Gd),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:u,nonce:h}=await is({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=u;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=s-3,o<W(this,Gd)&&(o=W(this,Gd)));o<=u;){if(a)return null;const U=await this.provider.getBlock(o,!0);if(U==null)return;for(const y of U)if(y===this.hash)return;for(let y=0;y<U.length;y++){const x=await U.getTransaction(y);if(x.from===this.from&&x.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(x.hash);if(w==null||u-w.blockNumber+1<r)return;let E="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?E="repriced":x.data==="0x"&&x.from===x.to&&x.value===IV&&(E="cancelled"),Ee(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:x.replaceableTransaction(s),hash:x.hash,receipt:w})}}o++}},f=u=>{if(u==null||u.status!==0)return u;Ee(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:u.to,from:u.from,data:""},receipt:u})},c=await this.provider.getTransactionReceipt(this.hash);if(r===0)return f(c);if(c){if(await c.confirmations()>=r)return f(c)}else if(await l(),r===0)return null;return await new Promise((u,h)=>{const g=[],U=()=>{g.forEach(x=>x())};if(g.push(()=>{a=!0}),i>0){const x=setTimeout(()=>{U(),h(hr("wait for transaction timeout","TIMEOUT"))},i);g.push(()=>{clearTimeout(x)})}const y=async x=>{if(await x.confirmations()>=r){U();try{u(f(x))}catch(w){h(w)}}};if(g.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),s>=0){const x=async()=>{try{await l()}catch(w){if(zi(w,"TRANSACTION_REPLACED")){U(),h(w);return}}a||this.provider.once("block",x)};g.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Ee(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),_V(this)}reorderedEvent(t){return Ee(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ee(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),RV(this,t)}replaceableTransaction(t){ie(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const n=new kN(this,this.provider);return J(n,Gd,t),n}};Gd=new WeakMap;let l2=kN;function hce(e){return{orphan:"drop-block",hash:e.hash,number:e.number}}function RV(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function _V(e){return{orphan:"drop-transaction",tx:e}}function pce(e){return{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}class eM extends vb{constructor(n,r,i){super(n,n.provider);ce(this,"interface");ce(this,"fragment");ce(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);ut(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class PV extends vb{constructor(n,r){super(n,n.provider);ce(this,"error");ut(this,{error:r})}}var wm;class mce extends NV{constructor(n,r,i){super(i,r);be(this,wm);J(this,wm,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?W(this,wm).getEvent(n.topics[0]):null;if(r)try{return new eM(n,W(this,wm),r)}catch(i){return new PV(n,i)}return n})}}wm=new WeakMap;var db;class tM extends l2{constructor(n,r,i){super(i,r);be(this,db);J(this,db,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new mce(W(this,db),this.provider,i)}}db=new WeakMap;class DV extends aH{constructor(n,r,i,s){super(n,r,i);ce(this,"log");ut(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class gce extends DV{constructor(t,n,r,i,s){super(t,n,r,new eM(s,t.interface,i));const o=t.interface.decodeEventLog(i,this.log.data,this.log.topics);ut(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const sD=BigInt(0);function LV(e){return e&&typeof e.call=="function"}function OV(e){return e&&typeof e.estimateGas=="function"}function G9(e){return e&&typeof e.resolveName=="function"}function jV(e){return e&&typeof e.sendTransaction=="function"}function BV(e){if(e!=null){if(G9(e))return e;if(e.provider)return e.provider}}var ub;class bce{constructor(t,n,r){be(this,ub);ce(this,"fragment");if(ut(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=Nh(t.runner,"resolveName"),s=G9(i)?i:null;J(this,ub,async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(c,d)=>c==="address"?Array.isArray(d)?Promise.all(d.map(u=>cs(u,s))):cs(d,s):d)));return t.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return W(this,ub)}}ub=new WeakMap;function Nh(e,t){return e==null?null:typeof e[t]=="function"?e:e.provider&&typeof e.provider[t]=="function"?e.provider:null}function Ru(e){return e==null?null:e.provider||null}async function FV(e,t){const n=Wi.dereference(e,"overrides");ie(typeof n=="object","invalid overrides parameter","overrides",e);const r=T3(n);return ie(r.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ie(r.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function Uce(e,t,n){const r=Nh(e,"resolveName"),i=G9(r)?r:null;return await Promise.all(t.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=Wi.dereference(l,a),a==="address"?cs(l,i):l))))}function yce(e){const t=async function(o){const a=await FV(o,["data"]);a.to=await e.getAddress(),a.from&&(a.from=await cs(a.from,BV(e.runner)));const l=e.interface,f=et(a.value||sD,"overrides.value")===sD,c=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!c&&!f&&ie(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),ie(l.fallback||c,"cannot send data to receive-only contract","overrides.data",a.data);const d=l.receive||l.fallback&&l.fallback.payable;return ie(d||f,"cannot send value to non-payable fallback","overrides.value",a.value),ie(l.fallback||c,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Nh(e.runner,"call");Ee(LV(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await t(o);try{return await a.call(l)}catch(f){throw OA(f)&&f.data?e.interface.makeError(f.data,l):f}},r=async function(o){const a=e.runner;Ee(jV(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await t(o)),f=Ru(e.runner);return new tM(e.interface,f,l)},i=async function(o){const a=Nh(e.runner,"estimateGas");return Ee(OV(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},s=async o=>await r(o);return ut(s,{_contract:e,estimateGas:i,populateTransaction:t,send:r,staticCall:n}),s}function xce(e,t){const n=function(...f){const c=e.interface.getFunction(t,f);return Ee(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:f}}),c},r=async function(...f){const c=n(...f);let d={};if(c.inputs.length+1===f.length&&(d=await FV(f.pop()),d.from&&(d.from=await cs(d.from,BV(e.runner)))),c.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const u=await Uce(e.runner,c.inputs,f);return Object.assign({},d,await is({to:e.getAddress(),data:e.interface.encodeFunctionData(c,u)}))},i=async function(...f){const c=await a(...f);return c.length===1?c[0]:c},s=async function(...f){const c=e.runner;Ee(jV(c),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await c.sendTransaction(await r(...f)),u=Ru(e.runner);return new tM(e.interface,u,d)},o=async function(...f){const c=Nh(e.runner,"estimateGas");return Ee(OV(c),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await c.estimateGas(await r(...f))},a=async function(...f){const c=Nh(e.runner,"call");Ee(LV(c),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...f);let u="0x";try{u=await c.call(d)}catch(g){throw OA(g)&&g.data?e.interface.makeError(g.data,d):g}const h=n(...f);return e.interface.decodeFunctionResult(h,u)},l=async(...f)=>n(...f).constant?await i(...f):await s(...f);return ut(l,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=e.interface.getFunction(t);return Ee(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),f}}),l}function vce(e,t){const n=function(...i){const s=e.interface.getEvent(t,i);return Ee(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:i}}),s},r=function(...i){return new bce(e,n(...i),i)};return ut(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=e.interface.getEvent(t);return Ee(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),i}}),r}const I3=Symbol.for("_ethersInternal_contract"),$V=new WeakMap;function wce(e,t){$V.set(e[I3],t)}function ro(e){return $V.get(e[I3])}function Ece(e){return e&&typeof e=="object"&&"getTopicFilter"in e&&typeof e.getTopicFilter=="function"&&e.fragment}async function nM(e,t){let n,r=null;if(Array.isArray(t)){const s=function(o){if(An(o,32))return o;const a=e.interface.getEvent(o);return ie(a,"unknown fragment","name",o),a.topicHash};n=t.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else t==="*"?n=[null]:typeof t=="string"?An(t,32)?n=[t]:(r=e.interface.getEvent(t),ie(r,"unknown fragment","event",t),n=[r.topicHash]):Ece(t)?n=await t.getTopicFilter():"fragment"in t?(r=t.fragment,n=[r.topicHash]):ie(!1,"unknown event name","event",t);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function qg(e,t){const{subs:n}=ro(e);return n.get((await nM(e,t)).tag)||null}async function oD(e,t,n){const r=Ru(e.runner);Ee(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:s,topics:o}=await nM(e,n),{addr:a,subs:l}=ro(e);let f=l.get(s);if(!f){const d={address:a||e,topics:o},u=y=>{let x=i;if(x==null)try{x=e.interface.getEvent(y.topics[0])}catch{}if(x){const w=x,E=i?e.interface.decodeEventLog(i,y.data,y.topics):[];ck(e,n,E,S=>new gce(e,S,n,w,y))}else ck(e,n,[],w=>new DV(e,w,n,y))};let h=[];f={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(d,u))},stop:async()=>{if(h.length==0)return;let y=h;h=[],await Promise.all(y),r.off(d,u)}},l.set(s,f)}return f}let lk=Promise.resolve();async function Sce(e,t,n,r){await lk;const i=await qg(e,t);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(e,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),ro(e).subs.delete(i.tag)),s>0}async function ck(e,t,n,r){try{await lk}catch{}const i=Sce(e,t,n,r);return lk=i,await i}const xU=["then"];var tH;tH=I3;const Q5=class Q5{constructor(t,n,r,i){ce(this,"target");ce(this,"interface");ce(this,"runner");ce(this,"filters");ce(this,tH);ce(this,"fallback");ie(typeof t=="string"||GH(t),"invalid value for Contract target","target",t),r==null&&(r=null);const s=ak.from(n);ut(this,{target:t,runner:r,interface:s}),Object.defineProperty(this,I3,{value:{}});let o,a=null,l=null;if(i){const d=Ru(r);l=new tM(this.interface,d,i)}let f=new Map;if(typeof t=="string")if(An(t))a=t,o=Promise.resolve(t);else{const d=Nh(r,"resolveName");if(!G9(d))throw hr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(t).then(u=>{if(u==null)throw hr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return ro(this).addr=u,u})}else o=t.getAddress().then(d=>{if(d==null)throw new Error("TODO");return ro(this).addr=d,d});wce(this,{addrPromise:o,addr:a,deployTx:l,subs:f});const c=new Proxy({},{get:(d,u,h)=>{if(typeof u=="symbol"||xU.indexOf(u)>=0)return Reflect.get(d,u,h);try{return this.getEvent(u)}catch(g){if(!zi(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,u)=>xU.indexOf(u)>=0?Reflect.has(d,u):Reflect.has(d,u)||this.interface.hasEvent(String(u))});return ut(this,{filters:c}),ut(this,{fallback:s.receive||s.fallback?yce(this):null}),new Proxy(this,{get:(d,u,h)=>{if(typeof u=="symbol"||u in d||xU.indexOf(u)>=0)return Reflect.get(d,u,h);try{return d.getFunction(u)}catch(g){if(!zi(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,u)=>typeof u=="symbol"||u in d||xU.indexOf(u)>=0?Reflect.has(d,u):d.interface.hasFunction(u)})}connect(t){return new Q5(this.target,this.interface,t)}attach(t){return new Q5(t,this.interface,this.runner)}async getAddress(){return await ro(this).addrPromise}async getDeployedCode(){const t=Ru(this.runner);Ee(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await t.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ru(this.runner);return Ee(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return ro(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),xce(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),vce(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=ro(this),o=i||await s,{fragment:a,topics:l}=await nM(this,t),f={address:o,topics:l,fromBlock:n,toBlock:r},c=Ru(this.runner);return Ee(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(f)).map(d=>{let u=a;if(u==null)try{u=this.interface.getEvent(d.topics[0])}catch{}if(u)try{return new eM(d,this.interface,u)}catch(h){return new PV(d,h)}return new vb(d,c)})}async on(t,n){const r=await oD(this,"on",t);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(t,n){const r=await oD(this,"once",t);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(t,...n){return await ck(this,t,n,null)}async listenerCount(t){if(t){const i=await qg(this,t);return i?i.listeners.length:0}const{subs:n}=ro(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(t){if(t){const i=await qg(this,t);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=ro(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(t,n){const r=await qg(this,t);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),ro(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const n=await qg(this,t);if(!n)return this;n.stop(),ro(this).subs.delete(n.tag)}else{const{subs:n}=ro(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(t,n){return await this.on(t,n)}async removeListener(t,n){return await this.off(t,n)}static buildClass(t){class n extends Q5{constructor(i,s=null){super(i,t,s)}}return n}static from(t,n,r){return r==null&&(r=null),new this(t,n,r)}};let fk=Q5;function kce(){return fk}class uh extends kce(){}function kw(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):ie(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class Cce{constructor(t){ce(this,"name");ut(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,n){throw new Error("unsupported coin")}async decodeAddress(t,n){throw new Error("unsupported coin")}}const zV=new RegExp("^(ipfs)://(.*)$","i"),aD=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),zV,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Xd,nh,Kd,ap,N9,HV;const Rp=class Rp{constructor(t,n,r){be(this,Kd);ce(this,"provider");ce(this,"address");ce(this,"name");be(this,Xd);be(this,nh);ut(this,{provider:t,address:n,name:r}),J(this,Xd,null),J(this,nh,new uh(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return W(this,Xd)==null&&J(this,Xd,(async()=>{try{return await W(this,nh).supportsInterface("0x9061b923")}catch(t){if(zi(t,"CALL_EXCEPTION"))return!1;throw J(this,Xd,null),t}})()),await W(this,Xd)}async getAddress(t){if(t==null&&(t=60),t===60)try{const s=await Ie(this,Kd,ap).call(this,"addr(bytes32)");return s==null||s===e2?null:s}catch(s){if(zi(s,"CALL_EXCEPTION"))return null;throw s}if(t>=0&&t<2147483648){let s=t+2147483648;const o=await Ie(this,Kd,ap).call(this,"addr(bytes32,uint)",[s]);if(An(o,20))return bn(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof Cce&&s.supportsCoinType(t)){n=s;break}if(n==null)return null;const r=await Ie(this,Kd,ap).call(this,"addr(bytes32,uint)",[t]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(t,r);if(i!=null)return i;Ee(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const n=await Ie(this,Kd,ap).call(this,"text(bytes32,string)",[t]);return n==null||n==="0x"?null:n}async getContentHash(){const t=await Ie(this,Kd,ap).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const n=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${_se("0x"+n[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Ee(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:n});for(let r=0;r<aD.length;r++){const i=n.match(aD[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return t.push({type:"url",value:n}),{linkage:t,url:n};case"ipfs":{const o=kw(n);return t.push({type:"ipfs",value:n}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:s,value:n});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const l=(i[2]||"").split("/");if(l.length!==2)return t.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:t};const f=l[1],c=new uh(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const U=await c.ownerOf(f);if(a!==U)return t.push({type:"!owner",value:U}),{url:null,linkage:t};t.push({type:"owner",value:U})}else if(s==="erc1155"){const U=await c.balanceOf(a,f);if(!U)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:U.toString()})}let d=await c[o](f);if(d==null||d==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:d}),s==="erc1155"&&(d=d.replace("{id}",S0(f,32).substring(2)),t.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=kw(d)),t.push({type:"metadata-url",value:d});let u={};const h=await new Ef(d).send();h.assertOk();try{u=h.bodyJson}catch{try{t.push({type:"!metadata",value:h.bodyText})}catch{const x=h.body;return x&&t.push({type:"!metadata",value:Ze(x)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!u)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(u)});let g=u.image;if(typeof g!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(zV)==null)return t.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:g}),g=kw(g)}return t.push({type:"url",value:g}),{linkage:t,url:g}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const n=await t.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Ee(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(t,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await Ie(i=Rp,N9,HV).call(i,t,r);if(s!=null){const o=new Rp(t,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Xd=new WeakMap,nh=new WeakMap,Kd=new WeakSet,ap=async function(t,n){n=(n||[]).slice();const r=W(this,nh).interface;n.unshift(ik(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(t),Ee(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),n=[kle(this.name,255),r.encodeFunctionData(i,n)],t="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await W(this,nh)[t](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!zi(s,"CALL_EXCEPTION"))throw s}return null},N9=new WeakSet,HV=async function(t,n){const r=await Rp.getEnsAddress(t);try{const s=await new uh(r,["function resolver(bytes32) view returns (address)"],t).resolver(ik(n),{enableCcipRead:!0});return s===e2?null:s}catch(i){throw i}return null},be(Rp,N9);let N3=Rp;const lD=BigInt(0);function Vt(e,t){return function(n){return n==null?t:e(n)}}function X9(e,t){return n=>{if(t&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>e(r))}}function wb(e,t){return n=>{const r={};for(const i in e){let s=i;if(t&&i in t&&!(s in n)){for(const o of t[i])if(o in n){s=o;break}}try{const o=e[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Ee(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r}}function Ace(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}ie(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}function Hm(e){return ie(An(e,!0),"invalid data","value",e),e}function yi(e){return ie(An(e,32),"invalid hash","value",e),e}const Mce=wb({address:bn,blockHash:yi,blockNumber:Rt,data:Hm,index:Rt,removed:Vt(Ace,!1),topics:X9(yi),transactionHash:yi,transactionIndex:Rt},{index:["logIndex"]});function Tce(e){return Mce(e)}const Ice=wb({hash:Vt(yi),parentHash:yi,parentBeaconBlockRoot:Vt(yi,null),number:Rt,timestamp:Rt,nonce:Vt(Hm),difficulty:et,gasLimit:et,gasUsed:et,stateRoot:Vt(yi,null),receiptsRoot:Vt(yi,null),blobGasUsed:Vt(et,null),excessBlobGas:Vt(et,null),miner:Vt(bn),prevRandao:Vt(yi,null),extraData:Hm,baseFeePerGas:Vt(et)},{prevRandao:["mixHash"]});function Nce(e){const t=Ice(e);return t.transactions=e.transactions.map(n=>typeof n=="string"?n:VV(n)),t}const Rce=wb({transactionIndex:Rt,blockNumber:Rt,transactionHash:yi,address:bn,topics:X9(yi),data:Hm,index:Rt,blockHash:yi},{index:["logIndex"]});function _ce(e){return Rce(e)}const Pce=wb({to:Vt(bn,null),from:Vt(bn,null),contractAddress:Vt(bn,null),index:Rt,root:Vt(Ze),gasUsed:et,blobGasUsed:Vt(et,null),logsBloom:Vt(Hm),blockHash:yi,hash:yi,logs:X9(_ce),blockNumber:Rt,cumulativeGasUsed:et,effectiveGasPrice:Vt(et),blobGasPrice:Vt(et,null),status:Vt(Rt),type:Vt(Rt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Dce(e){return Pce(e)}function VV(e){e.to&&et(e.to)===lD&&(e.to="0x0000000000000000000000000000000000000000");const t=wb({hash:yi,index:Vt(Rt,void 0),type:n=>n==="0x"||n==null?0:Rt(n),accessList:Vt(i1,null),blobVersionedHashes:Vt(X9(yi,!0),null),blockHash:Vt(yi,null),blockNumber:Vt(Rt,null),transactionIndex:Vt(Rt,null),from:bn,gasPrice:Vt(et),maxPriorityFeePerGas:Vt(et),maxFeePerGas:Vt(et),maxFeePerBlobGas:Vt(et,null),gasLimit:et,to:Vt(bn,null),value:et,nonce:Rt,data:Hm,creates:Vt(bn,null),chainId:Vt(et,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(t.to==null&&t.creates==null&&(t.creates=Mae(t)),(e.type===1||e.type===2)&&e.accessList==null&&(t.accessList=[]),e.signature?t.signature=tl.from(e.signature):t.signature=tl.from(e),t.chainId==null){const n=t.signature.legacyChainId;n!=null&&(t.chainId=n)}return t.blockHash&&et(t.blockHash)===lD&&(t.blockHash=null),t}const Lce="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Eb{constructor(t){ce(this,"name");ut(this,{name:t})}clone(){return new Eb(this.name)}}class K9 extends Eb{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);ce(this,"effectiveBlock");ce(this,"txBase");ce(this,"txCreate");ce(this,"txDataZero");ce(this,"txDataNonzero");ce(this,"txAccessListStorageKey");ce(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),ie(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),ut(this,i)}clone(){return new K9(this.effectiveBlock,this)}}class Y9 extends Eb{constructor(n,r){super("org.ethers.plugins.network.Ens");ce(this,"address");ce(this,"targetNetwork");ut(this,{address:n||Lce,targetNetwork:r??1})}clone(){return new Y9(this.address,this.targetNetwork)}}var hb,pb;class Oce extends Eb{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");be(this,hb);be(this,pb);J(this,hb,n),J(this,pb,r)}get url(){return W(this,hb)}get processFunc(){return W(this,pb)}clone(){return this}}hb=new WeakMap,pb=new WeakMap;const Cw=new Map;var Em,Sm,Yd;const _p=class _p{constructor(t,n){be(this,Em);be(this,Sm);be(this,Yd);J(this,Em,t),J(this,Sm,et(n)),J(this,Yd,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return W(this,Em)}set name(t){J(this,Em,t)}get chainId(){return W(this,Sm)}set chainId(t){J(this,Sm,et(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===et(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===et(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===et(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(W(this,Yd).values())}attachPlugin(t){if(W(this,Yd).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return W(this,Yd).set(t.name,t.clone()),this}getPlugin(t){return W(this,Yd).get(t)||null}getPlugins(t){return this.plugins.filter(n=>n.name.split("#")[0]===t)}clone(){const t=new _p(this.name,this.chainId);return this.plugins.forEach(n=>{t.attachPlugin(n.clone())}),t}computeIntrinsicGas(t){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new K9;let r=n.txBase;if(t.to==null&&(r+=n.txCreate),t.data)for(let i=2;i<t.data.length;i+=2)t.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(t.accessList){const i=i1(t.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(t){if(jce(),t==null)return _p.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const n=Cw.get(t);if(n)return n();if(typeof t=="bigint")return new _p("unknown",t);ie(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){ie(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const n=new _p(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&n.attachPlugin(new Y9(t.ensAddress,t.ensNetwork)),n}ie(!1,"invalid network","network",t)}static register(t,n){typeof t=="number"&&(t=BigInt(t));const r=Cw.get(t);r&&ie(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),Cw.set(t,n)}};Em=new WeakMap,Sm=new WeakMap,Yd=new WeakMap;let ql=_p;function cD(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${e}`);for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function fD(e){return new Oce(e,async(t,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),t()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:cD(a.maxFee,9),maxPriorityFeePerGas:cD(a.maxPriorityFee,9)}}catch(s){Ee(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let dD=!1;function jce(){if(dD)return;dD=!0;function e(t,n,r){const i=function(){const s=new ql(t,n);return r.ensNetwork!=null&&s.attachPlugin(new Y9(null,r.ensNetwork)),s.attachPlugin(new K9),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};ql.register(t,i),ql.register(n,i),r.altNames&&r.altNames.forEach(s=>{ql.register(s,i)})}e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[fD("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[fD("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1})}function dk(e){return JSON.parse(JSON.stringify(e))}var sf,Oo,Zd,Fl,km,Ay;class Bce{constructor(t){be(this,km);be(this,sf);be(this,Oo);be(this,Zd);be(this,Fl);J(this,sf,t),J(this,Oo,null),J(this,Zd,4e3),J(this,Fl,-2)}get pollingInterval(){return W(this,Zd)}set pollingInterval(t){J(this,Zd,t)}start(){W(this,Oo)||(J(this,Oo,W(this,sf)._setTimeout(Ie(this,km,Ay).bind(this),W(this,Zd))),Ie(this,km,Ay).call(this))}stop(){W(this,Oo)&&(W(this,sf)._clearTimeout(W(this,Oo)),J(this,Oo,null))}pause(t){this.stop(),t&&J(this,Fl,-2)}resume(){this.start()}}sf=new WeakMap,Oo=new WeakMap,Zd=new WeakMap,Fl=new WeakMap,km=new WeakSet,Ay=async function(){try{const t=await W(this,sf).getBlockNumber();if(W(this,Fl)===-2){J(this,Fl,t);return}if(t!==W(this,Fl)){for(let n=W(this,Fl)+1;n<=t;n++){if(W(this,Oo)==null)return;await W(this,sf).emit("block",n)}J(this,Fl,t)}}catch{}W(this,Oo)!=null&&J(this,Oo,W(this,sf)._setTimeout(Ie(this,km,Ay).bind(this),W(this,Zd)))};var rh,ih,qd;class rM{constructor(t){be(this,rh);be(this,ih);be(this,qd);J(this,rh,t),J(this,qd,!1),J(this,ih,n=>{this._poll(n,W(this,rh))})}async _poll(t,n){throw new Error("sub-classes must override this")}start(){W(this,qd)||(J(this,qd,!0),W(this,ih).call(this,-2),W(this,rh).on("block",W(this,ih)))}stop(){W(this,qd)&&(J(this,qd,!1),W(this,rh).off("block",W(this,ih)))}pause(t){this.stop()}resume(){this.start()}}rh=new WeakMap,ih=new WeakMap,qd=new WeakMap;var Cm,of;class Fce extends rM{constructor(n,r){super(n);be(this,Cm);be(this,of);J(this,Cm,r),J(this,of,-2)}pause(n){n&&J(this,of,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(W(this,Cm));i!=null&&(W(this,of)===-2?J(this,of,i.number):i.number>W(this,of)&&(r.emit(W(this,Cm),i.number),J(this,of,i.number)))}}Cm=new WeakMap,of=new WeakMap;var R9;class $ce extends rM{constructor(n,r){super(n);be(this,R9);J(this,R9,dk(r))}async _poll(n,r){throw new Error("@TODO")}}R9=new WeakMap;var Am;class zce extends rM{constructor(n,r){super(n);be(this,Am);J(this,Am,r)}async _poll(n,r){const i=await r.getTransactionReceipt(W(this,Am));i&&r.emit(W(this,Am),i)}}Am=new WeakMap;var af,Mm,Tm,Qd,jo,_9,WV;class iM{constructor(t,n){be(this,_9);be(this,af);be(this,Mm);be(this,Tm);be(this,Qd);be(this,jo);J(this,af,t),J(this,Mm,dk(n)),J(this,Tm,Ie(this,_9,WV).bind(this)),J(this,Qd,!1),J(this,jo,-2)}start(){W(this,Qd)||(J(this,Qd,!0),W(this,jo)===-2&&W(this,af).getBlockNumber().then(t=>{J(this,jo,t)}),W(this,af).on("block",W(this,Tm)))}stop(){W(this,Qd)&&(J(this,Qd,!1),W(this,af).off("block",W(this,Tm)))}pause(t){this.stop(),t&&J(this,jo,-2)}resume(){this.start()}}af=new WeakMap,Mm=new WeakMap,Tm=new WeakMap,Qd=new WeakMap,jo=new WeakMap,_9=new WeakSet,WV=async function(t){if(W(this,jo)===-2)return;const n=dk(W(this,Mm));n.fromBlock=W(this,jo)+1,n.toBlock=t;const r=await W(this,af).getLogs(n);if(r.length===0){W(this,jo)<t-60&&J(this,jo,t-60);return}for(const i of r)W(this,af).emit(W(this,Mm),i),J(this,jo,i.blockNumber)};const Hce=BigInt(2),Vce=10;function vU(e){return e&&typeof e.then=="function"}function My(e,t){return e+":"+JSON.stringify(t,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class GV{constructor(t){ce(this,"name");ut(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Wce(e){return JSON.parse(JSON.stringify(e))}function uk(e){return e=Array.from(new Set(e).values()),e.sort(),e}async function Aw(e,t){if(e==null)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),typeof e=="string")switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(An(e,32)){const n=e.toLowerCase();return{type:"transaction",tag:My("tx",{hash:n}),hash:n}}if(e.orphan){const n=e;return{type:"orphan",tag:My("orphan",n),filter:Wce(n)}}if(e.address||e.topics){const n=e,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?uk(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{An(a)?i.push(a):s.push((async()=>{i.push(await cs(a,t))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=uk(i.map(a=>a.toLowerCase()))}return{filter:r,tag:My("event",r),type:"event"}}ie(!1,"unknown ProviderEvent","event",e)}function Mw(){return new Date().getTime()}const Gce={cacheTimeout:250,pollingInterval:4e3};var Li,Jd,Oi,Im,ao,sh,e0,lf,mb,Bo,Nm,Rm,Ot,no,hk,pk,Qg,mk,Jg,Ty;class Xce{constructor(t,n){be(this,Ot);be(this,Li);be(this,Jd);be(this,Oi);be(this,Im);be(this,ao);be(this,sh);be(this,e0);be(this,lf);be(this,mb);be(this,Bo);be(this,Nm);be(this,Rm);if(J(this,Rm,Object.assign({},Gce,n||{})),t==="any")J(this,sh,!0),J(this,ao,null);else if(t){const r=ql.from(t);J(this,sh,!1),J(this,ao,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else J(this,sh,!1),J(this,ao,null);J(this,lf,-1),J(this,e0,new Map),J(this,Li,new Map),J(this,Jd,new Map),J(this,Oi,null),J(this,Im,!1),J(this,mb,1),J(this,Bo,new Map),J(this,Nm,!1)}get pollingInterval(){return W(this,Rm).pollingInterval}get provider(){return this}get plugins(){return Array.from(W(this,Jd).values())}attachPlugin(t){if(W(this,Jd).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return W(this,Jd).set(t.name,t.connect(this)),this}getPlugin(t){return W(this,Jd).get(t)||null}get disableCcipRead(){return W(this,Nm)}set disableCcipRead(t){J(this,Nm,!!t)}async ccipReadFetch(t,n,r){if(this.disableCcipRead||r.length===0||t.to==null)return null;const i=t.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],f=l.replace("{sender}",i).replace("{data}",s),c=new Ef(f);l.indexOf("{data}")===-1&&(c.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:a,urls:r});let d="unknown error";const u=await c.send();try{const h=u.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:h}),h.data;h.message&&(d=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:h})}catch{}Ee(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:l,errorMessage:d}}),o.push(d)}Ee(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:o}})}_wrapBlock(t,n){return new uce(Nce(t),this)}_wrapLog(t,n){return new vb(Tce(t),this)}_wrapTransactionReceipt(t,n){return new NV(Dce(t),this)}_wrapTransactionResponse(t,n){return new l2(VV(t),this)}_detectNetwork(){Ee(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){Ee(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=Rt(await Ie(this,Ot,no).call(this,{method:"getBlockNumber"}),"%response");return W(this,lf)>=0&&J(this,lf,t),t}_getAddress(t){return cs(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(An(t))return An(t,32)?t:gp(t);if(typeof t=="bigint"&&(t=Rt(t,"blockTag")),typeof t=="number")return t>=0?gp(t):W(this,lf)>=0?gp(W(this,lf)+t):this.getBlockNumber().then(n=>gp(n+t));ie(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const n=(t.topics||[]).map(l=>l==null?null:Array.isArray(l)?uk(l.map(f=>f.toLowerCase())):l.toLowerCase()),r="blockHash"in t?t.blockHash:void 0,i=(l,f,c)=>{let d;switch(l.length){case 0:break;case 1:d=l[0];break;default:l.sort(),d=l}if(r&&(f!=null||c!=null))throw new Error("invalid filter");const u={};return d&&(u.address=d),n.length&&(u.topics=n),f&&(u.fromBlock=f),c&&(u.toBlock=c),r&&(u.blockHash=r),u};let s=[];if(t.address)if(Array.isArray(t.address))for(const l of t.address)s.push(this._getAddress(l));else s.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(t){const n=T3(t),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=cs(n[i],this);vU(s)?r.push(async function(){n[i]=await s}()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);vU(i)?r.push(async function(){n.blockTag=await i}()):n.blockTag=i}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(W(this,ao)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw W(this,ao)===i&&J(this,ao,null),s}})();return J(this,ao,i),(await i).clone()}const t=W(this,ao),[n,r]=await Promise.all([t,this._detectNetwork()]);return n.chainId!==r.chainId&&(W(this,sh)?(this.emit("network",r,n),W(this,ao)===t&&J(this,ao,Promise.resolve(r))):Ee(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const t=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await is({_block:Ie(this,Ot,mk).call(this,"latest",!1),gasPrice:(async()=>{try{const c=await Ie(this,Ot,no).call(this,{method:"getGasPrice"});return et(c,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const c=await Ie(this,Ot,no).call(this,{method:"getPriorityFee"});return et(c,"%response")}catch{}return null})()});let a=null,l=null;const f=this._wrapBlock(i,t);return f&&f.baseFeePerGas&&(l=o??BigInt("1000000000"),a=f.baseFeePerGas*Hce+l),new iD(s,a,l)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ef(r.url),s=await r.processFunc(n,this,i);return new iD(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(t){let n=this._getTransactionRequest(t);return vU(n)&&(n=await n),et(await Ie(this,Ot,no).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(t){const{tx:n,blockTag:r}=await is({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await Ie(this,Ot,pk).call(this,Ie(this,Ot,hk).call(this,n,r,t.enableCcipRead?0:-1))}async getBalance(t,n){return et(await Ie(this,Ot,Qg).call(this,{method:"getBalance"},t,n),"%response")}async getTransactionCount(t,n){return Rt(await Ie(this,Ot,Qg).call(this,{method:"getTransactionCount"},t,n),"%response")}async getCode(t,n){return Ze(await Ie(this,Ot,Qg).call(this,{method:"getCode"},t,n))}async getStorage(t,n,r){const i=et(n,"position");return Ze(await Ie(this,Ot,Qg).call(this,{method:"getStorage",position:i},t,r))}async broadcastTransaction(t){const{blockNumber:n,hash:r,network:i}=await is({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),s=bV.from(t);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(t,n){const{network:r,params:i}=await is({network:this.getNetwork(),params:Ie(this,Ot,mk).call(this,t,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(t){const{network:n,params:r}=await is({network:this.getNetwork(),params:Ie(this,Ot,no).call(this,{method:"getTransaction",hash:t})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(t){const{network:n,params:r}=await is({network:this.getNetwork(),params:Ie(this,Ot,no).call(this,{method:"getTransactionReceipt",hash:t})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await Ie(this,Ot,no).call(this,{method:"getTransaction",hash:t});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(t){const{result:n}=await is({network:this.getNetwork(),result:Ie(this,Ot,no).call(this,{method:"getTransactionResult",hash:t})});return n==null?null:Ze(n)}async getLogs(t){let n=this._getFilter(t);vU(n)&&(n=await n);const{network:r,params:i}=await is({network:this.getNetwork(),params:Ie(this,Ot,no).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(t){Ee(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await N3.fromName(this,t)}async getAvatar(t){const n=await this.getResolver(t);return n?await n.getAvatar():null}async resolveName(t){const n=await this.getResolver(t);return n?await n.getAddress():null}async lookupAddress(t){t=bn(t);const n=ik(t.substring(2).toLowerCase()+".addr.reverse");try{const r=await N3.getEnsAddress(this),s=await new uh(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===e2)return null;const a=await new uh(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==t?null:a}catch(r){if(zi(r,"BAD_DATA")&&r.value==="0x"||zi(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(t,n,r){const i=n??1;return i===0?this.getTransactionReceipt(t):new Promise(async(s,o)=>{let a=null;const l=async f=>{try{const c=await this.getTransactionReceipt(t);if(c!=null&&f-c.blockNumber+1>=i){s(c),a&&(clearTimeout(a),a=null);return}}catch(c){console.log("EEE",c)}this.once("block",l)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(hr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(t){Ee(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const n=W(this,Bo).get(t);n&&(n.timer&&clearTimeout(n.timer),W(this,Bo).delete(t))}_setTimeout(t,n){n==null&&(n=0);const r=yg(this,mb)._++,i=()=>{W(this,Bo).delete(r),t()};if(this.paused)W(this,Bo).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);W(this,Bo).set(r,{timer:s,func:i,time:Mw()})}return r}_forEachSubscriber(t){for(const n of W(this,Li).values())t(n.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new GV(t.type);case"block":{const n=new Bce(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new Fce(this,t.type);case"event":return new iM(this,t.filter);case"transaction":return new zce(this,t.hash);case"orphan":return new $ce(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,n){for(const r of W(this,Li).values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),W(this,Oi)!=null&&n.pause(W(this,Oi));break}}async on(t,n){const r=await Ie(this,Ot,Ty).call(this,t);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,W(this,Oi)!=null&&r.subscriber.pause(W(this,Oi))),this}async once(t,n){const r=await Ie(this,Ot,Ty).call(this,t);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,W(this,Oi)!=null&&r.subscriber.pause(W(this,Oi))),this}async emit(t,...n){const r=await Ie(this,Ot,Jg).call(this,t,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new aH(this,o?null:s,t);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),W(this,Li).delete(r.tag)),i>0}async listenerCount(t){if(t){const r=await Ie(this,Ot,Jg).call(this,t);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of W(this,Li).values())n+=r.length;return n}async listeners(t){if(t){const r=await Ie(this,Ot,Jg).call(this,t);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of W(this,Li).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(t,n){const r=await Ie(this,Ot,Jg).call(this,t);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),W(this,Li).delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:n,started:r,subscriber:i}=await Ie(this,Ot,Ty).call(this,t);r&&i.stop(),W(this,Li).delete(n)}else for(const[n,{started:r,subscriber:i}]of W(this,Li))r&&i.stop(),W(this,Li).delete(n);return this}async addListener(t,n){return await this.on(t,n)}async removeListener(t,n){return this.off(t,n)}get destroyed(){return W(this,Im)}destroy(){this.removeAllListeners();for(const t of W(this,Bo).keys())this._clearTimeout(t);J(this,Im,!0)}get paused(){return W(this,Oi)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(J(this,lf,-1),W(this,Oi)!=null){if(W(this,Oi)==!!t)return;Ee(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(t)),J(this,Oi,!!t);for(const n of W(this,Bo).values())n.timer&&clearTimeout(n.timer),n.time=Mw()-n.time}resume(){if(W(this,Oi)!=null){this._forEachSubscriber(t=>t.resume()),J(this,Oi,null);for(const t of W(this,Bo).values()){let n=t.time;n<0&&(n=0),t.time=Mw(),setTimeout(t.func,n)}}}}Li=new WeakMap,Jd=new WeakMap,Oi=new WeakMap,Im=new WeakMap,ao=new WeakMap,sh=new WeakMap,e0=new WeakMap,lf=new WeakMap,mb=new WeakMap,Bo=new WeakMap,Nm=new WeakMap,Rm=new WeakMap,Ot=new WeakSet,no=async function(t){const n=W(this,Rm).cacheTimeout;if(n<0)return await this._perform(t);const r=My(t.method,t);let i=W(this,e0).get(r);return i||(i=this._perform(t),W(this,e0).set(r,i),setTimeout(()=>{W(this,e0).get(r)===i&&W(this,e0).delete(r)},n)),await i},hk=async function(t,n,r){Ee(r<Vce,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:n,enableCcipRead:!0})});const i=T3(t);try{return Ze(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&OA(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&pr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await cs(i.to,this);let l;try{l=Qce(pr(s.data,4))}catch(d){Ee(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Ee(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const f=await this.ccipReadFetch(i,l.calldata,l.urls);Ee(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const c={to:a,data:Er([l.selector,qce([f,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const d=await Ie(this,Ot,hk).call(this,c,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:d}),d}}throw s}},pk=async function(t){const{value:n}=await is({network:this.getNetwork(),value:t});return n},Qg=async function(t,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await Ie(this,Ot,pk).call(this,Ie(this,Ot,no).call(this,Object.assign(t,{address:i,blockTag:s})))},mk=async function(t,n){if(An(t,32))return await Ie(this,Ot,no).call(this,{method:"getBlock",blockHash:t,includeTransactions:n});let r=this._getBlockTag(t);return typeof r!="string"&&(r=await r),await Ie(this,Ot,no).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Jg=async function(t,n){let r=await Aw(t,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await Aw({orphan:"drop-log",log:n[0]},this)),W(this,Li).get(r.tag)||null},Ty=async function(t){const n=await Aw(t,this),r=n.tag;let i=W(this,Li).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},W(this,Li).set(r,i)),i};function Kce(e,t){try{const n=gk(e,t);if(n)return x3(n)}catch{}return null}function gk(e,t){if(e==="0x")return null;try{const n=Rt(pr(e,t,t+32)),r=Rt(pr(e,n,n+32));return pr(e,n+32,n+32+r)}catch{}return null}function uD(e){const t=as(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function Yce(e){if(e.length%32===0)return e;const t=new Uint8Array(Math.ceil(e.length/32)*32);return t.set(e),t}const Zce=new Uint8Array([]);function qce(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(Zce),n+=32;for(let r=0;r<e.length;r++){const i=Wt(e[r]);t[r]=uD(n),t.push(uD(i.length)),t.push(Yce(i)),n+=32+Math.ceil(i.length/32)*32}return Er(t)}const hD="0x0000000000000000000000000000000000000000000000000000000000000000";function Qce(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Ee(Pp(e)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=pr(e,0,32);Ee(pr(n,0,12)===pr(hD,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=pr(n,12);try{const r=[],i=Rt(pr(e,32,64)),s=Rt(pr(e,i,i+32)),o=pr(e,i+32);for(let a=0;a<s;a++){const l=Kce(o,a*32);if(l==null)throw new Error("abort");r.push(l)}t.urls=r}catch{Ee(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=gk(e,64);if(r==null)throw new Error("abort");t.calldata=r}catch{Ee(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Ee(pr(e,100,128)===pr(hD,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=pr(e,96,100);try{const r=gk(e,128);if(r==null)throw new Error("abort");t.extraData=r}catch{Ee(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>t[r]),t}function $1(e,t){if(e.provider)return e.provider;Ee(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function pD(e,t){let n=T3(t);if(n.to!=null&&(n.to=cs(n.to,e)),n.from!=null){const r=n.from;n.from=Promise.all([e.getAddress(),cs(r,e)]).then(([i,s])=>(ie(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=e.getAddress();return await is(n)}class Jce{constructor(t){ce(this,"provider");ut(this,{provider:t||null})}async getNonce(t){return $1(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await pD(this,t)}async populateTransaction(t){const n=$1(this,"populateTransaction"),r=await pD(this,t);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=et(r.chainId);ie(o===i.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?ie(!1,"eip-1559 transaction do not support gasPrice","tx",t):(r.type===0||r.type===1)&&s&&ie(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Ee(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Ee(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Ee(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await is(r)}async estimateGas(t){return $1(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return $1(this,"call").call(await this.populateCall(t))}async resolveName(t){return await $1(this,"resolveName").resolveName(t)}async sendTransaction(t){const n=$1(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const i=bV.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}}function efe(e){return JSON.parse(JSON.stringify(e))}var ns,$l,oh,t0,ah,_m,P0,bk,Uk;class XV{constructor(t){be(this,P0);be(this,ns);be(this,$l);be(this,oh);be(this,t0);be(this,ah);be(this,_m);J(this,ns,t),J(this,$l,null),J(this,oh,Ie(this,P0,bk).bind(this)),J(this,t0,!1),J(this,ah,null),J(this,_m,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,n){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){W(this,t0)||(J(this,t0,!0),Ie(this,P0,bk).call(this,-2))}stop(){W(this,t0)&&(J(this,t0,!1),J(this,_m,!0),Ie(this,P0,Uk).call(this),W(this,ns).off("block",W(this,oh)))}pause(t){t&&Ie(this,P0,Uk).call(this),W(this,ns).off("block",W(this,oh))}resume(){this.start()}}ns=new WeakMap,$l=new WeakMap,oh=new WeakMap,t0=new WeakMap,ah=new WeakMap,_m=new WeakMap,P0=new WeakSet,bk=async function(t){try{W(this,$l)==null&&J(this,$l,this._subscribe(W(this,ns)));let n=null;try{n=await W(this,$l)}catch(s){if(!zi(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){J(this,$l,null),W(this,ns)._recoverSubscriber(this,this._recover(W(this,ns)));return}const r=await W(this,ns).getNetwork();if(W(this,ah)||J(this,ah,r),W(this,ah).chainId!==r.chainId)throw new Error("chaid changed");if(W(this,_m))return;const i=await W(this,ns).send("eth_getFilterChanges",[n]);await this._emitResults(W(this,ns),i)}catch(n){console.log("@TODO",n)}W(this,ns).once("block",W(this,oh))},Uk=function(){const t=W(this,$l);t&&(J(this,$l,null),t.then(n=>{W(this,ns).destroyed||W(this,ns).send("eth_uninstallFilter",[n])}))};var lh;class tfe extends XV{constructor(n,r){super(n);be(this,lh);J(this,lh,efe(r))}_recover(n){return new iM(n,W(this,lh))}async _subscribe(n){return await n.send("eth_newFilter",[W(this,lh)])}async _emitResults(n,r){for(const i of r)n.emit(W(this,lh),n._wrapLog(i,n._network))}}lh=new WeakMap;class nfe extends XV{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,n){for(const r of n)t.emit("pending",r)}}const rfe="bigint,boolean,function,number,string,symbol".split(/,/g);function Iy(e){if(e==null||rfe.indexOf(typeof e)>=0||typeof e.getAddress=="function")return e;if(Array.isArray(e))return e.map(Iy);if(typeof e=="object")return Object.keys(e).reduce((t,n)=>(t[n]=e[n],t),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function ife(e){return new Promise(t=>{setTimeout(t,e)})}function z1(e){return e&&e.toLowerCase()}function mD(e){return e&&typeof e.pollingInterval=="number"}const KV={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Tw extends Jce{constructor(n,r){super(n);ce(this,"address");r=bn(r),ut(this,{address:r})}connect(n){Ee(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=Iy(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await cs(o,this.provider);ie(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await cs(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const f=async()=>{try{const c=await this.provider.getTransaction(i);if(c!=null){s(c.replaceableTransaction(r));return}}catch(c){if(zi(c,"CANCELLED")||zi(c,"BAD_DATA")||zi(c,"NETWORK_ERROR")){c.info==null&&(c.info={}),c.info.sendTransactionHash=i,o(c);return}if(zi(c,"INVALID_ARGUMENT")&&(l++,c.info==null&&(c.info={}),c.info.sendTransactionHash=i,l>10)){o(c);return}this.provider.emit("error",hr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{f()},a.pop()||4e3)};f()})}async signTransaction(n){const r=Iy(n);if(r.from){const s=await cs(r.from,this.provider);ie(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?Uf(n):n;return await this.provider.send("personal_sign",[Ze(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=Iy(i),o=await M3.resolveNames(n,r,s,async a=>{const l=await cs(a);return ie(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(M3.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Uf(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ze(r)])}}var ch,Pm,cf,zl,Da,Fo,Ns,gb,yk;class sfe extends Xce{constructor(n,r){super(n,r);be(this,gb);be(this,ch);be(this,Pm);be(this,cf);be(this,zl);be(this,Da);be(this,Fo);be(this,Ns);J(this,Pm,1),J(this,ch,Object.assign({},KV,r||{})),J(this,cf,[]),J(this,zl,null),J(this,Fo,null),J(this,Ns,null);{let s=null;const o=new Promise(a=>{s=a});J(this,Da,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(ie(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&J(this,Fo,ql.from(n))):i&&(ie(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),J(this,Fo,i))}_getOption(n){return W(this,ch)[n]}get _network(){return Ee(W(this,Fo),"network is not available yet","NETWORK_ERROR"),W(this,Fo)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&et(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(W(this,Fo))return W(this,Fo)}else return n;return W(this,Ns)?await W(this,Ns):this.ready?(J(this,Ns,(async()=>{try{const r=ql.from(et(await this.send("eth_chainId",[])));return J(this,Ns,null),r}catch(r){throw J(this,Ns,null),r}})()),await W(this,Ns)):(J(this,Ns,(async()=>{const r={id:yg(this,Pm)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],J(this,Ns,null)}catch(s){throw J(this,Ns,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return ql.from(et(i.result));throw this.getRpcError(r,i)})()),await W(this,Ns))}_start(){W(this,Da)==null||W(this,Da).resolve==null||(W(this,Da).resolve(),J(this,Da,null),(async()=>{for(;W(this,Fo)==null&&!this.destroyed;)try{J(this,Fo,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",hr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await ife(1e3)}Ie(this,gb,yk).call(this)})())}async _waitUntilReady(){if(W(this,Da)!=null)return await W(this,Da).promise}_getSubscriber(n){return n.type==="pending"?new nfe(this):n.type==="event"?this._getOption("polling")?new iM(this,n.filter):new tfe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new GV("orphan"):super._getSubscriber(n)}get ready(){return W(this,Da)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=gp(et(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=Ze(n[i]))}),n.accessList&&(r.accessList=i1(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[z1(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[z1(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[z1(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[z1(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(z1):n.filter.address=z1(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return hr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=xk(s),f=a2.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return f.info={error:s,payload:n},f}const o=JSON.stringify(lfe(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return hr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return hr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return hr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return hr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return hr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?hr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):hr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(hr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=yg(this,Pm)._++,s=new Promise((o,a)=>{W(this,cf).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return Ie(this,gb,yk).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new Tw(this,s[n])}const{accounts:i}=await is({network:this.getNetwork(),accounts:r});n=bn(n);for(const s of i)if(bn(s)===n)return new Tw(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Tw(this,r))}destroy(){W(this,zl)&&(clearTimeout(W(this,zl)),J(this,zl,null));for(const{payload:n,reject:r}of W(this,cf))r(hr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));J(this,cf,[]),super.destroy()}}ch=new WeakMap,Pm=new WeakMap,cf=new WeakMap,zl=new WeakMap,Da=new WeakMap,Fo=new WeakMap,Ns=new WeakMap,gb=new WeakSet,yk=function(){if(W(this,zl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");J(this,zl,setTimeout(()=>{J(this,zl,null);const r=W(this,cf);for(J(this,cf,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==W(this,ch).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>W(this,ch).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:f}of i){if(this.destroyed){l(hr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const c=o.filter(d=>d.id===f.id)[0];if(c==null){const d=hr("missing response for request","BAD_DATA",{value:o,info:{payload:f}});this.emit("error",d),l(d);continue}if("error"in c){l(this.getRpcError(f,c));continue}a(c.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var n0;class ofe extends sfe{constructor(n,r){super(n,r);be(this,n0);let i=this._getOption("pollingInterval");i==null&&(i=KV.pollingInterval),J(this,n0,i)}_getSubscriber(n){const r=super._getSubscriber(n);return mD(r)&&(r.pollingInterval=W(this,n0)),r}get pollingInterval(){return W(this,n0)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");J(this,n0,n),this._forEachSubscriber(r=>{mD(r)&&(r.pollingInterval=W(this,n0))})}}n0=new WeakMap;var Dm;class afe extends ofe{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);be(this,Dm);typeof n=="string"?J(this,Dm,new Ef(n)):J(this,Dm,n.clone())}_getConnection(){return W(this,Dm).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}Dm=new WeakMap;function xk(e){if(e==null)return null;if(typeof e.message=="string"&&e.message.match(/revert/i)&&An(e.data))return{message:e.message,data:e.data};if(typeof e=="object"){for(const t in e){const n=xk(e[t]);if(n)return n}return null}if(typeof e=="string")try{return xk(JSON.parse(e))}catch{}return null}function vk(e,t){if(e!=null){if(typeof e.message=="string"&&t.push(e.message),typeof e=="object")for(const n in e)vk(e[n],t);if(typeof e=="string")try{return vk(JSON.parse(e),t)}catch{}}}function lfe(e){const t=[];return vk(e,t),t}const cfe="hh-sol-artifact-1",ffe="CanonThread",dfe="contracts/CanonThread.sol",ufe=[{inputs:[{internalType:"address",name:"_tokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"contentType",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ContentAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"oldContentHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"}],name:"ContentUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"nodeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"NodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"proposer",type:"address"},{indexed:!1,internalType:"uint256",name:"stake",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"bool",name:"passed",type:"bool"}],name:"ProposalExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ThreadCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"string",name:"newMetadataHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"}],name:"ThreadUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"bool",name:"support",type:"bool"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Voted",type:"event"},{inputs:[],name:"MINIMUM_STAKE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_BUFFER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_PERIOD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"_nodeType",type:"uint8"}],name:"createNode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"}],name:"createThread",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"executeProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"hasVoted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_hash",type:"string"}],name:"isValidIPFSHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"nodeCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"nodes",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposalCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"string",name:"proposedMetadataHash",type:"string"},{internalType:"string",name:"proposedContentHash",type:"string"},{internalType:"address",name:"proposer",type:"address"},{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"votesFor",type:"uint256"},{internalType:"uint256",name:"votesAgainst",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"bool",name:"passed",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"},{internalType:"uint256",name:"_stake",type:"uint256"}],name:"proposeUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"threadCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"threads",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"version",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract CanonToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"}],name:"updateThread",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"bool",name:"_support",type:"bool"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],hfe="0x60806040523480156200001157600080fd5b50604051620030f2380380620030f28339818101604052810190620000379190620000f1565b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060006006819055505062000123565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620000b9826200008c565b9050919050565b620000cb81620000ac565b8114620000d757600080fd5b50565b600081519050620000eb81620000c0565b92915050565b6000602082840312156200010a576200010962000087565b5b60006200011a84828501620000da565b91505092915050565b612fbf80620001336000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",pfe="0x608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",mfe={},gfe={},bfe={_format:cfe,contractName:ffe,sourceName:dfe,abi:ufe,bytecode:hfe,deployedBytecode:pfe,linkReferences:mfe,deployedLinkReferences:gfe},Ufe="hh-sol-artifact-1",yfe="CanonToken",xfe="contracts/CanonToken.sol",vfe=[{inputs:[{internalType:"uint256",name:"initialSupply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],wfe="0x60806040523480156200001157600080fd5b5060405162001dc738038062001dc7833981810160405281019062000037919062000560565b336040518060400160405280600a81526020017f43616e6f6e546f6b656e000000000000000000000000000000000000000000008152506040518060400160405280600581526020017f43414e4f4e0000000000000000000000000000000000000000000000000000008152508160039081620000b5919062000802565b508060049081620000c7919062000802565b505050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036200013f5760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016200013691906200092e565b60405180910390fd5b62000150816200019460201b60201c565b506200018d33620001666200025a60201b60201c565b600a62000174919062000adb565b8362000181919062000b2c565b6200026360201b60201c565b5062000c1d565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60006012905090565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620002d85760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401620002cf91906200092e565b60405180910390fd5b620002ec60008383620002f060201b60201c565b5050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036200034657806002600082825462000339919062000b77565b925050819055506200041c565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015620003d5578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401620003cc9392919062000bc3565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620004675780600260008282540392505081905550620004b4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405162000513919062000c00565b60405180910390a3505050565b600080fd5b6000819050919050565b6200053a8162000525565b81146200054657600080fd5b50565b6000815190506200055a816200052f565b92915050565b60006020828403121562000579576200057862000520565b5b6000620005898482850162000549565b91505092915050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200061457607f821691505b6020821081036200062a5762000629620005cc565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620006947fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000655565b620006a0868362000655565b95508019841693508086168417925050509392505050565b6000819050919050565b6000620006e3620006dd620006d78462000525565b620006b8565b62000525565b9050919050565b6000819050919050565b620006ff83620006c2565b620007176200070e82620006ea565b84845462000662565b825550505050565b600090565b6200072e6200071f565b6200073b818484620006f4565b505050565b5b8181101562000763576200075760008262000724565b60018101905062000741565b5050565b601f821115620007b2576200077c8162000630565b620007878462000645565b8101602085101562000797578190505b620007af620007a68562000645565b83018262000740565b50505b505050565b600082821c905092915050565b6000620007d760001984600802620007b7565b1980831691505092915050565b6000620007f28383620007c4565b9150826002028217905092915050565b6200080d8262000592565b67ffffffffffffffff8111156200082957620008286200059d565b5b620008358254620005fb565b6200084282828562000767565b600060209050601f8311600181146200087a576000841562000865578287015190505b620008718582620007e4565b865550620008e1565b601f1984166200088a8662000630565b60005b82811015620008b4578489015182556001820191506020850194506020810190506200088d565b86831015620008d45784890151620008d0601f891682620007c4565b8355505b6001600288020188555050505b505050505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200091682620008e9565b9050919050565b620009288162000909565b82525050565b60006020820190506200094560008301846200091d565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b6001851115620009d957808604811115620009b157620009b06200094b565b5b6001851615620009c15780820291505b8081029050620009d1856200097a565b945062000991565b94509492505050565b600082620009f4576001905062000ac7565b8162000a04576000905062000ac7565b816001811462000a1d576002811462000a285762000a5e565b600191505062000ac7565b60ff84111562000a3d5762000a3c6200094b565b5b8360020a91508482111562000a575762000a566200094b565b5b5062000ac7565b5060208310610133831016604e8410600b841016171562000a985782820a90508381111562000a925762000a916200094b565b5b62000ac7565b62000aa7848484600162000987565b9250905081840481111562000ac15762000ac06200094b565b5b81810290505b9392505050565b600060ff82169050919050565b600062000ae88262000525565b915062000af58362000ace565b925062000b247fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484620009e2565b905092915050565b600062000b398262000525565b915062000b468362000525565b925082820262000b568162000525565b9150828204841483151762000b705762000b6f6200094b565b5b5092915050565b600062000b848262000525565b915062000b918362000525565b925082820190508082111562000bac5762000bab6200094b565b5b92915050565b62000bbd8162000525565b82525050565b600060608201905062000bda60008301866200091d565b62000be9602083018562000bb2565b62000bf8604083018462000bb2565b949350505050565b600060208201905062000c17600083018462000bb2565b92915050565b61119a8062000c2d6000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",Efe="0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",Sfe={},kfe={},Cfe={_format:Ufe,contractName:yfe,sourceName:xfe,abi:vfe,bytecode:wfe,deployedBytecode:Efe,linkReferences:Sfe,deployedLinkReferences:kfe},Afe="0x5FbDB2315678afecb367f032d93F642f64180aa3",Mfe="0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",wU={canonToken:Afe,canonThread:Mfe};function Or(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Or(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Tfe={value:()=>{}};function Z9(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ny(n)}function Ny(e){this._=e}function Ife(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ny.prototype=Z9.prototype={constructor:Ny,on:function(e,t){var n=this._,r=Ife(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Nfe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=gD(n[i],e.name,t);else if(t==null)for(i in n)n[i]=gD(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ny(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Nfe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function gD(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Tfe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var wk="http://www.w3.org/1999/xhtml";const bD={svg:"http://www.w3.org/2000/svg",xhtml:wk,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q9(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),bD.hasOwnProperty(t)?{space:bD[t],local:e}:e}function Rfe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===wk&&t.documentElement.namespaceURI===wk?t.createElement(e):t.createElementNS(n,e)}}function _fe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function YV(e){var t=q9(e);return(t.local?_fe:Rfe)(t)}function Pfe(){}function sM(e){return e==null?Pfe:function(){return this.querySelector(e)}}function Dfe(e){typeof e!="function"&&(e=sM(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,f,c=0;c<o;++c)(l=s[c])&&(f=e.call(l,l.__data__,c,s))&&("__data__"in l&&(f.__data__=l.__data__),a[c]=f);return new go(r,this._parents)}function Lfe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ofe(){return[]}function ZV(e){return e==null?Ofe:function(){return this.querySelectorAll(e)}}function jfe(e){return function(){return Lfe(e.apply(this,arguments))}}function Bfe(e){typeof e=="function"?e=jfe(e):e=ZV(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,f=0;f<a;++f)(l=o[f])&&(r.push(e.call(l,l.__data__,f,o)),i.push(l));return new go(r,i)}function qV(e){return function(){return this.matches(e)}}function QV(e){return function(t){return t.matches(e)}}var Ffe=Array.prototype.find;function $fe(e){return function(){return Ffe.call(this.children,e)}}function zfe(){return this.firstElementChild}function Hfe(e){return this.select(e==null?zfe:$fe(typeof e=="function"?e:QV(e)))}var Vfe=Array.prototype.filter;function Wfe(){return Array.from(this.children)}function Gfe(e){return function(){return Vfe.call(this.children,e)}}function Xfe(e){return this.selectAll(e==null?Wfe:Gfe(typeof e=="function"?e:QV(e)))}function Kfe(e){typeof e!="function"&&(e=qV(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,f=0;f<o;++f)(l=s[f])&&e.call(l,l.__data__,f,s)&&a.push(l);return new go(r,this._parents)}function JV(e){return new Array(e.length)}function Yfe(){return new go(this._enter||this._groups.map(JV),this._parents)}function R3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}R3.prototype={constructor:R3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zfe(e){return function(){return e}}function qfe(e,t,n,r,i,s){for(var o=0,a,l=t.length,f=s.length;o<f;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new R3(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function Qfe(e,t,n,r,i,s,o){var a,l,f=new Map,c=t.length,d=s.length,u=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(u[a]=h=o.call(l,l.__data__,a,t)+"",f.has(h)?i[a]=l:f.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=f.get(h))?(r[a]=l,l.__data__=s[a],f.delete(h)):n[a]=new R3(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&f.get(u[a])===l&&(i[a]=l)}function Jfe(e){return e.__data__}function ede(e,t){if(!arguments.length)return Array.from(this,Jfe);var n=t?Qfe:qfe,r=this._parents,i=this._groups;typeof e!="function"&&(e=Zfe(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),f=0;f<s;++f){var c=r[f],d=i[f],u=d.length,h=tde(e.call(c,c&&c.__data__,f,r)),g=h.length,U=a[f]=new Array(g),y=o[f]=new Array(g),x=l[f]=new Array(u);n(c,d,U,y,x,h,t);for(var w=0,E=0,S,A;w<g;++w)if(S=U[w]){for(w>=E&&(E=w+1);!(A=y[E])&&++E<g;);S._next=A||null}}return o=new go(o,r),o._enter=a,o._exit=l,o}function tde(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nde(){return new go(this._exit||this._groups.map(JV),this._parents)}function rde(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function ide(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var f=n[l],c=r[l],d=f.length,u=a[l]=new Array(d),h,g=0;g<d;++g)(h=f[g]||c[g])&&(u[g]=h);for(;l<i;++l)a[l]=n[l];return new go(a,this._parents)}function sde(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function ode(e){e||(e=ade);function t(d,u){return d&&u?e(d.__data__,u.__data__):!d-!u}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),f,c=0;c<a;++c)(f=o[c])&&(l[c]=f);l.sort(t)}return new go(i,this._parents).order()}function ade(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lde(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function cde(){return Array.from(this)}function fde(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function dde(){let e=0;for(const t of this)++e;return e}function ude(){return!this.node()}function hde(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function pde(e){return function(){this.removeAttribute(e)}}function mde(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gde(e,t){return function(){this.setAttribute(e,t)}}function bde(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ude(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yde(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function xde(e,t){var n=q9(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?mde:pde:typeof t=="function"?n.local?yde:Ude:n.local?bde:gde)(n,t))}function eW(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vde(e){return function(){this.style.removeProperty(e)}}function wde(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ede(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Sde(e,t,n){return arguments.length>1?this.each((t==null?vde:typeof t=="function"?Ede:wde)(e,t,n??"")):Vm(this.node(),e)}function Vm(e,t){return e.style.getPropertyValue(t)||eW(e).getComputedStyle(e,null).getPropertyValue(t)}function kde(e){return function(){delete this[e]}}function Cde(e,t){return function(){this[e]=t}}function Ade(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Mde(e,t){return arguments.length>1?this.each((t==null?kde:typeof t=="function"?Ade:Cde)(e,t)):this.node()[e]}function tW(e){return e.trim().split(/^|\s+/)}function oM(e){return e.classList||new nW(e)}function nW(e){this._node=e,this._names=tW(e.getAttribute("class")||"")}nW.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rW(e,t){for(var n=oM(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function iW(e,t){for(var n=oM(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Tde(e){return function(){rW(this,e)}}function Ide(e){return function(){iW(this,e)}}function Nde(e,t){return function(){(t.apply(this,arguments)?rW:iW)(this,e)}}function Rde(e,t){var n=tW(e+"");if(arguments.length<2){for(var r=oM(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Nde:t?Tde:Ide)(n,t))}function _de(){this.textContent=""}function Pde(e){return function(){this.textContent=e}}function Dde(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Lde(e){return arguments.length?this.each(e==null?_de:(typeof e=="function"?Dde:Pde)(e)):this.node().textContent}function Ode(){this.innerHTML=""}function jde(e){return function(){this.innerHTML=e}}function Bde(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Fde(e){return arguments.length?this.each(e==null?Ode:(typeof e=="function"?Bde:jde)(e)):this.node().innerHTML}function $de(){this.nextSibling&&this.parentNode.appendChild(this)}function zde(){return this.each($de)}function Hde(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vde(){return this.each(Hde)}function Wde(e){var t=typeof e=="function"?e:YV(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gde(){return null}function Xde(e,t){var n=typeof e=="function"?e:YV(e),r=t==null?Gde:typeof t=="function"?t:sM(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Kde(){var e=this.parentNode;e&&e.removeChild(this)}function Yde(){return this.each(Kde)}function Zde(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qde(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qde(e){return this.select(e?qde:Zde)}function Jde(e){return arguments.length?this.property("__data__",e):this.node().__data__}function e0e(e){return function(t){e.call(this,t,this.__data__)}}function t0e(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function n0e(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function r0e(e,t,n){return function(){var r=this.__on,i,s=e0e(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function i0e(e,t,n){var r=t0e(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,f=a.length,c;l<f;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?r0e:n0e,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function sW(e,t,n){var r=eW(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function s0e(e,t){return function(){return sW(this,e,t)}}function o0e(e,t){return function(){return sW(this,e,t.apply(this,arguments))}}function a0e(e,t){return this.each((typeof t=="function"?o0e:s0e)(e,t))}function*l0e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var oW=[null];function go(e,t){this._groups=e,this._parents=t}function Sb(){return new go([[document.documentElement]],oW)}function c0e(){return this}go.prototype=Sb.prototype={constructor:go,select:Dfe,selectAll:Bfe,selectChild:Hfe,selectChildren:Xfe,filter:Kfe,data:ede,enter:Yfe,exit:nde,join:rde,merge:ide,selection:c0e,order:sde,sort:ode,call:lde,nodes:cde,node:fde,size:dde,empty:ude,each:hde,attr:xde,style:Sde,property:Mde,classed:Rde,text:Lde,html:Fde,raise:zde,lower:Vde,append:Wde,insert:Xde,remove:Yde,clone:Qde,datum:Jde,on:i0e,dispatch:a0e,[Symbol.iterator]:l0e};function fo(e){return typeof e=="string"?new go([[document.querySelector(e)]],[document.documentElement]):new go([[e]],oW)}function f0e(e){let t;for(;t=e.sourceEvent;)e=t;return e}function La(e,t){if(e=f0e(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const d0e={passive:!1},c2={capture:!0,passive:!1};function Iw(e){e.stopImmediatePropagation()}function jp(e){e.preventDefault(),e.stopImmediatePropagation()}function aW(e){var t=e.document.documentElement,n=fo(e).on("dragstart.drag",jp,c2);"onselectstart"in t?n.on("selectstart.drag",jp,c2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function lW(e,t){var n=e.document.documentElement,r=fo(e).on("dragstart.drag",null);t&&(r.on("click.drag",jp,c2),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const EU=e=>()=>e;function Ek(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:f,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:c}})}Ek.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function u0e(e){return!e.ctrlKey&&!e.button}function h0e(){return this.parentNode}function p0e(e,t){return t??{x:e.x,y:e.y}}function m0e(){return navigator.maxTouchPoints||"ontouchstart"in this}function cW(){var e=u0e,t=h0e,n=p0e,r=m0e,i={},s=Z9("start","drag","end"),o=0,a,l,f,c,d=0;function u(S){S.on("mousedown.drag",h).filter(r).on("touchstart.drag",y).on("touchmove.drag",x,d0e).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(S,A){if(!(c||!e.call(this,S,A))){var M=E(this,t.call(this,S,A),S,A,"mouse");M&&(fo(S.view).on("mousemove.drag",g,c2).on("mouseup.drag",U,c2),aW(S.view),Iw(S),f=!1,a=S.clientX,l=S.clientY,M("start",S))}}function g(S){if(jp(S),!f){var A=S.clientX-a,M=S.clientY-l;f=A*A+M*M>d}i.mouse("drag",S)}function U(S){fo(S.view).on("mousemove.drag mouseup.drag",null),lW(S.view,f),jp(S),i.mouse("end",S)}function y(S,A){if(e.call(this,S,A)){var M=S.changedTouches,C=t.call(this,S,A),T=M.length,R,P;for(R=0;R<T;++R)(P=E(this,C,S,A,M[R].identifier,M[R]))&&(Iw(S),P("start",S,M[R]))}}function x(S){var A=S.changedTouches,M=A.length,C,T;for(C=0;C<M;++C)(T=i[A[C].identifier])&&(jp(S),T("drag",S,A[C]))}function w(S){var A=S.changedTouches,M=A.length,C,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),C=0;C<M;++C)(T=i[A[C].identifier])&&(Iw(S),T("end",S,A[C]))}function E(S,A,M,C,T,R){var P=s.copy(),_=La(R||M,A),O,F,B;if((B=n.call(S,new Ek("beforestart",{sourceEvent:M,target:u,identifier:T,active:o,x:_[0],y:_[1],dx:0,dy:0,dispatch:P}),C))!=null)return O=B.x-_[0]||0,F=B.y-_[1]||0,function $(z,H,G){var V=_,Y;switch(z){case"start":i[T]=$,Y=o++;break;case"end":delete i[T],--o;case"drag":_=La(G||H,A),Y=o;break}P.call(z,S,new Ek(z,{sourceEvent:H,subject:B,target:u,identifier:T,active:Y,x:_[0]+O,y:_[1]+F,dx:_[0]-V[0],dy:_[1]-V[1],dispatch:P}),C)}}return u.filter=function(S){return arguments.length?(e=typeof S=="function"?S:EU(!!S),u):e},u.container=function(S){return arguments.length?(t=typeof S=="function"?S:EU(S),u):t},u.subject=function(S){return arguments.length?(n=typeof S=="function"?S:EU(S),u):n},u.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:EU(!!S),u):r},u.on=function(){var S=s.on.apply(s,arguments);return S===s?u:S},u.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,u):Math.sqrt(d)},u}function aM(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function fW(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kb(){}var f2=.7,_3=1/f2,Bp="\\s*([+-]?\\d+)\\s*",d2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ec="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g0e=/^#([0-9a-f]{3,8})$/,b0e=new RegExp(`^rgb\\(${Bp},${Bp},${Bp}\\)$`),U0e=new RegExp(`^rgb\\(${ec},${ec},${ec}\\)$`),y0e=new RegExp(`^rgba\\(${Bp},${Bp},${Bp},${d2}\\)$`),x0e=new RegExp(`^rgba\\(${ec},${ec},${ec},${d2}\\)$`),v0e=new RegExp(`^hsl\\(${d2},${ec},${ec}\\)$`),w0e=new RegExp(`^hsla\\(${d2},${ec},${ec},${d2}\\)$`),UD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aM(kb,Rh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yD,formatHex:yD,formatHex8:E0e,formatHsl:S0e,formatRgb:xD,toString:xD});function yD(){return this.rgb().formatHex()}function E0e(){return this.rgb().formatHex8()}function S0e(){return dW(this).formatHsl()}function xD(){return this.rgb().formatRgb()}function Rh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=g0e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vD(t):n===3?new js(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?SU(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?SU(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=b0e.exec(e))?new js(t[1],t[2],t[3],1):(t=U0e.exec(e))?new js(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=y0e.exec(e))?SU(t[1],t[2],t[3],t[4]):(t=x0e.exec(e))?SU(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=v0e.exec(e))?SD(t[1],t[2]/100,t[3]/100,1):(t=w0e.exec(e))?SD(t[1],t[2]/100,t[3]/100,t[4]):UD.hasOwnProperty(e)?vD(UD[e]):e==="transparent"?new js(NaN,NaN,NaN,0):null}function vD(e){return new js(e>>16&255,e>>8&255,e&255,1)}function SU(e,t,n,r){return r<=0&&(e=t=n=NaN),new js(e,t,n,r)}function k0e(e){return e instanceof kb||(e=Rh(e)),e?(e=e.rgb(),new js(e.r,e.g,e.b,e.opacity)):new js}function Sk(e,t,n,r){return arguments.length===1?k0e(e):new js(e,t,n,r??1)}function js(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}aM(js,Sk,fW(kb,{brighter(e){return e=e==null?_3:Math.pow(_3,e),new js(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?f2:Math.pow(f2,e),new js(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new js(hh(this.r),hh(this.g),hh(this.b),P3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wD,formatHex:wD,formatHex8:C0e,formatRgb:ED,toString:ED}));function wD(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}`}function C0e(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}${_u((isNaN(this.opacity)?1:this.opacity)*255)}`}function ED(){const e=P3(this.opacity);return`${e===1?"rgb(":"rgba("}${hh(this.r)}, ${hh(this.g)}, ${hh(this.b)}${e===1?")":`, ${e})`}`}function P3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _u(e){return e=hh(e),(e<16?"0":"")+e.toString(16)}function SD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ba(e,t,n,r)}function dW(e){if(e instanceof Ba)return new Ba(e.h,e.s,e.l,e.opacity);if(e instanceof kb||(e=Rh(e)),!e)return new Ba;if(e instanceof Ba)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Ba(o,a,l,e.opacity)}function A0e(e,t,n,r){return arguments.length===1?dW(e):new Ba(e,t,n,r??1)}function Ba(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}aM(Ba,A0e,fW(kb,{brighter(e){return e=e==null?_3:Math.pow(_3,e),new Ba(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?f2:Math.pow(f2,e),new Ba(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new js(Nw(e>=240?e-240:e+120,i,r),Nw(e,i,r),Nw(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ba(kD(this.h),kU(this.s),kU(this.l),P3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=P3(this.opacity);return`${e===1?"hsl(":"hsla("}${kD(this.h)}, ${kU(this.s)*100}%, ${kU(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kD(e){return e=(e||0)%360,e<0?e+360:e}function kU(e){return Math.max(0,Math.min(1,e||0))}function Nw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Q9=e=>()=>e;function uW(e,t){return function(n){return e+n*t}}function M0e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function NHe(e,t){var n=t-e;return n?uW(e,n>180||n<-180?n-360*Math.round(n/360):n):Q9(isNaN(e)?t:e)}function T0e(e){return(e=+e)==1?hW:function(t,n){return n-t?M0e(t,n,e):Q9(isNaN(t)?n:t)}}function hW(e,t){var n=t-e;return n?uW(e,n):Q9(isNaN(e)?t:e)}const D3=function e(t){var n=T0e(t);function r(i,s){var o=n((i=Sk(i)).r,(s=Sk(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),f=hW(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=f(c),i+""}}return r.gamma=e,r}(1);function I0e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function N0e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function R0e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=v5(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function _0e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Hl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function P0e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=v5(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var kk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rw=new RegExp(kk.source,"g");function D0e(e){return function(){return e}}function L0e(e){return function(t){return e(t)+""}}function pW(e,t){var n=kk.lastIndex=Rw.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=kk.exec(e))&&(i=Rw.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Hl(r,i)})),n=Rw.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?L0e(l[0].x):D0e(t):(t=l.length,function(f){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(f);return a.join("")})}function v5(e,t){var n=typeof t,r;return t==null||n==="boolean"?Q9(t):(n==="number"?Hl:n==="string"?(r=Rh(t))?(t=r,D3):pW:t instanceof Rh?D3:t instanceof Date?_0e:N0e(t)?I0e:Array.isArray(t)?R0e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?P0e:Hl)(e,t)}var CD=180/Math.PI,Ck={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mW(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*CD,skewX:Math.atan(l)*CD,scaleX:o,scaleY:a}}var CU;function O0e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ck:mW(t.a,t.b,t.c,t.d,t.e,t.f)}function j0e(e){return e==null||(CU||(CU=document.createElementNS("http://www.w3.org/2000/svg","g")),CU.setAttribute("transform",e),!(e=CU.transform.baseVal.consolidate()))?Ck:(e=e.matrix,mW(e.a,e.b,e.c,e.d,e.e,e.f))}function gW(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,c,d,u,h,g){if(f!==d||c!==u){var U=h.push("translate(",null,t,null,n);g.push({i:U-4,x:Hl(f,d)},{i:U-2,x:Hl(c,u)})}else(d||u)&&h.push("translate("+d+t+u+n)}function o(f,c,d,u){f!==c?(f-c>180?c+=360:c-f>180&&(f+=360),u.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Hl(f,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(f,c,d,u){f!==c?u.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Hl(f,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(f,c,d,u,h,g){if(f!==d||c!==u){var U=h.push(i(h)+"scale(",null,",",null,")");g.push({i:U-4,x:Hl(f,d)},{i:U-2,x:Hl(c,u)})}else(d!==1||u!==1)&&h.push(i(h)+"scale("+d+","+u+")")}return function(f,c){var d=[],u=[];return f=e(f),c=e(c),s(f.translateX,f.translateY,c.translateX,c.translateY,d,u),o(f.rotate,c.rotate,d,u),a(f.skewX,c.skewX,d,u),l(f.scaleX,f.scaleY,c.scaleX,c.scaleY,d,u),f=c=null,function(h){for(var g=-1,U=u.length,y;++g<U;)d[(y=u[g]).i]=y.x(h);return d.join("")}}}var B0e=gW(O0e,"px, ","px)","deg)"),F0e=gW(j0e,", ",")",")"),$0e=1e-12;function AD(e){return((e=Math.exp(e))+1/e)/2}function z0e(e){return((e=Math.exp(e))-1/e)/2}function H0e(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ry=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],f=s[2],c=o[0],d=o[1],u=o[2],h=c-a,g=d-l,U=h*h+g*g,y,x;if(U<$0e)x=Math.log(u/f)/t,y=function(C){return[a+C*h,l+C*g,f*Math.exp(t*C*x)]};else{var w=Math.sqrt(U),E=(u*u-f*f+r*U)/(2*f*n*w),S=(u*u-f*f-r*U)/(2*u*n*w),A=Math.log(Math.sqrt(E*E+1)-E),M=Math.log(Math.sqrt(S*S+1)-S);x=(M-A)/t,y=function(C){var T=C*x,R=AD(A),P=f/(n*w)*(R*H0e(t*T+A)-z0e(A));return[a+P*h,l+P*g,f*R/AD(t*T+A)]}}return y.duration=x*1e3*t/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);var Wm=0,e5=0,Sg=0,bW=1e3,L3,t5,O3=0,_h=0,J9=0,u2=typeof performance=="object"&&performance.now?performance:Date,UW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lM(){return _h||(UW(V0e),_h=u2.now()+J9)}function V0e(){_h=0}function j3(){this._call=this._time=this._next=null}j3.prototype=yW.prototype={constructor:j3,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?lM():+n)+(t==null?0:+t),!this._next&&t5!==this&&(t5?t5._next=this:L3=this,t5=this),this._call=e,this._time=n,Ak()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ak())}};function yW(e,t,n){var r=new j3;return r.restart(e,t,n),r}function W0e(){lM(),++Wm;for(var e=L3,t;e;)(t=_h-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wm}function MD(){_h=(O3=u2.now())+J9,Wm=e5=0;try{W0e()}finally{Wm=0,X0e(),_h=0}}function G0e(){var e=u2.now(),t=e-O3;t>bW&&(J9-=t,O3=e)}function X0e(){for(var e,t=L3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:L3=n);t5=e,Ak(r)}function Ak(e){if(!Wm){e5&&(e5=clearTimeout(e5));var t=e-_h;t>24?(e<1/0&&(e5=setTimeout(MD,e-u2.now()-J9)),Sg&&(Sg=clearInterval(Sg))):(Sg||(O3=u2.now(),Sg=setInterval(G0e,bW)),Wm=1,UW(MD))}}function TD(e,t,n){var r=new j3;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var K0e=Z9("start","end","cancel","interrupt"),Y0e=[],xW=0,ID=1,Mk=2,_y=3,ND=4,Tk=5,Py=6;function e7(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Z0e(e,n,{name:t,index:r,group:i,on:K0e,tween:Y0e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:xW})}function cM(e,t){var n=fl(e,t);if(n.state>xW)throw new Error("too late; already scheduled");return n}function gc(e,t){var n=fl(e,t);if(n.state>_y)throw new Error("too late; already running");return n}function fl(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Z0e(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=yW(s,0,n.time);function s(f){n.state=ID,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var c,d,u,h;if(n.state!==ID)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===_y)return TD(o);h.state===ND?(h.state=Py,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Py,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(TD(function(){n.state===_y&&(n.state=ND,n.timer.restart(a,n.delay,n.time),a(f))}),n.state=Mk,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Mk){for(n.state=_y,i=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(f){for(var c=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=Tk,1),d=-1,u=i.length;++d<u;)i[d].call(e,c);n.state===Tk&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Py,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function Dy(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Mk&&r.state<Tk,r.state=Py,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function q0e(e){return this.each(function(){Dy(this,e)})}function Q0e(e,t){var n,r;return function(){var i=gc(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function J0e(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=gc(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,f=i.length;l<f;++l)if(i[l].name===t){i[l]=a;break}l===f&&i.push(a)}s.tween=i}}function eue(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=fl(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Q0e:J0e)(n,e,t))}function fM(e,t,n){var r=e._id;return e.each(function(){var i=gc(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return fl(i,r).value[t]}}function vW(e,t){var n;return(typeof t=="number"?Hl:t instanceof Rh?D3:(n=Rh(t))?(t=n,D3):pW)(e,t)}function tue(e){return function(){this.removeAttribute(e)}}function nue(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rue(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function iue(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function sue(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function oue(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function aue(e,t){var n=q9(e),r=n==="transform"?F0e:vW;return this.attrTween(e,typeof t=="function"?(n.local?oue:sue)(n,r,fM(this,"attr."+e,t)):t==null?(n.local?nue:tue)(n):(n.local?iue:rue)(n,r,t))}function lue(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function cue(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fue(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&cue(e,s)),n}return i._value=t,i}function due(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&lue(e,s)),n}return i._value=t,i}function uue(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=q9(e);return this.tween(n,(r.local?fue:due)(r,t))}function hue(e,t){return function(){cM(this,e).delay=+t.apply(this,arguments)}}function pue(e,t){return t=+t,function(){cM(this,e).delay=t}}function mue(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hue:pue)(t,e)):fl(this.node(),t).delay}function gue(e,t){return function(){gc(this,e).duration=+t.apply(this,arguments)}}function bue(e,t){return t=+t,function(){gc(this,e).duration=t}}function Uue(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gue:bue)(t,e)):fl(this.node(),t).duration}function yue(e,t){if(typeof t!="function")throw new Error;return function(){gc(this,e).ease=t}}function xue(e){var t=this._id;return arguments.length?this.each(yue(t,e)):fl(this.node(),t).ease}function vue(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;gc(this,e).ease=n}}function wue(e){if(typeof e!="function")throw new Error;return this.each(vue(this._id,e))}function Eue(e){typeof e!="function"&&(e=qV(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,f=0;f<o;++f)(l=s[f])&&e.call(l,l.__data__,f,s)&&a.push(l);return new kf(r,this._parents,this._name,this._id)}function Sue(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],f=n[a],c=l.length,d=o[a]=new Array(c),u,h=0;h<c;++h)(u=l[h]||f[h])&&(d[h]=u);for(;a<r;++a)o[a]=t[a];return new kf(o,this._parents,this._name,this._id)}function kue(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Cue(e,t,n){var r,i,s=kue(t)?cM:gc;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Aue(e,t){var n=this._id;return arguments.length<2?fl(this.node(),n).on.on(e):this.each(Cue(n,e,t))}function Mue(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Tue(){return this.on("end.remove",Mue(this._id))}function Iue(e){var t=this._name,n=this._id;typeof e!="function"&&(e=sM(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,f=s[o]=new Array(l),c,d,u=0;u<l;++u)(c=a[u])&&(d=e.call(c,c.__data__,u,a))&&("__data__"in c&&(d.__data__=c.__data__),f[u]=d,e7(f[u],t,n,u,f,fl(c,n)));return new kf(s,this._parents,t,n)}function Nue(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ZV(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],f=l.length,c,d=0;d<f;++d)if(c=l[d]){for(var u=e.call(c,c.__data__,d,l),h,g=fl(c,n),U=0,y=u.length;U<y;++U)(h=u[U])&&e7(h,t,n,U,u,g);s.push(u),o.push(c)}return new kf(s,o,t,n)}var Rue=Sb.prototype.constructor;function _ue(){return new Rue(this._groups,this._parents)}function Pue(e,t){var n,r,i;return function(){var s=Vm(this,e),o=(this.style.removeProperty(e),Vm(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function wW(e){return function(){this.style.removeProperty(e)}}function Due(e,t,n){var r,i=n+"",s;return function(){var o=Vm(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Lue(e,t,n){var r,i,s;return function(){var o=Vm(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Vm(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function Oue(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=gc(this,e),f=l.on,c=l.value[s]==null?a||(a=wW(t)):void 0;(f!==n||i!==c)&&(r=(n=f).copy()).on(o,i=c),l.on=r}}function jue(e,t,n){var r=(e+="")=="transform"?B0e:vW;return t==null?this.styleTween(e,Pue(e,r)).on("end.style."+e,wW(e)):typeof t=="function"?this.styleTween(e,Lue(e,r,fM(this,"style."+e,t))).each(Oue(this._id,e)):this.styleTween(e,Due(e,r,t),n).on("end.style."+e,null)}function Bue(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Fue(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Bue(e,o,n)),r}return s._value=t,s}function $ue(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Fue(e,t,n??""))}function zue(e){return function(){this.textContent=e}}function Hue(e){return function(){var t=e(this);this.textContent=t??""}}function Vue(e){return this.tween("text",typeof e=="function"?Hue(fM(this,"text",e)):zue(e==null?"":e+""))}function Wue(e){return function(t){this.textContent=e.call(this,t)}}function Gue(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Wue(i)),t}return r._value=e,r}function Xue(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gue(e))}function Kue(){for(var e=this._name,t=this._id,n=EW(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,f=0;f<a;++f)if(l=o[f]){var c=fl(l,t);e7(l,e,n,f,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new kf(r,this._parents,e,n)}function Yue(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var f=gc(this,r),c=f.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),f.on=t}),i===0&&s()})}var Zue=0;function kf(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function EW(){return++Zue}var Rc=Sb.prototype;kf.prototype={constructor:kf,select:Iue,selectAll:Nue,selectChild:Rc.selectChild,selectChildren:Rc.selectChildren,filter:Eue,merge:Sue,selection:_ue,transition:Kue,call:Rc.call,nodes:Rc.nodes,node:Rc.node,size:Rc.size,empty:Rc.empty,each:Rc.each,on:Aue,attr:aue,attrTween:uue,style:jue,styleTween:$ue,text:Vue,textTween:Xue,remove:Tue,tween:eue,delay:mue,duration:Uue,ease:xue,easeVarying:wue,end:Yue,[Symbol.iterator]:Rc[Symbol.iterator]};function que(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Que={time:null,delay:0,duration:250,ease:que};function Jue(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ehe(e){var t,n;e instanceof kf?(t=e._id,e=e._name):(t=EW(),(n=Que).time=lM(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,f=0;f<a;++f)(l=o[f])&&e7(l,e,t,f,o,n||Jue(l,t));return new kf(r,this._parents,e,t)}Sb.prototype.interrupt=q0e;Sb.prototype.transition=ehe;const AU=e=>()=>e;function the(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function hf(e,t,n){this.k=e,this.x=t,this.y=n}hf.prototype={constructor:hf,scale:function(e){return e===1?this:new hf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new hf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var t7=new hf(1,0,0);SW.prototype=hf.prototype;function SW(e){for(;!e.__zoom;)if(!(e=e.parentNode))return t7;return e.__zoom}function _w(e){e.stopImmediatePropagation()}function kg(e){e.preventDefault(),e.stopImmediatePropagation()}function nhe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function rhe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function RD(){return this.__zoom||t7}function ihe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function she(){return navigator.maxTouchPoints||"ontouchstart"in this}function ohe(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function kW(){var e=nhe,t=rhe,n=ohe,r=ihe,i=she,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ry,f=Z9("start","zoom","end"),c,d,u,h=500,g=150,U=0,y=10;function x(B){B.property("__zoom",RD).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",P).filter(i).on("touchstart.zoom",_).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(B,$,z,H){var G=B.selection?B.selection():B;G.property("__zoom",RD),B!==G?A(B,$,z,H):G.interrupt().each(function(){M(this,arguments).event(H).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},x.scaleBy=function(B,$,z,H){x.scaleTo(B,function(){var G=this.__zoom.k,V=typeof $=="function"?$.apply(this,arguments):$;return G*V},z,H)},x.scaleTo=function(B,$,z,H){x.transform(B,function(){var G=t.apply(this,arguments),V=this.__zoom,Y=z==null?S(G):typeof z=="function"?z.apply(this,arguments):z,K=V.invert(Y),q=typeof $=="function"?$.apply(this,arguments):$;return n(E(w(V,q),Y,K),G,o)},z,H)},x.translateBy=function(B,$,z,H){x.transform(B,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof z=="function"?z.apply(this,arguments):z),t.apply(this,arguments),o)},null,H)},x.translateTo=function(B,$,z,H,G){x.transform(B,function(){var V=t.apply(this,arguments),Y=this.__zoom,K=H==null?S(V):typeof H=="function"?H.apply(this,arguments):H;return n(t7.translate(K[0],K[1]).scale(Y.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof z=="function"?-z.apply(this,arguments):-z),V,o)},H,G)};function w(B,$){return $=Math.max(s[0],Math.min(s[1],$)),$===B.k?B:new hf($,B.x,B.y)}function E(B,$,z){var H=$[0]-z[0]*B.k,G=$[1]-z[1]*B.k;return H===B.x&&G===B.y?B:new hf(B.k,H,G)}function S(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function A(B,$,z,H){B.on("start.zoom",function(){M(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(H).end()}).tween("zoom",function(){var G=this,V=arguments,Y=M(G,V).event(H),K=t.apply(G,V),q=z==null?S(K):typeof z=="function"?z.apply(G,V):z,se=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),de=G.__zoom,xe=typeof $=="function"?$.apply(G,V):$,ve=l(de.invert(q).concat(se/de.k),xe.invert(q).concat(se/xe.k));return function(ue){if(ue===1)ue=xe;else{var te=ve(ue),le=se/te[2];ue=new hf(le,q[0]-te[0]*le,q[1]-te[1]*le)}Y.zoom(null,ue)}})}function M(B,$,z){return!z&&B.__zooming||new C(B,$)}function C(B,$){this.that=B,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,$),this.taps=0}C.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,$){return this.mouse&&B!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var $=fo(this.that).datum();f.call(B,this.that,new the(B,{sourceEvent:this.sourceEvent,target:x,type:B,transform:this.that.__zoom,dispatch:f}),$)}};function T(B,...$){if(!e.apply(this,arguments))return;var z=M(this,$).event(B),H=this.__zoom,G=Math.max(s[0],Math.min(s[1],H.k*Math.pow(2,r.apply(this,arguments)))),V=La(B);if(z.wheel)(z.mouse[0][0]!==V[0]||z.mouse[0][1]!==V[1])&&(z.mouse[1]=H.invert(z.mouse[0]=V)),clearTimeout(z.wheel);else{if(H.k===G)return;z.mouse=[V,H.invert(V)],Dy(this),z.start()}kg(B),z.wheel=setTimeout(Y,g),z.zoom("mouse",n(E(w(H,G),z.mouse[0],z.mouse[1]),z.extent,o));function Y(){z.wheel=null,z.end()}}function R(B,...$){if(u||!e.apply(this,arguments))return;var z=B.currentTarget,H=M(this,$,!0).event(B),G=fo(B.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",se,!0),V=La(B,z),Y=B.clientX,K=B.clientY;aW(B.view),_w(B),H.mouse=[V,this.__zoom.invert(V)],Dy(this),H.start();function q(de){if(kg(de),!H.moved){var xe=de.clientX-Y,ve=de.clientY-K;H.moved=xe*xe+ve*ve>U}H.event(de).zoom("mouse",n(E(H.that.__zoom,H.mouse[0]=La(de,z),H.mouse[1]),H.extent,o))}function se(de){G.on("mousemove.zoom mouseup.zoom",null),lW(de.view,H.moved),kg(de),H.event(de).end()}}function P(B,...$){if(e.apply(this,arguments)){var z=this.__zoom,H=La(B.changedTouches?B.changedTouches[0]:B,this),G=z.invert(H),V=z.k*(B.shiftKey?.5:2),Y=n(E(w(z,V),H,G),t.apply(this,$),o);kg(B),a>0?fo(this).transition().duration(a).call(A,Y,H,B):fo(this).call(x.transform,Y,H,B)}}function _(B,...$){if(e.apply(this,arguments)){var z=B.touches,H=z.length,G=M(this,$,B.changedTouches.length===H).event(B),V,Y,K,q;for(_w(B),Y=0;Y<H;++Y)K=z[Y],q=La(K,this),q=[q,this.__zoom.invert(q),K.identifier],G.touch0?!G.touch1&&G.touch0[2]!==q[2]&&(G.touch1=q,G.taps=0):(G.touch0=q,V=!0,G.taps=1+!!c);c&&(c=clearTimeout(c)),V&&(G.taps<2&&(d=q[0],c=setTimeout(function(){c=null},h)),Dy(this),G.start())}}function O(B,...$){if(this.__zooming){var z=M(this,$).event(B),H=B.changedTouches,G=H.length,V,Y,K,q;for(kg(B),V=0;V<G;++V)Y=H[V],K=La(Y,this),z.touch0&&z.touch0[2]===Y.identifier?z.touch0[0]=K:z.touch1&&z.touch1[2]===Y.identifier&&(z.touch1[0]=K);if(Y=z.that.__zoom,z.touch1){var se=z.touch0[0],de=z.touch0[1],xe=z.touch1[0],ve=z.touch1[1],ue=(ue=xe[0]-se[0])*ue+(ue=xe[1]-se[1])*ue,te=(te=ve[0]-de[0])*te+(te=ve[1]-de[1])*te;Y=w(Y,Math.sqrt(ue/te)),K=[(se[0]+xe[0])/2,(se[1]+xe[1])/2],q=[(de[0]+ve[0])/2,(de[1]+ve[1])/2]}else if(z.touch0)K=z.touch0[0],q=z.touch0[1];else return;z.zoom("touch",n(E(Y,K,q),z.extent,o))}}function F(B,...$){if(this.__zooming){var z=M(this,$).event(B),H=B.changedTouches,G=H.length,V,Y;for(_w(B),u&&clearTimeout(u),u=setTimeout(function(){u=null},h),V=0;V<G;++V)Y=H[V],z.touch0&&z.touch0[2]===Y.identifier?delete z.touch0:z.touch1&&z.touch1[2]===Y.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(Y=La(Y,this),Math.hypot(d[0]-Y[0],d[1]-Y[1])<y)){var K=fo(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return x.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:AU(+B),x):r},x.filter=function(B){return arguments.length?(e=typeof B=="function"?B:AU(!!B),x):e},x.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:AU(!!B),x):i},x.extent=function(B){return arguments.length?(t=typeof B=="function"?B:AU([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),x):t},x.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],x):[s[0],s[1]]},x.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(B){return arguments.length?(n=B,x):n},x.duration=function(B){return arguments.length?(a=+B,x):a},x.interpolate=function(B){return arguments.length?(l=B,x):l},x.on=function(){var B=f.on.apply(f,arguments);return B===f?x:B},x.clickDistance=function(B){return arguments.length?(U=(B=+B)*B,x):Math.sqrt(U)},x.tapDistance=function(B){return arguments.length?(y=+B,x):y},x}const ic={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},h2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],CW=["Enter"," ","Escape"],AW={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Gm;(function(e){e.Strict="strict",e.Loose="loose"})(Gm||(Gm={}));var ph;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ph||(ph={}));var p2;(function(e){e.Partial="partial",e.Full="full"})(p2||(p2={}));const MW={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ld;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ld||(Ld={}));var B3;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(B3||(B3={}));var tt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(tt||(tt={}));const _D={[tt.Left]:tt.Right,[tt.Right]:tt.Left,[tt.Top]:tt.Bottom,[tt.Bottom]:tt.Top};function TW(e){return e===null?null:e?"valid":"invalid"}const IW=e=>"id"in e&&"source"in e&&"target"in e,ahe=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),dM=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Cb=(e,t=[0,0])=>{const{width:n,height:r}=Bf(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},lhe=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):dM(i)?i:t.nodeLookup.get(i.id));const a=o?F3(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return n7(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return r7(n)},Ab=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=n7(n,F3(i)),r=!0)}),r?r7(n):{x:0,y:0,width:0,height:0}},uM=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...Tb(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const f of e.values()){const{measured:c,selectable:d=!0,hidden:u=!1}=f;if(o&&!d||u)continue;const h=c.width??f.width??f.initialWidth??null,g=c.height??f.height??f.initialHeight??null,U=m2(a,Km(f)),y=(h??0)*(g??0),x=s&&U>0;(!f.internals.handleBounds||x||U>=y||f.dragging)&&l.push(f)}return l},che=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function fhe(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function dhe({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const a=fhe(e,o),l=Ab(a),f=hM(l,t,n,(o==null?void 0:o.minZoom)??i,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await r.setViewport(f,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)}function NW({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:l,y:f}=a?a.internals.positionAbsolute:{x:0,y:0},c=o.origin??r;let d=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!a)s==null||s("005",ic.error005());else{const h=a.measured.width,g=a.measured.height;h&&g&&(d=[[l,f],[l+h,f+g]])}else a&&Ym(o.extent)&&(d=[[o.extent[0][0]+l,o.extent[0][1]+f],[o.extent[1][0]+l,o.extent[1][1]+f]]);const u=Ym(d)?Ph(t,d,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(s==null||s("015",ic.error015())),{position:{x:u.x-l+(o.measured.width??0)*c[0],y:u.y-f+(o.measured.height??0)*c[1]},positionAbsolute:u}}async function uhe({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(u=>u.id)),o=[];for(const u of n){if(u.deletable===!1)continue;const h=s.has(u.id),g=!h&&u.parentId&&o.find(U=>U.id===u.parentId);(h||g)&&o.push(u)}const a=new Set(t.map(u=>u.id)),l=r.filter(u=>u.deletable!==!1),c=che(o,l);for(const u of l)a.has(u.id)&&!c.find(g=>g.id===u.id)&&c.push(u);if(!i)return{edges:c,nodes:o};const d=await i({nodes:o,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:o}:{edges:[],nodes:[]}:d}const Xm=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ph=(e={x:0,y:0},t,n)=>({x:Xm(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Xm(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function RW(e,t,n){const{width:r,height:i}=Bf(n),{x:s,y:o}=n.internals.positionAbsolute;return Ph(e,[[s,o],[s+r,o+i]],t)}const PD=(e,t,n)=>e<t?Xm(Math.abs(e-t),1,t)/t:e>n?-Xm(Math.abs(e-n),1,t)/t:0,_W=(e,t,n=15,r=40)=>{const i=PD(e.x,r,t.width-r)*n,s=PD(e.y,r,t.height-r)*n;return[i,s]},n7=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ik=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),r7=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Km=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=dM(e)?e.internals.positionAbsolute:Cb(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},F3=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=dM(e)?e.internals.positionAbsolute:Cb(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},PW=(e,t)=>r7(n7(Ik(e),Ik(t))),m2=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},DD=e=>za(e.width)&&za(e.height)&&za(e.x)&&za(e.y),za=e=>!isNaN(e)&&isFinite(e),hhe=(e,t)=>{},Mb=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Tb=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return s?Mb(a,o):a},$3=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function H1(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function phe(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=H1(e,n),i=H1(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=H1(e.top??e.y??0,n),i=H1(e.bottom??e.y??0,n),s=H1(e.left??e.x??0,t),o=H1(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function mhe(e,t,n,r,i,s){const{x:o,y:a}=$3(e,[t,n,r]),{x:l,y:f}=$3({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,d=s-f;return{left:Math.floor(o),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}const hM=(e,t,n,r,i,s)=>{const o=phe(s,t,n),a=(t-o.x)/e.width,l=(n-o.y)/e.height,f=Math.min(a,l),c=Xm(f,r,i),d=e.x+e.width/2,u=e.y+e.height/2,h=t/2-d*c,g=n/2-u*c,U=mhe(e,h,g,c,t,n),y={left:Math.min(U.left-o.left,0),top:Math.min(U.top-o.top,0),right:Math.min(U.right-o.right,0),bottom:Math.min(U.bottom-o.bottom,0)};return{x:h-y.left+y.right,y:g-y.top+y.bottom,zoom:c}},g2=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ym(e){return e!=null&&e!=="parent"}function Bf(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function DW(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function LW(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function LD(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ghe(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function bhe(e){return{...AW,...e||{}}}function w5(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Ha(e),a=Tb({x:s-((i==null?void 0:i.left)??0),y:o-((i==null?void 0:i.top)??0)},r),{x:l,y:f}=n?Mb(a,t):a;return{xSnapped:l,ySnapped:f,...a}}const pM=e=>({width:e.offsetWidth,height:e.offsetHeight}),OW=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Uhe=["INPUT","SELECT","TEXTAREA"];function jW(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Uhe.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const BW=e=>"clientX"in e,Ha=(e,t)=>{var s,o;const n=BW(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},OD=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...pM(o)}})};function FW({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=e*.125+i*.375+o*.375+n*.125,f=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),d=Math.abs(f-t);return[l,f,c,d]}function MU(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jD({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case tt.Left:return[t-MU(t-r,s),n];case tt.Right:return[t+MU(r-t,s),n];case tt.Top:return[t,n-MU(n-i,s)];case tt.Bottom:return[t,n+MU(i-n,s)]}}function $W({sourceX:e,sourceY:t,sourcePosition:n=tt.Bottom,targetX:r,targetY:i,targetPosition:s=tt.Top,curvature:o=.25}){const[a,l]=jD({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[f,c]=jD({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,u,h,g]=FW({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:f,targetControlY:c});return[`M${e},${t} C${a},${l} ${f},${c} ${r},${i}`,d,u,h,g]}function zW({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function yhe({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:s="basic"}){if(s==="manual")return r;const o=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return o+a}function xhe({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=n7(F3(e),F3(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return m2(o,r7(s))>0}const vhe=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,whe=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ehe=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||vhe;let i;return IW(e)?i={...e}:i={...e,id:r(e)},whe(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function HW({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=zW({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const BD={[tt.Left]:{x:-1,y:0},[tt.Right]:{x:1,y:0},[tt.Top]:{x:0,y:-1},[tt.Bottom]:{x:0,y:1}},She=({source:e,sourcePosition:t=tt.Bottom,target:n})=>t===tt.Left||t===tt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},FD=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function khe({source:e,sourcePosition:t=tt.Bottom,target:n,targetPosition:r=tt.Top,center:i,offset:s,stepPosition:o}){const a=BD[t],l=BD[r],f={x:e.x+a.x*s,y:e.y+a.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},d=She({source:f,sourcePosition:t,target:c}),u=d.x!==0?"x":"y",h=d[u];let g=[],U,y;const x={x:0,y:0},w={x:0,y:0},[,,E,S]=zW({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[u]*l[u]===-1){u==="x"?(U=i.x??f.x+(c.x-f.x)*o,y=i.y??(f.y+c.y)/2):(U=i.x??(f.x+c.x)/2,y=i.y??f.y+(c.y-f.y)*o);const M=[{x:U,y:f.y},{x:U,y:c.y}],C=[{x:f.x,y},{x:c.x,y}];a[u]===h?g=u==="x"?M:C:g=u==="x"?C:M}else{const M=[{x:f.x,y:c.y}],C=[{x:c.x,y:f.y}];if(u==="x"?g=a.x===h?C:M:g=a.y===h?M:C,t===r){const O=Math.abs(e[u]-n[u]);if(O<=s){const F=Math.min(s-1,s-O);a[u]===h?x[u]=(f[u]>e[u]?-1:1)*F:w[u]=(c[u]>n[u]?-1:1)*F}}if(t!==r){const O=u==="x"?"y":"x",F=a[u]===l[O],B=f[O]>c[O],$=f[O]<c[O];(a[u]===1&&(!F&&B||F&&$)||a[u]!==1&&(!F&&$||F&&B))&&(g=u==="x"?M:C)}const T={x:f.x+x.x,y:f.y+x.y},R={x:c.x+w.x,y:c.y+w.y},P=Math.max(Math.abs(T.x-g[0].x),Math.abs(R.x-g[0].x)),_=Math.max(Math.abs(T.y-g[0].y),Math.abs(R.y-g[0].y));P>=_?(U=(T.x+R.x)/2,y=g[0].y):(U=g[0].x,y=(T.y+R.y)/2)}return[[e,{x:f.x+x.x,y:f.y+x.y},...g,{x:c.x+w.x,y:c.y+w.y},n],U,y,E,S]}function Che(e,t,n,r){const i=Math.min(FD(e,t)/2,FD(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const f=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function Nk({sourceX:e,sourceY:t,sourcePosition:n=tt.Bottom,targetX:r,targetY:i,targetPosition:s=tt.Top,borderRadius:o=5,centerX:a,centerY:l,offset:f=20,stepPosition:c=.5}){const[d,u,h,g,U]=khe({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:f,stepPosition:c});return[d.reduce((x,w,E)=>{let S="";return E>0&&E<d.length-1?S=Che(d[E-1],w,d[E+1],o):S=`${E===0?"M":"L"}${w.x} ${w.y}`,x+=S,x},""),u,h,g,U]}function $D(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Ahe(e){var d;const{sourceNode:t,targetNode:n}=e;if(!$D(t)||!$D(n))return null;const r=t.internals.handleBounds||zD(t.handles),i=n.internals.handleBounds||zD(n.handles),s=HD((r==null?void 0:r.source)??[],e.sourceHandle),o=HD(e.connectionMode===Gm.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!s||!o)return(d=e.onError)==null||d.call(e,"008",ic.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(s==null?void 0:s.position)||tt.Bottom,l=(o==null?void 0:o.position)||tt.Top,f=Dh(t,s,a),c=Dh(n,o,l);return{sourceX:f.x,sourceY:f.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function zD(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Dh(e,t,n=tt.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??Bf(e);if(r)return{x:i+o/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case tt.Top:return{x:i+o/2,y:s};case tt.Right:return{x:i+o,y:s+a/2};case tt.Bottom:return{x:i+o/2,y:s+a};case tt.Left:return{x:i,y:s+a/2}}}function HD(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Rk(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Mhe(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const f=Rk(l,t);s.has(f)||(o.push({id:f,color:l.color||n,...l}),s.add(f))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const VW=1e3,The=10,mM={nodeOrigin:[0,0],nodeExtent:h2,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Ihe={...mM,checkEquality:!0};function gM(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Nhe(e,t,n){const r=gM(mM,n);for(const i of e.values())if(i.parentId)UM(i,e,t,r);else{const s=Cb(i,r.nodeOrigin),o=Ym(i.extent)?i.extent:r.nodeExtent,a=Ph(s,o,Bf(i));i.internals.positionAbsolute=a}}function Rhe(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const s={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(s):i.type==="target"&&r.push(s)}return{source:n,target:r}}function bM(e){return e==="manual"}function _k(e,t,n,r={}){var f,c;const i=gM(Ihe,r),s={i:0},o=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!bM(i.zIndexMode)?VW:0;let l=e.length>0;t.clear(),n.clear();for(const d of e){let u=o.get(d.id);if(i.checkEquality&&d===(u==null?void 0:u.internals.userNode))t.set(d.id,u);else{const h=Cb(d,i.nodeOrigin),g=Ym(d.extent)?d.extent:i.nodeExtent,U=Ph(h,g,Bf(d));u={...i.defaults,...d,measured:{width:(f=d.measured)==null?void 0:f.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:U,handleBounds:Rhe(d,u),z:WW(d,a,i.zIndexMode),userNode:d}},t.set(d.id,u)}(u.measured===void 0||u.measured.width===void 0||u.measured.height===void 0)&&!u.hidden&&(l=!1),d.parentId&&UM(u,t,n,r,s)}return l}function _he(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function UM(e,t,n,r,i){const{elevateNodesOnSelect:s,nodeOrigin:o,nodeExtent:a,zIndexMode:l}=gM(mM,r),f=e.parentId,c=t.get(f);if(!c){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}_he(e,n),i&&!c.parentId&&c.internals.rootParentIndex===void 0&&l==="auto"&&(c.internals.rootParentIndex=++i.i,c.internals.z=c.internals.z+i.i*The),i&&c.internals.rootParentIndex!==void 0&&(i.i=c.internals.rootParentIndex);const d=s&&!bM(l)?VW:0,{x:u,y:h,z:g}=Phe(e,c,o,a,d,l),{positionAbsolute:U}=e.internals,y=u!==U.x||h!==U.y;(y||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:u,y:h}:U,z:g}})}function WW(e,t,n){const r=za(e.zIndex)?e.zIndex:0;return bM(n)?r:r+(e.selected?t:0)}function Phe(e,t,n,r,i,s){const{x:o,y:a}=t.internals.positionAbsolute,l=Bf(e),f=Cb(e,n),c=Ym(e.extent)?Ph(f,e.extent,l):f;let d=Ph({x:o+c.x,y:a+c.y},r,l);e.extent==="parent"&&(d=RW(d,l,t));const u=WW(e,i,s),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>=u?h+1:u}}function yM(e,t,n,r=[0,0]){var o;const i=[],s=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const f=((o=s.get(a.parentId))==null?void 0:o.expandedRect)??Km(l),c=PW(f,a.rect);s.set(a.parentId,{expandedRect:c,parent:l})}return s.size>0&&s.forEach(({expandedRect:a,parent:l},f)=>{var E;const c=l.internals.positionAbsolute,d=Bf(l),u=l.origin??r,h=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,g=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,U=Math.max(d.width,Math.round(a.width)),y=Math.max(d.height,Math.round(a.height)),x=(U-d.width)*u[0],w=(y-d.height)*u[1];(h>0||g>0||x||w)&&(i.push({id:f,type:"position",position:{x:l.position.x-h+x,y:l.position.y-g+w}}),(E=n.get(f))==null||E.forEach(S=>{e.some(A=>A.id===S.id)||i.push({id:S.id,type:"position",position:{x:S.position.x+h,y:S.position.y+g}})})),(d.width<a.width||d.height<a.height||h||g)&&i.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:U+(h?u[0]*h-x:0),height:y+(g?u[1]*g-w:0)}})}),i}function Dhe(e,t,n,r,i,s,o){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const f=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const h of e.values()){const g=t.get(h.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),l=!0;continue}const U=pM(h.nodeElement),y=g.measured.width!==U.width||g.measured.height!==U.height;if(!!(U.width&&U.height&&(y||!g.internals.handleBounds||h.force))){const w=h.nodeElement.getBoundingClientRect(),E=Ym(g.extent)?g.extent:s;let{positionAbsolute:S}=g.internals;g.parentId&&g.extent==="parent"?S=RW(S,U,t.get(g.parentId)):E&&(S=Ph(S,E,U));const A={...g,measured:U,internals:{...g.internals,positionAbsolute:S,handleBounds:{source:OD("source",h.nodeElement,w,d,g.id),target:OD("target",h.nodeElement,w,d,g.id)}}};t.set(g.id,A),g.parentId&&UM(A,t,n,{nodeOrigin:i,zIndexMode:o}),l=!0,y&&(f.push({id:g.id,type:"dimensions",dimensions:U}),g.expandParent&&g.parentId&&u.push({id:g.id,parentId:g.parentId,rect:Km(A,i)}))}}if(u.length>0){const h=yM(u,t,n,i);f.push(...h)}return{changes:f,updatedInternals:l}}async function Lhe({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function VD(e,t,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${i}-${e}`;const l=r.get(o)||new Map;if(r.set(o,l.set(n,t)),s){o=`${i}-${e}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,t))}}function GW(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},f=`${i}-${o}--${s}-${a}`,c=`${s}-${a}--${i}-${o}`;VD("source",l,c,e,i,o),VD("target",l,f,e,s,a),t.set(r.id,r)}}function XW(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:XW(n,t):!1}function WD(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Ohe(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!XW(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Pw({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,a,l;const i=[];for(const[f,c]of t){const d=(o=n.get(f))==null?void 0:o.internals.userNode;d&&i.push({...d,position:c.position,dragging:r})}if(!e)return[i[0],i];const s=(a=n.get(e))==null?void 0:a.internals.userNode;return[s?{...s,position:((l=t.get(e))==null?void 0:l.position)||s.position,dragging:r}:i[0],i]}function jhe({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Mb(s,t);return{x:o.x-s.x,y:o.y-s.y}}function Bhe({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,l=!1,f={x:0,y:0},c=null,d=!1,u=null,h=!1,g=!1,U=null;function y({noDragClassName:w,handleSelector:E,domNode:S,isSelectable:A,nodeId:M,nodeClickDistance:C=0}){u=fo(S);function T({x:O,y:F}){const{nodeLookup:B,nodeExtent:$,snapGrid:z,snapToGrid:H,nodeOrigin:G,onNodeDrag:V,onSelectionDrag:Y,onError:K,updateNodePositions:q}=t();s={x:O,y:F};let se=!1;const de=a.size>1,xe=de&&$?Ik(Ab(a)):null,ve=de&&H?jhe({dragItems:a,snapGrid:z,x:O,y:F}):null;for(const[ue,te]of a){if(!B.has(ue))continue;let le={x:O-te.distance.x,y:F-te.distance.y};H&&(le=ve?{x:Math.round(le.x+ve.x),y:Math.round(le.y+ve.y)}:Mb(le,z));let he=null;if(de&&$&&!te.extent&&xe){const{positionAbsolute:De}=te.internals,Ge=De.x-xe.x+$[0][0],ht=De.x+te.measured.width-xe.x2+$[1][0],ot=De.y-xe.y+$[0][1],Bt=De.y+te.measured.height-xe.y2+$[1][1];he=[[Ge,ot],[ht,Bt]]}const{position:we,positionAbsolute:Se}=NW({nodeId:ue,nextPosition:le,nodeLookup:B,nodeExtent:he||$,nodeOrigin:G,onError:K});se=se||te.position.x!==we.x||te.position.y!==we.y,te.position=we,te.internals.positionAbsolute=Se}if(g=g||se,!!se&&(q(a,!0),U&&(r||V||!M&&Y))){const[ue,te]=Pw({nodeId:M,dragItems:a,nodeLookup:B});r==null||r(U,a,ue,te),V==null||V(U,ue,te),M||Y==null||Y(U,te)}}async function R(){if(!c)return;const{transform:O,panBy:F,autoPanSpeed:B,autoPanOnNodeDrag:$}=t();if(!$){l=!1,cancelAnimationFrame(o);return}const[z,H]=_W(f,c,B);(z!==0||H!==0)&&(s.x=(s.x??0)-z/O[2],s.y=(s.y??0)-H/O[2],await F({x:z,y:H})&&T(s)),o=requestAnimationFrame(R)}function P(O){var de;const{nodeLookup:F,multiSelectionActive:B,nodesDraggable:$,transform:z,snapGrid:H,snapToGrid:G,selectNodesOnDrag:V,onNodeDragStart:Y,onSelectionDragStart:K,unselectNodesAndEdges:q}=t();d=!0,(!V||!A)&&!B&&M&&((de=F.get(M))!=null&&de.selected||q()),A&&V&&M&&(e==null||e(M));const se=w5(O.sourceEvent,{transform:z,snapGrid:H,snapToGrid:G,containerBounds:c});if(s=se,a=Ohe(F,$,se,M),a.size>0&&(n||Y||!M&&K)){const[xe,ve]=Pw({nodeId:M,dragItems:a,nodeLookup:F});n==null||n(O.sourceEvent,a,xe,ve),Y==null||Y(O.sourceEvent,xe,ve),M||K==null||K(O.sourceEvent,ve)}}const _=cW().clickDistance(C).on("start",O=>{const{domNode:F,nodeDragThreshold:B,transform:$,snapGrid:z,snapToGrid:H}=t();c=(F==null?void 0:F.getBoundingClientRect())||null,h=!1,g=!1,U=O.sourceEvent,B===0&&P(O),s=w5(O.sourceEvent,{transform:$,snapGrid:z,snapToGrid:H,containerBounds:c}),f=Ha(O.sourceEvent,c)}).on("drag",O=>{const{autoPanOnNodeDrag:F,transform:B,snapGrid:$,snapToGrid:z,nodeDragThreshold:H,nodeLookup:G}=t(),V=w5(O.sourceEvent,{transform:B,snapGrid:$,snapToGrid:z,containerBounds:c});if(U=O.sourceEvent,(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1||M&&!G.has(M))&&(h=!0),!h){if(!l&&F&&d&&(l=!0,R()),!d){const Y=Ha(O.sourceEvent,c),K=Y.x-f.x,q=Y.y-f.y;Math.sqrt(K*K+q*q)>H&&P(O)}(s.x!==V.xSnapped||s.y!==V.ySnapped)&&a&&d&&(f=Ha(O.sourceEvent,c),T(V))}}).on("end",O=>{if(!(!d||h)&&(l=!1,d=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:F,updateNodePositions:B,onNodeDragStop:$,onSelectionDragStop:z}=t();if(g&&(B(a,!1),g=!1),i||$||!M&&z){const[H,G]=Pw({nodeId:M,dragItems:a,nodeLookup:F,dragging:!1});i==null||i(O.sourceEvent,a,H,G),$==null||$(O.sourceEvent,H,G),M||z==null||z(O.sourceEvent,G)}}}).filter(O=>{const F=O.target;return!O.button&&(!w||!WD(F,`.${w}`,S))&&(!E||WD(F,E,S))});u.call(_)}function x(){u==null||u.on(".drag",null)}return{update:y,destroy:x}}function Fhe(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())m2(i,Km(s))>0&&r.push(s);return r}const $he=250;function zhe(e,t,n,r){var a,l;let i=[],s=1/0;const o=Fhe(e,n,t+$he);for(const f of o){const c=[...((a=f.internals.handleBounds)==null?void 0:a.source)??[],...((l=f.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:u,y:h}=Dh(f,d,d.position,!0),g=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(h-e.y,2));g>t||(g<s?(i=[{...d,x:u,y:h}],s=g):g===s&&i.push({...d,x:u,y:h}))}}if(!i.length)return null;if(i.length>1){const f=r.type==="source"?"target":"source";return i.find(c=>c.type===f)??i[0]}return i[0]}function KW(e,t,n,r,i,s=!1){var f,c,d;const o=r.get(e);if(!o)return null;const a=i==="strict"?(f=o.internals.handleBounds)==null?void 0:f[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((d=o.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(u=>u.id===n):a==null?void 0:a[0])??null;return l&&s?{...l,...Dh(o,l,l.position,!0)}:l}function YW(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Hhe(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ZW=()=>!0;function Vhe(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:l,lib:f,autoPanOnConnect:c,flowId:d,panBy:u,cancelConnection:h,onConnectStart:g,onConnect:U,onConnectEnd:y,isValidConnection:x=ZW,onReconnectEnd:w,updateConnection:E,getTransform:S,getFromHandle:A,autoPanSpeed:M,dragThreshold:C=1,handleDomNode:T}){const R=OW(e.target);let P=0,_;const{x:O,y:F}=Ha(e),B=YW(s,T),$=a==null?void 0:a.getBoundingClientRect();let z=!1;if(!$||!B)return;const H=KW(i,B,r,l,t);if(!H)return;let G=Ha(e,$),V=!1,Y=null,K=!1,q=null;function se(){if(!c||!$)return;const[we,Se]=_W(G,$,M);u({x:we,y:Se}),P=requestAnimationFrame(se)}const de={...H,nodeId:i,type:B,position:H.position},xe=l.get(i);let ue={inProgress:!0,isValid:null,from:Dh(xe,de,tt.Left,!0),fromHandle:de,fromPosition:de.position,fromNode:xe,to:G,toHandle:null,toPosition:_D[de.position],toNode:null,pointer:G};function te(){z=!0,E(ue),g==null||g(e,{nodeId:i,handleId:r,handleType:B})}C===0&&te();function le(we){if(!z){const{x:Bt,y:wn}=Ha(we),fn=Bt-O,ui=wn-F;if(!(fn*fn+ui*ui>C*C))return;te()}if(!A()||!de){he(we);return}const Se=S();G=Ha(we,$),_=zhe(Tb(G,Se,!1,[1,1]),n,l,de),V||(se(),V=!0);const De=qW(we,{handle:_,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:x,doc:R,lib:f,flowId:d,nodeLookup:l});q=De.handleDomNode,Y=De.connection,K=Hhe(!!_,De.isValid);const Ge=l.get(i),ht=Ge?Dh(Ge,de,tt.Left,!0):ue.from,ot={...ue,from:ht,isValid:K,to:De.toHandle&&K?$3({x:De.toHandle.x,y:De.toHandle.y},Se):G,toHandle:De.toHandle,toPosition:K&&De.toHandle?De.toHandle.position:_D[de.position],toNode:De.toHandle?l.get(De.toHandle.nodeId):null,pointer:G};E(ot),ue=ot}function he(we){if(!("touches"in we&&we.touches.length>0)){if(z){(_||q)&&Y&&K&&(U==null||U(Y));const{inProgress:Se,...De}=ue,Ge={...De,toPosition:ue.toHandle?ue.toPosition:null};y==null||y(we,Ge),s&&(w==null||w(we,Ge))}h(),cancelAnimationFrame(P),V=!1,K=!1,Y=null,q=null,R.removeEventListener("mousemove",le),R.removeEventListener("mouseup",he),R.removeEventListener("touchmove",le),R.removeEventListener("touchend",he)}}R.addEventListener("mousemove",le),R.addEventListener("mouseup",he),R.addEventListener("touchmove",le),R.addEventListener("touchend",he)}function qW(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:l,isValidConnection:f=ZW,nodeLookup:c}){const d=s==="target",u=t?o.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:g}=Ha(e),U=o.elementFromPoint(h,g),y=U!=null&&U.classList.contains(`${a}-flow__handle`)?U:u,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const w=YW(void 0,y),E=y.getAttribute("data-nodeid"),S=y.getAttribute("data-handleid"),A=y.classList.contains("connectable"),M=y.classList.contains("connectableend");if(!E||!w)return x;const C={source:d?E:r,sourceHandle:d?S:i,target:d?r:E,targetHandle:d?i:S};x.connection=C;const R=A&&M&&(n===Gm.Strict?d&&w==="source"||!d&&w==="target":E!==r||S!==i);x.isValid=R&&f(C),x.toHandle=KW(E,w,S,c,n,!0)}return x}const Pk={onPointerDown:Vhe,isValid:qW};function Whe({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=fo(e);function s({translateExtent:a,width:l,height:f,zoomStep:c=1,pannable:d=!0,zoomable:u=!0,inversePan:h=!1}){const g=E=>{if(E.sourceEvent.type!=="wheel"||!t)return;const S=n(),A=E.sourceEvent.ctrlKey&&g2()?10:1,M=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*c,C=S[2]*Math.pow(2,M*A);t.scaleTo(C)};let U=[0,0];const y=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(U=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},x=E=>{const S=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const A=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],M=[A[0]-U[0],A[1]-U[1]];U=A;const C=r()*Math.max(S[2],Math.log(S[2]))*(h?-1:1),T={x:S[0]-M[0]*C,y:S[1]-M[1]*C},R=[[0,0],[l,f]];t.setViewportConstrained({x:T.x,y:T.y,zoom:S[2]},R,a)},w=kW().on("start",y).on("zoom",d?x:null).on("zoom.wheel",u?g:null);i.call(w,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:La}}const i7=e=>({x:e.x,y:e.y,zoom:e.k}),Dw=({x:e,y:t,zoom:n})=>t7.translate(e,t).scale(n),Up=(e,t)=>e.target.closest(`.${t}`),QW=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ghe=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Lw=(e,t=0,n=Ghe,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},JW=e=>{const t=e.ctrlKey&&g2()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Xhe({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:f}){return c=>{if(Up(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&o){const y=La(c),x=JW(c),w=d*Math.pow(2,x);r.scaleTo(n,w,y,c);return}const u=c.deltaMode===1?20:1;let h=i===ph.Vertical?0:c.deltaX*u,g=i===ph.Horizontal?0:c.deltaY*u;!g2()&&c.shiftKey&&i!==ph.Vertical&&(h=c.deltaY*u,g=0),r.translateBy(n,-(h/d)*s,-(g/d)*s,{internal:!0});const U=i7(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l==null||l(c,U),e.panScrollTimeout=setTimeout(()=>{f==null||f(c,U),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(c,U))}}function Khe({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,a=Up(r,e);if(r.ctrlKey&&s&&a&&r.preventDefault(),o||a)return null;r.preventDefault(),n.call(this,r,i)}}function Yhe({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var s,o,a;if((s=r.sourceEvent)!=null&&s.internal)return;const i=i7(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Zhe({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{var o,a;e.usedRightMouseButton=!!(n&&QW(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!((a=s.sourceEvent)!=null&&a.internal)&&(i==null||i(s.sourceEvent,i7(s.transform)))}}function qhe({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,s&&QW(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const l=i7(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(o.sourceEvent,l)},n?150:0)}}}function Qhe({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:l,lib:f,connectionInProgress:c}){return d=>{var y;const u=e||t,h=n&&d.ctrlKey,g=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Up(d,`${f}-flow__node`)||Up(d,`${f}-flow__edge`)))return!0;if(!r&&!u&&!i&&!s&&!n||o||c&&!g||Up(d,a)&&g||Up(d,l)&&(!g||i&&g&&!e)||!n&&d.ctrlKey&&g)return!1;if(!n&&d.type==="touchstart"&&((y=d.touches)==null?void 0:y.length)>1)return d.preventDefault(),!1;if(!u&&!i&&!h&&g||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const U=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||g)&&U}}function Jhe({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:l}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),d=kW().scaleExtent([t,n]).translateExtent(r),u=fo(e).call(d);w({x:i.x,y:i.y,zoom:Xm(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const h=u.on("wheel.zoom"),g=u.on("dblclick.zoom");d.wheelDelta(JW);function U(_,O){return u?new Promise(F=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?v5:Ry).transform(Lw(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>F(!0)),_)}):Promise.resolve(!1)}function y({noWheelClassName:_,noPanClassName:O,onPaneContextMenu:F,userSelectionActive:B,panOnScroll:$,panOnDrag:z,panOnScrollMode:H,panOnScrollSpeed:G,preventScrolling:V,zoomOnPinch:Y,zoomOnScroll:K,zoomOnDoubleClick:q,zoomActivationKeyPressed:se,lib:de,onTransformChange:xe,connectionInProgress:ve,paneClickDistance:ue,selectionOnDrag:te}){B&&!f.isZoomingOrPanning&&x();const le=$&&!se&&!B;d.clickDistance(te?1/0:!za(ue)||ue<0?0:ue);const he=le?Xhe({zoomPanValues:f,noWheelClassName:_,d3Selection:u,d3Zoom:d,panOnScrollMode:H,panOnScrollSpeed:G,zoomOnPinch:Y,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a}):Khe({noWheelClassName:_,preventScrolling:V,d3ZoomHandler:h});if(u.on("wheel.zoom",he,{passive:!1}),!B){const Se=Yhe({zoomPanValues:f,onDraggingChange:l,onPanZoomStart:o});d.on("start",Se);const De=Zhe({zoomPanValues:f,panOnDrag:z,onPaneContextMenu:!!F,onPanZoom:s,onTransformChange:xe});d.on("zoom",De);const Ge=qhe({zoomPanValues:f,panOnDrag:z,panOnScroll:$,onPaneContextMenu:F,onPanZoomEnd:a,onDraggingChange:l});d.on("end",Ge)}const we=Qhe({zoomActivationKeyPressed:se,panOnDrag:z,zoomOnScroll:K,panOnScroll:$,zoomOnDoubleClick:q,zoomOnPinch:Y,userSelectionActive:B,noPanClassName:O,noWheelClassName:_,lib:de,connectionInProgress:ve});d.filter(we),q?u.on("dblclick.zoom",g):u.on("dblclick.zoom",null)}function x(){d.on("zoom",null)}async function w(_,O,F){const B=Dw(_),$=d==null?void 0:d.constrain()(B,O,F);return $&&await U($),new Promise(z=>z($))}async function E(_,O){const F=Dw(_);return await U(F,O),new Promise(B=>B(F))}function S(_){if(u){const O=Dw(_),F=u.property("__zoom");(F.k!==_.zoom||F.x!==_.x||F.y!==_.y)&&(d==null||d.transform(u,O,null,{sync:!0}))}}function A(){const _=u?SW(u.node()):{x:0,y:0,k:1};return{x:_.x,y:_.y,zoom:_.k}}function M(_,O){return u?new Promise(F=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?v5:Ry).scaleTo(Lw(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>F(!0)),_)}):Promise.resolve(!1)}function C(_,O){return u?new Promise(F=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?v5:Ry).scaleBy(Lw(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>F(!0)),_)}):Promise.resolve(!1)}function T(_){d==null||d.scaleExtent(_)}function R(_){d==null||d.translateExtent(_)}function P(_){const O=!za(_)||_<0?0:_;d==null||d.clickDistance(O)}return{update:y,destroy:x,setViewport:E,setViewportConstrained:w,getViewport:A,scaleTo:M,scaleBy:C,setScaleExtent:T,setTranslateExtent:R,syncViewport:S,setClickDistance:P}}var Zm;(function(e){e.Line="line",e.Handle="handle"})(Zm||(Zm={}));function e1e({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}function GD(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function gd(e,t){return Math.max(0,t-e)}function bd(e,t){return Math.max(0,e-t)}function TU(e,t,n){return Math.max(0,t-e,e-n)}function XD(e,t){return e?!t:t}function t1e(e,t,n,r,i,s,o,a){let{affectsX:l,affectsY:f}=t;const{isHorizontal:c,isVertical:d}=t,u=c&&d,{xSnapped:h,ySnapped:g}=n,{minWidth:U,maxWidth:y,minHeight:x,maxHeight:w}=r,{x:E,y:S,width:A,height:M,aspectRatio:C}=e;let T=Math.floor(c?h-e.pointerX:0),R=Math.floor(d?g-e.pointerY:0);const P=A+(l?-T:T),_=M+(f?-R:R),O=-s[0]*A,F=-s[1]*M;let B=TU(P,U,y),$=TU(_,x,w);if(o){let G=0,V=0;l&&T<0?G=gd(E+T+O,o[0][0]):!l&&T>0&&(G=bd(E+P+O,o[1][0])),f&&R<0?V=gd(S+R+F,o[0][1]):!f&&R>0&&(V=bd(S+_+F,o[1][1])),B=Math.max(B,G),$=Math.max($,V)}if(a){let G=0,V=0;l&&T>0?G=bd(E+T,a[0][0]):!l&&T<0&&(G=gd(E+P,a[1][0])),f&&R>0?V=bd(S+R,a[0][1]):!f&&R<0&&(V=gd(S+_,a[1][1])),B=Math.max(B,G),$=Math.max($,V)}if(i){if(c){const G=TU(P/C,x,w)*C;if(B=Math.max(B,G),o){let V=0;!l&&!f||l&&!f&&u?V=bd(S+F+P/C,o[1][1])*C:V=gd(S+F+(l?T:-T)/C,o[0][1])*C,B=Math.max(B,V)}if(a){let V=0;!l&&!f||l&&!f&&u?V=gd(S+P/C,a[1][1])*C:V=bd(S+(l?T:-T)/C,a[0][1])*C,B=Math.max(B,V)}}if(d){const G=TU(_*C,U,y)/C;if($=Math.max($,G),o){let V=0;!l&&!f||f&&!l&&u?V=bd(E+_*C+O,o[1][0])/C:V=gd(E+(f?R:-R)*C+O,o[0][0])/C,$=Math.max($,V)}if(a){let V=0;!l&&!f||f&&!l&&u?V=gd(E+_*C,a[1][0])/C:V=bd(E+(f?R:-R)*C,a[0][0])/C,$=Math.max($,V)}}}R=R+(R<0?$:-$),T=T+(T<0?B:-B),i&&(u?P>_*C?R=(XD(l,f)?-T:T)/C:T=(XD(l,f)?-R:R)*C:c?(R=T/C,f=l):(T=R*C,l=f));const z=l?E+T:E,H=f?S+R:S;return{width:A+(l?-T:T),height:M+(f?-R:R),x:s[0]*T*(l?-1:1)+z,y:s[1]*R*(f?-1:1)+H}}const eG={width:0,height:0,x:0,y:0},n1e={...eG,pointerX:0,pointerY:0,aspectRatio:1};function r1e(e){return[[0,0],[e.measured.width,e.measured.height]]}function i1e(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,a=n[0]*s,l=n[1]*o;return[[r-a,i-l],[r+s-a,i+o-l]]}function s1e({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=fo(e);let o={controlDirection:GD("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:f,boundaries:c,keepAspectRatio:d,resizeDirection:u,onResizeStart:h,onResize:g,onResizeEnd:U,shouldResize:y}){let x={...eG},w={...n1e};o={boundaries:c,resizeDirection:u,keepAspectRatio:d,controlDirection:GD(f)};let E,S=null,A=[],M,C,T,R=!1;const P=cW().on("start",_=>{const{nodeLookup:O,transform:F,snapGrid:B,snapToGrid:$,nodeOrigin:z,paneDomNode:H}=n();if(E=O.get(t),!E)return;S=(H==null?void 0:H.getBoundingClientRect())??null;const{xSnapped:G,ySnapped:V}=w5(_.sourceEvent,{transform:F,snapGrid:B,snapToGrid:$,containerBounds:S});x={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},w={...x,pointerX:G,pointerY:V,aspectRatio:x.width/x.height},M=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(M=O.get(E.parentId),C=M&&E.extent==="parent"?r1e(M):void 0),A=[],T=void 0;for(const[Y,K]of O)if(K.parentId===t&&(A.push({id:Y,position:{...K.position},extent:K.extent}),K.extent==="parent"||K.expandParent)){const q=i1e(K,E,K.origin??z);T?T=[[Math.min(q[0][0],T[0][0]),Math.min(q[0][1],T[0][1])],[Math.max(q[1][0],T[1][0]),Math.max(q[1][1],T[1][1])]]:T=q}h==null||h(_,{...x})}).on("drag",_=>{const{transform:O,snapGrid:F,snapToGrid:B,nodeOrigin:$}=n(),z=w5(_.sourceEvent,{transform:O,snapGrid:F,snapToGrid:B,containerBounds:S}),H=[];if(!E)return;const{x:G,y:V,width:Y,height:K}=x,q={},se=E.origin??$,{width:de,height:xe,x:ve,y:ue}=t1e(w,o.controlDirection,z,o.boundaries,o.keepAspectRatio,se,C,T),te=de!==Y,le=xe!==K,he=ve!==G&&te,we=ue!==V&&le;if(!he&&!we&&!te&&!le)return;if((he||we||se[0]===1||se[1]===1)&&(q.x=he?ve:x.x,q.y=we?ue:x.y,x.x=q.x,x.y=q.y,A.length>0)){const ht=ve-G,ot=ue-V;for(const Bt of A)Bt.position={x:Bt.position.x-ht+se[0]*(de-Y),y:Bt.position.y-ot+se[1]*(xe-K)},H.push(Bt)}if((te||le)&&(q.width=te&&(!o.resizeDirection||o.resizeDirection==="horizontal")?de:x.width,q.height=le&&(!o.resizeDirection||o.resizeDirection==="vertical")?xe:x.height,x.width=q.width,x.height=q.height),M&&E.expandParent){const ht=se[0]*(q.width??0);q.x&&q.x<ht&&(x.x=ht,w.x=w.x-(q.x-ht));const ot=se[1]*(q.height??0);q.y&&q.y<ot&&(x.y=ot,w.y=w.y-(q.y-ot))}const Se=e1e({width:x.width,prevWidth:Y,height:x.height,prevHeight:K,affectsX:o.controlDirection.affectsX,affectsY:o.controlDirection.affectsY}),De={...x,direction:Se};(y==null?void 0:y(_,De))!==!1&&(R=!0,g==null||g(_,De),r(q,H))}).on("end",_=>{R&&(U==null||U(_,{...x}),i==null||i({...x}),R=!1)});s.call(P)}function l(){s.on(".drag",null)}return{update:a,destroy:l}}var Ow={exports:{}},jw={},Bw={exports:{}},Fw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function o1e(){if(KD)return Fw;KD=1;var e=bb();function t(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function a(d,u){var h=u(),g=r({inst:{value:h,getSnapshot:u}}),U=g[0].inst,y=g[1];return s(function(){U.value=h,U.getSnapshot=u,l(U)&&y({inst:U})},[d,h,u]),i(function(){return l(U)&&y({inst:U}),d(function(){l(U)&&y({inst:U})})},[d]),o(h),h}function l(d){var u=d.getSnapshot;d=d.value;try{var h=u();return!n(d,h)}catch{return!0}}function f(d,u){return u()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:a;return Fw.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,Fw}var YD;function tG(){return YD||(YD=1,Bw.exports=o1e()),Bw.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZD;function a1e(){if(ZD)return jw;ZD=1;var e=bb(),t=tG();function n(f,c){return f===c&&(f!==0||1/f===1/c)||f!==f&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return jw.useSyncExternalStoreWithSelector=function(f,c,d,u,h){var g=s(null);if(g.current===null){var U={hasValue:!1,value:null};g.current=U}else U=g.current;g=a(function(){function x(M){if(!w){if(w=!0,E=M,M=u(M),h!==void 0&&U.hasValue){var C=U.value;if(h(C,M))return S=C}return S=M}if(C=S,r(E,M))return C;var T=u(M);return h!==void 0&&h(C,T)?(E=M,C):(E=M,S=T)}var w=!1,E,S,A=d===void 0?null:d;return[function(){return x(c())},A===null?void 0:function(){return x(A())}]},[c,d,u,h]);var y=i(f,g[0],g[1]);return o(function(){U.hasValue=!0,U.value=y},[y]),l(y),y},jw}var qD;function l1e(){return qD||(qD=1,Ow.exports=a1e()),Ow.exports}var nG=l1e();const rG=mc(nG),QD=e=>{let t;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(t):c;if(!Object.is(u,t)){const h=t;t=d??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(g=>g(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>f,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}},f=t=e(r,i,l);return l},iG=e=>e?QD(e):QD,{useDebugValue:c1e}=Te,{useSyncExternalStoreWithSelector:f1e}=rG,d1e=e=>e;function sG(e,t=d1e,n){const r=f1e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return c1e(r),r}const JD=(e,t)=>{const n=iG(e),r=(i,s=t)=>sG(n,i,s);return Object.assign(r,n),r},u1e=(e,t)=>e?JD(e,t):JD;function Wn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var ri=nH();const oG=mc(ri),s7=I.createContext(null),h1e=s7.Provider,aG=ic.error001();function Gt(e,t){const n=I.useContext(s7);if(n===null)throw new Error(aG);return sG(n,e,t)}function Gn(){const e=I.useContext(s7);if(e===null)throw new Error(aG);return I.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const eL={display:"none"},p1e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},lG="react-flow__node-desc",cG="react-flow__edge-desc",m1e="react-flow__aria-live",g1e=e=>e.ariaLiveMessage,b1e=e=>e.ariaLabelConfig;function U1e({rfId:e}){const t=Gt(g1e);return m.jsx("div",{id:`${m1e}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:p1e,children:t})}function y1e({rfId:e,disableKeyboardA11y:t}){const n=Gt(b1e);return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:`${lG}-${e}`,style:eL,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),m.jsx("div",{id:`${cG}-${e}`,style:eL,children:n["edge.a11yDescription.default"]}),!t&&m.jsx(U1e,{rfId:e})]})}const o7=I.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return m.jsx("div",{className:Or(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});o7.displayName="Panel";function x1e({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m.jsx(o7,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const v1e=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},IU=e=>e.id;function w1e(e,t){return Wn(e.selectedNodes.map(IU),t.selectedNodes.map(IU))&&Wn(e.selectedEdges.map(IU),t.selectedEdges.map(IU))}function E1e({onSelectionChange:e}){const t=Gn(),{selectedNodes:n,selectedEdges:r}=Gt(v1e,w1e);return I.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const S1e=e=>!!e.onSelectionChangeHandlers;function k1e({onSelectionChange:e}){const t=Gt(S1e);return e||t?m.jsx(E1e,{onSelectionChange:e}):null}const fG=[0,0],C1e={x:0,y:0,zoom:1},A1e=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],tL=[...A1e,"rfId"],M1e=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),nL={translateExtent:h2,nodeOrigin:fG,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function T1e(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:l}=Gt(M1e,Wn),f=Gn();I.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{c.current=nL,a()}),[]);const c=I.useRef(nL);return I.useEffect(()=>{for(const d of tL){const u=e[d],h=c.current[d];u!==h&&(typeof e[d]>"u"||(d==="nodes"?t(u):d==="edges"?n(u):d==="minZoom"?r(u):d==="maxZoom"?i(u):d==="translateExtent"?s(u):d==="nodeExtent"?o(u):d==="ariaLabelConfig"?f.setState({ariaLabelConfig:bhe(u)}):d==="fitView"?f.setState({fitViewQueued:u}):d==="fitViewOptions"?f.setState({fitViewOptions:u}):f.setState({[d]:u})))}c.current=e},tL.map(d=>e[d])),null}function rL(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function I1e(e){var r;const[t,n]=I.useState(e==="system"?null:e);return I.useEffect(()=>{if(e!=="system"){n(e);return}const i=rL(),s=()=>n(i!=null&&i.matches?"dark":"light");return s(),i==null||i.addEventListener("change",s),()=>{i==null||i.removeEventListener("change",s)}},[e]),t!==null?t:(r=rL())!=null&&r.matches?"dark":"light"}const iL=typeof document<"u"?document:null;function b2(e=null,t={target:iL,actInsideInputWithModifier:!0}){const[n,r]=I.useState(!1),i=I.useRef(!1),s=I.useRef(new Set([])),[o,a]=I.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=f.reduce((d,u)=>d.concat(...u),[]);return[f,c]}return[[],[]]},[e]);return I.useEffect(()=>{const l=(t==null?void 0:t.target)??iL,f=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=h=>{var y,x;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!f)&&jW(h))return!1;const U=oL(h.code,a);if(s.current.add(h[U]),sL(o,s.current,!1)){const w=((x=(y=h.composedPath)==null?void 0:y.call(h))==null?void 0:x[0])||h.target,E=(w==null?void 0:w.nodeName)==="BUTTON"||(w==null?void 0:w.nodeName)==="A";t.preventDefault!==!1&&(i.current||!E)&&h.preventDefault(),r(!0)}},d=h=>{const g=oL(h.code,a);sL(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[g]),h.key==="Meta"&&s.current.clear(),i.current=!1},u=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,r]),n}function sL(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function oL(e,t){return t.includes(e)?"code":"key"}const N1e=()=>{const e=Gn();return I.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=e.getState(),l=hM(t,r,i,s,o,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:a,y:l}=o.getBoundingClientRect(),f={x:t.x-a,y:t.y-l},c=n.snapGrid??i,d=n.snapToGrid??s;return Tb(f,r,d,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=$3(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function dG(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const l of o)R1e(l,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function R1e(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function uG(e,t){return dG(e,t)}function hG(e,t){return dG(e,t)}function pu(e,t){return{id:e,type:"select",selected:t}}function yp(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(pu(s.id,o)))}return r}function aL({items:e=[],lookup:t}){var i;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,o]of e.entries()){const a=t.get(o.id),l=((i=a==null?void 0:a.internals)==null?void 0:i.userNode)??a;l!==void 0&&l!==o&&n.push({id:o.id,item:o,type:"replace"}),l===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function lL(e){return{id:e.id,type:"remove"}}const cL=e=>ahe(e),_1e=e=>IW(e);function pG(e){return I.forwardRef(e)}const P1e=typeof window<"u"?I.useLayoutEffect:I.useEffect;function fL(e){const[t,n]=I.useState(BigInt(0)),[r]=I.useState(()=>D1e(()=>n(i=>i+BigInt(1))));return P1e(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function D1e(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const mG=I.createContext(null);function L1e({children:e}){const t=Gn(),n=I.useCallback(a=>{const{nodes:l=[],setNodes:f,hasDefaultNodes:c,onNodesChange:d,nodeLookup:u,fitViewQueued:h,onNodesChangeMiddlewareMap:g}=t.getState();let U=l;for(const x of a)U=typeof x=="function"?x(U):x;let y=aL({items:U,lookup:u});for(const x of g.values())y=x(y);c&&f(U),y.length>0?d==null||d(y):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:w,setNodes:E}=t.getState();x&&E(w)})},[]),r=fL(n),i=I.useCallback(a=>{const{edges:l=[],setEdges:f,hasDefaultEdges:c,onEdgesChange:d,edgeLookup:u}=t.getState();let h=l;for(const g of a)h=typeof g=="function"?g(h):g;c?f(h):d&&d(aL({items:h,lookup:u}))},[]),s=fL(i),o=I.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return m.jsx(mG.Provider,{value:o,children:e})}function O1e(){const e=I.useContext(mG);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const j1e=e=>!!e.panZoom;function a7(){const e=N1e(),t=Gn(),n=O1e(),r=Gt(j1e),i=I.useMemo(()=>{const s=d=>t.getState().nodeLookup.get(d),o=d=>{n.nodeQueue.push(d)},a=d=>{n.edgeQueue.push(d)},l=d=>{var x,w;const{nodeLookup:u,nodeOrigin:h}=t.getState(),g=cL(d)?d:u.get(d.id),U=g.parentId?LW(g.position,g.measured,g.parentId,u,h):g.position,y={...g,position:U,width:((x=g.measured)==null?void 0:x.width)??g.width,height:((w=g.measured)==null?void 0:w.height)??g.height};return Km(y)},f=(d,u,h={replace:!1})=>{o(g=>g.map(U=>{if(U.id===d){const y=typeof u=="function"?u(U):u;return h.replace&&cL(y)?y:{...U,...y}}return U}))},c=(d,u,h={replace:!1})=>{a(g=>g.map(U=>{if(U.id===d){const y=typeof u=="function"?u(U):u;return h.replace&&_1e(y)?y:{...U,...y}}return U}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var u;return(u=s(d))==null?void 0:u.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(u=>({...u}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:o,setEdges:a,addNodes:d=>{const u=Array.isArray(d)?d:[d];n.nodeQueue.push(h=>[...h,...u])},addEdges:d=>{const u=Array.isArray(d)?d:[d];n.edgeQueue.push(h=>[...h,...u])},toObject:()=>{const{nodes:d=[],edges:u=[],transform:h}=t.getState(),[g,U,y]=h;return{nodes:d.map(x=>({...x})),edges:u.map(x=>({...x})),viewport:{x:g,y:U,zoom:y}}},deleteElements:async({nodes:d=[],edges:u=[]})=>{const{nodes:h,edges:g,onNodesDelete:U,onEdgesDelete:y,triggerNodeChanges:x,triggerEdgeChanges:w,onDelete:E,onBeforeDelete:S}=t.getState(),{nodes:A,edges:M}=await uhe({nodesToRemove:d,edgesToRemove:u,nodes:h,edges:g,onBeforeDelete:S}),C=M.length>0,T=A.length>0;if(C){const R=M.map(lL);y==null||y(M),w(R)}if(T){const R=A.map(lL);U==null||U(A),x(R)}return(T||C)&&(E==null||E({nodes:A,edges:M})),{deletedNodes:A,deletedEdges:M}},getIntersectingNodes:(d,u=!0,h)=>{const g=DD(d),U=g?d:l(d),y=h!==void 0;return U?(h||t.getState().nodes).filter(x=>{const w=t.getState().nodeLookup.get(x.id);if(w&&!g&&(x.id===d.id||!w.internals.positionAbsolute))return!1;const E=Km(y?x:w),S=m2(E,U);return u&&S>0||S>=E.width*E.height||S>=U.width*U.height}):[]},isNodeIntersecting:(d,u,h=!0)=>{const U=DD(d)?d:l(d);if(!U)return!1;const y=m2(U,u);return h&&y>0||y>=u.width*u.height||y>=U.width*U.height},updateNode:f,updateNodeData:(d,u,h={replace:!1})=>{f(d,g=>{const U=typeof u=="function"?u(g):u;return h.replace?{...g,data:U}:{...g,data:{...g.data,...U}}},h)},updateEdge:c,updateEdgeData:(d,u,h={replace:!1})=>{c(d,g=>{const U=typeof u=="function"?u(g):u;return h.replace?{...g,data:U}:{...g,data:{...g.data,...U}}},h)},getNodesBounds:d=>{const{nodeLookup:u,nodeOrigin:h}=t.getState();return lhe(d,{nodeLookup:u,nodeOrigin:h})},getHandleConnections:({type:d,id:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}-${d}${u?`-${u}`:""}`))==null?void 0:g.values())??[])},getNodeConnections:({type:d,handleId:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}${d?u?`-${d}-${u}`:`-${d}`:""}`))==null?void 0:g.values())??[])},fitView:async d=>{const u=t.getState().fitViewResolver??ghe();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:u}),n.nodeQueue.push(h=>[...h]),u.promise}}},[]);return I.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const dL=e=>e.selected,B1e=typeof window<"u"?window:void 0;function F1e({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Gn(),{deleteElements:r}=a7(),i=b2(e,{actInsideInputWithModifier:!1}),s=b2(t,{target:B1e});I.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(dL),edges:o.filter(dL)}),n.setState({nodesSelectionActive:!1})}},[i]),I.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function $1e(e){const t=Gn();I.useEffect(()=>{const n=()=>{var i,s,o,a;if(!e.current||!(((s=(i=e.current).checkVisibility)==null?void 0:s.call(i))??!0))return!1;const r=pM(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",ic.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const l7={position:"absolute",width:"100%",height:"100%",top:0,left:0},z1e=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function H1e({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=ph.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:f,minZoom:c,maxZoom:d,zoomActivationKeyCode:u,preventScrolling:h=!0,children:g,noWheelClassName:U,noPanClassName:y,onViewportChange:x,isControlledViewport:w,paneClickDistance:E,selectionOnDrag:S}){const A=Gn(),M=I.useRef(null),{userSelectionActive:C,lib:T,connectionInProgress:R}=Gt(z1e,Wn),P=b2(u),_=I.useRef();$1e(M);const O=I.useCallback(F=>{x==null||x({x:F[0],y:F[1],zoom:F[2]}),w||A.setState({transform:F})},[x,w]);return I.useEffect(()=>{if(M.current){_.current=Jhe({domNode:M.current,minZoom:c,maxZoom:d,translateExtent:f,viewport:l,onDraggingChange:z=>A.setState(H=>H.paneDragging===z?H:{paneDragging:z}),onPanZoomStart:(z,H)=>{const{onViewportChangeStart:G,onMoveStart:V}=A.getState();V==null||V(z,H),G==null||G(H)},onPanZoom:(z,H)=>{const{onViewportChange:G,onMove:V}=A.getState();V==null||V(z,H),G==null||G(H)},onPanZoomEnd:(z,H)=>{const{onViewportChangeEnd:G,onMoveEnd:V}=A.getState();V==null||V(z,H),G==null||G(H)}});const{x:F,y:B,zoom:$}=_.current.getViewport();return A.setState({panZoom:_.current,transform:[F,B,$],domNode:M.current.closest(".react-flow")}),()=>{var z;(z=_.current)==null||z.destroy()}}},[]),I.useEffect(()=>{var F;(F=_.current)==null||F.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:P,preventScrolling:h,noPanClassName:y,userSelectionActive:C,noWheelClassName:U,lib:T,onTransformChange:O,connectionInProgress:R,selectionOnDrag:S,paneClickDistance:E})},[e,t,n,r,i,s,o,a,P,h,y,C,U,T,O,R,S,E]),m.jsx("div",{className:"react-flow__renderer",ref:M,style:l7,children:g})}const V1e=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function W1e(){const{userSelectionActive:e,userSelectionRect:t}=Gt(V1e,Wn);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const $w=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},G1e=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function X1e({isSelecting:e,selectionKeyPressed:t,selectionMode:n=p2.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:s,onSelectionStart:o,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:f,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:h,children:g}){const U=Gn(),{userSelectionActive:y,elementsSelectable:x,dragging:w,connectionInProgress:E}=Gt(G1e,Wn),S=x&&(e||y),A=I.useRef(null),M=I.useRef(),C=I.useRef(new Set),T=I.useRef(new Set),R=I.useRef(!1),P=G=>{if(R.current||E){R.current=!1;return}l==null||l(G),U.getState().resetSelectedElements(),U.setState({nodesSelectionActive:!1})},_=G=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){G.preventDefault();return}f==null||f(G)},O=c?G=>c(G):void 0,F=G=>{R.current&&(G.stopPropagation(),R.current=!1)},B=G=>{var xe,ve;const{domNode:V}=U.getState();if(M.current=V==null?void 0:V.getBoundingClientRect(),!M.current)return;const Y=G.target===A.current;if(!Y&&!!G.target.closest(".nokey")||!e||!(s&&Y||t)||G.button!==0||!G.isPrimary)return;(ve=(xe=G.target)==null?void 0:xe.setPointerCapture)==null||ve.call(xe,G.pointerId),R.current=!1;const{x:se,y:de}=Ha(G.nativeEvent,M.current);U.setState({userSelectionRect:{width:0,height:0,startX:se,startY:de,x:se,y:de}}),Y||(G.stopPropagation(),G.preventDefault())},$=G=>{const{userSelectionRect:V,transform:Y,nodeLookup:K,edgeLookup:q,connectionLookup:se,triggerNodeChanges:de,triggerEdgeChanges:xe,defaultEdgeOptions:ve,resetSelectedElements:ue}=U.getState();if(!M.current||!V)return;const{x:te,y:le}=Ha(G.nativeEvent,M.current),{startX:he,startY:we}=V;if(!R.current){const ot=t?0:i;if(Math.hypot(te-he,le-we)<=ot)return;ue(),o==null||o(G)}R.current=!0;const Se={startX:he,startY:we,x:te<he?te:he,y:le<we?le:we,width:Math.abs(te-he),height:Math.abs(le-we)},De=C.current,Ge=T.current;C.current=new Set(uM(K,Se,Y,n===p2.Partial,!0).map(ot=>ot.id)),T.current=new Set;const ht=(ve==null?void 0:ve.selectable)??!0;for(const ot of C.current){const Bt=se.get(ot);if(Bt)for(const{edgeId:wn}of Bt.values()){const fn=q.get(wn);fn&&(fn.selectable??ht)&&T.current.add(wn)}}if(!LD(De,C.current)){const ot=yp(K,C.current,!0);de(ot)}if(!LD(Ge,T.current)){const ot=yp(q,T.current);xe(ot)}U.setState({userSelectionRect:Se,userSelectionActive:!0,nodesSelectionActive:!1})},z=G=>{var V,Y;G.button===0&&((Y=(V=G.target)==null?void 0:V.releasePointerCapture)==null||Y.call(V,G.pointerId),!y&&G.target===A.current&&U.getState().userSelectionRect&&(P==null||P(G)),U.setState({userSelectionActive:!1,userSelectionRect:null}),R.current&&(a==null||a(G),U.setState({nodesSelectionActive:C.current.size>0})))},H=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:Or(["react-flow__pane",{draggable:H,dragging:w,selection:e}]),onClick:S?void 0:$w(P,A),onContextMenu:$w(_,A),onWheel:$w(O,A),onPointerEnter:S?void 0:d,onPointerMove:S?$:u,onPointerUp:S?z:void 0,onPointerDownCapture:S?B:void 0,onClickCapture:S?F:void 0,onPointerLeave:h,ref:A,style:l7,children:[g,m.jsx(W1e,{})]})}function Dk({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:l}=t.getState(),f=a.get(e);if(!f){l==null||l("012",ic.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function gG({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=Gn(),[l,f]=I.useState(!1),c=I.useRef();return I.useEffect(()=>{c.current=Bhe({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{Dk({id:d,store:a,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),I.useEffect(()=>{if(!(t||!e.current||!c.current))return c.current.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{var d;(d=c.current)==null||d.destroy()}},[n,r,t,s,e,i,o]),l}const K1e=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function bG(){const e=Gn();return I.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:l,nodeLookup:f,nodeOrigin:c}=e.getState(),d=new Map,u=K1e(o),h=i?s[0]:5,g=i?s[1]:5,U=n.direction.x*h*n.factor,y=n.direction.y*g*n.factor;for(const[,x]of f){if(!u(x))continue;let w={x:x.internals.positionAbsolute.x+U,y:x.internals.positionAbsolute.y+y};i&&(w=Mb(w,s));const{position:E,positionAbsolute:S}=NW({nodeId:x.id,nextPosition:w,nodeLookup:f,nodeExtent:r,nodeOrigin:c,onError:a});x.position=E,x.internals.positionAbsolute=S,d.set(x.id,x)}l(d)},[])}const xM=I.createContext(null),Y1e=xM.Provider;xM.Consumer;const UG=()=>I.useContext(xM),Z1e=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),q1e=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:l,isValid:f}=o,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:s===Gm.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&f}};function Q1e({type:e="source",position:t=tt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:f,onMouseDown:c,onTouchStart:d,...u},h){var $,z;const g=o||null,U=e==="target",y=Gn(),x=UG(),{connectOnClick:w,noPanClassName:E,rfId:S}=Gt(Z1e,Wn),{connectingFrom:A,connectingTo:M,clickConnecting:C,isPossibleEndHandle:T,connectionInProcess:R,clickConnectionInProcess:P,valid:_}=Gt(q1e(x,g,e),Wn);x||(z=($=y.getState()).onError)==null||z.call($,"010",ic.error010());const O=H=>{const{defaultEdgeOptions:G,onConnect:V,hasDefaultEdges:Y}=y.getState(),K={...G,...H};if(Y){const{edges:q,setEdges:se}=y.getState();se(Ehe(K,q))}V==null||V(K),a==null||a(K)},F=H=>{if(!x)return;const G=BW(H.nativeEvent);if(i&&(G&&H.button===0||!G)){const V=y.getState();Pk.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:U,handleId:g,nodeId:x,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:(...Y)=>{var K,q;return(q=(K=y.getState()).onConnectEnd)==null?void 0:q.call(K,...Y)},updateConnection:V.updateConnection,onConnect:O,isValidConnection:n||((...Y)=>{var K,q;return((q=(K=y.getState()).isValidConnection)==null?void 0:q.call(K,...Y))??!0}),getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}G?c==null||c(H):d==null||d(H)},B=H=>{const{onClickConnectStart:G,onClickConnectEnd:V,connectionClickStartHandle:Y,connectionMode:K,isValidConnection:q,lib:se,rfId:de,nodeLookup:xe,connection:ve}=y.getState();if(!x||!Y&&!i)return;if(!Y){G==null||G(H.nativeEvent,{nodeId:x,handleId:g,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:x,type:e,id:g}});return}const ue=OW(H.target),te=n||q,{connection:le,isValid:he}=Pk.isValid(H.nativeEvent,{handle:{nodeId:x,id:g,type:e},connectionMode:K,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:te,flowId:de,doc:ue,lib:se,nodeLookup:xe});he&&le&&O(le);const we=structuredClone(ve);delete we.inProgress,we.toPosition=we.toHandle?we.toHandle.position:null,V==null||V(H,we),y.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${S}-${x}-${g}-${e}`,className:Or(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,f,{source:!U,target:U,connectable:r,connectablestart:i,connectableend:s,clickconnecting:C,connectingfrom:A,connectingto:M,valid:_,connectionindicator:r&&(!R||T)&&(R||P?s:i)}]),onMouseDown:F,onTouchStart:F,onClick:w?B:void 0,ref:h,...u,children:l})}const zo=I.memo(pG(Q1e));function J1e({data:e,isConnectable:t,sourcePosition:n=tt.Bottom}){return m.jsxs(m.Fragment,{children:[e==null?void 0:e.label,m.jsx(zo,{type:"source",position:n,isConnectable:t})]})}function epe({data:e,isConnectable:t,targetPosition:n=tt.Top,sourcePosition:r=tt.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(zo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m.jsx(zo,{type:"source",position:r,isConnectable:t})]})}function tpe(){return null}function npe({data:e,isConnectable:t,targetPosition:n=tt.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(zo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const z3={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},uL={input:J1e,default:epe,output:npe,group:tpe};function rpe(e){var t,n,r,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const ipe=e=>{const{width:t,height:n,x:r,y:i}=Ab(e.nodeLookup,{filter:s=>!!s.selected});return{width:za(t)?t:null,height:za(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function spe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Gn(),{width:i,height:s,transformString:o,userSelectionActive:a}=Gt(ipe,Wn),l=bG(),f=I.useRef(null);I.useEffect(()=>{var h;n||(h=f.current)==null||h.focus({preventScroll:!0})},[n]);const c=!a&&i!==null&&s!==null;if(gG({nodeRef:f,disabled:!c}),!c)return null;const d=e?h=>{const g=r.getState().nodes.filter(U=>U.selected);e(h,g)}:void 0,u=h=>{Object.prototype.hasOwnProperty.call(z3,h.key)&&(h.preventDefault(),l({direction:z3[h.key],factor:h.shiftKey?4:1}))};return m.jsx("div",{className:Or(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:m.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:u,style:{width:i,height:s}})})}const hL=typeof window<"u"?window:void 0,ope=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function yG({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:f,selectionOnDrag:c,selectionMode:d,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:U,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:S,panOnScrollSpeed:A,panOnScrollMode:M,zoomOnDoubleClick:C,panOnDrag:T,defaultViewport:R,translateExtent:P,minZoom:_,maxZoom:O,preventScrolling:F,onSelectionContextMenu:B,noWheelClassName:$,noPanClassName:z,disableKeyboardA11y:H,onViewportChange:G,isControlledViewport:V}){const{nodesSelectionActive:Y,userSelectionActive:K}=Gt(ope,Wn),q=b2(f,{target:hL}),se=b2(U,{target:hL}),de=se||T,xe=se||S,ve=c&&de!==!0,ue=q||K||ve;return F1e({deleteKeyCode:l,multiSelectionKeyCode:g}),m.jsx(H1e,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:xe,panOnScrollSpeed:A,panOnScrollMode:M,zoomOnDoubleClick:C,panOnDrag:!q&&de,defaultViewport:R,translateExtent:P,minZoom:_,maxZoom:O,zoomActivationKeyCode:y,preventScrolling:F,noWheelClassName:$,noPanClassName:z,onViewportChange:G,isControlledViewport:V,paneClickDistance:a,selectionOnDrag:ve,children:m.jsxs(X1e,{onSelectionStart:u,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:de,isSelecting:!!ue,selectionMode:d,selectionKeyPressed:q,paneClickDistance:a,selectionOnDrag:ve,children:[e,Y&&m.jsx(spe,{onSelectionContextMenu:B,noPanClassName:z,disableKeyboardA11y:H})]})})}yG.displayName="FlowRenderer";const ape=I.memo(yG),lpe=e=>t=>e?uM(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function cpe(e){return Gt(I.useCallback(lpe(e),[e]),Wn)}const fpe=e=>e.updateNodeInternals;function dpe(){const e=Gt(fpe),[t]=I.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return I.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function upe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=Gn(),s=I.useRef(null),o=I.useRef(null),a=I.useRef(e.sourcePosition),l=I.useRef(e.targetPosition),f=I.useRef(t),c=n&&!!e.internals.handleBounds;return I.useEffect(()=>{s.current&&!e.hidden&&(!c||o.current!==s.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(s.current),o.current=s.current)},[c,e.hidden]),I.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),I.useEffect(()=>{if(s.current){const d=f.current!==t,u=a.current!==e.sourcePosition,h=l.current!==e.targetPosition;(d||u||h)&&(f.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function hpe({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:l,nodesConnectable:f,nodesFocusable:c,resizeObserver:d,noDragClassName:u,noPanClassName:h,disableKeyboardA11y:g,rfId:U,nodeTypes:y,nodeClickDistance:x,onError:w}){const{node:E,internals:S,isParent:A}=Gt(te=>{const le=te.nodeLookup.get(e),he=te.parentLookup.has(e);return{node:le,internals:le.internals,isParent:he}},Wn);let M=E.type||"default",C=(y==null?void 0:y[M])||uL[M];C===void 0&&(w==null||w("003",ic.error003(M)),M="default",C=(y==null?void 0:y.default)||uL.default);const T=!!(E.draggable||a&&typeof E.draggable>"u"),R=!!(E.selectable||l&&typeof E.selectable>"u"),P=!!(E.connectable||f&&typeof E.connectable>"u"),_=!!(E.focusable||c&&typeof E.focusable>"u"),O=Gn(),F=DW(E),B=upe({node:E,nodeType:M,hasDimensions:F,resizeObserver:d}),$=gG({nodeRef:B,disabled:E.hidden||!T,noDragClassName:u,handleSelector:E.dragHandle,nodeId:e,isSelectable:R,nodeClickDistance:x}),z=bG();if(E.hidden)return null;const H=Bf(E),G=rpe(E),V=R||T||t||n||r||i,Y=n?te=>n(te,{...S.userNode}):void 0,K=r?te=>r(te,{...S.userNode}):void 0,q=i?te=>i(te,{...S.userNode}):void 0,se=s?te=>s(te,{...S.userNode}):void 0,de=o?te=>o(te,{...S.userNode}):void 0,xe=te=>{const{selectNodesOnDrag:le,nodeDragThreshold:he}=O.getState();R&&(!le||!T||he>0)&&Dk({id:e,store:O,nodeRef:B}),t&&t(te,{...S.userNode})},ve=te=>{if(!(jW(te.nativeEvent)||g)){if(CW.includes(te.key)&&R){const le=te.key==="Escape";Dk({id:e,store:O,unselect:le,nodeRef:B})}else if(T&&E.selected&&Object.prototype.hasOwnProperty.call(z3,te.key)){te.preventDefault();const{ariaLabelConfig:le}=O.getState();O.setState({ariaLiveMessage:le["node.a11yDescription.ariaLiveMessage"]({direction:te.key.replace("Arrow","").toLowerCase(),x:~~S.positionAbsolute.x,y:~~S.positionAbsolute.y})}),z({direction:z3[te.key],factor:te.shiftKey?4:1})}}},ue=()=>{var Ge;if(g||!((Ge=B.current)!=null&&Ge.matches(":focus-visible")))return;const{transform:te,width:le,height:he,autoPanOnNodeFocus:we,setCenter:Se}=O.getState();if(!we)return;uM(new Map([[e,E]]),{x:0,y:0,width:le,height:he},te,!0).length>0||Se(E.position.x+H.width/2,E.position.y+H.height/2,{zoom:te[2]})};return m.jsx("div",{className:Or(["react-flow__node",`react-flow__node-${M}`,{[h]:T},E.className,{selected:E.selected,selectable:R,parent:A,draggable:T,dragging:$}]),ref:B,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:V?"all":"none",visibility:F?"visible":"hidden",...E.style,...G},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Y,onMouseMove:K,onMouseLeave:q,onContextMenu:se,onClick:xe,onDoubleClick:de,onKeyDown:_?ve:void 0,tabIndex:_?0:void 0,onFocus:_?ue:void 0,role:E.ariaRole??(_?"group":void 0),"aria-roledescription":"node","aria-describedby":g?void 0:`${lG}-${U}`,"aria-label":E.ariaLabel,...E.domAttributes,children:m.jsx(Y1e,{value:e,children:m.jsx(C,{id:e,data:E.data,type:M,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:E.selected??!1,selectable:R,draggable:T,deletable:E.deletable??!0,isConnectable:P,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:$,dragHandle:E.dragHandle,zIndex:S.z,parentId:E.parentId,...H})})})}var ppe=I.memo(hpe);const mpe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function xG(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Gt(mpe,Wn),o=cpe(e.onlyRenderVisibleElements),a=dpe();return m.jsx("div",{className:"react-flow__nodes",style:l7,children:o.map(l=>m.jsx(ppe,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},l))})}xG.displayName="NodeRenderer";const gpe=I.memo(xG);function bpe(e){return Gt(I.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&xhe({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Wn)}const Upe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return m.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},ype=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return m.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},pL={[B3.Arrow]:Upe,[B3.ArrowClosed]:ype};function xpe(e){const t=Gn();return I.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(pL,e)?pL[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",ic.error009(e)),null)},[e])}const vpe=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=xpe(t);return l?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:m.jsx(l,{color:n,strokeWidth:o})}):null},vG=({defaultColor:e,rfId:t})=>{const n=Gt(s=>s.edges),r=Gt(s=>s.defaultEdgeOptions),i=I.useMemo(()=>Mhe(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?m.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:m.jsx("defs",{children:i.map(s=>m.jsx(vpe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};vG.displayName="MarkerDefinitions";var wpe=I.memo(vG);function wG({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:f,...c}){const[d,u]=I.useState({x:1,y:0,width:0,height:0}),h=Or(["react-flow__edge-textwrapper",f]),g=I.useRef(null);return I.useEffect(()=>{if(g.current){const U=g.current.getBBox();u({x:U.x,y:U.y,width:U.width,height:U.height})}},[n]),n?m.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...c,children:[i&&m.jsx("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),m.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:g,style:r,children:n}),l]}):null}wG.displayName="EdgeText";const Epe=I.memo(wG);function c7({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:f=20,...c}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...c,d:e,fill:"none",className:Or(["react-flow__edge-path",c.className])}),f?m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,r&&za(t)&&za(n)?m.jsx(Epe,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function mL({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===tt.Left||e===tt.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function EG({sourceX:e,sourceY:t,sourcePosition:n=tt.Bottom,targetX:r,targetY:i,targetPosition:s=tt.Top}){const[o,a]=mL({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,f]=mL({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,d,u,h]=FW({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:f});return[`M${e},${t} C${o},${a} ${l},${f} ${r},${i}`,c,d,u,h]}function SG(e){return I.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:a,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:U,markerStart:y,interactionWidth:x})=>{const[w,E,S]=EG({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),A=e.isInternal?void 0:t;return m.jsx(c7,{id:A,path:w,labelX:E,labelY:S,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:U,markerStart:y,interactionWidth:x})})}const Spe=SG({isInternal:!1}),kG=SG({isInternal:!0});Spe.displayName="SimpleBezierEdge";kG.displayName="SimpleBezierEdgeInternal";function CG(e){return I.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,sourcePosition:h=tt.Bottom,targetPosition:g=tt.Top,markerEnd:U,markerStart:y,pathOptions:x,interactionWidth:w})=>{const[E,S,A]=Nk({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:s,targetPosition:g,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset,stepPosition:x==null?void 0:x.stepPosition}),M=e.isInternal?void 0:t;return m.jsx(c7,{id:M,path:E,labelX:S,labelY:A,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:U,markerStart:y,interactionWidth:w})})}const AG=CG({isInternal:!1}),MG=CG({isInternal:!0});AG.displayName="SmoothStepEdge";MG.displayName="SmoothStepEdgeInternal";function TG(e){return I.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return m.jsx(AG,{...n,id:r,pathOptions:I.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const kpe=TG({isInternal:!1}),IG=TG({isInternal:!0});kpe.displayName="StepEdge";IG.displayName="StepEdgeInternal";function NG(e){return I.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:U})=>{const[y,x,w]=HW({sourceX:n,sourceY:r,targetX:i,targetY:s}),E=e.isInternal?void 0:t;return m.jsx(c7,{id:E,path:y,labelX:x,labelY:w,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:U})})}const Cpe=NG({isInternal:!1}),RG=NG({isInternal:!0});Cpe.displayName="StraightEdge";RG.displayName="StraightEdgeInternal";function _G(e){return I.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=tt.Bottom,targetPosition:a=tt.Top,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:U,markerStart:y,pathOptions:x,interactionWidth:w})=>{const[E,S,A]=$W({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:x==null?void 0:x.curvature}),M=e.isInternal?void 0:t;return m.jsx(c7,{id:M,path:E,labelX:S,labelY:A,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:U,markerStart:y,interactionWidth:w})})}const Ape=_G({isInternal:!1}),PG=_G({isInternal:!0});Ape.displayName="BezierEdge";PG.displayName="BezierEdgeInternal";const gL={default:PG,straight:RG,step:IG,smoothstep:MG,simplebezier:kG},bL={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Mpe=(e,t,n)=>n===tt.Left?e-t:n===tt.Right?e+t:e,Tpe=(e,t,n)=>n===tt.Top?e-t:n===tt.Bottom?e+t:e,UL="react-flow__edgeupdater";function yL({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return m.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Or([UL,`${UL}-${a}`]),cx:Mpe(t,r,e),cy:Tpe(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Ipe({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,onReconnect:f,onReconnectStart:c,onReconnectEnd:d,setReconnecting:u,setUpdateHover:h}){const g=Gn(),U=(S,A)=>{if(S.button!==0)return;const{autoPanOnConnect:M,domNode:C,connectionMode:T,connectionRadius:R,lib:P,onConnectStart:_,cancelConnection:O,nodeLookup:F,rfId:B,panBy:$,updateConnection:z}=g.getState(),H=A.type==="target",G=(K,q)=>{u(!1),d==null||d(K,n,A.type,q)},V=K=>f==null?void 0:f(n,K),Y=(K,q)=>{u(!0),c==null||c(S,n,A.type),_==null||_(K,q)};Pk.onPointerDown(S.nativeEvent,{autoPanOnConnect:M,connectionMode:T,connectionRadius:R,domNode:C,handleId:A.id,nodeId:A.nodeId,nodeLookup:F,isTarget:H,edgeUpdaterType:A.type,lib:P,flowId:B,cancelConnection:O,panBy:$,isValidConnection:(...K)=>{var q,se;return((se=(q=g.getState()).isValidConnection)==null?void 0:se.call(q,...K))??!0},onConnect:V,onConnectStart:Y,onConnectEnd:(...K)=>{var q,se;return(se=(q=g.getState()).onConnectEnd)==null?void 0:se.call(q,...K)},onReconnectEnd:G,updateConnection:z,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,dragThreshold:g.getState().connectionDragThreshold,handleDomNode:S.currentTarget})},y=S=>U(S,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=S=>U(S,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>h(!0),E=()=>h(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(yL,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:y,onMouseEnter:w,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&m.jsx(yL,{position:l,centerX:s,centerY:o,radius:t,onMouseDown:x,onMouseEnter:w,onMouseOut:E,type:"target"})]})}function Npe({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:f,reconnectRadius:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,rfId:g,edgeTypes:U,noPanClassName:y,onError:x,disableKeyboardA11y:w}){let E=Gt(Se=>Se.edgeLookup.get(e));const S=Gt(Se=>Se.defaultEdgeOptions);E=S?{...S,...E}:E;let A=E.type||"default",M=(U==null?void 0:U[A])||gL[A];M===void 0&&(x==null||x("011",ic.error011(A)),A="default",M=(U==null?void 0:U.default)||gL.default);const C=!!(E.focusable||t&&typeof E.focusable>"u"),T=typeof d<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),R=!!(E.selectable||r&&typeof E.selectable>"u"),P=I.useRef(null),[_,O]=I.useState(!1),[F,B]=I.useState(!1),$=Gn(),{zIndex:z,sourceX:H,sourceY:G,targetX:V,targetY:Y,sourcePosition:K,targetPosition:q}=Gt(I.useCallback(Se=>{const De=Se.nodeLookup.get(E.source),Ge=Se.nodeLookup.get(E.target);if(!De||!Ge)return{zIndex:E.zIndex,...bL};const ht=Ahe({id:e,sourceNode:De,targetNode:Ge,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Se.connectionMode,onError:x});return{zIndex:yhe({selected:E.selected,zIndex:E.zIndex,sourceNode:De,targetNode:Ge,elevateOnSelect:Se.elevateEdgesOnSelect,zIndexMode:Se.zIndexMode}),...ht||bL}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),Wn),se=I.useMemo(()=>E.markerStart?`url('#${Rk(E.markerStart,g)}')`:void 0,[E.markerStart,g]),de=I.useMemo(()=>E.markerEnd?`url('#${Rk(E.markerEnd,g)}')`:void 0,[E.markerEnd,g]);if(E.hidden||H===null||G===null||V===null||Y===null)return null;const xe=Se=>{var ot;const{addSelectedEdges:De,unselectNodesAndEdges:Ge,multiSelectionActive:ht}=$.getState();R&&($.setState({nodesSelectionActive:!1}),E.selected&&ht?(Ge({nodes:[],edges:[E]}),(ot=P.current)==null||ot.blur()):De([e])),i&&i(Se,E)},ve=s?Se=>{s(Se,{...E})}:void 0,ue=o?Se=>{o(Se,{...E})}:void 0,te=a?Se=>{a(Se,{...E})}:void 0,le=l?Se=>{l(Se,{...E})}:void 0,he=f?Se=>{f(Se,{...E})}:void 0,we=Se=>{var De;if(!w&&CW.includes(Se.key)&&R){const{unselectNodesAndEdges:Ge,addSelectedEdges:ht}=$.getState();Se.key==="Escape"?((De=P.current)==null||De.blur(),Ge({edges:[E]})):ht([e])}};return m.jsx("svg",{style:{zIndex:z},children:m.jsxs("g",{className:Or(["react-flow__edge",`react-flow__edge-${A}`,E.className,y,{selected:E.selected,animated:E.animated,inactive:!R&&!i,updating:_,selectable:R}]),onClick:xe,onDoubleClick:ve,onContextMenu:ue,onMouseEnter:te,onMouseMove:le,onMouseLeave:he,onKeyDown:C?we:void 0,tabIndex:C?0:void 0,role:E.ariaRole??(C?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":C?`${cG}-${g}`:void 0,ref:P,...E.domAttributes,children:[!F&&m.jsx(M,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:R,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:H,sourceY:G,targetX:V,targetY:Y,sourcePosition:K,targetPosition:q,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:se,markerEnd:de,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),T&&m.jsx(Ipe,{edge:E,isReconnectable:T,reconnectRadius:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,sourceX:H,sourceY:G,targetX:V,targetY:Y,sourcePosition:K,targetPosition:q,setUpdateHover:O,setReconnecting:B})]})})}var Rpe=I.memo(Npe);const _pe=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function DG({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:f,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:U}){const{edgesFocusable:y,edgesReconnectable:x,elementsSelectable:w,onError:E}=Gt(_pe,Wn),S=bpe(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(wpe,{defaultColor:e,rfId:n}),S.map(A=>m.jsx(Rpe,{id:A,edgesFocusable:y,edgesReconnectable:x,elementsSelectable:w,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:f,onClick:c,reconnectRadius:d,onDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:U},A))]})}DG.displayName="EdgeRenderer";const Ppe=I.memo(DG),Dpe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Lpe({children:e}){const t=Gt(Dpe);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Ope(e){const t=a7(),n=I.useRef(!1);I.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const jpe=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Bpe(e){const t=Gt(jpe),n=Gn();return I.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Fpe(e){return e.connection.inProgress?{...e.connection,to:Tb(e.connection.to,e.transform)}:{...e.connection}}function $pe(e){return Fpe}function zpe(e){const t=$pe();return Gt(t,Wn)}const Hpe=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Vpe({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:l}=Gt(Hpe,Wn);return!(s&&i&&l)?null:m.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:Or(["react-flow__connection",TW(a)]),children:m.jsx(LG,{style:t,type:n,CustomComponent:r,isValid:a})})})}const LG=({style:e,type:t=Ld.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:l,to:f,toNode:c,toHandle:d,toPosition:u,pointer:h}=zpe();if(!i)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:l,toPosition:u,connectionStatus:TW(r),toNode:c,toHandle:d,pointer:h});let g="";const U={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:f.x,targetY:f.y,targetPosition:u};switch(t){case Ld.Bezier:[g]=$W(U);break;case Ld.SimpleBezier:[g]=EG(U);break;case Ld.Step:[g]=Nk({...U,borderRadius:0});break;case Ld.SmoothStep:[g]=Nk(U);break;default:[g]=HW(U)}return m.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};LG.displayName="ConnectionLine";const Wpe={};function xL(e=Wpe){I.useRef(e),Gn(),I.useEffect(()=>{},[e])}function Gpe(){Gn(),I.useRef(!1),I.useEffect(()=>{},[])}function OG({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:u,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:U,connectionLineComponent:y,connectionLineContainerStyle:x,selectionKeyCode:w,selectionOnDrag:E,selectionMode:S,multiSelectionKeyCode:A,panActivationKeyCode:M,zoomActivationKeyCode:C,deleteKeyCode:T,onlyRenderVisibleElements:R,elementsSelectable:P,defaultViewport:_,translateExtent:O,minZoom:F,maxZoom:B,preventScrolling:$,defaultMarkerColor:z,zoomOnScroll:H,zoomOnPinch:G,panOnScroll:V,panOnScrollSpeed:Y,panOnScrollMode:K,zoomOnDoubleClick:q,panOnDrag:se,onPaneClick:de,onPaneMouseEnter:xe,onPaneMouseMove:ve,onPaneMouseLeave:ue,onPaneScroll:te,onPaneContextMenu:le,paneClickDistance:he,nodeClickDistance:we,onEdgeContextMenu:Se,onEdgeMouseEnter:De,onEdgeMouseMove:Ge,onEdgeMouseLeave:ht,reconnectRadius:ot,onReconnect:Bt,onReconnectStart:wn,onReconnectEnd:fn,noDragClassName:ui,noWheelClassName:Ci,noPanClassName:qi,disableKeyboardA11y:Xs,nodeExtent:la,rfId:Us,viewport:Cr,onViewportChange:or}){return xL(e),xL(t),Gpe(),Ope(n),Bpe(Cr),m.jsx(ape,{onPaneClick:de,onPaneMouseEnter:xe,onPaneMouseMove:ve,onPaneMouseLeave:ue,onPaneContextMenu:le,onPaneScroll:te,paneClickDistance:he,deleteKeyCode:T,selectionKeyCode:w,selectionOnDrag:E,selectionMode:S,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:A,panActivationKeyCode:M,zoomActivationKeyCode:C,elementsSelectable:P,zoomOnScroll:H,zoomOnPinch:G,zoomOnDoubleClick:q,panOnScroll:V,panOnScrollSpeed:Y,panOnScrollMode:K,panOnDrag:se,defaultViewport:_,translateExtent:O,minZoom:F,maxZoom:B,onSelectionContextMenu:d,preventScrolling:$,noDragClassName:ui,noWheelClassName:Ci,noPanClassName:qi,disableKeyboardA11y:Xs,onViewportChange:or,isControlledViewport:!!Cr,children:m.jsxs(Lpe,{children:[m.jsx(Ppe,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Bt,onReconnectStart:wn,onReconnectEnd:fn,onlyRenderVisibleElements:R,onEdgeContextMenu:Se,onEdgeMouseEnter:De,onEdgeMouseMove:Ge,onEdgeMouseLeave:ht,reconnectRadius:ot,defaultMarkerColor:z,noPanClassName:qi,disableKeyboardA11y:Xs,rfId:Us}),m.jsx(Vpe,{style:U,type:g,component:y,containerStyle:x}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(gpe,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:c,nodeClickDistance:we,onlyRenderVisibleElements:R,noPanClassName:qi,noDragClassName:ui,disableKeyboardA11y:Xs,nodeExtent:la,rfId:Us}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}OG.displayName="GraphView";const Xpe=I.memo(OG),vL=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l=.5,maxZoom:f=2,nodeOrigin:c,nodeExtent:d,zIndexMode:u="basic"}={})=>{const h=new Map,g=new Map,U=new Map,y=new Map,x=r??t??[],w=n??e??[],E=c??[0,0],S=d??h2;GW(U,y,x);const A=_k(w,h,g,{nodeOrigin:E,nodeExtent:S,zIndexMode:u});let M=[0,0,1];if(o&&i&&s){const C=Ab(h,{filter:_=>!!((_.width||_.initialWidth)&&(_.height||_.initialHeight))}),{x:T,y:R,zoom:P}=hM(C,i,s,l,f,(a==null?void 0:a.padding)??.1);M=[T,R,P]}return{rfId:"1",width:i??0,height:s??0,transform:M,nodes:w,nodesInitialized:A,nodeLookup:h,parentLookup:g,edges:x,edgeLookup:y,connectionLookup:U,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:f,translateExtent:h2,nodeExtent:S,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Gm.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:a,fitViewResolver:null,connection:{...MW},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:hhe,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:AW,zIndexMode:u,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},Kpe=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:f,nodeOrigin:c,nodeExtent:d,zIndexMode:u})=>u1e((h,g)=>{async function U(){const{nodeLookup:y,panZoom:x,fitViewOptions:w,fitViewResolver:E,width:S,height:A,minZoom:M,maxZoom:C}=g();x&&(await dhe({nodes:y,width:S,height:A,panZoom:x,minZoom:M,maxZoom:C},w),E==null||E.resolve(!0),h({fitViewResolver:null}))}return{...vL({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:f,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:u}),setNodes:y=>{const{nodeLookup:x,parentLookup:w,nodeOrigin:E,elevateNodesOnSelect:S,fitViewQueued:A,zIndexMode:M}=g(),C=_k(y,x,w,{nodeOrigin:E,nodeExtent:d,elevateNodesOnSelect:S,checkEquality:!0,zIndexMode:M});A&&C?(U(),h({nodes:y,nodesInitialized:C,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:y,nodesInitialized:C})},setEdges:y=>{const{connectionLookup:x,edgeLookup:w}=g();GW(x,w,y),h({edges:y})},setDefaultNodesAndEdges:(y,x)=>{if(y){const{setNodes:w}=g();w(y),h({hasDefaultNodes:!0})}if(x){const{setEdges:w}=g();w(x),h({hasDefaultEdges:!0})}},updateNodeInternals:y=>{const{triggerNodeChanges:x,nodeLookup:w,parentLookup:E,domNode:S,nodeOrigin:A,nodeExtent:M,debug:C,fitViewQueued:T,zIndexMode:R}=g(),{changes:P,updatedInternals:_}=Dhe(y,w,E,S,A,M,R);_&&(Nhe(w,E,{nodeOrigin:A,nodeExtent:M,zIndexMode:R}),T?(U(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(P==null?void 0:P.length)>0&&(C&&console.log("React Flow: trigger node changes",P),x==null||x(P)))},updateNodePositions:(y,x=!1)=>{const w=[];let E=[];const{nodeLookup:S,triggerNodeChanges:A,connection:M,updateConnection:C,onNodesChangeMiddlewareMap:T}=g();for(const[R,P]of y){const _=S.get(R),O=!!(_!=null&&_.expandParent&&(_!=null&&_.parentId)&&(P!=null&&P.position)),F={id:R,type:"position",position:O?{x:Math.max(0,P.position.x),y:Math.max(0,P.position.y)}:P.position,dragging:x};if(_&&M.inProgress&&M.fromNode.id===_.id){const B=Dh(_,M.fromHandle,tt.Left,!0);C({...M,from:B})}O&&_.parentId&&w.push({id:R,parentId:_.parentId,rect:{...P.internals.positionAbsolute,width:P.measured.width??0,height:P.measured.height??0}}),E.push(F)}if(w.length>0){const{parentLookup:R,nodeOrigin:P}=g(),_=yM(w,S,R,P);E.push(..._)}for(const R of T.values())E=R(E);A(E)},triggerNodeChanges:y=>{const{onNodesChange:x,setNodes:w,nodes:E,hasDefaultNodes:S,debug:A}=g();if(y!=null&&y.length){if(S){const M=uG(y,E);w(M)}A&&console.log("React Flow: trigger node changes",y),x==null||x(y)}},triggerEdgeChanges:y=>{const{onEdgesChange:x,setEdges:w,edges:E,hasDefaultEdges:S,debug:A}=g();if(y!=null&&y.length){if(S){const M=hG(y,E);w(M)}A&&console.log("React Flow: trigger edge changes",y),x==null||x(y)}},addSelectedNodes:y=>{const{multiSelectionActive:x,edgeLookup:w,nodeLookup:E,triggerNodeChanges:S,triggerEdgeChanges:A}=g();if(x){const M=y.map(C=>pu(C,!0));S(M);return}S(yp(E,new Set([...y]),!0)),A(yp(w))},addSelectedEdges:y=>{const{multiSelectionActive:x,edgeLookup:w,nodeLookup:E,triggerNodeChanges:S,triggerEdgeChanges:A}=g();if(x){const M=y.map(C=>pu(C,!0));A(M);return}A(yp(w,new Set([...y]))),S(yp(E,new Set,!0))},unselectNodesAndEdges:({nodes:y,edges:x}={})=>{const{edges:w,nodes:E,nodeLookup:S,triggerNodeChanges:A,triggerEdgeChanges:M}=g(),C=y||E,T=x||w,R=[];for(const _ of C){if(!_.selected)continue;const O=S.get(_.id);O&&(O.selected=!1),R.push(pu(_.id,!1))}const P=[];for(const _ of T)_.selected&&P.push(pu(_.id,!1));A(R),M(P)},setMinZoom:y=>{const{panZoom:x,maxZoom:w}=g();x==null||x.setScaleExtent([y,w]),h({minZoom:y})},setMaxZoom:y=>{const{panZoom:x,minZoom:w}=g();x==null||x.setScaleExtent([w,y]),h({maxZoom:y})},setTranslateExtent:y=>{var x;(x=g().panZoom)==null||x.setTranslateExtent(y),h({translateExtent:y})},resetSelectedElements:()=>{const{edges:y,nodes:x,triggerNodeChanges:w,triggerEdgeChanges:E,elementsSelectable:S}=g();if(!S)return;const A=x.reduce((C,T)=>T.selected?[...C,pu(T.id,!1)]:C,[]),M=y.reduce((C,T)=>T.selected?[...C,pu(T.id,!1)]:C,[]);w(A),E(M)},setNodeExtent:y=>{const{nodes:x,nodeLookup:w,parentLookup:E,nodeOrigin:S,elevateNodesOnSelect:A,nodeExtent:M,zIndexMode:C}=g();y[0][0]===M[0][0]&&y[0][1]===M[0][1]&&y[1][0]===M[1][0]&&y[1][1]===M[1][1]||(_k(x,w,E,{nodeOrigin:S,nodeExtent:y,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:C}),h({nodeExtent:y}))},panBy:y=>{const{transform:x,width:w,height:E,panZoom:S,translateExtent:A}=g();return Lhe({delta:y,panZoom:S,transform:x,translateExtent:A,width:w,height:E})},setCenter:async(y,x,w)=>{const{width:E,height:S,maxZoom:A,panZoom:M}=g();if(!M)return Promise.resolve(!1);const C=typeof(w==null?void 0:w.zoom)<"u"?w.zoom:A;return await M.setViewport({x:E/2-y*C,y:S/2-x*C,zoom:C},{duration:w==null?void 0:w.duration,ease:w==null?void 0:w.ease,interpolate:w==null?void 0:w.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...MW}})},updateConnection:y=>{h({connection:y})},reset:()=>h({...vL()})}},Object.is);function jG({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:a,initialFitViewOptions:l,fitView:f,nodeOrigin:c,nodeExtent:d,zIndexMode:u,children:h}){const[g]=I.useState(()=>Kpe({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:f,minZoom:o,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:d,zIndexMode:u}));return m.jsx(h1e,{value:g,children:m.jsx(L1e,{children:h})})}function Ype({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,fitViewOptions:l,minZoom:f,maxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h}){return I.useContext(s7)?m.jsx(m.Fragment,{children:e}):m.jsx(jG,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,initialFitViewOptions:l,initialMinZoom:f,initialMaxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h,children:e})}const Zpe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qpe({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:l,onInit:f,onMove:c,onMoveStart:d,onMoveEnd:u,onConnect:h,onConnectStart:g,onConnectEnd:U,onClickConnectStart:y,onClickConnectEnd:x,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:S,onNodeContextMenu:A,onNodeDoubleClick:M,onNodeDragStart:C,onNodeDrag:T,onNodeDragStop:R,onNodesDelete:P,onEdgesDelete:_,onDelete:O,onSelectionChange:F,onSelectionDragStart:B,onSelectionDrag:$,onSelectionDragStop:z,onSelectionContextMenu:H,onSelectionStart:G,onSelectionEnd:V,onBeforeDelete:Y,connectionMode:K,connectionLineType:q=Ld.Bezier,connectionLineStyle:se,connectionLineComponent:de,connectionLineContainerStyle:xe,deleteKeyCode:ve="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:te=!1,selectionMode:le=p2.Full,panActivationKeyCode:he="Space",multiSelectionKeyCode:we=g2()?"Meta":"Control",zoomActivationKeyCode:Se=g2()?"Meta":"Control",snapToGrid:De,snapGrid:Ge,onlyRenderVisibleElements:ht=!1,selectNodesOnDrag:ot,nodesDraggable:Bt,autoPanOnNodeFocus:wn,nodesConnectable:fn,nodesFocusable:ui,nodeOrigin:Ci=fG,edgesFocusable:qi,edgesReconnectable:Xs,elementsSelectable:la=!0,defaultViewport:Us=C1e,minZoom:Cr=.5,maxZoom:or=2,translateExtent:It=h2,preventScrolling:ys=!0,nodeExtent:Xn,defaultMarkerColor:Ai="#b1b1b7",zoomOnScroll:vc=!0,zoomOnPinch:ca=!0,panOnScroll:ul=!1,panOnScrollSpeed:hl=.5,panOnScrollMode:pl=ph.Free,zoomOnDoubleClick:Ks=!0,panOnDrag:ml=!0,onPaneClick:fa,onPaneMouseEnter:da,onPaneMouseMove:ua,onPaneMouseLeave:ha,onPaneScroll:ke,onPaneContextMenu:nt,paneClickDistance:Oe=1,nodeClickDistance:Ft=0,children:Tn,onReconnect:St,onReconnectStart:Dn,onReconnectEnd:Mi,onEdgeContextMenu:Ti,onEdgeDoubleClick:pa,onEdgeMouseEnter:Gf,onEdgeMouseMove:xo,onEdgeMouseLeave:vo,reconnectRadius:Ys=10,onNodesChange:ma,onEdgesChange:gr,noDragClassName:Ln="nodrag",noWheelClassName:hi="nowheel",noPanClassName:En="nopan",fitView:wc,fitViewOptions:V0,connectOnClick:j6,attributionPosition:r8,proOptions:i8,defaultEdgeOptions:s8,elevateNodesOnSelect:o8=!0,elevateEdgesOnSelect:vx=!1,disableKeyboardA11y:a8=!1,autoPanOnConnect:Kn,autoPanOnNodeDrag:wx,autoPanSpeed:B6,connectionRadius:l8,isValidConnection:u1,onError:Ex,style:c8,id:W0,nodeDragThreshold:wo,connectionDragThreshold:Sx,viewport:Zs,onViewportChange:kx,width:Cx,height:Ax,colorMode:h1="light",debug:p1,onScroll:gl,ariaLabelConfig:m1,zIndexMode:f8="basic",...Mx},F6){const g1=W0||"1",$6=I1e(h1),G0=I.useCallback(d8=>{d8.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),gl==null||gl(d8)},[gl]);return m.jsx("div",{"data-testid":"rf__wrapper",...Mx,onScroll:G0,style:{...c8,...Zpe},ref:F6,className:Or(["react-flow",i,$6]),id:W0,role:"application",children:m.jsxs(Ype,{nodes:e,edges:t,width:Cx,height:Ax,fitView:wc,fitViewOptions:V0,minZoom:Cr,maxZoom:or,nodeOrigin:Ci,nodeExtent:Xn,zIndexMode:f8,children:[m.jsx(Xpe,{onInit:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:S,onNodeContextMenu:A,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:q,connectionLineStyle:se,connectionLineComponent:de,connectionLineContainerStyle:xe,selectionKeyCode:ue,selectionOnDrag:te,selectionMode:le,deleteKeyCode:ve,multiSelectionKeyCode:we,panActivationKeyCode:he,zoomActivationKeyCode:Se,onlyRenderVisibleElements:ht,defaultViewport:Us,translateExtent:It,minZoom:Cr,maxZoom:or,preventScrolling:ys,zoomOnScroll:vc,zoomOnPinch:ca,zoomOnDoubleClick:Ks,panOnScroll:ul,panOnScrollSpeed:hl,panOnScrollMode:pl,panOnDrag:ml,onPaneClick:fa,onPaneMouseEnter:da,onPaneMouseMove:ua,onPaneMouseLeave:ha,onPaneScroll:ke,onPaneContextMenu:nt,paneClickDistance:Oe,nodeClickDistance:Ft,onSelectionContextMenu:H,onSelectionStart:G,onSelectionEnd:V,onReconnect:St,onReconnectStart:Dn,onReconnectEnd:Mi,onEdgeContextMenu:Ti,onEdgeDoubleClick:pa,onEdgeMouseEnter:Gf,onEdgeMouseMove:xo,onEdgeMouseLeave:vo,reconnectRadius:Ys,defaultMarkerColor:Ai,noDragClassName:Ln,noWheelClassName:hi,noPanClassName:En,rfId:g1,disableKeyboardA11y:a8,nodeExtent:Xn,viewport:Zs,onViewportChange:kx}),m.jsx(T1e,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:U,onClickConnectStart:y,onClickConnectEnd:x,nodesDraggable:Bt,autoPanOnNodeFocus:wn,nodesConnectable:fn,nodesFocusable:ui,edgesFocusable:qi,edgesReconnectable:Xs,elementsSelectable:la,elevateNodesOnSelect:o8,elevateEdgesOnSelect:vx,minZoom:Cr,maxZoom:or,nodeExtent:Xn,onNodesChange:ma,onEdgesChange:gr,snapToGrid:De,snapGrid:Ge,connectionMode:K,translateExtent:It,connectOnClick:j6,defaultEdgeOptions:s8,fitView:wc,fitViewOptions:V0,onNodesDelete:P,onEdgesDelete:_,onDelete:O,onNodeDragStart:C,onNodeDrag:T,onNodeDragStop:R,onSelectionDrag:$,onSelectionDragStart:B,onSelectionDragStop:z,onMove:c,onMoveStart:d,onMoveEnd:u,noPanClassName:En,nodeOrigin:Ci,rfId:g1,autoPanOnConnect:Kn,autoPanOnNodeDrag:wx,autoPanSpeed:B6,onError:Ex,connectionRadius:l8,isValidConnection:u1,selectNodesOnDrag:ot,nodeDragThreshold:wo,connectionDragThreshold:Sx,onBeforeDelete:Y,debug:p1,ariaLabelConfig:m1,zIndexMode:f8}),m.jsx(k1e,{onSelectionChange:F}),Tn,m.jsx(x1e,{proOptions:i8,position:r8}),m.jsx(y1e,{rfId:g1,disableKeyboardA11y:a8})]})})}var Qpe=pG(qpe);function Jpe(e){const[t,n]=I.useState(e),r=I.useCallback(i=>n(s=>uG(i,s)),[]);return[t,n,r]}function eme(e){const[t,n]=I.useState(e),r=I.useCallback(i=>n(s=>hG(i,s)),[]);return[t,n,r]}function tme({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Or(["react-flow__background-pattern",n,r])})}function nme({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:Or(["react-flow__background-pattern","dots",t])})}var h0;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(h0||(h0={}));const rme={[h0.Dots]:1,[h0.Lines]:1,[h0.Cross]:6},ime=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function BG({id:e,variant:t=h0.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:l,className:f,patternClassName:c}){const d=I.useRef(null),{transform:u,patternId:h}=Gt(ime,Wn),g=r||rme[t],U=t===h0.Dots,y=t===h0.Cross,x=Array.isArray(n)?n:[n,n],w=[x[0]*u[2]||1,x[1]*u[2]||1],E=g*u[2],S=Array.isArray(s)?s:[s,s],A=y?[E,E]:w,M=[S[0]*u[2]||1+A[0]/2,S[1]*u[2]||1+A[1]/2],C=`${h}${e||""}`;return m.jsxs("svg",{className:Or(["react-flow__background",f]),style:{...l,...l7,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:d,"data-testid":"rf__background",children:[m.jsx("pattern",{id:C,x:u[0]%w[0],y:u[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:U?m.jsx(nme,{radius:E/2,className:c}):m.jsx(tme,{dimensions:A,lineWidth:i,variant:t,className:c})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}BG.displayName="Background";const sme=I.memo(BG);function ome(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ame(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function lme(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function cme(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function fme(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function NU({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:Or(["react-flow__controls-button",t]),...n,children:e})}const dme=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function FG({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:f,children:c,position:d="bottom-left",orientation:u="vertical","aria-label":h}){const g=Gn(),{isInteractive:U,minZoomReached:y,maxZoomReached:x,ariaLabelConfig:w}=Gt(dme,Wn),{zoomIn:E,zoomOut:S,fitView:A}=a7(),M=()=>{E(),s==null||s()},C=()=>{S(),o==null||o()},T=()=>{A(i),a==null||a()},R=()=>{g.setState({nodesDraggable:!U,nodesConnectable:!U,elementsSelectable:!U}),l==null||l(!U)},P=u==="horizontal"?"horizontal":"vertical";return m.jsxs(o7,{className:Or(["react-flow__controls",P,f]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??w["controls.ariaLabel"],children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(NU,{onClick:M,className:"react-flow__controls-zoomin",title:w["controls.zoomIn.ariaLabel"],"aria-label":w["controls.zoomIn.ariaLabel"],disabled:x,children:m.jsx(ome,{})}),m.jsx(NU,{onClick:C,className:"react-flow__controls-zoomout",title:w["controls.zoomOut.ariaLabel"],"aria-label":w["controls.zoomOut.ariaLabel"],disabled:y,children:m.jsx(ame,{})})]}),n&&m.jsx(NU,{className:"react-flow__controls-fitview",onClick:T,title:w["controls.fitView.ariaLabel"],"aria-label":w["controls.fitView.ariaLabel"],children:m.jsx(lme,{})}),r&&m.jsx(NU,{className:"react-flow__controls-interactive",onClick:R,title:w["controls.interactive.ariaLabel"],"aria-label":w["controls.interactive.ariaLabel"],children:U?m.jsx(fme,{}):m.jsx(cme,{})}),c]})}FG.displayName="Controls";I.memo(FG);function ume({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:f,borderRadius:c,shapeRendering:d,selected:u,onClick:h}){const{background:g,backgroundColor:U}=s||{},y=o||g||U;return m.jsx("rect",{className:Or(["react-flow__minimap-node",{selected:u},f]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:y,stroke:a,strokeWidth:l},shapeRendering:d,onClick:h?x=>h(x,e):void 0})}const hme=I.memo(ume),pme=e=>e.nodes.map(t=>t.id),zw=e=>e instanceof Function?e:()=>e;function mme({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=hme,onClick:o}){const a=Gt(pme,Wn),l=zw(t),f=zw(e),c=zw(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:a.map(u=>m.jsx(bme,{id:u,nodeColorFunc:l,nodeStrokeColorFunc:f,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:d},u))})}function gme({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:l}){const{node:f,x:c,y:d,width:u,height:h}=Gt(g=>{const U=g.nodeLookup.get(e);if(!U)return{node:void 0,x:0,y:0,width:0,height:0};const y=U.internals.userNode,{x,y:w}=U.internals.positionAbsolute,{width:E,height:S}=Bf(y);return{node:y,x,y:w,width:E,height:S}},Wn);return!f||f.hidden||!DW(f)?null:m.jsx(a,{x:c,y:d,width:u,height:h,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:l,id:f.id})}const bme=I.memo(gme);var Ume=I.memo(mme);const yme=200,xme=150,vme=e=>!e.hidden,wme=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?PW(Ab(e.nodeLookup,{filter:vme}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Eme="react-flow__minimap-desc";function $G({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:l,maskColor:f,maskStrokeColor:c,maskStrokeWidth:d,position:u="bottom-right",onClick:h,onNodeClick:g,pannable:U=!1,zoomable:y=!1,ariaLabel:x,inversePan:w,zoomStep:E=1,offsetScale:S=5}){const A=Gn(),M=I.useRef(null),{boundingRect:C,viewBB:T,rfId:R,panZoom:P,translateExtent:_,flowWidth:O,flowHeight:F,ariaLabelConfig:B}=Gt(wme,Wn),$=(e==null?void 0:e.width)??yme,z=(e==null?void 0:e.height)??xme,H=C.width/$,G=C.height/z,V=Math.max(H,G),Y=V*$,K=V*z,q=S*V,se=C.x-(Y-C.width)/2-q,de=C.y-(K-C.height)/2-q,xe=Y+q*2,ve=K+q*2,ue=`${Eme}-${R}`,te=I.useRef(0),le=I.useRef();te.current=V,I.useEffect(()=>{if(M.current&&P)return le.current=Whe({domNode:M.current,panZoom:P,getTransform:()=>A.getState().transform,getViewScale:()=>te.current}),()=>{var De;(De=le.current)==null||De.destroy()}},[P]),I.useEffect(()=>{var De;(De=le.current)==null||De.update({translateExtent:_,width:O,height:F,inversePan:w,pannable:U,zoomStep:E,zoomable:y})},[U,y,w,E,_,O,F]);const he=h?De=>{var ot;const[Ge,ht]=((ot=le.current)==null?void 0:ot.pointer(De))||[0,0];h(De,{x:Ge,y:ht})}:void 0,we=g?I.useCallback((De,Ge)=>{const ht=A.getState().nodeLookup.get(Ge).internals.userNode;g(De,ht)},[]):void 0,Se=x??B["minimap.ariaLabel"];return m.jsx(o7,{position:u,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*V:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Or(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:$,height:z,viewBox:`${se} ${de} ${xe} ${ve}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:M,onClick:he,children:[Se&&m.jsx("title",{id:ue,children:Se}),m.jsx(Ume,{onClick:we,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${se-q},${de-q}h${xe+q*2}v${ve+q*2}h${-xe-q*2}z
        M${T.x},${T.y}h${T.width}v${T.height}h${-T.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$G.displayName="MiniMap";I.memo($G);const Sme=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,kme={[Zm.Line]:"right",[Zm.Handle]:"bottom-right"};function Cme({nodeId:e,position:t,variant:n=Zm.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:f=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:u,autoScale:h=!0,shouldResize:g,onResizeStart:U,onResize:y,onResizeEnd:x}){const w=UG(),E=typeof e=="string"?e:w,S=Gn(),A=I.useRef(null),M=n===Zm.Handle,C=Gt(I.useCallback(Sme(M&&h),[M,h]),Wn),T=I.useRef(null),R=t??kme[n];I.useEffect(()=>{if(!(!A.current||!E))return T.current||(T.current=s1e({domNode:A.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:_,transform:O,snapGrid:F,snapToGrid:B,nodeOrigin:$,domNode:z}=S.getState();return{nodeLookup:_,transform:O,snapGrid:F,snapToGrid:B,nodeOrigin:$,paneDomNode:z}},onChange:(_,O)=>{const{triggerNodeChanges:F,nodeLookup:B,parentLookup:$,nodeOrigin:z}=S.getState(),H=[],G={x:_.x,y:_.y},V=B.get(E);if(V&&V.expandParent&&V.parentId){const Y=V.origin??z,K=_.width??V.measured.width??0,q=_.height??V.measured.height??0,se={id:V.id,parentId:V.parentId,rect:{width:K,height:q,...LW({x:_.x??V.position.x,y:_.y??V.position.y},{width:K,height:q},V.parentId,B,Y)}},de=yM([se],B,$,z);H.push(...de),G.x=_.x?Math.max(Y[0]*K,_.x):void 0,G.y=_.y?Math.max(Y[1]*q,_.y):void 0}if(G.x!==void 0&&G.y!==void 0){const Y={id:E,type:"position",position:{...G}};H.push(Y)}if(_.width!==void 0&&_.height!==void 0){const K={id:E,type:"dimensions",resizing:!0,setAttributes:u?u==="horizontal"?"width":"height":!0,dimensions:{width:_.width,height:_.height}};H.push(K)}for(const Y of O){const K={...Y,type:"position"};H.push(K)}F(H)},onEnd:({width:_,height:O})=>{const F={id:E,type:"dimensions",resizing:!1,dimensions:{width:_,height:O}};S.getState().triggerNodeChanges([F])}})),T.current.update({controlPosition:R,boundaries:{minWidth:a,minHeight:l,maxWidth:f,maxHeight:c},keepAspectRatio:d,resizeDirection:u,onResizeStart:U,onResize:y,onResizeEnd:x,shouldResize:g}),()=>{var _;(_=T.current)==null||_.destroy()}},[R,a,l,f,c,d,U,y,x,g]);const P=R.split("-");return m.jsx("div",{className:Or(["react-flow__resize-control","nodrag",...P,n,r]),ref:A,style:{...i,scale:C,...o&&{[M?"backgroundColor":"borderColor"]:o}},children:s})}I.memo(Cme);const Mr="/api",ti={async getThreads(){const e=await fetch(`${Mr}/threads`);if(!e.ok)throw new Error("Failed to fetch threads");return e.json()},async createThread({title:e,description:t,content:n,metadata:r}){const i=await fetch(`${Mr}/threads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:t,content:n,metadata:r})});if(!i.ok)throw new Error("Failed to create thread");return i.json()},async searchThreads(e){const t=await fetch(`${Mr}/threads/search?query=${encodeURIComponent(e)}`);if(!t.ok)throw new Error("Failed to search threads");return t.json()},async generateThread(e){const t=await fetch(`${Mr}/threads/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:e})});if(!t.ok)throw new Error("Failed to generate thread");return t.json()},async getThreadNodes(e){const t=await fetch(`${Mr}/threads/${e}/nodes`);if(!t.ok)throw new Error("Failed to fetch nodes");return t.json()},async createNode({threadId:e,title:t,content:n,nodeType:r,parentId:i,metadata:s}){console.log("API createNode request:",{threadId:e,title:t,content:n,nodeType:r,parentId:i,metadata:s});const o=await fetch(`${Mr}/threads/${e}/nodes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,content:n,nodeType:r,parentId:i,metadata:s})});if(!o.ok)throw new Error("Failed to create node");const a=await o.json();return console.log("API createNode response:",a),a},async createEdge({sourceId:e,targetId:t,relationshipType:n,metadata:r}){const i=await fetch(`${Mr}/edges`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceId:e,targetId:t,relationshipType:n,metadata:r})});if(!i.ok)throw new Error("Failed to create edge");return i.json()},async saveThreadLayout(e,t){const n=await fetch(`${Mr}/threads/${e}/layout`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout:t})});if(!n.ok)throw new Error("Failed to save thread layout");return n.json()},async loadThreadLayout(e){const t=await fetch(`${Mr}/threads/${e}/layout`);if(!t.ok)throw new Error("Failed to load thread layout");return t.json()},async deleteThreadLayout(e){const t=await fetch(`${Mr}/threads/${e}/layout`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete thread layout");return t.json()},async saveThreadCanvas(e,t){const n=await fetch(`${Mr}/threads/${e}/canvas`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({canvas:t})});if(!n.ok)throw new Error(`Failed to save thread canvas: ${n.status}`);return n.json()},async loadThreadCanvas(e){const t=await fetch(`${Mr}/threads/${e}/canvas`);return t.ok?t.json():null},async deleteThreadCanvas(e){const t=await fetch(`${Mr}/threads/${e}/canvas`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete thread canvas");return t.json()},async updateThreadContent(e,t){const n=await fetch(`${Mr}/threads/${e}/content`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})});if(!n.ok)throw new Error("Failed to update thread content");return n.json()},async saveArticleSequence(e,t){const n=await fetch(`${Mr}/threads/${e}/sequence`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sequence:t})});if(!n.ok)throw new Error("Failed to save article sequence");return n.json()},async loadArticleSequence(e){const t=await fetch(`${Mr}/threads/${e}/sequence`);return!t.ok||!(t.headers.get("content-type")||"").includes("application/json")?null:t.json()},async deleteArticleSequence(e){const t=await fetch(`${Mr}/threads/${e}/sequence`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete article sequence");return t.json()},async updateNode(e,t,{title:n,content:r}){const i=await fetch(`${Mr}/threads/${e}/nodes/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,content:r})});if(!i.ok)throw new Error("Failed to update node");return i.json()},async chat({message:e,history:t,threadId:n,apiKey:r}){const i=await fetch(`${Mr}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,history:t,threadId:n,apiKey:r})});if(!i.ok){const s=await i.json().catch(()=>({}));throw new Error(s.error||"Chat request failed")}return i.json()},async generateNodeSuggestions({nodeId:e,nodeType:t,content:n,title:r}){const i=await fetch(`${Mr}/nodes/suggest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nodeId:e,nodeType:t,content:n,title:r})});if(!i.ok)throw new Error("Failed to generate suggestions");return i.json()}},ou=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],Cg={ROOT:"#ffd700",EVIDENCE:"#ff6b6b",REFERENCE:"#4ecdc4",CONTEXT:"#45b7d1",EXAMPLE:"#96ceb4",COUNTERPOINT:"#ff7f50",SYNTHESIS:"#9b59b6",thread:"#00ff9d"};function Ame({data:e}){const t=e.nodeColor||"#666",n=e.isThread,r=n?25:15,i=e.isMatteMode?"matte":"";return m.jsxs("div",{className:`graph-node ${i} ${n?"thread-node":""}`,style:{position:"relative",width:r*2,height:r*2},children:[m.jsx(zo,{type:"target",position:tt.Top,id:"t-top",style:{opacity:0,pointerEvents:"none"}}),m.jsx(zo,{type:"target",position:tt.Bottom,id:"t-bottom",style:{opacity:0,pointerEvents:"none"}}),m.jsx(zo,{type:"target",position:tt.Left,id:"t-left",style:{opacity:0,pointerEvents:"none"}}),m.jsx(zo,{type:"target",position:tt.Right,id:"t-right",style:{opacity:0,pointerEvents:"none"}}),m.jsx(zo,{type:"source",position:tt.Top,id:"s-top",style:{opacity:0,pointerEvents:"none"}}),m.jsx(zo,{type:"source",position:tt.Bottom,id:"s-bottom",style:{opacity:0,pointerEvents:"none"}}),m.jsx(zo,{type:"source",position:tt.Left,id:"s-left",style:{opacity:0,pointerEvents:"none"}}),m.jsx(zo,{type:"source",position:tt.Right,id:"s-right",style:{opacity:0,pointerEvents:"none"}}),m.jsx("div",{className:"graph-node-circle",style:{width:r*2,height:r*2,borderRadius:"50%",background:t,border:"2px solid #fff",cursor:"pointer"}}),m.jsx("div",{className:"graph-node-label",children:e.label})]})}const Mme={graphNode:Ame},Tme=({threads:e,onNodeClick:t,onAddNode:n,onOpenEditor:r,onSelectedNodeChange:i,loading:s})=>{var de,xe,ve,ue;const[o,a,l]=Jpe([]),[f,c,d]=eme([]),[u,h]=I.useState(null),[g,U]=I.useState(!0),[y,x]=I.useState(!0),[w,E]=I.useState(!0),[S,A]=I.useState(!1),{fitView:M}=a7();I.useEffect(()=>{s!==void 0&&U(s)},[s]);function C(te,le){const he=le.x-te.x,we=le.y-te.y;return Math.abs(he)>Math.abs(we)?he>0?{sourceHandle:"s-right",targetHandle:"t-left"}:{sourceHandle:"s-left",targetHandle:"t-right"}:we>0?{sourceHandle:"s-bottom",targetHandle:"t-top"}:{sourceHandle:"s-top",targetHandle:"t-bottom"}}const T=I.useRef(null),R=I.useRef(null),P=I.useRef(!1);I.useEffect(()=>{if(!e||e.length===0)return;const te=e[0].id;R.current===te&&T.current||(R.current=te,P.current=!1,(async()=>{var le;try{const he=await ti.loadThreadLayout(te);T.current=he,((le=he==null?void 0:he.settings)==null?void 0:le.isMatteMode)!==void 0&&x(he.settings.isMatteMode),_(e,he)}catch{T.current=null,_(e,null)}P.current||(P.current=!0,setTimeout(()=>M({padding:.2}),50))})())},[e]);const _=I.useCallback((te,le)=>{if(!te||te.length===0)return;const he={};o.forEach(Ge=>{he[Ge.id]=Ge.position});const we=[],Se=[];let De=0;te.forEach(Ge=>{var Xs,la,Us,Cr,or;const ht=((Xs=Ge.metadata)==null?void 0:Xs.title)||Ge.title||`Thread ${Ge.id}`,ot=(ht||"").split(/\s+/),Bt=ot.length>2?ot.slice(0,2).join(" ")+"...":ht,wn=`thread-${Ge.id}`,fn=(la=le==null?void 0:le.nodes)==null?void 0:la[wn],ui=he[wn];we.push({id:wn,type:"graphNode",position:fn?{x:fn.x,y:fn.y}:ui||{x:400,y:300+De},data:{label:Bt,isThread:!0,nodeColor:Cg.thread,isMatteMode:y,originalData:{...Ge,type:"thread",title:ht,metadata:{...Ge.metadata,title:ht}}},draggable:!0});const Ci=((Us=Ge.nodes)==null?void 0:Us.length)||0;(Cr=Ge.nodes)==null||Cr.forEach((It,ys)=>{var ml;const Xn=typeof It.type=="number"?It.type:ou.indexOf(It.node_type),Ai=ou[Xn]||"",vc=Cg[Ai]||"#666";let ca=It.content;try{typeof It.content=="string"&&(It.content.startsWith("{")||It.content.startsWith("["))&&(ca=JSON.parse(It.content))}catch{}const ul=`node-${It.id}`,hl=(ml=le==null?void 0:le.nodes)==null?void 0:ml[ul],pl=he[ul];let Ks;if(hl)Ks={x:hl.x,y:hl.y};else if(pl)Ks=pl;else{const fa=2*Math.PI*ys/Math.max(Ci,1)-Math.PI/2,da=180;Ks={x:400+da*Math.cos(fa),y:300+De+da*Math.sin(fa)}}we.push({id:ul,type:"graphNode",position:Ks,data:{label:Ai,isThread:!1,nodeColor:vc,isMatteMode:y,originalData:{...It,type:Xn,content:ca}},draggable:!0})});const qi={};we.forEach(It=>{qi[It.id]=It.position}),(or=Ge.nodes)==null||or.forEach(It=>{let ys,Xn;Xn=`node-${It.id}`,It.parent_id?ys=Ge.nodes.some(ca=>ca.id===It.parent_id)?`node-${It.parent_id}`:`thread-${Ge.id}`:ys=`thread-${Ge.id}`;const Ai=C(qi[ys]||{x:0,y:0},qi[Xn]||{x:0,y:0});Se.push({id:`e-${ys}-${Xn}`,source:ys,target:Xn,sourceHandle:Ai.sourceHandle,targetHandle:Ai.targetHandle,style:{stroke:"rgba(0, 255, 157, 0.3)",strokeWidth:2},animated:!1})})}),a(we),c(Se),U(!1)},[o,y]);I.useEffect(()=>{if(!e||e.length===0)return;const te=e[0].id;R.current===te&&T.current!==void 0&&_(e,T.current)},[e]),I.useEffect(()=>{a(te=>te.map(le=>({...le,data:{...le.data,isMatteMode:y}})))},[y]);const O=I.useCallback(te=>{h(te),i&&i((te==null?void 0:te.type)==="thread"?null:(te==null?void 0:te.id)??null)},[i]),F=I.useCallback((te,le)=>{O(le.data.originalData)},[O]),B=()=>{h(null),i&&i(null)},$=te=>{if(!e.length)return[];const le=e[0];if(te.startsWith("thread-"))return(le.nodes||[]).filter(he=>!he.parentId);{const he=parseInt(te.replace("node-",""));return(le.nodes||[]).filter(we=>we.parentId===he)}},z=te=>{O(te)},H=te=>te==="thread"?Cg.thread:Cg[ou[te]]||"#666",G=I.useRef(null),V=I.useCallback(async()=>{if(!e||e.length===0)return;const te=e[0].id,le={nodes:{},settings:{isMatteMode:y}};o.forEach(he=>{le.nodes[he.id]={x:he.position.x,y:he.position.y}}),T.current=le;try{A(!0),await ti.saveThreadLayout(te,le)}catch(he){console.error("Failed to save layout:",he)}finally{A(!1)}},[e,o,y]),Y=I.useCallback(()=>{G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{V()},500)},[V]),K=async()=>{if(!e||e.length===0)return;const te=e[0].id;try{A(!0),await ti.deleteThreadLayout(te),a(le=>{const he=le.length-1;return le.map((we,Se)=>{if(we.id.startsWith("thread-"))return{...we,position:{x:400,y:300}};const De=Se-1,Ge=2*Math.PI*De/Math.max(he,1)-Math.PI/2,ht=180;return{...we,position:{x:400+ht*Math.cos(Ge),y:300+ht*Math.sin(Ge)}}})})}catch(le){console.error("Failed to reset layout:",le)}finally{A(!1)}},q=te=>{if(!te)return null;const le=String(te);return/<[a-z][\s\S]*>/i.test(le)?m.jsx("span",{dangerouslySetInnerHTML:{__html:le}}):le},se=(te,le)=>{if(!te)return"No content available";try{let he=te.content||te;if(typeof he=="string"&&(he.startsWith("{")||he.startsWith("[")))try{he=JSON.parse(he)}catch{}if(["ROOT","EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(le)){const Se=typeof he=="object"?he:typeof he=="string"&&he.startsWith("{")?JSON.parse(he):null;if(Se)switch(le){case"ROOT":return m.jsxs("div",{className:"root-content",children:[m.jsx("h4",{className:"root-title",children:q(Se.title)}),m.jsx("div",{className:"root-description",children:q(Se.description)}),Se.keywords&&m.jsxs("div",{className:"root-keywords",children:[m.jsx("strong",{children:"Keywords: "}),Array.isArray(Se.keywords)?Se.keywords.join(", "):q(Se.keywords)]})]});case"EVIDENCE":return m.jsxs("div",{className:"evidence-content",children:[m.jsx("div",{className:"evidence-point",children:q(Se.point)}),m.jsx("p",{className:"evidence-source",children:m.jsxs("em",{children:["Source: ",q(Se.source)]})})]});case"EXAMPLE":return m.jsxs("div",{className:"example-content",children:[m.jsx("h4",{className:"example-title",children:q(Se.title)}),m.jsx("div",{className:"example-description",children:q(Se.description)})]});case"COUNTERPOINT":return m.jsxs("div",{className:"counterpoint-content",children:[m.jsx("h4",{className:"counterpoint-argument",children:q(Se.argument)}),m.jsx("div",{className:"counterpoint-explanation",children:q(Se.explanation)})]})}}const we=typeof he=="object"?JSON.stringify(he,null,2):String(he);return/<[a-z][\s\S]*>/i.test(we)?m.jsx("div",{dangerouslySetInnerHTML:{__html:we}}):we.split(`
`).map((Se,De)=>m.jsx("p",{className:"content-paragraph",children:Se},De))}catch{return"Error displaying content"}};return m.jsxs("div",{className:`thread-graph ${y?"matte":""}`,children:[m.jsxs("div",{className:`graph-container ${u?"with-sidebar":""}`,children:[m.jsx(Qpe,{nodes:o,edges:f,onNodesChange:l,onEdgesChange:d,onNodeClick:F,onNodeDragStop:Y,nodeTypes:Mme,minZoom:.3,maxZoom:2,proOptions:{hideAttribution:!0},style:{background:"#1d1d1d"},children:m.jsx(sme,{variant:w?"dots":"lines",gap:w?40:0,size:w?1:0,color:w?"rgba(255, 255, 255, 0.08)":"transparent"})}),g&&m.jsx("div",{className:"loading-overlay",children:m.jsx("div",{className:"loading-spinner"})}),m.jsxs("div",{className:"bottom-right-controls",children:[m.jsx("button",{className:`control-button ${y?"active":""}`,onClick:()=>x(!y),title:y?"Switch to Glossy mode":"Switch to Matte mode",children:"M"}),m.jsx("button",{className:`control-button ${w?"active":""}`,onClick:()=>E(!w),title:w?"Switch to solid background":"Switch to dotted background",children:"D"}),m.jsx("button",{className:"control-button",onClick:()=>M({padding:.2,duration:300}),title:"Fit view",children:"F"}),m.jsx("button",{className:"control-button",onClick:K,disabled:S,title:"Reset layout",children:"R"})]})]}),m.jsx("div",{className:`content-sidebar ${u?"open":""}`,children:u&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"content-sidebar-header",children:[u.type!=="thread"&&m.jsx("button",{className:"back-button",onClick:()=>{var le;if(u.parentId){const he=e[0].nodes.find(we=>we.id===u.parentId);if(he){O(he);return}}const te=e[0];O({...te,type:"thread",metadata:{...te.metadata,title:((le=te.metadata)==null?void 0:le.title)||te.title||`Thread ${te.id}`}})},"aria-label":"Back to parent",children:""}),m.jsx("h2",{children:u.type==="thread"?((xe=(de=u.originalData)==null?void 0:de.metadata)==null?void 0:xe.title)||((ve=u.originalData)==null?void 0:ve.title)||u.title||`Thread ${u.id}`:((ue=u.metadata)==null?void 0:ue.title)||u.title||`Node ${u.id}`}),m.jsxs("div",{className:"header-actions",children:[m.jsx("button",{className:"add-node-button",onClick:()=>r&&r(u),children:"Add Node"}),m.jsx("button",{className:"content-sidebar-close",onClick:B,children:""})]})]}),m.jsxs("div",{className:"content-sidebar-body",children:[m.jsxs("div",{className:"child-nodes-list",children:[m.jsx("h3",{children:"Connected Nodes"}),$(`${u.type==="thread"?"thread-":"node-"}${u.id}`).length>0?m.jsx("div",{className:"nodes-grid",children:$(`${u.type==="thread"?"thread-":"node-"}${u.id}`).map(te=>{var le;return m.jsxs("div",{className:"node-card",onClick:()=>z(te),children:[m.jsx("div",{className:"node-card-type",style:{backgroundColor:Cg[ou[te.type]]},children:ou[te.type]}),m.jsx("div",{className:"node-card-title",children:((le=te.metadata)==null?void 0:le.title)||`Node ${te.id}`})]},te.id)})}):m.jsx("p",{className:"no-nodes-message",children:"No nodes connected yet"})]}),m.jsxs("div",{className:"content-sidebar-metadata",children:[m.jsx("div",{className:"type-badge",style:{backgroundColor:H(u.type)},children:u.type==="thread"?"THREAD":ou[u.type]}),m.jsxs("div",{className:"voting-stats",children:[m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Votes For:"}),m.jsx("span",{children:u.votesFor||"0"})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Votes Against:"}),m.jsx("span",{children:u.votesAgainst||"0"})]})]})]}),m.jsx("div",{className:"content-sidebar-content",children:se(u.content,u.type==="thread"?"thread":ou[u.type])})]})]})})]})},Ime=({node:e,onClose:t,onVote:n,onCreateProposal:r,onAddNode:i,loading:s,voteAmount:o,setVoteAmount:a})=>{I.useState(!1);const l=(c,d)=>{try{return d==="EVIDENCE"&&c.startsWith("{")&&JSON.parse(c).source||c}catch{return c}},f=(c,d)=>{if(!c)return console.log("No content provided for node type:",d),"No content available";console.log("Formatting content for node type:",d),console.log("Raw content:",c),console.log("Content type:",typeof c);let u=c.content||c;if(typeof u=="string"&&(u.startsWith("{")||u.startsWith("[")))try{u=JSON.parse(u)}catch(h){console.log("Failed to parse JSON content:",h)}try{if(["EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(d)){const g=typeof u=="object"?u:typeof u=="string"&&u.startsWith("{")?JSON.parse(u):null;if(g)switch(d){case"EVIDENCE":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"evidence-content",children:[m.jsx("p",{className:"evidence-point",children:g.point}),m.jsx("p",{className:"evidence-source",children:m.jsxs("em",{children:["Source: ",g.source]})})]})});case"EXAMPLE":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"example-content",children:[m.jsx("h4",{className:"example-title",children:g.title}),m.jsx("p",{className:"example-description",children:g.description})]})});case"COUNTERPOINT":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"counterpoint-content",children:[m.jsx("h4",{className:"counterpoint-argument",children:g.argument}),m.jsx("p",{className:"counterpoint-explanation",children:g.explanation})]})})}}if(["SYNTHESIS","CONTEXT"].includes(d)){const g=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:g.split(`
`).map((U,y)=>m.jsx("p",{className:"content-paragraph",children:U},y))})}const h=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:h})}catch(h){console.error("Error formatting content:",h);const g=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:g.split(`
`).map((U,y)=>m.jsx("p",{className:"content-paragraph",children:U},y))})}};return m.jsx("div",{className:"modal-overlay",onClick:t,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsxs("div",{className:"modal-title",children:[m.jsx("h3",{children:l(e.title,e.node_type)}),m.jsx("div",{className:"node-type-badge",children:e.node_type})]}),m.jsx("button",{className:"close-button",onClick:t,children:""})]}),m.jsx("div",{className:"modal-body",children:m.jsx("div",{className:"node-content",children:f(e.content,e.node_type)})})]})})};var zG=tG();function bi(e){this.content=e}bi.prototype={constructor:bi,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new bi(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new bi(n)},addToStart:function(e,t){return new bi([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new bi(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new bi(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=bi.from(e),e.size?new bi(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=bi.from(e),e.size?new bi(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=bi.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};bi.from=function(e){if(e instanceof bi)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new bi(t)};function HG(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=HG(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function VG(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let f=0,c=Math.min(o.text.length,a.text.length);for(;f<c&&o.text[o.text.length-f-1]==a.text[a.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let f=VG(o.content,a.content,n-1,r-1);if(f)return f}n-=l,r-=l}}class Me{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],f=a+l.nodeSize;if(f>t&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,i+c)}a=f}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(a,l)=>{let f=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&f||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=f},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new Me(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Me(r,i)}cutByIndex(t,n){return t==n?Me.empty:t==0&&n==this.content.length?this:new Me(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new Me(i,s)}addToStart(t){return new Me([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Me(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return HG(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return VG(this,t,n,r)}findIndex(t){if(t==0)return RU(0,t);if(t==this.size)return RU(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?RU(n+1,s):RU(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Me.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Me(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Me.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Me(n||t,r)}static from(t){if(!t)return Me.empty;if(t instanceof Me)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Me([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Me.empty=new Me([],0);const Hw={index:0,offset:0};function RU(e,t){return Hw.index=e,Hw.offset=t,Hw}function H3(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!H3(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!H3(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let vn=class Lk{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&H3(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Lk.none;if(t instanceof Lk)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};vn.none=[];class V3 extends Error{}class We{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=GG(this.content,t+this.openStart,n);return r&&new We(r,this.openStart,this.openEnd)}removeBetween(t,n){return new We(WG(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return We.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new We(Me.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new We(t,r,i)}}We.empty=new We(Me.empty,0,0);function WG(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(i==t||s.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(WG(s.content,t-i-1,n-i-1)))}function GG(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=GG(o.content,t-s-1,n,o);return a&&e.replaceChild(i,o.copy(a))}function Nme(e,t,n){if(n.openStart>e.depth)throw new V3("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new V3("Inconsistent open depths");return XG(e,t,n,0)}function XG(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=XG(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,a=o.content;return gh(o,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=Rme(n,e);return gh(s,YG(e,o,a,t,r))}else return gh(s,W3(e,t,r))}function KG(e,t){if(!t.type.compatibleContent(e.type))throw new V3("Cannot join "+t.type.name+" onto "+e.type.name)}function Ok(e,t,n){let r=e.node(n);return KG(r,t.node(n)),r}function mh(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function E5(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(mh(e.nodeAfter,r),s++));for(let a=s;a<o;a++)mh(i.child(a),r);t&&t.depth==n&&t.textOffset&&mh(t.nodeBefore,r)}function gh(e,t){return e.type.checkContent(t),e.copy(t)}function YG(e,t,n,r,i){let s=e.depth>i&&Ok(e,t,i+1),o=r.depth>i&&Ok(n,r,i+1),a=[];return E5(null,e,i,a),s&&o&&t.index(i)==n.index(i)?(KG(s,o),mh(gh(s,YG(e,t,n,r,i+1)),a)):(s&&mh(gh(s,W3(e,t,i+1)),a),E5(t,n,i,a),o&&mh(gh(o,W3(n,r,i+1)),a)),E5(r,null,i,a),new Me(a)}function W3(e,t,n){let r=[];if(E5(null,e,n,r),e.depth>n){let i=Ok(e,t,n+1);mh(gh(i,W3(e,t,n+1)),r)}return E5(t,null,n,r),new Me(r)}function Rme(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(Me.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class U2{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return vn.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new G3(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),f=s-l;if(r.push(o,a,i+l),!f||(o=o.child(a),o.isText))break;s=f-1,i+=l+1}return new U2(n,r,s)}static resolveCached(t,n){let r=wL.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else wL.set(t,r=new _me);let i=r.elts[r.i]=U2.resolve(t,n);return r.i=(r.i+1)%Pme,i}}class _me{constructor(){this.elts=[],this.i=0}}const Pme=12,wL=new WeakMap;class G3{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Dme=Object.create(null);let p0=class jk{constructor(t,n,r,i=vn.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||Me.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&H3(this.attrs,n||t.defaultAttrs||Dme)&&vn.sameSet(this.marks,r||vn.none)}copy(t=null){return t==this.content?this:new jk(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new jk(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return We.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),f=i.node(o).content.cut(i.pos-a,s.pos-a);return new We(f,i.depth-o,s.depth-o)}replace(t,n,r){return Nme(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return U2.resolveCached(this,t)}resolveNoCache(t){return U2.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),ZG(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=Me.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=vn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!vn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=Me.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};p0.prototype.text=void 0;class X3 extends p0{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ZG(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new X3(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new X3(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function ZG(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Lh{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new Lme(t,n);if(r.next==null)return Lh.empty;let i=qG(r);r.next&&r.err("Unexpected trailing text");let s=Hme(zme(i));return Vme(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(t,r);if(l&&(!n||l.validEnd))return Me.from(a.map(f=>f.createAndFill()));for(let f=0;f<o.next.length;f++){let{type:c,next:d}=o.next[f];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let u=s(d,a.concat(c));if(u)return u}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}Lh.empty=new Lh(!0);class Lme{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function qG(e){let t=[];do t.push(Ome(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Ome(e){let t=[];do t.push(jme(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function jme(e){let t=$me(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=Bme(e,t);else break;return t}function EL(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Bme(e,t){let n=EL(e),r=n;return e.eat(",")&&(e.next!="}"?r=EL(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Fme(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function $me(e){if(e.eat("(")){let t=qG(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=Fme(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function zme(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,a,l){let f={term:l,to:a};return t[o].push(f),f}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,f)=>l.concat(s(f,a)),[]);if(o.type=="seq")for(let l=0;;l++){let f=s(o.exprs[l],a);if(l==o.exprs.length-1)return f;i(f,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let f=0;f<o.min;f++){let c=n();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let f=o.min;f<o.max;f++){let c=n();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function QG(e,t){return t-e}function SL(e,t){let n=[];return r(t),n.sort(QG);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Hme(e){let t=Object.create(null);return n(SL(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:a,to:l})=>{if(!a)return;let f;for(let c=0;c<i.length;c++)i[c][0]==a&&(f=i[c][1]);SL(e,l).forEach(c=>{f||i.push([a,f=[]]),f.indexOf(c)==-1&&f.push(c)})})});let s=t[r.join(",")]=new Lh(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(QG);s.next.push({type:i[o][0],next:t[a.join(",")]||n(a)})}return s}}function Vme(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:f}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function JG(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function eX(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function tX(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function nX(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new Gme(e,r,t[r]);return n}let kL=class rX{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=nX(t,r.attrs),this.defaultAttrs=JG(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Lh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:eX(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new p0(this,this.computeAttrs(t),Me.from(n),vn.setFrom(r))}createChecked(t=null,n,r){return n=Me.from(n),this.checkContent(n),new p0(this,this.computeAttrs(t),n,vn.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=Me.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Me.empty,!0);return s?new p0(this,t,n.append(s),vn.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){tX(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:vn.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new rX(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Wme(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class Gme{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Wme(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class f7{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=nX(t,i.attrs),this.excluded=null;let s=JG(this.attrs);this.instance=s?new vn(this,s):null}create(t=null){return!t&&this.instance?this.instance:new vn(this,eX(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new f7(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){tX(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class iX{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=bi.from(t.nodes),n.marks=bi.from(t.marks||{}),this.nodes=kL.compile(this.spec.nodes,this),this.marks=f7.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Lh.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?CL(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:CL(this,o.split(" "))}this.nodeFromJSON=i=>p0.fromJSON(this,i),this.markFromJSON=i=>vn.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof kL){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new X3(r,r.defaultAttrs,t,vn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function CL(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let a in e.marks){let l=e.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function Xme(e){return e.tag!=null}function Kme(e){return e.style!=null}let S5=class Bk{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(Xme(i))this.tags.push(i);else if(Kme(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new ML(this,n,!1);return r.addAll(t,vn.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new ML(this,n,!0);return r.addAll(t,vn.none,n.from,n.to),We.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(qme(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=TL(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=TL(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Bk(t,Bk.schemaRules(t)))}};const sX={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Yme={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},oX={ol:!0,ul:!0},y2=1,Fk=2,k5=4;function AL(e,t,n){return t!=null?(t?y2:0)|(t==="full"?Fk:0):e&&e.whitespace=="pre"?y2|Fk:n&~k5}class _U{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=vn.none,this.match=s||(o&k5?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Me.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&y2)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Me.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Me.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!sX.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class ML{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=AL(null,n.preserveWhitespace,0)|(r?k5:0);i?s=new _U(i.type,i.attrs,vn.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new _U(null,null,vn.none,!0,null,o):s=new _U(t.schema.topNodeType,null,vn.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&Fk?"full":this.localPreserveWS||(i.options&y2)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),a;oX.hasOwnProperty(o)&&this.parser.normalizeLists&&Zme(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:Yme.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let f,c=this.needsBlock;if(sX.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let d=l&&l.skip?n:this.readStyles(t,n);d&&this.addAll(t,d),f&&this.sync(s),this.needsBlock=c}else{let f=this.readStyles(t,n);f&&this.addElementByRule(t,l,f,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(f=>!l.clearMark(f)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,a=i==null?null:t.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],f=l.findWrapping(t);if(f&&(!i||i.length>f.length+a)&&(i=f,s=l,!f.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=vn.none;for(let a of i.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):IL(a.type,t.type))&&(o=a.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=AL(t,s,o.options);o.options&k5&&o.content.length==0&&(a|=k5);let l=vn.none;return r=r.filter(f=>(o.type?o.type.allowsMarkType(f.type):IL(f.type,t))?(l=f.addToSet(l),!1):!0),this.nodes.push(new _U(t,n,l,i,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=y2)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let f=n[a];if(f==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=f&&!c.isInGroup(f))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Zme(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&oX.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function qme(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function TL(e){let t={};for(let n in e)t[n]=e[n];return t}function IL(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:f,next:c}=a.edge(l);if(f==t||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class s1{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=Vw(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let f=o.marks[l];if(!this.marks[f.type.name]){l++;continue}if(!f.eq(s[a][0])||f.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let f=o.marks[l++],c=this.serializeMark(f,o.isInline,n);c&&(s.push([f,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=Ly(Vw(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&Ly(Vw(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return Ly(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new s1(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=NL(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return NL(t.marks)}}function NL(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Vw(e){return e.document||window.document}const RL=new WeakMap;function Qme(e){let t=RL.get(e);return t===void 0&&RL.set(e,t=Jme(e)),t}function Jme(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function Ly(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Qme(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?e.createElementNS(n,i):e.createElement(i),f=t[1],c=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){c=2;for(let d in f)if(f[d]!=null){let u=d.indexOf(" ");u>0?l.setAttributeNS(d.slice(0,u),d.slice(u+1),f[d]):d=="style"&&l.style?l.style.cssText=f[d]:l.setAttribute(d,f[d])}}for(let d=c;d<t.length;d++){let u=t[d];if(u===0){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:g}=Ly(e,u,n,r);if(l.appendChild(h),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const aX=65535,lX=Math.pow(2,16);function e6e(e,t){return e+t*lX}function _L(e){return e&aX}function t6e(e){return(e-(e&aX))/lX}const cX=1,fX=2,Oy=4,dX=8;class $k{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&dX)>0}get deletedBefore(){return(this.delInfo&(cX|Oy))>0}get deletedAfter(){return(this.delInfo&(fX|Oy))>0}get deletedAcross(){return(this.delInfo&Oy)>0}}class uo{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&uo.empty)return uo.empty}recover(t){let n=0,r=_L(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+t6e(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let f=this.ranges[a+s],c=this.ranges[a+o],d=l+f;if(t<=d){let u=f?t==l?-1:t==d?1:n:n,h=l+i+(u<0?0:c);if(r)return h;let g=t==(n<0?l:d)?null:e6e(a/3,t-l),U=t==l?fX:t==d?cX:Oy;return(n<0?t!=l:t!=d)&&(U|=dX),new $k(h,U,g)}i+=c-f}return r?t+i:new $k(t+i,0,null)}touches(t,n){let r=0,i=_L(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let f=this.ranges[a+s],c=l+f;if(t<=c&&a==i*3)return!0;r+=this.ranges[a+o]-f}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),f=this.ranges[i+n],c=this.ranges[i+r];t(a,a+f,l,l+c),s+=c-f}}invert(){return new uo(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?uo.empty:new uo(t<0?[0,-t,0]:[0,0,t])}}uo.empty=new uo([]);class x2{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new x2(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new x2;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return r?t:new $k(t,i,null)}}const Ww=Object.create(null);class Yi{getMap(){return uo.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ww[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Ww)throw new RangeError("Duplicate use of step JSON ID "+t);return Ww[t]=n,n.prototype.jsonID=t,n}}class Rr{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Rr(t,null)}static fail(t){return new Rr(null,t)}static fromReplace(t,n,r,i){try{return Rr.ok(t.replace(n,r,i))}catch(s){if(s instanceof V3)return Rr.fail(s.message);throw s}}}function vM(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(vM(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return Me.fromArray(r)}class i0 extends Yi{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new We(vM(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Rr.fromReplace(t,this.from,this.to,s)}invert(){return new Va(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new i0(n.pos,r.pos,this.mark)}merge(t){return t instanceof i0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new i0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i0(n.from,n.to,t.markFromJSON(n.mark))}}Yi.jsonID("addMark",i0);class Va extends Yi{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new We(vM(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Rr.fromReplace(t,this.from,this.to,r)}invert(){return new i0(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Va(n.pos,r.pos,this.mark)}merge(t){return t instanceof Va&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Va(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Va(n.from,n.to,t.markFromJSON(n.mark))}}Yi.jsonID("removeMark",Va);class s0 extends Yi{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Rr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Rr.fromReplace(t,this.pos,this.pos+1,new We(Me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new s0(this.pos,n.marks[i]);return new s0(this.pos,this.mark)}}return new Oh(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new s0(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new s0(n.pos,t.markFromJSON(n.mark))}}Yi.jsonID("addNodeMark",s0);class Oh extends Yi{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Rr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Rr.fromReplace(t,this.pos,this.pos+1,new We(Me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new s0(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Oh(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Oh(n.pos,t.markFromJSON(n.mark))}}Yi.jsonID("removeNodeMark",Oh);class ii extends Yi{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&zk(t,this.from,this.to)?Rr.fail("Structure replace would overwrite content"):Rr.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new uo([this.from,this.to-this.from,this.slice.size])}invert(t){return new ii(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ii(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof ii)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?We.empty:new We(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ii(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?We.empty:new We(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ii(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ii(n.from,n.to,We.fromJSON(t,n.slice),!!n.structure)}}Yi.jsonID("replace",ii);class li extends Yi{constructor(t,n,r,i,s,o,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(zk(t,this.from,this.gapFrom)||zk(t,this.gapTo,this.to)))return Rr.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Rr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Rr.fromReplace(t,this.from,this.to,r):Rr.fail("Content does not fit in gap")}getMap(){return new uo([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new li(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new li(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new li(n.from,n.to,n.gapFrom,n.gapTo,We.fromJSON(t,n.slice),n.insert,!!n.structure)}}Yi.jsonID("replaceAround",li);function zk(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function n6e(e,t,n,r){let i=[],s=[],o,a;e.doc.nodesBetween(t,n,(l,f,c)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let u=Math.max(f,t),h=Math.min(f+l.nodeSize,n),g=r.addToSet(d);for(let U=0;U<d.length;U++)d[U].isInSet(g)||(o&&o.to==u&&o.mark.eq(d[U])?o.to=h:i.push(o=new Va(u,h,d[U])));a&&a.to==u?a.to=h:s.push(a=new i0(u,h,r))}}),i.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function r6e(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof f7){let f=o.marks,c;for(;c=r.isInSet(f);)(l||(l=[])).push(c),f=c.removeFromSet(f)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let f=Math.min(a+o.nodeSize,n);for(let c=0;c<l.length;c++){let d=l[c],u;for(let h=0;h<i.length;h++){let g=i[h];g.step==s-1&&d.eq(i[h].style)&&(u=g)}u?(u.to=f,u.step=s):i.push({style:d,from:Math.max(a,t),to:f,step:s})}}}),i.forEach(o=>e.step(new Va(o.from,o.to,o.style)))}function wM(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<s.childCount;l++){let f=s.child(l),c=a+f.nodeSize,d=r.matchType(f.type);if(!d)o.push(new ii(a,c,We.empty));else{r=d;for(let u=0;u<f.marks.length;u++)n.allowsMarkType(f.marks[u].type)||e.step(new Va(a,c,f.marks[u]));if(i&&f.isText&&n.whitespace!="pre"){let u,h=/\r?\n|\r/g,g;for(;u=h.exec(f.text);)g||(g=new We(Me.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),o.push(new ii(a+u.index,a+u.index+u[0].length,g))}}a=c}if(!r.validEnd){let l=r.fillBefore(Me.empty,!0);e.replace(a,a,new We(l,0,0))}for(let l=o.length-1;l>=0;l--)e.step(o[l])}function i6e(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function k6(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,i=0,s=0;;--r){let o=e.$from.node(r),a=e.$from.index(r)+i,l=e.$to.indexAfter(r)-s;if(r<e.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!i6e(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function s6e(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),a=i.after(s+1),l=o,f=a,c=Me.empty,d=0;for(let g=s,U=!1;g>n;g--)U||r.index(g)>0?(U=!0,c=Me.from(r.node(g).copy(c)),d++):l--;let u=Me.empty,h=0;for(let g=s,U=!1;g>n;g--)U||i.after(g+1)<i.end(g)?(U=!0,u=Me.from(i.node(g).copy(u)),h++):f++;e.step(new li(l,f,o,a,new We(c.append(u),d,h),c.size-d,!0))}function EM(e,t,n=null,r=e){let i=o6e(e,t),s=i&&a6e(r,t);return s?i.map(PL).concat({type:t,attrs:n}).concat(s.map(PL)):null}function PL(e){return{type:e,attrs:null}}function o6e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function a6e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let f=r;l&&f<i;f++)l=l.matchType(n.child(f).type);return!l||!l.validEnd?null:o}function l6e(e,t,n){let r=Me.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Me.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new li(i,s,i,s,new We(r,0,0),n.length,!0))}function c6e(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&f6e(e.doc,e.mapping.slice(s).map(a),r)){let f=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!g?f=!1:!h&&g&&(f=!0)}f===!1&&hX(e,o,a,s),wM(e,e.mapping.slice(s).map(a,1),r,void 0,f===null);let c=e.mapping.slice(s),d=c.map(a,1),u=c.map(a+o.nodeSize,1);return e.step(new li(d,u,d+1,u-1,new We(Me.from(r.create(l,null,o.marks)),0,0),1,!0)),f===!0&&uX(e,o,a,s),!1}})}function uX(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function hX(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function f6e(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function d6e(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new li(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new We(Me.from(o),0,0),1,!0))}function Fp(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,c=n-2;f>s;f--,c--){let d=i.node(f),u=i.index(f);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(u,d.childCount),g=r&&r[c+1];g&&(h=h.replaceChild(0,g.type.create(g.attrs)));let U=r&&r[c]||d;if(!d.canReplace(u+1,d.childCount)||!U.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function u6e(e,t,n=1,r){let i=e.doc.resolve(t),s=Me.empty,o=Me.empty;for(let a=i.depth,l=i.depth-n,f=n-1;a>l;a--,f--){s=Me.from(i.node(a).copy(s));let c=r&&r[f];o=Me.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}e.step(new ii(t,t,new We(s.append(o),n,n),!0))}function L0(e,t){let n=e.resolve(t),r=n.index();return pX(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function h6e(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function pX(e,t){return!!(e&&t&&!e.isLeaf&&h6e(e,t))}function d7(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&pX(s,o)&&r.node(i).canReplace(a,a+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function p6e(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let a=e.steps.length;if(r===!1){let c=e.doc.resolve(t+n);hX(e,c.node(),c.before(),a)}o.inlineContent&&wM(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=e.mapping.slice(a),f=l.map(t-n);if(e.step(new ii(f,l.map(t+n,-1),We.empty,!0)),r===!0){let c=e.doc.resolve(f);uX(e,c.node(),c.before(),e.steps.length)}return e}function m6e(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function mX(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),f=r.node(o),c=!1;if(s==1)c=f.canReplace(l,l,i);else{let d=f.contentMatchAt(l).findWrapping(i.firstChild.type);c=d&&f.canReplaceWith(l,l,d[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function u7(e,t,n=t,r=We.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return gX(i,s,r)?new ii(t,n,r):new g6e(i,s,r).fit()}function gX(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class g6e{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Me.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=Me.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new We(s,o,a);return t>-1?new li(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ii(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Gw(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:f}=this.frontier[a],c,d=null;if(n==1&&(o?f.matchType(o.type)||(d=f.fillBefore(Me.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(c=f.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&f.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Gw(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new We(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Gw(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new We(n5(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new We(n5(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let U=0;U<s.length;U++)this.openFrontierNode(s[U]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-t,f=0,c=[],{match:d,type:u}=this.frontier[n];if(i){for(let U=0;U<i.childCount;U++)c.push(i.child(U));d=d.matchFragment(i)}let h=a.size+t-(o.content.size-o.openEnd);for(;f<a.childCount;){let U=a.child(f),y=d.matchType(U.type);if(!y)break;f++,(f>1||l==0||U.content.size)&&(d=y,c.push(bX(U.mark(u.allowedMarks(U.marks)),f==1?l:0,f==a.childCount?h:-1)))}let g=f==a.childCount;g||(h=-1),this.placed=r5(this.placed,n,Me.from(c)),this.frontier[n].match=d,g&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let U=0,y=a;U<h;U++){let x=y.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),y=x.content}this.unplaced=g?t==0?We.empty:new We(n5(o.content,t-1,1),t-1,h<0?o.openEnd:t-1):new We(n5(o.content,t,f),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Xw(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=Xw(t,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:f}=this.frontier[a],c=Xw(t,a,f,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=r5(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=r5(this.placed,this.depth,Me.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Me.empty,!0);n.childCount&&(this.placed=r5(this.placed,this.frontier.length,n))}}function n5(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(n5(e.firstChild.content,t-1,n)))}function r5(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(r5(e.lastChild.content,t-1,n)))}function Gw(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function bX(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,bX(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Me.empty,!0)))),e.copy(r)}function Xw(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!b6e(n,s.content,o)?a:null}function b6e(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function U6e(e){return e.spec.defining||e.spec.definingForContent}function y6e(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(gX(i,s,r))return e.step(new ii(t,n,r));let o=yX(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let u=i.depth,h=i.pos-1;u>0;u--,h--){let g=i.node(u).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(u)>-1?a=u:i.before(u)==h&&o.splice(1,0,-u)}let l=o.indexOf(a),f=[],c=r.openStart;for(let u=r.content,h=0;;h++){let g=u.firstChild;if(f.push(g),h==r.openStart)break;u=g.content}for(let u=c-1;u>=0;u--){let h=f[u],g=U6e(h.type);if(g&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=u;else if(g||!h.type.isTextblock)break}for(let u=r.openStart;u>=0;u--){let h=(u+c+1)%(r.openStart+1),g=f[h];if(g)for(let U=0;U<o.length;U++){let y=o[(U+l)%o.length],x=!0;y<0&&(x=!1,y=-y);let w=i.node(y-1),E=i.index(y-1);if(w.canReplaceWith(E,E,g.type,g.marks))return e.replace(i.before(y),x?s.after(y):n,new We(UX(r.content,0,r.openStart,h),h,r.openEnd))}}let d=e.steps.length;for(let u=o.length-1;u>=0&&(e.replace(t,n,r),!(e.steps.length>d));u--){let h=o[u];h<0||(t=i.before(h),n=s.after(h))}}function UX(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(UX(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(Me.empty,!0))}return e}function x6e(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=m6e(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new We(Me.from(r),0,0))}function v6e(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=yX(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return e.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function yX(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class $p extends Yi{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Rr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Rr.fromReplace(t,this.pos,this.pos+1,new We(Me.from(i),0,n.isLeaf?0:1))}getMap(){return uo.empty}invert(t){return new $p(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new $p(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $p(n.pos,n.attr,n.value)}}Yi.jsonID("attr",$p);class v2 extends Yi{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Rr.ok(r)}getMap(){return uo.empty}invert(t){return new v2(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new v2(n.attr,n.value)}}Yi.jsonID("docAttr",v2);let qm=class extends Error{};qm=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};qm.prototype=Object.create(Error.prototype);qm.prototype.constructor=qm;qm.prototype.name="TransformError";class xX{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new x2}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new qm(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let t=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(t=i.map(t,1),n=i.map(n,-1)),i.forEach((s,o,a,l)=>{t=Math.min(t,a),n=Math.max(n,l)})}return t==1e9?null:{from:t,to:n}}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=We.empty){let i=u7(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new We(Me.from(r),0,0))}delete(t,n){return this.replace(t,n,We.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return y6e(this,t,n,r),this}replaceRangeWith(t,n,r){return x6e(this,t,n,r),this}deleteRange(t,n){return v6e(this,t,n),this}lift(t,n){return s6e(this,t,n),this}join(t,n=1){return p6e(this,t,n),this}wrap(t,n){return l6e(this,t,n),this}setBlockType(t,n=t,r,i=null){return c6e(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return d6e(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new $p(t,n,r)),this}setDocAttribute(t,n){return this.step(new v2(t,n)),this}addNodeMark(t,n){return this.step(new s0(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof vn)n.isInSet(r.marks)&&this.step(new Oh(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Oh(t,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(t,n=1,r){return u6e(this,t,n,r),this}addMark(t,n,r){return n6e(this,t,n,r),this}removeMark(t,n,r){return r6e(this,t,n,r),this}clearIncompatible(t,n,r){return wM(this,t,n,r),this}}const Kw=Object.create(null);class Dt{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new w6e(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=We.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:f}=o[a],c=t.mapping.slice(s);t.replaceRange(c.map(l.pos),c.map(f.pos),a?We.empty:n),a==0&&OL(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=t.mapping.slice(r),f=l.map(o.pos),c=l.map(a.pos);s?t.deleteRange(f,c):(t.replaceRangeWith(f,c,n),OL(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new kt(t):lp(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?lp(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):lp(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Zo(t.node(0))}static atStart(t){return lp(t,t,0,0,1)||new Zo(t)}static atEnd(t){return lp(t,t,t.content.size,t.childCount,-1)||new Zo(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Kw[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Kw)throw new RangeError("Duplicate use of selection JSON ID "+t);return Kw[t]=n,n.prototype.jsonID=t,n}getBookmark(){return kt.between(this.$anchor,this.$head).getBookmark()}}Dt.prototype.visible=!0;class w6e{constructor(t,n){this.$from=t,this.$to=n}}let DL=!1;function LL(e){!DL&&!e.parent.inlineContent&&(DL=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class kt extends Dt{constructor(t,n=t){LL(t),LL(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Dt.near(r);let i=t.resolve(n.map(this.anchor));return new kt(i.parent.inlineContent?i:r,r)}replace(t,n=We.empty){if(super.replace(t,n),n==We.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof kt&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new h7(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new kt(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Dt.findFrom(n,r,!0)||Dt.findFrom(n,-r,!0);if(s)n=s.$head;else return Dt.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Dt.findFrom(t,-r,!0)||Dt.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new kt(t,n)}}Dt.jsonID("text",kt);class h7{constructor(t,n){this.anchor=t,this.head=n}map(t){return new h7(t.map(this.anchor),t.map(this.head))}resolve(t){return kt.between(t.resolve(this.anchor),t.resolve(this.head))}}class lt extends Dt{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Dt.near(s):new lt(s)}content(){return new We(Me.from(this.node),0,0)}eq(t){return t instanceof lt&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new SM(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new lt(t.resolve(n.anchor))}static create(t,n){return new lt(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}lt.prototype.visible=!1;Dt.jsonID("node",lt);class SM{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new h7(r,r):new SM(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&lt.isSelectable(r)?new lt(n):Dt.near(n)}}class Zo extends Dt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=We.empty){if(n==We.empty){t.delete(0,t.doc.content.size);let r=Dt.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Zo(t)}map(t){return new Zo(t)}eq(t){return t instanceof Zo}getBookmark(){return E6e}}Dt.jsonID("all",Zo);const E6e={map(){return this},resolve(e){return new Zo(e)}};function lp(e,t,n,r,i,s=!1){if(t.inlineContent)return kt.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let a=t.child(o);if(a.isAtom){if(!s&&lt.isSelectable(a))return lt.create(e,n-(i<0?a.nodeSize:0))}else{let l=lp(e,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function OL(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof ii||i instanceof li))return;let s=e.mapping.maps[r],o;s.forEach((a,l,f,c)=>{o==null&&(o=c)}),e.setSelection(Dt.near(e.doc.resolve(o),n))}const jL=1,PU=2,BL=4;class S6e extends xX{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|jL)&~PU,this.storedMarks=null,this}get selectionSet(){return(this.updated&jL)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=PU,this}ensureMarks(t){return vn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&PU)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~PU,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||vn.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Dt.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=BL,this}get scrolledIntoView(){return(this.updated&BL)>0}}function FL(e,t){return!t||!e?e:e.bind(t)}class i5{constructor(t,n,r){this.name=t,this.init=FL(n.init,r),this.apply=FL(n.apply,r)}}const k6e=[new i5("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new i5("selection",{init(e,t){return e.selection||Dt.atStart(t.doc)},apply(e){return e.selection}}),new i5("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new i5("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Yw{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=k6e.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new i5(r.key,r.spec.state,r))})}}class xp{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,f=i?i[o].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,f,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new xp(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new S6e(this)}static create(t){let n=new Yw(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new xp(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new Yw(this.schema,t.plugins),r=n.fields,i=new xp(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Yw(t.schema,t.plugins),s=new xp(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=p0.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Dt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],f=l.spec.state;if(l.key==o.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=f.fromJSON.call(l,t,n[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function vX(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=vX(i,t,{})),n[r]=i}return n}class sr{constructor(t){this.spec=t,this.props={},t.props&&vX(t.props,this,this.props),this.key=t.key?t.key.key:wX("plugin")}getState(t){return t[this.key]}}const Zw=Object.create(null);function wX(e){return e in Zw?e+"$"+ ++Zw[e]:(Zw[e]=0,e+"$")}class Wr{constructor(t="key"){this.key=wX(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const C6e=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function EX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const A6e=(e,t,n)=>{let r=EX(e,n);if(!r)return!1;let i=kM(r);if(!i){let o=r.blockRange(),a=o&&k6(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(AX(e,i,t,-1))return!0;if(r.parent.content.size==0&&(Qm(s,"end")||lt.isSelectable(s)))for(let o=r.depth;;o--){let a=u7(e.doc,r.before(o),r.after(o),We.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(Qm(s,"end")?Dt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):lt.create(l.doc,i.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},M6e=(e,t,n)=>{let r=EX(e,n);if(!r)return!1;let i=kM(r);return i?SX(e,i,t):!1},T6e=(e,t,n)=>{let r=kX(e,n);if(!r)return!1;let i=CM(r);return i?SX(e,i,t):!1};function SX(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=t.nodeAfter,a=o,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let f=u7(e.doc,s,l,We.empty);if(!f||f.from!=s||f instanceof ii&&f.slice.size>=l-s)return!1;if(n){let c=e.tr.step(f);c.setSelection(kt.create(c.doc,s)),n(c.scrollIntoView())}return!0}function Qm(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const I6e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=kM(r)}let o=s&&s.nodeBefore;return!o||!lt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(lt.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function kM(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function kX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const N6e=(e,t,n)=>{let r=kX(e,n);if(!r)return!1;let i=CM(r);if(!i)return!1;let s=i.nodeAfter;if(AX(e,i,t,1))return!0;if(r.parent.content.size==0&&(Qm(s,"start")||lt.isSelectable(s))){let o=u7(e.doc,r.before(),r.after(),We.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(Qm(s,"start")?Dt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):lt.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},R6e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=CM(r)}let o=s&&s.nodeAfter;return!o||!lt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(lt.create(e.doc,s.pos)).scrollIntoView()),!0)};function CM(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const _6e=(e,t)=>{let n=e.selection,r=n instanceof lt,i;if(r){if(n.node.isTextblock||!L0(e.doc,n.from))return!1;i=n.from}else if(i=d7(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(lt.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},P6e=(e,t)=>{let n=e.selection,r;if(n instanceof lt){if(n.node.isTextblock||!L0(e.doc,n.to))return!1;r=n.to}else if(r=d7(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},D6e=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&k6(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},L6e=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function CX(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const O6e=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=CX(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Dt.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},j6e=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Zo||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=CX(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(kt.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},B6e=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Fp(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&k6(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},F6e=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(lt.create(e.doc,i))),!0)};function $6e(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||L0(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function AX(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&$6e(e,t,n))return!0;let f=!l&&t.parent.canReplace(t.index(),t.index()+1);if(f&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let h=t.pos+s.nodeSize,g=Me.empty;for(let x=o.length-1;x>=0;x--)g=Me.from(o[x].create(null,g));g=Me.from(i.copy(g));let U=e.tr.step(new li(t.pos-1,h,t.pos,h,new We(g,1,0),o.length,!0)),y=U.doc.resolve(h+2*o.length);y.nodeAfter&&y.nodeAfter.type==i.type&&L0(U.doc,y.pos)&&U.join(y.pos),n(U.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&l?null:Dt.findFrom(t,1),d=c&&c.$from.blockRange(c.$to),u=d&&k6(d);if(u!=null&&u>=t.depth)return n&&n(e.tr.lift(d,u).scrollIntoView()),!0;if(f&&Qm(s,"start",!0)&&Qm(i,"end")){let h=i,g=[];for(;g.push(h),!h.isTextblock;)h=h.lastChild;let U=s,y=1;for(;!U.isTextblock;U=U.firstChild)y++;if(h.canReplace(h.childCount,h.childCount,U.content)){if(n){let x=Me.empty;for(let E=g.length-1;E>=0;E--)x=Me.from(g[E].copy(x));let w=e.tr.step(new li(t.pos-g.length,t.pos+s.nodeSize,t.pos+y,t.pos+s.nodeSize-y,new We(x,g.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function MX(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(kt.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const z6e=MX(-1),H6e=MX(1);function V6e(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&EM(o,e,t);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function $L(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,f)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let c=n.doc.resolve(f),d=c.index();i=c.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,e,t)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function W6e(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return G6e(a,o,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function G6e(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=o.resolve(t.start-2);s=new G3(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new G3(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=EM(s,n,r,t);return a?(e&&X6e(e,t,a,i,n),!0):!1}function X6e(e,t,n,r,i){let s=Me.empty;for(let c=n.length-1;c>=0;c--)s=Me.from(n[c].type.create(n[c].attrs,s));e.step(new li(t.start-(r?2:0),t.end,t.start,t.end,new We(s,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==i&&(o=c+1);let a=n.length-o,l=t.start+n.length-(r?2:0),f=t.parent;for(let c=t.startIndex,d=t.endIndex,u=!0;c<d;c++,u=!1)!u&&Fp(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=f.child(c).nodeSize;return e}function K6e(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?Y6e(t,n,e,s):Z6e(t,n,s):!0:!1}}function Y6e(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new li(s-1,o,s,o,new We(Me.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new G3(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=k6(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return L0(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function Z6e(e,t,n){let r=e.tr,i=n.parent;for(let h=n.end,g=n.endIndex-1,U=n.startIndex;g>U;g--)h-=i.child(g).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,f=s.node(-1),c=s.index(-1);if(!f.canReplace(c+(a?0:1),c+1,o.content.append(l?Me.empty:Me.from(i))))return!1;let d=s.pos,u=d+o.nodeSize;return r.step(new li(d-(a?1:0),u+(l?1:0),d+1,u-1,new We((a?Me.empty:Me.from(i.copy(Me.empty))).append(l?Me.empty:Me.from(i.copy(Me.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function q6e(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=e)return!1;if(n){let f=l.lastChild&&l.lastChild.type==a.type,c=Me.from(f?e.create():null),d=new We(Me.from(e.create(null,Me.from(a.type.create(null,c)))),f?3:1,0),u=s.start,h=s.end;n(t.tr.step(new li(u-(f?3:1),h,u,h,d,1,!0)).scrollIntoView())}return!0}}const xi=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Jm=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Hk=null;const Hc=function(e,t,n){let r=Hk||(Hk=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Q6e=function(){Hk=null},jh=function(e,t,n,r){return n&&(zL(e,t,n,r,-1)||zL(e,t,n,r,1))},J6e=/^(img|br|input|textarea|hr)$/i;function zL(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Xo(e))){let o=e.parentNode;if(!o||o.nodeType!=1||Ib(e)||J6e.test(e.nodeName)||e.contentEditable=="false")return!1;t=xi(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?Xo(e):0}else return!1}}function Xo(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function ege(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Xo(e)}else if(e.parentNode&&!Ib(e))t=xi(e),e=e.parentNode;else return null}}function tge(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Ib(e))t=xi(e)+1,e=e.parentNode;else return null}}function nge(e,t,n){for(let r=t==0,i=t==Xo(e);r||i;){if(e==n)return!0;let s=xi(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==Xo(e)}}function Ib(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const p7=function(e){return e.focusNode&&jh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function wu(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function rge(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function ige(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Xo(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Xo(r.startContainer),r.startOffset)}}}const sc=typeof navigator<"u"?navigator:null,HL=typeof document<"u"?document:null,O0=sc&&sc.userAgent||"",Vk=/Edge\/(\d+)/.exec(O0),TX=/MSIE \d/.exec(O0),Wk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(O0),$s=!!(TX||Wk||Vk),m0=TX?document.documentMode:Wk?+Wk[1]:Vk?+Vk[1]:0,qo=!$s&&/gecko\/(\d+)/i.test(O0);qo&&+(/Firefox\/(\d+)/.exec(O0)||[0,0])[1];const Gk=!$s&&/Chrome\/(\d+)/.exec(O0),wi=!!Gk,IX=Gk?+Gk[1]:0,Ki=!$s&&!!sc&&/Apple Computer/.test(sc.vendor),e6=Ki&&(/Mobile\/\w+/.test(O0)||!!sc&&sc.maxTouchPoints>2),Vo=e6||(sc?/Mac/.test(sc.platform):!1),NX=sc?/Win/.test(sc.platform):!1,pf=/Android \d/.test(O0),Nb=!!HL&&"webkitFontSmoothing"in HL.documentElement.style,sge=Nb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function oge(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function _c(e,t){return typeof e=="number"?e:e[t]}function age(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function VL(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=Jm(o);continue}let a=o,l=a==s.body,f=l?oge(s):age(a),c=0,d=0;if(t.top<f.top+_c(r,"top")?d=-(f.top-t.top+_c(i,"top")):t.bottom>f.bottom-_c(r,"bottom")&&(d=t.bottom-t.top>f.bottom-f.top?t.top+_c(i,"top")-f.top:t.bottom-f.bottom+_c(i,"bottom")),t.left<f.left+_c(r,"left")?c=-(f.left-t.left+_c(i,"left")):t.right>f.right-_c(r,"right")&&(c=t.right-f.right+_c(i,"right")),c||d)if(l)s.defaultView.scrollBy(c,d);else{let h=a.scrollLeft,g=a.scrollTop;d&&(a.scrollTop+=d),c&&(a.scrollLeft+=c);let U=a.scrollLeft-h,y=a.scrollTop-g;t={left:t.left-U,top:t.top-y,right:t.right-U,bottom:t.bottom-y}}let u=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(u))break;o=u=="absolute"?o.offsetParent:Jm(o)}}function lge(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=e.root.elementFromPoint(s,o);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:RX(e.dom)}}function RX(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Jm(r));return t}function cge({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;_X(n,r==0?0:r-t)}function _X(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let V1=null;function fge(e){if(e.setActive)return e.setActive();if(V1)return e.focus(V1);let t=RX(e);e.focus(V1==null?{get preventScroll(){return V1={preventScroll:!0},!0}}:void 0),V1||(V1=!1,_X(t,0))}function PX(e,t){let n,r=2e8,i,s=0,o=t.top,a=t.top,l,f;for(let c=e.firstChild,d=0;c;c=c.nextSibling,d++){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=Hc(c).getClientRects();else continue;for(let h=0;h<u.length;h++){let g=u[h];if(g.top<=o&&g.bottom>=a){o=Math.max(g.bottom,o),a=Math.min(g.top,a);let U=g.left>t.left?g.left-t.left:g.right<t.left?t.left-g.right:0;if(U<r){n=c,r=U,i=U&&n.nodeType==3?{left:g.right<t.left?g.right:g.left,top:t.top}:t,c.nodeType==1&&U&&(s=d+(t.left>=(g.left+g.right)/2?1:0));continue}}else g.top>t.top&&!l&&g.left<=t.left&&g.right>=t.left&&(l=c,f={left:Math.max(g.left,Math.min(g.right,t.left)),top:g.top});!n&&(t.left>=g.right&&t.top>=g.top||t.left>=g.left&&t.top>=g.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=f,r=0),n&&n.nodeType==3?dge(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:PX(n,i)}function dge(e,t){let n=e.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let o=Sd(r,1);if(o.top!=o.bottom&&AM(t,o)){i={node:e,offset:s+(t.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:e,offset:0}}function AM(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function uge(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function hge(e,t,n){let{node:r,offset:i}=PX(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function pge(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let a=e.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function DX(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let f=a[l];if(AM(t,f))return DX(o,t,f)}}if((s=(s+1)%r)==i)break}return e}function mge(e,t){let n=e.dom.ownerDocument,r,i=0,s=ige(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let f=e.dom.getBoundingClientRect();if(!AM(t,f)||(o=DX(e.dom,t,f),!o))return null}if(Ki)for(let f=o;r&&f;f=Jm(f))f.draggable&&(r=void 0);if(o=uge(o,t),r){if(qo&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let f;Nb&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=pge(e,r,i,t))}a==null&&(a=hge(e,o,t));let l=e.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function WL(e){return e.top<e.bottom||e.left<e.right}function Sd(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(WL(r))return r}return Array.prototype.find.call(n,WL)||e.getBoundingClientRect()}const gge=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function LX(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=Nb||qo;if(r.nodeType==3)if(o&&(gge.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Sd(Hc(r,i,i),n);if(qo&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=Sd(Hc(r,i-1,i-1),-1);if(f.top==l.top){let c=Sd(Hc(r,i,i+1),-1);if(c.top!=l.top)return Ag(c,c.left<f.left)}}return l}else{let l=i,f=i,c=n<0?1:-1;return n<0&&!i?(f++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:f++,Ag(Sd(Hc(r,l,f),c),c<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Xo(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return qw(l.getBoundingClientRect(),!1)}if(s==null&&i<Xo(r)){let l=r.childNodes[i];if(l.nodeType==1)return qw(l.getBoundingClientRect(),!0)}return qw(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Xo(r))){let l=r.childNodes[i-1],f=l.nodeType==3?Hc(l,Xo(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(f)return Ag(Sd(f,1),!1)}if(s==null&&i<Xo(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let f=l?l.nodeType==3?Hc(l,0,o?0:1):l.nodeType==1?l:null:null;if(f)return Ag(Sd(f,-1),!0)}return Ag(Sd(r.nodeType==3?Hc(r):r,-n),n>=0)}function Ag(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function qw(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function OX(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function bge(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return OX(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=LX(e,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Hc(a,0,a.nodeValue.length).getClientRects();else continue;for(let f=0;f<l.length;f++){let c=l[f];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const Uge=/[\u0590-\u08ac]/;function yge(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=e.domSelection();return a?!Uge.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:OX(e,t,()=>{let{focusNode:l,focusOffset:f,anchorNode:c,anchorOffset:d}=e.domSelectionRange(),u=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:g,focusOffset:U}=e.domSelectionRange(),y=g&&!h.contains(g.nodeType==1?g:g.parentNode)||l==g&&f==U;try{a.collapse(c,d),l&&(l!=c||f!=d)&&a.extend&&a.extend(l,f)}catch{}return u!=null&&(a.caretBidiLevel=u),y}):r.pos==r.start()||r.pos==r.end()}let GL=null,XL=null,KL=!1;function xge(e,t,n){return GL==t&&XL==n?KL:(GL=t,XL=n,KL=n=="up"||n=="down"?bge(e,t,n):yge(e,t,n))}const Qo=0,YL=1,Pu=2,oc=3;class Rb{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Qo,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>xi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>t||o instanceof BX){i=t-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof jX&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?xi(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?xi(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],f=o+l.size;if(i==-1&&t<=f){let c=o+l.border;if(t>=c&&n<=f-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,c);t=o;for(let d=a;d>0;d--){let u=this.children[d-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){i=xi(u.dom)+1;break}t-=u.size}i==-1&&(i=0)}if(i>-1&&(f>n||a==this.children.length-1)){n=f;for(let c=a+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=xi(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=f}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let h=0,g=0;h<this.children.length;h++){let U=this.children[h],y=g+U.size;if(s>g&&o<y)return U.setSelection(t-g-U.border,n-g-U.border,r,i);g=y}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((qo||Ki)&&t==n){let{node:h,offset:g}=a;if(h.nodeType==3){if(d=!!(g&&h.nodeValue[g-1]==`
`),d&&g==h.nodeValue.length)for(let U=h,y;U;U=U.parentNode){if(y=U.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:xi(y)+1});break}let x=U.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let U=h.childNodes[g-1];d=U&&(U.nodeName=="BR"||U.contentEditable=="false")}}if(qo&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&Ki)&&jh(a.node,a.offset,c.anchorNode,c.anchorOffset)&&jh(l.node,l.offset,c.focusNode,c.focusOffset))return;let u=!1;if((f.extend||t==n)&&!(d&&qo)){f.collapse(a.node,a.offset);try{t!=n&&f.extend(l.node,l.offset),u=!0}catch{}}if(!u){if(t>n){let g=a;a=l,l=g}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let a=r+s.border,l=o-s.border;if(t>=a&&n<=l){this.dirty=t==r||n==o?Pu:YL,t==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=oc:s.markDirty(t-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Pu:oc}r=o}this.dirty=Pu}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Pu:YL;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class jX extends Rb{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Qo&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class vge extends Rb{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Bh extends Rb{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=s1.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Bh(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&oc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=oc&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Qo){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qo}}slice(t,n,r){let i=Bh.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Kk(s,n,o,r)),t>0&&(s=Kk(s,0,t,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class g0 extends Rb{constructor(t,n,r,i,s,o,a,l,f){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(t,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,f=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=f&&f.dom,d=f&&f.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=s1.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let u=c;return c=zX(c,r,n),f?l=new wge(t,n,r,i,c,d||null,u,f,s,o+1):n.isText?new m7(t,n,r,i,c,u,s):new g0(t,n,r,i,c,d||null,u,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Me.empty)}return t}matchesNode(t,n,r){return this.dirty==Qo&&t.eq(this.node)&&K3(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Sge(this,o&&o.node,t);Age(this.node,this.innerDeco,(f,c,d)=>{f.spec.marks?l.syncToMarks(f.spec.marks,r,t,c):f.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?vn.none:this.node.child(c).marks,r,t,c),l.placeWidget(f,t,i)},(f,c,d,u)=>{l.syncToMarks(f.marks,r,t,u);let h;l.findNodeMatch(f,c,d,u)||a&&t.state.selection.from>i&&t.state.selection.to<i+f.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(f,c,d,h,t)||l.updateNextNode(f,c,d,t,u,i)||l.addNode(f,c,d,t,i),i+=f.nodeSize}),l.syncToMarks([],r,t,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Pu)&&(o&&this.protectLocalComposition(t,o),FX(this.contentDOM,this.children,t),e6&&Mge(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof kt)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=Tge(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new vge(this,s,n,i);t.input.compositionNodes.push(o),this.children=Kk(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==oc||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Qo}updateOuterDeco(t){if(K3(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=$X(this.dom,this.nodeDOM,Xk(this.outerDeco,this.node,n),Xk(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ZL(e,t,n,r,i){zX(r,t,e);let s=new g0(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class m7 extends g0{constructor(t,n,r,i,s,o,a){super(t,n,r,i,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==oc||this.dirty!=Qo&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Qo||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Qo,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new m7(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=oc)}get domAtom(){return!1}isText(t){return this.node.text==t}}class BX extends Rb{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Qo&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class wge extends g0{constructor(t,n,r,i,s,o,a,l,f,c){super(t,n,r,i,s,o,a,f,c),this.spec=l}update(t,n,r,i){if(this.dirty==oc)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function FX(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=r;)r=qL(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(o instanceof Bh){let l=r?r.previousSibling:e.lastChild;FX(o.contentDOM,o.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=qL(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const C5=function(e){e&&(this.nodeName=e)};C5.prototype=Object.create(null);const Du=[new C5];function Xk(e,t,n){if(e.length==0)return Du;let r=n?Du[0]:new C5,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new C5(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new C5(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function $X(e,t,n,r){if(n==Du&&r==Du)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Du[0]),i=l}Ege(i,a||Du[0],o)}return i}function Ege(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function zX(e,t,n){return $X(e,e,Du,Xk(t,n,e.nodeType!=1))}function K3(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function qL(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Sge{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=kge(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r,i){let s=0,o=this.stack.length>>1,a=Math.min(o,t.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Qo,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let l=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let c=this.index;c<f;c++){let d=this.top.children[c];if(d.matchesMark(t[o])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=Bh.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let f=this.top.children[a];if(f.matchesNode(t,n,r)&&!this.preMatch.matched.has(f)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==oc&&o.dom==o.contentDOM&&(o.dirty=Pu),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof g0){let f=this.preMatch.matched.get(l);if(f!=null&&f!=s)return!1;let c=l.dom,d,u=this.isLocked(c)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=oc&&K3(n,l.outerDeco));if(!u&&l.update(t,n,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!u&&(d=this.recreateWrapper(l,t,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Pu,d.updateChildren(i,o+1),d.dirty=Qo),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!K3(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let a=g0.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,i,s){let o=g0.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new jX(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Bh;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof m7)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Ki||wi)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new BX(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function kge(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let f=n.children[r-1];if(f instanceof Bh)n=f,r=f.children.length;else{a=f,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function Cge(e,t){return e.type.side-t.type.side}function Age(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let f=0;f<e.childCount;f++){let c=e.child(f);r(c,i,t.forChild(s,c),f),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let f=0;;){let c,d;for(;o<i.length&&i[o].to==s;){let y=i[o++];y.widget&&(c?(d||(d=[c])).push(y):c=y)}if(c)if(d){d.sort(Cge);for(let y=0;y<d.length;y++)n(d[y],f,!!l)}else n(c,f,!!l);let u,h;if(l)h=-1,u=l,l=null;else if(f<e.childCount)h=f,u=e.child(f++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let g=s+u.nodeSize;if(u.isText){let y=g;o<i.length&&i[o].from<y&&(y=i[o].from);for(let x=0;x<a.length;x++)a[x].to<y&&(y=a[x].to);y<g&&(l=u.cut(y-s),u=u.cut(0,y-s),g=y,h=-1)}else for(;o<i.length&&i[o].to<g;)o++;let U=u.isInline&&!u.isLeaf?a.filter(y=>!y.inline):a.slice();r(u,U,t.forChild(s,u),h),s=g}}function Mge(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Tge(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let f=e.child(i++);if(s+=f.nodeSize,!f.isText)break;l+=f.text}if(s>=n){if(s>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let f=a<r?l.lastIndexOf(t,r-a-1):-1;if(f>=0&&f+t.length+a>=n)return a+f;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function Kk(e,t,n,r,i){let s=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],f=a,c=a+=l.size;f>=n||c<=t?s.push(l):(f<t&&s.push(l.slice(0,t-f,r)),i&&(s.push(i),i=void 0),c>n&&s.push(l.slice(n-f,l.size,r)))}return s}function MM(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,f;if(p7(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&lt.isSelectable(d)&&i.parent&&!(d.isInline&&nge(n.focusNode,n.focusOffset,i.dom))){let u=i.posBefore;f=new lt(o==u?a:r.resolve(u))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,u=o;for(let h=0;h<n.rangeCount;h++){let g=n.getRangeAt(h);d=Math.min(d,e.docView.posFromDOM(g.startContainer,g.startOffset,1)),u=Math.max(u,e.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[l,o]=u==e.state.selection.anchor?[u,d]:[d,u],a=r.resolve(o)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!f){let d=t=="pointer"||e.state.selection.head<a.pos&&!s?1:-1;f=TM(e,c,a,d)}return f}function HX(e){return e.editable?e.hasFocus():WX(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function xf(e,t=!1){let n=e.state.selection;if(VX(e,n),!!HX(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&wi){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&jh(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Nge(e);else{let{anchor:r,head:i}=n,s,o;QL&&!(n instanceof kt)&&(n.$from.parent.inlineContent||(s=JL(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=JL(e,n.to))),e.docView.setSelection(r,i,e,t),QL&&(s&&eO(s),o&&eO(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Ige(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const QL=Ki||wi&&IX<63;function JL(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ki&&i&&i.contentEditable=="false")return Qw(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Qw(i);if(s)return Qw(s)}}function Qw(e){return e.contentEditable="true",Ki&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function eO(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ige(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!HX(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Nge(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,xi(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&$s&&m0<=11&&(n.disabled=!0,n.disabled=!1)}function VX(e,t){if(t instanceof lt){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(tO(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else tO(e)}function tO(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function TM(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||kt.between(t,n,r)}function nO(e){return e.editable&&!e.hasFocus()?!1:WX(e)}function WX(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Rge(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return jh(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Yk(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Dt.findFrom(s,t)}function Id(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function rO(e,t,n){let r=e.state.selection;if(r instanceof kt)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Id(e,new kt(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=Yk(e.state,t);return i&&i instanceof lt?Id(e,i):!1}else if(!(Vo&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(a))&&!o.contentDOM?lt.isSelectable(s)?Id(e,new lt(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):Nb?Id(e,new kt(e.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof lt&&r.node.isInline)return Id(e,new kt(t>0?r.$to:r.$from));{let i=Yk(e.state,t);return i?Id(e,i):!1}}}function Y3(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function A5(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function W1(e,t){return t<0?_ge(e):Pge(e)}function _ge(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(qo&&n.nodeType==1&&r<Y3(n)&&A5(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(A5(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(GX(n))break;{let a=n.previousSibling;for(;a&&A5(a,-1);)i=n.parentNode,s=xi(a),a=a.previousSibling;if(a)n=a,r=Y3(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?Zk(e,n,r):i&&Zk(e,i,s)}function Pge(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Y3(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(A5(a,1))s=n,o=++r;else break}else{if(GX(n))break;{let a=n.nextSibling;for(;a&&A5(a,1);)s=a.parentNode,o=xi(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Y3(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&Zk(e,s,o)}function GX(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Dge(e,t){for(;e&&t==e.childNodes.length&&!Ib(e);)t=xi(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function Lge(e,t){for(;e&&!t&&!Ib(e);)t=xi(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function Zk(e,t,n){if(t.nodeType!=3){let s,o;(o=Dge(t,n))?(t=o,n=0):(s=Lge(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(p7(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&xf(e)},50)}function iO(e,t){let n=e.state.doc.resolve(t);if(!(wi||NX)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function sO(e,t,n){let r=e.state.selection;if(r instanceof kt&&!r.empty||n.indexOf("s")>-1||Vo&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=Yk(e.state,t);if(o&&o instanceof lt)return Id(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,a=r instanceof Zo?Dt.near(o,t):Dt.findFrom(o,t);return a?Id(e,a):!1}return!1}function oO(e,t){if(!(e.state.selection instanceof kt))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function aO(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Oge(e){if(!Ki||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;aO(e,r,"true"),setTimeout(()=>aO(e,r,"false"),20)}return!1}function jge(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Bge(e,t){let n=t.keyCode,r=jge(t);if(n==8||Vo&&n==72&&r=="c")return oO(e,-1)||W1(e,-1);if(n==46&&!t.shiftKey||Vo&&n==68&&r=="c")return oO(e,1)||W1(e,1);if(n==13||n==27)return!0;if(n==37||Vo&&n==66&&r=="c"){let i=n==37?iO(e,e.state.selection.from)=="ltr"?-1:1:-1;return rO(e,i,r)||W1(e,i)}else if(n==39||Vo&&n==70&&r=="c"){let i=n==39?iO(e,e.state.selection.from)=="ltr"?1:-1:1;return rO(e,i,r)||W1(e,i)}else{if(n==38||Vo&&n==80&&r=="c")return sO(e,-1,r)||W1(e,-1);if(n==40||Vo&&n==78&&r=="c")return Oge(e)||sO(e,1,r)||W1(e,1);if(r==(Vo?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function IM(e,t){e.someProp("transformCopied",h=>{t=h(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=e.someProp("clipboardSerializer")||s1.fromSchema(e.state.schema),a=QX(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let f=l.firstChild,c,d=0;for(;f&&f.nodeType==1&&(c=qX[f.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let g=a.createElement(c[h]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),d++}f=l.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let u=e.someProp("clipboardTextSerializer",h=>h(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:u,slice:t}}function XX(e,t,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!t)return null;let l=!!t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",u=>{t=u(t,s||r,e)}),s)return a=new We(Me.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",u=>{a=u(a,e,!0)}),a;let d=e.someProp("clipboardTextParser",u=>u(t,i,r,e));if(d)a=d;else{let u=i.marks(),{schema:h}=e.state,g=s1.fromSchema(h);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(U=>{let y=o.appendChild(document.createElement("p"));U&&y.appendChild(g.serializeNode(h.text(U,u)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),o=Hge(n),Nb&&Vge(o);let f=o&&o.querySelector("[data-pm-slice]"),c=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let u=o.firstChild;for(;u&&u.nodeType!=1;)u=u.nextSibling;if(!u)break;o=u}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||S5.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(u){return u.nodeName=="BR"&&!u.nextSibling&&u.parentNode&&!Fge.test(u.parentNode.nodeName)?{ignore:!0}:null}})),c)a=Wge(lO(a,+c[1],+c[2]),c[4]);else if(a=We.maxOpen($ge(a.content,i),!0),a.openStart||a.openEnd){let d=0,u=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;u<a.openEnd&&!h.type.spec.isolating;u++,h=h.lastChild);a=lO(a,d,u)}return e.someProp("transformPasted",d=>{a=d(a,e,l)}),a}const Fge=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $ge(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),f;if(!l)return o=null;if(f=o.length&&s.length&&YX(l,s,a,o[o.length-1],0))o[o.length-1]=f;else{o.length&&(o[o.length-1]=ZX(o[o.length-1],s.length));let c=KX(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return Me.from(o)}return e}function KX(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Me.from(e));return e}function YX(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=YX(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(Me.from(KX(n,e,i+1))))}}function ZX(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,ZX(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Me.empty,!0);return e.copy(n.append(r))}function qk(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(s=0),i<r-1&&(a=qk(a,t,n,r,i+1,s)),i>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Me.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function lO(e,t,n){return t<e.openStart&&(e=new We(qk(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new We(qk(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const qX={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let cO=null;function QX(){return cO||(cO=document.implementation.createHTMLDocument("title"))}let Jw=null;function zge(e){let t=window.trustedTypes;return t?(Jw||(Jw=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Jw.createHTML(e)):e}function Hge(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=QX().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&qX[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=zge(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Vge(e){let t=e.querySelectorAll(wi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Wge(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Me.from(l.create(r[a+1],i)),s++,o++}return new We(i,s,o)}const us={},hs={},Gge={touchstart:!0,touchmove:!0};class Xge{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Kge(e){for(let t in us){let n=us[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{Zge(e,r)&&!NM(e,r)&&(e.editable||!(r.type in hs))&&n(e,r)},Gge[t]?{passive:!0}:void 0)}Ki&&e.dom.addEventListener("input",()=>null),Qk(e)}function o0(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Yge(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function Qk(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>NM(e,r))})}function NM(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function Zge(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function qge(e,t){!NM(e,t)&&us[t.type]&&(e.editable||!(t.type in hs))&&us[t.type](e,t)}hs.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!eK(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(pf&&wi&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),e6&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,wu(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||Bge(e,n)?n.preventDefault():o0(e,"key")};hs.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};hs.keypress=(e,t)=>{let n=t;if(eK(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Vo&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof kt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function g7(e){return{left:e.clientX,top:e.clientY}}function Qge(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function RM(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,a=>o>s.depth?a(e,n,s.nodeAfter,s.before(o),i,!0):a(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function zp(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function Jge(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&lt.isSelectable(r)?(zp(e,new lt(n)),!0):!1}function e5e(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof lt&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(lt.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(zp(e,lt.create(e.state.doc,i)),!0):!1}function t5e(e,t,n,r,i){return RM(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?e5e(e,n):Jge(e,n))}function n5e(e,t,n,r){return RM(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function r5e(e,t,n,r){return RM(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||i5e(e,n,r)}function i5e(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(zp(e,kt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)zp(e,kt.create(r,a+1,a+1+o.content.size));else if(lt.isSelectable(o))zp(e,lt.create(r,a));else continue;return!0}}function _M(e){return Z3(e)}const JX=Vo?"metaKey":"ctrlKey";us.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=_M(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&Qge(n,e.input.lastClick)&&!n[JX]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(g7(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new s5e(e,o,n,!!r)):(s=="doubleClick"?n5e:r5e)(e,o.pos,o.inside,n)?n.preventDefault():o0(e,"pointer"))};class s5e{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[JX],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let c=t.state.doc.resolve(n.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:f}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof lt&&f.from<=o&&f.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),o0(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xf(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(g7(t))),this.updateAllowDefault(t),this.allowDefault||!n?o0(this.view,"pointer"):t5e(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Ki&&this.mightDrag&&!this.mightDrag.node.isAtom||wi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(zp(this.view,Dt.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):o0(this.view,"pointer")}move(t){this.updateAllowDefault(t),o0(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}us.touchstart=e=>{e.input.lastTouch=Date.now(),_M(e),o0(e,"pointer")};us.touchmove=e=>{e.input.lastTouch=Date.now(),o0(e,"pointer")};us.contextmenu=e=>_M(e);function eK(e,t){return e.composing?!0:Ki&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const o5e=pf?5e3:-1;hs.compositionstart=hs.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof kt&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||wi&&NX&&a5e(e)))e.markCursor=e.state.storedMarks||n.marks(),Z3(e,!0),e.markCursor=null;else if(Z3(e,!t.selection.empty),qo&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=e.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}tK(e,o5e)};function a5e(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}hs.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.badSafariComposition?e.domObserver.forceFlush():e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,tK(e,20))};function tK(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Z3(e),t))}function nK(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=c5e());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function l5e(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=ege(t.focusNode,t.focusOffset),r=tge(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function c5e(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Z3(e,t=!1){if(!(pf&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),nK(e),t||e.docView&&e.docView.dirty){let n=MM(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function f5e(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const w2=$s&&m0<15||e6&&sge<604;us.copy=hs.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=w2?null:n.clipboardData,o=r.content(),{dom:a,text:l}=IM(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):f5e(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function d5e(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function u5e(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?E2(e,r.value,null,i,t):E2(e,r.textContent,r.innerHTML,i,t)},50)}function E2(e,t,n,r,i){let s=XX(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,s||We.empty)))return!0;if(!s)return!1;let o=d5e(s),a=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function rK(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}hs.paste=(e,t)=>{let n=t;if(e.composing&&!pf)return;let r=w2?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&E2(e,rK(r),r.getData("text/html"),i,n)?n.preventDefault():u5e(e,n)};class iK{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const h5e=Vo?"altKey":"ctrlKey";function sK(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[h5e]}us.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(g7(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof lt?i.to-1:i.to))){if(r&&r.mightDrag)o=lt.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(o=lt.create(e.state.doc,d.posBefore))}}let a=(o||e.state.selection).content(),{dom:l,text:f,slice:c}=IM(e,a);(!n.dataTransfer.files.length||!wi||IX>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(w2?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",w2||n.dataTransfer.setData("text/plain",f),e.dragging=new iK(c,sK(e,n),o)};us.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};hs.dragover=hs.dragenter=(e,t)=>t.preventDefault();hs.drop=(e,t)=>{try{p5e(e,t,e.dragging)}finally{e.dragging=null}};function p5e(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(g7(t));if(!r)return;let i=e.state.doc.resolve(r.pos),s=n&&n.slice;s?e.someProp("transformPasted",h=>{s=h(s,e,!1)}):s=XX(e,rK(t.dataTransfer),w2?null:t.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&sK(e,t));if(e.someProp("handleDrop",h=>h(e,t,s||We.empty,o))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?mX(e.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=e.state.tr;if(o){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let f=l.mapping.map(a),c=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=l.doc;if(c?l.replaceRangeWith(f,f,s.content.firstChild):l.replaceRange(f,f,s),l.doc.eq(d))return;let u=l.doc.resolve(f);if(c&&lt.isSelectable(s.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new lt(u));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((g,U,y,x)=>h=x),l.setSelection(TM(e,u,l.doc.resolve(h)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}us.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&xf(e)},20))};us.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};us.beforeinput=(e,t)=>{if(wi&&pf&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,wu(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in hs)us[e]=hs[e];function S2(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class q3{constructor(t,n){this.toDOM=t,this.spec=n||bh,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new ds(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof q3&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&S2(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class b0{constructor(t,n){this.attrs=t,this.spec=n||bh}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new ds(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof b0&&S2(this.attrs,t.attrs)&&S2(this.spec,t.spec)}static is(t){return t.type instanceof b0}destroy(){}}class PM{constructor(t,n){this.attrs=t,this.spec=n||bh}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new ds(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof PM&&S2(this.attrs,t.attrs)&&S2(this.spec,t.spec)}destroy(){}}class ds{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new ds(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new ds(t,t,new q3(n,r))}static inline(t,n,r,i){return new ds(t,n,new b0(r,i))}static node(t,n,r,i){return new ds(t,n,new PM(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof b0}get widget(){return this.type instanceof q3}}const cp=[],bh={};class Jn{constructor(t,n){this.local=t.length?t:cp,this.children=n.length?n:cp}static create(t,n){return n.length?Q3(n,t,0,bh):ji}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=t&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,n-a,r,i+a,s)}}map(t,n,r){return this==ji||t.maps.length==0?this:this.mapInner(t,n,0,0,r||bh)}mapInner(t,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?m5e(this.children,o||[],t,n,r,i,s):o?new Jn(o.sort(Uh),cp):ji}add(t,n){return n.length?this==ji?Jn.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((a,l)=>{let f=l+r,c;if(c=aK(n,a,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,f+1):i.splice(s,0,l,l+a.nodeSize,Q3(c,a,f+1,bh)),s+=3}});let o=oK(s?lK(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new Jn(o.length?this.local.concat(o).sort(Uh):this.local,i||this.children)}remove(t){return t.length==0||this==ji?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let c=0,d;c<t.length;c++)(d=t[c])&&d.from>a&&d.to<l&&(t[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(o,a+1);f!=ji?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Jn(i,r):ji}forChild(t,n){if(this==ji)return this;if(n.isLeaf)return Jn.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let s=t+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof b0){let f=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;f<c&&(i||(i=[])).push(l.copy(f,c))}}if(i){let a=new Jn(i.sort(Uh),cp);return r?new Od([a,r]):a}return r||ji}eq(t){if(this==t)return!0;if(!(t instanceof Jn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return DM(this.localsInner(t))}localsInner(t){if(this==ji)return cp;if(t.inlineContent||!this.local.some(b0.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof b0||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Jn.empty=new Jn([],[]);Jn.removeOverlap=DM;const ji=Jn.empty;class Od{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,bh));return Od.from(r)}forChild(t,n){if(n.isLeaf)return Jn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=ji&&(s instanceof Od?r=r.concat(s.members):r.push(s))}return Od.from(r)}eq(t){if(!(t instanceof Od)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?DM(r?n:n.sort(Uh)):cp}static from(t){switch(t.length){case 0:return ji;case 1:return t[0];default:return new Od(t.every(n=>n instanceof Jn)?t:t.reduce((n,r)=>n.concat(r instanceof Jn?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function m5e(e,t,n,r,i,s,o){let a=e.slice();for(let f=0,c=s;f<n.maps.length;f++){let d=0;n.maps[f].forEach((u,h,g,U)=>{let y=U-g-(h-u);for(let x=0;x<a.length;x+=3){let w=a[x+1];if(w<0||u>w+c-d)continue;let E=a[x]+c-d;h>=E?a[x+1]=u<=E?-2:-1:u>=c&&y&&(a[x]+=y,a[x+1]+=y)}d+=y}),c=n.maps[f].map(c,-1)}let l=!1;for(let f=0;f<a.length;f+=3)if(a[f+1]<0){if(a[f+1]==-2){l=!0,a[f+1]=-1;continue}let c=n.map(e[f]+s),d=c-i;if(d<0||d>=r.content.size){l=!0;continue}let u=n.map(e[f+1]+s,-1),h=u-i,{index:g,offset:U}=r.content.findIndex(d),y=r.maybeChild(g);if(y&&U==d&&U+y.nodeSize==h){let x=a[f+2].mapInner(n,y,c+1,e[f]+s+1,o);x!=ji?(a[f]=d,a[f+1]=h,a[f+2]=x):(a[f+1]=-2,l=!0)}else l=!0}if(l){let f=g5e(a,e,t,n,i,s,o),c=Q3(f,r,0,o);t=c.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,u=0;d<c.children.length;d+=3){let h=c.children[d];for(;u<a.length&&a[u]<h;)u+=3;a.splice(u,0,c.children[d],c.children[d+1],c.children[d+2])}}return new Jn(t.sort(Uh),a)}function oK(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new ds(i.from+t,i.to+t,i.type))}return n}function g5e(e,t,n,r,i,s,o){function a(l,f){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(r,i,f);d?n.push(d):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+f+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+s+1);return n}function aK(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function lK(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Q3(e,t,n,r){let i=[],s=!1;t.forEach((a,l)=>{let f=aK(e,a,l+n);if(f){s=!0;let c=Q3(f,a,n+l+1,r);c!=ji&&i.push(l,l+a.nodeSize,c)}});let o=oK(s?lK(e):e,-n).sort(Uh);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Jn(o,i):ji}function Uh(e,t){return e.from-t.from||e.to-t.to}function DM(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),fO(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),fO(t,i,r.copy(s.from,r.to)));break}}}return t}function fO(e,t,n){for(;t<e.length&&Uh(n,e[t])>0;)t++;e.splice(t,0,n)}function eE(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ji&&t.push(r)}),e.cursorWrapper&&t.push(Jn.create(e.state.doc,[e.cursorWrapper.deco])),Od.from(t)}const b5e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},U5e=$s&&m0<=11;class y5e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class x5e{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new y5e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);$s&&m0<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Ki&&t.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(t.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),U5e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,b5e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(nO(this.view)){if(this.suppressingSelectionUpdates)return xf(this.view);if($s&&m0<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&jh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Jm(s))n.add(s);for(let s=t.anchorNode;s;s=Jm(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&nO(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(l.some(c=>c.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let c of l)if(c.nodeName=="BR"&&c.parentNode){let d=c.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&c.parentNode.removeChild(c)}}else if(qo&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,u]=c;d.parentNode&&d.parentNode.parentNode==u.parentNode?u.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let u of c){let h=u.parentNode;h&&h.nodeName=="LI"&&(!d||E5e(t,d)!=h)&&u.remove()}}}let f=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&p7(r)&&(f=MM(t))&&f.eq(Dt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,xf(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),v5e(t)),t.input.badSafariComposition&&(t.input.badSafariComposition=!1,S5e(t,l)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||xf(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++){let d=t.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if($s&&m0<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:d,nextSibling:u}=t.addedNodes[c];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(s=u)}let o=i&&i.parentNode==t.target?xi(i)+1:0,a=r.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?xi(s):t.target.childNodes.length,f=r.localPosFromDOM(t.target,l,1);return{from:a,to:f}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let dO=new WeakMap,uO=!1;function v5e(e){if(!dO.has(e)&&(dO.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=qo,uO)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),uO=!0}}function hO(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return jh(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function w5e(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return hO(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?hO(e,n):null}function E5e(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function S5e(e,t){var n;let{focusNode:r,focusOffset:i}=e.domSelectionRange();for(let s of t)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(s,a.firstChild),r==s&&e.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function k5e(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),f,c=l.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(f=[{node:c,offset:l.anchorOffset}],p7(l)||f.push({node:l.focusNode,offset:l.focusOffset})),wi&&e.input.lastKeyCode===8)for(let y=s;y>i;y--){let x=r.childNodes[y-1],w=x.pmViewDesc;if(x.nodeName=="BR"&&!w){s=y;break}if(!w||w.size)break}let d=e.state.doc,u=e.someProp("domParser")||S5.fromSchema(e.state.schema),h=d.resolve(o),g=null,U=u.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:C5e,context:h});if(f&&f[0].pos!=null){let y=f[0].pos,x=f[1]&&f[1].pos;x==null&&(x=y),g={anchor:y+o,head:x+o}}return{doc:U,sel:g,from:o,to:a}}function C5e(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Ki&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Ki&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const A5e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function M5e(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let C=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,T=MM(e,C);if(T&&!e.state.selection.eq(T)){if(wi&&pf&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",P=>P(e,wu(13,"Enter"))))return;let R=e.state.tr.setSelection(T);C=="pointer"?R.setMeta("pointer",!0):C=="key"&&R.scrollIntoView(),s&&R.setMeta("composition",s),e.dispatch(R)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(n);t=o.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,f=k5e(e,t,n),c=e.state.doc,d=c.slice(f.from,f.to),u,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(u=e.state.selection.to,h="end"):(u=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let g=N5e(d.content,f.doc.content,f.from,u,h);if(g&&e.input.domChangeCount++,(e6&&e.input.lastIOSEnter>Date.now()-225||pf)&&i.some(C=>C.nodeType==1&&!A5e.test(C.nodeName))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",C=>C(e,wu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!g)if(r&&l instanceof kt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(f.sel){let C=pO(e,e.state.doc,f.sel);if(C&&!C.eq(e.state.selection)){let T=e.state.tr.setSelection(C);s&&T.setMeta("composition",s),e.dispatch(T)}}return}e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof kt&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=f.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=f.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),$s&&m0<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>f.from&&f.doc.textBetween(g.start-f.from-1,g.start-f.from+1)==" "&&(g.start--,g.endA--,g.endB--);let U=f.doc.resolveNoCache(g.start-f.from),y=f.doc.resolveNoCache(g.endB-f.from),x=c.resolve(g.start),w=U.sameParent(y)&&U.parent.inlineContent&&x.end()>=g.endA;if((e6&&e.input.lastIOSEnter>Date.now()-225&&(!w||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!w&&U.pos<f.doc.content.size&&(!U.sameParent(y)||!U.parent.inlineContent)&&U.pos<y.pos&&!/\S/.test(f.doc.textBetween(U.pos,y.pos,"","")))&&e.someProp("handleKeyDown",C=>C(e,wu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>g.start&&I5e(c,g.start,g.endA,U,y)&&e.someProp("handleKeyDown",C=>C(e,wu(8,"Backspace")))){pf&&wi&&e.domObserver.suppressSelectionUpdates();return}wi&&g.endB==g.start&&(e.input.lastChromeDelete=Date.now()),pf&&!w&&U.start()!=y.start()&&y.parentOffset==0&&U.depth==y.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==g.endA&&(g.endB-=2,y=f.doc.resolveNoCache(g.endB-f.from),setTimeout(()=>{e.someProp("handleKeyDown",function(C){return C(e,wu(13,"Enter"))})},20));let E=g.start,S=g.endA,A=C=>{let T=C||e.state.tr.replace(E,S,f.doc.slice(g.start-f.from,g.endB-f.from));if(f.sel){let R=pO(e,T.doc,f.sel);R&&!(wi&&e.composing&&R.empty&&(g.start!=g.endB||e.input.lastChromeDelete<Date.now()-100)&&(R.head==E||R.head==T.mapping.map(S)-1)||$s&&R.empty&&R.head==E)&&T.setSelection(R)}return s&&T.setMeta("composition",s),T.scrollIntoView()},M;if(w)if(U.pos==y.pos){$s&&m0<=11&&U.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>xf(e),20));let C=A(e.state.tr.delete(E,S)),T=c.resolve(g.start).marksAcross(c.resolve(g.endA));T&&C.ensureMarks(T),e.dispatch(C)}else if(g.endA==g.endB&&(M=T5e(U.parent.content.cut(U.parentOffset,y.parentOffset),x.parent.content.cut(x.parentOffset,g.endA-x.start())))){let C=A(e.state.tr);M.type=="add"?C.addMark(E,S,M.mark):C.removeMark(E,S,M.mark),e.dispatch(C)}else if(U.parent.child(U.index()).isText&&U.index()==y.index()-(y.textOffset?0:1)){let C=U.parent.textBetween(U.parentOffset,y.parentOffset),T=()=>A(e.state.tr.insertText(C,E,S));e.someProp("handleTextInput",R=>R(e,E,S,C,T))||e.dispatch(T())}else e.dispatch(A());else e.dispatch(A())}function pO(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:TM(e,t.resolve(n.anchor),t.resolve(n.head))}function T5e(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let f=[];for(let c=0;c<t.childCount;c++)f.push(l(t.child(c)));if(Me.from(f).eq(e))return{mark:a,type:o}}function I5e(e,t,n,r,i){if(n-t<=i.pos-r.pos||tE(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(tE(s,!0,!0));return!o.parent.isTextblock||o.pos>n||tE(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function tE(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function N5e(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&e.size<t.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<t.size&&mO(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<e.size&&mO(e.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function mO(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class cK{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Xge,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(xO),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=UO(this),bO(this),this.nodeViews=yO(this),this.docView=ZL(this.state.doc,gO(this),eE(this),this.dom,this),this.domObserver=new x5e(this,(r,i,s,o)=>M5e(this,r,i,s,o)),this.domObserver.start(),Kge(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Qk(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(xO),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(nK(this),o=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=yO(this);_5e(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Qk(this),this.editable=UO(this),bO(this);let l=eE(this),f=gO(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,f,l);(d||!t.selection.eq(i.selection))&&(o=!0);let u=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&lge(this);if(o){this.domObserver.stop();let h=d&&($s||wi)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&R5e(i.selection,t.selection);if(d){let g=wi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=l5e(this)),(s||!this.docView.update(t.doc,f,l,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=ZL(t.doc,f,l,this.dom,this)),g&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Rge(this))?xf(this,h):(VX(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():u&&cge(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof lt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&VL(this,n.getBoundingClientRect(),t)}else VL(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new iK(t.slice,t.move,i<0?void 0:lt.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if($s){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&fge(this.dom),xf(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return mge(this,t)}coordsAtPos(t,n=1){return LX(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return xge(this,n||this.state,t)}pasteHTML(t,n){return E2(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return E2(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return IM(this,t)}destroy(){this.docView&&(Yge(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],eE(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Q6e())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return qge(this,t)}domSelectionRange(){let t=this.domSelection();return t?Ki&&this.root.nodeType===11&&rge(this.dom.ownerDocument)==this.dom&&w5e(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}cK.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function gO(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[ds.node(0,e.state.doc.content.size,t)]}function bO(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:ds.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function UO(e){return!e.someProp("editable",t=>t(e.state)===!1)}function R5e(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function yO(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function _5e(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function xO(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var k0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},J3={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},P5e=typeof navigator<"u"&&/Mac/.test(navigator.platform),D5e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vi=0;vi<10;vi++)k0[48+vi]=k0[96+vi]=String(vi);for(var vi=1;vi<=24;vi++)k0[vi+111]="F"+vi;for(var vi=65;vi<=90;vi++)k0[vi]=String.fromCharCode(vi+32),J3[vi]=String.fromCharCode(vi);for(var nE in k0)J3.hasOwnProperty(nE)||(J3[nE]=k0[nE]);function L5e(e){var t=P5e&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||D5e&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?J3:k0)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const O5e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),j5e=typeof navigator<"u"&&/Win/.test(navigator.platform);function B5e(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))O5e?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function F5e(e){let t=Object.create(null);for(let n in e)t[B5e(n)]=e[n];return t}function rE(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function $5e(e){return new sr({props:{handleKeyDown:fK(e)}})}function fK(e){let t=F5e(e);return function(n,r){let i=L5e(r),s,o=t[rE(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=t[rE(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(j5e&&r.ctrlKey&&r.altKey)&&(s=k0[r.keyCode])&&s!=i){let a=t[rE(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var z5e=Object.defineProperty,LM=(e,t)=>{for(var n in t)z5e(e,n,{get:t[n],enumerable:!0})};function b7(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var U7=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,a])=>[o,(...f)=>{const c=a(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!e,l=e||i.tr,f=()=>(!a&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(n).map(([d,u])=>[d,(...g)=>{const U=this.buildProps(l,t),y=u(...g)(U);return o.push(y),c}])),run:f};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...f)=>l(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:b7({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...f)=>l(...f)(o)]))}};return o}},dK={};LM(dK,{blur:()=>H5e,clearContent:()=>V5e,clearNodes:()=>W5e,command:()=>G5e,createParagraphNear:()=>X5e,cut:()=>K5e,deleteCurrentNode:()=>Y5e,deleteNode:()=>Z5e,deleteRange:()=>q5e,deleteSelection:()=>Q5e,enter:()=>J5e,exitCode:()=>e2e,extendMarkRange:()=>t2e,first:()=>n2e,focus:()=>i2e,forEach:()=>s2e,insertContent:()=>o2e,insertContentAt:()=>c2e,joinBackward:()=>u2e,joinDown:()=>d2e,joinForward:()=>h2e,joinItemBackward:()=>p2e,joinItemForward:()=>m2e,joinTextblockBackward:()=>g2e,joinTextblockForward:()=>b2e,joinUp:()=>f2e,keyboardShortcut:()=>y2e,lift:()=>x2e,liftEmptyBlock:()=>v2e,liftListItem:()=>w2e,newlineInCode:()=>E2e,resetAttributes:()=>S2e,scrollIntoView:()=>k2e,selectAll:()=>C2e,selectNodeBackward:()=>A2e,selectNodeForward:()=>M2e,selectParentNode:()=>T2e,selectTextblockEnd:()=>I2e,selectTextblockStart:()=>N2e,setContent:()=>R2e,setMark:()=>Q2e,setMeta:()=>J2e,setNode:()=>ebe,setNodeSelection:()=>tbe,setTextDirection:()=>nbe,setTextSelection:()=>rbe,sinkListItem:()=>ibe,splitBlock:()=>sbe,splitListItem:()=>obe,toggleList:()=>abe,toggleMark:()=>lbe,toggleNode:()=>cbe,toggleWrap:()=>fbe,undoInputRule:()=>dbe,unsetAllMarks:()=>ube,unsetMark:()=>hbe,unsetTextDirection:()=>pbe,updateAttributes:()=>mbe,wrapIn:()=>gbe,wrapInList:()=>bbe});var H5e=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),V5e=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),W5e=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:f,mapping:c}=t,d=f.resolve(c.map(l)),u=f.resolve(c.map(l+a.nodeSize)),h=d.blockRange(u);if(!h)return;const g=k6(h);if(a.type.isTextblock){const{defaultType:U}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(h.start,U)}(g||g===0)&&t.lift(h,g)})}),!0},G5e=e=>t=>e(t),X5e=()=>({state:e,dispatch:t})=>j6e(e,t),K5e=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new kt(r.doc.resolve(Math.max(o-1,0)))),!0},Y5e=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const a=i.before(s),l=i.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1};function Lr(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var Z5e=e=>({tr:t,state:n,dispatch:r})=>{const i=Lr(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),f=s.after(o);t.delete(l,f).scrollIntoView()}return!0}return!1},q5e=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},Q5e=()=>({state:e,dispatch:t})=>C6e(e,t),J5e=()=>({commands:e})=>e.keyboardShortcut("Enter"),e2e=()=>({state:e,dispatch:t})=>O6e(e,t);function OM(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function e4(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:OM(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function uK(e,t,n={}){return e.find(r=>r.type===t&&e4(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function vO(e,t,n={}){return!!uK(e,t,n)}function jM(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!uK([...i.node.marks],t,n)))return;let o=i.index,a=e.start()+i.offset,l=o+1,f=a+i.node.nodeSize;for(;o>0&&vO([...e.parent.child(o-1).marks],t,n);)o-=1,a-=e.parent.child(o).nodeSize;for(;l<e.parent.childCount&&vO([...e.parent.child(l).marks],t,n);)f+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:f}}function Ff(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var t2e=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=Ff(e,r.schema),{doc:o,selection:a}=n,{$from:l,from:f,to:c}=a;if(i){const d=jM(l,s,t);if(d&&d.from<=f&&d.to>=c){const u=kt.create(o,d.from,d.to);n.setSelection(u)}}return!0},n2e=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function hK(e){return e instanceof kt}function Lu(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function pK(e,t=null){if(!t)return null;const n=Dt.atStart(e),r=Dt.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?kt.create(e,Lu(0,i,s),Lu(e.content.size,i,s)):kt.create(e,Lu(t,i,s),Lu(t,i,s))}function wO(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function t4(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function r2e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var i2e=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(t4()||wO())&&r.dom.focus(),r2e()&&!t4()&&!wO()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&e===null||e===!1)return!0}catch{return!1}if(s&&e===null&&!hK(n.state.selection))return o(),!0;const a=pK(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},s2e=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),o2e=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),mK=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&mK(r)}return e};function DU(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return mK(n)}function k2(e,t,n){if(e instanceof p0||e instanceof Me)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return Me.fromArray(e.map(a=>t.nodeFromJSON(a)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),k2("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new iX({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(o=!0,a=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?S5.fromSchema(l).parseSlice(DU(e),n.parseOptions):S5.fromSchema(l).parse(DU(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=S5.fromSchema(t);return n.slice?s.parseSlice(DU(e),n.parseOptions).content:s.parse(DU(e),n.parseOptions)}return k2("",t,n)}function a2e(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof ii||i instanceof li))return;const s=e.mapping.maps[r];let o=0;s.forEach((a,l,f,c)=>{o===0&&(o=c)}),e.setSelection(Dt.near(e.doc.resolve(o),n))}var l2e=e=>!("type"in e),c2e=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{k2(t,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=k2(t,s.schema,{parseOptions:f,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(y){return l(y),!1}let{from:c,to:d}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},u=!0,h=!0;if((l2e(a)?a:[a]).forEach(y=>{y.check(),u=u?y.isText&&y.marks.length===0:!1,h=h?y.isBlock:!1}),c===d&&h){const{parent:y}=r.doc.resolve(c);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(c-=1,d+=1)}let U;if(u){if(Array.isArray(t))U=t.map(y=>y.text||"").join("");else if(t instanceof Me){let y="";t.forEach(x=>{x.text&&(y+=x.text)}),U=y}else typeof t=="object"&&t&&t.text?U=t.text:U=t;r.insertText(U,c,d)}else{U=a;const y=r.doc.resolve(c),x=y.node(),w=y.parentOffset===0,E=x.isText||x.isTextblock,S=x.content.size>0;w&&E&&S&&(c=Math.max(0,c-1)),r.replaceWith(c,d,U)}n.updateSelection&&a2e(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:U}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:U})}return!0},f2e=()=>({state:e,dispatch:t})=>_6e(e,t),d2e=()=>({state:e,dispatch:t})=>P6e(e,t),u2e=()=>({state:e,dispatch:t})=>A6e(e,t),h2e=()=>({state:e,dispatch:t})=>N6e(e,t),p2e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=d7(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},m2e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=d7(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},g2e=()=>({state:e,dispatch:t})=>M6e(e,t),b2e=()=>({state:e,dispatch:t})=>T6e(e,t);function gK(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function U2e(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))t4()||gK()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var y2e=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=U2e(e).split(/-(?!$)/),o=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,a))});return l==null||l.steps.forEach(f=>{const c=f.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function C0(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Lr(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(d,u)=>{if(d.isText)return;const h=Math.max(r,u),g=Math.min(i,u+d.nodeSize);a.push({node:d,from:h,to:g})});const l=i-r,f=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>e4(d.node.attrs,n,{strict:!1}));return s?!!f.length:f.reduce((d,u)=>d+u.to-u.from,0)>=l}var x2e=(e,t={})=>({state:n,dispatch:r})=>{const i=Lr(e,n.schema);return C0(n,i,t)?D6e(n,r):!1},v2e=()=>({state:e,dispatch:t})=>B6e(e,t),w2e=e=>({state:t,dispatch:n})=>{const r=Lr(e,t.schema);return K6e(r)(t,n)},E2e=()=>({state:e,dispatch:t})=>L6e(e,t);function y7(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function EO(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var S2e=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=y7(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=Lr(e,r.schema)),a==="mark"&&(o=Ff(e,r.schema));let l=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(c,d)=>{s&&s===c.type&&(l=!0,i&&n.setNodeMarkup(d,void 0,EO(c.attrs,t))),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&(l=!0,i&&n.addMark(d,d+c.nodeSize,o.create(EO(u.attrs,t))))})})}),l},k2e=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),C2e=()=>({tr:e,dispatch:t})=>{if(t){const n=new Zo(e.doc);e.setSelection(n)}return!0},A2e=()=>({state:e,dispatch:t})=>I6e(e,t),M2e=()=>({state:e,dispatch:t})=>R6e(e,t),T2e=()=>({state:e,dispatch:t})=>F6e(e,t),I2e=()=>({state:e,dispatch:t})=>H6e(e,t),N2e=()=>({state:e,dispatch:t})=>z6e(e,t);function Jk(e,t,n={},r={}){return k2(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var R2e=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const f=Jk(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,f).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function bK(e,t){const n=Ff(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function UK(e,t){const n=new xX(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function _2e(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function P2e(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function D2e(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function x7(e){return t=>D2e(t.$from,e)}function st(e,t,n){return e.config[t]===void 0&&e.parent?st(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?st(e.parent,t,n):null}):e.config[t]}function BM(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=st(t,"addExtensions",n);return r?[t,...BM(r())]:t}).flat(10)}function FM(e,t){const n=s1.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function yK(e){return typeof e=="function"}function sn(e,t=void 0,...n){return yK(e)?t?e.bind(t)(...n):e(...n):e}function L2e(e={}){return Object.keys(e).length===0&&e.constructor===Object}function t6(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function xK(e){const t=[],{nodeExtensions:n,markExtensions:r}=t6(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},o=n.filter(f=>f.name!=="text").map(f=>f.name),a=r.map(f=>f.name),l=[...o,...a];return e.forEach(f=>{const c={name:f.name,options:f.options,storage:f.storage,extensions:i},d=st(f,"addGlobalAttributes",c);if(!d)return;d().forEach(h=>{let g;Array.isArray(h.types)?g=h.types:h.types==="*"?g=l:h.types==="nodes"?g=o:h.types==="marks"?g=a:g=[],g.forEach(U=>{Object.entries(h.attributes).forEach(([y,x])=>{t.push({type:U,name:y,attribute:{...s,...x}})})})})}),i.forEach(f=>{const c={name:f.name,options:f.options,storage:f.storage},d=st(f,"addAttributes",c);if(!d)return;const u=d();Object.entries(u).forEach(([h,g])=>{const U={...s,...g};typeof(U==null?void 0:U.default)=="function"&&(U.default=U.default()),U!=null&&U.isRequired&&(U==null?void 0:U.default)===void 0&&delete U.default,t.push({type:f.name,name:h,attribute:U})})}),t}function Sr(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],f=a.filter(c=>!l.includes(c));r[i]=[...l,...f].join(" ")}else if(i==="style"){const a=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],f=new Map;l.forEach(c=>{const[d,u]=c.split(":").map(h=>h.trim());f.set(d,u)}),a.forEach(c=>{const[d,u]=c.split(":").map(h=>h.trim());f.set(d,u)}),r[i]=Array.from(f.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function C2(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Sr(n,r),{})}function O2e(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function SO(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):O2e(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function kO(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&L2e(n)?!1:n!=null))}function CO(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function j2e(e,t){var n;const r=xK(e),{nodeExtensions:i,markExtensions:s}=t6(e),o=(n=i.find(f=>st(f,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(f=>{const c=r.filter(x=>x.type===f.name),d={name:f.name,options:f.options,storage:f.storage,editor:t},u=e.reduce((x,w)=>{const E=st(w,"extendNodeSchema",d);return{...x,...E?E(f):{}}},{}),h=kO({...u,content:sn(st(f,"content",d)),marks:sn(st(f,"marks",d)),group:sn(st(f,"group",d)),inline:sn(st(f,"inline",d)),atom:sn(st(f,"atom",d)),selectable:sn(st(f,"selectable",d)),draggable:sn(st(f,"draggable",d)),code:sn(st(f,"code",d)),whitespace:sn(st(f,"whitespace",d)),linebreakReplacement:sn(st(f,"linebreakReplacement",d)),defining:sn(st(f,"defining",d)),isolating:sn(st(f,"isolating",d)),attrs:Object.fromEntries(c.map(CO))}),g=sn(st(f,"parseHTML",d));g&&(h.parseDOM=g.map(x=>SO(x,c)));const U=st(f,"renderHTML",d);U&&(h.toDOM=x=>U({node:x,HTMLAttributes:C2(x,c)}));const y=st(f,"renderText",d);return y&&(h.toText=y),[f.name,h]})),l=Object.fromEntries(s.map(f=>{const c=r.filter(y=>y.type===f.name),d={name:f.name,options:f.options,storage:f.storage,editor:t},u=e.reduce((y,x)=>{const w=st(x,"extendMarkSchema",d);return{...y,...w?w(f):{}}},{}),h=kO({...u,inclusive:sn(st(f,"inclusive",d)),excludes:sn(st(f,"excludes",d)),group:sn(st(f,"group",d)),spanning:sn(st(f,"spanning",d)),code:sn(st(f,"code",d)),attrs:Object.fromEntries(c.map(CO))}),g=sn(st(f,"parseHTML",d));g&&(h.parseDOM=g.map(y=>SO(y,c)));const U=st(f,"renderHTML",d);return U&&(h.toDOM=y=>U({mark:y,HTMLAttributes:C2(y,c)})),[f.name,h]}));return new iX({topNode:o,nodes:a,marks:l})}function B2e(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function M5(e){return e.sort((n,r)=>{const i=st(n,"priority")||100,s=st(r,"priority")||100;return i>s?-1:i<s?1:0})}function vK(e){const t=M5(BM(e)),n=B2e(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function wK(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return e.nodesBetween(r,i,(l,f,c,d)=>{var u;l.isBlock&&f>r&&(a+=s);const h=o==null?void 0:o[l.type.name];if(h)return c&&(a+=h({node:l,pos:f,parent:c,index:d,range:t})),!1;l.isText&&(a+=(u=l==null?void 0:l.text)==null?void 0:u.slice(Math.max(r,f)-f,i-f))}),a}function F2e(e,t){const n={from:0,to:e.content.size};return wK(e,n,t)}function EK(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function $2e(e,t){const n=Lr(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function SK(e,t){const n=y7(typeof t=="string"?t:t.name,e.schema);return n==="node"?$2e(e,t):n==="mark"?bK(e,t):{}}function z2e(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function H2e(e){const t=z2e(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function kK(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const f=t.slice(s).map(a,-1),c=t.slice(s).map(l),d=t.invert().map(f,-1),u=t.invert().map(c);r.push({oldRange:{from:d,to:u},newRange:{from:f,to:c}})})}),H2e(r)}function $M(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=jM(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var V2e=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===t?o=a:s-=1}return[o,s]};function Mg(e,t){return t.nodes[e]||t.marks[e]||null}function jy(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var W2e=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,a)=>{var l,f;const c=((f=(l=i.type.spec).toText)==null?void 0:f.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function eC(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?Ff(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>e4(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:u})=>{const h=d.pos,g=u.pos;e.doc.nodesBetween(h,g,(U,y)=>{if(s&&U.inlineContent&&!U.type.allowsMarkType(s))return!1;if(!U.isText&&!U.marks.length)return;const x=Math.max(h,y),w=Math.min(g,y+U.nodeSize),E=w-x;o+=E,a.push(...U.marks.map(S=>({mark:S,from:x,to:w})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>e4(d.mark.attrs,n,{strict:!1})).reduce((d,u)=>d+u.to-u.from,0),f=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,u)=>d+u.to-u.from,0);return(l>0?l+f:l)>=o}function G2e(e,t,n={}){if(!t)return C0(e,null,n)||eC(e,null,n);const r=y7(t,e.schema);return r==="node"?C0(e,t,n):r==="mark"?eC(e,t,n):!1}var X2e=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=x7(a=>a.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},K2e=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function AO(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function MO(e,t){const{nodeExtensions:n}=t6(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=sn(st(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function v7(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(v7(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function CK(e){return e instanceof lt}var AK=class MK{constructor(t){this.position=t}static fromJSON(t){return new MK(t.position)}toJSON(){return{position:this.position}}};function Y2e(e,t){const n=t.mapping.mapResult(e.position);return{position:new AK(n.pos),mapResult:n}}function Z2e(e){return new AK(e)}function q2e(e,t,n){var r;const{selection:i}=t;let s=null;if(hK(i)&&(s=i.$cursor),s){const a=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(f=>f.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let f=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(c,d,u)=>{if(f)return!1;if(c.isInline){const h=!u||u.type.allowsMarkType(n),g=!!n.isInSet(c.marks)||!c.marks.some(U=>U.type.excludes(n));f=h&&g}return!f}),f})}var Q2e=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Ff(e,r.schema);if(i)if(o){const f=bK(r,l);n.addStoredMark(l.create({...f,...t}))}else a.forEach(f=>{const c=f.$from.pos,d=f.$to.pos;r.doc.nodesBetween(c,d,(u,h)=>{const g=Math.max(h,c),U=Math.min(h+u.nodeSize,d);u.marks.find(x=>x.type===l)?u.marks.forEach(x=>{l===x.type&&n.addMark(g,U,l.create({...x.attrs,...t}))}):n.addMark(g,U,l.create(t))})});return q2e(r,n,l)},J2e=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),ebe=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Lr(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>$L(s,{...o,...t})(n)?!0:a.clearNodes()).command(({state:a})=>$L(s,{...o,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},tbe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Lu(e,0,r.content.size),s=lt.create(r,i);t.setSelection(s)}return!0},nbe=(e,t)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let o,a;return typeof t=="number"?(o=t,a=t):t&&"from"in t&&"to"in t?(o=t.from,a=t.to):(o=s.from,a=s.to),i&&n.doc.nodesBetween(o,a,(l,f)=>{l.isText||n.setNodeMarkup(f,void 0,{...l.attrs,dir:e})}),!0},rbe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=kt.atStart(r).from,a=kt.atEnd(r).to,l=Lu(i,o,a),f=Lu(s,o,a),c=kt.create(r,l,f);t.setSelection(c)}return!0},ibe=e=>({state:t,dispatch:n})=>{const r=Lr(e,t.schema);return q6e(r)(t,n)};function TO(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var sbe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,f=i.extensionManager.attributes,c=jy(f,a.node().type.name,a.node().attrs);if(s instanceof lt&&s.node.isBlock)return!a.parentOffset||!Fp(o,a.pos)?!1:(r&&(e&&TO(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,u=a.depth===0?void 0:_2e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&u?[{type:u,attrs:c}]:void 0,g=Fp(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!g&&Fp(t.doc,t.mapping.map(a.pos),1,u?[{type:u}]:void 0)&&(g=!0,h=u?[{type:u,attrs:c}]:void 0),r){if(g&&(s instanceof kt&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,h),u&&!d&&!a.parentOffset&&a.parent.type!==u)){const U=t.mapping.map(a.before()),y=t.doc.resolve(U);a.node(-1).canReplaceWith(y.index(),y.index()+1,u)&&t.setNodeMarkup(t.mapping.map(a.before()),u)}e&&TO(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return g},obe=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Lr(e,r.schema),{$from:l,$to:f}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(f))return!1;const d=l.node(-1);if(d.type!==a)return!1;const u=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let x=Me.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let T=l.depth-w;T>=l.depth-3;T-=1)x=Me.from(l.node(T).copy(x));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...jy(u,l.node().type.name,l.node().attrs),...t},A=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;x=x.append(Me.from(a.createAndFill(null,A)||void 0));const M=l.before(l.depth-(w-1));n.replace(M,l.after(-E),new We(x,4-w,0));let C=-1;n.doc.nodesBetween(M,n.doc.content.size,(T,R)=>{if(C>-1)return!1;T.isTextblock&&T.content.size===0&&(C=R+1)}),C>-1&&n.setSelection(kt.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=f.pos===l.end()?d.contentMatchAt(0).defaultType:null,g={...jy(u,d.type.name,d.attrs),...t},U={...jy(u,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,f.pos);const y=h?[{type:a,attrs:g},{type:h,attrs:U}]:[{type:a,attrs:g}];if(!Fp(n.doc,l.pos,2))return!1;if(i){const{selection:x,storedMarks:w}=r,{splittableMarks:E}=s.extensionManager,S=w||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!S||!i)return!0;const A=S.filter(M=>E.includes(M.type.name));n.ensureMarks(A)}return!0},iE=(e,t)=>{const n=x7(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&L0(e.doc,n.pos)&&e.join(n.pos),!0},sE=(e,t)=>{const n=x7(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&L0(e.doc,r)&&e.join(r),!0},abe=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:f,can:c})=>{const{extensions:d,splittableMarks:u}=i.extensionManager,h=Lr(e,o.schema),g=Lr(t,o.schema),{selection:U,storedMarks:y}=o,{$from:x,$to:w}=U,E=x.blockRange(w),S=y||U.$to.parentOffset&&U.$from.marks();if(!E)return!1;const A=x7(M=>MO(M.type.name,d))(U);if(E.depth>=1&&A&&E.depth-A.depth<=1){if(A.node.type===h)return f.liftListItem(g);if(MO(A.node.type.name,d)&&h.validContent(A.node.content)&&a)return l().command(()=>(s.setNodeMarkup(A.pos,h),!0)).command(()=>iE(s,h)).command(()=>sE(s,h)).run()}return!n||!S||!a?l().command(()=>c().wrapInList(h,r)?!0:f.clearNodes()).wrapInList(h,r).command(()=>iE(s,h)).command(()=>sE(s,h)).run():l().command(()=>{const M=c().wrapInList(h,r),C=S.filter(T=>u.includes(T.type.name));return s.ensureMarks(C),M?!0:f.clearNodes()}).wrapInList(h,r).command(()=>iE(s,h)).command(()=>sE(s,h)).run()},lbe=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Ff(e,r.schema);return eC(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},cbe=(e,t,n={})=>({state:r,commands:i})=>{const s=Lr(e,r.schema),o=Lr(t,r.schema),a=C0(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},fbe=(e,t={})=>({state:n,commands:r})=>{const i=Lr(e,n.schema);return C0(n,i,t)?r.lift(i):r.wrapIn(i,t)},dbe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},ube=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},hbe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=n,l=Ff(e,r.schema),{$from:f,empty:c,ranges:d}=a;if(!i)return!0;if(c&&o){let{from:u,to:h}=a;const g=(s=f.marks().find(y=>y.type===l))==null?void 0:s.attrs,U=jM(f,l,g);U&&(u=U.from,h=U.to),n.removeMark(u,h,l)}else d.forEach(u=>{n.removeMark(u.$from.pos,u.$to.pos,l)});return n.removeStoredMark(l),!0},pbe=e=>({tr:t,state:n,dispatch:r})=>{const{selection:i}=n;let s,o;return typeof e=="number"?(s=e,o=e):e&&"from"in e&&"to"in e?(s=e.from,o=e.to):(s=i.from,o=i.to),r&&t.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const f={...a.attrs};delete f.dir,t.setNodeMarkup(l,void 0,f)}),!0},mbe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=y7(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=Lr(e,r.schema)),a==="mark"&&(o=Ff(e,r.schema));let l=!1;return n.selection.ranges.forEach(f=>{const c=f.$from.pos,d=f.$to.pos;let u,h,g,U;n.selection.empty?r.doc.nodesBetween(c,d,(y,x)=>{s&&s===y.type&&(l=!0,g=Math.max(x,c),U=Math.min(x+y.nodeSize,d),u=x,h=y)}):r.doc.nodesBetween(c,d,(y,x)=>{x<c&&s&&s===y.type&&(l=!0,g=Math.max(x,c),U=Math.min(x+y.nodeSize,d),u=x,h=y),x>=c&&x<=d&&(s&&s===y.type&&(l=!0,i&&n.setNodeMarkup(x,void 0,{...y.attrs,...t})),o&&y.marks.length&&y.marks.forEach(w=>{if(o===w.type&&(l=!0,i)){const E=Math.max(x,c),S=Math.min(x+y.nodeSize,d);n.addMark(E,S,o.create({...w.attrs,...t}))}}))}),h&&(u!==void 0&&i&&n.setNodeMarkup(u,void 0,{...h.attrs,...t}),o&&h.marks.length&&h.marks.forEach(y=>{o===y.type&&i&&n.addMark(g,U,o.create({...y.attrs,...t}))}))}),l},gbe=(e,t={})=>({state:n,dispatch:r})=>{const i=Lr(e,n.schema);return V6e(i,t)(n,r)},bbe=(e,t={})=>({state:n,dispatch:r})=>{const i=Lr(e,n.schema);return W6e(i,t)(n,r)},Ube=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},w7=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},ybe=(e,t)=>{if(OM(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function LU(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const f=l.state.doc.resolve(r);if(f.parent.type.spec.code||(t=f.nodeBefore||f.nodeAfter)!=null&&t.marks.find(u=>u.type.spec.code))return!1;let c=!1;const d=W2e(f)+s;return o.forEach(u=>{if(c)return;const h=ybe(d,u.find);if(!h)return;const g=l.state.tr,U=b7({state:l.state,transaction:g}),y={from:r-(h[0].length-s.length),to:i},{commands:x,chain:w,can:E}=new U7({editor:n,state:U});u.handler({state:U,range:y,match:h,commands:x,chain:w,can:E})===null||!g.steps.length||(u.undoable&&g.setMeta(a,{transform:g,from:r,to:i,text:s}),l.dispatch(g),c=!0)}),c}function xbe(e){const{editor:t,rules:n}=e,r=new sr({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=FM(Me.from(c),o.schema);const{from:d}=l,u=d+c.length;LU({editor:t,from:d,to:u,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return LU({editor:t,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&LU({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?LU({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function vbe(e){return Object.prototype.toString.call(e).slice(8,-1)}function OU(e){return vbe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function TK(e,t){const n={...e};return OU(e)&&OU(t)&&Object.keys(t).forEach(r=>{OU(t[r])&&OU(e[r])?n[r]=TK(e[r],t[r]):n[r]=t[r]}),n}var zM=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...sn(st(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...sn(st(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>TK(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},o1=class IK extends zM{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new IK(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const l=o.find(f=>(f==null?void 0:f.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function wbe(e){return typeof e=="number"}var NK=class{constructor(e){this.find=e.find,this.handler=e.handler}},Ebe=(e,t,n)=>{if(OM(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Sbe(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=e,{commands:l,chain:f,can:c}=new U7({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,g)=>{var U,y,x,w,E;if((y=(U=h.type)==null?void 0:U.spec)!=null&&y.code||!(h.isText||h.isTextblock||h.isInline))return;const S=(E=(w=(x=h.content)==null?void 0:x.size)!=null?w:h.nodeSize)!=null?E:0,A=Math.max(r,g),M=Math.min(i,g+S);if(A>=M)return;const C=h.isText?h.text||"":h.textBetween(A-g,M-g,void 0,"");Ebe(C,s.find,o).forEach(R=>{if(R.index===void 0)return;const P=A+R.index+1,_=P+R[0].length,O={from:n.tr.mapping.map(P),to:n.tr.mapping.map(_)},F=s.handler({state:n,range:O,match:R,commands:l,chain:f,can:c,pasteEvent:o,dropEvent:a});d.push(F)})}),d.every(h=>h!==null)}var jU=null,kbe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function Cbe(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:d,to:u,rule:h,pasteEvt:g})=>{const U=c.tr,y=b7({state:c,transaction:U});if(!(!Sbe({editor:t,state:y,from:Math.max(d-1,0),to:u.b-1,rule:h,pasteEvent:g,dropEvent:a})||!U.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,U}};return n.map(c=>new sr({view(d){const u=g=>{var U;r=(U=d.dom.parentElement)!=null&&U.contains(g.target)?d.dom.parentElement:null,r&&(jU=t)},h=()=>{jU&&(jU=null)};return window.addEventListener("dragstart",u),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",u),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,u)=>{if(s=r===d.dom.parentElement,a=u,!s){const h=jU;h!=null&&h.isEditable&&setTimeout(()=>{const g=h.state.selection;g&&h.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,u)=>{var h;const g=(h=u.clipboardData)==null?void 0:h.getData("text/html");return o=u,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,u,h)=>{const g=d[0],U=g.getMeta("uiEvent")==="paste"&&!i,y=g.getMeta("uiEvent")==="drop"&&!s,x=g.getMeta("applyPasteRules"),w=!!x;if(!U&&!y&&!w)return;if(w){let{text:A}=x;typeof A=="string"?A=A:A=FM(Me.from(A),h.schema);const{from:M}=x,C=M+A.length,T=kbe(A);return l({rule:c,state:h,from:M,to:{b:C},pasteEvt:T})}const E=u.doc.content.findDiffStart(h.doc.content),S=u.doc.content.findDiffEnd(h.doc.content);if(!(!wbe(E)||!S||E===S.b))return l({rule:c,state:h,from:E,to:S,pasteEvt:o})}}))}var E7=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=vK(e),this.schema=j2e(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Mg(t.name,this.schema)},r=st(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return M5([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Mg(r.name,this.schema)},s=[],o=st(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&st(r,"exitable",i)&&(a.ArrowRight=()=>o1.handleExit({editor:e,mark:r})),o){const u=Object.fromEntries(Object.entries(o()).map(([h,g])=>[h,()=>g({editor:e})]));a={...a,...u}}const l=$5e(a);s.push(l);const f=st(r,"addInputRules",i);if(AO(r,e.options.enableInputRules)&&f){const u=f();if(u&&u.length){const h=xbe({editor:e,rules:u}),g=Array.isArray(h)?h:[h];s.push(...g)}}const c=st(r,"addPasteRules",i);if(AO(r,e.options.enablePasteRules)&&c){const u=c();if(u&&u.length){const h=Cbe({editor:e,rules:u});s.push(...h)}}const d=st(r,"addProseMirrorPlugins",i);if(d){const u=d();s.push(...u)}return s})}get attributes(){return xK(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=t6(this.extensions);return Object.fromEntries(t.filter(n=>!!st(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Lr(n.name,this.schema)},s=st(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,f,c,d,u)=>{const h=C2(l,r);return o({node:l,view:f,getPos:c,decorations:d,innerDecorations:u,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}dispatchTransaction(e){const{editor:t}=this;return M5([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Mg(i.name,this.schema)},o=st(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:r})}:r},e)}transformPastedHTML(e){const{editor:t}=this;return M5([...this.extensions]).reduce((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Mg(i.name,this.schema)},o=st(i,"transformPastedHTML",s);return o?(a,l)=>{const f=r(a,l);return o.call(s,f)}:r},e||(r=>r))}get markViews(){const{editor:e}=this,{markExtensions:t}=t6(this.extensions);return Object.fromEntries(t.filter(n=>!!st(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Ff(n.name,this.schema)},s=st(n,"addMarkView",i);if(!s)return[];const o=(a,l,f)=>{const c=C2(a,r);return s()({mark:a,view:l,inline:f,editor:e,extension:n,HTMLAttributes:c,updateAttributes:d=>{Bbe(a,e,d)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Mg(t.name,this.schema)};t.type==="mark"&&((n=sn(st(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=st(t,"onBeforeCreate",r),s=st(t,"onCreate",r),o=st(t,"onUpdate",r),a=st(t,"onSelectionUpdate",r),l=st(t,"onTransaction",r),f=st(t,"onFocus",r),c=st(t,"onBlur",r),d=st(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),f&&this.editor.on("focus",f),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};E7.resolve=vK;E7.sort=M5;E7.flatten=BM;var Abe={};LM(Abe,{ClipboardTextSerializer:()=>_K,Commands:()=>PK,Delete:()=>DK,Drop:()=>LK,Editable:()=>OK,FocusEvents:()=>BK,Keymap:()=>FK,Paste:()=>$K,Tabindex:()=>zK,TextDirection:()=>HK,focusEventsPluginKey:()=>jK});var kr=class RK extends zM{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new RK(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},_K=kr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new sr({key:new Wr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=EK(n);return wK(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),PK=kr.create({name:"commands",addCommands(){return{...dK}}}),DK=kr.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,a,l,f;if((f=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?f:e.getMeta("y-sync$"))return;const c=UK(e.before,[e,...t]);kK(c).forEach(h=>{c.mapping.mapResult(h.oldRange.from).deletedAfter&&c.mapping.mapResult(h.oldRange.to).deletedBefore&&c.before.nodesBetween(h.oldRange.from,h.oldRange.to,(g,U)=>{const y=U+g.nodeSize-2,x=h.oldRange.from<=U&&y<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:g,from:U,to:y,newFrom:c.mapping.map(U),newTo:c.mapping.map(y),deletedRange:h.oldRange,newRange:h.newRange,partial:!x,editor:this.editor,transaction:e,combinedTransform:c})})});const u=c.mapping;c.steps.forEach((h,g)=>{var U,y;if(h instanceof Va){const x=u.slice(g).map(h.from,-1),w=u.slice(g).map(h.to),E=u.invert().map(x,-1),S=u.invert().map(w),A=(U=c.doc.nodeAt(x-1))==null?void 0:U.marks.some(C=>C.eq(h.mark)),M=(y=c.doc.nodeAt(w))==null?void 0:y.marks.some(C=>C.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:E,to:S},newRange:{from:x,to:w},partial:!!(M||A),editor:this.editor,transaction:e,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),LK=kr.create({name:"drop",addProseMirrorPlugins(){return[new sr({key:new Wr("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),OK=kr.create({name:"editable",addProseMirrorPlugins(){return[new sr({key:new Wr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),jK=new Wr("focusEvents"),BK=kr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new sr({key:jK,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),FK=kr.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:f}=a,{empty:c,$anchor:d}=l,{pos:u,parent:h}=d,g=d.parent.isTextblock&&u>0?a.doc.resolve(u-1):d,U=g.parent.type.spec.isolating,y=d.pos-d.parentOffset,x=U&&g.parent.childCount===1?y===d.pos:Dt.atStart(f).from===u;return!c||!h.type.isTextblock||h.textContent.length||!x||x&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return t4()||gK()?s:i},addProseMirrorPlugins(){return[new sr({key:new Wr("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(U=>U.getMeta("composition")))return;const r=e.some(U=>U.docChanged)&&!t.doc.eq(n.doc),i=e.some(U=>U.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=t.selection,l=Dt.atStart(t.doc).from,f=Dt.atEnd(t.doc).to;if(s||!(o===l&&a===f)||!v7(n.doc))return;const u=n.tr,h=b7({state:n,transaction:u}),{commands:g}=new U7({editor:this.editor,state:h});if(g.clearNodes(),!!u.steps.length)return u}})]}}),$K=kr.create({name:"paste",addProseMirrorPlugins(){return[new sr({key:new Wr("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),zK=kr.create({name:"tabindex",addProseMirrorPlugins(){return[new sr({key:new Wr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),HK=kr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=t6(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new sr({key:new Wr("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),Mbe=class s5{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new s5(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new s5(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new s5(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=n.isInline,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!i&&!o&&l.depth<=this.depth)return;const f=new s5(l,this.editor,i,i||o?n:null);i&&(f.actualDepth=this.depth+1),t.push(f)}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},Tbe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Ibe(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var Nbe=class extends Ube{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Y2e,createMappablePosition:Z2e},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=pK(t,this.options.autofocus);this.editorState=xp.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Ibe(Tbe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=yK(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[OK,_K.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),PK,BK,FK,zK,LK,$K,DK,HK.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new E7(r,this)}createCommandManager(){this.commandManager=new U7({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=Jk(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=Jk(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){const{editorProps:t,enableExtensionDispatchTransaction:n}=this.options,r=t.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r,s=t.transformPastedHTML,o=this.extensionManager.transformPastedHTML(s);this.editorView=new cK(e,{...t,attributes:{role:"textbox",...t==null?void 0:t.attributes},dispatchTransaction:i,transformPastedHTML:o,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(f=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(f)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return SK(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return G2e(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return FM(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return F2e(this.state.doc,{blockSeparator:t,textSerializers:{...EK(this.schema),...n}})}get isEmpty(){return v7(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Mbe(t,this)}get $doc(){return this.$pos(0)}};function n6(e){return new w7({find:e.find,handler:({state:t,range:n,match:r})=>{const i=sn(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),f=n.from+a.indexOf(o),c=f+o.length;if($M(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(U=>U===e.type&&U!==h.mark.type)).filter(h=>h.to>f).length)return null;c<n.to&&s.delete(c,n.to),f>n.from&&s.delete(n.from+l,f);const u=n.from+l+o.length;s.addMark(n.from+l,u,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function Rbe(e){return new w7({find:e.find,handler:({state:t,range:n,match:r})=>{const i=sn(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let a=n.to;const l=e.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let c=o+f;c>a?c=a:a=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(c,a,l)}else if(r[0]){const f=e.type.isInline?o:o-1;s.insert(f,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:e.undoable})}function tC(e){return new w7({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=sn(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function r6(e){return new w7({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=sn(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),f=l&&EM(l,e.type,s);if(!f)return null;if(o.wrap(l,f),e.keepMarks&&e.editor){const{selection:d,storedMarks:u}=t,{splittableMarks:h}=e.editor.extensionManager,g=u||d.$to.parentOffset&&d.$from.marks();if(g){const U=g.filter(y=>h.includes(y.type.name));o.ensureMarks(U)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&L0(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&o.join(n.from-1)},undoable:e.undoable})}function _be(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof lt){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}var Pbe={};LM(Pbe,{createAtomBlockMarkdownSpec:()=>VK,createBlockMarkdownSpec:()=>Dbe,createInlineMarkdownSpec:()=>jbe,parseAttributes:()=>HM,parseIndentedBlocks:()=>nC,renderNestedMarkdownContent:()=>WM,serializeAttributes:()=>VM});function HM(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(c=>c.trim().slice(1));t.class=f.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(t.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,f,c])=>{var d;const u=parseInt(((d=c.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),h=n[u];h&&(t[f]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(t[c]=!0)}),t}function VM(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function VK(e){const{nodeName:t,name:n,parseAttributes:r=HM,serializeAttributes:i=VM,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=e,l=n||t,f=c=>{if(!a)return c;const d={};return a.forEach(u=>{u in c&&(d[u]=c[u])}),d};return{parseMarkdown:(c,d)=>{const u={...s,...c.attributes};return d.createNode(t,u,[])},markdownTokenizer:{name:t,level:"block",start(c){var d;const u=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(d=c.match(u))==null?void 0:d.index;return h!==void 0?h:-1},tokenize(c,d,u){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),g=c.match(h);if(!g)return;const U=g[1]||"",y=r(U);if(!o.find(w=>!(w in y)))return{type:t,raw:g[0],attributes:y}}},renderMarkdown:c=>{const d=f(c.attrs||{}),u=i(d),h=u?` {${u}}`:"";return`:::${l}${h} :::`}}}function Dbe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=HM,serializeAttributes:s=VM,defaultAttributes:o={},content:a="block",allowedAttributes:l}=e,f=n||t,c=d=>{if(!l)return d;const u={};return l.forEach(h=>{h in d&&(u[h]=d[h])}),u};return{parseMarkdown:(d,u)=>{let h;if(r){const U=r(d);h=typeof U=="string"?[{type:"text",text:U}]:U}else a==="block"?h=u.parseChildren(d.tokens||[]):h=u.parseInline(d.tokens||[]);const g={...o,...d.attributes};return u.createNode(t,g,h)},markdownTokenizer:{name:t,level:"block",start(d){var u;const h=new RegExp(`^:::${f}`,"m"),g=(u=d.match(h))==null?void 0:u.index;return g!==void 0?g:-1},tokenize(d,u,h){var g;const U=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=d.match(U);if(!y)return;const[x,w=""]=y,E=i(w);let S=1;const A=x.length;let M="";const C=/^:::([\w-]*)(\s.*)?/gm,T=d.slice(A);for(C.lastIndex=0;;){const R=C.exec(T);if(R===null)break;const P=R.index,_=R[1];if(!((g=R[2])!=null&&g.endsWith(":::"))){if(_)S+=1;else if(S-=1,S===0){const O=T.slice(0,P);M=O.trim();const F=d.slice(0,A+P+R[0].length);let B=[];if(M)if(a==="block")for(B=h.blockTokens(O),B.forEach($=>{$.text&&(!$.tokens||$.tokens.length===0)&&($.tokens=h.inlineTokens($.text))});B.length>0;){const $=B[B.length-1];if($.type==="paragraph"&&(!$.text||$.text.trim()===""))B.pop();else break}else B=h.inlineTokens(M);return{type:t,raw:F,attributes:E,content:M,tokens:B}}}}}},renderMarkdown:(d,u)=>{const h=c(d.attrs||{}),g=s(h),U=g?` {${g}}`:"",y=u.renderChildren(d.content||[],`

`);return`:::${f}${U}

${y}

:::`}}}function Lbe(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,i,s,o]=r;t[i]=s||o,r=n.exec(e)}return t}function Obe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function jbe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=Lbe,serializeAttributes:s=Obe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=e,f=n||t,c=u=>{if(!l)return u;const h={};return l.forEach(g=>{const U=typeof g=="string"?g:g.name,y=typeof g=="string"?void 0:g.skipIfDefault;if(U in u){const x=u[U];if(y!==void 0&&x===y)return;h[U]=x}}),h},d=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(u,h)=>{const g={...o,...u.attributes};if(a)return h.createNode(t,g);const U=r?r(u):u.content||"";return U?h.createNode(t,g,[h.createTextNode(U)]):h.createNode(t,g,[])},markdownTokenizer:{name:t,level:"inline",start(u){const h=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),g=u.match(h),U=g==null?void 0:g.index;return U!==void 0?U:-1},tokenize(u,h,g){const U=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),y=u.match(U);if(!y)return;let x="",w="";if(a){const[,S]=y;w=S}else{const[,S,A]=y;w=S,x=A||""}const E=i(w.trim());return{type:t,raw:y[0],content:x.trim(),attributes:E}}},renderMarkdown:u=>{let h="";r?h=r(u):u.content&&u.content.length>0&&(h=u.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const g=c(u.attrs||{}),U=s(g),y=U?` ${U}`:"";return a?`[${f}${y}]`:`[${f}${y}]${h}[/${f}]`}}}function nC(e,t,n){var r,i,s,o;const a=e.split(`
`),l=[];let f="",c=0;const d=t.baseIndentSize||2;for(;c<a.length;){const u=a[c],h=u.match(t.itemPattern);if(!h){if(l.length>0)break;if(u.trim()===""){c+=1,f=`${f}${u}
`;continue}else return}const g=t.extractItemData(h),{indentLevel:U,mainContent:y}=g;f=`${f}${u}
`;const x=[y];for(c+=1;c<a.length;){const A=a[c];if(A.trim()===""){const C=a.slice(c+1).findIndex(P=>P.trim()!=="");if(C===-1)break;if((((i=(r=a[c+1+C].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>U){x.push(A),f=`${f}${A}
`,c+=1;continue}else break}if((((o=(s=A.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>U)x.push(A),f=`${f}${A}
`,c+=1;else break}let w;const E=x.slice(1);if(E.length>0){const A=E.map(M=>M.slice(U+d)).join(`
`);A.trim()&&(t.customNestedParser?w=t.customNestedParser(A):w=n.blockTokens(A))}const S=t.createToken(g,w);l.push(S)}if(l.length!==0)return{items:l,raw:f}}function WM(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=e.content,a=t.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(f=>{const c=t.renderChildren([f]);if(c){const d=c.split(`
`).map(u=>u?t.indent(u):"").join(`
`);l.push(d)}}),l.join(`
`)}function Bbe(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((a,l)=>{const f=s.mapping.map(l),c=s.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(h=>{if(h!==o)return!1;d=h}),!d)return;let u=!1;if(Object.keys(n).forEach(h=>{n[h]!==d.attrs[h]&&(u=!0)}),u){const h=e.type.create({...e.attrs,...n});s.removeMark(f,c,e.type),s.addMark(f,c,h)}}),s.docChanged&&t.view.dispatch(s)}var Ws=class WK extends zM{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new WK(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Fh(e){return new NK({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=sn(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,a=r[r.length-1],l=r[0];let f=n.to;if(a){const c=l.search(/\S/),d=n.from+l.indexOf(a),u=d+a.length;if($M(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(y=>y===e.type&&y!==g.mark.type)).filter(g=>g.to>d).length)return null;u<n.to&&o.delete(u,n.to),d>n.from&&o.delete(n.from+c,d),f=n.from+c+a.length,o.addMark(n.from+c,f,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function Fbe(e){return new NK({find:e.find,handler({match:t,chain:n,range:r,pasteEvent:i}){const s=sn(e.getAttributes,void 0,t,i),o=sn(e.getContent,void 0,s);if(s===!1||s===null)return null;const a={type:e.type.name,attrs:s};o&&(a.content=o),t.input&&n().deleteRange(r).insertContentAt(r.from,a)}})}const{getOwnPropertyNames:$be,getOwnPropertySymbols:zbe}=Object,{hasOwnProperty:Hbe}=Object.prototype;function oE(e,t){return function(r,i,s){return e(r,i,s)&&t(r,i,s)}}function BU(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const l=e(n,r,i);return s.delete(n),s.delete(r),l}}function Vbe(e){return e!=null?e[Symbol.toStringTag]:void 0}function IO(e){return $be(e).concat(zbe(e))}const Wbe=Object.hasOwn||((e,t)=>Hbe.call(e,t));function a1(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Gbe="__v",Xbe="__o",Kbe="_owner",{getOwnPropertyDescriptor:NO,keys:RO}=Object;function Ybe(e,t){return e.byteLength===t.byteLength&&n4(new Uint8Array(e),new Uint8Array(t))}function Zbe(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function qbe(e,t){return e.byteLength===t.byteLength&&n4(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Qbe(e,t){return a1(e.getTime(),t.getTime())}function Jbe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function e8e(e,t){return e===t}function _O(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const f=t.entries();let c=!1,d=0;for(;(a=f.next())&&!a.done;){if(i[d]){d++;continue}const u=o.value,h=a.value;if(n.equals(u[0],h[0],l,d,e,t,n)&&n.equals(u[1],h[1],u[0],h[0],e,t,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const t8e=a1;function n8e(e,t,n){const r=RO(e);let i=r.length;if(RO(t).length!==i)return!1;for(;i-- >0;)if(!GK(e,t,n,r[i]))return!1;return!0}function Tg(e,t,n){const r=IO(e);let i=r.length;if(IO(t).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!GK(e,t,n,s)||(o=NO(e,s),a=NO(t,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function r8e(e,t){return a1(e.valueOf(),t.valueOf())}function i8e(e,t){return e.source===t.source&&e.flags===t.flags}function PO(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.values();let o,a;for(;(o=s.next())&&!o.done;){const l=t.values();let f=!1,c=0;for(;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,e,t,n)){f=i[c]=!0;break}c++}if(!f)return!1}return!0}function n4(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function s8e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function GK(e,t,n,r){return(r===Kbe||r===Xbe||r===Gbe)&&(e.$$typeof||t.$$typeof)?!0:Wbe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const o8e="[object ArrayBuffer]",a8e="[object Arguments]",l8e="[object Boolean]",c8e="[object DataView]",f8e="[object Date]",d8e="[object Error]",u8e="[object Map]",h8e="[object Number]",p8e="[object Object]",m8e="[object RegExp]",g8e="[object Set]",b8e="[object String]",U8e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},y8e="[object URL]",x8e=Object.prototype.toString;function v8e({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:f,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:u,areUrlsEqual:h,unknownTagComparators:g}){return function(y,x,w){if(y===x)return!0;if(y==null||x==null)return!1;const E=typeof y;if(E!==typeof x)return!1;if(E!=="object")return E==="number"?a(y,x,w):E==="function"?s(y,x,w):!1;const S=y.constructor;if(S!==x.constructor)return!1;if(S===Object)return l(y,x,w);if(Array.isArray(y))return t(y,x,w);if(S===Date)return r(y,x,w);if(S===RegExp)return c(y,x,w);if(S===Map)return o(y,x,w);if(S===Set)return d(y,x,w);const A=x8e.call(y);if(A===f8e)return r(y,x,w);if(A===m8e)return c(y,x,w);if(A===u8e)return o(y,x,w);if(A===g8e)return d(y,x,w);if(A===p8e)return typeof y.then!="function"&&typeof x.then!="function"&&l(y,x,w);if(A===y8e)return h(y,x,w);if(A===d8e)return i(y,x,w);if(A===a8e)return l(y,x,w);if(U8e[A])return u(y,x,w);if(A===o8e)return e(y,x,w);if(A===c8e)return n(y,x,w);if(A===l8e||A===h8e||A===b8e)return f(y,x,w);if(g){let M=g[A];if(!M){const C=Vbe(y);C&&(M=g[C])}if(M)return M(y,x,w)}return!1}}function w8e({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:Ybe,areArraysEqual:n?Tg:Zbe,areDataViewsEqual:qbe,areDatesEqual:Qbe,areErrorsEqual:Jbe,areFunctionsEqual:e8e,areMapsEqual:n?oE(_O,Tg):_O,areNumbersEqual:t8e,areObjectsEqual:n?Tg:n8e,arePrimitiveWrappersEqual:r8e,areRegExpsEqual:i8e,areSetsEqual:n?oE(PO,Tg):PO,areTypedArraysEqual:n?oE(n4,Tg):n4,areUrlsEqual:s8e,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const i=BU(r.areArraysEqual),s=BU(r.areMapsEqual),o=BU(r.areObjectsEqual),a=BU(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function E8e(e){return function(t,n,r,i,s,o,a){return e(t,n,a)}}function S8e({circular:e,comparator:t,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:f=e?new WeakMap:void 0,meta:c}=n();return t(a,l,{cache:f,equals:r,meta:c,strict:i})};if(e)return function(a,l){return t(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return t(a,l,s)}}const k8e=j0();j0({strict:!0});j0({circular:!0});j0({circular:!0,strict:!0});j0({createInternalComparator:()=>a1});j0({strict:!0,createInternalComparator:()=>a1});j0({circular:!0,createInternalComparator:()=>a1});j0({circular:!0,createInternalComparator:()=>a1,strict:!0});function j0(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:i=!1}=e,s=w8e(e),o=v8e(s),a=n?n(o):E8e(o);return S8e({circular:t,comparator:o,createState:r,equals:a,strict:i})}var C8e=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},A8e=({contentComponent:e})=>{const t=zG.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(t)})};function M8e(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:oG.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var T8e=class extends Te.Component{constructor(e){var t;super(e),this.editorContentRef=Te.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var e;const t=this.props.editor;if(t&&!t.isDestroyed&&((e=t.view.dom)!=null&&e.parentNode)){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n}),t.contentComponent=M8e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.parentNode))return;const n=document.createElement("div");n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:C8e(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&m.jsx(A8e,{contentComponent:e.contentComponent})]})}},I8e=I.forwardRef((e,t)=>{const n=Te.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Te.createElement(T8e,{key:n,innerRef:t,...e})}),S7=Te.memo(I8e),N8e=typeof window<"u"?I.useLayoutEffect:I.useEffect,R8e=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function _8e(e){var t;const[n]=I.useState(()=>new R8e(e.editor)),r=nG.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:k8e);return N8e(()=>n.watch(e.editor),[e.editor,n]),I.useDebugValue(r),r}var P8e=!1,rC=typeof window>"u",D8e=rC||!!(typeof window<"u"&&window.next),L8e=class XK{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?rC||D8e?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new Nbe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?XK.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function GM(e={},t=[]){const n=I.useRef(e);n.current=e;const[r]=I.useState(()=>new L8e(n)),i=zG.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return I.useDebugValue(i),I.useEffect(r.onRender(t)),_8e({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var KK=I.createContext({editor:null});KK.Consumer;var O8e=I.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),j8e=()=>I.useContext(O8e);Te.forwardRef((e,t)=>{const{onDragStart:n}=j8e(),r=e.as||"div";return m.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Te.createContext({markViewContentRef:()=>{}});var XM=I.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});XM.displayName="TiptapContext";var B8e=()=>I.useContext(XM);function YK({editor:e,instance:t,children:n}){const r=e??t;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=I.useMemo(()=>({editor:r}),[r]),s=I.useMemo(()=>({editor:r}),[r]);return m.jsx(KK.Provider,{value:s,children:m.jsx(XM.Provider,{value:i,children:n})})}YK.displayName="Tiptap";function ZK({...e}){const{editor:t}=B8e();return m.jsx(S7,{editor:t,...e})}ZK.displayName="Tiptap.Content";Object.assign(YK,{Content:ZK});var r4=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},F8e=/^\s*>\s$/,$8e=Ws.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return r4("blockquote",{...Sr(this.options.HTMLAttributes,e),children:r4("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(i=>{const a=t.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[r6({find:F8e,type:this.type})]}}),z8e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,H8e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,V8e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,W8e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,G8e=o1.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return r4("strong",{...Sr(this.options.HTMLAttributes,e),children:r4("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[n6({find:z8e,type:this.type}),n6({find:V8e,type:this.type})]},addPasteRules(){return[Fh({find:H8e,type:this.type}),Fh({find:W8e,type:this.type})]}}),X8e=/(^|[^`])`([^`]+)`(?!`)$/,K8e=/(^|[^`])`([^`]+)`(?!`)/g,Y8e=o1.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Sr(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[n6({find:X8e,type:this.type})]},addPasteRules(){return[Fh({find:K8e,type:this.type})]}}),aE=4,Z8e=/^```([a-z]+)?[\s\n]$/,q8e=/^~~~([a-z]+)?[\s\n]$/,Q8e=Ws.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:aE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Sr(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const i=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:aE,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?e.commands.insertContent(a):e.commands.command(({tr:l})=>{const{from:f,to:c}=i,h=r.doc.textBetween(f,c,`
`,`
`).split(`
`).map(g=>a+g).join(`
`);return l.replaceWith(f,c,r.schema.text(h)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:aE,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?e.commands.command(({tr:a})=>{var l;const{pos:f}=s,c=s.start(),d=s.end(),h=r.doc.textBetween(c,d,`
`,`
`).split(`
`);let g=0,U=0;const y=f-c;for(let M=0;M<h.length;M+=1){if(U+h[M].length>=y){g=M;break}U+=h[M].length+1}const w=((l=h[g].match(/^ */))==null?void 0:l[0])||"",E=Math.min(w.length,n);if(E===0)return!0;let S=c;for(let M=0;M<g;M+=1)S+=h[M].length+1;return a.delete(S,S+E),f-S<=E&&a.setSelection(kt.create(a.doc,S)),!0}):e.commands.command(({tr:a})=>{const{from:l,to:f}=i,u=r.doc.textBetween(l,f,`
`,`
`).split(`
`).map(h=>{var g;const U=((g=h.match(/^ */))==null?void 0:g[0])||"",y=Math.min(U.length,n);return h.slice(y)}).join(`
`);return a.replaceWith(l,f,r.schema.text(u)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:f})=>(f.setSelection(Dt.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[tC({find:Z8e,type:this.type,getAttributes:e=>({language:e[1]})}),tC({find:q8e,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new sr({key:new Wr("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(kt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),J8e=Ws.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),eUe=Ws.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Sr(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:f,dispatch:c})=>{if(c&&l&&o){const d=l.filter(u=>a.includes(u.type.name));f.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),tUe=Ws.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Sr(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,i="#".repeat(r);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>tC({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),nUe=Ws.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Sr(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!_be(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return CK(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,f=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(kt.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(lt.create(o.doc,l.pos)):o.setSelection(kt.create(o.doc,l.pos));else{const c=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=c==null?void 0:c.create();d&&(o.insert(f,d),o.setSelection(kt.create(o.doc,f+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Rbe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),rUe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,iUe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,sUe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,oUe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,aUe=o1.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Sr(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[n6({find:rUe,type:this.type}),n6({find:sUe,type:this.type})]},addPasteRules(){return[Fh({find:iUe,type:this.type}),Fh({find:oUe,type:this.type})]}});const lUe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",cUe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",iC="numeric",sC="ascii",oC="alpha",T5="asciinumeric",o5="alphanumeric",aC="domain",qK="emoji",fUe="scheme",dUe="slashscheme",lE="whitespace";function uUe(e,t){return e in t||(t[e]=[]),t[e]}function Ou(e,t,n){t[iC]&&(t[T5]=!0,t[o5]=!0),t[sC]&&(t[T5]=!0,t[oC]=!0),t[T5]&&(t[o5]=!0),t[oC]&&(t[o5]=!0),t[o5]&&(t[aC]=!0),t[qK]&&(t[aC]=!0);for(const r in t){const i=uUe(r,n);i.indexOf(e)<0&&i.push(e)}}function hUe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Ds(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Ds.groups={};Ds.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Ds.groups;let i;return t&&t.j?i=t:(i=new Ds(t),n&&r&&Ou(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Ds.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,a=i.go(e);if(a?(o=new Ds,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Ds,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(hUe(o.t,r),n);Ou(s,l,r)}else n&&Ou(s,n,r);o.t=s}return i.j[e]=o,o}};const _t=(e,t,n,r,i)=>e.ta(t,n,r,i),lr=(e,t,n,r,i)=>e.tr(t,n,r,i),DO=(e,t,n,r,i)=>e.ts(t,n,r,i),Re=(e,t,n,r,i)=>e.tt(t,n,r,i),Fc="WORD",lC="UWORD",QK="ASCIINUMERICAL",JK="ALPHANUMERICAL",A2="LOCALHOST",cC="TLD",fC="UTLD",By="SCHEME",fp="SLASH_SCHEME",KM="NUM",dC="WS",YM="NL",I5="OPENBRACE",N5="CLOSEBRACE",i4="OPENBRACKET",s4="CLOSEBRACKET",o4="OPENPAREN",a4="CLOSEPAREN",l4="OPENANGLEBRACKET",c4="CLOSEANGLEBRACKET",f4="FULLWIDTHLEFTPAREN",d4="FULLWIDTHRIGHTPAREN",u4="LEFTCORNERBRACKET",h4="RIGHTCORNERBRACKET",p4="LEFTWHITECORNERBRACKET",m4="RIGHTWHITECORNERBRACKET",g4="FULLWIDTHLESSTHAN",b4="FULLWIDTHGREATERTHAN",U4="AMPERSAND",y4="APOSTROPHE",x4="ASTERISK",Nd="AT",v4="BACKSLASH",w4="BACKTICK",E4="CARET",jd="COLON",ZM="COMMA",S4="DOLLAR",Al="DOT",k4="EQUALS",qM="EXCLAMATION",No="HYPHEN",R5="PERCENT",C4="PIPE",A4="PLUS",M4="POUND",_5="QUERY",QM="QUOTE",eY="FULLWIDTHMIDDLEDOT",JM="SEMI",Ml="SLASH",P5="TILDE",T4="UNDERSCORE",tY="EMOJI",I4="SYM";var nY=Object.freeze({__proto__:null,ALPHANUMERICAL:JK,AMPERSAND:U4,APOSTROPHE:y4,ASCIINUMERICAL:QK,ASTERISK:x4,AT:Nd,BACKSLASH:v4,BACKTICK:w4,CARET:E4,CLOSEANGLEBRACKET:c4,CLOSEBRACE:N5,CLOSEBRACKET:s4,CLOSEPAREN:a4,COLON:jd,COMMA:ZM,DOLLAR:S4,DOT:Al,EMOJI:tY,EQUALS:k4,EXCLAMATION:qM,FULLWIDTHGREATERTHAN:b4,FULLWIDTHLEFTPAREN:f4,FULLWIDTHLESSTHAN:g4,FULLWIDTHMIDDLEDOT:eY,FULLWIDTHRIGHTPAREN:d4,HYPHEN:No,LEFTCORNERBRACKET:u4,LEFTWHITECORNERBRACKET:p4,LOCALHOST:A2,NL:YM,NUM:KM,OPENANGLEBRACKET:l4,OPENBRACE:I5,OPENBRACKET:i4,OPENPAREN:o4,PERCENT:R5,PIPE:C4,PLUS:A4,POUND:M4,QUERY:_5,QUOTE:QM,RIGHTCORNERBRACKET:h4,RIGHTWHITECORNERBRACKET:m4,SCHEME:By,SEMI:JM,SLASH:Ml,SLASH_SCHEME:fp,SYM:I4,TILDE:P5,TLD:cC,UNDERSCORE:T4,UTLD:fC,UWORD:lC,WORD:Fc,WS:dC});const Pc=/[a-z]/,Ig=new RegExp("\\p{L}","u"),cE=new RegExp("\\p{Emoji}","u"),Dc=/\d/,fE=/\s/,LO="\r",dE=`
`,pUe="",mUe="",uE="";let FU=null,$U=null;function gUe(e=[]){const t={};Ds.groups=t;const n=new Ds;FU==null&&(FU=OO(lUe)),$U==null&&($U=OO(cUe)),Re(n,"'",y4),Re(n,"{",I5),Re(n,"}",N5),Re(n,"[",i4),Re(n,"]",s4),Re(n,"(",o4),Re(n,")",a4),Re(n,"<",l4),Re(n,">",c4),Re(n,"",f4),Re(n,"",d4),Re(n,"",u4),Re(n,"",h4),Re(n,"",p4),Re(n,"",m4),Re(n,"",g4),Re(n,"",b4),Re(n,"&",U4),Re(n,"*",x4),Re(n,"@",Nd),Re(n,"`",w4),Re(n,"^",E4),Re(n,":",jd),Re(n,",",ZM),Re(n,"$",S4),Re(n,".",Al),Re(n,"=",k4),Re(n,"!",qM),Re(n,"-",No),Re(n,"%",R5),Re(n,"|",C4),Re(n,"+",A4),Re(n,"#",M4),Re(n,"?",_5),Re(n,'"',QM),Re(n,"/",Ml),Re(n,";",JM),Re(n,"~",P5),Re(n,"_",T4),Re(n,"\\",v4),Re(n,"",eY);const r=lr(n,Dc,KM,{[iC]:!0});lr(r,Dc,r);const i=lr(r,Pc,QK,{[T5]:!0}),s=lr(r,Ig,JK,{[o5]:!0}),o=lr(n,Pc,Fc,{[sC]:!0});lr(o,Dc,i),lr(o,Pc,o),lr(i,Dc,i),lr(i,Pc,i);const a=lr(n,Ig,lC,{[oC]:!0});lr(a,Pc),lr(a,Dc,s),lr(a,Ig,a),lr(s,Dc,s),lr(s,Pc),lr(s,Ig,s);const l=Re(n,dE,YM,{[lE]:!0}),f=Re(n,LO,dC,{[lE]:!0}),c=lr(n,fE,dC,{[lE]:!0});Re(n,uE,c),Re(f,dE,l),Re(f,uE,c),lr(f,fE,c),Re(c,LO),Re(c,dE),lr(c,fE,c),Re(c,uE,c);const d=lr(n,cE,tY,{[qK]:!0});Re(d,"#"),lr(d,cE,d),Re(d,pUe,d);const u=Re(d,mUe);Re(u,"#"),lr(u,cE,d);const h=[[Pc,o],[Dc,i]],g=[[Pc,null],[Ig,a],[Dc,s]];for(let U=0;U<FU.length;U++)Ud(n,FU[U],cC,Fc,h);for(let U=0;U<$U.length;U++)Ud(n,$U[U],fC,lC,g);Ou(cC,{tld:!0,ascii:!0},t),Ou(fC,{utld:!0,alpha:!0},t),Ud(n,"file",By,Fc,h),Ud(n,"mailto",By,Fc,h),Ud(n,"http",fp,Fc,h),Ud(n,"https",fp,Fc,h),Ud(n,"ftp",fp,Fc,h),Ud(n,"ftps",fp,Fc,h),Ou(By,{scheme:!0,ascii:!0},t),Ou(fp,{slashscheme:!0,ascii:!0},t),e=e.sort((U,y)=>U[0]>y[0]?1:-1);for(let U=0;U<e.length;U++){const y=e[U][0],w=e[U][1]?{[fUe]:!0}:{[dUe]:!0};y.indexOf("-")>=0?w[aC]=!0:Pc.test(y)?Dc.test(y)?w[T5]=!0:w[sC]=!0:w[iC]=!0,DO(n,y,y,w)}return DO(n,"localhost",A2,{ascii:!0}),n.jd=new Ds(I4),{start:n,tokens:Object.assign({groups:t},nY)}}function rY(e,t){const n=bUe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=e,l=null,f=0,c=null,d=-1,u=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,u=0,c=a):d>=0&&(d+=n[o].length,u++),f+=n[o].length,s+=n[o].length,o++;s-=d,o-=u,f-=d,i.push({t:c.t,v:t.slice(s-f,s),s:s-f,e:s})}return i}function bUe(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Ud(e,t,n,r,i){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];e.j[l]?s=e.j[l]:(s=new Ds(r),s.jr=i.slice(),e.j[l]=s),e=s}return s=new Ds(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function OO(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const M2={defaultProtocol:"http",events:null,format:jO,formatHref:jO,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function eT(e,t=null){let n=Object.assign({},M2);e&&(n=Object.assign(n,e instanceof eT?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}eT.prototype={o:M2,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:M2[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function jO(e){return e}function iY(e,t){this.t="token",this.v=e,this.tk=t}iY.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=M2.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},a=e.get("className",n,t),l=e.get("target",n,t),f=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return o.href=r,a&&(o.class=a),l&&(o.target=l),f&&(o.rel=f),c&&Object.assign(o,c),{tagName:i,attributes:o,content:s,eventListeners:d}}};function k7(e,t){class n extends iY{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const BO=k7("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),FO=k7("text"),UUe=k7("nl"),zU=k7("url",{isLink:!0,toHref(e=M2.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==A2&&e[1].t===jd}}),Io=e=>new Ds(e);function yUe({groups:e}){const t=e.domain.concat([U4,x4,Nd,v4,w4,E4,S4,k4,No,KM,R5,C4,A4,M4,Ml,I4,P5,T4]),n=[y4,jd,ZM,Al,qM,R5,_5,QM,JM,l4,c4,I5,N5,s4,i4,o4,a4,f4,d4,u4,h4,p4,m4,g4,b4],r=[U4,y4,x4,v4,w4,E4,S4,k4,No,I5,N5,R5,C4,A4,M4,_5,Ml,I4,P5,T4],i=Io(),s=Re(i,P5);_t(s,r,s),_t(s,e.domain,s);const o=Io(),a=Io(),l=Io();_t(i,e.domain,o),_t(i,e.scheme,a),_t(i,e.slashscheme,l),_t(o,r,s),_t(o,e.domain,o);const f=Re(o,Nd);Re(s,Nd,f),Re(a,Nd,f),Re(l,Nd,f);const c=Re(s,Al);_t(c,r,s),_t(c,e.domain,s);const d=Io();_t(f,e.domain,d),_t(d,e.domain,d);const u=Re(d,Al);_t(u,e.domain,d);const h=Io(BO);_t(u,e.tld,h),_t(u,e.utld,h),Re(f,A2,h);const g=Re(d,No);Re(g,No,g),_t(g,e.domain,d),_t(h,e.domain,d),Re(h,Al,u),Re(h,No,g);const U=Re(h,jd);_t(U,e.numeric,BO);const y=Re(o,No),x=Re(o,Al);Re(y,No,y),_t(y,e.domain,o),_t(x,r,s),_t(x,e.domain,o);const w=Io(zU);_t(x,e.tld,w),_t(x,e.utld,w),_t(w,e.domain,o),_t(w,r,s),Re(w,Al,x),Re(w,No,y),Re(w,Nd,f);const E=Re(w,jd),S=Io(zU);_t(E,e.numeric,S);const A=Io(zU),M=Io();_t(A,t,A),_t(A,n,M),_t(M,t,A),_t(M,n,M),Re(w,Ml,A),Re(S,Ml,A);const C=Re(a,jd),T=Re(l,jd),R=Re(T,Ml),P=Re(R,Ml);_t(a,e.domain,o),Re(a,Al,x),Re(a,No,y),_t(l,e.domain,o),Re(l,Al,x),Re(l,No,y),_t(C,e.domain,A),Re(C,Ml,A),Re(C,_5,A),_t(P,e.domain,A),_t(P,t,A),Re(P,Ml,A);const _=[[I5,N5],[i4,s4],[o4,a4],[l4,c4],[f4,d4],[u4,h4],[p4,m4],[g4,b4]];for(let O=0;O<_.length;O++){const[F,B]=_[O],$=Re(A,F);Re(M,F,$),Re($,B,A);const z=Io(zU);_t($,t,z);const H=Io();_t($,n),_t(z,t,z),_t(z,n,H),_t(H,t,z),_t(H,n,H),Re(z,B,A),Re(H,B,A)}return Re(i,A2,w),Re(i,YM,UUe),{start:i,tokens:nY}}function xUe(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=e,l=null,f=null,c=0,d=null,u=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(f=l||a.go(n[i].t));)l=null,a=f,a.accepts()?(u=0,d=a):u>=0&&u++,i++,c++;if(u<0)i-=c,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(hE(FO,t,o)),o=[]),i-=u,c-=u;const h=d.t,g=n.slice(i-c,i);s.push(hE(h,t,g))}}return o.length>0&&s.push(hE(FO,t,o)),s}function hE(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const vUe=typeof console<"u"&&console&&console.warn||(()=>{}),wUe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Rn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function EUe(){return Ds.groups={},Rn.scanner=null,Rn.parser=null,Rn.tokenQueue=[],Rn.pluginQueue=[],Rn.customSchemes=[],Rn.initialized=!1,Rn}function $O(e,t=!1){if(Rn.initialized&&vUe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${wUe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Rn.customSchemes.push([e,t])}function SUe(){Rn.scanner=gUe(Rn.customSchemes);for(let e=0;e<Rn.tokenQueue.length;e++)Rn.tokenQueue[e][1]({scanner:Rn.scanner});Rn.parser=yUe(Rn.scanner.tokens);for(let e=0;e<Rn.pluginQueue.length;e++)Rn.pluginQueue[e][1]({scanner:Rn.scanner,parser:Rn.parser});return Rn.initialized=!0,Rn}function tT(e){return Rn.initialized||SUe(),xUe(Rn.parser.start,e,rY(Rn.scanner.start,e))}tT.scan=rY;function sY(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new eT(n),i=tT(e),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!t||a.t===t)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var nT="[\0- -\u2029]",kUe=new RegExp(nT),CUe=new RegExp(`${nT}$`),AUe=new RegExp(nT,"g");function MUe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function TUe(e){return new sr({key:new Wr("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(f=>f.docChanged)&&!n.doc.eq(r.doc),s=t.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=UK(n.doc,[...t]);if(kK(a).forEach(({newRange:f})=>{const c=P2e(r.doc,f,h=>h.isTextblock);let d,u;if(c.length>1)d=c[0],u=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(f.from,f.to," "," ");if(!CUe.test(h))return;d=c[0],u=r.doc.textBetween(d.pos,f.to,void 0," ")}if(d&&u){const h=u.split(kUe).filter(Boolean);if(h.length<=0)return!1;const g=h[h.length-1],U=d.pos+u.lastIndexOf(g);if(!g)return!1;const y=tT(g).map(x=>x.toObject(e.defaultProtocol));if(!MUe(y))return!1;y.filter(x=>x.isLink).map(x=>({...x,from:U+x.start+1,to:U+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{$M(x.from,x.to,r.doc).some(w=>w.mark.type===e.type)||o.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!o.steps.length)return o}})}function IUe(e){return new sr({key:new Wr("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const l=r.target;if(!l)return!1;const f=e.editor.view.dom;o=l.closest("a"),o&&!f.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(e.enableClickSelection&&(a=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){const l=SK(t.state,e.type.name),f=(i=o.href)!=null?i:l.href,c=(s=o.target)!=null?s:l.target;f&&(window.open(f,c),a=!0)}return a}}})}function NUe(e){return new sr({key:new Wr("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:i}=e,{state:s}=t,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const f=sY(l,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!f||i!==void 0&&!i(f.value)?!1:e.editor.commands.setMark(e.type,{href:f.href})}}})}function au(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(AUe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var oY=o1.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){$O(e);return}$O(e.scheme,e.optionalSlashes)})},onDestroy(){EUe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!au(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>{const t=/^[a-z][a-z0-9+.-]*:\/\//i.test(e),n=/^[a-z][a-z0-9+.-]*:/i.test(e);if(t||n&&!e.includes("@"))return!0;const i=(e.includes("@")?e.split("@").pop():e).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!au(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!au(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Sr(this.options.HTMLAttributes,e),0]:["a",Sr(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n,r,i,s;const o=(r=(n=e.attrs)==null?void 0:n.href)!=null?r:"",a=(s=(i=e.attrs)==null?void 0:i.title)!=null?s:"",l=t.renderChildren(e);return a?`[${l}](${o} "${a}")`:`[${l}](${o})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!au(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!au(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Fh({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=sY(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!au(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&t.push({text:s.value,data:{href:s.href},index:s.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(TUe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!au(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(IUe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(NUe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),rT=oY,RUe=Object.defineProperty,_Ue=(e,t)=>{for(var n in t)RUe(e,n,{get:t[n],enumerable:!0})},PUe="listItem",zO="textStyle",HO=/^\s*([-+*])\s$/,aY=Ws.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Sr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(PUe,this.editor.getAttributes(zO)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=r6({find:HO,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=r6({find:HO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(zO),editor:this.editor})),[e]}}),lY=Ws.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Sr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))n=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),a=t.parseChildren(o);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>WM(e,t,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),DUe={};_Ue(DUe,{findListItemPos:()=>_b,getNextListDepth:()=>iT,handleBackspace:()=>uC,handleDelete:()=>hC,hasListBefore:()=>cY,hasListItemAfter:()=>LUe,hasListItemBefore:()=>fY,listItemHasSubList:()=>dY,nextListIsDeeper:()=>uY,nextListIsHigher:()=>hY});var _b=(e,t)=>{const{$from:n}=t.selection,r=Lr(e,t.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:t.doc.resolve(o),depth:a}},iT=(e,t)=>{const n=_b(e,t);if(!n)return!1;const[,r]=V2e(t,e,n.$pos.pos+4);return r},cY=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},fY=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},dY=(e,t,n)=>{if(!n)return!1;const r=Lr(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},uC=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!C0(e.state,t)&&cY(e.state,t,n)){const{$anchor:a}=e.state.selection,l=e.state.doc.resolve(a.before()-1),f=[];l.node().descendants((u,h)=>{u.type.name===t&&f.push({node:u,pos:h})});const c=f.at(-1);if(!c)return!1;const d=e.state.doc.resolve(l.start()+c.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!C0(e.state,t)||!K2e(e.state))return!1;const r=_b(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=dY(t,e.state,s);return fY(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},uY=(e,t)=>{const n=iT(e,t),r=_b(e,t);return!r||!n?!1:n>r.depth},hY=(e,t)=>{const n=iT(e,t),r=_b(e,t);return!r||!n?!1:n<r.depth},hC=(e,t)=>{if(!C0(e.state,t)||!X2e(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:uY(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():hY(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},LUe=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},pY=kr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&hC(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&hC(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&uC(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&uC(e,n,r)&&(t=!0)}),t}}}}),VO=/^(\s*)(\d+)\.\s+(.*)$/,OUe=/^\s/;function jUe(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n],s=i.match(VO);if(!s)break;const[,o,a,l]=s,f=o.length;let c=l,d=n+1;const u=[i];for(;d<e.length;){const h=e[d];if(h.match(VO))break;if(h.trim()==="")u.push(h),c+=`
`,d+=1;else if(h.match(OUe))u.push(h),c+=`
${h.slice(f+2)}`,d+=1;else break}t.push({indent:f,number:parseInt(a,10),content:c.trim(),raw:u.join(`
`)}),r=d,n=d}return[t,r]}function mY(e,t,n){var r;const i=[];let s=0;for(;s<e.length;){const o=e[s];if(o.indent===t){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",f=[];l&&f.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const c=a.slice(1).join(`
`).trim();if(c){const h=n.blockTokens(c);f.push(...h)}let d=s+1;const u=[];for(;d<e.length&&e[d].indent>t;)u.push(e[d]),d+=1;if(u.length>0){const h=Math.min(...u.map(U=>U.indent)),g=mY(u,h,n);f.push({type:"list",ordered:!0,start:u[0].number,items:g,raw:u.map(U=>U.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:f}),s=d}else s+=1}return i}function BUe(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=t.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=t.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var FUe="listItem",WO="textStyle",GO=/^(\d+)\.\s$/,gY=Ws.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Sr(this.options.HTMLAttributes,n),0]:["ol",Sr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?BUe(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const i=e.split(`
`),[s,o]=jUe(i);if(s.length===0)return;const a=mY(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(FUe,this.editor.getAttributes(WO)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=r6({find:GO,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=r6({find:GO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(WO)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),$Ue=/^\s*(\[([( |x])?\])\s$/,zUe=Ws.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Sr(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const i=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return WM(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),f=d=>{var u,h;a.ariaLabel=((h=(u=this.options.a11y)==null?void 0:u.checkboxLabel)==null?void 0:h.call(u,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};f(e),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:u}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const g=n();if(typeof g!="number")return!1;const U=h.doc.nodeAt(g);return h.setNodeMarkup(g,void 0,{...U==null?void 0:U.attrs,checked:u}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,u)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,u])=>{i.setAttribute(d,u)}),i.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(t).forEach(([d,u])=>{i.setAttribute(d,u)});let c=new Set(Object.keys(t));return{dom:i,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;i.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,f(d);const u=r.extensionManager.attributes,h=C2(d,u),g=new Set(Object.keys(h)),U=this.options.HTMLAttributes;return c.forEach(y=>{g.has(y)||(y in U?i.setAttribute(y,U[y]):i.removeAttribute(y))}),Object.entries(h).forEach(([y,x])=>{x==null?y in U?i.setAttribute(y,U[y]):i.removeAttribute(y):i.setAttribute(y,x)}),c=g,!0}}}},addInputRules(){return[r6({find:$Ue,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),HUe=Ws.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Sr(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=s=>{const o=nC(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=nC(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});kr.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(aY.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(lY.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(pY.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(gY.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(zUe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(HUe.configure(this.options.taskList)),e}});var XO="&nbsp;",VUe="",WUe=Ws.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Sr(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];if(n.length===1&&n[0].type==="image")return t.parseChildren([n[0]]);const r=t.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===XO||r[0].text===VUe)?t.createNode("paragraph",void 0,[]):t.createNode("paragraph",void 0,r)},renderMarkdown:(e,t)=>{if(!e)return"";const n=Array.isArray(e.content)?e.content:[];return n.length===0?XO:t.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),GUe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,XUe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,KUe=o1.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Sr(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[n6({find:GUe,type:this.type})]},addPasteRules(){return[Fh({find:XUe,type:this.type})]}}),YUe=Ws.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),ZUe=o1.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Sr(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function qUe(e={}){return new sr({view(t){return new QUe(t,e)}})}class QUe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=t.nodeBefore,u=t.nodeAfter;if(d||u){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let g=h.getBoundingClientRect(),U=d?g.bottom:g.top;d&&u&&(U=(U+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:g.left,right:g.right,top:U-y,bottom:U+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),u=this.width/2*o;r={left:d.left-u,right:d.left+u,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")f=-pageXOffset,c=-pageYOffset;else{let d=l.getBoundingClientRect(),u=d.width/l.offsetWidth,h=d.height/l.offsetHeight;f=d.left-l.scrollLeft*u,c=d.top-l.scrollTop*h}this.element.style.left=(r.left-f)/o+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=mX(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class mr extends Dt{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return mr.valid(r)?new mr(r):Dt.near(r)}content(){return We.empty}eq(t){return t instanceof mr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new mr(t.resolve(n.pos))}getBookmark(){return new sT(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!JUe(t)||!eye(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&mr.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(n>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let l=t.doc.resolve(i);if(mr.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!lt.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=t.doc.resolve(i);if(mr.valid(a))return a}return null}}}mr.prototype.visible=!1;mr.findFrom=mr.findGapCursorFrom;Dt.jsonID("gapcursor",mr);class sT{constructor(t){this.pos=t}map(t){return new sT(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return mr.valid(n)?new mr(n):Dt.near(n)}}function bY(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function JUe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||bY(i.type))return!0;if(i.inlineContent)return!1}}return!0}function eye(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||bY(i.type))return!0;if(i.inlineContent)return!1}}return!0}function tye(){return new sr({props:{decorations:sye,createSelectionBetween(e,t,n){return t.pos==n.pos&&mr.valid(n)?new mr(n):null},handleClick:rye,handleKeyDown:nye,handleDOMEvents:{beforeinput:iye}}})}const nye=fK({ArrowLeft:HU("horiz",-1),ArrowRight:HU("horiz",1),ArrowUp:HU("vert",-1),ArrowDown:HU("vert",1)});function HU(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof kt){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let f=mr.findGapCursorFrom(a,t,l);return f?(i&&i(r.tr.setSelection(new mr(f))),!0):!1}}function rye(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!mr.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&lt.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new mr(r))),!0)}function iye(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof mr))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=Me.empty;for(let o=r.length-1;o>=0;o--)i=Me.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new We(i,0,0));return s.setSelection(kt.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function sye(e){if(!(e.selection instanceof mr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Jn.create(e.doc,[ds.widget(e.selection.head,t,{key:"gapcursor"})])}var N4=200,ci=function(){};ci.prototype.append=function(t){return t.length?(t=ci.from(t),!this.length&&t||t.length<N4&&this.leafAppend(t)||this.length<N4&&t.leafPrepend(this)||this.appendInner(t)):this};ci.prototype.prepend=function(t){return t.length?ci.from(t).append(this):this};ci.prototype.appendInner=function(t){return new oye(this,t)};ci.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?ci.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};ci.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};ci.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};ci.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};ci.from=function(t){return t instanceof ci?t:t&&t.length?new UY(t):ci.empty};var UY=function(e){function t(r){e.call(this),this.values=r}t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=N4)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=N4)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(ci);ci.empty=new UY([]);var oye=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(ci);const aye=500;class Fa{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,a,l,f=[],c=[];return this.items.forEach((d,u)=>{if(!d.step){i||(i=this.remapping(r,u+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new Tl(d.map));let h=d.step.map(i.slice(s)),g;h&&o.maybeStep(h).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],f.push(new Tl(g,void 0,void 0,f.length+c.length))),s--,g&&i.appendMap(g,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new Fa(this.items.slice(0,r).append(c.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<t.steps.length;c++){let d=t.steps[c].invert(t.docs[c]),u=new Tl(t.mapping.maps[c],d,n),h;(h=l&&l.merge(u))&&(u=h,c?s.pop():a=a.slice(0,a.length-1)),s.push(u),n&&(o++,n=void 0),i||(l=u)}let f=o-r.depth;return f>cye&&(a=lye(a,f),o-=f),new Fa(a.append(s),o)}remapping(t,n){let r=new x2;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new Fa(this.items.append(t.map(n=>new Tl(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(u=>{u.selection&&a--},i);let l=n;this.items.forEach(u=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let g=s.maps[h];if(u.step){let U=t.steps[h].invert(t.docs[h]),y=u.selection&&u.selection.map(s.slice(l+1,h));y&&a++,r.push(new Tl(g,U,y))}else r.push(new Tl(g))},i);let f=[];for(let u=n;u<o;u++)f.push(new Tl(s.maps[u]));let c=this.items.slice(0,i).append(f).append(r),d=new Fa(c,a);return d.emptyItemCount()>aye&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),f=l&&l.getMap();if(r--,f&&n.appendMap(f,r),l){let c=o.selection&&o.selection.map(n.slice(r));c&&s++;let d=new Tl(f.invert(),l,c),u,h=i.length-1;(u=i.length&&i[h].merge(d))?i[h]=u:i.push(d)}}else o.map&&r--},this.items.length,0),new Fa(ci.from(i.reverse()),s)}}Fa.empty=new Fa(ci.empty,0);function lye(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Tl{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Tl(n.getMap().invert(),n,this.selection)}}}class Rd{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const cye=20;function fye(e,t,n,r){let i=n.getMeta(yh),s;if(i)return i.historyState;n.getMeta(hye)&&(e=new Rd(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(yh))return o.getMeta(yh).redo?new Rd(e.done.addTransform(n,void 0,r,Fy(t)),e.undone,KO(n.mapping.maps),e.prevTime,e.prevComposition):new Rd(e.done,e.undone.addTransform(n,void 0,r,Fy(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!o&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!dye(n,e.prevRanges)),f=o?pE(e.prevRanges,n.mapping):KO(n.mapping.maps);return new Rd(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,Fy(t)),Fa.empty,f,n.time,a??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Rd(e.done.rebased(n,s),e.undone.rebased(n,s),pE(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Rd(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),pE(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function dye(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function KO(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function pE(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function uye(e,t,n){let r=Fy(t),i=yh.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),l=new Rd(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(yh,{redo:n,historyState:l})}let mE=!1,YO=null;function Fy(e){let t=e.plugins;if(YO!=t){mE=!1,YO=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){mE=!0;break}}return mE}const yh=new Wr("history"),hye=new Wr("closeHistory");function pye(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new sr({key:yh,state:{init(){return new Rd(Fa.empty,Fa.empty,null,0,-1)},apply(t,n,r){return fye(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?xY:r=="historyRedo"?vY:null;return!i||!t.editable?!1:(n.preventDefault(),i(t.state,t.dispatch))}}}})}function yY(e,t){return(n,r)=>{let i=yh.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=uye(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const xY=yY(!1,!0),vY=yY(!0,!0);kr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new sr({key:new Wr("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(a,l);return e=!0,f}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,l=s-r,f=a-l,c=a;return t.deleteRange(f,c),!(this.storage.characters({node:t.doc})>r)}})]}});var mye=kr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[qUe(this.options)]}});kr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new sr({key:new Wr("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Jn.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((l,f)=>{if(l.isText)return;if(!(i>=f&&i<=f+l.nodeSize-1))return!1;o+=1});let a=0;return e.descendants((l,f)=>{if(l.isText||!(i>=f&&i<=f+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(ds.node(f,f+l.nodeSize,{class:this.options.className}))}),Jn.create(e,s)}}})]}});var gye=kr.create({name:"gapCursor",addProseMirrorPlugins(){return[tye()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=sn(st(e,"allowGapCursor",n)))!=null?t:null}}}),ZO="placeholder";function bye(e){return e.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var Uye=kr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:ZO,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const e=this.options.dataAttribute?`data-${bye(this.options.dataAttribute)}`:`data-${ZO}`;return[new sr({key:new Wr("placeholder"),props:{decorations:({doc:t,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,s=[];if(!r)return null;const o=this.editor.isEmpty;return t.descendants((a,l)=>{const f=i>=l&&i<=l+a.nodeSize,c=!a.isLeaf&&v7(a);if((f||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const u=ds.node(l,l+a.nodeSize,{class:d.join(" "),[e]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:f}):this.options.placeholder});s.push(u)}return this.options.includeChildren}),Jn.create(t,s)}}})]}});kr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new sr({key:new Wr("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||CK(n.selection)||e.view.dragging?null:Jn.create(n.doc,[ds.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function qO({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var yye=kr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new Wr(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new sr({key:t,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:f}=o,c=t.getState(o),d=a.content.size,u=f.nodes[n];if(c)return l.insert(d,u.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!qO({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!qO({node:o,types:r})}}})]}}),xye=kr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>xY(e,t),redo:()=>({state:e,dispatch:t})=>vY(e,t)}},addProseMirrorPlugins(){return[pye(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),vye=kr.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(G8e.configure(this.options.bold)),this.options.blockquote!==!1&&i.push($8e.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(aY.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Y8e.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Q8e.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(J8e.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(mye.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(gye.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(eUe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(tUe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(xye.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(nUe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(aUe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(lY.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(pY.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(oY.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(gY.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(WUe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(KUe.configure(this.options.strike)),this.options.text!==!1&&i.push(YUe.configure(this.options.text)),this.options.underline!==!1&&i.push(ZUe.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(yye.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),oT=vye,wye=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,Eye=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,wY=e=>e.match(wye),QO=(e,t)=>t?"https://www.youtube-nocookie.com/embed/videoseries?list=":e?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",Sye=e=>{const{url:t,allowFullscreen:n,autoplay:r,ccLanguage:i,ccLoadPolicy:s,controls:o,disableKBcontrols:a,enableIFrameApi:l,endTime:f,interfaceLanguage:c,ivLoadPolicy:d,loop:u,modestBranding:h,nocookie:g,origin:U,playlist:y,progressBarColor:x,startAt:w,rel:E}=e;if(!wY(t))return null;if(t.includes("/embed/"))return t;if(t.includes("youtu.be")){const T=t.split("/").pop();return T?`${QO(g)}${T}`:null}const A=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(t);if(!A||!A[2])return null;let M=`${QO(g,A[1]==="list")}${A[2]}`;const C=[];return n===!1&&C.push("fs=0"),r&&C.push("autoplay=1"),i&&C.push(`cc_lang_pref=${i}`),s&&C.push("cc_load_policy=1"),o||C.push("controls=0"),a&&C.push("disablekb=1"),l&&C.push("enablejsapi=1"),f&&C.push(`end=${f}`),c&&C.push(`hl=${c}`),d&&C.push(`iv_load_policy=${d}`),u&&C.push("loop=1"),h&&C.push("modestbranding=1"),U&&C.push(`origin=${U}`),y&&C.push(`playlist=${y}`),w&&C.push(`start=${w}`),x&&C.push(`color=${x}`),E!==void 0&&C.push(`rel=${E}`),C.length&&(M+=`${A[1]==="list"?"&":"?"}${C.join("&")}`),M},kye=Ws.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:e=>({commands:t})=>wY(e.src)?t.insertContent({type:this.name,attrs:e}):!1}},addPasteRules(){return this.options.addPasteHandler?[Fbe({find:Eye,type:this.type,getAttributes:e=>({src:e.input})})]:[]},renderHTML({HTMLAttributes:e}){const t=Sye({url:e.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:e.start||0,rel:this.options.rel});return e.src=t,["div",{"data-youtube-video":""},["iframe",Sr(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},e)]]},...VK({nodeName:"youtube",allowedAttributes:["src","width","height","start"]})}),aT=kye,lT=Uye;const R4=({label:e,placeholder:t,onSubmit:n,onCancel:r})=>{const[i,s]=I.useState(""),o=I.useRef(null);I.useEffect(()=>{var f;(f=o.current)==null||f.focus()},[]);const a=()=>{i.trim()&&n(i.trim())},l=f=>{f.key==="Enter"?(f.preventDefault(),a()):f.key==="Escape"&&r()};return m.jsx("div",{className:"im-overlay",onMouseDown:r,children:m.jsxs("div",{className:"im-dialog",onMouseDown:f=>f.stopPropagation(),children:[m.jsx("label",{className:"im-label",children:e}),m.jsx("input",{ref:o,className:"im-input",type:"text",placeholder:t,value:i,onChange:f=>s(f.target.value),onKeyDown:l}),m.jsxs("div",{className:"im-actions",children:[m.jsx("button",{className:"im-cancel",onClick:r,children:"Cancel"}),m.jsx("button",{className:"im-submit",disabled:!i.trim(),onClick:a,children:"Add"})]})]})})},Cye=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],Aye={ROOT:"#888",EVIDENCE:"#4fc3f7",REFERENCE:"#ab47bc",CONTEXT:"#ff8a65",EXAMPLE:"#66bb6a",COUNTERPOINT:"#ef5350",SYNTHESIS:"#fdd835"},EY=({editor:e})=>{const[t,n]=I.useState(null);if(!e)return null;const r=({onClick:s,active:o,children:a})=>m.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:a}),i=()=>m.jsx("span",{className:"ar-toolbar-divider"});return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"ar-toolbar",children:[m.jsx(r,{onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold"),children:"B"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic"),children:"I"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike"),children:"S"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),active:e.isActive("heading",{level:1}),children:"H1"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2}),children:"H2"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3}),children:"H3"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList"),children:"Bullet"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList"),children:"Ordered"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote"),children:"Quote"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock"),children:"Code"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>n("link"),active:e.isActive("link"),children:"Link"}),m.jsx(r,{onClick:()=>n("youtube"),children:"YouTube"})]}),t==="link"&&m.jsx(R4,{label:"Enter URL",placeholder:"https://example.com",onSubmit:s=>{e.chain().focus().extendMarkRange("link").setLink({href:s}).run(),n(null)},onCancel:()=>n(null)}),t==="youtube"&&m.jsx(R4,{label:"Enter YouTube URL",placeholder:"https://youtube.com/watch?v=...",onSubmit:s=>{e.commands.setYoutubeVideo({src:s}),n(null)},onCancel:()=>n(null)})]})};function Mye(e){const t=SY(e);let n=e.content;n&&typeof n=="object"&&n.content!==void 0&&(n=n.content);let r=n;if(typeof n=="string"&&(n.startsWith("{")||n.startsWith("[")))try{r=JSON.parse(n)}catch{}switch(t){case"ROOT":return{title:(typeof r=="object"?r==null?void 0:r.title:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.description:null)||"",keywords:typeof r=="object"&&(r!=null&&r.keywords)?Array.isArray(r.keywords)?r.keywords.join(", "):r.keywords:""};case"EVIDENCE":return{title:(typeof r=="object"?r==null?void 0:r.source:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.point:null)||""};case"EXAMPLE":return{title:(typeof r=="object"?r==null?void 0:r.title:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.description:null)||""};case"COUNTERPOINT":return{title:(typeof r=="object"?r==null?void 0:r.argument:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.explanation:null)||""};default:return{title:e.title||"",html:typeof n=="string"?n:""}}}function Tye(e,t,n,r){switch(e){case"ROOT":return JSON.stringify({title:t,description:n,keywords:r?r.split(",").map(i=>i.trim()).filter(Boolean):[]});case"EVIDENCE":return JSON.stringify({point:n,source:t});case"EXAMPLE":return JSON.stringify({title:t,description:n});case"COUNTERPOINT":return JSON.stringify({argument:t,explanation:n});default:return n}}const Iye=e=>{if(!e)return m.jsx("p",{className:"ar-empty",children:"No content available."});let t=e;if(typeof t=="object"&&(t=t.content||t.text||JSON.stringify(t,null,2)),typeof t!="string")return m.jsx("p",{className:"ar-empty",children:"No content available."});if(t.trim().startsWith("<"))return m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:t}});const n=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/,r=/https?:\/\/[^\s<>"]+/g;return t.split(/\n{2,}/).flatMap(s=>s.includes(`
`)?s.split(`
`):[s]).filter(s=>s.trim()!=="").map((s,o)=>{const a=s.trim().match(n);if(a)return m.jsx("div",{className:"ar-youtube",children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${a[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`video-${o}`})},o);const l=[];let f=0,c;for(r.lastIndex=0;(c=r.exec(s))!==null;)c.index>f&&l.push(s.slice(f,c.index)),l.push(m.jsx("a",{href:c[0],target:"_blank",rel:"noopener noreferrer",children:c[0]},c.index)),f=c.index+c[0].length;return f<s.length&&l.push(s.slice(f)),m.jsx("p",{children:l.length?l:s},o)})},SY=e=>e.node_type?e.node_type:typeof e.type=="number"?Cye[e.type]||"ROOT":e.type||"ROOT",VU=e=>{if(!e)return null;const t=String(e);return/<[a-z][\s\S]*>/i.test(t)?m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:t}}):m.jsx("p",{children:t})},Nye=e=>{var n;let t=e.content;if(!t)return null;if(typeof t=="string")try{const r=JSON.parse(t);typeof r=="object"&&(t=r)}catch{}return typeof t=="object"?t.title&&t.description&&"keywords"in t?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.title}),VU(t.description),((n=t.keywords)==null?void 0:n.length)>0&&m.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.9rem",marginTop:16},children:m.jsxs("em",{children:["Keywords: ",Array.isArray(t.keywords)?t.keywords.join(", "):t.keywords]})})]}):t.point?m.jsxs("div",{children:[VU(t.point),t.source&&m.jsxs("p",{style:{color:"rgba(255,255,255,0.5)",fontStyle:"italic",marginTop:16},children:["Source: ",t.source]})]}):t.title&&t.description?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.title}),VU(t.description)]}):t.argument?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.argument}),t.explanation&&VU(t.explanation)]}):t.content?t.content:t.text?t.text:JSON.stringify(t,null,2):t},Rye=({thread:e,onContentChange:t})=>{var l,f;const n=I.useRef(null),[r,i]=I.useState(null),s=GM({extensions:[oT,rT.configure({openOnClick:!1}),aT.configure({width:640,height:360}),lT.configure({placeholder:"Start writing your thread content here..."})],content:e.content||"",onUpdate:({editor:c})=>{const d=c.getHTML();n.current&&clearTimeout(n.current),i("saving"),n.current=setTimeout(async()=>{try{await ti.updateThreadContent(e.id,d),i("saved"),t&&t(d),setTimeout(()=>i(null),2e3)}catch(u){console.error("Failed to save content:",u),i(null)}},800)}});I.useEffect(()=>{s&&e.content!==void 0&&s.getHTML()==="<p></p>"&&e.content&&e.content!=="<p></p>"&&s.commands.setContent(e.content)},[e.id]);const o=((l=e.metadata)==null?void 0:l.title)||e.title||`Thread ${e.id}`,a=((f=e.metadata)==null?void 0:f.description)||e.description||"";return m.jsxs("article",{className:"ar-article",children:[m.jsx("h1",{className:"ar-title",children:o}),a&&m.jsx("p",{className:"ar-description",children:a}),m.jsx("hr",{className:"ar-divider"}),m.jsxs("div",{className:"ar-editor-section",children:[m.jsx(EY,{editor:s}),m.jsx("div",{className:"ar-editor-wrapper",children:m.jsx(S7,{editor:s})}),r&&m.jsx("div",{className:"ar-save-status",children:r==="saving"?"Saving...":"Saved"})]})]})},_ye=({thread:e,initialNodeId:t,onContentChange:n,onUpdateNode:r})=>{const[i,s]=I.useState(0),[o,a]=I.useState([]),[l,f]=I.useState(!0),[c,d]=I.useState(!1),[u,h]=I.useState(""),[g,U]=I.useState(""),[y,x]=I.useState(!1),w=GM({extensions:[oT,rT.configure({openOnClick:!1}),aT.configure({width:640,height:360}),lT.configure({placeholder:"Edit content..."})],content:""});I.useEffect(()=>{d(!1)},[i]),I.useEffect(()=>{e!=null&&e.id&&E()},[e==null?void 0:e.id]),I.useEffect(()=>{if(!t||o.length===0)return;const M=o.findIndex(C=>C.id===t);M>=0&&s(M+1)},[t,o]);const E=async()=>{f(!0);try{const M=e.nodes||[],C=await ti.loadArticleSequence(e.id);let T;if(C&&Array.isArray(C)){const R=new Set(C),P=C.map(O=>M.find(F=>F.id===O)).filter(Boolean),_=M.filter(O=>!R.has(O.id));T=[...P,..._]}else T=[...M];if(a(T),t){const R=T.findIndex(P=>P.id===t);s(R>=0?R+1:0)}else s(0)}catch(M){console.error("Failed to load article sequence:",M);const C=[...e.nodes||[]];if(a(C),t){const T=C.findIndex(R=>R.id===t);s(T>=0?T+1:0)}else s(0)}finally{f(!1)}};if(!e)return null;const S=1+o.length,A=()=>{if(i===0)return m.jsx(Rye,{thread:e,onContentChange:n});const M=o[i-1];if(!M)return m.jsx("p",{className:"ar-empty",children:"Node not found."});const C=SY(M),T=Aye[C]||"#888",R=M.title||`Node ${M.id}`,P=Nye(M),_=Te.isValidElement(P),O=()=>{const{title:B,html:$,keywords:z}=Mye(M);h(B),U(z||""),w==null||w.commands.setContent($||""),d(!0)},F=async()=>{if(!w||!r)return;const B=w.getHTML(),$=Tye(C,u,B,g);x(!0);try{await r({nodeId:M.id,threadId:e.id},{title:u,content:$}),a(z=>z.map(H=>H.id===M.id?{...H,title:u,content:$}:H)),d(!1)}catch(z){console.error("Failed to save node:",z)}finally{x(!1)}};return m.jsxs("article",{className:"ar-article",children:[m.jsxs("div",{className:"ar-node-header",children:[m.jsx("div",{className:"ar-node-badge",style:{background:T},children:C}),!c&&r&&m.jsx("button",{className:"ar-edit-btn",onClick:O,children:"Edit"}),c&&m.jsxs("div",{className:"ar-edit-actions",children:[m.jsx("button",{className:"ar-save-btn",onClick:F,disabled:y,children:y?"Saving":"Save"}),m.jsx("button",{className:"ar-cancel-btn",onClick:()=>d(!1),disabled:y,children:"Cancel"})]})]}),c?m.jsxs(m.Fragment,{children:[m.jsx("input",{className:"ar-edit-title",type:"text",value:u,onChange:B=>h(B.target.value),placeholder:"Title"}),C==="ROOT"&&m.jsx("input",{className:"ar-edit-keywords",type:"text",value:g,onChange:B=>U(B.target.value),placeholder:"Keywords (comma-separated)"}),m.jsx("hr",{className:"ar-divider"}),m.jsxs("div",{className:"ar-editor-section",children:[m.jsx(EY,{editor:w}),m.jsx("div",{className:"ar-editor-wrapper",children:m.jsx(S7,{editor:w})})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h1",{className:"ar-title",children:R}),m.jsx("hr",{className:"ar-divider"}),m.jsx("div",{className:"ar-content",children:_?P:Iye(P)})]})]})};return m.jsxs("div",{className:"ar-page",children:[m.jsx("main",{className:"ar-body",children:l?m.jsx("div",{className:"ar-loading",children:"Loading..."}):A()}),!l&&S>1&&m.jsxs("div",{className:"ar-nav",children:[m.jsx("button",{className:"ar-nav-btn",disabled:i===0,onClick:()=>s(M=>M-1),children:" Prev"}),m.jsxs("span",{className:"ar-nav-info",children:[i+1," / ",S]}),m.jsx("button",{className:"ar-nav-btn",disabled:i>=S-1,onClick:()=>s(M=>M+1),children:"Next "})]})]})},Pye="modulepreload",Dye=function(e){return"/"+e},JO={},Ve=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Dye(l),l in JO)return;JO[l]=!0;const f=l.endsWith(".css"),c=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":Pye,f||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),f)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var vt={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"false",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",PKG_NAME:"@excalidraw/excalidraw",PKG_VERSION:"0.18.0",PROD:!0},kY=Object.defineProperty,Lye=(e,t,n)=>t in e?kY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RHe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Oye=e=>t=>{var n=e[t];if(n)return n();throw new Error("Module not found in bundle: "+t)},CY=(e,t)=>{for(var n in t)kY(e,n,{get:t[n],enumerable:!0})},Z=(e,t,n)=>(Lye(e,typeof t!="symbol"?t+"":t,n),n),gE={},ej;function jye(){return ej||(ej=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var f=0,c=new Array(256),d=0;d!=256;++d)f=d,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,c[d]=f;return typeof Int32Array<"u"?new Int32Array(c):c}var r=n(),i=typeof Buffer<"u";function s(f){if(f.length>32768&&i)return a(new Buffer(f));for(var c=-1,d=f.length-1,u=0;u<d;)c=r[(c^f.charCodeAt(u++))&255]^c>>>8,c=r[(c^f.charCodeAt(u++))&255]^c>>>8;return u===d&&(c=c>>>8^r[(c^f.charCodeAt(u))&255]),c^-1}function o(f){if(f.length>1e4)return a(f);for(var c=-1,d=0,u=f.length-3;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+3;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function a(f){for(var c=-1,d=0,u=f.length-7;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+7;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function l(f){for(var c=-1,d=0,u=f.length,h,g;d<u;)h=f.charCodeAt(d++),h<128?c=c>>>8^r[(c^h)&255]:h<2048?(c=c>>>8^r[(c^(192|h>>6&31))&255],c=c>>>8^r[(c^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,g=f.charCodeAt(d++)&1023,c=c>>>8^r[(c^(240|h>>8&7))&255],c=c>>>8^r[(c^(128|h>>2&63))&255],c=c>>>8^r[(c^(128|g>>6&15|h&3))&255],c=c>>>8^r[(c^(128|g&63))&255]):(c=c>>>8^r[(c^(224|h>>12&15))&255],c=c>>>8^r[(c^(128|h>>6&63))&255],c=c>>>8^r[(c^(128|h&63))&255]);return c^-1}t.table=r,t.bstr=s,t.buf=o,t.str=l})}(gE)),gE}var bE,tj;function Bye(){if(tj)return bE;tj=1;var e=jye();bE=i;var t=new Uint8Array(4),n=new Int32Array(t.buffer),r=new Uint32Array(t.buffer);function i(s){if(s[0]!==137)throw new Error("Invalid .png file header");if(s[1]!==80)throw new Error("Invalid .png file header");if(s[2]!==78)throw new Error("Invalid .png file header");if(s[3]!==71)throw new Error("Invalid .png file header");if(s[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(s[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(s[6]!==26)throw new Error("Invalid .png file header");if(s[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var o=!1,a=[],l=8;l<s.length;){t[3]=s[l++],t[2]=s[l++],t[1]=s[l++],t[0]=s[l++];var f=r[0]+4,c=new Uint8Array(f);c[0]=s[l++],c[1]=s[l++],c[2]=s[l++],c[3]=s[l++];var d=String.fromCharCode(c[0])+String.fromCharCode(c[1])+String.fromCharCode(c[2])+String.fromCharCode(c[3]);if(!a.length&&d!=="IHDR")throw new Error("IHDR header missing");if(d==="IEND"){o=!0,a.push({name:d,data:new Uint8Array(0)});break}for(var u=4;u<f;u++)c[u]=s[l++];t[3]=s[l++],t[2]=s[l++],t[1]=s[l++],t[0]=s[l++];var h=n[0],g=e.buf(c);if(g!==h)throw new Error("CRC values for "+d+" header do not match, PNG file is likely corrupted");var U=new Uint8Array(c.buffer.slice(4));a.push({name:d,data:U})}if(!o)throw new Error(".png file ended prematurely: no IEND header was found");return a}return bE}var Fye=Bye();const AY=mc(Fye);var WU={},UE,nj;function $ye(){if(nj)return UE;nj=1,UE=e;function e(t,n){if(t=String(t),n=String(n),!/^[\x00-\xFF]+$/.test(t)||!/^[\x00-\xFF]+$/.test(n))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(t.length>=80)throw new Error('Keyword "'+t+'" is longer than the 79-character limit imposed by the PNG specification');for(var r=t.length+n.length+1,i=new Uint8Array(r),s=0,o,a=0;a<t.length;a++){if(!(o=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt keywords");i[s++]=o}i[s++]=0;for(var l=0;l<n.length;l++){if(!(o=n.charCodeAt(l)))throw new Error("0x00 character is not permitted in tEXt content");i[s++]=o}return{name:"tEXt",data:i}}return UE}var yE,rj;function zye(){if(rj)return yE;rj=1,yE=e;function e(t){t.data&&t.name&&(t=t.data);for(var n=!0,r="",i="",s=0;s<t.length;s++){var o=t[s];if(n)o?i+=String.fromCharCode(o):n=!1;else if(o)r+=String.fromCharCode(o);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:r}}return yE}var ij;function Hye(){return ij||(ij=1,WU.encode=$ye(),WU.decode=zye()),WU}var Vye=Hye();const MY=mc(Vye);var xE,sj;function Wye(){return sj||(sj=1,xE=function(e,t,n){var r=[],i=e.length;if(i===0)return r;var s=t<0?Math.max(0,t+i):t||0;for(n!==void 0&&(i=n<0?n+i:n);i-- >s;)r[i-s]=e[i];return r}),xE}var vE={},oj;function Gye(){return oj||(oj=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var f=0,c=new Array(256),d=0;d!=256;++d)f=d,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,c[d]=f;return typeof Int32Array<"u"?new Int32Array(c):c}var r=n(),i=typeof Buffer<"u";function s(f){if(f.length>32768&&i)return a(new Buffer(f));for(var c=-1,d=f.length-1,u=0;u<d;)c=r[(c^f.charCodeAt(u++))&255]^c>>>8,c=r[(c^f.charCodeAt(u++))&255]^c>>>8;return u===d&&(c=c>>>8^r[(c^f.charCodeAt(u))&255]),c^-1}function o(f){if(f.length>1e4)return a(f);for(var c=-1,d=0,u=f.length-3;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+3;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function a(f){for(var c=-1,d=0,u=f.length-7;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+7;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function l(f){for(var c=-1,d=0,u=f.length,h,g;d<u;)h=f.charCodeAt(d++),h<128?c=c>>>8^r[(c^h)&255]:h<2048?(c=c>>>8^r[(c^(192|h>>6&31))&255],c=c>>>8^r[(c^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,g=f.charCodeAt(d++)&1023,c=c>>>8^r[(c^(240|h>>8&7))&255],c=c>>>8^r[(c^(128|h>>2&63))&255],c=c>>>8^r[(c^(128|g>>6&15|h&3))&255],c=c>>>8^r[(c^(128|g&63))&255]):(c=c>>>8^r[(c^(224|h>>12&15))&255],c=c>>>8^r[(c^(128|h>>6&63))&255],c=c>>>8^r[(c^(128|h&63))&255]);return c^-1}t.table=r,t.bstr=s,t.buf=o,t.str=l})}(vE)),vE}var wE,aj;function Xye(){if(aj)return wE;aj=1;var e=Wye(),t=Gye();wE=s;var n=new Uint8Array(4),r=new Int32Array(n.buffer),i=new Uint32Array(n.buffer);function s(o){var a=8,l=a,f;for(f=0;f<o.length;f++)a+=o[f].data.length,a+=12;var c=new Uint8Array(a);for(c[0]=137,c[1]=80,c[2]=78,c[3]=71,c[4]=13,c[5]=10,c[6]=26,c[7]=10,f=0;f<o.length;f++){var d=o[f],u=d.name,h=d.data,g=h.length,U=[u.charCodeAt(0),u.charCodeAt(1),u.charCodeAt(2),u.charCodeAt(3)];i[0]=g,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0],c[l++]=U[0],c[l++]=U[1],c[l++]=U[2],c[l++]=U[3];for(var y=0;y<g;)c[l++]=h[y++];var x=U.concat(e(h)),w=t.buf(x);r[0]=w,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0]}return c}return wE}var Kye=Xye();const Yye=mc(Kye);/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Zye=4,lj=0,cj=1,qye=2;function C6(e){let t=e.length;for(;--t>=0;)e[t]=0}const Qye=0,TY=1,Jye=2,e3e=3,t3e=258,cT=29,Pb=256,T2=Pb+1+cT,Hp=30,fT=19,IY=2*T2+1,ju=15,EE=16,n3e=7,dT=256,NY=16,RY=17,_Y=18,pC=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$y=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r3e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),PY=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i3e=512,Kc=new Array((T2+2)*2);C6(Kc);const D5=new Array(Hp*2);C6(D5);const I2=new Array(i3e);C6(I2);const N2=new Array(t3e-e3e+1);C6(N2);const uT=new Array(cT);C6(uT);const _4=new Array(Hp);C6(_4);function SE(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let DY,LY,OY;function kE(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const jY=e=>e<256?I2[e]:I2[256+(e>>>7)],R2=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Bs=(e,t,n)=>{e.bi_valid>EE-n?(e.bi_buf|=t<<e.bi_valid&65535,R2(e,e.bi_buf),e.bi_buf=t>>EE-e.bi_valid,e.bi_valid+=n-EE):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Xl=(e,t,n)=>{Bs(e,n[t*2],n[t*2+1])},BY=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},s3e=e=>{e.bi_valid===16?(R2(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},o3e=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let f,c,d,u,h,g,U=0;for(u=0;u<=ju;u++)e.bl_count[u]=0;for(n[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<IY;f++)c=e.heap[f],u=n[n[c*2+1]*2+1]+1,u>l&&(u=l,U++),n[c*2+1]=u,!(c>r)&&(e.bl_count[u]++,h=0,c>=a&&(h=o[c-a]),g=n[c*2],e.opt_len+=g*(u+h),s&&(e.static_len+=g*(i[c*2+1]+h)));if(U!==0){do{for(u=l-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,U-=2}while(U>0);for(u=l;u!==0;u--)for(c=e.bl_count[u];c!==0;)d=e.heap[--f],!(d>r)&&(n[d*2+1]!==u&&(e.opt_len+=(u-n[d*2+1])*n[d*2],n[d*2+1]=u),c--)}},FY=(e,t,n)=>{const r=new Array(ju+1);let i=0,s,o;for(s=1;s<=ju;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=BY(r[a]++,a))}},a3e=()=>{let e,t,n,r,i;const s=new Array(ju+1);for(n=0,r=0;r<cT-1;r++)for(uT[r]=n,e=0;e<1<<pC[r];e++)N2[n++]=r;for(N2[n-1]=r,i=0,r=0;r<16;r++)for(_4[r]=i,e=0;e<1<<$y[r];e++)I2[i++]=r;for(i>>=7;r<Hp;r++)for(_4[r]=i<<7,e=0;e<1<<$y[r]-7;e++)I2[256+i++]=r;for(t=0;t<=ju;t++)s[t]=0;for(e=0;e<=143;)Kc[e*2+1]=8,e++,s[8]++;for(;e<=255;)Kc[e*2+1]=9,e++,s[9]++;for(;e<=279;)Kc[e*2+1]=7,e++,s[7]++;for(;e<=287;)Kc[e*2+1]=8,e++,s[8]++;for(FY(Kc,T2+1,s),e=0;e<Hp;e++)D5[e*2+1]=5,D5[e*2]=BY(e,5);DY=new SE(Kc,pC,Pb+1,T2,ju),LY=new SE(D5,$y,0,Hp,ju),OY=new SE(new Array(0),r3e,0,fT,n3e)},$Y=e=>{let t;for(t=0;t<T2;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Hp;t++)e.dyn_dtree[t*2]=0;for(t=0;t<fT;t++)e.bl_tree[t*2]=0;e.dyn_ltree[dT*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},zY=e=>{e.bi_valid>8?R2(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},l3e=(e,t,n,r)=>{zY(e),R2(e,n),R2(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},fj=(e,t,n,r)=>{const i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},CE=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&fj(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!fj(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},dj=(e,t,n)=>{let r,i,s=0,o,a;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,r===0?Xl(e,i,t):(o=N2[i],Xl(e,o+Pb+1,t),a=pC[o],a!==0&&(i-=uT[o],Bs(e,i,a)),r--,o=jY(r),Xl(e,o,n),a=$y[o],a!==0&&(r-=_4[o],Bs(e,r,a)));while(s<e.last_lit);Xl(e,dT,t)},mC=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,f;for(e.heap_len=0,e.heap_max=IY,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=l<2?++l:0,n[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=r[f*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)CE(e,n,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],CE(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[f*2]=n[o*2]+n[a*2],e.depth[f]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=f,e.heap[1]=f++,CE(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],o3e(e,t),FY(n,l,e.bl_count)},uj=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)&&(a<f?e.bl_tree[s*2]+=a:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[NY*2]++):a<=10?e.bl_tree[RY*2]++:e.bl_tree[_Y*2]++,a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4))},hj=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),r=0;r<=n;r++)if(s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)){if(a<f)do Xl(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==i&&(Xl(e,s,e.bl_tree),a--),Xl(e,NY,e.bl_tree),Bs(e,a-3,2)):a<=10?(Xl(e,RY,e.bl_tree),Bs(e,a-3,3)):(Xl(e,_Y,e.bl_tree),Bs(e,a-11,7));a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4)}},c3e=e=>{let t;for(uj(e,e.dyn_ltree,e.l_desc.max_code),uj(e,e.dyn_dtree,e.d_desc.max_code),mC(e,e.bl_desc),t=fT-1;t>=3&&e.bl_tree[PY[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},f3e=(e,t,n,r)=>{let i;for(Bs(e,t-257,5),Bs(e,n-1,5),Bs(e,r-4,4),i=0;i<r;i++)Bs(e,e.bl_tree[PY[i]*2+1],3);hj(e,e.dyn_ltree,t-1),hj(e,e.dyn_dtree,n-1)},d3e=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return lj;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return cj;for(n=32;n<Pb;n++)if(e.dyn_ltree[n*2]!==0)return cj;return lj};let pj=!1;const u3e=e=>{pj||(a3e(),pj=!0),e.l_desc=new kE(e.dyn_ltree,DY),e.d_desc=new kE(e.dyn_dtree,LY),e.bl_desc=new kE(e.bl_tree,OY),e.bi_buf=0,e.bi_valid=0,$Y(e)},HY=(e,t,n,r)=>{Bs(e,(Qye<<1)+(r?1:0),3),l3e(e,t,n)},h3e=e=>{Bs(e,TY<<1,3),Xl(e,dT,Kc),s3e(e)},p3e=(e,t,n,r)=>{let i,s,o=0;e.level>0?(e.strm.data_type===qye&&(e.strm.data_type=d3e(e)),mC(e,e.l_desc),mC(e,e.d_desc),o=c3e(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?HY(e,t,n,r):e.strategy===Zye||s===i?(Bs(e,(TY<<1)+(r?1:0),3),dj(e,Kc,D5)):(Bs(e,(Jye<<1)+(r?1:0),3),f3e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),dj(e,e.dyn_ltree,e.dyn_dtree)),$Y(e),r&&zY(e)},m3e=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(N2[n]+Pb+1)*2]++,e.dyn_dtree[jY(t)*2]++),e.last_lit===e.lit_bufsize-1);var g3e=u3e,b3e=HY,U3e=p3e,y3e=m3e,x3e=h3e,v3e={_tr_init:g3e,_tr_stored_block:b3e,_tr_flush_block:U3e,_tr_tally:y3e,_tr_align:x3e};const w3e=(e,t,n,r)=>{let i=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var _2=w3e;const E3e=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},S3e=new Uint32Array(E3e()),k3e=(e,t,n,r)=>{const i=S3e,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var Jr=k3e,$h={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},A6={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C3e,_tr_stored_block:A3e,_tr_flush_block:M3e,_tr_tally:U0,_tr_align:T3e}=v3e,{Z_NO_FLUSH:l1,Z_PARTIAL_FLUSH:I3e,Z_FULL_FLUSH:N3e,Z_FINISH:y0,Z_BLOCK:mj,Z_OK:Kl,Z_STREAM_END:gj,Z_STREAM_ERROR:Jo,Z_DATA_ERROR:R3e,Z_BUF_ERROR:AE,Z_DEFAULT_COMPRESSION:_3e,Z_FILTERED:P3e,Z_HUFFMAN_ONLY:GU,Z_RLE:D3e,Z_FIXED:L3e,Z_DEFAULT_STRATEGY:O3e,Z_UNKNOWN:j3e,Z_DEFLATED:C7}=A6,B3e=9,F3e=15,$3e=8,z3e=29,H3e=256,gC=H3e+1+z3e,V3e=30,W3e=19,G3e=2*gC+1,X3e=15,$t=3,a0=258,Za=a0+$t+1,K3e=32,A7=42,bC=69,zy=73,Hy=91,Vy=103,Bu=113,a5=666,Hr=1,Db=2,zh=3,M6=4,Y3e=3,l0=(e,t)=>(e.msg=$h[t],t),bj=e=>(e<<1)-(e>4?9:0),Bd=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Z3e=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,x0=Z3e;const kd=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Ei=(e,t)=>{M3e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,kd(e.strm)},en=(e,t)=>{e.pending_buf[e.pending++]=t},Ng=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},q3e=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=_2(e.adler,t,i,n):e.state.wrap===2&&(e.adler=Jr(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},VY=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-Za?e.strstart-(e.w_size-Za):0,f=e.window,c=e.w_mask,d=e.prev,u=e.strstart+a0;let h=f[r+o-1],g=f[r+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(f[i+o]!==g||f[i+o-1]!==h||f[i]!==f[r]||f[++i]!==f[r+1])){r+=2,i++;do;while(f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&r<u);if(s=a0-(u-r),r=u-a0,s>o){if(e.match_start=t,o=s,s>=a)break;h=f[r+o-1],g=f[r+o]}}while((t=d[t&c])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},Hh=e=>{const t=e.w_size;let n,r,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Za)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);s+=t}if(e.strm.avail_in===0)break;if(r=q3e(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=$t)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=x0(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=x0(e,e.ins_h,e.window[o+$t-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<$t)););}while(e.lookahead<Za&&e.strm.avail_in!==0)},Q3e=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Hh(e),e.lookahead===0&&t===l1)return Hr;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Ei(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Za&&(Ei(e,!1),e.strm.avail_out===0))return Hr}return e.insert=0,t===y0?(Ei(e,!0),e.strm.avail_out===0?zh:M6):(e.strstart>e.block_start&&(Ei(e,!1),e.strm.avail_out===0),Hr)},ME=(e,t)=>{let n,r;for(;;){if(e.lookahead<Za){if(Hh(e),e.lookahead<Za&&t===l1)return Hr;if(e.lookahead===0)break}if(n=0,e.lookahead>=$t&&(e.ins_h=x0(e,e.ins_h,e.window[e.strstart+$t-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Za&&(e.match_length=VY(e,n)),e.match_length>=$t)if(r=U0(e,e.strstart-e.match_start,e.match_length-$t),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=$t){e.match_length--;do e.strstart++,e.ins_h=x0(e,e.ins_h,e.window[e.strstart+$t-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=x0(e,e.ins_h,e.window[e.strstart+1]);else r=U0(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ei(e,!1),e.strm.avail_out===0))return Hr}return e.insert=e.strstart<$t-1?e.strstart:$t-1,t===y0?(Ei(e,!0),e.strm.avail_out===0?zh:M6):e.last_lit&&(Ei(e,!1),e.strm.avail_out===0)?Hr:Db},G1=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Za){if(Hh(e),e.lookahead<Za&&t===l1)return Hr;if(e.lookahead===0)break}if(n=0,e.lookahead>=$t&&(e.ins_h=x0(e,e.ins_h,e.window[e.strstart+$t-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=$t-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Za&&(e.match_length=VY(e,n),e.match_length<=5&&(e.strategy===P3e||e.match_length===$t&&e.strstart-e.match_start>4096)&&(e.match_length=$t-1)),e.prev_length>=$t&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-$t,r=U0(e,e.strstart-1-e.prev_match,e.prev_length-$t),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=x0(e,e.ins_h,e.window[e.strstart+$t-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=$t-1,e.strstart++,r&&(Ei(e,!1),e.strm.avail_out===0))return Hr}else if(e.match_available){if(r=U0(e,0,e.window[e.strstart-1]),r&&Ei(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Hr}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=U0(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<$t-1?e.strstart:$t-1,t===y0?(Ei(e,!0),e.strm.avail_out===0?zh:M6):e.last_lit&&(Ei(e,!1),e.strm.avail_out===0)?Hr:Db},J3e=(e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=a0){if(Hh(e),e.lookahead<=a0&&t===l1)return Hr;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=$t&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+a0;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=a0-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=$t?(n=U0(e,1,e.match_length-$t),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=U0(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ei(e,!1),e.strm.avail_out===0))return Hr}return e.insert=0,t===y0?(Ei(e,!0),e.strm.avail_out===0?zh:M6):e.last_lit&&(Ei(e,!1),e.strm.avail_out===0)?Hr:Db},e4e=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Hh(e),e.lookahead===0)){if(t===l1)return Hr;break}if(e.match_length=0,n=U0(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ei(e,!1),e.strm.avail_out===0))return Hr}return e.insert=0,t===y0?(Ei(e,!0),e.strm.avail_out===0?zh:M6):e.last_lit&&(Ei(e,!1),e.strm.avail_out===0)?Hr:Db};function wl(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const l5=[new wl(0,0,0,0,Q3e),new wl(4,4,8,4,ME),new wl(4,5,16,8,ME),new wl(4,6,32,32,ME),new wl(4,4,16,16,G1),new wl(8,16,32,32,G1),new wl(8,16,128,128,G1),new wl(8,32,128,256,G1),new wl(32,128,258,1024,G1),new wl(32,258,258,4096,G1)],t4e=e=>{e.window_size=2*e.w_size,Bd(e.head),e.max_lazy_match=l5[e.level].max_lazy,e.good_match=l5[e.level].good_length,e.nice_match=l5[e.level].nice_length,e.max_chain_length=l5[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=$t-1,e.match_available=0,e.ins_h=0};function n4e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C7,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(G3e*2),this.dyn_dtree=new Uint16Array((2*V3e+1)*2),this.bl_tree=new Uint16Array((2*W3e+1)*2),Bd(this.dyn_ltree),Bd(this.dyn_dtree),Bd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(X3e+1),this.heap=new Uint16Array(2*gC+1),Bd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*gC+1),Bd(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const WY=e=>{if(!e||!e.state)return l0(e,Jo);e.total_in=e.total_out=0,e.data_type=j3e;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?A7:Bu,e.adler=t.wrap===2?0:1,t.last_flush=l1,C3e(t),Kl},GY=e=>{const t=WY(e);return t===Kl&&t4e(e.state),t},r4e=(e,t)=>!e||!e.state||e.state.wrap!==2?Jo:(e.state.gzhead=t,Kl),XY=(e,t,n,r,i,s)=>{if(!e)return Jo;let o=1;if(t===_3e&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>B3e||n!==C7||r<8||r>15||t<0||t>9||s<0||s>L3e)return l0(e,Jo);r===8&&(r=9);const a=new n4e;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+$t-1)/$t),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,GY(e)},i4e=(e,t)=>XY(e,t,C7,F3e,$3e,O3e),s4e=(e,t)=>{let n,r;if(!e||!e.state||t>mj||t<0)return e?l0(e,Jo):Jo;const i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===a5&&t!==y0)return l0(e,e.avail_out===0?AE:Jo);i.strm=e;const s=i.last_flush;if(i.last_flush=t,i.status===A7)if(i.wrap===2)e.adler=0,en(i,31),en(i,139),en(i,8),i.gzhead?(en(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),en(i,i.gzhead.time&255),en(i,i.gzhead.time>>8&255),en(i,i.gzhead.time>>16&255),en(i,i.gzhead.time>>24&255),en(i,i.level===9?2:i.strategy>=GU||i.level<2?4:0),en(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(en(i,i.gzhead.extra.length&255),en(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Jr(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=bC):(en(i,0),en(i,0),en(i,0),en(i,0),en(i,0),en(i,i.level===9?2:i.strategy>=GU||i.level<2?4:0),en(i,Y3e),i.status=Bu);else{let o=C7+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=GU||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,o|=a<<6,i.strstart!==0&&(o|=K3e),o+=31-o%31,i.status=Bu,Ng(i,o),i.strstart!==0&&(Ng(i,e.adler>>>16),Ng(i,e.adler&65535)),e.adler=1}if(i.status===bC)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Jr(e.adler,i.pending_buf,i.pending-n,n)),kd(e),n=i.pending,i.pending===i.pending_buf_size));)en(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=Jr(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=zy)}else i.status=zy;if(i.status===zy)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Jr(e.adler,i.pending_buf,i.pending-n,n)),kd(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.name.length?r=i.gzhead.name.charCodeAt(i.gzindex++)&255:r=0,en(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=Jr(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.gzindex=0,i.status=Hy)}else i.status=Hy;if(i.status===Hy)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Jr(e.adler,i.pending_buf,i.pending-n,n)),kd(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.comment.length?r=i.gzhead.comment.charCodeAt(i.gzindex++)&255:r=0,en(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=Jr(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.status=Vy)}else i.status=Vy;if(i.status===Vy&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&kd(e),i.pending+2<=i.pending_buf_size&&(en(i,e.adler&255),en(i,e.adler>>8&255),e.adler=0,i.status=Bu)):i.status=Bu),i.pending!==0){if(kd(e),e.avail_out===0)return i.last_flush=-1,Kl}else if(e.avail_in===0&&bj(t)<=bj(s)&&t!==y0)return l0(e,AE);if(i.status===a5&&e.avail_in!==0)return l0(e,AE);if(e.avail_in!==0||i.lookahead!==0||t!==l1&&i.status!==a5){let o=i.strategy===GU?e4e(i,t):i.strategy===D3e?J3e(i,t):l5[i.level].func(i,t);if((o===zh||o===M6)&&(i.status=a5),o===Hr||o===zh)return e.avail_out===0&&(i.last_flush=-1),Kl;if(o===Db&&(t===I3e?T3e(i):t!==mj&&(A3e(i,0,0,!1),t===N3e&&(Bd(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),kd(e),e.avail_out===0))return i.last_flush=-1,Kl}return t!==y0?Kl:i.wrap<=0?gj:(i.wrap===2?(en(i,e.adler&255),en(i,e.adler>>8&255),en(i,e.adler>>16&255),en(i,e.adler>>24&255),en(i,e.total_in&255),en(i,e.total_in>>8&255),en(i,e.total_in>>16&255),en(i,e.total_in>>24&255)):(Ng(i,e.adler>>>16),Ng(i,e.adler&65535)),kd(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Kl:gj)},o4e=e=>{if(!e||!e.state)return Jo;const t=e.state.status;return t!==A7&&t!==bC&&t!==zy&&t!==Hy&&t!==Vy&&t!==Bu&&t!==a5?l0(e,Jo):(e.state=null,t===Bu?l0(e,R3e):Kl)},a4e=(e,t)=>{let n=t.length;if(!e||!e.state)return Jo;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==A7||r.lookahead)return Jo;if(i===1&&(e.adler=_2(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(Bd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Hh(r);r.lookahead>=$t;){let l=r.strstart,f=r.lookahead-($t-1);do r.ins_h=x0(r,r.ins_h,r.window[l+$t-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--f);r.strstart=l,r.lookahead=$t-1,Hh(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=$t-1,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,Kl};var l4e=i4e,c4e=XY,f4e=GY,d4e=WY,u4e=r4e,h4e=s4e,p4e=o4e,m4e=a4e,g4e="pako deflate (from Nodeca project)",L5={deflateInit:l4e,deflateInit2:c4e,deflateReset:f4e,deflateResetKeep:d4e,deflateSetHeader:u4e,deflate:h4e,deflateEnd:p4e,deflateSetDictionary:m4e,deflateInfo:g4e};const b4e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var U4e=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)b4e(n,r)&&(e[r]=n[r])}}return e},y4e=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let o=e[r];n.set(o,i),i+=o.length}return n},M7={assign:U4e,flattenChunks:y4e};let KY=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{KY=!1}const P2=new Uint8Array(256);for(let e=0;e<256;e++)P2[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;P2[254]=P2[254]=1;var x4e=e=>{let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const v4e=(e,t)=>{if(t<65534&&e.subarray&&KY)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var w4e=(e,t)=>{let n,r;const i=t||e.length,s=new Array(i*2);for(r=0,n=0;n<i;){let o=e[n++];if(o<128){s[r++]=o;continue}let a=P2[o];if(a>4){s[r++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<i;)o=o<<6|e[n++]&63,a--;if(a>1){s[r++]=65533;continue}o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|o&1023)}return v4e(s,r)},E4e=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+P2[e[n]]>t?n:t},D2={string2buf:x4e,buf2string:w4e,utf8border:E4e};function S4e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var YY=S4e;const ZY=Object.prototype.toString,{Z_NO_FLUSH:k4e,Z_SYNC_FLUSH:C4e,Z_FULL_FLUSH:A4e,Z_FINISH:M4e,Z_OK:P4,Z_STREAM_END:T4e,Z_DEFAULT_COMPRESSION:I4e,Z_DEFAULT_STRATEGY:N4e,Z_DEFLATED:R4e}=A6;function Lb(e){this.options=M7.assign({level:I4e,method:R4e,chunkSize:16384,windowBits:15,memLevel:8,strategy:N4e},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new YY,this.strm.avail_out=0;let n=L5.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==P4)throw new Error($h[n]);if(t.header&&L5.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=D2.string2buf(t.dictionary):ZY.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=L5.deflateSetDictionary(this.strm,r),n!==P4)throw new Error($h[n]);this._dict_set=!0}}Lb.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?M4e:k4e,typeof e=="string"?n.input=D2.string2buf(e):ZY.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===C4e||s===A4e)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=L5.deflate(n,s),i===T4e)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=L5.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===P4;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Lb.prototype.onData=function(e){this.chunks.push(e)};Lb.prototype.onEnd=function(e){e===P4&&(this.result=M7.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function hT(e,t){const n=new Lb(t);if(n.push(e,!0),n.err)throw n.msg||$h[n.err];return n.result}function _4e(e,t){return t=t||{},t.raw=!0,hT(e,t)}function P4e(e,t){return t=t||{},t.gzip=!0,hT(e,t)}var D4e=Lb,L4e=hT,O4e=_4e,j4e=P4e,B4e=A6,F4e={Deflate:D4e,deflate:L4e,deflateRaw:O4e,gzip:j4e,constants:B4e};const XU=30,$4e=12;var z4e=function(t,n){let r,i,s,o,a,l,f,c,d,u,h,g,U,y,x,w,E,S,A,M,C,T,R,P;const _=t.state;r=t.next_in,R=t.input,i=r+(t.avail_in-5),s=t.next_out,P=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=_.dmax,f=_.wsize,c=_.whave,d=_.wnext,u=_.window,h=_.hold,g=_.bits,U=_.lencode,y=_.distcode,x=(1<<_.lenbits)-1,w=(1<<_.distbits)-1;e:do{g<15&&(h+=R[r++]<<g,g+=8,h+=R[r++]<<g,g+=8),E=U[h&x];t:for(;;){if(S=E>>>24,h>>>=S,g-=S,S=E>>>16&255,S===0)P[s++]=E&65535;else if(S&16){A=E&65535,S&=15,S&&(g<S&&(h+=R[r++]<<g,g+=8),A+=h&(1<<S)-1,h>>>=S,g-=S),g<15&&(h+=R[r++]<<g,g+=8,h+=R[r++]<<g,g+=8),E=y[h&w];n:for(;;){if(S=E>>>24,h>>>=S,g-=S,S=E>>>16&255,S&16){if(M=E&65535,S&=15,g<S&&(h+=R[r++]<<g,g+=8,g<S&&(h+=R[r++]<<g,g+=8)),M+=h&(1<<S)-1,M>l){t.msg="invalid distance too far back",_.mode=XU;break e}if(h>>>=S,g-=S,S=s-o,M>S){if(S=M-S,S>c&&_.sane){t.msg="invalid distance too far back",_.mode=XU;break e}if(C=0,T=u,d===0){if(C+=f-S,S<A){A-=S;do P[s++]=u[C++];while(--S);C=s-M,T=P}}else if(d<S){if(C+=f+d-S,S-=d,S<A){A-=S;do P[s++]=u[C++];while(--S);if(C=0,d<A){S=d,A-=S;do P[s++]=u[C++];while(--S);C=s-M,T=P}}}else if(C+=d-S,S<A){A-=S;do P[s++]=u[C++];while(--S);C=s-M,T=P}for(;A>2;)P[s++]=T[C++],P[s++]=T[C++],P[s++]=T[C++],A-=3;A&&(P[s++]=T[C++],A>1&&(P[s++]=T[C++]))}else{C=s-M;do P[s++]=P[C++],P[s++]=P[C++],P[s++]=P[C++],A-=3;while(A>2);A&&(P[s++]=P[C++],A>1&&(P[s++]=P[C++]))}}else if(S&64){t.msg="invalid distance code",_.mode=XU;break e}else{E=y[(E&65535)+(h&(1<<S)-1)];continue n}break}}else if(S&64)if(S&32){_.mode=$4e;break e}else{t.msg="invalid literal/length code",_.mode=XU;break e}else{E=U[(E&65535)+(h&(1<<S)-1)];continue t}break}}while(r<i&&s<a);A=g>>3,r-=A,g-=A<<3,h&=(1<<g)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=s<a?257+(a-s):257-(s-a),_.hold=h,_.bits=g};const X1=15,Uj=852,yj=592,xj=0,TE=1,vj=2,H4e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),V4e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),W4e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),G4e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),X4e=(e,t,n,r,i,s,o,a)=>{const l=a.bits;let f=0,c=0,d=0,u=0,h=0,g=0,U=0,y=0,x=0,w=0,E,S,A,M,C,T=null,R=0,P;const _=new Uint16Array(X1+1),O=new Uint16Array(X1+1);let F=null,B=0,$,z,H;for(f=0;f<=X1;f++)_[f]=0;for(c=0;c<r;c++)_[t[n+c]]++;for(h=l,u=X1;u>=1&&_[u]===0;u--);if(h>u&&(h=u),u===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<u&&_[d]===0;d++);for(h<d&&(h=d),y=1,f=1;f<=X1;f++)if(y<<=1,y-=_[f],y<0)return-1;if(y>0&&(e===xj||u!==1))return-1;for(O[1]=0,f=1;f<X1;f++)O[f+1]=O[f]+_[f];for(c=0;c<r;c++)t[n+c]!==0&&(o[O[t[n+c]]++]=c);if(e===xj?(T=F=o,P=19):e===TE?(T=H4e,R-=257,F=V4e,B-=257,P=256):(T=W4e,F=G4e,P=-1),w=0,c=0,f=d,C=s,g=h,U=0,A=-1,x=1<<h,M=x-1,e===TE&&x>Uj||e===vj&&x>yj)return 1;for(;;){$=f-U,o[c]<P?(z=0,H=o[c]):o[c]>P?(z=F[B+o[c]],H=T[R+o[c]]):(z=96,H=0),E=1<<f-U,S=1<<g,d=S;do S-=E,i[C+(w>>U)+S]=$<<24|z<<16|H|0;while(S!==0);for(E=1<<f-1;w&E;)E>>=1;if(E!==0?(w&=E-1,w+=E):w=0,c++,--_[f]===0){if(f===u)break;f=t[n+o[c]]}if(f>h&&(w&M)!==A){for(U===0&&(U=h),C+=d,g=f-U,y=1<<g;g+U<u&&(y-=_[g+U],!(y<=0));)g++,y<<=1;if(x+=1<<g,e===TE&&x>Uj||e===vj&&x>yj)return 1;A=w&M,i[A]=h<<24|g<<16|C-s|0}}return w!==0&&(i[C+w]=f-U<<24|64<<16|0),a.bits=h,0};var O5=X4e;const K4e=0,qY=1,QY=2,{Z_FINISH:wj,Z_BLOCK:Y4e,Z_TREES:KU,Z_OK:Vh,Z_STREAM_END:Z4e,Z_NEED_DICT:q4e,Z_STREAM_ERROR:na,Z_DATA_ERROR:JY,Z_MEM_ERROR:eZ,Z_BUF_ERROR:Q4e,Z_DEFLATED:Ej}=A6,tZ=1,Sj=2,kj=3,Cj=4,Aj=5,Mj=6,Tj=7,Ij=8,Nj=9,Rj=10,D4=11,Lc=12,IE=13,_j=14,NE=15,Pj=16,Dj=17,Lj=18,Oj=19,YU=20,ZU=21,jj=22,Bj=23,Fj=24,$j=25,zj=26,RE=27,Hj=28,Vj=29,jn=30,nZ=31,J4e=32,e9e=852,t9e=592,n9e=15,r9e=n9e,Wj=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function i9e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const rZ=e=>{if(!e||!e.state)return na;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=tZ,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(e9e),t.distcode=t.distdyn=new Int32Array(t9e),t.sane=1,t.back=-1,Vh},iZ=e=>{if(!e||!e.state)return na;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,rZ(e)},sZ=(e,t)=>{let n;if(!e||!e.state)return na;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?na:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,iZ(e))},oZ=(e,t)=>{if(!e)return na;const n=new i9e;e.state=n,n.window=null;const r=sZ(e,t);return r!==Vh&&(e.state=null),r},s9e=e=>oZ(e,r9e);let Gj=!0,_E,PE;const o9e=e=>{if(Gj){_E=new Int32Array(512),PE=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(O5(qY,e.lens,0,288,_E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;O5(QY,e.lens,0,32,PE,0,e.work,{bits:5}),Gj=!1}e.lencode=_E,e.lenbits=9,e.distcode=PE,e.distbits=5},aZ=(e,t,n,r)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},a9e=(e,t)=>{let n,r,i,s,o,a,l,f,c,d,u,h,g,U,y=0,x,w,E,S,A,M,C,T;const R=new Uint8Array(4);let P,_;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return na;n=e.state,n.mode===Lc&&(n.mode=IE),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,f=n.hold,c=n.bits,d=a,u=l,T=Vh;e:for(;;)switch(n.mode){case tZ:if(n.wrap===0){n.mode=IE;break}for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.wrap&2&&f===35615){n.check=0,R[0]=f&255,R[1]=f>>>8&255,n.check=Jr(n.check,R,2,0),f=0,c=0,n.mode=Sj;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=jn;break}if((f&15)!==Ej){e.msg="unknown compression method",n.mode=jn;break}if(f>>>=4,c-=4,C=(f&15)+8,n.wbits===0)n.wbits=C;else if(C>n.wbits){e.msg="invalid window size",n.mode=jn;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=f&512?Rj:Lc,f=0,c=0;break;case Sj:for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.flags=f,(n.flags&255)!==Ej){e.msg="unknown compression method",n.mode=jn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=jn;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=Jr(n.check,R,2,0)),f=0,c=0,n.mode=kj;case kj:for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.head&&(n.head.time=f),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,R[2]=f>>>16&255,R[3]=f>>>24&255,n.check=Jr(n.check,R,4,0)),f=0,c=0,n.mode=Cj;case Cj:for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=Jr(n.check,R,2,0)),f=0,c=0,n.mode=Aj;case Aj:if(n.flags&1024){for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=Jr(n.check,R,2,0)),f=0,c=0}else n.head&&(n.head.extra=null);n.mode=Mj;case Mj:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+h),C)),n.flags&512&&(n.check=Jr(n.check,r,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=Tj;case Tj:if(n.flags&2048){if(a===0)break e;h=0;do C=r[s+h++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C));while(C&&h<a);if(n.flags&512&&(n.check=Jr(n.check,r,h,s)),a-=h,s+=h,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Ij;case Ij:if(n.flags&4096){if(a===0)break e;h=0;do C=r[s+h++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C));while(C&&h<a);if(n.flags&512&&(n.check=Jr(n.check,r,h,s)),a-=h,s+=h,C)break e}else n.head&&(n.head.comment=null);n.mode=Nj;case Nj:if(n.flags&512){for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f!==(n.check&65535)){e.msg="header crc mismatch",n.mode=jn;break}f=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Lc;break;case Rj:for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}e.adler=n.check=Wj(f),f=0,c=0,n.mode=D4;case D4:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,q4e;e.adler=n.check=1,n.mode=Lc;case Lc:if(t===Y4e||t===KU)break e;case IE:if(n.last){f>>>=c&7,c-=c&7,n.mode=RE;break}for(;c<3;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}switch(n.last=f&1,f>>>=1,c-=1,f&3){case 0:n.mode=_j;break;case 1:if(o9e(n),n.mode=YU,t===KU){f>>>=2,c-=2;break e}break;case 2:n.mode=Dj;break;case 3:e.msg="invalid block type",n.mode=jn}f>>>=2,c-=2;break;case _j:for(f>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=jn;break}if(n.length=f&65535,f=0,c=0,n.mode=NE,t===KU)break e;case NE:n.mode=Pj;case Pj:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;i.set(r.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=Lc;break;case Dj:for(;c<14;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.nlen=(f&31)+257,f>>>=5,c-=5,n.ndist=(f&31)+1,f>>>=5,c-=5,n.ncode=(f&15)+4,f>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=jn;break}n.have=0,n.mode=Lj;case Lj:for(;n.have<n.ncode;){for(;c<3;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.lens[O[n.have++]]=f&7,f>>>=3,c-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},T=O5(K4e,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,T){e.msg="invalid code lengths set",n.mode=jn;break}n.have=0,n.mode=Oj;case Oj:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[f&(1<<n.lenbits)-1],x=y>>>24,w=y>>>16&255,E=y&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(E<16)f>>>=x,c-=x,n.lens[n.have++]=E;else{if(E===16){for(_=x+2;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f>>>=x,c-=x,n.have===0){e.msg="invalid bit length repeat",n.mode=jn;break}C=n.lens[n.have-1],h=3+(f&3),f>>>=2,c-=2}else if(E===17){for(_=x+3;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=x,c-=x,C=0,h=3+(f&7),f>>>=3,c-=3}else{for(_=x+7;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=x,c-=x,C=0,h=11+(f&127),f>>>=7,c-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=jn;break}for(;h--;)n.lens[n.have++]=C}}if(n.mode===jn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=jn;break}if(n.lenbits=9,P={bits:n.lenbits},T=O5(qY,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,T){e.msg="invalid literal/lengths set",n.mode=jn;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},T=O5(QY,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,T){e.msg="invalid distances set",n.mode=jn;break}if(n.mode=YU,t===KU)break e;case YU:n.mode=ZU;case ZU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,z4e(e,u),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,f=n.hold,c=n.bits,n.mode===Lc&&(n.back=-1);break}for(n.back=0;y=n.lencode[f&(1<<n.lenbits)-1],x=y>>>24,w=y>>>16&255,E=y&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(w&&!(w&240)){for(S=x,A=w,M=E;y=n.lencode[M+((f&(1<<S+A)-1)>>S)],x=y>>>24,w=y>>>16&255,E=y&65535,!(S+x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=S,c-=S,n.back+=S}if(f>>>=x,c-=x,n.back+=x,n.length=E,w===0){n.mode=zj;break}if(w&32){n.back=-1,n.mode=Lc;break}if(w&64){e.msg="invalid literal/length code",n.mode=jn;break}n.extra=w&15,n.mode=jj;case jj:if(n.extra){for(_=n.extra;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Bj;case Bj:for(;y=n.distcode[f&(1<<n.distbits)-1],x=y>>>24,w=y>>>16&255,E=y&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(!(w&240)){for(S=x,A=w,M=E;y=n.distcode[M+((f&(1<<S+A)-1)>>S)],x=y>>>24,w=y>>>16&255,E=y&65535,!(S+x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=S,c-=S,n.back+=S}if(f>>>=x,c-=x,n.back+=x,w&64){e.msg="invalid distance code",n.mode=jn;break}n.offset=E,n.extra=w&15,n.mode=Fj;case Fj:if(n.extra){for(_=n.extra;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=jn;break}n.mode=$j;case $j:if(l===0)break e;if(h=u-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=jn;break}h>n.wnext?(h-=n.wnext,g=n.wsize-h):g=n.wnext-h,h>n.length&&(h=n.length),U=n.window}else U=i,g=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[o++]=U[g++];while(--h);n.length===0&&(n.mode=ZU);break;case zj:if(l===0)break e;i[o++]=n.length,l--,n.mode=ZU;break;case RE:if(n.wrap){for(;c<32;){if(a===0)break e;a--,f|=r[s++]<<c,c+=8}if(u-=l,e.total_out+=u,n.total+=u,u&&(e.adler=n.check=n.flags?Jr(n.check,i,u,o-u):_2(n.check,i,u,o-u)),u=l,(n.flags?f:Wj(f))!==n.check){e.msg="incorrect data check",n.mode=jn;break}f=0,c=0}n.mode=Hj;case Hj:if(n.wrap&&n.flags){for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=jn;break}f=0,c=0}n.mode=Vj;case Vj:T=Z4e;break e;case jn:T=JY;break e;case nZ:return eZ;case J4e:default:return na}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,(n.wsize||u!==e.avail_out&&n.mode<jn&&(n.mode<RE||t!==wj))&&aZ(e,e.output,e.next_out,u-e.avail_out),d-=e.avail_in,u-=e.avail_out,e.total_in+=d,e.total_out+=u,n.total+=u,n.wrap&&u&&(e.adler=n.check=n.flags?Jr(n.check,i,u,e.next_out-u):_2(n.check,i,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Lc?128:0)+(n.mode===YU||n.mode===NE?256:0),(d===0&&u===0||t===wj)&&T===Vh&&(T=Q4e),T},l9e=e=>{if(!e||!e.state)return na;let t=e.state;return t.window&&(t.window=null),e.state=null,Vh},c9e=(e,t)=>{if(!e||!e.state)return na;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Vh):na},f9e=(e,t)=>{const n=t.length;let r,i,s;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==D4)?na:r.mode===D4&&(i=1,i=_2(i,t,n,0),i!==r.check)?JY:(s=aZ(e,t,n,n),s?(r.mode=nZ,eZ):(r.havedict=1,Vh))};var d9e=iZ,u9e=sZ,h9e=rZ,p9e=s9e,m9e=oZ,g9e=a9e,b9e=l9e,U9e=c9e,y9e=f9e,x9e="pako inflate (from Nodeca project)",Yc={inflateReset:d9e,inflateReset2:u9e,inflateResetKeep:h9e,inflateInit:p9e,inflateInit2:m9e,inflate:g9e,inflateEnd:b9e,inflateGetHeader:U9e,inflateSetDictionary:y9e,inflateInfo:x9e};function v9e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var w9e=v9e;const lZ=Object.prototype.toString,{Z_NO_FLUSH:E9e,Z_FINISH:S9e,Z_OK:L2,Z_STREAM_END:DE,Z_NEED_DICT:LE,Z_STREAM_ERROR:k9e,Z_DATA_ERROR:Xj,Z_MEM_ERROR:C9e}=A6;function Ob(e){this.options=M7.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new YY,this.strm.avail_out=0;let n=Yc.inflateInit2(this.strm,t.windowBits);if(n!==L2)throw new Error($h[n]);if(this.header=new w9e,Yc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=D2.string2buf(t.dictionary):lZ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Yc.inflateSetDictionary(this.strm,t.dictionary),n!==L2)))throw new Error($h[n])}Ob.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?S9e:E9e,lZ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Yc.inflate(n,o),s===LE&&i&&(s=Yc.inflateSetDictionary(n,i),s===L2?s=Yc.inflate(n,o):s===Xj&&(s=LE));n.avail_in>0&&s===DE&&n.state.wrap>0&&e[n.next_in]!==0;)Yc.inflateReset(n),s=Yc.inflate(n,o);switch(s){case k9e:case Xj:case LE:case C9e:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===DE))if(this.options.to==="string"){let l=D2.utf8border(n.output,n.next_out),f=n.next_out-l,c=D2.buf2string(n.output,l);n.next_out=f,n.avail_out=r-f,f&&n.output.set(n.output.subarray(l,l+f),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===L2&&a===0)){if(s===DE)return s=Yc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Ob.prototype.onData=function(e){this.chunks.push(e)};Ob.prototype.onEnd=function(e){e===L2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=M7.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function pT(e,t){const n=new Ob(t);if(n.push(e),n.err)throw n.msg||$h[n.err];return n.result}function A9e(e,t){return t=t||{},t.raw=!0,pT(e,t)}var M9e=Ob,T9e=pT,I9e=A9e,N9e=pT,R9e=A6,_9e={Inflate:M9e,inflate:T9e,inflateRaw:I9e,ungzip:N9e,constants:R9e};const{Deflate:_He,deflate:P9e,deflateRaw:PHe,gzip:DHe}=F4e,{Inflate:LHe,inflate:D9e,inflateRaw:OHe,ungzip:jHe}=_9e;var L9e=P9e,O9e=D9e;const j9e="#ffffff",B9e="#000000",F9e=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],$9e=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],z9e=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],H9e=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],V9e=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],W9e=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],G9e=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],X9e=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],K9e=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],Y9e=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],Z9e=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],q9e=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],Q9e=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],ai={white:j9e,black:B9e,gray:F9e,red:$9e,pink:z9e,grape:H9e,violet:V9e,indigo:W9e,blue:G9e,cyan:X9e,teal:K9e,green:Y9e,lime:Z9e,yellow:q9e,orange:Q9e};let mT=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var OE,Kj;function J9e(){if(Kj)return OE;Kj=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof r0=="object"&&r0&&r0.Object===Object&&r0,f=typeof self=="object"&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,u=d.toString,h=Math.max,g=Math.min,U=function(){return c.Date.now()};function y(M,C,T){var R,P,_,O,F,B,$=0,z=!1,H=!1,G=!0;if(typeof M!="function")throw new TypeError(e);C=A(C)||0,w(T)&&(z=!!T.leading,H="maxWait"in T,_=H?h(A(T.maxWait)||0,C):_,G="trailing"in T?!!T.trailing:G);function V(te){var le=R,he=P;return R=P=void 0,$=te,O=M.apply(he,le),O}function Y(te){return $=te,F=setTimeout(se,C),z?V(te):O}function K(te){var le=te-B,he=te-$,we=C-le;return H?g(we,_-he):we}function q(te){var le=te-B,he=te-$;return B===void 0||le>=C||le<0||H&&he>=_}function se(){var te=U();if(q(te))return de(te);F=setTimeout(se,K(te))}function de(te){return F=void 0,G&&R?V(te):(R=P=void 0,O)}function xe(){F!==void 0&&clearTimeout(F),$=0,R=B=P=F=void 0}function ve(){return F===void 0?O:de(U())}function ue(){var te=U(),le=q(te);if(R=arguments,P=this,B=te,le){if(F===void 0)return Y(B);if(H)return F=setTimeout(se,C),V(B)}return F===void 0&&(F=setTimeout(se,C)),O}return ue.cancel=xe,ue.flush=ve,ue}function x(M,C,T){var R=!0,P=!0;if(typeof M!="function")throw new TypeError(e);return w(T)&&(R="leading"in T?!!T.leading:R,P="trailing"in T?!!T.trailing:P),y(M,C,{leading:R,maxWait:C,trailing:P})}function w(M){var C=typeof M;return!!M&&(C=="object"||C=="function")}function E(M){return!!M&&typeof M=="object"}function S(M){return typeof M=="symbol"||E(M)&&u.call(M)==n}function A(M){if(typeof M=="number")return M;if(S(M))return t;if(w(M)){var C=typeof M.valueOf=="function"?M.valueOf():M;M=w(C)?C+"":C}if(typeof M!="string")return M===0?M:+M;M=M.replace(r,"");var T=s.test(M);return T||o.test(M)?a(M.slice(2),T?2:8):i.test(M)?t:+M}return OE=x,OE}var e7e=J9e();const jb=mc(e7e);var Wy={exports:{}},t7e=Wy.exports,Yj;function n7e(){return Yj||(Yj=1,function(e,t){(function(n,r){e.exports=r()})(t7e,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(f,c){this._listeners[f]=this._listeners[f]||[],this._listeners[f].indexOf(c)<0&&this._listeners[f].push(c)},n.prototype.removeEventListener=function(f,c){if(this._listeners[f]){var d=this._listeners[f].indexOf(c);d>=0&&this._listeners[f].splice(d,1)}},n.prototype.dispatchEvent=function(f){if(this._listeners[f.type]&&this._listeners[f.type].length)for(var c=this._listeners[f.type].slice(),d=0,u=c.length;d<u;++d)c[d].call(this,f)};var r=function(f){return typeof f.constructor=="function"&&f.constructor.name==="GeneratorFunction"},i=function(f){return{next:function(){var c=f();return c?{value:c}:{done:!0}}}},s=function(f){var c=!1;return{next:function(){return c?{done:!0}:(c=!0,{value:f})}}},o=function(f,c){var d=typeof f;if(d==="object"){if(typeof f.next=="function")return f;if(typeof f.then=="function")return s(f)}return d==="function"?r(f)?f():i(f):s(c.resolve(f))},a=function(f,c,d){this.target=f,this.type=c,this.data=d},l=function(f,c,d){if(n.call(this),typeof c!="number"||Math.floor(c)!==c||c<1)throw new Error("Invalid concurrency");this._concurrency=c,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(f,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(f){return typeof f<"u"&&(this._concurrency=f,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var f=this,c=this._options.promise;return this._promise=new c(function(d,u){f._callbacks={reject:u,resolve:d},f._proceed()}),this._promise},l.prototype._fireEvent=function(f,c){this.dispatchEvent(new a(this,f,c))},l.prototype._settle=function(f){f?this._callbacks.reject(f):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(f,c){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:f,result:c}),this._proceed())},l.prototype._onPooledPromiseRejected=function(f,c){this._size--,this.active()&&(this._fireEvent("rejected",{promise:f,error:c}),this._settle(c||new Error("Unknown error")))},l.prototype._trackPromise=function(f){var c=this;f.then(function(d){c._onPooledPromiseFulfilled(f,d)},function(d){c._onPooledPromiseRejected(f,d)}).catch(function(d){c._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var f={done:!1};this._size<this._concurrency&&!(f=this._iterator.next()).done;)this._size++,this._trackPromise(f.value);this._done=f===null||!!f.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})}(Wy)),Wy.exports}var r7e=n7e();const i7e=mc(r7e);function UC(e,t,n){if(e&&e.length){const[r,i]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[f,c]=l;l[0]=(f-r)*o-(c-i)*a+r,l[1]=(f-r)*a+(c-i)*o+i}}}function s7e(e,t,n){const r=[];e.forEach(i=>r.push(...i)),UC(r,t,n)}function o7e(e,t){return e[0]===t[0]&&e[1]===t[1]}function a7e(e,t,n,r=1){const i=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(i)for(const f of o)UC(f,a,i);const l=l7e(o,s,r);if(i){for(const f of o)UC(f,a,-i);s7e(l,a,-i)}return l}function l7e(e,t,n){const r=[];for(const f of e){const c=[...f];o7e(c[0],c[c.length-1])||c.push([c[0][0],c[0][1]]),c.length>2&&r.push(c)}const i=[];t=Math.max(t,.1);const s=[];for(const f of r)for(let c=0;c<f.length-1;c++){const d=f[c],u=f[c+1];if(d[1]!==u[1]){const h=Math.min(d[1],u[1]);s.push({ymin:h,ymax:Math.max(d[1],u[1]),x:h===d[1]?d[0]:u[0],islope:(u[0]-d[0])/(u[1]-d[1])})}}if(s.sort((f,c)=>f.ymin<c.ymin?-1:f.ymin>c.ymin?1:f.x<c.x?-1:f.x>c.x?1:f.ymax===c.ymax?0:(f.ymax-c.ymax)/Math.abs(f.ymax-c.ymax)),!s.length)return i;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let f=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)f=d;s.splice(0,f+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(f=>!(f.edge.ymax<=a)),o.sort((f,c)=>f.edge.x===c.edge.x?0:(f.edge.x-c.edge.x)/Math.abs(f.edge.x-c.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let f=0;f<o.length;f=f+2){const c=f+1;if(c>=o.length)break;const d=o[f].edge,u=o[c].edge;i.push([[Math.round(d.x),a],[Math.round(u.x),a]])}a+=n,o.forEach(f=>{f.edge.x=f.edge.x+n*f.edge.islope}),l++}return i}function Bb(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.max(i,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),a7e(e,i,r,s||1)}class gT{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=Bb(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function T7(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class c7e extends gT{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),s=Bb(t,i),o=Math.PI/180*n.hachureAngle,a=[],l=r*.5*Math.cos(o),f=r*.5*Math.sin(o);for(const[d,u]of s)T7([d,u])&&a.push([[d[0]-l,d[1]+f],[...u]],[[d[0]+l,d[1]-f],[...u]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class f7e extends gT{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,i);return r.ops=r.ops.concat(s.ops),r}}class d7e{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=Bb(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=i/4;for(const a of t){const l=T7(a),f=l/i,c=Math.ceil(f)-1,d=l-c*i,u=(a[0][0]+a[1][0])/2-i/4,h=Math.min(a[0][1],a[1][1]);for(let g=0;g<c;g++){const U=h+d+g*i,y=u-o+Math.random()*2*o,x=U-o+Math.random()*2*o,w=this.helper.ellipse(y,x,s,s,n);r.push(...w.ops)}}return{type:"fillSketch",ops:r}}}class u7e{constructor(t){this.helper=t}fillPolygons(t,n){const r=Bb(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=T7(o),l=Math.floor(a/(r+i)),f=(a+i-l*(r+i))/2;let c=o[0],d=o[1];c[0]>d[0]&&(c=o[1],d=o[0]);const u=Math.atan((d[1]-c[1])/(d[0]-c[0]));for(let h=0;h<l;h++){const g=h*(r+i),U=g+r,y=[c[0]+g*Math.cos(u)+f*Math.cos(u),c[1]+g*Math.sin(u)+f*Math.sin(u)],x=[c[0]+U*Math.cos(u)+f*Math.cos(u),c[1]+U*Math.sin(u)+f*Math.sin(u)];s.push(...this.helper.doubleLineOps(y[0],y[1],x[0],x[1],n))}}),s}}class h7e{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const s=Bb(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(s=>{const o=T7(s),a=Math.round(o/(2*n));let l=s[0],f=s[1];l[0]>f[0]&&(l=s[1],f=s[0]);const c=Math.atan((f[1]-l[1])/(f[0]-l[0]));for(let d=0;d<a;d++){const u=d*2*n,h=(d+1)*2*n,g=Math.sqrt(2*Math.pow(n,2)),U=[l[0]+u*Math.cos(c),l[1]+u*Math.sin(c)],y=[l[0]+h*Math.cos(c),l[1]+h*Math.sin(c)],x=[U[0]+g*Math.cos(c+Math.PI/4),U[1]+g*Math.sin(c+Math.PI/4)];i.push(...this.helper.doubleLineOps(U[0],U[1],x[0],x[1],r),...this.helper.doubleLineOps(x[0],x[1],y[0],y[1],r))}}),i}}const Cs={};function p7e(e,t){let n=e.fillStyle||"hachure";if(!Cs[n])switch(n){case"zigzag":Cs[n]||(Cs[n]=new c7e(t));break;case"cross-hatch":Cs[n]||(Cs[n]=new f7e(t));break;case"dots":Cs[n]||(Cs[n]=new d7e(t));break;case"dashed":Cs[n]||(Cs[n]=new u7e(t));break;case"zigzag-line":Cs[n]||(Cs[n]=new h7e(t));break;case"hachure":default:n="hachure",Cs[n]||(Cs[n]=new gT(t));break}return Cs[n]}function m7e(){return Math.floor(Math.random()*2**31)}class cZ{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const g7e=0,yC=1,fZ=2,qU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function b7e(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:g7e,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:yC,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:fZ,text:""},t}function jE(e,t){return e.type===t}function bT(e){const t=[],n=b7e(e);let r="BOD",i=0,s=n[i];for(;!jE(s,fZ);){let o=0;const a=[];if(r==="BOD")if(s.text==="M"||s.text==="m")i++,o=qU[s.text],r=s.text;else return bT("M0,0"+e);else jE(s,yC)?o=qU[r]:(i++,o=qU[s.text],r=s.text);if(i+o<n.length){for(let l=i;l<i+o;l++){const f=n[l];if(jE(f,yC))a[a.length]=+f.text;else throw new Error("Param not a number: "+r+","+f.text)}if(typeof qU[r]=="number"){const l={key:r,data:a};t.push(l),i+=o,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function dZ(e){let t=0,n=0,r=0,i=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[r,i]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=r,n=i;break}return s}function uZ(e){const t=[];let n="",r=0,i=0,s=0,o=0,a=0,l=0;for(const{key:f,data:c}of e){switch(f){case"M":t.push({key:"M",data:[...c]}),[r,i]=c,[s,o]=c;break;case"C":t.push({key:"C",data:[...c]}),r=c[4],i=c[5],a=c[2],l=c[3];break;case"L":t.push({key:"L",data:[...c]}),[r,i]=c;break;case"H":r=c[0],t.push({key:"L",data:[r,i]});break;case"V":i=c[0],t.push({key:"L",data:[r,i]});break;case"S":{let d=0,u=0;n==="C"||n==="S"?(d=r+(r-a),u=i+(i-l)):(d=r,u=i),t.push({key:"C",data:[d,u,...c]}),a=c[0],l=c[1],r=c[2],i=c[3];break}case"T":{const[d,u]=c;let h=0,g=0;n==="Q"||n==="T"?(h=r+(r-a),g=i+(i-l)):(h=r,g=i);const U=r+2*(h-r)/3,y=i+2*(g-i)/3,x=d+2*(h-d)/3,w=u+2*(g-u)/3;t.push({key:"C",data:[U,y,x,w,d,u]}),a=h,l=g,r=d,i=u;break}case"Q":{const[d,u,h,g]=c,U=r+2*(d-r)/3,y=i+2*(u-i)/3,x=h+2*(d-h)/3,w=g+2*(u-g)/3;t.push({key:"C",data:[U,y,x,w,h,g]}),a=d,l=u,r=h,i=g;break}case"A":{const d=Math.abs(c[0]),u=Math.abs(c[1]),h=c[2],g=c[3],U=c[4],y=c[5],x=c[6];d===0||u===0?(t.push({key:"C",data:[r,i,y,x,y,x]}),r=y,i=x):(r!==y||i!==x)&&(hZ(r,i,y,x,d,u,h,g,U).forEach(function(E){t.push({key:"C",data:E})}),r=y,i=x);break}case"Z":t.push({key:"Z",data:[]}),r=s,i=o;break}n=f}return t}function U7e(e){return Math.PI*e/180}function Rg(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function hZ(e,t,n,r,i,s,o,a,l,f){const c=U7e(o);let d=[],u=0,h=0,g=0,U=0;if(f)[u,h,g,U]=f;else{[e,t]=Rg(e,t,-c),[n,r]=Rg(n,r,-c);const O=(e-n)/2,F=(t-r)/2;let B=O*O/(i*i)+F*F/(s*s);B>1&&(B=Math.sqrt(B),i=B*i,s=B*s);const $=a===l?-1:1,z=i*i,H=s*s,G=z*H-z*F*F-H*O*O,V=z*F*F+H*O*O,Y=$*Math.sqrt(Math.abs(G/V));g=Y*i*F/s+(e+n)/2,U=Y*-s*O/i+(t+r)/2,u=Math.asin(parseFloat(((t-U)/s).toFixed(9))),h=Math.asin(parseFloat(((r-U)/s).toFixed(9))),e<g&&(u=Math.PI-u),n<g&&(h=Math.PI-h),u<0&&(u=Math.PI*2+u),h<0&&(h=Math.PI*2+h),l&&u>h&&(u=u-Math.PI*2),!l&&h>u&&(h=h-Math.PI*2)}let y=h-u;if(Math.abs(y)>Math.PI*120/180){const O=h,F=n,B=r;l&&h>u?h=u+Math.PI*120/180*1:h=u+Math.PI*120/180*-1,n=g+i*Math.cos(h),r=U+s*Math.sin(h),d=hZ(n,r,F,B,i,s,o,0,l,[h,O,g,U])}y=h-u;const x=Math.cos(u),w=Math.sin(u),E=Math.cos(h),S=Math.sin(h),A=Math.tan(y/4),M=4/3*i*A,C=4/3*s*A,T=[e,t],R=[e+M*w,t-C*x],P=[n+M*S,r-C*E],_=[n,r];if(R[0]=2*T[0]-R[0],R[1]=2*T[1]-R[1],f)return[R,P,_].concat(d);{d=[R,P,_].concat(d);const O=[];for(let F=0;F<d.length;F+=3){const B=Rg(d[F][0],d[F][1],c),$=Rg(d[F+1][0],d[F+1][1],c),z=Rg(d[F+2][0],d[F+2][1],c);O.push([B[0],B[1],$[0],$[1],z[0],z[1]])}return O}}const y7e={randOffset:S7e,randOffsetWithRange:k7e,ellipse:w7e,doubleLineOps:C7e};function pZ(e,t,n,r,i){return{type:"path",ops:Cf(e,t,n,r,i)}}function Gy(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...Cf(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&i.push(...Cf(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return pZ(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function x7e(e,t){return Gy(e,!0,t)}function v7e(e,t,n,r,i){const s=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return x7e(s,i)}function Zj(e,t){let n=eB(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const r=eB(e,1.5*(1+t.roughness*.22),A7e(t));n=n.concat(r)}return{type:"path",ops:n}}function w7e(e,t,n,r,i){const s=mZ(n,r,i);return xC(e,t,i,s).opset}function mZ(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=Math.PI*2/i;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=pt(o*l,n),a+=pt(a*l,n),{increment:s,rx:o,ry:a}}function xC(e,t,n,r){const[i,s]=tB(r.increment,e,t,r.rx,r.ry,1,r.increment*L4(.1,L4(.4,1,n),n),n);let o=O4(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=tB(r.increment,e,t,r.rx,r.ry,1.5,0,n),l=O4(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function qj(e,t,n,r,i,s,o,a,l){const f=e,c=t;let d=Math.abs(n/2),u=Math.abs(r/2);d+=pt(d*.01,l),u+=pt(u*.01,l);let h=i,g=s;for(;h<0;)h+=Math.PI*2,g+=Math.PI*2;g-h>Math.PI*2&&(h=0,g=Math.PI*2);const U=Math.PI*2/l.curveStepCount,y=Math.min(U/2,(g-h)/2),x=nB(y,f,c,d,u,h,g,1,l);if(!l.disableMultiStroke){const w=nB(y,f,c,d,u,h,g,1.5,l);x.push(...w)}return o&&(a?x.push(...Cf(f,c,f+d*Math.cos(h),c+u*Math.sin(h),l),...Cf(f,c,f+d*Math.cos(g),c+u*Math.sin(g),l)):x.push({op:"lineTo",data:[f,c]},{op:"lineTo",data:[f+d*Math.cos(h),c+u*Math.sin(h)]})),{type:"path",ops:x}}function Qj(e,t){const n=uZ(dZ(bT(e))),r=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],i=[a[0],a[1]];break}case"L":r.push(...Cf(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,f,c,d,u,h]=a;r.push(...M7e(l,f,c,d,u,h,s,t)),s=[u,h];break}case"Z":r.push(...Cf(s[0],s[1],i[0],i[1],t)),s=[i[0],i[1]];break}return{type:"path",ops:r}}function BE(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+pt(i,t),r[0][1]+pt(i,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[r[o][0]+pt(i,t),r[o][1]+pt(i,t)]})}}return{type:"fillPath",ops:n}}function dp(e,t){return p7e(t,y7e).fillPolygons(e,t)}function E7e(e,t,n,r,i,s,o){const a=e,l=t;let f=Math.abs(n/2),c=Math.abs(r/2);f+=pt(f*.01,o),c+=pt(c*.01,o);let d=i,u=s;for(;d<0;)d+=Math.PI*2,u+=Math.PI*2;u-d>Math.PI*2&&(d=0,u=Math.PI*2);const h=(u-d)/o.curveStepCount,g=[];for(let U=d;U<=u;U=U+h)g.push([a+f*Math.cos(U),l+c*Math.sin(U)]);return g.push([a+f*Math.cos(u),l+c*Math.sin(u)]),g.push([a,l]),dp([g],o)}function S7e(e,t){return pt(e,t)}function k7e(e,t,n){return L4(e,t,n)}function C7e(e,t,n,r,i){return Cf(e,t,n,r,i,!0)}function A7e(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function gZ(e){return e.randomizer||(e.randomizer=new cZ(e.seed||0)),e.randomizer.next()}function L4(e,t,n,r=1){return n.roughness*r*(gZ(n)*(t-e)+e)}function pt(e,t,n=1){return L4(-e,e,t,n)}function Cf(e,t,n,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=Jj(e,t,n,r,i,!0,!1);if(o)return a;const l=Jj(e,t,n,r,i,!0,!0);return a.concat(l)}function Jj(e,t,n,r,i,s,o){const a=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(a);let f=1;l<200?f=1:l>500?f=.4:f=-.0016668*l+1.233334;let c=i.maxRandomnessOffset||0;c*c*100>a&&(c=l/10);const d=c/2,u=.2+gZ(i)*.2;let h=i.bowing*i.maxRandomnessOffset*(r-t)/200,g=i.bowing*i.maxRandomnessOffset*(e-n)/200;h=pt(h,i,f),g=pt(g,i,f);const U=[],y=()=>pt(d,i,f),x=()=>pt(c,i,f),w=i.preserveVertices;return o?U.push({op:"move",data:[e+(w?0:y()),t+(w?0:y())]}):U.push({op:"move",data:[e+(w?0:pt(c,i,f)),t+(w?0:pt(c,i,f))]}),o?U.push({op:"bcurveTo",data:[h+e+(n-e)*u+y(),g+t+(r-t)*u+y(),h+e+2*(n-e)*u+y(),g+t+2*(r-t)*u+y(),n+(w?0:y()),r+(w?0:y())]}):U.push({op:"bcurveTo",data:[h+e+(n-e)*u+x(),g+t+(r-t)*u+x(),h+e+2*(n-e)*u+x(),g+t+2*(r-t)*u+x(),n+(w?0:x()),r+(w?0:x())]}),U}function eB(e,t,n){const r=[];r.push([e[0][0]+pt(t,n),e[0][1]+pt(t,n)]),r.push([e[0][0]+pt(t,n),e[0][1]+pt(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+pt(t,n),e[i][1]+pt(t,n)]),i===e.length-1&&r.push([e[i][0]+pt(t,n),e[i][1]+pt(t,n)]);return O4(r,null,n)}function O4(e,t,n){const r=e.length,i=[];if(r>3){const s=[],o=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<r;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...Cf(e[0][0],e[0][1],e[1][0],e[1][1],n));return i}function tB(e,t,n,r,i,s,o,a){const l=a.roughness===0,f=[],c=[];if(l){e=e/4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const u=[t+r*Math.cos(d),n+i*Math.sin(d)];f.push(u),c.push(u)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const d=pt(.5,a)-Math.PI/2;c.push([pt(s,a)+t+.9*r*Math.cos(d-e),pt(s,a)+n+.9*i*Math.sin(d-e)]);const u=Math.PI*2+d-.01;for(let h=d;h<u;h=h+e){const g=[pt(s,a)+t+r*Math.cos(h),pt(s,a)+n+i*Math.sin(h)];f.push(g),c.push(g)}c.push([pt(s,a)+t+r*Math.cos(d+Math.PI*2+o*.5),pt(s,a)+n+i*Math.sin(d+Math.PI*2+o*.5)]),c.push([pt(s,a)+t+.98*r*Math.cos(d+o),pt(s,a)+n+.98*i*Math.sin(d+o)]),c.push([pt(s,a)+t+.9*r*Math.cos(d+o*.5),pt(s,a)+n+.9*i*Math.sin(d+o*.5)])}return[c,f]}function nB(e,t,n,r,i,s,o,a,l){const f=s+pt(.1,l),c=[];c.push([pt(a,l)+t+.9*r*Math.cos(f-e),pt(a,l)+n+.9*i*Math.sin(f-e)]);for(let d=f;d<=o;d=d+e)c.push([pt(a,l)+t+r*Math.cos(d),pt(a,l)+n+i*Math.sin(d)]);return c.push([t+r*Math.cos(o),n+i*Math.sin(o)]),c.push([t+r*Math.cos(o),n+i*Math.sin(o)]),O4(c,null,l)}function M7e(e,t,n,r,i,s,o,a){const l=[],f=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let c=[0,0];const d=a.disableMultiStroke?1:2,u=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(u?0:pt(f[0],a)),o[1]+(u?0:pt(f[0],a))]}),c=u?[i,s]:[i+pt(f[h],a),s+pt(f[h],a)],l.push({op:"bcurveTo",data:[e+pt(f[h],a),t+pt(f[h],a),n+pt(f[h],a),r+pt(f[h],a),c[0],c[1]]});return l}function _g(e){return[...e]}function T7e(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(_g(e[0]),_g(e[1]),_g(e[2]),_g(e[2]));else{const i=[];i.push(e[0],e[0]);for(let a=1;a<e.length;a++)i.push(e[a]),a===e.length-1&&i.push(e[a]);const s=[],o=1-t;r.push(_g(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],r.push(s[1],s[2],s[3])}}return r}function I7e(e,t){return Math.sqrt(Xy(e,t))}function Xy(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function N7e(e,t,n){const r=Xy(t,n);if(r===0)return Xy(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Xy(e,mu(t,n,i))}function mu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function R7e(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function vC(e,t,n,r){const i=r||[];if(R7e(e,t)<n){const s=e[t+0];i.length?I7e(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=mu(o,a,.5),d=mu(a,l,.5),u=mu(l,f,.5),h=mu(c,d,.5),g=mu(d,u,.5),U=mu(h,g,.5);vC([o,c,h,U],0,n,i),vC([U,g,u,f],0,n,i)}return i}function wC(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=N7e(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(wC(e,t,f+1,r,s),wC(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function _7e(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;vC(e,o,t,r)}return n&&n>0?wC(r,0,r.length,n):r}function P7e(e,t){return Math.sqrt(Ky(e,t))}function Ky(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function D7e(e,t,n){const r=Ky(t,n);if(r===0)return Ky(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Ky(e,gu(t,n,i))}function gu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function L7e(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function EC(e,t,n,r){const i=r||[];if(L7e(e,t)<n){const s=e[t+0];i.length?P7e(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=gu(o,a,.5),d=gu(a,l,.5),u=gu(l,f,.5),h=gu(c,d,.5),g=gu(d,u,.5),U=gu(h,g,.5);EC([o,c,h,U],0,n,i),EC([U,g,u,f],0,n,i)}return i}function O7e(e,t){return SC(e,0,e.length,t)}function SC(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=D7e(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(SC(e,t,f+1,r,s),SC(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function j7e(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;EC(e,o,t,r)}return r}function B7e(e,t,n){const r=bT(e),i=uZ(dZ(r)),s=[];let o=[],a=[0,0],l=[];const f=()=>{l.length>=4&&o.push(...j7e(l,t)),l=[]},c=()=>{f(),o.length&&(s.push(o),o=[])};for(const{key:u,data:h}of i)switch(u){case"M":c(),a=[h[0],h[1]],o.push(a);break;case"L":f(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const g=o.length?o[o.length-1]:a;l.push([g[0],g[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":f(),o.push([a[0],a[1]]);break}if(c(),!n)return s;const d=[];for(const u of s){const h=O7e(u,n);h.length&&d.push(h)}return d}const to="none";class O2{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return m7e()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,s){const o=this._o(s);return this._d("line",[pZ(t,n,r,i,o)],o)}rectangle(t,n,r,i,s){const o=this._o(s),a=[],l=v7e(t,n,r,i,o);if(o.fill){const f=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];o.fillStyle==="solid"?a.push(BE([f],o)):a.push(dp([f],o))}return o.stroke!==to&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,r,i,s){const o=this._o(s),a=[],l=mZ(r,i,o),f=xC(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const c=xC(t,n,o,l).opset;c.type="fillPath",a.push(c)}else a.push(dp([f.estimatedPoints],o));return o.stroke!==to&&a.push(f.opset),this._d("ellipse",a,o)}circle(t,n,r,i){const s=this.ellipse(t,n,r,r,i);return s.shape="circle",s}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[Gy(t,!1,r)],r)}arc(t,n,r,i,s,o,a=!1,l){const f=this._o(l),c=[],d=qj(t,n,r,i,s,o,a,!0,f);if(a&&f.fill)if(f.fillStyle==="solid"){const u=Object.assign({},f);u.disableMultiStroke=!0;const h=qj(t,n,r,i,s,o,!0,!1,u);h.type="fillPath",c.push(h)}else c.push(E7e(t,n,r,i,s,o,f));return f.stroke!==to&&c.push(d),this._d("arc",c,f)}curve(t,n){const r=this._o(n),i=[],s=Zj(t,r);if(r.fill&&r.fill!==to&&t.length>=3)if(r.fillStyle==="solid"){const o=Zj(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=T7e(t),a=_7e(o,10,(1+r.roughness)/2);i.push(dp([a],r))}return r.stroke!==to&&i.push(s),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],s=Gy(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(BE([t],r)):i.push(dp([t],r))),r.stroke!==to&&i.push(s),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==to,o=r.stroke!==to,a=!!(r.simplification&&r.simplification<1),l=a?4-4*(r.simplification||1):(1+r.roughness)/2,f=B7e(t,1,l),c=Qj(t,r);if(s)if(r.fillStyle==="solid")if(f.length===1){const d=Qj(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else i.push(BE(f,r));else i.push(dp(f,r));return o&&(a?f.forEach(d=>{i.push(Gy(d,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const s=typeof n=="number"&&n>=0?i.data.map(o=>+o.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:to};break;case"fillPath":o={d:this.opsToPath(s),stroke:to,strokeWidth:0,fill:r.fill||to};break;case"fillSketch":o=this.fillSketch(s,r);break}o&&i.push(o)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||to,strokeWidth:r,fill:to}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class F7e{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new O2(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof r=="number"&&r>=0?s.data.map(a=>+a.toFixed(r)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,s){const o=this.gen.line(t,n,r,i,s);return this.draw(o),o}rectangle(t,n,r,i,s){const o=this.gen.rectangle(t,n,r,i,s);return this.draw(o),o}ellipse(t,n,r,i,s){const o=this.gen.ellipse(t,n,r,i,s);return this.draw(o),o}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s),s}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,s,o,a=!1,l){const f=this.gen.arc(t,n,r,i,s,o,a,l);return this.draw(f),f}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const QU="http://www.w3.org/2000/svg";class $7e{constructor(t,n){this.svg=t,this.gen=new O2(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(QU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=i.createElementNS(QU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{l=i.createElementNS(QU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(i,a,r);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=t.createElementNS(QU,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,s){const o=this.gen.line(t,n,r,i,s);return this.draw(o)}rectangle(t,n,r,i,s){const o=this.gen.rectangle(t,n,r,i,s);return this.draw(o)}ellipse(t,n,r,i,s){const o=this.gen.ellipse(t,n,r,i,s);return this.draw(o)}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,s,o,a=!1,l){const f=this.gen.arc(t,n,r,i,s,o,a,l);return this.draw(f)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const B0={canvas(e,t){return new F7e(e,t)},svg(e,t){return new $7e(e,t)},generator(e){return new O2(e)},newSeed(){return O2.newSeed()}};function rB(e,t,n,r=i=>i){return e*r(.5-t*(.5-n))}function z7e(e){return[-e[0],-e[1]]}function Ia(e,t){return[e[0]+t[0],e[1]+t[1]]}function Lo(e,t){return[e[0]-t[0],e[1]-t[1]]}function Ca(e,t){return[e[0]*t,e[1]*t]}function H7e(e,t){return[e[0]/t,e[1]/t]}function Pg(e){return[e[1],-e[0]]}function iB(e,t){return e[0]*t[0]+e[1]*t[1]}function V7e(e,t){return e[0]===t[0]&&e[1]===t[1]}function W7e(e){return Math.hypot(e[0],e[1])}function G7e(e){return e[0]*e[0]+e[1]*e[1]}function sB(e,t){return G7e(Lo(e,t))}function bZ(e){return H7e(e,W7e(e))}function X7e(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Dg(e,t,n){let r=Math.sin(n),i=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*i-o*r,l=s*r+o*i;return[a+t[0],l+t[1]]}function kC(e,t,n){return Ia(e,Ca(Lo(t,e),n))}function oB(e,t,n){return Ia(e,Ca(t,n))}var{min:K1,PI:K7e}=Math,aB=.275,Lg=K7e+1e-4;function Y7e(e,t={}){let{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:s=!0,easing:o=H=>H,start:a={},end:l={},last:f=!1}=t,{cap:c=!0,easing:d=H=>H*(2-H)}=a,{cap:u=!0,easing:h=H=>--H*H*H+1}=l;if(e.length===0||n<=0)return[];let g=e[e.length-1].runningLength,U=a.taper===!1?0:a.taper===!0?Math.max(n,g):a.taper,y=l.taper===!1?0:l.taper===!0?Math.max(n,g):l.taper,x=Math.pow(n*r,2),w=[],E=[],S=e.slice(0,10).reduce((H,G)=>{let V=G.pressure;if(s){let Y=K1(1,G.distance/n),K=K1(1,1-Y);V=K1(1,H+(K-H)*(Y*aB))}return(H+V)/2},e[0].pressure),A=rB(n,i,e[e.length-1].pressure,o),M,C=e[0].vector,T=e[0].point,R=T,P=T,_=R,O=!1;for(let H=0;H<e.length;H++){let{pressure:G}=e[H],{point:V,vector:Y,distance:K,runningLength:q}=e[H];if(H<e.length-1&&g-q<3)continue;if(i){if(s){let he=K1(1,K/n),we=K1(1,1-he);G=K1(1,S+(we-S)*(he*aB))}A=rB(n,i,G,o)}else A=n/2;M===void 0&&(M=A);let se=q<U?d(q/U):1,de=g-q<y?h((g-q)/y):1;A=Math.max(.01,A*Math.min(se,de));let xe=(H<e.length-1?e[H+1]:e[H]).vector,ve=H<e.length-1?iB(Y,xe):1,ue=iB(Y,C)<0&&!O,te=ve!==null&&ve<0;if(ue||te){let he=Ca(Pg(C),A);for(let we=1/13,Se=0;Se<=1;Se+=we)P=Dg(Lo(V,he),V,Lg*Se),w.push(P),_=Dg(Ia(V,he),V,Lg*-Se),E.push(_);T=P,R=_,te&&(O=!0);continue}if(O=!1,H===e.length-1){let he=Ca(Pg(Y),A);w.push(Lo(V,he)),E.push(Ia(V,he));continue}let le=Ca(Pg(kC(xe,Y,ve)),A);P=Lo(V,le),(H<=1||sB(T,P)>x)&&(w.push(P),T=P),_=Ia(V,le),(H<=1||sB(R,_)>x)&&(E.push(_),R=_),S=G,C=Y}let F=e[0].point.slice(0,2),B=e.length>1?e[e.length-1].point.slice(0,2):Ia(e[0].point,[1,1]),$=[],z=[];if(e.length===1){if(!(U||y)||f){let H=oB(F,bZ(Pg(Lo(F,B))),-(M||A)),G=[];for(let V=1/13,Y=V;Y<=1;Y+=V)G.push(Dg(H,F,Lg*2*Y));return G}}else{if(!(U||y&&e.length===1))if(c)for(let G=1/13,V=G;V<=1;V+=G){let Y=Dg(E[0],F,Lg*V);$.push(Y)}else{let G=Lo(w[0],E[0]),V=Ca(G,.5),Y=Ca(G,.51);$.push(Lo(F,V),Lo(F,Y),Ia(F,Y),Ia(F,V))}let H=Pg(z7e(e[e.length-1].vector));if(y||U&&e.length===1)z.push(B);else if(u){let G=oB(B,H,A);for(let V=1/29,Y=V;Y<1;Y+=V)z.push(Dg(G,B,Lg*3*Y))}else z.push(Ia(B,Ca(H,A)),Ia(B,Ca(H,A*.99)),Lo(B,Ca(H,A*.99)),Lo(B,Ca(H,A)))}return w.concat(z,E.reverse(),$)}function Z7e(e,t={}){var n;let{streamline:r=.5,size:i=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-r)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:g,pressure:U=.5})=>[h,g,U]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let g=1;g<5;g++)a.push(kC(a[0],h,g/4))}a.length===1&&(a=[...a,[...Ia(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],f=!1,c=0,d=l[0],u=a.length-1;for(let h=1;h<a.length;h++){let g=s&&h===u?a[h].slice(0,2):kC(d.point,a[h],o);if(V7e(d.point,g))continue;let U=X7e(g,d.point);if(c+=U,h<u&&!f){if(c<i)continue;f=!0}d={point:g,pressure:a[h][2]>=0?a[h][2]:.5,vector:bZ(Lo(d.point,g)),distance:U,runningLength:c},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function q7e(e,t={}){return Y7e(Z7e(e,t),t)}function UZ(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=UZ(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function ze(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=UZ(t))&&(r&&(r+=" "),r+=n);return r}function Q7e(e,t){return Math.sqrt(Yy(e,t))}function Yy(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function J7e(e,t,n){const r=Yy(t,n);if(r===0)return Yy(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Yy(e,bu(t,n,i))}function bu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function exe(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function CC(e,t,n,r){const i=r||[];if(exe(e,t)<n){const s=e[t+0];i.length?Q7e(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=bu(o,a,.5),d=bu(a,l,.5),u=bu(l,f,.5),h=bu(c,d,.5),g=bu(d,u,.5),U=bu(h,g,.5);CC([o,c,h,U],0,n,i),CC([U,g,u,f],0,n,i)}return i}function txe(e,t){return j4(e,0,e.length,t)}function j4(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=J7e(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(j4(e,t,f+1,r,s),j4(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function nxe(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;CC(e,o,t,r)}return j4(r,0,r.length,n)}var Og={},lB;function rxe(){if(lB)return Og;lB=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.sanitizeUrl=void 0;var e=/^([^\w]*)(javascript|data|vbscript)/im,t=/&#(\w+)(^\w|;)?/g,n=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,i=/^.+(:|&colon;)/gim,s=[".","/"];function o(f){return s.indexOf(f[0])>-1}function a(f){return f.replace(t,function(c,d){return String.fromCharCode(d)})}function l(f){var c=a(f||"").replace(n,"").replace(r,"").trim();if(!c)return"about:blank";if(o(c))return c;var d=c.match(i);if(!d)return c;var u=d[0];return e.test(u)?"about:blank":c}return Og.sanitizeUrl=l,Og}var ixe=rxe();const yZ="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function vp(e,t,n){const r=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||r)===t[o];)o++;if(o>0)return t.slice(0,o)+vp(e.slice(o),t.slice(o),n)}const i=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-i>1){const o=Math.round(.5*(i+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[i]+vp(e.slice(1),null,n)}function xZ(e){if(e.length!==vZ(e[0]))throw new Error("invalid integer part of order key: "+e)}function vZ(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function c5(e){const t=vZ(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function cB(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=c5(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function fB(e,t){xZ(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const o=t.indexOf(r[s])+1;o===t.length?r[s]=t[0]:(r[s]=t[o],i=!1)}if(i){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?r.push(t[0]):r.pop(),s+r.join("")}else return n+r.join("")}function sxe(e,t){xZ(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const o=t.indexOf(r[s])-1;o===-1?r[s]=t.slice(-1):(r[s]=t[o],i=!1)}if(i){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?r.push(t.slice(-1)):r.pop(),s+r.join("")}else return n+r.join("")}function Y1(e,t,n=yZ){if(e!=null&&cB(e,n),t!=null&&cB(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=c5(t),f=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+vp("",f,n);if(l<t)return l;const c=sxe(l,n);if(c==null)throw new Error("cannot decrement any more");return c}if(t==null){const l=c5(e),f=e.slice(l.length),c=fB(l,n);return c??l+vp(f,null,n)}const r=c5(e),i=e.slice(r.length),s=c5(t),o=t.slice(s.length);if(r===s)return r+vp(i,o,n);const a=fB(r,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:r+vp(i,null,n)}function AC(e,t,n,r=yZ){if(n===0)return[];if(n===1)return[Y1(e,t,r)];if(t==null){let o=Y1(e,t,r);const a=[o];for(let l=0;l<n-1;l++)o=Y1(o,t,r),a.push(o);return a}if(e==null){let o=Y1(e,t,r);const a=[o];for(let l=0;l<n-1;l++)o=Y1(e,o,r),a.push(o);return a.reverse(),a}const i=Math.floor(n/2),s=Y1(e,t,r);return[...AC(e,s,i,r),s,...AC(s,t,n-i-1,r)]}const c1=(()=>{if(typeof self>"u")return!1;if(!("top"in self&&self!==top)){if("showOpenFilePicker"in self)return"showOpenFilePicker"}return!1})(),oxe=Ve(c1?()=>import("./file-open-002ab408-CQ9a1yTP.js"):()=>import("./file-open-7c801643-CD3BRLr1.js"),[]);async function axe(...e){return(await oxe).default(...e)}Ve(c1?()=>import("./directory-open-4ed118d0-BNgAhb94.js"):()=>import("./directory-open-01563666-DWU9wJ6I.js"),[]);const lxe=Ve(c1?()=>import("./file-save-745eba88-D6MGJDcB.js"):()=>import("./file-save-3189631c-x92wctJd.js"),[]);async function cxe(...e){return(await lxe).default(...e)}var fxe=(e,t)=>t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{}),dxe=5,up=5,uxe=4,f5=4,d5=1,wa=[0,2,4,6,8],Ea=(e,t)=>t.map(n=>ai[e][n]),At={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Ea("gray",wa),red:Ea("red",wa),pink:Ea("pink",wa),grape:Ea("grape",wa),violet:Ea("violet",wa),blue:Ea("blue",wa),cyan:Ea("cyan",wa),teal:Ea("teal",wa),green:Ea("green",wa),yellow:Ea("yellow",wa),orange:Ea("orange",wa),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},wZ=fxe(At,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),EZ=[At.black,At.red[f5],At.green[f5],At.blue[f5],At.yellow[f5]],SZ=[At.transparent,At.red[d5],At.green[d5],At.blue[d5],At.yellow[d5]],kZ=[At.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],hxe={transparent:At.transparent,white:At.white,gray:At.gray,black:At.black,bronze:At.bronze,...wZ},pxe={transparent:At.transparent,white:At.white,gray:At.gray,black:At.black,bronze:At.bronze,...wZ},mxe=e=>[At.cyan[e],At.blue[e],At.violet[e],At.grape[e],At.pink[e],At.green[e],At.teal[e],At.yellow[e],At.orange[e],At.red[e]],gxe=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,ac=/Mac|iPod|iPhone|iPad/.test(navigator.platform),CZ=/^Win/.test(navigator.platform),bxe=/\b(android)\b/i.test(navigator.userAgent),j2="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,Uxe=navigator.userAgent.indexOf("Chrome")!==-1,yxe=!Uxe&&navigator.userAgent.indexOf("Safari")!==-1,AZ=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,xxe=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},MC=typeof window<"u"&&"ResizeObserver"in window,vxe="Excalidraw",wxe=36,Uu=10,Zy=8,Exe=5,dB=1,Sxe=30,A0=Math.PI/12,kxe="red",rn={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},Cd={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},Z1={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"},JU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},Fs={TEST:"test",DEVELOPMENT:"development"},i6={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper"},wp="Xiaolai",B2="Segoe UI Emoji",$n={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},Ep={[wp]:100,[B2]:1e3},MZ=e=>{switch(e){case $n.Excalifont:return[wp,B2];default:return[B2]}},Nt={LIGHT:"light",DARK:"dark"},zn={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},UT=1,$f=20,F0=$n.Excalifont,Fb="left",B4="top",Wh=2,F4=2*Wh,Cxe=1e-5,Axe=2*F4-Cxe,ey="#ffffff",Mxe="#1e1e1e",Txe="#a2f1a6",$4=20,TZ=5,s6={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},it={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...s6},Ixe=[it.text,it.html,...Object.values(s6)],FE={png:"png",svg:"svg",clipboard:"clipboard"},ea={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},yT=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Nxe=500,Rxe=300,_xe=500,Pxe=100,I7=.1,xT=.1,vT=30,Dxe=300,wT="invert(93%) hue-rotate(180deg)",uB={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},Lxe=730,Oxe=1e3,jxe=500,Bxe=1229,jg=2,ET=[1,2,3],T6=10,Fxe=1440,hB=4*1024*1024,Ht="http://www.w3.org/2000/svg",N7={excalidraw:2,excalidrawLibrary:2},_r=5,$xe=.7,zxe=11,ho={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},F2={LEFT:"left",CENTER:"center",RIGHT:"right"},Hxe=20,$E=.25,Vxe=32,Pr={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},IZ={architect:0,artist:1,cartoonist:2},zE={thin:1,bold:2,extraBold:4},Qn={strokeColor:At.black,backgroundColor:At.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:IZ.artist,opacity:100,locked:!1},z4="library",Vp="search",qa={name:"default",defaultTab:z4},NZ=new Set(["iframe","embeddable","image"]),zr={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},j5={OAI_API_KEY:"excalidraw-oai-api-key",MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},RZ="Untitled",Sp={generalStats:1,elementProperties:2},Ho=1,ei={sharp:"sharp",round:"round",elbow:"elbow"},_Z=.3,H4="element",Wxe=Symbol.for("__test__originalId__"),Gxe=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(Gxe||{}),Xxe=ET.includes(devicePixelRatio)?devicePixelRatio:1,lc=()=>({showWelcomeScreen:!1,theme:Nt.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:Qn.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:Qn.fillStyle,currentItemFontFamily:F0,currentItemFontSize:$f,currentItemOpacity:Qn.opacity,currentItemRoughness:Qn.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:Qn.strokeColor,currentItemRoundness:"round",currentItemArrowType:ei.round,currentItemStrokeStyle:Qn.strokeStyle,currentItemStrokeWidth:Qn.strokeWidth,currentItemTextAlign:Fb,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:Qn.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:Xxe,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:$4,gridStep:TZ,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:Sp.generalStats|Sp.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:At.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:[]}),Kxe=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}),Yxe=(e,t)=>{var r;let n={};for(let i of Object.keys(e))if((r=Kxe[i])!=null&&r[t]){let s=e[i];n[i]=s}return n},PZ=e=>Yxe(e,"export"),Rl=({activeTool:e})=>e.type==="eraser",o6=({activeTool:e})=>e.type==="hand",Mt=(e,t,n)=>Math.min(Math.max(e,t),n),tc=(e,t,n="round")=>{let r=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*r)/r},Zxe=(e,t,n="round")=>{let r=1/t;return Math[n](e*r)/r},ty=(e,t)=>(e+t)/2,B5=e=>typeof e=="number"&&Number.isFinite(e),pB=(e,t,n=1e-4)=>Math.abs(e-t)<n,V4=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function xh(e){return e*Math.PI/180}function $b(e){return e*180/Math.PI}function qxe(e){return Math.abs(Math.sin(2*e))<1e-4}function Ui(e,t,n=0,r=0){return[e-n,t-r]}function Ye(e,t=[0,0]){return Ui(e[0]-t[0],e[1]-t[1])}function $r(e,t){return e[0]*t[1]-t[0]*e[1]}function mB(e,t){return e[0]*t[0]+e[1]*t[1]}function c0(e,t){return[e[0]+t[0],e[1]+t[1]]}function W4(e,t){return[e[0]-t[0],e[1]-t[1]]}function nr(e,t){return Ui(e[0]*t,e[1]*t)}function Qxe(e){return e[0]*e[0]+e[1]*e[1]}function Jxe(e){return Math.sqrt(Qxe(e))}var Hi=e=>{let t=Jxe(e);return t===0?Ui(0,0):Ui(e[0]/t,e[1]/t)};function D(e,t){return[e,t]}function ST(e){return e.length===2?D(e[0],e[1]):void 0}function Tt(e,t=D(0,0)){return D(t[0]+e[0],t[1]+e[1])}function eve(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function rl(e,t){let n=Math.abs;return n(e[0]-t[0])<1e-4&&n(e[1]-t[1])<1e-4}function pe([e,t],[n,r],i){return D((e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r)}function G4(e,t=[0,0]){return D(e[0]+t[0],e[1]+t[1])}function zb(e,t){return D((e[0]+t[0])/2,(e[1]+t[1])/2)}function qt(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function $2(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}var $c=(e,t,n)=>G4(t,nr(Ye(e,t),n)),DZ=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function TC(e,t){return[e,t]}function tve(e,t){let n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],i=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-i*r;if(o!==0){let a=n*e[0][0]+r*e[0][1],l=i*t[0][0]+s*t[0][1];return D((a*s-l*r)/o,(n*l-i*a)/o)}return null}function Qe(e,t){return[e,t]}var Gh=(e,t,n=1e-4)=>{let r=kT(e,t);return r===0?!0:r<n},kT=(e,t)=>{let[n,r]=e,[[i,s],[o,a]]=t,l=n-i,f=r-s,c=o-i,d=a-s,u=l*c+f*d,h=c*c+d*d,g=-1;h!==0&&(g=u/h);let U,y;g<0?(U=i,y=s):g>1?(U=o,y=a):(U=i+g*c,y=s+g*d);let x=n-U,w=r-y;return Math.sqrt(x*x+w*w)};function z2(e,t){let n=tve(TC(e[0],e[1]),TC(t[0],t[1]));return!n||!Gh(n,t)||!Gh(n,e)?null:n}function IC(e,t){return[e,t]}function nve(e,t){return[Qe(e[0],D(e[1][0],e[0][1])),Qe(D(e[1][0],e[0][1]),e[1]),Qe(e[1],D(e[0][0],e[1][1])),Qe(D(e[0][0],e[1][1]),e[0])].map(n=>z2(t,n)).filter(n=>!!n)}function mf(e,t,n,r){return[e,t,n,r]}function gB(e,t,n,r=1e-6){return[(e(t+r,n)-e(t-r,n))/(2*r),(e(t,n+r)-e(t,n-r))/(2*r)]}function rve(e,t,n,r=.001,i=10){let s=1/0,o=0;for(;s>=r;){if(o>=i)return null;let a=e(t,n),l=[gB((U,y)=>e(U,y)[0],t,n),gB((U,y)=>e(U,y)[1],t,n)],f=[[-a[0]],[-a[1]]],c=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(c===0)return null;let d=[[l[1][1]/c,-l[0][1]/c],[-l[1][0]/c,l[0][0]/c]],u=[[d[0][0]*f[0][0]+d[0][1]*f[1][0]],[d[1][0]*f[0][0]+d[1][1]*f[1][0]]];t=t+u[0][0],n=n+u[1][0];let[h,g]=e(t,n);s=Math.max(Math.abs(h),Math.abs(g)),o+=1}return[t,n]}var F5=(e,t)=>D((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function LZ(e,t){let n=sve(e);if(nve(IC(D(n[0],n[1]),D(n[2],n[3])),t).length===0)return[];let r=a=>D(t[0][0]+a*(t[1][0]-t[0][0]),t[0][1]+a*(t[1][1]-t[0][1])),i=[[.5,0],[.2,0],[.8,0]],s=([a,l])=>{let f=rve((u,h)=>{let g=F5(e,u),U=r(h);return[g[0]-U[0],g[1]-U[1]]},a,l);if(!f)return null;let[c,d]=f;return c<0||c>1||d<0||d>1?null:F5(e,c)},o=s(i[0]);return o?[o]:(o=s(i[1]),o?[o]:(o=s(i[2]),o?[o]:[]))}function ive(e,t,n=.001){let r=(l,f,c,d=n)=>{let u=l,h=f,g;for(;h-u>d;)g=(h+u)/2,c(g-d)<c(g+d)?h=g:u=g;return g},i=0;for(let l=1/0,f=0;f<30;f++){let c=qt(t,F5(e,f/30));c<l&&(l=c,i=f)}let s=Math.max((i-1)/30,0),o=Math.min((i+1)/30,1),a=r(s,o,l=>qt(t,F5(e,l)));return a?F5(e,a):null}function OZ(e,t){let n=ive(e,t);return n?qt(t,n):0}function sve(e){let[t,n,r,i]=e,s=[t[0],n[0],r[0],i[0]],o=[t[1],n[1],r[1],i[1]];return[Math.min(...s),Math.min(...o),Math.max(...s),Math.max(...o)]}function bB(...e){return jZ(e)}function X4(e){return jZ(e)}var UB=(e,t)=>{let n=e[0],r=e[1],i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){let a=t[s][0],l=t[s][1],f=t[o][0],c=t[o][1];(l>r&&c<=r||l<=r&&c>r)&&n<(f-a)*(r-l)/(c-l)+a&&(i=!i)}return i},ove=(e,t,n=1e-4)=>{let r=!1;for(let i=0,s=t.length-1;i<s;i++)if(Gh(e,Qe(t[i],t[i+1]),n)){r=!0;break}return r};function jZ(e){return ave(e)?e:[...e,e[0]]}function ave(e){return rl(e[0],e[e.length-1])}function Bi(e,t){return ra([e,t])}var K4=([e,t],[n,r])=>e<=n?t>=n:e>=n?r>=e:!1,Y4=([e,t],[n,r])=>{let i=Math.max(e,n),s=Math.min(t,r);return i<=s?ra([i,s]):null},ny=(e,[t,n])=>e>=t&&e<=n;function q1([e,t,n],r){let i=(c,d,u)=>(c[0]-u[0])*(d[1]-u[1])-(d[0]-u[0])*(c[1]-u[1]),s=i(r,e,t),o=i(r,t,n),a=i(r,n,e),l=s<0||o<0||a<0,f=s>0||o>0||a>0;return!(l&&f)}var yB=()=>{let e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),r=`${e.getDate()}`.padStart(2,"0"),i=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${r}-${i}${s}`},$5=e=>e.charAt(0).toUpperCase()+e.slice(1),lve=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),NC=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,cve=e=>NC(e)||e instanceof Element&&!!e.closest("label, button"),Eu=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),a6=({fontFamily:e})=>{for(let[t,n]of Object.entries($n))if(n===e)return`${t}${MZ(n).map(r=>`, ${r}`).join("")}`;return B2},cn=({fontSize:e,fontFamily:t})=>`${e}px ${a6({fontFamily:t})}`,l6=(e,t)=>{let n=0,r=null,i=(...s)=>{r=s,clearTimeout(n),n=window.setTimeout(()=>{r=null,e(...s)},t)};return i.flush=()=>{if(clearTimeout(n),r){let s=r;r=null,e(...s)}},i.cancel=()=>{r=null,clearTimeout(n)},i},R7=(e,t)=>{let n=null,r=null,i=null,s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),r=null,i&&(r=i,i=null,s(r))})},o=(...a)=>{if(vt.MODE==="test"){e(...a);return}r=a,n===null?s(r):t!=null&&t.trailing&&(i=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),r&&(e(...i||r),r=i=null)},o.cancel=()=>{r=i=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},vh=e=>1-Math.pow(1-e,4),xB=(e,t,n)=>(t-e)*vh(n)+e,fve=({fromValues:e,toValues:t,onStep:n,duration:r=250,interpolateValue:i,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,f=0,c;function d(u){if(l)return;c===void 0&&(c=u,s==null||s());let h=Math.min(u-c,r),g=vh(h/r),U={};if(Object.keys(e).forEach(y=>{let x=y,w=(t[x]-e[x])*g+e[x];U[x]=w}),n(U),h<r){let y=h/r,x={};Object.keys(e).forEach(w=>{let E=w,S=e[E],A=t[E],M;M=i?i(S,A,y,E):xB(S,A,y),M==null&&(M=xB(S,A,y)),x[E]=M}),n(x),f=window.requestAnimationFrame(d)}else n(t),o==null||o()}return f=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(f)}},dve=(e,t)=>{if(!e.length||t<1)return[];let n=0,r=0,i=Array(Math.ceil(e.length/t));for(;n<e.length;)i[r++]=e.slice(n,n+=t);return i},Fi=(e,t)=>Math.abs(e-t),yr=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},Ue=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),ac?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),yn=({clientX:e,clientY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:o})=>{let a=(e-r)/n.value-s,l=(t-i)/n.value-o;return{x:a,y:l}},Wa=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:o})=>{let a=(e+s)*n.value+r,l=(t+o)*n.value+i;return{x:a,y:l}},ry=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),uve="A-Za-z--------",hve="---",pve=new RegExp(`^[^${uve}]*[${hve}]`),BZ=e=>pve.test(e),Ga=e=>{let[t,n]=e;return{x:t,y:n}},FZ=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},$Z=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},Su=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},Xa=e=>{let t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===At.transparent},HE=e=>e.fillStyle!=="solid"||Xa(e.backgroundColor),mve=()=>{let e,t,n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},gve=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;let{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},bve=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},Uve=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),I6=()=>Af()?1:Date.now(),ct=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),yve=e=>e.reduce((t,n,r)=>(t.set(n.id,[n,r]),t),new Map),Oc=(e,t)=>e.reduce((n,r)=>(n[t?t(r):String(r)]=r,n),{}),xve=e=>e.reduce((t,n,r)=>{let i={...n,prev:null,next:null};if(r!==0){let s=t[r-1];if(i.prev=s,s.next=i,r===e.length-1){let o=t[0];i.next=o,o.prev=i}}return t.push(i),t},[]),Af=()=>vt.MODE==="test",zZ=()=>vt.MODE==="development",vve=()=>typeof process<"u"&&!0,HZ=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),qy=(e,t)=>{let n=!1;for(let r in t){let i=t[r];if(typeof i<"u"){if(e[r]===i&&(typeof i!="object"||i===null))continue;n=!0}}return n?{...e,...t}:e},wve=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Hb=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,RC=e=>{let t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},vB=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Si=(e,t,n,r=!1)=>{let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return r&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(let o of n)if(!(e[o]===t[o]||vB(e[o],t[o])))return r&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return i.every(o=>{let a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||vB(e[o],t[o]);return!l&&r&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},_7=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},Xh=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function Gi(e,t){if(!e)throw new Error(t)}var Eve=e=>{let t,n,r=function(i){let s=Object.entries(i);if(t){let a=!0;for(let[l,f]of s)if(t.get(l)!==f){a=!1;break}if(a)return n}let o=e(i);return t=new Map(s),n=o,o};return r.clear=()=>{t=void 0,n=void 0},r},VZ=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),vf=e=>JSON.parse(JSON.stringify(e)),Bg=(e,t)=>Si(e,t)?e:t;function Bn(e,t,n,r){var i;return e?((i=e==null?void 0:e.addEventListener)==null||i.call(e,t,n,r),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,r)}):()=>{}}function Sve(e,t=!0){let n=e.length;if(n<4)return"";let r=e[0],i=e[1],s=e[2],o=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${ty(i[0],s[0]).toFixed(2)},${ty(i[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)r=e[a],i=e[a+1],o+=`${ty(r[0],i[0]).toFixed(2)},${ty(r[1],i[1]).toFixed(2)} `;return t&&(o+="Z"),o}var WZ=e=>e.replace(/\r?\n|\r/g,`
`),ra=e=>e,c6=async(e,...t)=>new Promise(n=>{n(e(...t))}),kve=(...e)=>Math.max(...e.map(t=>t?1:0))>0,wB=class{constructor(e,t){Z(this,"pool"),Z(this,"entries",{}),this.pool=new i7e(e,t)}all(){let e=t=>{if(t.data.result){let[n,r]=t.data.result;this.entries[n]=r}};return this.pool.addEventListener("fulfilled",e),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",e)}),Object.values(this.entries)))}},Qy=e=>e.replace(/"/g,"&quot;"),EB=e=>Array.isArray(e)?e:[e],Go=e=>!!e&&e.type==="image"&&!!e.fileId,Zt=e=>!!e&&e.type==="image",Rs=e=>!!e&&e.type==="embeddable",_d=e=>!!e&&e.type==="iframe",Ko=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),je=e=>e!=null&&e.type==="text",GZ=e=>e!=null&&e.type==="frame",Jy=e=>e!=null&&e.type==="magicframe",at=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),ia=e=>e!=null&&Cve(e.type),Cve=e=>e==="freedraw",mt=e=>e!=null&&CT(e.type),Et=e=>e!=null&&e.type==="arrow",Fe=e=>Et(e)&&e.elbowed,CT=e=>e==="arrow"||e==="line",Yl=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&XZ(e.type),XZ=e=>e==="arrow",il=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Ave=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),wh=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||Et(e)),KZ=e=>{let t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return Xh(t,null),!1}},P7=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",sa=e=>{var t;return wh(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Mn=e=>e!==null&&"containerId"in e&&e.containerId!==null&&je(e),N6=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",YZ=e=>e==="line"||e==="arrow"||e==="diamond",Mve=(e,t)=>!!((e===Pr.ADAPTIVE_RADIUS||e===Pr.LEGACY)&&N6(t.type)||e===Pr.PROPORTIONAL_RADIUS&&YZ(t.type)),Tve=e=>YZ(e.type)?{type:Pr.PROPORTIONAL_RADIUS}:N6(e.type)?{type:Pr.ADAPTIVE_RADIUS}:null,Z4=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,Xi=(e,t,n)=>{let r=e.split(`
`).map(o=>o||" ").join(`
`),i=parseFloat(t),s=_ve(r,i,n);return{width:TT(r,t),height:s}},ZZ="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),qZ=(e,t)=>{let n=Pve(e);return n===0?Xi(ZZ.split("").join(`
`),e,t).width+_r*2:n+_r*2},AT=(e,t)=>Xi("",e,t).width+_r*2,Ive=()=>TT(ZZ,cn({fontSize:$f,fontFamily:F0}))>0,f6=e=>WZ(e).replace(/\t/g,"        "),MT=e=>f6(e).split(`
`),Nve=e=>{let t=MT(e.text).length;return e.height/t/e.fontSize},Vb=(e,t)=>e*t,QZ=(e,t)=>Vb(e,t)+_r*2,VE,Rve=class{constructor(){Z(this,"canvas"),this.canvas=document.createElement("canvas")}getLineWidth(e,t){let n=this.canvas.getContext("2d");n.font=t;let r=n.measureText(e).width;return Af()?r*10:r}},Kh=(e,t)=>(VE||(VE=new Rve),VE.getLineWidth(e,t)),TT=(e,t)=>{let n=MT(e),r=0;return n.forEach(i=>{r=Math.max(r,Kh(i,t))}),r},_ve=(e,t,n)=>{let r=MT(e).length;return Vb(t,n)*r},Wb=(()=>{let e={};return{calculate:(t,n)=>{let r=t.charCodeAt(0);if(e[n]||(e[n]=[]),!e[n][r]){let i=Kh(t,n);e[n][r]=i}return e[n][r]},getCache:t=>e[t],clearCache:t=>{e[t]=[]}}})(),Pve=e=>{let t=Wb.getCache(e);if(!t)return 0;let n=t.filter(r=>r!==void 0);return Math.max(...n)},WE,iy,GE,Dve=e=>(WE||(WE=tn.class(...Object.values(Vc))),WE.test(e)),Lve=()=>{if(!iy)try{iy=jve()}catch{iy=Ove()}return iy},IT=()=>(GE||(GE=Bve()),GE),Ro={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?\//u},Vc={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}","u"),OPENING://u,CLOSING://u,CURRENCY://u},lu={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},Ove=()=>tn.or(IT(),ur.On(Ro.HYPHEN,Ro.WHITESPACE,Vc.CHAR)),jve=()=>tn.or(IT(),ur.Before(Ro.WHITESPACE).Build(),ur.After(Ro.WHITESPACE,Ro.HYPHEN).Build(),ur.Before(Vc.CHAR,Vc.CURRENCY).NotPrecededBy(Ro.OPENING,Vc.OPENING).Build(),ur.After(Vc.CHAR).NotFollowedBy(Ro.HYPHEN,Ro.CLOSING,Vc.CLOSING).Build(),ur.BeforeMany(Vc.OPENING).NotPrecededBy(Ro.OPENING).Build(),ur.AfterMany(Vc.CLOSING).NotFollowedBy(Ro.CLOSING).Build(),ur.AfterMany(Ro.CLOSING).FollowedBy(Ro.OPENING).Build()),Bve=()=>tn.group(tn.or(lu.FLAG,tn.and(lu.MOST,lu.JOINER,tn.build(`(?:${lu.ZWJ.source}(?:${lu.FLAG.source}|${lu.ANY.source}${lu.JOINER.source}))*`)))),tn={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>tn.build(tn.join(...e)),or:(...e)=>tn.build(e.map(t=>t.source).join("|")),group:(...e)=>tn.build(`(${tn.join(...e)})`),class:(...e)=>tn.build(`[${tn.join(...e)}]`)},ur={On:(...e)=>{let t=tn.join(...e);return tn.build(`([${t}])`)},Before:(...e)=>{let t=tn.join(...e),n=()=>tn.build(`(?=[${t}])`);return ur.Chain(n)},After:(...e)=>{let t=tn.join(...e),n=()=>tn.build(`(?<=[${t}])`);return ur.Chain(n)},BeforeMany:(...e)=>{let t=tn.join(...e),n=()=>tn.build(`(?<![${t}])(?=[${t}])`);return ur.Chain(n)},AfterMany:(...e)=>{let t=tn.join(...e),n=()=>tn.build(`(?<=[${t}])(?![${t}])`);return ur.Chain(n)},NotBefore:(...e)=>{let t=tn.join(...e),n=()=>tn.build(`(?![${t}])`);return ur.Chain(n)},NotAfter:(...e)=>{let t=tn.join(...e),n=()=>tn.build(`(?<![${t}])`);return ur.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{let n=e(),r=ur.After(...t).Build(),i=()=>tn.and(r,n);return ur.Chain(i)},FollowedBy:(...t)=>{let n=e(),r=ur.Before(...t).Build(),i=()=>tn.and(n,r);return ur.Chain(i)},NotPrecededBy:(...t)=>{let n=e(),r=ur.NotAfter(...t).Build(),i=()=>tn.and(r,n);return ur.Chain(i)},NotFollowedBy:(...t)=>{let n=e(),r=ur.NotBefore(...t).Build(),i=()=>tn.and(n,r);return ur.Chain(i)}})},Fve=e=>{let t=Lve();return e.normalize("NFC").split(t).filter(Boolean)},f1=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;let r=[],i=e.split(`
`);for(let s of i){if(Kh(s,t)<=n){r.push(s);continue}let o=$ve(s,t,n);r.push(...o)}return r.join(`
`)},$ve=(e,t,n)=>{let r=[],i=Fve(e)[Symbol.iterator](),s="",o=0,a=i.next();for(;!a.done;){let l=a.value,f=s+l,c=Vve(l)?o+Wb.calculate(l,t):Kh(f,t);if(/\s/.test(l)||c<=n){s=f,o=c,a=i.next();continue}if(s)r.push(s.trimEnd()),s="",o=0;else{let d=zve(l,t,n),u=d[d.length-1]??"",h=d.slice(0,-1);r.push(...h),s=u,o=Kh(u,t),a=i.next()}}if(s){let l=Hve(s,t,n);r.push(l)}return r},zve=(e,t,n)=>{if(IT().test(e))return[e];Wve(e);let r=[],i=Array.from(e),s="",o=0;for(let a of i){let l=Wb.calculate(a,t),f=o+l;if(f<=n){s=s+a,o=f;continue}s&&r.push(s),s=a,o=l}return s&&r.push(s),r},Hve=(e,t,n)=>{if(!(Kh(e,t)>n))return e;let[,r,i]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],s=Kh(r,t);for(let o of Array.from(i)){let a=Wb.calculate(o,t),l=s+a;if(l>n)break;r=r+o,s=l}return r},Vve=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,Wve=e=>{if((vt.MODE===Fs.TEST||vt.DEV)&&/\s/.test(e))throw new Error("Word should not contain any whitespaces!")},es=class{};Z(es,"rg",new O2),Z(es,"cache",new WeakMap),Z(es,"get",e=>es.cache.get(e)),Z(es,"set",(e,t)=>es.cache.set(e,t)),Z(es,"delete",e=>es.cache.delete(e)),Z(es,"destroy",()=>{es.cache=new WeakMap}),Z(es,"generateElementShape",(e,t)=>{let n=t!=null&&t.isExporting?void 0:es.get(e);if(n!==void 0)return n;$C.delete(e);let r=QMe(e,es.rg,t||{isExporting:!1,canvasBackgroundColor:At.white,embedsValidationStatus:null});return es.cache.set(e,r),r});var Vn=es,$a=e=>"var(--icon-fill-color)",JZ=e=>e===Nt.LIGHT?ai.white:"#1e1e1e",oe=(e,t=512)=>{let{width:n=512,height:r=n,mirror:i,style:s,...o}=typeof t=="number"?{width:t}:t;return m.jsx("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${r}`,className:ze({"rtl-mirror":i}),style:s,...o,children:typeof e=="string"?m.jsx("path",{fill:"currentColor",d:e}):e})},Le={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},bt={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("rect",{x:3,y:8,width:18,height:4,rx:1}),m.jsx("line",{x1:12,y1:8,x2:12,y2:21}),m.jsx("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),m.jsx("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),Le);var NT=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),m.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),m.jsx("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),Le),Gve=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Le),Xve=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"1"}),m.jsx("circle",{cx:"12",cy:"19",r:"1"}),m.jsx("circle",{cx:"12",cy:"5",r:"1"})]}),Le),Kve=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),m.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),m.jsx("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),Le),D7=oe(m.jsxs("g",{children:[m.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:m.jsx("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),m.jsx("g",{mask:"url(#UnlockedIcon)",children:m.jsx("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),bt),RT=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),m.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),m.jsx("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),bt),Yve=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),m.jsx("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),Zve=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),m.jsx("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),qve=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),m.jsx("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"});oe(m.jsx("g",{fill:"currentColor",children:m.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"});var Qve=oe(m.jsxs("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),m.jsx("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),Jve=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),Le),ewe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),Le),twe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"})]}),Le),nwe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),m.jsx("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),Le),rwe=oe(m.jsx("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),bt),iwe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),m.jsx("path",{d:"M16 7h4"}),m.jsx("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),Le),H2=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),m.jsx("path",{d:"m11.25 5.417 3.333 3.333"})]}),bt),eq=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),m.jsx("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),m.jsx("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),m.jsx("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),m.jsx("polyline",{points:"5 20 11 4 13 4 20 20"})]}),Le),swe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M12.5 6.667h.01"}),m.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),m.jsx("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),m.jsx("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),bt),owe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),m.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]}),Le),SB=oe(m.jsx("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),bt),kB=oe(m.jsx("path",{d:"M5 10h10",strokeWidth:"1.25"}),bt),awe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M21 21l-6 -6"}),m.jsx("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),m.jsx("path",{d:"M3 4v4h4"})]}),Le),Yh=oe(m.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),bt),lwe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("polyline",{points:"12 16 18 10 12 4"}),m.jsx("polyline",{points:"8 4 2 10 8 16"})]}),bt),_C=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),m.jsx("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),bt),PC=oe(m.jsx("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),bt),DC=oe(m.jsx("g",{stroke:"currentColor",strokeLinejoin:"round",children:m.jsx("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...bt,strokeWidth:1.5}),tq=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),m.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),Le),L7=oe(m.jsx("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),bt),_T=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Le),cwe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Le),CB=oe(m.jsx("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),bt),nq=oe(m.jsx("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),bt),fwe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),m.jsx("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),bt),dwe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),m.jsx("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),Le),uwe=oe(m.jsx("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),LC=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),m.jsx("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),bt),hwe=oe("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),pwe=oe("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),PT=oe(m.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),bt);oe("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});var mwe=oe("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),XE=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),m.jsx("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),m.jsx("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),Le),rq=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 8h.01"}),m.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),m.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),m.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),m.jsx("path",{d:"M19 16v6"}),m.jsx("path",{d:"M22 19l-3 3l-3 -3"})]}),Le),gwe=oe("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});oe("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});oe("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});var bwe=oe("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");oe("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");var AB=oe(m.jsx("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),bt),MB=oe(m.jsx("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),bt),Uwe=oe("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0});oe(m.jsx("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),bt);oe("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");oe("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24});oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),m.jsx("path",{d:"M12 14v-11"}),m.jsx("path",{d:"M9 6l3 -3l3 3"})]}),Le);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),m.jsx("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});oe(m.jsx("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});var iq=m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 10l0 10"}),m.jsx("path",{d:"M12 10l4 4"}),m.jsx("path",{d:"M12 10l-4 4"}),m.jsx("path",{d:"M4 4l16 0"})]}),sq=m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 5l0 14"}),m.jsx("path",{d:"M16 9l-4 -4"}),m.jsx("path",{d:"M8 9l4 -4"})]}),TB=oe(sq,Le),IB=oe(sq,{...Le,style:{transform:"rotate(180deg)"}}),NB=oe(iq,Le),RB=oe(iq,{...Le,style:{transform:"rotate(180deg)"}}),_B=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),PB=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),DB=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),LB=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),ywe=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),xwe=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),OB=oe(m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),m.jsx("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),bt),jB=oe(m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),m.jsx("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),bt),oq=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"9",cy:"7",r:"4"}),m.jsx("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),m.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),m.jsx("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),Le);oe("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");oe("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");var R6=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M15 5 5 15M5 5l10 10"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt);oe("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});oe("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});oe("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});var BB=Te.memo(({theme:e})=>oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M25 26H111V111H25",fill:$a()}),m.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:$a(),strokeWidth:"2"}),m.jsx("path",{d:"M100 100H160V160H100",fill:$a()}),m.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:$a(),strokeWidth:"2"}),m.jsxs("g",{fill:JZ(e),stroke:$a(),strokeWidth:"6",children:[m.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),FB=Te.memo(({theme:e})=>oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M25 26H111V111H25",fill:$a()}),m.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:$a(),strokeWidth:"2"}),m.jsx("path",{d:"M100 100H160V160H100",fill:$a()}),m.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:$a(),strokeWidth:"2"}),m.jsxs("g",{fill:JZ(e),stroke:$a(),strokeWidth:"6",children:[m.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),m.jsx("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),vwe=oe(m.jsx("g",{strokeWidth:1.25,children:m.jsx("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),bt),wwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),m.jsx("g",{mask:"url(#FillHachureIcon)",children:m.jsx("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),bt),Ewe=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",children:[m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:m.jsx("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("g",{mask:"url(#FillCrossHatchIcon)",children:m.jsx("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),Swe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...bt,fill:"currentColor"}),aq=oe(m.jsx(m.Fragment,{children:m.jsx("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),bt),kwe=oe(m.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),bt),Cwe=oe(m.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),bt);Te.memo(({theme:e})=>oe(m.jsx("path",{d:"M6 10H34",stroke:$a(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));var Awe=oe(m.jsxs("g",{strokeWidth:"2",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12h2"}),m.jsx("path",{d:"M17 12h2"}),m.jsx("path",{d:"M11 12h2"})]}),Le),Mwe=oe(m.jsxs("g",{strokeWidth:"2",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 12v.01"}),m.jsx("path",{d:"M8 12v.01"}),m.jsx("path",{d:"M12 12v.01"}),m.jsx("path",{d:"M16 12v.01"}),m.jsx("path",{d:"M20 12v.01"})]}),Le),Twe=oe(m.jsx("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),bt),Iwe=oe(m.jsx("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),bt),Nwe=oe(m.jsx("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),bt),Rwe=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),m.jsx("path",{d:"M13.3333 3.33331V3.34331"}),m.jsx("path",{d:"M16.6667 3.33331V3.34331"}),m.jsx("path",{d:"M16.6667 6.66669V6.67669"}),m.jsx("path",{d:"M16.6667 10V10.01"}),m.jsx("path",{d:"M3.33334 13.3333V13.3433"}),m.jsx("path",{d:"M16.6667 13.3333V13.3433"}),m.jsx("path",{d:"M3.33334 16.6667V16.6767"}),m.jsx("path",{d:"M6.66666 16.6667V16.6767"}),m.jsx("path",{d:"M10 16.6667V16.6767"}),m.jsx("path",{d:"M13.3333 16.6667V16.6767"}),m.jsx("path",{d:"M16.6667 16.6667V16.6767"})]}),bt),_we=oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),m.jsx("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),m.jsx("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),m.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),m.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),m.jsx("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),m.jsx("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),m.jsx("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),m.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),m.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),m.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),m.jsx("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),Le),Pwe=oe(m.jsxs("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[m.jsx("path",{d:"M12 12l9 0"}),m.jsx("path",{d:"M3 9l6 6"}),m.jsx("path",{d:"M3 15l6 -6"})]}),Le),Dwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[m.jsx("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),m.jsx("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),Lwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[m.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),m.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Owe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[m.jsx("path",{d:"M26 10L6 10"}),m.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),jwe=Te.memo(({flip:e=!1})=>oe(m.jsx("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:m.jsx("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),Bwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[m.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),m.jsx("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Fwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[m.jsx("path",{d:"M6,9.5H27"}),m.jsx("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),$we=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{d:"M6,9.5H20"}),m.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),zwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{d:"M6,9.5H20"}),m.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Hwe=Te.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Vwe=Te.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),Wwe=Te.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Gwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),Xwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),Kwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),Ywe=oe(m.jsx(m.Fragment,{children:m.jsx("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),bt),O7=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 7v-2h13v2"}),m.jsx("path",{d:"M10 5v14"}),m.jsx("path",{d:"M12 19h-4"}),m.jsx("path",{d:"M15 13v-1h6v1"}),m.jsx("path",{d:"M18 12v7"}),m.jsx("path",{d:"M17 19h2"})]}),Le),Zwe=oe(m.jsx(m.Fragment,{children:m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 12h10"}),m.jsx("path",{d:"M7 5v14"}),m.jsx("path",{d:"M17 5v14"}),m.jsx("path",{d:"M15 19h4"}),m.jsx("path",{d:"M15 5h4"}),m.jsx("path",{d:"M5 19h4"}),m.jsx("path",{d:"M5 5h4"})]})}),Le),q4=oe(m.jsx(m.Fragment,{children:m.jsx("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),bt),OC=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),qwe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),m.jsx("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),Le),Qwe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),m.jsx("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),Le),Jwe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),Le),eEe=Te.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),m.jsx("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),Le)),tEe=Te.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),m.jsx("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),Le)),nEe=Te.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),m.jsx("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),m.jsx("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),Le)),lq=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M21 19h-18l9 -15"}),m.jsx("path",{d:"M20.615 15.171h.015"}),m.jsx("path",{d:"M19.515 11.771h.015"}),m.jsx("path",{d:"M17.715 8.671h.015"}),m.jsx("path",{d:"M15.415 5.971h.015"})]}),Le),rEe=oe(m.jsx("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});oe(m.jsx("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));var cq=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),m.jsx("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),m.jsx("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),m.jsx("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),Le),$B=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M7 11l5 5l5 -5"}),m.jsx("path",{d:"M12 4l0 12"})]}),Le),DT=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),m.jsx("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),Le),iEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M9.15 14.85l8.85 -10.85"}),m.jsx("path",{d:"M6 4l8.85 10.85"})]}),Le),sEe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),m.jsx("path",{d:"M12 17l0 .01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Le);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 4v16l13 -8z"})]}),Le);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),Le);var oEe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12l5 5l10 -10"})]}),Le),aEe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),m.jsx("path",{d:"M12 9v4"}),m.jsx("path",{d:"M12 17h.01"})]}),Le),lEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 7l6 6"}),m.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),Le),cEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 3l-4 7h8z"}),m.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),Le),fq=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 7l16 0"}),m.jsx("path",{d:"M4 17l16 0"}),m.jsx("path",{d:"M7 4l0 16"}),m.jsx("path",{d:"M17 4l0 16"})]}),Le),dq=oe(m.jsx("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),e3=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M4.16602 10H15.8327"}),m.jsx("path",{d:"M12.5 13.3333L15.8333 10"}),m.jsx("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),bt),uq=oe(m.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[m.jsx("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),m.jsx("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),hq=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),m.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),Le);oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),m.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),Le);oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),m.jsx("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),m.jsx("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),m.jsx("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),m.jsx("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),m.jsx("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),Le);var fEe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),m.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),m.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),m.jsx("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),Le),LT=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),m.jsx("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),Le),dEe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),m.jsx("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),m.jsx("path",{d:"M3 3l18 18"})]}),Le);oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),m.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),m.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),m.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),m.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),m.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),Le);var uEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),m.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),m.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),m.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),m.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),m.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),Le),Zh=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),m.jsx("path",{d:"M21 21l-6 -6"})]}),Le),hEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),m.jsx("path",{d:"M12 7v5l3 3"}),m.jsx("path",{d:"M19 16l-2 3h4l-2 3"})]}),Le),pEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),m.jsx("path",{d:"M5 10a7 7 0 0 0 14 0"}),m.jsx("path",{d:"M8 21l8 0"}),m.jsx("path",{d:"M12 17l0 4"})]}),Le),mEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 3l18 18"}),m.jsx("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),m.jsx("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),m.jsx("path",{d:"M8 21l8 0"}),m.jsx("path",{d:"M12 17l0 4"})]}),Le),pq=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),Le),gEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M12 20v.01"}),m.jsx("path",{d:"M16 20v.01"}),m.jsx("path",{d:"M8 20v.01"}),m.jsx("path",{d:"M4 20v.01"}),m.jsx("path",{d:"M4 16v.01"}),m.jsx("path",{d:"M4 12v.01"}),m.jsx("path",{d:"M4 8v.01"}),m.jsx("path",{d:"M4 4v.01"}),m.jsx("path",{d:"M8 4v.01"}),m.jsx("path",{d:"M12 4v.01"}),m.jsx("path",{d:"M16 4v.01"}),m.jsx("path",{d:"M20 4v.01"}),m.jsx("path",{d:"M20 8v.01"}),m.jsx("path",{d:"M20 12v.01"}),m.jsx("path",{d:"M20 16v.01"}),m.jsx("path",{d:"M20 20v.01"})]}),Le),bEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 3v18"}),m.jsx("path",{d:"M19 21v-18"}),m.jsx("path",{d:"M5 7h14"}),m.jsx("path",{d:"M5 15h14"}),m.jsx("path",{d:"M8 13v4"}),m.jsx("path",{d:"M11 13v4"}),m.jsx("path",{d:"M16 13v4"}),m.jsx("path",{d:"M14 5v4"}),m.jsx("path",{d:"M11 5v4"}),m.jsx("path",{d:"M8 5v4"}),m.jsx("path",{d:"M3 21h18"})]}),Le),UEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 12l18 0"}),m.jsx("path",{d:"M7 16l10 0l-10 5l0 -5"}),m.jsx("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),Le),yEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 3l0 18"}),m.jsx("path",{d:"M16 7l0 10l5 0l-5 -10"}),m.jsx("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),Le),mq=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),m.jsx("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),m.jsx("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),Le),OT=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),m.jsx("path",{d:"M22 22l-3 -3"}),m.jsx("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),m.jsx("path",{d:"M3 11v-1"}),m.jsx("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),m.jsx("path",{d:"M10 3h1"}),m.jsx("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),Le),xEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),m.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),m.jsx("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),m.jsx("path",{d:"M10 15l2 6l2 -6"}),m.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),Le),vEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),m.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),m.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),m.jsx("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),m.jsx("path",{d:"M11 21v-6l3 6v-6"})]}),Le),wEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),m.jsx("path",{d:"M4 8l5 0"}),m.jsx("path",{d:"M15 8l4 0"})]}),Le),EEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),m.jsx("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),m.jsx("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),m.jsx("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),m.jsx("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),Le),SEe=oe(m.jsxs("g",{stroke:"currentColor",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...Le,strokeWidth:1.5});oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M21 12h-13l3 -3"}),m.jsx("path",{d:"M11 15l-3 -3"})]}),Le);var kEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),m.jsx("path",{d:"M10 9l5 3l-5 3z"})]}),Le),CEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 6h18"}),m.jsx("path",{d:"M3 12h18"}),m.jsx("path",{d:"M3 18h18"}),m.jsx("path",{d:"M6 3v18"}),m.jsx("path",{d:"M12 3v18"}),m.jsx("path",{d:"M18 3v18"})]}),Le),AEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),Le),MEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 18l12 -12"}),m.jsx("path",{d:"M18 10v-4h-4"})]}),Le),TEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),m.jsx("path",{d:"M18 4l3 3l-3 3"})]}),Le),IEe=oe(m.jsxs("g",{children:[m.jsx("path",{d:"M16,12L20,9L16,6"}),m.jsx("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),Le),gq=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 9l6 6l6 -6"})]}),Le),NEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15l6 -6l6 6"})]}),Le),REe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15l6 -6l6 6"})]}),Le),zB=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),m.jsx("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),Le),bq=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M5 7l0 10"}),m.jsx("path",{d:"M7 5l10 0"}),m.jsx("path",{d:"M7 19l10 0"}),m.jsx("path",{d:"M19 7l0 10"})]}),Le),Q4={[$n.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:H2},[$n.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35},icon:q4},[$n["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15},icon:Zwe},[$n["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25},icon:OC},[$n.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:H2,deprecated:!0},[$n.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},icon:q4,deprecated:!0,local:!0},[$n.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},icon:OC,deprecated:!0},[$n["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[Ep.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[Ep["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},ku={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},jT="local:",_Ee=class extends Error{constructor(e="Couldn't export canvas.",t="CANVAS_ERROR"){super(),this.name=t,this.message=e}},j7=class extends DOMException{constructor(e="Request Aborted"){super(e,"AbortError")}},Fu=class extends Error{constructor(e="Image Scene Data Error",t="IMAGE_SCENE_DATA_ERROR"){super(e),Z(this,"code"),this.name="EncodingError",this.code=t}},PEe=class extends Error{constructor(){super(...arguments),Z(this,"code","ELEMENT_HAS_INVALID_INDEX")}},Uq=class extends Error{constructor(e="Worker URL is not defined!",t="WORKER_URL_NOT_DEFINED"){super(e),Z(this,"code"),this.name="WorkerUrlNotDefinedError",this.code=t}},yq=class extends Error{constructor(e="Worker has to be in a separate chunk!",t="WORKER_IN_THE_MAIN_CHUNK"){super(e),Z(this,"code"),this.name="WorkerInTheMainChunkError",this.code=t}},HB=class extends Error{constructor(e){super(e),this.name="ExcalidrawError"}},DEe=class{constructor(e){Z(this,"instance"),Z(this,"debounceTerminate"),this.instance=new Worker(e,{type:"module"})}},LEe=class xq{constructor(t,n){Z(this,"idleWorkers",new Set),Z(this,"workerUrl"),Z(this,"workerTTL"),this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new Uq;if(!import.meta.url||t.toString()===import.meta.url)throw new yq;return new xq(t,n)}async postMessage(t,n){let r,i=Array.from(this.idleWorkers).shift();return i?(this.idleWorkers.delete(i),r=i):r=await this.createWorker(),new Promise((s,o)=>{r.instance.onmessage=this.onMessageHandler(r,s),r.instance.onerror=this.onErrorHandler(r,o),r.instance.postMessage(t,n),r.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(let t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){let t=new DEe(this.workerUrl);return t.debounceTerminate=l6(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return r=>{t.debounceTerminate(),this.idleWorkers.add(t),n(r.data)}}onErrorHandler(t,n){return r=>{t.debounceTerminate(()=>n(r)),t.debounceTerminate.flush(),this.clear()}}},VB=typeof Worker<"u",OEe=async(e,t)=>{let{Commands:n,subsetToBase64:r,toBase64:i}=await BEe();return VB?c6(async()=>{try{let s=await FEe(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return i(a)}catch(s){return VB=!1,vve()&&(s instanceof Uq||s instanceof yq)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),r(e,t)}}):r(e,t)},KE=null,YE=null,jEe=async()=>(KE||(KE=Ve(()=>import("./subset-worker.chunk-Bd5gH6yC.js"),__vite__mapDeps([0,1]))),KE),BEe=async()=>(YE||(YE=Ve(()=>import("./subset-shared.chunk-CYmretqf.js"),[])),YE),ZE=null,FEe=()=>(ZE||(ZE=c6(async()=>{let{WorkerUrl:e}=await jEe();return LEe.create(e)})),ZE),vq=class t3{constructor(t,n,r){Z(this,"urls"),Z(this,"fontFace"),this.urls=t3.createUrls(n);let i=this.urls.map(s=>`url(${s}) ${t3.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,i,{display:"swap",style:"normal",weight:"400",...r})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;let n=Array.from(t).map(r=>r.codePointAt(0));return this.getContent(n).then(r=>`@font-face { font-family: ${this.fontFace.family}; src: url(${r}); }`)}async getContent(t){let n=0,r=[];for(;n<this.urls.length;){let i=this.urls[n];try{let s=await this.fetchFont(i);return await OEe(s,t)}catch(s){r.push(`"${i.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(r,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return c6(async()=>{let n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){let r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){let t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{let[r,i]=n.replace("U+","").split("-");return i?`\\u{${r}}-\\u{${i}}`:`\\u{${r}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(jT))return[];if(t.startsWith("http"))return[new URL(t)];let n=t.replace(/^\/+/,""),r=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){let i=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);r.push(new URL(n,i))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(i=>{let s=this.normalizeBaseUrl(i);r.push(new URL(n,s))});return r.push(new URL(n,t3.ASSETS_FALLBACK_URL)),r}static getFormat(t){if(!(t instanceof URL))return"";try{let n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var r;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(r=window==null?void 0:window.location)==null?void 0:r.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};Z(vq,"ASSETS_FALLBACK_URL",`https://esm.sh/${`${vt.PKG_NAME}@${vt.PKG_VERSION}`}/dist/prod/`);var $Ee=vq,zEe="./fonts/Cascadia/CascadiaCode-Regular.woff2",HEe=[{uri:zEe}],VEe="./fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",WEe="./fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",GEe="./fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",XEe="./fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",KEe=[{uri:VEe,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:WEe,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:GEe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:XEe,descriptors:{unicodeRange:"U+3bb"}}],YEe=[{uri:jT}],ZEe="./fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",qEe="./fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",QEe="./fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",JEe="./fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",eSe="./fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",tSe="./fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",nSe="./fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",rSe=[{uri:ZEe,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:qEe,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:QEe,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:JEe,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:eSe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:tSe,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:nSe,descriptors:{unicodeRange:"U+300-301,U+303"}}],iSe=[{uri:jT}],sSe="./fonts/Liberation/LiberationSans-Regular.woff2",oSe=[{uri:sSe}],aSe="./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",lSe="./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",cSe=[{uri:lSe,descriptors:{unicodeRange:ku.LATIN_EXT}},{uri:aSe,descriptors:{unicodeRange:ku.LATIN}}],fSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",dSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",uSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",hSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",pSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",mSe=[{uri:hSe,descriptors:{unicodeRange:ku.CYRILIC_EXT,weight:"500"}},{uri:uSe,descriptors:{unicodeRange:ku.CYRILIC,weight:"500"}},{uri:pSe,descriptors:{unicodeRange:ku.VIETNAMESE,weight:"500"}},{uri:dSe,descriptors:{unicodeRange:ku.LATIN_EXT,weight:"500"}},{uri:fSe,descriptors:{unicodeRange:ku.LATIN,weight:"500"}}],gSe="./fonts/Virgil/Virgil-Regular.woff2",bSe=[{uri:gSe}],USe="./fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",ySe="./fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",xSe="./fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",vSe="./fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",wSe="./fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",ESe="./fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",SSe="./fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",kSe="./fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",CSe="./fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",ASe="./fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",MSe="./fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",TSe="./fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",ISe="./fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",NSe="./fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",RSe="./fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",_Se="./fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",PSe="./fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",DSe="./fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",LSe="./fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",OSe="./fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",jSe="./fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",BSe="./fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",FSe="./fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",$Se="./fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",zSe="./fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",HSe="./fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",VSe="./fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",WSe="./fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",GSe="./fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",XSe="./fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",KSe="./fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",YSe="./fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",ZSe="./fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",qSe="./fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",QSe="./fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",JSe="./fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",eke="./fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",tke="./fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",nke="./fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",rke="./fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",ike="./fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",ske="./fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",oke="./fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",ake="./fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",lke="./fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",cke="./fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",fke="./fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",dke="./fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",uke="./fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",hke="./fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",pke="./fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",mke="./fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",gke="./fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",bke="./fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",Uke="./fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",yke="./fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",xke="./fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",vke="./fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",wke="./fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",Eke="./fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",Ske="./fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",kke="./fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",Cke="./fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",Ake="./fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",Mke="./fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",Tke="./fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",Ike="./fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",Nke="./fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",Rke="./fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",_ke="./fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",Pke="./fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",Dke="./fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",Lke="./fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",Oke="./fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",jke="./fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",Bke="./fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",Fke="./fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",$ke="./fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",zke="./fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",Hke="./fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",Vke="./fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",Wke="./fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",Gke="./fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",Xke="./fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",Kke="./fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",Yke="./fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",Zke="./fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",qke="./fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",Qke="./fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",Jke="./fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",eCe="./fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",tCe="./fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",nCe="./fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",rCe="./fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",iCe="./fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",sCe="./fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",oCe="./fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",aCe="./fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",lCe="./fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",cCe="./fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",fCe="./fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",dCe="./fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",uCe="./fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",hCe="./fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",pCe="./fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",mCe="./fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",gCe="./fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",bCe="./fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",UCe="./fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",yCe="./fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",xCe="./fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",vCe="./fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",wCe="./fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",ECe="./fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",SCe="./fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",kCe="./fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",CCe="./fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",ACe="./fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",MCe="./fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",TCe="./fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",ICe="./fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",NCe="./fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",RCe="./fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",_Ce="./fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",PCe="./fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",DCe="./fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",LCe="./fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",OCe="./fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",jCe="./fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",BCe="./fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",FCe="./fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",$Ce="./fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",zCe="./fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",HCe="./fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",VCe="./fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",WCe="./fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",GCe="./fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",XCe="./fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",KCe="./fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",YCe="./fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",ZCe="./fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",qCe="./fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",QCe="./fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",JCe="./fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",eAe="./fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",tAe="./fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",nAe="./fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",rAe="./fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",iAe="./fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",sAe="./fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",oAe="./fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",aAe="./fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",lAe="./fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",cAe="./fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",fAe="./fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",dAe="./fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",uAe="./fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",hAe="./fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",pAe="./fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",mAe="./fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",gAe="./fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",bAe="./fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",UAe="./fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",yAe="./fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",xAe="./fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",vAe="./fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",wAe="./fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",EAe="./fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",SAe="./fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",kAe="./fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",CAe="./fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",AAe="./fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",MAe="./fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",TAe="./fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",IAe="./fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",NAe="./fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",RAe="./fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",_Ae="./fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",PAe="./fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",DAe="./fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",LAe="./fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",OAe="./fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",jAe="./fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",BAe="./fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",FAe="./fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",$Ae="./fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",zAe="./fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",HAe="./fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",VAe="./fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",WAe="./fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",GAe="./fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",XAe="./fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",KAe="./fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",YAe="./fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",ZAe="./fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",qAe="./fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",QAe="./fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",JAe="./fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",eMe="./fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",tMe="./fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",nMe="./fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",rMe="./fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",iMe="./fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",sMe="./fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",oMe="./fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",aMe="./fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",lMe="./fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",cMe="./fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",fMe="./fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",dMe=[{uri:USe,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:ySe,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:xSe,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:vSe,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:wSe,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:ESe,descriptors:{unicodeRange:"U+d520-d608"}},{uri:SSe,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:kSe,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:CSe,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:ASe,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:MSe,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:TSe,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:ISe,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:NSe,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:RSe,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:_Se,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:PSe,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:DSe,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:LSe,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:OSe,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:jSe,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:BSe,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:FSe,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:$Se,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:zSe,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:HSe,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:VSe,descriptors:{unicodeRange:"U+c258-c340"}},{uri:WSe,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:GSe,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:XSe,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:KSe,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:YSe,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:ZSe,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:qSe,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:QSe,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:JSe,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:eke,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:tke,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:nke,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:rke,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:ike,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:ske,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:oke,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:ake,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:lke,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:cke,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:fke,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:dke,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:uke,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:hke,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:pke,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:mke,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:gke,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:bke,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:Uke,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:yke,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:xke,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:vke,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:wke,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:Eke,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:Ske,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:kke,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:Cke,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:Ake,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:Mke,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:Tke,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:Ike,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:Nke,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:Rke,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:_ke,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:Pke,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:Dke,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:Lke,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:Oke,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:jke,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:Bke,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:Fke,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:$ke,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:zke,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:Hke,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:Vke,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:Wke,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:Gke,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:Xke,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:Kke,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:Yke,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:Zke,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:qke,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:Qke,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:Jke,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:eCe,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:tCe,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:nCe,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:rCe,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:iCe,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:sCe,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:oCe,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:aCe,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:lCe,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:cCe,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:fCe,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:dCe,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:uCe,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:hCe,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:pCe,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:mCe,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:gCe,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:bCe,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:UCe,descriptors:{unicodeRange:"U+487a-4932"}},{uri:yCe,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:xCe,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:vCe,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:wCe,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:ECe,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:SCe,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:kCe,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:CCe,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:ACe,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:MCe,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:TCe,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:ICe,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:NCe,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:RCe,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:_Ce,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:PCe,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:DCe,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:LCe,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:OCe,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:jCe,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:BCe,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:FCe,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:$Ce,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:zCe,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:HCe,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:VCe,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:WCe,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:GCe,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:XCe,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:KCe,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:YCe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:ZCe,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:qCe,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:QCe,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:JCe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:eAe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:tAe,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:nAe,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:rAe,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:iAe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:sAe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:oAe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:aAe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:lAe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:cAe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:fAe,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:dAe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:uAe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:hAe,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:pAe,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:mAe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:gAe,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:bAe,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:UAe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:yAe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:xAe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:vAe,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:wAe,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:EAe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:SAe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:kAe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:CAe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:AAe,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:MAe,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:TAe,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:IAe,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:NAe,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:RAe,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:_Ae,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:PAe,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:DAe,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:LAe,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:OAe,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:jAe,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:BAe,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:FAe,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:$Ae,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:zAe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:HAe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:VAe,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:WAe,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:GAe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:XAe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:KAe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:YAe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:ZAe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:qAe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:QAe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:JAe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:eMe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:tMe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:nMe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:rMe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:iMe,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:sMe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:oMe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:aMe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:lMe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:cMe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:fMe,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],Ad=class un{constructor(t){Z(this,"scene"),Z(this,"getSceneFamilies",()=>un.getUniqueFamilies(this.scene.getNonDeletedElements())),Z(this,"onLoaded",n=>{let r=!0;for(let o of n){let a=`${o.family}-${o.style}-${o.weight}-${o.unicodeRange}`;un.loadedFontsCache.has(a)||(un.loadedFontsCache.add(a),r=!1)}if(r)return;let i=!1,s=this.scene.getNonDeletedElementsMap();for(let o of this.scene.getNonDeletedElements())if(je(o)){i=!0,Vn.delete(o),Wb.clearCache(cn(o));let a=fi(o,s);a&&Vn.delete(a)}i&&this.scene.triggerUpdate()}),Z(this,"loadSceneFonts",async()=>{let n=this.getSceneFamilies(),r=un.getCharsPerFamily(this.scene.getNonDeletedElements());return un.loadFontFaces(n,r)}),this.scene=t}static get registered(){return un._registered?un._initialized||(un._registered=new Map([...un.init().entries(),...un._registered.entries()])):un._registered=un.init(),un._registered}get registered(){return un.registered}static async generateFontFaceDeclarations(t){let n=un.getUniqueFamilies(t),r=un.getCharsPerFamily(t),i=n.find(l=>MZ(l).includes(wp));if(i){let l=un.getCharacters(r,i);if(Dve(l)){let f=Ep[wp];r[f]=new Set(l),n.unshift(Ep[wp])}}let s=un.fontFacesStylesGenerator(n,r),o=3,a=await new wB(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(let{fontFaces:s,metadata:o}of un.registered.values())if(!o.local)for(let{fontFace:a}of s)window.document.fonts.has(a)||window.document.fonts.add(a);let r=un.fontFacesLoader(t,n),i=10;return(await new wB(r,i).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(let[r,i]of t.entries()){let s=cn({fontFamily:i,fontSize:16}),o=un.getCharacters(n,i);window.document.fonts.check(s,o)||(yield c6(async()=>{var a;try{let l=await window.document.fonts.load(s,o);return[r,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=un.registered.get(i))==null?void 0:a.fontFaces.map(f=>f.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(let[r,i]of t.entries()){let{fontFaces:s,metadata:o}=un.registered.get(i)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${i}"`,un.registered);continue}if(!(o!=null&&o.local))for(let[a,l]of s.entries())yield c6(async()=>{try{let f=un.getCharacters(n,i),c=await l.toCSS(f);return c?[r*1e4+a,c]:void 0}catch(f){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,f)}})}}static register(t,n,...r){let i=$n[t]??Ep[t];return this.registered.get(i)||this.registered.set(i,{metadata:n,fontFaces:r.map(({uri:s,descriptors:o})=>new $Ee(t,s,o))}),this.registered}static init(){let t={registered:new Map},n=(r,...i)=>{let s=$n[r]??Ep[r],o=Q4[s]??Q4[$n.Excalifont];un.register.call(t,r,o,...i)};return n("Cascadia",...HEe),n("Comic Shanns",...KEe),n("Excalifont",...rSe),n("Helvetica",...iSe),n("Liberation Sans",...oSe),n("Lilita One",...cSe),n("Nunito",...mSe),n("Virgil",...bSe),n(wp,...dMe),n(B2,...YEe),un._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,r)=>(je(r)&&n.add(r.fontFamily),n),new Set))}static getCharsPerFamily(t){let n={};for(let r of t)if(je(r))for(let i of r.originalText)n[r.fontFamily]||(n[r.fontFamily]=new Set),n[r.fontFamily].add(i);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(un.registered.keys())}};Z(Ad,"loadedFontsCache",new Set),Z(Ad,"_registered"),Z(Ad,"_initialized",!1),Z(Ad,"loadElementsFonts",async e=>{let t=Ad.getUniqueFamilies(e),n=Ad.getCharsPerFamily(e);return Ad.loadFontFaces(t,n)});var wf=Ad,wq=(e,t,n)=>{var l;let{unitsPerEm:r,ascender:i,descender:s}=((l=wf.registered.get(e))==null?void 0:l.metadata.metrics)||Q4[$n.Virgil].metrics,o=t/r,a=(n-o*i+o*s)/2;return o*i+a},qh=e=>{var n;let{lineHeight:t}=((n=wf.registered.get(e))==null?void 0:n.metadata.metrics)||Q4[$n.Excalifont].metrics;return t},Eq=e=>{let{angle:t,width:n,height:r,x:i,y:s}=e,o=i+n/2,a=s+r/2,l=D(o,a),f;return e.type==="diamond"?f=bB(pe(D(o,s),l,t),pe(D(i+n,a),l,t),pe(D(o,s+r),l,t),pe(D(i,a),l,t)):f=bB(pe(D(i,s),l,t),pe(D(i+n,s),l,t),pe(D(i+n,s+r),l,t),pe(D(i,s+r),l,t)),{type:"polygon",data:f}},uMe=(e,t,n=10)=>{let[r,i,s,o,a,l]=gt(e,t,!0);r-=n,s+=n,i-=n,o+=n;let f=D(a,l),c=pe(D(r,i),f,e.angle),d=pe(D(s,i),f,e.angle),u=pe(D(r,o),f,e.angle),h=pe(D(s,o),f,e.angle);return{type:"polygon",data:[c,d,h,u]}},hMe=e=>{let{width:t,height:n,angle:r,x:i,y:s}=e;return{type:"ellipse",data:{center:D(i+t/2,s+n/2),angle:r,halfWidth:t/2,halfHeight:n/2}}},$0=e=>{if(!e)return[];for(let t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},pMe=(e,t=D(0,0),n,r)=>{let i=l=>pe(D(l[0]+t[0],l[1]+t[1]),r,n),s=$0(e),o=[],a=D(0,0);for(let l of s){if(l.op==="move"){let f=ST(l.data);Gi(f!=null,"Ops data is not a point"),a=i(f)}if(l.op==="bcurveTo"){let f=i(D(l.data[0],l.data[1])),c=i(D(l.data[2],l.data[3])),d=i(D(l.data[4],l.data[5]));o.push(mf(a,f,c,d)),a=d}}return{type:"polycurve",data:o}},mMe=e=>{let t=e[0],n=[];for(let r=1;r<e.length;r++){let i=e[r];n.push(Qe(t,i)),t=i}return n},gMe=(e,t,n=!1)=>{let r=s=>pe(Tt(c0(Ye(s),Ui(e.x,e.y))),t,e.angle),i=mMe(e.points.map(s=>r(s)));return n?{type:"polygon",data:X4(i.flat())}:{type:"polyline",data:i}},bMe=(e,t,n=D(0,0),r,i)=>{let s=c=>pe(D(c[0]+n[0],c[1]+n[1]),i,r);if(e.roundness===null)return{type:"polygon",data:X4(e.points.map(c=>s(c)))};let o=$0(t),a=[],l=!1;for(let c of o)c.op==="move"?(l=!l,l&&a.push(D(c.data[0],c.data[1]))):c.op==="bcurveTo"?l&&(a.push(D(c.data[0],c.data[1])),a.push(D(c.data[2],c.data[3])),a.push(D(c.data[4],c.data[5]))):c.op==="lineTo"&&l&&a.push(D(c.data[0],c.data[1]));let f=nxe(a,10,5).map(c=>s(c));return{type:"polygon",data:X4(f)}},UMe=(e,t)=>{let{angle:n,halfWidth:r,halfHeight:i,center:s}=t,o=r,a=i,l=c0(Ye(e),nr(Ye(s),-1)),[f,c]=pe(Tt(l),D(0,0),-n),d=Math.abs(f),u=Math.abs(c),h=.707,g=.707;for(let x=0;x<3;x++){let w=o*h,E=a*g,S=(o*o-a*a)*h**3/o,A=(a*a-o*o)*g**3/a,M=w-S,C=E-A,T=d-S,R=u-A,P=Math.hypot(C,M),_=Math.hypot(R,T);h=Math.min(1,Math.max(0,(T*P/_+S)/o)),g=Math.min(1,Math.max(0,(R*P/_+A)/a));let O=Math.hypot(g,h);h/=O,g/=O}let[U,y]=[o*h*Math.sign(f),a*g*Math.sign(c)];return qt(D(f,c),D(U,y))},yMe=(e,t,n=1e-4)=>UMe(e,t)<=n,xMe=(e,t)=>{let{center:n,angle:r,halfWidth:i,halfHeight:s}=t,o=c0(Ye(e),nr(Ye(n),-1)),[a,l]=pe(Tt(o),D(0,0),-r);return a/i*(a/i)+l/s*(l/s)<=1},jC=(e,t,n=0)=>{switch(t.type){case"polygon":return ove(e,t.data,n);case"ellipse":return yMe(e,t.data,n);case"line":return Gh(e,t.data,n);case"polyline":return kq(e,t.data,n);case"curve":return Sq(e,t.data,n);case"polycurve":return vMe(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},J4=(e,t)=>{switch(t.type){case"polygon":return UB(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return xMe(e,t.data);case"polyline":{let n=X4(t.data.flat());return UB(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},vMe=(e,t,n)=>t.some(r=>Sq(e,r,n)),wMe=e=>{let[t,n,r,i]=e;return(s,o)=>Math.pow(1-s,3)*i[o]+3*s*Math.pow(1-s,2)*r[o]+3*Math.pow(s,2)*(1-s)*n[o]+t[o]*Math.pow(s,3)},EMe=(e,t=10)=>{let n=wMe(e),r=[n(0,0),n(0,1)],i=[],s=0,o=1/t;for(let a=0;a<t;a++)if(s+=o,s<=1){let l=D(n(s,0),n(s,1));i.push(Qe(r,l)),r=l}return i},Sq=(e,t,n)=>kq(e,EMe(t),n),kq=(e,t,n=1e-4)=>t.some(r=>Gh(e,r,n));function Cq(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}var SMe=(e,t)=>{let{halfWidth:n,halfHeight:r,center:i}=t,s=n,o=r,a=c0(Ye(e),nr(Ye(i),-1)),l=Math.abs(a[0]),f=Math.abs(a[1]),c=.707,d=.707;for(let g=0;g<3;g++){let U=s*c,y=o*d,x=(s*s-o*o)*c**3/s,w=(o*o-s*s)*d**3/o,E=U-x,S=y-w,A=l-x,M=f-w,C=Math.hypot(S,E),T=Math.hypot(M,A);c=Math.min(1,Math.max(0,(A*C/T+x)/s)),d=Math.min(1,Math.max(0,(M*C/T+w)/o));let R=Math.hypot(d,c);c/=R,d/=R}let[u,h]=[s*c*Math.sign(a[0]),o*d*Math.sign(a[1])];return qt(Tt(a),D(u,h))};function kMe({center:e,halfWidth:t,halfHeight:n},[r,i]){let[s,o]=e,a=r[0]-s,l=r[1]-o,f=i[0]-s,c=i[1]-o,d=Math.pow(f-a,2)/Math.pow(t,2)+Math.pow(c-l,2)/Math.pow(n,2),u=2*(a*(f-a)/Math.pow(t,2)+l*(c-l)/Math.pow(n,2)),h=Math.pow(a,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,g=(-u+Math.sqrt(Math.pow(u,2)-4*d*h))/(2*d),U=(-u-Math.sqrt(Math.pow(u,2)-4*d*h))/(2*d),y=[D(a+g*(f-a)+s,l+g*(c-l)+o),D(a+U*(f-a)+s,l+U*(c-l)+o)].filter(x=>!isNaN(x[0])&&!isNaN(x[1]));return y.length===2&&rl(y[0],y[1])?[y[0]]:y}function Aq(e,t=0){let n=Qa(Math.min(e.width,e.height),e);if(n<=0){let d=IC(D(e.x-t,e.y-t),D(e.x+e.width+t,e.y+e.height+t)),u=Qe(D(d[0][0]+n,d[0][1]),D(d[1][0]-n,d[0][1])),h=Qe(D(d[1][0],d[0][1]+n),D(d[1][0],d[1][1]-n)),g=Qe(D(d[0][0]+n,d[1][1]),D(d[1][0]-n,d[1][1])),U=Qe(D(d[0][0],d[1][1]-n),D(d[0][0],d[0][1]+n));return[[u,h,g,U],[]]}let r=D(e.x+e.width/2,e.y+e.height/2),i=IC(D(e.x,e.y),D(e.x+e.width,e.y+e.height)),s=Qe(D(i[0][0]+n,i[0][1]),D(i[1][0]-n,i[0][1])),o=Qe(D(i[1][0],i[0][1]+n),D(i[1][0],i[1][1]-n)),a=Qe(D(i[0][0]+n,i[1][1]),D(i[1][0]-n,i[1][1])),l=Qe(D(i[0][0],i[1][1]-n),D(i[0][0],i[0][1]+n)),f=[nr(Hi(Ye(D(i[0][0]-t,i[0][1]-t),r)),t),nr(Hi(Ye(D(i[1][0]+t,i[0][1]-t),r)),t),nr(Hi(Ye(D(i[1][0]+t,i[1][1]+t),r)),t),nr(Hi(Ye(D(i[0][0]-t,i[1][1]+t),r)),t)],c=[mf(Tt(f[0],l[1]),Tt(f[0],D(l[1][0]+2/3*(i[0][0]-l[1][0]),l[1][1]+2/3*(i[0][1]-l[1][1]))),Tt(f[0],D(s[0][0]+2/3*(i[0][0]-s[0][0]),s[0][1]+2/3*(i[0][1]-s[0][1]))),Tt(f[0],s[0])),mf(Tt(f[1],s[1]),Tt(f[1],D(s[1][0]+2/3*(i[1][0]-s[1][0]),s[1][1]+2/3*(i[0][1]-s[1][1]))),Tt(f[1],D(o[0][0]+2/3*(i[1][0]-o[0][0]),o[0][1]+2/3*(i[0][1]-o[0][1]))),Tt(f[1],o[0])),mf(Tt(f[2],o[1]),Tt(f[2],D(o[1][0]+2/3*(i[1][0]-o[1][0]),o[1][1]+2/3*(i[1][1]-o[1][1]))),Tt(f[2],D(a[1][0]+2/3*(i[1][0]-a[1][0]),a[1][1]+2/3*(i[1][1]-a[1][1]))),Tt(f[2],a[1])),mf(Tt(f[3],a[0]),Tt(f[3],D(a[0][0]+2/3*(i[0][0]-a[0][0]),a[0][1]+2/3*(i[1][1]-a[0][1]))),Tt(f[3],D(l[0][0]+2/3*(i[0][0]-l[0][0]),l[0][1]+2/3*(i[1][1]-l[0][1]))),Tt(f[3],l[0]))];return[[Qe(c[0][3],c[1][0]),Qe(c[1][3],c[2][0]),Qe(c[2][3],c[3][0]),Qe(c[3][3],c[0][0])],c]}function Mq(e,t=0){var E;let[n,r,i,s,o,a,l,f]=Kq(e),c=Qa(Math.abs(n-l),e),d=Qa(Math.abs(s-r),e);if(((E=e.roundness)==null?void 0:E.type)==null){let[S,A,M,C]=[D(e.x+n,e.y+r-t),D(e.x+i+t,e.y+s),D(e.x+o,e.y+a+t),D(e.x+l-t,e.y+f)],T=Qe(D(S[0]+c,S[1]+d),D(A[0]-c,A[1]-d)),R=Qe(D(A[0]-c,A[1]+d),D(M[0]+c,M[1]-d)),P=Qe(D(M[0]-c,M[1]-d),D(C[0]+c,C[1]+d)),_=Qe(D(C[0]+c,C[1]-d),D(S[0]-c,S[1]+d));return[[T,R,P,_],[]]}let u=D(e.x+e.width/2,e.y+e.height/2),[h,g,U,y]=[D(e.x+n,e.y+r),D(e.x+i,e.y+s),D(e.x+o,e.y+a),D(e.x+l,e.y+f)],x=[nr(Hi(Ye(g,u)),t),nr(Hi(Ye(U,u)),t),nr(Hi(Ye(y,u)),t),nr(Hi(Ye(h,u)),t)],w=[mf(Tt(x[0],D(g[0]-c,g[1]-d)),Tt(x[0],g),Tt(x[0],g),Tt(x[0],D(g[0]-c,g[1]+d))),mf(Tt(x[1],D(U[0]+c,U[1]-d)),Tt(x[1],U),Tt(x[1],U),Tt(x[1],D(U[0]-c,U[1]-d))),mf(Tt(x[2],D(y[0]+c,y[1]+d)),Tt(x[2],y),Tt(x[2],y),Tt(x[2],D(y[0]+c,y[1]-d))),mf(Tt(x[3],D(h[0]-c,h[1]+d)),Tt(x[3],h),Tt(x[3],h),Tt(x[3],D(h[0]+c,h[1]+d)))];return[[Qe(w[0][3],w[1][0]),Qe(w[1][3],w[2][0]),Qe(w[2][3],w[3][0]),Qe(w[3][3],w[0][0])],w]}var BC=e=>{if(e.type==="arrow")return!1;let t=!Xa(e.backgroundColor)||sa(e)||Ko(e)||je(e);return e.type==="line"||e.type==="freedraw"?t&&Mf(e.points):t||Zt(e)},hp=({x:e,y:t,element:n,shape:r,threshold:i=10,frameNameBound:s=null})=>{let o=BC(n)&&J4(D(e,t),r)||jC(D(e,t),r,i);return!o&&s&&(o=J4(D(e,t),{type:"polygon",data:Eq(s).data})),o},BT=(e,t,n,r,i=0)=>{let[s,o,a,l]=sl(n,r);return s-=i,o-=i,a+=i,l+=i,DZ(D(s,o),D(e,t),D(a,l))},CMe=(e,t)=>!hp(e)&&!Tq(e.x,e.y,Nq(e.element,t))&&BT(e.x,e.y,e.element,t),Tq=(e,t,n)=>!!n&&J4(D(e,t),n),Iq=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return AMe(e,t,n);case"diamond":return MMe(e,t,n);case"ellipse":return TMe(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},AMe=(e,t,n=0)=>{let r=D(e.x+e.width/2,e.y+e.height/2),i=pe(t[0],r,-e.angle),s=pe(t[1],r,-e.angle),[o,a]=Aq(e,n);return[...o.map(l=>z2(Qe(i,s),l)).filter(l=>l!=null).map(l=>pe(l,r,e.angle)),...a.flatMap(l=>LZ(l,Qe(i,s))).filter(l=>l!=null).map(l=>pe(l,r,e.angle))].filter((l,f,c)=>c.findIndex(d=>rl(l,d))===f)},MMe=(e,t,n=0)=>{let r=D(e.x+e.width/2,e.y+e.height/2),i=pe(t[0],r,-e.angle),s=pe(t[1],r,-e.angle),[o,a]=Mq(e,n);return[...o.map(l=>z2(Qe(i,s),l)).filter(l=>l!=null).map(l=>pe(l,r,e.angle)),...a.flatMap(l=>LZ(l,Qe(i,s))).filter(l=>l!=null).map(l=>pe(l,r,e.angle))].filter((l,f,c)=>c.findIndex(d=>rl(l,d))===f)},TMe=(e,t,n=0)=>{let r=D(e.x+e.width/2,e.y+e.height/2),i=pe(t[0],r,-e.angle),s=pe(t[1],r,-e.angle);return kMe(Cq(r,e.width/2+n,e.height/2+n),TC(i,s)).map(o=>pe(o,r,e.angle))},zt={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},Q={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:ac?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},IMe=new Map([[Q.Z,zt.Z],[Q.Y,zt.Y]]),NMe=e=>/^[a-z]$/.test(e.toLowerCase()),FC=(e,t)=>{if(t===e.key.toLowerCase())return!0;let n=IMe.get(t);return!!(n&&!NMe(e.key)&&e.code===n)},u5=e=>e===Q.ARROW_LEFT||e===Q.ARROW_RIGHT||e===Q.ARROW_DOWN||e===Q.ARROW_UP,qE=e=>e.altKey,Fg=e=>e.shiftKey,z5=e=>e.shiftKey,FT=[{icon:Qve,value:"selection",key:Q.V,numericKey:Q[1],fillable:!0},{icon:Jve,value:"rectangle",key:Q.R,numericKey:Q[2],fillable:!0},{icon:ewe,value:"diamond",key:Q.D,numericKey:Q[3],fillable:!0},{icon:twe,value:"ellipse",key:Q.O,numericKey:Q[4],fillable:!0},{icon:nwe,value:"arrow",key:Q.A,numericKey:Q[5],fillable:!0},{icon:rwe,value:"line",key:Q.L,numericKey:Q[6],fillable:!0},{icon:H2,value:"freedraw",key:[Q.P,Q.X],numericKey:Q[7],fillable:!1},{icon:eq,value:"text",key:Q.T,numericKey:Q[8],fillable:!1},{icon:swe,value:"image",key:null,numericKey:Q[9],fillable:!1},{icon:owe,value:"eraser",key:Q.E,numericKey:Q[0],fillable:!1}],RMe=e=>{var t;return((t=FT.find((n,r)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e))))==null?void 0:t.value)||null},Zc=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return Eq(e);case"arrow":case"line":{let r=((n=Vn.get(e))==null?void 0:n[0])??Vn.generateElementShape(e,null)[0],[,,,,i,s]=gt(e,t);return BC(e)?bMe(e,r,D(e.x,e.y),e.angle,D(i,s)):pMe(r,D(e.x,e.y),e.angle,D(i,s))}case"ellipse":return hMe(e);case"freedraw":{let[,,,,r,i]=gt(e,t);return gMe(e,D(r,i),BC(e))}}},Nq=(e,t)=>{let n=xt(e,t);return n?e.type==="arrow"?Zc({...n,...Be.getBoundTextElementPosition(e,n,t)},t):Zc(n,t):null},Rq=(e,t)=>{let n=Vn.generateElementShape(e,null);if(!n)return null;let r=$0(n[0]),i=D(0,0),s=0,o=1/0,a=null;for(;s<r.length;){let{op:l,data:f}=r[s];if(l==="move"&&(Gi(eve(f),"The returned ops is not compatible with a point"),i=f),l==="bcurveTo"){let c=i,d=D(f[0],f[1]),u=D(f[2],f[3]),h=D(f[4],f[5]),g=qt(h,t);g<o&&(o=g,a=[c,d,u,h]),i=h}s++}return a},_q=(e,t,n,r,i)=>{let s=(l,f)=>Math.pow(1-l,3)*r[f]+3*l*Math.pow(1-l,2)*n[f]+3*Math.pow(l,2)*(1-l)*t[f]+e[f]*Math.pow(l,3),o=s(i,0),a=s(i,1);return D(o,a)},_Me=(e,t)=>{let n=Rq(e,t);if(!n)return[];let r=[],i=1;for(;i>0;){let s=_q(n[0],n[1],n[2],n[3],i);r.push(D(s[0],s[1])),i-=.05}return r.length&&rl(r.at(-1),t)&&r.push(D(t[0],t[1])),r},Pq=(e,t)=>{let n=[];n[0]=0;let r=_Me(e,t),i=0,s=0;for(;i<r.length-1;){let o=qt(r[i],r[i+1]);s+=o,n.push(s),i++}return n},PMe=(e,t)=>Pq(e,t).at(-1),DMe=(e,t,n)=>{let r=Pq(e,t),i=r.length-1,s=r.at(-1),o=n*s,a=0,l=i,f=0;for(;a<l;)f=Math.floor(a+(l-a)/2),r[f]<o?a=f+1:l=f;return r[f]>o&&f--,r[f]===o?f/i:1-(f+(o-r[f])/(r[f+1]-r[f]))/i},Vl=(e,t)=>{let n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=D(n.midX,n.midY),[i,s]=pe(D(n.minX,n.minY),r,e.angle),[o,a]=pe(D(n.maxX,n.minY),r,e.angle),[l,f]=pe(D(n.maxX,n.maxY),r,e.angle),[c,d]=pe(D(n.minX,n.maxY),r,e.angle),u=[Math.min(i,o,l,c),Math.min(s,a,f,d),Math.max(i,o,l,c),Math.max(s,a,f,d)];if(t){let[h,g,U,y]=t;return[u[0]-y,u[1]-h,u[2]+g,u[3]+U]}return u},d6=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],Qa=(e,t)=>{var n,r,i,s;if(((n=t.roundness)==null?void 0:n.type)===Pr.PROPORTIONAL_RADIUS||((r=t.roundness)==null?void 0:r.type)===Pr.LEGACY)return e*$E;if(((i=t.roundness)==null?void 0:i.type)===Pr.ADAPTIVE_RADIUS){let o=((s=t.roundness)==null?void 0:s.value)??Vxe,a=o/$E;return e<=a?e*$E:o}return 0},Mf=(e,t=1)=>{if(e.length>=3){let[n,r]=[e[0],e[e.length-1]];return qt(n,r)<=Zy/t}return!1},qr=10,LMe=(e,t,n,r,i,s,o)=>{var P,_;let{width:a,height:l}=Tf(e),f=n/a,c=r/l,d=(((P=e.crop)==null?void 0:P.x)??0)/f,u=(((_=e.crop)==null?void 0:_.y)??0)/c,h=pe(D(i,s),D(e.x+e.width/2,e.y+e.height/2),-e.angle);i=h[0],s=h[1];let g=e.width,U=e.height,y=e.crop??{x:0,y:0,width:n,height:r,naturalWidth:n,naturalHeight:r},x=y.height,w=y.width,E=e.scale[0]===-1,S=e.scale[1]===-1,A=s-e.y,M=i-e.x;t.includes("n")&&(U=Mt(e.height-A,qr,S?l-u:e.height+u)),t.includes("s")&&(A=s-e.y-e.height,U=Mt(e.height+A,qr,S?e.height+u:l-u)),t.includes("e")&&(M=i-e.x-e.width,g=Mt(e.width+M,qr,E?e.width+d:a-d)),t.includes("w")&&(g=Mt(e.width-M,qr,E?a-d:e.width+d));let C=O=>{O.height=U*c,O.width=g*f};C(y);let T=(O,F)=>{C(F),O.includes("n")&&(S||(F.y+=x-F.height)),O.includes("s")&&S&&(F.y+=x-F.height),O.includes("e")&&E&&(F.x+=w-F.width),O.includes("w")&&(E||(F.x+=w-F.width))};switch(t){case"n":{if(o){let O=d+e.width/2,F=a-d-e.width/2,B=Math.min(O,F)*2;g=Mt(U*o,qr,B),U=g/o}T(t,y),o&&(y.x+=(w-y.width)/2);break}case"s":{if(o){let O=d+e.width/2,F=a-d-e.width/2,B=Math.min(O,F)*2;g=Mt(U*o,qr,B),U=g/o}T(t,y),o&&(y.x+=(w-y.width)/2);break}case"w":{if(o){let O=u+e.height/2,F=l-u-e.height/2,B=Math.min(O,F)*2;U=Mt(g/o,qr,B),g=U*o}T(t,y),o&&(y.y+=(x-y.height)/2);break}case"e":{if(o){let O=u+e.height/2,F=l-u-e.height/2,B=Math.min(O,F)*2;U=Mt(g/o,qr,B),g=U*o}T(t,y),o&&(y.y+=(x-y.height)/2);break}case"ne":{if(o)if(M>-A){let O=S?l-u:u+e.height;U=Mt(g/o,qr,O),g=U*o}else{let O=E?d+e.width:a-d;g=Mt(U*o,qr,O),U=g/o}T(t,y);break}case"nw":{if(o)if(M<A){let O=S?l-u:u+e.height;U=Mt(g/o,qr,O),g=U*o}else{let O=E?a-d:d+e.width;g=Mt(U*o,qr,O),U=g/o}T(t,y);break}case"se":{if(o)if(M>A){let O=S?u+e.height:l-u;U=Mt(g/o,qr,O),g=U*o}else{let O=E?d+e.width:a-d;g=Mt(U*o,qr,O),U=g/o}T(t,y);break}case"sw":{if(o)if(-M>A){let O=S?u+e.height:l-u;U=Mt(g/o,qr,O),g=U*o}else{let O=E?a-d:d+e.width;g=Mt(U*o,qr,O),U=g/o}T(t,y);break}}let R=OMe(e,t,g,U,!!o);return pB(y.width,y.naturalWidth)&&pB(y.height,y.naturalHeight)&&(y=null),{x:R[0],y:R[1],width:g,height:U,crop:y}},OMe=(e,t,n,r,i)=>{let[s,o,a,l]=v0(e,e.width,e.height,!0),f=D(s,o),c=D(a,l),d=zb(f,c),[u,h,g,U]=v0(e,n,r,!0),y=g-u,x=U-h,w=[...f];if(["n","w","nw"].includes(t)&&(w=[c[0]-Math.abs(y),c[1]-Math.abs(x)]),t==="ne"){let T=[f[0],c[1]];w=[T[0],T[1]-Math.abs(x)]}if(t==="sw"){let T=[c[0],f[1]];w=[T[0]-Math.abs(y),T[1]]}i&&(["s","n"].includes(t)&&(w[0]=d[0]-y/2),["e","w"].includes(t)&&(w[1]=d[1]-x/2));let E=e.angle,S=pe(w,d,E),A=[w[0]+Math.abs(y)/2,w[1]+Math.abs(x)/2],M=pe(A,d,E);w=pe(S,M,-E);let C=[...w];return C[0]+=e.x-u,C[1]+=e.y-h,C},jMe=(e,t)=>{if(e.crop){let{width:n,height:r}=Tf(e),[i,s,o,a,l,f]=gt(e,t),c=Ye(pe(D(i,s),D(l,f),e.angle)),d=Ye(pe(D(o,s),D(l,f),e.angle)),u=Hi(W4(d,c)),h=Ye(pe(D(i,a),D(l,f),e.angle)),g=W4(h,c),U=Hi(g),{cropX:y,cropY:x}=BMe(e.crop,e.scale),w=c0(c0(c,nr(u,-y*n/e.crop.naturalWidth)),nr(U,-x*r/e.crop.naturalHeight)),E=Tt(c0(c0(w,nr(u,n/2)),nr(U,r/2))),S=pe(Tt(w),E,-e.angle);return{...e,x:S[0],y:S[1],width:n,height:r,crop:null}}return e},Tf=e=>{if(e.crop){let t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},BMe=(e,t)=>{let n=e.x,r=e.y,i=t[0]===-1,s=t[1]===-1;return i&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(r=e.naturalHeight-Math.abs(r)-e.height),{cropX:n,cropY:r}},FMe=(e,t=!1)=>{let n=e.crop;if(!n)return null;let r=e.scale[0]===-1,i=e.scale[1]===-1,s=n.x,o=n.y;if(r&&(s=n.naturalWidth-n.width-n.x),i&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};let{width:a,height:l}=Tf(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},Dq="invert(100%) hue-rotate(180deg) saturate(1.25)",$Me=lc(),Lq=(e,t)=>Go(e)&&!t.imageCache.has(e.fileId),Oq=(e,t,n)=>{var r;return n.theme===Nt.DARK&&Go(e)&&!Lq(e,t)&&((r=t.imageCache.get(e.fileId))==null?void 0:r.mimeType)!==it.svg},B7=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},jq=(e,t,n,r,i=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*i;return(n.has(e.id)||r&&r.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=Hxe/100),s},zMe=(e,t,n)=>{let r=B7(e),[i,s,o,a]=gt(e,t),l=mt(e)||ia(e)?Fi(i,o):e.width,f=mt(e)||ia(e)?Fi(s,a):e.height,c=l*window.devicePixelRatio+r*2,d=f*window.devicePixelRatio+r*2,u=n.value;return(c*u>32767||d*u>32767)&&(u=Math.min(32767/c,32767/d)),c*d*u*u>16777216&&(u=Math.sqrt(16777216/(c*d))),c=Math.floor(c*u),d=Math.floor(d*u),{width:c,height:d,scale:u}},Bq=(e,t,n,r,i)=>{var x,w;let s=document.createElement("canvas"),o=s.getContext("2d"),a=B7(e),{width:l,height:f,scale:c}=zMe(e,t,n);if(!l||!f)return null;s.width=l,s.height=f;let d=-100,u=0;if(mt(e)||ia(e)){let[E,S]=gt(e,t);d=e.x>E?Fi(e.x,E)*window.devicePixelRatio*c:0,u=e.y>S?Fi(e.y,S)*window.devicePixelRatio*c:0,o.translate(d,u)}o.save(),o.translate(a*c,a*c),o.scale(window.devicePixelRatio*c,window.devicePixelRatio*c);let h=B0.canvas(s);Oq(e,r,i)&&(o.filter=Dq),n3(e,h,o,r),o.restore();let g=xt(e,t),U=document.createElement("canvas"),y=U.getContext("2d");if(Et(e)&&g){let[E,S,A,M]=gt(e,t),C=Math.max(Fi(E,A),Fi(S,M));U.width=C*window.devicePixelRatio*c+a*c*10,U.height=C*window.devicePixelRatio*c+a*c*10,y.translate(U.width/2,U.height/2),y.rotate(e.angle),y.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);let[,,,,T,R]=gt(g,t);y.rotate(-e.angle);let P=(U.width-s.width)/2,_=(U.height-s.height)/2,O=U.width/2-(T-E)*window.devicePixelRatio*c-P-a*c,F=U.height/2-(R-S)*window.devicePixelRatio*c-_-a*c;y.translate(-O,-F),y.clearRect(-(g.width/2+_r)*window.devicePixelRatio*c,-(g.height/2+_r)*window.devicePixelRatio*c,(g.width+_r*2)*window.devicePixelRatio*c,(g.height+_r*2)*window.devicePixelRatio*c)}return{element:e,canvas:s,theme:i.theme,scale:c,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:u,boundTextElementVersion:((x=xt(e,t))==null?void 0:x.version)||null,containingFrameOpacity:((w=Hs(e,t))==null?void 0:w.opacity)||100,boundTextCanvas:U,angle:e.angle,imageCrop:Zt(e)?e.crop:null}},HMe=14,Fq=document.createElement("img");Fq.src=`data:${it.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;var $q=document.createElement("img");$q.src=`data:${it.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;var VMe=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);let n=Math.min(e.width,e.height),r=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?$q:Fq,e.width/2-r/2,e.height/2-r/2,r,r)},n3=(e,t,n,r,i)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(Vn.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",Vn.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;let o=XMe(e),a=Vn.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{let o=Go(e)?(s=r.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,Qa(Math.min(e.width,e.height),e)),n.clip());let{x:a,y:l,width:f,height:c}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,f,c,0,0,e.width,e.height)}else VMe(e,n);break}default:if(je(e)){let o=BZ(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=cn(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;let l=e.text.replace(/\r\n?/g,`
`).split(`
`),f=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,c=Vb(e.fontSize,e.lineHeight),d=wq(e.fontFamily,e.fontSize,c);for(let u=0;u<l.length;u++)n.fillText(l[u],f,u*c+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},$C=new WeakMap,WB=(e,t,n,r)=>{var d;let i=n?r.zoom:$Me.zoom,s=$C.get(e),o=s&&s.zoomValue!==i.value&&!(r!=null&&r.shouldCacheIgnoreZoom),a=xt(e,t),l=(a==null?void 0:a.version)||null,f=Zt(e)?e.crop:null,c=((d=Hs(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==r.theme||s.boundTextElementVersion!==l||s.imageCrop!==f||s.containingFrameOpacity!==c||Et(e)&&a&&e.angle!==s.angle){let u=Bq(e,t,i,n,r);return u?($C.set(e,u),u):null}return s},QE=(e,t,n,r,i)=>{let s=e.element,o=B7(s),a=e.scale,[l,f,c,d]=gt(s,i),u=((l+c)/2+r.scrollX)*window.devicePixelRatio,h=((f+d)/2+r.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);let g=xt(s,i);if(Et(s)&&g){let U=(e.boundTextCanvas.width-e.canvas.width)/2,y=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(u,h),t.drawImage(e.boundTextCanvas,-(c-l)/2*window.devicePixelRatio-U/a-o,-(d-f)/2*window.devicePixelRatio-y/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(u,h),t.rotate(s.angle),"scale"in e.element&&!Lq(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-u,-h),t.drawImage(e.canvas,(l+r.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(f+r.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale),vt.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX;t.restore()},WMe=(e,t,n,r)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";let i=.5/n.zoom.value;t.fillRect(i,i,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(i,i,e.width,e.height),t.restore()},yu=(e,t,n,r,i,s,o)=>{var l;let a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(i.globalAlpha=jq(e,Hs(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?_Z:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(i.save(),i.translate(e.x+o.scrollX,e.y+o.scrollY),i.fillStyle="rgba(0, 0, 200, 0.04)",i.lineWidth=zn.strokeWidth/o.zoom.value,i.strokeStyle=zn.strokeColor,Jy(e)&&(i.strokeStyle=o.theme===Nt.LIGHT?"#7affd7":"#1d8264"),i.roundRect?(i.beginPath(),i.roundRect(0,0,e.width,e.height,zn.radius/o.zoom.value),i.stroke(),i.closePath()):i.strokeRect(0,0,e.width,e.height),i.restore());break}case"freedraw":{if(Vn.generateElementShape(e,null),s.isExporting){let[f,c,d,u]=gt(e,t),h=(f+d)/2+o.scrollX,g=(c+u)/2+o.scrollY,U=(d-f)/2-(e.x-f),y=(u-c)/2-(e.y-c);i.save(),i.translate(h,g),i.rotate(e.angle),i.translate(-U,-y),n3(e,r,i,s),i.restore()}else{let f=WB(e,n,s,o);if(!f)return;QE(f,i,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(Vn.generateElementShape(e,s),s.isExporting){let[f,c,d,u]=gt(e,t),h=(f+d)/2+o.scrollX,g=(c+u)/2+o.scrollY,U=(d-f)/2-(e.x-f),y=(u-c)/2-(e.y-c);if(je(e)){let w=fi(e,t);if(Et(w)){let E=Be.getBoundTextElementPosition(w,e,t);U=(d-f)/2-(E.x-f),y=(u-c)/2-(E.y-c)}}i.save(),i.translate(h,g),Oq(e,s,o)&&(i.filter="none");let x=xt(e,t);if(Et(e)&&x){let w=document.createElement("canvas"),E=w.getContext("2d"),S=Math.max(Fi(f,d),Fi(c,u)),A=B7(e);w.width=S*o.exportScale+A*10*o.exportScale,w.height=S*o.exportScale+A*10*o.exportScale,E.translate(w.width/2,w.height/2),E.scale(o.exportScale,o.exportScale),U=e.width/2-(e.x-f),y=e.height/2-(e.y-c),E.rotate(e.angle);let M=B0.canvas(w);E.translate(-U,-y),n3(e,M,E,s),E.translate(U,y),E.rotate(-e.angle);let[,,,,C,T]=gt(x,t),R=(f+d)/2-C,P=(c+u)/2-T;E.translate(-R,-P),E.clearRect(-x.width/2,-x.height/2,x.width,x.height),i.scale(1/o.exportScale,1/o.exportScale),i.drawImage(w,-w.width/2,-w.height/2,w.width,w.height)}else i.rotate(e.angle),e.type==="image"&&i.scale(e.scale[0],e.scale[1]),i.translate(-U,-y),n3(e,r,i,s);i.restore()}else{let f=WB(e,n,s,o);if(!f)return;let c=i.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||qxe(e.angle))&&(i.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&Zt(f.element)&&f.element.crop!==null){i.save(),i.globalAlpha=.1;let d=Bq(jMe(f.element,t),n,o.zoom,s,o);d&&QE(d,i,s,o,n),i.restore()}QE(f,i,s,o,n),i.imageSmoothingEnabled=c}break}default:throw new Error(`Unimplemented type ${e.type}`)}i.globalAlpha=1},zq=new WeakMap([]);function GMe(e){let t=Hq(e),n=new Path2D(t);return zq.set(e,n),n}function XMe(e){return zq.get(e)}function Hq(e){let t=e.simulatePressure?e.points:e.points.length?e.points.map(([r,i],s)=>[r,i,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:r=>Math.sin(r*Math.PI/2),last:!!e.lastCommittedPoint};return YMe(q7e(t,n))}function GB(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var KMe=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function YMe(e){if(!e.length)return"";let t=e.length-1;return e.reduce((n,r,i,s)=>(i===t?n.push(r,GB(r,s[0]),"L",s[0],"Z"):n.push(r,GB(r,s[i+1])),n),["M",e[0],"Q"]).join(" ").replace(KMe,"$1")}var u6=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",zC=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",XB=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",KB=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",HC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",YB=e=>e==="arrow",e9=e=>e==="arrow",tr=[1,0],si=[0,1],Ls=[-1,0],Os=[0,-1],sy=(e,t)=>{let n=$b(Math.atan2(t[1]-e[1],t[0]-e[0]));return n>=315||n<45?Os:n>=45&&n<135?tr:n>=135&&n<225?si:Ls},Qh=e=>{let[t,n]=e,r=Math.abs(t),i=Math.abs(n);return t>i?tr:t<=-i?Ls:n>r?si:Os},V2=(e,t)=>Qh(Ye(e,t)),df=(e,t)=>gf(V2(e,t)),rr=(e,t)=>e[0]===t[0]&&e[1]===t[1],gf=e=>rr(e,tr)||rr(e,Ls),Vq=(e,t,n)=>{let r=HT(t);if(e.type==="diamond"){if(n[0]<e.x)return Ls;if(n[1]<e.y)return Os;if(n[0]>e.x+e.width)return tr;if(n[1]>e.y+e.height)return si;let l=pe($c(D(e.x+e.width/2,e.y),r,2),r,e.angle),f=pe($c(D(e.x+e.width,e.y+e.height/2),r,2),r,e.angle),c=pe($c(D(e.x+e.width/2,e.y+e.height),r,2),r,e.angle),d=pe($c(D(e.x,e.y+e.height/2),r,2),r,e.angle);return q1([l,f,r],n)?sy(l,f):q1([f,c,r],n)?sy(f,c):q1([c,d,r],n)?sy(c,d):sy(d,l)}let i=$c(D(t[0],t[1]),r,2),s=$c(D(t[2],t[1]),r,2),o=$c(D(t[0],t[3]),r,2),a=$c(D(t[2],t[3]),r,2);return q1([i,s,r],n)?Os:q1([s,a,r],n)?tr:q1([a,o,r],n)?si:Ls},Wq=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],ZMe=e=>[8,8+e],Gq=e=>[1.5,6+e];function qMe(e){let t=e.roughness,n=Math.max(e.width,e.height),r=Math.min(e.width,e.height);return r>=20&&n>=50||r>=15&&e.roundness&&HC(e.type)||mt(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}var lo=(e,t=!1)=>{let n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?ZMe(e.strokeWidth):e.strokeStyle==="dotted"?Gq(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:qMe(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<IZ.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=Xa(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return Mf(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},ZB=(e,t,n)=>Ko(e)&&(t||Rs(e)&&(n==null?void 0:n.get(e.id))!==!0)&&Xa(e.backgroundColor)&&Xa(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:_d(e)?{...e,strokeColor:Xa(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:Xa(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,qB=(e,t,n,r,i,s,o)=>{let a=tF(e,t,n,r);if(a===null)return[];let l=(f,c)=>{if(f===null)return[];let[,,d,u,h,g]=f;return[i.line(d,u,h,g,c)]};switch(r){case"dot":case"circle":case"circle_outline":{let[f,c,d]=a;return delete s.strokeLineDash,[i.circle(f,c,d,{...s,fill:r==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{let[f,c,d,u,h,g]=a;return delete s.strokeLineDash,[i.polygon([[f,c],[d,u],[h,g],[f,c]],{...s,fill:r==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{let[f,c,d,u,h,g,U,y]=a;return delete s.strokeLineDash,[i.polygon([[f,c],[d,u],[h,g],[U,y],[f,c]],{...s,fill:r==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{let[f,c,d,u,h,g]=a;if(e.strokeStyle==="dotted"){let U=Gq(e.strokeWidth-1);s.strokeLineDash=[U[0],U[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[i.line(d,u,f,c,s),i.line(h,g,f,c,s),...r==="crowfoot_one_or_many"?l(tF(e,t,n,"crowfoot_one"),s):[]]}}},QMe=(e,t,{isExporting:n,canvasBackgroundColor:r,embedsValidationStatus:i})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){let o=e.width,a=e.height,l=Qa(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,lo(ZB(e,n,i),!0))}else s=t.rectangle(0,0,e.width,e.height,lo(ZB(e,n,i),!1));return s}case"diamond":{let s,[o,a,l,f,c,d,u,h]=Kq(e);if(e.roundness){let g=Qa(Math.abs(o-u),e),U=Qa(Math.abs(f-a),e);s=t.path(`M ${o+g} ${a+U} L ${l-g} ${f-U}
            C ${l} ${f}, ${l} ${f}, ${l-g} ${f+U}
            L ${c+g} ${d-U}
            C ${c} ${d}, ${c} ${d}, ${c-g} ${d-U}
            L ${u+g} ${h+U}
            C ${u} ${h}, ${u} ${h}, ${u+g} ${h-U}
            L ${o-g} ${a+U}
            C ${o} ${a}, ${o} ${a}, ${o+g} ${a+U}`,lo(e,!0))}else s=t.polygon([[o,a],[l,f],[c,d],[u,h]],lo(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,lo(e));case"line":case"arrow":{let s,o=lo(e),a=e.points.length?e.points:[D(0,0)];if(Fe(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(JMe(a,16),lo(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){let{startArrowhead:l=null,endArrowhead:f="arrow"}=e;if(l!==null){let c=qB(e,s,"start",l,t,o,r);s.push(...c)}if(f!==null){let c=qB(e,s,"end",f,t,o,r);s.push(...c)}}return s}case"freedraw":{let s;if(GMe(e),Mf(e.points)){let o=txe(e.points,.75);s=t.curve(o,{...lo(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return Xh(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},JMe=(e,t)=>{let n=[];for(let i=1;i<e.length-1;i+=1){let s=e[i-1],o=e[i+1],a=e[i],l=df(a,s),f=df(o,a),c=Math.min(t,qt(e[i],o)/2,qt(e[i],s)/2);l?s[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):s[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c]),n.push(e[i]),f?o[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):o[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c])}let r=[`M ${e[0][0]} ${e[0][1]}`];for(let i=0;i<n.length;i+=3)r.push(`L ${n[i][0]} ${n[i][1]}`),r.push(`Q ${n[i+1][0]} ${n[i+1][1]}, ${n[i+2][0]} ${n[i+2][1]}`);return r.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),r.join(" ")},h6=e=>{let t=e.map(r=>r[0]),n=e.map(r=>r[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},t9=(e,t,n,r)=>{let i=n.map(u=>u[e]),s=Math.max(...i),o=Math.min(...i),a=s-o,l=a===0?1:t/a,f=1/0,c=n.map(u=>{let h=u[e]*l,g=[...u];return g[e]=h,h<f&&(f=h),g});if(!r||c.length===2)return c;let d=o-f;return c.map(u=>u.map((h,g)=>g===e?h+d:h))},Xq=class r3{static getBounds(t,n){let r=r3.boundsCache.get(t);if(r!=null&&r.version&&r.version===t.version&&!Mn(t))return r.bounds;let i=r3.calculateBounds(t,n);return r3.boundsCache.set(t,{version:t.version,bounds:i}),i}static calculateBounds(t,n){let r,[i,s,o,a,l,f]=gt(t,n);if(ia(t)){let[c,d,u,h]=$T(t.points.map(([g,U])=>pe(D(g,U),D(l-t.x,f-t.y),t.angle)));return[c+t.x,d+t.y,u+t.x,h+t.y]}else if(mt(t))r=oTe(t,l,f,n);else if(t.type==="diamond"){let[c,d]=pe(D(l,s),D(l,f),t.angle),[u,h]=pe(D(l,a),D(l,f),t.angle),[g,U]=pe(D(i,f),D(l,f),t.angle),[y,x]=pe(D(o,f),D(l,f),t.angle),w=Math.min(c,u,g,y),E=Math.min(d,h,U,x),S=Math.max(c,u,g,y),A=Math.max(d,h,U,x);r=[w,E,S,A]}else if(t.type==="ellipse"){let c=(o-i)/2,d=(a-s)/2,u=Math.cos(t.angle),h=Math.sin(t.angle),g=Math.hypot(c*u,d*h),U=Math.hypot(d*u,c*h);r=[l-g,f-U,l+g,f+U]}else{let[c,d]=pe(D(i,s),D(l,f),t.angle),[u,h]=pe(D(i,a),D(l,f),t.angle),[g,U]=pe(D(o,a),D(l,f),t.angle),[y,x]=pe(D(o,s),D(l,f),t.angle),w=Math.min(c,u,g,y),E=Math.min(d,h,U,x),S=Math.max(c,u,g,y),A=Math.max(d,h,U,x);r=[w,E,S,A]}return r}};Z(Xq,"boundsCache",new WeakMap);var eTe=Xq,gt=(e,t,n=!1)=>{if(ia(e))return nTe(e);if(mt(e))return Be.getElementAbsoluteCoords(e,t,n);if(je(e)){let r=t?fi(e,t):null;if(Et(r)){let{x:i,y:s}=Be.getBoundTextElementPosition(r,e,t);return[i,s,i+e.width,s+e.height,i+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},QB=(e,t)=>{let[n,r,i,s,o,a]=gt(e,t),l=D(o,a);if(mt(e)||ia(e)){let x=[],w=0;for(;w<e.points.length-1;)x.push(Qe(pe(D(e.points[w][0]+e.x,e.points[w][1]+e.y),l,e.angle),pe(D(e.points[w+1][0]+e.x,e.points[w+1][1]+e.y),l,e.angle))),w++;return x}let[f,c,d,u,h,g,U,y]=[[n,r],[i,r],[n,s],[i,s],[o,r],[o,s],[n,a],[i,a]].map(x=>pe(x,l,e.angle));return e.type==="diamond"?[Qe(h,U),Qe(h,y),Qe(g,U),Qe(g,y)]:e.type==="ellipse"?[Qe(h,U),Qe(h,y),Qe(g,U),Qe(g,y),Qe(h,U),Qe(h,y),Qe(g,U),Qe(g,y)]:[Qe(f,c),Qe(d,u),Qe(f,d),Qe(c,u),Qe(f,y),Qe(d,y),Qe(c,U),Qe(u,U)]},Kq=e=>{let t=Math.floor(e.width/2)+1,n=0,r=e.width,i=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,r,i,s,o,0,i]},JB=(e,t,n,r,i)=>{let s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*r+Math.pow(e,3)*i},eF=(e,t,n,r)=>{let i=t-e,s=n-t,o=r-n,a=3*i-6*s+3*o,l=6*s-6*i,f=3*i,c=l*l-4*a*f;if(!(c>=0))return!1;let d=null,u=null,h=1/0,g=1/0;return a===0?h=g=-f/l:(h=(-l+Math.sqrt(c))/(2*a),g=(-l-Math.sqrt(c))/(2*a)),h>=0&&h<=1&&(d=JB(h,e,t,n,r)),g>=0&&g<=1&&(u=JB(g,e,t,n,r)),[d,u]},tTe=(e,t,n,r)=>{let i=eF(e[0],t[0],n[0],r[0]),s=eF(e[1],t[1],n[1],r[1]),o=Math.min(e[0],r[0]),a=Math.max(e[0],r[0]);if(i){let c=i.filter(d=>d!==null);o=Math.min(o,...c),a=Math.max(a,...c)}let l=Math.min(e[1],r[1]),f=Math.max(e[1],r[1]);if(s){let c=s.filter(d=>d!==null);l=Math.min(l,...c),f=Math.max(f,...c)}return[o,l,a,f]},F7=(e,t)=>{let n=D(0,0),{minX:r,minY:i,maxX:s,maxY:o}=e.reduce((a,{op:l,data:f})=>{if(l==="move"){let c=ST(f);Gi(c!=null,"Op data is not a point"),n=c}else if(l==="bcurveTo"){let c=D(f[0],f[1]),d=D(f[2],f[3]),u=D(f[4],f[5]),h=t?t(c):c,g=t?t(d):d,U=t?t(u):u,y=t?t(n):n;n=u;let[x,w,E,S]=tTe(y,h,g,U);a.minX=Math.min(a.minX,x),a.minY=Math.min(a.minY,w),a.maxX=Math.max(a.maxX,E),a.maxY=Math.max(a.maxY,S)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r,i,s,o]},$T=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),r=Math.max(r,s),i=Math.max(i,o);return[t,n,r,i]},nTe=e=>{let[t,n,r,i]=$T(e.points),s=t+e.x,o=n+e.y,a=r+e.x,l=i+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},rTe=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},iTe=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},tF=(e,t,n,r)=>{if(t.length<1)return null;let i=$0(t[0]);if(i.length<1)return null;let s=n==="start"?1:i.length-1,o=i[s].data;Gi(o.length===6,"Op data length is not 6");let a=D(o[4],o[5]),l=D(o[2],o[3]),f=D(o[0],o[1]),c=i[s-1],d=D(0,0);if(c.op==="move"){let B=ST(c.data);Gi(B!=null,"Op data is not a point"),d=B}else c.op==="bcurveTo"&&(d=D(c.data[4],c.data[5]));let u=(B,$)=>Math.pow(1-B,3)*a[$]+3*B*Math.pow(1-B,2)*l[$]+3*Math.pow(B,2)*(1-B)*f[$]+d[$]*Math.pow(B,3),[h,g]=n==="start"?d:a,[U,y]=[u(.3,0),u(.3,1)],x=Math.hypot(h-U,g-y),w=(h-U)/x,E=(g-y)/x,S=rTe(r),A=0;{let[B,$]=n==="end"?e.points[e.points.length-1]:e.points[0],[z,H]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];A=Math.hypot(B-z,$-H)}let M=Math.min(S,A*(r==="diamond"||r==="diamond_outline"?.25:.5)),C=h-w*M,T=g-E*M;if(r==="dot"||r==="circle"||r==="circle_outline"){let B=Math.hypot(T-g,C-h)+e.strokeWidth-2;return[h,g,B]}let R=iTe(r);if(r==="crowfoot_many"||r==="crowfoot_one_or_many"){let[B,$]=pe(D(h,g),D(C,T),xh(-R)),[z,H]=pe(D(h,g),D(C,T),xh(R));return[C,T,B,$,z,H]}let[P,_]=pe(D(C,T),D(h,g),-R*Math.PI/180),[O,F]=pe(D(C,T),D(h,g),xh(R));if(r==="diamond"||r==="diamond_outline"){let B,$;if(n==="start"){let[z,H]=e.points.length>1?e.points[1]:[0,0];[B,$]=pe(D(h+M*2,g),D(h,g),Math.atan2(H-g,z-h))}else{let[z,H]=e.points.length>1?e.points[e.points.length-2]:[0,0];[B,$]=pe(D(h-M*2,g),D(h,g),Math.atan2(g-H,h-z))}return[h,g,P,_,B,$,O,F]}return[h,g,P,_,O,F]},sTe=e=>{let t=B0.generator(),n=lo(e),r=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[r](e.points,n)},oTe=(e,t,n,r)=>{var f;let i=xt(e,r);if(e.points.length<2){let[c,d]=e.points[0],[u,h]=pe(D(e.x+c,e.y+d),D(t,n),e.angle),g=[u,h,u,h];if(i){let U=Be.getMinMaxXYWithBoundText(e,r,[u,h,u,h],i);g=[U[0],U[1],U[2],U[3]]}return g}let s=((f=Vn.get(e))==null?void 0:f[0])??sTe(e),o=$0(s),a=F7(o,([c,d])=>pe(D(e.x+c,e.y+d),D(t,n),e.angle)),l=[a[0],a[1],a[2],a[3]];if(i){let c=Be.getMinMaxXYWithBoundText(e,r,l,i);l=[c[0],c[1],c[2],c[3]]}return l},sl=(e,t)=>eTe.getBounds(e,t),nn=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=-1/0,i=1/0,s=-1/0,o=t||ct(e);return e.forEach(a=>{let[l,f,c,d]=sl(a,o);n=Math.min(n,l),i=Math.min(i,f),r=Math.max(r,c),s=Math.max(s,d)}),[n,i,r,s]},zT=(e,t)=>{let[n,r,i,s]=nn(e);return[n+t.x,r+t.y,i+t.x,s+t.y]},v0=(e,t,n,r)=>{if(!(mt(e)||ia(e)))return[e.x,e.y,e.x+t,e.y+n];let i=t9(0,t,t9(1,n,e.points,r),r),s;if(ia(e))s=$T(i);else{let c=B0.generator(),d=e.roundness?c.curve(i,lo(e)):c.linearPath(i,lo(e)),u=$0(d);s=F7(u)}let[o,a,l,f]=s;return[o+e.x,a+e.y,l+e.x,f+e.y]},nF=(e,t)=>{let n=B0.generator(),r=e.roundness==null?n.linearPath(t,lo(e)):n.curve(t,lo(e)),i=$0(r),[s,o,a,l]=F7(i);return[s+e.x,o+e.y,a+e.x,l+e.y]},aTe=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=e[0],i=ct(e);return e.forEach(s=>{let[o,a,l,f]=sl(s,i),c=qt(D((o+l)/2,(a+f)/2),D(t.x,t.y));c<n&&(n=c,r=s)}),sl(r,i)},Ja=e=>{let[t,n,r,i]=nn(e);return{minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n,midX:(t+r)/2,midY:(n+i)/2}},lTe=({scrollX:e,scrollY:t,width:n,height:r,zoom:i})=>[-e,-t,-e+n/i.value,-t+r/i.value],HT=e=>D(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),cTe=(e,t)=>{if(e==null||t==null)return!1;let[n,r,i,s]=e,[o,a,l,f]=t;return n<l&&i>o&&r<f&&s>a},$7=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return fTe(e,t);case"diamond":return dTe(e,t);case"ellipse":return uTe(e,t)}},fTe=(e,t)=>{let n=D(e.x+e.width/2,e.y+e.height/2),r=pe(t,n,-e.angle),[i,s]=Aq(e);return Math.min(...i.map(o=>kT(r,o)),...s.map(o=>OZ(o,r)).filter(o=>o!==null))},dTe=(e,t)=>{let n=D(e.x+e.width/2,e.y+e.height/2),r=pe(t,n,-e.angle),[i,s]=Mq(e);return Math.min(...i.map(o=>kT(r,o)),...s.map(o=>OZ(o,r)).filter(o=>o!==null))},uTe=(e,t)=>{let n=D(e.x+e.width/2,e.y+e.height/2);return SMe(pe(t,n,-e.angle),Cq(n,e.width/2,e.height/2))},hTe=e=>!e[Q.CTRL_OR_CMD],$u=e=>e.isBindingEnabled,gn=5,VT=10,WT=4,pTe=(e,t)=>{let n=[];return t.forEach(r=>{let i=e.getNonDeletedElement(r);i!=null&&n.push(i)}),n},z7=(e,t,n,r,i)=>{let s=new Set,o=new Set;rF(e,t,n,"start",s,o,r),rF(e,n,t,"end",s,o,r);let a=Array.from(o).filter(l=>!s.has(l));pTe(i,a).forEach(l=>{var f;ye(l,{boundElements:(f=l.boundElements)==null?void 0:f.filter(c=>c.type!=="arrow"||c.id!==e.id)})})},rF=(e,t,n,r,i,s,o)=>{if(t!=="keep"){if(t===null){let a=yTe(e,r);a!=null&&s.add(a);return}Qq(e)?(n==null||(n==="keep"?!Zq(e,t,r):r==="start"||n.id!==t.id))&&(cc(e,t,r,o),i.add(t.id)):(cc(e,t,r,o),i.add(t.id))}},mTe=(e,t,n,r)=>{var o,a;let i=Jq(e,t,n),s=t==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){let l=n.get(s);if(il(l)&&i3(l,i,n,r))return l}return null},Yq=(e,t,n)=>["start","end"].map(r=>mTe(e,r,t,n)),gTe=(e,t,n,r,i,s)=>{let o=e.points.length-1,a=n.findIndex(d=>d===0)>-1,l=n.findIndex(d=>d===o)>-1,f=a?t?kp(e,"start",r,i,s):null:Fe(e)?"keep":kp(e,"start",r,i,s),c=l?t?kp(e,"end",r,i,s):null:Fe(e)?"keep":kp(e,"end",r,i,s);return[f,c]},bTe=(e,t,n,r,i)=>{if(Fe(e))return["keep","keep"];let[s,o]=Yq(e,t,i),a=s&&r?kp(e,"start",t,n,i):null,l=o&&r?kp(e,"end",t,n,i):null;return[a,l]},n9=(e,t,n,r,i,s,o)=>{e.forEach(a=>{let[l,f]=s!=null&&s.length?gTe(a,i,s??[],t,n,o):bTe(a,t,n,i,o);z7(a,l,f,t,r)})},JE=(e,t,n)=>e.length>50?[]:e.filter(mt).flatMap(r=>Yq(r,t,n)).filter(r=>r!==null).filter(r=>e.filter(i=>i.id===(r==null?void 0:r.id)).length===0),VC=(e,t,n,r,i)=>{t.startBoundElement!=null&&cc(e,t.startBoundElement,"start",r);let s=Ka(n,i,r,t.zoom,Fe(e),Fe(e));s!==null&&(Zq(e,s,"end")||cc(e,s,"end",r))},UTe=(e,t)=>{let n=e.gap,r=Gb(t,t.width,t.height);return n>r&&(n=VT+WT),{...e,gap:n}},cc=(e,t,n,r)=>{if(!Et(e))return;let i={elementId:t.id,...Fe(e)?{...r9(e,t,n),focus:0,gap:0}:{...UTe(wTe(e,t,n,r),t)}};ye(e,{[n==="start"?"startBinding":"endBinding"]:i}),ct(t.boundElements||[]).has(e.id)||ye(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},Zq=(e,t,n)=>{let r=e[n==="start"?"endBinding":"startBinding"];return qq(e,r==null?void 0:r.elementId,t)},qq=(e,t,n)=>t===n.id&&Qq(e),Qq=e=>e.points.length<3,yTe=(e,t)=>{let n=t==="start"?"startBinding":"endBinding",r=e[n];return r==null?null:(ye(e,{[n]:null}),r.elementId)},Ka=(e,t,n,r,i,s)=>{if(s){let o=!1,a=vTe(t,f=>il(f,!1)&&i3(f,e,n,r,(i||!HE(f))&&!at(f))).filter(f=>o?!1:(HE(f)||(o=!0),!0));if(!a||a.length===0)return null;if(a.length===1)return a[0];let l=a.filter(f=>i3(f,e,n,r,!1));return l.length===1?l[0]:a.sort((f,c)=>c.width**2+c.height**2-(f.width**2+f.height**2)).pop()}return xTe(t,o=>il(o,!1)&&i3(o,e,n,r,(i||!HE(o))&&!at(o)))},xTe=(e,t)=>{let n=null;for(let r=e.length-1;r>=0;--r){let i=e[r];if(!i.isDeleted&&t(i)){n=i;break}}return n},vTe=(e,t)=>{let n=[];for(let r=e.length-1;r>=0;--r){let i=e[r];i.isDeleted||t(i)&&n.push(i)}return n},wTe=(e,t,n,r)=>{let i=n==="start"?-1:1,s=i===-1?0:e.points.length-1,o=s-i,a=Be.getPointAtIndexGlobalCoordinates(e,s,r),l=Be.getPointAtIndexGlobalCoordinates(e,o,r);return{focus:NTe(t,l,a),gap:Math.max(1,$7(t,a))}},zs=(e,t,n)=>{let{newSize:r,simultaneouslyUpdated:i}=n??{},s=STe(i);il(e)&&H7(t,e,o=>{var g,U;if(!mt(o)||o.isDeleted||!ETe(o,e))return;let a=o.startBinding?t.get(o.startBinding.elementId):null,l=o.endBinding?t.get(o.endBinding.elementId):null,f=null,c=null;a&&l&&(f=sl(a,t),c=sl(l,t));let d={startBinding:iF(e,o.startBinding,r),endBinding:iF(e,o.endBinding,r)};if(s.has(o.id)){ye(o,d,!0);return}let u=V7(t,o,(y,x)=>{var w,E;if(y&&il(y)&&(x==="startBinding"||x==="endBinding")&&(e.id===((w=o[x])==null?void 0:w.elementId)||e.id===((E=o[x==="startBinding"?"endBinding":"startBinding"])==null?void 0:E.elementId)&&!cTe(f,c))){let S=ITe(o,x,d[x],y,t);if(S)return{index:x==="startBinding"?0:o.points.length-1,point:S}}return null}).filter(y=>y!==null);Be.movePoints(o,u,{...e.id===((g=o.startBinding)==null?void 0:g.elementId)?{startBinding:d.startBinding}:{},...e.id===((U=o.endBinding)==null?void 0:U.elementId)?{endBinding:d.endBinding}:{}});let h=xt(o,t);h&&!h.isDeleted&&Xb(o,t,!1)})},ETe=(e,t)=>{var n,r;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((r=e.endBinding)==null?void 0:r.elementId)===t.id},STe=e=>new Set((e||[]).map(t=>t.id)),kTe=(e,t,n,r,i,s,o)=>{let a=Qh(Ye(t,e));return!n||!r?a:CTe(s,n,i,o)?Vq(n,r,e):Qh(Ye(e,D(n.x+n.width/2,n.y+n.height/2)))},CTe=(e,t,n,r)=>{let i=$7(t,e),s=Gb(t,t.width,t.height,r);return i>s?null:i},W2=(e,t,n)=>{let r=t&&Vl(t),i=e.points[n==="start"?0:e.points.length-1],s=D(e.x+i[0],e.y+i[1]),o=Ave(t)?MTe(t,s):s;if(t&&r){let a=HT(r),l=Iq(t,Qe(a,Tt(nr(Hi(Ye(o,a)),Math.max(t.width,t.height)),a)))[0],f=qt(o,a),c=Math.max(qt(l??o,a),1e-4),d=tc(f/c,6);switch(!0){case d>.9:return f-c>gn||$2(o,l)<1e-4?o:Tt(nr(Hi(Ye(o,l??a)),d>1?gn:-gn),l??a);default:return ATe(o,t,r)}}return o},ATe=(e,t,n)=>{let r=HT(n),i=Qh(Ye(e,r));switch(!0){case rr(i,Os):return pe(D((n[0]+n[2])/2+.1,n[1]),r,t.angle);case rr(i,tr):return pe(D(n[2],(n[1]+n[3])/2+.1),r,t.angle);case rr(i,si):return pe(D((n[0]+n[2])/2-.1,n[3]),r,t.angle);default:return pe(D(n[0],(n[1]+n[3])/2-.1),r,t.angle)}},MTe=(e,t)=>{let n=D(e.x+e.width/2,e.y+e.height/2),r=pe(t,n,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-gn?pe(D(e.x-gn,e.y),n,e.angle):pe(D(e.x,e.y-gn),n,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-gn?pe(D(e.x,e.y+e.height+gn),n,e.angle):pe(D(e.x-gn,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+gn?pe(D(e.x+e.width,e.y+e.height+gn),n,e.angle):pe(D(e.x+e.width+gn,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+gn?pe(D(e.x+e.width,e.y-gn),n,e.angle):pe(D(e.x+e.width+gn,e.y),n,e.angle):t},TTe=(e,t,n=.05)=>{let{x:r,y:i,width:s,height:o,angle:a}=e,l=D(r+s/2-.1,i+o/2-.1),f=pe(t,l,-a),c=Mt(n*o,5,80),d=Mt(n*s,5,80);return f[0]<=r+s/2&&f[1]>l[1]-c&&f[1]<l[1]+c?pe(D(r-gn,l[1]),l,a):f[1]<=i+o/2&&f[0]>l[0]-d&&f[0]<l[0]+d?pe(D(l[0],i-gn),l,a):f[0]>=r+s/2&&f[1]>l[1]-c&&f[1]<l[1]+c?pe(D(r+s+gn,l[1]),l,a):f[1]>=i+o/2&&f[0]>l[0]-d&&f[0]<l[0]+d?pe(D(l[0],i+o+gn),l,a):t},ITe=(e,t,n,r,i)=>{if(n==null||n.elementId!==r.id&&e.points.length>2)return null;let s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(Fe(e)&&Z4(n)){let d=W7(n.fixedPoint)??r9(e,r,t==="startBinding"?"start":"end").fixedPoint,u=D(r.x+r.width/2,r.y+r.height/2),h=D(r.x+d[0]*r.width,r.y+d[1]*r.height),g=pe(h,u,r.angle);return Be.pointFromAbsoluteCoords(e,g,i)}let a=o-s,l=Be.getPointAtIndexGlobalCoordinates(e,a,i),f=RTe(r,n.focus,l),c;if(n.gap===0)c=f;else{let d=Be.getPointAtIndexGlobalCoordinates(e,o,i),u=D(r.x+r.width/2,r.y+r.height/2),h=qt(l,d)+qt(l,u)+Math.max(r.width,r.height)*2,g=Iq(r,Qe(l,Tt(nr(Hi(Ye(f,l)),h),l)),n.gap).sort((U,y)=>$2(U,l)-$2(y,l));g.length>1?c=g[0]:g.length===1?c=f:c=d}return Be.pointFromAbsoluteCoords(e,c,i)},r9=(e,t,n,r)=>{let i=[t.x,t.y,t.x+t.width,t.y+t.height],s=W2(e,t,n),o=D(i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2),a=pe(s,o,-t.angle);return{fixedPoint:W7([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},iF=(e,t,n)=>{if(t==null||n==null)return t;let{width:r,height:i}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(Gb(e,r,i),t.gap*(r<i?r/s:i/o)));return{...t,gap:a}},kp=(e,t,n,r,i)=>Ka(Jq(e,t,n),r,n,i,Fe(e),Fe(e)),Jq=(e,t,n)=>{let r=t==="start"?0:-1;return Ga(Be.getPointAtIndexGlobalCoordinates(e,r,n))},eQ=(e,t,n,r)=>{let i=new Set,s=new Set,o=r==="duplicatesServeAsOld",a=new Map([...n].map(([l,f])=>[f,l]));t.forEach(l=>{let{boundElements:f}=l;if(f!=null&&f.length>0&&(f.forEach(c=>{o&&!n.has(c.id)&&i.add(c.id)}),s.add(n.get(l.id))),Yl(l)){if(l.startBinding!=null){let{elementId:c}=l.startBinding;o&&!n.has(c)&&s.add(c)}if(l.endBinding!=null){let{elementId:c}=l.endBinding;o&&!n.has(c)&&s.add(c)}(l.startBinding!=null||l.endBinding!=null)&&i.add(n.get(l.id))}}),e.filter(({id:l})=>i.has(l)).forEach(l=>{let{startBinding:f,endBinding:c}=l;ye(l,{startBinding:sF(f,n),endBinding:sF(c,n)})}),e.filter(({id:l})=>s.has(l)).forEach(l=>{var d;let f=a.get(l.id),c=(d=e.find(({id:u})=>u===f))==null?void 0:d.boundElements;c&&c.length>0&&ye(l,{boundElements:c.map(u=>n.has(u.id)?{id:n.get(u.id),type:u.type}:u)})})},sF=(e,t)=>e==null?null:{...e,elementId:t.get(e.elementId)??e.elementId},tQ=(e,t)=>{let n=ct(e);for(let r of t)Cp.unbindAffected(n,r,ye),Ap.unbindAffected(n,r,ye)},G2=(e,t,n=[])=>{if(!e)return null;let r=e.filter(i=>!t.has(i.id));return r.push(...n.map(i=>({id:i.id,type:i.type}))),r},i3=(e,{x:t,y:n},r,i,s)=>{let o=Gb(e,e.width,e.height,i),a=Zc(e,r);return jC(D(t,n),a,o)||s===!0&&d6(D(t,n),Vl(e))},Gb=(e,t,n,r)=>{let i=r!=null&&r.value&&r.value<1?r.value:1,s=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*s,32),VT/i+WT)},NTe=(e,t,n)=>{let r=D(e.x+e.width/2,e.y+e.height/2);if(rl(t,n))return 0;let i=pe(t,r,-e.angle),s=pe(n,r,-e.angle),o=Math.sign($r(Ye(s,t),Ye(s,r)))*-1,a=Qe(s,Tt(nr(Hi(Ye(s,i)),Math.max(e.width*2,e.height*2)),s)),l=e.type==="diamond"?[Qe(D(e.x+e.width/2,e.y),D(e.x+e.width/2,e.y+e.height)),Qe(D(e.x,e.y+e.height/2),D(e.x+e.width,e.y+e.height/2))]:[Qe(D(e.x,e.y),D(e.x+e.width,e.y+e.height)),Qe(D(e.x+e.width,e.y),D(e.x,e.y+e.height))],f=e.type==="diamond"?[Qe(D(e.x+e.width/2,e.y-e.height),D(e.x+e.width/2,e.y+e.height*2)),Qe(D(e.x-e.width,e.y+e.height/2),D(e.x+e.width*2,e.y+e.height/2))]:[Qe(D(e.x-e.width,e.y-e.height),D(e.x+e.width*2,e.y+e.height*2)),Qe(D(e.x+e.width*2,e.y-e.height),D(e.x-e.width,e.y+e.height*2))];return[z2(a,f[0]),z2(a,f[1])].filter(c=>c!==null).sort((c,d)=>$2(c,n)-$2(d,n)).map((c,d)=>o*qt(r,c)/(e.type==="diamond"?qt(l[d][0],l[d][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((c,d)=>Math.abs(c)-Math.abs(d))[0]??0},RTe=(e,t,n)=>{let r=D(e.x+e.width/2,e.y+e.height/2);if(t===0)return r;let i=(e.type==="diamond"?[D(e.x,e.y+e.height/2),D(e.x+e.width/2,e.y),D(e.x+e.width,e.y+e.height/2),D(e.x+e.width/2,e.y+e.height)]:[D(e.x,e.y),D(e.x+e.width,e.y),D(e.x+e.width,e.y+e.height),D(e.x,e.y+e.height)]).map(o=>Tt(nr(Ye(o,r),Math.abs(t)),r)).map(o=>pe(o,r,e.angle)),s=[$r(Ye(n,i[0]),Ye(i[1],i[0]))>0&&(t>0?$r(Ye(n,i[1]),Ye(i[2],i[1]))<0:$r(Ye(n,i[3]),Ye(i[0],i[3]))<0),$r(Ye(n,i[1]),Ye(i[2],i[1]))>0&&(t>0?$r(Ye(n,i[2]),Ye(i[3],i[2]))<0:$r(Ye(n,i[0]),Ye(i[1],i[0]))<0),$r(Ye(n,i[2]),Ye(i[3],i[2]))>0&&(t>0?$r(Ye(n,i[3]),Ye(i[0],i[3]))<0:$r(Ye(n,i[1]),Ye(i[2],i[1]))<0),$r(Ye(n,i[3]),Ye(i[0],i[3]))>0&&(t>0?$r(Ye(n,i[0]),Ye(i[1],i[0]))<0:$r(Ye(n,i[2]),Ye(i[3],i[2]))<0)];return s[0]?t>0?i[1]:i[0]:s[1]?t>0?i[2]:i[1]:s[2]?t>0?i[3]:i[2]:t>0?i[0]:i[3]},_Te=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),H7=(e,t,n)=>{var r;il(t)&&(((r=t.boundElements)==null?void 0:r.slice())??[]).forEach(({id:i})=>{n(e.get(i),"boundElements",i)})},V7=(e,t,n)=>{let r=[];if(t.frameId){let i=t.frameId;r.push(n(e.get(i),"frameId",i))}if(Mn(t)){let i=t.containerId;r.push(n(e.get(i),"containerId",i))}if(Et(t)){if(t.startBinding){let i=t.startBinding.elementId;r.push(n(e.get(i),"startBinding",i))}if(t.endBinding){let i=t.endBinding.elementId;r.push(n(e.get(i),"endBinding",i))}}return r},Cp=class{static unbindAffected(e,t,n){t&&V7(e,t,r=>{!r||r.isDeleted||H7(e,r,(i,s,o)=>{o===t.id&&n(r,{boundElements:G2(r.boundElements,new Set([o]))})})})}};Z(Cp,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||V7(e,t,(r,i)=>{var s,o;if(!r||r.isDeleted){n(t,{[i]:null});return}i!=="frameId"&&((s=r.boundElements)!=null&&s.find(a=>a.id===t.id)||(Et(t)&&n(r,{boundElements:G2(r.boundElements,new Set,new Array(t))}),je(t)&&((o=r.boundElements)!=null&&o.find(a=>a.type==="text")?n(t,{[i]:null}):n(r,{boundElements:G2(r.boundElements,new Set,new Array(t))}))))})});var Ap=class{static unbindAffected(e,t,n){t&&H7(e,t,r=>{!r||r.isDeleted||V7(e,r,(i,s,o)=>{o===t.id&&n(r,{[s]:null})})})}};Z(Ap,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||H7(e,t,(r,i,s)=>{var o,a;if(!r||r.isDeleted){n(t,{boundElements:G2(t.boundElements,new Set([s]))});return}je(r)&&(((a=(((o=t.boundElements)==null?void 0:o.slice())??[]).reverse().find(l=>l.type==="text"))==null?void 0:a.id)===r.id?r.containerId!==t.id&&n(r,{containerId:t.id}):(r.containerId!==null&&n(r,{containerId:null}),n(t,{boundElements:G2(t.boundElements,new Set([r.id]))})))})});var WC=(e,t)=>{let[n,r]=W7(e);return pe(D(t.x+t.width*n,t.y+t.height*r),D(t.x+t.width/2,t.y+t.height/2),t.angle)},PTe=(e,t)=>{let n=e.startBinding&&t.get(e.startBinding.elementId),r=e.endBinding&&t.get(e.endBinding.elementId),i=n&&e.startBinding?WC(e.startBinding.fixedPoint,n):D(e.x+e.points[0][0],e.y+e.points[0][1]),s=r&&e.endBinding?WC(e.endBinding.fixedPoint,r):D(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[i,s]},DTe=(e,t)=>{let[n,r]=PTe(e,t);return[Be.pointFromAbsoluteCoords(e,n,t),Be.pointFromAbsoluteCoords(e,r,t)]},W7=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,LTe=(e,t)=>{let[n,r,i,s]=t,{x:o,y:a}=Wa({sceneX:n,sceneY:r},e),{x:l,y:f}=Wa({sceneX:i,sceneY:s},e);return l-o>e.width||f-a>e.height},nQ=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:r})=>{let i=(t.width-((r==null?void 0:r.right)??0))/2/n.value-e.x;i+=((r==null?void 0:r.left)??0)/2/n.value;let s=(t.height-((r==null?void 0:r.bottom)??0))/2/n.value-e.y;return s+=((r==null?void 0:r.top)??0)/2/n.value,{scrollX:i,scrollY:s}},X2=(e,t)=>{if(e=lRe(e),!e.length)return{scrollX:0,scrollY:0};let[n,r,i,s]=nn(e);LTe(t,[n,r,i,s])&&([n,r,i,s]=aTe(e,yn({clientX:t.scrollX,clientY:t.scrollY},t)));let o=(n+i)/2,a=(r+s)/2;return nQ({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},bf=e=>Mt(tc(e,6),xT,vT),OTe=e=>Mt(Math.round(e),1,100),rQ=e=>Mt(Math.round(e),1,100),iQ=(e,t,n)=>{let r=n.reduce((i,s)=>(s.groupIds.includes(e)&&(i[s.id]=!0),i),{});return Object.keys(r).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...r}}},rs=function(){let e=null,t=null,n=null,r=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;let f={};for(let u of s){let h=u.groupIds;if(a.editingGroupId){let g=h.indexOf(a.editingGroupId);g>-1&&(h=h.slice(0,g))}if(h.length>0){let g=h[h.length-1];f[g]=!0}}let c={},d=o.reduce((u,h)=>{if(h.isDeleted)return u;let g=h.groupIds.find(U=>f[U]);return g&&(u[h.id]=!0,Array.isArray(c[g])?c[g].push(h.id):c[g]=[h.id]),u},{});for(let u of Object.keys(c))c[u].length<2&&f[u]&&(f[u]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:f,selectedElementIds:Yt({...a.selectedElementIds,...d},l)},n},i=(s,o,a,l)=>{let f=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):wt(o,s);return f.length?r(f,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:Yt(s.selectedElementIds,a)}};return i.clearCache=()=>{t=null,e=null,n=null},i}(),sQ=(e,t)=>oQ(e,t)!=null,oQ=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),Eh=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),aQ=(e,t)=>{let n={...t,selectedGroupIds:{}};for(let r of e){let i=r.groupIds;if(t.editingGroupId){let s=i.indexOf(t.editingGroupId);s>-1&&(i=i.slice(0,s))}if(i.length>0){let s=i[i.length-1];n={...n,...iQ(s,n,e)}}}return n.selectedGroupIds},jTe=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),K2=(e,t)=>e.groupIds.includes(t),Cn=(e,t)=>{let n=[];for(let r of e.values())K2(r,t)&&n.push(r);return n},BTe=(e,t)=>e.groupIds.find(n=>t[n]),FTe=(e,t,n)=>{let r=[...e],i=t?e.indexOf(t):-1,s=i>-1?i:e.length;for(let o=0;o<s;o++)r[o]=n(r[o]);return r},$Te=(e,t,n)=>{let r=[...e],i=n?r.indexOf(n):-1,s=i>-1?i:r.length;return r.splice(s,0,t),r},zTe=(e,t)=>e.filter(n=>!t[n]),G7=(e,t)=>{let n=new Map;return e.forEach(r=>{let i=r.groupIds.length===0?r.id:r.groupIds[r.groupIds.length-1],s=n.get(i)||[],o=xt(r,t);o&&s.push(o),n.set(i,[...s,r])}),Array.from(n.values())},HTe=e=>{let t=new Set;for(let[,n]of e)if(!n.isDeleted)for(let r of n.groupIds??[])t.add(r);return t},lQ=e=>{let t=e.flatMap(i=>i.groupIds),n=new Map,r=0;for(let i of t)n.set(i,(n.get(i)??0)+1),n.get(i)>r&&(r=n.get(i));return r===e.length},p6=e=>e.groupIds.length>0,VTe=8,oF=99999,X7=e=>VTe/e,Ms=class{};Z(Ms,"referenceSnapPoints",null),Z(Ms,"visibleGaps",null),Z(Ms,"setReferenceSnapPoints",e=>{Ms.referenceSnapPoints=e}),Z(Ms,"getReferenceSnapPoints",()=>Ms.referenceSnapPoints),Z(Ms,"setVisibleGaps",e=>{Ms.visibleGaps=e}),Z(Ms,"getVisibleGaps",()=>Ms.visibleGaps),Z(Ms,"destroy",()=>{Ms.referenceSnapPoints=null,Ms.visibleGaps=null});var Wc=Ms,Y2=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,M0=({event:e,app:t,selectedElements:n})=>e?t.state.objectsSnapModeEnabled&&!e[Q.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[Q.CTRL_OR_CMD]&&!Y2(t):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,WTe=(e,t,n=.01)=>Math.abs(e-t)<=n,Z2=(e,t,{omitCenter:n,boundingBoxCorners:r,dragOffset:i}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){let o=e[0],[a,l,f,c,d,u]=gt(o,t);i&&(a+=i.x,f+=i.x,d+=i.x,l+=i.y,c+=i.y,u+=i.y);let h=(f-a)/2,g=(c-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!r){let U=pe(D(a,l+g),D(d,u),o.angle),y=pe(D(a+h,l),D(d,u),o.angle),x=pe(D(f,l+g),D(d,u),o.angle),w=pe(D(a+h,c),D(d,u),o.angle),E=D(d,u);s=n?[U,y,x,w]:[U,y,x,w,E]}else{let U=pe(D(a,l),D(d,u),o.angle),y=pe(D(f,l),D(d,u),o.angle),x=pe(D(a,c),D(d,u),o.angle),w=pe(D(f,c),D(d,u),o.angle),E=D(d,u);s=n?[U,y,x,w]:[U,y,x,w,E]}}else if(e.length>1){let[o,a,l,f]=zT(e,i??{x:0,y:0}),c=l-o,d=f-a,u=D(o,a),h=D(l,a),g=D(o,f),U=D(l,f),y=D(o+c/2,a+d/2);s=n?[u,h,g,U]:[u,h,g,U,y]}return s.map(o=>D(Hn(o[0]),Hn(o[1])))},cQ=(e,t,n,r)=>{let i=t.filter(s=>at(s)).map(s=>s.id);return rJ(e,t,n,r).filter(s=>!(s.frameId&&i.includes(s.frameId)))},GTe=(e,t,n,r)=>{let i=cQ(e,t,n,r),s=G7(i,r).filter(d=>!(d.length===1&&Mn(d[0]))).map(d=>nn(d).map(u=>Hn(u))),o=s.sort((d,u)=>d[0]-u[0]),a=[],l=0;e:for(let d=0;d<o.length;d++){let u=o[d];for(let h=d+1;h<o.length;h++){if(++l>oF)break e;let g=o[h],[,U,y,x]=u,[w,E,,S]=g;y<w&&K4(Bi(U,x),Bi(E,S))&&a.push({startBounds:u,endBounds:g,startSide:[D(y,U),D(y,x)],endSide:[D(w,E),D(w,S)],length:w-y,overlap:Y4(Bi(U,x),Bi(E,S))})}}let f=s.sort((d,u)=>d[1]-u[1]),c=[];l=0;e:for(let d=0;d<f.length;d++){let u=f[d];for(let h=d+1;h<f.length;h++){if(++l>oF)break e;let g=f[h],[U,,y,x]=u,[w,E,S]=g;x<E&&K4(Bi(U,y),Bi(w,S))&&c.push({startBounds:u,endBounds:g,startSide:[D(U,x),D(y,x)],endSide:[D(w,E),D(S,E)],length:E-x,overlap:Y4(Bi(U,y),Bi(w,S))})}}return{horizontalGaps:a,verticalGaps:c}},aF=(e,t,n,r,i,s,o)=>{if(!M0({app:n,event:r,selectedElements:e}))return[];if(e.length===0)return[];let a=Wc.getVisibleGaps();if(a){let{horizontalGaps:l,verticalGaps:f}=a,[c,d,u,h]=zT(e,t).map(y=>Hn(y)),g=(c+u)/2,U=(d+h)/2;for(let y of l){if(!K4(Bi(d,h),y.overlap))continue;let x=y.startSide[0][0]+y.length/2,w=Hn(x-g);if(y.length>u-c&&Math.abs(w)<=o.x){Math.abs(w)<o.x&&(i.length=0),o.x=Math.abs(w);let R={type:"gap",direction:"center_horizontal",gap:y,offset:w};i.push(R);continue}let[,,E]=y.endBounds,S=c-E,A=Hn(y.length-S);if(Math.abs(A)<=o.x){Math.abs(A)<o.x&&(i.length=0),o.x=Math.abs(A);let R={type:"gap",direction:"side_right",gap:y,offset:A};i.push(R);continue}let[M,,,]=y.startBounds,C=M-u,T=Hn(C-y.length);if(Math.abs(T)<=o.x){Math.abs(T)<o.x&&(i.length=0),o.x=Math.abs(T);let R={type:"gap",direction:"side_left",gap:y,offset:T};i.push(R);continue}}for(let y of f){if(!K4(Bi(c,u),y.overlap))continue;let x=y.startSide[0][1]+y.length/2,w=Hn(x-U);if(y.length>h-d&&Math.abs(w)<=o.y){Math.abs(w)<o.y&&(s.length=0),o.y=Math.abs(w);let R={type:"gap",direction:"center_vertical",gap:y,offset:w};s.push(R);continue}let[,E,,]=y.startBounds,S=E-h,A=Hn(S-y.length);if(Math.abs(A)<=o.y){Math.abs(A)<o.y&&(s.length=0),o.y=Math.abs(A);let R={type:"gap",direction:"side_top",gap:y,offset:A};s.push(R);continue}let[,,,M]=y.endBounds,C=Hn(d-M),T=y.length-C;if(Math.abs(T)<=o.y){Math.abs(T)<o.y&&(s.length=0),o.y=Math.abs(T);let R={type:"gap",direction:"side_bottom",gap:y,offset:T};s.push(R);continue}}}},XTe=(e,t,n,r)=>{let i=cQ(e,t,n,r);return G7(i,r).filter(s=>!(s.length===1&&Mn(s[0]))).flatMap(s=>Z2(s,r))},m6=(e,t,n,r,i,s,o)=>{if(!M0({app:n,event:r,selectedElements:e})||e.length===0&&t.length===0)return[];let a=Wc.getReferenceSnapPoints();if(a)for(let l of t)for(let f of a){let c=f[0]-l[0],d=f[1]-l[1];Math.abs(c)<=o.x&&(Math.abs(c)<o.x&&(i.length=0),i.push({type:"point",points:[l,f],offset:c}),o.x=Math.abs(c)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,f],offset:d}),o.y=Math.abs(d))}},KTe=(e,t,n,r,i)=>{var y,x;let s=n.state,o=wt(e,s);if(!M0({app:n,event:r,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=Hn(t.x),t.y=Hn(t.y);let a=[],l=[],f=X7(s.zoom.value),c={x:f,y:f},d=Z2(o,i,{dragOffset:t});m6(o,d,n,r,a,l,c),aF(o,t,n,r,a,l,c);let u={x:((y=a[0])==null?void 0:y.offset)??0,y:((x=l[0])==null?void 0:x.offset)??0};c.x=0,c.y=0,a.length=0,l.length=0;let h={x:Hn(t.x+u.x),y:Hn(t.y+u.y)};m6(o,Z2(o,i,{dragOffset:h}),n,r,a,l,c),aF(o,h,n,r,a,l,c);let g=GT(a,l),U=ZTe(o,h,[...a,...l].filter(w=>w.type==="gap"));return{snapOffset:u,snapLines:[...g,...U]}},Hn=e=>Math.round(e*10**6)/10**6,lF=e=>{let t=new Map;for(let n of e){let r=n.join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},GT=(e,t)=>{let n={},r={};if(e.length>0){for(let i of e)if(i.type==="point"){let s=Hn(i.points[0][0]);n[s]||(n[s]=[]),n[s].push(...i.points.map(o=>D(Hn(o[0]),Hn(o[1]))))}}if(t.length>0){for(let i of t)if(i.type==="point"){let s=Hn(i.points[0][1]);r[s]||(r[s]=[]),r[s].push(...i.points.map(o=>D(Hn(o[0]),Hn(o[1]))))}}return Object.entries(n).map(([i,s])=>({type:"points",points:lF(s.map(o=>D(Number(i),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(r).map(([i,s])=>({type:"points",points:lF(s.map(o=>D(o[0],Number(i))).sort((o,a)=>o[0]-a[0]))})))},YTe=e=>{let t=new Map;for(let n of e){let r=n.points.flat().map(i=>[Hn(i)]).join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},ZTe=(e,t,n)=>{let[r,i,s,o]=zT(e,t),a=[];for(let l of n){let[f,c,d,u]=l.gap.startBounds,[h,g,U,y]=l.gap.endBounds,x=Y4(Bi(i,o),l.gap.overlap),w=Y4(Bi(r,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[D(l.gap.startSide[0][0],E),D(r,E)]},{type:"gap",direction:"horizontal",points:[D(s,E),D(l.gap.endSide[0][0],E)]})}break}case"center_vertical":{if(w){let E=(w[0]+w[1])/2;a.push({type:"gap",direction:"vertical",points:[D(E,l.gap.startSide[0][1]),D(E,i)]},{type:"gap",direction:"vertical",points:[D(E,o),D(E,l.gap.endSide[0][1])]})}break}case"side_right":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[D(d,E),D(h,E)]},{type:"gap",direction:"horizontal",points:[D(U,E),D(r,E)]})}break}case"side_left":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[D(s,E),D(f,E)]},{type:"gap",direction:"horizontal",points:[D(d,E),D(h,E)]})}break}case"side_top":{if(w){let E=(w[0]+w[1])/2;a.push({type:"gap",direction:"vertical",points:[D(E,o),D(E,c)]},{type:"gap",direction:"vertical",points:[D(E,u),D(E,g)]})}break}case"side_bottom":{if(w){let E=(w[0]+w[1])/2;a.push({type:"gap",direction:"vertical",points:[D(E,u),D(E,g)]},{type:"gap",direction:"vertical",points:[D(E,y),D(E,i)]})}break}}}return YTe(a.map(l=>({...l,points:l.points.map(f=>D(Hn(f[0]),Hn(f[1])))})))},cF=(e,t,n,r,i,s)=>{var M,C;if(!M0({event:r,selectedElements:e,app:n})||e.length===0||e.length===1&&!WTe(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,f]=nn(t);s&&(s.includes("e")?l+=i.x:s.includes("w")&&(o+=i.x),s.includes("n")?a+=i.y:s.includes("s")&&(f+=i.y));let c=[];if(s)switch(s){case"e":{c.push(D(l,a),D(l,f));break}case"w":{c.push(D(o,a),D(o,f));break}case"n":{c.push(D(o,a),D(l,a));break}case"s":{c.push(D(o,f),D(l,f));break}case"ne":{c.push(D(l,a));break}case"nw":{c.push(D(o,a));break}case"se":{c.push(D(l,f));break}case"sw":{c.push(D(o,f));break}}let d=X7(n.state.zoom.value),u={x:d,y:d},h=[],g=[];m6(t,c,n,r,h,g,u);let U={x:((M=h[0])==null?void 0:M.offset)??0,y:((C=g[0])==null?void 0:C.offset)??0};u.x=0,u.y=0,h.length=0,g.length=0;let[y,x,w,E]=nn(e).map(T=>Hn(T)),S=[D(y,x),D(y,E),D(w,x),D(w,E)];m6(e,S,n,r,h,g,u);let A=GT(h,g);return{snapOffset:U,snapLines:A}},qTe=(e,t,n,r,i,s)=>{var g,U;if(!M0({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};let o=[D(r.x+i.x,r.y+i.y)],a=X7(t.state.zoom.value),l={x:a,y:a},f=[],c=[];m6([e],o,t,n,f,c,l);let d={x:((g=f[0])==null?void 0:g.offset)??0,y:((U=c[0])==null?void 0:U.offset)??0};l.x=0,l.y=0,f.length=0,c.length=0;let u=Z2([e],s,{boundingBoxCorners:!0,omitCenter:!0});m6([e],u,t,n,f,c,l);let h=GT(f,c);return{snapOffset:d,snapLines:h}},QTe=(e,t,n,r,i)=>{if(!M0({event:r,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};let s=rJ(e,[],t.state,i),o=X7(t.state.zoom.value),a={x:o,y:o},l=[],f=[];for(let c of s){let d=Z2([c],i);for(let u of d){let h=u[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(f.length=0),f.push({type:"pointer",points:[u,D(u[0],n.y)],direction:"vertical"}),a.x=h);let g=u[1]-n.y;Math.abs(g)<=Math.abs(a.y)&&(Math.abs(g)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[u,D(n.x,u[1])],direction:"horizontal"}),a.y=g)}}return{originOffset:{x:f.length>0?f[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...f,...l]}},JTe=e=>e===zr.rectangle||e===zr.ellipse||e===zr.diamond||e===zr.frame||e===zr.magicframe||e===zr.image||e===zr.text,Ir=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t],yd={version:null,points:[],zoom:null},cr=class Ct{constructor(t){Z(this,"elementId"),Z(this,"selectedPointsIndices"),Z(this,"pointerDownState"),Z(this,"isDragging"),Z(this,"lastUncommittedPoint"),Z(this,"pointerOffset"),Z(this,"startBindingElement"),Z(this,"endBindingElement"),Z(this,"hoverPointIndex"),Z(this,"segmentMidPointHoveredCoords"),Z(this,"elbowed"),this.elementId=t.id,rl(t.points[0],D(0,0))||console.error("Linear element is not normalized",Error().stack),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=Fe(t)&&t.elbowed}static getElement(t,n){return n.get(t)||null}static handleBoxSelection(t,n,r,i){if(!n.editingLinearElement||!n.selectionElement)return!1;let{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=Ct.getElement(a,i);if(!l)return!1;let[f,c,d,u]=gt(n.selectionElement,i),h=Ct.getPointsGlobalCoordinates(l,i).reduce((g,U,y)=>((U[0]>=f&&U[0]<=d&&U[1]>=c&&U[1]<=u||t.shiftKey&&(o!=null&&o.includes(y)))&&g.push(y),g),[]).filter(g=>!(Fe(l)&&g!==0&&g!==l.points.length-1));r({editingLinearElement:{...s,selectedPointsIndices:h.length?h:null}})}static handlePointDragging(t,n,r,i,s,o,a){var g;if(!o)return!1;let{elementId:l}=o,f=a.getNonDeletedElementsMap(),c=Ct.getElement(l,f);if(!c||Fe(c)&&!o.pointerDownState.lastClickedIsEndPoint&&o.pointerDownState.lastClickedPoint!==0)return!1;let d=Fe(c)?(g=o.selectedPointsIndices)==null?void 0:g.reduce((U,y)=>y===0?[0,U[1]]:[U[0],c.points.length-1],[!1,!1]).filter(U=>typeof U=="number"):o.selectedPointsIndices,u=Fe(c)?o.pointerDownState.lastClickedPoint>0?c.points.length-1:0:o.pointerDownState.lastClickedPoint,h=c.points[u];if(d&&h){if(z5(t)&&d.length===1&&c.points.length>1){let U=d[0],y=c.points[U===0?1:U-1],[x,w]=Ct._getShiftLockedDelta(c,f,y,D(r,i),t[Q.CTRL_OR_CMD]?null:n.getEffectiveGridSize());Ct.movePoints(c,[{index:U,point:D(x+y[0],w+y[1]),isDragging:U===u}])}else{let U=Ct.createPointAt(c,f,r-o.pointerOffset.x,i-o.pointerOffset.y,t[Q.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),y=U[0]-h[0],x=U[1]-h[1];Ct.movePoints(c,d.map(w=>{let E=w===u?Ct.createPointAt(c,f,r-o.pointerOffset.x,i-o.pointerOffset.y,t[Q.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):D(c.points[w][0]+y,c.points[w][1]+x);return{index:w,point:E,isDragging:w===u}}))}if(xt(c,f)&&Xb(c,f,!1),Yl(c,!1)){let U=[];d[0]===0&&U.push(Ga(Ct.getPointGlobalCoordinates(c,c.points[0],f)));let y=d[d.length-1];y===c.points.length-1&&U.push(Ga(Ct.getPointGlobalCoordinates(c,c.points[y],f))),U.length&&s(c,U)}return!0}return!1}static handlePointerUp(t,n,r,i){var h;let s=i.getNonDeletedElementsMap(),o=i.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:f,pointerDownState:c}=n,d=Ct.getElement(a,s);if(!d)return n;let u={};if(f&&l){for(let g of l)if(g===0||g===d.points.length-1){Mf(d.points,r.zoom.value)&&Ct.movePoints(d,[{index:g,point:g===0?d.points[d.points.length-1]:d.points[0]}]);let U=$u(r)?Ka(Ga(Ct.getPointAtIndexGlobalCoordinates(d,g,s)),o,s,r.zoom,Fe(d),Fe(d)):null;u[g===0?"startBindingElement":"endBindingElement"]=U}}return{...n,...u,selectedPointsIndices:f||t.shiftKey?!f&&t.shiftKey&&((h=c.prevSelectedPointsIndices)!=null&&h.includes(c.lastClickedPoint))?l&&l.filter(g=>g!==c.lastClickedPoint):l:l!=null&&l.includes(c.lastClickedPoint)?[c.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,r,i,s){if(Fe(t))return i>=0&&i<t.points.length?qt(n,r)*s.value<Ct.POINT_HANDLE_SIZE/2:!1;let o=qt(n,r);return t.points.length>2&&t.roundness&&(o=PMe(t,r)),o*s.value<Ct.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,r,i,s){let o=zb(n,r);if(t.points.length>2&&t.roundness){let a=Rq(t,t.points[i]);if(a){let l=DMe(t,t.points[i],.5);o=Ct.getPointGlobalCoordinates(t,_q(a[0],a[1],a[2],a[3],l),s)}}return o}static getSegmentMidPointIndex(t,n,r,i){let s=Ct.getElement(t.elementId,i);if(!s)return-1;let o=Ct.getEditorMidPoints(s,i,n),a=0;for(;a<o.length;){if(Ct.arePointsEqual(r,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,r,i,s,o){var T;let a=n.state,l=o.getNonDeletedElementsMap(),f=o.getNonDeletedElements(),c={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return c;let{elementId:d}=s,u=Ct.getElement(d,l);if(!u)return c;let h=Ct.getSegmentMidpointHitCoords(s,i,a,l),g=null;if(h)g=Ct.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(ye(u,{points:[...u.points,Ct.createPointAt(u,l,i.x,i.y,t[Q.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),c.didAddPoint=!0),r.shouldCaptureIncrement(),c.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:h,index:g,added:!1}},selectedPointsIndices:[u.points.length-1],lastUncommittedPoint:null,endBindingElement:Ka(i,f,l,n.state.zoom,s.elbowed)},c.didAddPoint=!0,c;let U=Ct.getPointIndexUnderCursor(u,l,a.zoom,i.x,i.y);if(U>=0||h)c.hitElement=u;else{let{startBindingElement:R,endBindingElement:P}=s;$u(a)&&Yl(u)&&z7(u,R,P,l,o)}let[y,x,w,E]=gt(u,l),S=(y+w)/2,A=(x+E)/2,M=U>-1&&pe(D(u.x+u.points[U][0],u.y+u.points[U][1]),D(S,A),u.angle),C=U>-1||t.shiftKey?t.shiftKey||(T=s.selectedPointsIndices)!=null&&T.includes(U)?eIe([...s.selectedPointsIndices||[],U]):[U]:null;return c.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:U,lastClickedIsEndPoint:U===u.points.length-1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:h,index:g,added:!1}},selectedPointsIndices:C,pointerOffset:M?{x:i.x-M[0],y:i.y-M[1]}:{x:0,y:0}},c}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:rl(t,n)}static handlePointerMove(t,n,r,i,s){let o=i.state;if(!o.editingLinearElement)return null;let{elementId:a,lastUncommittedPoint:l}=o.editingLinearElement,f=Ct.getElement(a,s);if(!f)return o.editingLinearElement;let{points:c}=f,d=c[c.length-1];if(!t.altKey)return d===l&&Ct.deletePoints(f,[c.length-1]),{...o.editingLinearElement,lastUncommittedPoint:null};let u;if(z5(t)&&c.length>=2){let h=c[c.length-2],[g,U]=Ct._getShiftLockedDelta(f,s,h,D(n,r),t[Q.CTRL_OR_CMD]?null:i.getEffectiveGridSize());u=D(g+h[0],U+h[1])}else u=Ct.createPointAt(f,s,n-o.editingLinearElement.pointerOffset.x,r-o.editingLinearElement.pointerOffset.y,t[Q.CTRL_OR_CMD]||Fe(f)?null:i.getEffectiveGridSize());return d===l?Ct.movePoints(f,[{index:f.points.length-1,point:u}]):Ct.addPoints(f,[{point:u}]),{...o.editingLinearElement,lastUncommittedPoint:f.points[f.points.length-1]}}static getPointGlobalCoordinates(t,n,r){let[i,s,o,a]=gt(t,r),l=(i+o)/2,f=(s+a)/2,{x:c,y:d}=t;return pe(D(c+n[0],d+n[1]),D(l,f),t.angle)}static getPointsGlobalCoordinates(t,n){let[r,i,s,o]=gt(t,n),a=(r+s)/2,l=(i+o)/2;return t.points.map(f=>{let{x:c,y:d}=t;return pe(D(c+f[0],d+f[1]),D(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,r){let i=n<0?t.points.length+n:n,[s,o,a,l]=gt(t,r),f=(s+a)/2,c=(o+l)/2,d=t.points[i],{x:u,y:h}=t;return pe(d?D(u+d[0],h+d[1]):D(u,h),D(f,c),t.angle)}static pointFromAbsoluteCoords(t,n,r){if(Fe(t))return D(n[0]-t.x,n[1]-t.y);let[i,s,o,a]=gt(t,r),l=(i+o)/2,f=(s+a)/2,[c,d]=pe(D(n[0],n[1]),D(l,f),-t.angle);return D(c-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,r,i,s){let o=Ct.getPointsGlobalCoordinates(t,n),a=o.length;for(;--a>-1;){let l=o[a];if(qt(D(i,s),D(l[0],l[1]))*r.value<Ct.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,r,i,s){let o=Ir(r,i,s),[a,l,f,c]=gt(t,n),d=(a+f)/2,u=(l+c)/2,[h,g]=pe(D(o[0],o[1]),D(d,u),-t.angle);return D(h-t.x,g-t.y)}static getNormalizedPoints(t){let{points:n}=t,r=n[0][0],i=n[0][1];return{points:n.map(s=>D(s[0]-r,s[1]-i)),x:t.x+r,y:t.y+i}}static normalizePoints(t){ye(t,Ct.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){Gi(t.editingLinearElement,"Not currently editing a linear element");let{selectedPointsIndices:r,elementId:i}=t.editingLinearElement,s=Ct.getElement(i,n);Gi(s,"The linear element does not exist in the provided Scene"),Gi(r!=null,"There are no selected points to duplicate");let{points:o}=s,a=[],l=!1,f=-1,c=o.reduce((d,u,h)=>{if(++f,d.push(u),r.includes(h)){let g=o[h+1];g||(l=!0),d.push(g?D((u[0]+g[0])/2,(u[1]+g[1])/2):D(u[0],u[1])),a.push(f+1),++f}return d},[]);if(ye(s,{points:c}),l){let d=s.points[s.points.length-1];Ct.movePoints(s,[{index:s.points.length-1,point:D(d[0]+30,d[1]+30)}])}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:a}}}static deletePoints(t,n){let r=0,i=0;if(n.includes(0)){let o=t.points.find((a,l)=>!n.includes(l));o&&(r=o[0],i=o[1])}let s=t.points.reduce((o,a,l)=>(n.includes(l)||o.push(o.length?D(a[0]-r,a[1]-i):D(0,0)),o),[]);Ct._updatePoints(t,s,r,i)}static addPoints(t,n){let r=[...t.points,...n.map(i=>i.point)];Ct._updatePoints(t,r,0,0)}static movePoints(t,n,r){var c,d,u;let{points:i}=t,[s,o]=((c=n.find(({index:h})=>h===0))==null?void 0:c.point)??D(0,0),[a,l]=D(s-i[0][0],o-i[0][1]),f=Fe(t)?[((d=n.find(h=>h.index===0))==null?void 0:d.point)??i[0],((u=n.find(h=>h.index===i.length-1))==null?void 0:u.point)??i[i.length-1]]:i.map((h,g)=>{var y;let U=((y=n.find(x=>x.index===g))==null?void 0:y.point)??h;return D(U[0]-a,U[1]-l)});Ct._updatePoints(t,f,a,l,r,{isDragging:n.reduce((h,g)=>h||g.isDragging===!0,!1)})}static shouldAddMidpoint(t,n,r,i){let s=Ct.getElement(t.elementId,i);if(s&&Fe(s)||!s)return!1;let{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;let a=t.pointerDownState.origin,l=qt(D(a.x,a.y),D(n.x,n.y));return!(!r.editingLinearElement&&l<Uu/r.zoom.value)}static addMidpoint(t,n,r,i,s){let o=Ct.getElement(t.elementId,s);if(!o)return;let{segmentMidpoint:a}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},f=Ct.createPointAt(o,s,n.x,n.y,i&&!Fe(o)?r.getEffectiveGridSize():null),c=[...o.points.slice(0,a.index),f,...o.points.slice(a.index)];return ye(o,{points:c}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:a.index},l.selectedPointsIndices=[a.index],l}static _updatePoints(t,n,r,i,s,o){if(Fe(t)){let a={};(s==null?void 0:s.startBinding)!==void 0&&(a.startBinding=s.startBinding!==null&&Z4(s.startBinding)?s.startBinding:null),(s==null?void 0:s.endBinding)!==void 0&&(a.endBinding=s.endBinding!==null&&Z4(s.endBinding)?s.endBinding:null),a.points=Array.from(n),ye(t,a,!0,{isDragging:o==null?void 0:o.isDragging})}else{let a=nF(t,n),l=nF(t,t.points),f=(a[0]+a[2])/2,c=(a[1]+a[3])/2,d=(l[0]+l[2])/2,u=(l[1]+l[3])/2,h=d-f,g=u-c,U=pe(D(r,i),D(h,g),t.angle);ye(t,{...s,points:n,x:t.x+U[0],y:t.y+U[1]})}}static _getShiftLockedDelta(t,n,r,i,s){let o=Ct.getPointGlobalCoordinates(t,r,n);if(Fe(t))return[i[0]-o[0],i[1]-o[1]];let[a,l]=Ir(i[0],i[1],s),{width:f,height:c}=eA(o[0],o[1],a,l);return pe(D(f,c),D(0,0),-t.angle)}static moveFixedSegment(t,n,r,i,s){let o=Ct.getElement(t.elementId,s);if(!o||!Fe(o))return t;if(n&&n>0&&n<o.points.length){let a=gf(Qh(Ye(o.points[n],o.points[n-1]))),l=(o.fixedSegments??[]).reduce((u,h)=>(u[h.index]=h,u),{});l[n]={index:n,start:D(a?o.points[n-1][0]:r-o.x,a?i-o.y:o.points[n-1][1]),end:D(a?o.points[n][0]:r-o.x,a?i-o.y:o.points[n][1])};let f=Object.values(l).sort((u,h)=>u.index-h.index),c=f.map(u=>u.index).reduce((u,h)=>h<n?u+1:u,0);ye(o,{fixedSegments:f});let d=D(o.x+(o.fixedSegments[c].start[0]+o.fixedSegments[c].end[0])/2,o.y+(o.fixedSegments[c].start[1]+o.fixedSegments[c].end[1])/2);return{...t,segmentMidPointHoveredCoords:d,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:o.fixedSegments[c].index,value:d}}}}return t}static deleteFixedSegment(t,n){var r;ye(t,{fixedSegments:(r=t.fixedSegments)==null?void 0:r.filter(i=>i.index!==n)}),ye(t,{},!0)}};Z(cr,"POINT_HANDLE_SIZE",10),Z(cr,"getEditorMidPoints",(e,t,n)=>{let r=xt(e,t);return!Fe(e)&&!n.editingLinearElement&&e.points.length>2&&!r?[]:(yd.version===e.version&&yd.zoom===n.zoom.value||cr.updateEditorMidPointsCache(e,t,n),yd.points)}),Z(cr,"updateEditorMidPointsCache",(e,t,n)=>{let r=cr.getPointsGlobalCoordinates(e,t),i=0,s=[];for(;i<r.length-1;){if(cr.isSegmentTooShort(e,e.points[i],e.points[i+1],i,n.zoom)){s.push(null),i++;continue}let o=cr.getSegmentMidPoint(e,r[i],r[i+1],i+1,t);s.push(o),i++}yd.points=s,yd.version=e.version,yd.zoom=n.zoom.value}),Z(cr,"getSegmentMidpointHitCoords",(e,t,n,r)=>{let{elementId:i}=e,s=cr.getElement(i,r);if(!s)return null;let o=cr.getPointIndexUnderCursor(s,r,n.zoom,t.x,t.y);if(!Fe(s)&&o>=0||cr.getPointsGlobalCoordinates(s,r).length>=3&&!n.editingLinearElement&&!Fe(s))return null;let a=(cr.POINT_HANDLE_SIZE+1)/n.zoom.value,l=e.segmentMidPointHoveredCoords;if(l&&qt(D(l[0],l[1]),D(t.x,t.y))<=a)return l;let f=0,c=cr.getEditorMidPoints(s,r,n);for(;f<c.length;){if(c[f]!==null&&qt(c[f],D(t.x,t.y))<=a)return c[f];f++}return null}),Z(cr,"getBoundTextElementPosition",(e,t,n)=>{let r=cr.getPointsGlobalCoordinates(e,n);r.length<2&&ye(t,{isDeleted:!0});let i=0,s=0;if(e.points.length%2===1){let o=Math.floor(e.points.length/2),a=cr.getPointGlobalCoordinates(e,e.points[o],n);i=a[0]-t.width/2,s=a[1]-t.height/2}else{let o=e.points.length/2-1,a=yd.points[o];e.points.length===2&&(a=zb(r[0],r[1])),(!a||yd.version!==e.version)&&(a=cr.getSegmentMidPoint(e,r[o],r[o+1],o+1,n)),i=a[0]-t.width/2,s=a[1]-t.height/2}return{x:i,y:s}}),Z(cr,"getMinMaxXYWithBoundText",(e,t,n,r)=>{let[i,s,o,a]=n,l=(i+o)/2,f=(s+a)/2,{x:c,y:d}=cr.getBoundTextElementPosition(e,r,t),u=c+r.width,h=d+r.height,g=D(l,f),U=pe(D(i,s),g,e.angle),y=pe(D(o,s),g,e.angle),x=pe(D(c,d),g,-e.angle),w=pe(D(u,d),g,-e.angle),E=pe(D(c,h),g,-e.angle),S=pe(D(u,h),g,-e.angle);return U[0]<y[0]&&U[1]>=y[1]?(i=Math.min(i,E[0]),o=Math.max(o,Math.max(w[0],S[0])),s=Math.min(s,x[1]),a=Math.max(a,S[1])):U[0]>=y[0]&&U[1]>y[1]?(i=Math.min(i,S[0]),o=Math.max(o,Math.max(x[0],w[0])),s=Math.min(s,E[1]),a=Math.max(a,w[1])):U[0]>=y[0]?(i=Math.min(i,w[0]),o=Math.max(o,E[0]),s=Math.min(s,S[1]),a=Math.max(a,x[1])):U[1]<=y[1]&&(i=Math.min(i,Math.min(w[0],x[0])),o=Math.max(o,S[0]),s=Math.min(s,w[1]),a=Math.max(a,E[1])),[i,s,o,a,l,f]}),Z(cr,"getElementAbsoluteCoords",(e,t,n=!1)=>{let r,i,s,o,a;if(e.points.length<2||!Vn.get(e)){let{minX:d,minY:u,maxX:h,maxY:g}=e.points.reduce((U,[y,x])=>(U.minY=Math.min(U.minY,x),U.minX=Math.min(U.minX,y),U.maxX=Math.max(U.maxX,y),U.maxY=Math.max(U.maxY,x),U),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});i=d+e.x,s=u+e.y,o=h+e.x,a=g+e.y}else{let d=Vn.generateElementShape(e,null),u=$0(d[0]),[h,g,U,y]=F7(u);i=h+e.x,s=g+e.y,o=U+e.x,a=y+e.y}let l=(i+o)/2,f=(s+a)/2;if(r=[i,s,o,a,l,f],!n)return r;let c=xt(e,t);return c&&(r=cr.getMinMaxXYWithBoundText(e,t,[i,s,o,a],c)),r});var Be=cr,eIe=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,r)=>n-r),t.length?t:null},g6={},i9=(e,t)=>{let n=g6[e]||(g6[e]={height:t});return n.height=t,n},fQ=e=>{g6[e]&&delete g6[e]},tIe=e=>{var t;return((t=g6[e])==null?void 0:t.height)??null},ps=(e,t,n,r=!0)=>{let i,s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:(t==null?void 0:t.angle)??e.angle};s.text=e.text,(t||!e.autoResize)&&(i=t?Nf(t,e):e.width,s.text=f1(e.originalText,cn(e),i));let o=Xi(s.text,cn(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){let a=Y7(t,e),l=Nf(t,e);if(!Et(t)&&o.height>a){let u=Jh(o.height,t.type);ye(t,{height:u},r),i9(t.id,u)}if(o.width>l){let u=Jh(o.width,t.type);ye(t,{width:u},r)}let f={...e,...s},{x:c,y:d}=K7(t,f,n);s.x=c,s.y=d}ye(e,s,r)},dQ=(e,t,n)=>{let r=ct(e);t.forEach(i=>{let s=n.get(i.id),o=If(i);if(o){let a=n.get(o);if(a){let l=r.get(s);l&&ye(l,{boundElements:(i.boundElements||[]).filter(c=>c.id!==a&&c.id!==o).concat({type:"text",id:a})});let f=r.get(a);f&&je(f)&&ye(f,{containerId:l?s:null})}}})},Xb=(e,t,n,r=!1)=>{if(!If(e))return;fQ(e.id);let i=xt(e,t);if(i&&i.text){if(!e)return;let s=i.text,o=i.height,a=i.width,l=Nf(e,i),f=Y7(e,i),c=e.height;if(r||n!=="n"&&n!=="s"){s&&(s=f1(i.originalText,cn(i),l));let d=Xi(s,cn(i),i.lineHeight);o=d.height,a=d.width}if(o>f){c=Jh(o,e.type);let d=c-e.height,u=!Et(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-d:e.y;ye(e,{height:c,y:u})}ye(i,{text:s,width:a,height:o}),Et(e)||ye(i,K7(e,i,t))}},K7=(e,t,n)=>{if(Et(e))return Be.getBoundTextElementPosition(e,t,n);let r=nIe(e),i=Y7(e,t),s=Nf(e,t),o,a;return t.verticalAlign===ho.TOP?a=r.y:t.verticalAlign===ho.BOTTOM?a=r.y+(i-t.height):a=r.y+(i/2-t.height/2),t.textAlign===F2.LEFT?o=r.x:t.textAlign===F2.RIGHT?o=r.x+(s-t.width):o=r.x+(s/2-t.width/2),{x:o,y:a}},If=e=>{var t,n,r;return((t=e==null?void 0:e.boundElements)==null?void 0:t.length)&&((r=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(i=>i.type==="text"))==null?void 0:r.id)||null},xt=(e,t)=>{if(!e)return null;let n=If(e);return n&&t.get(n)||null},fi=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,eS=(e,t,n)=>{if(!Et(e))return{x:e.x+e.width/2,y:e.y+e.height/2};let r=Be.getPointsGlobalCoordinates(e,n);if(r.length%2===1){let o=Math.floor(e.points.length/2),a=Be.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}let i=e.points.length/2-1,s=Be.getEditorMidPoints(e,n,t)[i];return s||(s=Be.getSegmentMidPoint(e,r[i],r[i+1],i+1,n)),{x:s[0],y:s[1]}},nIe=e=>{let t=_r,n=_r;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},rIe=(e,t)=>!t||Et(t)?e.angle:t.angle,iIe=(e,t)=>e.some(n=>{if(Mn(n)){let r=fi(n,t);return!Et(r)}return!1}),sIe=(e,t)=>e.some(n=>{if(Mn(n)){let r=fi(n,t);return!Et(r)}return je(n)}),oIe=new Set(["rectangle","ellipse","diamond","arrow"]),aIe=e=>oIe.has(e.type),Jh=(e,t)=>{e=Math.ceil(e);let n=_r*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Nf=(e,t)=>{let{width:n}=e;if(Et(e)){let r=((t==null?void 0:t.fontSize)??$f)*zxe;return Math.max($xe*n,r)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-_r*2:e.type==="diamond"?Math.round(n/2)-_r*2:n-_r*2},Y7=(e,t)=>{let{height:n}=e;return Et(e)?n-_r*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-_r*2:e.type==="diamond"?Math.round(n/2)-_r*2:n-_r*2},lIe=(e,t=`

`)=>e.reduce((n,r)=>(je(r)&&n.push(r.text),n),[]).join(t),po=e=>(e=e.trim(),e&&ixe.sanitizeUrl(Qy(e))),uQ=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),hQ=e=>{if(e=po(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e},GC=[],_e=e=>(GC=GC.concat(e),e),pQ='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',cIe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',mQ='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',fIe=`data:${it.svg},${encodeURIComponent(`${pQ}${mQ}</svg>`)}`,dIe=`data:${it.svg},${encodeURIComponent(`${pQ}${cIe}${mQ}</svg>`)}`,Aa=e=>{e&&(e.style.cursor="")},an=(e,t)=>{e&&(e.style.cursor=t)},El,fF,gQ=(e,t)=>{let n=()=>{let r=t===Nt.DARK;El=document.createElement("canvas"),El.theme=t,El.height=20,El.width=20;let i=El.getContext("2d");i.lineWidth=1,i.beginPath(),i.arc(El.width/2,El.height/2,5,0,2*Math.PI),i.fillStyle=r?ai.black:ai.white,i.fill(),i.strokeStyle=r?ai.white:ai.black,i.stroke(),fF=El.toDataURL(it.svg)};(!El||El.theme!==t)&&n(),an(e,`url(${fF}) ${20/2} ${20/2}, auto`)},Il=(e,t)=>{if(e)if(t.activeTool.type==="selection")Aa(e);else if(o6(t))e.style.cursor=rn.GRAB;else if(Rl(t))gQ(e,t.theme);else if(t.activeTool.type==="laser"){let n=t.theme===Nt.LIGHT?fIe:dIe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=rn.AUTO):e.style.cursor=rn.CROSSHAIR},uIe=new cZ(Date.now()),hIe=0,fc=()=>Math.floor(uIe.next()*2**31),oa=()=>Af()?`id${hIe++}`:mT(),ol=(e,{x:t,y:n,strokeColor:r=Qn.strokeColor,backgroundColor:i=Qn.backgroundColor,fillStyle:s=Qn.fillStyle,strokeWidth:o=Qn.strokeWidth,strokeStyle:a=Qn.strokeStyle,roughness:l=Qn.roughness,opacity:f=Qn.opacity,width:c=0,height:d=0,angle:u=0,groupIds:h=[],frameId:g=null,index:U=null,roundness:y=null,boundElements:x=null,link:w=null,locked:E=Qn.locked,...S})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||c<-1e6||c>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:c,height:d,points:S.points}),{id:S.id||oa(),type:e,x:t,y:n,width:c,height:d,angle:u,strokeColor:r,backgroundColor:i,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:f,groupIds:h,frameId:g,index:U,roundness:y,seed:S.seed??fc(),version:S.version||1,versionNonce:S.versionNonce??0,isDeleted:!1,boundElements:x,updated:I6(),link:w,locked:E,customData:S.customData}),dc=e=>ol(e.type,e),dF=e=>ol("embeddable",e),pIe=e=>({...ol("iframe",e)}),XT=e=>yt({...ol("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),XC=e=>yt({...ol("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),bQ=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),bo=e=>{let t=e.fontFamily||F0,n=e.fontSize||$f,r=e.lineHeight||qh(t),i=f6(e.text),s=Xi(i,cn({fontFamily:t,fontSize:n}),r),o=e.textAlign||Fb,a=e.verticalAlign||B4,l=bQ({textAlign:o,verticalAlign:a},s),f={...ol("text",e),text:i,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??i,autoResize:e.autoResize??!0,lineHeight:r};return yt(f,{})},mIe=(e,t,n)=>{let{width:r,height:i}=Xi(n,cn(e),e.lineHeight);e.autoResize||(r=e.width);let{textAlign:s,verticalAlign:o}=e,a,l;if(s==="center"&&o===ho.MIDDLE&&!e.containerId&&e.autoResize){let f=Xi(e.text,cn(e),e.lineHeight),c=bQ(e,{width:r-f.width,height:i-f.height});a=e.x-c.x,l=e.y-c.y}else{let[f,c,d,u]=gt(e,t),[h,g,U,y]=v0(e,r,i,!1),x=(f-h)/2,w=(c-g)/2,E=(d-U)/2,S=(u-y)/2;[a,l]=gIe({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,x,w,E,S)}return{width:r,height:i,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},gIe=(e,t,n,r,i,s,o,a)=>{let l=Math.cos(r),f=Math.sin(r);return e.e&&e.w?t+=i+o:e.e?(t+=i*(1+l),n+=i*f,t+=o*(1-l),n+=o*-f):e.w&&(t+=i*(1-l),n+=i*-f,t+=o*(1+l),n+=o*f),e.n&&e.s?n+=s+a:e.n?(t+=s*f,n+=s*(1-l),t+=a*-f,n+=a*(1+l)):(t+=s*-f,n+=s*(1+l),t+=a*f,n+=a*(1-l)),[t,n]},UQ=(e,t,n,r=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(r=f1(r,cn(e),t?Nf(t,e):e.width));let i=mIe(e,n,r);return{text:r,...i}},bIe=e=>({...ol(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),Sh=e=>({...ol(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),KT=e=>e.elbowed?{...ol(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...ol(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},yQ=e=>({...ol("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),s9=(e,t=0)=>{if(e==null||typeof e!="object")return e;let n=Object.prototype.toString.call(e);if(n==="[object Object]"){let r=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(let i in e)if(e.hasOwnProperty(i)){if(t===0&&(i==="shape"||i==="canvas"))continue;r[i]=s9(e[i],t+1)}return r}if(Array.isArray(e)){let r=e.length,i=new Array(r);for(;r--;)i[r]=s9(e[r],t+1);return i}return vt.DEV&&n!=="[object Object]"&&n!=="[object Array]"&&n.startsWith("[object ")&&console.warn(`_deepCloneElement: unexpected object type ${n}. This value will not be cloned!`),e},d1=e=>s9(e),xQ=(e,t)=>{Object.defineProperty(e,Wxe,{value:t,writable:!1,enumerable:!1})},o9=()=>oa(),vQ=(e,t,n,r)=>{let i=d1(n);return Af()&&xQ(i,n.id),i.id=o9(),i.boundElements=null,i.updated=I6(),i.seed=fc(),i.groupIds=FTe(i.groupIds,e,s=>(t.has(s)||t.set(s,o9()),t.get(s))),r&&(i=Object.assign(i,r)),i},wQ=(e,t)=>{let n=[],r=ct(e),i=new Map,s=a=>{if(i.has(a))return i.get(a);if(r.has(a)){let l=o9();return i.set(a,l),l}return null},o=new Map;for(let a of e){let l=s9(a);if(l.id=s(a.id),Af()&&xQ(l,a.id),t!=null&&t.randomizeSeed&&(l.seed=fc(),ex(l)),l.groupIds&&(l.groupIds=l.groupIds.map(f=>(o.has(f)||o.set(f,o9()),o.get(f)))),"containerId"in l&&l.containerId){let f=s(l.containerId);l.containerId=f}if("boundElements"in l&&l.boundElements&&(l.boundElements=l.boundElements.reduce((f,c)=>{let d=s(c.id);return d&&f.push({...c,id:d}),f},[])),"endBinding"in l&&l.endBinding){let f=s(l.endBinding.elementId);l.endBinding=f?{...l.endBinding,elementId:f}:null}if("startBinding"in l&&l.startBinding){let f=s(l.startBinding.elementId);l.startBinding=f?{...l.startBinding,elementId:f}:null}l.frameId&&(l.frameId=s(l.frameId)),n.push(l)}return n},YT=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:r,reconciliationContext:i})=>{let s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(let[l,f]of a.entries()){let c=a[l-1],d=a[l+1];if(KC(f,c,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&sa(e[l])){let u=e[l],h=xt(u,ct(e));h&&h.index<=u.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(u)}"`)}}if(s.length){let l=new PEe,f=[];if(i&&(f.push("Additional reconciliation context:"),f.push(i.localElements.map(c=>o(c))),f.push(i.remoteElements.map(c=>o(c)))),r||console.error(s.join(`

`),l.stack,e.map(c=>o(c)),...f),t)throw l}},UIe=e=>e.sort((t,n)=>uF(t)&&uF(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),uc=(e,t)=>{try{let n=yIe(e,t),r=EQ(e,n),i=e.map(s=>r.has(s)?{...s,...r.get(s)}:s);YT(i,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(let[s,o]of r)ye(s,o,!1)}catch{Rf(e)}return e},Rf=e=>{let t=xIe(e),n=EQ(e,t);for(let[r,i]of n)ye(r,i,!1);return e},yIe=(e,t)=>{let n=[],r=0;for(;r<e.length;)if(t.has(e[r].id)){let i=[r-1,r];for(;++r<e.length&&t.has(e[r].id);)i.push(r);i.push(r),n.push(i)}else r++;return n},xIe=e=>{let t=[],n,r,i=-1,s=0,o=f=>{var u;let c=e[i]?e[i].index:void 0,d=(u=e[f-1])==null?void 0:u.index;return!c&&d||c&&d&&d>c?[d,f-1]:[c,i]},a=f=>{var u;let c=e[s]?e[s].index:void 0;if(c&&f<s)return[c,s];let d=s;for(;++d<e.length;){let h=(u=e[d])==null?void 0:u.index;if(!c&&h||c&&h&&h>c)return[h,d]}return[void 0,d]},l=0;for(;l<e.length;){let f=e[l].index;if([n,i]=o(l),[r,s]=a(l),KC(f,n,r))l++;else{let c=[i,l];for(;++l<e.length;){let d=e[l].index,[u,h]=o(l),[g,U]=a(l);if(KC(d,u,g))break;[n,i]=[u,h],[r,s]=[g,U],c.push(l)}c.push(s),t.push(c)}}return t},KC=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,EQ=(e,t)=>{var r,i;let n=new Map;for(let s of t){let o=s.shift(),a=s.pop(),l=AC((r=e[o])==null?void 0:r.index,(i=e[a])==null?void 0:i.index,s.length);for(let f=0;f<s.length;f++){let c=e[s[f]];n.set(c,{index:l[f]})}}return n},uF=e=>!!e.index,Ur=class Cl{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,r,i){let s=r&&i!=="inserted"?r(t):t,o=r&&i!=="deleted"?r(n):n;return new Cl(s,o)}static calculate(t,n,r,i){if(t===n)return Cl.empty();let s={},o={};for(let f of this.distinctKeysIterator("full",t,n))s[f]=t[f],o[f]=n[f];let[a,l]=i?i(s,o):[s,o];return Cl.create(a,l,r)}static empty(){return new Cl({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,r){let i={...t};for(let s of Object.keys(r))delete i[s];return{...i,...n}}static mergeArrays(t,n,r,i){return Object.values(Cl.mergeObjects(Oc(t??[],i),Oc(n??[],i),Oc(r??[],i)))}static diffObjects(t,n,r,i){if(!(!t[r]&&!n[r])&&(typeof t[r]=="object"||typeof n[r]=="object")){let s=t[r]??{},o=n[r]??{},a=Cl.getLeftDifferences(s,o).reduce((f,c)=>(f[c]=i(s[c]),f),{}),l=Cl.getRightDifferences(s,o).reduce((f,c)=>(f[c]=i(o[c]),f),{});Object.keys(a).length||Object.keys(l).length?(Reflect.set(t,r,a),Reflect.set(n,r,l)):(Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r))}}static diffArrays(t,n,r,i){if(!(!t[r]&&!n[r])&&(Array.isArray(t[r])||Array.isArray(n[r]))){let s=Array.isArray(t[r])?t[r]:[],o=Array.isArray(n[r])?n[r]:[],a=Oc(Cl.getLeftDifferences(Oc(s,i),Oc(o,i))),l=Oc(Cl.getRightDifferences(Oc(s,i),Oc(o,i)));if(Object.keys(a).length||Object.keys(l).length){let f=s.filter(d=>a[i?i(d):String(d)]),c=o.filter(d=>l[i?i(d):String(d)]);Reflect.set(t,r,f),Reflect.set(n,r,c)}else Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r)}}static isLeftDifferent(t,n,r=!1){return!!this.distinctKeysIterator("left",t,n,r).next().value}static isRightDifferent(t,n,r=!1){return!!this.distinctKeysIterator("right",t,n,r).next().value}static getLeftDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("left",t,n,r))}static getRightDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("right",t,n,r))}static*distinctKeysIterator(t,n,r,i=!1){if(n===r)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(r):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(r)])):Xh(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(let o of s){let a=n[o],l=r[o];if(a!==l){if(!i&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&Si(a,l))continue;yield o}}}},hF=class Ts{constructor(t){this.delta=t}static calculate(t,n){let r=Ur.calculate(t,n,void 0,Ts.postProcess);return new Ts(r)}static empty(){return new Ts(Ur.create({},{}))}inverse(){let t=Ur.create(this.delta.inserted,this.delta.deleted);return new Ts(t)}applyTo(t,n){try{let{selectedElementIds:r={},selectedGroupIds:i={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...f}=this.delta.inserted,c=Ur.mergeObjects(t.selectedElementIds,s,r),d=Ur.mergeObjects(t.selectedGroupIds,o,i),u=a&&n.has(a)?new Be(n.get(a)):null,h=l&&n.has(l)?new Be(n.get(l)):null,g={...t,...f,selectedElementIds:c,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?u:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},U=this.filterInvisibleChanges(t,g,n);return[g,U]}catch(r){if(console.error("Couldn't apply appstate change",r),vt.DEV||vt.MODE===Fs.TEST)throw r;return[t,!1]}}isEmpty(){return Ur.isEmpty(this.delta)}static postProcess(t,n){try{Ur.diffObjects(t,n,"selectedElementIds",r=>!0),Ur.diffObjects(t,n,"selectedGroupIds",r=>r??!1)}catch(r){if(console.error("Couldn't postprocess appstate change deltas."),vt.DEV||vt.MODE===Fs.TEST)throw r}finally{return[t,n]}}filterInvisibleChanges(t,n,r){let i=a9(t),s=a9(n),o=Ur.isRightDifferent(Ts.stripElementsProps(i),Ts.stripElementsProps(s)),a=Ur.isRightDifferent(Ts.stripStandaloneProps(i),Ts.stripStandaloneProps(s));if(!o&&!a)return!1;let l={value:o};if(a){let f=Ur.getRightDifferences(Ts.stripStandaloneProps(i),Ts.stripStandaloneProps(s)),c=new Set;(f.includes("editingGroupId")||f.includes("selectedGroupIds"))&&(c=HTe(r));for(let d of f)switch(d){case"selectedElementIds":n[d]=Ts.filterSelectedElements(n[d],r,l);break;case"selectedGroupIds":n[d]=Ts.filterSelectedGroups(n[d],c,l);break;case"croppingElementId":{let U=n[d],y=U&&r.get(U);y&&!y.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":let u=n[d];u?c.has(u)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":let h=Ts.convertToAppStateKey(d),g=n[h];if(!g)l.value=!0;else{let U=r.get(g.elementId);U&&!U.isDeleted?l.value=!0:n[h]=null}break;default:Xh(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,r){let i=Object.keys(t);if(!i.length)return r.value=!0,t;let s={...t};for(let o of i){let a=n.get(o);a&&!a.isDeleted?r.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,r){if(!Object.keys(t).length)return r.value=!0,t;let i={...t};for(let s of Object.keys(i))n.has(s)?r.value=!0:delete i[s];return i}static stripElementsProps(t){let{editingGroupId:n,selectedGroupIds:r,selectedElementIds:i,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,...l}=t;return l}static stripStandaloneProps(t){let{name:n,viewBackgroundColor:r,...i}=t;return i}},Md=class Fn{constructor(t,n,r){this.added=t,this.removed=n,this.updated=r}static create(t,n,r,i={shouldRedistribute:!1}){let s;if(i.shouldRedistribute){let o=new Map,a=new Map,l=new Map,f=[...t,...n,...r];for(let[c,d]of f)this.satisfiesAddition(d)?o.set(c,d):this.satisfiesRemoval(d)?a.set(c,d):l.set(c,d);s=new Fn(o,a,l)}else s=new Fn(t,n,r);return(vt.DEV||vt.MODE===Fs.TEST)&&(Fn.validate(s,"added",this.satisfiesAddition),Fn.validate(s,"removed",this.satisfiesRemoval),Fn.validate(s,"updated",this.satisfiesUpdate)),s}static validate(t,n,r){for(let[i,s]of t[n].entries())if(!r(s))throw console.error(`Broken invariant for "${n}" delta, element "${i}", delta:`,s),new Error(`ElementsChange invariant broken for element "${i}".`)}static calculate(t,n){if(t===n)return Fn.empty();let r=new Map,i=new Map,s=new Map;for(let o of t.values())if(!n.get(o.id)){let a={...o,isDeleted:!1},l={isDeleted:!0},f=Ur.create(a,l,Fn.stripIrrelevantProps);i.set(o.id,f)}for(let o of n.values()){let a=t.get(o.id);if(!a){let l={isDeleted:!0},f={...o,isDeleted:!1},c=Ur.create(l,f,Fn.stripIrrelevantProps);r.set(o.id,c);continue}if(a.versionNonce!==o.versionNonce){let l=Ur.calculate(a,o,Fn.stripIrrelevantProps,Fn.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?r.set(o.id,l):i.set(o.id,l);continue}Ur.isEmpty(l)||s.set(o.id,l)}}return Fn.create(r,i,s)}static empty(){return Fn.create(new Map,new Map,new Map)}inverse(){let t=s=>{let o=new Map;for(let[a,l]of s.entries())o.set(a,Ur.create(l.inserted,l.deleted));return o},n=t(this.added),r=t(this.removed),i=t(this.updated);return Fn.create(r,n,i)}isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}applyLatestChanges(t){let n=a=>l=>{let f={};for(let c of Object.keys(l))switch(c){case"boundElements":f[c]=l[c];break;default:f[c]=a[c]}return f},r=a=>{let l=new Map;for(let[f,c]of a.entries()){let d=t.get(f);if(d){let u=Ur.create(c.deleted,c.inserted,n(d),"inserted");l.set(f,u)}else l.set(f,c)}return l},i=r(this.added),s=r(this.removed),o=r(this.updated);return Fn.create(i,s,o,{shouldRedistribute:!0})}applyTo(t,n){let r=ra(new Map(t)),i,s={containsVisibleDifference:!1,containsZindexDifference:!1};try{let o=Fn.createApplier(r,n,s),a=o(this.added),l=o(this.removed),f=o(this.updated),c=this.resolveConflicts(t,r);i=new Map([...a,...l,...f,...c])}catch(o){if(console.error("Couldn't apply elements change",o),vt.DEV||vt.MODE===Fs.TEST)throw o;return[t,!0]}try{Fn.redrawTextBoundingBoxes(r,i),r=Fn.reorderElements(r,i,s),Fn.redrawBoundArrows(r,i)}catch(o){if(console.error("Couldn't mutate elements after applying elements change",o),vt.DEV||vt.MODE===Fs.TEST)throw o}finally{return[r,s.containsVisibleDifference]}}static applyDelta(t,n,r={containsVisibleDifference:!0,containsZindexDifference:!0}){var o,a;let{boundElements:i,...s}=n.inserted;if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){let l=Ur.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,f=>f.id);Object.assign(s,{boundElements:l})}if(Zt(t)){let l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(s,{crop:l.inserted.crop??null})}if(!r.containsVisibleDifference){let{index:l,...f}=s,c=Fn.checkForVisibleDifference(t,f);r.containsVisibleDifference=c}return r.containsZindexDifference||(r.containsZindexDifference=n.deleted.index!==n.inserted.index),yt(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:Ur.isRightDifferent(t,n)}resolveConflicts(t,n){let r=new Map,i=(f,c)=>{let d=n.get(f.id);if(!d)return;let u;t.get(f.id)===d?u=yt(d,c):u=ye(d,c),r.set(u.id,u),n.set(u.id,u)};for(let[f]of this.removed)Fn.unbindAffected(t,n,f,i);for(let[f]of this.added)Fn.rebindAffected(t,n,f,i);for(let[f]of Array.from(this.updated).filter(([c,d])=>Object.keys({...d.deleted,...d.inserted}).find(u=>_Te.has(u)))){let c=n.get(f);!c||c.isDeleted||Fn.rebindAffected(t,n,f,i)}let s=new Map(Array.from(t).filter(([f])=>r.has(f))),{added:o,removed:a,updated:l}=Fn.calculate(s,r);for(let[f,c]of o)this.added.set(f,c);for(let[f,c]of a)this.removed.set(f,c);for(let[f,c]of l)this.updated.set(f,c);return r}static unbindAffected(t,n,r,i){let s=()=>t.get(r),o=()=>n.get(r);Cp.unbindAffected(n,s(),i),Cp.unbindAffected(n,o(),i),Ap.unbindAffected(n,s(),i),Ap.unbindAffected(n,o(),i)}static rebindAffected(t,n,r,i){let s=()=>t.get(r),o=()=>n.get(r);Cp.unbindAffected(n,s(),i),Cp.rebindAffected(n,o(),i),Ap.unbindAffected(n,s(),(a,l)=>{je(a)&&i(a,l)}),Ap.rebindAffected(n,o(),i)}static redrawTextBoundingBoxes(t,n){let r=new Map;for(let i of n.values()){if(Mn(i)){let{containerId:s}=i,o=s?t.get(s):void 0;o&&r.set(o.id,{container:o,boundText:i})}if(sa(i)){let s=If(i),o=s?t.get(s):void 0;o&&r.set(i.id,{container:i,boundText:o})}}for(let{container:i,boundText:s}of r.values())i.isDeleted||s.isDeleted||ps(s,i,t,!1)}static redrawBoundArrows(t,n){for(let r of n.values())!r.isDeleted&&il(r)&&zs(r,t,{changedElements:n})}static reorderElements(t,n,r){if(!r.containsZindexDifference)return t;let i=Array.from(t.values()),s=UIe([...i]),o=Ur.getRightDifferences(i,s,!0).reduce((a,l)=>{let f=i[Number(l)];return f&&n.has(f.id)&&a.set(f.id,f),a},new Map);return!r.containsVisibleDifference&&o.size&&(r.containsVisibleDifference=!0),ct(uc(s,o))}static postProcess(t,n){try{Ur.diffArrays(t,n,"boundElements",r=>r.id)}catch(r){if(console.error("Couldn't postprocess elements change deltas."),vt.DEV||vt.MODE===Fs.TEST)throw r}finally{return[t,n]}}static stripIrrelevantProps(t){let{id:n,updated:r,version:i,versionNonce:s,seed:o,...a}=t;return a}};Z(Md,"satisfiesAddition",({deleted:e,inserted:t})=>e.isDeleted===!0&&!t.isDeleted),Z(Md,"satisfiesRemoval",({deleted:e,inserted:t})=>!e.isDeleted&&t.isDeleted===!0),Z(Md,"satisfiesUpdate",({deleted:e,inserted:t})=>!!e.isDeleted==!!t.isDeleted),Z(Md,"createApplier",(e,t,n)=>{let r=Md.createGetter(e,t,n);return i=>Array.from(i.entries()).reduce((s,[o,a])=>{let l=r(o,a.inserted);if(l){let f=Md.applyDelta(l,a,n);e.set(f.id,f),s.set(f.id,f)}return s},new Map)}),Z(Md,"createGetter",(e,t,n)=>(r,i)=>{let s=e.get(r);return s||(s=t.get(r),s&&(n.containsZindexDifference=!0,(i.isDeleted===!1||i.isDeleted!==!0&&s.isDeleted===!1)&&(n.containsVisibleDifference=!0))),s});var pF=Md,_l=class{constructor(){Z(this,"subscribers",[])}on(...e){let t=e.flat().filter(n=>typeof n=="function");return this.subscribers.push(...t),()=>this.off(t)}once(...e){let t=e.flat().filter(r=>typeof r=="function");t.push(()=>n());let n=this.on(...t);return n}off(...e){let t=e.flat();this.subscribers=this.subscribers.filter(n=>!t.includes(n))}trigger(...e){for(let t of this.subscribers)t(...e);return this}clear(){this.subscribers=[]}},SQ="__observedAppState",a9=e=>{var n,r;let t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((r=e.selectedLinearElement)==null?void 0:r.elementId)||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,SQ,{value:!0,enumerable:!1}),t},vIe=e=>!!Reflect.get(e,SQ),me={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"},wIe=class{constructor(e,t){this.elementsChange=e,this.appStateChange=t}},EIe=class{constructor(){Z(this,"onStoreIncrementEmitter",new _l),Z(this,"scheduledActions",new Set),Z(this,"_snapshot",mF.empty()),Z(this,"shouldCaptureIncrement",()=>{this.scheduleAction(me.IMMEDIATELY)}),Z(this,"shouldUpdateSnapshot",()=>{this.scheduleAction(me.NEVER)}),Z(this,"scheduleAction",e=>{this.scheduledActions.add(e),this.satisfiesScheduledActionsInvariant()}),Z(this,"commit",(e,t)=>{try{this.scheduledActions.has(me.IMMEDIATELY)?this.captureIncrement(e,t):this.scheduledActions.has(me.NEVER)&&this.updateSnapshot(e,t)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}}),Z(this,"captureIncrement",(e,t)=>{let n=this.snapshot,r=this.snapshot.maybeClone(e,t);if(n!==r){let i=r.meta.didElementsChange?pF.calculate(n.elements,r.elements):pF.empty(),s=r.meta.didAppStateChange?hF.calculate(n.appState,r.appState):hF.empty();(!i.isEmpty()||!s.isEmpty())&&this.onStoreIncrementEmitter.trigger(new wIe(i,s)),this.snapshot=r}}),Z(this,"updateSnapshot",(e,t)=>{let n=this.snapshot.maybeClone(e,t);this.snapshot!==n&&(this.snapshot=n)}),Z(this,"filterUncomittedElements",(e,t)=>{for(let[n,r]of e.entries()){if(!t.get(n))continue;let i=this.snapshot.elements.get(n);i?i.version<r.version&&t.set(n,i):t.delete(n)}return t}),Z(this,"clear",()=>{this.snapshot=mF.empty(),this.scheduledActions=new Set}),Z(this,"satisfiesScheduledActionsInvariant",()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){let e=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;if(console.error(e,this.scheduledActions.values()),vt.DEV||vt.MODE===Fs.TEST)throw new Error(e)}})}get snapshot(){return this._snapshot}set snapshot(e){this._snapshot=e}},mF=class YC{constructor(t,n,r={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t,this.appState=n,this.meta=r}static empty(){return new YC(new Map,a9(lc()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,n){let r=this.maybeCreateElementsSnapshot(t),i=this.maybeCreateAppStateSnapshot(n),s=!1,o=!1;return this.elements!==r&&(s=!0),this.appState!==i&&(o=!0),!s&&!o?this:new YC(r,i,{didElementsChange:s,didAppStateChange:o})}maybeCreateAppStateSnapshot(t){if(!t)return this.appState;let n=vIe(t)?t:a9(t);return this.detectChangedAppState(n)?n:this.appState}detectChangedAppState(t){return!Si(this.appState,t,{selectedElementIds:Si,selectedGroupIds:Si})}maybeCreateElementsSnapshot(t){return t?this.detectChangedElements(t)?this.createElementsSnapshot(t):this.elements:this.elements}detectChangedElements(t){if(this.elements===t)return!1;if(this.elements.size!==t.size)return!0;let n=Array.from(t.keys());for(let r=n.length-1;r>=0;r--){let i=this.elements.get(n[r]),s=t.get(n[r]);if(!i||!s||i.id!==s.id||i.versionNonce!==s.versionNonce)return!0}return!1}createElementsSnapshot(t){let n=new Map;for(let[r,i]of this.elements.entries())t.get(r)?n.set(r,i):n.set(r,yt(i,{isDeleted:!0}));for(let[r,i]of t.entries()){let s=n.get(r);(!s||s&&s.versionNonce!==i.versionNonce)&&n.set(r,d1(i))}return n}},Sl=new Map,SIe=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,kIe=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,CIe=/^https:\/\/(?:www\.)?figma\.com/,gF=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,AIe=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,bF=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,MIe=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,TIe=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,IIe=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,UF=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,yF=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,NIe=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,ZC=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com"]),xF=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com"]),H5=e=>`<html><body>${e}</body></html>`,Mp=e=>{if(!e)return null;if(Sl.has(e))return Sl.get(e);let t=e,n=xF.has(qC(e,xF)||""),r="generic",i={w:560,h:840},s=e.match(SIe);if(s!=null&&s[2]){let l=s[3]?`&start=${s[3]}`:"",f=e.includes("shorts");switch(r="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${l}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${l}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${l}`;break}return i=f?{w:315,h:560}:{w:560,h:315},Sl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}}let o=e.match(kIe);if(o!=null&&o[1]){let l=o==null?void 0:o[1],f=/^\d+$/.test(l)?void 0:new URIError("Invalid embed link format");return r="video",e=`https://player.vimeo.com/video/${l}?api=1`,i={w:560,h:315},Sl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,error:f,sandbox:{allowSameOrigin:n}}}if(e.match(CIe))return r="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,i={w:550,h:550},Sl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};let a=e.match(TIe);if(a)return e=a[1]==="embed"?a[0]:a[0].replace("/v","/embed"),Sl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};if(bF.test(e)){let l=e.match(bF)[1],f=Qy(`https://twitter.com/x/status/${l}`),c={type:"document",srcdoc:d=>H5(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${d}"><a href="${f}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return Sl.set(t,c),c}if(yF.test(e)){let[,l,f,c]=e.match(yF),d=Qy(`https://reddit.com/r/${l}/comments/${f}/${c}`),u={type:"document",srcdoc:h=>H5(`<blockquote class="reddit-embed-bq" data-embed-theme="${h}"><a href="${d}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return Sl.set(t,u),u}if(gF.test(e)){let[,l,f]=e.match(gF),c=Qy(`https://gist.github.com/${l}/${f}`),d={type:"document",srcdoc:()=>H5(`
          <script src="${c}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return Sl.set(e,d),d}return Sl.set(e,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}},kQ=e=>{let t;_d(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;let n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),r=$n.Helvetica,i=cn({fontSize:n,fontFamily:r});return bo({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:r,fontSize:n,text:f1(t,i,e.width-20),textAlign:"center",verticalAlign:ho.MIDDLE,angle:e.angle??0})};_e({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,r)=>{let i=yr(t,{type:"embeddable"});return Il(r.canvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:yr(t,{type:"embeddable"})},captureUpdate:me.EVENTUALLY}}});var qC=(e,t)=>{try{let{hostname:n}=new URL(e),r=n.replace(/^www\./,"");if(t instanceof Set){if(ZC.has(r))return r;let s=r.replace(/^([^.]+)/,"*");return ZC.has(s)?s:null}let i=t.replace(/^www\./,"");if(r===i)return i}catch{}return null},RIe=e=>{let t=e.match(MIe);if(t&&t.length===2)return t[1];let n=e.match(NIe);if(n&&n.length===2)return n[1];let r=e.match(AIe);if(r&&r.length===2)return r[1];if(UF.test(e))return`https://giphy.com/embed/${UF.exec(e)[1]}`;let i=e.match(IIe);return i&&i.length===2?i[1]:e},s3=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){let n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(let n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(qC(e,n))return!0;return!1}}return!!qC(e,ZC)},$g=(e,t,n)=>{let r={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(r)},zg=(e,t,n,r,i)=>{if(!r.enabled||!r.clip)return null;let s=Hs(e,i);if(s){let o=t.ownerDocument.createElementNS(Ht,"g");return o.setAttributeNS(Ht,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},o3=(e,t,n,r,i,s,o,a)=>{var E;let l={x:s,y:o},[f,c,d,u]=gt(e,t),h=(d-f)/2-(e.x-f),g=(u-c)/2-(e.y-c);if(je(e)){let S=fi(e,t);if(Et(S)){let[A,M,C,T]=gt(S,t),R=Be.getBoundTextElementPosition(S,e,t);h=(C-A)/2-(R.x-A),g=(T-M)/2-(R.y-M),s=s+R.x-e.x,o=o+R.y-e.y}}let U=180*e.angle/Math.PI,y=r;if(e.link){let S=r.ownerDocument.createElementNS(Ht,"a");S.setAttribute("href",po(e.link)),y.appendChild(S),y=S}let x=(S,A)=>{Af()&&S.setAttribute("data-id",A.id),y.appendChild(S)},w=(((E=Hs(e,t))==null?void 0:E.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{let S=Vn.generateElementShape(e,null),A=$g(n,S,jg);w!==1&&(A.setAttribute("stroke-opacity",`${w}`),A.setAttribute("fill-opacity",`${w}`)),A.setAttribute("stroke-linecap","round"),A.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`);let M=zg(e,y,[A],a.frameRendering,t);x(M||A,e);break}case"iframe":case"embeddable":{let S=Vn.generateElementShape(e,a),A=$g(n,S,jg),M=e.opacity/100;M!==1&&(A.setAttribute("stroke-opacity",`${M}`),A.setAttribute("fill-opacity",`${M}`)),A.setAttribute("stroke-linecap","round"),A.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`),x(A,e);let C=kQ(e);o3(C,t,n,y,i,C.x+l.x-e.x,C.y+l.y-e.y,a);let T=$g(n,S,jg);for(T.setAttribute("stroke-linecap","round"),T.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`);T.firstChild;)T.removeChild(T.firstChild);let R=Qa(Math.min(e.width,e.height),e),P=Mp(hQ(e.link||""));if(a.renderEmbeddables===!1||(P==null?void 0:P.type)==="document"){let _=r.ownerDocument.createElementNS(Ht,"a");_.setAttribute("href",po(e.link||"")),_.setAttribute("target","_blank"),_.setAttribute("rel","noopener noreferrer"),_.style.borderRadius=`${R}px`,T.appendChild(_)}else{let _=r.ownerDocument.createElementNS(Ht,"foreignObject");_.style.width=`${e.width}px`,_.style.height=`${e.height}px`,_.style.border="none";let O=_.ownerDocument.createElementNS(Ht,"div");O.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),O.style.width="100%",O.style.height="100%";let F=O.ownerDocument.createElement("iframe");F.src=(P==null?void 0:P.link)??"",F.style.width="100%",F.style.height="100%",F.style.border="none",F.style.borderRadius=`${R}px`,F.style.top="0",F.style.left="0",F.allowFullscreen=!0,O.appendChild(F),_.appendChild(O),T.appendChild(_)}x(T,e);break}case"line":case"arrow":{let S=xt(e,t),A=r.ownerDocument.createElementNS(Ht,"mask");if(S){A.setAttribute("id",`mask-${e.id}`);let T=r.ownerDocument.createElementNS(Ht,"rect");s=s||0,o=o||0,T.setAttribute("x","0"),T.setAttribute("y","0"),T.setAttribute("fill","#fff"),T.setAttribute("width",`${e.width+100+s}`),T.setAttribute("height",`${e.height+100+o}`),A.appendChild(T);let R=r.ownerDocument.createElementNS(Ht,"rect"),P=Be.getBoundTextElementPosition(e,S,t),_=s+P.x-e.x,O=o+P.y-e.y;R.setAttribute("x",_.toString()),R.setAttribute("y",O.toString()),R.setAttribute("fill","#000"),R.setAttribute("width",`${S.width}`),R.setAttribute("height",`${S.height}`),R.setAttribute("opacity","1"),A.appendChild(R)}let M=r.ownerDocument.createElementNS(Ht,"g");S&&M.setAttribute("mask",`url(#mask-${e.id})`),M.setAttribute("stroke-linecap","round"),Vn.generateElementShape(e,a).forEach(T=>{let R=$g(n,T,jg);w!==1&&(R.setAttribute("stroke-opacity",`${w}`),R.setAttribute("fill-opacity",`${w}`)),R.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`),e.type==="line"&&Mf(e.points)&&e.backgroundColor!=="transparent"&&R.setAttribute("fill-rule","evenodd"),M.appendChild(R)});let C=zg(e,y,[M,A],a.frameRendering,t);C?(x(C,e),y.appendChild(C)):(x(M,e),y.append(A));break}case"freedraw":{let S=Vn.generateElementShape(e,a),A=S?$g(n,S,jg):r.ownerDocument.createElementNS(Ht,"g");w!==1&&(A.setAttribute("stroke-opacity",`${w}`),A.setAttribute("fill-opacity",`${w}`)),A.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`),A.setAttribute("stroke","none");let M=r.ownerDocument.createElementNS(Ht,"path");M.setAttribute("fill",e.strokeColor),M.setAttribute("d",Hq(e)),A.appendChild(M);let C=zg(e,y,[A],a.frameRendering,t);x(C||A,e);break}case"image":{let S=Math.round(e.width),A=Math.round(e.height),M=Go(e)&&i[e.fileId];if(M){let{reuseImages:C=!0}=a,T=`image-${M.id}`,R=e.width,P=e.height;e.crop&&({width:R,height:P}=Tf(e),T=`image-crop-${M.id}-${aRe(`${R}x${P}`)}`),C||(T=`image-${e.id}`);let _=r.querySelector(`#${T}`);if(!_){_=r.ownerDocument.createElementNS(Ht,"symbol"),_.id=T;let V=r.ownerDocument.createElementNS(Ht,"image");V.setAttribute("href",M.dataURL),V.setAttribute("preserveAspectRatio","none"),e.crop||!C?(V.setAttribute("width",`${R}`),V.setAttribute("height",`${P}`)):(V.setAttribute("width","100%"),V.setAttribute("height","100%")),_.appendChild(V),(y.querySelector("defs")||y).prepend(_)}let O=r.ownerDocument.createElementNS(Ht,"use");O.setAttribute("href",`#${T}`),a.exportWithDarkMode&&M.mimeType!==it.svg&&O.setAttribute("filter",Dq);let F=0,B=0;if(e.crop){let{width:V,height:Y}=Tf(e);F=e.crop.x/(e.crop.naturalWidth/V),B=e.crop.y/(e.crop.naturalHeight/Y)}let $=h+F,z=g+B;O.setAttribute("width",`${S+F}`),O.setAttribute("height",`${A+B}`),O.setAttribute("opacity",`${w}`),(e.scale[0]!==1||e.scale[1]!==1)&&O.setAttribute("transform",`translate(${$} ${z}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-$} ${-z})`);let H=r.ownerDocument.createElementNS(Ht,"g");if(e.crop){let V=r.ownerDocument.createElementNS(Ht,"mask");V.setAttribute("id",`mask-image-crop-${e.id}`),V.setAttribute("fill","#fff");let Y=r.ownerDocument.createElementNS(Ht,"rect");Y.setAttribute("x",`${F}`),Y.setAttribute("y",`${B}`),Y.setAttribute("width",`${S}`),Y.setAttribute("height",`${A}`),V.appendChild(Y),y.appendChild(V),H.setAttribute("mask",`url(#${V.id})`)}if(H.appendChild(O),H.setAttribute("transform",`translate(${s-F} ${o-B}) rotate(${U} ${$} ${z})`),e.roundness){let V=r.ownerDocument.createElementNS(Ht,"clipPath");V.id=`image-clipPath-${e.id}`;let Y=r.ownerDocument.createElementNS(Ht,"rect"),K=Qa(Math.min(e.width,e.height),e);Y.setAttribute("width",`${e.width}`),Y.setAttribute("height",`${e.height}`),Y.setAttribute("rx",`${K}`),Y.setAttribute("ry",`${K}`),V.appendChild(Y),x(V,e),H.setAttributeNS(Ht,"clip-path",`url(#${V.id})`)}let G=zg(e,y,[H],a.frameRendering,t);x(G||H,e)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){let S=document.createElementNS(Ht,"rect");S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`),S.setAttribute("width",`${e.width}px`),S.setAttribute("height",`${e.height}px`),S.setAttribute("rx",zn.radius.toString()),S.setAttribute("ry",zn.radius.toString()),S.setAttribute("fill","none"),S.setAttribute("stroke",zn.strokeColor),S.setAttribute("stroke-width",zn.strokeWidth.toString()),x(S,e)}break}default:if(je(e)){let S=r.ownerDocument.createElementNS(Ht,"g");w!==1&&(S.setAttribute("stroke-opacity",`${w}`),S.setAttribute("fill-opacity",`${w}`)),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`);let A=e.text.replace(/\r\n?/g,`
`).split(`
`),M=Vb(e.fontSize,e.lineHeight),C=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,T=wq(e.fontFamily,e.fontSize,M),R=BZ(e.text)?"rtl":"ltr",P=e.textAlign==="center"?"middle":e.textAlign==="right"||R==="rtl"?"end":"start";for(let O=0;O<A.length;O++){let F=r.ownerDocument.createElementNS(Ht,"text");F.textContent=A[O],F.setAttribute("x",`${C}`),F.setAttribute("y",`${O*M+T}`),F.setAttribute("font-family",a6(e)),F.setAttribute("font-size",`${e.fontSize}px`),F.setAttribute("fill",e.strokeColor),F.setAttribute("text-anchor",P),F.setAttribute("style","white-space: pre;"),F.setAttribute("direction",R),F.setAttribute("dominant-baseline","alphabetic"),S.appendChild(F)}let _=zg(e,y,[S],a.frameRendering,t);x(_||S,e)}else throw new Error(`Unimplemented type ${e.type}`)}},_Ie=(e,t,n,r,i,s)=>{r&&(e.filter(o=>!Ko(o)).forEach(o=>{if(!o.isDeleted){if(je(o)&&o.containerId&&t.has(o.containerId))return;try{o3(o,t,n,r,i,o.x+s.offsetX,o.y+s.offsetY,s);let a=xt(o,t);a&&o3(a,t,n,r,i,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>Ko(o)).forEach(o=>{if(!o.isDeleted)try{o3(o,t,n,r,i,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},vF=500,ZT=e=>{var r,i;let t=(r=e.extensions)==null?void 0:r.reduce((s,o)=>(s.push(it[o]),s),[]),n=(i=e.extensions)==null?void 0:i.reduce((s,o)=>o==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${o}`),[]);return axe({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(s,o,a)=>{let l=l6(o,vF),f=()=>{c(),document.addEventListener("keyup",l),document.addEventListener("pointerup",l),l()},c=()=>{var u;if((u=a.files)!=null&&u.length){let h=e.multiple?[...a.files]:a.files[0];s(h)}};requestAnimationFrame(()=>{window.addEventListener("focus",f)});let d=window.setInterval(()=>{c()},vF);return u=>{clearInterval(d),l.cancel(),window.removeEventListener("focus",f),document.removeEventListener("keyup",l),document.removeEventListener("pointerup",l),u&&(console.warn("Opening the file was canceled (legacy-fs)."),u(new j7))}}})},l9=(e,t)=>cxe(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),PIe=(e,t)=>{let n={};for(let r of e)!r.isDeleted&&"fileId"in r&&r.fileId&&t[r.fileId]&&(n[r.fileId]=t[r.fileId]);return n},qT=(e,t,n,r)=>{let i={type:ea.excalidraw,version:N7.excalidraw,source:yT,elements:dJ(e),appState:PZ(t),files:PIe(e,n)};return JSON.stringify(i,null,2)},CQ=async(e,t,n,r=t.name||RZ)=>{let i=qT(e,t,n),s=new Blob([i],{type:it.excalidraw});return{fileHandle:await l9(s,{name:r,extension:"excalidraw",description:"Excalidraw file",fileHandle:AI(t.fileHandle)?null:t.fileHandle})}},DIe=async(e,t)=>{let n=await ZT({description:"Excalidraw files"});return gJ(await MI(n),e,t,n.handle)},LIe=e=>(e==null?void 0:e.type)===ea.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),AQ=e=>typeof e=="object"&&e&&e.type===ea.excalidrawLibrary&&(e.version===1||e.version===2),MQ=e=>{let t={type:ea.excalidrawLibrary,version:N7.excalidrawLibrary,source:yT,libraryItems:e};return JSON.stringify(t,null,2)},OIe=async e=>{let t=MQ(e);await l9(new Blob([t],{type:it.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},TQ=e=>new Promise((t,n)=>{let r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),IQ=async({fileIds:e,files:t,imageCache:n})=>{let r=new Map,i=new Map;return await Promise.all(e.reduce((s,o)=>{let a=t[o];return a&&!r.has(o)?(r.set(o,!0),s.concat((async()=>{try{if(a.mimeType===it.binary)throw new Error("Only images can be added to ImageCache");let l=TQ(a.dataURL),f={image:l,mimeType:a.mimeType};n.set(o,f);let c=await l;n.set(o,{...f,image:c})}catch{i.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:r,erroredFiles:i}},NQ=e=>e.filter(t=>Go(t)),jIe=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",wF=e=>{let t=new DOMParser().parseFromString(e,it.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!jIe(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",Ht);let r=n.getAttribute("width"),i=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(i!=null&&i.includes("%")||i==="auto")&&(i=null);let s=n.getAttribute("viewBox");if(!r||!i){if(r=r||"50",i=i||"50",s){let o=s.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);o&&([,r,i]=o)}n.setAttribute("width",r),n.setAttribute("height",i)}return s||n.setAttribute("viewBox",`0 0 ${r} ${i}`),n.outerHTML}},RQ=document.createElement("img");RQ.src=`data:${it.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;var _Q=document.createElement("img");_Q.src=`data:${it.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;var QT=([e,t,n,r],i,s)=>{let o=HMe,a=o/s.zoom.value,l=o/s.zoom.value,f=o/s.zoom.value,c=(e+n)/2,d=(t+r)/2,u=(o-8)/(2*s.zoom.value),h=4/s.zoom.value,g=n+h-u,U=t-h-f+u,[y,x]=pe(D(g+a/2,U+l/2),D(c,d),i);return[y-a/2,x-l/2,a,l]},PQ=(e,t,n,[r,i])=>{let s=4/n.zoom.value,[o,a,l,f]=gt(e,t),[c,d,u,h]=QT([o,a,l,f],e.angle,n);return r>c-s&&r<c+s+u&&i>d-s&&i<d+h+s},tS=(e,t,n,[r,i],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&BT(r,i,e,t)?!0:PQ(e,t,n,D(r,i)),Z7=(e,t,n,r,i=!0)=>{e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill(),i&&e.stroke()},JT=(e,t)=>[e.width/t,e.height/t],eI=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:r,theme:i,isExporting:s,viewBackgroundColor:o})=>{let a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&i===Nt.DARK&&(a.filter=wT),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,r),a.save(),a.fillStyle=o,a.fillRect(0,0,n,r),a.restore()):a.clearRect(0,0,n,r),a},DQ=(e,t)=>{let n=window.location.href;try{let r=new URL(n);return r.searchParams.set(H4,e),po(r.toString())}catch(r){console.error(r)}return po(n)},LQ=(e,t)=>{if(e.length>0&&c9(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){let n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},c9=e=>!!(e.length===1||e.length>1&&lQ(e)),V5=e=>{try{let t=new URL(e);return t.searchParams.has(H4)&&t.host===window.location.host}catch{return!1}},BIe=e=>{try{let{searchParams:t}=new URL(e);if(t.has(H4))return t.get(H4)}catch{}return null},oy={Bold:"#dddddd",Regular:"#e5e5e5"},FIe=(e,t,n,r,i,s,o,a)=>{let l=r%t-t,f=i%t-t,c=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,f%1?0:.5);for(let u=l;u<l+o+t*2;u+=t){let h=n>1&&Math.round(u-r)%(n*t)===0;if(!h&&c<10)continue;let g=Math.min(1/s.value,h?4:1);e.lineWidth=g;let U=[g*3,d+(g+d)];e.beginPath(),e.setLineDash(h?[]:U),e.strokeStyle=h?oy.Bold:oy.Regular,e.moveTo(u,f-t),e.lineTo(u,Math.ceil(f+a+t*2)),e.stroke()}for(let u=f;u<f+a+t*2;u+=t){let h=n>1&&Math.round(u-i)%(n*t)===0;if(!h&&c<10)continue;let g=Math.min(1/s.value,h?4:1);e.lineWidth=g;let U=[g*3,d+(g+d)];e.beginPath(),e.setLineDash(h?[]:U),e.strokeStyle=h?oy.Bold:oy.Regular,e.moveTo(l-t,u),e.lineTo(Math.ceil(l+o+t*2),u),e.stroke()}e.restore()},EF=(e,t,n,r)=>{t.translate(e.x+r.scrollX,e.y+r.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,zn.radius/r.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+r.scrollX),-(e.y+r.scrollY))},SF={regularLink:null,elementLink:null},kF=(e,t,n,r)=>{if(e.link&&!n.selectedElementIds[e.id]){let[i,s,o,a]=gt(e,r),[l,f,c,d]=QT([i,s,o,a],e.angle,n),u=l+c/2,h=f+d/2;t.save(),t.translate(n.scrollX+u,n.scrollY+h),t.rotate(e.angle);let g=V5(e.link)?"elementLink":"regularLink",U=SF[g];if(!U||U.zoom!==n.zoom.value){U=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),U.width=c*window.devicePixelRatio*n.zoom.value,U.height=d*window.devicePixelRatio*n.zoom.value,SF[g]=U;let y=U.getContext("2d");y.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),y.fillStyle="#fff",y.fillRect(0,0,c,d),g==="elementLink"?y.drawImage(_Q,0,0,c,d):y.drawImage(RQ,0,0,c,d),y.restore()}t.drawImage(U,l-u,f-h,c,d),t.restore()}},OQ=({canvas:e,rc:t,elementsMap:n,allElementsMap:r,visibleElements:i,scale:s,appState:o,renderConfig:a})=>{var U;if(e===null)return;let{renderGrid:l=!0,isExporting:f}=a,[c,d]=JT(e,s),u=eI({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:d,theme:o.theme,isExporting:f,viewBackgroundColor:o.viewBackgroundColor});u.scale(o.zoom.value,o.zoom.value),l&&FIe(u,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,c/o.zoom.value,d/o.zoom.value);let h=new Set;i.forEach(y=>{y.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[y.id]&&(I0(y,o.frameToHighlight,n)||y.groupIds.find(x=>h.has(x)))&&y.groupIds.forEach(x=>h.add(x))});let g=new Map;i.filter(y=>!Ko(y)).forEach(y=>{var x;try{let w=y.frameId||((x=o.frameToHighlight)==null?void 0:x.id);if(je(y)&&y.containerId&&n.has(y.containerId))return;if(u.save(),w&&o.frameRendering.enabled&&o.frameRendering.clip){let S=QC(y,n,o);S&&FF(y,S,o,n,g)&&EF(S,u,a,o),yu(y,n,r,t,u,a,o)}else yu(y,n,r,t,u,a,o);let E=xt(y,n);E&&yu(E,n,r,t,u,a,o),u.restore(),f||kF(y,u,o,n)}catch(w){console.error(w,y.id,y.x,y.y,y.width,y.height)}}),i.filter(y=>Ko(y)).forEach(y=>{var x;try{let w=()=>{if(yu(y,n,r,t,u,a,o),Ko(y)&&(f||Rs(y)&&a.embedsValidationStatus.get(y.id)!==!0)&&y.width&&y.height){let E=kQ(y);yu(E,n,r,t,u,a,o)}f||kF(y,u,o,n)};if((y.frameId||(x=o.frameToHighlight)!=null&&x.id)&&o.frameRendering.enabled&&o.frameRendering.clip){u.save();let E=QC(y,n,o);E&&FF(y,E,o,n,g)&&EF(E,u,a,o),w(),u.restore()}else w()}catch(w){console.error(w)}}),(U=a.pendingFlowchartNodes)==null||U.forEach(y=>{try{yu(y,n,r,t,u,a,o)}catch(x){console.error(x)}})},jQ=R7(e=>{OQ(e)},{trailing:!0}),BQ=(e,t)=>{if(t){jQ(e);return}OQ(e)},$Ie=(e,t)=>{if(e.width<=t)return e;let n=document.createElement("canvas").getContext("2d");n.font=cn({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(n.measureText(r).width>t)for(let i=r.length;i>0;i--){let s=`${r.slice(0,i)}...`;if(n.measureText(s).width<=t){r=s;break}}return yt(e,{text:r,width:t})},zIe=(e,t)=>{let n=[];for(let r of e){if(at(r)){let i=bo({x:r.x,y:r.y-zn.nameOffsetY,fontFamily:$n.Helvetica,fontSize:zn.nameFontSize,lineHeight:zn.nameLineHeight,strokeColor:t.exportWithDarkMode?zn.nameColorDarkTheme:zn.nameColorLightTheme,text:tJ(r)});i.y-=i.height,i=$Ie(i,r.width),n.push(i)}n.push(r)}return n},FQ=(e,t)=>(t=t||lc().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),$Q=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:r})=>{let i;return t?i=yI(e,t):n.enabled&&n.name?i=zIe(e,{exportWithDarkMode:r}):i=e,i},zQ=async(e,t,n,{exportBackground:r,exportPadding:i=T6,viewBackgroundColor:s,exportingFrame:o},a=(f,c)=>{let d=document.createElement("canvas");return d.width=f*t.exportScale,d.height=c*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await wf.loadElementsFonts(e)})=>{await l();let f=FQ(o??null,t.frameRendering??null);o&&(f.clip=!1);let c=$Q({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:f});o&&(i=0);let[d,u,h,g]=nI(o?[o]:UI(c),i),{canvas:U,scale:y=1}=a(h,g),x=lc(),{imageCache:w}=await IQ({imageCache:new Map,fileIds:NQ(c).map(E=>E.fileId),files:n});return BQ({canvas:U,rc:B0.canvas(U),elementsMap:ra(ct(c)),allElementsMap:ra(ct(Rf(e))),visibleElements:c,scale:y,appState:{...t,frameRendering:f,viewBackgroundColor:r?s:null,scrollX:-d+i,scrollY:-u+i,zoom:x.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?Nt.DARK:Nt.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:w,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),U},h5=e=>document.createComment(` ${e} `),tI=async(e,t,n,r)=>{let i=FQ((r==null?void 0:r.exportingFrame)??null,t.frameRendering??null),{exportPadding:s=T6,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:f}=t,{exportingFrame:c=null}=r||{},d=$Q({elements:e,exportingFrame:c,exportWithDarkMode:o,frameRendering:i});c&&(s=0);let[u,h,g,U]=nI(c?[c]:UI(d),s),y=-u+s,x=-h+s,w=document.createElementNS(Ht,"svg");w.setAttribute("version","1.1"),w.setAttribute("xmlns",Ht),w.setAttribute("viewBox",`0 0 ${g} ${U}`),w.setAttribute("width",`${g*l}`),w.setAttribute("height",`${U*l}`),o&&w.setAttribute("filter",wT);let E=w.ownerDocument.createElementNS(Ht,"defs"),S=w.ownerDocument.createElementNS(Ht,"metadata");if(w.appendChild(h5("svg-source:excalidraw")),w.appendChild(S),w.appendChild(E),f)try{HIe({metadataElement:S,payload:qT(e,t,n||{},"local")})}catch(_){console.error(_)}let A=bI(e);if(A.length){let _=ct(e);for(let O of A){let F=w.ownerDocument.createElementNS(Ht,"clipPath");F.setAttribute("id",O.id);let[B,$,z,H]=gt(O,_),G=(z-B)/2-(O.x-B),V=(H-$)/2-(O.y-$),Y=w.ownerDocument.createElementNS(Ht,"rect");Y.setAttribute("transform",`translate(${O.x+y} ${O.y+x}) rotate(${O.angle} ${G} ${V})`),Y.setAttribute("width",`${O.width}`),Y.setAttribute("height",`${O.height}`),c||(Y.setAttribute("rx",`${zn.radius}`),Y.setAttribute("ry",`${zn.radius}`)),F.appendChild(Y),E.appendChild(F)}}let M=r!=null&&r.skipInliningFonts?[]:await wf.generateFontFaceDeclarations(e),C=`
      `,T=w.ownerDocument.createElementNS(Ht,"style");if(T.classList.add("style-fonts"),T.appendChild(document.createTextNode(`${C}${M.join(C)}`)),E.appendChild(T),t.exportBackground&&a){let _=w.ownerDocument.createElementNS(Ht,"rect");_.setAttribute("x","0"),_.setAttribute("y","0"),_.setAttribute("width",`${g}`),_.setAttribute("height",`${U}`),_.setAttribute("fill",a),w.appendChild(_)}let R=B0.svg(w),P=(r==null?void 0:r.renderEmbeddables)??!1;return _Ie(d,ra(ct(d)),R,w,n||{},{offsetX:y,offsetY:x,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:P,frameRendering:i,canvasBackgroundColor:a,embedsValidationStatus:P?new Map(d.filter(_=>at(_)).map(_=>[_.id,!0])):new Map,reuseImages:(r==null?void 0:r.reuseImages)??!0}),w},HIe=({payload:e,metadataElement:t})=>{let n=xJ(JSON.stringify(wJ({text:e})),!0);t.appendChild(h5(`payload-type:${it.excalidraw}`)),t.appendChild(h5("payload-version:2")),t.appendChild(h5("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(h5("payload-end"))},VIe=({svg:e})=>{var t;if(e.includes(`payload-type:${it.excalidraw}`)){let n=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!n)throw new Error("INVALID");let r=(((t=e.match(/<!-- payload-version:(\d+) -->/))==null?void 0:t[1])||"1")!=="1";try{let i=vJ(n[1],r),s=JSON.parse(i);if(!("encoded"in s)){if("type"in s&&s.type===ea.excalidraw)return i;throw new Error("FAILED")}return EJ(s)}catch(i){throw console.error(i),new Error("FAILED")}}throw new Error("INVALID")},nI=(e,t)=>{let[n,r,i,s]=nn(e),o=Fi(n,i)+t*2,a=Fi(r,s)+t*2;return[n,r,o,a]},WIe=(e,t,n)=>{let[,,r,i]=nI(e,t).map(s=>Math.trunc(s*n));return[r,i]},GIe=class{constructor(t){this.scoreFunction=t,Z(this,"content",[])}sinkDown(t){let n=this.content[t];for(;t>0;){let r=(t+1>>1)-1,i=this.content[r];if(this.scoreFunction(n)<this.scoreFunction(i))this.content[r]=n,this.content[t]=i,t=r;else break}}bubbleUp(t){let n=this.content.length,r=this.content[t],i=this.scoreFunction(r);for(;;){let s=t+1<<1,o=s-1,a=null,l=0;if(o<n){let f=this.content[o];l=this.scoreFunction(f),l<i&&(a=o)}if(s<n){let f=this.content[s];this.scoreFunction(f)<(a===null?i:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=r,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;let t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;let n=this.content.indexOf(t),r=this.content.pop();n<this.content.length&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}},rI=1,on=40,XIe=(e,t)=>{let n=e.fixedSegments?e.fixedSegments.slice():null;if(n){let r=[];e.points.map(o=>D(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return r.push(o);let f=V2(o,l[a-1]),c=V2(l[a-1],l[a-2]);if(rr(f,c)){let d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,u=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;u!==-1&&(n[u].start=D(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),r.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return r.push(o)});let i=[];r.forEach((o,a,l)=>{if(a<3)return i.push(o);if(qt(l[a-2],l[a-1])<rI){let f=(n==null?void 0:n.findIndex(u=>u.index===a-2))??-1,c=(n==null?void 0:n.findIndex(u=>u.index===a-1))??-1;c!==-1&&n.splice(c,1),f!==-1&&n.splice(f,1),i.splice(-2,2),n.forEach(u=>{u.index>a-2&&(u.index-=2)});let d=df(o,l[a-1]);return i.push(D(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}i.push(o)});let s=n.filter(o=>o.index!==1&&o.index!==i.length-1);return s.length===0?T0(aI(lI(oI(e,sI(e,t,i.map(o=>D(o[0]-e.x,o[1]-e.y)),e.startBinding&&b6(e.startBinding.elementId,t),e.endBinding&&b6(e.endBinding.elementId,t)))??[])),s,null,null):(vt.DEV&&Gi(cI(i),"Invalid elbow points with fixed segments"),T0(i,s,e.startIsSpecial,e.endIsSpecial))}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},KIe=(e,t,n)=>{var T,R;let r=t.map(P=>P.index),i=(((T=e.fixedSegments)==null?void 0:T.map(P=>P.index))??[]).findIndex(P=>!r.includes(P));if(i===-1||!((R=e.fixedSegments)!=null&&R[i]))return{points:e.points};let s=e.fixedSegments[i].index,o=e.fixedSegments[i-1],a=e.fixedSegments[i+1],l=e.x+(o?o.end[0]:0),f=e.y+(o?o.end[1]:0),c=o?null:e.startBinding,d=a?null:e.endBinding,{startHeading:u,endHeading:h,startGlobalPoint:g,endGlobalPoint:U,hoveredStartElement:y,hoveredEndElement:x,...w}=sI({x:l,y:f,startBinding:c,endBinding:d,startArrowhead:null,endArrowhead:null,points:e.points},n,[D(0,0),D(e.x+((a==null?void 0:a.start[0])??e.points[e.points.length-1][0])-l,e.y+((a==null?void 0:a.start[1])??e.points[e.points.length-1][1])-f)],c&&b6(c.elementId,n),d&&b6(d.elementId,n),{isDragging:!1}),{points:E}=T0(aI(lI(oI(e,{startHeading:u,endHeading:h,startGlobalPoint:g,endGlobalPoint:U,hoveredStartElement:y,hoveredEndElement:x,...w})??[])),t,null,null),S=[];if(o)for(let P=0;P<o.index;P++)S.push(D(e.x+e.points[P][0],e.y+e.points[P][1]));if(E.forEach(P=>{S.push(D(e.x+(o?o.end[0]:0)+P[0],e.y+(o?o.end[1]:0)+P[1]))}),a)for(let P=a.index;P<e.points.length;P++)S.push(D(e.x+e.points[P][0],e.y+e.points[P][1]));let A=((a==null?void 0:a.index)??e.points.length)-((o==null?void 0:o.index)??0)-1,M=t.map(P=>P.index>s?{...P,index:P.index-A+(E.length-1)}:P),C=S.flatMap((P,_)=>{let O=S[_-1],F=S[_+1];if(O&&F){let B=V2(P,O),$=V2(F,P);if(rr(B,$))return M.forEach(z=>{z.index>_&&(z.index-=1)}),[];if(rr(B,Wq($)))return M.forEach(z=>{z.index>_&&(z.index+=1)}),[P,P]}return[P]});return T0(C,M,!1,!1)},YIe=(e,t,n,r,i,s)=>{var A,M;let o=t.map((C,T)=>e.fixedSegments==null||e.fixedSegments[T]===void 0||e.fixedSegments[T].index!==C.index||(C.start[0]!==e.fixedSegments[T].start[0]&&C.end[0]!==e.fixedSegments[T].end[0])!=(C.start[1]!==e.fixedSegments[T].start[1]&&C.end[1]!==e.fixedSegments[T].end[1])?T:null).filter(C=>C!==null).shift();if(o==null)return{points:e.points};let a=((A=e.fixedSegments)==null?void 0:A.findIndex(C=>C.index===1))??-1,l=((M=e.fixedSegments)==null?void 0:M.findIndex(C=>C.index===e.points.length-1))??-1,f=qt(t[o].start,t[o].end),c=f<on+5;if(a===-1&&t[o].index===1&&i){let C=gf(n),T=(C?rr(n,tr):rr(n,si))?c?f/2:on:c?-f/2:-on;t[o].start=D(t[o].start[0]+(C?T:0),t[o].start[1]+(C?0:T))}if(l===-1&&t[o].index===e.points.length-1&&s){let C=gf(r),T=(C?rr(r,tr):rr(r,si))?c?f/2:on:c?-f/2:-on;t[o].end=D(t[o].end[0]+(C?T:0),t[o].end[1]+(C?0:T))}let d=t.map(C=>({...C,start:D(e.x+C.start[0],e.y+C.start[1]),end:D(e.x+C.end[0],e.y+C.end[1])})),u=e.points.map((C,T)=>D(e.x+C[0],e.y+C[1])),h=d[o].index-1,g=d[o].index,U=d[o].start,y=d[o].end,x=u[h-1]&&!rl(u[h],u[h-1])?df(u[h-1],u[h]):void 0,w=u[g+1]&&!rl(u[g],u[g+1])?df(u[g+1],u[g]):void 0;if(x!==void 0){let C=x?1:0;u[h-1][C]=U[C]}if(u[h]=U,u[g]=y,w!==void 0){let C=w?1:0;u[g+1][C]=y[C]}let E=d.findIndex(C=>C.index===h);if(E!==-1){let C=df(d[E].end,d[E].start)?1:0;d[E].start[C]=U[C],d[E].end=U}let S=d.findIndex(C=>C.index===g+1);if(S!==-1){let C=df(d[S].end,d[S].start)?1:0;d[S].end[C]=y[C],d[S].start=y}if(a===-1&&h===0){let C=i?gf(n):df(u[1],u[0]);u.unshift(D(C?U[0]:e.x+e.points[0][0],C?e.y+e.points[0][1]:U[1])),i&&u.unshift(D(e.x+e.points[0][0],e.y+e.points[0][1]));for(let T of d)T.index+=i?2:1}if(l===-1&&g===e.points.length-1){let C=gf(r);u.push(D(C?y[0]:e.x+e.points[e.points.length-1][0],C?e.y+e.points[e.points.length-1][1]:y[1])),s&&u.push(D(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return T0(u,d.map(C=>({...C,start:D(C.start[0]-e.x,C.start[1]-e.y),end:D(C.end[0]-e.x,C.end[1]-e.y)})),!1,!1)},ZIe=(e,t,n,r,i,s,o,a,l)=>{let f=e.startIsSpecial??null,c=e.endIsSpecial??null,d=t.map((y,x)=>x===0||x===t.length-1?D(e.x+y[0],e.y+y[1]):D(e.x+e.points[x][0],e.y+e.points[x][1])),u=n.map(y=>({...y,start:D(e.x+(y.start[0]-t[0][0]),e.y+(y.start[1]-t[0][1])),end:D(e.x+(y.end[0]-t[0][0]),e.y+(y.end[1]-t[0][1]))})),h=[],g=2+(f?1:0),U=2+(c?1:0);for(;h.length+g<d.length-U;)h.push(d[h.length+g]);{let y=d[f?2:1],x=d[f?3:2],w=gf(r),E=gf(Qh(Ye(y,x)));if(a&&w===E){let S=w?rr(r,tr):rr(r,si);if(h.unshift(D(E?s[0]+(S?on:-on):x[0],E?x[1]:s[1]+(S?on:-on))),h.unshift(D(w?s[0]+(S?on:-on):s[0],w?s[1]:s[1]+(S?on:-on))),!f){f=!0;for(let A of u)A.index>1&&(A.index+=1)}}else if(h.unshift(D(E?s[0]:y[0],E?y[1]:s[1])),f){f=!1;for(let S of u)S.index>1&&(S.index-=1)}h.unshift(s)}{let y=d[d.length-(c?3:2)],x=d[d.length-(c?4:3)],w=gf(i),E=df(x,y);if(l&&w===E){let S=w?rr(i,tr):rr(i,si);h.push(D(E?o[0]+(S?on:-on):x[0],E?x[1]:o[1]+(S?on:-on))),h.push(D(w?o[0]+(S?on:-on):o[0],w?o[1]:o[1]+(S?on:-on))),c||(c=!0)}else h.push(D(E?o[0]:y[0],E?y[1]:o[1])),c&&(c=!1)}return h.push(o),T0(h,u.map(({index:y})=>({index:y,start:h[y-1],end:h[y]})).map(y=>({...y,start:D(y.start[0]-s[0],y.start[1]-s[1]),end:D(y.end[0]-s[0],y.end[1]-s[1])})),f,c)},pn=1e6,iI=(e,t,n,r)=>{var x,w,E,S,A,M,C,T,R,P,_,O,F,B,$,z,H,G,V,Y,K,q,se,de,xe;if(e.points.length<2)return{points:n.points??e.points};(e.x<-pn||e.x>pn||e.y<-pn||e.y>pn||e.x+(((E=(w=n==null?void 0:n.points)==null?void 0:w[((x=n==null?void 0:n.points)==null?void 0:x.length)-1])==null?void 0:E[0])??0)<-pn||e.x+(((M=(A=n==null?void 0:n.points)==null?void 0:A[((S=n==null?void 0:n.points)==null?void 0:S.length)-1])==null?void 0:M[0])??0)>pn||e.y+(((R=(T=n==null?void 0:n.points)==null?void 0:T[((C=n==null?void 0:n.points)==null?void 0:C.length)-1])==null?void 0:R[1])??0)<-pn||e.y+(((O=(_=n==null?void 0:n.points)==null?void 0:_[((P=n==null?void 0:n.points)==null?void 0:P.length)-1])==null?void 0:O[1])??0)>pn||e.x+((($=(B=e==null?void 0:e.points)==null?void 0:B[((F=e==null?void 0:e.points)==null?void 0:F.length)-1])==null?void 0:$[0])??0)<-pn||e.x+(((G=(H=e==null?void 0:e.points)==null?void 0:H[((z=e==null?void 0:e.points)==null?void 0:z.length)-1])==null?void 0:G[0])??0)>pn||e.y+(((K=(Y=e==null?void 0:e.points)==null?void 0:Y[((V=e==null?void 0:e.points)==null?void 0:V.length)-1])==null?void 0:K[1])??0)<-pn||e.y+(((de=(se=e==null?void 0:e.points)==null?void 0:se[((q=e==null?void 0:e.points)==null?void 0:q.length)-1])==null?void 0:de[1])??0)>pn)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=Mt(e.x,-pn,pn),e.y=Mt(e.y,-pn,pn),n.points&&(n.points=n.points.map(([ve,ue])=>D(Mt(ve,-pn,pn),Mt(ue,-pn,pn))));let i=n.points?n.points&&n.points.length===2?e.points.map((ve,ue)=>ue===0?n.points[0]:ue===e.points.length-1?n.points[1]:ve):n.points.slice():e.points.slice(),s=typeof n.startBinding<"u"?n.startBinding:e.startBinding,o=typeof n.endBinding<"u"?n.endBinding:e.endBinding,a=s&&b6(s.elementId,t),l=o&&b6(o.elementId,t);if(t.size===0&&cI(i)||(a==null?void 0:a.id)!==(s==null?void 0:s.elementId)||(l==null?void 0:l.id)!==(o==null?void 0:o.elementId))return T0(i.map(ve=>D(e.x+ve[0],e.y+ve[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);let{startHeading:f,endHeading:c,startGlobalPoint:d,endGlobalPoint:u,hoveredStartElement:h,hoveredEndElement:g,...U}=sI({x:e.x,y:e.y,startBinding:s,endBinding:o,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,i,a,l,r),y=n.fixedSegments??e.fixedSegments??[];return!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?XIe(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((ve,ue)=>rl(ve,e.points[ue]??D(1/0,1/0)))?{}:y.length===0?T0(aI(lI(oI(e,{startHeading:f,endHeading:c,startGlobalPoint:d,endGlobalPoint:u,hoveredStartElement:h,hoveredEndElement:g,...U})??[])),y,null,null):(((xe=e.fixedSegments)==null?void 0:xe.length)??0)>y.length?KIe(e,y,t):n.points?n.points&&n.fixedSegments?n:ZIe(e,i,y,f,c,d,u,h,g):YIe(e,y,f,c,h,g)},sI=(e,t,n,r,i,s)=>{var C,T;let o=G4(n[0],Ui(e.x,e.y)),a=G4(n[n.length-1],Ui(e.x,e.y)),l=r,f=i;if(s!=null&&s.isDragging){let R=Array.from(t.values());l=TF(o,t,R,s==null?void 0:s.zoom)||r,f=TF(a,t,R,s==null?void 0:s.zoom)||i}let c=AF({...e,elbowed:!0,points:n},"start",(C=e.startBinding)==null?void 0:C.fixedPoint,o,r,l,s==null?void 0:s.isDragging),d=AF({...e,elbowed:!0,points:n},"end",(T=e.endBinding)==null?void 0:T.fixedPoint,a,i,f,s==null?void 0:s.isDragging),u=MF(c,d,t,l,o),h=MF(d,c,t,f,a),g=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],U=[d[0]-2,d[1]-2,d[0]+2,d[1]+2],y=l?Vl(l,xd(u,e.startArrowhead?gn*6:gn*2,1)):g,x=f?Vl(f,xd(h,e.endArrowhead?gn*6:gn*2,1)):U,w=d6(c,f?Vl(f,xd(h,on,on)):U)||d6(d,l?Vl(l,xd(u,on,on)):g),E=HQ(w?[g,U]:[y,x]),S=JIe(w?g:y,w?U:x,E,w?xd(u,!l&&!f?0:on,0):xd(u,!l&&!f?0:on-(e.startArrowhead?gn*6:gn*2),on),w?xd(h,!l&&!f?0:on,0):xd(h,!l&&!f?0:on-(e.endArrowhead?gn*6:gn*2),on),w,l&&Vl(l),f&&Vl(f)),A=CF(S[0],u,c),M=CF(S[1],h,d);return{dynamicAABBs:S,startDonglePosition:A,startGlobalPoint:c,startHeading:u,endDonglePosition:M,endGlobalPoint:d,endHeading:h,commonBounds:E,hoveredStartElement:l,hoveredEndElement:f,boundsOverlap:w,startElementBounds:y,endElementBounds:x}},oI=(e,t)=>{let{dynamicAABBs:n,startDonglePosition:r,startGlobalPoint:i,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:f,hoveredEndElement:c}=t,d=eNe(n,r||i,s,o||a,l,f),u=r&&ay(r,d),h=o&&ay(o,d),g=ay(a,d);g&&c&&(g.closed=!0);let U=ay(i,d);U&&e.startBinding&&(U.closed=!0);let y=u&&h&&(d6(u.pos,n[1])||d6(h.pos,n[0])),x=qIe(u||U,h||g,d,s||tr,l||tr,y?[]:n);if(x){let w=x.map(E=>[E.pos[0],E.pos[1]]);return u&&w.unshift(i),h&&w.push(a),w}return null},xd=(e,t,n)=>{switch(e){case Os:return[t,n,n,n];case tr:return[n,t,n,n];case si:return[n,n,t,n]}return[n,n,n,t]},qIe=(e,t,n,r,i,s)=>{let o=nS(e.pos,t.pos),a=new GIe(l=>l.f);for(a.push(e);a.size()>0;){let l=a.pop();if(!l||l.closed)continue;if(l===t)return QIe(e,l);l.closed=!0;let f=nNe(l.addr,n);for(let c=0;c<4;c++){let d=f[c];if(!d||d.closed)continue;let u=$c(d.pos,l.pos,.5);if(kve(...s.map(E=>d6(u,E))))continue;let h=rNe(c),g=l.parent?Qh(Ye(l.pos,l.parent.pos)):r,U=Wq(g);if(rr(U,h)||IF(e.addr,d.addr)&&rr(h,r)||IF(t.addr,d.addr)&&rr(h,i))continue;let y=g!==h,x=l.g+nS(d.pos,l.pos)+(y?Math.pow(o,3):0),w=d.visited;if(!w||x<d.g){let E=tNe(d,t,h,i);d.visited=!0,d.parent=l,d.h=nS(t.pos,d.pos)+E*Math.pow(o,2),d.g=x,d.f=d.g+d.h,w?a.rescoreElement(d):a.push(d)}}}return null},QIe=(e,t)=>{let n=t,r=[];for(;n.parent;)r.unshift(n),n=n.parent;return r.unshift(e),r},nS=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),JIe=(e,t,n,r,i,s,o,a)=>{let l=o??e,f=a??t,[c,d,u,h]=r??[0,0,0,0],[g,U,y,x]=i??[0,0,0,0],w=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+f[2])/2,e[0]-h):(l[0]+f[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+f[3])/2,e[1]-c):(l[1]+f[3])/2:e[1]>t[1]?e[1]-c:n[1]-c,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+f[0])/2,e[2]+d):(l[2]+f[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+f[1])/2,e[3]+u):(l[3]+f[1])/2:e[3]<t[3]?e[3]+u:n[3]+u],E=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((f[0]+l[2])/2,t[0]-x):(f[0]+l[2])/2:t[0]>e[0]?t[0]-x:n[0]-x,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((f[1]+l[3])/2,t[1]-g):(f[1]+l[3])/2:t[1]>e[1]?t[1]-g:n[1]-g,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((f[2]+l[0])/2,t[2]+U):(f[2]+l[0])/2:t[2]<e[2]?t[2]+U:n[2]+U,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((f[3]+l[1])/2,t[3]+y):(f[3]+l[1])/2:t[3]<e[3]?t[3]+y:n[3]+y],S=HQ([w,E]);if(!s&&w[2]-w[0]+E[2]-E[0]>S[2]-S[0]+1e-11&&w[3]-w[1]+E[3]-E[1]>S[3]-S[1]+1e-11){let[A,M]=[(E[0]+E[2])/2,(E[1]+E[3])/2];if(t[0]>e[2]&&e[1]>t[3]){let C=w[2]+(E[0]-w[2])/2,T=E[3]+(w[1]-E[3])/2;return $r(Ui(e[2]-A,e[1]-M),Ui(e[0]-A,e[3]-M))>0?[[w[0],w[1],C,w[3]],[C,E[1],E[2],E[3]]]:[[w[0],T,w[2],w[3]],[E[0],E[1],E[2],T]]}else if(e[2]<t[0]&&e[3]<t[1]){let C=w[2]+(E[0]-w[2])/2,T=w[3]+(E[1]-w[3])/2;return $r(Ui(e[0]-A,e[1]-M),Ui(e[2]-A,e[3]-M))>0?[[w[0],w[1],w[2],T],[E[0],T,E[2],E[3]]]:[[w[0],w[1],C,w[3]],[C,E[1],E[2],E[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){let C=E[2]+(w[0]-E[2])/2,T=w[3]+(E[1]-w[3])/2;return $r(Ui(e[2]-A,e[1]-M),Ui(e[0]-A,e[3]-M))>0?[[C,w[1],w[2],w[3]],[E[0],E[1],C,E[3]]]:[[w[0],w[1],w[2],T],[E[0],T,E[2],E[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){let C=E[2]+(w[0]-E[2])/2,T=E[3]+(w[1]-E[3])/2;return $r(Ui(e[0]-A,e[1]-M),Ui(e[2]-A,e[3]-M))>0?[[C,w[1],w[2],w[3]],[E[0],E[1],C,E[3]]]:[[w[0],T,w[2],w[3]],[E[0],E[1],E[2],T]]}}return[w,E]},eNe=(e,t,n,r,i,s)=>{let o=new Set,a=new Set;n===Ls||n===tr?a.add(t[1]):o.add(t[0]),i===Ls||i===tr?a.add(r[1]):o.add(r[0]),e.forEach(c=>{o.add(c[0]),o.add(c[2]),a.add(c[1]),a.add(c[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);let l=Array.from(a).sort((c,d)=>c-d),f=Array.from(o).sort((c,d)=>c-d);return{row:l.length,col:f.length,data:l.flatMap((c,d)=>f.map((u,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[u,c]})))}},CF=(e,t,n)=>{switch(t){case Os:return D(n[0],e[1]);case tr:return D(e[2],n[1]);case si:return D(n[0],e[3])}return D(e[0],n[1])},tNe=(e,t,n,r)=>{if(r===tr)switch(n){case tr:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case Os:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case si:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ls:return e.pos[1]===t.pos[1]?4:2}else if(r===Ls)switch(n){case tr:return e.pos[1]===t.pos[1]?4:2;case Os:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case si:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case Ls:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(r===Os)switch(n){case tr:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Os:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case si:return e.pos[0]===t.pos[0]?4:2;case Ls:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(r===si)switch(n){case tr:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Os:return e.pos[0]===t.pos[0]?4:2;case si:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case Ls:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},nNe=([e,t],n)=>[p5([e,t-1],n),p5([e+1,t],n),p5([e,t+1],n),p5([e-1,t],n)],p5=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,ay=(e,t)=>{for(let n=0;n<t.col;n++)for(let r=0;r<t.row;r++){let i=p5([n,r],t);if(i&&e[0]===i.pos[0]&&e[1]===i.pos[1])return i}return null},HQ=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],b6=(e,t)=>{let n=t.get(e);return n&&il(n)?n:null},T0=(e,t,n,r)=>{let i=e[0][0],s=e[0][1],o=e.map(a=>G4(a,nr(Ye(e[0]),-1)));return(i<-pn||i>pn||s<-pn||s>pn||i+o[o.length-1][0]<-pn||s+o[o.length-1][0]>pn||i+o[o.length-1][1]<-pn||s+o[o.length-1][1]>pn)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:i,y:s,points:o,...h6(o)}),o=o.map(([a,l])=>D(Mt(a,-1e6,1e6),Mt(l,-1e6,1e6))),{points:o,x:Mt(i,-1e6,1e6),y:Mt(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...h6(o),startIsSpecial:n,endIsSpecial:r}},aI=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,r)=>{if(r===0||r===e.length-1)return!0;let i=e[r+1],s=Math.abs(n[1]-i[1])<Math.abs(n[0]-i[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},lI=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;let r=e[n-1];return qt(r,t)>rI}):e,rNe=e=>{switch(e){case 0:return Os;case 1:return tr;case 2:return si}return Ls},AF=(e,t,n,r,i,s,o)=>{if(o){if(s){let a=W2(e,s,t);return TTe(s,a)}return r}if(i){let a=WC(n||[0,0],i);return Math.abs($7(i,a)-gn)>.01?W2(e,i,t):a}return r},MF=(e,t,n,r,i)=>kTe(e,t,r,r&&Vl(r,Array(4).fill($7(r,e))),n,i),TF=(e,t,n,r)=>Ka(Ga(e),n,t,r,!0,!0),IF=(e,t)=>e[0]===t[0]&&e[1]===t[1],cI=(e,t=rI)=>e.slice(1).map((n,r)=>Math.abs(n[0]-e[r][0])<t||Math.abs(n[1]-e[r][1])<t).every(Boolean),iNe={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},sNe=e=>Object.keys($n).includes(e)?$n[e]:F0,Q1=(e,t)=>{if(!t)return null;let n=t.focus||0;return Fe(e)?Z4(t)?{...t,focus:n,fixedPoint:W7(t.fixedPoint??[0,0])}:null:{...t,focus:n}},vd=(e,t)=>{let n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||oa(),fillStyle:e.fillStyle||Qn.fillStyle,strokeWidth:e.strokeWidth||Qn.strokeWidth,strokeStyle:e.strokeStyle??Qn.strokeStyle,roughness:e.roughness??Qn.roughness,opacity:e.opacity==null?Qn.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||Qn.strokeColor,backgroundColor:e.backgroundColor||Qn.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:N6(e.type)?Pr.LEGACY:Pr.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??I6(),link:e.link?po(e.link):null,locked:e.locked??!1};return("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData),{...e,...n,...sJ(n),...t}},oNe=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){let[c,d]=e.font.split(" ");t=parseFloat(c),n=sNe(d)}let r=typeof e.text=="string"&&e.text||"",i=e.lineHeight||(e.height?Nve(e):qh(e.fontFamily));return e=vd(e,{fontSize:t,fontFamily:n,text:r,textAlign:e.textAlign||Fb,verticalAlign:e.verticalAlign||B4,containerId:e.containerId??null,originalText:e.originalText||r,autoResize:e.autoResize??!0,lineHeight:i}),!r&&!e.isDeleted&&(e={...e,originalText:r,isDeleted:!0},e=ex(e)),e;case"freedraw":return vd(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return vd(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":let{startArrowhead:s=null,endArrowhead:o=null}=e,a=e.x,l=e.y,f=!Array.isArray(e.points)||e.points.length<2?[D(0,0),D(e.width,e.height)]:e.points;return(f[0][0]!==0||f[0][1]!==0)&&({points:f,x:a,y:l}=Be.getNormalizedPoints(e)),vd(e,{type:e.type==="draw"?"line":e.type,startBinding:Q1(e,e.startBinding),endBinding:Q1(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:f,x:a,y:l,...h6(f)});case"arrow":{let{startArrowhead:c=null,endArrowhead:d="arrow"}=e,u=e.x,h=e.y,g=!Array.isArray(e.points)||e.points.length<2?[D(0,0),D(e.width,e.height)]:e.points;(g[0][0]!==0||g[0][1]!==0)&&({points:g,x:u,y:h}=Be.getNormalizedPoints(e));let U={type:e.type,startBinding:Q1(e,e.startBinding),endBinding:Q1(e,e.endBinding),lastCommittedPoint:null,startArrowhead:c,endArrowhead:d,points:g,x:u,y:h,elbowed:e.elbowed,...h6(g)};return Fe(e)?vd(e,{...U,elbowed:!0,startBinding:Q1(e,e.startBinding),endBinding:Q1(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):vd(e,U)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return vd(e,{});case"magicframe":case"frame":return vd(e,{name:e.name??null})}return null},aNe=(e,t)=>{if(e.boundElements){let n=e.boundElements.slice(),r=new Set;e.boundElements=n.reduce((i,s)=>{let o=t.get(s.id);if(o&&!r.has(s.id)){if(r.add(s.id),o.isDeleted)return i;i.push(s),je(o)&&!o.containerId&&(o.containerId=e.id)}return i},[])}},lNe=(e,t)=>{let n=e.containerId?t.get(e.containerId):null;if(!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(r=>r.id===e.id)){let r=(n.boundElements||(n.boundElements=[])).slice();r.push({type:"text",id:e.id}),n.boundElements=r}},cNe=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},fI=(e,t,n)=>{let r=new Set,i=t?ct(t):null,s=Rf((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!y6(l)){let f=oNe(l);if(f){let c=i==null?void 0:i.get(l.id);c&&c.version>f.version&&(f=ex(f,c.version)),r.has(f.id)&&(f={...f,id:oa()}),r.add(f.id),a.push(f)}}return a},[]));if(!(n!=null&&n.repairBindings))return s;let o=ct(s);for(let a of s)a.frameId&&cNe(a,o),je(a)&&a.containerId?lNe(a,o):a.boundElements&&aNe(a,o),n.refreshDimensions&&je(a)&&Object.assign(a,UQ(a,fi(a,o),o)),mt(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!Et(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!Et(a))&&(a.endBinding=null));return s.map(a=>{if(Fe(a)&&a.startBinding==null&&a.endBinding==null&&!cI(a.points))return{...a,...iI(a,o,{points:[D(0,0),a.points[a.points.length-1]]}),index:a.index};if(Fe(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,f])=>Math.abs(l)>1e6||Math.abs(f)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);let l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[D(0,0),D(0,-10),D(l.width/2+5,-10),D(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},fNe=(e,t,n)=>{let r=t[e];return r!==void 0?r:n[e]},NF={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??fNe("defaultSidebarDockedPreference",e,t)]},dNe=(e,t)=>{var i;e=e||{};let n=lc(),r={};for(let s of Object.keys(NF))if(s in e){let[o,a]=NF[s](e,n);r[o]=a}for(let[s,o]of Object.entries(n)){let a=e[s],l=t?t[s]:void 0;r[s]=a!==void 0?a:l!==void 0?l:o}return{...r,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...yr(n,r.activeTool.type&&iNe[r.activeTool.type]?r.activeTool:{type:"selection"}),lastActiveTool:null,locked:r.activeTool.locked??!1},zoom:{value:bf(B5(e.zoom)?e.zoom:((i=e.zoom)==null?void 0:i.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:qa.name}:r.openSidebar,gridSize:OTe(B5(e.gridSize)?e.gridSize:$4),gridStep:rQ(B5(e.gridStep)?e.gridStep:TZ),editingFrame:null}},q7=(e,t,n,r)=>({elements:fI(e==null?void 0:e.elements,n,r),appState:dNe(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),RF=e=>{let t=fI(Un(e.elements),null);return t.length?{...e,elements:t}:null},dI=(e=[],t)=>{let n=[];for(let r of e)if(Array.isArray(r)){let i=RF({status:t,elements:r,id:oa(),created:Date.now()});i&&n.push(i)}else{let i=r,s=RF({...i,id:i.id||oa(),status:i.status||t,created:i.created||Date.now()});s&&n.push(s)}return n},Oa=32,mn=12,w0=256,VQ=50,Cu="NOT_SPREADSHEET",q2="VALID_SPREADSHEET",m5=e=>{let t=/^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},rS=(e,t)=>e.slice(1).every(n=>m5(n[t])!==null),_F=e=>{let t=e[0].length;if(t>2)return{type:Cu,reason:"More than 2 columns"};if(t===1){if(!rS(e,0))return{type:Cu,reason:"Value is not numeric"};let l=m5(e[0][0])===null,f=(l?e.slice(1):e).map(c=>m5(c[0]));return f.length<2?{type:Cu,reason:"Less than two rows"}:{type:q2,spreadsheet:{title:l?e[0][0]:null,labels:null,values:f}}}let n=rS(e,0),r=rS(e,1);if(!n&&!r)return{type:Cu,reason:"Value is not numeric"};let[i,s]=r?[0,1]:[1,0],o=m5(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:Cu,reason:"Less than 2 rows"}:{type:q2,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[i]),values:a.map(l=>m5(l[s]))}}},uNe=e=>{let t=[];for(let n=0;n<e[0].length;n++){let r=[];for(let i=0;i<e.length;i++)r.push(e[i][n]);t.push(r)}return t},hNe=e=>{let t=e.trim().split(`
`).map(i=>i.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(i=>i.trim().split(","))),t.length===0)return{type:Cu,reason:"No values"};let n=t[0].length;if(!t.every(i=>i.length===n))return{type:Cu,reason:"All rows don't have same number of columns"};let r=_F(t);if(r.type!==q2){let i=_F(uNe(t));if(i.type===q2)return i}return r},f9=mxe(uxe),ta={fillStyle:"hachure",fontFamily:F0,fontSize:$f,opacity:100,roughness:1,strokeColor:At.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:ho.MIDDLE,locked:!1},WQ=e=>{let t=(Oa+mn)*e.values.length+mn,n=w0+mn*2;return{chartWidth:t,chartHeight:n}},pNe=(e,t,n,r,i)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>bo({groupIds:[r],backgroundColor:i,...ta,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(Oa+mn)+mn*2,y:n+mn/2,width:Oa,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},mNe=(e,t,n,r,i)=>{let s=bo({groupIds:[r],backgroundColor:i,...ta,x:t-mn,y:n-mn,text:"0",textAlign:"right"}),o=bo({groupIds:[r],backgroundColor:i,...ta,x:t-mn,y:n-w0-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},gNe=(e,t,n,r,i)=>{let{chartWidth:s,chartHeight:o}=WQ(e),a=Sh({backgroundColor:i,groupIds:[r],...ta,type:"line",x:t,y:n,width:s,points:[D(0,0),D(s,0)]}),l=Sh({backgroundColor:i,groupIds:[r],...ta,type:"line",x:t,y:n,height:o,points:[D(0,0),D(0,-o)]}),f=Sh({backgroundColor:i,groupIds:[r],...ta,type:"line",x:t,y:n-w0-mn,strokeStyle:"dotted",width:s,opacity:VQ,points:[D(0,0),D(s,0)]});return[a,l,f]},GQ=(e,t,n,r,i,s)=>{let{chartWidth:o,chartHeight:a}=WQ(e),l=e.title?bo({backgroundColor:i,groupIds:[r],...ta,text:e.title,x:t+o/2,y:n-w0-mn*2-$f,roundness:null,textAlign:"center"}):null,f=s?dc({backgroundColor:i,groupIds:[r],...ta,type:"rectangle",x:t,y:n-a,width:o,height:a,strokeColor:At.black,fillStyle:"solid",opacity:6}):null;return[...f?[f]:[],...l?[l]:[],...pNe(e,t,n,r,i),...mNe(e,t,n,r,i),...gNe(e,t,n,r,i)]},bNe=(e,t,n)=>{let r=Math.max(...e.values),i=oa(),s=f9[Math.floor(Math.random()*f9.length)];return[...e.values.map((o,a)=>{let l=o/r*w0;return dc({backgroundColor:s,groupIds:[i],...ta,type:"rectangle",x:t+a*(Oa+mn)+mn,y:n-l-mn,width:Oa,height:l})}),...GQ(e,t,n,i,s,vt.DEV)]},UNe=(e,t,n)=>{let r=Math.max(...e.values),i=oa(),s=f9[Math.floor(Math.random()*f9.length)],o=0,a=[];for(let U of e.values){let y=o*(Oa+mn),x=-(U/r)*w0;a.push([y,x]),o++}let l=Math.max(...a.map(U=>U[0])),f=Math.max(...a.map(U=>U[1])),c=Math.min(...a.map(U=>U[0])),d=Math.min(...a.map(U=>U[1])),u=Sh({backgroundColor:s,groupIds:[i],...ta,type:"line",x:t+mn+Oa/2,y:n-mn,height:f-d,width:l-c,strokeWidth:2,points:a}),h=e.values.map((U,y)=>{let x=y*(Oa+mn)+mn/2,w=-(U/r)*w0+mn/2;return dc({backgroundColor:s,groupIds:[i],...ta,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+x+Oa/2,y:n+w-mn*2,width:mn,height:mn})}),g=e.values.map((U,y)=>{let x=y*(Oa+mn)+mn/2,w=U/r*w0+mn/2+mn;return Sh({backgroundColor:s,groupIds:[i],...ta,type:"line",x:t+x+Oa/2+mn/2,y:n-w,height:w,strokeStyle:"dotted",opacity:VQ,points:[D(0,0),D(0,w)]})});return[...GQ(e,t,n,i,s,vt.DEV),u,...g,...h]},yNe=(e,t,n,r)=>e==="line"?UNe(t,n,r):bNe(t,n,r),uI="clipboard"in navigator&&"writeText"in navigator.clipboard,hI="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,xNe=e=>!!([ea.excalidraw,ea.excalidrawClipboard,ea.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),vNe=({types:e,files:t})=>{var r,i,s,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(let[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((r=n.clipboardData)==null||r.setData(a,l),((i=n.clipboardData)==null?void 0:i.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(f){throw new Error(f.message)}}if(t){let a=-1;for(let l of t){a++;try{if((s=n.clipboardData)==null||s.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(f){throw new Error(f.message)}}}return n},wNe=({elements:e,files:t})=>{let n=ct(e),r=new Set(e.filter(a=>at(a))),i=!1,s=e.reduce((a,l)=>(Go(l)&&(i=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});i&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");let o={type:ea.excalidrawClipboard,elements:e.map(a=>{if(Hs(a,n)&&!r.has(Hs(a,n))){let l=d1(a);return ye(l,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},ENe=async(e,t,n)=>{await Kb(wNe({elements:e,files:t}),n)},SNe=e=>{let t=hNe(e);return t.type===q2?{spreadsheet:t.spreadsheet}:null};function XQ(e){var n;let t=[];for(let r of e.childNodes)if(r.nodeType===3){let i=(n=r.textContent)==null?void 0:n.trim();i&&t.push({type:"text",value:i})}else if(r instanceof HTMLImageElement){let i=r.getAttribute("src");i&&i.startsWith("http")&&t.push({type:"imageUrl",value:i})}else t=t.concat(XQ(r));return t}var kNe=e=>{var n;let t=(n=e.clipboardData)==null?void 0:n.getData(it.html);if(!t)return null;try{let r=new DOMParser().parseFromString(t,it.html),i=XQ(r.body);if(i.length)return{type:"mixedContent",value:i}}catch(r){console.error(`error in parseHTMLFromPaste: ${r.message}`)}return null},CNe=async()=>{var n,r,i,s;let e={},t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((r=navigator.clipboard)!=null&&r.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);let a=await((i=navigator.clipboard)==null?void 0:i.readText());if(a)return{[it.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(let o of t)for(let a of o.types)if(VZ(Ixe,a))try{if(a===it.text||a===it.html)e[a]=await(await o.getType(a)).text();else if(pJ(a)){let l=await o.getType(a),f=g5(l,a,void 0);e[a]=f}else throw new HB(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof HB?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},ANe=async(e,t=!1)=>{var n,r;try{let i=!t&&e&&kNe(e);return i?i.value.every(s=>s.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(it.text))||i.value.map(s=>s.value).join(`
`).trim()}:i:{type:"text",value:(((r=e.clipboardData)==null?void 0:r.getData(it.text))||"").trim()}}catch{return{type:"text",value:""}}},KQ=async(e,t=!1)=>{let n=await ANe(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{let r=!t&&SNe(n.value);if(r)return r}catch(r){console.error(r)}try{let r=JSON.parse(n.value),i=r.type===ea.excalidrawClipboardWithAPI;if(xNe(r))return{elements:r.elements,files:r.files,text:t?JSON.stringify(r.elements,null,2):void 0,programmaticAPI:i}}catch{}return{text:n.value}},MNe=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[it.png]:e})])}catch(t){if(Hb(e))await navigator.clipboard.write([new window.ClipboardItem({[it.png]:await e})]);else throw t}},Kb=async(e,t)=>{var n,r;if(uI)try{await navigator.clipboard.writeText(e||"");return}catch(i){console.error(i)}try{if(t){if((n=t.clipboardData)==null||n.setData(it.text,e||""),((r=t.clipboardData)==null?void 0:r.getData(it.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(i){console.error(i)}if(!TNe(e))throw new Error("Error copying to clipboard.")},TNe=e=>{e||(e=" ");let t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";let r=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${r}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let i=!1;try{n.select(),n.setSelectionRange(0,n.value.length),i=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),i},pI=({elements:e,appState:t,files:n,maxWidthOrHeight:r,getDimensions:i,exportPadding:s,exportingFrame:o})=>{let{elements:a,appState:l}=q7({elements:e,appState:t},null,null),{exportBackground:f,viewBackgroundColor:c}=l;return zQ(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:f,exportPadding:s,viewBackgroundColor:c,exportingFrame:o},(d,u)=>{let h=document.createElement("canvas");if(r){typeof i=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");let U=Math.max(d,u),y=r<U?r/U:(t==null?void 0:t.exportScale)??1;return h.width=d*y,h.height=u*y,{canvas:h,scale:y}}let g=(i==null?void 0:i(d,u))||{width:d,height:u};return h.width=g.width,h.height=g.height,{canvas:h,scale:g.scale??1}})},YQ=async({elements:e,appState:t=lc(),files:n={},exportPadding:r,renderEmbeddables:i,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{let{elements:l,appState:f}=q7({elements:e,appState:t},null,null),c={...f,exportPadding:r};return tI(l,c,n,{exportingFrame:s,renderEmbeddables:i,skipInliningFonts:o,reuseImages:a})},INe=e=>e.type==="diamond"?[D(e.width/2,0),D(e.width,e.height/2),D(e.width/2,e.height),D(0,e.height/2)]:[D(0,0),D(0+e.width,0),D(0+e.width,e.height),D(0,e.height)],NNe=e=>mt(e)||ia(e)?e.points:INe(e),PF=e=>{let t=e.reduce((n,[r,i])=>(n.minY=Math.min(n.minY,i),n.minX=Math.min(n.minX,r),n.maxX=Math.max(n.maxX,r),n.maxY=Math.max(n.maxY,i),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},ZQ=e=>{let t=NNe(e),{cx:n,cy:r}=PF(t),i=D(n,r),s=t.map(c=>pe(c,i,e.angle)),{minX:o,minY:a,maxX:l,maxY:f}=PF(s);return[o+e.x,a+e.y,l+e.x,f+e.y]},DF=(e,t,n=!1)=>{let r=ZQ(e),i=t[0]<=r[0]&&t[2]>=r[2]&&t[1]<=r[1]&&t[3]>=r[3];return n?i?!0:r[0]<=t[0]&&r[2]>=t[2]&&r[1]<=t[1]&&r[3]>=t[3]:i},RNe=(e,t)=>{let n=ZQ(e);return(ny(n[0],Bi(t[0],t[2]))||ny(t[0],Bi(n[0],n[2])))&&(ny(n[1],Bi(t[1],t[3]))||ny(t[1],Bi(n[1],n[3])))},_Ne=({elements:e,bounds:t,type:n,errorMargin:r=0})=>{var o;KZ(t)&&(t=sl(t,ct(e)));let i=[t[0]-r,t[1]-r,t[2]+r,t[3]+r],s=new Set;for(let a of e)if(!s.has(a.id)&&(n==="overlap"?RNe(a,i):n==="inside"?DF(a,i):DF(a,i,!0))){if(s.add(a.id),a.boundElements)for(let l of a.boundElements)s.add(l.id);je(a)&&a.containerId&&s.add(a.containerId),Et(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}return e.filter(a=>s.has(a.id))};function LF(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function PNe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}var DNe=1e-6;function OF(e,t){let n=Ye(e[1],e[0]),r=Ye(t,e[0]),i=$r(n,r);return Math.abs(i)<DNe}function iS(e,t){let n=Ye(e[1],e[0]),r=Ye(t,e[0]);return $r(n,r)<0}function jF(e,t){return OF(e,t[0])||OF(e,t[1])||(iS(e,t[0])?!iS(e,t[1]):iS(e,t[1]))}function LNe(e,t){return PNe(LF(e),LF(t))&&jF(e,t)&&jF(t,e)}var qQ=(e,t,n)=>{let r=ct(e);for(let i of t)if(i.frameId){let s=n.get(i.id),o=n.get(i.frameId);if(s){let a=r.get(s);a&&ye(a,{frameId:o??i.frameId},!1)}}};function mI(e,t,n){let r=QB(t,n),i=QB(e,n);return r.some(s=>i.some(o=>LNe(s,o)))}var QQ=(e,t,n)=>J7(vI(e,t,n,!1)).filter(r=>!at(r)&&!r.frameId||r.frameId===t.id),gI=(e,t,n)=>vI([t],e,n).some(r=>r.id===t.id),Yb=(e,t,n)=>{let[r,i,s,o]=gt(t,n),[a,l,f,c]=nn(e);return r<=a&&i<=l&&s>=f&&o>=c},I0=(e,t,n)=>Yb([e],t,n)||mI(e,t,n)||gI(e,t,n),BF=(e,t,n)=>{let[r,i,s,o]=gt(t,n);return DZ(D(r,i),D(e.x,e.y),D(s,o))},ONe=e=>{let t=new Map;for(let n of e){let r=at(n)?n.id:n.frameId;r&&!t.has(r)&&t.set(r,hc(e,r))}return t},hc=(e,t)=>{let n=[];for(let r of e.values())r.frameId===t&&n.push(r);return n},bI=e=>e.filter(t=>at(t)),UI=e=>{let t=ct(bI(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},a3=(e,t,n,r)=>{let i=hc(e,t.id),s=new Set(i),o=new Set([...QQ(e,t,r),...i.filter(u=>gI(u,t,r))]),a=i.filter(u=>!o.has(u)),l=new Set(Array.from(o).flatMap(u=>u.groupIds));for(let u of a)if(!mI(u,t,r))u.groupIds.length===0&&s.delete(u);else if(u.groupIds.length>0)for(let h of u.groupIds)l.add(h);for(let u of a)if(u.groupIds.length>0){let h=!0;for(let g of u.groupIds)l.has(g)&&(h=!1);h&&s.delete(u)}let f=Array.from(o).filter(u=>u.groupIds.length===0);for(let u of f)s.add(u);let c=Array.from(o).filter(u=>u.groupIds.length>0),d=aQ(c,n);for(let[u,h]of Object.entries(d))if(h){let g=Cn(e,u);if(Yb(g,t,r))for(let U of g)s.add(U)}return[...s].filter(u=>!(je(u)&&u.containerId))},jNe=(e,t,n)=>BNe(J7(e,QQ(e,t,n)),t,n),BNe=(e,t,n)=>{let r=[],i=new Map;for(let s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>i.get(a)))o=!0;else{let a=new Set(s.groupIds.flatMap(l=>Cn(n,l)));o=!Yb(Array.from(a),t,n)}s.groupIds.forEach(a=>{i.set(a,o)})}o||r.push(s)}return r},Hs=(e,t)=>e.frameId&&t.get(e.frameId)||null,FNe=(e,t)=>{let n=new Set,r=ct(e);e=J7(e);for(let o of e)at(o)&&o.id!==t.id&&n.add(o.id);let i=new Set,s=[];for(let o of e)if(!(at(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){let a=o.groupIds.at(-1);if(!i.has(a)){i.add(a);let l=Cn(e,a);if(l.some(f=>I0(f,t,r)))for(let f of l)s.push(f)}}else I0(o,t,r)&&s.push(o);return s},W5=(e,t,n,r)=>{let i=ct(e),s=new Map;for(let f of e.values())f.frameId===n.id&&s.set(f.id,!0);let o=new Set(t.map(f=>f.id)),a=[],l=new Set;for(let f of t)at(f)&&f.id!==n.id&&l.add(f.id);for(let f of J7(e,t)){if(at(f)||f.frameId&&l.has(f.frameId)||f.frameId&&r.selectedElementIds[f.id]&&r.selectedElementIds[f.frameId])continue;s.has(f.id)||a.push(f);let c=xt(f,i);c&&!o.has(c.id)&&!s.has(c.id)&&a.push(c)}for(let f of a)ye(f,{frameId:n.id},!1);return e},Q7=(e,t)=>{let n=new Map,r=new Map;for(let i of e)if(i.frameId){n.set(i.id,i);let s=r.get(i.frameId)||[];s.push(i);let o=xt(i,t);o&&(n.set(o.id,o),s.push(o)),r.set(i.frameId,s)}for(let[,i]of n)ye(i,{frameId:null},!1)},JQ=(e,t)=>{let n=hc(e,t.id);return Q7(n,ct(e)),e},eJ=(e,t,n,r)=>W5(JQ(e,n),t,n,r.state).slice(),U6=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),i=new Set(r);if(t.editingGroupId)for(let a of r)a.groupIds.length===0?i.add(a):a.groupIds.flatMap(l=>Cn(e,l)).forEach(l=>i.add(l));let s=new Set,o=ct(e);return i.forEach(a=>{a.frameId&&!at(a)&&!d9(a,o,t)&&s.add(a)}),s.size>0&&Q7(s,o),e},J7=(e,t)=>{let n=new Set,r=t||e;for(let o of r.values()){let a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}let i=new Set;for(let o of n)Cn(e,o).some(a=>at(a))&&i.add(o);let s=[];for(let o of r.values())i.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},QC=(e,t,n)=>{let r=je(e)&&fi(e,t)||e;return r.frameId&&n.selectedElementIds[r.id]&&n.selectedElementIds[r.frameId]?Hs(r,t):n.selectedElementIds[r.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:Hs(r,t)},d9=(e,t,n,r)=>{var l;let i=(r==null?void 0:r.targetFrame)??QC(e,t,n);if(!i)return!1;let s=je(e)&&fi(e,t)||e,o=f=>{r!=null&&r.checkedGroups&&s.groupIds.forEach(c=>{var d;(d=r.checkedGroups)==null||d.set(c,f)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[i.id])return!0;if(s.groupIds.length===0)return I0(s,i,t);for(let f of s.groupIds)if((l=r==null?void 0:r.checkedGroups)!=null&&l.has(f))return r.checkedGroups.get(f);let a=new Set(s.groupIds.filter(f=>r!=null&&r.checkedGroups?!r.checkedGroups.has(f):!0).flatMap(f=>Cn(t,f)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){let f=new Set(wt(t,n));if(n.frameToHighlight!==null)return!0;f.forEach(c=>{a.delete(c)})}for(let f of a)if(at(f))return o(!1),!1;for(let f of a)if(I0(f,i,t))return o(!0),!0;return!1},FF=(e,t,n,r,i)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;let s=mI(e,t,r)||gI(e,t,r);if(s){for(let o of e.groupIds)i==null||i.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!Yb([e],t,r)){let o=!1;if(n.selectedElementsAreBeingDragged)o=d9(e,r,n,{targetFrame:t,checkedGroups:i});else{o=e.frameId===t.id;for(let a of e.groupIds)i==null||i.set(a,o)}for(let a of e.groupIds)i==null||i.set(a,o);return o}return!1},tJ=e=>e.name===null?GZ(e)?"Frame":"AI Frame":e.name,yI=(e,t)=>_Ne({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),nJ=e=>{let t=ct(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},xI=e=>{let t=new Set;return e.forEach(n=>{at(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},vI=(e,t,n,r=!0)=>{let[i,s,o,a]=gt(t,n),l=e.filter(f=>{let[c,d,u,h]=sl(f,n),g=Hs(f,n);if(g){let[U,y,x,w]=sl(g,n);c=Math.max(U,c),d=Math.max(y,d),u=Math.min(x,u),h=Math.min(w,h)}return f.locked===!1&&f.type!=="selection"&&!Mn(f)&&i<=c&&s<=d&&o>=u&&a>=h});return l=r?xI(l):l,l=l.filter(f=>{let c=Hs(f,n);return c?I0(f,c,n):!0}),l},rJ=(e,t,n,r)=>{let i=new Set(t.map(s=>s.id));return e.filter(s=>{let o=u9(s,n.width,n.height,n,r);return!i.has(s.id)&&o})},Dr=function(){let e=null,t=null,n=null,r=(i,s)=>(n!=null&&i===e&&s.selectedElementIds===t||(n=i.some(o=>s.selectedElementIds[o.id]),e=i,t=s.selectedElementIds),n);return r.clearCache=()=>{e=null,t=null,n=null},r}(),$Ne=(e,t,n)=>{let r=Array.from(new Set(wt(e,t).map(i=>n(i))));return r.length===1?r[0]:null},wt=(e,t,n)=>{let r=new Set,i=[];for(let s of e.values()){if(t.selectedElementIds[s.id]){i.push(s),r.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&Mn(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){i.push(s),r.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){let s=[];return i.forEach(o=>{at(o)&&hc(e,o.id).forEach(a=>!r.has(a.id)&&s.push(a)),s.push(o)}),s}return i},iJ=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:wt(e,t,{includeBoundTextElement:!0}),Yt=(e,t)=>Si(t.selectedElementIds,e)?t.selectedElementIds:e,$F=e=>{let t=new Map,n=[];for(let r of e)r.isDeleted||(n.push(r),t.set(r.id,r));return{elementsMap:t,elements:n}},zNe=jb(e=>{(vt.DEV||vt.MODE===Fs.TEST||window!=null&&window.DEBUG_FRACTIONAL_INDICES)&&YT(e,{shouldThrow:vt.DEV||vt.MODE===Fs.TEST,includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),HNe=e=>{let t=["includeBoundTextElement","includeElementsInFrames"],n="";for(let r of t)n+=`${r}:${e[r]?"1":"0"}`;return n},zF=e=>typeof e=="string",JC=class l3{constructor(){Z(this,"callbacks",new Set),Z(this,"nonDeletedElements",[]),Z(this,"nonDeletedElementsMap",ra(new Map)),Z(this,"elements",[]),Z(this,"nonDeletedFramesLikes",[]),Z(this,"frames",[]),Z(this,"elementsMap",ra(new Map)),Z(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map}),Z(this,"sceneNonce"),Z(this,"insertElement",t=>{let n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)}),Z(this,"insertElements",t=>{var r;if(!t.length)return;let n=(r=t[0])!=null&&r.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)}),Z(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null),Z(this,"getElementsFromId",t=>{let n=this.getNonDeletedElementsMap(),r=n.get(t);return r?[r]:Cn(n,t)})}static mapElementToScene(t,n){zF(t)?this.sceneMapById.set(t,n):(this.sceneMapByElement.set(t,n),this.sceneMapById.set(t.id,n))}static getScene(t){return zF(t)?this.sceneMapById.get(t)||null:this.sceneMapByElement.get(t)||null}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){let n=HNe(t),r=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===r&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){let s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();let i=wt(r,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,i)),i}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){let n=this.getElement(t);return n&&nA(n)?n:null}mapElements(t){let n=!1,r=this.elements.map(i=>{let s=t(i);return s!==i&&(n=!0),s});return n&&this.replaceAllElements(r),n}replaceAllElements(t){let n=t instanceof Array?t:Array.from(t.values()),r=[];zNe(n),this.elements=Rf(n),this.elementsMap.clear(),this.elements.forEach(s=>{at(s)&&r.push(s),this.elementsMap.set(s.id,s),l3.mapElementToScene(s,this)});let i=$F(this.elements);this.nonDeletedElements=i.elements,this.nonDeletedElementsMap=i.elementsMap,this.frames=r,this.nonDeletedFramesLikes=$F(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=fc();for(let t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),l3.sceneMapById.forEach((t,n)=>{t===this&&l3.sceneMapById.delete(n)}),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let r=[...this.elements.slice(0,n),t,...this.elements.slice(n)];uc(r,ct([t])),this.replaceAllElements(r)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let r=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];uc(r,ct(t)),this.replaceAllElements(r)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}};Z(JC,"sceneMapByElement",new WeakMap),Z(JC,"sceneMapById",new Map);var VNe=JC,_f=VNe,ye=(e,t,n=!0,r)=>{var c,d;let i=!1,{points:s,fixedSegments:o,fileId:a,startBinding:l,endBinding:f}=t;if(Fe(e)&&(Object.keys(t).length===0||typeof s<"u"||typeof o<"u"||typeof l<"u"||typeof f<"u")){let u=ra(((c=_f.getScene(e))==null?void 0:c.getNonDeletedElementsMap())??new Map);t={...t,angle:0,...iI({...e,x:t.x||e.x,y:t.y||e.y},u,{fixedSegments:o,points:s,startBinding:l,endBinding:f},{isDragging:r==null?void 0:r.isDragging})}}else typeof s<"u"&&(t={...h6(s),...t});for(let u in t){let h=t[u];if(typeof h<"u"){if(e[u]===h&&(typeof h!="object"||h===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){let g=e[u],U=h;if(g[0]===U[0]&&g[1]===U[1])continue}else if(u==="points"){let g=e[u],U=h;if(g.length===U.length){let y=!1,x=g.length;for(;--x;){let w=g[x],E=U[x];if(w[0]!==E[0]||w[1]!==E[1]){y=!0;break}}if(!y)continue}}e[u]=h,i=!0}}return i&&((typeof t.height<"u"||typeof t.width<"u"||typeof a<"u"||typeof s<"u")&&Vn.delete(e),e.version++,e.versionNonce=fc(),e.updated=I6(),n&&((d=_f.getScene(e))==null||d.triggerUpdate())),e},yt=(e,t,n=!1)=>{let r=!1;for(let i in t){let s=t[i];if(typeof s<"u"){if(e[i]===s&&(typeof s!="object"||s===null))continue;r=!0}}return!r&&!n?e:{...e,...t,updated:I6(),version:e.version+1,versionNonce:fc()}},ex=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=fc(),e.updated=I6(),e),y6=e=>mt(e)||ia(e)?e.points.length<2:e.width===0&&e.height===0,u9=(e,t,n,r,i)=>{let[s,o,a,l]=sl(e,i),f=yn({clientX:r.offsetLeft,clientY:r.offsetTop},r),c=yn({clientX:r.offsetLeft+t,clientY:r.offsetTop+n},r);return f.x<=a&&f.y<=l&&c.x>=s&&c.y>=o},c3=(e,t,n,r,i,s)=>{let[o,a,l,f]=nn(e,i),c=yn({clientX:r.offsetLeft+((s==null?void 0:s.left)||0),clientY:r.offsetTop+((s==null?void 0:s.top)||0)},r),d=yn({clientX:r.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:r.offsetTop+n-((s==null?void 0:s.bottom)||0)},r);return o>=c.x&&a>=c.y&&l<=d.x&&f<=d.y},HF=(e,t,n)=>{let r=Math.abs(t),i=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){let s=Math.round(Math.atan(i/r)/A0)*A0;s===0?n=0:s===Math.PI/2?t=0:n=r*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=r*Math.sign(n));return{width:t,height:n}},eA=(e,t,n,r)=>{let i=n-e,s=r-t,o=Math.round(Math.atan(s/i)/A0)*A0;if(o===0)s=0;else if(o===Math.PI/2)i=0;else{let a=Math.tan(o),l=-1,f=t-a*e,c=-1/a,d=-1,u=r-c*n,h=(l*u-d*f)/(a*d-c*l),g=(f*c-u*a)/(a*d-c*l);i=h-e,s=g-t}return{width:i,height:s}},sJ=e=>{let t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){let n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){let n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},VF={mouse:8,pen:16,touch:28},WNe=16,oJ={e:!0,s:!0,n:!0,w:!0},WF={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},sS={e:!0,s:!0,n:!0,w:!0},jc=(e,t,n,r,i,s,o)=>{let[a,l]=pe(D(e+n/2,t+r/2),D(i,s),o);return[a-n/2,l-r/2,n,r]},wI=e=>!(e.viewport.isMobile||e.isTouchScreen&&(bxe||AZ)),G5=e=>wI(e)?oJ:{},EI=([e,t,n,r,i,s],o,a,l,f={},c=4,d=Wh)=>{let u=VF[l],h=u/a.value,g=u/a.value,U=u/a.value,y=u/a.value,x=n-e,w=r-t,E=c/a.value,S=(u-d*2)/(2*a.value),A={nw:f.nw?void 0:jc(e-E-U+S,t-E-y+S,h,g,i,s,o),ne:f.ne?void 0:jc(n+E-S,t-E-y+S,h,g,i,s,o),sw:f.sw?void 0:jc(e-E-U+S,r+E-S,h,g,i,s,o),se:f.se?void 0:jc(n+E-S,r+E-S,h,g,i,s,o),rotation:f.rotation?void 0:jc(e+x/2-h/2,t-E-y+S-WNe/a.value,h,g,i,s,o)},M=5*VF.mouse/a.value;return Math.abs(x)>M&&(f.n||(A.n=jc(e+x/2-h/2,t-E-y+S,h,g,i,s,o)),f.s||(A.s=jc(e+x/2-h/2,r+E-S,h,g,i,s,o))),Math.abs(w)>M&&(f.w||(A.w=jc(e-E-U+S,t+w/2-g/2,h,g,i,s,o)),f.e||(A.e=jc(n+E-S,t+w/2-g/2,h,g,i,s,o))),A},aJ=(e,t,n,r="mouse",i=oJ)=>{if(e.locked||Fe(e))return{};if(e.type==="freedraw"||mt(e)){if(e.points.length===2){let[,o]=e.points;o[0]===0||o[1]===0?i=sS:o[0]>0&&o[1]<0?i=WF:o[0]>0&&o[1]>0?i=sS:o[0]<0&&o[1]>0?i=WF:o[0]<0&&o[1]<0&&(i=sS)}}else at(e)&&(i={...i,rotation:!0});let s=mt(e)?Wh+8:Zt(e)?0:Wh;return EI(gt(e,n,!0),e.angle,t,r,i,s,Zt(e)?0:void 0)},lJ=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;let n=e[0];return Fe(n)?!1:mt(n)?n.points.length>2:!0},tA=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],GNe=(e,t,n,r,i,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;let{rotation:l,...f}=aJ(e,s,t,o,G5(a));if(l&&tA(l,r,i))return"rotation";let c=Object.keys(f).filter(d=>{let u=f[d];return u?tA(u,r,i):!1});if(c.length>0)return c[0];if(wI(a)){let[d,u,h,g,U,y]=gt(e,t);if(!(mt(e)&&e.points.length<=2)){let x=Zt(e)?0:F4/s.value,w=F4/s.value,E=cJ(D(d-x,u-x),D(h+x,g+x),D(U,y),e.angle);for(let[S,A]of Object.entries(E))if(Gh(D(r,i),A,w))return S}}return!1},GF=(e,t,n,r,i,s,o,a)=>e.reduce((l,f)=>{if(l)return l;let c=GNe(f,o,t,n,r,i,s,a);return c?{element:f,transformHandleType:c}:null},null),XF=([e,t,n,r],i,s,o,a,l)=>{let f=EI([e,t,n,r,(e+n)/2,(t+r)/2],0,o,a,G5(l)),c=Object.keys(f).find(d=>{let u=f[d];return u&&tA(u,i,s)});if(c)return c;if(wI(l)){let d=(e+n)/2,u=(t+r)/2,h=F4/o.value,g=cJ(D(e-h,t-h),D(n+h,r+h),D(d,u),0);for(let[U,y]of Object.entries(g))if(Gh(D(i,s),y,h))return U}return!1},oS=["ns","nesw","ew","nwse"],XNe=(e,t)=>{let n=oS.indexOf(e);if(n>=0){let r=Math.round(t/(Math.PI/4));e=oS[(n+r)%oS.length]}return e},KF=e=>{let{element:t,transformHandleType:n}=e,r=t&&Math.sign(t.height)*Math.sign(t.width)===-1,i=null;switch(n){case"n":case"s":i="ns";break;case"w":case"e":i="ew";break;case"nw":case"se":r?i="nesw":i="nwse";break;case"ne":case"sw":r?i="nwse":i="nesw";break;case"rotation":return"grab"}return i&&t&&(i=XNe(i,t.angle)),i?`${i}-resize`:""},cJ=([e,t],[n,r],i,s)=>{let o=pe(D(e,t),i,s),a=pe(D(n,t),i,s),l=pe(D(e,r),i,s),f=pe(D(n,r),i,s);return{n:[o,a],e:[a,f],s:[f,l],w:[l,o]}},KNe=(e,t,n,r,i,s,o,a,l,f,c,d)=>{if(n.length===1){let[u]=n;if(t==="rotation")Fe(u)||(YNe(u,r,i,l,f,s),zs(u,r));else{if(je(u)&&t)return ZNe(e,u,r,t,o,l,f),zs(u,r),!0;if(t){let h=n[0].id,g=r.get(h),U=e.get(h);if(g&&U){let{nextWidth:y,nextHeight:x}=nRe(g,U,r,e,t,l,f,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});Q2(y,x,g,U,r,e,t,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o})}}}return!0}else if(n.length>1){if(t==="rotation")return qNe(e,n,r,i,l,f,s,c,d),!0;if(t){let{nextWidth:u,nextHeight:h,flipByX:g,flipByY:U,originalBoundingBox:y}=rRe(n,e,r,t,l,f,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});return fJ(n,r,t,i,e,{shouldResizeFromCenter:o,shouldMaintainAspectRatio:a,flipByX:g,flipByY:U,nextWidth:u,nextHeight:h,originalBoundingBox:y}),!0}}return!1},YNe=(e,t,n,r,i,s)=>{let[o,a,l,f]=gt(e,t),c=(o+l)/2,d=(a+f)/2,u;at(e)?u=0:(u=5*Math.PI/2+Math.atan2(i-d,r-c),s&&(u=u+A0/2,u=u-u%A0),u=V4(u));let h=If(e);if(ye(e,{angle:u}),h){let g=n.getElement(h);g&&!Et(e)&&ye(g,{angle:u})}},SI=(e,t,n,r)=>mt(e)||ia(e)?{points:t9(0,t,t9(1,n,e.points,r),r)}:{},kI=(e,t,n)=>{let r=e.width;if(Mn(e)){let s=fi(e,t);s&&(r=Nf(s,e))}let i=e.fontSize*(n/r);return i<UT?null:{size:i}},ZNe=(e,t,n,r,i,s,o)=>{let[a,l,f,c,d,u]=gt(t,n),[h,g]=pe(D(s,o),D(d,u),-t.angle),U=0,y=0;r!=="e"&&r!=="w"&&(r.includes("e")&&(U=(h-a)/(f-a)),r.includes("w")&&(U=(f-h)/(f-a)),r.includes("n")&&(y=(c-g)/(c-l)),r.includes("s")&&(y=(g-l)/(c-l)));let x=Math.max(U,y);if(x>0){let w=t.width*x,E=t.height*x,S=kI(t,n,w);if(S===null)return;let A=[a,l],M=[f,c],C=[d,u],T=D(a,l);if(["n","w","nw"].includes(r)&&(T=D(M[0]-Math.abs(w),M[1]-Math.abs(E))),r==="ne"){let $=[A[0],M[1]];T=D($[0],$[1]-Math.abs(E))}if(r==="sw"){let $=[M[0],A[1]];T=D($[0]-Math.abs(w),$[1])}["s","n"].includes(r)&&(T[0]=C[0]-w/2),["e","w"].includes(r)&&(T[1]=C[1]-E/2),i&&(T[0]=C[0]-Math.abs(w)/2,T[1]=C[1]-Math.abs(E)/2);let R=t.angle,P=pe(T,D(d,u),R),_=D(T[0]+Math.abs(w)/2,T[1]+Math.abs(E)/2),O=pe(_,D(d,u),R);T=pe(P,O,-R);let[F,B]=T;ye(t,{fontSize:S.size,width:w,height:E,x:F,y:B})}if(r==="e"||r==="w"){let w=e.get(t.id),[E,S,A,M]=v0(w,w.width,w.height,!0),C=D(E,S),T=D(A,M),R=zb(C,T),P=pe(D(s,o),R,-w.angle),[_,,O]=v0(t,t.width,t.height,!0),F=O-_,B=T[0]-C[0],$=AT(cn({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight),z=B/F;r.includes("e")&&(z=(P[0]-C[0])/F),r.includes("w")&&(z=(T[0]-P[0])/F);let H=t.width*z<$?$:t.width*z,G=f1(t.originalText,cn(t),Math.abs(H)),V=Xi(G,cn(t),t.lineHeight),Y=V.height,[K,q,se,de]=v0(w,H,Y,!0),xe=se-K,ve=de-q,ue=[...C];["n","w","nw"].includes(r)&&(ue=[T[0]-Math.abs(xe),C[1]]);let te=w.angle,le=pe(ue,R,te),he=D(ue[0]+Math.abs(xe)/2,ue[1]+Math.abs(ve)/2),we=pe(he,R,te);ue=pe(le,we,-te);let Se={width:Math.abs(H),height:Math.abs(V.height),x:ue[0],y:ue[1],text:G,autoResize:!1};ye(t,Se)}},qNe=(e,t,n,r,i,s,o,a,l)=>{var c;let f=5*Math.PI/2+Math.atan2(s-l,i-a);o&&(f+=A0/2,f-=f%A0);for(let d of t)if(!at(d)){let[u,h,g,U]=gt(d,n),y=(u+g)/2,x=(h+U)/2,w=((c=e.get(d.id))==null?void 0:c.angle)??d.angle,[E,S]=pe(D(y,x),D(a,l),f+w-d.angle);Fe(d)?ye(d,{points:DTe(d,n)}):ye(d,{x:d.x+(E-y),y:d.y+(S-x),angle:V4(f+w)},!1),zs(d,n,{simultaneouslyUpdated:t});let A=xt(d,n);A&&!Et(d)&&ye(A,{x:A.x+(E-y),y:A.y+(S-x),angle:V4(f+w)},!1)}r.triggerUpdate()},QNe=(e,t,n,r,i)=>{let[s,o,a,l]=t.length===1?gt(t[0],n):nn(t),f=(s+a)/2,c=(o+l)/2,d=t.length===1?t[0].angle:0;switch([r,i]=pe(D(r,i),D(f,c),-d),e){case"n":return pe(D(r-(s+a)/2,i-o),D(0,0),d);case"s":return pe(D(r-(s+a)/2,i-l),D(0,0),d);case"w":return pe(D(r-s,i-(o+l)/2),D(0,0),d);case"e":return pe(D(r-a,i-(o+l)/2),D(0,0),d);case"nw":return pe(D(r-s,i-o),D(0,0),d);case"ne":return pe(D(r-a,i-o),D(0,0),d);case"sw":return pe(D(r-s,i-l),D(0,0),d);case"se":return pe(D(r-a,i-l),D(0,0),d);default:return[0,0]}},JNe=(e,t)=>{let[,[n,r]]=t.points;return e==="nw"&&(n<0||r<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||r>0)?"end":"origin"},eRe=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},tRe=(e,t,n,r,i,s,o,a,l)=>{let f=eRe(o,a,l),[c,d]=e;switch(f){case"top-left":return{x:c+(t-r)/2+(r-t)/2*Math.cos(s)+(n-i)/2*Math.sin(s),y:d+(n-i)/2+(r-t)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"top-right":return{x:c+(t-r)/2*(Math.cos(s)+1)+(n-i)/2*Math.sin(s),y:d+(n-i)/2+(t-r)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"bottom-left":return{x:c+(t-r)/2*(1-Math.cos(s))+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)+(r-t)/2*Math.sin(s)};case"bottom-right":return{x:c+(t-r)/2*(Math.cos(s)+1)+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)+(t-r)/2*Math.sin(s)};case"center":return{x:c-(r-t)/2,y:d-(i-n)/2};case"east-side":return{x:c+(t-r)/2*(Math.cos(s)+1),y:d+(t-r)/2*Math.sin(s)+(n-i)/2};case"west-side":return{x:c+(t-r)/2*(1-Math.cos(s)),y:d+(r-t)/2*Math.sin(s)+(n-i)/2};case"north-side":return{x:c+(t-r)/2+(n-i)/2*Math.sin(s),y:d+(i-n)/2*(Math.cos(s)-1)};case"south-side":return{x:c+(t-r)/2+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)}}},Q2=(e,t,n,r,i,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:f=!1}={})=>{let c={},d=xt(n,i);if(d){let U=s.get(d.id);if(U&&(c={fontSize:U.fontSize}),l){let y={...n,width:e,height:t},x=kI(d,i,Nf(y,d));if(x===null)return;c={fontSize:x.size}}else{let y=qZ(cn(d),d.lineHeight),x=QZ(d.fontSize,d.lineHeight);e=Math.max(e,y),t=Math.max(t,x)}}let u=SI(r,e,t,!0),h=D(r.x,r.y);if(mt(r)){let[U,y]=sl(r,s);h=D(U,y)}let g=tRe(h,r.width,r.height,e,t,r.angle,o,l,f);if(mt(r)&&u.points){let U=r.x-h[0],y=r.y-h[1];g.x+=U,g.y+=y;let x=u.points[0][0],w=u.points[0][1];g.x+=x,g.y+=w,u.points=u.points.map(E=>D(E[0]-x,E[1]-w))}if(e<0&&(g.x=g.x+e),t<0&&(g.y=g.y+t),"scale"in n&&"scale"in r&&ye(n,{scale:[(Math.sign(e)||r.scale[0])*r.scale[0],(Math.sign(t)||r.scale[1])*r.scale[1]]}),Et(n)&&d&&l){let U=e/n.width*d.fontSize;if(U<UT)return;c.fontSize=U}if(e!==0&&t!==0&&Number.isFinite(g.x)&&Number.isFinite(g.y)){let U={...g,width:Math.abs(e),height:Math.abs(t),...u};ye(n,U,a),zs(n,i,{newSize:{width:e,height:t}}),d&&c!=null&&ye(d,{fontSize:c.fontSize}),Xb(n,i,o,l)}},nRe=(e,t,n,r,i,s,o,{shouldMaintainAspectRatio:a=!1,shouldResizeFromCenter:l=!1}={})=>{let[f,c,d,u]=v0(t,t.width,t.height,!0),h=D(f,c),g=D(d,u),U=zb(h,g),y=pe(D(s,o),U,-t.angle),[x,w,E,S]=v0(e,e.width,e.height,!0),A=E-x,M=S-w,C=g[0]-h[0],T=g[1]-h[1],R=C/A,P=T/M;i.includes("e")&&(R=(y[0]-h[0])/A),i.includes("s")&&(P=(y[1]-h[1])/M),i.includes("w")&&(R=(g[0]-y[0])/A),i.includes("n")&&(P=(g[1]-y[1])/M);let _=e.width*R,O=e.height*P;if(l&&(_=2*_-t.width,O=2*O-t.height),a){let F=Math.abs(_)/t.width,B=Math.abs(O)/t.height;if(i.length===1&&(O*=F,_*=B),i.length===2){let $=Math.max(F,B);_=t.width*$*Math.sign(_),O=t.height*$*Math.sign(O)}}return{nextWidth:_,nextHeight:O}},rRe=(e,t,n,r,i,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{let l=e.map(F=>t.get(F.id)),f=l.reduce((F,B)=>{if(!mt(B))return F;let $=If(B);if(!$)return F;let z=t.get($)??null;return Mn(z)?[...F,{...z,...Be.getBoundTextElementPosition(B,z,n)}]:F},[]),c=Ja(l.map(F=>F).concat(f)),{minX:d,minY:u,maxX:h,maxY:g,midX:U,midY:y}=c,x=h-d,w=g-u,E={ne:[d,g],se:[d,u],sw:[h,u],nw:[h,g],e:[d,u+w/2],w:[h,u+w/2],n:[d+x/2,g],s:[d+x/2,u]},[S,A]=a?[U,y]:E[r],M=a?2:1,C=Math.max(Math.abs(i-S)/x||0,Math.abs(s-A)/w||0)*M,T=r.includes("e")||r.includes("w")?Math.abs(i-S)*M:x,R=r.includes("n")||r.includes("s")?Math.abs(s-A)*M:w;o&&(T=x*C*Math.sign(i-S),R=w*C*Math.sign(s-A));let P={ne:[i<S,s>A],se:[i<S,s<A],sw:[i>S,s<A],nw:[i>S,s>A],e:[i<S,!1],w:[i>S,!1],n:[!1,s>A],s:[!1,s<A]},[_,O]=P[r].map(F=>F);return{originalBoundingBox:c,nextWidth:T,nextHeight:R,flipByX:_,flipByY:O}},fJ=(e,t,n,r,i,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:f,nextWidth:c,originalBoundingBox:d}={})=>{if(c===void 0&&f===void 0&&a===void 0&&l===void 0||f===0||c===0)return;i||(i=t);let u=e.reduce((M,C)=>{let T=i.get(C.id);return T&&M.push({orig:T,latest:C}),M},[]),h;if(d)h=d;else{let M=u.reduce((C,{orig:T})=>{if(!mt(T))return C;let R=If(T);if(!R)return C;let P=i.get(R)??null;return Mn(P)?[...C,{...P,...Be.getBoundTextElementPosition(T,P,t)}]:C},[]);h=Ja(u.map(({orig:C})=>C).concat(M))}let{minX:g,minY:U,maxX:y,maxY:x,midX:w,midY:E}=h,S=y-g,A=x-U;if(c===void 0&&f===void 0&&(c=S,f=A),s&&(c===void 0?c=f*(S/A):f===void 0?f=c*(A/S):Math.abs(c/f-S/A)>.001&&(c=f*(S/A))),c&&f){let M=n.includes("e")||n.includes("w")?Math.abs(c)/S:1,C=n.includes("n")||n.includes("s")?Math.abs(f)/A:1,T;n.length===1?T=n.includes("e")||n.includes("w")?M:C:T=Math.max(Math.abs(c)/S||0,Math.abs(f)/A||0);let R={ne:[g,x],se:[g,U],sw:[y,U],nw:[y,x],e:[g,U+A/2],w:[y,U+A/2],n:[g+S/2,x],s:[g+S/2,U]},[P,_]=o?[w,E]:R[n],O=s||u.some(H=>H.latest.angle!==0||je(H.latest)||p6(H.latest));O&&(M=T,C=T);let[F,B]=[a?-1:1,l?-1:1],$=[];for(let{orig:H,latest:G}of u){if(je(H)&&Mn(H))continue;let V=H.width*M,Y=H.height*C,K=V4(H.angle*F*B),q=mt(H)||ia(H),se=H.x-P,de=H.y-_,xe=a&&!q?V:0,ve=l&&!q?Y:0,ue=P+F*(se*M+xe),te=_+B*(de*C+ve),le=SI(H,V*F,Y*B,!1),he={x:ue,y:te,width:V,height:Y,angle:K,...le};if(Fe(H)&&(H.startBinding&&(he.startBinding={...H.startBinding,fixedPoint:[a?-H.startBinding.fixedPoint[0]+1:H.startBinding.fixedPoint[0],l?-H.startBinding.fixedPoint[1]+1:H.startBinding.fixedPoint[1]]}),H.endBinding&&(he.endBinding={...H.endBinding,fixedPoint:[a?-H.endBinding.fixedPoint[0]+1:H.endBinding.fixedPoint[0],l?-H.endBinding.fixedPoint[1]+1:H.endBinding.fixedPoint[1]]}),H.fixedSegments&&le.points&&(he.fixedSegments=H.fixedSegments.map(Se=>({...Se,start:le.points[Se.index-1],end:le.points[Se.index]})))),Zt(H)&&(he.scale=[H.scale[0]*F,H.scale[1]*B]),je(H)){let Se=kI(H,t,V);if(!Se)return;he.fontSize=Se.size}let we=i.get(If(H)??"");if(we)if(O){let Se=we.fontSize*T;if(Se<UT)return;he.boundTextFontSize=Se}else he.boundTextFontSize=we.fontSize;$.push({element:G,update:he})}let z=$.map(({element:H})=>H);for(let{element:H,update:{boundTextFontSize:G,...V}}of $){let{width:Y,height:K,angle:q}=V;ye(H,V,!1,{isDragging:!0}),zs(H,t,{simultaneouslyUpdated:z,newSize:{width:Y,height:K}});let se=xt(H,t);se&&G&&(ye(se,{fontSize:G,angle:mt(H)?void 0:q},!1),Xb(H,t,n,!0))}r.triggerUpdate()}},iRe=(e,t,n,r,i,s)=>{if(t.length===1&&Fe(t[0])&&(t[0].startBinding||t[0].endBinding))return;let o=t.filter(d=>{if(Fe(d)&&d.startBinding&&d.endBinding){let u=t.find(g=>{var U;return g.id===((U=d.startBinding)==null?void 0:U.elementId)}),h=t.find(g=>{var U;return g.id===((U=d.endBinding)==null?void 0:U.elementId)});return u&&h}return!0}),a=new Set(o),l=o.filter(d=>at(d)).map(d=>d.id);if(l.length>0)for(let d of r.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);let f=nn(Array.from(a).map(d=>e.originalElements.get(d.id)??d)),c=sRe(f,n,i,s);a.forEach(d=>{if(YF(e,d,c),!Et(d)){let u=xt(d,r.getNonDeletedElementsMap());u&&YF(e,u,c),zs(d,r.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(a)})}})},sRe=(e,t,n,r)=>{let[i,s]=e,o=i+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){let[l,f]=Ir(i+t.x,s+t.y,r);n.x===0&&(o=l),n.y===0&&(a=f)}return{x:o-i,y:a-s}},YF=(e,t,n)=>{let r=e.originalElements.get(t.id)??t,i=r.x+n.x,s=r.y+n.y;ye(t,{x:i,y:s})},oRe=(e,t,n)=>{let[r,i]=nn(e);return[t-r,n-i]},ZF=({newElement:e,elementType:t,originX:n,originY:r,x:i,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:f,zoom:c,widthAspectRatio:d=null,originOffset:u=null,informMutation:h=!0})=>{l&&e.type!=="selection"&&(d?a=o/d:(Math.abs(s-r)>Math.abs(i-n)?{width:o,height:a}=HF(t,a,i<n?-o:o):{width:o,height:a}=HF(t,o,s<r?-a:a),a<0&&(a=-a)));let g=i<n?n-o:n,U=s<r?r-a:r;f&&(o+=o,a+=a,g=n-o/2,U=r-a/2);let y=null;if(je(e)){a=e.height;let x=AT(cn({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,x),Math.abs(i-n)>wxe/c&&(y={autoResize:!1}),U=r,f&&(g=n-o/2)}if(o!==0&&a!==0){let x=null;Zt(e)&&(x={initialWidth:o,initialHeight:a}),ye(e,{x:g+((u==null?void 0:u.x)??0),y:U+((u==null?void 0:u.y)??0),width:o,height:a,...y,...x},h)}},CI=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||wt(t,e).length))},aRe=e=>{let t=5381;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)+t+r}return t>>>0},lRe=e=>e.filter(t=>!t.isDeleted&&!y6(t)),Un=e=>e.filter(t=>!t.isDeleted),nA=e=>!e.isDeleted,cRe=e=>Un(e).map(t=>CT(t.type)?{...t,lastCommittedPoint:null}:t),dJ=e=>cRe(e),uJ=async e=>{let t;if(e.type===it.png)try{return await(await Ve(async()=>{const{decodePngMetadata:n}=await Promise.resolve().then(()=>Fre);return{decodePngMetadata:n}},void 0)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new Fu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Fu("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{let r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),e.type===it.svg)try{return VIe({svg:t})}catch(n){throw n.message==="INVALID"?new Fu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Fu("Error: cannot restore image")}return t},hJ=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},fRe=e=>e==="png"||e==="svg",AI=e=>{let t=hJ(e);return t==="png"||t==="svg"},pJ=e=>!!e&&Object.values(s6).includes(e),kh=e=>{let{type:t}=e||{};return pJ(t)},mJ=async(e,t,n,r)=>{let i=await uJ(e),s;try{try{s=JSON.parse(i)}catch(o){throw kh(e)?new Fu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(LIe(s))return{type:it.excalidraw,data:q7({elements:dJ(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:r||e.handle||null,...PZ(s.appState||{}),...t?X2(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(AQ(s))return{type:it.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof Fu?o:new Error("Error: invalid file")}},gJ=async(e,t,n,r)=>{let i=await mJ(e,t,n,r);if(i.type!==it.excalidraw)throw new Error("Error: invalid file");return i.data},bJ=(e,t="unpublished")=>{let n=JSON.parse(e);if(!AQ(n))throw new Error("Invalid library");let r=n.libraryItems||n.library;return dI(r,t)},dRe=async(e,t="unpublished")=>bJ(await uJ(e),t),J2=async e=>new Promise(async(t,n)=>{try{Hb(e)&&(e=await e),e.toBlob(r=>{if(!r)return n(new _Ee("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(r)})}catch(r){n(r)}}),uRe=async e=>{try{let t=await window.crypto.subtle.digest("SHA-1",await zu(e));return Uve(new Uint8Array(t))}catch(t){return console.error(t),mT(40)}},qF=async e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),hRe=(e,t)=>`data:${t};base64,${xJ(h9(e),!0)}`,pRe=(e,t="")=>{let n=e.indexOf(","),r=atob(e.slice(n+1)),i=e.slice(0,n).split(":")[1].split(";")[0],s=new ArrayBuffer(r.length),o=new Uint8Array(s);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return new File([s],t,{type:i})},mRe=e=>vJ(e.slice(e.indexOf(",")+1)),rA=async(e,t)=>{if(e.type===it.svg)return e;let[n,r]=await Promise.all([Ve(()=>import("./pica-BYMevxCt.js").then(s=>s.p),__vite__mapDeps([2,3])).then(s=>s.default),Ve(()=>import("./image-blob-reduce.esm-xKov1Fz_.js"),[]).then(s=>s.default)]),i=r({pica:n({features:["js","wasm"]})});if(t.outputType){let{outputType:s}=t;i._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!kh(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await i.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},QF=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:it.svg}),gRe=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});let r=await n.blob();if(r.type&&kh(r)){let i=t||r.name||"";return new File([r],i,{type:r.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},bRe=async e=>{let t=e.dataTransfer.files.item(0),n=await URe(e);return{file:t?await MI(t):null,fileHandle:n}},URe=async e=>{if(c1)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},JF=e=>{let t=null,n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,r={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===r.png?t=it.png:n.startsWith(r.jpg)?t=it.jpg:n.startsWith(r.gif)&&(t=it.gif),t},g5=(e,t,n)=>new File([e],n||"",{type:t}),MI=async e=>{var t,n;if(e.type){if(kh(e)){let r=await zu(e),i=JF(r);i&&i!==e.type&&(e=g5(r,i,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=g5(await zu(e),it.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=g5(await zu(e),it.excalidraw,e.name);else{let r=await zu(e),i=JF(r);i&&(e=g5(r,i,e.name))}return e},zu=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{let r=new FileReader;r.onload=i=>{var s;if(!((s=i.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),h9=e=>{let t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e),n="";for(let r of t)n+=String.fromCharCode(r);return n},UJ=e=>{let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},yJ=e=>new TextDecoder("utf-8").decode(UJ(e)),xJ=(e,t=!1)=>t?window.btoa(e):window.btoa(h9(e)),vJ=(e,t=!1)=>t?window.atob(e):yJ(window.atob(e)),wJ=({text:e,compress:t})=>{let n;if(t!==!1)try{n=h9(L9e(e))}catch(r){console.error("encode: cannot deflate",r)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||h9(e)}},EJ=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:yJ(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?O9e(new Uint8Array(UJ(t)),{to:"string"}):t},SJ=async e=>{let t=AY(new Uint8Array(await zu(e))).find(n=>n.name==="tEXt");return t?MY.decode(t.data):null},yRe=async({blob:e,metadata:t})=>{let n=AY(new Uint8Array(await zu(e))),r=MY.encode(it.excalidraw,JSON.stringify(wJ({text:t,compress:!0})));return n.splice(-1,0,r),new Blob([Yye(n)],{type:it.png})},xRe=async e=>{let t=await SJ(e);if((t==null?void 0:t.keyword)===it.excalidraw)try{let n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===ea.excalidraw)return t.text;throw new Error("FAILED")}return EJ(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},kJ={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library",libraries:"Browse libraries",loadingScene:"Loading scene",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame"},CJ={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},AJ={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},MJ={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas..."},TJ={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},IJ={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},NJ={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},RJ={selection:"Selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw"},_J={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},PJ={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},DJ={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},LJ={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},OJ={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},jJ={or:"Or"},BJ={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},FJ={title:"Error"},$J={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},zJ={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},HJ={title:"Clear canvas"},VJ={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},WJ={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},GJ={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},XJ={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},KJ={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},YJ={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},ZJ={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},qJ={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},QJ={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},JJ={mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},eee={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},tee={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},nee={placeholder:"Quick search"},ree={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},iee={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},see={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},TI={labels:kJ,elementLink:CJ,library:AJ,search:MJ,buttons:TJ,alerts:IJ,errors:NJ,toolBar:RJ,element:_J,headings:PJ,hints:DJ,canvasError:LJ,errorSplash:OJ,shareDialog:jJ,roomDialog:BJ,errorDialog:FJ,exportDialog:$J,helpDialog:zJ,clearCanvasDialog:HJ,publishDialog:VJ,publishSuccessDialog:WJ,confirmDialog:GJ,imageExportDialog:XJ,encrypted:KJ,stats:YJ,toast:ZJ,colors:qJ,welcomeScreen:QJ,colorPicker:JJ,overwriteConfirm:eee,mermaid:tee,quickSearch:nee,fontList:ree,userList:iee,commandPalette:see},oee=100,aee=36,lee={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:oee,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:aee,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100};let vRe=0;function di(e,t){const n=`atom${++vRe}`,r={toString(){return n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=wRe,r.write=ERe),r}function wRe(e){return e(this)}function ERe(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const e$=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,t$=e=>"init"in e,n$=e=>!!e.write,p9=new WeakMap,iA=e=>{var t;return sA(e)&&!((t=p9.get(e))!=null&&t[1])},SRe=(e,t)=>{const n=p9.get(e);n&&(n[1]=!0,n[0].forEach(r=>r(t)))},kRe=e=>{if(p9.has(e))return;const t=[new Set,!1];p9.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=r=>{t[0].add(r)}},sA=e=>typeof(e==null?void 0:e.then)=="function",r$=e=>"v"in e||"e"in e,ly=e=>{if("e"in e)throw e.e;return e.v},cee=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},i$=(e,t,n,r,i)=>{var s;n.d.set(r,i.n),iA(n.v)&&cee(t,n.v,i),(s=i.m)==null||s.t.add(t),e&&CRe(e,r,t)},Hg=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),X5=(e,t,n)=>{e[t].add(n)},s$=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),X5(e,"M",()=>{var r;(r=n.m)==null||r.l.forEach(i=>X5(e,"M",i))}))},CRe=(e,t,n)=>{const r=e.D.get(t);r&&r.add(n)},ARe=(e,t)=>e.D.get(t),cu=e=>{let t,n=!1;const r=i=>{try{i()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(r),e.H.clear(),e.M.forEach(r),e.M.clear(),e.L.forEach(r),e.L.clear();if(n)throw t},fee=(...[e,t,n,r])=>{const i=(x,w,E)=>{const S="v"in w,A=w.v,M=iA(w.v)?w.v:null;if(sA(E)){kRe(E);for(const C of w.d.keys())cee(x,E,e(C));w.v=E}else w.v=E;delete w.e,delete w.x,(!S||!Object.is(A,w.v))&&(++w.n,M&&SRe(M,E))},s=(x,w)=>{var E;const S=e(w);if(r$(S)&&(S.m&&!S.x||Array.from(S.d).every(([P,_])=>s(x,P).n===_)))return S;S.d.clear();let A=!0;const M=P=>{if(e$(w,P)){const O=e(P);if(!r$(O))if(t$(P))i(P,O,P.init);else throw new Error("no atom init");return ly(O)}const _=s(x,P);try{return ly(_)}finally{if(A)i$(x,w,S,P,_);else{const O=Hg();i$(O,w,S,P,_),d(O,w,S),cu(O)}}};let C,T;const R={get signal(){return C||(C=new AbortController),C.signal},get setSelf(){return!T&&n$(w)&&(T=(...P)=>{if(!A)return c(w,...P)}),T}};try{const P=t(w,M,R);if(i(w,S,P),sA(P)){(E=P.onCancel)==null||E.call(P,()=>C==null?void 0:C.abort());const _=()=>{if(S.m){const O=Hg();d(O,w,S),cu(O)}};P.then(_,_)}return S}catch(P){return delete S.v,S.e=P,delete S.x,++S.n,S}finally{A=!1}},o=x=>ly(s(void 0,x)),a=(x,w,E)=>{var S,A;const M=new Map;for(const C of((S=E.m)==null?void 0:S.t)||[]){const T=e(C);T.m&&M.set(C,T)}for(const C of E.p)M.set(C,e(C));return(A=ARe(x,w))==null||A.forEach(C=>{M.set(C,e(C))}),M},l=(x,w,E)=>{const S=[],A=new Set,M=new Set,C=[[w,E]];for(;C.length>0;){const[T,R]=C[C.length-1];if(M.has(T)){C.pop();continue}if(A.has(T)){S.push([T,R,R.n]),M.add(T),R.x=!0,C.pop();continue}A.add(T);for(const[P,_]of a(x,T,R))T!==P&&!A.has(P)&&C.push([P,_])}X5(x,"H",()=>{const T=new Set([w]);for(let R=S.length-1;R>=0;--R){const[P,_,O]=S[R];let F=!1;for(const B of _.d.keys())if(B!==P&&T.has(B)){F=!0;break}F&&(s(x,P),d(x,P,_),O!==_.n&&(s$(x,P,_),T.add(P))),delete _.x}})},f=(x,w,...E)=>{let S=!0;const A=C=>ly(s(x,C)),M=(C,...T)=>{const R=e(C);try{if(e$(w,C)){if(!t$(C))throw new Error("atom not writable");const P=R.n,_=T[0];i(C,R,_),d(x,C,R),P!==R.n&&(s$(x,C,R),l(x,C,R));return}else return f(x,C,...T)}finally{S||cu(x)}};try{return n(w,A,M,...E)}finally{S=!1}},c=(x,...w)=>{const E=Hg();try{return f(E,x,...w)}finally{cu(E)}},d=(x,w,E)=>{if(E.m&&!iA(E.v)){for(const S of E.d.keys())E.m.d.has(S)||(u(x,S,e(S)).t.add(w),E.m.d.add(S));for(const S of E.m.d||[])if(!E.d.has(S)){E.m.d.delete(S);const A=h(x,S,e(S));A==null||A.t.delete(w)}}},u=(x,w,E)=>{if(!E.m){s(x,w);for(const S of E.d.keys())u(x,S,e(S)).t.add(w);if(E.m={l:new Set,d:new Set(E.d.keys()),t:new Set},n$(w)){const S=E.m;let A;const M=(C,T)=>{let R=!0;A=(...P)=>{try{return f(C,w,...P)}finally{R||cu(C)}};try{return T()}finally{R=!1}};X5(x,"L",()=>{const C=M(x,()=>r(w,(...T)=>A(...T)));C&&(S.u=T=>M(T,C))})}}return E.m},h=(x,w,E)=>{if(E.m&&!E.m.l.size&&!Array.from(E.m.t).some(S=>{var A;return(A=e(S).m)==null?void 0:A.d.has(w)})){const S=E.m.u;S&&X5(x,"L",()=>S(x)),delete E.m;for(const A of E.d.keys()){const M=h(x,A,e(A));M==null||M.t.delete(w)}return}return E.m};return{get:o,set:c,sub:(x,w)=>{const E=Hg(),S=e(x),M=u(E,x,S).l;return M.add(w),cu(E),()=>{M.delete(w);const C=Hg();h(C,x,S),cu(C)}},unstable_derive:x=>fee(...x(e,t,n,r))}},II=()=>{const e=new WeakMap;return fee(r=>{let i=e.get(r);return i||(i={d:new Map,p:new Set,n:0},e.set(r,i)),i},(r,...i)=>r.read(...i),(r,...i)=>r.write(...i),(r,...i)=>{var s;return(s=r.onMount)==null?void 0:s.call(r,...i)})};let aS;const MRe=()=>(aS||(aS=II()),aS),TRe=I.createContext(void 0),tx=e=>{const t=I.useContext(TRe);return(e==null?void 0:e.store)||t||MRe()},oA=e=>typeof(e==null?void 0:e.then)=="function",dee=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},IRe=Te.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(dee(e),e)}),lS=new WeakMap,o$=e=>{let t=lS.get(e);return t||(t=new Promise((n,r)=>{let i=e;const s=l=>f=>{i===l&&n(f)},o=l=>f=>{i===l&&r(f)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(f=>{oA(f)?(lS.set(f,t),i=f,f.then(s(f),o(f)),a(f)):n(f)})};e.then(s(e),o(e)),a(e)}),lS.set(e,t)),t};function uee(e,t){const n=tx(t),[[r,i,s],o]=I.useReducer(f=>{const c=n.get(e);return Object.is(f[0],c)&&f[1]===n&&f[2]===e?f:[c,n,e]},void 0,()=>[n.get(e),n,e]);let a=r;(i!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(I.useEffect(()=>{const f=n.sub(e,()=>{if(typeof l=="number"){const c=n.get(e);oA(c)&&dee(o$(c)),setTimeout(o,l);return}o()});return o(),f},[n,e,l]),I.useDebugValue(a),oA(a)){const f=o$(a);return IRe(f)}return a}function hee(e,t){const n=tx(t);return I.useCallback((...i)=>n.set(e,...i),[n,e])}function NRe(e,t){return[uee(e,t),hee(e,t)]}const a$=new WeakMap;function RRe(e,t){const n=tx(t),r=_Re(n);for(const[i,s]of e)(!r.has(i)||t!=null&&t.dangerouslyForceHydrate)&&(r.add(i),n.set(i,s))}const _Re=e=>{let t=a$.get(e);return t||(t=new WeakSet,a$.set(e,t)),t};function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tp.apply(this,arguments)}function pee(){const e=I.createContext(null);function t({store:o,initialValues:a=[],children:l}){const f=I.useRef(o);return f.current||(f.current=II()),RRe(a,{store:f.current}),m.jsx(e.Provider,{value:f.current,children:l})}const n=o=>{const a=I.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return tx(Tp({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return NRe(o,Tp({store:l},a))},useAtomValue:(o,a)=>{const l=n();return uee(o,Tp({store:l},a))},useSetAtom:(o,a)=>{const l=n();return hee(o,Tp({store:l},a))}}}di(null);I.createContext({scope:void 0,baseStore:void 0});function E0(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function l$(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function mee(...e){return t=>{let n=!1;const r=e.map(i=>{const s=l$(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():l$(e[i],null)}}}}function z0(...e){return I.useCallback(mee(...e),e)}function gee(e,t=[]){let n=[];function r(s,o){const a=I.createContext(o),l=n.length;n=[...n,o];const f=d=>{var x;const{scope:u,children:h,...g}=d,U=((x=u==null?void 0:u[e])==null?void 0:x[l])||a,y=I.useMemo(()=>g,Object.values(g));return m.jsx(U.Provider,{value:y,children:h})};f.displayName=s+"Provider";function c(d,u){var U;const h=((U=u==null?void 0:u[e])==null?void 0:U[l])||a,g=I.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[f,c]}const i=()=>{const s=n.map(o=>I.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return I.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,PRe(i,...t)]}function PRe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return I.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var NI=I.forwardRef((e,t)=>{const{children:n,...r}=e,i=I.Children.toArray(n),s=i.find(LRe);if(s){const o=s.props.children,a=i.map(l=>l===s?I.Children.count(o)>1?I.Children.only(null):I.isValidElement(o)?o.props.children:null:l);return m.jsx(aA,{...r,ref:t,children:I.isValidElement(o)?I.cloneElement(o,void 0,a):null})}return m.jsx(aA,{...r,ref:t,children:n})});NI.displayName="Slot";var aA=I.forwardRef((e,t)=>{const{children:n,...r}=e;if(I.isValidElement(n)){const i=jRe(n),s=ORe(r,n.props);return n.type!==I.Fragment&&(s.ref=t?mee(t,i):i),I.cloneElement(n,s)}return I.Children.count(n)>1?I.Children.only(null):null});aA.displayName="SlotClone";var DRe=({children:e})=>m.jsx(m.Fragment,{children:e});function LRe(e){return I.isValidElement(e)&&e.type===DRe}function ORe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function jRe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var BRe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],zf=BRe.reduce((e,t)=>{const n=I.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?NI:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function FRe(e,t){e&&ri.flushSync(()=>e.dispatchEvent(t))}function N0(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function $Re(e,t=globalThis==null?void 0:globalThis.document){const n=N0(e);I.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var zRe="DismissableLayer",lA="dismissableLayer.update",HRe="dismissableLayer.pointerDownOutside",VRe="dismissableLayer.focusOutside",c$,bee=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Uee=I.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,f=I.useContext(bee),[c,d]=I.useState(null),u=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=I.useState({}),g=z0(t,C=>d(C)),U=Array.from(f.layers),[y]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=U.indexOf(y),w=c?U.indexOf(c):-1,E=f.layersWithOutsidePointerEventsDisabled.size>0,S=w>=x,A=XRe(C=>{const T=C.target,R=[...f.branches].some(P=>P.contains(T));!S||R||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},u),M=KRe(C=>{const T=C.target;[...f.branches].some(P=>P.contains(T))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},u);return $Re(C=>{w===f.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},u),I.useEffect(()=>{if(c)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(c$=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(c)),f.layers.add(c),f$(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(u.body.style.pointerEvents=c$)}},[c,u,n,f]),I.useEffect(()=>()=>{c&&(f.layers.delete(c),f.layersWithOutsidePointerEventsDisabled.delete(c),f$())},[c,f]),I.useEffect(()=>{const C=()=>h({});return document.addEventListener(lA,C),()=>document.removeEventListener(lA,C)},[]),m.jsx(zf.div,{...l,ref:g,style:{pointerEvents:E?S?"auto":"none":void 0,...e.style},onFocusCapture:E0(e.onFocusCapture,M.onFocusCapture),onBlurCapture:E0(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:E0(e.onPointerDownCapture,A.onPointerDownCapture)})});Uee.displayName=zRe;var WRe="DismissableLayerBranch",GRe=I.forwardRef((e,t)=>{const n=I.useContext(bee),r=I.useRef(null),i=z0(t,r);return I.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.jsx(zf.div,{...e,ref:i})});GRe.displayName=WRe;function XRe(e,t=globalThis==null?void 0:globalThis.document){const n=N0(e),r=I.useRef(!1),i=I.useRef(()=>{});return I.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){yee(HRe,n,f,{discrete:!0})};const f={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function KRe(e,t=globalThis==null?void 0:globalThis.document){const n=N0(e),r=I.useRef(!1);return I.useEffect(()=>{const i=s=>{s.target&&!r.current&&yee(VRe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function f$(){const e=new CustomEvent(lA);document.dispatchEvent(e)}function yee(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?FRe(i,s):i.dispatchEvent(s)}var cS=0;function YRe(){I.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??d$()),document.body.insertAdjacentElement("beforeend",e[1]??d$()),cS++,()=>{cS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),cS--}},[])}function d$(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fS="focusScope.autoFocusOnMount",dS="focusScope.autoFocusOnUnmount",u$={bubbles:!1,cancelable:!0},ZRe="FocusScope",xee=I.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[a,l]=I.useState(null),f=N0(i),c=N0(s),d=I.useRef(null),u=z0(t,U=>l(U)),h=I.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;I.useEffect(()=>{if(r){let U=function(E){if(h.paused||!a)return;const S=E.target;a.contains(S)?d.current=S:Td(d.current,{select:!0})},y=function(E){if(h.paused||!a)return;const S=E.relatedTarget;S!==null&&(a.contains(S)||Td(d.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const A of E)A.removedNodes.length>0&&Td(a)};document.addEventListener("focusin",U),document.addEventListener("focusout",y);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",U),document.removeEventListener("focusout",y),w.disconnect()}}},[r,a,h.paused]),I.useEffect(()=>{if(a){p$.add(h);const U=document.activeElement;if(!a.contains(U)){const x=new CustomEvent(fS,u$);a.addEventListener(fS,f),a.dispatchEvent(x),x.defaultPrevented||(qRe(n_e(vee(a)),{select:!0}),document.activeElement===U&&Td(a))}return()=>{a.removeEventListener(fS,f),setTimeout(()=>{const x=new CustomEvent(dS,u$);a.addEventListener(dS,c),a.dispatchEvent(x),x.defaultPrevented||Td(U??document.body,{select:!0}),a.removeEventListener(dS,c),p$.remove(h)},0)}}},[a,f,c,h]);const g=I.useCallback(U=>{if(!n&&!r||h.paused)return;const y=U.key==="Tab"&&!U.altKey&&!U.ctrlKey&&!U.metaKey,x=document.activeElement;if(y&&x){const w=U.currentTarget,[E,S]=QRe(w);E&&S?!U.shiftKey&&x===S?(U.preventDefault(),n&&Td(E,{select:!0})):U.shiftKey&&x===E&&(U.preventDefault(),n&&Td(S,{select:!0})):x===w&&U.preventDefault()}},[n,r,h.paused]);return m.jsx(zf.div,{tabIndex:-1,...o,ref:u,onKeyDown:g})});xee.displayName=ZRe;function qRe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Td(r,{select:t}),document.activeElement!==n)return}function QRe(e){const t=vee(e),n=h$(t,e),r=h$(t.reverse(),e);return[n,r]}function vee(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function h$(e,t){for(const n of e)if(!JRe(n,{upTo:t}))return n}function JRe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function e_e(e){return e instanceof HTMLInputElement&&"select"in e}function Td(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&e_e(e)&&t&&e.select()}}var p$=t_e();function t_e(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=m$(e,t),e.unshift(t)},remove(t){var n;e=m$(e,t),(n=e[0])==null||n.resume()}}}function m$(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function n_e(e){return e.filter(t=>t.tagName!=="A")}var e1=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},r_e=LA.useId||(()=>{}),i_e=0;function s_e(e){const[t,n]=I.useState(r_e());return e1(()=>{e||n(r=>r??String(i_e++))},[e]),e||(t?`radix-${t}`:"")}const o_e=["top","right","bottom","left"],R0=Math.min,co=Math.max,m9=Math.round,cy=Math.floor,nc=e=>({x:e,y:e}),a_e={left:"right",right:"left",bottom:"top",top:"bottom"},l_e={start:"end",end:"start"};function cA(e,t,n){return co(e,R0(t,n))}function Pf(e,t){return typeof e=="function"?e(t):e}function Df(e){return e.split("-")[0]}function _6(e){return e.split("-")[1]}function RI(e){return e==="x"?"y":"x"}function _I(e){return e==="y"?"height":"width"}const c_e=new Set(["top","bottom"]);function Ql(e){return c_e.has(Df(e))?"y":"x"}function PI(e){return RI(Ql(e))}function f_e(e,t,n){n===void 0&&(n=!1);const r=_6(e),i=PI(e),s=_I(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=g9(o)),[o,g9(o)]}function d_e(e){const t=g9(e);return[fA(e),t,fA(t)]}function fA(e){return e.replace(/start|end/g,t=>l_e[t])}const g$=["left","right"],b$=["right","left"],u_e=["top","bottom"],h_e=["bottom","top"];function p_e(e,t,n){switch(e){case"top":case"bottom":return n?t?b$:g$:t?g$:b$;case"left":case"right":return t?u_e:h_e;default:return[]}}function m_e(e,t,n,r){const i=_6(e);let s=p_e(Df(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(fA)))),s}function g9(e){return e.replace(/left|right|bottom|top/g,t=>a_e[t])}function g_e(e){return{top:0,right:0,bottom:0,left:0,...e}}function wee(e){return typeof e!="number"?g_e(e):{top:e,right:e,bottom:e,left:e}}function b9(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function U$(e,t,n){let{reference:r,floating:i}=e;const s=Ql(t),o=PI(t),a=_I(o),l=Df(t),f=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,u=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(_6(t)){case"start":h[o]-=u*(n&&f?-1:1);break;case"end":h[o]+=u*(n&&f?-1:1);break}return h}async function b_e(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:f="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:u=!1,padding:h=0}=Pf(t,e),g=wee(h),y=a[u?d==="floating"?"reference":"floating":d],x=b9(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:f,rootBoundary:c,strategy:l})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},A=b9(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:E,strategy:l}):w);return{top:(x.top-A.top+g.top)/S.y,bottom:(A.bottom-x.bottom+g.bottom)/S.y,left:(x.left-A.left+g.left)/S.x,right:(A.right-x.right+g.right)/S.x}}const U_e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=U$(f,r,l),u=r,h={},g=0;for(let y=0;y<a.length;y++){var U;const{name:x,fn:w}=a[y],{x:E,y:S,data:A,reset:M}=await w({x:c,y:d,initialPlacement:r,placement:u,strategy:i,middlewareData:h,rects:f,platform:{...o,detectOverflow:(U=o.detectOverflow)!=null?U:b_e},elements:{reference:e,floating:t}});c=E??c,d=S??d,h={...h,[x]:{...h[x],...A}},M&&g<=50&&(g++,typeof M=="object"&&(M.placement&&(u=M.placement),M.rects&&(f=M.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):M.rects),{x:c,y:d}=U$(f,u,l)),y=-1)}return{x:c,y:d,placement:u,strategy:i,middlewareData:h}},y_e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:f,padding:c=0}=Pf(e,t)||{};if(f==null)return{};const d=wee(c),u={x:n,y:r},h=PI(i),g=_I(h),U=await o.getDimensions(f),y=h==="y",x=y?"top":"left",w=y?"bottom":"right",E=y?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[h]-u[h]-s.floating[g],A=u[h]-s.reference[h],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let C=M?M[E]:0;(!C||!await(o.isElement==null?void 0:o.isElement(M)))&&(C=a.floating[E]||s.floating[g]);const T=S/2-A/2,R=C/2-U[g]/2-1,P=R0(d[x],R),_=R0(d[w],R),O=P,F=C-U[g]-_,B=C/2-U[g]/2+T,$=cA(O,B,F),z=!l.arrow&&_6(i)!=null&&B!==$&&s.reference[g]/2-(B<O?P:_)-U[g]/2<0,H=z?B<O?B-O:B-F:0;return{[h]:u[h]+H,data:{[h]:$,centerOffset:B-$-H,...z&&{alignmentOffset:H}},reset:z}}}),x_e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:f}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:U=!0,...y}=Pf(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=Df(i),w=Ql(a),E=Df(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(f.floating)),A=u||(E||!U?[g9(a)]:d_e(a)),M=g!=="none";!u&&M&&A.push(...m_e(a,U,g,S));const C=[a,...A],T=await l.detectOverflow(t,y),R=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(T[x]),d){const B=f_e(i,o,S);R.push(T[B[0]],T[B[1]])}if(P=[...P,{placement:i,overflows:R}],!R.every(B=>B<=0)){var _,O;const B=(((_=s.flip)==null?void 0:_.index)||0)+1,$=C[B];if($&&(!(d==="alignment"?w!==Ql($):!1)||P.every(G=>Ql(G.placement)===w?G.overflows[0]>0:!0)))return{data:{index:B,overflows:P},reset:{placement:$}};let z=(O=P.filter(H=>H.overflows[0]<=0).sort((H,G)=>H.overflows[1]-G.overflows[1])[0])==null?void 0:O.placement;if(!z)switch(h){case"bestFit":{var F;const H=(F=P.filter(G=>{if(M){const V=Ql(G.placement);return V===w||V==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(V=>V>0).reduce((V,Y)=>V+Y,0)]).sort((G,V)=>G[1]-V[1])[0])==null?void 0:F[0];H&&(z=H);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function y$(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function x$(e){return o_e.some(t=>e[t]>=0)}const v_e=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:i="referenceHidden",...s}=Pf(e,t);switch(i){case"referenceHidden":{const o=await r.detectOverflow(t,{...s,elementContext:"reference"}),a=y$(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:x$(a)}}}case"escaped":{const o=await r.detectOverflow(t,{...s,altBoundary:!0}),a=y$(o,n.floating);return{data:{escapedOffsets:a,escaped:x$(a)}}}default:return{}}}}},Eee=new Set(["left","top"]);async function w_e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Df(n),a=_6(n),l=Ql(n)==="y",f=Eee.has(o)?-1:1,c=s&&l?-1:1,d=Pf(t,e);let{mainAxis:u,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),l?{x:h*c,y:u*f}:{x:u*f,y:h*c}}const E_e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await w_e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},S_e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i,platform:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:w,y:E}=x;return{x:w,y:E}}},...f}=Pf(e,t),c={x:n,y:r},d=await s.detectOverflow(t,f),u=Ql(Df(i)),h=RI(u);let g=c[h],U=c[u];if(o){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",E=g+d[x],S=g-d[w];g=cA(E,g,S)}if(a){const x=u==="y"?"top":"left",w=u==="y"?"bottom":"right",E=U+d[x],S=U-d[w];U=cA(E,U,S)}const y=l.fn({...t,[h]:g,[u]:U});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:o,[u]:a}}}}}},k_e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:f=!0}=Pf(e,t),c={x:n,y:r},d=Ql(i),u=RI(d);let h=c[u],g=c[d];const U=Pf(a,t),y=typeof U=="number"?{mainAxis:U,crossAxis:0}:{mainAxis:0,crossAxis:0,...U};if(l){const E=u==="y"?"height":"width",S=s.reference[u]-s.floating[E]+y.mainAxis,A=s.reference[u]+s.reference[E]-y.mainAxis;h<S?h=S:h>A&&(h=A)}if(f){var x,w;const E=u==="y"?"width":"height",S=Eee.has(Df(i)),A=s.reference[d]-s.floating[E]+(S&&((x=o.offset)==null?void 0:x[d])||0)+(S?0:y.crossAxis),M=s.reference[d]+s.reference[E]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?y.crossAxis:0);g<A?g=A:g>M&&(g=M)}return{[u]:h,[d]:g}}}},C_e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...f}=Pf(e,t),c=await o.detectOverflow(t,f),d=Df(i),u=_6(i),h=Ql(i)==="y",{width:g,height:U}=s.floating;let y,x;d==="top"||d==="bottom"?(y=d,x=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,y=u==="end"?"top":"bottom");const w=U-c.top-c.bottom,E=g-c.left-c.right,S=R0(U-c[y],w),A=R0(g-c[x],E),M=!t.middlewareData.shift;let C=S,T=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=w),M&&!u){const P=co(c.left,0),_=co(c.right,0),O=co(c.top,0),F=co(c.bottom,0);h?T=g-2*(P!==0||_!==0?P+_:co(c.left,c.right)):C=U-2*(O!==0||F!==0?O+F:co(c.top,c.bottom))}await l({...t,availableWidth:T,availableHeight:C});const R=await o.getDimensions(a.floating);return g!==R.width||U!==R.height?{reset:{rects:!0}}:{}}}};function nx(){return typeof window<"u"}function P6(e){return See(e)?(e.nodeName||"").toLowerCase():"#document"}function mo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bc(e){var t;return(t=(See(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function See(e){return nx()?e instanceof Node||e instanceof mo(e).Node:!1}function al(e){return nx()?e instanceof Element||e instanceof mo(e).Element:!1}function pc(e){return nx()?e instanceof HTMLElement||e instanceof mo(e).HTMLElement:!1}function v$(e){return!nx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof mo(e).ShadowRoot}const A_e=new Set(["inline","contents"]);function Zb(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ll(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!A_e.has(i)}const M_e=new Set(["table","td","th"]);function T_e(e){return M_e.has(P6(e))}const I_e=[":popover-open",":modal"];function rx(e){return I_e.some(t=>{try{return e.matches(t)}catch{return!1}})}const N_e=["transform","translate","scale","rotate","perspective"],R_e=["transform","translate","scale","rotate","perspective","filter"],__e=["paint","layout","strict","content"];function DI(e){const t=LI(),n=al(e)?ll(e):e;return N_e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||R_e.some(r=>(n.willChange||"").includes(r))||__e.some(r=>(n.contain||"").includes(r))}function P_e(e){let t=_0(e);for(;pc(t)&&!x6(t);){if(DI(t))return t;if(rx(t))return null;t=_0(t)}return null}function LI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const D_e=new Set(["html","body","#document"]);function x6(e){return D_e.has(P6(e))}function ll(e){return mo(e).getComputedStyle(e)}function ix(e){return al(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _0(e){if(P6(e)==="html")return e;const t=e.assignedSlot||e.parentNode||v$(e)&&e.host||bc(e);return v$(t)?t.host:t}function kee(e){const t=_0(e);return x6(t)?e.ownerDocument?e.ownerDocument.body:e.body:pc(t)&&Zb(t)?t:kee(t)}function eb(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=kee(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=mo(i);if(s){const a=dA(o);return t.concat(o,o.visualViewport||[],Zb(i)?i:[],a&&n?eb(a):[])}return t.concat(i,eb(i,[],n))}function dA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Cee(e){const t=ll(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=pc(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=m9(n)!==s||m9(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function OI(e){return al(e)?e:e.contextElement}function Wp(e){const t=OI(e);if(!pc(t))return nc(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Cee(t);let o=(s?m9(n.width):n.width)/r,a=(s?m9(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const L_e=nc(0);function Aee(e){const t=mo(e);return!LI()||!t.visualViewport?L_e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function O_e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==mo(e)?!1:t}function t1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=OI(e);let o=nc(1);t&&(r?al(r)&&(o=Wp(r)):o=Wp(e));const a=O_e(s,n,r)?Aee(s):nc(0);let l=(i.left+a.x)/o.x,f=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const u=mo(s),h=r&&al(r)?mo(r):r;let g=u,U=dA(g);for(;U&&r&&h!==g;){const y=Wp(U),x=U.getBoundingClientRect(),w=ll(U),E=x.left+(U.clientLeft+parseFloat(w.paddingLeft))*y.x,S=x.top+(U.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,f*=y.y,c*=y.x,d*=y.y,l+=E,f+=S,g=mo(U),U=dA(g)}}return b9({width:c,height:d,x:l,y:f})}function sx(e,t){const n=ix(e).scrollLeft;return t?t.left+n:t1(bc(e)).left+n}function Mee(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-sx(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function j_e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=bc(r),a=t?rx(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},f=nc(1);const c=nc(0),d=pc(r);if((d||!d&&!s)&&((P6(r)!=="body"||Zb(o))&&(l=ix(r)),pc(r))){const h=t1(r);f=Wp(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const u=o&&!d&&!s?Mee(o,l):nc(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-l.scrollLeft*f.x+c.x+u.x,y:n.y*f.y-l.scrollTop*f.y+c.y+u.y}}function B_e(e){return Array.from(e.getClientRects())}function F_e(e){const t=bc(e),n=ix(e),r=e.ownerDocument.body,i=co(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=co(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+sx(e);const a=-n.scrollTop;return ll(r).direction==="rtl"&&(o+=co(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const w$=25;function $_e(e,t){const n=mo(e),r=bc(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=LI();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const f=sx(r);if(f<=0){const c=r.ownerDocument,d=c.body,u=getComputedStyle(d),h=c.compatMode==="CSS1Compat"&&parseFloat(u.marginLeft)+parseFloat(u.marginRight)||0,g=Math.abs(r.clientWidth-d.clientWidth-h);g<=w$&&(s-=g)}else f<=w$&&(s+=f);return{width:s,height:o,x:a,y:l}}const z_e=new Set(["absolute","fixed"]);function H_e(e,t){const n=t1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=pc(e)?Wp(e):nc(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,f=r*s.y;return{width:o,height:a,x:l,y:f}}function E$(e,t,n){let r;if(t==="viewport")r=$_e(e,n);else if(t==="document")r=F_e(bc(e));else if(al(t))r=H_e(t,n);else{const i=Aee(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return b9(r)}function Tee(e,t){const n=_0(e);return n===t||!al(n)||x6(n)?!1:ll(n).position==="fixed"||Tee(n,t)}function V_e(e,t){const n=t.get(e);if(n)return n;let r=eb(e,[],!1).filter(a=>al(a)&&P6(a)!=="body"),i=null;const s=ll(e).position==="fixed";let o=s?_0(e):e;for(;al(o)&&!x6(o);){const a=ll(o),l=DI(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&z_e.has(i.position)||Zb(o)&&!l&&Tee(e,o))?r=r.filter(c=>c!==o):i=a,o=_0(o)}return t.set(e,r),r}function W_e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?rx(t)?[]:V_e(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((f,c)=>{const d=E$(t,c,i);return f.top=co(d.top,f.top),f.right=R0(d.right,f.right),f.bottom=R0(d.bottom,f.bottom),f.left=co(d.left,f.left),f},E$(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function G_e(e){const{width:t,height:n}=Cee(e);return{width:t,height:n}}function X_e(e,t,n){const r=pc(t),i=bc(t),s=n==="fixed",o=t1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=nc(0);function f(){l.x=sx(i)}if(r||!r&&!s)if((P6(t)!=="body"||Zb(i))&&(a=ix(t)),r){const h=t1(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&f();s&&!r&&i&&f();const c=i&&!r&&!s?Mee(i,a):nc(0),d=o.left+a.scrollLeft-l.x-c.x,u=o.top+a.scrollTop-l.y-c.y;return{x:d,y:u,width:o.width,height:o.height}}function uS(e){return ll(e).position==="static"}function S$(e,t){if(!pc(e)||ll(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return bc(e)===n&&(n=n.ownerDocument.body),n}function Iee(e,t){const n=mo(e);if(rx(e))return n;if(!pc(e)){let i=_0(e);for(;i&&!x6(i);){if(al(i)&&!uS(i))return i;i=_0(i)}return n}let r=S$(e,t);for(;r&&T_e(r)&&uS(r);)r=S$(r,t);return r&&x6(r)&&uS(r)&&!DI(r)?n:r||P_e(e)||n}const K_e=async function(e){const t=this.getOffsetParent||Iee,n=this.getDimensions,r=await n(e.floating);return{reference:X_e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Y_e(e){return ll(e).direction==="rtl"}const Z_e={convertOffsetParentRelativeRectToViewportRelativeRect:j_e,getDocumentElement:bc,getClippingRect:W_e,getOffsetParent:Iee,getElementRects:K_e,getClientRects:B_e,getDimensions:G_e,getScale:Wp,isElement:al,isRTL:Y_e};function Nee(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function q_e(e,t){let n=null,r;const i=bc(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const f=e.getBoundingClientRect(),{left:c,top:d,width:u,height:h}=f;if(a||t(),!u||!h)return;const g=cy(d),U=cy(i.clientWidth-(c+u)),y=cy(i.clientHeight-(d+h)),x=cy(c),E={rootMargin:-g+"px "+-U+"px "+-y+"px "+-x+"px",threshold:co(0,R0(1,l))||1};let S=!0;function A(M){const C=M[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Nee(f,e.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(A,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(A,E)}n.observe(e)}return o(!0),s}function Q_e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,f=OI(e),c=i||s?[...f?eb(f):[],...eb(t)]:[];c.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const d=f&&a?q_e(f,n):null;let u=-1,h=null;o&&(h=new ResizeObserver(x=>{let[w]=x;w&&w.target===f&&h&&(h.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),f&&!l&&h.observe(f),h.observe(t));let g,U=l?t1(e):null;l&&y();function y(){const x=t1(e);U&&!Nee(U,x)&&n(),U=x,g=requestAnimationFrame(y)}return n(),()=>{var x;c.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(g)}}const J_e=E_e,ePe=S_e,tPe=x_e,nPe=C_e,rPe=v_e,k$=y_e,iPe=k_e,sPe=(e,t,n)=>{const r=new Map,i={platform:Z_e,...n},s={...i.platform,_c:r};return U_e(e,t,{...i,platform:s})};var oPe=typeof document<"u",aPe=function(){},f3=oPe?I.useLayoutEffect:aPe;function U9(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!U9(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!U9(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ree(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function C$(e,t){const n=Ree(e);return Math.round(t*n)/n}function hS(e){const t=I.useRef(e);return f3(()=>{t.current=e}),t}function lPe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:f}=e,[c,d]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,h]=I.useState(r);U9(u,r)||h(r);const[g,U]=I.useState(null),[y,x]=I.useState(null),w=I.useCallback(G=>{G!==M.current&&(M.current=G,U(G))},[]),E=I.useCallback(G=>{G!==C.current&&(C.current=G,x(G))},[]),S=s||g,A=o||y,M=I.useRef(null),C=I.useRef(null),T=I.useRef(c),R=l!=null,P=hS(l),_=hS(i),O=hS(f),F=I.useCallback(()=>{if(!M.current||!C.current)return;const G={placement:t,strategy:n,middleware:u};_.current&&(G.platform=_.current),sPe(M.current,C.current,G).then(V=>{const Y={...V,isPositioned:O.current!==!1};B.current&&!U9(T.current,Y)&&(T.current=Y,ri.flushSync(()=>{d(Y)}))})},[u,t,n,_,O]);f3(()=>{f===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(G=>({...G,isPositioned:!1})))},[f]);const B=I.useRef(!1);f3(()=>(B.current=!0,()=>{B.current=!1}),[]),f3(()=>{if(S&&(M.current=S),A&&(C.current=A),S&&A){if(P.current)return P.current(S,A,F);F()}},[S,A,F,P,R]);const $=I.useMemo(()=>({reference:M,floating:C,setReference:w,setFloating:E}),[w,E]),z=I.useMemo(()=>({reference:S,floating:A}),[S,A]),H=I.useMemo(()=>{const G={position:n,left:0,top:0};if(!z.floating)return G;const V=C$(z.floating,c.x),Y=C$(z.floating,c.y);return a?{...G,transform:"translate("+V+"px, "+Y+"px)",...Ree(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:Y}},[n,a,z.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:F,refs:$,elements:z,floatingStyles:H}),[c,F,$,z,H])}const cPe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?k$({element:r.current,padding:i}).fn(n):{}:r?k$({element:r,padding:i}).fn(n):{}}}},fPe=(e,t)=>({...J_e(e),options:[e,t]}),dPe=(e,t)=>({...ePe(e),options:[e,t]}),uPe=(e,t)=>({...iPe(e),options:[e,t]}),hPe=(e,t)=>({...tPe(e),options:[e,t]}),pPe=(e,t)=>({...nPe(e),options:[e,t]}),mPe=(e,t)=>({...rPe(e),options:[e,t]}),gPe=(e,t)=>({...cPe(e),options:[e,t]});var bPe="Arrow",_ee=I.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return m.jsx(zf.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});_ee.displayName=bPe;var UPe=_ee;function yPe(e){const[t,n]=I.useState(void 0);return e1(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,f=Array.isArray(l)?l[0]:l;o=f.inlineSize,a=f.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var jI="Popper",[Pee,Dee]=gee(jI),[xPe,Lee]=Pee(jI),Oee=e=>{const{__scopePopper:t,children:n}=e,[r,i]=I.useState(null);return m.jsx(xPe,{scope:t,anchor:r,onAnchorChange:i,children:n})};Oee.displayName=jI;var jee="PopperAnchor",Bee=I.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=Lee(jee,n),o=I.useRef(null),a=z0(t,o);return I.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(zf.div,{...i,ref:a})});Bee.displayName=jee;var BI="PopperContent",[vPe,wPe]=Pee(BI),Fee=I.forwardRef((e,t)=>{var ue,te,le,he,we,Se;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:f=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:u=!1,updatePositionStrategy:h="optimized",onPlaced:g,...U}=e,y=Lee(BI,n),[x,w]=I.useState(null),E=z0(t,De=>w(De)),[S,A]=I.useState(null),M=yPe(S),C=(M==null?void 0:M.width)??0,T=(M==null?void 0:M.height)??0,R=r+(s!=="center"?"-"+s:""),P=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},_=Array.isArray(f)?f:[f],O=_.length>0,F={padding:P,boundary:_.filter(SPe),altBoundary:O},{refs:B,floatingStyles:$,placement:z,isPositioned:H,middlewareData:G}=lPe({strategy:"fixed",placement:R,whileElementsMounted:(...De)=>Q_e(...De,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[fPe({mainAxis:i+T,alignmentAxis:o}),l&&dPe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?uPe():void 0,...F}),l&&hPe({...F}),pPe({...F,apply:({elements:De,rects:Ge,availableWidth:ht,availableHeight:ot})=>{const{width:Bt,height:wn}=Ge.reference,fn=De.floating.style;fn.setProperty("--radix-popper-available-width",`${ht}px`),fn.setProperty("--radix-popper-available-height",`${ot}px`),fn.setProperty("--radix-popper-anchor-width",`${Bt}px`),fn.setProperty("--radix-popper-anchor-height",`${wn}px`)}}),S&&gPe({element:S,padding:a}),kPe({arrowWidth:C,arrowHeight:T}),u&&mPe({strategy:"referenceHidden",...F})]}),[V,Y]=Hee(z),K=N0(g);e1(()=>{H&&(K==null||K())},[H,K]);const q=(ue=G.arrow)==null?void 0:ue.x,se=(te=G.arrow)==null?void 0:te.y,de=((le=G.arrow)==null?void 0:le.centerOffset)!==0,[xe,ve]=I.useState();return e1(()=>{x&&ve(window.getComputedStyle(x).zIndex)},[x]),m.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:H?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(he=G.transformOrigin)==null?void 0:he.x,(we=G.transformOrigin)==null?void 0:we.y].join(" "),...((Se=G.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:m.jsx(vPe,{scope:n,placedSide:V,onArrowChange:A,arrowX:q,arrowY:se,shouldHideArrow:de,children:m.jsx(zf.div,{"data-side":V,"data-align":Y,...U,ref:E,style:{...U.style,animation:H?void 0:"none"}})})})});Fee.displayName=BI;var $ee="PopperArrow",EPe={top:"bottom",right:"left",bottom:"top",left:"right"},zee=I.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=wPe($ee,r),o=EPe[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(UPe,{...i,ref:n,style:{...i.style,display:"block"}})})});zee.displayName=$ee;function SPe(e){return e!==null}var kPe=e=>({name:"transformOrigin",options:e,fn(t){var y,x,w;const{placement:n,rects:r,middlewareData:i}=t,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[f,c]=Hee(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(((x=i.arrow)==null?void 0:x.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let g="",U="";return f==="bottom"?(g=o?d:`${u}px`,U=`${-l}px`):f==="top"?(g=o?d:`${u}px`,U=`${r.floating.height+l}px`):f==="right"?(g=`${-l}px`,U=o?d:`${h}px`):f==="left"&&(g=`${r.floating.width+l}px`,U=o?d:`${h}px`),{data:{x:g,y:U}}}});function Hee(e){const[t,n="center"]=e.split("-");return[t,n]}var CPe=Oee,Vee=Bee,APe=Fee,MPe=zee,TPe="Portal",Wee=I.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[i,s]=I.useState(!1);e1(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?oG.createPortal(m.jsx(zf.div,{...r,ref:t}),o):null});Wee.displayName=TPe;function IPe(e,t){return I.useReducer((n,r)=>t[n][r]??n,e)}var FI=e=>{const{present:t,children:n}=e,r=NPe(t),i=typeof n=="function"?n({present:r.isPresent}):I.Children.only(n),s=z0(r.ref,RPe(i));return typeof n=="function"||r.isPresent?I.cloneElement(i,{ref:s}):null};FI.displayName="Presence";function NPe(e){const[t,n]=I.useState(),r=I.useRef({}),i=I.useRef(e),s=I.useRef("none"),o=e?"mounted":"unmounted",[a,l]=IPe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const f=fy(r.current);s.current=a==="mounted"?f:"none"},[a]),e1(()=>{const f=r.current,c=i.current;if(c!==e){const u=s.current,h=fy(f);e?l("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(c&&u!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),e1(()=>{if(t){let f;const c=t.ownerDocument.defaultView??window,d=h=>{const U=fy(r.current).includes(h.animationName);if(h.target===t&&U&&(l("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",f=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},u=h=>{h.target===t&&(s.current=fy(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{c.clearTimeout(f),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:I.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function fy(e){return(e==null?void 0:e.animationName)||"none"}function RPe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function _Pe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=PPe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=N0(n),l=I.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function PPe({defaultProp:e,onChange:t}){const n=I.useState(e),[r]=n,i=I.useRef(r),s=N0(t);return I.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var DPe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},J1=new WeakMap,dy=new WeakMap,uy={},pS=0,Gee=function(e){return e&&(e.host||Gee(e.parentNode))},LPe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Gee(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},OPe=function(e,t,n,r){var i=LPe(t,Array.isArray(e)?e:[e]);uy[n]||(uy[n]=new WeakMap);var s=uy[n],o=[],a=new Set,l=new Set(i),f=function(d){!d||a.has(d)||(a.add(d),f(d.parentNode))};i.forEach(f);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(u){if(a.has(u))c(u);else try{var h=u.getAttribute(r),g=h!==null&&h!=="false",U=(J1.get(u)||0)+1,y=(s.get(u)||0)+1;J1.set(u,U),s.set(u,y),o.push(u),U===1&&g&&dy.set(u,!0),y===1&&u.setAttribute(n,"true"),g||u.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",u,x)}})};return c(t),a.clear(),pS++,function(){o.forEach(function(d){var u=J1.get(d)-1,h=s.get(d)-1;J1.set(d,u),s.set(d,h),u||(dy.has(d)||d.removeAttribute(r),dy.delete(d)),h||d.removeAttribute(n)}),pS--,pS||(J1=new WeakMap,J1=new WeakMap,dy=new WeakMap,uy={})}},jPe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=DPe(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),OPe(r,i,n,"aria-hidden")):function(){return null}},Zl=function(){return Zl=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Zl.apply(this,arguments)};function Xee(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function BPe(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var d3="right-scroll-bar-position",u3="width-before-scroll-bar",FPe="with-scroll-bars-hidden",$Pe="--removed-body-scroll-bar-size";function mS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function zPe(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var HPe=typeof window<"u"?I.useLayoutEffect:I.useEffect,A$=new WeakMap;function VPe(e,t){var n=zPe(null,function(r){return e.forEach(function(i){return mS(i,r)})});return HPe(function(){var r=A$.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||mS(a,null)}),s.forEach(function(a){i.has(a)||mS(a,o)})}A$.set(n,e)},[e]),n}function WPe(e){return e}function GPe(e,t){t===void 0&&(t=WPe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},f=function(){return Promise.resolve().then(l)};f(),n={push:function(c){o.push(c),f()},filter:function(c){return o=o.filter(c),n}}}};return i}function XPe(e){e===void 0&&(e={});var t=GPe(null);return t.options=Zl({async:!0,ssr:!1},e),t}var Kee=function(e){var t=e.sideCar,n=Xee(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Zl({},n))};Kee.isSideCarExport=!0;function KPe(e,t){return e.useMedium(t),Kee}var Yee=XPe(),gS=function(){},ox=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:gS,onWheelCapture:gS,onTouchMoveCapture:gS}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,f=e.removeScrollBar,c=e.enabled,d=e.shards,u=e.sideCar,h=e.noRelative,g=e.noIsolation,U=e.inert,y=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,E=e.gapMode,S=Xee(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=u,M=VPe([n,t]),C=Zl(Zl({},S),i);return I.createElement(I.Fragment,null,c&&I.createElement(A,{sideCar:Yee,removeScrollBar:f,shards:d,noRelative:h,noIsolation:g,inert:U,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:E}),o?I.cloneElement(I.Children.only(a),Zl(Zl({},C),{ref:M})):I.createElement(w,Zl({},C,{className:l,ref:M}),a))});ox.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ox.classNames={fullWidth:u3,zeroRight:d3};var YPe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZPe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=YPe();return t&&e.setAttribute("nonce",t),e}function qPe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function QPe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var JPe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ZPe())&&(qPe(t,n),QPe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eDe=function(){var e=JPe();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Zee=function(){var e=eDe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},tDe={left:0,top:0,right:0,gap:0},bS=function(e){return parseInt(e||"",10)||0},nDe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[bS(n),bS(r),bS(i)]},rDe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tDe;var t=nDe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},iDe=Zee(),Gp="data-scroll-locked",sDe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(FPe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Gp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(d3,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(u3,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(d3," .").concat(d3,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(u3," .").concat(u3,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gp,`] {
    `).concat($Pe,": ").concat(a,`px;
  }
`)},M$=function(){var e=parseInt(document.body.getAttribute(Gp)||"0",10);return isFinite(e)?e:0},oDe=function(){I.useEffect(function(){return document.body.setAttribute(Gp,(M$()+1).toString()),function(){var e=M$()-1;e<=0?document.body.removeAttribute(Gp):document.body.setAttribute(Gp,e.toString())}},[])},aDe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;oDe();var s=I.useMemo(function(){return rDe(i)},[i]);return I.createElement(iDe,{styles:sDe(s,!t,i,n?"":"!important")})},uA=!1;if(typeof window<"u")try{var hy=Object.defineProperty({},"passive",{get:function(){return uA=!0,!0}});window.addEventListener("test",hy,hy),window.removeEventListener("test",hy,hy)}catch{uA=!1}var ep=uA?{passive:!1}:!1,lDe=function(e){return e.tagName==="TEXTAREA"},qee=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lDe(e)&&n[t]==="visible")},cDe=function(e){return qee(e,"overflowY")},fDe=function(e){return qee(e,"overflowX")},T$=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Qee(e,r);if(i){var s=Jee(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},dDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},uDe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Qee=function(e,t){return e==="v"?cDe(t):fDe(t)},Jee=function(e,t){return e==="v"?dDe(t):uDe(t)},hDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},pDe=function(e,t,n,r,i){var s=hDe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),f=!1,c=o>0,d=0,u=0;do{if(!a)break;var h=Jee(e,a),g=h[0],U=h[1],y=h[2],x=U-y-s*g;(g||x)&&Qee(e,a)&&(d+=x,u+=g);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(d)<1||!i)||!c&&(Math.abs(u)<1||!i))&&(f=!0),f},py=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},I$=function(e){return[e.deltaX,e.deltaY]},N$=function(e){return e&&"current"in e?e.current:e},mDe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gDe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},bDe=0,tp=[];function UDe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(bDe++)[0],s=I.useState(Zee)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var U=BPe([e.lockRef.current],(e.shards||[]).map(N$)).filter(Boolean);return U.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),U.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(U,y){if("touches"in U&&U.touches.length===2||U.type==="wheel"&&U.ctrlKey)return!o.current.allowPinchZoom;var x=py(U),w=n.current,E="deltaX"in U?U.deltaX:w[0]-x[0],S="deltaY"in U?U.deltaY:w[1]-x[1],A,M=U.target,C=Math.abs(E)>Math.abs(S)?"h":"v";if("touches"in U&&C==="h"&&M.type==="range")return!1;var T=window.getSelection(),R=T&&T.anchorNode,P=R?R===M||R.contains(M):!1;if(P)return!1;var _=T$(C,M);if(!_)return!0;if(_?A=C:(A=C==="v"?"h":"v",_=T$(C,M)),!_)return!1;if(!r.current&&"changedTouches"in U&&(E||S)&&(r.current=A),!A)return!0;var O=r.current||A;return pDe(O,y,U,O==="h"?E:S,!0)},[]),l=I.useCallback(function(U){var y=U;if(!(!tp.length||tp[tp.length-1]!==s)){var x="deltaY"in y?I$(y):py(y),w=t.current.filter(function(A){return A.name===y.type&&(A.target===y.target||y.target===A.shadowParent)&&mDe(A.delta,x)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var E=(o.current.shards||[]).map(N$).filter(Boolean).filter(function(A){return A.contains(y.target)}),S=E.length>0?a(y,E[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),f=I.useCallback(function(U,y,x,w){var E={name:U,delta:y,target:x,should:w,shadowParent:yDe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(S){return S!==E})},1)},[]),c=I.useCallback(function(U){n.current=py(U),r.current=void 0},[]),d=I.useCallback(function(U){f(U.type,I$(U),U.target,a(U,e.lockRef.current))},[]),u=I.useCallback(function(U){f(U.type,py(U),U.target,a(U,e.lockRef.current))},[]);I.useEffect(function(){return tp.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:u}),document.addEventListener("wheel",l,ep),document.addEventListener("touchmove",l,ep),document.addEventListener("touchstart",c,ep),function(){tp=tp.filter(function(U){return U!==s}),document.removeEventListener("wheel",l,ep),document.removeEventListener("touchmove",l,ep),document.removeEventListener("touchstart",c,ep)}},[]);var h=e.removeScrollBar,g=e.inert;return I.createElement(I.Fragment,null,g?I.createElement(s,{styles:gDe(i)}):null,h?I.createElement(aDe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function yDe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xDe=KPe(Yee,UDe);var ete=I.forwardRef(function(e,t){return I.createElement(ox,Zl({},e,{ref:t,sideCar:xDe}))});ete.classNames=ox.classNames;var $I="Popover",[tte,zHe]=gee($I,[Dee]),qb=Dee(),[vDe,H0]=tte($I),nte=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,a=qb(t),l=I.useRef(null),[f,c]=I.useState(!1),[d=!1,u]=_Pe({prop:r,defaultProp:i,onChange:s});return m.jsx(CPe,{...a,children:m.jsx(vDe,{scope:t,contentId:s_e(),triggerRef:l,open:d,onOpenChange:u,onOpenToggle:I.useCallback(()=>u(h=>!h),[u]),hasCustomAnchor:f,onCustomAnchorAdd:I.useCallback(()=>c(!0),[]),onCustomAnchorRemove:I.useCallback(()=>c(!1),[]),modal:o,children:n})})};nte.displayName=$I;var rte="PopoverAnchor",wDe=I.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=H0(rte,n),s=qb(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return I.useEffect(()=>(o(),()=>a()),[o,a]),m.jsx(Vee,{...s,...r,ref:t})});wDe.displayName=rte;var ite="PopoverTrigger",ste=I.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=H0(ite,n),s=qb(n),o=z0(t,i.triggerRef),a=m.jsx(zf.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":dte(i.open),...r,ref:o,onClick:E0(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:m.jsx(Vee,{asChild:!0,...s,children:a})});ste.displayName=ite;var zI="PopoverPortal",[EDe,SDe]=tte(zI,{forceMount:void 0}),ote=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=H0(zI,t);return m.jsx(EDe,{scope:t,forceMount:n,children:m.jsx(FI,{present:n||s.open,children:m.jsx(Wee,{asChild:!0,container:i,children:r})})})};ote.displayName=zI;var v6="PopoverContent",ate=I.forwardRef((e,t)=>{const n=SDe(v6,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,s=H0(v6,e.__scopePopover);return m.jsx(FI,{present:r||s.open,children:s.modal?m.jsx(kDe,{...i,ref:t}):m.jsx(CDe,{...i,ref:t})})});ate.displayName=v6;var kDe=I.forwardRef((e,t)=>{const n=H0(v6,e.__scopePopover),r=I.useRef(null),i=z0(t,r),s=I.useRef(!1);return I.useEffect(()=>{const o=r.current;if(o)return jPe(o)},[]),m.jsx(ete,{as:NI,allowPinchZoom:!0,children:m.jsx(lte,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:E0(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:E0(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,f=a.button===2||l;s.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:E0(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),CDe=I.forwardRef((e,t)=>{const n=H0(v6,e.__scopePopover),r=I.useRef(!1),i=I.useRef(!1);return m.jsx(lte,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,f;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((f=n.triggerRef.current)==null?void 0:f.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),lte=I.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:c,...d}=e,u=H0(v6,n),h=qb(n);return YRe(),m.jsx(xee,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(Uee,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f,onDismiss:()=>u.onOpenChange(!1),children:m.jsx(APe,{"data-state":dte(u.open),role:"dialog",id:u.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),cte="PopoverClose",ADe=I.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=H0(cte,n);return m.jsx(zf.button,{type:"button",...r,ref:t,onClick:E0(e.onClick,()=>i.onOpenChange(!1))})});ADe.displayName=cte;var MDe="PopoverArrow",fte=I.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=qb(n);return m.jsx(MPe,{...i,...r,ref:t})});fte.displayName=MDe;function dte(e){return e?"open":"closed"}var ax=nte,lx=ste,TDe=ote,HI=ate,ute=fte,US={exports:{}},R$;function IDe(){return R$||(R$=1,function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,i){return i.filter(function(s){return n.test(r,s)})},n.test=function(r,i){return n.match(r,i)!==null},n.match=function(r,i,s){s=s||{};var o=0,a=[],l=i.length,f=0,c=0,d=s.pre||"",u=s.post||"",h=s.caseSensitive&&i||i.toLowerCase(),g;r=s.caseSensitive&&r||r.toLowerCase();for(var U=0;U<l;U++)g=i[U],h[U]===r[o]?(g=d+g+u,o+=1,c+=1+c):c=0,f+=c,a[a.length]=g;return o===r.length?(f=h===r?1/0:f,{rendered:a.join(""),score:f}):null},n.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(o,a,l,f){var c=a;s.extract&&(c=s.extract(a));var d=n.match(r,c,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()}(US)),US.exports}var NDe=IDe();const RDe=mc(NDe),{useDebugValue:_De}=Te,{useSyncExternalStoreWithSelector:PDe}=rG,DDe=e=>e;function LDe(e,t=DDe,n){const r=PDe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return _De(r),r}const ODe=e=>{const t=typeof e=="function"?iG(e):e,n=(r,i)=>LDe(t,r,i);return Object.assign(n,t),n},jDe=e=>ODe(e);var _$,P$;const D$=typeof window<"u"&&((_$=window.document)!=null&&_$.createElement||((P$=window.navigator)==null?void 0:P$.product)==="ReactNative")?Te.useLayoutEffect:Te.useEffect;function kl(){const e=jDe(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(i=>i.set),r=e(i=>i.version);return D$(()=>{n(i=>({version:i.version+1}))},[]),D$(()=>(n(({current:i})=>({current:[...i,t]})),()=>n(({current:i})=>({current:i.filter(s=>s!==t)}))),[t,r]),null},Out:()=>{const t=e(n=>n.current);return Te.createElement(Te.Fragment,null,t)}}}function Vr(){return Vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr.apply(null,arguments)}function yS(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function BDe(e,t=[]){let n=[];function r(s,o){const a=I.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,U=(u==null?void 0:u[e][l])||a,y=I.useMemo(()=>g,Object.values(g));return I.createElement(U.Provider,{value:y},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=I.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>I.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return I.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,FDe(i,...t)]}function FDe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return I.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Xp(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function $De(e,t=[]){let n=[];function r(s,o){const a=I.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,U=(u==null?void 0:u[e][l])||a,y=I.useMemo(()=>g,Object.values(g));return I.createElement(U.Provider,{value:y},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=I.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>I.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return I.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,zDe(i,...t)]}function zDe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return I.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function HDe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function hte(...e){return t=>e.forEach(n=>HDe(n,t))}function L$(...e){return I.useCallback(hte(...e),e)}const hA=I.forwardRef((e,t)=>{const{children:n,...r}=e,i=I.Children.toArray(n),s=i.find(WDe);if(s){const o=s.props.children,a=i.map(l=>l===s?I.Children.count(o)>1?I.Children.only(null):I.isValidElement(o)?o.props.children:null:l);return I.createElement(pA,Vr({},r,{ref:t}),I.isValidElement(o)?I.cloneElement(o,void 0,a):null)}return I.createElement(pA,Vr({},r,{ref:t}),n)});hA.displayName="Slot";const pA=I.forwardRef((e,t)=>{const{children:n,...r}=e;return I.isValidElement(n)?I.cloneElement(n,{...GDe(r,n.props),ref:hte(t,n.ref)}):I.Children.count(n)>1?I.Children.only(null):null});pA.displayName="SlotClone";const VDe=({children:e})=>I.createElement(I.Fragment,null,e);function WDe(e){return I.isValidElement(e)&&e.type===VDe}function GDe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function XDe(e){const t=e+"CollectionProvider",[n,r]=$De(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:g,children:U}=h,y=Te.useRef(null),x=Te.useRef(new Map).current;return Te.createElement(i,{scope:g,itemMap:x,collectionRef:y},U)},a=e+"CollectionSlot",l=Te.forwardRef((h,g)=>{const{scope:U,children:y}=h,x=s(a,U),w=L$(g,x.collectionRef);return Te.createElement(hA,{ref:w},y)}),f=e+"CollectionItemSlot",c="data-radix-collection-item",d=Te.forwardRef((h,g)=>{const{scope:U,children:y,...x}=h,w=Te.useRef(null),E=L$(g,w),S=s(f,U);return Te.useEffect(()=>(S.itemMap.set(w,{ref:w,...x}),()=>void S.itemMap.delete(w))),Te.createElement(hA,{[c]:"",ref:E},y)});function u(h){const g=s(e+"CollectionConsumer",h);return Te.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${c}]`));return Array.from(g.itemMap.values()).sort((S,A)=>x.indexOf(S.ref.current)-x.indexOf(A.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},u,r]}function KDe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function pte(...e){return t=>e.forEach(n=>KDe(n,t))}function YDe(...e){return I.useCallback(pte(...e),e)}function ZDe(e,t=[]){let n=[];function r(s,o){const a=I.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,U=(u==null?void 0:u[e][l])||a,y=I.useMemo(()=>g,Object.values(g));return I.createElement(U.Provider,{value:y},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=I.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>I.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return I.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,qDe(i,...t)]}function qDe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return I.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}const QDe=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},JDe=LA.useId||(()=>{});let eLe=0;function tLe(e){const[t,n]=I.useState(JDe());return QDe(()=>{n(r=>r??String(eLe++))},[e]),t?`radix-${t}`:""}const mte=I.forwardRef((e,t)=>{const{children:n,...r}=e,i=I.Children.toArray(n),s=i.find(rLe);if(s){const o=s.props.children,a=i.map(l=>l===s?I.Children.count(o)>1?I.Children.only(null):I.isValidElement(o)?o.props.children:null:l);return I.createElement(mA,Vr({},r,{ref:t}),I.isValidElement(o)?I.cloneElement(o,void 0,a):null)}return I.createElement(mA,Vr({},r,{ref:t}),n)});mte.displayName="Slot";const mA=I.forwardRef((e,t)=>{const{children:n,...r}=e;return I.isValidElement(n)?I.cloneElement(n,{...iLe(r,n.props),ref:pte(t,n.ref)}):I.Children.count(n)>1?I.Children.only(null):null});mA.displayName="SlotClone";const nLe=({children:e})=>I.createElement(I.Fragment,null,e);function rLe(e){return I.isValidElement(e)&&e.type===nLe}function iLe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const sLe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],gte=sLe.reduce((e,t)=>{const n=I.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?mte:t;return I.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),I.createElement(a,Vr({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function VI(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function oLe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=aLe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=VI(n),l=I.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function aLe({defaultProp:e,onChange:t}){const n=I.useState(e),[r]=n,i=I.useRef(r),s=VI(t);return I.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const lLe=I.createContext(void 0);function bte(e){const t=I.useContext(lLe);return e||t||"ltr"}const xS="rovingFocusGroup.onEntryFocus",cLe={bubbles:!1,cancelable:!0},WI="RovingFocusGroup",[gA,Ute,fLe]=XDe(WI),[dLe,yte]=ZDe(WI,[fLe]),[uLe,hLe]=dLe(WI),pLe=I.forwardRef((e,t)=>I.createElement(gA.Provider,{scope:e.__scopeRovingFocusGroup},I.createElement(gA.Slot,{scope:e.__scopeRovingFocusGroup},I.createElement(mLe,Vr({},e,{ref:t}))))),mLe=I.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:f,...c}=e,d=I.useRef(null),u=YDe(t,d),h=bte(s),[g=null,U]=oLe({prop:o,defaultProp:a,onChange:l}),[y,x]=I.useState(!1),w=VI(f),E=Ute(n),S=I.useRef(!1),[A,M]=I.useState(0);return I.useEffect(()=>{const C=d.current;if(C)return C.addEventListener(xS,w),()=>C.removeEventListener(xS,w)},[w]),I.createElement(uLe,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:g,onItemFocus:I.useCallback(C=>U(C),[U]),onItemShiftTab:I.useCallback(()=>x(!0),[]),onFocusableItemAdd:I.useCallback(()=>M(C=>C+1),[]),onFocusableItemRemove:I.useCallback(()=>M(C=>C-1),[])},I.createElement(gte.div,Vr({tabIndex:y||A===0?-1:0,"data-orientation":r},c,{ref:u,style:{outline:"none",...e.style},onMouseDown:Xp(e.onMouseDown,()=>{S.current=!0}),onFocus:Xp(e.onFocus,C=>{const T=!S.current;if(C.target===C.currentTarget&&T&&!y){const R=new CustomEvent(xS,cLe);if(C.currentTarget.dispatchEvent(R),!R.defaultPrevented){const P=E().filter($=>$.focusable),_=P.find($=>$.active),O=P.find($=>$.id===g),B=[_,O,...P].filter(Boolean).map($=>$.ref.current);xte(B)}}S.current=!1}),onBlur:Xp(e.onBlur,()=>x(!1))})))}),gLe="RovingFocusGroupItem",bLe=I.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=e,a=tLe(),l=s||a,f=hLe(gLe,n),c=f.currentTabStopId===l,d=Ute(n),{onFocusableItemAdd:u,onFocusableItemRemove:h}=f;return I.useEffect(()=>{if(r)return u(),()=>h()},[r,u,h]),I.createElement(gA.ItemSlot,{scope:n,id:l,focusable:r,active:i},I.createElement(gte.span,Vr({tabIndex:c?0:-1,"data-orientation":f.orientation},o,{ref:t,onMouseDown:Xp(e.onMouseDown,g=>{r?f.onItemFocus(l):g.preventDefault()}),onFocus:Xp(e.onFocus,()=>f.onItemFocus(l)),onKeyDown:Xp(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){f.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const U=xLe(g,f.orientation,f.dir);if(U!==void 0){g.preventDefault();let x=d().filter(w=>w.focusable).map(w=>w.ref.current);if(U==="last")x.reverse();else if(U==="prev"||U==="next"){U==="prev"&&x.reverse();const w=x.indexOf(g.currentTarget);x=f.loop?vLe(x,w+1):x.slice(w+1)}setTimeout(()=>xte(x))}})})))}),ULe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function yLe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function xLe(e,t,n){const r=yLe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ULe[r]}function xte(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function vLe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const wLe=pLe,ELe=bLe;function SLe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function vte(...e){return t=>e.forEach(n=>SLe(n,t))}function kLe(...e){return I.useCallback(vte(...e),e)}const bA=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{};function CLe(e,t){return I.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const wte=e=>{const{present:t,children:n}=e,r=ALe(t),i=typeof n=="function"?n({present:r.isPresent}):I.Children.only(n),s=kLe(r.ref,i.ref);return typeof n=="function"||r.isPresent?I.cloneElement(i,{ref:s}):null};wte.displayName="Presence";function ALe(e){const[t,n]=I.useState(),r=I.useRef({}),i=I.useRef(e),s=I.useRef("none"),o=e?"mounted":"unmounted",[a,l]=CLe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const f=my(r.current);s.current=a==="mounted"?f:"none"},[a]),bA(()=>{const f=r.current,c=i.current;if(c!==e){const u=s.current,h=my(f);e?l("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(c&&u!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),bA(()=>{if(t){const f=d=>{const h=my(r.current).includes(d.animationName);d.target===t&&h&&ri.flushSync(()=>l("ANIMATION_END"))},c=d=>{d.target===t&&(s.current=my(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:I.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function my(e){return(e==null?void 0:e.animationName)||"none"}const Ete=I.forwardRef((e,t)=>{const{children:n,...r}=e,i=I.Children.toArray(n),s=i.find(TLe);if(s){const o=s.props.children,a=i.map(l=>l===s?I.Children.count(o)>1?I.Children.only(null):I.isValidElement(o)?o.props.children:null:l);return I.createElement(UA,Vr({},r,{ref:t}),I.isValidElement(o)?I.cloneElement(o,void 0,a):null)}return I.createElement(UA,Vr({},r,{ref:t}),n)});Ete.displayName="Slot";const UA=I.forwardRef((e,t)=>{const{children:n,...r}=e;return I.isValidElement(n)?I.cloneElement(n,{...ILe(r,n.props),ref:vte(t,n.ref)}):I.Children.count(n)>1?I.Children.only(null):null});UA.displayName="SlotClone";const MLe=({children:e})=>I.createElement(I.Fragment,null,e);function TLe(e){return I.isValidElement(e)&&e.type===MLe}function ILe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const NLe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],cx=NLe.reduce((e,t)=>{const n=I.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Ete:t;return I.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),I.createElement(a,Vr({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Ste(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function RLe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=_Le({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=Ste(n),l=I.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function _Le({defaultProp:e,onChange:t}){const n=I.useState(e),[r]=n,i=I.useRef(r),s=Ste(t);return I.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const PLe=LA.useId||(()=>{});let DLe=0;function LLe(e){const[t,n]=I.useState(PLe());return bA(()=>{e||n(r=>r??String(DLe++))},[e]),e||(t?`radix-${t}`:"")}const kte="Tabs",[OLe,HHe]=BDe(kte,[yte]),Cte=yte(),[jLe,GI]=OLe(kte),BLe=I.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...f}=e,c=bte(a),[d,u]=RLe({prop:r,onChange:i,defaultProp:s});return I.createElement(jLe,{scope:n,baseId:LLe(),value:d,onValueChange:u,orientation:o,dir:c,activationMode:l},I.createElement(cx.div,Vr({dir:c,"data-orientation":o},f,{ref:t})))}),FLe="TabsList",$Le=I.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=GI(FLe,n),o=Cte(n);return I.createElement(wLe,Vr({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),I.createElement(cx.div,Vr({role:"tablist","aria-orientation":s.orientation},i,{ref:t})))}),zLe="TabsTrigger",HLe=I.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,o=GI(zLe,n),a=Cte(n),l=Ate(o.baseId,r),f=Mte(o.baseId,r),c=r===o.value;return I.createElement(ELe,Vr({asChild:!0},a,{focusable:!i,active:c}),I.createElement(cx.button,Vr({type:"button",role:"tab","aria-selected":c,"aria-controls":f,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:t,onMouseDown:yS(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:yS(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:yS(e.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!i&&d&&o.onValueChange(r)})})))}),VLe="TabsContent",WLe=I.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=e,a=GI(VLe,n),l=Ate(a.baseId,r),f=Mte(a.baseId,r),c=r===a.value,d=I.useRef(c);return I.useEffect(()=>{const u=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(u)},[]),I.createElement(wte,{present:i||c},({present:u})=>I.createElement(cx.div,Vr({"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!u,id:f,tabIndex:0},o,{ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0}}),u&&s))});function Ate(e,t){return`${e}-trigger-${t}`}function Mte(e,t){return`${e}-content-${t}`}const Tte=BLe,Ite=$Le,Nte=HLe,Rte=WLe;var vS,O$;function GLe(){if(O$)return vS;O$=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof r0=="object"&&r0&&r0.Object===Object&&r0,f=typeof self=="object"&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,u=d.toString,h=Math.max,g=Math.min,U=function(){return c.Date.now()};function y(A,M,C){var T,R,P,_,O,F,B=0,$=!1,z=!1,H=!0;if(typeof A!="function")throw new TypeError(e);M=S(M)||0,x(C)&&($=!!C.leading,z="maxWait"in C,P=z?h(S(C.maxWait)||0,M):P,H="trailing"in C?!!C.trailing:H);function G(ue){var te=T,le=R;return T=R=void 0,B=ue,_=A.apply(le,te),_}function V(ue){return B=ue,O=setTimeout(q,M),$?G(ue):_}function Y(ue){var te=ue-F,le=ue-B,he=M-te;return z?g(he,P-le):he}function K(ue){var te=ue-F,le=ue-B;return F===void 0||te>=M||te<0||z&&le>=P}function q(){var ue=U();if(K(ue))return se(ue);O=setTimeout(q,Y(ue))}function se(ue){return O=void 0,H&&T?G(ue):(T=R=void 0,_)}function de(){O!==void 0&&clearTimeout(O),B=0,T=F=R=O=void 0}function xe(){return O===void 0?_:se(U())}function ve(){var ue=U(),te=K(ue);if(T=arguments,R=this,F=ue,te){if(O===void 0)return V(F);if(z)return O=setTimeout(q,M),G(F)}return O===void 0&&(O=setTimeout(q,M)),_}return ve.cancel=de,ve.flush=xe,ve}function x(A){var M=typeof A;return!!A&&(M=="object"||M=="function")}function w(A){return!!A&&typeof A=="object"}function E(A){return typeof A=="symbol"||w(A)&&u.call(A)==n}function S(A){if(typeof A=="number")return A;if(E(A))return t;if(x(A)){var M=typeof A.valueOf=="function"?A.valueOf():A;A=x(M)?M+"":M}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var C=s.test(A);return C||o.test(A)?a(A.slice(2),C?2:8):i.test(A)?t:+A}return vS=y,vS}var XLe=GLe();const KLe=mc(XLe);function YLe(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var ZLe={};YLe(ZLe,"LaserPointer",()=>x9);function fr([e,t,n],[r,i,s]){return[e+r,t+i,n+s]}function b5([e,t,n],[r,i,s]){return[e-r,t-i,n-s]}function Tr([e,t,n],r){return[e*r,t*r,n*r]}function np([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Pi([e,t,n],r){return[Math.cos(r)*e-Math.sin(r)*t,Math.sin(r)*e+Math.cos(r)*t,n]}function qLe(e,t,n){return fr(e,Tr(b5(t,e),n))}function j$(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function B$(e){return Math.atan2(Math.sin(e),Math.cos(e))}function F$([e,t]){return Math.sqrt(e**2+t**2)}function Kp([e,t],[n,r]){return Math.sqrt((n-e)**2+(r-t)**2)}function QLe(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=Kp(e[n-1],e[n]);return t+=Kp(e[e.length-2],e[e.length-1]),t}const JLe=(e,t,n)=>Math.max(t,Math.min(n,e));function eOe(e,t,n){const r=Kp(t,n);if(r===0)return Kp(e,t);const i=JLe(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r**2,0,1),s=[t[0]+i*(n[0]-t[0]),t[1]+i*(n[1]-t[1]),e[2]];return Kp(s,e)}function y9(e,t){if(t===0||e.length<=2)return e;const n=e[0],r=e[e.length-1],[i,s]=e.reduce(([o,a],l,f)=>{const c=eOe(l,n,r);return c>o?[c,f]:[o,a]},[0,-1]);if(i>=t){const o=e[s];return[...y9([n,...e.slice(1,s),o],t).slice(0,-1),o,...y9([o,...e.slice(s,-1),r],t).slice(1)]}else return[n,r]}const Dd=class Dd{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},Dd.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=qLe(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),QLe(this.tailPoints)>Dd.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,r,i,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:r,totalLength:i})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=y9(n,this.options.simplify));const r=n.length;if(r===0)return[];if(r===1){const C=n[0],T=this.getSize(t,C[2],0,r,0);if(T<.5)return[];const R=[];for(let P=0;P<=Math.PI*2;P+=Math.PI/16)R.push(fr(C,Tr(Pi([1,0,0],P),T)));return R.push(fr(C,Tr([1,0,0],this.getSize(t,C[2],0,r,0)))),R}if(r===2){const C=n[0],T=n[1],R=this.getSize(t,C[2],0,r,0),P=this.getSize(t,T[2],0,r,0);if(R<.5||P<.5)return[];const _=[],O=j$(C,[C[0],C[1]-100,C[2]],T);for(let F=O;F<=Math.PI+O;F+=Math.PI/16)_.push(fr(C,Tr(Pi([1,0,0],F),R)));for(let F=Math.PI+O;F<=Math.PI*2+O;F+=Math.PI/16)_.push(fr(T,Tr(Pi([1,0,0],F),P)));return _.push(_[0]),_}const i=[],s=[];let o=0,a=0,l=0,f=0;for(let C=1;C<r-1;C++){const T=n[C-1],R=n[C],P=n[C+1];let _=R[2];const O=Kp(T,R);f+=O,o=a+(O-a)*.2;const F=this.getSize(t,_,C,r,f);if(F===0){l=C+1;continue}const B=np(b5(T,R)),$=np(b5(P,R)),z=Pi(B,Math.PI/2),H=Pi(B,-Math.PI/2),G=Pi($,Math.PI/2),V=Pi($,-Math.PI/2),Y=fr(R,Tr(z,F)),K=fr(R,Tr(H,F)),q=fr(R,Tr(G,F)),se=fr(R,Tr(V,F)),de=fr(z,V),xe=fr(H,G),ve=fr(R,Tr(F$(de)===0?B:np(de),F)),ue=fr(R,Tr(F$(xe)===0?$:np(xe),F)),te=B$(j$(R,T,P)),le=Dd.constants.cornerDetectionMaxAngle/180*Math.PI*Dd.constants.cornerDetectionVariance(o);if(Math.abs(te)<le){const he=Math.abs(B$(Math.PI-te));if(he===0)continue;if(te<0){s.push(K,ue);for(let we=0;we<=he;we+=he/4)i.push(fr(R,Pi(Tr(z,F),we)));for(let we=he;we>=0;we-=he/4)s.push(fr(R,Pi(Tr(z,F),we)));s.push(ue,q)}else{i.push(Y,ve);for(let we=0;we<=he;we+=he/4)s.push(fr(R,Pi(Tr(z,-F),-we)));for(let we=he;we>=0;we-=he/4)i.push(fr(R,Pi(Tr(z,-F),-we)));i.push(ve,se)}}else i.push(ve),s.push(ue);a=o}if(l>=r-2)if(this.options.keepHead){const C=n[r-1],T=[];for(let R=0;R<=Math.PI*2;R+=Math.PI/16)T.push(fr(C,Tr(Pi([1,0,0],R),this.options.size)));return T.push(fr(C,Tr([1,0,0],this.options.size))),T}else return[];const c=n[l],d=n[l+1],u=n[r-2],h=n[r-1],g=np(b5(d,c)),U=np(b5(u,h)),y=Pi(g,-Math.PI/2),x=Pi(U,Math.PI/2),w=this.getSize(t,c[2],0,r,0),E=[],S=this.options.keepHead?this.options.size:this.getSize(t,u[2],r-2,r,f),A=[];if(w>1){for(let C=0;C<=Math.PI;C+=Math.PI/16)E.unshift(fr(c,Pi(Tr(y,w),-C)));E.unshift(fr(c,Tr(y,-w)))}else E.push(c);for(let C=0;C<=Math.PI*3;C+=Math.PI/16)A.push(fr(h,Pi(Tr(x,-S),-C)));const M=[...E,...i,...A.reverse(),...s.reverse()];return E.length>0&&M.push(E[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?y9(M,this.options.simplify):M}};Dd.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},Dd.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let x9=Dd;var _te=pee(),{useAtom:ir,useSetAtom:fx,useAtomValue:Pte,useStore:VHe}=_te,tOe=_te.Provider,Ya=II(),nOe=Oye({"./locales/ar-SA.json":()=>Ve(()=>import("./ar-SA-G6X2FPQ2-CZvzAd4t.js"),[]),"./locales/az-AZ.json":()=>Ve(()=>import("./az-AZ-76LH7QW2-BZ-TDrDR.js"),[]),"./locales/bg-BG.json":()=>Ve(()=>import("./bg-BG-XCXSNQG7-BbDs732J.js"),[]),"./locales/bn-BD.json":()=>Ve(()=>import("./bn-BD-2XOGV67Q-CjjoxFFw.js"),[]),"./locales/ca-ES.json":()=>Ve(()=>import("./ca-ES-6MX7JW3Y-BTkIPCiO.js"),[]),"./locales/cs-CZ.json":()=>Ve(()=>import("./cs-CZ-2BRQDIVT-Y-6q4SdB.js"),[]),"./locales/da-DK.json":()=>Ve(()=>import("./da-DK-5WZEPLOC-CfOhYo05.js"),[]),"./locales/de-DE.json":()=>Ve(()=>import("./de-DE-XR44H4JA-Bgq4LbEo.js"),[]),"./locales/el-GR.json":()=>Ve(()=>import("./el-GR-BZB4AONW-BAd-oPRO.js"),[]),"./locales/en.json":()=>Ve(()=>Promise.resolve().then(()=>AHe),void 0),"./locales/es-ES.json":()=>Ve(()=>import("./es-ES-U4NZUMDT-B8VTvpx5.js"),[]),"./locales/eu-ES.json":()=>Ve(()=>import("./eu-ES-A7QVB2H4-7ec-PGnS.js"),[]),"./locales/fa-IR.json":()=>Ve(()=>import("./fa-IR-HGAKTJCU-BAXVapop.js"),[]),"./locales/fi-FI.json":()=>Ve(()=>import("./fi-FI-Z5N7JZ37-B5n4GVbr.js"),[]),"./locales/fr-FR.json":()=>Ve(()=>import("./fr-FR-RHASNOE6-PCcB2Awc.js"),[]),"./locales/gl-ES.json":()=>Ve(()=>import("./gl-ES-HMX3MZ6V-BW-5JK5U.js"),[]),"./locales/he-IL.json":()=>Ve(()=>import("./he-IL-6SHJWFNN-DmeNMXZI.js"),[]),"./locales/hi-IN.json":()=>Ve(()=>import("./hi-IN-IWLTKZ5I-BTULkOUD.js"),[]),"./locales/hu-HU.json":()=>Ve(()=>import("./hu-HU-A5ZG7DT2-BPRLlGd0.js"),[]),"./locales/id-ID.json":()=>Ve(()=>import("./id-ID-SAP4L64H-BT-m5w_e.js"),[]),"./locales/it-IT.json":()=>Ve(()=>import("./it-IT-JPQ66NNP-OvdUUo_O.js"),[]),"./locales/ja-JP.json":()=>Ve(()=>import("./ja-JP-DBVTYXUO-DRl7rJwn.js"),[]),"./locales/kaa.json":()=>Ve(()=>import("./kaa-6HZHGXH3-DV-k64_t.js"),[]),"./locales/kab-KAB.json":()=>Ve(()=>import("./kab-KAB-ZGHBKWFO-CaYvZ58p.js"),[]),"./locales/kk-KZ.json":()=>Ve(()=>import("./kk-KZ-P5N5QNE5-CDqdT6r5.js"),[]),"./locales/km-KH.json":()=>Ve(()=>import("./km-KH-HSX4SM5Z-CZZIZ3cK.js"),[]),"./locales/ko-KR.json":()=>Ve(()=>import("./ko-KR-MTYHY66A-CoToczj9.js"),[]),"./locales/ku-TR.json":()=>Ve(()=>import("./ku-TR-6OUDTVRD-BIcLBVln.js"),[]),"./locales/lt-LT.json":()=>Ve(()=>import("./lt-LT-XHIRWOB4-aNazNi1I.js"),[]),"./locales/lv-LV.json":()=>Ve(()=>import("./lv-LV-5QDEKY6T-DcIOfL4T.js"),[]),"./locales/mr-IN.json":()=>Ve(()=>import("./mr-IN-CRQNXWMA-Dik0dh74.js"),[]),"./locales/my-MM.json":()=>Ve(()=>import("./my-MM-5M5IBNSE-DZ8_9VK_.js"),[]),"./locales/nb-NO.json":()=>Ve(()=>import("./nb-NO-T6EIAALU-C3CVmV1C.js"),[]),"./locales/nl-NL.json":()=>Ve(()=>import("./nl-NL-IS3SIHDZ-C8ObltWv.js"),[]),"./locales/nn-NO.json":()=>Ve(()=>import("./nn-NO-6E72VCQL-Ch2J2zMx.js"),[]),"./locales/oc-FR.json":()=>Ve(()=>import("./oc-FR-POXYY2M6-G1clSAKp.js"),[]),"./locales/pa-IN.json":()=>Ve(()=>import("./pa-IN-N4M65BXN-BQrlf6ye.js"),[]),"./locales/percentages.json":()=>Ve(()=>Promise.resolve().then(()=>MHe),void 0),"./locales/pl-PL.json":()=>Ve(()=>import("./pl-PL-T2D74RX3-BSZcLh7L.js"),[]),"./locales/pt-BR.json":()=>Ve(()=>import("./pt-BR-5N22H2LF-C_Sl2ug2.js"),[]),"./locales/pt-PT.json":()=>Ve(()=>import("./pt-PT-UZXXM6DQ-B_fNUqZD.js"),[]),"./locales/ro-RO.json":()=>Ve(()=>import("./ro-RO-JPDTUUEW-BmlfSJO7.js"),[]),"./locales/ru-RU.json":()=>Ve(()=>import("./ru-RU-B4JR7IUQ-CpNd9-77.js"),[]),"./locales/si-LK.json":()=>Ve(()=>import("./si-LK-N5RQ5JYF-Cpg-I4pD.js"),[]),"./locales/sk-SK.json":()=>Ve(()=>import("./sk-SK-C5VTKIMK-BBKBlepq.js"),[]),"./locales/sl-SI.json":()=>Ve(()=>import("./sl-SI-NN7IZMDC-DVsjUYol.js"),[]),"./locales/sv-SE.json":()=>Ve(()=>import("./sv-SE-XGPEYMSR-Civ_zCCk.js"),[]),"./locales/ta-IN.json":()=>Ve(()=>import("./ta-IN-2NMHFXQM-Db8OJC72.js"),[]),"./locales/th-TH.json":()=>Ve(()=>import("./th-TH-HPSO5L25-CuUp4S8C.js"),[]),"./locales/tr-TR.json":()=>Ve(()=>import("./tr-TR-DEFEU3FU-DApC2xrf.js"),[]),"./locales/uk-UA.json":()=>Ve(()=>import("./uk-UA-QMV73CPH-X2MOSQe6.js"),[]),"./locales/vi-VN.json":()=>Ve(()=>import("./vi-VN-M7AON7JQ-bghovCzN.js"),[]),"./locales/zh-CN.json":()=>Ve(()=>import("./zh-CN-LNUGB5OW-Dt4qTcd-.js"),[]),"./locales/zh-HK.json":()=>Ve(()=>import("./zh-HK-E62DVLB3-BYHsElME.js"),[]),"./locales/zh-TW.json":()=>Ve(()=>import("./zh-TW-RAJ6MFWO-CtlyCunH.js"),[])}),rOe=85,D6={code:"en",label:"English"},XI=[D6,...[{code:"ar-SA",label:"",rtl:!0},{code:"bg-BG",label:""},{code:"ca-ES",label:"Catal"},{code:"cs-CZ",label:"esky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:""},{code:"es-ES",label:"Espaol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Franais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"",rtl:!0},{code:"hi-IN",label:""},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:""},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:" "},{code:"ko-KR",label:""},{code:"ku-TR",label:"Kurd"},{code:"lt-LT",label:"Lietuvi"},{code:"lv-LV",label:"Latvieu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokml"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:""},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugus Brasileiro"},{code:"pt-PT",label:"Portugus"},{code:"ro-RO",label:"Romn"},{code:"ru-RU",label:""},{code:"sk-SK",label:"Slovenina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenina"},{code:"tr-TR",label:"Trke"},{code:"uk-UA",label:""},{code:"zh-CN",label:""},{code:"zh-TW",label:""},{code:"vi-VN",label:"Ting Vit"},{code:"mr-IN",label:""}].filter(e=>lee[e.code]>=rOe).sort((e,t)=>e.label>t.label?1:-1)],v9="__test__";vt.DEV&&XI.unshift({code:v9,label:"test language"},{code:`${v9}.rtl`,label:"test language (rtl)",rtl:!0});var Ip=D6,h3={},Dte=async e=>{if(Ip=e,document.documentElement.dir=Ip.rtl?"rtl":"ltr",document.documentElement.lang=Ip.code,e.code.startsWith(v9))h3={};else try{h3=await nOe(`./locales/${Ip.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),h3=TI}Ya.set(Lte,e.code)},tb=()=>Ip,$$=(e,t)=>{for(let n=0;n<t.length;++n){let r=t[n];if(e[r]===void 0)return;e=e[r]}if(typeof e=="string")return e},j=(e,t,n)=>{if(Ip.code.startsWith(v9))return`[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]`;let r=e.split("."),i=$$(h3,r)||$$(TI,r)||n;if(i===void 0){let s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(let s in t)i=i.replace(`{{${s}}}`,String(t[s]));return i},Lte=di(D6.code),Zi=()=>{let e=Pte(Lte);return{t:j,langCode:e}},iOe=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:r=""})=>{let i=-(Te.useRef(Date.now()).current%1600);return m.jsx("div",{className:`Spinner ${r}`,children:m.jsx("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${i}ms`:0},children:m.jsx("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Lf=iOe,Ote=({delay:e,theme:t})=>{let[n,r]=I.useState(!!e);return I.useEffect(()=>{if(!e)return;let i=setTimeout(()=>{r(!1)},e);return()=>clearTimeout(i)},[e]),n?null:m.jsxs("div",{className:ze("LoadingMessage",{"LoadingMessage--dark":t===Nt.DARK}),children:[m.jsx("div",{children:m.jsx(Lf,{})}),m.jsx("div",{className:"LoadingMessage-text",children:j("labels.loadingScene")})]})},sOe=e=>{let[t,n]=I.useState(!0);return I.useEffect(()=>{let r=async()=>{await Dte(i),n(!1)},i=XI.find(s=>s.code===e.langCode)||D6;r()},[e.langCode]),t?m.jsx(Ote,{theme:e.theme}):e.children},jt=Te.forwardRef(({size:e="medium",visible:t=!0,className:n="",...r},i)=>{let{id:s}=xc(),o=Te.useRef(null);Te.useImperativeHandle(i,()=>o.current);let a=`ToolIcon_size_${e}`,[l,f]=I.useState(!1),c=I.useRef(!0),d=async h=>{var U;let g="onClick"in r&&((U=r.onClick)==null?void 0:U.call(r,h));if(Hb(g))try{f(!0),await g}catch(y){if(y instanceof j7)console.warn(y);else throw y}finally{c.current&&f(!1)}};I.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]);let u=I.useRef(null);if(r.type==="button"||r.type==="icon"||r.type==="submit"){let h=r.type==="icon"?"button":r.type;return m.jsxs("button",{className:ze("ToolIcon_type_button",a,n,t&&!r.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!r.hidden,"ToolIcon--selected":r.selected,"ToolIcon--plain":r.type==="icon"}),style:r.style,"data-testid":r["data-testid"],hidden:r.hidden,title:r.title,"aria-label":r["aria-label"],type:h,onClick:d,ref:o,disabled:l||r.isLoading||!!r.disabled,children:[(r.icon||r.label)&&m.jsxs("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!r.disabled,children:[r.icon||r.label,r.keyBindingLabel&&m.jsx("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel}),r.isLoading&&m.jsx(Lf,{})]}),r.showAriaLabel&&m.jsxs("div",{className:"ToolIcon__label",children:[r["aria-label"]," ",l&&m.jsx(Lf,{})]}),r.children]})}return m.jsxs("label",{className:ze("ToolIcon",n),title:r.title,onPointerDown:h=>{var g;u.current=h.pointerType||null,(g=r.onPointerDown)==null||g.call(r,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{u.current=null})},children:[m.jsx("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:r.name,"aria-label":r["aria-label"],"aria-keyshortcuts":r["aria-keyshortcuts"],"data-testid":r["data-testid"],id:`${s}-${r.id}`,onChange:()=>{var h;(h=r.onChange)==null||h.call(r,{pointerType:u.current})},checked:r.checked,ref:o}),m.jsxs("div",{className:"ToolIcon__icon",children:[r.icon,r.keyBindingLabel&&m.jsx("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel})]})]})});jt.displayName="ToolButton";var oOe=(e,t,n)=>{let r=new Set(wt(e.filter(c=>at(c)),t).map(c=>c.id)),i={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(let c of r){let d=hc(e,c);for(let u of d)if(!o.has(u.id)){if(Mn(u)){let h=fi(u,s);h&&(i[h.id]=!0)}else i[u.id]=!0;o.add(u.id)}}let a=!0,l=e.map(c=>{if(t.selectedElementIds[c.id]){let d=Mn(c)?fi(c,s):null;return c.frameId&&r.has(c.frameId)?(a=!1,i[c.id]=!0,c):d!=null&&d.frameId&&r.has(d==null?void 0:d.frameId)?c:(c.boundElements&&c.boundElements.forEach(u=>{var g,U;let h=n.scene.getNonDeletedElementsMap().get(u.id);h&&Fe(h)&&(ye(h,{startBinding:c.id===((g=h.startBinding)==null?void 0:g.elementId)?null:h.startBinding,endBinding:c.id===((U=h.endBinding)==null?void 0:U.elementId)?null:h.endBinding}),ye(h,{points:h.points}))}),yt(c,{isDeleted:!0}))}return c.frameId&&r.has(c.frameId)?(a=!1,Mn(c)||(i[c.id]=!0),yt(c,{frameId:null})):Mn(c)&&t.selectedElementIds[c.containerId]?yt(c,{isDeleted:!0}):c}),f=t.editingGroupId;if(a&&t.editingGroupId){let c=Cn(l,t.editingGroupId).filter(d=>!d.isDeleted);if(c.length>1)c[0]&&(i[c[0].id]=!0);else{f=null,c[0]&&(i[c[0].id]=!0);let d=c[0];if(d){let u=d.groupIds.findIndex(g=>g===t.editingGroupId),h=d.groupIds[u+1];if(h){let g=Cn(l,h).filter(U=>!U.isDeleted);g.length>1&&(f=h,g.forEach(U=>{i[U.id]=!0}))}}}}return{elements:l,appState:{...t,...rs({selectedElementIds:i,editingGroupId:f},l,t,null)}}},z$=(e,t)=>{if(e.editingGroupId){let n=Cn(Un(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},jte=_e({name:"deleteSelectedElements",label:"labels.delete",icon:Yh,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,r)=>{if(t.editingLinearElement){let{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:f}=t.editingLinearElement,c=r.scene.getNonDeletedElementsMap(),d=Be.getElement(o,c);if(!d||a==null)return!1;if(d.points.length<2){let h=e.map(U=>U.id===d.id?yt(U,{isDeleted:!0}):U),g=z$(t,h);return{elements:h,appState:{...g,editingLinearElement:null},captureUpdate:me.IMMEDIATELY}}let u={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:f};return Be.deletePoints(d,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...u,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:me.IMMEDIATELY}}let{elements:i,appState:s}=oOe(e,t,r);return tQ(i,i.filter(o=>o.isDeleted)),s=z$(s,i),{elements:i,appState:{...s,activeTool:yr(t,{type:"selection"}),multiElement:null,activeEmbeddable:null},captureUpdate:Dr(Un(e),t)?me.IMMEDIATELY:me.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===Q.BACKSPACE||e.key===Q.DELETE)&&!e[Q.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(jt,{type:"button",icon:Yh,title:j("labels.delete"),"aria-label":j("labels.delete"),onClick:()=>n(null),visible:Dr(Un(e),t)})}),yA=(e,t)=>e.frameId===t||e.id===t,Bte=(e,t,n)=>{let r=[],i=[],s=null,o=-1,a=ct(n||wt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){let l=e[o];a.get(l.id)?(i.length&&(r=r.concat(i),i=[]),r.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,i.push(o)):i=[]}return r},aOe=e=>{let t=0;return e.reduce((n,r,i)=>(i>0&&e[i-1]!==r-1&&(t=++t),(n[t]||(n[t]=[])).push(r),n),[])},H$=(e,t,n)=>{var r,i;if("containerId"in e&&e.containerId){let s=_f.getScene(e).getElement(e.containerId);if(s)return n==="left"?Math.min(t.indexOf(s),t.indexOf(e)):Math.max(t.indexOf(s),t.indexOf(e))}else{let s=(i=(r=e.boundElements)==null?void 0:r.find(o=>o.type!=="arrow"))==null?void 0:i.id;if(s){let o=_f.getScene(e).getElement(s);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}}},lOe=(e,t)=>{let n=-1,r=-1;return e.forEach((i,s)=>{yA(i,t)&&(n===-1&&(n=s),r=s)}),n===-1?[]:e.slice(n,r+1)},cOe=(e,t,n,r,i)=>{let s=t[n],o=d=>d.isDeleted?!1:i?d.frameId===i:e.editingGroupId?d.groupIds.includes(e.editingGroupId):!0,a=r==="left"?Su(t,d=>o(d),Math.max(0,n-1)):$Z(t,d=>o(d),n+1),l=t[a];if(!l)return-1;if(e.editingGroupId){if((s==null?void 0:s.groupIds.join(""))===(l==null?void 0:l.groupIds.join("")))return H$(l,t,r)??a;if(!(l!=null&&l.groupIds.includes(e.editingGroupId)))return-1}if(!i&&(l.frameId||at(l))){let d=lOe(t,l.frameId||l.id);return r==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1])}if(!l.groupIds.length)return H$(l,t,r)??a;let f=e.editingGroupId?l.groupIds[l.groupIds.indexOf(e.editingGroupId)-1]:l.groupIds[l.groupIds.length-1],c=Cn(t,f);return c.length?r==="left"?t.indexOf(c[0]):t.indexOf(c[c.length-1]):a},Fte=(e,t)=>t.reduce((n,r)=>{let i=e[r];return n.set(i.id,i),n},new Map),$te=(e,t,n)=>{let r=Bte(e,t),i=Fte(e,r),s=aOe(r);n==="right"&&(s=s.reverse());let o=new Set(r.filter(a=>at(e[a])).map(a=>e[a].id));return s.forEach((a,l)=>{var w;let f=a[0],c=a[a.length-1],d=n==="left"?f:c,u=a.some(E=>{let S=e[E];return S.frameId&&o.has(S.frameId)})?null:(w=e[d])==null?void 0:w.frameId,h=cOe(t,e,d,n,u);if(h===-1||d===h)return;let g=n==="left"?e.slice(0,h):e.slice(0,f),U=e.slice(f,c+1),y=n==="left"?e.slice(h,f):e.slice(c+1,h+1),x=n==="left"?e.slice(c+1):e.slice(h+1);e=n==="left"?[...g,...U,...y,...x]:[...g,...y,...U,...x]}),uc(e,i),e},zte=(e,t,n,r,i)=>{let s=Bte(e,t,i),o=Fte(e,s),a=[],l,f;if(n==="left"){if(r)l=$Z(e,g=>yA(g,r));else if(t.editingGroupId){let g=Cn(e,t.editingGroupId);if(!g.length)return e;l=e.indexOf(g[0])}else l=0;f=s[s.length-1]}else{if(r)f=Su(e,g=>yA(g,r));else if(t.editingGroupId){let g=Cn(e,t.editingGroupId);if(!g.length)return e;f=e.indexOf(g[g.length-1])}else f=e.length-1;l=s[0]}l===-1&&(l=0);for(let g=l;g<f+1;g++)s.includes(g)||a.push(e[g]);let c=Array.from(o.values()),d=e.slice(0,l),u=e.slice(f+1),h=n==="left"?[...d,...c,...a,...u]:[...d,...a,...c,...u];return uc(h,o),h};function Hte(e,t,n,r){let i=ct(wt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(let f of e)i.has(f.id)&&at(f)&&o.add(f.id);for(let f of e)if(i.has(f.id))if(at(f)||f.frameId&&o.has(f.frameId))s.regularElements.push(f);else if(!f.frameId)s.regularElements.push(f);else{let c=s.frameChildren.get(f.frameId)||[];c.push(f),s.frameChildren.set(f.frameId,c)}let a=e,l=Array.from(s.frameChildren.entries());for(let[f,c]of l)a=r(e,t,n,f,c);return r(a,t,n,null,s.regularElements)}var fOe=(e,t)=>$te(e,t,"left"),dOe=(e,t)=>$te(e,t,"right"),uOe=(e,t)=>Hte(e,t,"left",zte),hOe=(e,t)=>Hte(e,t,"right",zte),pOe=_e({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:IB,trackEvent:{category:"element"},perform:(e,t)=>({elements:fOe(e,t),appState:t,captureUpdate:me.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[Q.CTRL_OR_CMD]&&!e.shiftKey&&e.code===zt.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${j("labels.sendBackward")}  ${Ue("CtrlOrCmd+[")}`,children:IB})}),mOe=_e({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:TB,trackEvent:{category:"element"},perform:(e,t)=>({elements:dOe(e,t),appState:t,captureUpdate:me.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[Q.CTRL_OR_CMD]&&!e.shiftKey&&e.code===zt.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${j("labels.bringForward")}  ${Ue("CtrlOrCmd+]")}`,children:TB})}),gOe=_e({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:RB,trackEvent:{category:"element"},perform:(e,t)=>({elements:uOe(e,t),appState:t,captureUpdate:me.IMMEDIATELY}),keyTest:e=>ac?e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.BRACKET_LEFT:e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.code===zt.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${j("labels.sendToBack")}  ${Ue(ac?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:RB})}),bOe=_e({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:NB,trackEvent:{category:"element"},perform:(e,t)=>({elements:hOe(e,t),appState:t,captureUpdate:me.IMMEDIATELY}),keyTest:e=>ac?e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.BRACKET_RIGHT:e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.code===zt.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${j("labels.bringToFront")}  ${Ue(ac?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:NB})}),UOe=_e({name:"selectAll",label:"labels.selectAll",icon:gEe,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,r)=>{if(t.editingLinearElement)return!1;let i=e.filter(s=>!s.isDeleted&&!(je(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...rs({editingGroupId:null,selectedElementIds:i},Un(e),t,r),selectedLinearElement:Object.keys(i).length===1&&mt(e[0])?new Be(e[0]):null},captureUpdate:me.IMMEDIATELY}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.A}),yOe=e=>{let t=e.slice(),n=new Set,r=s=>{var f,c,d;let o=(c=(f=s[0])==null?void 0:f.groupIds)==null?void 0:c.join(""),a=[s[0]],l=[];for(let u of s.slice(1))((d=u.groupIds)==null?void 0:d.join(""))===o?a.push(u):l.push(u);return l.length?[...a,...r(l)]:a},i=new Map;return t.forEach((s,o)=>{var a;if(!i.has(s.id))if((a=s.groupIds)!=null&&a.length){let l=s.groupIds[s.groupIds.length-1],f=t.slice(o).filter(c=>{var u;let d=(u=c==null?void 0:c.groupIds)==null?void 0:u.some(h=>h===l);return d&&i.set(c.id,!0),d});for(let c of r(f))n.add(c)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},xOe=e=>{let t=yve(e),n=e.slice(),r=new Set;return n.forEach((i,s)=>{var o,a,l;i&&((o=i.boundElements)!=null&&o.length?(r.add(i),n[s]=null,i.boundElements.forEach(f=>{let c=t.get(f.id);c&&f.type==="text"&&(r.add(c[0]),n[c[1]]=null)})):i.type==="text"&&i.containerId&&((l=(a=t.get(i.containerId))==null?void 0:a[0].boundElements)!=null&&l.find(f=>f.id===i.id))||(r.add(i),n[s]=null))}),r.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...r]},vOe=e=>xOe(yOe(e)),wOe=_e({name:"duplicateSelection",label:"labels.duplicateSelection",icon:_C,trackEvent:{category:"element"},perform:(e,t,n,r)=>{if(t.editingLinearElement)try{let s=Be.duplicateSelectedPoints(t,r.scene.getNonDeletedElementsMap());return{elements:e,appState:s,captureUpdate:me.IMMEDIATELY}}catch{return!1}let i=EOe(e,t);if(r.props.onDuplicate&&i.elements){let s=r.props.onDuplicate(i.elements,e);s&&(i.elements=s)}return{...i,captureUpdate:me.IMMEDIATELY}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.D,PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(jt,{type:"button",icon:_C,title:`${j("labels.duplicateSelection")}  ${Ue("CtrlOrCmd+D")}`,"aria-label":j("labels.duplicateSelection"),onClick:()=>n(null),visible:Dr(Un(e),t)})}),EOe=(e,t)=>{let n=new Map,r=[],i=[],s=new Map,o=new Map,a=ct(e),l=U=>{let y=EB(U).reduce((x,w)=>{if(c.has(w.id))return x;c.set(w.id,!0);let E=vQ(t.editingGroupId,n,w,{x:w.x+$4/2,y:w.y+$4/2});return c.set(E.id,!0),o.set(E.id,E),s.set(w.id,E.id),i.push(w),r.push(E),x.push(E),x},[]);return Array.isArray(U)?y:y[0]||null};e=vOe(e);let f=ct(wt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),c=new Map,d=e.slice(),u=(U,y)=>{Gi(U!==-1,"targetIndex === -1 "),!(!Array.isArray(y)&&!y)&&d.splice(U+1,0,...EB(y))},h=new Set(e.filter(U=>f.has(U.id)&&at(U)).map(U=>U.id));for(let U of e){if(c.has(U.id)||!f.has(U.id))continue;let y=oQ(t,U);if(y){let x=Cn(e,y).flatMap(E=>at(E)?[...hc(e,E.id),E]:[E]),w=Su(d,E=>{var S;return(S=E.groupIds)==null?void 0:S.includes(y)});u(w,l(x));continue}if(!(U.frameId&&h.has(U.frameId))){if(at(U)){let x=U.id,w=hc(e,x),E=Su(d,S=>S.frameId===x||S.id===x);u(E,l([...w,U]));continue}if(sa(U)){let x=xt(U,a),w=Su(d,E=>E.id===U.id||"containerId"in E&&E.containerId===U.id);x?u(w,l([U,x])):u(w,l(U));continue}if(Mn(U)){let x=fi(U,a),w=Su(d,E=>E.id===U.id||E.id===(x==null?void 0:x.id));x?u(w,l([x,U])):u(w,l(U));continue}u(Su(d,x=>x.id===U.id),l(U))}}dQ(d,i,s),eQ(d,i,s),qQ(d,i,s);let g=xI(r);return{elements:d,appState:{...t,...rs({editingGroupId:t.editingGroupId,selectedElementIds:g.reduce((U,y)=>(Mn(y)||(U[y.id]=!0),U),{})},Un(d),t,null)}}},SOe=new Set(["command_palette","export"]),xn=(e,t,n,r)=>{try{if(typeof window>"u"||vt.VITE_WORKER_ID||vt.VITE_APP_ENABLE_TRACKING!=="true"||!SOe.has(e)||vt.DEV)return;vt.PROD||console.info("trackEvent",{category:e,action:t,label:n,value:r}),window.sa_event&&window.sa_event(t,{category:e,label:n,value:r})}catch(i){console.error("error during analytics",i)}},Vte=I.forwardRef((e,t)=>{let{title:n,className:r,testId:i,active:s,standalone:o,icon:a,onClick:l}=e;return m.jsx("button",{type:"button",ref:t,title:n,"data-testid":i,className:ze(r,{standalone:o,active:s}),onClick:l,children:a},n)}),Uc=e=>m.jsx("div",{className:"buttonList",children:e.options.map(t=>e.type==="button"?m.jsx(Vte,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):m.jsxs("label",{className:ze({active:e.value===t.value}),title:t.text,children:[m.jsx("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))}),kOe=({onChange:e,type:t,activeColor:n,topPicks:r})=>{let i;return t==="elementStroke"&&(i=EZ),t==="elementBackground"&&(i=SZ),t==="canvasBackground"&&(i=kZ),r&&(i=r),i?m.jsx("div",{className:"color-picker__top-picks",children:i.map(s=>m.jsx("button",{className:ze("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:m.jsx("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},Wte=()=>m.jsx("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),dx=({palette:e,color:t})=>{for(let[n,r]of Object.entries(e))if(Array.isArray(r)){let i=r.indexOf(t);if(i>-1)return{colorName:n,shade:i}}else if(r===t)return{colorName:n,shade:null};return null},xA=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),Gte=({color:e,palette:t})=>!Object.values(t).flat().includes(e),COe=(e,t,n)=>{let r={elementBackground:"backgroundColor",elementStroke:"strokeColor"},i=e.filter(o=>{if(o.isDeleted)return!1;let a=o[r[t]];return Gte({color:a,palette:n})}),s=new Map;return i.forEach(o=>{let a=o[r[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,dxe)},L6=di(null),V$=(e,t,n)=>(e*299+t*587+n*114)/1e3>=160?"black":"white",AOe=(e,t)=>{if(t){let s=new Option().style;if(s.color=e,s.color){let o=s.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),a=parseInt(o[0]),l=parseInt(o[1]),f=parseInt(o[2]);return V$(a,l,f)}}if(e==="transparent")return"black";let n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return V$(n,r,i)},MOe=({color:e,keyLabel:t,isCustomColor:n=!1,isShade:r=!1})=>m.jsxs("div",{className:"color-picker__button__hotkey-label",style:{color:AOe(e,n)},children:[r&&"",t]}),KI=MOe,TOe=({hex:e,onChange:t,palette:n})=>{let r=dx({color:e||"transparent",palette:n}),[i,s]=ir(L6),o=I.useRef(null);if(I.useEffect(()=>{o.current&&i==="shades"&&o.current.focus()},[r,i]),r){let{colorName:a,shade:l}=r,f=n[a];if(Array.isArray(f))return m.jsx("div",{className:"color-picker-content--default shades",children:f.map((c,d)=>m.jsxs("button",{ref:d===l&&i==="shades"?o:void 0,tabIndex:-1,type:"button",className:ze("color-picker__button color-picker__button--large",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:c?{"--swatch-color":c}:void 0,onClick:()=>{t(c),s("shades")},children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(KI,{color:c,keyLabel:d+1,isShade:!0})]},d))})}return m.jsxs("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[m.jsx("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),m.jsx("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:j("colorPicker.noShades")})]})},IOe=({palette:e,color:t,onChange:n,label:r,activeShade:i})=>{let s=dx({color:t||"transparent",palette:e}),[o,a]=ir(L6),l=I.useRef(null);return I.useEffect(()=>{l.current&&o==="baseColors"&&l.current.focus()},[s==null?void 0:s.colorName,o]),m.jsx("div",{className:"color-picker-content--default",children:Object.entries(e).map(([f,c],d)=>{let u=(Array.isArray(c)?c[i]:c)||"transparent",h=xA[d],g=j(`colors.${f.replace(/\d+/,"")}`,null,"");return m.jsxs("button",{ref:(s==null?void 0:s.colorName)===f?l:void 0,tabIndex:-1,type:"button",className:ze("color-picker__button color-picker__button--large",{active:(s==null?void 0:s.colorName)===f,"is-transparent":u==="transparent"||!u}),onClick:()=>{n(u),a("baseColors")},title:`${g}${u.startsWith("#")?` ${u}`:""}  ${h}`,"aria-label":`${g}  ${h}`,style:{"--swatch-color":u},"data-testid":`color-${f}`,children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(KI,{color:u,keyLabel:h})]},f)})})},NOe=IOe,ROe=({colors:e,color:t,onChange:n,label:r})=>{let[i,s]=ir(L6),o=I.useRef(null);return I.useEffect(()=>{o.current&&o.current.focus()},[t,i]),m.jsx("div",{className:"color-picker-content--default",children:e.map((a,l)=>m.jsxs("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:ze("color-picker__button color-picker__button--large",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":r,style:{"--swatch-color":a},children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(KI,{color:a,keyLabel:l+1,isCustomColor:!0})]},l))})},wS=(e,t,n)=>{let r=Math.ceil(n/up);switch(t=t??-1,e){case"ArrowLeft":{let i=t-1;return i<0?n-1:i}case"ArrowRight":return(t+1)%n;case"ArrowDown":{let i=t+up;return i>=n?t%up:i}case"ArrowUp":{let i=t-up,s=i<0?up*r+i:i;return s>=n?void 0:s}}},_Oe=({e,colorObj:t,onChange:n,palette:r,customColors:i,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){let a=Number(e.code.slice(-1))-1;return n(r[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&i[Number(e.key)-1])return n(i[Number(e.key)-1]),s("custom"),!0;if(xA.includes(e.key)){let a=xA.indexOf(e.key),l=Object.keys(r)[a],f=r[l],c=Array.isArray(f)?f[o]:f;return n(c),s("baseColors"),!0}return!1},POe=({event:e,activeColorPickerSection:t,palette:n,color:r,onChange:i,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:f,onEscape:c})=>{if(e[Q.CTRL_OR_CMD])return!1;if(e.key===Q.ESCAPE)return c(e),!0;if(e.key===Q.ALT)return f(!0),!0;if(e.key===Q.I)return f(),!0;let d=dx({color:r,palette:n});if(e.key===Q.TAB){let u={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(u).reduce((w,[E,S])=>(S&&w.push(E),w),[]),g=h.indexOf(t),U=e.shiftKey?-1:1,y=g+U>h.length-1?0:g+U<0?h.length-1:g+U,x=h[y];return x&&o(x),x==="custom"?i(s[0]):x==="baseColors"&&(Object.entries(n).find(([w,E])=>Array.isArray(E)?E.includes(r):E===r?w:null)||i(At.black)),e.preventDefault(),e.stopPropagation(),!0}if(_Oe({e,colorObj:d,onChange:i,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){let{shade:u}=d,h=wS(e.key,u,up);if(h!==void 0)return i(n[d.colorName][h]),!0}if(t==="baseColors"&&d){let{colorName:u}=d,h=Object.keys(n),g=h.indexOf(u),U=wS(e.key,g,h.length);if(U!==void 0){let y=h[U],x=n[y];return i(Array.isArray(x)?x[l]:x),!0}}if(t==="custom"){let u=s.indexOf(r),h=wS(e.key,u,s.length);if(h!==void 0){let g=s[h];return i(g),!0}}return!1},DOe=({children:e})=>m.jsx("div",{className:"color-picker__heading",children:e}),p3=DOe,LOe=({color:e,onChange:t,label:n,type:r,elements:i,palette:s,updateData:o,children:a,onEyeDropperToggle:l,onEscape:f})=>{let[c]=Te.useState(()=>r==="canvasBackground"?[]:COe(i,r,s)),[d,u]=ir(L6),h=dx({color:e,palette:s});I.useEffect(()=>{if(!d){let x=Gte({color:e,palette:s}),w=x&&!c.includes(e);u(w?"hex":x?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,s,u,h,c]);let[g,U]=I.useState((h==null?void 0:h.shade)??(r==="elementBackground"?d5:f5));I.useEffect(()=>{(h==null?void 0:h.shade)!=null&&U(h.shade);let x=w=>{w.key===Q.ALT&&l(!1)};return document.addEventListener("keyup",x,{capture:!0}),()=>{document.removeEventListener("keyup",x,{capture:!0})}},[h,l]);let y=Te.useRef(null);return m.jsx("div",{role:"dialog","aria-modal":"true","aria-label":j("labels.colorPicker"),children:m.jsxs("div",{ref:y,onKeyDown:x=>{POe({event:x,activeColorPickerSection:d,palette:s,color:e,onChange:t,onEyeDropperToggle:l,customColors:c,setActiveColorPickerSection:u,updateData:o,activeShade:g,onEscape:f})&&(x.preventDefault(),x.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!c.length&&m.jsxs("div",{children:[m.jsx(p3,{children:j("colorPicker.mostUsedCustomColors")}),m.jsx(ROe,{colors:c,color:e,label:j("colorPicker.mostUsedCustomColors"),onChange:t})]}),m.jsxs("div",{children:[m.jsx(p3,{children:j("colorPicker.colors")}),m.jsx(NOe,{color:e,label:n,palette:s,onChange:t,activeShade:g})]}),m.jsxs("div",{children:[m.jsx(p3,{children:j("colorPicker.shades")}),m.jsx(TOe,{hex:e,onChange:t,palette:s})]}),a]})})},Xte=Te.createContext(null),bs=()=>Te.useContext(Xte),Kte=e=>{let[t,n]=I.useState(null),r=Gr(),{theme:i}=bs(),{container:s}=xc();return I.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",r.editor.isMobile),t.classList.toggle("theme--dark",i===Nt.DARK))},[t,i,r.editor.isMobile,e==null?void 0:e.className]),I.useLayoutEffect(()=>{let o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;let a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function YI(e,t,n){I.useEffect(()=>{function r(i){let s=i;if(!e.current)return;let o=n==null?void 0:n(s,e.current);if(o!==!0){if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}}return document.addEventListener("pointerdown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("pointerdown",r),document.removeEventListener("touchstart",r)}},[e,t,n])}var ux=e=>{let t=I.useRef(e);return Object.assign(t.current,e),t.current},hx=di(null),OOe=({onCancel:e,onChange:t,onSelect:n,colorPickerType:r})=>{let i=Kte({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=bs(),o=xx(),a=yc(),l=wt(o,s),f=ux({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:c}=xc();I.useEffect(()=>{let u=d.current;if(!u||!a.canvas||!i)return;let h=!1,g=a.canvas.getContext("2d"),U=({clientX:M,clientY:C})=>{let T=g.getImageData((M-s.offsetLeft)*window.devicePixelRatio,(C-s.offsetTop)*window.devicePixelRatio,1,1).data;return gxe(T[0],T[1],T[2])},y=({clientX:M,clientY:C,altKey:T})=>{u.style.top=`${C+20}px`,u.style.left=`${M+20}px`;let R=U({clientX:M,clientY:C});h&&f.onChange(r,R,f.selectedElements,{altKey:T}),u.style.background=R},x=()=>{f.onCancel()},w=(M,C)=>{f.onSelect(M,C)},E=M=>{h=!0,M.stopImmediatePropagation()},S=M=>{h=!1,c==null||c.focus(),M.stopImmediatePropagation(),M.preventDefault(),w(U(M),M)},A=M=>{M.key===Q.ESCAPE&&(M.preventDefault(),M.stopImmediatePropagation(),x())};return i.tabIndex=-1,i.focus(),y({clientX:f.app.lastViewportPosition.x,clientY:f.app.lastViewportPosition.y,altKey:!1}),i.addEventListener("keydown",A),i.addEventListener("pointerdown",E),i.addEventListener("pointerup",S),window.addEventListener("pointermove",y,{passive:!0}),window.addEventListener("blur",x),()=>{h=!1,i.removeEventListener("keydown",A),i.removeEventListener("pointerdown",E),i.removeEventListener("pointerup",S),window.removeEventListener("pointermove",y),window.removeEventListener("blur",x)}},[f,a.canvas,i,r,c,s.offsetLeft,s.offsetTop]);let d=I.useRef(null);return YI(d,()=>{e()},u=>!!u.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),i?ri.createPortal(m.jsx("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),i):null},jOe=({color:e,onChange:t,label:n,colorPickerType:r})=>{let i=Gr(),[s,o]=I.useState(e),[a,l]=ir(L6);I.useEffect(()=>{o(e)},[e]);let f=I.useCallback(g=>{let U=g.toLowerCase(),y=BOe(U);y&&t(y),o(U)},[t]),c=I.useRef(null),d=I.useRef(null);I.useEffect(()=>{c.current&&c.current.focus()},[a]);let[u,h]=ir(hx);return I.useEffect(()=>()=>{h(null)},[h]),m.jsxs("div",{className:"color-picker__input-label",children:[m.jsx("div",{className:"color-picker__input-hash",children:"#"}),m.jsx("input",{ref:a==="hex"?c:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:g=>{f(g.target.value)},value:(s||"").replace(/^#/,""),onBlur:()=>{o(e)},tabIndex:-1,onFocus:()=>l("hex"),onKeyDown:g=>{var U;g.key!==Q.TAB&&(g.key===Q.ESCAPE&&((U=d.current)==null||U.focus()),g.stopPropagation())}}),!i.editor.isMobile&&m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),m.jsx("div",{ref:d,className:ze("excalidraw-eye-dropper-trigger",{selected:u}),onClick:()=>h(g=>g?null:{keepOpenOnAlt:!1,onSelect:U=>t(U),colorPickerType:r}),title:`${j("labels.eyeDropper")}  ${Q.I.toLocaleUpperCase()} or ${Ue("Alt")} `,children:lEe})]})]})},el=Te.forwardRef(({children:e,padding:t,className:n,style:r},i)=>m.jsx("div",{className:ze("Island",n),style:{"--padding":t,...r},ref:i,children:e})),Yte=Te.forwardRef(({className:e,container:t,children:n,style:r,onClose:i,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},f)=>{let c=Gr();return m.jsx(TDe,{container:t,children:m.jsxs(HI,{ref:f,className:ze("focus-visible-none",e),"data-prevent-outside-click":!0,side:c.editor.isMobile&&!c.viewport.isLandscape?"bottom":"right",align:c.editor.isMobile&&!c.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!cve(document.activeElement)&&t.focus(),i()},children:[m.jsx(el,{padding:3,style:r,children:n}),m.jsx(ute,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),W$=e=>{let t=new Option().style;return t.color=e,!!t.color},BOe=e=>Xa(e)?e:W$(`#${e}`)?`#${e}`:W$(e)?e:null,FOe=({type:e,color:t,onChange:n,label:r,elements:i,palette:s=At,updateData:o})=>{let{container:a}=xc(),[,l]=ir(L6),[f,c]=ir(hx),d=m.jsxs("div",{children:[m.jsx(p3,{children:j("colorPicker.hexCode")}),m.jsx(jOe,{color:t,label:r,onChange:g=>{n(g)},colorPickerType:e})]}),u=I.useRef(null),h=()=>{var g,U;(U=(g=u.current)==null?void 0:g.querySelector(".color-picker-content"))==null||U.focus()};return m.jsx(Yte,{container:a,style:{maxWidth:"13rem"},onFocusOutside:g=>{h(),g.preventDefault()},onPointerDownOutside:g=>{f&&g.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?m.jsx(LOe,{palette:s,color:t,onChange:g=>{n(g)},onEyeDropperToggle:g=>{c(U=>g?(U=U||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},U.keepOpenOnAlt=!0,U):g===!1||U?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:g=>{f?c(null):o({openPopup:null})},label:r,type:e,elements:i,updateData:o,children:d}):d})},$Oe=({label:e,color:t,type:n})=>m.jsx(lx,{type:"button",className:ze("color-picker__button active-color properties-trigger",{"is-transparent":t==="transparent"||!t}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:j(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:m.jsx("div",{className:"color-picker__button-outline"})}),ZI=({type:e,color:t,onChange:n,label:r,elements:i,palette:s=At,topPicks:o,updateData:a,appState:l})=>m.jsx("div",{children:m.jsxs("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[m.jsx(kOe,{activeColor:t,onChange:n,type:e,topPicks:o}),m.jsx(Wte,{}),m.jsxs(ax,{open:l.openPopup===e,onOpenChange:f=>{a({openPopup:f?e:null})},children:[m.jsx($Oe,{color:t,label:r,type:e}),l.openPopup===e&&m.jsx(FOe,{type:e,color:t,onChange:n,label:r,elements:i,palette:s,updateData:a})]})]})}),px=({icon:e})=>m.jsx("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),zOe=({label:e,open:t,openTrigger:n,children:r,className:i})=>m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:i,onClick:n,children:[e,m.jsx(px,{icon:t?NEe:gq})]}),t&&m.jsx("div",{style:{display:"flex",flexDirection:"column"},children:r})]}),vA=zOe,HOe=di(!1);function VOe({options:e,value:t,label:n,onChange:r,onClose:i,numberOfOptionsToAlwaysShow:s=e.length}){let o=Gr(),a=h=>{let g=e.find(U=>U.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&g)r(g.value),h.preventDefault();else if(h.key===Q.TAB){let U=e.findIndex(x=>x.value===t),y=h.shiftKey?(e.length+U-1)%e.length:(U+1)%e.length;r(e[y].value)}else if(u5(h.key)){let U=tb().rtl,y=e.findIndex(x=>x.value===t);if(y!==-1){let x=e.length,w=y;switch(h.key){case(U?Q.ARROW_LEFT:Q.ARROW_RIGHT):w=(y+1)%x;break;case(U?Q.ARROW_RIGHT:Q.ARROW_LEFT):w=(x+y-1)%x;break;case Q.ARROW_DOWN:{w=(y+(s??1))%x;break}case Q.ARROW_UP:{w=(x+y-(s??1))%x;break}}r(e[w].value)}h.preventDefault()}else(h.key===Q.ESCAPE||h.key===Q.ENTER)&&(h.preventDefault(),i());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,f]=ir(HOe),c=Te.useMemo(()=>e.slice(0,s),[e,s]),d=Te.useMemo(()=>e.slice(s),[e,s]);I.useEffect(()=>{c.some(h=>h.value===t)||f(!0)},[t,c,f]);let u=h=>m.jsx("div",{className:"picker-content",children:h.map((g,U)=>m.jsxs("button",{type:"button",className:ze("picker-option",{active:t===g.value}),onClick:y=>{r(g.value)},title:`${g.text} ${g.keyBinding&&` ${g.keyBinding.toUpperCase()}`}`,"aria-label":g.text||"none","aria-keyshortcuts":g.keyBinding||void 0,ref:y=>{t===g.value&&setTimeout(()=>{y==null||y.focus()},0)},children:[g.icon,g.keyBinding&&m.jsx("span",{className:"picker-keybinding",children:g.keyBinding})]},g.text))});return m.jsx(HI,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:m.jsxs("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[u(c),d.length>0&&m.jsx(vA,{label:j("labels.more_options"),open:l,openTrigger:()=>{f(h=>!h)},className:"picker-collapsible",children:u(d)})]})})}function G$({value:e,label:t,options:n,onChange:r,group:i="",numberOfOptionsToAlwaysShow:s}){var f;let[o,a]=Te.useState(!1),l=Te.useRef(null);return m.jsx("div",{children:m.jsxs(ax,{open:o,onOpenChange:c=>a(c),children:[m.jsx(lx,{name:i,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(f=n.find(c=>c.value===e))==null?void 0:f.icon}),o&&m.jsx(VOe,{options:n,value:e,label:t,onChange:r,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}var Zte=Te.forwardRef(({className:e,placeholder:t,onChange:n},r)=>m.jsxs("div",{className:ze("QuickSearch__wrapper",e),children:[Zh,m.jsx("input",{ref:r,className:"QuickSearch__input",type:"text",placeholder:t,onChange:i=>n(i.target.value.trim().toLowerCase())})]})),qte=({className:e,placeholder:t,children:n})=>{let r=!I.Children.count(n);return m.jsx("div",{className:ze("ScrollableList__wrapper",e),role:"menu",children:r?m.jsx("div",{className:"empty",children:t}):n})},Qte=({children:e,className:t="",style:n,title:r})=>m.jsxs("div",{className:`dropdown-menu-group ${t}`,style:n,children:[r&&m.jsx("p",{className:"dropdown-menu-group-title",children:r}),e]}),wA=Qte;Qte.displayName="DropdownMenuGroup";var Jte=Te.createContext({}),ene=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),tne=(e,t)=>{let n=I.useContext(Jte);return _7(e,r=>{var s;let i=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||((s=n.onSelect)==null||s.call(n,i))})},WOe=({textStyle:e,icon:t,shortcut:n,children:r})=>{let i=Gr();return m.jsxs(m.Fragment,{children:[t&&m.jsx("div",{className:"dropdown-menu-item__icon",children:t}),m.jsx("div",{style:e,className:"dropdown-menu-item__text",children:r}),n&&!i.editor.isMobile&&m.jsx("div",{className:"dropdown-menu-item__shortcut",children:n})]})},nne=WOe,qI=({icon:e,value:t,order:n,children:r,shortcut:i,className:s,hovered:o,selected:a,textStyle:l,onSelect:f,onClick:c,...d})=>{let u=tne(c,f),h=I.useRef(null);return I.useEffect(()=>{var g,U;o&&(n===0?(g=h.current)==null||g.scrollIntoView({block:"end"}):(U=h.current)==null||U.scrollIntoView({block:"nearest"}))},[o,n]),m.jsx("button",{...d,ref:h,value:t,onClick:u,className:ene(s,a,o),title:d.title??d["aria-label"],children:m.jsx(nne,{textStyle:l,icon:e,shortcut:i,children:r})})};qI.displayName="DropdownMenuItem";var U5={GREEN:"green",RED:"red",BLUE:"blue"},QI=({type:e=U5.BLUE,children:t})=>{let{theme:n}=t8(),r={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===Nt.LIGHT?"1.5px solid white":"none"};switch(e){case U5.GREEN:Object.assign(r,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case U5.RED:Object.assign(r,{backgroundColor:"pink",color:"darkred"});break;case U5.BLUE:default:Object.assign(r,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return m.jsx("div",{className:"DropDownMenuItemBadge",style:r,children:t})};QI.displayName="DropdownMenuItemBadge";qI.Badge=QI;var aa=qI,GOe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:r,onClose:i,onSelect:s,onHover:o})=>{var a,l,f;if(!e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===Q.F)return(a=t.current)==null||a.focus(),!0;if(e.key===Q.ESCAPE)return i(),!0;if(e.key===Q.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===Q.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=r[0])!=null&&l.value&&o(r[0].value),!0;if(e.key===Q.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(f=r[r.length-1])!=null&&f.value&&o(r[r.length-1].value),!0},XOe=Te.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:r,onLeave:i,onOpen:s,onClose:o})=>{let{container:a}=xc(),{fonts:l}=yc(),{showDeprecatedFonts:f}=e8(),[c,d]=I.useState(""),u=I.useRef(null),h=I.useMemo(()=>Array.from(wf.registered.entries()).filter(([T,{metadata:R}])=>!R.serverSide&&!R.fallback).map(([T,{metadata:R,fontFaces:P}])=>{var O,F;let _={value:T,icon:R.icon??q4,text:((F=(O=P[0])==null?void 0:O.fontFace)==null?void 0:F.family)??"Unknown"};return R.deprecated&&Object.assign(_,{deprecated:R.deprecated,badge:{type:U5.RED,placeholder:j("fontList.badge.old")}}),_}).sort((T,R)=>T.text.toLowerCase()>R.text.toLowerCase()?1:-1),[]),g=I.useMemo(()=>new Set(l.getSceneFamilies()),[e]),U=I.useMemo(()=>h.filter(T=>g.has(T.value)),[h,g]),y=I.useMemo(()=>h.filter(T=>!g.has(T.value)&&(f||!T.deprecated)),[h,g,f]),x=I.useMemo(()=>xve([...U,...y].filter(T=>{var R;return(R=T.text)==null?void 0:R.toLowerCase().includes(c)})),[U,y,c]),w=I.useMemo(()=>{var R;let T;return t?T=x.find(P=>P.value===t):e&&(T=x.find(P=>P.value===e)),!T&&c&&((R=x[0])!=null&&R.value?r(x[0].value):i()),T},[t,e,c,x,r,i]),E=I.useCallback(T=>{GOe({event:T,inputRef:u,hoveredFont:w,filteredFonts:x,onSelect:n,onHover:r,onClose:o})&&(T.preventDefault(),T.stopPropagation())},[w,x,n,r,o]);I.useEffect(()=>(s(),()=>{o()}),[]);let S=I.useMemo(()=>x.filter(T=>g.has(T.value)),[x,g]),A=I.useMemo(()=>x.filter(T=>!g.has(T.value)),[x,g]),M=(T,R)=>m.jsxs(aa,{icon:T.icon,value:T.value,order:R,textStyle:{fontFamily:a6({fontFamily:T.value})},hovered:T.value===(w==null?void 0:w.value),selected:T.value===e,tabIndex:T.value===e?0:-1,onClick:P=>{n(Number(P.currentTarget.value))},onMouseMove:()=>{(w==null?void 0:w.value)!==T.value&&r(T.value)},children:[T.text,T.badge&&m.jsx(QI,{type:T.badge.type,children:T.badge.placeholder})]},T.value),C=[];return S.length&&C.push(m.jsx(wA,{title:j("fontList.sceneFonts"),children:S.map(M)},"group_1")),A.length&&C.push(m.jsx(wA,{title:j("fontList.availableFonts"),children:A.map((T,R)=>M(T,R+S.length))},"group_2")),m.jsxs(Yte,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:i,onKeyDown:E,children:[m.jsx(Zte,{ref:u,placeholder:j("quickSearch.placeholder"),onChange:l6(d,20)}),m.jsx(qte,{className:"dropdown-menu fonts manual-hover",placeholder:j("fontList.empty"),children:C.length?C:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),KOe=({selectedFontFamily:e})=>{let t=I.useMemo(()=>!!(e&&!ZOe(e)),[e]);return m.jsx(lx,{asChild:!0,children:m.jsx("div",{children:m.jsx(Vte,{standalone:!0,icon:eq,title:j("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},rne=[{value:$n.Excalifont,icon:H2,text:j("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:$n.Nunito,icon:q4,text:j("labels.normal"),testId:"font-family-normal"},{value:$n["Comic Shanns"],icon:OC,text:j("labels.code"),testId:"font-family-code"}],YOe=new Set(rne.map(e=>e.value)),ZOe=e=>e?YOe.has(e):!1,qOe=Te.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:r,onHover:i,onLeave:s,onPopupChange:o})=>{let a=I.useMemo(()=>rne,[]),l=I.useCallback(f=>{f&&r(f)},[r]);return m.jsxs("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[m.jsx(Uc,{type:"button",options:a,value:t,onClick:l}),m.jsx(Wte,{}),m.jsxs(ax,{open:e,onOpenChange:o,children:[m.jsx(KOe,{selectedFontFamily:t}),e&&m.jsx(XOe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:i,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),QOe=({updateData:e,appState:t,elements:n,testId:r})=>{let i=Te.useRef(null),s=Te.useRef(null),o=gs(n,t,a=>a.opacity,!0,t.currentItemOpacity);return I.useEffect(()=>{if(i.current&&s.current){let a=i.current,l=s.current,f=a.offsetWidth,c=15,d=o/100*(f-c)+c/2;l.style.left=`${d}px`,a.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${o}%, var(--button-bg) ${o}%, var(--button-bg) 100%)`}},[o]),m.jsxs("label",{className:"control-label",children:[j("labels.opacity"),m.jsxs("div",{className:"range-wrapper",children:[m.jsx("input",{ref:i,type:"range",min:"0",max:"100",step:"10",onChange:a=>{e(+a.target.value)},value:o,className:"range-input","data-testid":r}),m.jsx("div",{className:"value-bubble",ref:s,children:o!==0?o:null}),m.jsx("div",{className:"zero-label",children:"0"})]})]})},ine=.1,ms=(e,t,n,r=!1)=>{let i=ct(wt(e,t,{includeBoundTextElement:r}));return e.map(s=>{var o;return i.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},gs=function(e,t,n,r,i){let s=t.editingTextElement,o=Un(e),a=null;return s&&(a=n(s)),a||(Dr(o,t)?a=$Ne(r===!0?o:o.filter(l=>r(l)),t,n)??(typeof i=="function"?i(!0):i):a=typeof i=="function"?i(!1):i),a},JOe=(e,t)=>Mn(t)||!t.autoResize?t:ye(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2},!1),JI=(e,t,n,r,i)=>{let s=new Set,o=ms(e,t,l=>{if(je(l)){let f=r(l);s.add(f);let c=yt(l,{fontSize:f});return ps(c,n.scene.getContainerElement(l),n.scene.getNonDeletedElementsMap()),c=JOe(l,c),c}return l},!0),a=ct(o);return wt(e,t,{includeBoundTextElement:!0}).forEach(l=>{je(l)&&zs(l,a)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:i??t.currentItemFontSize},captureUpdate:me.IMMEDIATELY}};_e({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:ms(e,t,r=>zC(r.type)?yt(r,{strokeColor:n.currentItemStrokeColor}):r,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?me.IMMEDIATELY:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{"aria-hidden":"true",children:j("labels.stroke")}),m.jsx(ZI,{topPicks:EZ,palette:hxe,type:"elementStroke",label:j("labels.stroke"),color:gs(e,t,i=>i.strokeColor,!0,t.currentItemStrokeColor),onChange:i=>n({currentItemStrokeColor:i}),elements:e,appState:t,updateData:n})]})});_e({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:ms(e,t,r=>yt(r,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?me.IMMEDIATELY:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{"aria-hidden":"true",children:j("labels.background")}),m.jsx(ZI,{topPicks:SZ,palette:pxe,type:"elementBackground",label:j("labels.background"),color:gs(e,t,i=>i.backgroundColor,!0,t.currentItemBackgroundColor),onChange:i=>n({currentItemBackgroundColor:i}),elements:e,appState:t,updateData:n})]})});_e({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,r)=>(xn("element","changeFillStyle",`${n} (${r.device.editor.isMobile?"mobile":"desktop"})`),{elements:ms(e,t,i=>yt(i,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=wt(e,t),i=r.length>0&&r.every(s=>s.fillStyle==="zigzag");return m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.fill")}),m.jsx(Uc,{type:"button",options:[{value:"hachure",text:`${j(i?"labels.zigzag":"labels.hachure")} (${Ue("Alt-Click")})`,icon:i?vwe:wwe,active:i?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:j("labels.crossHatch"),icon:Ewe,testId:"fill-cross-hatch"},{value:"solid",text:j("labels.solid"),icon:Swe,testId:"fill-solid"}],value:gs(e,t,s=>s.fillStyle,s=>s.hasOwnProperty("fillStyle"),s=>s?null:t.currentItemFillStyle),onClick:(s,o)=>{let a=o.altKey&&s==="hachure"&&r.every(l=>l.fillStyle==="hachure")?"zigzag":s;n(a)}})]})}});_e({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:ms(e,t,r=>yt(r,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.strokeWidth")}),m.jsx(Uc,{group:"stroke-width",options:[{value:zE.thin,text:j("labels.thin"),icon:aq,testId:"strokeWidth-thin"},{value:zE.bold,text:j("labels.bold"),icon:kwe,testId:"strokeWidth-bold"},{value:zE.extraBold,text:j("labels.extraBold"),icon:Cwe,testId:"strokeWidth-extraBold"}],value:gs(e,t,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:t.currentItemStrokeWidth),onChange:r=>n(r)})]})});_e({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:ms(e,t,r=>yt(r,{seed:fc(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.sloppiness")}),m.jsx(Uc,{group:"sloppiness",options:[{value:0,text:j("labels.architect"),icon:Twe},{value:1,text:j("labels.artist"),icon:Iwe},{value:2,text:j("labels.cartoonist"),icon:Nwe}],value:gs(e,t,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:t.currentItemRoughness),onChange:r=>n(r)})]})});_e({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:ms(e,t,r=>yt(r,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.strokeStyle")}),m.jsx(Uc,{group:"strokeStyle",options:[{value:"solid",text:j("labels.strokeStyle_solid"),icon:aq},{value:"dashed",text:j("labels.strokeStyle_dashed"),icon:Awe},{value:"dotted",text:j("labels.strokeStyle_dotted"),icon:Mwe}],value:gs(e,t,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:t.currentItemStrokeStyle),onChange:r=>n(r)})]})});_e({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:ms(e,t,r=>yt(r,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(QOe,{updateData:n,elements:e,appState:t,testId:"opacity"})});_e({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,r)=>JI(e,t,r,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.fontSize")}),m.jsx(Uc,{group:"font-size",options:[{value:16,text:j("labels.small"),icon:Gwe,testId:"fontSize-small"},{value:20,text:j("labels.medium"),icon:Xwe,testId:"fontSize-medium"},{value:28,text:j("labels.large"),icon:Kwe,testId:"fontSize-large"},{value:36,text:j("labels.veryLarge"),icon:Ywe,testId:"fontSize-veryLarge"}],value:gs(e,t,i=>{if(je(i))return i.fontSize;let s=xt(i,r.scene.getNonDeletedElementsMap());return s?s.fontSize:null},i=>je(i)||xt(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:t.currentItemFontSize||$f),onChange:i=>n(i)})]})});var X$=_e({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:O7,trackEvent:!1,perform:(e,t,n,r)=>JI(e,t,r,i=>Math.round(1/(1+ine)*i.fontSize)),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&(e.key===Q.CHEVRON_LEFT||e.key===Q.COMMA)}),K$=_e({name:"increaseFontSize",label:"labels.increaseFontSize",icon:O7,trackEvent:!1,perform:(e,t,n,r)=>JI(e,t,r,i=>Math.round(i.fontSize*(1+ine))),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&(e.key===Q.CHEVRON_RIGHT||e.key===Q.PERIOD)});_e({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,r)=>{var g;let{cachedElements:i,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:ms(e,t,U=>{let y=i==null?void 0:i.get(U.id);return y?yt(U,{...y}):U},!0),appState:{...t,...a},captureUpdate:me.NEVER};let{currentItemFontFamily:l,currentHoveredFontFamily:f}=n,c=me.EVENTUALLY,d,u=!1;if(l)d=l,c=me.IMMEDIATELY;else if(f){d=f,c=me.EVENTUALLY;let U=wt(e,t,{includeBoundTextElement:!0}).filter(y=>je(y));if(U.length>200)u=!0;else{let y=0,x=0;for(;y<U.length&&x<5e3;){let w=U[y];x+=(w==null?void 0:w.originalText.length)||0,y++}x>5e3&&(u=!0)}}let h={appState:{...t,...a},captureUpdate:c};if(d&&!u){let U=new Map,y=new Set,x=!1,w=Array.from(wf.loadedFontsCache.values()),E=(g=Object.entries($n).find(([M,C])=>C===d))==null?void 0:g[0];f&&E&&w.some(M=>M.startsWith(E))&&(x=!0),Object.assign(h,{elements:ms(e,t,M=>{if(je(M)&&(M.fontFamily!==d||l)){let C=yt(M,{fontFamily:d,lineHeight:qh(d)}),T=(i==null?void 0:i.get(M.containerId||""))||{},R=r.scene.getContainerElement(M);return o&&R&&T&&ye(R,{...T},!1),x||(y=new Set([...y,...Array.from(C.originalText)])),U.set(C,R),C}return M},!0)});let S=`10px ${a6({fontFamily:d})}`,A=Array.from(y.values()).join();if(x||window.document.fonts.check(S,A))for(let[M,C]of U)ps(M,C,r.scene.getNonDeletedElementsMap(),!1);else window.document.fonts.load(S,A).then(M=>{for(let[C,T]of U){let R=r.scene.getElement(C.id),P=T?r.scene.getElement(T.id):null;R&&ps(R,P,r.scene.getNonDeletedElementsMap(),!1)}r.fonts.onLoaded(M)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:r})=>{let i=I.useRef(new Map),s=I.useRef(null),[o,a]=I.useState({}),l=I.useRef(!0),f=I.useMemo(()=>{var d;let c=(u,h)=>gs(u,t,g=>{if(je(g))return g.fontFamily;let U=xt(g,h);return U?U.fontFamily:null},g=>je(g)||xt(g,h)!==null,g=>g?null:t.currentItemFontFamily||F0);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?c(Array.from(((d=i.current)==null?void 0:d.values())??[]),i.current):!o.openPopup&&t.openPopup!=="fontFamily"?c(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n.scene]);return I.useEffect(()=>{s.current=f},[f]),I.useEffect(()=>{Object.keys(o).length&&(r(o),a({}))},[o]),I.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.fontFamily")}),m.jsx(qOe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:f,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:c=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:c}),i.current.clear()},onHover:c=>{a({currentHoveredFontFamily:c,cachedElements:new Map(i.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0})},onPopupChange:c=>{if(c){i.current.clear();let{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){let u=n.scene.getElement(d.id);i.current.set(d.id,yt(u||d,{},!0))}else{let u=wt(e,t,{includeBoundTextElement:!0});for(let h of u)i.current.set(h.id,yt(h,{},!0))}a({openPopup:"fontFamily"})}else{let d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0};l.current?r({...o,...d}):a(d),i.current.clear()}}})]})}});_e({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,r)=>({elements:ms(e,t,i=>{if(je(i)){let s=yt(i,{textAlign:n});return ps(s,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),s}return i},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>{let i=r.scene.getNonDeletedElementsMap();return m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.textAlign")}),m.jsx(Uc,{group:"text-align",options:[{value:"left",text:j("labels.left"),icon:qwe,testId:"align-left"},{value:"center",text:j("labels.center"),icon:Qwe,testId:"align-horizontal-center"},{value:"right",text:j("labels.right"),icon:Jwe,testId:"align-right"}],value:gs(e,t,s=>{if(je(s))return s.textAlign;let o=xt(s,i);return o?o.textAlign:null},s=>je(s)||xt(s,i)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})]})}});_e({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:ms(e,t,i=>{if(je(i)){let s=yt(i,{verticalAlign:n});return ps(s,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),s}return i},!0),appState:{...t},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx("fieldset",{children:m.jsx(Uc,{group:"text-align",options:[{value:ho.TOP,text:j("labels.alignTop"),icon:m.jsx(eEe,{theme:t.theme}),testId:"align-top"},{value:ho.MIDDLE,text:j("labels.centerVertically"),icon:m.jsx(nEe,{theme:t.theme}),testId:"align-middle"},{value:ho.BOTTOM,text:j("labels.alignBottom"),icon:m.jsx(tEe,{theme:t.theme}),testId:"align-bottom"}],value:gs(e,t,i=>{if(je(i)&&i.containerId)return i.verticalAlign;let s=xt(i,r.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},i=>je(i)||xt(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:ho.MIDDLE),onChange:i=>n(i)})})});_e({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:ms(e,t,r=>Fe(r)?r:yt(r,{roundness:n==="round"?{type:N6(r.type)?Pr.ADAPTIVE_RADIUS:Pr.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=iJ(Un(e),t).some(i=>{var s;return((s=i.roundness)==null?void 0:s.type)===Pr.LEGACY});return m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.edges")}),m.jsx(Uc,{group:"edges",options:[{value:"sharp",text:j("labels.sharp"),icon:Rwe},{value:"round",text:j("labels.round"),icon:_we}],value:gs(e,t,i=>r?null:i.roundness?"round":"sharp",i=>!Et(i)&&i.hasOwnProperty("roundness"),i=>i?null:t.currentItemRoundness),onChange:i=>n(i)})]})}});var Y$=e=>[{value:null,text:j("labels.arrowhead_none"),keyBinding:"q",icon:Pwe},{value:"arrow",text:j("labels.arrowhead_arrow"),keyBinding:"w",icon:m.jsx(Dwe,{flip:e})},{value:"triangle",text:j("labels.arrowhead_triangle"),icon:m.jsx(Bwe,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:j("labels.arrowhead_triangle_outline"),icon:m.jsx(Fwe,{flip:e}),keyBinding:"r"},{value:"circle",text:j("labels.arrowhead_circle"),keyBinding:"a",icon:m.jsx(Lwe,{flip:e})},{value:"circle_outline",text:j("labels.arrowhead_circle_outline"),keyBinding:"s",icon:m.jsx(Owe,{flip:e})},{value:"diamond",text:j("labels.arrowhead_diamond"),icon:m.jsx($we,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:j("labels.arrowhead_diamond_outline"),icon:m.jsx(zwe,{flip:e}),keyBinding:"f"},{value:"bar",text:j("labels.arrowhead_bar"),keyBinding:"z",icon:m.jsx(jwe,{flip:e})},{value:"crowfoot_one",text:j("labels.arrowhead_crowfoot_one"),icon:m.jsx(Vwe,{flip:e}),keyBinding:"c"},{value:"crowfoot_many",text:j("labels.arrowhead_crowfoot_many"),icon:m.jsx(Hwe,{flip:e}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:j("labels.arrowhead_crowfoot_one_or_many"),icon:m.jsx(Wwe,{flip:e}),keyBinding:"v"}];_e({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:ms(e,t,r=>{if(mt(r)){let{position:i,type:s}=n;if(i==="start")return yt(r,{startArrowhead:s});if(i==="end")return yt(r,{endArrowhead:s})}return r}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=tb().rtl;return m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.arrowheads")}),m.jsxs("div",{className:"iconSelectList buttonList",children:[m.jsx(G$,{label:"arrowhead_start",options:Y$(!r),value:gs(e,t,i=>mt(i)&&e9(i.type)?i.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:i=>n({position:"start",type:i}),numberOfOptionsToAlwaysShow:4}),m.jsx(G$,{label:"arrowhead_end",group:"arrowheads",options:Y$(!!r),value:gs(e,t,i=>mt(i)&&e9(i.type)?i.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:i=>n({position:"end",type:i}),numberOfOptionsToAlwaysShow:4})]})]})}});_e({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,r)=>{var a;let i=ms(e,t,l=>{if(!Et(l))return l;let f=yt(l,{roundness:n===ei.round?{type:Pr.PROPORTIONAL_RADIUS}:null,elbowed:n===ei.elbow,points:n===ei.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(Fe(f)){let c=r.scene.getNonDeletedElementsMap();r.dismissLinearEditor();let d=Be.getPointAtIndexGlobalCoordinates(f,0,c),u=Be.getPointAtIndexGlobalCoordinates(f,-1,c),h=!f.startBinding&&Ka(Ga(d),e,c,t.zoom,!1,!0),g=!f.endBinding&&Ka(Ga(u),e,c,t.zoom,!1,!0),U=h||f.startBinding&&c.get(f.startBinding.elementId),y=g||f.endBinding&&c.get(f.endBinding.elementId),x=h?W2(f,h,"start"):d,w=g?W2(f,g,"end"):u;h&&cc(f,h,"start",c),g&&cc(f,g,"end",c),ye(f,{points:[x,w].map(E=>D(E[0]-f.x,E[1]-f.y)),...U&&f.startBinding?{startBinding:{...f.startBinding,...r9(f,U,"start")}}:{},...y&&f.endBinding?{endBinding:{...f.endBinding,...r9(f,y,"end")}}:{}}),Be.updateEditorMidPointsCache(f,c,r.state)}return f}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){let l=i.find(f=>f.id===o);l&&(s.selectedLinearElement=new Be(l))}return{elements:i,appState:s,captureUpdate:me.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.arrowtypes")}),m.jsx(Uc,{group:"arrowtypes",options:[{value:ei.sharp,text:j("labels.arrowtype_sharp"),icon:MEe,testId:"sharp-arrow"},{value:ei.round,text:j("labels.arrowtype_round"),icon:IEe,testId:"round-arrow"},{value:ei.elbow,text:j("labels.arrowtype_elbowed"),icon:TEe,testId:"elbow-arrow"}],value:gs(e,t,r=>Et(r)?r.elbowed?ei.elbow:r.roundness?ei.round:ei.sharp:null,r=>Et(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})]})});var Hu=({viewportX:e,viewportY:t,nextZoom:n},r)=>{let i=e-r.offsetLeft,s=t-r.offsetTop,o=r.zoom.value,a=r.scrollX+(i-i/o),l=r.scrollY+(s-s/o),f=-(i-i/n),c=-(s-s/n);return{scrollX:a+f,scrollY:l+c,zoom:{value:n}}},K5=()=>{let e=document.querySelector(".excalidraw-tooltip");if(e)return e;let t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},sne=(e,t,n="bottom")=>{let r=e.getBoundingClientRect(),i=window.innerWidth,s=window.innerHeight,o=5,a=t.left+t.width/2-r.width/2;a<0?a=o:a+r.width>=i&&(a=i-r.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+r.height>=s&&(l=t.top-r.height-o)):(l=t.top-r.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},eje=(e,t,n,r)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=r?"50ch":"10ch",t.style.maxWidth=r?"50ch":"15ch",t.textContent=n;let i=e.getBoundingClientRect();sne(t,i)},n1=({children:e,label:t,long:n=!1,style:r,disabled:i})=>(I.useEffect(()=>()=>K5().classList.remove("excalidraw-tooltip--visible"),[]),i?null:m.jsx("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>eje(s.currentTarget,K5(),t,n),onPointerLeave:()=>K5().classList.remove("excalidraw-tooltip--visible"),style:r,children:e}));_e({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?me.IMMEDIATELY:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsx(ZI,{palette:null,topPicks:kZ,label:j("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:i=>n({viewBackgroundColor:i}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});var Y5=_e({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:Yh,trackEvent:{category:"canvas"},predicate:(e,t,n,r)=>{var i;return!!r.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((i=t.openDialog)==null?void 0:i.name)!=="elementLinkSelector"},perform:(e,t,n,r)=>(r.imageCache.clear(),{elements:e.map(i=>yt(i,{isDeleted:!0})),appState:{...lc(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:me.IMMEDIATELY})}),Z$=_e({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:SB,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Hu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:bf(t.zoom.value+I7)},t),userToFollow:null},captureUpdate:me.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(jt,{type:"button",className:"zoom-in-button zoom-button",icon:SB,title:`${j("buttons.zoomIn")}  ${Ue("CtrlOrCmd++")}`,"aria-label":j("buttons.zoomIn"),disabled:t.zoom.value>=vT,onClick:()=>{e(null)}}),keyTest:e=>(e.code===zt.EQUAL||e.code===zt.NUM_ADD)&&(e[Q.CTRL_OR_CMD]||e.shiftKey)}),q$=_e({name:"zoomOut",label:"buttons.zoomOut",icon:kB,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Hu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:bf(t.zoom.value-I7)},t),userToFollow:null},captureUpdate:me.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(jt,{type:"button",className:"zoom-out-button zoom-button",icon:kB,title:`${j("buttons.zoomOut")}  ${Ue("CtrlOrCmd+-")}`,"aria-label":j("buttons.zoomOut"),disabled:t.zoom.value<=xT,onClick:()=>{e(null)}}),keyTest:e=>(e.code===zt.MINUS||e.code===zt.NUM_SUBTRACT)&&(e[Q.CTRL_OR_CMD]||e.shiftKey)}),Q$=_e({name:"resetZoom",label:"buttons.resetZoom",icon:awe,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Hu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:bf(1)},t),userToFollow:null},captureUpdate:me.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(n1,{label:j("buttons.resetZoom"),style:{height:"100%"},children:m.jsxs(jt,{type:"button",className:"reset-zoom-button zoom-button",title:j("buttons.resetZoom"),"aria-label":j("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===zt.ZERO||e.code===zt.NUM_ZERO)&&(e[Q.CTRL_OR_CMD]||e.shiftKey)}),tje=(e,t,n=1)=>{let[r,i,s,o]=e,a=s-r,l=t.width/a,f=o-i,c=t.height/f,d=Math.min(l,c)*Mt(n,.1,1);return Math.min(d,1)},nje=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:r=!1,viewportZoomFactor:i=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{i=Mt(i,xT,vT);let[a,l,f,c]=e,d=(a+f)/2,u=(l+c)/2,h=(n==null?void 0:n.left)??0,g=(n==null?void 0:n.top)??0,U=(n==null?void 0:n.right)??0,y=(n==null?void 0:n.bottom)??0,x=t.width-h-U,w=t.height-g-y,E;if(r){let M=f-a,C=c-l;E=Math.min(x/M,w/C)*i}else E=tje(e,{width:x,height:w},i);let S=bf(Mt(Zxe(E,I7,"floor"),s,o)),A=nQ({scenePoint:{x:d,y:u},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:S}});return{appState:{...t,scrollX:A.scrollX,scrollY:A.scrollY,zoom:{value:S}},captureUpdate:me.EVENTUALLY}},mx=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:o})=>{let a=nn(Un(t));return nje({canvasOffsets:e,bounds:a,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:o})};_e({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:OT,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return mx({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===zt.TWO&&e.shiftKey&&!e.altKey&&!e[Q.CTRL_OR_CMD]});_e({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:OT,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return mx({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===zt.THREE&&e.shiftKey&&!e.altKey&&!e[Q.CTRL_OR_CMD]});_e({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:OT,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>mx({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()}),keyTest:e=>e.code===zt.ONE&&e.shiftKey&&!e.altKey&&!e[Q.CTRL_OR_CMD]});var w9=_e({name:"toggleTheme",label:(e,t)=>t.theme===Nt.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===Nt.LIGHT?PC:DC,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===Nt.LIGHT?Nt.DARK:Nt.LIGHT)},captureUpdate:me.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===zt.D,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.toggleTheme});_e({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return Rl(t)?n=yr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=yr(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:me.IMMEDIATELY}},keyTest:e=>e.key===Q.E});var rje=_e({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:cq,viewMode:!1,perform:(e,t,n,r)=>{let i;return o6(t)?i=yr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(i=yr(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),an(r.interactiveCanvas,rn.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:i},captureUpdate:me.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[Q.CTRL_OR_CMD]&&e.key===Q.H}),Sa=_e({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,r)=>{var u;let{interactiveCanvas:i,focusContainer:s,scene:o}=r,a=o.getNonDeletedElementsMap();if(t.editingLinearElement){let{elementId:h,startBindingElement:g,endBindingElement:U}=t.editingLinearElement,y=Be.getElement(h,a);if(y)return Yl(y)&&z7(y,g,U,a,o),{elements:y.points.length<2||y6(y)?e.filter(x=>x.id!==y.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:me.IMMEDIATELY}}let l=e,f=t.pendingImageElementId&&o.getElement(t.pendingImageElementId);f&&ye(f,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&s();let c=t.multiElement?t.multiElement:((u=t.newElement)==null?void 0:u.type)==="freedraw"?t.newElement:null;if(c){if(c.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){let{points:g,lastCommittedPoint:U}=c;(!U||g[g.length-1]!==U)&&ye(c,{points:c.points.slice(0,-1)})}y6(c)&&(l=l.filter(g=>g.id!==c.id));let h=Mf(c.points,t.zoom.value);if((c.type==="line"||c.type==="freedraw")&&h){let g=c.points,U=g[0];ye(c,{points:g.map((y,x)=>x===g.length-1?D(U[0],U[1]):y)})}if(Yl(c)&&!h&&c.points.length>1){let[g,U]=Be.getPointAtIndexGlobalCoordinates(c,-1,ct(e));VC(c,t,{x:g,y:U},a,e)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!c)&&Aa(i);let d;return t.activeTool.type==="eraser"?d=yr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=yr(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&c?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:c&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[c.id]:!0}:t.selectedElementIds,selectedLinearElement:c&&mt(c)?new Be(c):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:me.IMMEDIATELY}},keyTest:(e,t)=>e.key===Q.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===Q.ESCAPE||e.key===Q.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>m.jsx(jt,{type:"button",icon:bwe,title:j("buttons.done"),"aria-label":j("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),ije=e=>{let{id:t}=xc(),[n,r]=I.useState(e.value),i=o=>{e.ignoreFocus||bve(o.target);let a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===Q.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return m.jsxs("div",{className:"ProjectName",children:[m.jsx("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),m.jsx("input",{type:"text",className:"TextInput",onBlur:i,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>r(o.target.value)})]})},sje=e=>{let t=e.title||(e.value===Nt.DARK?j("buttons.lightMode"):j("buttons.darkMode"));return m.jsx(jt,{type:"icon",icon:e.value===Nt.LIGHT?J$.MOON:J$.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===Nt.DARK?Nt.LIGHT:Nt.DARK),"data-testid":"toggle-dark-mode"})},J$={SUN:m.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:m.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},gx=(e,{selectedElementIds:t},n)=>{e=Un(e);let r=n&&Dr(e,{selectedElementIds:t}),i=null,s=r?wt(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return r&&(s.length===1&&at(s[0])?(i=s[0],s=yI(e,i)):s.length>1&&(s=wt(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:i,exportedElements:vf(s)}},bx=async(e,t,n,r,{exportBackground:i,exportPadding:s=T6,viewBackgroundColor:o,name:a=n.name||RZ,fileHandle:l=null,exportingFrame:f=null})=>{if(t.length===0)throw new Error(j("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){let d=tI(t,{exportBackground:i,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},r,{exportingFrame:f});if(e==="svg")return l9(d.then(u=>new Blob([u.outerHTML],{type:it.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[s6.svg],fileHandle:l});if(e==="clipboard-svg"){let u=await d.then(h=>h.outerHTML);try{await Kb(u)}catch{throw new Error(j("errors.copyToSystemClipboardFailed"))}return}}let c=zQ(t,n,r,{exportBackground:i,viewBackgroundColor:o,exportPadding:s,exportingFrame:f});if(e==="png"){let d=J2(c);return n.exportEmbedScene&&(d=d.then(u=>Ve(async()=>{const{encodePngMetadata:h}=await Promise.resolve().then(()=>Fre);return{encodePngMetadata:h}},void 0).then(({encodePngMetadata:h})=>h({blob:u,metadata:qT(t,n,r)})))),l9(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[s6.png],fileHandle:l})}else if(e==="clipboard")try{let d=J2(c);await MNe(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(j("canvasError.canvasTooBig")):j2&&d.name==="TypeError"?new Error(`${j("alerts.couldNotCopyToClipboard")}

${j("hints.firefox_clipboard_write")}`):new Error(j("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},oje=async(e,t,n,r)=>{let{exportBackground:i,viewBackgroundColor:s,fileHandle:o}=t,a=hJ(o);if(!o||!fRe(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};let{exportedElements:l,exportingFrame:f}=gx(e,t,!1);return await bx(a,l,t,n,{exportBackground:i,viewBackgroundColor:s,name:r,fileHandle:o,exportingFrame:f}),{fileHandle:o}},eN=({children:e,checked:t,onChange:n,className:r})=>m.jsxs("div",{className:ze("Checkbox",r,{"is-checked":t}),onClick:i=>{n(!t,i),i.currentTarget.querySelector(".Checkbox-box").focus()},children:[m.jsx("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:uwe}),m.jsx("div",{className:"Checkbox-label",children:e})]}),aje=_e({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:r,app:i})=>m.jsx(ije,{label:j("labels.fileTitle"),value:i.getName(),onChange:s=>t(s),ignoreFocus:(r==null?void 0:r.ignoreFocus)??!1})}),lje=_e({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Un(e),i=Dr(r,t)?wt(r,t):r;return m.jsx(m.Fragment,{children:ET.map(s=>{let[o,a]=WIe(i,T6,s),l=`${j("imageExportDialog.label.scale")} ${s}x (${o}x${a})`;return m.jsx(jt,{size:"small",type:"radio",icon:`${s}x`,name:"export-canvas-scale",title:l,"aria-label":l,id:"export-canvas-scale",checked:s===t.exportScale,onChange:()=>n(s)},s)})})}}),cje=_e({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx(eN,{checked:e.exportBackground,onChange:n=>t(n),children:j("imageExportDialog.label.withBackground")})}),one=_e({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsxs(eN,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[j("imageExportDialog.label.embedScene"),m.jsx(n1,{label:j("imageExportDialog.tooltip.embedScene"),long:!0,children:m.jsx("div",{className:"excalidraw-tooltip-icon",children:Uwe})})]})}),ez=_e({name:"saveToActiveFile",label:"buttons.save",icon:L7,trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{let i=!!t.fileHandle;try{let{fileHandle:s}=AI(t.fileHandle)?await oje(e,t,r.files,r.getName()):await CQ(e,t,r.files,r.getName());return{captureUpdate:me.EVENTUALLY,appState:{...t,fileHandle:s,toast:i?{message:s!=null&&s.name?j("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):j("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:me.EVENTUALLY}}},keyTest:e=>e.key===Q.S&&e[Q.CTRL_OR_CMD]&&!e.shiftKey}),ane=_e({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:L7,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,r)=>{try{let{fileHandle:i}=await CQ(e,{...t,fileHandle:null},r.files,r.getName());return{captureUpdate:me.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:i,toast:{message:j("toast.fileSaved")}}}}catch(i){return(i==null?void 0:i.name)!=="AbortError"?console.error(i):console.warn(i),{captureUpdate:me.EVENTUALLY}}},keyTest:e=>e.key===Q.S&&e.shiftKey&&e[Q.CTRL_OR_CMD],PanelComponent:({updateData:e})=>m.jsx(jt,{type:"button",icon:pwe,title:j("buttons.saveAs"),"aria-label":j("buttons.saveAs"),showAriaLabel:Gr().editor.isMobile,hidden:!c1,onClick:()=>e(null),"data-testid":"save-as-button"})}),EA=_e({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{try{let{elements:i,appState:s,files:o}=await DIe(t,e);return{elements:i,appState:s,files:o,captureUpdate:me.IMMEDIATELY}}catch(i){return(i==null?void 0:i.name)==="AbortError"?(console.warn(i),!1):{elements:e,appState:{...t,errorMessage:i.message},files:r.files,captureUpdate:me.EVENTUALLY}}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.O}),fje=_e({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:m.jsx(sje,{value:e.exportWithDarkMode?Nt.DARK:Nt.LIGHT,onChange:n=>{t(n===Nt.DARK)},title:j("imageExportDialog.label.darkMode")})})}),lne="{}",dje=_e({name:"copyStyles",label:"labels.copyStyles",icon:mq,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=[],s=e.find(o=>t.selectedElementIds[o.id]);if(i.push(s),s&&sa(s)){let o=xt(s,r.scene.getNonDeletedElementsMap());i.push(o)}return s&&(lne=JSON.stringify(i)),{appState:{...t,toast:{message:j("toast.copyStyles")}},captureUpdate:me.EVENTUALLY}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.C}),uje=_e({name:"pasteStyles",label:"labels.pasteStyles",icon:mq,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=JSON.parse(lne),s=i[0],o=i[1];if(!KZ(s))return{elements:e,captureUpdate:me.EVENTUALLY};let a=wt(e,t,{includeBoundTextElement:!0}),l=a.map(f=>f.id);return{elements:e.map(f=>{if(l.includes(f.id)){let c=s;if(je(f)&&f.containerId&&(c=o),!c)return f;let d=yt(f,{backgroundColor:c==null?void 0:c.backgroundColor,strokeWidth:c==null?void 0:c.strokeWidth,strokeColor:c==null?void 0:c.strokeColor,strokeStyle:c==null?void 0:c.strokeStyle,fillStyle:c==null?void 0:c.fillStyle,opacity:c==null?void 0:c.opacity,roughness:c==null?void 0:c.roughness,roundness:c.roundness?Mve(c.roundness.type,f)?c.roundness:Tve(f):null});if(je(d)){let u=c.fontSize||$f,h=c.fontFamily||F0;d=yt(d,{fontSize:u,fontFamily:h,textAlign:c.textAlign||Fb,lineHeight:c.lineHeight||qh(h)});let g=null;d.containerId&&(g=a.find(U=>je(d)&&U.id===d.containerId)||null),ps(d,g,r.scene.getNonDeletedElementsMap())}return d.type==="arrow"&&Et(c)&&(d=yt(d,{startArrowhead:c.startArrowhead,endArrowhead:c.endArrowhead})),at(f)&&(d=yt(d,{roundness:null,backgroundColor:"transparent"})),d}return f}),captureUpdate:me.IMMEDIATELY}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.V});_e({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx(jt,{type:"button",icon:tq,"aria-label":j("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});_e({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(jt,{visible:CI(t,Un(e)),type:"button",icon:mwe,"aria-label":j("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});var tN=_e({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:cwe,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:r})=>{var i,s;return((i=t.openDialog)==null?void 0:i.name)==="help"&&r(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"}},captureUpdate:me.EVENTUALLY}},keyTest:e=>e.key===Q.QUESTION_MARK}),hje=e=>{if(e.length>=2){let t=e[0].groupIds;for(let n of t)if(e.reduce((r,i)=>r&&K2(i,n),!0))return!0}return!1},tz=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return r.length>=2&&!hje(r)&&!nJ(r)},pje=_e({name:"group",label:"labels.group",icon:e=>m.jsx(BB,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=UI(r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(i.length<2)return{appState:t,elements:e,captureUpdate:me.EVENTUALLY};let s=Eh(t);if(s.length===1){let U=s[0],y=new Set(Cn(e,U).map(w=>w.id)),x=new Set(i.map(w=>w.id));if(new Set([...Array.from(y),...Array.from(x)]).size===y.size)return{appState:t,elements:e,captureUpdate:me.EVENTUALLY}}let o=[...e];new Set(i.map(U=>U.frameId)).size>1&&ONe(i).forEach((U,y)=>{Q7(U,r.scene.getNonDeletedElementsMap())});let a=oa(),l=ct(i);o=o.map(U=>l.get(U.id)?yt(U,{groupIds:$Te(U.groupIds,a,t.editingGroupId)}):U);let f=Cn(o,a),c=f[f.length-1],d=o.lastIndexOf(c),u=o.slice(d+1),h=o.slice(0,d).filter(U=>!K2(U,a)),g=uc([...h,...f,...u],ct(f));return{appState:{...t,...iQ(a,{...t,selectedGroupIds:{}},Un(o))},elements:g,captureUpdate:me.IMMEDIATELY}},predicate:(e,t,n,r)=>tz(e,t,r),keyTest:e=>!e.shiftKey&&e[Q.CTRL_OR_CMD]&&e.key===Q.G,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!tz(e,t,r),type:"button",icon:m.jsx(BB,{theme:t.theme}),onClick:()=>n(null),title:`${j("labels.group")}  ${Ue("CtrlOrCmd+G")}`,"aria-label":j("labels.group"),visible:Dr(Un(e),t)})}),mje=_e({name:"ungroup",label:"labels.ungroup",icon:e=>m.jsx(FB,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=Eh(t),s=ct(e);if(i.length===0)return{appState:t,elements:e,captureUpdate:me.EVENTUALLY};let o=[...e],a=[];o=o.map(d=>{Mn(d)&&a.push(d.id);let u=zTe(d.groupIds,t.selectedGroupIds);return u.length===d.groupIds.length?d:yt(d,{groupIds:u})});let l=rs(t,Un(o),t,null),f=r.scene.getSelectedElements(t),c=new Set(f.filter(d=>d.frameId).map(d=>d.frameId));return bI(e).filter(d=>c.has(d.id)).forEach(d=>{d&&(o=eJ(o,a3(o,d,t,s),d,r))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((d,[u,h])=>(h&&!a.includes(u)&&(d[u]=!0),d),{}),{appState:{...t,...l},elements:o,captureUpdate:me.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[Q.CTRL_OR_CMD]&&e.key===Q.G.toUpperCase(),predicate:(e,t)=>Eh(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(jt,{type:"button",hidden:Eh(t).length===0,icon:m.jsx(FB,{theme:t.theme}),onClick:()=>n(null),title:`${j("labels.ungroup")}  ${Ue("CtrlOrCmd+Shift+G")}`,"aria-label":j("labels.ungroup"),visible:Dr(Un(e),t)})}),cne=(e,t,n,r,i,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadraticCurveTo(t+r,n+i,t+r-s,n+i),e.lineTo(t+s,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function gje(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)-t+r}return t}var Ux=(e,t)=>`hsl(${Math.abs(gje((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,bje=e=>{var n;let t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},Uje=({context:e,renderConfig:t,appState:n,normalizedWidth:r,normalizedHeight:i})=>{for(let[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o,f=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;let c=11,d=14,u=a<0||a>r-c||l<0||l>i-d;a=Math.max(a,0),a=Math.min(a,r-c),l=Math.max(l,0),l=Math.min(l,i-d);let h=Ux(s,f);e.save(),e.strokeStyle=h,e.fillStyle=h;let g=t.remotePointerUserStates.get(s),U=u||g==="idle"||g==="away";U&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());let y=n.theme===Nt.DARK?"#2f6330":Txe,x=f==null?void 0:f.isSpeaking;x&&(e.fillStyle=y,e.strokeStyle=y,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=ey,e.strokeStyle=ey,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),U?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());let w=t.remotePointerUsernames.get(s)||"";if(!u&&w){e.font="600 12px sans-serif";let E=(x?a+0:a)+c/2,S=(x?l+0:l)+d+2,A=5,M=3,C=e.measureText(w),T=C.actualBoundingBoxDescent+C.actualBoundingBoxAscent,R=Math.max(T,12),P=E-1,_=S-1,O=C.width+2+A*2+2,F=R+2+M*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(P,_,O,F,8),e.fillStyle=h,e.fill(),e.strokeStyle=ey,e.stroke(),x&&(e.beginPath(),e.roundRect(P-2,_-2,O+4,F+4,8),e.strokeStyle=y,e.stroke())):cne(e,P,_,O,F,8,ey),e.fillStyle=Mxe,e.fillText(w,E+A+1,S+M+C.actualBoundingBoxAscent+Math.floor((R-T)/2)+2),x){e.fillStyle=y;let B=8,$=8,z=5;e.fillRect(P+O+$,_+(F/2-B/2),2,B),e.fillRect(P+O+$+z,_+(F/2-B*2/2),2,B*2),e.fillRect(P+O+$+z*2,_+(F/2-B/2),2,B)}}e.restore(),e.closePath()}},nz=({color:e,onClick:t,name:n,src:r,className:i})=>{let s=bje(n),[o,a]=I.useState(!1),l=!o&&r,f=l?void 0:{background:e};return m.jsx("div",{className:ze("Avatar",i),style:f,onClick:t,children:l?m.jsx("img",{className:"Avatar-img",src:r,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};_e({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var r;return!n.socketId||((r=t.userToFollow)==null?void 0:r.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:me.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:me.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{let{socketId:r,collaborator:i,withName:s,isBeingFollowed:o}=t,a=Ux(r,i),l=ze({"is-followed":o,"is-current-user":i.isCurrentUser===!0,"is-speaking":i.isSpeaking,"is-in-call":i.isInCall,"is-muted":i.isMuted}),f=i.isInCall?i.isSpeaking?m.jsxs("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:j("userList.hint.isSpeaking"),children:[m.jsx("div",{}),m.jsx("div",{}),m.jsx("div",{})]}):i.isMuted?m.jsx("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:j("userList.hint.micMuted"),children:mEe}):m.jsx("div",{title:j("userList.hint.inCall"),children:pEe}):null;return s?m.jsxs("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(i),children:[m.jsx(nz,{color:a,onClick:()=>{},name:i.username||"",src:i.avatarUrl,className:l}),m.jsx("div",{className:"UserList__collaborator-name",children:i.username}),m.jsxs("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&m.jsx("div",{className:"UserList__collaborator-status-icon-is-followed",title:j("userList.hint.followStatus"),children:LT}),f]})]}):m.jsxs("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[m.jsx(nz,{color:a,onClick:()=>{e(i)},name:i.username||"",src:i.avatarUrl,className:l}),f&&m.jsx("div",{className:"UserList__collaborator-status-icon",children:f})]})}});var yje=_e({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(let s of NZ)if(i.some(o=>o.type===s))return{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:j(`errors.libraryElementTypeError.${s}`)}};return r.library.getLatestLibrary().then(s=>r.library.setLibrary([{id:oa(),status:"unpublished",elements:i.map(d1),created:Date.now()},...s])).then(()=>({captureUpdate:me.EVENTUALLY,appState:{...t,toast:{message:j("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),xje=(e,t,n,r)=>{let i=G7(e,t),s=Ja(e);return i.flatMap(o=>{let a=vje(o,s,n);return o.map(l=>{let f=ye(l,{x:l.x+a.x,y:l.y+a.y});return zs(l,r.getNonDeletedElementsMap(),{simultaneouslyUpdated:o}),f})})},vje=(e,t,{axis:n,position:r})=>{let i=Ja(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return r==="start"?{...a,[n]:t[s]-i[s]}:r==="end"?{...a,[n]:t[o]-i[o]}:{...a,[n]:(t[s]+t[o])/2-(i[s]+i[o])/2}},Uo=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>at(r))},O6=(e,t,n,r)=>{let i=n.scene.getSelectedElements(t),s=ct(e),o=xje(i,s,r,n.scene),a=ct(o);return U6(e.map(l=>a.get(l.id)||l),t,n)};_e({name:"alignTop",label:"labels.alignTop",icon:_B,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Uo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"start",axis:"y"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key===Q.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!Uo(t,r),type:"button",icon:_B,onClick:()=>n(null),title:`${j("labels.alignTop")}  ${Ue("CtrlOrCmd+Shift+Up")}`,"aria-label":j("labels.alignTop"),visible:Dr(Un(e),t)})});_e({name:"alignBottom",label:"labels.alignBottom",icon:PB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Uo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"end",axis:"y"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key===Q.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!Uo(t,r),type:"button",icon:PB,onClick:()=>n(null),title:`${j("labels.alignBottom")}  ${Ue("CtrlOrCmd+Shift+Down")}`,"aria-label":j("labels.alignBottom"),visible:Dr(Un(e),t)})});_e({name:"alignLeft",label:"labels.alignLeft",icon:DB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Uo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"start",axis:"x"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key===Q.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!Uo(t,r),type:"button",icon:DB,onClick:()=>n(null),title:`${j("labels.alignLeft")}  ${Ue("CtrlOrCmd+Shift+Left")}`,"aria-label":j("labels.alignLeft"),visible:Dr(Un(e),t)})});_e({name:"alignRight",label:"labels.alignRight",icon:LB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Uo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"end",axis:"x"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key===Q.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!Uo(t,r),type:"button",icon:LB,onClick:()=>n(null),title:`${j("labels.alignRight")}  ${Ue("CtrlOrCmd+Shift+Right")}`,"aria-label":j("labels.alignRight"),visible:Dr(Un(e),t)})});_e({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:OB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Uo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"center",axis:"y"}),captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!Uo(t,r),type:"button",icon:OB,onClick:()=>n(null),title:j("labels.centerVertically"),"aria-label":j("labels.centerVertically"),visible:Dr(Un(e),t)})});_e({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:jB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Uo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"center",axis:"x"}),captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!Uo(t,r),type:"button",icon:jB,onClick:()=>n(null),title:j("labels.centerHorizontally"),"aria-label":j("labels.centerHorizontally"),visible:Dr(Un(e),t)})});var wje=(e,t,n)=>{let[r,i,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=Ja(e),l=G7(e,t).map(u=>[u,Ja(u)]).sort((u,h)=>u[1][i]-h[1][i]),f=0;for(let u of l)f+=u[1][o];let c=(a[o]-f)/(l.length-1);if(c<0){let u=l.findIndex(y=>y[1][r]===a[r]),h=l.findIndex(y=>y[1][s]===a[s]),g=(l[h][1][i]-l[u][1][i])/(l.length-1),U=l[u][1][i];return l.flatMap(([y,x],w)=>{let E={x:0,y:0};return w!==u&&w!==h&&(U+=g,E[n.axis]=U-x[i]),y.map(S=>yt(S,{x:S.x+E.x,y:S.y+E.y}))})}let d=a[r];return l.flatMap(([u,h])=>{let g={x:0,y:0};return g[n.axis]=d-h[r],d+=c,d+=h[o],u.map(U=>yt(U,{x:U.x+g.x,y:U.y+g.y}))})},fne=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>at(r))},dne=(e,t,n,r)=>{let i=n.scene.getSelectedElements(t),s=wje(i,n.scene.getNonDeletedElementsMap(),r),o=ct(s);return U6(e.map(a=>o.get(a.id)||a),t,n)};_e({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:dne(e,t,r,{space:"between",axis:"x"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.H,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!fne(t,r),type:"button",icon:ywe,onClick:()=>n(null),title:`${j("labels.distributeHorizontally")}  ${Ue("Alt+H")}`,"aria-label":j("labels.distributeHorizontally"),visible:Dr(Un(e),t)})});_e({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:dne(e,t,r,{space:"between",axis:"y"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.V,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(jt,{hidden:!fne(t,r),type:"button",icon:xwe,onClick:()=>n(null),title:`${j("labels.distributeVertically")}  ${Ue("Alt+V")}`,"aria-label":j("labels.distributeVertically"),visible:Dr(Un(e),t)})});var Eje=_e({name:"flipHorizontal",label:"labels.flipHorizontal",icon:yEe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:U6(une(e,r.scene.getNonDeletedElementsMap(),t,"horizontal",r),t,r),appState:t,captureUpdate:me.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===zt.H}),Sje=_e({name:"flipVertical",label:"labels.flipVertical",icon:UEe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:U6(une(e,r.scene.getNonDeletedElementsMap(),t,"vertical",r),t,r),appState:t,captureUpdate:me.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===zt.V&&!e[Q.CTRL_OR_CMD]}),une=(e,t,n,r,i)=>{let s=wt(Un(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=kje(s,t,n,r,i),a=ct(o);return e.map(l=>a.get(l.id)||l)},kje=(e,t,n,r,i)=>{if(e.every(h=>Et(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{let g=h;return yt(g,{startArrowhead:g.endArrowhead,endArrowhead:g.startArrowhead})});let{midX:s,midY:o}=Ja(e);fJ(e,t,"nw",i.scene,new Map(Array.from(t.values()).map(h=>[h.id,d1(h)])),{flipByX:r==="horizontal",flipByY:r==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),n9(e.filter(mt),t,i.scene.getNonDeletedElements(),i.scene,$u(n),[],n.zoom);let{elbowArrows:a,otherElements:l}=e.reduce((h,g)=>Fe(g)?{...h,elbowArrows:h.elbowArrows.concat(g)}:{...h,otherElements:h.otherElements.concat(g)},{elbowArrows:[],otherElements:[]}),{midX:f,midY:c}=Ja(e),[d,u]=[s-f,o-c];return l.forEach(h=>ye(h,{x:h.x+d,y:h.y+u})),a.forEach(h=>ye(h,{x:h.x+d,y:h.y+u})),e},m3=_e({name:"copy",label:"labels.copy",icon:_C,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await ENe(i,r.files,n)}catch(s){return{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:me.EVENTUALLY}},keyTest:void 0}),rz=_e({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i;try{i=await CNe()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),j2?{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:j("hints.firefox_clipboard_write")}}:{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:j("errors.asyncPasteFailedOnRead")}})}try{r.pasteFromClipboard(vNe({types:i}))}catch(s){return console.error(s),{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:j("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:me.EVENTUALLY}},keyTest:void 0}),iz=_e({name:"cut",label:"labels.cut",icon:iEe,trackEvent:{category:"element"},perform:(e,t,n,r)=>(m3.perform(e,t,n,r),jte.perform(e,t,null,r)),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.X}),sz=_e({name:"copyAsSvg",label:"labels.copyAsSvg",icon:xEe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:me.EVENTUALLY};let{exportedElements:i,exportingFrame:s}=gx(e,t,!0);try{await bx("clipboard-svg",i,t,r.files,{...t,exportingFrame:s,name:r.getName()});let o=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:j("toast.copyToClipboardAsSvg",{exportSelection:o.length?j("toast.selection"):j("toast.canvas"),exportColorScheme:t.exportWithDarkMode?j("buttons.darkMode"):j("buttons.lightMode")})}},captureUpdate:me.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:me.EVENTUALLY}}},predicate:e=>uI&&e.length>0,keywords:["svg","clipboard","copy"]}),oz=_e({name:"copyAsPng",label:"labels.copyAsPng",icon:vEe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:me.EVENTUALLY};let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=gx(e,t,!0);try{return await bx("clipboard",s,t,r.files,{...t,exportingFrame:o,name:r.getName()}),{appState:{...t,toast:{message:j("toast.copyToClipboardAsPng",{exportSelection:i.length?j("toast.selection"):j("toast.canvas"),exportColorScheme:t.exportWithDarkMode?j("buttons.darkMode"):j("buttons.lightMode")})}},captureUpdate:me.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:me.EVENTUALLY}}},predicate:e=>hI&&e.length>0,keyTest:e=>e.code===zt.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),az=_e({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{Kb(lIe(i))}catch{throw new Error(j("errors.copyToSystemClipboardFailed"))}return{captureUpdate:me.EVENTUALLY}},predicate:(e,t,n,r)=>uI&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(je),keywords:["text","clipboard","copy"]}),lz=_e({name:"gridMode",icon:CEe,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:me.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[Q.CTRL_OR_CMD]&&e.code===zt.QUOTE}),SA=_e({name:"zenMode",label:"buttons.zenMode",icon:EEe,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:me.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.Z}),Cje=_e({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:wEe,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:me.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.S}),kA=_e({name:"stats",label:"stats.fullTitle",icon:bEe,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:me.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.SLASH}),Aje=_e({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>r.scene.getSelectedElements(t).some(i=>sa(i)),perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=r.scene.getNonDeletedElementsMap();return i.forEach(o=>{var l;let a=xt(o,s);if(a){let{width:f,height:c}=Xi(a.originalText,cn(a),a.lineHeight),d=tIe(o.id);fQ(o.id);let{x:u,y:h}=K7(o,a,s);ye(a,{containerId:null,width:f,height:c,text:a.originalText,x:u,y:h}),ye(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(g=>g.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:me.IMMEDIATELY}}}),Mje=_e({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);if(i.length===2){let s=je(i[0])||je(i[1]),o;if(wh(i[0])?o=i[0]:wh(i[1])&&(o=i[1]),s&&o&&xt(o,r.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s,o;je(i[0])&&wh(i[1])?(s=i[0],o=i[1]):(s=i[1],o=i[0]),ye(s,{containerId:o.id,verticalAlign:ho.MIDDLE,textAlign:F2.CENTER,autoResize:!0}),ye(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});let a=o.height;return ps(s,o,r.scene.getNonDeletedElementsMap()),i9(o.id,a),{elements:Tje(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:me.IMMEDIATELY}}}),Tje=(e,t,n)=>{let r=e.slice(),i=r.findIndex(o=>o.id===n.id);r.splice(i,1);let s=r.findIndex(o=>o.id===t.id);return r.splice(s+1,0,n),uc(r,ct([t,n])),r},Ije=(e,t,n)=>{let r=e.slice(),i=r.findIndex(o=>o.id===t.id);r.splice(i,1);let s=r.findIndex(o=>o.id===n.id);return r.splice(s,0,t),uc(r,ct([t,n])),r},Nje=_e({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=i.every(o=>je(o));return i.length>0&&s},perform:(e,t,n,r)=>{var a;let i=r.scene.getSelectedElements(t),s=e.slice(),o={};for(let l of i)if(je(l)){let f=dc({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:N6("rectangle")?Pr.ADAPTIVE_RADIUS:Pr.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-_r,y:l.y-_r,width:Jh(l.width,"rectangle"),height:Jh(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){let c=l.boundElements.filter(d=>d.type==="arrow").map(d=>d.id);s.filter(d=>c.includes(d.id)).forEach(d=>{let u=d.startBinding,h=d.endBinding;(u==null?void 0:u.elementId)===l.id&&(u={...u,elementId:f.id}),(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:f.id}),(u||h)&&ye(d,{startBinding:u,endBinding:h},!1)})}ye(l,{containerId:f.id,verticalAlign:ho.MIDDLE,boundElements:null,textAlign:F2.CENTER,autoResize:!0},!1),ps(l,f,r.scene.getNonDeletedElementsMap()),s=Ije([...s,f],f,l),o[f.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:me.IMMEDIATELY}}}),nN=380,Rje=42,CA=5,hne=85,_je=500,AA=!1,gy=new Map,Pje=({element:e,elementsMap:t,setAppState:n,onLinkOpen:r,setToast:i,updateEmbedValidationStatus:s})=>{let o=t8(),a=e8(),l=Gr(),f=e.link||"",[c,d]=I.useState(f),u=I.useRef(null),h=o.showHyperlinkPopup==="editor",g=I.useCallback(()=>{var S;if(!u.current)return;let E=po(u.current.value)||null;if(!e.link&&E&&xn("hyperlink","create"),Rs(e)){if(((S=o.activeEmbeddable)==null?void 0:S.element)===e&&n({activeEmbeddable:null}),!E){ye(e,{link:null}),s(e,!1);return}if(!s3(E,a.validateEmbeddable))E&&i({message:j("toast.unableToEmbed"),closable:!0}),e.link&&gy.set(e.id,e.link),ye(e,{link:E}),s(e,!1);else{let{width:A,height:M}=e,C=Mp(E);(C==null?void 0:C.error)instanceof URIError&&i({message:j("toast.unrecognizedLinkFormat"),closable:!0});let T=C?C.intrinsicSize.w/C.intrinsicSize.h:1,R=gy.get(e.id)!==e.link;ye(e,{...R?{width:(C==null?void 0:C.type)==="video"?A>M?A:M*T:A,height:(C==null?void 0:C.type)==="video"&&A>M?A/T:M}:{},link:E}),s(e,!0),gy.has(e.id)&&gy.delete(e.id)}}else ye(e,{link:E})},[e,i,a.validateEmbeddable,o.activeEmbeddable,n,s]);I.useLayoutEffect(()=>()=>{g()},[g]),I.useEffect(()=>{h&&(u!=null&&u.current)&&!(l.viewport.isMobile||l.isTouchScreen)&&u.current.select()},[h,l.viewport.isMobile,l.isTouchScreen]),I.useEffect(()=>{let E=null,S=A=>{h||(E&&clearTimeout(E),Oje(e,t,o,D(A.clientX,A.clientY))&&(E=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},_je)))};return window.addEventListener("pointermove",S,!1),()=>{window.removeEventListener("pointermove",S,!1),E&&clearTimeout(E)}},[o,e,h,n,t]);let U=I.useCallback(()=>{xn("hyperlink","delete"),ye(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e]),y=()=>{xn("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x,y:w}=pne(e,o,t);return o.contextMenu||o.selectedElementsAreBeingDragged||o.resizingElement||o.isRotating||o.openMenu||o.viewModeEnabled?null:m.jsxs("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${w}px`,left:`${x}px`,width:nN,padding:CA},children:[h?m.jsx("input",{className:ze("excalidraw-hyperlinkContainer-input"),placeholder:j("labels.link.hint"),ref:u,value:c,onChange:E=>d(E.target.value),autoFocus:!0,onKeyDown:E=>{E.stopPropagation(),E[Q.CTRL_OR_CMD]&&E.key===Q.K&&E.preventDefault(),(E.key===Q.ENTER||E.key===Q.ESCAPE)&&(g(),n({showHyperlinkPopup:"info"}))}}):e.link?m.jsx("a",{href:po(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:uQ(e.link)?"_self":"_blank",onClick:E=>{if(e.link&&r){let S=HZ("excalidraw-link",E.nativeEvent);r({...e,link:po(e.link)},S),S.defaultPrevented&&E.preventDefault()}},rel:"noopener noreferrer",children:e.link}):m.jsx("div",{className:"excalidraw-hyperlinkContainer-link",children:j("labels.link.empty")}),m.jsxs("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!h&&m.jsx(jt,{type:"button",title:j("buttons.edit"),"aria-label":j("buttons.edit"),label:j("buttons.edit"),onClick:y,className:"excalidraw-hyperlinkContainer--edit",icon:H2}),m.jsx(jt,{type:"button",title:j("labels.linkToElement"),"aria-label":j("labels.linkToElement"),label:j("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:bq}),f&&!Rs(e)&&m.jsx(jt,{type:"button",title:j("buttons.remove"),"aria-label":j("buttons.remove"),label:j("buttons.remove"),onClick:U,className:"excalidraw-hyperlinkContainer--remove",icon:Yh})]})]})},pne=(e,t,n)=>{let[r,i]=gt(e,n),{x:s,y:o}=Wa({sceneX:r+e.width/2,sceneY:i},t),a=s-t.offsetLeft-nN/2,l=o-t.offsetTop-hne;return{x:a,y:l}},cz=(e,t)=>{var r;let n=wt(e,t);return Rs(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"},Z5=null,Dje=(e,t,n)=>{Z5&&clearTimeout(Z5),Z5=window.setTimeout(()=>Lje(e,t,n),Dxe)},Lje=(e,t,n)=>{if(!e.link)return;let r=K5();r.classList.add("excalidraw-tooltip--visible"),r.style.maxWidth="20rem",r.textContent=V5(e.link)?j("labels.link.goToElement"):e.link;let[i,s,o,a]=gt(e,n),[l,f,c,d]=QT([i,s,o,a],e.angle,t),u=Wa({sceneX:l,sceneY:f},t);sne(r,{left:u.x,top:u.y,width:c,height:d},"top"),xn("hyperlink","tooltip","link-icon"),AA=!0},fz=()=>{Z5&&clearTimeout(Z5),AA&&(AA=!1,K5().classList.remove("excalidraw-tooltip--visible"))},Oje=(e,t,n,[r,i])=>{let{x:s,y:o}=yn({clientX:r,clientY:i},n),a=15/n.zoom.value;if(BT(s,o,e,t))return!1;let[l,f,c]=gt(e,t);if(s>=l&&s<=c&&o>=f-hne&&o<=f)return!1;let{x:d,y:u}=pne(e,n,t);return!(r>=d-a&&r<=d+nN+CA*2+a&&i>=u-a&&i<=u+a+CA*2+Rje)},mne=_e({name:"hyperlink",label:(e,t)=>cz(e,t),icon:LC,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:me.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.K,predicate:(e,t)=>wt(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=wt(e,t);return m.jsx(jt,{type:"button",icon:LC,"aria-label":j(cz(e,t)),title:`${Rs(e[0])?j("labels.link.labelEmbed"):j("labels.link.label")} - ${Ue("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:r.length===1&&!!r[0].link})}}),ES=e=>e.every(t=>!t.locked),jje=_e({name:"toggleElementLock",label:(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return r.length===1&&!at(r[0])?r[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":ES(r)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{let n=wt(t,e);return ES(n)?RT:D7},trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return i.length>0&&!i.some(s=>s.locked&&s.frameId)},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!i.length)return!1;let s=ES(i),o=ct(i);return{elements:e.map(a=>o.has(a.id)?yt(a,{locked:s}):a),appState:{...t,selectedLinearElement:s?null:t.selectedLinearElement},captureUpdate:me.IMMEDIATELY}},keyTest:(e,t,n,r)=>e.key.toLocaleLowerCase()===Q.L&&e[Q.CTRL_OR_CMD]&&e.shiftKey&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),Bje=_e({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:D7,predicate:(e,t)=>wt(e,t).length===0&&e.some(n=>n.locked),perform:(e,t)=>{let n=e.filter(r=>r.locked);return{elements:e.map(r=>r.locked?yt(r,{locked:!1}):r),appState:{...t,selectedElementIds:Object.fromEntries(n.map(r=>[r.id,!0]))},captureUpdate:me.IMMEDIATELY}},label:"labels.elementLock.unlockAll"}),Fje=()=>{let[e,t]=I.useState(null),n=I.useCallback(r=>t(r),[]);return[e,n]},$je=e=>{let{closeOnClickOutside:t=!0}=e,n=Kte({className:"excalidraw-modal-container"}),r=I.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;let i=s=>{s.key===Q.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return ri.createPortal(m.jsxs("div",{className:ze("Modal",e.className,{"animations-disabled":r.current}),role:"dialog","aria-modal":"true",onKeyDown:i,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[m.jsx("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),m.jsx("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)},gne=di(new Map),dz=async e=>await YQ({elements:e,appState:{exportBackground:!1,viewBackgroundColor:At.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),zje=(e,t,n)=>{let[r,i]=I.useState();return I.useEffect(()=>{if(t)if(e){let s=n.get(e);s?i(s):(async()=>{var a;let o=await dz(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),i(o))})()}else(async()=>{let s=await dz(t);i(s)})()},[e,t,n,i]),r},bne=()=>{let[e]=ir(gne);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:t=>{t.forEach(n=>e.delete(n))},svgCache:e}},Hje=class{constructor(){Z(this,"jobs",[]),Z(this,"running",!1)}tick(){if(this.running)return;let e=this.jobs.shift();e?(this.running=!0,e.promise.resolve(c6(e.jobFactory,...e.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(e,...t){let n=mve();return this.jobs.push({jobFactory:e,promise:n,args:t}),this.tick(),n}},Vje=new _l,nb=di({status:"loaded",isInitialized:!1,libraryItems:[]}),Vg=e=>vf(e),Wje=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((r,i)=>r.id===t.elements[i].id&&r.versionNonce===t.elements[i].versionNonce)),Gje=(e,t)=>{let n=[];for(let r of t)Wje(e,r)&&n.push(r);return[...n,...e]},Xje=(e,t)=>{let n=ct(t),r={deletedItems:new Map,addedItems:new Map};for(let s of e)n.has(s.id)||r.deletedItems.set(s.id,s);let i=ct(e);for(let s of t)i.has(s.id)||r.addedItems.set(s.id,s);return r},Kje=class{constructor(e){Z(this,"currLibraryItems",[]),Z(this,"prevLibraryItems",Vg(this.currLibraryItems)),Z(this,"app"),Z(this,"updateQueue",[]),Z(this,"getLastUpdateTask",()=>this.updateQueue[this.updateQueue.length-1]),Z(this,"notifyListeners",()=>{var t,n;if(this.updateQueue.length>0)Ya.set(nb,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{Ya.set(nb,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{let r=this.prevLibraryItems;this.prevLibraryItems=Vg(this.currLibraryItems);let i=Vg(this.currLibraryItems);(n=(t=this.app.props).onLibraryChange)==null||n.call(t,i),Vje.trigger(Xje(r,i),i)}catch(r){console.error(r)}}}),Z(this,"destroy",()=>{this.updateQueue=[],this.currLibraryItems=[],Ya.set(gne,new Map)}),Z(this,"resetLibrary",()=>this.setLibrary([])),Z(this,"getLatestLibrary",()=>new Promise(async t=>{try{let n=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?t(this.getLatestLibrary()):t(Vg(n))}catch{return t(this.currLibraryItems)}})),Z(this,"updateLibrary",async({libraryItems:t,prompt:n=!1,merge:r=!1,openLibraryMenu:i=!1,defaultStatus:s="unpublished"})=>(i&&this.app.setState({openSidebar:{name:qa.name,tab:z4}}),this.setLibrary(()=>new Promise(async(o,a)=>{try{let l=await(typeof t=="function"&&!(t instanceof Blob)?t(this.currLibraryItems):t),f;l instanceof Blob?f=await dRe(l,s):f=dI(l,s),!n||window.confirm(j("alerts.confirmAddLibrary",{numShapes:f.length}))?(n&&this.app.focusContainer(),o(r?Gje(this.currLibraryItems,f):f)):a(new j7)}catch(l){a(l)}})))),Z(this,"setLibrary",t=>{let n=new Promise(async(r,i)=>{try{await this.getLastUpdateTask(),typeof t=="function"&&(t=t(this.currLibraryItems)),this.currLibraryItems=Vg(await t),r(this.currLibraryItems)}catch(s){i(s)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==n),this.notifyListeners()});return this.updateQueue.push(n),this.notifyListeners(),n}),this.app=e}},Yje=Kje,Une=e=>{let t=Math.ceil(Math.sqrt(e.length)),n=[],r=u=>e.slice(u*t,u*t+t).reduce((h,g)=>{let{height:U}=Ja(g.elements);return Math.max(h,U)},0),i=u=>{let h=0,g=0,U=0;for(let y of e){if(h%t===0&&(g=0),g===u){let{width:x}=Ja(y.elements);U=Math.max(U,x)}h++,g++}return U},s=0,o=0,a=0,l=0,f=0,c=0,d=0;for(let u of e){f&&f%t===0&&(o+=a+50,s=0,c=0,d++),c===0&&(a=r(d)),l=i(c);let{minX:h,minY:g,width:U,height:y}=Ja(u.elements),x=(l-U)/2,w=(a-y)/2;n.push(...u.elements.map(E=>({...E,x:E.x+s+x-h,y:E.y+o+w-g}))),s+=l+50,f++,c++}return n},by=class MA{constructor(t){Z(this,"adapter"),this.adapter=t}static async getLibraryItems(t,n,r=!0){let i=()=>new Promise(async(s,o)=>{try{let a=await t.load({source:n});s(dI((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return r?MA.queue.push(i):i()}getLibraryItems(t){return MA.getLibraryItems(this.adapter,t,!1)}};Z(by,"queue",new Hje),Z(by,"run",async(e,t)=>{let n=new by(e);return by.queue.push(()=>t(n))});var Zje=I.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:s},o)=>m.jsx("div",{className:ze("Stack Stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...s},ref:o,children:e})),qje=I.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:s},o)=>m.jsx("div",{className:ze("Stack Stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...s},ref:o,children:e})),Yo={Row:Zje,Col:qje},Qje=({theme:e,id:t,libraryReturnUrl:n})=>{let r=n||window.location.origin+window.location.pathname;return m.jsx("a",{className:"library-menu-browse-button",href:`${vt.VITE_APP_LIBRARY_URL}?target=${window.name||"_blank"}&referrer=${r}&useHash=true&token=${t}&theme=${e}&version=${N7.excalidrawLibrary}`,target:"_excalidraw_libraries",children:j("labels.libraries")})},Jje=Qje,yne=({libraryReturnUrl:e,theme:t,id:n,style:r,children:i,className:s})=>m.jsxs("div",{className:ze("library-menu-control-buttons",s),style:r,children:[m.jsx(Jje,{id:n,libraryReturnUrl:e,theme:t}),i]}),eBe=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,tBe=/{{([\w-]+)}}/,nBe=/<([\w-]+)>/,rBe=/<\/([\w-]+)>/,iBe=(e,t)=>{let n=[{name:"",children:[]}];return e.split(eBe).filter(Boolean).forEach(r=>{let i=r.match(nBe),s=r.match(rBe),o=r.match(tBe);if(i!==null){let a=i[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){let a=n.pop(),l=Te.createElement(Te.Fragment,{},...a.children),f=t[a.name];typeof f=="function"&&n[n.length-1].children.push(f(l))}else console.warn(`Trans: unexpected end tag ${r} for interpolating ${e}`);else if(o!==null){let a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(r)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},sBe=({i18nKey:e,children:t,...n})=>{let{t:r}=Zi();return Te.createElement(Te.Fragment,{},...iBe(r(e),n))},Jl=sBe,oBe=({label:e,onClick:t,className:n,children:r,actionType:i,type:s="button",isLoading:o,...a})=>{let l=i?`Dialog__action-button--${i}`:"";return m.jsxs("button",{className:ze("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[r&&m.jsx("div",{style:o?{visibility:"hidden"}:{},children:r}),m.jsx("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&m.jsx("div",{style:{position:"absolute",inset:0},children:m.jsx(Lf,{})})]})},w6=oBe,aBe=e=>{let{onConfirm:t,onCancel:n,children:r,confirmText:i=j("buttons.confirm"),cancelText:s=j("buttons.cancel"),className:o="",...a}=e,l=Xr(),f=fx(rN),{container:c}=xc();return m.jsxs(dl,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[r,m.jsxs("div",{className:"confirm-dialog-buttons",children:[m.jsx(w6,{label:s,onClick:()=>{l({openMenu:null}),f(!1),ri.flushSync(()=>{n()}),c==null||c.focus()}}),m.jsx(w6,{label:i,onClick:()=>{l({openMenu:null}),f(!1),ri.flushSync(()=>{t()}),c==null||c.focus()},actionType:"danger"})]})]})},xne=aBe,Ch=class{static has(e){try{return!!window.localStorage.getItem(e)}catch(t){return console.warn(`localStorage.getItem error: ${t.message}`),!1}}static get(e){try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn(`localStorage.getItem error: ${t.message}`),null}}};Z(Ch,"set",(e,t)=>{try{return window.localStorage.setItem(e,JSON.stringify(t)),!0}catch(n){return console.warn(`localStorage.setItem error: ${n.message}`),!1}}),Z(Ch,"delete",e=>{try{window.localStorage.removeItem(e)}catch(t){console.warn(`localStorage.removeItem error: ${t.message}`)}});var lBe=async e=>{let t=Math.round(8),n=Math.max(Math.round(128/64),2),r=dve(e,6),i=document.createElement("canvas");i.width=r[0].length*128+(r[0].length+1)*(t*2)-t*2,i.height=r.length*128+(r.length+1)*(t*2)-t*2;let s=i.getContext("2d");s.fillStyle=ai.white,s.fillRect(0,0,i.width,i.height);for(let[o,a]of e.entries()){let l=await pI({elements:a.elements,files:null,maxWidthOrHeight:128}),{width:f,height:c}=l,d=Math.floor(o/6)*(128+t*2),u=o%6*(128+t*2);s.drawImage(l,u+(128-f)/2+t,d+(128-c)/2+t),s.lineWidth=n,s.strokeStyle=ai.gray[4],s.strokeRect(u+t/2,d+t/2,128+t,128+t)}return await rA(new File([await J2(i)],"preview",{type:it.png}),{outputType:it.jpg,maxWidthOrHeight:5e3})},cBe=({libItem:e,appState:t,index:n,onChange:r,onRemove:i})=>{let s=I.useRef(null),o=I.useRef(null);return I.useEffect(()=>{let a=s.current;a&&(async()=>{let l=await YQ({elements:e.elements,appState:{...t,viewBackgroundColor:ai.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),m.jsxs("div",{className:"single-library-item",children:[e.status==="published"&&m.jsx("span",{className:"single-library-item-status",children:j("labels.statusPublished")}),m.jsx("div",{ref:s,className:"single-library-item__svg"}),m.jsx(jt,{"aria-label":j("buttons.remove"),type:"button",icon:R6,className:"single-library-item--remove",onClick:i.bind(null,e.id),title:j("buttons.remove")}),m.jsxs("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[m.jsxs("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[m.jsxs("div",{style:{padding:"0.5em 0"},children:[m.jsx("span",{style:{fontWeight:500,color:ai.gray[6]},children:j("publishDialog.itemName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{r(a.target.value,n)}})]}),m.jsx("span",{className:"error",children:e.error})]})]})},fBe=({onClose:e,libraryItems:t,appState:n,onSuccess:r,onError:i,updateItemsInStorage:s,onRemove:o})=>{let[a,l]=I.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[f,c]=I.useState(!1);I.useEffect(()=>{let E=Ch.get(j5.PUBLISH_LIBRARY);E&&l(E)},[]);let[d,u]=I.useState(t.slice());I.useEffect(()=>{u(t.slice())},[t]);let h=E=>{l({...a,[E.target.name]:E.target.value})},g=async E=>{E.preventDefault(),c(!0);let S=[],A=!1;if(d.forEach(_=>{let O="";_.name||(O=j("publishDialog.errors.required"),A=!0),S.push({..._,error:O})}),A){u(S),c(!1);return}let M=await lBe(d),C={type:ea.excalidrawLibrary,version:N7.excalidrawLibrary,source:yT,libraryItems:d},T=JSON.stringify(C,null,2),R=new Blob([T],{type:"application/json"}),P=new FormData;P.append("excalidrawLib",R),P.append("previewImage",M),P.append("previewImageType",M.type),P.append("title",a.name),P.append("authorName",a.authorName),P.append("githubHandle",a.githubHandle),P.append("name",a.name),P.append("description",a.description),P.append("twitterHandle",a.twitterHandle),P.append("website",a.website),fetch(`${vt.VITE_APP_LIBRARY_BACKEND}/submit`,{method:"post",body:P}).then(_=>_.ok?_.json().then(({url:O})=>{Ch.delete(j5.PUBLISH_LIBRARY),r({url:O,authorName:a.authorName,items:d})}):_.json().catch(()=>{throw new Error(_.statusText||"something went wrong")}).then(O=>{throw new Error(O.message||_.statusText||"something went wrong")}),_=>{console.error(_),i(_),c(!1)}).catch(_=>{console.error(_),i(_),c(!1)})},U=()=>{let E=[];return d.forEach((S,A)=>{E.push(m.jsx("div",{className:"single-library-item-wrapper",children:m.jsx(cBe,{libItem:S,appState:n,index:A,onChange:(M,C)=>{let T=d.slice();T[C].name=M,u(T)},onRemove:o})},A))}),m.jsx("div",{className:"selected-library-items",children:E})},y=I.useCallback(()=>{s(d),Ch.set(j5.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),x=!!t.length,w=t.some(E=>E.status==="published");return m.jsx(dl,{onCloseRequest:y,title:j("publishDialog.title"),className:"publish-library",children:x?m.jsxs("form",{onSubmit:g,children:[m.jsx("div",{className:"publish-library-note",children:m.jsx(Jl,{i18nKey:"publishDialog.noteDescription",link:E=>m.jsx("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:E})})}),m.jsx("span",{className:"publish-library-note",children:m.jsx(Jl,{i18nKey:"publishDialog.noteGuidelines",link:E=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:E})})}),m.jsx("div",{className:"publish-library-note",children:j("publishDialog.noteItems")}),w&&m.jsx("span",{className:"publish-library-note publish-library-warning",children:j("publishDialog.republishWarning")}),U(),m.jsxs("div",{className:"publish-library__fields",children:[m.jsxs("label",{children:[m.jsxs("div",{children:[m.jsx("span",{children:j("publishDialog.libraryName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:j("publishDialog.placeholder.libraryName")})]}),m.jsxs("label",{style:{alignItems:"flex-start"},children:[m.jsxs("div",{children:[m.jsx("span",{children:j("publishDialog.libraryDesc")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:j("publishDialog.placeholder.libraryDesc")})]}),m.jsxs("label",{children:[m.jsxs("div",{children:[m.jsx("span",{children:j("publishDialog.authorName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:j("publishDialog.placeholder.authorName")})]}),m.jsxs("label",{children:[m.jsx("span",{children:j("publishDialog.githubUsername")}),m.jsx("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:j("publishDialog.placeholder.githubHandle")})]}),m.jsxs("label",{children:[m.jsx("span",{children:j("publishDialog.twitterUsername")}),m.jsx("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:j("publishDialog.placeholder.twitterHandle")})]}),m.jsxs("label",{children:[m.jsx("span",{children:j("publishDialog.website")}),m.jsx("input",{type:"text",name:"website",pattern:"https?://.+",title:j("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:j("publishDialog.placeholder.website")})]}),m.jsx("span",{className:"publish-library-note",children:m.jsx(Jl,{i18nKey:"publishDialog.noteLicense",link:E=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:E})})})]}),m.jsxs("div",{className:"publish-library__buttons",children:[m.jsx(w6,{label:j("buttons.cancel"),onClick:y,"data-testid":"cancel-clear-canvas-button"}),m.jsx(w6,{type:"submit",label:j("buttons.submit"),actionType:"primary",isLoading:f})]})]}):m.jsx("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:j("publishDialog.atleastOneLibItem")})})},dBe=fBe,vne=({className:e="",children:t,onToggle:n,title:r,...i})=>{let s=Gr(),o=ze(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return m.jsx("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:r,...i,children:t})},uBe=vne;vne.displayName="DropdownMenuTrigger";var wne=()=>m.jsx("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}}),hBe=wne;wne.displayName="DropdownMenuSeparator";var Ene=({children:e,onClickOutside:t,className:n="",onSelect:r,style:i})=>{let s=Gr(),o=I.useRef(null),a=ux({onClickOutside:t});YI(o,()=>{var f;(f=a.onClickOutside)==null||f.call(a)}),I.useEffect(()=>{let f=d=>{var u;d.key===Q.ESCAPE&&(d.stopImmediatePropagation(),(u=a.onClickOutside)==null||u.call(a))},c={capture:!0};return document.addEventListener("keydown",f,c),()=>{document.removeEventListener("keydown",f,c)}},[a]);let l=ze(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return m.jsx(Jte.Provider,{value:{onSelect:r},children:m.jsx("div",{ref:o,className:l,style:i,"data-testid":"dropdown-menu",children:s.editor.isMobile?m.jsx(Yo.Col,{className:"dropdown-menu-container",children:e}):m.jsx(el,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};Ene.displayName="DropdownMenuContent";var pBe=Ene,Sne=({icon:e,shortcut:t,href:n,children:r,onSelect:i,className:s="",selected:o,rel:a="noreferrer",...l})=>{let f=tne(l.onClick,i);return m.jsx("a",{...l,href:n,target:"_blank",rel:"noreferrer",className:ene(s,o),title:l.title??l["aria-label"],onClick:f,children:m.jsx(nne,{icon:e,shortcut:t,children:r})})},g3=Sne;Sne.displayName="DropdownMenuItemLink";var mBe=({children:e,className:t="",selected:n,...r})=>m.jsx("div",{...r,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),gBe=mBe,bBe=e=>Te.Children.toArray(e).find(n=>Te.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger")||null,UBe=e=>Te.Children.toArray(e).find(n=>Te.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent")||null,Hf=({children:e,open:t})=>{let n=bBe(e),r=UBe(e);return m.jsxs(m.Fragment,{children:[n,t&&r]})};Hf.Trigger=uBe;Hf.Content=pBe;Hf.Item=aa;Hf.ItemLink=g3;Hf.ItemCustom=gBe;Hf.Group=wA;Hf.Separator=hBe;var _n=Hf;Hf.displayName="DropdownMenu";var yBe=(e,t)=>e.filter(n=>t.includes(n.id)),xBe=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:r,resetLibrary:i,onSelectItems:s,appState:o,className:a})=>{let[l]=ir(nb),[f,c]=ir(rN),d=()=>{let P=t.length?j("alerts.removeItemsFromsLibrary",{count:t.length}):j("alerts.resetLibrary"),_=t.length?j("confirmDialog.removeItemsFromLib"):j("confirmDialog.resetLibrary");return m.jsx(xne,{onConfirm:()=>{t.length?r():i(),h(!1)},onCancel:()=>{h(!1)},title:_,children:m.jsx("p",{children:P})})},[u,h]=I.useState(!1),g=!!t.length,U=g?l.libraryItems.filter(P=>t.includes(P.id)):l.libraryItems,y=j(g?"buttons.remove":"buttons.resetLibrary"),[x,w]=I.useState(!1),[E,S]=I.useState(null),A=I.useCallback(()=>m.jsxs(dl,{onCloseRequest:()=>S(null),title:j("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[m.jsx("p",{children:m.jsx(Jl,{i18nKey:"publishSuccessDialog.content",authorName:E.authorName,link:P=>m.jsx("a",{href:E==null?void 0:E.url,target:"_blank",rel:"noopener noreferrer",children:P})})}),m.jsx(jt,{type:"button",title:j("buttons.close"),"aria-label":j("buttons.close"),label:j("buttons.close"),onClick:()=>S(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[S,E]),M=(P,_)=>{w(!1),S({url:P.url,authorName:P.authorName});let O=_.slice();O.forEach(F=>{t.includes(F.id)&&(F.status="published")}),n.setLibrary(O)},C=async()=>{try{await n.updateLibrary({libraryItems:ZT({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(P){if((P==null?void 0:P.name)==="AbortError"){console.warn(P);return}e({errorMessage:j("errors.importLibraryError")})}},T=async()=>{let P=g?U:await n.getLatestLibrary();OIe(P).catch(FZ).catch(_=>{e({errorMessage:_.message})})},R=()=>m.jsxs(_n,{open:f,children:[m.jsx(_n.Trigger,{onToggle:()=>c(!f),children:Xve}),m.jsxs(_n.Content,{onClickOutside:()=>c(!1),onSelect:()=>c(!1),className:"library-menu",children:[!g&&m.jsx(_n.Item,{onSelect:C,icon:PT,"data-testid":"lib-dropdown--load",children:j("buttons.load")}),!!U.length&&m.jsx(_n.Item,{onSelect:T,icon:L7,"data-testid":"lib-dropdown--export",children:j("buttons.export")}),!!U.length&&m.jsx(_n.Item,{onSelect:()=>h(!0),icon:Yh,children:y}),g&&m.jsx(_n.Item,{icon:rEe,onSelect:()=>w(!0),"data-testid":"lib-dropdown--remove",children:j("buttons.publishLibrary")})]})]});return m.jsxs("div",{className:ze("library-menu-dropdown-container",a),children:[R(),t.length>0&&m.jsx("div",{className:"library-actions-counter",children:t.length}),u&&d(),x&&m.jsx(dBe,{onClose:()=>w(!1),libraryItems:yBe(l.libraryItems,t),appState:o,onSuccess:P=>M(P,l.libraryItems),onError:P=>window.alert(P),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:P=>s(t.filter(_=>_!==P))}),E&&A()]})},uz=({selectedItems:e,onSelectItems:t,className:n})=>{let{library:r}=yc(),{clearLibraryCache:i,deleteItemsFromLibraryCache:s}=bne(),o=bs(),a=Xr(),[l]=ir(nb),f=async c=>{let d=c.filter(u=>!e.includes(u.id));r.setLibrary(d).catch(()=>{a({errorMessage:j("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return m.jsx(xBe,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:r,onRemoveFromLibrary:()=>f(l.libraryItems),resetLibrary:()=>{r.resetLibrary(),i()},className:n})},vBe=I.memo(({id:e,elements:t,isPending:n,onClick:r,selected:i,onToggle:s,onDrag:o,svgCache:a})=>{let l=I.useRef(null),f=zje(e,t,a);I.useEffect(()=>{let g=l.current;if(g)return f&&(g.innerHTML=f.outerHTML),()=>{g.innerHTML=""}},[f]);let[c,d]=I.useState(!1),u=Gr().editor.isMobile,h=n&&m.jsx("div",{className:"library-unit__adder",children:Gve});return m.jsxs("div",{className:ze("library-unit",{"library-unit__active":t,"library-unit--hover":t&&c,"library-unit--selected":i,"library-unit--skeleton":!f}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[m.jsx("div",{className:ze("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?g=>{e&&g.shiftKey?s(e,g):r(e)}:void 0,onDragStart:g=>{if(!e){g.preventDefault();return}d(!1),o(e,g)}}),h,e&&t&&(c||u||i)&&m.jsx(eN,{checked:i,onChange:(g,U)=>s(e,U),className:"library-unit__checkbox"})]})}),wBe=()=>m.jsx("div",{className:"library-unit library-unit--skeleton"});function EBe(){return[!1,I.useCallback(e=>e(),[])]}var SBe=Te.useTransition||EBe,hz=({children:e})=>m.jsx("div",{className:"library-menu-items-container__grid",children:e}),SS=I.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:r,onClick:i,svgCache:s,itemsRenderedPerBatch:o})=>{let[,a]=SBe(),[l,f]=I.useState(0);return I.useEffect(()=>{l<e.length&&a(()=>{f(l+o)})},[l,e.length,a,o]),m.jsx(m.Fragment,{children:e.map((c,d)=>d<l?m.jsx(vBe,{elements:c==null?void 0:c.elements,isPending:!(c!=null&&c.id)&&!!(c!=null&&c.elements),onClick:i,svgCache:s,id:c==null?void 0:c.id,selected:r(c.id),onToggle:t,onDrag:n},(c==null?void 0:c.id)??d):m.jsx(wBe,{},d))})}),kBe=di(0),CBe=e=>{let[t,n]=ir(kBe);return I.useEffect(()=>{let{current:r}=e;if(!r)return;let i=jb(()=>{let{scrollTop:s}=r;n(s)},200);return r.addEventListener("scroll",i),()=>{i.cancel(),r.removeEventListener("scroll",i)}},[e,n]),t},ABe=17,MBe=64;function TBe({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:r,pendingElements:i,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:f}){let c=I.useRef(null),d=CBe(c);I.useEffect(()=>{var P;d>0&&((P=c.current)==null||P.scrollTo(0,d))},[]);let{svgCache:u}=bne(),h=I.useMemo(()=>t.filter(P=>P.status!=="published"),[t]),g=I.useMemo(()=>t.filter(P=>P.status==="published"),[t]),U=!t.length&&!i.length,y=!i.length&&!h.length&&!g.length,[x,w]=I.useState(null),E=I.useCallback((P,_)=>{let O=!f.includes(P),F=[...h,...g];if(O){if(_.shiftKey&&x){let B=F.findIndex(G=>G.id===x),$=F.findIndex(G=>G.id===P);if(B===-1||$===-1){l([...f,P]);return}let z=ct(f),H=F.reduce((G,V,Y)=>((Y>=B&&Y<=$||z.has(V.id))&&G.push(V.id),G),[]);l(H)}else l([...f,P]);w(P)}else w(null),l(f.filter(B=>B!==P))},[x,l,g,f,h]),S=I.useCallback(P=>{let _;return f.includes(P)?_=t.filter(O=>f.includes(O.id)):_=t.filter(O=>O.id===P),_.map(O=>({...O,elements:wQ(O.elements,{randomizeSeed:!0})}))},[t,f]),A=I.useCallback((P,_)=>{_.dataTransfer.setData(it.excalidrawlib,MQ(S(P)))},[S]),M=I.useCallback(P=>P?f.includes(P):!1,[f]),C=I.useCallback(()=>{n(i)},[i,n]),T=I.useCallback(P=>{P&&r(S(P))},[S,r]),R=u.size>=t.length?MBe:ABe;return m.jsxs("div",{className:"library-menu-items-container",style:i.length||h.length||g.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!y&&m.jsx(uz,{selectedItems:f,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),m.jsxs(Yo.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:g.length>0?1:"0 1 auto",marginBottom:0},ref:c,children:[m.jsxs(m.Fragment,{children:[!y&&m.jsx("div",{className:"library-menu-items-container__header",children:j("labels.personalLib")}),e&&m.jsx("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:m.jsx(Lf,{})}),!i.length&&!h.length?m.jsxs("div",{className:"library-menu-items__no-items",children:[m.jsx("div",{className:"library-menu-items__no-items__label",children:j("library.noItems")}),m.jsx("div",{className:"library-menu-items__no-items__hint",children:g.length>0?j("library.hint_emptyPrivateLibrary"):j("library.hint_emptyLibrary")})]}):m.jsxs(hz,{children:[i.length>0&&m.jsx(SS,{itemsRenderedPerBatch:R,items:[{id:null,elements:i}],onItemSelectToggle:E,onItemDrag:A,onClick:C,isItemSelected:M,svgCache:u}),m.jsx(SS,{itemsRenderedPerBatch:R,items:h,onItemSelectToggle:E,onItemDrag:A,onClick:T,isItemSelected:M,svgCache:u})]})]}),m.jsxs(m.Fragment,{children:[(g.length>0||i.length>0||h.length>0)&&m.jsx("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:j("labels.excalidrawLib")}),g.length>0?m.jsx(hz,{children:m.jsx(SS,{itemsRenderedPerBatch:R,items:g,onItemSelectToggle:E,onItemDrag:A,onClick:T,isItemSelected:M,svgCache:u})}):h.length>0?m.jsx("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:j("library.noItems")}):null]}),U&&m.jsx(yne,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:m.jsx(uz,{selectedItems:f,onSelectItems:l})})]})]})}var rN=di(!1),pz=({children:e})=>m.jsx("div",{className:"layer-ui__library",children:e}),IBe=I.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:r,libraryReturnUrl:i,library:s,id:o,theme:a,selectedItems:l,onSelectItems:f})=>{let[c]=ir(nb),d=I.useCallback(g=>{(async(U,y)=>{xn("element","addToLibrary","ui");for(let w of NZ)if(U.some(E=>E.type===w))return r({errorMessage:j(`errors.libraryElementTypeError.${w}`)});let x=[{status:"unpublished",elements:U,id:oa(),created:Date.now()},...y];n(),s.setLibrary(x).catch(()=>{r({errorMessage:j("alerts.errorAddingToLibrary")})})})(g,c.libraryItems)},[n,s,r,c.libraryItems]),u=I.useMemo(()=>c.libraryItems,[c]);if(c.status==="loading"&&!c.isInitialized)return m.jsx(pz,{children:m.jsx("div",{className:"layer-ui__library-message",children:m.jsxs("div",{children:[m.jsx(Lf,{size:"2em"}),m.jsx("span",{children:j("labels.libraryLoadingMessage")})]})})});let h=c.libraryItems.length>0||t.length>0;return m.jsxs(pz,{children:[m.jsx(TBe,{isLoading:c.status==="loading",libraryItems:u,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:i,theme:a,onSelectItems:f,selectedItems:l}),h&&m.jsx(yne,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:i,theme:a})]})}),kS=(e,t)=>({elements:e,pending:wt(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),NBe=(e,t)=>{let n=xx(),[r,i]=I.useState(()=>kS(n,e.selectedElementIds)),s=I.useRef(new Map);return I.useEffect(()=>{for(let o of r.pending)s.current.set(o.id,o.version)},[r.pending]),I.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&i(o=>{var l;if(!Si(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),kS(n,e.selectedElementIds);let a=t.scene.getNonDeletedElementsMap();for(let f of Object.keys(e.selectedElementIds)){let c=(l=a.get(f))==null?void 0:l.version;if(c&&c!==s.current.get(f))return kS(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),r.pending},RBe=I.memo(()=>{let e=yc(),{onInsertElements:t}=e,n=e8(),r=bs(),i=Xr(),[s,o]=I.useState([]),a=I.useMemo(()=>e.library,[e.library]),l=NBe(r,e),f=I.useCallback(d=>{t(Une(d))},[t]),c=I.useCallback(()=>{i({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[i]);return m.jsx(IBe,{pendingElements:l,onInsertLibraryItems:f,onAddToLibrary:c,setAppState:i,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:r.theme,selectedItems:s,onSelectItems:o})});function _Be(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}var dl=e=>{let[t,n]=Fje(),[r]=I.useState(document.activeElement),{id:i}=xc(),s=Gr().viewport.isMobile;I.useEffect(()=>{if(!t)return;let f=RC(t);setTimeout(()=>{f.length>0&&e.autofocus!==!1&&(f[1]||f[0]).focus()});let c=d=>{if(d.key===Q.TAB){let u=RC(t),{activeElement:h}=document,g=u.findIndex(U=>U===h);g===0&&d.shiftKey?(u[u.length-1].focus(),d.preventDefault()):g===u.length-1&&!d.shiftKey&&(u[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",c),()=>t.removeEventListener("keydown",c)},[t,e.autofocus]);let o=Xr(),a=fx(rN),l=()=>{o({openMenu:null}),a(!1),r.focus(),e.onCloseRequest()};return m.jsx($je,{className:ze("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:_Be(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:m.jsxs(el,{ref:n,children:[e.title&&m.jsx("h2",{id:`${i}-dialog-title`,className:"Dialog__title",children:m.jsx("span",{className:"Dialog__titleContent",children:e.title})}),s&&m.jsx("button",{className:"Dialog__close",onClick:l,title:j("buttons.close"),"aria-label":j("buttons.close"),type:"button",children:R6}),m.jsx("div",{className:"Dialog__content",children:e.children})]})})},E6=({type:e="button",onSelect:t,selected:n,children:r,className:i="",...s})=>m.jsx("button",{onClick:_7(s.onClick,o=>{t()}),type:e,className:ze("excalidraw-button",i,{selected:n}),...s,children:r}),iN=I.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:r,readonly:i,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:f,...c},d)=>{let u=I.useRef(null);I.useImperativeHandle(d,()=>u.current),I.useLayoutEffect(()=>{var U,y;s&&((U=u.current)==null||U.focus(),(y=u.current)==null||y.select())},[s]);let[h,g]=I.useState(!1);return m.jsxs("div",{className:ze("ExcTextField",f,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var U;(U=u.current)==null||U.focus()},children:[l,t&&m.jsx("div",{className:"ExcTextField__label",children:t}),m.jsxs("div",{className:ze("ExcTextField__input",{"ExcTextField__input--readonly":i}),children:[m.jsx("input",{className:ze({"is-redacted":"value"in c&&c.value&&a&&!h}),readOnly:i,value:"value"in c?c.value:void 0,defaultValue:"defaultValue"in c?c.defaultValue:void 0,placeholder:r,ref:u,onChange:U=>e==null?void 0:e(U.target.value),onKeyDown:o}),a&&m.jsx(E6,{onSelect:()=>g(!h),style:{border:0,userSelect:"none"},children:h?dEe:LT})]})]})}),PBe={toggleTheme:[Ue("Shift+Alt+D")],saveScene:[Ue("CtrlOrCmd+S")],loadScene:[Ue("CtrlOrCmd+O")],clearCanvas:[Ue("CtrlOrCmd+Delete")],imageExport:[Ue("CtrlOrCmd+Shift+E")],commandPalette:[Ue("CtrlOrCmd+/"),Ue("CtrlOrCmd+Shift+P")],cut:[Ue("CtrlOrCmd+X")],copy:[Ue("CtrlOrCmd+C")],paste:[Ue("CtrlOrCmd+V")],copyStyles:[Ue("CtrlOrCmd+Alt+C")],pasteStyles:[Ue("CtrlOrCmd+Alt+V")],selectAll:[Ue("CtrlOrCmd+A")],deleteSelectedElements:[Ue("Delete")],duplicateSelection:[Ue("CtrlOrCmd+D"),Ue(`Alt+${j("helpDialog.drag")}`)],sendBackward:[Ue("CtrlOrCmd+[")],bringForward:[Ue("CtrlOrCmd+]")],sendToBack:[Ue(ac?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Ue(ac?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Ue("Shift+Alt+C")],group:[Ue("CtrlOrCmd+G")],ungroup:[Ue("CtrlOrCmd+Shift+G")],gridMode:[Ue("CtrlOrCmd+'")],zenMode:[Ue("Alt+Z")],objectsSnapMode:[Ue("Alt+S")],stats:[Ue("Alt+/")],addToLibrary:[],flipHorizontal:[Ue("Shift+H")],flipVertical:[Ue("Shift+V")],viewMode:[Ue("Alt+R")],hyperlink:[Ue("CtrlOrCmd+K")],toggleElementLock:[Ue("CtrlOrCmd+Shift+L")],resetZoom:[Ue("CtrlOrCmd+0")],zoomOut:[Ue("CtrlOrCmd+-")],zoomIn:[Ue("CtrlOrCmd++")],zoomToFitSelection:[Ue("Shift+3")],zoomToFit:[Ue("Shift+1")],zoomToFitSelectionInViewport:[Ue("Shift+2")],toggleEraserTool:[Ue("E")],toggleHandTool:[Ue("H")],setFrameAsActiveTool:[Ue("F")],saveFileToDisk:[Ue("CtrlOrCmd+S")],saveToActiveFile:[Ue("CtrlOrCmd+S")],toggleShortcuts:[Ue("?")],searchMenu:[Ue("CtrlOrCmd+F")],wrapSelectionInFrame:[]},Vi=(e,t=0)=>{let n=PBe[e];return n&&n.length>0?n[t]||n[0]:""},DBe="\\u0300-\\u036f",LBe="\\ufe20-\\ufe2f",OBe="\\u20d0-\\u20ff",jBe=DBe+LBe+OBe,BBe=`[${jBe}]`,FBe=RegExp(BBe,"g"),$Be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zBe={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"E",:"e",:"T",:"t",:"s",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"I",:"i",:"E",:"e",:"n",:"s"},mz=e=>e.replace($Be,t=>zBe[t]||t).replace(FBe,""),kne=Te.createContext(null),yo=()=>Te.useContext(kne),HBe=pee(),VBe=()=>Te.useMemo(()=>({MainMenuTunnel:kl(),WelcomeScreenMenuHintTunnel:kl(),WelcomeScreenToolbarHintTunnel:kl(),WelcomeScreenHelpHintTunnel:kl(),WelcomeScreenCenterTunnel:kl(),FooterCenterTunnel:kl(),DefaultSidebarTriggerTunnel:kl(),DefaultSidebarTabTriggersTunnel:kl(),OverwriteConfirmDialogTunnel:kl(),TTDDialogTriggerTunnel:kl(),tunnelsJotai:HBe}),[]),Cne=(e,t)=>{var r;let n=((r=t[0])==null?void 0:r.type)||null;for(let i of t)if(i.type!==n){n=null;break}return zC(e.activeTool.type)&&e.activeTool.type!=="image"&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(i=>zC(i.type))},Ane=(e,t)=>u6(e.activeTool.type)||t.some(n=>u6(n.type)),Mne=({appState:e,elementsMap:t,renderAction:n,app:r})=>{let i=iJ(t,e),s=!1;i.length===2&&(sa(i[0])||sa(i[1]))&&(s=!0);let o=!!(e.editingTextElement||e.newElement),a=Gr(),l=document.documentElement.getAttribute("dir")==="rtl",f=u6(e.activeTool.type)&&!Xa(e.currentItemBackgroundColor)||i.some(g=>u6(g.type)&&!Xa(g.backgroundColor)),c=i.length===1||s,d=!e.editingLinearElement&&i.length===1&&mt(i[0])&&!Fe(i[0]),u=!e.croppingElementId&&i.length===1&&Zt(i[0]),h=!s&&Uo(e,r);return m.jsxs("div",{className:"panelColumn",children:[m.jsx("div",{children:Cne(e,i)&&n("changeStrokeColor")}),Ane(e,i)&&m.jsx("div",{children:n("changeBackgroundColor")}),f&&n("changeFillStyle"),(XB(e.activeTool.type)||i.some(g=>XB(g.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||i.some(g=>g.type==="freedraw"))&&n("changeStrokeShape"),(KB(e.activeTool.type)||i.some(g=>KB(g.type)))&&m.jsxs(m.Fragment,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(HC(e.activeTool.type)||i.some(g=>HC(g.type)))&&m.jsx(m.Fragment,{children:n("changeRoundness")}),(YB(e.activeTool.type)||i.some(g=>YB(g.type)))&&m.jsx(m.Fragment,{children:n("changeArrowType")}),(e.activeTool.type==="text"||i.some(je))&&m.jsxs(m.Fragment,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||sIe(i,t))&&n("changeTextAlign")]}),iIe(i,t)&&n("changeVerticalAlign"),(e9(e.activeTool.type)||i.some(g=>e9(g.type)))&&m.jsx(m.Fragment,{children:n("changeArrowhead")}),n("changeOpacity"),m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.layers")}),m.jsxs("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.align")}),m.jsxs("div",{className:"buttonList",children:[l?m.jsxs(m.Fragment,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):m.jsxs(m.Fragment,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),i.length>2&&n("distributeHorizontally"),m.jsx("div",{style:{flexBasis:"100%",height:0}}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),i.length>2&&n("distributeVertically")]})]})]}),!o&&i.length>0&&m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.actions")}),m.jsxs("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),c&&n("hyperlink"),u&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},Tne=({activeTool:e,appState:t,app:n,UIOptions:r})=>{let[i,s]=I.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="embeddable",{TTDDialogTriggerTunnel:f}=yo();return m.jsxs(m.Fragment,{children:[FT.map(({value:c,icon:d,key:u,numericKey:h,fillable:g},U)=>{var E;if(((E=r.tools)==null?void 0:E[c])===!1)return null;let y=j(`toolBar.${c}`),x=u&&$5(typeof u=="string"?u:u[0]),w=x?`${x} ${j("helpDialog.or")} ${h}`:`${h}`;return m.jsx(jt,{className:ze("Shape",{fillable:g}),type:"radio",icon:d,checked:e.type===c,name:"editor-current-shape",title:`${$5(y)}  ${w}`,keyBindingLabel:h||x,"aria-label":$5(y),"aria-keyshortcuts":w,"data-testid":`toolbar-${c}`,onPointerDown:({pointerType:S})=>{!t.penDetected&&S==="pen"&&n.togglePenMode(!0)},onChange:({pointerType:S})=>{t.activeTool.type!==c&&xn("toolbar",c,"ui"),c==="image"?n.setActiveTool({type:c,insertOnCanvasDirectly:S!=="mouse"}):n.setActiveTool({type:c})}},c)}),m.jsx("div",{className:"App-toolbar__divider"}),m.jsxs(_n,{open:i,children:[m.jsx(_n.Trigger,{className:ze("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!i),title:j("toolBar.extraTools"),children:cEe}),m.jsxs(_n.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[m.jsx(_n.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:fq,shortcut:Q.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:j("toolBar.frame")}),m.jsx(_n.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:lwe,"data-testid":"toolbar-embeddable",selected:l,children:j("toolBar.embeddable")}),m.jsx(_n.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:uq,"data-testid":"toolbar-laser",selected:a,shortcut:Q.K.toLocaleUpperCase(),children:j("toolBar.laser")}),m.jsx("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&m.jsx(f.Out,{}),m.jsx(_n.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:dq,"data-testid":"toolbar-embeddable",children:j("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&m.jsx(m.Fragment,{children:m.jsxs(_n.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:hq,"data-testid":"toolbar-magicframe",children:[j("toolBar.magicframe"),m.jsx(_n.Item.Badge,{children:"AI"})]})})]})]})]})},WBe=({renderAction:e,zoom:t})=>m.jsx(Yo.Col,{gap:1,className:i6.ZOOM_ACTIONS,children:m.jsxs(Yo.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),GBe=({renderAction:e,className:t})=>m.jsxs("div",{className:`undo-redo-buttons ${t}`,children:[m.jsx("div",{className:"undo-button-container",children:m.jsx(n1,{label:j("buttons.undo"),children:e("undo")})}),m.jsx("div",{className:"redo-button-container",children:m.jsxs(n1,{label:j("buttons.redo"),children:[" ",e("redo")]})})]}),XBe=({actionManager:e,showExitZenModeBtn:t})=>m.jsx("button",{type:"button",className:ze("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(SA),children:j("buttons.exitZenMode")}),KBe=({renderAction:e,className:t})=>m.jsx("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),gz=e=>{let t=I.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},yx=di(null),YBe=()=>{let[e,t]=ir(yx),n=Gs();return e&&e==="clearCanvas"?m.jsx(xne,{onConfirm:()=>{n.executeAction(Y5),t(null)},onCancel:()=>t(null),title:j("clearCanvasDialog.title"),children:m.jsxs("p",{className:"clear-canvas__content",children:[" ",j("alerts.clearReset")]})}):null},Ine={};CY(Ine,{toggleTheme:()=>ZBe});var ZBe={...w9,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(w9,"commandPalette")}},Nne=_e({name:"copyElementLink",label:"labels.copyElementLink",icon:DT,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=wt(e,t);try{if(window.location){let s=LQ(i,t);return s?(await Kb(r.props.generateLinkForSelection?r.props.generateLinkForSelection(s.id,s.type):DQ(s.id,s.type)),{appState:{toast:{message:j("toast.elementLinkCopied"),closable:!0}},captureUpdate:me.EVENTUALLY}):{appState:t,elements:e,app:r,captureUpdate:me.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:r,captureUpdate:me.EVENTUALLY}},predicate:(e,t)=>c9(wt(e,t))}),qBe=_e({name:"linkToElement",label:"labels.linkToElement",icon:bq,perform:(e,t,n,r)=>{let i=wt(e,t);return i.length!==1||!c9(i)?{elements:e,appState:t,app:r,captureUpdate:me.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:wt(e,t)[0].id}},captureUpdate:me.IMMEDIATELY}},predicate:(e,t,n,r)=>{var s;let i=wt(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&i.length===1&&c9(i)},trackEvent:!1}),QBe=di(null),dr={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},JBe=e=>{switch(e){case dr.app:return 1;case dr.export:return 2;case dr.editor:return 3;case dr.tools:return 4;case dr.elements:return 5;case dr.links:return 6;default:return 10}},b3=({shortcut:e,className:t,children:n})=>{let r=e.replace("++","+$").split("+");return m.jsxs("div",{className:ze("shortcut",t),children:[r.map((i,s)=>m.jsx("div",{className:"shortcut-wrapper",children:m.jsx("div",{className:"shortcut-key",children:i==="$"?"+":i})},i)),m.jsx("div",{className:"shortcut-desc",children:n})]})},Rne=e=>!e.altKey&&e[Q.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===Q.P||e.key===Q.SLASH);Object.assign(e=>{var r;let t=bs(),n=Xr();return I.useEffect(()=>{let i=s=>{Rne(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;let a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&xn("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener("keydown",i,{capture:!0}),()=>window.removeEventListener("keydown",i,{capture:!0})},[n]),((r=t.openDialog)==null?void 0:r.name)!=="commandPalette"?null:m.jsx(eFe,{...e})},{defaultItems:Ine});function eFe({customCommandPaletteItems:e}){let t=yc(),n=bs(),r=Xr(),i=e8(),s=Gs(),[o,a]=ir(QBe),[l,f]=I.useState(null),c=I.useRef(null),d=ux({uiAppState:n,customCommandPaletteItems:e,appProps:i});I.useEffect(()=>{let{uiAppState:M,customCommandPaletteItems:C,appProps:T}=d,R=F=>{let B="";return F.label&&(typeof F.label=="function"?B=j(F.label(t.scene.getNonDeletedElements(),M,t)):B=j(F.label)),B},P=F=>typeof F.icon=="function"?F.icon(M,t.scene.getNonDeletedElements()):F.icon,_=[],O=(F,B,$)=>{let z={label:R(F),icon:P(F),category:B,shortcut:Vi(F.name),keywords:F.keywords,predicate:F.predicate,viewMode:F.viewMode,perform:()=>{s.executeAction(F,"commandPalette")}};return $?$(z,F):z};if(M&&t.scene&&s){let F=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,mne,Nne,qBe].map(V=>O(V,dr.elements,(Y,K)=>({...Y,predicate:K.predicate?K.predicate:(q,se,de,xe)=>wt(q,se).length>0}))),B=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool].map(V=>O(V,dr.tools)),$=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(V=>O(V,dr.editor)),z=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(V=>O(V,dr.export));_=[...F,...$,{label:R(Y5),icon:P(Y5),shortcut:Vi(Y5.name),category:dr.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Ya.set(yx,"clearCanvas")}},{label:j("buttons.exportImage"),category:dr.export,icon:rq,shortcut:Vi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{r({openDialog:{name:"imageExport"}})}},...z];let H=[{label:j("toolBar.library"),category:dr.app,icon:NT,viewMode:!1,perform:()=>{M.openSidebar?r({openSidebar:null}):r({openSidebar:{name:qa.name,tab:qa.defaultTab}})}},{label:j("search.title"),category:dr.app,icon:Zh,viewMode:!0,perform:()=>{s.executeAction(_ne)}},{label:j("labels.changeStroke"),keywords:["color","outline"],category:dr.elements,icon:XE,viewMode:!1,predicate:(V,Y)=>{let K=wt(V,Y);return K.length>0&&Cne(Y,K)},perform:()=>{r(V=>({openMenu:V.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:j("labels.changeBackground"),keywords:["color","fill"],icon:XE,category:dr.elements,viewMode:!1,predicate:(V,Y)=>{let K=wt(V,Y);return K.length>0&&Ane(Y,K)},perform:()=>{r(V=>({openMenu:V.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:j("labels.canvasBackground"),keywords:["color"],icon:XE,category:dr.editor,viewMode:!1,perform:()=>{r(V=>({openMenu:V.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...FT.reduce((V,Y)=>{var ue;let{value:K,icon:q,key:se,numericKey:de}=Y;if(((ue=T.UIOptions.tools)==null?void 0:ue[K])===!1)return V;let xe=se&&$5(typeof se=="string"?se:se[0])||de,ve={label:j(`toolBar.${K}`),category:dr.tools,shortcut:xe,icon:q,keywords:["toolbar"],viewMode:!1,perform:({event:te})=>{K==="image"?t.setActiveTool({type:K,insertOnCanvasDirectly:te.type==="keydown"}):t.setActiveTool({type:K})}};return V.push(ve),V},[]),...B,{label:j("toolBar.lock"),category:dr.tools,icon:M.activeTool.locked?RT:D7,shortcut:Q.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${j("labels.textToDiagram")}...`,category:dr.tools,icon:uEe,viewMode:!1,predicate:T.aiEnabled,perform:()=>{r(V=>({...V,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${j("toolBar.mermaidToExcalidraw")}...`,category:dr.tools,icon:dq,viewMode:!1,predicate:T.aiEnabled,perform:()=>{r(V=>({...V,openDialog:{name:"ttd",tab:"mermaid"}}))}}],G=[..._,...H,...C||[]].map(V=>{var Y;return{...V,icon:V.icon||pq,order:V.order??JBe(V.category),haystack:`${mz(V.label.toLocaleLowerCase())} ${((Y=V.keywords)==null?void 0:Y.join(" "))||""}`}});f(G),a(G.find(V=>V.label===(o==null?void 0:o.label))??null)}},[d,t,s,f,o==null?void 0:o.label,a,r]);let[u,h]=I.useState(""),[g,U]=I.useState(null),[y,x]=I.useState({}),w=M=>{r({openDialog:null},M),h("")},E=(M,C)=>{var T;((T=n.openDialog)==null?void 0:T.name)==="commandPalette"&&(C.stopPropagation(),C.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),w(()=>{M.perform({actionManager:s,event:C}),a(M),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},S=gz(M=>M.viewMode===!1&&n.viewModeEnabled?!1:typeof M.predicate=="function"?M.predicate(t.scene.getNonDeletedElements(),n,i,t):M.predicate===void 0||M.predicate),A=gz(M=>{var P;let C=Eu(M.target)||Rne(M)||M.key===Q.ESCAPE;if(C&&M.key!==Q.ARROW_UP&&M.key!==Q.ARROW_DOWN&&M.key!==Q.ENTER)return;let T=Object.values(y).flat(),R=o&&!u&&S(o);if(M.key===Q.ARROW_UP){M.preventDefault();let _=T.findIndex(B=>B.label===(g==null?void 0:g.label));if(R){if(_===0){U(o);return}if(g===o){let B=T[T.length-1];B&&U(B);return}}let O;_===-1?O=T.length-1:O=_===0?T.length-1:(_-1)%T.length;let F=T[O];F&&U(F);return}if(M.key===Q.ARROW_DOWN){M.preventDefault();let _=T.findIndex(B=>B.label===(g==null?void 0:g.label));if(R){if(!g||_===T.length-1){U(o);return}if(g===o){let B=T[0];B&&U(B);return}}let O=(_+1)%T.length,F=T[O];F&&U(F);return}if(M.key===Q.ENTER&&g&&setTimeout(()=>{E(g,M)}),!C){if(M.stopPropagation(),/^[a-zA-Z0-9]$/.test(M.key)){(P=c==null?void 0:c.current)==null||P.focus();return}M.preventDefault()}});return I.useEffect(()=>(window.addEventListener("keydown",A,{capture:!0}),()=>window.removeEventListener("keydown",A,{capture:!0})),[A]),I.useEffect(()=>{if(!l)return;let M=P=>{let _={};for(let O of P)_[O.category]?_[O.category].push(O):_[O.category]=[O];return _},C=l.filter(S).sort((P,_)=>P.order-_.order),T=!u&&o&&S(o);if(!u){x(M(T?C.filter(P=>P.label!==(o==null?void 0:o.label)):C)),U(T?o:C[0]||null);return}let R=mz(u.toLocaleLowerCase().replace(/[<>_| -]/g,""));C=RDe.filter(R,C,{extract:P=>P.haystack}).sort((P,_)=>_.score-P.score).map(P=>P.original),x(M(C)),U(C[0]??null)},[u,l,S,o]),m.jsxs(dl,{onCloseRequest:()=>w(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[m.jsx(iN,{value:u,placeholder:j("commandPalette.search.placeholder"),onChange:M=>{h(M)},selectOnRender:!0,ref:c}),!t.device.viewport.isMobile&&m.jsxs("div",{className:"shortcuts-wrapper",children:[m.jsx(b3,{shortcut:"",children:j("commandPalette.shortcuts.select")}),m.jsx(b3,{shortcut:"",children:j("commandPalette.shortcuts.confirm")}),m.jsx(b3,{shortcut:Ue("Esc"),children:j("commandPalette.shortcuts.close")})]}),m.jsxs("div",{className:"commands",children:[o&&!u&&m.jsxs("div",{className:"command-category",children:[m.jsxs("div",{className:"command-category-title",children:[j("commandPalette.recents"),m.jsx("div",{className:"icon",style:{marginLeft:"6px"},children:hEe})]}),m.jsx(bz,{command:o,isSelected:o.label===(g==null?void 0:g.label),onClick:M=>E(o,M),disabled:!S(o),onMouseMove:()=>U(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(y).length>0?Object.keys(y).map((M,C)=>m.jsxs("div",{className:"command-category",children:[m.jsx("div",{className:"command-category-title",children:M}),y[M].map(T=>m.jsx(bz,{command:T,isSelected:T.label===(g==null?void 0:g.label),onClick:R=>E(T,R),onMouseMove:()=>U(T),showShortcut:!t.device.viewport.isMobile,appState:n},T.label))]},M)):l?m.jsxs("div",{className:"no-match",children:[m.jsx("div",{className:"icon",children:Zh})," ",j("commandPalette.search.noMatch")]}):null]})]})}var bz=({command:e,isSelected:t,disabled:n,onMouseMove:r,onClick:i,showShortcut:s,appState:o})=>{let a=()=>{};return m.jsxs("div",{className:ze("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var f;t&&!n&&((f=l==null?void 0:l.scrollIntoView)==null||f.call(l,{block:"nearest"}))},onClick:n?a:i,onMouseMove:n?a:r,title:n?j("commandPalette.itemNotAvailable"):"",children:[m.jsxs("div",{className:"name",children:[e.icon&&m.jsx(px,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&m.jsx(b3,{shortcut:e.shortcut})]})},tFe=_e({name:"toggleLinearEditor",category:dr.elements,label:(e,t,n)=>{var r;return((r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0])==null?void 0:r.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&i.length===1&&mt(i[0])&&!Fe(i[0]))},perform(e,t,n,r){var o;let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=((o=t.editingLinearElement)==null?void 0:o.elementId)===i.id?null:new Be(i);return{appState:{...t,editingLinearElement:s},captureUpdate:me.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{let r=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],i=j(r.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return m.jsx(jt,{type:"button",icon:AEe,title:i,"aria-label":i,onClick:()=>t(null)})}}),_ne=_e({name:"searchMenu",icon:Zh,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,r){var i,s;if(((i=t.openSidebar)==null?void 0:i.name)===qa.name&&t.openSidebar.tab===Vp){let o=(s=r.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${i6.SEARCH_MENU_INPUT_WRAPPER} input`);return o!=null&&o.matches(":focus")?{appState:{...t,openSidebar:null},captureUpdate:me.EVENTUALLY}:(o==null||o.focus(),o==null||o.select(),!1)}return{appState:{...t,openSidebar:{name:qa.name,tab:Vp},openDialog:null},captureUpdate:me.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.F}),nFe=_e({name:"cropEditor",label:"helpDialog.cropStart",icon:zB,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,r){let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:i.id},captureUpdate:me.IMMEDIATELY}},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!!(!t.croppingElementId&&i.length===1&&Zt(i[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{let r=j("helpDialog.cropStart");return m.jsx(jt,{type:"button",icon:zB,title:r,"aria-label":r,onClick:()=>t(null)})}}),E9=class{constructor(e=!0,t=!0){this.isUndoStackEmpty=e,this.isRedoStackEmpty=t}},Uz=class y5{constructor(){Z(this,"onHistoryChangedEmitter",new _l),Z(this,"undoStack",[]),Z(this,"redoStack",[])}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t,n){let r=rFe.create(n,t);r.isEmpty()||(this.undoStack.push(r.inverse()),r.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new E9(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,n,r){return this.perform(t,n,r,()=>y5.pop(this.undoStack),i=>y5.push(this.redoStack,i,t))}redo(t,n,r){return this.perform(t,n,r,()=>y5.pop(this.redoStack),i=>y5.push(this.undoStack,i,t))}perform(t,n,r,i,s){try{let o=i();if(o===null)return;let a=t,l=n,f=!1;for(;o;){try{[a,l,f]=o.applyTo(a,l,r)}finally{s(o)}if(f)break;o=i()}return[a,l]}finally{this.onHistoryChangedEmitter.trigger(new E9(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;let n=t.pop();return n!==void 0?n:null}static push(t,n,r){let i=n.inverse().applyLatestChanges(r);return t.push(i)}},rFe=class U3{constructor(t,n){this.appStateChange=t,this.elementsChange=n}static create(t,n){return new U3(t,n)}inverse(){return new U3(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(t,n,r){let[i,s]=this.elementsChange.applyTo(t,r.elements),[o,a]=this.appStateChange.applyTo(n,i);return[i,o,s||a]}applyLatestChanges(t){let n=this.elementsChange.applyLatestChanges(t);return U3.create(this.appStateChange,n)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}},Pne=(e,t)=>{let[n,r]=I.useState(t);return I.useEffect(()=>{let i=e.on(s=>{r(s)});return()=>{i()}},[e]),n},Dne=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){let r=n();if(!r)return{captureUpdate:me.EVENTUALLY};let[i,s]=r,o=Array.from(i.values());return{appState:s,elements:o,captureUpdate:me.NEVER}}return{captureUpdate:me.EVENTUALLY}},iFe=(e,t)=>({name:"undo",label:"buttons.undo",icon:AB,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,s)=>Dne(s,r,()=>e.undo(ct(n),r,t.snapshot)),keyTest:n=>n[Q.CTRL_OR_CMD]&&FC(n,Q.Z)&&!n.shiftKey,PanelComponent:({updateData:n,data:r})=>{let{isUndoStackEmpty:i}=Pne(e.onHistoryChangedEmitter,new E9(e.isUndoStackEmpty,e.isRedoStackEmpty));return m.jsx(jt,{type:"button",icon:AB,"aria-label":j("buttons.undo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-undo"})}}),sFe=(e,t)=>({name:"redo",label:"buttons.redo",icon:MB,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,s)=>Dne(s,r,()=>e.redo(ct(n),r,t.snapshot)),keyTest:n=>n[Q.CTRL_OR_CMD]&&n.shiftKey&&FC(n,Q.Z)||CZ&&n.ctrlKey&&!n.shiftKey&&FC(n,Q.Y),PanelComponent:({updateData:n,data:r})=>{let{isRedoStackEmpty:i}=Pne(e.onHistoryChangedEmitter,new E9(e.isUndoStackEmpty,e.isRedoStackEmpty));return m.jsx(jt,{type:"button",icon:MB,"aria-label":j("buttons.redo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-redo"})}}),CS=(e,t,n,r,i,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,r,s))&&xn(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${i.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}},oFe=class{constructor(e,t,n,r){Z(this,"actions",{}),Z(this,"updater"),Z(this,"getAppState"),Z(this,"getElementsIncludingDeleted"),Z(this,"app"),Z(this,"renderAction",(i,s)=>{let o=this.app.props.UIOptions.canvasActions;if(this.actions[i]&&"PanelComponent"in this.actions[i]&&(!(i in o)||o[i])){let a=this.actions[i],l=a.PanelComponent;l.displayName="PanelComponent";let f=this.getElementsIncludingDeleted(),c=this.getAppState(),d=u=>{CS(a,"ui",c,f,this.app,u),this.updater(a.perform(this.getElementsIncludingDeleted(),this.getAppState(),u,this.app))};return m.jsx(l,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:d,appProps:this.app.props,app:this.app,data:s})}return null}),Z(this,"isActionEnabled",i=>{let s=this.getElementsIncludingDeleted(),o=this.getAppState();return!i.predicate||i.predicate(s,o,this.app.props,this.app)}),this.updater=i=>{if(Hb(i))i.then(s=>e(s));else return e(i)},this.getAppState=t,this.getElementsIncludingDeleted=n,this.app=r}registerAction(e){this.actions[e.name]=e}registerAll(e){e.forEach(t=>this.registerAction(t))}handleKeyDown(e){let t=this.app.props.UIOptions.canvasActions,n=Object.values(this.actions).sort((a,l)=>(l.keyPriority||0)-(a.keyPriority||0)).filter(a=>(a.name in t?t[a.name]:!0)&&a.keyTest&&a.keyTest(e,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(n.length!==1)return n.length>1&&console.warn("Canceling as multiple actions match this shortcut",n),!1;let r=n[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;let i=this.getElementsIncludingDeleted(),s=this.getAppState();return CS(r,"keyboard",s,i,this.app,null),e.preventDefault(),e.stopPropagation(),this.updater(n[0].perform(i,s,null,this.app)),!0}executeAction(e,t="api",n=null){let r=this.getElementsIncludingDeleted(),i=this.getAppState();CS(e,t,i,r,this.app,n),this.updater(e.perform(r,i,n,this.app))}},yz=e=>{let t=Array.from(e.values());return{x:vz(t,n=>n.x)/t.length,y:vz(t,n=>n.y)/t.length}},xz=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),vz=(e,t)=>e.reduce((n,r)=>n+t(r),0),aFe=({children:e,left:t,top:n,onCloseRequest:r,fitInViewport:i=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{let f=I.useRef(null);I.useEffect(()=>{let d=f.current;if(!d)return;d.contains(document.activeElement)||d.focus();let u=h=>{var g,U,y;if(h.key===Q.TAB){let x=RC(d),{activeElement:w}=document,E=x.findIndex(S=>S===w);w===d?(h.shiftKey?(g=x[x.length-1])==null||g.focus():x[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):E===0&&h.shiftKey?((U=x[x.length-1])==null||U.focus(),h.preventDefault(),h.stopImmediatePropagation()):E===x.length-1&&!h.shiftKey&&((y=x[0])==null||y.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",u),()=>d.removeEventListener("keydown",u)},[]);let c=I.useRef(null);return I.useLayoutEffect(()=>{var d,u;if(i&&f.current&&n!=null&&t!=null){let h=f.current,{width:g,height:U}=h.getBoundingClientRect();if(((d=c.current)==null?void 0:d.top)===n&&((u=c.current)==null?void 0:u.left)===t)return;c.current={top:n,left:t},g>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+g-s>a?h.style.left=`${a-g-10}px`:h.style.left=`${t}px`,U>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+U-o>l?h.style.top=`${l-U}px`:h.style.top=`${n}px`}},[n,t,i,a,l,s,o]),I.useEffect(()=>{if(r){let d=u=>{var h;(h=f.current)!=null&&h.contains(u.target)||ri.unstable_batchedUpdates(()=>r(u))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[r]),m.jsx("div",{className:"popover",ref:f,tabIndex:-1,children:e})},Fr="separator",lFe=Te.memo(({actionManager:e,items:t,top:n,left:r,onClose:i})=>{let s=t8(),o=xx(),a=t.reduce((l,f)=>(f&&(f===Fr||!f.predicate||f.predicate(o,s,e.app.props,e.app))&&l.push(f),l),[]);return m.jsx(aFe,{onCloseRequest:()=>{i()},top:n,left:r,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:m.jsx("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,f)=>{var u;if(l===Fr)return!a[f-1]||a[f-1]===Fr?null:m.jsx("hr",{className:"context-menu-item-separator"},f);let c=l.name,d="";return l.label&&(typeof l.label=="function"?d=j(l.label(o,s,e.app)):d=j(l.label)),m.jsx("li",{"data-testid":c,onClick:()=>{i(()=>{e.executeAction(l,"contextMenu")})},children:m.jsxs("button",{type:"button",className:ze("context-menu-item",{dangerous:c==="deleteSelectedElements",checkmark:(u=l.checked)==null?void 0:u.call(l,s)}),children:[m.jsx("div",{className:"context-menu-item__label",children:d}),m.jsx("kbd",{className:"context-menu-item__shortcut",children:c?Vi(c):""})]})},f)})})})}),cFe=({children:e,onClose:t})=>{let[n,r]=I.useState(!!e),{container:i}=xc(),s=Te.useCallback(()=>{r(!1),t&&t(),i==null||i.focus()},[t,i]);return m.jsx(m.Fragment,{children:n&&m.jsx(dl,{size:"small",onCloseRequest:s,title:j("errorDialog.title"),children:m.jsx("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},Lne=function({onChange:e,value:t,choices:n,name:r}){return m.jsx("div",{className:"RadioGroup",children:n.map(i=>m.jsxs("div",{className:ze("RadioGroup__choice",{active:i.value===t}),title:i.ariaLabel,children:[m.jsx("input",{name:r,type:"radio",checked:i.value===t,onChange:()=>e(i.value),"aria-label":i.ariaLabel}),i.label]},String(i.value)))})},Uy=({title:e,name:t,checked:n,onChange:r,disabled:i=!1})=>m.jsx("div",{className:ze("Switch",{toggled:n,disabled:i}),children:m.jsx("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:i,onChange:()=>r(!n),onKeyDown:s=>{s.key===" "&&r(!n)}})}),q5=I.forwardRef(({children:e,icon:t,onClick:n,label:r,variant:i="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:f},c)=>{let[d,u]=I.useState(!1),h=async U=>{let y=n==null?void 0:n(U);if(Hb(y)){let x=window.setTimeout(()=>{u(!0)},50);try{await y}catch(w){if(w instanceof j7)console.warn(w);else throw w}finally{clearTimeout(x),u(!1)}}},g=d?"loading":f;return s=g==="success"?"success":s,m.jsx("button",{className:ze("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${i}`,`ExcButton--size-${o}`,`ExcButton--status-${g}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":r,ref:c,disabled:g==="loading"||g==="success",children:m.jsxs("div",{className:"ExcButton__contents",children:[g==="loading"?m.jsx(Lf,{className:"ExcButton__statusIcon"}):g==="success"&&m.jsx("div",{className:"ExcButton__statusIcon",children:oEe}),t&&m.jsx("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),i!=="icon"&&(e??r)]})})}),fFe=2e3,dFe=()=>{let[e,t]=I.useState(null),n=I.useRef(0),r=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},fFe)},i=I.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:i,onCopy:r}},uFe="filter"in document.createElement("canvas").getContext("2d"),hFe=()=>m.jsxs("div",{children:[m.jsx("h3",{children:j("canvasError.cannotShowPreview")}),m.jsx("p",{children:m.jsx("span",{children:j("canvasError.canvasTooBig")})}),m.jsxs("em",{children:["(",j("canvasError.canvasTooBigTip"),")"]})]}),pFe=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:r,onExportImage:i,name:s})=>{let o=Dr(t,e),[a,l]=I.useState(s),[f,c]=I.useState(o),[d,u]=I.useState(e.exportBackground),[h,g]=I.useState(e.exportWithDarkMode),[U,y]=I.useState(e.exportEmbedScene),[x,w]=I.useState(e.exportScale),E=I.useRef(null),[S,A]=I.useState(null),{onCopy:M,copyStatus:C,resetCopyStatus:T}=dFe();I.useEffect(()=>{T()},[a,d,h,x,U,T]);let{exportedElements:R,exportingFrame:P}=gx(t,e,f);return I.useEffect(()=>{let _=E.current;if(!_)return;let O=_.offsetWidth,F=_.offsetHeight;O&&pI({elements:R,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:x,exportEmbedScene:U},files:n,exportPadding:T6,maxWidthOrHeight:Math.max(O,F),exportingFrame:P}).then(B=>(A(null),J2(B).then(()=>{_.replaceChildren(B)}).catch($=>{throw $.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(j("canvasError.canvasTooBig")):$}))).catch(B=>{console.error(B),A(B)})},[e,n,R,P,a,d,h,x,U]),m.jsxs("div",{className:"ImageExportModal",children:[m.jsx("h3",{children:j("imageExportDialog.header")}),m.jsxs("div",{className:"ImageExportModal__preview",children:[m.jsx("div",{className:"ImageExportModal__preview__canvas",ref:E,children:S&&m.jsx(hFe,{})}),m.jsx("div",{className:"ImageExportModal__preview__filename",children:!c1&&m.jsx("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:_=>{l(_.target.value),r.executeAction(aje,"ui",_.target.value)}})})]}),m.jsxs("div",{className:"ImageExportModal__settings",children:[m.jsx("h3",{children:j("imageExportDialog.header")}),o&&m.jsx(Wg,{label:j("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:m.jsx(Uy,{name:"exportOnlySelected",checked:f,onChange:_=>{c(_)}})}),m.jsx(Wg,{label:j("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:m.jsx(Uy,{name:"exportBackgroundSwitch",checked:d,onChange:_=>{u(_),r.executeAction(cje,"ui",_)}})}),uFe&&m.jsx(Wg,{label:j("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:m.jsx(Uy,{name:"exportDarkModeSwitch",checked:h,onChange:_=>{g(_),r.executeAction(fje,"ui",_)}})}),m.jsx(Wg,{label:j("imageExportDialog.label.embedScene"),tooltip:j("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:m.jsx(Uy,{name:"exportEmbedSwitch",checked:U,onChange:_=>{y(_),r.executeAction(one,"ui",_)}})}),m.jsx(Wg,{label:j("imageExportDialog.label.scale"),name:"exportScale",children:m.jsx(Lne,{name:"exportScale",value:x,onChange:_=>{w(_),r.executeAction(lje,"ui",_)},choices:ET.map(_=>({value:_,label:`${_}`}))})}),m.jsxs("div",{className:"ImageExportModal__settings__buttons",children:[m.jsx(q5,{className:"ImageExportModal__settings__buttons__button",label:j("imageExportDialog.title.exportToPng"),onClick:()=>i(FE.png,R,{exportingFrame:P}),icon:$B,children:j("imageExportDialog.button.exportToPng")}),m.jsx(q5,{className:"ImageExportModal__settings__buttons__button",label:j("imageExportDialog.title.exportToSvg"),onClick:()=>i(FE.svg,R,{exportingFrame:P}),icon:$B,children:j("imageExportDialog.button.exportToSvg")}),(hI||j2)&&m.jsx(q5,{className:"ImageExportModal__settings__buttons__button",label:j("imageExportDialog.title.copyPngToClipboard"),status:C,onClick:async()=>{await i(FE.clipboard,R,{exportingFrame:P}),M()},icon:DT,children:j("imageExportDialog.button.copyPngToClipboard")})]})]})]})},Wg=({label:e,children:t,tooltip:n,name:r})=>m.jsxs("div",{className:"ImageExportModal__settings__setting",title:e,children:[m.jsxs("label",{htmlFor:r,className:"ImageExportModal__settings__setting__label",children:[e,n&&m.jsx(n1,{label:n,long:!0,children:sEe})]}),m.jsx("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),mFe=({elements:e,appState:t,files:n,actionManager:r,onExportImage:i,onCloseRequest:s,name:o})=>{let[{appStateSnapshot:a,elementsSnapshot:l}]=I.useState(()=>({appStateSnapshot:vf(t),elementsSnapshot:vf(e)}));return m.jsx(dl,{onCloseRequest:s,size:"wide",title:!1,children:m.jsx(pFe,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:r,onExportImage:i,name:o})})},One=({children:e,side:t,className:n})=>m.jsx("div",{className:ze("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),Yp=100,Zp=100,wz=e=>{switch(e){case Q.ARROW_UP:return"up";case Q.ARROW_DOWN:return"down";case Q.ARROW_RIGHT:return"right";case Q.ARROW_LEFT:return"left";default:return"right"}},jne=(e,t,n,r)=>{let i=[...n.values()].reduce((s,o)=>{var l;let a;if(Fe(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){let f=n.get(a.elementId);if(!f)return s;Gi(il(f),"not an ExcalidrawBindableElement");let c=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=Vq(t,Vl(t),[c[0]+o.x,c[1]+o.y]);s.push({relative:f,heading:d})}return s},[]);switch(r){case"up":return i.filter(s=>rr(s.heading,Os)).map(s=>s.relative);case"down":return i.filter(s=>rr(s.heading,si)).map(s=>s.relative);case"right":return i.filter(s=>rr(s.heading,tr)).map(s=>s.relative);case"left":return i.filter(s=>rr(s.heading,Ls)).map(s=>s.relative)}},TA=(e,t,n)=>jne("successors",e,t,n),IA=(e,t,n)=>jne("predecessors",e,t,n),gFe=(e,t,n)=>{let r=Zp+e.width;if(n==="up"||n==="down"){let a=Yp+e.height,l=e.x,f=e.x+e.width;if(t.every(c=>c.x+c.width<l||c.x>f))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){let a=e.y,l=e.y+e.height;if(t.every(f=>f.y+f.height<a||f.y>l))return{x:(Zp+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){let a=Yp+e.height,l=(t.length,a),f=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="up"?{x:f,y:l*-1}:{x:f,y:l}}let i=Yp+e.height,s=(t.length,Zp+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},bFe=(e,t,n,r)=>{let i=TA(e,t,r),s=IA(e,t,r),o=gFe(e,[...i,...s],r),a=dc({type:e.type,x:e.x+o.x,y:e.y+o.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Gi(P7(a),"not an ExcalidrawFlowchartNodeElement");let l=Bne(e,a,t,r,n);return{nextNode:a,bindingArrow:l}},UFe=(e,t,n,r,i)=>{let s=[];for(let o=0;o<i;o++){let a,l;if(r==="left"||r==="right"){let d=Yp*(i-1)+i*e.height,u=e.y+e.height/2-d/2,h=Zp+e.width;r==="left"&&(h*=-1),a=e.x+h;let g=(Yp+e.height)*o;l=u+g}else{let d=Zp*(i-1)+i*e.width,u=e.x+e.width/2-d/2,h=Yp+e.height;r==="up"&&(h*=-1),l=e.y+h;let g=(Zp+e.width)*o;a=u+g}let f=dc({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Gi(P7(f),"not an ExcalidrawFlowchartNodeElement");let c=Bne(e,f,t,r,n);s.push(f),s.push(c)}return s},Bne=(e,t,n,r,i)=>{let s,o;switch(r){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let a,l;switch(r){case"up":{a=t.x+t.width/2-s,l=t.y+t.height-o+6;break}case"down":{a=t.x+t.width/2-s,l=t.y-o-6;break}case"right":{a=t.x-s-6,l=t.y-o+t.height/2;break}case"left":{a=t.x+t.width-s+6,l=t.y-o+t.height/2;break}}let f=KT({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[D(0,0),D(a,l)],elbowed:!0});cc(f,e,"start",n),cc(f,t,"end",n);let c=new Map;c.set(e.id,e),c.set(t.id,t),c.set(f.id,f),Be.movePoints(f,[{index:1,point:f.points[1]}]);let d=iI(f,ra(new Map([...n.entries(),[e.id,e],[t.id,t],[f.id,f]])),{points:f.points});return{...f,...d}},yFe=class{constructor(){Z(this,"isExploring",!1),Z(this,"sameLevelNodes",[]),Z(this,"sameLevelIndex",0),Z(this,"direction",null),Z(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(e,t,n){if(!il(e))return null;if(n!==this.direction&&this.clear(),this.visitedNodes.has(e.id)||this.visitedNodes.add(e.id),this.isExploring&&n===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;let r=[...TA(e,t,n),...IA(e,t,n)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=n,this.visitedNodes.add(r[0].id),r[0].id;if(n===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(e.id);let i=["up","right","down","left"].filter(s=>s!==n).map(s=>[...TA(e,t,s),...IA(e,t,s)]).flat().filter(s=>!this.visitedNodes.has(s.id));for(let s of i)if(!this.visitedNodes.has(s.id))return this.visitedNodes.add(s.id),this.isExploring=!0,this.direction=n,s.id}return null}},xFe=class{constructor(){Z(this,"isCreatingChart",!1),Z(this,"numberOfNodes",0),Z(this,"direction","right"),Z(this,"pendingNodes",null)}createNodes(e,t,n,r){if(r!==this.direction){let{nextNode:i,bindingArrow:s}=bFe(e,t,n,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=r,this.pendingNodes=[i,s]}else{this.numberOfNodes+=1;let i=UFe(e,t,n,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=r,this.pendingNodes=i}if(e.frameId){let i=t.get(e.frameId);Gi(i&&GZ(i),"not an ExcalidrawFrameElement"),i&&this.pendingNodes.every(s=>Yb([s],i,t)||I0(s,i,t))&&(this.pendingNodes=this.pendingNodes.map(s=>ye(s,{frameId:e.frameId},!1)))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}},vFe=(e,t)=>{var n,r;for(let[,i]of t)if(i.type==="arrow"&&(((n=i.startBinding)==null?void 0:n.elementId)===e.id||((r=i.endBinding)==null?void 0:r.elementId)===e.id))return!0;return!1},wFe=({appState:e,isMobile:t,device:n,app:r})=>{var c,d;let{activeTool:i,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((c=e.openSidebar)==null?void 0:c.name)===qa.name&&e.openSidebar.tab===Vp&&((d=e.searchMatches)!=null&&d.length))return j("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(Rl(e))return j("hints.eraserRevert");if(i.type==="arrow"||i.type==="line")return l?j("hints.linearElementMulti"):i.type==="arrow"?j("hints.arrowTool",{arrowShortcut:Ue("A")}):j("hints.linearElement");if(i.type==="freedraw")return j("hints.freeDraw");if(i.type==="text")return j("hints.text");if(i.type==="embeddable")return j("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return j("hints.placeImage");let f=r.scene.getSelectedElements(e);if(s&&a==="mouse"&&f.length===1){let u=f[0];return mt(u)&&u.points.length===2?j("hints.lockAngle"):Zt(u)?j("hints.resizeImage"):j("hints.resize")}if(o&&a==="mouse")return j("hints.rotate");if(f.length===1&&je(f[0]))return j("hints.text_selected");if(e.editingTextElement)return j("hints.text_editing");if(e.croppingElementId)return j("hints.leaveCropEditor");if(f.length===1&&Zt(f[0]))return j("hints.enterCropEditor");if(i.type==="selection"){if(e.selectionElement&&!f.length&&!e.editingTextElement&&!e.editingLinearElement)return j("hints.deepBoxSelect");if(Y2(r)&&e.selectedElementsAreBeingDragged)return j("hints.disableSnapping");if(!f.length&&!t)return j("hints.canvasPanning");if(f.length===1){if(mt(f[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?j("hints.lineEditor_pointSelected"):j("hints.lineEditor_nothingSelected"):j("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&wh(f[0]))return P7(f[0])?vFe(f[0],r.scene.getNonDeletedElementsMap())?[j("hints.bindTextToElement"),j("hints.createFlowchart")]:[j("hints.bindTextToElement"),j("hints.createFlowchart")]:j("hints.bindTextToElement")}}return null},Fne=({appState:e,isMobile:t,device:n,app:r})=>{let i=wFe({appState:e,isMobile:t,device:n,app:r});if(!i)return null;let s=Array.isArray(i)?i.map(o=>Ue(o).replace(/\. ?$/,"")).join(". "):Ue(i);return m.jsx("div",{className:"HintViewer",children:m.jsx("span",{children:s})})},EFe="medium",Ez={CHECKED:RT,UNCHECKED:D7},$ne=e=>m.jsxs("label",{className:ze("ToolIcon ToolIcon__lock",`ToolIcon_size_${EFe}`,{"is-mobile":e.isMobile}),title:`${e.title}  Q`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),m.jsx("div",{className:"ToolIcon__icon",children:e.checked?Ez.CHECKED:Ez.UNCHECKED})]}),rb=({heading:e,children:t,...n})=>{let{id:r}=xc(),i=m.jsx("h2",{className:"visually-hidden",id:`${r}-${e}-title`,children:j(`headings.${e}`)});return m.jsx("section",{...n,"aria-labelledby":`${r}-${e}-title`,children:typeof t=="function"?t(i):m.jsxs(m.Fragment,{children:[i,t]})})},Pl=4,f0=6,SFe="rgba(0,0,0,0.3)",kFe=(e,t,n,r)=>{if(!e.length)return{horizontal:null,vertical:null};let[i,s,o,a]=nn(e),l=t/r.zoom.value,f=n/r.zoom.value,c=t-l,d=n-f,u={top:parseInt(ry("sat"))||0,bottom:parseInt(ry("sab"))||0,left:parseInt(ry("sal"))||0,right:parseInt(ry("sar"))||0},h=tb().rtl,g=-r.scrollX+c/2+u.left,U=-r.scrollY+d/2+u.top,y=g+l-u.right,x=U+f-u.bottom,w=Math.min(i,g),E=Math.min(s,U),S=Math.max(o,y),A=Math.max(a,x);return{horizontal:g===w&&y===S?null:{x:Math.max(u.left,Pl)+(g-w)/(S-w)*t,y:n-f0-Math.max(Pl,u.bottom),width:(y-g)/(S-w)*t-Math.max(Pl*2,u.left+u.right),height:f0},vertical:U===E&&x===A?null:{x:h?Math.max(u.left,Pl):t-f0-Math.max(u.right,Pl),y:(U-E)/(A-E)*n+Math.max(u.top,Pl),width:f0,height:(x-U)/(A-E)*n-Math.max(Pl*2,u.top+u.bottom)}}},Sz=(e,t,n)=>{let[r,i]=[e.horizontal,e.vertical].map(s=>s!=null&&s.x<=t&&t<=s.x+s.width&&s.y<=n&&n<=s.y+s.height);return{isOverEither:r||i,isOverHorizontal:r,isOverVertical:i}},CFe="medium",zne=e=>e.penDetected?m.jsxs("label",{className:ze("ToolIcon ToolIcon__penMode",`ToolIcon_size_${CFe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m.jsx("div",{className:"ToolIcon__icon",children:iwe})]}):null,Hne=e=>m.jsx(jt,{className:ze("Shape",{fillable:!1}),type:"radio",icon:cq,name:"editor-current-shape",checked:e.checked,title:`${e.title}  H`,keyBindingLabel:e.isMobile?void 0:Q.H.toLocaleUpperCase(),"aria-label":`${e.title}  H`,"aria-keyshortcuts":Q.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),AFe=({appState:e,elements:t,actionManager:n,setAppState:r,onLockToggle:i,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:f,device:c,renderWelcomeScreen:d,UIOptions:u,app:h})=>{var E,S;let{WelcomeScreenCenterTunnel:g,MainMenuTunnel:U,DefaultSidebarTriggerTunnel:y}=yo(),x=()=>m.jsxs(One,{side:"top",className:"App-top-bar",children:[d&&m.jsx(g.Out,{}),m.jsx(rb,{heading:"shapes",children:A=>{var M;return m.jsx(Yo.Col,{gap:4,align:"center",children:m.jsxs(Yo.Row,{gap:1,className:"App-toolbar-container",children:[m.jsxs(el,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[A,m.jsx(Yo.Row,{gap:1,children:m.jsx(Tne,{appState:e,activeTool:e.activeTool,UIOptions:u,app:h})})]}),a&&a(!0,e),m.jsxs("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((M=e.openDialog)==null?void 0:M.name)!=="elementLinkSelector"&&m.jsx(y.Out,{}),m.jsx(zne,{checked:e.penMode,onChange:()=>o(null),title:j("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),m.jsx($ne,{checked:e.activeTool.locked,onChange:i,title:j("toolBar.lock"),isMobile:!0}),m.jsx(Hne,{checked:o6(e),onChange:()=>s(),title:j("toolBar.hand"),isMobile:!0})]})]})})}}),m.jsx(Fne,{appState:e,isMobile:!0,device:c,app:h})]}),w=()=>{var A;return e.viewModeEnabled||((A=e.openDialog)==null?void 0:A.name)==="elementLinkSelector"?m.jsx("div",{className:"App-toolbar-content",children:m.jsx(U.Out,{})}):m.jsxs("div",{className:"App-toolbar-content",children:[m.jsx(U.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),m.jsxs("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return m.jsxs(m.Fragment,{children:[f(),!e.viewModeEnabled&&((E=e.openDialog)==null?void 0:E.name)!=="elementLinkSelector"&&x(),m.jsx("div",{className:"App-bottom-bar",style:{marginBottom:f0+Pl*2,marginLeft:f0+Pl*2,marginRight:f0+Pl*2},children:m.jsxs(el,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((S=e.openDialog)==null?void 0:S.name)!=="elementLinkSelector"&&CI(e,t)?m.jsx(rb,{className:"App-mobile-menu",heading:"selectedShapeActions",children:m.jsx(Mne,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,m.jsxs("footer",{className:"App-toolbar",children:[w(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&m.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(A=>({...X2(t,A)}))},children:j("buttons.scrollBackToContent")})]})]})})]})},kz=e=>{let t=I.useRef(null),[n,r]=I.useState(null);return I.useLayoutEffect(()=>{if(!e.spreadsheet)return;let i=yNe(e.chartType,e.spreadsheet,0,0);r(i);let s,o=t.current;return(async()=>{var a;return s=await tI(i,{exportBackground:!1,viewBackgroundColor:ai.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),m.jsx("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:m.jsx("div",{ref:t})})},MFe=({setAppState:e,appState:t,onClose:n})=>{let{onInsertElements:r}=yc(),i=Te.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{r(a),xn("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return m.jsx(dl,{size:"small",onCloseRequest:i,title:j("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:m.jsxs("div",{className:"container",children:[m.jsx(kz,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),m.jsx(kz,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},TFe=()=>m.jsxs("div",{className:"HelpDialog__header",children:[m.jsxs("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:CB}),j("helpDialog.documentation")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:CB}),j("helpDialog.blog")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:nq}),j("helpDialog.github")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:kEe}),"YouTube"]})]}),IFe=e=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{children:e.title}),m.jsx("div",{className:"HelpDialog__islands-container",children:e.children})]}),AS=e=>m.jsxs("div",{className:`HelpDialog__island ${e.className}`,children:[m.jsx("h4",{className:"HelpDialog__island-title",children:e.caption}),m.jsx("div",{className:"HelpDialog__island-content",children:e.children})]});function*NFe(e,t){let n=!0;for(let r of e)n||(yield t),n=!1,yield r}var RFe=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),$e=({label:e,shortcuts:t,isOr:n=!0})=>{let r=t.map(i=>(i.endsWith("++")?[...i.slice(0,-2).split("+"),"+"]:i.split("+")).map(s=>m.jsx(_Fe,{children:RFe(s)},s)));return m.jsxs("div",{className:"HelpDialog__shortcut",children:[m.jsx("div",{children:e}),m.jsx("div",{className:"HelpDialog__key-container",children:[...NFe(r,n?j("helpDialog.or"):null)]})]})},_Fe=e=>m.jsx("kbd",{className:"HelpDialog__key",...e}),PFe=({onClose:e})=>{let t=Te.useCallback(()=>{e&&e()},[e]);return m.jsx(m.Fragment,{children:m.jsxs(dl,{onCloseRequest:t,title:j("helpDialog.title"),className:"HelpDialog",children:[m.jsx(TFe,{}),m.jsxs(IFe,{title:j("helpDialog.shortcuts"),children:[m.jsxs(AS,{className:"HelpDialog__island--tools",caption:j("helpDialog.tools"),children:[m.jsx($e,{label:j("toolBar.hand"),shortcuts:[Q.H]}),m.jsx($e,{label:j("toolBar.selection"),shortcuts:[Q.V,Q[1]]}),m.jsx($e,{label:j("toolBar.rectangle"),shortcuts:[Q.R,Q[2]]}),m.jsx($e,{label:j("toolBar.diamond"),shortcuts:[Q.D,Q[3]]}),m.jsx($e,{label:j("toolBar.ellipse"),shortcuts:[Q.O,Q[4]]}),m.jsx($e,{label:j("toolBar.arrow"),shortcuts:[Q.A,Q[5]]}),m.jsx($e,{label:j("toolBar.line"),shortcuts:[Q.L,Q[6]]}),m.jsx($e,{label:j("toolBar.freedraw"),shortcuts:[Q.P,Q[7]]}),m.jsx($e,{label:j("toolBar.text"),shortcuts:[Q.T,Q[8]]}),m.jsx($e,{label:j("toolBar.image"),shortcuts:[Q[9]]}),m.jsx($e,{label:j("toolBar.eraser"),shortcuts:[Q.E,Q[0]]}),m.jsx($e,{label:j("toolBar.frame"),shortcuts:[Q.F]}),m.jsx($e,{label:j("toolBar.laser"),shortcuts:[Q.K]}),m.jsx($e,{label:j("labels.eyeDropper"),shortcuts:[Q.I,"Shift+S","Shift+G"]}),m.jsx($e,{label:j("helpDialog.editLineArrowPoints"),shortcuts:[Ue("CtrlOrCmd+Enter")]}),m.jsx($e,{label:j("helpDialog.editText"),shortcuts:[Ue("Enter")]}),m.jsx($e,{label:j("helpDialog.textNewLine"),shortcuts:[Ue("Enter"),Ue("Shift+Enter")]}),m.jsx($e,{label:j("helpDialog.textFinish"),shortcuts:[Ue("Esc"),Ue("CtrlOrCmd+Enter")]}),m.jsx($e,{label:j("helpDialog.curvedArrow"),shortcuts:["A",j("helpDialog.click"),j("helpDialog.click"),j("helpDialog.click")],isOr:!1}),m.jsx($e,{label:j("helpDialog.curvedLine"),shortcuts:["L",j("helpDialog.click"),j("helpDialog.click"),j("helpDialog.click")],isOr:!1}),m.jsx($e,{label:j("helpDialog.cropStart"),shortcuts:[j("helpDialog.doubleClick"),Ue("Enter")],isOr:!0}),m.jsx($e,{label:j("helpDialog.cropFinish"),shortcuts:[Ue("Enter"),Ue("Escape")],isOr:!0}),m.jsx($e,{label:j("toolBar.lock"),shortcuts:[Q.Q]}),m.jsx($e,{label:j("helpDialog.preventBinding"),shortcuts:[Ue("CtrlOrCmd")]}),m.jsx($e,{label:j("toolBar.link"),shortcuts:[Ue("CtrlOrCmd+K")]})]}),m.jsxs(AS,{className:"HelpDialog__island--view",caption:j("helpDialog.view"),children:[m.jsx($e,{label:j("buttons.zoomIn"),shortcuts:[Ue("CtrlOrCmd++")]}),m.jsx($e,{label:j("buttons.zoomOut"),shortcuts:[Ue("CtrlOrCmd+-")]}),m.jsx($e,{label:j("buttons.resetZoom"),shortcuts:[Ue("CtrlOrCmd+0")]}),m.jsx($e,{label:j("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),m.jsx($e,{label:j("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),m.jsx($e,{label:j("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),m.jsx($e,{label:j("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),m.jsx($e,{label:j("buttons.zenMode"),shortcuts:[Ue("Alt+Z")]}),m.jsx($e,{label:j("buttons.objectsSnapMode"),shortcuts:[Ue("Alt+S")]}),m.jsx($e,{label:j("labels.toggleGrid"),shortcuts:[Ue("CtrlOrCmd+'")]}),m.jsx($e,{label:j("labels.viewMode"),shortcuts:[Ue("Alt+R")]}),m.jsx($e,{label:j("labels.toggleTheme"),shortcuts:[Ue("Alt+Shift+D")]}),m.jsx($e,{label:j("stats.fullTitle"),shortcuts:[Ue("Alt+/")]}),m.jsx($e,{label:j("search.title"),shortcuts:[Vi("searchMenu")]}),m.jsx($e,{label:j("commandPalette.title"),shortcuts:j2?[Vi("commandPalette")]:[Vi("commandPalette"),Vi("commandPalette",1)]})]}),m.jsxs(AS,{className:"HelpDialog__island--editor",caption:j("helpDialog.editor"),children:[m.jsx($e,{label:j("helpDialog.createFlowchart"),shortcuts:[Ue("CtrlOrCmd+Arrow Key")],isOr:!0}),m.jsx($e,{label:j("helpDialog.navigateFlowchart"),shortcuts:[Ue("Alt+Arrow Key")],isOr:!0}),m.jsx($e,{label:j("labels.moveCanvas"),shortcuts:[Ue(`Space+${j("helpDialog.drag")}`),Ue(`Wheel+${j("helpDialog.drag")}`)],isOr:!0}),m.jsx($e,{label:j("buttons.clearReset"),shortcuts:[Ue("CtrlOrCmd+Delete")]}),m.jsx($e,{label:j("labels.delete"),shortcuts:[Ue("Delete")]}),m.jsx($e,{label:j("labels.cut"),shortcuts:[Ue("CtrlOrCmd+X")]}),m.jsx($e,{label:j("labels.copy"),shortcuts:[Ue("CtrlOrCmd+C")]}),m.jsx($e,{label:j("labels.paste"),shortcuts:[Ue("CtrlOrCmd+V")]}),m.jsx($e,{label:j("labels.pasteAsPlaintext"),shortcuts:[Ue("CtrlOrCmd+Shift+V")]}),m.jsx($e,{label:j("labels.selectAll"),shortcuts:[Ue("CtrlOrCmd+A")]}),m.jsx($e,{label:j("labels.multiSelect"),shortcuts:[Ue(`Shift+${j("helpDialog.click")}`)]}),m.jsx($e,{label:j("helpDialog.deepSelect"),shortcuts:[Ue(`CtrlOrCmd+${j("helpDialog.click")}`)]}),m.jsx($e,{label:j("helpDialog.deepBoxSelect"),shortcuts:[Ue(`CtrlOrCmd+${j("helpDialog.drag")}`)]}),(hI||j2)&&m.jsx($e,{label:j("labels.copyAsPng"),shortcuts:[Ue("Shift+Alt+C")]}),m.jsx($e,{label:j("labels.copyStyles"),shortcuts:[Ue("CtrlOrCmd+Alt+C")]}),m.jsx($e,{label:j("labels.pasteStyles"),shortcuts:[Ue("CtrlOrCmd+Alt+V")]}),m.jsx($e,{label:j("labels.sendToBack"),shortcuts:[Ue(ac?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),m.jsx($e,{label:j("labels.bringToFront"),shortcuts:[Ue(ac?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),m.jsx($e,{label:j("labels.sendBackward"),shortcuts:[Ue("CtrlOrCmd+[")]}),m.jsx($e,{label:j("labels.bringForward"),shortcuts:[Ue("CtrlOrCmd+]")]}),m.jsx($e,{label:j("labels.alignTop"),shortcuts:[Ue("CtrlOrCmd+Shift+Up")]}),m.jsx($e,{label:j("labels.alignBottom"),shortcuts:[Ue("CtrlOrCmd+Shift+Down")]}),m.jsx($e,{label:j("labels.alignLeft"),shortcuts:[Ue("CtrlOrCmd+Shift+Left")]}),m.jsx($e,{label:j("labels.alignRight"),shortcuts:[Ue("CtrlOrCmd+Shift+Right")]}),m.jsx($e,{label:j("labels.duplicateSelection"),shortcuts:[Ue("CtrlOrCmd+D"),Ue(`Alt+${j("helpDialog.drag")}`)]}),m.jsx($e,{label:j("helpDialog.toggleElementLock"),shortcuts:[Ue("CtrlOrCmd+Shift+L")]}),m.jsx($e,{label:j("buttons.undo"),shortcuts:[Ue("CtrlOrCmd+Z")]}),m.jsx($e,{label:j("buttons.redo"),shortcuts:CZ?[Ue("CtrlOrCmd+Y"),Ue("CtrlOrCmd+Shift+Z")]:[Ue("CtrlOrCmd+Shift+Z")]}),m.jsx($e,{label:j("labels.group"),shortcuts:[Ue("CtrlOrCmd+G")]}),m.jsx($e,{label:j("labels.ungroup"),shortcuts:[Ue("CtrlOrCmd+Shift+G")]}),m.jsx($e,{label:j("labels.flipHorizontal"),shortcuts:[Ue("Shift+H")]}),m.jsx($e,{label:j("labels.flipVertical"),shortcuts:[Ue("Shift+V")]}),m.jsx($e,{label:j("labels.showStroke"),shortcuts:[Ue("S")]}),m.jsx($e,{label:j("labels.showBackground"),shortcuts:[Ue("G")]}),m.jsx($e,{label:j("labels.showFonts"),shortcuts:[Ue("Shift+F")]}),m.jsx($e,{label:j("labels.decreaseFontSize"),shortcuts:[Ue("CtrlOrCmd+Shift+<")]}),m.jsx($e,{label:j("labels.increaseFontSize"),shortcuts:[Ue("CtrlOrCmd+Shift+>")]})]})]})]})})},DFe=4,LFe=8,OFe=({shouldWrap:e,children:t,username:n})=>e?m.jsx(n1,{label:n||"Unknown user",children:t}):m.jsx(m.Fragment,{children:t}),MS=({actionManager:e,collaborator:t,socketId:n,withName:r=!1,shouldWrapWithTooltip:i=!1,isBeingFollowed:s})=>{let o={socketId:n,collaborator:t,withName:r,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return m.jsx(OFe,{username:t.username,shouldWrap:i,children:a},n)},jFe=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],Vne=Te.memo(({className:e,mobile:t,collaborators:n,userToFollow:r})=>{let i=Gs(),s=new Map;n.forEach((g,U)=>{let y=g.id||U;s.set(y,{...g,socketId:U})});let o=Array.from(s.values()).filter(g=>{var U;return(U=g.username)==null?void 0:U.trim()}),[a,l]=Te.useState(""),f=o.filter(g=>{var U;return(U=g.username)==null?void 0:U.toLowerCase().includes(a)}),c=Te.useRef(null);I.useLayoutEffect(()=>{if(c.current){let g=y=>{let x=Math.max(1,Math.min(8,Math.floor(y/38)));u(x)};if(g(c.current.clientWidth),!MC)return;let U=new ResizeObserver(y=>{for(let x of y){let{width:w}=x.contentRect;g(w)}});return U.observe(c.current),()=>{U.disconnect()}}},[]);let[d,u]=Te.useState(DFe),h=o.slice(0,d-1).map(g=>MS({actionManager:i,collaborator:g,socketId:g.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:g.socketId===r}));return t?m.jsx("div",{className:ze("UserList UserList_mobile",e),children:o.map(g=>MS({actionManager:i,collaborator:g,socketId:g.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:g.socketId===r}))}):m.jsx("div",{className:"UserList__wrapper",ref:c,children:m.jsxs("div",{className:ze("UserList",e),style:{"--max-avatars":d},children:[h,o.length>d-1&&m.jsxs(ax,{children:[m.jsxs(lx,{className:"UserList__more",children:["+",o.length-d+1]}),m.jsx(HI,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:m.jsxs(el,{padding:2,children:[o.length>=LFe&&m.jsx(Zte,{placeholder:j("quickSearch.placeholder"),onChange:l}),m.jsx(qte,{className:"dropdown-menu UserList__collaborators",placeholder:j("userList.empty"),children:f.length>0?[m.jsx("div",{className:"hint",children:j("userList.hint.text")}),f.map(g=>MS({actionManager:i,collaborator:g,socketId:g.socketId,withName:!0,isBeingFollowed:g.socketId===r}))]:[]}),m.jsx(ute,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;let n=t.collaborators.keys();for(let[r,i]of e.collaborators){let s=t.collaborators.get(r);if(!s||r!==n.next().value||!Si(i,s,jFe))return!1}return!0}),Cz=({children:e,color:t})=>m.jsx("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":ai[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":ai[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":ai[t][9]},children:e}),BFe=({elements:e,appState:t,setAppState:n,files:r,actionManager:i,exportOpts:s,canvas:o,onCloseRequest:a})=>{let{onExportToBackend:l}=s;return m.jsx("div",{className:"ExportDialog ExportDialog--json",children:m.jsxs("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&m.jsxs(Cz,{color:"lime",children:[m.jsx("div",{className:"Card-icon",children:gwe}),m.jsx("h2",{children:j("exportDialog.disk_title")}),m.jsxs("div",{className:"Card-details",children:[j("exportDialog.disk_details"),!c1&&i.renderAction("changeProjectName")]}),m.jsx(jt,{className:"Card-button",type:"button",title:j("exportDialog.disk_button"),"aria-label":j("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{i.executeAction(ane,"ui")}})]}),l&&m.jsxs(Cz,{color:"pink",children:[m.jsx("div",{className:"Card-icon",children:LC}),m.jsx("h2",{children:j("exportDialog.link_title")}),m.jsx("div",{className:"Card-details",children:j("exportDialog.link_details")}),m.jsx(jt,{className:"Card-button",type:"button",title:j("exportDialog.link_button"),"aria-label":j("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{xn("export","link",`ui (${wve()})`),await l(e,t,r),a()}catch(f){n({errorMessage:f.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,r,o)]})})},FFe=({elements:e,appState:t,files:n,actionManager:r,exportOpts:i,canvas:s,setAppState:o})=>{var l;let a=Te.useCallback(()=>{o({openDialog:null})},[o]);return m.jsx(m.Fragment,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&m.jsx(dl,{onCloseRequest:a,title:j("buttons.export"),children:m.jsx(BFe,{elements:e,appState:t,setAppState:o,files:n,actionManager:r,onCloseRequest:a,exportOpts:i,canvas:s})})})},$Fe=e=>m.jsx("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${j("helpDialog.title")}  ?`,"aria-label":j("helpDialog.title"),children:_T}),Wne=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:r})=>{let{FooterCenterTunnel:i,WelcomeScreenHelpHintTunnel:s}=yo(),o=Gr(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return m.jsxs("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[m.jsx("div",{className:ze("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:m.jsx(Yo.Col,{gap:2,children:m.jsxs(rb,{heading:"canvasActions",children:[m.jsx(WBe,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&m.jsx(GBe,{renderAction:t.renderAction,className:ze("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&m.jsx(KBe,{renderAction:t.renderAction,className:ze("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),m.jsx(i.Out,{}),m.jsx("div",{className:ze("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:m.jsxs("div",{style:{position:"relative"},children:[r&&m.jsx(s.Out,{}),m.jsx($Fe,{onClick:()=>t.executeAction(tN)})]})}),m.jsx(XBe,{actionManager:t,showExitZenModeBtn:n})]})},zFe=Wne;Wne.displayName="Footer";var Gne=Te.createContext({}),Xne=({children:e,className:t})=>{let n=Gr(),r=I.useContext(Gne),i=!!(n.editor.canFitSidebar&&r.shouldRenderDockButton);return m.jsxs("div",{className:ze("sidebar__header",t),"data-testid":"sidebar-header",children:[e,m.jsxs("div",{className:"sidebar__header__buttons",children:[i&&m.jsx(n1,{label:j("labels.sidebarLock"),children:m.jsx(E6,{onSelect:()=>{var s;return(s=r.onDock)==null?void 0:s.call(r,!r.docked)},selected:!!r.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":j("labels.sidebarLock"),children:Kve})}),m.jsx(E6,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:r.onCloseRequest,"aria-label":j("buttons.close"),children:R6})]})]})};Xne.displayName="SidebarHeader";var Kne=({name:e,tab:t,icon:n,title:r,children:i,onToggle:s,className:o,style:a})=>{var c;let l=Xr(),f=bs();return m.jsxs("label",{title:r,className:"sidebar-trigger__label-element",children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");let u=d.target.checked;l({openSidebar:u?{name:e,tab:t}:null}),s==null||s(u)},checked:((c=f.openSidebar)==null?void 0:c.name)===e,"aria-label":r,"aria-keyshortcuts":"0"}),m.jsxs("div",{className:ze("sidebar-trigger",o),style:a,children:[n&&m.jsx("div",{children:n}),i&&m.jsx("div",{className:"sidebar-trigger__label",children:i})]})]})};Kne.displayName="SidebarTrigger";var Yne=({children:e,...t})=>m.jsx(Ite,{className:"sidebar-triggers",...t,children:e});Yne.displayName="SidebarTabTriggers";var Zne=({children:e,tab:t,onSelect:n,...r})=>m.jsx(Nte,{value:t,asChild:!0,onSelect:n,children:m.jsx("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...r,children:e})});Zne.displayName="SidebarTabTrigger";var qne=({children:e,...t})=>{let n=bs(),r=Xr();if(!n.openSidebar)return null;let{name:i}=n.openSidebar;return m.jsx(Tte,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>r(o=>({...o,openSidebar:{...o.openSidebar,name:i,tab:s}})),...t,children:e})};qne.displayName="SidebarTabs";var Qne=({tab:e,children:t,...n})=>m.jsx(Rte,{...n,value:e,"data-testid":e,children:t});Qne.displayName="SidebarTab";var sN=di(!1),Jne=I.forwardRef(({name:e,children:t,onDock:n,docked:r,className:i,...s},o)=>{vt.DEV&&n&&r==null&&console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");let a=Xr(),l=fx(sN);I.useLayoutEffect(()=>(l(!!r),()=>{l(!1)}),[l,r]);let f=I.useRef({});f.current.onCloseRequest=()=>{a({openSidebar:null})},f.current.onDock=h=>n==null?void 0:n(h),f.current=qy(f.current,{docked:r,shouldRenderDockButton:!!n&&r!=null});let c=I.useRef(null);I.useImperativeHandle(o,()=>c.current);let d=Gr(),u=I.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return YI(c,I.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!r||!d.editor.canFitSidebar)&&u()},[u,r,d.editor.canFitSidebar])),I.useEffect(()=>{let h=g=>{g.key===Q.ESCAPE&&(!r||!d.editor.canFitSidebar)&&u()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[u,r,d.editor.canFitSidebar]),m.jsx(el,{...s,className:ze("sidebar",{"sidebar--docked":r},i),ref:c,children:m.jsx(Gne.Provider,{value:f.current,children:t})})});Jne.displayName="SidebarInner";var Nl=Object.assign(I.forwardRef((e,t)=>{var a;let n=bs(),{onStateChange:r}=e,i=I.useRef(n.openSidebar);I.useEffect(()=>{var l,f,c,d,u;(!n.openSidebar&&((l=i==null?void 0:i.current)==null?void 0:l.name)===e.name||((f=n.openSidebar)==null?void 0:f.name)===e.name&&((c=i==null?void 0:i.current)==null?void 0:c.name)!==e.name||((d=i.current)==null?void 0:d.name)===e.name)&&n.openSidebar!==i.current&&(r==null||r(((u=n.openSidebar)==null?void 0:u.name)!==e.name?null:n.openSidebar)),i.current=n.openSidebar},[n.openSidebar,r,e.name]);let[s,o]=I.useState(!1);return I.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((a=n.openSidebar)==null?void 0:a.name)===e.name?I.createElement(Jne,{...e,ref:t,key:e.name}):null}),{Header:Xne,TabTriggers:Yne,TabTrigger:Zne,Tabs:qne,Tab:Qne,Trigger:Kne});Nl.displayName="Sidebar";var ere={};CY(ere,{ChangeCanvasBackground:()=>dre,ClearCanvas:()=>cre,CommandPalette:()=>ore,Export:()=>ure,Help:()=>lre,LiveCollaborationTrigger:()=>pre,LoadScene:()=>rre,SaveAsImage:()=>sre,SaveToActiveFile:()=>ire,SearchMenu:()=>are,Socials:()=>hre,ToggleTheme:()=>fre});var tre=di({active:!1});async function HFe({title:e,description:t,actionLabel:n,color:r}){return new Promise(i=>{Ya.set(tre,{active:!0,onConfirm:()=>i(!0),onClose:()=>i(!1),onReject:()=>i(!1),title:e,description:t,actionLabel:n,color:r})})}var nre=({value:e,shortcut:t,onChange:n,choices:r,children:i,name:s})=>{let o=Gr();return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[m.jsx("label",{className:"dropdown-menu-item__text",htmlFor:s,children:i}),m.jsx(Lne,{name:s,value:e,onChange:n,choices:r})]}),t&&!o.editor.isMobile&&m.jsx("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};nre.displayName="DropdownMenuItemContentRadio";var VFe=nre,rre=()=>{let{t:e}=Zi(),t=Gs(),n=xx();return t.isActionEnabled(EA)?m.jsx(aa,{icon:PT,onSelect:async()=>{(!n.length||await HFe({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:m.jsx(Jl,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>m.jsx("strong",{children:r}),br:()=>m.jsx("br",{})})}))&&t.executeAction(EA)},"data-testid":"load-button",shortcut:Vi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};rre.displayName="LoadScene";var ire=()=>{let{t:e}=Zi(),t=Gs();return t.isActionEnabled(ez)?m.jsx(aa,{shortcut:Vi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(ez),icon:hwe,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};ire.displayName="SaveToActiveFile";var sre=()=>{let e=Xr(),{t}=Zi();return m.jsx(aa,{icon:rq,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Vi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};sre.displayName="SaveAsImage";var ore=e=>{let t=Xr(),{t:n}=Zi();return m.jsx(aa,{icon:pq,"data-testid":"command-palette-button",onSelect:()=>{xn("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Vi("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};ore.displayName="CommandPalette";var are=e=>{let{t}=Zi(),n=Gs();return m.jsx(aa,{icon:Zh,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(_ne)},shortcut:Vi("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};are.displayName="SearchMenu";var lre=()=>{let{t:e}=Zi(),t=Gs();return m.jsx(aa,{"data-testid":"help-menu-item",icon:_T,onSelect:()=>t.executeAction(tN),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};lre.displayName="Help";var cre=()=>{let{t:e}=Zi(),t=fx(yx);return Gs().isActionEnabled(Y5)?m.jsx(aa,{icon:Yh,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};cre.displayName="ClearCanvas";var fre=e=>{let{t}=Zi(),n=bs(),r=Gs(),i=Vi("toggleTheme");return r.isActionEnabled(w9)?e!=null&&e.allowSystemTheme?m.jsx(VFe,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:Nt.LIGHT,label:DC,ariaLabel:`${t("buttons.lightMode")} - ${i}`},{value:Nt.DARK,label:PC,ariaLabel:`${t("buttons.darkMode")} - ${i}`},{value:"system",label:SEe,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):m.jsx(aa,{onSelect:s=>{if(s.preventDefault(),e==null?void 0:e.onSelect)e.onSelect(n.theme===Nt.DARK?Nt.LIGHT:Nt.DARK);else return r.executeAction(w9)},icon:n.theme===Nt.DARK?DC:PC,"data-testid":"toggle-dark-mode",shortcut:i,"aria-label":n.theme===Nt.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===Nt.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};fre.displayName="ToggleTheme";var dre=()=>{let{t:e}=Zi(),t=bs(),n=Gs(),r=e8();return t.viewModeEnabled||!r.UIOptions.canvasActions.changeViewBackgroundColor?null:m.jsxs("div",{style:{marginTop:"0.5rem"},children:[m.jsx("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),m.jsx("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};dre.displayName="ChangeCanvasBackground";var ure=()=>{let{t:e}=Zi(),t=Xr();return m.jsx(aa,{icon:L7,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};ure.displayName="Export";var hre=()=>{let{t:e}=Zi();return m.jsxs(m.Fragment,{children:[m.jsx(g3,{icon:nq,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),m.jsx(g3,{icon:dwe,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),m.jsx(g3,{icon:fwe,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};hre.displayName="Socials";var pre=({onSelect:e,isCollaborating:t})=>{let{t:n}=Zi();return m.jsx(aa,{"data-testid":"collab-button",icon:oq,className:ze({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};pre.displayName="LiveCollaborationTrigger";var Qb=(e,t)=>{let n=di(0),r=i=>{let{tunnelsJotai:{useAtom:s}}=yo(),[,o]=s(n),a=I.useRef({preferHost:!1,counter:0});return I.useLayoutEffect(()=>{let l=a.current;return o(f=>{let c=f+1;return l.counter=c,c}),()=>{o(f=>{let c=f-1;return l.counter=c,c||(l.preferHost=!1),c})}},[o]),i.__fallback||(a.current.preferHost=!0),!a.current.counter&&i.__fallback&&a.current.preferHost||a.current.counter>1&&i.__fallback?null:m.jsx(t,{...i})};return r.displayName=e,r},WFe=Object.assign(Qb("MainMenu",({children:e,onSelect:t})=>{var a;let{MainMenuTunnel:n}=yo(),r=Gr(),i=bs(),s=Xr(),o=r.editor.isMobile?void 0:()=>s({openMenu:null});return m.jsx(n.In,{children:m.jsxs(_n,{open:i.openMenu==="canvas",children:[m.jsx(_n.Trigger,{onToggle:()=>{s({openMenu:i.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:tq}),m.jsxs(_n.Content,{onClickOutside:o,onSelect:_7(t,()=>{s({openMenu:null})}),children:[e,r.editor.isMobile&&i.collaborators.size>0&&m.jsxs("fieldset",{className:"UserList-Wrapper",children:[m.jsx("legend",{children:j("labels.collaborators")}),m.jsx(Vne,{mobile:!0,collaborators:i.collaborators,userToFollow:((a=i.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:_n.Trigger,Item:_n.Item,ItemLink:_n.ItemLink,ItemCustom:_n.ItemCustom,Group:_n.Group,Separator:_n.Separator,DefaultItems:ere}),As=WFe,oN=({title:e,children:t,actionLabel:n,onClick:r})=>m.jsxs("div",{className:"OverwriteConfirm__Actions__Action",children:[m.jsx("h4",{children:e}),m.jsx("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),m.jsx(q5,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:r})]}),GFe=()=>{let{t:e}=Zi(),t=Gs(),n=Xr();return m.jsx(oN,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(one,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},XFe=()=>{let{t:e}=Zi(),t=Gs();return m.jsx(oN,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(ane,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},Az=Object.assign(({children:e})=>m.jsx("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:GFe,SaveToDisk:XFe}),TS=Object.assign(Qb("OverwriteConfirmDialog",({children:e})=>{let{OverwriteConfirmDialogTunnel:t}=yo(),[n,r]=ir(tre);if(!n.active)return null;let i=()=>{n.onClose(),r(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),r(o=>({...o,active:!1}))};return m.jsx(t.In,{children:m.jsx(dl,{onCloseRequest:i,title:!1,size:916,children:m.jsxs("div",{className:"OverwriteConfirm",children:[m.jsx("h3",{children:n.title}),m.jsxs("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[m.jsx("div",{className:"OverwriteConfirm__Description__icon",children:aEe}),m.jsx("div",{children:n.description}),m.jsx("div",{className:"OverwriteConfirm__Description__spacer"}),m.jsx(q5,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),m.jsx(Az,{children:e})]})})})}),{Actions:Az,Action:oN}),KFe=di(""),mre=di(null),YFe=350,ZFe=()=>{let e=yc(),t=Xr(),n=I.useRef(null),[r,i]=ir(KFe),s=r.trim(),[o,a]=I.useState(!1),[l,f]=I.useState({nonce:null,items:[]}),c=I.useRef(null),d=I.useRef(void 0),[u,h]=ir(mre),g=e.scene.getNonDeletedElementsMap();I.useEffect(()=>{o||(s!==c.current||e.scene.getSceneNonce()!==d.current)&&(c.current=null,Mz(s,e,(E,S)=>{f({nonce:fc(),items:E}),c.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:E.map(A=>({id:A.textElement.id,focus:!1,matchedLines:A.matchedLines}))})}))},[o,s,g,e,t,h,d]);let U=()=>{l.items.length>0&&h(E=>E===null?0:(E+1)%l.items.length)},y=()=>{l.items.length>0&&h(E=>E===null?0:E-1<0?l.items.length-1:E-1)};I.useEffect(()=>{t(E=>({searchMatches:E.searchMatches.map((S,A)=>A===u?{...S,focus:!0}:{...S,focus:!1})}))},[u,t]),I.useEffect(()=>{var E,S,A,M;if(l.items.length>0&&u!==null){let C=l.items[u];if(C){let T=e.state.zoom.value,R=bo({text:C.searchQuery,x:C.textElement.x+(((E=C.matchedLines[0])==null?void 0:E.offsetX)??0),y:C.textElement.y+(((S=C.matchedLines[0])==null?void 0:S.offsetY)??0),width:(A=C.matchedLines[0])==null?void 0:A.width,height:(M=C.matchedLines[0])==null?void 0:M.height,fontSize:C.textElement.fontSize,fontFamily:C.textElement.fontFamily}),P=14,_=C.textElement.fontSize,O=_*T<P;if(!c3([R],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||O){let F;O?_>=P?F={fitToContent:!0}:F={fitToViewport:!0,maxZoom:tc(P/_,1)}:F={fitToContent:!0},e.scrollToContent(R,{animate:!0,duration:300,...F,canvasOffsets:e.getEditorUIOffsets()})}}}},[u,l,e]),I.useEffect(()=>()=>{h(null),c.current=null,d.current=void 0,t({searchMatches:[]}),a(!1)},[t,h]);let x=ux({goToNextItem:U,goToPreviousItem:y,searchMatches:l});I.useEffect(()=>Bn(window,"keydown",S=>{var A,M,C;if(S.key===Q.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){S.preventDefault(),S.stopPropagation(),t({openSidebar:null});return}S[Q.CTRL_OR_CMD]&&S.key===Q.F&&(S.preventDefault(),S.stopPropagation(),(A=n.current)!=null&&A.matches(":focus")?t({openSidebar:null}):(e.state.openDialog&&t({openDialog:null}),(M=n.current)==null||M.focus(),(C=n.current)==null||C.select())),S.target instanceof HTMLElement&&S.target.closest(".layer-ui__search")&&x.searchMatches.items.length&&(S.key===Q.ENTER&&(S.stopPropagation(),x.goToNextItem()),S.key===Q.ARROW_UP?(S.stopPropagation(),x.goToPreviousItem()):S.key===Q.ARROW_DOWN&&(S.stopPropagation(),x.goToNextItem()))},{capture:!0,passive:!1}),[t,x,e]);let w=`${l.items.length} ${l.items.length===1?j("search.singleResult"):j("search.multipleResults")}`;return m.jsxs("div",{className:"layer-ui__search",children:[m.jsx("div",{className:"layer-ui__search-header",children:m.jsx(iN,{className:i6.SEARCH_MENU_INPUT_WRAPPER,value:r,ref:n,placeholder:j("search.placeholder"),icon:Zh,onChange:E=>{i(E),a(!0);let S=E.trim();Mz(S,e,(A,M)=>{f({nonce:fc(),items:A}),h(M),c.current=S,d.current=e.scene.getSceneNonce(),t({searchMatches:A.map(C=>({id:C.textElement.id,focus:!1,matchedLines:C.matchedLines}))}),a(!1)})},selectOnRender:!0})}),m.jsxs("div",{className:"layer-ui__search-count",children:[l.items.length>0&&m.jsxs(m.Fragment,{children:[u!==null&&u>-1?m.jsxs("div",{children:[u+1," / ",w]}):m.jsx("div",{children:w}),m.jsxs("div",{className:"result-nav",children:[m.jsx(E6,{onSelect:()=>{U()},className:"result-nav-btn",children:gq}),m.jsx(E6,{onSelect:()=>{y()},className:"result-nav-btn",children:REe})]})]}),l.items.length===0&&s&&c.current&&m.jsx("div",{style:{margin:"1rem auto"},children:j("search.noMatch")})]}),m.jsx(e$e,{matches:l,onItemClick:h,focusIndex:u,searchQuery:s})]})},qFe=e=>{let t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return m.jsx("div",{tabIndex:-1,className:ze("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:m.jsx("div",{className:"preview-text",children:t.flatMap((n,r)=>m.jsx(I.Fragment,{children:r===2?m.jsx("b",{children:n}):n},r))})})},QFe=e=>m.jsx("div",{className:"layer-ui__search-result-container",children:e.matches.items.map((t,n)=>m.jsx(qFe,{searchQuery:e.searchQuery,preview:t.preview,highlighted:n===e.focusIndex,onClick:()=>e.onItemClick(n)},t.textElement.id+t.index))}),JFe=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,e$e=I.memo(QFe,JFe),t$e=(e,t,n)=>{let r=e.slice(0,t),i=r.split(/\s+/),s=r.endsWith(" "),o=i.length-2-1-(s?0:1),a=i.slice(o<=0?0:o).join(" ")+(s?" ":""),l=20;a=a.length>l?a.slice(-l):a;let f=e.slice(t+n.length),c=f.split(/\s+/),d=!f.startsWith(" "),u=d?6:5,h=(d?"":" ")+c.slice(0,u).join(" ");return{indexInSearchQuery:a.length,previewText:a+n+h,moreBefore:o>0,moreAfter:c.length>u}},n$e=(e,t)=>{let n=e.split(`
`),r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s],a=n[s+1];if(a){let l=t.indexOf(a,i);if(l>o.length+i){let f=l-(o.length+i);for(;f>0;)o+=" ",f--}}r.push(o),i=i+o.length}return r.join(`
`)},r$e=(e,t,n)=>{let r=n$e(e.text,e.originalText).split(`
`),i=[],s=0,o=0;for(let c of r){let d=s,u=d+c.length-1;i.push({line:c,startIndex:d,endIndex:u,lineNumber:o}),s=u+1,o++}let a=n,l=e.originalText.slice(n,n+t.length),f=[];for(let c of i){if(l==="")break;if(a>=c.startIndex&&a<=c.endIndex){let d=c.endIndex+1-a,u=c.line.slice(0,a-c.startIndex),h=l.slice(0,d);l=l.slice(d);let g=Xi(u,cn(e),e.lineHeight);if(u===""&&(g.width=0),e.textAlign!=="left"&&c.line.length>0){let E=Xi(c.line,cn(e),e.lineHeight),S=e.textAlign==="center"?(e.width-E.width)/2:e.width-E.width;g.width+=S}let{width:U,height:y}=Xi(h,cn(e),e.lineHeight),x=g.width,w=c.lineNumber*g.height;f.push({offsetX:x,offsetY:w,width:U,height:y}),a+=d}}return f},i$e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),Mz=KLe((e,t,n)=>{if(!e||e===""){n([],null);return}let r=t.scene.getNonDeletedElements().filter(l=>je(l));r.sort((l,f)=>l.y-f.y);let i=[],s=new RegExp(i$e(e),"gi");for(let l of r){let f=null,c=l.originalText;for(;(f=s.exec(c))!==null;){let d=t$e(c,f.index,e),u=r$e(l,e,f.index);u.length>0&&i.push({textElement:l,searchQuery:e,preview:d,index:f.index,matchedLines:u})}}let o=new Set(t.visibleElements.map(l=>l.id)),a=i.findIndex(l=>o.has(l.textElement.id))??null;n(i,a)},YFe),gre=Qb("DefaultSidebarTrigger",e=>{let{DefaultSidebarTriggerTunnel:t}=yo();return m.jsx(t.In,{children:m.jsx(Nl.Trigger,{...e,className:"default-sidebar-trigger",name:qa.name})})});gre.displayName="DefaultSidebarTrigger";var bre=({children:e})=>{let{DefaultSidebarTabTriggersTunnel:t}=yo();return m.jsx(t.In,{children:e})};bre.displayName="DefaultTabTriggers";var Tz=Object.assign(Qb("DefaultSidebar",({children:e,className:t,onDock:n,docked:r,...i})=>{var f;let s=bs(),o=Xr(),{DefaultSidebarTabTriggersTunnel:a}=yo(),l=((f=s.openSidebar)==null?void 0:f.tab)===Vp;return I.createElement(Nl,{...i,name:"default",key:"default",className:ze("default-sidebar",t),docked:l||(r??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&r!=null?void 0:_7(n,c=>{o({defaultSidebarDockedPreference:c})})},m.jsxs(Nl.Tabs,{children:[m.jsx(Nl.Header,{children:m.jsxs(Nl.TabTriggers,{children:[m.jsx(Nl.TabTrigger,{tab:Vp,children:Zh}),m.jsx(Nl.TabTrigger,{tab:z4,children:NT}),m.jsx(a.Out,{})]})}),m.jsx(Nl.Tab,{tab:z4,children:m.jsx(RBe,{})}),m.jsx(Nl.Tab,{tab:Vp,children:m.jsx(ZFe,{})}),e]}))}),{Trigger:gre,TabTriggers:bre}),s$e="small",o$e=e=>m.jsxs("label",{className:ze("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${s$e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),m.jsx("div",{className:"ToolIcon__icon",children:uq})]}),a$e=({canvasRef:e,setError:t})=>{let n=e.current;if(!n)return;let r=n.parentElement;r&&(r.style.background="",t(null),n.replaceChildren())},Ure=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:r,data:i})=>{let s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){a$e({canvasRef:e,setError:r});return}try{let a=await t.api,l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}let{elements:f,files:c}=l;r(null),i.current={elements:PA(f,{regenerateIds:!0}),files:c};let d=await pI({elements:i.current.elements,files:i.current.files,exportPadding:T6,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await J2(d)}catch(u){throw u.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(j("canvasError.canvasTooBig")):u}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&r(a),a}}},aN=e=>{Ch.set(j5.MERMAID_TO_EXCALIDRAW,e)},yre=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:r})=>{let{elements:i,files:s}=t.current;i.length&&(e.addElementsFromPasteOrLibrary({elements:i,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),r&&n&&aN(n))},xre=({children:e})=>m.jsx("div",{className:"ttd-dialog-panels",children:e}),S9=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgess:i,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>m.jsxs("div",{className:"ttd-dialog-panel",children:[m.jsxs("div",{className:"ttd-dialog-panel__header",children:[m.jsx("label",{children:e}),s==null?void 0:s()]}),t,m.jsxs("div",{className:ze("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[m.jsxs(E6,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:r||i,children:[m.jsxs("div",{className:ze({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&m.jsx("span",{children:n.icon})]}),i&&m.jsx(Lf,{})]}),!r&&!i&&(o==null?void 0:o()),a==null?void 0:a()]})]}),vre=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{let i=I.useRef(null),s=I.useRef(r);return s.current=r,I.useEffect(()=>{if(!s.current)return;let o=i.current;if(o){let a=l=>{var f;l[Q.CTRL_OR_CMD]&&l.key===Q.ENTER&&(l.preventDefault(),(f=s.current)==null||f.call(s))};return o.addEventListener("keydown",a),()=>{o.removeEventListener("keydown",a)}}},[]),m.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},l$e=({error:e})=>m.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",m.jsx("p",{children:e})]}),wre=({error:e,canvasRef:t,loaded:n})=>m.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&m.jsx(l$e,{error:e.message}),n?m.jsx("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):m.jsx(Lf,{size:"2rem"})]}),Ere=()=>m.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[m.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Ue("CtrlOrCmd")}),m.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Ue("Enter")})]}),c$e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,Iz=l6(aN,300),f$e=({mermaidToExcalidrawLib:e})=>{let[t,n]=I.useState(()=>Ch.get(j5.MERMAID_TO_EXCALIDRAW)||c$e),r=I.useDeferredValue(t.trim()),[i,s]=I.useState(null),o=I.useRef(null),a=I.useRef({elements:[],files:null}),l=yc();I.useEffect(()=>{Ure({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:r}).catch(c=>{zZ()&&console.error("Failed to parse mermaid definition",c)}),Iz(r)},[r,e]),I.useEffect(()=>()=>{Iz.flush()},[]);let f=()=>{yre({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"ttd-dialog-desc",children:m.jsx(Jl,{i18nKey:"mermaid.description",flowchartLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:c}),sequenceLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:c}),classLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:c})})}),m.jsxs(xre,{children:[m.jsx(S9,{label:j("mermaid.syntax"),children:m.jsx(vre,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:c=>n(c.target.value),onKeyboardSubmit:()=>{f()}})}),m.jsx(S9,{label:j("mermaid.preview"),panelAction:{action:()=>{f()},label:j("mermaid.button"),icon:e3},renderSubmitShortcut:()=>m.jsx(Ere,{}),children:m.jsx(wre,{canvasRef:o,loaded:e.loaded,error:i})})]})]})},d$e=f$e,Sre=e=>{let t=Xr(),n=I.useRef(null),r=I.useRef(0);return m.jsx(Tte,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:i=>{var o;if(!i)return;let s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){let a=s.offsetHeight||0;a>r.current&&(r.current=a,s.style.minHeight=`min(${r.current}px, 100%)`)}e.dialog==="ttd"&&VZ(["text-to-diagram","mermaid"],i)&&t({openDialog:{name:e.dialog,tab:i}})},children:e.children})};Sre.displayName="TTDDialogTabs";var u$e=Sre,kre=({children:e,...t})=>m.jsx(Ite,{className:"ttd-dialog-triggers",...t,children:e});kre.displayName="TTDDialogTabTriggers";var NA=({children:e,tab:t,onSelect:n,...r})=>m.jsx(Nte,{value:t,asChild:!0,onSelect:n,children:m.jsx("button",{type:"button",className:"ttd-dialog-tab-trigger",...r,children:e})});NA.displayName="TTDDialogTabTrigger";var RA=({tab:e,children:t,...n})=>m.jsx(Rte,{...n,value:e,children:t});RA.displayName="TTDDialogTab";var IS=3,rp=1e3,h$e=di(null),p$e=di(null),m$e=e=>{var n;let t=bs();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:m.jsx(g$e,{...e,tab:t.openDialog.tab})},g$e=Qb("TTDDialogBase",({tab:e,...t})=>{let n=yc(),r=Xr(),i=I.useRef(null),[s,o]=ir(p$e),[a,l]=I.useState((s==null?void 0:s.prompt)??""),f=a.trim(),c=M=>{l(M.target.value),o(C=>({generatedResponse:(C==null?void 0:C.generatedResponse)??null,prompt:M.target.value}))},[d,u]=I.useState(!1),[h,g]=ir(h$e),U=async()=>{if(f.length>rp||f.length<IS||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){f.length<IS&&A(new Error(`Prompt is too short (min ${IS} characters)`)),f.length>rp&&A(new Error(`Prompt is too long (max ${rp} characters)`));return}try{u(!0),xn("ai","generate","ttd");let{generatedResponse:M,error:C,rateLimit:T,rateLimitRemaining:R}=await t.onTextSubmit(f);if(typeof M=="string"&&o(P=>({generatedResponse:M,prompt:(P==null?void 0:P.prompt)??null})),B5(T)&&B5(R)&&g({rateLimit:T,rateLimitRemaining:R}),C){A(C);return}if(!M){A(new Error("Generation failed"));return}try{await Ure({canvasRef:i,data:E,mermaidToExcalidrawLib:x,setError:A,mermaidDefinition:M}),xn("ai","mermaid parse success","ttd")}catch(P){console.info(`%cTTD mermaid render errror: ${P.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${P.message}`,"color: yellow"),xn("ai","mermaid parse failed","ttd"),A(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(M){let C=M.message;(!C||C==="Failed to fetch")&&(C="Request failed"),A(new Error(C))}finally{u(!1)}},y=I.useRef(U);y.current=U;let[x,w]=I.useState({loaded:!1,api:Ve(()=>import("./index-CFimzDzW.js").then(M=>M.aR),[])});I.useEffect(()=>{(async()=>(await x.api,w(M=>({...M,loaded:!0}))))()},[x.api]);let E=I.useRef({elements:[],files:null}),[S,A]=I.useState(null);return m.jsx(dl,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:m.jsxs(u$e,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?m.jsx("p",{className:"dialog-mermaid-title",children:j("mermaid.title")}):m.jsxs(kre,{children:[m.jsx(NA,{tab:"text-to-diagram",children:m.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[j("labels.textToDiagram"),m.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),m.jsx(NA,{tab:"mermaid",children:"Mermaid"})]}),m.jsx(RA,{className:"ttd-dialog-content",tab:"mermaid",children:m.jsx(d$e,{mermaidToExcalidrawLib:x})}),!("__fallback"in t)&&m.jsxs(RA,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[m.jsx("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),m.jsxs(xre,{children:[m.jsx(S9,{label:j("labels.prompt"),panelAction:{action:U,label:"Generate",icon:e3},onTextSubmitInProgess:d,panelActionDisabled:f.length>rp||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?m.jsxs("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>m.jsx(Ere,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return m.jsxs("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(aN(s.generatedResponse),r({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",m.jsx(px,{icon:e3})]});let M=f.length/rp;return M>.8?m.jsxs("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:M>1?"var(--color-danger)":void 0},children:["Length: ",f.length,"/",rp]}):null},children:m.jsx(vre,{onChange:c,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{y.current()}})}),m.jsx(S9,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),yre({app:n,data:E})},label:"Insert",icon:e3},children:m.jsx(wre,{canvasRef:i,error:S,loaded:x.loaded})})]})]})]})})}),b$e=.01,Of=(e,t)=>!(t==="height"&&je(e)||t==="width"&&je(e)||t==="angle"&&at(e)),$i=(e,t)=>{let n=e+t/2;return n-n%t},k9=(e,t,n)=>Object.keys(e).map(r=>({original:(n??t).get(r),latest:t.get(r)})).filter(r=>r.original!==void 0&&r.latest!==void 0),ib=(e,t,n,r,i,s,o,a=!0)=>{let l=r.get(n.id);if(!l)return;let[f,c]=[n.x+n.width/2,n.y+n.height/2],[d,u]=pe(D(n.x,n.y),D(f,c),n.angle),h=e-d,g=t-u,[U,y]=pe(D(e,t),D(f+h,c+g),-n.angle);ye(l,{x:U,y},a),_A(l,r,i,s);let x=xt(n,o);if(x){let w=r.get(x.id);w&&ye(w,{x:x.x+h,y:x.y+g},a)}},lN=(e,t)=>{let n=Eh(t).map(r=>Cn(e,r).reduce((i,s)=>(i[s.id]=!0,i),{}));return e.filter(r=>!p6(r)).forEach(r=>{n.push({[r.id]:!0})}),n},_A=(e,t,n,r,i)=>{mt(e)?n9([e],t,n,r,!0,[],i==null?void 0:i.zoom):zs(e,t,i)},U$e=({label:e,icon:t,dragInputCallback:n,value:r,elements:i,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:f,sensitivity:c=1})=>{let d=yc(),u=I.useRef(null),h=I.useRef(null),[g,U]=I.useState(r.toString()),y=I.useRef(null);y.current||(y.current={originalAppState:vf(f),originalElements:i,lastUpdatedValue:g,updatePending:!1}),I.useEffect(()=>{let E=r.toString();U(E),y.current.lastUpdatedValue=E},[r]);let x=(E,S,A)=>{if(!y.current.updatePending)return!1;y.current.updatePending=!1;let M=Number(E);if(isNaN(M)){U(r.toString());return}let C=Number(M.toFixed(2)),T=Number(r);(isNaN(T)||Math.abs(C-T)>=b$e)&&(y.current.lastUpdatedValue=E,n({accumulatedChange:0,instantChange:0,originalElements:S,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:C,property:a,originalAppState:A,setInputValue:R=>U(String(R))}),d.syncActionResult({captureUpdate:me.IMMEDIATELY}))},w=I.useRef({});return w.current.handleInputValue=x,I.useEffect(()=>{let E=u.current,S=w.current;return()=>{var M;let A=E==null?void 0:E.value;A&&((M=S.handleInputValue)==null||M.call(S,A,y.current.originalElements,y.current.originalAppState)),window.removeEventListener("pointermove",S.onPointerMove,!1),window.removeEventListener("pointerup",S.onPointerUp,!1)}},[s]),s?m.jsxs("div",{className:ze("drag-input-container",!s&&"disabled"),"data-testid":e,children:[m.jsx("div",{className:"drag-input-label",ref:h,onPointerDown:E=>{if(u.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(u.current.value);let S=null,A=d.scene.getNonDeletedElements().reduce((O,F)=>(O.set(F.id,d1(F)),O),new Map),M=i.map(O=>A.get(O.id)),C=vf(f),T=0,R=0,P=O=>{if(S&&A!==null&&M!==null){let F=O.clientX-S.x;F!==0&&(R+=F,Math.abs(R)>=c&&(R=Math.sign(R)*Math.floor(Math.abs(R)/c),T+=R,n({accumulatedChange:T,instantChange:R,originalElements:M,originalElementsMap:A,shouldKeepAspectRatio:o,shouldChangeByStepSize:O.shiftKey,property:a,scene:l,originalAppState:C,setInputValue:B=>U(String(B))}),R=0))}S={x:O.clientX,y:O.clientY}},_=()=>{window.removeEventListener("pointermove",P,!1),d.syncActionResult({captureUpdate:me.IMMEDIATELY}),S=null,T=0,R=0,M=null,A=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener("pointerup",_,!1)};w.current.onPointerMove=P,w.current.onPointerUp=_,window.addEventListener("pointermove",P,!1),window.addEventListener("pointerup",_,!1)}},onPointerEnter:()=>{h.current&&(h.current.style.cursor="ew-resize")},children:t?m.jsx(px,{icon:t}):e}),m.jsx("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:E=>{if(s){let S=E.target;S instanceof HTMLInputElement&&E.key===Q.ENTER&&(x(S.value,i,f),d.focusContainer())}},ref:u,value:g,onChange:E=>{y.current.updatePending=!0,U(E.target.value)},onFocus:E=>{E.target.select(),y.current.originalElements=i,y.current.originalAppState=vf(f)},onBlur:E=>{g?s&&x(E.target.value,y.current.originalElements,y.current.originalAppState):U(r.toString())},disabled:!s})]}):null},Vf=U$e,Nz=10,y$e=e=>e.type==="image",x$e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:r,shouldChangeByStepSize:i,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:f})=>{let c=f.getNonDeletedElementsMap(),d=t[0],u=c.get(d.id);if(d&&u){let h=r||y$e(d),g=d.width/d.height;if(a.croppingElementId===d.id){let E=c.get(d.id);if(!E||!Zt(E)||!E.crop)return;let S=E.crop,A={...S},M=E.scale[0]===-1,C=E.scale[1]===-1,{width:T,height:R}=Tf(E),P=S.naturalWidth/T,_=S.naturalHeight/R,O=M?S.width+S.x:S.naturalWidth-S.x,F=C?S.height+S.y:S.naturalHeight-S.y,B=qr*P,$=qr*_;if(s!==void 0){if(o==="width"){let Y=s*P,K=Mt(Y,B,O);A={...A,width:K,x:M?S.x+S.width-K:S.x}}else if(o==="height"){let Y=s*_,K=Mt(Y,$,F);A={...A,height:K,y:C?S.y+S.height-K:S.y}}ye(E,{crop:A,width:A.width/(S.naturalWidth/T),height:A.height/(S.naturalHeight/R)});return}let z=o==="width"?l:0,H=o==="height"?l:0,G=Mt(S.width+z,B,O),V=Mt(S.height+H,B,F);A={...S,x:M?S.x+S.width-G:S.x,y:C?S.y+S.height-V:S.y,width:G,height:V},ye(E,{crop:A,width:A.width/(S.naturalWidth/T),height:A.height/(S.naturalHeight/R)});return}if(s!==void 0){let E=Math.max(o==="width"?s:h?s*g:d.width,Ho),S=Math.max(o==="height"?s:h?s/g:d.height,Ho);Q2(E,S,u,d,c,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h});return}let U=o==="width"?e:0,y=o==="height"?e:0,x=Math.max(0,d.width+U);o==="width"&&(i?x=$i(x,Nz):x=Math.round(x));let w=Math.max(0,d.height+y);o==="height"&&(i?w=$i(w,Nz):w=Math.round(w)),h&&(o==="width"?w=Math.round(x/g*100)/100:x=Math.round(w*g*100)/100),w=Math.max(Ho,w),x=Math.max(Ho,x),Q2(x,w,u,d,c,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h})}},v$e=({property:e,element:t,scene:n,appState:r})=>{let i=tc(e==="width"?t.width:t.height,2);if(r.croppingElementId&&r.croppingElementId===t.id&&Zt(t)&&t.crop){let{width:s,height:o}=Tf(t);if(e==="width"){let a=s/t.crop.naturalWidth;i=tc(t.crop.width*a,2)}if(e==="height"){let a=o/t.crop.naturalHeight;i=tc(t.crop.height*a,2)}}return m.jsx(Vf,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:x$e,value:i,editable:Of(t,e),scene:n,appState:r,property:e})},Rz=v$e,w$e=15,E$e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=i.getNonDeletedElements(),a=t[0];if(a&&!Fe(a)){let l=s.get(a.id);if(!l)return;if(r!==void 0){let g=xh(r);ye(l,{angle:g}),_A(l,s,o,i);let U=xt(l,s);U&&!Et(l)&&ye(U,{angle:g});return}let f=Math.round($b(a.angle)*100)/100,c=Math.round(e),d=(f+c)%360;n&&(d=$i(d,w$e)),d=d<0?d+360:d;let u=xh(d);ye(l,{angle:u}),_A(l,s,o,i);let h=xt(l,s);h&&!Et(l)&&ye(h,{angle:u})}},S$e=({element:e,scene:t,appState:n,property:r})=>m.jsx(Vf,{label:"A",icon:lq,value:Math.round($b(e.angle)%360*100)/100,elements:[e],dragInputCallback:E$e,editable:Of(e,"angle"),scene:t,appState:n,property:r}),k$e=S$e,_z=4,C$e=4,A$e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=t[0];if(o){let a=s.get(o.id);if(!a||!je(a))return;let l;if(r!==void 0)l=Math.max(Math.round(r),_z);else if(o.type==="text"){let f=Math.round(o.fontSize),c=Math.round(e);l=Math.max(f+c,_z),n&&(l=$i(l,C$e))}l&&(ye(a,{fontSize:l}),ps(a,i.getContainerElement(a),i.getNonDeletedElementsMap()))}},M$e=({element:e,scene:t,appState:n,property:r})=>{let i=je(e)?e:sa(e)?xt(e,t.getNonDeletedElementsMap()):null;return i?m.jsx(Vf,{label:"F",value:Math.round(i.fontSize*10)/10,elements:[i],dragInputCallback:A$e,icon:O7,appState:n,scene:t,property:r}):null},T$e=M$e,ip=10,I$e=(e,t,n,r)=>{let i=r.x-e,s=r.y-t,o=r.width*n,a=r.height*n,l=e+i*n,f=t+s*n;return{width:o,height:a,x:l,y:f,...SI(r,o,a,!1),...je(r)?{fontSize:r.fontSize*n}:{}}},N$e=(e,t,n,r,i,s,o,a)=>{let l=I$e(e,t,r,s);ye(i,l,!1);let f=xt(s,a);if(f){let c=f.fontSize*r;zs(i,o,{newSize:{width:l.width,height:l.height}});let d=o.get(f.id);d&&je(d)&&(ye(d,{fontSize:c},!1),Xb(i,o,n==="width"?"e":"s",!0))}},Pz=(e,t,n,r,i,s,o,a,l,f)=>{s==="width"?t=Math.round(e/r*100)/100:e=Math.round(t*r*100)/100;let c=t/n;for(let d=0;d<a.length;d++){let u=a[d],h=o[d];N$e(i[0],i[1],s,c,h,u,l,f)}},R$e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:r,shouldChangeByStepSize:i,nextValue:s,scene:o,property:a})=>{let l=o.getNonDeletedElementsMap(),f=lN(t,r);if(s!==void 0){for(let u of f){let h=k9(u,l,n);if(h.length>1){let g=h.map(R=>R.latest),U=h.map(R=>R.original),[y,x,w,E]=nn(U),S=w-y,A=E-x,M=S/A,C=Math.max(Ho,a==="width"?Math.max(0,s):S),T=Math.max(Ho,a==="height"?Math.max(0,s):A);Pz(C,T,A,M,D(y,x),a,g,U,l,n)}else{let[g]=h,U=g==null?void 0:g.latest,y=g==null?void 0:g.original;if(U&&y&&Of(U,a)){let x=a==="width"?Math.max(0,s):U.width;a==="width"&&(i?x=$i(x,ip):x=Math.round(x));let w=a==="height"?Math.max(0,s):U.height;a==="height"&&(i?w=$i(w,ip):w=Math.round(w)),x=Math.max(Ho,x),w=Math.max(Ho,w),Q2(x,w,U,y,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate();return}let c=a==="width"?e:0,d=a==="height"?e:0;for(let u of f){let h=k9(u,l,n);if(h.length>1){let g=h.map(R=>R.latest),U=h.map(R=>R.original),[y,x,w,E]=nn(U),S=w-y,A=E-x,M=S/A,C=Math.max(0,S+c);a==="width"&&(i?C=$i(C,ip):C=Math.round(C));let T=Math.max(0,A+d);a==="height"&&(i?T=$i(T,ip):T=Math.round(T)),C=Math.max(Ho,C),T=Math.max(Ho,T),Pz(C,T,A,M,D(y,x),a,g,U,l,n)}else{let[g]=h,U=g==null?void 0:g.latest,y=g==null?void 0:g.original;if(U&&y&&Of(U,a)){let x=Math.max(0,y.width+c);a==="width"&&(i?x=$i(x,ip):x=Math.round(x));let w=Math.max(0,y.height+d);a==="height"&&(i?w=$i(w,ip):w=Math.round(w)),x=Math.max(Ho,x),w=Math.max(Ho,w),Q2(x,w,U,y,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate()},_$e=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:s})=>{let o=I.useMemo(()=>r.map(f=>{let c=k9(f,n);if(c.length>1){let[u,h,g,U]=nn(c.map(y=>y.latest));return Math.round((e==="width"?g-u:U-h)*100)/100}let[d]=c;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,r,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return m.jsx(Vf,{label:e==="width"?"W":"H",elements:t,dragInputCallback:R$e,value:a,editable:l,appState:s,property:e,scene:i})},Dz=_$e,P$e=15,D$e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,property:i,scene:s})=>{let o=s.getNonDeletedElementsMap(),a=t.map(f=>o.get(f.id)).filter(f=>f&&!p6(f)&&Of(f,i)),l=t.filter(f=>!p6(f)&&Of(f,i));if(r!==void 0){let f=xh(r);for(let c of a){if(!c)continue;ye(c,{angle:f},!1);let d=xt(c,o);d&&!Et(c)&&ye(d,{angle:f},!1)}s.triggerUpdate();return}for(let f=0;f<a.length;f++){let c=a[f];if(!c)continue;let d=l[f],u=Math.round($b(d.angle)*100)/100,h=Math.round(e),g=(u+h)%360;n&&(g=$i(g,P$e)),g=g<0?g+360:g;let U=xh(g);ye(c,{angle:U},!1);let y=xt(c,o);y&&!Et(c)&&ye(y,{angle:U},!1)}s.triggerUpdate()},L$e=({elements:e,scene:t,appState:n,property:r})=>{let i=e.filter(l=>!p6(l)&&Of(l,"angle")),s=i.map(l=>Math.round($b(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=i.some(l=>Of(l,"angle"));return m.jsx(Vf,{label:"A",icon:lq,value:o,elements:e,dragInputCallback:D$e,editable:a,appState:n,scene:t,property:r})},O$e=L$e,Lz=4,j$e=4,B$e=(e,t)=>e.reduce((n,r)=>{if(!r||p6(r))return n;if(je(r))return n.push(r),n;if(sa(r)){let i=xt(r,t);if(i)return n.push(i),n}return n},[]),F$e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id)),a;if(r){a=Math.max(Math.round(r),Lz);for(let l of o)ye(l,{fontSize:a},!1),ps(l,i.getContainerElement(l),s,!1);i.triggerUpdate()}else{let l=t;for(let f=0;f<o.length;f++){let c=o[f],d=l[f],u=Math.round(d.fontSize),h=Math.round(e),g=Math.max(u+h,Lz);n&&(g=$i(g,j$e)),ye(c,{fontSize:g},!1),ps(c,i.getContainerElement(c),s,!1)}i.triggerUpdate()}},$$e=({elements:e,scene:t,appState:n,property:r,elementsMap:i})=>{let s=B$e(e,i);if(!s.length)return null;let o=s.map(f=>Math.round(f.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return m.jsx(Vf,{label:"F",icon:O7,elements:s,dragInputCallback:F$e,value:a,editable:l,scene:t,property:r,appState:n})},z$e=$$e,Oz=10,H$e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:r,shouldChangeByStepSize:i,nextValue:s,property:o,scene:a,originalAppState:l})=>{let f=a.getNonDeletedElementsMap(),c=a.getNonDeletedElements(),d=n[0],[u,h]=[d.x+d.width/2,d.y+d.height/2],[g,U]=pe(D(d.x,d.y),D(u,h),d.angle);if(l.croppingElementId===d.id){let S=f.get(d.id);if(!S||!Zt(S)||!S.crop)return;let A=S.crop,M=A,C=S.scale[0]===-1,T=S.scale[1]===-1,{width:R,height:P}=Tf(S);if(s!==void 0){if(o==="x"){let F=s*(A.naturalWidth/R);C?M={...A,x:Mt(A.naturalWidth-F-A.width,0,A.naturalWidth-A.width)}:M={...A,x:Mt(s*(A.naturalWidth/R),0,A.naturalWidth-A.width)}}o==="y"&&(M={...A,y:Mt(s*(A.naturalHeight/P),0,A.naturalHeight-A.height)}),ye(S,{crop:M});return}let _=(o==="x"?t:0)*(C?-1:1),O=(o==="y"?t:0)*(T?-1:1);M={...A,x:Mt(A.x+_,0,A.naturalWidth-A.width),y:Mt(A.y+O,0,A.naturalHeight-A.height)},ye(S,{crop:M});return}if(s!==void 0){ib(o==="x"?s:g,o==="y"?s:U,d,f,c,a,r);return}let y=o==="x"?e:0,x=o==="y"?e:0,w=o==="x"?Math.round(i?$i(d.x+y,Oz):g+y):g,E=o==="y"?Math.round(i?$i(d.y+x,Oz):U+x):U;ib(w,E,d,f,c,a,r)},V$e=({property:e,element:t,elementsMap:n,scene:r,appState:i})=>{let[s,o]=pe(D(t.x,t.y),D(t.x+t.width/2,t.y+t.height/2),t.angle),a=tc(e==="x"?s:o,2);if(i.croppingElementId===t.id&&Zt(t)&&t.crop){let l=FMe(t);l&&(a=tc(e==="x"?l.x:l.y,2))}return m.jsx(Vf,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:H$e,scene:r,value:a,property:e,appState:i})},jz=V$e,W$e=10,G$e=(e,t,n,r,i,s,o,a)=>{for(let l=0;l<r.length;l++){let f=i[l],[c,d]=[f.x+f.width/2,f.y+f.height/2],[u,h]=pe(D(f.x,f.y),D(c,d),f.angle),g=e==="x"?Math.round(u+t):u,U=e==="y"?Math.round(h+n):h;ib(g,U,f,s,r,a,o,!1)}},X$e=(e,t,n,r,i,s,o)=>{let[a,l,,]=nn(n),f=e-a,c=t-l;for(let d=0;d<n.length;d++){let u=n[d],h=r.get(u.id);if(h&&(!je(h)||!h.containerId)){let[g,U]=[h.x+h.width/2,h.y+h.height/2],[y,x]=pe(D(h.x,h.y),D(g,U),h.angle);ib(y+f,x+c,u,r,i,o,s,!1)}}},K$e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:r,nextValue:i,property:s,scene:o,originalAppState:a})=>{var d,u;let l=o.getNonDeletedElementsMap(),f=o.getNonDeletedElements();if(i!==void 0){for(let h of lN(t,a)){let g=k9(h,l,n);if(g.length>1){let[U,y,,]=nn(g.map(x=>x.latest));X$e(s==="x"?i:U,s==="y"?i:y,g.map(x=>x.original),l,f,n,o)}else{let U=(d=g[0])==null?void 0:d.original,y=(u=g[0])==null?void 0:u.latest;if(U&&y&&Of(y,s)){let[x,w]=[U.x+U.width/2,U.y+U.height/2],[E,S]=pe(D(U.x,U.y),D(x,w),U.angle);ib(s==="x"?i:E,s==="y"?i:S,U,l,f,o,n,!1)}}}o.triggerUpdate();return}let c=r?$i(e,W$e):e;G$e(s,s==="x"?c:0,s==="y"?c:0,t,t,l,n,o),o.triggerUpdate()},Y$e=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:s})=>{let o=I.useMemo(()=>r.map(l=>{let f=Object.keys(l).map(U=>n.get(U)).filter(U=>U!==void 0);if(f.length>1){let[U,y]=nn(f);return Math.round((e==="x"?U:y)*100)/100}let[c]=f,[d,u]=[c.x+c.width/2,c.y+c.height/2],[h,g]=pe(D(c.x,c.y),D(d,u),c.angle);return Math.round((e==="x"?h:g)*100)/100}),[r,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return m.jsx(Vf,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:K$e,value:a,property:e,scene:i,appState:s})},Bz=Y$e,Fz=5,Z$e=({property:e,scene:t,appState:n,setAppState:r})=>m.jsx(Vf,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:i,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{r(l=>{let f;return i?f=i:s&&(f=o?$i(l.gridStep+Fz*Math.sign(s),Fz):l.gridStep+s),f?(f=rQ(f),a(f),{gridStep:f}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),q$e=Z$e,Q$e=50,cN=e=>{let t=t8(),n=e.app.scene.getSceneNonce()||1,r=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),i=Y2(e.app);return m.jsx(J$e,{...e,appState:t,sceneNonce:n,selectedElements:r,gridModeEnabled:i})},kn=({children:e,columns:t=1,heading:n,style:r,...i})=>m.jsx("div",{className:ze("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...r},...i,children:e});kn.displayName="StatsRow";var C9=({children:e,order:t,style:n,...r})=>m.jsx("div",{className:"exc-stats__rows",style:{order:t,...n},...r,children:e});C9.displayName="StatsRows";cN.StatsRow=kn;cN.StatsRows=C9;var J$e=I.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:r,appState:i,sceneNonce:s,gridModeEnabled:o})=>{let a=e.scene,l=a.getNonDeletedElements(),f=a.getNonDeletedElementsMap(),c=Xr(),d=r.length===1?r[0]:null,u=r.length>1?r:null,h=i.croppingElementId&&Zt(d),g=h?Tf(d):null,[U,y]=I.useState({width:0,height:0}),x=I.useMemo(()=>jb(S=>{let A=nn(S);y({width:Math.round(A[2])-Math.round(A[0]),height:Math.round(A[3])-Math.round(A[1])})},Q$e),[]);I.useEffect(()=>{x(l)},[s,l,x]),I.useEffect(()=>()=>x.cancel(),[x]);let w=I.useMemo(()=>lN(r,i),[r,i]),E=I.useMemo(()=>nJ(r),[r]);return m.jsx("div",{className:"exc-stats",children:m.jsxs(el,{padding:3,children:[m.jsxs("div",{className:"title",children:[m.jsx("h2",{children:j("stats.title")}),m.jsx("div",{className:"close",onClick:t,children:R6})]}),m.jsxs(vA,{label:m.jsx("h3",{children:j("stats.generalStats")}),open:!!(i.stats.panels&Sp.generalStats),openTrigger:()=>c(S=>({stats:{open:!0,panels:S.stats.panels^Sp.generalStats}})),children:[m.jsxs(C9,{children:[m.jsx(kn,{heading:!0,children:j("stats.scene")}),m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.shapes")}),m.jsx("div",{children:l.length})]}),m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.width")}),m.jsx("div",{children:U.width})]}),m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.height")}),m.jsx("div",{children:U.height})]}),o&&m.jsxs(m.Fragment,{children:[m.jsx(kn,{heading:!0,children:"Canvas"}),m.jsx(kn,{children:m.jsx(q$e,{property:"gridStep",scene:a,appState:i,setAppState:c})})]})]}),n==null?void 0:n(l,i)]}),!E&&r.length>0&&m.jsx("div",{id:"elementStats",style:{marginTop:12},children:m.jsx(vA,{label:m.jsx("h3",{children:j("stats.elementProperties")}),open:!!(i.stats.panels&Sp.elementProperties),openTrigger:()=>c(S=>({stats:{open:!0,panels:S.stats.panels^Sp.elementProperties}})),children:m.jsxs(C9,{children:[d&&m.jsxs(m.Fragment,{children:[h&&m.jsx(kn,{heading:!0,children:j("labels.unCroppedDimension")}),i.croppingElementId&&Zt(d)&&g&&m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.width")}),m.jsx("div",{children:tc(g.width,2)})]}),i.croppingElementId&&Zt(d)&&g&&m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.height")}),m.jsx("div",{children:tc(g.height,2)})]}),m.jsx(kn,{heading:!0,"data-testid":"stats-element-type",children:i.croppingElementId?j("labels.imageCropping"):j(`element.${d.type}`)}),m.jsx(kn,{children:m.jsx(jz,{element:d,property:"x",elementsMap:f,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(jz,{element:d,property:"y",elementsMap:f,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Rz,{property:"width",element:d,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Rz,{property:"height",element:d,scene:a,appState:i})}),!Fe(d)&&m.jsx(kn,{children:m.jsx(k$e,{property:"angle",element:d,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(T$e,{property:"fontSize",element:d,scene:a,appState:i})})]}),u&&m.jsxs(m.Fragment,{children:[lQ(u)&&m.jsx(kn,{heading:!0,children:j("element.group")}),m.jsxs(kn,{columns:2,style:{margin:"0.3125rem 0"},children:[m.jsx("div",{children:j("stats.shapes")}),m.jsx("div",{children:r.length})]}),m.jsx(kn,{children:m.jsx(Bz,{property:"x",elements:u,elementsMap:f,atomicUnits:w,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Bz,{property:"y",elements:u,elementsMap:f,atomicUnits:w,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Dz,{property:"width",elements:u,elementsMap:f,atomicUnits:w,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Dz,{property:"height",elements:u,elementsMap:f,atomicUnits:w,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(O$e,{property:"angle",elements:u,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(z$e,{property:"fontSize",elements:u,scene:a,appState:i,elementsMap:f})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),eze=({sourceElementId:e,onClose:t,elementsMap:n,appState:r,generateLinkForSelection:i=DQ})=>{var d;let s=((d=n.get(e))==null?void 0:d.link)??null,[o,a]=I.useState(s),[l,f]=I.useState(!1);I.useEffect(()=>{let u=wt(n,r),h=s;if(u.length>0&&i){let g=LQ(u,r);g&&(h=po(i(g.id,g.type)))}a(h)},[n,r,r.selectedElementIds,s,i]);let c=I.useCallback(()=>{var u;if(o&&o!==((u=n.get(e))==null?void 0:u.link)){let h=n.get(e);h&&ye(h,{link:o})}if(!o&&l&&e){let h=n.get(e);h&&ye(h,{link:null})}t==null||t()},[e,o,n,l,t]);return I.useEffect(()=>{let u=h=>{var g,U;((g=r.openDialog)==null?void 0:g.name)==="elementLinkSelector"&&h.key===Q.ENTER&&c(),((U=r.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&h.key===Q.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[r,t,c]),m.jsxs("div",{className:"ElementLinkDialog",children:[m.jsxs("div",{className:"ElementLinkDialog__header",children:[m.jsx("h2",{children:j("elementLink.title")}),m.jsx("p",{children:j("elementLink.desc")})]}),m.jsxs("div",{className:"ElementLinkDialog__input",children:[m.jsx(iN,{value:o??"",onChange:u=>{l||f(!0),a(u)},onKeyDown:u=>{u.key===Q.ENTER&&c()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),s&&o&&m.jsx(jt,{type:"button",title:j("buttons.remove"),"aria-label":j("buttons.remove"),label:j("buttons.remove"),onClick:()=>{a(null),f(!0)},className:"ElementLinkDialog__remove",icon:Yh})]}),m.jsxs("div",{className:"ElementLinkDialog__actions",children:[m.jsx(w6,{label:j("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),m.jsx(w6,{label:j("buttons.confirm"),onClick:c,actionType:"primary"})]})]})},tze=eze,nze=({UIOptions:e})=>m.jsxs(As,{__fallback:!0,children:[m.jsx(As.DefaultItems.LoadScene,{}),m.jsx(As.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&m.jsx(As.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&m.jsx(As.DefaultItems.SaveAsImage,{}),m.jsx(As.DefaultItems.SearchMenu,{}),m.jsx(As.DefaultItems.Help,{}),m.jsx(As.DefaultItems.ClearCanvas,{}),m.jsx(As.Separator,{}),m.jsx(As.Group,{title:"Excalidraw links",children:m.jsx(As.DefaultItems.Socials,{})}),m.jsx(As.Separator,{}),m.jsx(As.DefaultItems.ToggleTheme,{}),m.jsx(As.DefaultItems.ChangeCanvasBackground,{})]}),rze=()=>m.jsxs(TS,{__fallback:!0,children:[m.jsx(TS.Actions.SaveToDisk,{}),m.jsx(TS.Actions.ExportToImage,{})]}),ize=({actionManager:e,appState:t,files:n,setAppState:r,elements:i,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:f,renderTopRightUI:c,renderCustomStats:d,UIOptions:u,onExportImage:h,renderWelcomeScreen:g,children:U,app:y,isCollaborating:x,generateLinkForSelection:w})=>{var z,H,G;let E=Gr(),S=VBe(),A=S.tunnelsJotai.Provider,[M,C]=ir(hx),T=()=>u.canvasActions.export?m.jsx(FFe,{elements:i,appState:t,files:n,actionManager:e,exportOpts:u.canvasActions.export,canvas:s,setAppState:r}):null,R=()=>{var V;return!u.canvasActions.saveAsImage||((V=t.openDialog)==null?void 0:V.name)!=="imageExport"?null:m.jsx(mFe,{elements:i,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>r({openDialog:null}),name:y.getName()})},P=()=>m.jsxs("div",{style:{position:"relative"},children:[m.jsx(S.MainMenuTunnel.Out,{}),g&&m.jsx(S.WelcomeScreenMenuHintTunnel.Out,{})]}),_=()=>m.jsx(rb,{heading:"selectedShapeActions",className:ze("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:m.jsx(el,{className:i6.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:m.jsx(Mne,{appState:t,elementsMap:y.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:y})})}),O=()=>{var K,q,se,de,xe;let V=CI(t,i),Y=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((K=t.openDialog)==null?void 0:K.name)!=="elementLinkSelector";return m.jsx(One,{side:"top",children:m.jsxs("div",{className:"App-menu App-menu_top",children:[m.jsxs(Yo.Col,{gap:6,className:ze("App-menu_top__left"),children:[P(),V&&_()]}),!t.viewModeEnabled&&((q=t.openDialog)==null?void 0:q.name)!=="elementLinkSelector"&&m.jsx(rb,{heading:"shapes",className:"shapes-section",children:ve=>m.jsxs("div",{style:{position:"relative"},children:[g&&m.jsx(S.WelcomeScreenToolbarHintTunnel.Out,{}),m.jsx(Yo.Col,{gap:4,align:"start",children:m.jsxs(Yo.Row,{gap:1,className:ze("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[m.jsxs(el,{padding:1,className:ze("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[m.jsx(Fne,{appState:t,isMobile:E.editor.isMobile,device:E,app:y}),ve,m.jsxs(Yo.Row,{gap:1,children:[m.jsx(zne,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:j("toolBar.penMode"),penDetected:t.penDetected}),m.jsx($ne,{checked:t.activeTool.locked,onChange:o,title:j("toolBar.lock")}),m.jsx("div",{className:"App-toolbar__divider"}),m.jsx(Hne,{checked:o6(t),onChange:()=>a(),title:j("toolBar.hand"),isMobile:!0}),m.jsx(Tne,{appState:t,activeTool:t.activeTool,UIOptions:u,app:y})]})]}),x&&m.jsx(el,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:m.jsx(o$e,{title:j("toolBar.laser"),checked:t.activeTool.type===zr.laser,onChange:()=>y.setActiveTool({type:zr.laser}),isMobile:!0})})]})})]})}),m.jsxs("div",{className:ze("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&m.jsx(Vne,{collaborators:t.collaborators,userToFollow:((se=t.userToFollow)==null?void 0:se.socketId)||null}),c==null?void 0:c(E.editor.isMobile,t),!t.viewModeEnabled&&((de=t.openDialog)==null?void 0:de.name)!=="elementLinkSelector"&&(!B||((xe=t.openSidebar)==null?void 0:xe.name)!==qa.name)&&m.jsx(S.DefaultSidebarTriggerTunnel.Out,{}),Y&&m.jsx(cN,{app:y,onClose:()=>{e.executeAction(kA)},renderCustomStats:d})]})]})})},F=()=>m.jsx(Tz,{__fallback:!0,onDock:V=>{xn("sidebar",`toggleDock (${V?"dock":"undock"})`,`(${E.editor.isMobile?"mobile":"desktop"})`)}}),B=Pte(sN),$=m.jsxs(m.Fragment,{children:[U,m.jsx(nze,{UIOptions:u}),m.jsx(Tz.Trigger,{__fallback:!0,icon:NT,title:$5(j("toolBar.library")),onToggle:V=>{V&&xn("sidebar",`${qa.name} (open)`,`button (${E.editor.isMobile?"mobile":"desktop"})`)},tab:qa.defaultTab,children:j("toolBar.library")}),m.jsx(rze,{}),((z=t.openDialog)==null?void 0:z.name)==="ttd"&&m.jsx(m$e,{__fallback:!0}),t.isLoading&&m.jsx(Ote,{delay:250}),t.errorMessage&&m.jsx(cFe,{onClose:()=>r({errorMessage:null}),children:t.errorMessage}),M&&!E.editor.isMobile&&m.jsx(OOe,{colorPickerType:M.colorPickerType,onCancel:()=>{C(null)},onChange:(V,Y,K,{altKey:q})=>{var se;if(!(V!=="elementBackground"&&V!=="elementStroke"))if(K.length){for(let de of K)ye(de,{[q&&M.swapPreviewOnAlt?V==="elementBackground"?"strokeColor":"backgroundColor":V==="elementBackground"?"backgroundColor":"strokeColor"]:Y},!1),Vn.delete(de);(se=_f.getScene(K[0]))==null||se.triggerUpdate()}else r(V==="elementBackground"?{currentItemBackgroundColor:Y}:{currentItemStrokeColor:Y})},onSelect:(V,Y)=>{var K;C(q=>q!=null&&q.keepOpenOnAlt&&Y.altKey?q:null),(K=M==null?void 0:M.onSelect)==null||K.call(M,V,Y)}}),((H=t.openDialog)==null?void 0:H.name)==="help"&&m.jsx(PFe,{onClose:()=>{r({openDialog:null})}}),m.jsx(YBe,{}),((G=t.openDialog)==null?void 0:G.name)==="elementLinkSelector"&&m.jsx(tze,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{r({openDialog:null})},elementsMap:y.scene.getNonDeletedElementsMap(),appState:t,generateLinkForSelection:w}),m.jsx(S.OverwriteConfirmDialogTunnel.Out,{}),R(),T(),t.pasteDialog.shown&&m.jsx(MFe,{setAppState:r,appState:t,onClose:()=>r({pasteDialog:{shown:!1,data:null}})}),E.editor.isMobile&&m.jsx(AFe,{app:y,appState:t,elements:i,actionManager:e,renderJSONExportDialog:T,renderImageExportDialog:R,setAppState:r,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:c,renderCustomStats:d,renderSidebars:F,device:E,renderWelcomeScreen:g,UIOptions:u}),!E.editor.isMobile&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"layer-ui__wrapper",style:t.openSidebar&&B&&E.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[g&&m.jsx(S.WelcomeScreenCenterTunnel.Out,{}),O(),m.jsx(zFe,{appState:t,actionManager:e,showExitZenModeBtn:f,renderWelcomeScreen:g}),t.scrolledOutside&&m.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(V=>({...X2(i,V)}))},children:j("buttons.scrollBackToContent")})]}),F()]})]});return m.jsx(Xte.Provider,{value:t,children:m.jsx(A,{children:m.jsx(kne.Provider,{value:S,children:$})})})},$z=e=>{let{suggestedBindings:t,startBoundElement:n,cursorButton:r,scrollX:i,scrollY:s,...o}=e;return o},sze=(e,t)=>{if(e.children!==t.children)return!1;let{canvas:n,appState:r,...i}=e,{canvas:s,appState:o,...a}=t;return Si($z(r),$z(o),{selectedElementIds:Si,selectedGroupIds:Si})&&Si(i,a)},oze=Te.memo(ize,sze),aze=5e3,lze=({message:e,onClose:t,closable:n=!1,duration:r=aze,style:i})=>{let s=I.useRef(0),o=r!==1/0,a=I.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),r))},[t,r,o]);return I.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,r,o]),m.jsxs("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:i,children:[m.jsx("p",{className:"Toast__message",children:e}),n&&m.jsx(jt,{icon:R6,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},zz=_e({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:LT,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:me.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===zt.R}),Cre=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length===1&&at(n[0])},cze=_e({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;if(at(i)){let s=hc(Un(e),i.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:me.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:me.EVENTUALLY}},predicate:(e,t,n,r)=>Cre(t,r)}),fze=_e({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;return at(i)?{elements:JQ(e,i),appState:{...t,selectedElementIds:{[i.id]:!0}},captureUpdate:me.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:me.EVENTUALLY}},predicate:(e,t,n,r)=>Cre(t,r)});_e({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:me.EVENTUALLY}),checked:e=>e.frameRendering.enabled});_e({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:fq,viewMode:!1,perform:(e,t,n,r)=>{let i=yr(t,{type:"frame"});return Il(r.interactiveCanvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:yr(t,{type:"frame"})},captureUpdate:me.EVENTUALLY}},keyTest:e=>!e[Q.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===Q.F});var dze=_e({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=wt(e,t);return i.length>0&&!i.some(s=>at(s))},perform:(e,t,n,r)=>{let i=wt(e,t),[s,o,a,l]=nn(i,r.scene.getNonDeletedElementsMap()),f=16,c=XT({x:s-f,y:o-f,width:a-s+f*2,height:l-o+f*2});if(t.editingGroupId){let d=Cn(i,t.editingGroupId);for(let u of d){let h=u.groupIds.indexOf(t.editingGroupId);ye(u,{groupIds:u.groupIds.slice(0,h)},!1)}}return{elements:W5([...r.scene.getElementsIncludingDeleted(),c],i,c,t),appState:{selectedElementIds:{[c.id]:!0}},captureUpdate:me.IMMEDIATELY}}}),uze=()=>m.jsxs("div",{"data-testid":"brave-measure-text-error",children:[m.jsx("p",{children:m.jsx(Jl,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>m.jsx("span",{style:{fontWeight:600},children:e})})}),m.jsx("p",{children:m.jsx(Jl,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>m.jsx("span",{style:{fontWeight:600},children:e})})}),m.jsx("p",{children:m.jsx(Jl,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>m.jsx("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),m.jsx("p",{children:m.jsx(Jl,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>m.jsxs("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),hze=uze,yy={width:100,height:0},d0=100,pze=(e,t,n)=>{let r=bo({x:0,y:0,textAlign:F2.CENTER,verticalAlign:ho.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:r.id})}),ps(r,e,n),[e,r]},Hz=(e,t,n,r,i)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){let c=(t==null?void 0:t.width)??d0,d=(t==null?void 0:t.height)??d0,u;t.id&&(u=r.getElement(t.id),u||console.error(`No element for start binding with id ${t.id} found`));let h=t.x||e.x-c,g=t.y||e.y-d/2,U=u?u.type:t.type;if(U){if(U==="text"){let y="";u&&u.type==="text"?y=u.text:t.type==="text"&&(y=t.text),y||console.error(`No text found for start binding text element for ${e.id}`),s=bo({x:h,y:g,type:"text",...u,...t,text:y}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(U){case"rectangle":case"ellipse":case"diamond":{s=dc({x:h,y:g,width:c,height:d,...u,...t,type:U});break}default:Xh(e,`Unhandled element start type "${t.type}"`,!0)}cc(e,s,"start",i)}}if(n){let c=(n==null?void 0:n.height)??d0,d=(n==null?void 0:n.width)??d0,u;n.id&&(u=r.getElement(n.id),u||console.error(`No element for end binding with id ${n.id} found`));let h=n.x||e.x+e.width,g=n.y||e.y-c/2,U=u?u.type:n.type;if(U){if(U==="text"){let y="";u&&u.type==="text"?y=u.text:n.type==="text"&&(y=n.text),y||console.error(`No text found for end binding text element for ${e.id}`),o=bo({x:h,y:g,type:"text",...u,...n,text:y}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(U){case"rectangle":case"ellipse":case"diamond":{o=dc({x:h,y:g,width:d,height:c,...u,...n,type:U});break}default:Xh(e,`Unhandled element end type "${U}"`,!0)}cc(e,o,"end",i)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};let a=e.points.length-1,l=.5,f=vf(e.points);return e.points[a][0]>e.points[a-1][0]&&(f[0][0]=l,f[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(f[0][0]=-l,f[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(f[0][1]=l,f[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(f[0][1]=-l,f[a][1]+=l),Object.assign(e,{points:f}),{linearElement:e,startBoundElement:s,endBoundElement:o}},mze=class{constructor(){Z(this,"excalidrawElements",new Map),Z(this,"add",e=>{e&&this.excalidrawElements.set(e.id,e)}),Z(this,"getElements",()=>Rf(Array.from(this.excalidrawElements.values()))),Z(this,"getElementsMap",()=>ra(ct(this.getElements()))),Z(this,"getElement",e=>this.excalidrawElements.get(e))}},PA=(e,t)=>{var a,l,f;if(!e)return[];let n=vf(e),r=new mze,i=new Map,s=new Map;for(let c of n){let d,u=c.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(c,{id:oa()}),c.type){case"rectangle":case"ellipse":case"diamond":{let h=(a=c==null?void 0:c.label)!=null&&a.text&&c.width===void 0?0:(c==null?void 0:c.width)||d0,g=(l=c==null?void 0:c.label)!=null&&l.text&&c.height===void 0?0:(c==null?void 0:c.height)||d0;d=dc({...c,width:h,height:g});break}case"line":{let h=c.width||yy.width,g=c.height||yy.height;d=Sh({width:h,height:g,points:[D(0,0),D(h,g)],...c});break}case"arrow":{let h=c.width||yy.width,g=c.height||yy.height;d=KT({width:h,height:g,endArrowhead:"arrow",points:[D(0,0),D(h,g)],...c,type:"arrow"}),Object.assign(d,h6(d.points));break}case"text":{let h=(c==null?void 0:c.fontFamily)||F0,g=(c==null?void 0:c.fontSize)||$f,U=(c==null?void 0:c.lineHeight)||qh(h),y=c.text??"",x=f6(y),w=Xi(x,cn({fontFamily:h,fontSize:g}),U);d=bo({width:w.width,height:w.height,fontFamily:h,fontSize:g,...c});break}case"image":{d=yQ({width:(c==null?void 0:c.width)||d0,height:(c==null?void 0:c.height)||d0,...c});break}case"frame":{d=XT({x:0,y:0,...c});break}case"magicframe":{d=XC({x:0,y:0,...c});break}case"freedraw":case"iframe":case"embeddable":{d=c;break}default:d=c,Xh(c,`Unhandled element type "${c.type}"`,!0)}r.getElement(d.id)?console.error(`Duplicate id found for ${d.id}`):(r.add(d),i.set(d.id,c),u&&s.set(u,d.id))}let o=r.getElementsMap();for(let[c,d]of i){let u=r.getElement(c);switch(d.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((f=d.label)!=null&&f.text){let[h,g]=pze(u,d==null?void 0:d.label,o);if(r.add(h),r.add(g),Et(h)){let U=d.type==="arrow"?d==null?void 0:d.start:void 0,y=d.type==="arrow"?d==null?void 0:d.end:void 0;if(U&&U.id){let S=s.get(U.id);S&&Object.assign(U,{id:S})}if(y&&y.id){let S=s.get(y.id);S&&Object.assign(y,{id:S})}let{linearElement:x,startBoundElement:w,endBoundElement:E}=Hz(h,U,y,r,o);h=x,r.add(x),r.add(w),r.add(E)}}else switch(d.type){case"arrow":{let{start:h,end:g}=d;if(h&&h.id){let w=s.get(h.id);Object.assign(h,{id:w})}if(g&&g.id){let w=s.get(g.id);Object.assign(g,{id:w})}let{linearElement:U,startBoundElement:y,endBoundElement:x}=Hz(u,h,g,r,o);r.add(U),r.add(y),r.add(x);break}}break}}}for(let[c,d]of i){if(d.type!=="frame"&&d.type!=="magicframe")continue;let u=r.getElement(c);if(!u)throw new Error(`Excalidraw element with id ${c} doesn't exist`);let h=[];d.children.forEach(C=>{var P;let T=s.get(C);if(!T)throw new Error(`Element with ${C} wasn't mapped correctly`);let R=r.getElement(T);if(!R)throw new Error(`Frame element with id ${T} doesn't exist`);Object.assign(R,{frameId:u.id}),(P=R==null?void 0:R.boundElements)==null||P.forEach(_=>{let O=r.getElement(_.id);if(!O)throw new Error(`Bound element with id ${_.id} doesn't exist`);Object.assign(O,{frameId:u.id}),h.push(O)}),h.push(R)});let[g,U,y,x]=nn(h),w=10;g=g-w,U=U-w,y=y+w,x=x+w;let E=(u==null?void 0:u.x)||g,S=(u==null?void 0:u.y)||U,A=(u==null?void 0:u.width)||y-g,M=(u==null?void 0:u.height)||x-U;Object.assign(u,{x:E,y:S,width:A,height:M}),zZ()&&d.children.length&&(u!=null&&u.x||u!=null&&u.y||u!=null&&u.width||u!=null&&u.height)&&console.info("User provided frame attributes are being considered, if you find this inaccurate, please remove any of the attributes - x, y, width and height so frame coordinates and dimensions are calculated automatically")}return r.getElements()},qn=e=>t=>{ri.unstable_batchedUpdates(e,t)},NS=e=>R7(t=>{ri.unstable_batchedUpdates(e,t)}),fN=(()=>{let e;try{let n=I.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),gze="#ff6b6b",bze="#ff0000",Vz=1,Wz=2,Uze=(e,t)=>{if(!t.snapLines.length)return;let n=t.theme===Nt.LIGHT||t.zenModeEnabled?gze:bze,r=(t.zenModeEnabled?Vz*1.5:Vz)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(let i of t.snapLines)i.type==="pointer"?(e.lineWidth=r,e.strokeStyle=n,xze(i,e,t)):i.type==="gap"?(e.lineWidth=r,e.strokeStyle=n,vze(i.points[0],i.points[1],i.direction,t,e)):i.type==="points"&&(e.lineWidth=r,e.strokeStyle=n,yze(i,e,t));e.restore()},yze=(e,t,n)=>{if(!n.zenModeEnabled){let r=e.points[0],i=e.points[e.points.length-1];_o(r,i,t)}for(let r of e.points)Are(r,n,t)},xze=(e,t,n)=>{Are(e.points[0],n,t),n.zenModeEnabled||_o(e.points[0],e.points[1],t)},Are=([e,t],n,r)=>{r.save();let i=(n.zenModeEnabled?Wz*1.5:Wz)/n.zoom.value;r.beginPath(),r.moveTo(e-i,t-i),r.lineTo(e+i,t+i),r.moveTo(e+i,t-i),r.lineTo(e-i,t+i),r.stroke(),r.restore()},_o=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},vze=(e,t,n,r,i)=>{let s=8/r.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){let l=[(e[0]+t[0])/2,e[1]];r.zenModeEnabled||_o(D(e[0],e[1]-s),D(e[0],e[1]+s),i),_o(D(l[0]-a,l[1]-o),D(l[0]-a,l[1]+o),i),_o(D(l[0]+a,l[1]-o),D(l[0]+a,l[1]+o),i),r.zenModeEnabled||(_o(D(t[0],t[1]-s),D(t[0],t[1]+s),i),_o(e,t,i))}else{let l=[e[0],(e[1]+t[1])/2];r.zenModeEnabled||_o(D(e[0]-s,e[1]),D(e[0]+s,e[1]),i),_o(D(l[0]-o,l[1]-a),D(l[0]+o,l[1]-a),i),_o(D(l[0]-o,l[1]+a),D(l[0]+o,l[1]+a),i),r.zenModeEnabled||(_o(D(t[0]-s,t[1]),D(t[0]+s,t[1]),i),_o(e,t,i))}},wze=(e,t)=>{Gi(t.selectedLinearElement,"selectedLinearElement is null");let{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;Gi(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),Mre(n,e,t),e.restore()},Eze=(e,t,n)=>{var a,l;let{elementId:r,hoverPointIndex:i}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(i))return;let s=Be.getElement(r,n);if(!s)return;let o=Be.getPointAtIndexGlobalCoordinates(s,i,n);e.save(),e.translate(t.scrollX,t.scrollY),Mre(o,e,t),e.restore()},Mre=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",Z7(t,e[0],e[1],Be.POINT_HANDLE_SIZE/n.zoom.value,!1)},Jb=(e,t,n,r,i,s,o,a,l=!1,f=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,r,i),f&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,r,i,f),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,r,i),e.restore()},Sze=(e,t,n,r,i,s)=>{e.save(),e.translate(r,i),e.rotate(s),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()},RS=(e,t,n,r,i,s=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",i?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),Z7(e,n[0],n[1],r/t.zoom.value,!s)},kze=(e,t,n,r,i,s)=>{e.beginPath(),e.ellipse(r,i,t/2,n/2,s,0,Math.PI*2),e.stroke()},Cze=(e,t,n,r)=>{let[i,s,o,a]=gt(t,n),l=o-i,f=a-s;e.strokeStyle="rgba(0,0,0,.05)";let c=r.value<1?r.value:1;e.lineWidth=VT/c;let d=e.lineWidth/2+WT,u=Qa(Math.min(t.width,t.height),t);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":Jb(e,i-d,s-d,l+d*2,f+d*2,i+l/2,s+f/2,t.angle,void 0,u);break;case"diamond":let h=Math.hypot(l,f),g=d*h/f,U=d*h/l;Sze(e,l+g*2,f+U*2,i+l/2,s+f/2,t.angle);break;case"ellipse":kze(e,l+d*2,f+d*2,i+l/2,s+f/2,t.angle);break}},Aze=(e,t,n,r)=>{let[i,s,o]=t,a=Gb(o,o.width,o.height,r);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(l=>{let[f,c]=Be.getPointAtIndexGlobalCoordinates(i,l,n);Z7(e,f,c,a)})},Tre=(e,t,n)=>{let{angle:r,x1:i,y1:s,x2:o,y2:a,selectionColors:l,cx:f,cy:c,dashed:d,activeEmbeddable:u}=n,h=o-i,g=a-s,U=(n.padding??Wh*2)/t.zoom.value,y=8/t.zoom.value,x=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(u?4:1)/t.zoom.value;let w=l.length;for(let E=0;E<w;++E)e.strokeStyle=l[E],d&&e.setLineDash([y,x+(y+x)*(w-1)]),e.lineDashOffset=(y+x)*E,Jb(e,i-U,s-U,h+U*2,g+U*2,f,c,r);e.restore()},Mze=(e,t,n,r)=>{let i=Array.isArray(n)?Aze:Cze;e.save(),e.translate(t.scrollX,t.scrollY),i(e,n,r,t.zoom),e.restore()},Tze=(e,t,n,r)=>{let[i,s,o,a]=gt(n,r),l=o-i,f=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=zn.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Jb(e,i,s,l,f,i+l/2,s+f/2,n.angle,!1,zn.radius/t.zoom.value),e.restore()},Ize=(e,t,n)=>{let r=n.filter(a=>a.groupIds.length===0),i=n.filter(a=>a.groupIds.length>0),s=a=>{let[l,f,c,d]=nn(a);return{angle:0,x1:l,x2:c,y1:f,y2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(c-l)/2,cy:f+(d-f)/2,activeEmbeddable:!1}},o=a=>{let l=Cn(n,a);return s(l)};Object.entries(aQ(i,t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>o(a)).concat(r.map(a=>s([a]))).forEach(a=>Tre(e,t,a))},_S=(e,t,n,r)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;let i=Be.getPointsGlobalCoordinates(n,r),{POINT_HANDLE_SIZE:s}=Be,o=t.editingLinearElement?s:s/2;if(i.forEach((l,f)=>{var d,u;if(Fe(n)&&f!==0&&f!==i.length-1)return;let c=!!((u=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&u.includes(f));RS(e,t,l,o,c)}),Fe(n)){let l=((a=n.fixedSegments)==null?void 0:a.map(f=>f.index))||[];i.slice(0,-1).forEach((f,c)=>{Be.isSegmentTooShort(n,i[c+1],i[c],c,t.zoom)||RS(e,t,D((f[0]+i[c+1][0])/2,(f[1]+i[c+1][1])/2),s/2,!1,!l.includes(c+1))})}else Be.getEditorMidPoints(n,r,t).filter((l,f,c)=>l!==null&&!(Fe(n)&&(f===0||f===c.length-1))).forEach(l=>{(t.editingLinearElement||i.length===2)&&RS(e,t,l,s/2,!1,!0)});e.restore()},Gz=(e,t,n,r,i)=>{Object.keys(r).forEach(s=>{let o=r[s];if(o!==void 0){let[a,l,f,c]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?Z7(e,a+f/2,l+c/2,f/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,f,c,2/n.zoom.value),e.fill(),e.stroke()):Jb(e,a,l,f,c,a+f/2,l+c/2,i,!0),e.restore()}})},Nze=(e,t,n,r,i)=>{let[s,o,,,a,l]=gt(r,i),f=3,c=20,d=f/n.zoom.value,u=d/2,h=a-s+d,g=l-o+d,U=Math.min(c/n.zoom.value,h),y=Math.min(c/n.zoom.value,g);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-g],[0,u],[U,u],[u,0],[u,y]],[[h-u,-g],[u,u],[-U+u,u],[0,0],[0,y]],[[-h,g],[0,-u],[U,-u],[u,0],[u,-y]],[[h-u,g],[u,-u],[-U+u,-u],[0,0],[0,-y]]].forEach(x=>{let[[w,E],[S,A],[M,C],[T,R],[P,_]]=x;e.save(),e.translate(a,l),e.rotate(r.angle),e.beginPath(),e.moveTo(w+S,E+A),e.lineTo(w+M,E+C),e.stroke(),e.beginPath(),e.moveTo(w+T,E+R),e.lineTo(w+P,E+_),e.stroke(),e.restore()}),e.restore()},Rze=(e,t,n,r)=>{t.save();let i=Wh*2/n.zoom.value,s=e.width+i*2,o=e.height+i*2,a=e.x+s/2,l=e.y+o/2,f=-(s/2+i),c=-(o/2+i);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(f,c,s,o),t.restore()},Ire=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:r,allElementsMap:i,scale:s,appState:o,renderConfig:a,device:l})=>{var U,y,x;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};let[f,c]=JT(e,s),d=eI({canvas:e,scale:s,normalizedWidth:f,normalizedHeight:c});d.save(),d.scale(o.zoom.value,o.zoom.value);let u;if(n.forEach(w=>{var E;((E=o.editingLinearElement)==null?void 0:E.elementId)===w.id&&w&&(u=w)}),u&&_S(d,o,u,t),o.selectionElement&&!o.isCropping)try{WMe(o.selectionElement,d,o,a.selectionColor)}catch(w){console.error(w)}if(o.editingTextElement&&je(o.editingTextElement)){let w=i.get(o.editingTextElement.id);w&&!w.autoResize&&Rze(w,d,o,a.selectionColor)}o.isBindingEnabled&&o.suggestedBindings.filter(w=>w!=null).forEach(w=>{Mze(d,o,w,t)}),o.frameToHighlight&&Tze(d,o,o.frameToHighlight,t),o.elementsToHighlight&&Ize(d,o,o.elementsToHighlight);let h=r.some(w=>at(w));if(r.length===1&&((U=o.editingLinearElement)==null?void 0:U.elementId)===r[0].id&&_S(d,o,r[0],t),Fe(r[0])&&o.selectedLinearElement&&o.selectedLinearElement.segmentMidPointHoveredCoords?wze(d,o):o.selectedLinearElement&&o.selectedLinearElement.hoverPointIndex>=0&&!(Fe(r[0])&&o.selectedLinearElement.hoverPointIndex>0&&o.selectedLinearElement.hoverPointIndex<r[0].points.length-1)&&Eze(d,o,t),!o.multiElement&&!o.editingLinearElement){let w=lJ(r,o),E=r.length===1&&mt(r[0]);E&&((y=o.selectedLinearElement)==null?void 0:y.elementId)===r[0].id&&!r[0].locked&&_S(d,o,r[0],t);let S=a.selectionColor||ai.black;if(w){let A=ct(r),M=[];for(let T of t.values()){let R=[],P=a.remoteSelectedElementIds.get(T.id);if(E&&Fe(T)&&(T.startBinding||T.endBinding)||(A.has(T.id)&&!sQ(o,T)&&R.push(S),P&&R.push(...P.map(_=>Ux(_,o.collaborators.get(_))))),R.length){let[_,O,F,B,$,z]=gt(T,t,!0);M.push({angle:T.angle,x1:_,y1:O,x2:F,y2:B,selectionColors:R,dashed:!!P,cx:$,cy:z,activeEmbeddable:((x=o.activeEmbeddable)==null?void 0:x.element)===T&&o.activeEmbeddable.state==="active",padding:T.id===o.croppingElementId||Zt(T)?0:void 0})}}let C=T=>{let R=Cn(t,T),[P,_,O,F]=nn(R);M.push({angle:0,x1:P,x2:O,y1:_,y2:F,selectionColors:[ai.black],dashed:!0,cx:P+(O-P)/2,cy:_+(F-_)/2,activeEmbeddable:!1})};for(let T of Eh(o))C(T);o.editingGroupId&&C(o.editingGroupId),M.forEach(T=>Tre(d,o,T))}if(d.save(),d.translate(o.scrollX,o.scrollY),r.length===1){d.fillStyle=ai.white;let A=aJ(r[0],o.zoom,t,"mouse",G5(l));if(!o.viewModeEnabled&&w&&!je(o.editingTextElement)&&!o.croppingElementId&&Gz(d,a,o,A,r[0].angle),o.croppingElementId&&!o.isCropping){let M=t.get(o.croppingElementId);M&&Zt(M)&&Nze(d,a,o,M,t)}}else if(r.length>1&&!o.isRotating){let A=Wh*2/o.zoom.value;d.fillStyle=ai.white;let[M,C,T,R]=nn(r),P=d.getLineDash();d.setLineDash([2/o.zoom.value]);let _=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=S,Jb(d,M-A,C-A,T-M+A*2,R-C+A*2,(M+T)/2,(C+R)/2,0),d.lineWidth=_,d.setLineDash(P);let O=EI([M,C,T,R,(M+T)/2,(C+R)/2],0,o.zoom,"mouse",h?{...G5(l),rotation:!0}:G5(l));r.some(F=>!F.locked)&&Gz(d,a,o,O,0)}d.restore()}o.searchMatches.forEach(({id:w,focus:E,matchedLines:S})=>{let A=t.get(w);if(A&&je(A)){let[M,C,,,T,R]=gt(A,t,!0);d.save(),o.theme===Nt.LIGHT?E?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":E?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)",d.translate(o.scrollX,o.scrollY),d.translate(T,R),d.rotate(A.angle),S.forEach(P=>{d.fillRect(M+P.offsetX-T,C+P.offsetY-R,P.width,P.height)}),d.restore()}}),Uze(d,o),d.restore(),Uje({context:d,renderConfig:a,appState:o,normalizedWidth:f,normalizedHeight:c});let g;return a.renderScrollbars&&(g=kFe(n,f,c,o),d.save(),d.fillStyle=SFe,d.strokeStyle="rgba(255,255,255,0.8)",[g.horizontal,g.vertical].forEach(w=>{w&&cne(d,w.x,w.y,w.width,w.height,f0/2)}),d.restore()),{scrollBars:g,atLeastOneVisibleElement:n.length>0,elementsMap:t}},Nre=R7(e=>{var n;let t=Ire(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),_ze=(e,t)=>{if(t){Nre(e);return}let n=Ire(e);return e.callback(n),n},Pze=e=>{let t=I.useRef(!1);return I.useEffect(()=>{var l;if(!t.current){t.current=!0;return}let n=new Map,r=new Map,i=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((f,c)=>{if(f.selectedElementIds)for(let d of Object.keys(f.selectedElementIds))i.has(d)||i.set(d,[]),i.get(d).push(c);!f.pointer||f.pointer.renderCursor===!1||(f.username&&s.set(c,f.username),f.userState&&o.set(c,f.userState),r.set(c,Wa({sceneX:f.pointer.x,sceneY:f.pointer.y},e.appState)),n.set(c,f.button))});let a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";_ze({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:r,remotePointerButton:n,remoteSelectedElementIds:i,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:!1},device:e.device,callback:e.renderInteractiveSceneCallback},fN())}),m.jsx("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?rn.GRAB:rn.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:j("labels.drawingCanvas")})},Xz=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),Dze=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements?!1:Si(Xz(e.appState),Xz(t.appState)),Lze=Te.memo(Pze,Dze),Oze=e=>{let t=I.useRef(null),n=I.useRef(!1);return I.useEffect(()=>{let r=t.current;if(!r)return;let i=e.canvas;n.current||(n.current=!0,r.replaceChildren(i),i.classList.add("excalidraw__canvas","static"));let s=`${e.appState.width}px`,o=`${e.appState.height}px`;i.style.width!==s&&(i.style.width=s),i.style.height!==o&&(i.style.height=o);let a=e.appState.width*e.scale,l=e.appState.height*e.scale;i.width!==a&&(i.width=a),i.height!==l&&(i.height=l),BQ({canvas:i,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},fN())}),m.jsx("div",{className:"excalidraw__canvas-wrapper",ref:t})},Kz=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),jze=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:Si(Kz(e.appState),Kz(t.appState))&&Si(e.renderConfig,t.renderConfig),Bze=Te.memo(Oze,jze),Yz=class{constructor(e){Z(this,"scene"),Z(this,"getRenderableElements",(()=>{let t=({elementsMap:r,zoom:i,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:f,width:c})=>{let d=[];for(let u of r.values())u9(u,c,f,{zoom:i,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},r)&&d.push(u);return d},n=({elements:r,editingTextElement:i,newElementId:s,pendingImageElementId:o})=>{let a=ra(new Map);for(let l of r)Zt(l)&&o===l.id||s!==l.id&&(!i||i.type!=="text"||l.id!==i.id)&&a.set(l.id,l);return a};return Eve(({zoom:r,offsetLeft:i,offsetTop:s,scrollX:o,scrollY:a,height:l,width:f,editingTextElement:c,newElementId:d,pendingImageElementId:u,sceneNonce:h})=>{let g=this.scene.getNonDeletedElements(),U=n({elements:g,editingTextElement:c,newElementId:d,pendingImageElementId:u}),y=t({elementsMap:U,zoom:r,offsetLeft:i,offsetTop:s,scrollX:o,scrollY:a,height:l,width:f});return{elementsMap:U,visibleElements:y}})})()),this.scene=e}destroy(){Nre.cancel(),jQ.cancel(),this.getRenderableElements.clear()}},Fze=({trails:e})=>{let t=I.useRef(null);return I.useEffect(()=>{if(t.current)for(let n of e)n.start(t.current);return()=>{for(let n of e)n.stop()}},e),m.jsx("div",{className:"SVGLayer",children:m.jsx("svg",{ref:t})})},$ze=5,zze=(e,t,n)=>{let[r,i]=gt(e,n),{x:s,y:o}=Wa({sceneX:r+e.width,sceneY:i},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},Zz=({children:e,element:t,elementsMap:n})=>{let r=t8();if(r.contextMenu||r.newElement||r.resizingElement||r.isRotating||r.openMenu||r.viewModeEnabled)return null;let{x:i,y:s}=zze(t,r,n);return m.jsx("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${i}px`,padding:$ze},children:e})},Hze="small",PS=e=>m.jsxs("label",{className:ze("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${Hze}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m.jsx("div",{className:"ToolIcon__icon",children:e.icon})]}),Vze=({height:e,width:t,userToFollow:n,onDisconnect:r})=>m.jsx("div",{className:"follow-mode",style:{width:t,height:e},children:m.jsxs("div",{className:"follow-mode__badge",children:[m.jsxs("div",{className:"follow-mode__badge__label",children:["Following"," ",m.jsx("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),m.jsx("button",{type:"button",onClick:r,className:"follow-mode__disconnect-btn",children:R6})]})}),Wze=Vze,Gze=class{constructor(){Z(this,"targets",new WeakMap),Z(this,"rafIds",new WeakMap)}register(e,t){this.targets.set(e,{callback:t,stopped:!0})}start(e){let t=this.targets.get(e);t&&(this.rafIds.has(e)||(this.targets.set(e,{...t,stopped:!1}),this.scheduleFrame(e)))}stop(e){let t=this.targets.get(e);t&&!t.stopped&&this.targets.set(e,{...t,stopped:!0}),this.cancelFrame(e)}constructFrame(e){return t=>{let n=this.targets.get(e);if(!n)return;let r=this.onFrame(n,t);!n.stopped&&!r?this.scheduleFrame(e):this.cancelFrame(e)}}scheduleFrame(e){let t=requestAnimationFrame(this.constructFrame(e));this.rafIds.set(e,t)}cancelFrame(e){if(this.rafIds.has(e)){let t=this.rafIds.get(e);cancelAnimationFrame(t)}this.rafIds.delete(e)}onFrame(e,t){return e.callback(t)??!1}},DA=class{constructor(e,t,n){this.animationFrameHandler=e,this.app=t,this.options=n,Z(this,"currentTrail"),Z(this,"pastTrails",[]),Z(this,"container"),Z(this,"trailElement"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(Ht,"path")}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(e,t){if(this.currentTrail){let n=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[n-1][0]===e&&this.currentTrail.originalPoints[n-1][1]===t}return!1}start(e){e&&(this.container=e),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var e;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((e=this.container)==null||e.removeChild(this.trailElement))}startPath(e,t){this.currentTrail=new x9(this.options),this.currentTrail.addPoint([e,t,performance.now()]),this.update()}addPointToPath(e,t){this.currentTrail&&(this.currentTrail.addPoint([e,t,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){let e=[];for(let n of this.pastTrails)e.push(this.drawTrail(n,this.app.state));if(this.currentTrail){let n=this.drawTrail(this.currentTrail,this.app.state);e.push(n)}this.pastTrails=this.pastTrails.filter(n=>n.getStrokeOutline().length!==0),e.length===0&&this.stop();let t=e.join(" ").trim();this.trailElement.setAttribute("d",t),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(e,t){let n=e.getStrokeOutline(e.options.size/t.zoom.value).map(([r,i])=>{let s=Wa({sceneX:r,sceneY:i},t);return[s.x,s.y]});return Sve(n,!0)}},Xze=class{constructor(e,t){this.animationFrameHandler=e,this.app=t,Z(this,"localTrail"),Z(this,"collabTrails",new Map),Z(this,"container"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new DA(e,t,{...this.getTrailOptions(),fill:()=>kxe})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:e=>{let t=Math.max(0,1-(performance.now()-e.pressure)/1e3),n=(50-Math.min(50,e.totalLength-e.currentIndex))/50;return Math.min(vh(n),vh(t))}}}startPath(e,t){this.localTrail.startPath(e,t)}addPointToPath(e,t){this.localTrail.addPointToPath(e,t)}endPath(){this.localTrail.endPath()}start(e){this.container=e,this.animationFrameHandler.start(this),this.localTrail.start(e)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(let[e,t]of this.app.state.collaborators.entries()){let n;this.collabTrails.has(e)?n=this.collabTrails.get(e):(n=new DA(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=t.pointer)==null?void 0:r.laserColor)||Ux(e,t)}}),n.start(this.container),this.collabTrails.set(e,n)),t.pointer&&t.pointer.tool==="laser"&&(t.button==="down"&&!n.hasCurrentTrail&&n.startPath(t.pointer.x,t.pointer.y),t.button==="down"&&n.hasCurrentTrail&&!n.hasLastPoint(t.pointer.x,t.pointer.y)&&n.addPointToPath(t.pointer.x,t.pointer.y),t.button==="up"&&n.hasCurrentTrail&&(n.addPointToPath(t.pointer.x,t.pointer.y),n.endPath()))}for(let e of this.collabTrails.keys())this.app.state.collaborators.has(e)||(this.collabTrails.get(e).stop(),this.collabTrails.delete(e))}}},Kze=(e,t,n,r,i,s)=>{let{zoom:o}=r,a=180*n/Math.PI,l=e*(o.value-1)/2,f=t*(o.value-1)/2;return e>i&&o.value!==1&&(l=i*(o.value-1)/2),t>s&&o.value!==1&&(f=s*(o.value-1)/2),`translate(${l}px, ${f}px) scale(${o.value}) rotate(${a}deg)`},Yze=({id:e,onChange:t,onSubmit:n,getViewportCoords:r,element:i,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{let f=($,z)=>{if(!z.style.fontFamily||!z.style.fontSize)return!1;let H=z.style.fontFamily.replace(/"/g,"");return a6({fontFamily:$.fontFamily})!==H||`${$.fontSize}px`!==z.style.fontSize},c=()=>{var Y;let $=a.state,z=(Y=_f.getScene(i))==null?void 0:Y.getElement(e);if(!z)return;let{textAlign:H,verticalAlign:G}=z,V=a.scene.getNonDeletedElementsMap();if(z&&je(z)){let K=z.x,q=z.y,se=fi(z,a.scene.getNonDeletedElementsMap()),de=z.width,xe=z.height,ve=z.width,ue=z.height;if(se&&z.containerId){if(Et(se)){let Bt=Be.getBoundTextElementPosition(se,z,V);K=Bt.x,q=Bt.y}let ht=f(z,d),ot;if(ht?ot=i9(se.id,se.height):(ot=g6[se.id],ot||(ot=i9(se.id,se.height))),ve=Nf(se,z),ue=Y7(se,z),!Et(se)&&xe>ue){let Bt=Jh(xe,se.type);ye(se,{height:Bt});return}else if(!Et(se)&&se.height>ot.height&&xe<ue){let Bt=Jh(xe,se.type);ye(se,{height:Bt})}else{let{y:Bt}=K7(se,z,V);q=Bt}}let[te,le]=r(K,q),he=d.selectionStart,we=d.selectionEnd,Se=d.value.length;if(he===we&&we!==Se){let ht=Se-we;d.selectionStart=d.value.length-ht,d.selectionEnd=d.value.length-ht}se?de+=.5:(ve=($.width-8-te)/$.zoom.value,de=Math.min(de,ve)),xe*=1.05;let De=cn(z),Ge=($.height-le)/$.zoom.value;Object.assign(d.style,{font:De,lineHeight:z.lineHeight,width:`${de}px`,height:`${xe}px`,left:`${te}px`,top:`${le}px`,transform:Kze(de,xe,rIe(z,se),$,ve,Ge),textAlign:H,verticalAlign:G,color:z.strokeColor,opacity:z.opacity/100,filter:"var(--theme-filter)",maxHeight:`${Ge}px`}),d.scrollTop=0,Af()&&(d.style.fontFamily=a6(z)),ye(z,{x:K,y:q})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let u="pre",h="normal";(Mn(i)||!i.autoResize)&&(u="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:u,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=i.originalText,c(),t&&(d.onpaste=async $=>{let z=await KQ($,!0);if(!z.text)return;let H=f6(z.text);if(!H)return;let G=fi(i,a.scene.getNonDeletedElementsMap()),V=cn({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(G){let Y=xt(G,a.scene.getNonDeletedElementsMap()),K=f1(`${d.value}${H}`,V,Nf(G,Y)),q=TT(K,V);d.style.width=`${q}px`}},d.oninput=()=>{let $=f6(d.value);if(d.value!==$){let z=d.selectionStart;d.value=$,d.selectionStart=z,d.selectionEnd=z}t(d.value)}),d.onkeydown=$=>{if(!$.shiftKey&&Z$.keyTest($))$.preventDefault(),a.actionManager.executeAction(Z$),c();else if(!$.shiftKey&&q$.keyTest($))$.preventDefault(),a.actionManager.executeAction(q$),c();else if(!$.shiftKey&&Q$.keyTest($))$.preventDefault(),a.actionManager.executeAction(Q$),c();else if(X$.keyTest($))a.actionManager.executeAction(X$);else if(K$.keyTest($))a.actionManager.executeAction(K$);else if($.key===Q.ESCAPE)$.preventDefault(),A=!0,M();else if($.key===Q.ENTER&&$[Q.CTRL_OR_CMD]){if($.preventDefault(),$.isComposing||$.keyCode===229)return;A=!0,M()}else if($.key===Q.TAB||$[Q.CTRL_OR_CMD]&&($.code===zt.BRACKET_LEFT||$.code===zt.BRACKET_RIGHT)){if($.preventDefault(),$.isComposing)return;$.shiftKey||$.code===zt.BRACKET_LEFT?w():x(),d.dispatchEvent(new Event("input"))}};let g=4,U=" ".repeat(g),y=new RegExp(`^ {1,${g}}`),x=()=>{let{selectionStart:$,selectionEnd:z}=d,H=E(),G=d.value;H.forEach(V=>{let Y=G.slice(0,V),K=G.slice(V);G=`${Y}${U}${K}`}),d.value=G,d.selectionStart=$+g,d.selectionEnd=z+g*H.length},w=()=>{let{selectionStart:$,selectionEnd:z}=d,H=E(),G=[],V=d.value;H.forEach(Y=>{let K=V.slice(Y,Y+g).match(y);if(K){let q=V.slice(0,Y),se=V.slice(Y+K[0].length);V=`${q}${se}`,G.push(Y)}}),d.value=V,G.length&&($>G[G.length-1]?d.selectionStart=Math.max($-g,G[G.length-1]):d.selectionStart=$,d.selectionEnd=Math.max(d.selectionStart,z-g*G.length))},E=()=>{let{selectionStart:$,selectionEnd:z,value:H}=d,G=H.slice(0,$).match(/[^\n]*$/)[0].length;return $=$-G,H.slice($,z).split(`
`).reduce((V,Y,K,q)=>V.concat(K?V[K-1]+q[K-1].length+1:$),[]).reverse()},S=$=>{$.target instanceof HTMLCanvasElement&&($.preventDefault(),$.stopPropagation())},A=!1,M=()=>{var H,G;if(F)return;F=!0,C();let $=(H=_f.getScene(i))==null?void 0:H.getElement(i.id);if(!$)return;let z=fi($,a.scene.getNonDeletedElementsMap());if(z){if(d.value.trim()){let V=If(z);!V||V!==i.id?ye(z,{boundElements:(z.boundElements||[]).concat({type:"text",id:i.id})}):Et(z)&&ex(z)}else ye(z,{boundElements:(G=z.boundElements)==null?void 0:G.filter(V=>!je(V))});ps($,z,a.scene.getNonDeletedElementsMap())}n({viaKeyboard:A,nextOriginalText:d.value})},C=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,B&&B.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("wheel",S,!0),window.removeEventListener("pointerdown",P),window.removeEventListener("pointerup",T),window.removeEventListener("blur",M),window.removeEventListener("beforeunload",M),_(),O(),d.remove()},T=$=>{window.removeEventListener("pointerup",T);let z=$==null?void 0:$.target,H=z instanceof HTMLElement&&z.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=M,H||d.focus()})},R=()=>{d.onblur=null,window.addEventListener("pointerup",T),window.addEventListener("blur",M)},P=$=>{let z=$==null?void 0:$.target;if($.button===Cd.WHEEL){z instanceof HTMLTextAreaElement&&($.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag($)),R();return}let H=z instanceof HTMLElement&&z.classList.contains("properties-trigger");($.target instanceof HTMLElement||$.target instanceof SVGElement)&&$.target.closest(`.${i6.SHAPE_ACTIONS_MENU}, .${i6.ZOOM_ACTIONS}`)&&!Eu($.target)||H?R():$.target instanceof HTMLCanvasElement&&!Af()&&requestAnimationFrame(()=>{M()})},_=a.scene.onUpdate(()=>{var $;c(),($=document.activeElement)!=null&&$.closest(".properties-content")||d.focus()}),O=a.onScrollChangeEmitter.on(()=>{c()}),F=!1;l&&d.select(),T();let B=null;s&&"ResizeObserver"in window?(B=new window.ResizeObserver(()=>{c()}),B.observe(s)):window.addEventListener("resize",c),d.onpointerdown=$=>$.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",P,{capture:!0})}),window.addEventListener("beforeunload",M),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d)},Zze=_e({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=wt(e,t);return i.length===1&&je(i[0])&&!i[0].autoResize},perform:(e,t,n,r)=>{let i=wt(e,t);return{appState:t,elements:e.map(s=>{if(s.id===i[0].id&&je(s)){let o=Xi(s.originalText,cn(s),s.lineHeight);return yt(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:me.IMMEDIATELY}}}),qze=e=>{let t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(n=>`\\s*${n}(-beta)?`).join("|")})\\b`).test(e.trim())},Rre=({canvas:e,rc:t,newElement:n,elementsMap:r,allElementsMap:i,scale:s,appState:o,renderConfig:a})=>{if(e){let[l,f]=JT(e,s),c=eI({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:f});c.save(),c.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?yu(n,r,i,t,c,a,o):c.clearRect(0,0,l,f)}},Qze=R7(e=>{Rre(e)},{trailing:!0}),Jze=(e,t)=>{if(t){Qze(e);return}Rre(e)},eHe=e=>{let t=I.useRef(null);return I.useEffect(()=>{t.current&&Jze({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},fN())}),m.jsx("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},tHe=eHe,_re=Te.createContext(null),Pre=Te.createContext(null),Dre={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},dN=Te.createContext(Dre);dN.displayName="DeviceContext";var uN=Te.createContext({container:null,id:null});uN.displayName="ExcalidrawContainerContext";var hN=Te.createContext([]);hN.displayName="ExcalidrawElementsContext";var pN=Te.createContext({...lc(),width:0,height:0,offsetLeft:0,offsetTop:0});pN.displayName="ExcalidrawAppStateContext";var mN=Te.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});mN.displayName="ExcalidrawSetAppStateContext";var gN=Te.createContext(null);gN.displayName="ExcalidrawActionManagerContext";var yc=()=>I.useContext(_re),e8=()=>I.useContext(Pre),Gr=()=>I.useContext(dN),xc=()=>I.useContext(uN),xx=()=>I.useContext(hN),t8=()=>I.useContext(pN),Xr=()=>I.useContext(mN),Gs=()=>I.useContext(gN),Gg=!1,DS=0,fu=!1,Xg=!1,LS=!1,OS={horizontal:null,vertical:null},wd=0,Kg=!1,jS=new Map,xy=!1,qz=0,Qz=!1,du=null,Kt={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},nHe=class Lre extends Te.Component{constructor(t){super(t),Z(this,"canvas"),Z(this,"interactiveCanvas",null),Z(this,"rc"),Z(this,"unmounted",!1),Z(this,"actionManager"),Z(this,"device",Dre),Z(this,"excalidrawContainerRef",Te.createRef()),Z(this,"scene"),Z(this,"fonts"),Z(this,"renderer"),Z(this,"visibleElements"),Z(this,"resizeObserver"),Z(this,"nearestScrollableContainer"),Z(this,"library"),Z(this,"libraryItemsFromStorage"),Z(this,"id"),Z(this,"store"),Z(this,"history"),Z(this,"excalidrawContainerValue"),Z(this,"files",{}),Z(this,"imageCache",new Map),Z(this,"iFrameRefs",new Map),Z(this,"embedsValidationStatus",new Map),Z(this,"initializedEmbeds",new Set),Z(this,"elementsPendingErasure",new Set),Z(this,"flowChartCreator",new xFe),Z(this,"flowChartNavigator",new yFe),Z(this,"hitLinkElement"),Z(this,"lastPointerDownEvent",null),Z(this,"lastPointerUpEvent",null),Z(this,"lastPointerMoveEvent",null),Z(this,"lastPointerMoveCoords",null),Z(this,"lastViewportPosition",{x:0,y:0}),Z(this,"animationFrameHandler",new Gze),Z(this,"laserTrails",new Xze(this.animationFrameHandler,this)),Z(this,"eraserTrail",new DA(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:c=>{let d=Math.max(0,1-(performance.now()-c.pressure)/200),u=(10-Math.min(10,c.totalLength-c.currentIndex))/10;return Math.min(vh(u),vh(d))},fill:()=>this.state.theme===Nt.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"})),Z(this,"onChangeEmitter",new _l),Z(this,"onPointerDownEmitter",new _l),Z(this,"onPointerUpEmitter",new _l),Z(this,"onUserFollowEmitter",new _l),Z(this,"onScrollChangeEmitter",new _l),Z(this,"missingPointerEventCleanupEmitter",new _l),Z(this,"onRemoveEventListenersEmitter",new _l),Z(this,"getEffectiveGridSize",()=>Y2(this)?this.state.gridSize:null),Z(this,"updateEmbedValidationStatus",(c,d)=>{this.embedsValidationStatus.set(c.id,d),Vn.delete(c)}),Z(this,"updateEmbeddables",()=>{let c=new Set,d=!1;this.scene.getNonDeletedElements().filter(u=>{if(Rs(u)){if(c.add(u.id),!this.embedsValidationStatus.has(u.id)){d=!0;let h=s3(u.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(u,h)}}else _d(u)&&c.add(u.id);return!1}),d&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((u,h)=>{c.has(h)||this.iFrameRefs.delete(h)})}),Z(this,"getFrameNameDOMId",c=>`${this.id}-frame-name-${c.id}`),Z(this,"frameNameBoundsCache",{get:c=>{let d=this.frameNameBoundsCache._cache.get(c.id);if(!d||d.zoom!==this.state.zoom.value||d.versionNonce!==c.versionNonce){let u=document.getElementById(this.getFrameNameDOMId(c));if(u){let h=u.getBoundingClientRect(),g=yn({clientX:h.x,clientY:h.y},this.state),U=yn({clientX:h.right,clientY:h.bottom},this.state);return d={x:g.x,y:g.y,width:U.x-g.x,height:U.y-g.y,angle:0,zoom:this.state.zoom.value,versionNonce:c.versionNonce},this.frameNameBoundsCache._cache.set(c.id,d),d}return null}return d},_cache:new Map}),Z(this,"resetEditingFrame",c=>{var d;c&&ye(c,{name:((d=c.name)==null?void 0:d.trim())||null}),this.setState({editingFrame:null})}),Z(this,"renderFrameNames",()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;let c=this.state.theme===Nt.DARK;return this.scene.getNonDeletedFramesLikes().map(d=>{if(!u9(d,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===d.id&&this.resetEditingFrame(d),null;let{x:u,y:h}=Wa({sceneX:d.x,sceneY:d.y},this.state),g=6,U,y=tJ(d);if(d.id===this.state.editingFrame){let x=y;U=m.jsx("input",{autoFocus:!0,value:x,onChange:w=>{ye(d,{name:w.target.value})},onFocus:w=>w.target.select(),onBlur:()=>this.resetEditingFrame(d),onKeyDown:w=>{(w.key===Q.ESCAPE||w.key===Q.ENTER)&&this.resetEditingFrame(d)},style:{background:this.state.viewBackgroundColor,filter:c?wT:"none",zIndex:2,border:"none",display:"block",padding:`${g}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${g}px, ${g}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-u-g}px`},size:x.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else U=y;return m.jsx("div",{id:this.getFrameNameDOMId(d),style:{position:"absolute",bottom:`${this.state.height+zn.nameOffsetY-h+this.state.offsetTop}px`,left:`${u-this.state.offsetLeft}px`,zIndex:2,fontSize:zn.nameFontSize,color:c?zn.nameColorDarkTheme:zn.nameColorLightTheme,lineHeight:zn.nameLineHeight,width:"max-content",maxWidth:`${d.width}px`,overflow:d.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:rn.MOVE,pointerEvents:this.state.viewModeEnabled?Z1.disabled:Z1.enabled},onPointerDown:x=>this.handleCanvasPointerDown(x),onWheel:x=>this.handleWheel(x),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:d.id})},children:U},d.id)})}),Z(this,"focusContainer",()=>{var c;(c=this.excalidrawContainerRef.current)==null||c.focus()}),Z(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted()),Z(this,"getSceneElements",()=>this.scene.getNonDeletedElements()),Z(this,"onInsertElements",c=>{this.addElementsFromPasteOrLibrary({elements:c,position:"center",files:null})}),Z(this,"onExportImage",async(c,d,u)=>{xn("export",c,"ui");let h=await bx(c,d,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:u.exportingFrame}).catch(FZ).catch(g=>{console.error(g),this.setState({errorMessage:g.message})});this.state.exportEmbedScene&&h&&AI(h)&&this.setState({fileHandle:h})}),Z(this,"magicGenerations",new Map),Z(this,"updateMagicGeneration",({frameElement:c,data:d})=>{d.status==="pending"?ye(c,{customData:{generationData:void 0}},!1):ye(c,{customData:{generationData:d}},!1),this.magicGenerations.set(c.id,d),this.triggerRender()}),Z(this,"plugins",{}),Z(this,"onMagicframeToolSelect",()=>{let c=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(c.length===0)this.setActiveTool({type:zr.magicframe}),xn("ai","tool-select (empty-selection)","d2c");else{let d=c.length===1&&Jy(c[0])&&c[0];if(!d&&c.some(h=>at(h)||h.frameId)){this.setActiveTool({type:zr.magicframe});return}xn("ai","tool-select (existing selection)","d2c");let u;if(d)u=d;else{let[h,g,U,y]=nn(c),x=50;u=XC({...zn,x:h-x,y:g-x,width:U-h+x*2,height:y-g+x*2,opacity:100,locked:!1}),this.scene.insertElement(u);for(let w of c)ye(w,{frameId:u.id});this.setState({selectedElementIds:{[u.id]:!0}})}this.onMagicFrameGenerate(u,"upstream")}}),Z(this,"openEyeDropper",({type:c})=>{Ya.set(hx,{swapPreviewOnAlt:!0,colorPickerType:c==="stroke"?"elementStroke":"elementBackground",onSelect:(d,u)=>{let h=c==="background"&&u.altKey||c==="stroke"&&!u.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?h?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:d},captureUpdate:me.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:d},captureUpdate:me.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(g=>this.state.selectedElementIds[g.id]?yt(g,{[h?"strokeColor":"backgroundColor"]:d}):g),captureUpdate:me.IMMEDIATELY})},keepOpenOnAlt:!1})}),Z(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})}),Z(this,"syncActionResult",qn(c=>{var h,g,U,y,x,w;if(this.unmounted||c===!1)return;c.captureUpdate===me.NEVER?this.store.shouldUpdateSnapshot():c.captureUpdate===me.IMMEDIATELY&&this.store.shouldCaptureIncrement();let d=!1,u=null;if(c.elements&&(this.scene.replaceAllElements(c.elements),d=!0),c.files&&(this.addMissingFiles(c.files,c.replaceFiles),this.addNewImagesToImageCache()),c.appState||u||this.state.contextMenu){let E=((h=c==null?void 0:c.appState)==null?void 0:h.viewModeEnabled)||!1,S=((g=c==null?void 0:c.appState)==null?void 0:g.zenModeEnabled)||!1,A=((U=c==null?void 0:c.appState)==null?void 0:U.theme)||this.props.theme||Nt.LIGHT,M=((y=c==null?void 0:c.appState)==null?void 0:y.name)??this.state.name,C=((x=c==null?void 0:c.appState)==null?void 0:x.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(E=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(S=this.props.zenModeEnabled),u=((w=c.appState)==null?void 0:w.editingTextElement)||null,c.elements&&u&&c.elements.forEach(T=>{(u==null?void 0:u.id)===T.id&&u!==T&&nA(T)&&je(T)&&(u=T)}),u!=null&&u.isDeleted&&(u=null),this.setState(T=>{let R=c.appState||{};return{...T,...R,contextMenu:null,editingTextElement:u,viewModeEnabled:E,zenModeEnabled:S,theme:A,name:M,errorMessage:C}}),d=!0}!d&&c.captureUpdate!==me.EVENTUALLY&&this.scene.triggerUpdate()})),Z(this,"onBlur",qn(()=>{fu=!1,this.setState({isBindingEnabled:!0})})),Z(this,"onUnload",()=>{this.onBlur()}),Z(this,"disableEvent",c=>{c.preventDefault()}),Z(this,"resetHistory",()=>{this.history.clear()}),Z(this,"resetStore",()=>{this.store.clear()}),Z(this,"resetScene",qn(c=>{this.scene.replaceAllElements([]),this.setState(d=>({...lc(),isLoading:c!=null&&c.resetLoadingState?!1:d.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()})),Z(this,"initializeScene",async()=>{var u;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async h=>{if(!h.files.length)return;let g=h.files[0],U=await g.getFile();this.loadFileToCanvas(new File([U],U.name||"",{type:U.type}),g)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let c=null;try{typeof this.props.initialData=="function"?c=await this.props.initialData()||null:c=await this.props.initialData||null,c!=null&&c.libraryItems&&this.library.updateLibrary({libraryItems:c.libraryItems,merge:!0}).catch(h=>{console.error(h)})}catch(h){console.error(h),c={appState:{errorMessage:h.message||"Encountered an error during importing or restoring scene data"}}}let d=q7(c,null,null,{repairBindings:!0});d.appState={...d.appState,theme:this.props.theme||d.appState.theme,openSidebar:((u=d.appState)==null?void 0:u.openSidebar)||this.state.openSidebar,activeTool:d.appState.activeTool.type==="image"?{...d.appState.activeTool,type:"selection"}:d.appState.activeTool,isLoading:!1,toast:this.state.toast},c!=null&&c.scrollToContent&&(d.appState={...d.appState,...X2(d.elements,{...d.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...d,captureUpdate:me.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(h=>{this.fonts.onLoaded(h)}),V5(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})}),Z(this,"isMobileBreakpoint",(c,d)=>c<Lxe||d<jxe&&c<Oxe),Z(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;let{clientWidth:c,clientHeight:d}=document.body,u=this.device.viewport,h=qy(u,{isLandscape:c>d,isMobile:this.isMobileBreakpoint(c,d)});return u!==h?(this.device={...this.device,viewport:h},!0):!1}),Z(this,"refreshEditorBreakpoints",()=>{let c=this.excalidrawContainerRef.current;if(!c)return;let{width:d,height:u}=c.getBoundingClientRect(),h=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Bxe,g=this.device.editor,U=qy(g,{isMobile:this.isMobileBreakpoint(d,u),canFitSidebar:d>h});return g!==U?(this.device={...this.device,editor:U},!0):!1}),Z(this,"onResize",qn(()=>{this.scene.getElementsIncludingDeleted().forEach(c=>Vn.delete(c)),this.refreshViewportBreakpoints(),this.updateDOMRect(),MC||this.refreshEditorBreakpoints(),this.setState({})})),Z(this,"onFullscreenChange",()=>{var c;!document.fullscreenElement&&((c=this.state.activeEmbeddable)==null?void 0:c.state)==="active"&&this.setState({activeEmbeddable:null})}),Z(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:c,scrollBars:d,elementsMap:u})=>{d&&(OS=d);let h=this.state.editingTextElement?!1:!c&&u.size>0;this.state.scrolledOutside!==h&&this.setState({scrolledOutside:h}),this.scheduleImageRefresh()}),Z(this,"onScroll",l6(()=>{let{offsetTop:c,offsetLeft:d}=this.getCanvasOffsets();this.setState(u=>u.offsetLeft===d&&u.offsetTop===c?null:{offsetTop:c,offsetLeft:d})},Pxe)),Z(this,"onCut",qn(c=>{var d;!((d=this.excalidrawContainerRef.current)!=null&&d.contains(document.activeElement))||Eu(c.target)||(this.actionManager.executeAction(iz,"keyboard",c),c.preventDefault(),c.stopPropagation())})),Z(this,"onCopy",qn(c=>{var d;!((d=this.excalidrawContainerRef.current)!=null&&d.contains(document.activeElement))||Eu(c.target)||(this.actionManager.executeAction(m3,"keyboard",c),c.preventDefault(),c.stopPropagation())})),Z(this,"onTouchStart",c=>{if(AZ&&c.preventDefault(),!Gg){Gg=!0,clearTimeout(DS),DS=window.setTimeout(Lre.resetTapTwice,Rxe);return}if(Gg&&c.touches.length===1){let d=c.touches[0];this.handleCanvasDoubleClick({clientX:d.clientX,clientY:d.clientY}),Gg=!1,clearTimeout(DS)}c.touches.length===2&&this.setState({selectedElementIds:Yt({},this.state),activeEmbeddable:null})}),Z(this,"onTouchEnd",c=>{this.resetContextMenuTimer(),c.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:Yt(this.state.previousSelectedElementIds,this.state)}):Kt.pointers.clear()}),Z(this,"pasteFromClipboard",qn(async c=>{var E,S;let d=!!xy,u=document.activeElement,h=(E=this.excalidrawContainerRef.current)==null?void 0:E.contains(u);if(c&&!h)return;let g=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(c&&(!(g instanceof HTMLCanvasElement)||Eu(u)))return;let{x:U,y}=yn({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),x=(S=c==null?void 0:c.clipboardData)==null?void 0:S.files[0],w=await KQ(c,d);if(!x&&!d){if(w.mixedContent)return this.addElementsFromMixedContentPaste(w.mixedContent,{isPlainPaste:d,sceneX:U,sceneY:y});if(w.text){let A=w.text.trim();A.startsWith("<svg")&&A.endsWith("</svg>")&&(x=QF(A))}}if(kh(x)&&!w.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:j("errors.imageToolNotSupported")});return}let A=this.createImageElement({sceneX:U,sceneY:y});this.insertImageElement(A,x),this.initializeImageDimensions(A),this.setState({selectedElementIds:Yt({[A.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(w,c)===!1)return}catch(A){console.error(A)}if(w.errorMessage)this.setState({errorMessage:w.errorMessage});else if(w.spreadsheet&&!d)this.setState({pasteDialog:{data:w.spreadsheet,shown:!0}});else if(w.elements){let A=w.programmaticAPI?PA(w.elements):w.elements;this.addElementsFromPasteOrLibrary({elements:A,files:w.files||null,position:"cursor",retainSeed:d})}else if(w.text){if(w.text&&qze(w.text)){let C=await Ve(()=>import("./index-CFimzDzW.js").then(T=>T.aR),[]);try{let{elements:T,files:R}=await C.parseMermaidToExcalidraw(w.text),P=PA(T,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:P,files:R,position:"cursor"});return}catch(T){console.warn(`parsing pasted text as mermaid definition failed: ${T.message}`)}}let A=WZ(w.text).split(/\n+/).map(C=>C.trim()).filter(Boolean),M=A.map(C=>RIe(C)).filter(C=>{var T;return s3(C,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(C)||((T=Mp(C))==null?void 0:T.type)==="video")});if(!xy&&M.length>0&&M.length===A.length){let C=[];for(let T of M){let R=C[C.length-1],P=this.insertEmbeddableElement({sceneX:R?R.x+R.width+20:U,sceneY:y,link:po(T)});P&&C.push(P)}C.length&&this.setState({selectedElementIds:Object.fromEntries(C.map(T=>[T.id,!0]))});return}this.addTextFromPaste(w.text,d)}this.setActiveTool({type:"selection"}),c==null||c.preventDefault()})),Z(this,"addElementsFromPasteOrLibrary",c=>{var $,z;let d=fI(c.elements,null,void 0),[u,h,g,U]=nn(d),y=Fi(u,g)/2,x=Fi(h,U)/2,w=typeof c.position=="object"?c.position.clientX:c.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,E=typeof c.position=="object"?c.position.clientY:c.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:S,y:A}=yn({clientX:w,clientY:E},this.state),M=S-y,C=A-x,[T,R]=Ir(M,C,this.getEffectiveGridSize()),P=wQ(d.map(H=>yt(H,{x:H.x+T-u,y:H.y+R-h})),{randomizeSeed:!c.retainSeed}),_=this.scene.getElementsIncludingDeleted(),O=[..._,...P];O=((z=($=this.props).onDuplicate)==null?void 0:z.call($,O,_))||O,uc(O,ct(P));let F=this.getTopLayerFrameAtSceneCoords({x:S,y:A});if(F){let H=FNe(P,F);W5(O,H,F,this.state)}this.scene.replaceAllElements(O),P.forEach(H=>{if(je(H)&&Mn(H)){let G=fi(H,this.scene.getElementsMapIncludingDeleted());ps(H,G,this.scene.getElementsMapIncludingDeleted())}}),yxe&&wf.loadElementsFonts(P).then(H=>{this.fonts.onLoaded(H)}),c.files&&this.addMissingFiles(c.files),this.store.shouldCaptureIncrement();let B=xI(P);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Ya.get(sN)?this.state.openSidebar:null,...rs({editingGroupId:null,selectedElementIds:B.reduce((H,G)=>(Mn(G)||(H[G.id]=!0),H),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{c.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),c.fitToContent&&this.scrollToContent(P,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})}),Z(this,"setAppState",(c,d)=>{this.setState(c,d)}),Z(this,"removePointer",c=>{wd&&this.resetContextMenuTimer(),Kt.pointers.delete(c.pointerId)}),Z(this,"toggleLock",(c="ui")=>{this.state.activeTool.locked||xn("toolbar","toggleLock",`${c} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(d=>({activeTool:{...d.activeTool,...yr(this.state,d.activeTool.locked?{type:"selection"}:d.activeTool),locked:!d.activeTool.locked}}))}),Z(this,"updateFrameRendering",c=>{this.setState(d=>{let u=typeof c=="function"?c(d.frameRendering):c;return{frameRendering:{enabled:(u==null?void 0:u.enabled)??d.frameRendering.enabled,clip:(u==null?void 0:u.clip)??d.frameRendering.clip,name:(u==null?void 0:u.name)??d.frameRendering.name,outline:(u==null?void 0:u.outline)??d.frameRendering.outline}}})}),Z(this,"togglePenMode",c=>{this.setState(d=>({penMode:c??!d.penMode,penDetected:!0}))}),Z(this,"onHandToolToggle",()=>{this.actionManager.executeAction(rje)}),Z(this,"zoomCanvas",c=>{this.setState({...Hu({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:bf(c)},this.state)})}),Z(this,"cancelInProgressAnimation",null),Z(this,"scrollToContent",(c=this.scene.getNonDeletedElements(),d)=>{var y;if(typeof c=="string"){let x;if(V5(c)?x=BIe(c):x=c,x){let w=this.scene.getElementsFromId(x);w!=null&&w.length?this.scrollToContent(w,{fitToContent:(d==null?void 0:d.fitToContent)??!0,animate:(d==null?void 0:d.animate)??!0}):V5(c)&&this.setState({toast:{message:j("elementLink.notFound"),duration:3e3,closable:!0}})}return}(y=this.cancelInProgressAnimation)==null||y.call(this);let u=Array.isArray(c)?c:[c],h=this.state.zoom,g=this.state.scrollX,U=this.state.scrollY;if(d!=null&&d.fitToContent||d!=null&&d.fitToViewport){let{appState:x}=mx({canvasOffsets:d.canvasOffsets,targetElements:u,appState:this.state,fitToViewport:!!(d!=null&&d.fitToViewport),viewportZoomFactor:d==null?void 0:d.viewportZoomFactor,minZoom:d==null?void 0:d.minZoom,maxZoom:d==null?void 0:d.maxZoom});h=x.zoom,g=x.scrollX,U=x.scrollY}else{let x=X2(u,this.state);g=x.scrollX,U=x.scrollY}if(d!=null&&d.animate){let x=this.state.scrollX,w=this.state.scrollY,E=this.state.zoom.value,S=fve({fromValues:{scrollX:x,scrollY:w,zoom:E},toValues:{scrollX:g,scrollY:U,zoom:h.value},interpolateValue:(A,M,C,T)=>{if(T==="zoom")return A*Math.pow(M/A,vh(C))},onStep:({scrollX:A,scrollY:M,zoom:C})=>{this.setState({scrollX:A,scrollY:M,zoom:{value:C}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(d==null?void 0:d.duration)??500});this.cancelInProgressAnimation=()=>{S(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:g,scrollY:U,zoom:h})}),Z(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})}),Z(this,"translateCanvas",c=>{var d;(d=this.cancelInProgressAnimation)==null||d.call(this),this.maybeUnfollowRemoteUser(),this.setState(c)}),Z(this,"setToast",c=>{this.setState({toast:c})}),Z(this,"restoreFileFromShare",async()=>{try{let c=await caches.open("web-share-target"),d=await c.match("shared-file");if(d){let u=await d.blob(),h=new File([u],u.name||"",{type:u.type});this.loadFileToCanvas(h,null),await c.delete("shared-file"),window.history.replaceState(null,vxe,window.location.pathname)}}catch(c){this.setState({errorMessage:c.message})}}),Z(this,"addFiles",qn(c=>{let{addedFiles:d}=this.addMissingFiles(c);this.clearImageShapeCache(d),this.scene.triggerUpdate(),this.addNewImagesToImageCache()})),Z(this,"addMissingFiles",(c,d=!1)=>{let u=d?{}:{...this.files},h={},g=Array.isArray(c)?c:Object.values(c);for(let U of g)if(!u[U.id]&&(h[U.id]=U,u[U.id]=U,U.mimeType===it.svg))try{let y=hRe(wF(mRe(U.dataURL)),it.svg);U.dataURL!==y&&(U.version=(U.version??1)+1,U.dataURL=y)}catch(y){console.error(y)}return this.files=u,{addedFiles:h}}),Z(this,"updateScene",qn(c=>{let d=Rf(c.elements??[]);if(c.captureUpdate&&c.captureUpdate!==me.EVENTUALLY){let u=this.store.snapshot.appState,h=this.store.snapshot.elements,g=c.appState?Object.assign({},u,c.appState):u,U=c.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),ct(d)):h;c.captureUpdate===me.IMMEDIATELY?this.store.captureIncrement(U,g):c.captureUpdate===me.NEVER&&this.store.updateSnapshot(U,g)}c.appState&&this.setState(c.appState),c.elements&&this.scene.replaceAllElements(d),c.collaborators&&this.setState({collaborators:c.collaborators})})),Z(this,"triggerRender",c=>{c===!0?this.scene.triggerUpdate():this.setState({})}),Z(this,"toggleSidebar",({name:c,tab:d,force:u})=>{var U,y;let h;u===void 0?h=((U=this.state.openSidebar)==null?void 0:U.name)===c&&((y=this.state.openSidebar)==null?void 0:y.tab)===d?null:c:h=u?c:null;let g=h?{name:h}:null;return g&&d&&(g.tab=d),this.setState({openSidebar:g}),!!h}),Z(this,"updateCurrentCursorPosition",qn(c=>{this.lastViewportPosition.x=c.clientX,this.lastViewportPosition.y=c.clientY})),Z(this,"getEditorUIOffsets",()=>{var g,U,y,x,w,E,S,A,M,C;let c=((x=(y=(U=(g=this.excalidrawContainerRef)==null?void 0:g.current)==null?void 0:U.querySelector(".App-toolbar"))==null?void 0:y.getBoundingClientRect())==null?void 0:x.bottom)??0,d=(S=(E=(w=this.excalidrawContainerRef)==null?void 0:w.current)==null?void 0:E.querySelector(".sidebar"))==null?void 0:S.getBoundingClientRect(),u=(C=(M=(A=this.excalidrawContainerRef)==null?void 0:A.current)==null?void 0:M.querySelector(".App-menu__left"))==null?void 0:C.getBoundingClientRect(),h=16;return tb().rtl?{top:c+h,right:Math.max(this.state.width-((u==null?void 0:u.left)??this.state.width),0)+h,bottom:h,left:Math.max((d==null?void 0:d.right)??0,0)+h}:{top:c+h,right:Math.max(this.state.width-((d==null?void 0:d.left)??this.state.width)+h,0),bottom:h,left:Math.max((u==null?void 0:u.right)??0,0)+h}}),Z(this,"onKeyDown",qn(c=>{var g,U;if("Proxy"in window&&(!c.shiftKey&&/^[A-Z]$/.test(c.key)||c.shiftKey&&/^[a-z]$/.test(c.key))&&(c=new Proxy(c,{get(y,x){let w=y[x];return typeof w=="function"?w.bind(y):x==="key"?c.shiftKey?y.key.toUpperCase():y.key.toLowerCase():w}})),!NC(c.target)){if((c.key===Q.ESCAPE||c.key===Q.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}let y=wt(this.scene.getNonDeletedElementsMap(),this.state);if(y.length===1&&Zt(y[0])&&c.key===Q.ENTER){this.startImageCropping(y[0]);return}if(c.key===Q.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}let x=u5(c.key);if(c[Q.CTRL_OR_CMD]&&x&&!c.shiftKey){c.preventDefault();let w=wt(this.scene.getNonDeletedElementsMap(),this.state);w.length===1&&P7(w[0])&&this.flowChartCreator.createNodes(w[0],this.scene.getNonDeletedElementsMap(),this.state,wz(c.key)),(g=this.flowChartCreator.pendingNodes)!=null&&g.length&&!c3(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(c.altKey){let w=wt(this.scene.getNonDeletedElementsMap(),this.state);if(w.length===1&&x){c.preventDefault();let E=this.flowChartNavigator.exploreByDirection(w[0],this.scene.getNonDeletedElementsMap(),wz(c.key));if(E){this.setState(A=>({selectedElementIds:Yt({[E]:!0},A)}));let S=this.scene.getNonDeletedElementsMap().get(E);S&&!c3([S],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(S,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(c[Q.CTRL_OR_CMD]&&c.key===Q.P&&!c.shiftKey&&!c.altKey){this.setToast({message:j("commandPalette.shortcutHint",{shortcut:Vi("commandPalette")})}),c.preventDefault();return}if(c[Q.CTRL_OR_CMD]&&c.key.toLowerCase()===Q.V&&(xy=c.shiftKey,clearTimeout(qz),qz=window.setTimeout(()=>{xy=!1},100)),c[Q.CTRL_OR_CMD]&&Eu(c.target)&&(c.code===zt.MINUS||c.code===zt.EQUAL)){c.preventDefault();return}if(Eu(c.target)&&c.key!==Q.ESCAPE||u5(c.key)&&NC(c.target))return;if(c.key===Q.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(c.key.toLowerCase()===Q.E&&c.shiftKey&&c[Q.CTRL_OR_CMD]){c.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(c.key===Q.PAGE_UP||c.key===Q.PAGE_DOWN){let y=(c.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;c.key===Q.PAGE_DOWN&&(y=-y),c.shiftKey?this.translateCanvas(x=>({scrollX:x.scrollX+y})):this.translateCanvas(x=>({scrollY:x.scrollY+y}))}if(((U=this.state.openDialog)==null?void 0:U.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(c)||this.state.viewModeEnabled)return;if(c[Q.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),u5(c.key)){let y=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),x=y.find(Fe),w=new Set;y.filter(Fe).filter(M=>{let C=M.startBinding&&!y.some(R=>{var P;return R.id===((P=M.startBinding)==null?void 0:P.elementId)}),T=M.endBinding&&!y.some(R=>{var P;return R.id===((P=M.endBinding)==null?void 0:P.elementId)});return C||T}).forEach(M=>w.add(M.id)),y=y.filter(M=>!w.has(M.id));let E=this.getEffectiveGridSize()&&(c.shiftKey?dB:this.getEffectiveGridSize())||(c.shiftKey?Exe:dB),S=0,A=0;c.key===Q.ARROW_LEFT?S=-E:c.key===Q.ARROW_RIGHT?S=E:c.key===Q.ARROW_UP?A=-E:c.key===Q.ARROW_DOWN&&(A=E),y.forEach(M=>{ye(M,{x:M.x+S,y:M.y+A},!1),zs(M,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:y})}),this.setState({suggestedBindings:JE(y.filter(M=>M.id!==(x==null?void 0:x.id)||E!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),c.preventDefault()}else if(c.key===Q.ENTER){let y=this.scene.getSelectedElements(this.state);if(y.length===1){let x=y[0];if(c[Q.CTRL_OR_CMD])mt(x)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==y[0].id)&&(this.store.shouldCaptureIncrement(),Fe(x)||this.setState({editingLinearElement:new Be(x)}));else if(je(x)||aIe(x)){let w;je(x)||(w=x);let E=eS(x,this.state,this.scene.getNonDeletedElementsMap()),S=E.x,A=E.y;this.startTextEditing({sceneX:S,sceneY:A,container:w}),c.preventDefault();return}else at(x)&&this.setState({editingFrame:x.id})}}else if(!c.ctrlKey&&!c.altKey&&!c.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){let y=RMe(c.key);y?(this.state.activeTool.type!==y&&xn("toolbar",y,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),y==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(x=>({currentItemArrowType:x.currentItemArrowType===ei.sharp?ei.round:x.currentItemArrowType===ei.round?ei.elbow:ei.sharp})),this.setActiveTool({type:y}),c.stopPropagation()):c.key===Q.Q&&(this.toggleLock("keyboard"),c.stopPropagation())}if(c.key===Q.SPACE&&Kt.pointers.size===0&&(fu=!0,an(this.interactiveCanvas,rn.GRAB),c.preventDefault()),(c.key===Q.G||c.key===Q.S)&&!c.altKey&&!c[Q.CTRL_OR_CMD]){let y=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!y.length)return;c.key===Q.G&&(u6(this.state.activeTool.type)||y.some(x=>u6(x.type)))&&(this.setState({openPopup:"elementBackground"}),c.stopPropagation()),c.key===Q.S&&(this.setState({openPopup:"elementStroke"}),c.stopPropagation())}if(!c[Q.CTRL_OR_CMD]&&c.shiftKey&&c.key.toLowerCase()===Q.F){let y=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!y.length)return;(this.state.activeTool.type==="text"||y.find(x=>je(x)||xt(x,this.scene.getNonDeletedElementsMap())))&&(c.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(c.key===Q.K&&!c.altKey&&!c[Q.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}c[Q.CTRL_OR_CMD]&&(c.key===Q.BACKSPACE||c.key===Q.DELETE)&&Ya.set(yx,"clearCanvas");let d=c.key.toLocaleLowerCase(),u=d===Q.S&&c.shiftKey,h=c.key===Q.I||d===Q.G&&c.shiftKey;(u||h)&&this.openEyeDropper({type:u?"stroke":"background"})})),Z(this,"onKeyUp",qn(c=>{var d,u,h,g;if(c.key===Q.SPACE&&(this.state.viewModeEnabled||((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?an(this.interactiveCanvas,rn.GRAB):this.state.activeTool.type==="selection"?Aa(this.interactiveCanvas):(Il(this.interactiveCanvas,this.state),this.setState({selectedElementIds:Yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),fu=!1),!c[Q.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),u5(c.key)&&(n9(this.scene.getSelectedElements(this.state).filter(mt),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,$u(this.state),((u=this.state.selectedLinearElement)==null?void 0:u.selectedPointsIndices)??[],this.state.zoom),this.setState({suggestedBindings:[]})),c.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:me.IMMEDIATELY})),!c[Q.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(h=this.flowChartCreator.pendingNodes)!=null&&h.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);let U=(g=this.flowChartCreator.pendingNodes)==null?void 0:g[0];U&&(this.setState(y=>({selectedElementIds:Yt({[U.id]:!0},y)})),c3([U],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(U,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:me.IMMEDIATELY})}})),Z(this,"isToolSupported",c=>{var d;return((d=this.props.UIOptions.tools)==null?void 0:d[c])!==!1}),Z(this,"setActiveTool",c=>{if(!this.isToolSupported(c.type)){console.warn(`"${c.type}" tool is disabled via "UIOptions.canvasActions.tools.${c.type}"`);return}let d=yr(this.state,c);d.type==="hand"?an(this.interactiveCanvas,rn.GRAB):fu||Il(this.interactiveCanvas,{...this.state,activeTool:d}),lve(document.activeElement)&&this.focusContainer(),CT(d.type)||this.setState({suggestedBindings:[]}),d.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(c.type==="image"&&c.insertOnCanvasDirectly)??!1}),this.setState(u=>{let h={snapLines:u.snapLines.length?[]:u.snapLines,originSnapOffset:null,activeEmbeddable:null};return d.type==="freedraw"&&this.store.shouldCaptureIncrement(),d.type!=="selection"?{...u,activeTool:d,selectedElementIds:Yt({},u),selectedGroupIds:Yt({},u),editingGroupId:null,multiElement:null,...h}:{...u,activeTool:d,...h}})}),Z(this,"setOpenDialog",c=>{this.setState({openDialog:c})}),Z(this,"setCursor",c=>{an(this.interactiveCanvas,c)}),Z(this,"resetCursor",()=>{Aa(this.interactiveCanvas)}),Z(this,"isTouchScreenMultiTouchGesture",()=>Kt.pointers.size>=2),Z(this,"getName",()=>this.state.name||this.props.name||`${j("labels.untitled")}-${yB()}`),Z(this,"onGestureStart",qn(c=>{c.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:Yt({},this.state),activeEmbeddable:null}),Kt.initialScale=this.state.zoom.value})),Z(this,"onGestureChange",qn(c=>{if(c.preventDefault(),this.isTouchScreenMultiTouchGesture())return;let d=Kt.initialScale;d&&this.setState(u=>({...Hu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:bf(d*c.scale)},u)}))})),Z(this,"onGestureEnd",qn(c=>{c.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:Yt(this.state.previousSelectedElementIds,this.state)}),Kt.initialScale=null})),Z(this,"startTextEditing",({sceneX:c,sceneY:d,insertAtParentCenter:u=!0,container:h,autoEdit:g=!0})=>{let U=!1,y=u&&this.getTextWysiwygSnappedToCenterPosition(c,d,this.state,h);h&&y&&(xt(h,this.scene.getNonDeletedElementsMap())||(U=!0));let x=null,w=this.scene.getSelectedElements(this.state);w.length===1?je(w[0])?x=w[0]:h?x=xt(w[0],this.scene.getNonDeletedElementsMap()):x=this.getTextElementAtPosition(c,d):x=this.getTextElementAtPosition(c,d);let E=(x==null?void 0:x.fontFamily)||this.state.currentItemFontFamily,S=(x==null?void 0:x.lineHeight)||qh(E),A=this.state.currentItemFontSize;if(!x&&U&&h&&!Et(h)){let T=qZ(cn({fontSize:A,fontFamily:E}),S),R=QZ(A,S),P=Math.max(h.height,R),_=Math.max(h.width,T);ye(h,{height:P,width:_}),c=h.x+_/2,d=h.y+P/2,y&&(y=this.getTextWysiwygSnappedToCenterPosition(c,d,this.state,h))}let M=this.getTopLayerFrameAtSceneCoords({x:c,y:d}),C=x||bo({x:y?y.elementCenterX:c,y:y?y.elementCenterY:d,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:A,fontFamily:E,textAlign:y?"center":this.state.currentItemTextAlign,verticalAlign:y?ho.MIDDLE:B4,containerId:U?h==null?void 0:h.id:void 0,groupIds:(h==null?void 0:h.groupIds)??[],lineHeight:S,angle:(h==null?void 0:h.angle)??0,frameId:M?M.id:null});if(!x&&U&&h&&ye(h,{boundElements:(h.boundElements||[]).concat({type:"text",id:C.id})}),this.setState({editingTextElement:C}),!x)if(h&&U){let T=this.scene.getElementIndex(h.id);this.scene.insertElementAtIndex(C,T+1)}else this.scene.insertElement(C);g||x||h?this.handleTextWysiwyg(C,{isExistingElement:!!x}):this.setState({newElement:C,multiElement:null})}),Z(this,"startImageCropping",c=>{this.store.shouldCaptureIncrement(),this.setState({croppingElementId:c.id})}),Z(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.shouldCaptureIncrement(),this.setState({croppingElementId:null}))}),Z(this,"handleCanvasDoubleClick",c=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;let d=this.scene.getSelectedElements(this.state),{x:u,y:h}=yn(c,this.state);if(d.length===1&&mt(d[0])){if(c[Q.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==d[0].id)&&!Fe(d[0])){this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new Be(d[0])});return}else if(this.state.selectedLinearElement&&Fe(d[0])){let g=Be.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:u,y:h},this.state,this.scene.getNonDeletedElementsMap()),U=g?Be.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,g,this.scene.getNonDeletedElementsMap()):-1;if(U&&U>-1){this.store.shouldCaptureIncrement(),Be.deleteFixedSegment(d[0],U);let y=Be.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:u,y:h},this.state,this.scene.getNonDeletedElementsMap()),x=y?Be.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,y,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:x,value:g,added:!1}},segmentMidPointHoveredCoords:y}});return}}}if(d.length===1&&Zt(d[0])){this.startImageCropping(d[0]);return}if(Aa(this.interactiveCanvas),Eh(this.state).length>0){let g=this.getElementAtPosition(u,h),U=g&&BTe(g,this.state.selectedGroupIds);if(U){this.store.shouldCaptureIncrement(),this.setState(y=>({...y,...rs({editingGroupId:U,selectedElementIds:{[g.id]:!0}},this.scene.getNonDeletedElements(),y,this)}));return}}if(Aa(this.interactiveCanvas),!c[Q.CTRL_OR_CMD]&&!this.state.viewModeEnabled){let g=this.getElementAtPosition(u,h);if(Ko(g)){this.setState({activeEmbeddable:{element:g,state:"active"}});return}let U=this.getTextBindableContainerAtPosition(u,h);if(U&&(sa(U)||!Xa(U.backgroundColor)||hp({x:u,y:h,element:U,shape:Zc(U,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){let y=eS(U,this.state,this.scene.getNonDeletedElementsMap());u=y.x,h=y.y}this.startTextEditing({sceneX:u,sceneY:h,insertAtParentCenter:!c.altKey,container:U})}}),Z(this,"getElementLinkAtPosition",(c,d)=>{let u=this.scene.getNonDeletedElements(),h=-1;for(let g=u.length-1;g>=0;g--){let U=u[g];if(d&&U.id===d.id&&(h=g),U.link&&g>=h&&tS(U,this.scene.getNonDeletedElementsMap(),this.state,D(c.x,c.y),this.device.editor.isMobile))return U}}),Z(this,"redirectToLink",(c,d)=>{let u=qt(D(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),D(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||u>Uu)return;let h=yn(this.lastPointerDownEvent,this.state),g=this.scene.getNonDeletedElementsMap(),U=tS(this.hitLinkElement,g,this.state,D(h.x,h.y),this.device.editor.isMobile),y=yn(this.lastPointerUpEvent,this.state),x=tS(this.hitLinkElement,g,this.state,D(y.x,y.y),this.device.editor.isMobile);if(U&&x){fz();let w=this.hitLinkElement.link;if(w){w=po(w);let E;if(this.props.onLinkOpen&&(E=HZ("excalidraw-link",c.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:w},E)),!(E!=null&&E.defaultPrevented)){let S=uQ(w)?"_self":"_blank",A=window.open(void 0,S);A&&(A.opener=null,A.location=w)}}}}),Z(this,"getTopLayerFrameAtSceneCoords",c=>{let d=this.scene.getNonDeletedElementsMap(),u=this.scene.getNonDeletedFramesLikes().filter(h=>BF(c,h,d));return u.length?u[u.length-1]:null}),Z(this,"handleCanvasPointerMove",c=>{var E,S,A,M,C,T;this.savePointer(c.clientX,c.clientY,this.state.cursorButton),this.lastPointerMoveEvent=c.nativeEvent,Kt.pointers.has(c.pointerId)&&Kt.pointers.set(c.pointerId,{x:c.clientX,y:c.clientY});let d=Kt.initialScale;if(Kt.pointers.size===2&&Kt.lastCenter&&d&&Kt.initialDistance){let R=yz(Kt.pointers),P=R.x-Kt.lastCenter.x,_=R.y-Kt.lastCenter.y;Kt.lastCenter=R;let O=xz(Array.from(Kt.pointers.values())),F=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:O/Kt.initialDistance,B=F?bf(d*F):this.state.zoom.value;this.setState($=>{let z=Hu({viewportX:R.x,viewportY:R.y,nextZoom:B},$);this.translateCanvas({zoom:z.zoom,scrollX:z.scrollX+2*(P/B),scrollY:z.scrollY+2*(_/B),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else Kt.lastCenter=Kt.initialDistance=Kt.initialScale=null;if(fu||Xg||LS||o6(this.state))return;let u=Sz(OS,c.clientX-this.state.offsetLeft,c.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(u?Aa(this.interactiveCanvas):Il(this.interactiveCanvas,this.state));let h=yn(c,this.state),{x:g,y:U}=h;if(!this.state.newElement&&JTe(this.state.activeTool.type)){let{originOffset:R,snapLines:P}=QTe(this.scene.getNonDeletedElements(),this,{x:g,y:U},c,this.scene.getNonDeletedElementsMap());this.setState(_=>{let O=Bg(_.snapLines,P),F=_.originSnapOffset?Bg(_.originSnapOffset,R):R;return _.snapLines===O&&_.originSnapOffset===F?null:{snapLines:O,originSnapOffset:F}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(R=>R.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){let R=Be.handlePointerMove(c,g,U,this,this.scene.getNonDeletedElementsMap());R&&R!==this.state.editingLinearElement&&ri.flushSync(()=>{this.setState({editingLinearElement:R})}),(R==null?void 0:R.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(h,R.elbowed):ri.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(XZ(this.state.activeTool.type)){let{newElement:R}=this.state;Yl(R,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(R,[h],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(h,!1)}if(this.state.multiElement){let{multiElement:R}=this.state,{x:P,y:_}=R,{points:O,lastCommittedPoint:F}=R,B=O[O.length-1];if(Il(this.interactiveCanvas,this.state),B===F)qt(D(g-P,U-_),B)>=Zy?ye(R,{points:[...O,D(g-P,U-_)]},!1):an(this.interactiveCanvas,rn.POINTER);else if(O.length>2&&F&&qt(D(g-P,U-_),F)<Zy)an(this.interactiveCanvas,rn.POINTER),ye(R,{points:O.slice(0,-1)},!1);else{let[$,z]=Ir(g,U,c[Q.CTRL_OR_CMD]||Fe(R)?null:this.getEffectiveGridSize()),[H,G]=(R==null?void 0:R.lastCommittedPoint)??[0,0],V=$-P-H,Y=z-_-G;z5(c)&&({width:V,height:Y}=eA(H+P,G+_,$,z)),Mf(O,this.state.zoom.value)&&an(this.interactiveCanvas,rn.POINTER),ye(R,{points:[...O.slice(0,-1),D(H+V,G+Y)]},!1,{isDragging:!0}),this.triggerRender(!1)}return}if(c.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;let y=this.scene.getNonDeletedElements(),x=this.scene.getSelectedElements(this.state);if(x.length===1&&!u&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,g,U),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((E=this.state.openDialog)==null?void 0:E.name)!=="elementLinkSelector"&&!(x.length===1&&Fe(x[0]))){let R=GF(y,this.state,g,U,this.state.zoom,c.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(R&&R.transformHandleType){an(this.interactiveCanvas,KF(R));return}}}else if(x.length>1&&!u&&((S=this.state.openDialog)==null?void 0:S.name)!=="elementLinkSelector"){let R=XF(nn(x),g,U,this.state.zoom,c.pointerType,this.device);if(R){an(this.interactiveCanvas,KF({transformHandleType:R}));return}}let w=this.getElementAtPosition(h.x,h.y);this.hitLinkElement=this.getElementLinkAtPosition(h,w),!Rl(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(an(this.interactiveCanvas,rn.POINTER),Dje(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(fz(),w&&(w.link||Rs(w))&&this.state.selectedElementIds[w.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?an(this.interactiveCanvas,je(w)?rn.TEXT:rn.CROSSHAIR):this.state.viewModeEnabled?an(this.interactiveCanvas,rn.GRAB):((A=this.state.openDialog)==null?void 0:A.name)==="elementLinkSelector"?an(this.interactiveCanvas,rn.AUTO):u?an(this.interactiveCanvas,rn.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,g,U):c[Q.CTRL_OR_CMD]?an(this.interactiveCanvas,rn.AUTO):(w||this.isHittingCommonBoundingBoxOfSelectedElements(h,x))&&!(w!=null&&w.locked)&&(w&&Ko(w)&&this.isIframeLikeElementCenter(w,c,g,U)?(an(this.interactiveCanvas,rn.POINTER),this.setState({activeEmbeddable:{element:w,state:"hover"}})):(!w||!Fe(w))&&(an(this.interactiveCanvas,rn.MOVE),((M=this.state.activeEmbeddable)==null?void 0:M.state)==="hover"&&this.setState({activeEmbeddable:null})))),((C=this.state.openDialog)==null?void 0:C.name)==="elementLinkSelector"&&w?this.setState(R=>({hoveredElementIds:Bg(R.hoveredElementIds,rs({editingGroupId:R.editingGroupId,selectedElementIds:{[w.id]:!0}},this.scene.getNonDeletedElements(),R,this).selectedElementIds)})):((T=this.state.openDialog)==null?void 0:T.name)==="elementLinkSelector"&&!w&&this.setState(R=>({hoveredElementIds:Bg(R.hoveredElementIds,{})})))}),Z(this,"handleEraser",(c,d,u)=>{this.eraserTrail.addPointToPath(u.x,u.y);let h=!1,g=new Set,U=this.scene.getNonDeletedElements(),y=A=>{var M;for(let C of A){if(C.locked)return;if(c.altKey?this.elementsPendingErasure.delete(C.id)&&(h=!0):this.elementsPendingErasure.has(C.id)||(h=!0,this.elementsPendingErasure.add(C.id)),h&&((M=C.groupIds)==null?void 0:M.length)){let T=C.groupIds.at(-1);if(!g.has(T)){g.add(T);let R=Cn(U,T);for(let P of R)c.altKey?this.elementsPendingErasure.delete(P.id):this.elementsPendingErasure.add(P.id)}}}},x=qt(D(d.lastCoords.x,d.lastCoords.y),D(u.x,u.y)),w=this.getElementHitThreshold(),E={...d.lastCoords},S=0;for(;S<=x;){let A=this.getElementsAtPosition(E.x,E.y);if(y(A),S===x)break;S=Math.min(S+w,x);let M=S/x,C=(1-M)*E.x+M*u.x,T=(1-M)*E.y+M*u.y;E.x=C,E.y=T}if(d.lastCoords.x=u.x,d.lastCoords.y=u.y,h){for(let A of this.scene.getNonDeletedElements())Mn(A)&&(this.elementsPendingErasure.has(A.id)||this.elementsPendingErasure.has(A.containerId))&&(c.altKey?(this.elementsPendingErasure.delete(A.id),this.elementsPendingErasure.delete(A.containerId)):(this.elementsPendingErasure.add(A.id),this.elementsPendingErasure.add(A.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.triggerRender()}}),Z(this,"handleTouchMove",c=>{Kg=!0}),Z(this,"handleCanvasPointerDown",c=>{var w,E,S;let d=c.target;if(d.setPointerCapture&&d.setPointerCapture(c.pointerId),this.maybeCleanupAfterMissingPointerUp(c.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(A=>({searchMatches:A.searchMatches.map(M=>({...M,focus:!1}))})),Ya.set(mre,null)),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(c),c.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){let A=this.state.newElement;this.updateScene({...A.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(M=>M.id!==A.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:Yt(Object.keys(this.state.selectedElementIds).filter(M=>M!==A.id).reduce((M,C)=>(M[C]=this.state.selectedElementIds[C],M),{}),this.state)},captureUpdate:((w=this.state.openDialog)==null?void 0:w.name)==="elementLinkSelector"?me.EVENTUALLY:me.NEVER});return}let u=document.getSelection();if(u!=null&&u.anchorNode&&u.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(c),!this.state.penDetected&&c.pointerType==="pen"&&this.setState(A=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(c.pointerType)&&(this.device=qy(this.device,{isTouchScreen:!0})),Xg||(this.lastPointerDownEvent=c,this.handleCanvasPanUsingWheelOrSpaceDrag(c)))return;if(this.setState({lastPointerDownWith:c.pointerType,cursorButton:"down"}),this.savePointer(c.clientX,c.clientY,"down"),c.button===Cd.ERASER&&this.state.activeTool.type!==zr.eraser){this.setState({activeTool:yr(this.state,{type:zr.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(c);let A=()=>{M(),C==null||C(),Rl(this.state)&&this.setState({activeTool:yr(this.state,{...this.state.activeTool.lastActiveTool||{type:zr.selection},lastActiveToolBeforeEraser:null})})},M=Bn(window,"pointerup",A,{once:!0}),C;requestAnimationFrame(()=>{C=this.missingPointerEventCleanupEmitter.once(A)})});return}if(c.button!==Cd.MAIN&&c.button!==Cd.TOUCH&&c.button!==Cd.ERASER||Kt.pointers.size>1)return;let h=this.initialPointerDownState(c);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(c,h)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(c),this.handleSelectionOnPointerDown(c,h))||!(!this.state.penMode||c.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(c,h);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(c,this.state.activeTool.type,h);else if(this.state.activeTool.type==="image"){an(this.interactiveCanvas,rn.CROSSHAIR);let A=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!A)return;this.setState({newElement:A,pendingImageElementId:null,multiElement:null});let{x:M,y:C}=yn(c,this.state),T=this.getTopLayerFrameAtSceneCoords({x:M,y:C});ye(A,{x:M,y:C,frameId:T?T.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(c,this.state.activeTool.type,h):this.state.activeTool.type==="custom"?Il(this.interactiveCanvas,this.state):this.state.activeTool.type===zr.frame||this.state.activeTool.type===zr.magicframe?this.createFrameElementOnPointerDown(h,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(h.lastCoords.x,h.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,h);(S=(E=this.props)==null?void 0:E.onPointerDown)==null||S.call(E,this.state.activeTool,h),this.onPointerDownEmitter.trigger(this.state.activeTool,h,c),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(h.lastCoords.x,h.lastCoords.y);let g=this.onPointerMoveFromPointerDownHandler(h),U=this.onPointerUpFromPointerDownHandler(h),y=this.onKeyDownFromPointerDownHandler(h),x=this.onKeyUpFromPointerDownHandler(h);this.missingPointerEventCleanupEmitter.once(A=>U(A||c.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener("pointermove",g),window.addEventListener("pointerup",U),window.addEventListener("keydown",y),window.addEventListener("keyup",x),h.eventListeners.onMove=g,h.eventListeners.onUp=U,h.eventListeners.onKeyUp=x,h.eventListeners.onKeyDown=y)}),Z(this,"handleCanvasPointerUp",c=>{var h;this.removePointer(c),this.lastPointerUpEvent=c;let d=yn({clientX:c.clientX,clientY:c.clientY},this.state),u=c.timeStamp-(((h=this.lastPointerDownEvent)==null?void 0:h.timeStamp)??0);if(this.device.editor.isMobile&&u<300){let g=this.getElementAtPosition(d.x,d.y);if(Ko(g)&&this.isIframeLikeElementCenter(g,c,d.x,d.y)){this.handleEmbeddableCenterClick(g);return}}if(this.device.isTouchScreen){let g=this.getElementAtPosition(d.x,d.y);this.hitLinkElement=this.getElementLinkAtPosition(d,g)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?u<300&&Ko(this.hitLinkElement)&&!PQ(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,D(d.x,d.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(c,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})}),Z(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",c=>{c.pointerType==="touch"&&(Kg=!1,wd?Kg=!0:wd=window.setTimeout(()=>{wd=0,Kg||this.handleCanvasContextMenu(c)},_xe))}),Z(this,"resetContextMenuTimer",()=>{clearTimeout(wd),wd=0,Kg=!1}),Z(this,"maybeCleanupAfterMissingPointerUp",c=>{du==null||du(),this.missingPointerEventCleanupEmitter.trigger(c).clear()}),Z(this,"handleCanvasPanUsingWheelOrSpaceDrag",c=>{if(!(Kt.pointers.size<=1&&(c.button===Cd.WHEEL||c.button===Cd.MAIN&&fu||o6(this.state)||this.state.viewModeEnabled)))return!1;Xg=!0,this.focusContainer(),this.state.editingTextElement||c.preventDefault();let d=!1,u=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);an(this.interactiveCanvas,rn.GRABBING);let{clientX:h,clientY:g}=c,U=NS(x=>{let w=h-x.clientX,E=g-x.clientY;if(h=x.clientX,g=x.clientY,u&&!d&&(Math.abs(w)>1||Math.abs(E)>1)){d=!0;let S=M=>{document.body.removeEventListener("paste",S),M.stopPropagation()},A=()=>{setTimeout(()=>{document.body.removeEventListener("paste",S),window.removeEventListener("pointerup",A)},100)};document.body.addEventListener("paste",S),window.addEventListener("pointerup",A)}this.translateCanvas({scrollX:this.state.scrollX-w/this.state.zoom.value,scrollY:this.state.scrollY-E/this.state.zoom.value})}),y=qn(du=()=>{du=null,Xg=!1,fu||(this.state.viewModeEnabled?an(this.interactiveCanvas,rn.GRAB):Il(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(c.clientX,c.clientY,"up"),window.removeEventListener("pointermove",U),window.removeEventListener("pointerup",y),window.removeEventListener("blur",y),U.flush()});return window.addEventListener("blur",y),window.addEventListener("pointermove",U,{passive:!0}),window.addEventListener("pointerup",y),!0}),Z(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.setState({selectedElementIds:Yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}),Z(this,"handleSelectionOnPointerDown",(c,d)=>{var u;if(this.state.activeTool.type==="selection"){let h=this.scene.getNonDeletedElements(),g=this.scene.getNonDeletedElementsMap(),U=this.scene.getSelectedElements(this.state);if(U.length===1&&!this.state.editingLinearElement&&!Fe(U[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){let y=GF(h,this.state,d.origin.x,d.origin.y,this.state.zoom,c.pointerType,this.scene.getNonDeletedElementsMap(),this.device);y!=null&&(y.transformHandleType==="rotation"?(this.setState({resizingElement:y.element}),d.resize.handleType=y.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:y.element}),d.resize.handleType=y.transformHandleType))}else U.length>1&&(d.resize.handleType=XF(nn(U),d.origin.x,d.origin.y,this.state.zoom,c.pointerType,this.device));if(d.resize.handleType)d.resize.isResizing=!0,d.resize.offset=Ga(QNe(d.resize.handleType,U,g,d.origin.x,d.origin.y)),U.length===1&&mt(U[0])&&U[0].points.length===2&&(d.resize.arrowDirection=JNe(d.resize.handleType,U[0]));else{if(this.state.selectedLinearElement){let w=this.state.editingLinearElement||this.state.selectedLinearElement,E=Be.handlePointerDown(c,this,this.store,d.origin,w,this.scene);if(E.hitElement&&(d.hit.element=E.hitElement),E.linearElementEditor&&(this.setState({selectedLinearElement:E.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:E.linearElementEditor})),E.didAddPoint)return!0}if(d.hit.element=d.hit.element??this.getElementAtPosition(d.origin.x,d.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(d.origin,d.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((u=d.hit.element)==null?void 0:u.id)!==this.state.croppingElementId&&this.finishImageCropping(),d.hit.element&&this.getElementLinkAtPosition({x:d.origin.x,y:d.origin.y},d.hit.element))return!1;d.hit.allHitElements=this.getElementsAtPosition(d.origin.x,d.origin.y);let y=d.hit.element,x=d.hit.allHitElements.some(w=>this.isASelectedElement(w));if((y===null||!x)&&!c.shiftKey&&!d.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(y),this.state.editingLinearElement)this.setState({selectedElementIds:Yt({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(y!=null){if(c[Q.CTRL_OR_CMD])return this.state.selectedElementIds[y.id]||(d.hit.wasAddedToSelection=!0),this.setState(w=>({...jTe(w,y),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[y.id]||(this.state.editingGroupId&&!K2(y,this.state.editingGroupId)&&this.setState({selectedElementIds:Yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!x&&!d.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(w=>{var A;let E={...w.selectedElementIds,[y.id]:!0},S=[];if(Object.keys(w.selectedElementIds).forEach(M=>{let C=this.scene.getElement(M);C&&S.push(C)}),at(y))hc(S,y.id).forEach(M=>{delete E[M.id]});else if(y.frameId)E[y.frameId]&&delete E[y.id];else{let M=y.groupIds,C=new Set(M.flatMap(T=>Cn(this.scene.getNonDeletedElements(),T)).filter(T=>at(T)).map(T=>T.id));C.size>0&&S.forEach(T=>{T.frameId&&C.has(T.frameId)&&(delete E[T.id],T.groupIds.flatMap(R=>Cn(this.scene.getNonDeletedElements(),R)).forEach(R=>{delete E[R.id]}))})}return((A=w.openDialog)==null?void 0:A.name)==="elementLinkSelector"&&(y.groupIds.some(M=>w.selectedGroupIds[M])||(E={[y.id]:!0})),{...rs({editingGroupId:w.editingGroupId,selectedElementIds:E},this.scene.getNonDeletedElements(),w,this),showHyperlinkPopup:y.link||Rs(y)?"info":!1}}),d.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1}),Z(this,"handleTextOnPointerDown",(c,d)=>{if(this.state.editingTextElement)return;let u=d.origin.x,h=d.origin.y,g=this.getElementAtPosition(u,h,{includeBoundTextElement:!0}),U=this.getTextBindableContainerAtPosition(u,h);sa(g)&&(U=g,u=g.x+g.width/2,h=g.y+g.height/2),this.startTextEditing({sceneX:u,sceneY:h,insertAtParentCenter:!c.altKey,container:U,autoEdit:!1}),Aa(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:yr(this.state,{type:"selection"})})}),Z(this,"handleFreeDrawElementOnPointerDown",(c,d,u)=>{let[h,g]=Ir(u.origin.x,u.origin.y,null),U=this.getTopLayerFrameAtSceneCoords({x:h,y:g}),y=c.pressure===.5,x=bIe({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:y,locked:!1,frameId:U?U.id:null,points:[D(0,0)],pressures:y?[]:[c.pressure]});this.scene.insertElement(x),this.setState(E=>{let S={...E.selectedElementIds};return delete S[x.id],{selectedElementIds:Yt(S,E)}});let w=Ka(u.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:x,startBoundElement:w,suggestedBindings:[]})}),Z(this,"insertIframeElement",({sceneX:c,sceneY:d,width:u,height:h})=>{var x;let[g,U]=Ir(c,d,(x=this.lastPointerDownEvent)!=null&&x[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=pIe({type:"iframe",x:g,y:U,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:u,height:h});return this.scene.insertElement(y),y}),Z(this,"insertEmbeddableElement",({sceneX:c,sceneY:d,link:u})=>{var x;let[h,g]=Ir(c,d,(x=this.lastPointerDownEvent)!=null&&x[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=Mp(u);if(!U)return;U.error instanceof URIError&&this.setToast({message:j("toast.unrecognizedLinkFormat"),closable:!0});let y=dF({type:"embeddable",x:h,y:g,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:U.intrinsicSize.w,height:U.intrinsicSize.h,link:u});return this.scene.insertElement(y),y}),Z(this,"createImageElement",({sceneX:c,sceneY:d,addToFrameUnderCursor:u=!0})=>{var y;let[h,g]=Ir(c,d,(y=this.lastPointerDownEvent)!=null&&y[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=u?this.getTopLayerFrameAtSceneCoords({x:h,y:g}):null;return yQ({type:"image",x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:U?U.id:null})}),Z(this,"handleLinearElementOnPointerDown",(c,d,u)=>{if(this.state.multiElement){let{multiElement:h}=this.state;if(h.type==="line"&&Mf(h.points,this.state.zoom.value)){ye(h,{lastCommittedPoint:h.points[h.points.length-1]}),this.actionManager.executeAction(Sa);return}if(Fe(h)&&h.points.length>1){ye(h,{lastCommittedPoint:h.points[h.points.length-1]}),this.actionManager.executeAction(Sa);return}let{x:g,y:U,lastCommittedPoint:y}=h;if(h.points.length>1&&y&&qt(D(u.origin.x-g,u.origin.y-U),y)<Zy){this.actionManager.executeAction(Sa);return}this.setState(x=>({selectedElementIds:Yt({...x.selectedElementIds,[h.id]:!0},x)})),ye(h,{lastCommittedPoint:h.points[h.points.length-1]}),an(this.interactiveCanvas,rn.POINTER)}else{let[h,g]=Ir(u.origin.x,u.origin.y,c[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=this.getTopLayerFrameAtSceneCoords({x:h,y:g}),{currentItemStartArrowhead:y,currentItemEndArrowhead:x}=this.state,[w,E]=d==="arrow"?[y,x]:[null,null],S=d==="arrow"?KT({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===ei.round?{type:Pr.PROPORTIONAL_RADIUS}:null,startArrowhead:w,endArrowhead:E,locked:!1,frameId:U?U.id:null,elbowed:this.state.currentItemArrowType===ei.elbow,fixedSegments:this.state.currentItemArrowType===ei.elbow?[]:null}):Sh({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:Pr.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:U?U.id:null});this.setState(M=>{let C={...M.selectedElementIds};return delete C[S.id],{selectedElementIds:Yt(C,M)}}),ye(S,{points:[...S.points,D(0,0)]});let A=Ka(u.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,Fe(S),Fe(S));this.scene.insertElement(S),this.setState({newElement:S,startBoundElement:A,suggestedBindings:[]})}}),Z(this,"createGenericElementOnPointerDown",(c,d)=>{var x;let[u,h]=Ir(d.origin.x,d.origin.y,(x=this.lastPointerDownEvent)!=null&&x[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g=this.getTopLayerFrameAtSceneCoords({x:u,y:h}),U={x:u,y:h,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(c),locked:!1,frameId:g?g.id:null},y;c==="embeddable"?y=dF({type:"embeddable",...U}):y=dc({type:c,...U}),y.type==="selection"?this.setState({selectionElement:y}):(this.scene.insertElement(y),this.setState({multiElement:null,newElement:y}))}),Z(this,"createFrameElementOnPointerDown",(c,d)=>{var y;let[u,h]=Ir(c.origin.x,c.origin.y,(y=this.lastPointerDownEvent)!=null&&y[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g={x:u,y:h,opacity:this.state.currentItemOpacity,locked:!1,...zn},U=d===zr.magicframe?XC(g):XT(g);this.scene.insertElement(U),this.setState({multiElement:null,newElement:U})}),Z(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()}),Z(this,"eraseElements",()=>{let c=!1,d=this.scene.getElementsIncludingDeleted().map(u=>this.elementsPendingErasure.has(u.id)||u.frameId&&this.elementsPendingErasure.has(u.frameId)||Mn(u)&&this.elementsPendingErasure.has(u.containerId)?(c=!0,yt(u,{isDeleted:!0})):u);this.elementsPendingErasure=new Set,c&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(d))}),Z(this,"initializeImage",async({imageFile:c,imageElement:d,showCursorImagePreview:u=!1})=>{var x,w,E,S,A;if(!kh(c))throw new Error(j("errors.unsupportedFileType"));let h=c.type;if(an(this.interactiveCanvas,"wait"),h===it.svg)try{c=QF(wF(await c.text()),c.name)}catch(M){throw console.warn(M),new Error(j("errors.svgImageInsertError"))}let g=await(((w=(x=this.props).generateIdForFile)==null?void 0:w.call(x,c))||uRe(c));if(!g)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(j("errors.imageInsertError"));if(!((E=this.files[g])!=null&&E.dataURL)){try{c=await rA(c,{maxWidthOrHeight:Fxe})}catch(M){console.error("Error trying to resizing image file on insertion",M)}if(c.size>hB)throw new Error(j("errors.fileTooBig",{maxSize:`${Math.trunc(hB/1024/1024)}MB`}))}if(u){let M=(S=this.files[g])==null?void 0:S.dataURL,C=M&&pRe(M);this.setImagePreviewCursor(C||c)}let U=((A=this.files[g])==null?void 0:A.dataURL)||await qF(c),y=ye(d,{fileId:g},!1);return new Promise(async(M,C)=>{var T;try{this.addMissingFiles([{mimeType:h,id:g,dataURL:U,created:Date.now(),lastRetrieved:Date.now()}]);let R=this.imageCache.get(g);R||(this.addNewImagesToImageCache(),await this.updateImageCache([y])),(R==null?void 0:R.image)instanceof Promise&&await R.image,this.state.pendingImageElementId!==y.id&&((T=this.state.newElement)==null?void 0:T.id)!==y.id&&this.initializeImageDimensions(y,!0),M(y)}catch(R){console.error(R),C(new Error(j("errors.imageInsertError")))}finally{u||Aa(this.interactiveCanvas)}})}),Z(this,"insertImageElement",async(c,d,u)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:j("errors.imageToolNotSupported")});return}this.scene.insertElement(c);try{return await this.initializeImage({imageFile:d,imageElement:c,showCursorImagePreview:u})}catch(h){return ye(c,{isDeleted:!0}),this.actionManager.executeAction(Sa),this.setState({errorMessage:h.message||j("errors.imageInsertError")}),null}}),Z(this,"setImagePreviewCursor",async c=>{let d;try{d=await rA(c,{maxWidthOrHeight:96})}catch(h){throw h.cause==="UNSUPPORTED"?new Error(j("errors.unsupportedFileType")):h}let u=await qF(d);if(c.type===it.svg){let h=await TQ(u),g=Math.min(h.height,96),U=g*(h.width/h.height);U>96&&(U=96,g=U*(h.height/h.width));let y=document.createElement("canvas");y.height=g,y.width=U,y.getContext("2d").drawImage(h,0,0,U,g),u=y.toDataURL(it.svg)}this.state.pendingImageElementId&&an(this.interactiveCanvas,`url(${u}) 4 4, auto`)}),Z(this,"onImageAction",async({insertOnCanvasDirectly:c})=>{try{let d=this.state.width/2+this.state.offsetLeft,u=this.state.height/2+this.state.offsetTop,{x:h,y:g}=yn({clientX:d,clientY:u},this.state),U=await ZT({description:"Image",extensions:Object.keys(s6)}),y=this.createImageElement({sceneX:h,sceneY:g,addToFrameUnderCursor:!1});c?(this.insertImageElement(y,U),this.initializeImageDimensions(y),this.setState({selectedElementIds:Yt({[y.id]:!0},this.state)},()=>{this.actionManager.executeAction(Sa)})):this.setState({pendingImageElementId:y.id},()=>{this.insertImageElement(y,U,!0)})}catch(d){d.name!=="AbortError"?console.error(d):console.warn(d),this.setState({pendingImageElementId:null,newElement:null,activeTool:yr(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Sa)})}}),Z(this,"initializeImageDimensions",(c,d=!1)=>{var h;let u=Go(c)&&((h=this.imageCache.get(c.fileId))==null?void 0:h.image);if(!u||u instanceof Promise){if(c.width<Uu/this.state.zoom.value&&c.height<Uu/this.state.zoom.value){let g=100/this.state.zoom.value;ye(c,{x:c.x-g/2,y:c.y-g/2,width:g,height:g})}return}if(d||c.width<Uu/this.state.zoom.value&&c.height<Uu/this.state.zoom.value){let g=Math.max(this.state.height-120,160),U=Math.min(g,Math.floor(this.state.height*.5)/this.state.zoom.value),y=Math.min(u.naturalHeight,U),x=y*(u.naturalWidth/u.naturalHeight),w=c.x+c.width/2-x/2,E=c.y+c.height/2-y/2;ye(c,{x:w,y:E,width:x,height:y,crop:null})}}),Z(this,"updateImageCache",async(c,d=this.files)=>{let{updatedFiles:u,erroredFiles:h}=await IQ({imageCache:this.imageCache,fileIds:c.map(g=>g.fileId),files:d});if(u.size||h.size)for(let g of c)u.has(g.fileId)&&Vn.delete(g);return h.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(g=>Go(g)&&h.has(g.fileId)?yt(g,{status:"error"}):g)),{updatedFiles:u,erroredFiles:h}}),Z(this,"addNewImagesToImageCache",async(c=NQ(this.scene.getNonDeletedElements()),d=this.files)=>{let u=c.filter(h=>!h.isDeleted&&!this.imageCache.has(h.fileId));if(u.length){let{updatedFiles:h}=await this.updateImageCache(u,d);h.size&&this.scene.triggerUpdate()}}),Z(this,"scheduleImageRefresh",jb(()=>{this.addNewImagesToImageCache()},Nxe)),Z(this,"updateBindingEnabledOnPointerMove",c=>{let d=hTe(c);this.state.isBindingEnabled!==d&&this.setState({isBindingEnabled:d})}),Z(this,"maybeSuggestBindingAtCursor",(c,d)=>{let u=Ka(c,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,d);this.setState({suggestedBindings:u!=null?[u]:[]})}),Z(this,"maybeSuggestBindingsForLinearElementAtCoords",(c,d,u)=>{if(!d.length)return;let h=d.reduce((g,U)=>{let y=Ka(U,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,Fe(c),Fe(c));return y!=null&&!qq(c,u==null?void 0:u.id,y)&&g.push(y),g},[]);this.setState({suggestedBindings:h})}),Z(this,"handleInteractiveCanvasRef",c=>{var d,u;c!==null?(this.interactiveCanvas=c,this.interactiveCanvas.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener("touchend",this.onTouchEnd)):((d=this.interactiveCanvas)==null||d.removeEventListener("touchstart",this.onTouchStart),(u=this.interactiveCanvas)==null||u.removeEventListener("touchend",this.onTouchEnd))}),Z(this,"handleAppOnDrop",async c=>{var y,x,w,E;let{file:d,fileHandle:u}=await bRe(c),{x:h,y:g}=yn(c,this.state);try{if(kh(d)&&this.isToolSupported("image")){if((d==null?void 0:d.type)===it.png||(d==null?void 0:d.type)===it.svg)try{let A=await gJ(d,this.state,this.scene.getElementsIncludingDeleted(),u);this.syncActionResult({...A,appState:{...A.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:me.IMMEDIATELY});return}catch(A){if(A.name!=="EncodingError")throw new Error(j("alerts.couldNotLoadInvalidFile"))}let S=this.createImageElement({sceneX:h,sceneY:g});this.insertImageElement(S,d),this.initializeImageDimensions(S),this.setState({selectedElementIds:Yt({[S.id]:!0},this.state)});return}}catch(S){return this.setState({isLoading:!1,errorMessage:S.message})}let U=c.dataTransfer.getData(it.excalidrawlib);if(U&&typeof U=="string"){try{let S=bJ(U);this.addElementsFromPasteOrLibrary({elements:Une(S),position:c,files:null})}catch(S){this.setState({errorMessage:S.message})}return}if(d&&await this.loadFileToCanvas(d,u),(x=(y=c.dataTransfer)==null?void 0:y.types)==null?void 0:x.includes("text/plain")){let S=(w=c.dataTransfer)==null?void 0:w.getData("text");if(S&&s3(S,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(S)||((E=Mp(S))==null?void 0:E.type)==="video")){let A=this.insertEmbeddableElement({sceneX:h,sceneY:g,link:po(S)});A&&this.setState({selectedElementIds:{[A.id]:!0}})}}}),Z(this,"loadFileToCanvas",async(c,d)=>{c=await MI(c);try{let u=this.scene.getElementsIncludingDeleted(),h;try{h=await mJ(c,this.state,u,d)}catch(g){let U=g instanceof Fu;if(U&&g.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:j("errors.imageToolNotSupported")});return}let y=j(U?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:y})}if(!h)return;h.type===it.excalidraw?(Rf(u.concat(h.data.elements)),this.store.updateSnapshot(ct(u),this.state),this.setState({isLoading:!0}),this.syncActionResult({...h.data,appState:{...h.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:me.IMMEDIATELY})):h.type===it.excalidrawlib&&await this.library.updateLibrary({libraryItems:c,merge:!0,openLibraryMenu:!0}).catch(g=>{console.error(g),this.setState({errorMessage:j("errors.importLibraryError")})})}catch(u){this.setState({isLoading:!1,errorMessage:u.message})}}),Z(this,"handleCanvasContextMenu",c=>{if(c.preventDefault(),("pointerType"in c.nativeEvent&&c.nativeEvent.pointerType==="touch"||"pointerType"in c.nativeEvent&&c.nativeEvent.pointerType==="pen"&&c.button!==Cd.SECONDARY)&&this.state.activeTool.type!=="selection")return;let{x:d,y:u}=yn(c,this.state),h=this.getElementAtPosition(d,u,{preferSelected:!0,includeLockedElements:!0}),g=this.scene.getSelectedElements(this.state),U=this.isHittingCommonBoundingBoxOfSelectedElements({x:d,y:u},g),y=h||U?"element":"canvas",x=this.excalidrawContainerRef.current,{top:w,left:E}=x.getBoundingClientRect(),S=c.clientX-E,A=c.clientY-w;xn("contextMenu","openContextMenu",y),this.setState({...h&&!this.state.selectedElementIds[h.id]?{...this.state,...rs({editingGroupId:this.state.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:mt(h)?new Be(h):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:A,left:S,items:this.getContextMenuItems(y)}})})}),Z(this,"maybeDragNewGenericElement",(c,d,u=!0)=>{var M,C,T;let h=this.state.selectionElement,g=c.lastCoords;if(h&&this.state.activeTool.type!=="eraser"){ZF({newElement:h,elementType:this.state.activeTool.type,originX:c.origin.x,originY:c.origin.y,x:g.x,y:g.y,width:Fi(c.origin.x,g.x),height:Fi(c.origin.y,g.y),shouldMaintainAspectRatio:Fg(d),shouldResizeFromCenter:qE(d),zoom:this.state.zoom.value,informMutation:u});return}let U=this.state.newElement;if(!U)return;let[y,x]=Ir(g.x,g.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),w=Go(U)&&((M=this.imageCache.get(U.fileId))==null?void 0:M.image),E=w&&!(w instanceof Promise)?w.width/w.height:null;this.maybeCacheReferenceSnapPoints(d,[U]);let{snapOffset:S,snapLines:A}=qTe(U,this,d,{x:c.originInGrid.x+(((C=this.state.originSnapOffset)==null?void 0:C.x)??0),y:c.originInGrid.y+(((T=this.state.originSnapOffset)==null?void 0:T.y)??0)},{x:y-c.originInGrid.x,y:x-c.originInGrid.y},this.scene.getNonDeletedElementsMap());y+=S.x,x+=S.y,this.setState({snapLines:A}),ZF({newElement:U,elementType:this.state.activeTool.type,originX:c.originInGrid.x,originY:c.originInGrid.y,x:y,y:x,width:Fi(c.originInGrid.x,y),height:Fi(c.originInGrid.y,x),shouldMaintainAspectRatio:Zt(U)?!Fg(d):Fg(d),shouldResizeFromCenter:qE(d),zoom:this.state.zoom.value,widthAspectRatio:E,originOffset:this.state.originSnapOffset,informMutation:u}),this.setState({newElement:U}),(this.state.activeTool.type===zr.frame||this.state.activeTool.type===zr.magicframe)&&this.setState({elementsToHighlight:a3(this.scene.getNonDeletedElements(),U,this.state,this.scene.getNonDeletedElementsMap())})}),Z(this,"maybeHandleCrop",(c,d)=>{var x;if(!this.state.croppingElementId)return!1;let u=c.resize.handleType,h=c.lastCoords,[g,U]=Ir(h.x-c.resize.offset.x,h.y-c.resize.offset.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(u&&y&&Zt(y)){let w=c.originalElements.get(y.id),E=Go(y)&&((x=this.imageCache.get(y.fileId))==null?void 0:x.image);if(w&&Zt(w)&&E&&!(E instanceof Promise)){let[S,A]=Ir(h.x,h.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),M={x:S-c.originInGrid.x,y:A-c.originInGrid.y};this.maybeCacheReferenceSnapPoints(d,[y]);let{snapOffset:C,snapLines:T}=cF([y],[w],this,d,M,u);ye(y,LMe(y,u,E.naturalWidth,E.naturalHeight,g+C.x,U+C.y,d.shiftKey?w.width/w.height:void 0)),zs(y,this.scene.getNonDeletedElementsMap(),{newSize:{width:y.width,height:y.height}}),this.setState({isCropping:u&&u!=="rotation",snapLines:T})}return!0}return!1}),Z(this,"maybeHandleResize",(c,d)=>{let u=this.scene.getSelectedElements(this.state),h=u.filter(E=>at(E)),g=c.resize.handleType;if(h.length>0&&g==="rotation"||u.length===1&&Fe(u[0])||this.state.croppingElementId)return!1;this.setState({isResizing:g&&g!=="rotation",isRotating:g==="rotation",activeEmbeddable:null});let U=c.lastCoords,[y,x]=Ir(U.x-c.resize.offset.x,U.y-c.resize.offset.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),w=new Map;if(h.forEach(E=>{hc(this.scene.getNonDeletedElements(),E.id).forEach(S=>{w.set(E.id+S.id,{x:S.x-E.x,y:S.y-E.y})})}),!this.state.selectedElementsAreBeingDragged){let[E,S]=Ir(U.x,U.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),A={x:E-c.originInGrid.x,y:S-c.originInGrid.y},M=[...c.originalElements.values()];this.maybeCacheReferenceSnapPoints(d,u);let{snapOffset:C,snapLines:T}=cF(u,wt(M,this.state),this,d,A,g);y+=C.x,x+=C.y,this.setState({snapLines:T})}if(KNe(c.originalElements,g,u,this.scene.getElementsMapIncludingDeleted(),this.scene,z5(d),qE(d),u.some(E=>Zt(E))?!Fg(d):Fg(d),y,x,c.resize.center.x,c.resize.center.y)){let E=JE(u,this.scene.getNonDeletedElementsMap(),this.state.zoom),S=new Set;return h.forEach(A=>{a3(this.scene.getNonDeletedElements(),A,this.state,this.scene.getNonDeletedElementsMap()).forEach(M=>S.add(M))}),this.setState({elementsToHighlight:[...S],suggestedBindings:E}),!0}return!1}),Z(this,"getContextMenuItems",c=>{let d=[];return d.push(oz,sz),c==="canvas"?this.state.viewModeEnabled?[...d,lz,SA,zz,kA]:[rz,Fr,oz,sz,az,Fr,UOe,Bje,Fr,lz,Cje,SA,zz,kA]:(d.push(az),this.state.viewModeEnabled?[m3,...d]:[Fr,iz,m3,rz,Fr,cze,fze,dze,Fr,nFe,Fr,...d,Fr,dje,uje,Fr,pje,Zze,Aje,Mje,Nje,mje,Fr,yje,Fr,pOe,mOe,gOe,bOe,Fr,Eje,Sje,Fr,tFe,Fr,mne,Nne,Fr,wOe,jje,Fr,jte])}),Z(this,"handleWheel",qn(c=>{if(!(c.target instanceof HTMLCanvasElement||c.target instanceof HTMLTextAreaElement||c.target instanceof HTMLIFrameElement)){c[Q.CTRL_OR_CMD]&&c.preventDefault();return}if(c.preventDefault(),Xg)return;let{deltaX:d,deltaY:u}=c;if(c.metaKey||c.ctrlKey){let h=Math.sign(u),g=I7*100,U=Math.abs(u),y=u;U>g&&(y=g*h);let x=this.state.zoom.value-y/100;x+=Math.log10(Math.max(1,this.state.zoom.value))*-h*Math.min(1,U/20),this.translateCanvas(w=>({...Hu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:bf(x)},w),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(c.shiftKey){this.translateCanvas(({zoom:h,scrollX:g})=>({scrollX:g-(u||d)/h.value}));return}this.translateCanvas(({zoom:h,scrollX:g,scrollY:U})=>({scrollX:g-d/h.value,scrollY:U-u/h.value}))})),Z(this,"savePointer",(c,d,u)=>{var y,x;if(!c||!d)return;let{x:h,y:g}=yn({clientX:c,clientY:d},this.state),U={x:h,y:g,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(x=(y=this.props).onPointerUpdate)==null||x.call(y,{pointer:U,button:u,pointersMap:Kt.pointers})}),Z(this,"resetShouldCacheIgnoreZoomDebounced",l6(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300)),Z(this,"updateDOMRect",c=>{var d;if((d=this.excalidrawContainerRef)!=null&&d.current){let u=this.excalidrawContainerRef.current,{width:h,height:g,left:U,top:y}=u.getBoundingClientRect(),{width:x,height:w,offsetTop:E,offsetLeft:S}=this.state;if(h===x&&g===w&&U===S&&y===E){c&&c();return}this.setState({width:h,height:g,offsetLeft:U,offsetTop:y},()=>{c&&c()})}}),Z(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});let n=lc(),{excalidrawAPI:r,viewModeEnabled:i=!1,zenModeEnabled:s=!1,gridModeEnabled:o=!1,objectsSnapModeEnabled:a=!1,theme:l=n.theme,name:f=`${j("labels.untitled")}-${yB()}`}=t;if(this.state={...n,theme:l,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:i,zenModeEnabled:s,objectsSnapModeEnabled:a,gridModeEnabled:o??n.gridModeEnabled,name:f,width:window.innerWidth,height:window.innerHeight},this.id=mT(),this.library=new Yje(this),this.actionManager=new oFe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new _f,this.canvas=document.createElement("canvas"),this.rc=B0.canvas(this.canvas),this.renderer=new Yz(this.scene),this.visibleElements=[],this.store=new EIe,this.history=new Uz,r){let c={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:d=>{this.actionManager.registerAction(d)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:d=>this.onChangeEmitter.on(d),onPointerDown:d=>this.onPointerDownEmitter.on(d),onPointerUp:d=>this.onPointerUpEmitter.on(d),onScrollChange:d=>this.onScrollChangeEmitter.on(d),onUserFollow:d=>this.onUserFollowEmitter.on(d)};typeof r=="function"?r(c):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new wf(this.scene),this.history=new Uz,this.actionManager.registerAll(GC),this.actionManager.registerAction(iFe(this.history,this.store)),this.actionManager.registerAction(sFe(this.history,this.store))}onWindowMessage(t){if(t.origin!=="https://player.vimeo.com"&&t.origin!=="https://www.youtube.com")return;let n=null;try{n=JSON.parse(t.data)}catch{}if(n)switch(t.origin){case"https://player.vimeo.com":if(n.method==="paused"){let r=null,i=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!i)break;for(let s of i)s.contentWindow===t.source&&(r=s.contentWindow);r==null||r.postMessage(JSON.stringify({method:n.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(n.event==="infoDelivery"&&n.info&&n.id&&typeof n.info.playerState=="number"){let r=n.id,i=n.info.playerState;Object.values(JU).includes(i)&&jS.set(r,i)}break}}cacheEmbeddableRef(t,n){n&&this.iFrameRefs.set(t.id,n)}getHTMLIFrameElement(t){return this.iFrameRefs.get(t.id)}handleEmbeddableCenterClick(t){var r,i,s,o;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===t&&((i=this.state.activeEmbeddable)==null?void 0:i.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:t,state:"active"},selectedElementIds:{[t.id]:!0},newElement:null,selectionElement:null})},100),_d(t)))return;let n=this.getHTMLIFrameElement(t);if(n!=null&&n.contentWindow){if(n.src.includes("youtube")){let a=jS.get(t.id);switch(a||(jS.set(t.id,JU.UNSTARTED),n.contentWindow.postMessage(JSON.stringify({event:"listening",id:t.id}),"*")),a){case JU.PLAYING:case JU.BUFFERING:(s=n.contentWindow)==null||s.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(o=n.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}n.src.includes("player.vimeo.com")&&n.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(t,n,r,i){var s,o;return t&&!n.altKey&&!n.shiftKey&&!n.metaKey&&!n.ctrlKey&&(((s=this.state.activeEmbeddable)==null?void 0:s.element)!==t||((o=this.state.activeEmbeddable)==null?void 0:o.state)==="hover"||!this.state.activeEmbeddable)&&r>=t.x+t.width/3&&r<=t.x+2*t.width/3&&i>=t.y+t.height/3&&i<=t.y+2*t.height/3}renderEmbeddables(){let t=this.state.zoom.value,n=this.state.width,r=this.state.height,i=this.scene.getNonDeletedElements().filter(s=>Rs(s)&&this.embedsValidationStatus.get(s.id)===!0||_d(s));return m.jsx(m.Fragment,{children:i.map(s=>{var h,g,U,y,x,w,E,S,A;let{x:o,y:a}=Wa({sceneX:s.x,sceneY:s.y},this.state),l=u9(s,n,r,this.state,this.scene.getNonDeletedElementsMap()),f=this.initializedEmbeds.has(s.id);if(l&&!f&&this.initializedEmbeds.add(s.id),!(l||f))return null;let c;if(_d(s)){c=null;let M=(((h=s.customData)==null?void 0:h.generationData)??this.magicGenerations.get(s.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(M.status==="done"){let C=M.html;c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>C}}else if(M.status==="pending")c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>H5(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===Nt.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let C;M.code==="ERR_GENERATION_INTERRUPTED"?C="Generation was interrupted...":C=M.message||"Generation failed",c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>H5(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${At.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${C}</h3>
                  `)}}}else c=Mp(hQ(s.link||""));let d=((g=this.state.activeEmbeddable)==null?void 0:g.element)===s&&((U=this.state.activeEmbeddable)==null?void 0:U.state)==="active",u=((y=this.state.activeEmbeddable)==null?void 0:y.element)===s&&((x=this.state.activeEmbeddable)==null?void 0:x.state)==="hover";return m.jsx("div",{className:ze("excalidraw__embeddable-container",{"is-hovered":u}),style:{transform:l?`translate(${o-this.state.offsetLeft}px, ${a-this.state.offsetTop}px) scale(${t})`:"none",display:l?"block":"none",opacity:jq(s,Hs(s,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((w=this.state.openDialog)==null?void 0:w.name)==="elementLinkSelector"?_Z:1),"--embeddable-radius":`${Qa(Math.min(s.width,s.height),s)}px`},children:m.jsxs("div",{className:"excalidraw__embeddable-container__inner",style:{width:l?`${s.width}px`:0,height:l?`${s.height}px`:0,transform:l?`rotate(${s.angle}rad)`:"none",pointerEvents:d?Z1.enabled:Z1.disabled},children:[u&&m.jsx("div",{className:"excalidraw__embeddable-hint",children:j("buttons.embeddableInteractionButton")}),m.jsx("div",{className:"excalidraw__embeddable__outer",style:{padding:`${s.strokeWidth}px`},children:(Rs(s)?(S=(E=this.props).renderEmbeddable)==null?void 0:S.call(E,s,this.state):null)??m.jsx("iframe",{ref:M=>this.cacheEmbeddableRef(s,M),className:"excalidraw__embeddable",srcDoc:(c==null?void 0:c.type)==="document"?c.srcdoc(this.state.theme):void 0,src:(c==null?void 0:c.type)!=="document"?(c==null?void 0:c.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(A=c==null?void 0:c.sandbox)!=null&&A.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},s.id)})})}toggleOverscrollBehavior(t){document.documentElement.style.overscrollBehaviorX=t.type==="pointerenter"?"none":"auto"}render(){var c,d,u,h,g,U,y,x;let t=this.scene.getSelectedElements(this.state),{renderTopRightUI:n,renderCustomStats:r}=this.props,i=this.scene.getSceneNonce(),{elementsMap:s,visibleElements:o}=this.renderer.getRenderableElements({sceneNonce:i,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(c=this.state.newElement)==null?void 0:c.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=o;let a=this.scene.getNonDeletedElementsMap(),l="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",f=t[0];return m.jsx("div",{className:ze("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":l?Z1.disabled:Z1.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:m.jsx(_re.Provider,{value:this,children:m.jsx(Pre.Provider,{value:this.props,children:m.jsx(uN.Provider,{value:this.excalidrawContainerValue,children:m.jsx(dN.Provider,{value:this.device,children:m.jsx(mN.Provider,{value:this.setAppState,children:m.jsx(pN.Provider,{value:this.state,children:m.jsxs(hN.Provider,{value:this.scene.getNonDeletedElements(),children:[m.jsxs(gN.Provider,{value:this.actionManager,children:[m.jsx(oze,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:tb().code,renderTopRightUI:n,renderCustomStats:r,showExitZenModeBtn:typeof((u=this.props)==null?void 0:u.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),m.jsx("div",{className:"excalidraw-textEditorContainer"}),m.jsx("div",{className:"excalidraw-contextMenuContainer"}),m.jsx("div",{className:"excalidraw-eye-dropper-container"}),m.jsx(Fze,{trails:[this.laserTrails,this.eraserTrail]}),t.length===1&&((h=this.state.openDialog)==null?void 0:h.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&m.jsx(Pje,{element:f,elementsMap:a,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},f.id),this.props.aiEnabled!==!1&&t.length===1&&Jy(f)&&m.jsx(Zz,{element:f,elementsMap:s,children:m.jsx(PS,{title:j("labels.convertToCode"),icon:hq,checked:!1,onChange:()=>this.onMagicFrameGenerate(f,"button")})}),t.length===1&&_d(f)&&((U=(g=f.customData)==null?void 0:g.generationData)==null?void 0:U.status)==="done"&&m.jsxs(Zz,{element:f,elementsMap:s,children:[m.jsx(PS,{title:j("labels.copySource"),icon:DT,checked:!1,onChange:()=>this.onIframeSrcCopy(f)}),m.jsx(PS,{title:"Enter fullscreen",icon:fEe,checked:!1,onChange:()=>{let w=this.getHTMLIFrameElement(f);if(w)try{w.requestFullscreen(),this.setState({activeEmbeddable:{element:f,state:"active"},selectedElementIds:{[f.id]:!0},newElement:null,selectionElement:null})}catch(E){console.warn(E),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&m.jsx(lze,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&m.jsx(lFe,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:w=>{this.setState({contextMenu:null},()=>{this.focusContainer(),w==null||w()})}}),m.jsx(Bze,{canvas:this.canvas,rc:this.rc,elementsMap:s,allElementsMap:a,visibleElements:o,sceneNonce:i,selectionNonce:(y=this.state.selectionElement)==null?void 0:y.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:Y2(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&m.jsx(tHe,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:s,allElementsMap:a,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),m.jsx(Lze,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:s,visibleElements:o,allElementsMap:a,selectedElements:t,sceneNonce:i,selectionNonce:(x=this.state.selectionElement)==null?void 0:x.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&m.jsx(Wze,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(t){Object.assign(this.plugins,t)}async onMagicFrameGenerate(t,n){var o;let r=(o=this.plugins.diagramToCode)==null?void 0:o.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}let i=yI(this.scene.getNonDeletedElements(),t).filter(a=>!Jy(a));if(!i.length){n==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),xn("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}let s=this.insertIframeElement({sceneX:t.x+t.width+30,sceneY:t.y,width:t.width,height:t.height});if(s){this.updateMagicGeneration({frameElement:s,data:{status:"pending"}}),this.setState({selectedElementIds:{[s.id]:!0}}),xn("ai","generate (start)","d2c");try{let{html:a}=await r({frame:t,children:i});if(xn("ai","generate (success)","d2c"),!a.trim()){this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}let l=a.includes("<!DOCTYPE html>")&&a.includes("</html>")?a.slice(a.indexOf("<!DOCTYPE html>"),a.indexOf("</html>")+7):a;this.updateMagicGeneration({frameElement:s,data:{status:"done",html:l}})}catch(a){xn("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:a.message||"Unknown error during generation"}})}}}onIframeSrcCopy(t){var n,r;((r=(n=t.customData)==null?void 0:n.generationData)==null?void 0:r.status)==="done"&&(Kb(t.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(t){let n=t??this.files;this.scene.getNonDeletedElements().forEach(r=>{Go(r)&&n[r.fileId]&&(this.imageCache.delete(r.fileId),Vn.delete(r))})}async componentDidMount(){var t;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,(vt.MODE===Fs.TEST||vt.DEV)&&(this.setState.bind(this),Object.defineProperties(window.h,{state:{configurable:!0,get:()=>this.state},setState:{configurable:!0,value:(...n)=>this.setState(...n)},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history},store:{configurable:!0,value:this.store},fonts:{configurable:!0,value:this.fonts}})),this.store.onStoreIncrementEmitter.on(n=>{this.history.record(n.elementsChange,n.appStateChange)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),Af()||(this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints()),MC&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(t=this.resizeObserver)==null||t.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),xxe()&&!Ive()&&this.setState({errorMessage:m.jsx(hze,{})})}componentWillUnmount(){var t,n;(t=window.launchQueue)==null||t.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new _f,this.fonts=new wf(this.scene),this.renderer=new Yz(this.scene),this.files={},this.imageCache.clear(),(n=this.resizeObserver)==null||n.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),Vn.destroy(),Wc.destroy(),clearTimeout(wd),Dr.clearCache(),rs.clearCache(),wd=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(Bn(document,"keydown",this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(Bn(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),Bn(window,"message",this.onWindowMessage,!1),Bn(document,"pointerup",this.removePointer,{passive:!1}),Bn(document,"copy",this.onCopy,{passive:!1}),Bn(document,"keyup",this.onKeyUp,{passive:!0}),Bn(document,"pointermove",this.updateCurrentCursorPosition,{passive:!1}),Bn(document.fonts,"loadingdone",t=>{let n=t.fontfaces;this.fonts.onLoaded(n)},{passive:!1}),Bn(document,"gesturestart",this.onGestureStart,!1),Bn(document,"gesturechange",this.onGestureChange,!1),Bn(document,"gestureend",this.onGestureEnd,!1),Bn(window,"focus",()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(Bn(document,"fullscreenchange",this.onFullscreenChange,{passive:!1}),Bn(document,"paste",this.pasteFromClipboard,{passive:!1}),Bn(document,"cut",this.onCut,{passive:!1}),Bn(window,"resize",this.onResize,!1),Bn(window,"unload",this.onUnload,!1),Bn(window,"blur",this.onBlur,!1),Bn(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),Bn(this.excalidrawContainerRef.current,"dragover",this.disableEvent,!1),Bn(this.excalidrawContainerRef.current,"drop",this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(Bn(gve(this.excalidrawContainerRef.current),"scroll",this.onScroll,{passive:!1})))}componentDidUpdate(t,n){var a,l,f,c,d,u,h,g,U,y;this.updateEmbeddables();let r=this.scene.getElementsIncludingDeleted(),i=this.scene.getElementsMapIncludingDeleted(),s=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),t.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),n.userToFollow&&!this.state.collaborators.has(n.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(n.zoom.value!==this.state.zoom.value||n.scrollX!==this.state.scrollX||n.scrollY!==this.state.scrollY)&&((l=(a=this.props)==null?void 0:a.onScrollChange)==null||l.call(a,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),n.userToFollow!==this.state.userToFollow&&(n.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:n.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Rl(this.state)&&this.setState({activeTool:yr(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&n.theme!==this.state.theme&&gQ(this.interactiveCanvas,this.state.theme),n.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),t.langCode!==this.props.langCode&&this.updateLanguage(),Rl(n)&&!Rl(this.state)&&this.eraserTrail.endPath(),t.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),n.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((f=n.openDialog)==null?void 0:f.name)==="elementLinkSelector"||((c=this.state.openDialog)==null?void 0:c.name)==="elementLinkSelector")&&((d=n.openDialog)==null?void 0:d.name)!==((u=this.state.openDialog)==null?void 0:u.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),t.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),t.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(h=this.excalidrawContainerRef.current)==null||h.classList.toggle("theme--dark",this.state.theme===Nt.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Sa)}),(g=this.state.editingTextElement)!=null&&g.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});let{multiElement:o}=n;n.activeTool!==this.state.activeTool&&o!=null&&$u(this.state)&&Yl(o,!1)&&VC(o,this.state,Ga(Be.getPointAtIndexGlobalCoordinates(o,-1,s)),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.store.commit(i,this.state),this.state.isLoading||((y=(U=this.props).onChange)==null||y.call(U,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){Gg=!1}async addElementsFromMixedContentPaste(t,{isPlainPaste:n,sceneX:r,sceneY:i}){if(!n&&t.some(s=>s.type==="imageUrl")&&this.isToolSupported("image")){let s=t.filter(d=>d.type==="imageUrl").map(d=>d.value),o=await Promise.all(s.map(async d=>{try{return{file:await gRe(d)}}catch(u){let h=u.message;return u.cause==="FETCH_ERROR"?h=j("errors.failedToFetchImage"):u.cause==="UNSUPPORTED"&&(h=j("errors.unsupportedFileType")),{errorMessage:h}}})),a=i,l=!1,f={};for(let d of o)if(d.file){let u=this.createImageElement({sceneX:r,sceneY:a}),h=await this.insertImageElement(u,d.file);h&&(l||(l=!0,a-=h.height/2),ye(h,{y:a},!1),a=u.y+u.height+25,f[u.id]=!0)}this.setState({selectedElementIds:Yt(f,this.state)});let c=o.find(d=>!!d.errorMessage);c&&c.errorMessage&&this.setState({errorMessage:c.errorMessage})}else{let s=t.filter(o=>o.type==="text");s.length&&this.addTextFromPaste(s.map(o=>o.value).join(`

`),n)}}addTextFromPaste(t,n=!1){let{x:r,y:i}=yn({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),s={x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:t,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Fb,verticalAlign:B4,locked:!1},o=cn({fontSize:s.fontSize,fontFamily:s.fontFamily}),a=qh(s.fontFamily),[l,,f]=lTe(this.state),c=Math.max(Math.min((f-l)*.5,800),200),d=10,u=i,h=n?[t]:t.split(`
`),g=h.reduce((U,y,x)=>{var E;let w=f6(y).trim();if(w.length){let S=this.getTopLayerFrameAtSceneCoords({x:r,y:u}),A=Xi(w,o,a),M=A.width>c,C=M?f1(w,o,c):w;A=M?Xi(C,o,a):A;let T=r-A.width/2,R=u-A.height/2,P=bo({...s,x:T,y:R,text:C,originalText:w,lineHeight:a,autoResize:!M,frameId:S?S.id:null});U.push(P),u+=P.height+d}else(E=h[x-1])!=null&&E.trim()&&(u+=Vb(s.fontSize,a)+d);return U},[]);g.length!==0&&(this.scene.insertElements(g),this.setState({selectedElementIds:Yt(Object.fromEntries(g.map(U=>[U.id,!0])),this.state)}),!n&&g.length>1&&Qz===!1&&!this.device.editor.isMobile&&(this.setToast({message:j("toast.pasteAsSingleElement",{shortcut:Ue("CtrlOrCmd+Shift+V")}),duration:5e3}),Qz=!0),this.store.shouldCaptureIncrement())}handleTextWysiwyg(t,{isExistingElement:n=!1}){let r=this.scene.getElementsMapIncludingDeleted(),i=(s,o)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(a=>a.id===t.id&&je(a)?yt(a,{originalText:s,isDeleted:o??a.isDeleted,...UQ(a,fi(a,r),r,s)}):a)])};Yze({id:t.id,canvas:this.canvas,getViewportCoords:(s,o)=>{let{x:a,y:l}=Wa({sceneX:s,sceneY:o},this.state);return[a-this.state.offsetLeft,l-this.state.offsetTop]},onChange:qn(s=>{i(s,!1),nA(t)&&zs(t,this.scene.getNonDeletedElementsMap())}),onSubmit:qn(({viaKeyboard:s,nextOriginalText:o})=>{let a=!o.trim();if(i(o,a),!a&&s){let l=t.containerId?t.containerId:t.id;ri.flushSync(()=>{this.setState(f=>({selectedElementIds:Yt({...f.selectedElementIds,[l]:!0},f)}))})}a&&tQ(this.scene.getNonDeletedElements(),[t]),(!a||n)&&this.store.shouldCaptureIncrement(),ri.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&Il(this.interactiveCanvas,this.state),this.focusContainer()}),element:t,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),i(t.originalText,!1)}deselectElements(){this.setState({selectedElementIds:Yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(t,n){let r=this.getElementAtPosition(t,n,{includeBoundTextElement:!0});return r&&je(r)&&!r.isDeleted?r:null}getElementAtPosition(t,n,r){let i=this.getElementsAtPosition(t,n,r==null?void 0:r.includeBoundTextElement,r==null?void 0:r.includeLockedElements);if(i.length>1){if(r!=null&&r.preferSelected){for(let o=i.length-1;o>-1;o--)if(this.state.selectedElementIds[i[o].id])return i[o]}let s=i[i.length-1];return hp({x:t,y:n,element:s,shape:Zc(s,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:at(s)?this.frameNameBoundsCache.get(s):null})?s:i[i.length-2]}return i.length===1?i[0]:null}getElementsAtPosition(t,n,r=!1,i=!1){let s=[],o=this.scene.getNonDeletedElementsMap();return(r&&i?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(a=>(i||!a.locked)&&(r||!(je(a)&&a.containerId)))).filter(a=>this.hitElement(t,n,a)).filter(a=>{let l=Hs(a,o);return l&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?BF({x:t,y:n},l,o):!0}).filter(a=>_d(a)?(s.push(a),!1):!0).concat(s)}getElementHitThreshold(){return Axe/this.state.zoom.value}hitElement(t,n,r,i=!0){if(i&&this.state.selectedElementIds[r.id]&&lJ([r],this.state)){let s=uMe(r,this.scene.getNonDeletedElementsMap(),Zt(r)?0:this.getElementHitThreshold());if(J4(D(t,n),s))return!0}return Tq(t,n,Nq(r,this.scene.getNonDeletedElementsMap()))?!0:hp({x:t,y:n,element:r,shape:Zc(r,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:at(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(t,n){let r=this.scene.getNonDeletedElements(),i=this.scene.getSelectedElements(this.state);if(i.length===1)return wh(i[0],!1)?i[0]:null;let s=null;for(let o=r.length-1;o>=0;--o){if(r[o].isDeleted)continue;let[a,l,f,c]=gt(r[o],this.scene.getNonDeletedElementsMap());if(Et(r[o])&&hp({x:t,y:n,element:r[o],shape:Zc(r[o],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){s=r[o];break}else if(a<t&&t<f&&l<n&&n<c){s=r[o];break}}return wh(s,!1)?s:null}handleHoverSelectedLinearElement(t,n,r){let i=this.scene.getNonDeletedElementsMap(),s=Be.getElement(t.elementId,i);if(s)if(this.state.selectedLinearElement){let o=-1,a=null;hp({x:n,y:r,element:s,shape:Zc(s,this.scene.getNonDeletedElementsMap())})?(o=Be.getPointIndexUnderCursor(s,i,this.state.zoom,n,r),a=Be.getSegmentMidpointHitCoords(t,{x:n,y:r},this.state,this.scene.getNonDeletedElementsMap()),(Fe(s)?o===0||o===s.points.length-1:o>=0)||a?an(this.interactiveCanvas,rn.POINTER):this.hitElement(n,r,s)&&an(this.interactiveCanvas,rn.MOVE)):this.hitElement(n,r,s)&&(!Fe(s)||!(s.startBinding||s.endBinding))&&an(this.interactiveCanvas,rn.MOVE),this.state.selectedLinearElement.hoverPointIndex!==o&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:o}}),Be.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,a)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:a}})}else an(this.interactiveCanvas,rn.AUTO)}updateGestureOnPointerDown(t){Kt.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY}),Kt.pointers.size===2&&(Kt.lastCenter=yz(Kt.pointers),Kt.initialScale=this.state.zoom.value,Kt.initialDistance=xz(Array.from(Kt.pointers.values())))}initialPointerDownState(t){let n=yn(t,this.state),r=this.scene.getSelectedElements(this.state),[i,s,o,a]=nn(r),l=r.findIndex(Fe)===0;return{origin:n,withCmdOrCtrl:t[Q.CTRL_OR_CMD],originInGrid:Ga(Ir(n.x,n.y,t[Q.CTRL_OR_CMD]||l?null:this.getEffectiveGridSize())),scrollbars:Sz(OS,t.clientX-this.state.offsetLeft,t.clientY-this.state.offsetTop),lastCoords:{...n},originalElements:this.scene.getNonDeletedElements().reduce((f,c)=>(f.set(c.id,d1(c)),f),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(o+i)/2,y:(a+s)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(n,r)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(t,n){if(!(n.scrollbars.isOverEither&&!this.state.multiElement))return!1;LS=!0,n.lastCoords.x=t.clientX,n.lastCoords.y=t.clientY;let r=NS(s=>{s.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(s,n)}),i=qn(()=>{du=null,LS=!1,Il(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),r.flush()});return du=i,window.addEventListener("pointermove",r),window.addEventListener("pointerup",i),!0}isASelectedElement(t){return t!=null&&this.state.selectedElementIds[t.id]}isHittingCommonBoundingBoxOfSelectedElements(t,n){if(n.length<2)return!1;let r=this.getElementHitThreshold(),[i,s,o,a]=nn(n);return t.x>i-r&&t.x<o+r&&t.y>s-r&&t.y<a+r}getCurrentItemRoundness(t){return this.state.currentItemRoundness==="round"?{type:N6(t)?Pr.ADAPTIVE_RADIUS:Pr.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(t,n,r=!1){M0({event:t,app:this,selectedElements:n})&&(r||!Wc.getReferenceSnapPoints())&&Wc.setReferenceSnapPoints(XTe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(t,n,r=!1){M0({event:t,app:this,selectedElements:n})&&(r||!Wc.getVisibleGaps())&&Wc.setVisibleGaps(GTe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(t){return qn(n=>{this.maybeHandleResize(t,n)||this.maybeDragNewGenericElement(t,n)})}onKeyUpFromPointerDownHandler(t){return qn(n=>{n.key===Q.ALT&&n.preventDefault(),!this.maybeHandleResize(t,n)&&this.maybeDragNewGenericElement(t,n)})}onPointerMoveFromPointerDownHandler(t){return NS(n=>{var c,d,u,h,g,U;if(((c=this.state.openDialog)==null?void 0:c.name)==="elementLinkSelector")return;let r=yn(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){let[y,x]=Ir(r.x,r.y,n[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),w=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(w<0){let S=Be.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:y,y:x},this.state,this.scene.getNonDeletedElementsMap());w=S?Be.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,S,this.scene.getNonDeletedElementsMap()):-1}let E=Be.moveFixedSegment(this.state.selectedLinearElement,w,y,x,this.scene.getNonDeletedElementsMap());ri.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:E.segmentMidPointHoveredCoords,pointerDownState:E.pointerDownState}})});return}let i=this.lastPointerMoveCoords??t.origin;if(this.lastPointerMoveCoords=r,t.drag.offset===null&&(t.drag.offset=Ga(oRe(this.scene.getSelectedElements(this.state),t.origin.x,t.origin.y))),!(n.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(n,t))return;if(Rl(this.state)){this.handleEraser(n,t,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);let[s,o]=Ir(r.x,r.y,n[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!t.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&qt(D(r.x,r.y),D(t.origin.x,t.origin.y))<Uu)return;if(t.resize.isResizing&&(t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeHandleCrop(t,n)||this.maybeHandleResize(t,n)))return!0;let a=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){let y=this.state.editingLinearElement||this.state.selectedLinearElement;if(Be.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,a)){let x=Be.addMidpoint(this.state.selectedLinearElement,r,this,!n[Q.CTRL_OR_CMD],a);if(!x)return;ri.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices}})});return}else if(y.pointerDownState.segmentMidpoint.value!==null&&!y.pointerDownState.segmentMidpoint.added)return;if(Be.handlePointDragging(n,this,r.x,r.y,(x,w)=>{this.maybeSuggestBindingsForLinearElementAtCoords(x,w)},y,this.scene)){t.lastCoords.x=r.x,t.lastCoords.y=r.y,t.drag.hasOccurred=!0,this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging&&this.setState({editingLinearElement:{...this.state.editingLinearElement,isDragging:!0}}),this.state.selectedLinearElement.isDragging||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isDragging:!0}});return}}let l=t.hit.allHitElements.some(y=>this.isASelectedElement(y)),f=this.state.editingLinearElement&&n.shiftKey&&this.state.editingLinearElement.elementId===((d=t.hit.element)==null?void 0:d.id);if((l||t.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!f){let y=this.scene.getSelectedElements(this.state);if(y.every(S=>S.locked))return;let x=y.find(S=>at(S)),w=this.getTopLayerFrameAtSceneCoords(r),E=w&&!x?w:null;if(this.state.frameToHighlight!==E&&ri.flushSync(()=>{this.setState({frameToHighlight:E})}),t.drag.hasOccurred=!0,y.length>0&&!t.withCmdOrCtrl&&!this.state.editingTextElement&&((u=this.state.activeEmbeddable)==null?void 0:u.state)!=="active"){let S={x:r.x-t.origin.x,y:r.y-t.origin.y},A=[...t.originalElements.values()],M=n.shiftKey;if(M){let R=Math.abs(S.x),P=Math.abs(S.y),_=M&&R<P,O=M&&R>P;_&&(S.x=0),O&&(S.y=0)}if(this.state.croppingElementId){let R=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(R&&Zt(R)&&R.crop!==null&&t.hit.element===R){let P=R.crop,_=Go(R)&&((h=this.imageCache.get(R.fileId))==null?void 0:h.image);if(_&&!(_ instanceof Promise)){let O=nr(Ui(r.x-i.x,r.y-i.y),Math.max(this.state.zoom.value,2)),[F,B,$,z,H,G]=gt(R,a),V=Ye(pe(D(F,B),D(H,G),R.angle)),Y=Ye(pe(D($,B),D(H,G),R.angle)),K=Ye(pe(D(F,z),D(H,G),R.angle)),q=Hi(W4(Y,V)),se=Hi(W4(K,V)),de=Ui(mB(O,q),mB(O,se)),xe={...P,x:Mt(P.x-de[0]*Math.sign(R.scale[0]),0,_.naturalWidth-P.width),y:Mt(P.y-de[1]*Math.sign(R.scale[1]),0,_.naturalHeight-P.height)};ye(R,{crop:xe});return}}}this.maybeCacheVisibleGaps(n,y),this.maybeCacheReferenceSnapPoints(n,y);let{snapOffset:C,snapLines:T}=KTe(A,S,this,n,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:T}),this.state.editingFrame||iRe(t,y,S,this.scene,C,n[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(y.length!==1||!Fe(y[0]))&&this.setState({suggestedBindings:JE(y,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),n.altKey&&!t.hit.hasBeenDuplicated){t.hit.hasBeenDuplicated=!0;let R=[],P=[],_=new Map,O=new Map,F=t.hit.element,B=new Set(this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}).map(H=>H.id)),$=this.scene.getElementsIncludingDeleted();for(let H of $){let G=B.has(H.id)||H.id===(F==null?void 0:F.id)&&t.hit.wasAddedToSelection;if(Math.abs(H.x)>1e7||Math.abs(H.x)>1e7||Math.abs(H.width)>1e7||Math.abs(H.height)>1e7){console.error("Alt+dragging element in scene with invalid dimensions",H.x,H.y,H.width,H.height,G);return}if(G){let V=vQ(this.state.editingGroupId,_,H);if(Math.abs(V.x)>1e7||Math.abs(V.x)>1e7||Math.abs(V.width)>1e7||Math.abs(V.height)>1e7){console.error("Alt+dragging duplicated element with invalid dimensions",V.x,V.y,V.width,V.height);return}let Y=t.originalElements.get(H.id);if(Math.abs(Y.x)>1e7||Math.abs(Y.x)>1e7||Math.abs(Y.width)>1e7||Math.abs(Y.height)>1e7){console.error("Alt+dragging duplicated element with invalid dimensions",Y.x,Y.y,Y.width,Y.height);return}ye(V,{x:Y.x,y:Y.y}),t.originalElements.set(V.id,V),R.push(V),P.push(H),O.set(H.id,V.id)}else R.push(H)}let z=[...R,...P];z=((U=(g=this.props).onDuplicate)==null?void 0:U.call(g,z,$))||z,uc(z,ct(P)),dQ(R,P,O),eQ(z,P,O,"duplicatesServeAsOld"),qQ(z,P,O),this.scene.replaceAllElements(z),this.maybeCacheVisibleGaps(n,y,!0),this.maybeCacheReferenceSnapPoints(n,y,!0)}return}}if(this.state.selectionElement)t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeDragNewGenericElement(t,n);else{let y=this.state.newElement;if(!y)return;if(y.type==="freedraw"){let x=y.points,w=r.x-y.x,E=r.y-y.y,S=x.length>0&&x[x.length-1];if(!(S&&S[0]===w&&S[1]===E)){let A=y.simulatePressure?y.pressures:[...y.pressures,n.pressure];ye(y,{points:[...x,D(w,E)],pressures:A},!1),this.setState({newElement:y})}}else if(mt(y)){t.drag.hasOccurred=!0;let x=y.points,w=s-y.x,E=o-y.y;z5(n)&&x.length===2&&({width:w,height:E}=eA(y.x,y.y,r.x,r.y)),x.length===1?ye(y,{points:[...x,D(w,E)]},!1):(x.length===2||x.length>1&&Fe(y))&&ye(y,{points:[...x.slice(0,-1),D(w,E)]},!1,{isDragging:!0}),this.setState({newElement:y}),Yl(y,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(y,[r],this.state.startBoundElement)}else t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeDragNewGenericElement(t,n,!1)}if(this.state.activeTool.type==="selection"){t.boxSelection.hasOccurred=!0;let y=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)Be.handleBoxSelection(n,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let x=!0;!n.shiftKey&&Dr(y,this.state)&&(t.withCmdOrCtrl&&t.hit.element?this.setState(E=>rs({...E,selectedElementIds:{[t.hit.element.id]:!0}},this.scene.getNonDeletedElements(),E,this)):x=!1);let w=this.state.selectionElement?vI(y,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(E=>{let S={...x&&E.selectedElementIds,...w.reduce((A,M)=>(A[M.id]=!0,A),{})};return t.hit.element&&(w.length?delete S[t.hit.element.id]:S[t.hit.element.id]=!0),E=x?E:{...E,selectedGroupIds:{},editingGroupId:null},{...rs({editingGroupId:E.editingGroupId,selectedElementIds:S},this.scene.getNonDeletedElements(),E,this),selectedLinearElement:w.length===1&&mt(w[0])?new Be(w[0]):null,showHyperlinkPopup:w.length===1&&(w[0].link||Rs(w[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(t,n){if(n.scrollbars.isOverHorizontal){let r=t.clientX,i=r-n.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-i/this.state.zoom.value}),n.lastCoords.x=r,!0}if(n.scrollbars.isOverVertical){let r=t.clientY,i=r-n.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-i/this.state.zoom.value}),n.lastCoords.y=r,!0}return!1}onPointerUpFromPointerDownHandler(t){return qn(n=>{var U,y,x,w,E,S,A,M,C,T,R,P;this.removePointer(n),t.eventListeners.onMove&&t.eventListeners.onMove.flush();let{newElement:r,resizingElement:i,croppingElementId:s,multiElement:o,activeTool:a,isResizing:l,isRotating:f,isCropping:c}=this.state;this.setState(_=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:Bg(_.snapLines,[]),originSnapOffset:null})),this.lastPointerMoveCoords=null,Wc.setReferenceSnapPoints(null),Wc.setVisibleGaps(null),this.savePointer(n.clientX,n.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});let d=this.scene.getNonDeletedElementsMap();if(t.drag.hasOccurred&&((y=(U=t.hit)==null?void 0:U.element)!=null&&y.id)){let _=d.get(t.hit.element.id);il(_)&&((x=_.boundElements)==null||x.filter(O=>O.type==="arrow").map(O=>d.get(O.id)).filter(O=>Fe(O)).forEach(O=>{O&&ye(O,{},!0)}))}if(this.state.editingLinearElement)if(!t.boxSelection.hasOccurred&&((E=(w=t.hit)==null?void 0:w.element)==null?void 0:E.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Sa);else{let _=Be.handlePointerUp(n,this.state.editingLinearElement,this.state,this.scene);_!==this.state.editingLinearElement&&this.setState({editingLinearElement:_,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){let _=Be.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());_&&ye(_,{},!0)}if(((A=(S=t.hit)==null?void 0:S.element)==null?void 0:A.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{let _=Be.handlePointerUp(n,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:O,endBindingElement:F}=_,B=this.scene.getElement(_.elementId);Yl(B)&&z7(B,O,F,d,this.scene),_!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{..._,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener("pointermove",t.eventListeners.onMove),window.removeEventListener("pointerup",t.eventListeners.onUp),window.removeEventListener("keydown",t.eventListeners.onKeyDown),window.removeEventListener("keyup",t.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(C=(M=this.props)==null?void 0:M.onPointerUp)==null||C.call(M,a,t),this.onPointerUpEmitter.trigger(this.state.activeTool,t,n),(r==null?void 0:r.type)==="freedraw"){let _=yn(n,this.state),O=r.points,F=_.x-r.x,B=_.y-r.y;F===O[0][0]&&B===O[0][1]&&(B+=1e-4,F+=1e-4);let $=r.simulatePressure?[]:[...r.pressures,n.pressure];ye(r,{points:[...O,D(F,B)],pressures:$,lastCommittedPoint:D(F,B)}),this.actionManager.executeAction(Sa);return}if(Zt(r)){let _=r;try{this.initializeImageDimensions(_),this.setState({selectedElementIds:Yt({[_.id]:!0},this.state)},()=>{this.actionManager.executeAction(Sa)})}catch(O){console.error(O),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(F=>F.id!==_.id)),this.actionManager.executeAction(Sa)}return}if(mt(r)){r.points.length>1&&this.store.shouldCaptureIncrement();let _=yn(n,this.state);!t.drag.hasOccurred&&r&&!o?(ye(r,{points:[...r.points,D(_.x-r.x,_.y-r.y)]}),this.setState({multiElement:r,newElement:r})):t.drag.hasOccurred&&!o&&($u(this.state)&&Yl(r,!1)&&VC(r,this.state,_,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.setState({suggestedBindings:[],startBoundElement:null}),a.locked?this.setState(O=>({newElement:null})):(Aa(this.interactiveCanvas),this.setState(O=>({newElement:null,activeTool:yr(this.state,{type:"selection"}),selectedElementIds:Yt({...O.selectedElementIds,[r.id]:!0},O),selectedLinearElement:new Be(r)}))),this.scene.triggerUpdate());return}if(je(r)){let _=AT(cn({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<_&&ye(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(a.type!=="selection"&&r&&y6(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(_=>_.id!==r.id),appState:{newElement:null},captureUpdate:me.NEVER});return}if(at(r)){let _=jNe(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(W5(this.scene.getElementsMapIncludingDeleted(),_,r,this.state))}if(r&&(ye(r,sJ(r)),this.scene.triggerUpdate()),t.drag.hasOccurred){let _=yn(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){let O=this.scene.getElement(this.state.selectedLinearElement.elementId);if(O!=null&&O.frameId){let F=Hs(O,d);F&&O&&(I0(O,F,this.scene.getNonDeletedElementsMap())||(ye(O,{groupIds:[]}),Q7([O],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{let O=this.getTopLayerFrameAtSceneCoords(_),F=this.scene.getSelectedElements(this.state),B=this.scene.getElementsMapIncludingDeleted(),$=z=>{if(z.length>0){for(let H of z){let G=H.groupIds.indexOf(this.state.editingGroupId);ye(H,{groupIds:H.groupIds.slice(0,G)},!1)}B.forEach(H=>{H.groupIds.length&&Cn(B,H.groupIds[H.groupIds.length-1]).length<2&&ye(H,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(O&&!this.state.selectedElementIds[O.id]){let z=F.filter(H=>H.frameId!==O.id&&d9(H,B,this.state));this.state.editingGroupId&&$(z),B=W5(B,z,O,this.state)}else if(!O&&this.state.editingGroupId){let z=F.filter(H=>H.frameId&&!d9(H,B,this.state));$(z)}B=U6(B,this.state,this),this.scene.replaceAllElements(B)}}if(i&&this.store.shouldCaptureIncrement(),i&&y6(i)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(_=>_.id!==i.id),captureUpdate:me.NEVER}),t.resize.isResizing){let _=U6(this.scene.getElementsIncludingDeleted(),this.state,this),O=this.scene.getSelectedElements(this.state).filter(F=>at(F));for(let F of O)_=eJ(_,a3(this.scene.getElementsIncludingDeleted(),F,this.state,d),F,this);this.scene.replaceAllElements(_)}let u=t.hit.element;((T=this.state.selectedLinearElement)==null?void 0:T.elementId)!==(u==null?void 0:u.id)&&mt(u)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new Be(u)}),(!s||s&&(!u&&!c||u&&u.id!==s))&&this.finishImageCropping();let h=this.lastPointerDownEvent,g=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Rl(this.state)&&h&&g){if(this.eraserTrail.endPath(),qt(D(h.clientX,h.clientY),D(g.clientX,g.clientY))===0){let _=yn({clientX:g.clientX,clientY:g.clientY},this.state);this.getElementsAtPosition(_.x,_.y).forEach(O=>this.elementsPendingErasure.add(O.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(u&&!t.drag.hasOccurred&&!t.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!t.boxSelection.hasOccurred)&&(n.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[u.id]?sQ(this.state,u)?this.setState(_=>{let O={..._.selectedElementIds};for(let F of u.groupIds.flatMap(B=>Cn(this.scene.getNonDeletedElements(),B)))delete O[F.id];return{selectedGroupIds:{..._.selectedElementIds,...u.groupIds.map(F=>({[F]:!1})).reduce((F,B)=>({...F,...B}),{})},selectedElementIds:Yt(O,_)}}):(R=this.state.selectedLinearElement)!=null&&R.isDragging||this.setState(_=>{let O={..._.selectedElementIds};delete O[u.id];let F=wt(this.scene.getNonDeletedElements(),{selectedElementIds:O});return{...rs({editingGroupId:_.editingGroupId,selectedElementIds:O},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:F.length===1&&mt(F[0])?new Be(F[0]):_.selectedLinearElement}}):u.frameId&&this.state.selectedElementIds[u.frameId]?this.setState(_=>{var F;let O={..._.selectedElementIds,[u.id]:!0};return delete O[u.frameId],(((F=this.scene.getElement(u.frameId))==null?void 0:F.groupIds)??[]).flatMap(B=>Cn(this.scene.getNonDeletedElements(),B)).forEach(B=>{delete O[B.id]}),{...rs({editingGroupId:_.editingGroupId,selectedElementIds:O},this.scene.getNonDeletedElements(),_,this),showHyperlinkPopup:u.link||Rs(u)?"info":!1}}):this.setState(_=>({selectedElementIds:Yt({..._.selectedElementIds,[u.id]:!0},_)})):this.setState(_=>{var O;return{...rs({editingGroupId:_.editingGroupId,selectedElementIds:{[u.id]:!0}},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:mt(u)&&((O=_.selectedLinearElement)==null?void 0:O.elementId)!==u.id?new Be(u):_.selectedLinearElement}})),!(u&&Fe(u))&&!t.drag.hasOccurred&&!this.state.isResizing&&(u&&CMe({x:t.origin.x,y:t.origin.y,element:u,shape:Zc(u,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:at(u)?this.frameNameBoundsCache.get(u):null},d)||!u&&t.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:Yt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),an(this.interactiveCanvas,rn.AUTO);return}if(!a.locked&&a.type!=="freedraw"&&r&&this.setState(_=>({selectedElementIds:Yt({..._.selectedElementIds,[r.id]:!0},_),showHyperlinkPopup:Rs(r)&&!r.link?"editor":_.showHyperlinkPopup})),(a.type!=="selection"||Dr(this.scene.getNonDeletedElements(),this.state)||!Si(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),t.drag.hasOccurred||l||f||c){let _=this.scene.getSelectedElements(this.state).filter(mt);n9(_,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,$u(this.state),((P=this.state.selectedLinearElement)==null?void 0:P.selectedPointsIndices)??[],this.state.zoom)}if(a.type==="laser"){this.laserTrails.endPath();return}!a.locked&&a.type!=="freedraw"?(Aa(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:yr(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),u&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&Kt.pointers.size<=1&&Ko(u)&&this.isIframeLikeElementCenter(u,this.lastPointerUpEvent,t.origin.x,t.origin.y)&&this.handleEmbeddableCenterClick(u)})}clearSelection(t){this.setState(n=>({selectedElementIds:Yt({},n),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:n.editingGroupId&&t!=null&&K2(t,n.editingGroupId)?n.editingGroupId:null})),this.setState({selectedElementIds:Yt({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(t,n,r,i){if(i){let s=i.x+i.width/2,o=i.y+i.height/2,a=eS(i,r,this.scene.getNonDeletedElementsMap());if(a&&(s=a.x,o=a.y),Math.hypot(t-s,n-o)<Sxe){let{x:l,y:f}=Wa({sceneX:s,sceneY:o},r);return{viewportX:l,viewportY:f,elementCenterX:s,elementCenterY:o}}}}getCanvasOffsets(){var t;if((t=this.excalidrawContainerRef)!=null&&t.current){let n=this.excalidrawContainerRef.current,{left:r,top:i}=n.getBoundingClientRect();return{offsetLeft:r,offsetTop:i}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){let t=XI.find(n=>n.code===this.props.langCode)||D6;await Dte(t),this.setAppState({})}},rHe=()=>{(vt.MODE===Fs.TEST||vt.DEV)&&(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene.getElementsIncludingDeleted()},set(e){var t;return(t=this.app)==null?void 0:t.scene.replaceAllElements(Rf(e))}},scene:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene}}}))};rHe();var iHe=nHe,sHe=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},oHe=sHe,aHe=()=>m.jsx("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:m.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),lHe=()=>m.jsxs("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[m.jsx("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),cHe=({style:e,size:t="small",withText:n})=>m.jsxs("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[m.jsx(aHe,{}),n&&m.jsx(lHe,{})]}),bN=({icon:e,shortcut:t,children:n})=>{let r=Gr();return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"welcome-screen-menu-item__icon",children:e}),m.jsx("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!r.editor.isMobile&&m.jsx("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};bN.displayName="WelcomeScreenMenuItemContent";var n8=({onSelect:e,children:t,icon:n,shortcut:r,className:i="",...s})=>m.jsx("button",{...s,type:"button",className:`welcome-screen-menu-item ${i}`,onClick:e,children:m.jsx(bN,{icon:n,shortcut:r,children:t})});n8.displayName="WelcomeScreenMenuItem";var Ore=({children:e,href:t,icon:n,shortcut:r,className:i="",...s})=>m.jsx("a",{...s,className:`welcome-screen-menu-item ${i}`,href:t,target:"_blank",rel:"noreferrer",children:m.jsx(bN,{icon:n,shortcut:r,children:e})});Ore.displayName="WelcomeScreenMenuItemLink";var Wf=({children:e})=>{let{WelcomeScreenCenterTunnel:t}=yo();return m.jsx(t.In,{children:m.jsx("div",{className:"welcome-screen-center",children:e||m.jsxs(m.Fragment,{children:[m.jsx(UN,{}),m.jsx(yN,{children:j("welcomeScreen.defaults.center_heading")}),m.jsxs(xN,{children:[m.jsx(wN,{}),m.jsx(vN,{})]})]})})})};Wf.displayName="Center";var UN=({children:e})=>m.jsx("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||m.jsx(cHe,{withText:!0})});UN.displayName="Logo";var yN=({children:e})=>m.jsx("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});yN.displayName="Heading";var xN=({children:e})=>m.jsx("div",{className:"welcome-screen-menu",children:e});xN.displayName="Menu";var vN=()=>{let e=Gs();return m.jsx(n8,{onSelect:()=>e.executeAction(tN),shortcut:"?",icon:_T,children:j("helpDialog.title")})};vN.displayName="MenuItemHelp";var wN=()=>{let e=bs(),t=Gs();return e.viewModeEnabled?null:m.jsx(n8,{onSelect:()=>t.executeAction(EA),shortcut:Vi("loadScene"),icon:PT,children:j("buttons.load")})};wN.displayName="MenuItemLoadScene";var jre=({onSelect:e})=>{let{t}=Zi();return m.jsx(n8,{shortcut:null,onSelect:e,icon:oq,children:t("labels.liveCollaboration")})};jre.displayName="MenuItemLiveCollaborationTrigger";Wf.Logo=UN;Wf.Heading=yN;Wf.Menu=xN;Wf.MenuItem=n8;Wf.MenuItemLink=Ore;Wf.MenuItemHelp=vN;Wf.MenuItemLoadScene=wN;Wf.MenuItemLiveCollaborationTrigger=jre;var fHe=({children:e})=>{let{WelcomeScreenMenuHintTunnel:t}=yo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[Yve,m.jsx("div",{className:"welcome-screen-decor-hint__label",children:e||j("welcomeScreen.defaults.menuHint")})]})})};fHe.displayName="MenuHint";var dHe=({children:e})=>{let{WelcomeScreenToolbarHintTunnel:t}=yo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[m.jsx("div",{className:"welcome-screen-decor-hint__label",children:e||j("welcomeScreen.defaults.toolbarHint")}),qve]})})};dHe.displayName="ToolbarHint";var uHe=({children:e})=>{let{WelcomeScreenHelpHintTunnel:t}=yo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[m.jsx("div",{children:e||j("welcomeScreen.defaults.helpHint")}),Zve]})})};uHe.displayName="HelpHint";jb((e,t,n)=>{if(vt.DEV||vt.MODE===Fs.TEST||window!=null&&window.DEBUG_FRACTIONAL_INDICES){let r=Rf(e.map(i=>({...i})));YT(r,{shouldThrow:vt.DEV||vt.MODE===Fs.TEST,includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1});oHe();var hHe=e=>{var G,V,Y,K;let{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i=!1,onPointerUpdate:s,renderTopRightUI:o,langCode:a=D6.code,viewModeEnabled:l,zenModeEnabled:f,gridModeEnabled:c,libraryReturnUrl:d,theme:u,name:h,renderCustomStats:g,onPaste:U,detectScroll:y=!0,handleKeyboardGlobally:x=!1,onLibraryChange:w,autoFocus:E=!1,generateIdForFile:S,onLinkOpen:A,generateLinkForSelection:M,onPointerDown:C,onPointerUp:T,onScrollChange:R,onDuplicate:P,children:_,validateEmbeddable:O,renderEmbeddable:F,aiEnabled:B,showDeprecatedFonts:$}=e,z=(G=e.UIOptions)==null?void 0:G.canvasActions,H={...e.UIOptions,canvasActions:{...uB.canvasActions,...z},tools:{image:((Y=(V=e.UIOptions)==null?void 0:V.tools)==null?void 0:Y.image)??!0}};return z!=null&&z.export&&(H.canvasActions.export.saveFileToDisk=((K=z.export)==null?void 0:K.saveFileToDisk)??uB.canvasActions.export.saveFileToDisk),H.canvasActions.toggleTheme===null&&typeof u>"u"&&(H.canvasActions.toggleTheme=!0),I.useEffect(()=>{(async()=>await Ve(()=>import("./roundRect-0PYZxl1G.js"),[]))();let q=se=>{typeof se.scale=="number"&&se.scale!==1&&se.preventDefault()};return document.addEventListener("touchmove",q,{passive:!1}),()=>{document.removeEventListener("touchmove",q)}},[]),m.jsx(tOe,{store:Ya,children:m.jsx(sOe,{langCode:a,theme:u,children:m.jsx(iHe,{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i,onPointerUpdate:s,renderTopRightUI:o,langCode:a,viewModeEnabled:l,zenModeEnabled:f,gridModeEnabled:c,libraryReturnUrl:d,theme:u,name:h,renderCustomStats:g,UIOptions:H,onPaste:U,detectScroll:y,handleKeyboardGlobally:x,onLibraryChange:w,autoFocus:E,generateIdForFile:S,onLinkOpen:A,generateLinkForSelection:M,onPointerDown:C,onPointerUp:T,onScrollChange:R,onDuplicate:P,validateEmbeddable:O,renderEmbeddable:F,aiEnabled:B!==!1,showDeprecatedFonts:$,children:_})})})},pHe=(e,t)=>{if(e.children!==t.children)return!1;let{initialData:n,UIOptions:r={},...i}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(r),f=Object.keys(o);return l.length!==f.length?!1:l.every(c=>c==="canvasActions"?Object.keys(r.canvasActions).every(d=>{var u,h,g,U;return d==="export"&&((u=r==null?void 0:r.canvasActions)!=null&&u.export)&&((h=o==null?void 0:o.canvasActions)!=null&&h.export)?r.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((g=r==null?void 0:r.canvasActions)==null?void 0:g[d])===((U=o==null?void 0:o.canvasActions)==null?void 0:U[d])}):r[c]===o[c])&&Si(i,a)},Bre=Te.memo(hHe,pHe);Bre.displayName="Excalidraw";const mHe=({thread:e})=>{const[t,n]=I.useState(null),[r,i]=I.useState(!0),s=I.useRef(null);I.useRef(null),I.useEffect(()=>{let a=!1;return(async()=>{try{const l=await ti.loadThreadCanvas(e.id);a||n(l)}catch(l){console.error("Failed to load canvas:",l)}finally{a||i(!1)}})(),()=>{a=!0}},[e.id]);const o=I.useCallback((a,l)=>{r||(s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{const f={elements:a,appState:{viewBackgroundColor:l.viewBackgroundColor,zoom:l.zoom,scrollX:l.scrollX,scrollY:l.scrollY}};ti.saveThreadCanvas(e.id,f).catch(c=>console.error("Failed to save canvas:",c))},2e3))},[e.id,r]);return I.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),r?m.jsx("div",{className:"thread-canvas-loading",children:m.jsx("div",{className:"loading-spinner"})}):m.jsx("div",{className:"thread-canvas",children:m.jsx(Bre,{initialData:t||void 0,theme:"dark",onChange:o,UIOptions:{canvasActions:{loadScene:!1}}})})},gHe={ROOT:"#888",EVIDENCE:"#4fc3f7",REFERENCE:"#ab47bc",CONTEXT:"#ff8a65",EXAMPLE:"#66bb6a",COUNTERPOINT:"#ef5350",SYNTHESIS:"#fdd835"},bHe=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],UHe=({thread:e,onDone:t})=>{const[n,r]=I.useState([]),[i,s]=I.useState(!0),o=I.useRef(null),a=I.useRef(null),l=I.useRef(null);I.useEffect(()=>{e!=null&&e.id&&f()},[e==null?void 0:e.id]);const f=async()=>{s(!0);try{const U=e.nodes||[],y=await ti.loadArticleSequence(e.id);if(y&&Array.isArray(y)){const x=new Set(y),w=y.map(S=>U.find(A=>A.id===S)).filter(Boolean),E=U.filter(S=>!x.has(S.id));r([...w,...E])}else r([...U])}catch(U){console.error("Failed to load sequence:",U),r([...e.nodes||[]])}finally{s(!1)}},c=I.useCallback(U=>{l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{try{const y=U.map(x=>x.id);await ti.saveArticleSequence(e.id,y)}catch(y){console.error("Failed to save sequence:",y)}},400)},[e==null?void 0:e.id]),d=U=>{o.current=U},u=U=>{a.current=U},h=()=>{if(o.current===null||a.current===null)return;if(o.current===a.current){o.current=null,a.current=null;return}const U=[...n],[y]=U.splice(o.current,1);U.splice(a.current,0,y),r(U),c(U),o.current=null,a.current=null},g=U=>U.node_type?U.node_type:typeof U.type=="number"?bHe[U.type]||"ROOT":U.type||"ROOT";return i?m.jsx("div",{className:"se-page",children:m.jsx("div",{className:"se-loading",children:"Loading sequence..."})}):m.jsx("div",{className:"se-page",children:m.jsxs("div",{className:"se-container",children:[m.jsxs("div",{className:"se-header",children:[m.jsx("h2",{className:"se-title",children:"Reading Order"}),m.jsx("button",{className:"se-done-btn",onClick:t,children:"Done"})]}),m.jsx("p",{className:"se-hint",children:"Drag items to reorder. The article reader will follow this sequence."}),n.length===0?m.jsx("div",{className:"se-empty",children:"No nodes in this thread yet."}):m.jsx("ul",{className:"se-list",children:n.map((U,y)=>{const x=g(U),w=gHe[x]||"#888";return m.jsxs("li",{className:"se-item",draggable:!0,onDragStart:()=>d(y),onDragEnter:()=>u(y),onDragEnd:h,onDragOver:E=>E.preventDefault(),children:[m.jsx("span",{className:"se-handle",children:""}),m.jsx("span",{className:"se-index",children:y+1}),m.jsx("span",{className:"se-badge",style:{background:w},children:x}),m.jsx("span",{className:"se-node-title",children:U.title||`Node ${U.id}`})]},U.id)})})]})})},yHe=[{key:"graph",label:"Graph"},{key:"article",label:"Article"},{key:"sequence",label:"Sequence"},{key:"canvas",label:"Canvas"},{key:"chat",label:"Chat"}],xHe=({view:e,onChangeView:t,threadTitle:n,onPrevThread:r,onNextThread:i,hasPrev:s,hasNext:o})=>m.jsxs("div",{className:"view-tab-bar",children:[m.jsxs("div",{className:"vtb-thread-nav",children:[m.jsx("button",{className:"vtb-arrow",disabled:!s,onClick:r,"aria-label":"Previous thread",children:""}),m.jsx("span",{className:"vtb-thread-title",title:n,children:n}),m.jsx("button",{className:"vtb-arrow",disabled:!o,onClick:i,"aria-label":"Next thread",children:""})]}),m.jsx("div",{className:"vtb-tabs",children:yHe.map(({key:a,label:l})=>m.jsx("button",{className:`vtb-tab ${e===a?"vtb-tab--active":""}`,onClick:()=>t(a),children:l},a))})]}),Jz=[{value:0,label:"ROOT"},{value:1,label:"EVIDENCE"},{value:2,label:"REFERENCE"},{value:3,label:"CONTEXT"},{value:4,label:"EXAMPLE"},{value:5,label:"COUNTERPOINT"},{value:6,label:"SYNTHESIS"}],vHe={ROOT:"Root Title",EVIDENCE:"Source",EXAMPLE:"Example Title",COUNTERPOINT:"Argument",REFERENCE:"Title",CONTEXT:"Title",SYNTHESIS:"Title"},wHe={ROOT:"Describe this root node...",EVIDENCE:"Present your evidence...",EXAMPLE:"Describe this example...",COUNTERPOINT:"Explain the counterpoint...",REFERENCE:"Write reference content...",CONTEXT:"Provide context...",SYNTHESIS:"Write your synthesis..."},EHe=({editor:e})=>{const[t,n]=I.useState(null);if(!e)return null;const r=({onClick:s,active:o,children:a})=>m.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:a}),i=()=>m.jsx("span",{className:"ne-toolbar-divider"});return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"ne-toolbar",children:[m.jsx(r,{onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold"),children:"B"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic"),children:"I"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike"),children:"S"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),active:e.isActive("heading",{level:1}),children:"H1"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2}),children:"H2"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3}),children:"H3"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList"),children:"Bullet"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList"),children:"Ordered"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote"),children:"Quote"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock"),children:"Code"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>n("link"),active:e.isActive("link"),children:"Link"}),m.jsx(r,{onClick:()=>n("youtube"),children:"YouTube"})]}),t==="link"&&m.jsx(R4,{label:"Enter URL",placeholder:"https://example.com",onSubmit:s=>{e.chain().focus().extendMarkRange("link").setLink({href:s}).run(),n(null)},onCancel:()=>n(null)}),t==="youtube"&&m.jsx(R4,{label:"Enter YouTube URL",placeholder:"https://youtube.com/watch?v=...",onSubmit:s=>{e.commands.setYoutubeVideo({src:s}),n(null)},onCancel:()=>n(null)})]})},SHe=({thread:e,selectedNode:t,onSubmit:n,onCancel:r})=>{var x;const i=(t==null?void 0:t.type)==="thread",[s,o]=I.useState(()=>i?"0":"1"),[a,l]=I.useState(""),[f,c]=I.useState(""),[d,u]=I.useState(!1),h=((x=Jz[Number(s)])==null?void 0:x.label)||"EVIDENCE",g=GM({extensions:[oT,rT.configure({openOnClick:!1}),aT.configure({width:640,height:360}),lT.configure({placeholder:wHe[h]||"Write your content..."})],content:"",onUpdate:({editor:w})=>{u(!w.isEmpty)}}),U=()=>{if(!g||!a.trim())return;const w=g.getHTML();let E,S;switch(h){case"ROOT":E=JSON.stringify({title:a,description:w,keywords:f.split(",").map(M=>M.trim()).filter(Boolean)}),S=a;break;case"EVIDENCE":E=JSON.stringify({point:w,source:a}),S=g.getText().substring(0,100);break;case"EXAMPLE":E=JSON.stringify({title:a,description:w}),S=g.getText().substring(0,100);break;case"COUNTERPOINT":E=JSON.stringify({argument:a,explanation:w}),S=a;break;default:E=w,S=g.getText().substring(0,100)}S.length===100&&(S+="...");const A=i?null:parseInt(String(t.id).replace("node-",""),10);n({id:t.id,type:t.type,newNode:{title:a,content:E,description:S,type:Number(s),parentId:A,threadId:e.id,metadata:{title:a||"New Node",description:S,content:E,type:h}}})},y=a.trim()&&g&&d;return m.jsxs("div",{className:"ne-page",children:[m.jsxs("header",{className:"ne-header",children:[m.jsx("button",{className:"ne-back",onClick:r,children:" Back to graph"}),m.jsx("button",{className:"ne-submit",disabled:!y,onClick:U,children:"Add Node"})]}),m.jsx("div",{className:"ne-body",children:m.jsxs("div",{className:"ne-column",children:[m.jsx("select",{className:"ne-select",value:s,onChange:w=>o(w.target.value),children:Jz.filter(w=>i||w.label!=="ROOT").map(w=>m.jsx("option",{value:w.value,children:w.label},w.value))}),m.jsx("input",{className:"ne-title-input",type:"text",placeholder:vHe[h]||"Title",value:a,onChange:w=>l(w.target.value)}),h==="ROOT"&&m.jsx("input",{className:"ne-keywords-input",type:"text",placeholder:"Keywords (comma-separated)",value:f,onChange:w=>c(w.target.value)}),m.jsxs("div",{children:[m.jsx(EHe,{editor:g}),m.jsx("div",{className:"ne-editor-wrapper",children:m.jsx(S7,{editor:g})})]})]})})]})},eH={EVIDENCE:"#4ade80",EXAMPLE:"#60a5fa",CONTEXT:"#fbbf24",COUNTERPOINT:"#f87171",SYNTHESIS:"#a78bfa",REFERENCE:"#34d399"};function kHe({selectedThreadId:e,onNodesCreated:t,onThreadCreated:n}){const[r,i]=I.useState(()=>localStorage.getItem("openai_api_key")||""),[s,o]=I.useState(""),[a,l]=I.useState(()=>!localStorage.getItem("openai_api_key")),[f,c]=I.useState([]),[d,u]=I.useState(""),[h,g]=I.useState(!1),[U,y]=I.useState(e),x=I.useRef(null),w=I.useRef(null),E=I.useRef(null);I.useEffect(()=>{y(e)},[e]),I.useEffect(()=>{var T;(T=x.current)==null||T.scrollIntoView({behavior:"smooth"})},[f,h]);const S=()=>{const T=s.trim();T&&(localStorage.setItem("openai_api_key",T),i(T),l(!1),setTimeout(()=>{var R;return(R=w.current)==null?void 0:R.focus()},50))},A=async()=>{var R;if(!d.trim()||h||!r)return;const T=d.trim();u(""),E.current&&(E.current.style.height="auto"),c(P=>[...P,{role:"user",content:T}]),g(!0);try{const P=f.filter(O=>O.role==="user"||O.role==="assistant").map(O=>({role:O.role,content:O.content})),_=await ti.chat({message:T,history:P,threadId:U,apiKey:r});c(O=>[...O,{role:"assistant",content:_.reply,citations:_.citations||[],createdNodes:_.createdNodes||[],newThread:_.newThread||null}]),_.newThread?(y(_.threadId),n==null||n(_.threadId)):((R=_.createdNodes)==null?void 0:R.length)>0&&(y(_.threadId),t==null||t(_.threadId))}catch(P){c(_=>[..._,{role:"error",content:`Error: ${P.message}`}])}finally{g(!1)}},M=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),A())},C=T=>{u(T.target.value),T.target.style.height="auto",T.target.style.height=Math.min(T.target.scrollHeight,160)+"px"};return m.jsxs("div",{className:"cp-panel",children:[m.jsxs("div",{className:"cp-header",children:[m.jsx("span",{className:"cp-title",children:"Research Chat"}),m.jsx("div",{className:"cp-key-area",children:a?m.jsxs("div",{className:"cp-key-form",children:[m.jsx("input",{className:"cp-key-input",type:"password",placeholder:"sk-...",value:s,onChange:T=>o(T.target.value),onKeyDown:T=>T.key==="Enter"&&S(),autoFocus:!0}),m.jsx("button",{className:"cp-key-save",onClick:S,children:"Save"}),r&&m.jsx("button",{className:"cp-key-cancel",onClick:()=>l(!1),children:"Cancel"})]}):m.jsx("button",{className:"cp-key-btn",onClick:()=>{o(r),l(!0)},title:"Change OpenAI API key",children:"API Key "})})]}),m.jsxs("div",{className:"cp-messages",children:[f.length===0&&m.jsx("div",{className:"cp-empty",children:r?m.jsxs("p",{children:["Ask anything  relevant nodes will be created in your knowledge graph as you research.",m.jsx("br",{}),"Topic shifts automatically create new threads."]}):m.jsxs("p",{children:["Add your OpenAI API key above to start chatting.",m.jsx("br",{}),"Nodes will be auto-created in your knowledge graph as you research."]})}),f.map((T,R)=>{var P,_,O;return m.jsxs("div",{className:`cp-msg cp-msg--${T.role}`,children:[T.role==="user"&&m.jsx("div",{className:"cp-bubble cp-bubble--user",children:T.content}),T.role==="assistant"&&m.jsxs("div",{className:"cp-bubble cp-bubble--assistant",children:[m.jsx("div",{className:"cp-text",children:T.content}),((P=T.citations)==null?void 0:P.length)>0&&m.jsxs("div",{className:"cp-citations",children:[m.jsx("span",{className:"cp-citations-label",children:"Sources"}),T.citations.map((F,B)=>m.jsxs("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",className:"cp-citation",title:F.url,children:["[",B+1,"] ",(F.title||F.url).substring(0,60)]},B))]}),(((_=T.createdNodes)==null?void 0:_.length)>0||T.newThread)&&m.jsxs("div",{className:"cp-nodes-created",children:[T.newThread&&m.jsxs("span",{className:"cp-new-thread",children:[" New thread: ",T.newThread.title]}),(O=T.createdNodes)==null?void 0:O.map((F,B)=>m.jsx("span",{className:"cp-node-chip",style:{borderColor:eH[F.type]||"#555",color:eH[F.type]||"#aaa"},title:F.title,children:F.type},B))]})]}),T.role==="error"&&m.jsx("div",{className:"cp-bubble cp-bubble--error",children:T.content})]},R)}),h&&m.jsx("div",{className:"cp-msg cp-msg--assistant",children:m.jsxs("div",{className:"cp-bubble cp-bubble--assistant cp-bubble--loading",children:[m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"})]})}),m.jsx("div",{ref:x})]}),m.jsxs("div",{className:"cp-input-area",children:[m.jsx("textarea",{ref:T=>{E.current=T,w.current=T},className:"cp-input",placeholder:r?"Ask anything (Shift+Enter for new line)":"Set your OpenAI API key first",value:d,onChange:C,onKeyDown:M,disabled:!r||h,rows:1}),m.jsx("button",{className:"cp-send",onClick:A,disabled:!r||!d.trim()||h,"aria-label":"Send",children:""})]})]})}function CHe(){var da,ua,ha;const[e,t]=I.useState(null),[n,r]=I.useState(null),[i,s]=I.useState([]),[o,a]=I.useState(""),[l,f]=I.useState(""),[c,d]=I.useState(""),[u,h]=I.useState(!1),[g,U]=I.useState(null),[y,x]=I.useState(null);I.useState(""),I.useState(0);const[w,E]=I.useState(null),[S,A]=I.useState("");I.useState({});const[M,C]=I.useState(null),[T,R]=I.useState(!1),[P,_]=I.useState(""),[O,F]=I.useState(!1),[B,$]=I.useState(!1),[z,H]=I.useState(!1),[G,V]=I.useState(!1),[Y,K]=I.useState([]),[q,se]=I.useState(!1),de=I.useRef(null),[xe,ve]=I.useState(!1),[ue,te]=I.useState("graph"),[le,he]=I.useState(null),[we,Se]=I.useState(null),De=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"];I.useEffect(()=>{G&&ht()},[]);async function Ge(){try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7A69",chainName:"Hardhat Local",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["http://127.0.0.1:8545"]}]}),!0}catch(ke){return console.error("Error setting up network:",ke),!1}}async function ht(){if(typeof window.ethereum<"u")try{console.log("Connecting to wallet and setting up contract...");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7A69"}]})}catch(St){if(St.code===4902){if(!await Ge())return}else{console.error("Failed to switch network:",St);return}}const ke=await window.ethereum.request({method:"eth_requestAccounts"});t(ke[0]);const nt=new afe("http://127.0.0.1:8545"),Oe=await nt.getSigner(ke[0]);console.log("Setting up contract with address:",wU.canonThread);const Ft=new uh(wU.canonThread,bfe.abi,Oe);try{if(await nt.getCode(wU.canonThread)==="0x"){console.error("No contract deployed at the specified address");return}}catch(St){console.error("Error verifying contract deployment:",St);return}r(Ft),console.log("Contract setup complete");const Tn=new uh(wU.canonToken,Cfe.abi,Oe);E(Tn),U(null),await fn(),window.ethereum.on("accountsChanged",St=>{St.length===0?(t(null),r(null)):(t(St[0]),ht())}),window.ethereum.on("chainChanged",()=>{window.location.reload()})}catch(ke){console.error("Error connecting to wallet:",ke)}}async function ot(ke){try{const nt=new FormData,Oe=new Blob([JSON.stringify(ke)],{type:"application/json"});nt.append("path",Oe);const St=(await(await fetch("http://localhost:5001/api/v0/add",{method:"POST",body:nt})).json()).Hash;if(!St||St.length!==46||!St.startsWith("Qm"))throw new Error("Invalid IPFS hash format. Must start with Qm and be 46 characters long.");return St}catch(nt){throw console.error("Error uploading to IPFS:",nt),nt}}async function Bt(){try{if(h(!0),U(null),!o.trim()){U("Title is required"),h(!1);return}if(console.log("Creating thread with content:",{title:o,description:l,content:c}),G&&n){const ke={title:o,description:l,createdAt:new Date().toISOString(),version:1},nt={title:o,content:c,lastUpdated:new Date().toISOString()},Oe=await ot(ke),Ft=await ot(nt);await(await n.createThread(Oe,Ft)).wait();const St=await n.threadCounter();a(""),f(""),d(""),R(!1),await fn(),C(Number(St))}else{const ke=await ti.createThread({title:o,description:l,content:"",metadata:{createdAt:new Date().toISOString(),version:1,title:o,description:l}});console.log("Created thread:",ke),a(""),f(""),d(""),R(!1),await Cr(),C(ke.id),te("article")}}catch(ke){console.error("Error creating thread:",ke),U("Failed to create thread: "+ke.message)}finally{h(!1)}}async function wn(ke){try{const nt=await fetch(`http://localhost:8080/ipfs/${ke}`);if(!nt.ok)throw new Error(`IPFS request failed with status ${nt.status}`);return await nt.json()}catch(nt){console.error("Error fetching from IPFS:",nt);try{const Oe=await fetch(`http://localhost:5001/api/v0/cat?arg=${ke}`);if(!Oe.ok)throw new Error(`IPFS API request failed with status ${Oe.status}`);return await Oe.json()}catch(Oe){return console.error("Error fetching from IPFS API:",Oe),null}}}async function fn(){if(!n||!e){console.log("Contract or account not initialized:",{contract:!!n,account:!!e});return}try{console.log("Loading on-chain threads...");const ke=await n.threadCounter();if(console.log("Thread count:",ke),ke>0){const Oe=Number(ke),Ft=await n.threads(Oe);if(Ft&&Ft.creator!=="0x0000000000000000000000000000000000000000"){const Tn=await wn(Ft.metadataHash),St=await wn(Ft.contentHash),Dn={...Ft,metadata:Tn,content:St,nodes:[],id:Oe,hasVoted:!1,votesFor:Nc("0"),votesAgainst:Nc("0"),proposalDeadline:0,hasActiveProposal:!1};s([Dn]),C(Oe),(async()=>{const Ti=await n.nodeCounter(),pa=await n.proposalCounter(),Gf=Math.floor(Date.now()/1e3),xo=await n.hasVoted(Oe,e),vo=[];for(let hi=1;hi<=Ti;hi++){const En=await n.nodes(hi);if(En&&En.threadId.toString()===Oe.toString()&&En.contentHash!==""){const wc=await wn(En.metadataHash),V0=await wn(En.contentHash),j6=await n.hasVoted(hi,e);vo.push({...En,metadata:wc,content:V0,id:hi,type:Number(En.nodeType),hasVoted:j6})}}let Ys=Nc("0"),ma=Nc("0"),gr=0,Ln=!1;for(let hi=1;hi<=pa;hi++){const En=await n.proposals(hi);if(En.threadId.toString()===Oe.toString()&&!En.executed){Ys=En.votesFor,ma=En.votesAgainst,gr=Number(En.deadline),Ln=Gf<gr+60;break}}s(hi=>[{...hi[0],nodes:vo,hasVoted:xo,votesFor:Ys,votesAgainst:ma,proposalDeadline:gr,hasActiveProposal:Ln}])})()}}(async()=>{const Oe=await n.nodeCounter(),Ft=await n.proposalCounter(),Tn=Math.floor(Date.now()/1e3);for(let St=ke-1;St>=1;St--){const Dn=await n.threads(St);if(Dn&&Dn.creator!=="0x0000000000000000000000000000000000000000"){const Mi=await wn(Dn.metadataHash),Ti=await wn(Dn.contentHash);s(gr=>[...gr,{...Dn,metadata:Mi,content:Ti,nodes:[],id:St,hasVoted:!1,votesFor:Nc("0"),votesAgainst:Nc("0"),proposalDeadline:0,hasActiveProposal:!1}]);const pa=await n.hasVoted(St,e),Gf=[];for(let gr=1;gr<=Oe;gr++){const Ln=await n.nodes(gr);if(Ln&&Ln.threadId.toString()===St.toString()&&Ln.contentHash!==""){const hi=await wn(Ln.metadataHash),En=await wn(Ln.contentHash),wc=await n.hasVoted(gr,e);Gf.push({...Ln,metadata:hi,content:En,id:gr,type:Number(Ln.nodeType),hasVoted:wc})}}let xo=Nc("0"),vo=Nc("0"),Ys=0,ma=!1;for(let gr=1;gr<=Ft;gr++){const Ln=await n.proposals(gr);if(Ln.threadId.toString()===St.toString()&&!Ln.executed){xo=Ln.votesFor,vo=Ln.votesAgainst,Ys=Number(Ln.deadline),ma=Tn<Ys+60;break}}s(gr=>gr.map(Ln=>Ln.id===St?{...Ln,nodes:Gf,hasVoted:pa,votesFor:xo,votesAgainst:vo,proposalDeadline:Ys,hasActiveProposal:ma}:Ln))}}})()}catch(ke){console.error("Error loading threads:",ke),U("Failed to load on-chain threads: "+ke.message)}}const ui=ke=>{x(ke)},Ci=()=>{x(null)},qi=async(ke,nt)=>{if(!(!n||!w||!e))try{h(!0),U(null);const Oe=Nc(S);await(await w.approve(n.target,Oe)).wait(),await(await n.vote(ke,nt,Oe)).wait(),A(""),x(null),fn()}catch(Oe){console.error("Error voting:",Oe),U("Error voting: "+(Oe.message||"Unknown error occurred"))}finally{h(!1)}},Xs=async ke=>{var nt;if(!(!n||!w||!e))try{h(!0),U(null);const Oe=await n.MINIMUM_STAKE();console.log("Minimum stake required:",eoe(Oe),"CANON");const Ft={title:`Update Proposal for ${ke.type==="thread"?"Thread":"Node"} ${ke.id}`,description:"Proposal to update content",createdAt:new Date().toISOString()},Tn={content:((nt=ke.content)==null?void 0:nt.content)||"",lastUpdated:new Date().toISOString()},St=await ot(Ft),Dn=await ot(Tn);console.log("Approving tokens..."),await(await w.approve(n.target,Oe)).wait(),console.log("Creating proposal..."),await(await n.proposeUpdate(ke.id,St,Dn,Oe)).wait(),console.log("Proposal created"),await fn(),x(null)}catch(Oe){console.error("Error creating proposal:",Oe),U("Error creating proposal: "+(Oe.message||"Unknown error occurred"))}finally{h(!1)}},la=async({nodeId:ke,threadId:nt},{title:Oe,content:Ft})=>{try{await ti.updateNode(nt,ke,{title:Oe,content:Ft}),await Cr()}catch(Tn){console.error("Error updating node:",Tn),U("Failed to update node: "+Tn.message)}},Us=async ke=>{if(G&&(!n||!e)){console.log("No contract or account for on-chain operation");return}const{id:nt,newNode:Oe}=ke;if(console.log("Creating node with data:",Oe),!(Oe!=null&&Oe.title)||!(Oe!=null&&Oe.content)){console.log("Missing node data");return}try{if(h(!0),U(null),G){const Ft={title:Oe.title,description:Oe.content.substring(0,100)+(Oe.content.length>100?"...":""),createdAt:new Date().toISOString()},Tn={content:Oe.content,lastUpdated:new Date().toISOString()},St=await ot(Ft),Dn=await ot(Tn);await(await n.createNode(nt,St,Dn,Oe.type)).wait(),await fn()}else{console.log("Creating off-chain node with type:",Oe.type);const Ft=typeof Oe.type=="number"?De[Oe.type]:Oe.type||De[0],Tn=await ti.createNode({threadId:Oe.threadId,title:Oe.title,content:Oe.content,nodeType:Ft,parentId:Oe.parentId,metadata:{title:Oe.title,description:Oe.content.substring(0,100)+(Oe.content.length>100?"...":""),createdAt:new Date().toISOString()}}),{nodes:St,edges:Dn}=await ti.getThreadNodes(Oe.threadId),Mi={...ke,nodes:St.map(Ti=>({...Ti,id:Ti.id,type:De.indexOf(Ti.node_type),content:Ti.content,parent_id:Ti.parent_id})),edges:Dn};await Cr()}x(null)}catch(Ft){console.error("Error creating node:",Ft),U("Failed to create node: "+Ft.message)}finally{h(!1)}},Cr=async()=>{try{const ke=await ti.getThreads();console.log("Loaded threads:",ke);const nt=await Promise.all(ke.map(async Oe=>{var St;const{nodes:Ft,edges:Tn}=await ti.getThreadNodes(Oe.id);return console.log(`Loaded nodes for thread ${Oe.id}:`,Ft),{...Oe,content:Oe.content||((St=Oe.metadata)==null?void 0:St.content),nodes:Ft.map(Dn=>{var Mi;return{...Dn,content:Dn.content||((Mi=Dn.metadata)==null?void 0:Mi.content),type:De.indexOf(Dn.node_type)}}),edges:Tn}}));console.log("Threads with nodes:",nt),K(nt),!M&&nt.length>0&&C(nt[0].id)}catch(ke){console.error("Error loading off-chain threads:",ke),U("Failed to load off-chain threads")}};I.useEffect(()=>{G?ht():Cr()},[]);const or=G?i:Y;I.useEffect(()=>{n&&G&&fn()},[n]);const It=or.find(ke=>ke.id===M),ys=It?[It]:[],Xn=or.findIndex(ke=>ke.id===M),Ai=Xn>0,vc=Xn>=0&&Xn<or.length-1,ca=()=>{Ai&&C(or[Xn-1].id)},ul=()=>{vc&&C(or[Xn+1].id)},hl=I.useMemo(()=>P?or.filter(ke=>{var nt,Oe;return(Oe=(nt=ke.metadata)==null?void 0:nt.title)==null?void 0:Oe.toLowerCase().includes(P.toLowerCase())}):[],[or,P]),pl=I.useCallback(()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),$(!1)):(document.documentElement.requestFullscreen().catch(ke=>{console.error(`Error attempting to enable full-screen mode: ${ke.message}`)}),$(!0))},[]),Ks=async()=>{if(G)try{const ke=await fetch("http://localhost:5001/api/v0/id",{method:"POST",headers:{"Content-Type":"application/json"}});if(!ke.ok)throw new Error(`IPFS request failed with status ${ke.status}`);const nt=await ke.json();if(nt&&nt.ID)return se(!0),!0;throw new Error("Invalid IPFS response")}catch(ke){return ke.message.includes("Failed to fetch")?console.error("IPFS daemon not running"):console.error("IPFS connection failed:",ke),se(!1),!1}};I.useEffect(()=>{if(G){Ks();const ke=setInterval(Ks,3e4);return()=>clearInterval(ke)}else se(!1)},[G]),I.useEffect(()=>{function ke(nt){de.current&&!de.current.contains(nt.target)&&H(!1)}return document.addEventListener("mousedown",ke),()=>{document.removeEventListener("mousedown",ke)}},[]);const ml=async ke=>{const nt=ke.target.value;_(nt),F(!!nt)},fa=async ke=>{if(ke.key==="Enter"&&P.trim()){ke.preventDefault();try{ve(!0);const nt=await ti.searchThreads(P);if(nt.length===0){const Oe=await ti.generateThread(P);C(Oe.id),await Cr(),_(""),F(!1)}else K(Oe=>{const Ft=new Set(Oe.map(St=>St.id)),Tn=nt.filter(St=>!Ft.has(St.id));return[...Oe,...Tn]}),F(!0)}catch(nt){console.error("Search/Generate error:",nt),U("Failed to search or generate thread")}finally{ve(!1)}}};return m.jsxs("div",{className:"app",children:[g&&m.jsx("div",{className:"error",children:g}),m.jsxs("div",{className:"header",children:[m.jsx("div",{className:"header-center",children:m.jsx("h1",{children:"canonthread"})}),m.jsx("div",{className:"header-right",children:m.jsx("button",{className:"fullscreen-toggle",onClick:pl,title:B?"Exit full screen":"Enter full screen","aria-label":B?"Exit full screen":"Enter full screen"})})]}),m.jsxs("div",{className:"main-content",children:[It&&m.jsx(xHe,{view:ue,onChangeView:te,threadTitle:((da=It.metadata)==null?void 0:da.title)||It.title||`Thread ${It.id}`,onPrevThread:ca,onNextThread:ul,hasPrev:Ai,hasNext:vc}),ue==="editor"&&le&&It?m.jsx(SHe,{thread:It,selectedNode:le,onSubmit:async ke=>{await Us(ke),te("graph"),he(null)},onCancel:()=>{te("graph"),he(null)}}):ue==="sequence"&&It?m.jsx(UHe,{thread:It,onDone:()=>te("article")}):ue==="canvas"&&It?m.jsx(mHe,{thread:It}):ue==="article"&&It?m.jsx(_ye,{thread:It,initialNodeId:we,onContentChange:ke=>{K(nt=>nt.map(Oe=>Oe.id===It.id?{...Oe,content:ke}:Oe))},onUpdateNode:la}):ue==="chat"?m.jsx(kHe,{selectedThreadId:M,onNodesCreated:async ke=>{await Cr(),C(ke)},onThreadCreated:async ke=>{await Cr(),C(ke)}}):null,m.jsxs("div",{className:"visualization-container",style:{display:ue==="graph"?void 0:"none"},children:[m.jsxs("div",{className:"thread-controls",children:[m.jsxs("div",{className:"custom-select",ref:de,children:[m.jsx("button",{className:"thread-selector",onClick:()=>H(!z),children:M?((ha=(ua=or.find(ke=>ke.id===M))==null?void 0:ua.metadata)==null?void 0:ha.title)||`Thread ${M}`:"Select a Thread"}),z&&m.jsxs("div",{className:"dropdown-menu",children:[m.jsx("div",{className:"dropdown-item create-thread-option",onClick:()=>{R(!0),H(!1)},children:"+ Create New Thread"}),or.map(ke=>{var nt;return m.jsx("div",{className:"dropdown-item",onClick:()=>{C(ke.id),H(!1)},children:((nt=ke.metadata)==null?void 0:nt.title)||`Thread ${ke.id}`},ke.id)})]})]}),m.jsxs("div",{className:"search-container",children:[m.jsx("input",{type:"text",className:"search-input",placeholder:"Search threads...",value:P,onChange:ml,onKeyDown:fa,onFocus:()=>F(!0)}),O&&P&&m.jsx("div",{className:"search-results",children:xe?m.jsxs("div",{className:"loading-results",children:[m.jsx("div",{className:"loading-spinner"}),m.jsxs("p",{children:['Generating thread for "',P,'"...']})]}):hl.length>0?hl.map(ke=>{var nt;return m.jsx("div",{className:"search-result-item",onClick:()=>{C(ke.id),_(""),F(!1)},children:((nt=ke.metadata)==null?void 0:nt.title)||`Thread ${ke.id}`},ke.id)}):m.jsxs("div",{className:"no-results",children:['Press Enter to generate a new thread about "',P,'"']})})]})]}),M?m.jsx(jG,{children:m.jsx(Tme,{threads:ys,onNodeClick:ui,onAddNode:Us,onOpenEditor:ke=>{he(ke),te("editor")},onSelectedNodeChange:Se,loading:u})}):m.jsx("div",{className:"no-thread-message",children:"Please select a thread from the dropdown"})]}),T&&m.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:m.jsxs("div",{className:"modal-content",onClick:ke=>ke.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Create New Thread"}),m.jsx("button",{className:"close-button",onClick:()=>R(!1),children:""})]}),m.jsx("div",{className:"modal-body",children:m.jsxs("div",{className:"create-thread-form",children:[m.jsx("input",{type:"text",placeholder:"Title",value:o,onChange:ke=>a(ke.target.value),className:"thread-input"}),m.jsx("input",{type:"text",placeholder:"Description",value:l,onChange:ke=>f(ke.target.value),className:"thread-input"}),m.jsxs("div",{className:"form-buttons",children:[m.jsx("button",{className:"cancel-button",onClick:()=>R(!1),disabled:u,children:"Cancel"}),m.jsx("button",{className:"submit-button",onClick:async()=>{await Bt(),g||R(!1)},disabled:u||G&&!n,children:u?"Creating...":"Create Thread"})]})]})})]})}),y&&m.jsx(Ime,{node:y,onClose:Ci,onVote:qi,onCreateProposal:Xs,onAddNode:Us,loading:u,voteAmount:S,setVoteAmount:A})]})]})}Mse.createRoot(document.getElementById("root")).render(m.jsx(I.StrictMode,{children:m.jsx(CHe,{})}));const Fre=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:xRe,encodePngMetadata:yRe,getTEXtChunk:SJ},Symbol.toStringTag,{value:"Module"})),AHe=Object.freeze(Object.defineProperty({__proto__:null,alerts:IJ,buttons:TJ,canvasError:LJ,clearCanvasDialog:HJ,colorPicker:JJ,colors:qJ,commandPalette:see,confirmDialog:GJ,default:TI,element:_J,elementLink:CJ,encrypted:KJ,errorDialog:FJ,errorSplash:OJ,errors:NJ,exportDialog:$J,fontList:ree,headings:PJ,helpDialog:zJ,hints:DJ,imageExportDialog:XJ,labels:kJ,library:AJ,mermaid:tee,overwriteConfirm:eee,publishDialog:VJ,publishSuccessDialog:WJ,quickSearch:nee,roomDialog:BJ,search:MJ,shareDialog:jJ,stats:YJ,toast:ZJ,toolBar:RJ,userList:iee,welcomeScreen:QJ},Symbol.toStringTag,{value:"Module"})),MHe=Object.freeze(Object.defineProperty({__proto__:null,default:lee,en:oee,kaa:aee},Symbol.toStringTag,{value:"Module"}));export{kb as C,js as R,go as S,Ve as _,Lfe as a,v5 as b,r0 as c,ixe as d,aM as e,fW as f,mc as g,k0e as h,Hl as i,NHe as j,RHe as k,hW as n,oW as r,fo as s};
