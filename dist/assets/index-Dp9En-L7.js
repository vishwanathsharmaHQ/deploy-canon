const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/subset-worker.chunk-CNo9FwPq.js","assets/subset-shared.chunk-D0UOGVCh.js","assets/pica-DiwB1f4L.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
var gle=Object.defineProperty;var kD=e=>{throw TypeError(e)};var ble=(e,t,n)=>t in e?gle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>ble(e,typeof t!="symbol"?t+"":t,n),Qv=(e,t,n)=>t.has(e)||kD("Cannot "+n);var X=(e,t,n)=>(Qv(e,t,"read from private field"),n?n.call(e):t.get(e)),be=(e,t,n)=>t.has(e)?kD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ee=(e,t,n,r)=>(Qv(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Re=(e,t,n)=>(Qv(e,t,"access private method"),n);var V6=(e,t,n,r)=>({set _(i){ee(e,t,i,n)},get _(){return X(e,t,r)}});function yle(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Na(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jv={exports:{}},W6={},eE={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD;function Ule(){if(SD)return Wt;SD=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function u(K){return K===null||typeof K!="object"?null:(K=d&&K[d]||K["@@iterator"],typeof K=="function"?K:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function U(K,q,Y){this.props=K,this.context=q,this.refs=y,this.updater=Y||h}U.prototype.isReactComponent={},U.prototype.setState=function(K,q){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,q,"setState")},U.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function x(){}x.prototype=U.prototype;function v(K,q,Y){this.props=K,this.context=q,this.refs=y,this.updater=Y||h}var E=v.prototype=new x;E.constructor=v,g(E,U.prototype),E.isPureReactComponent=!0;var k=Array.isArray,M=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function I(K,q,Y){var ae,ge={},he=null,ce=null;if(q!=null)for(ae in q.ref!==void 0&&(ce=q.ref),q.key!==void 0&&(he=""+q.key),q)M.call(q,ae)&&!A.hasOwnProperty(ae)&&(ge[ae]=q[ae]);var ie=arguments.length-2;if(ie===1)ge.children=Y;else if(1<ie){for(var we=Array(ie),Ee=0;Ee<ie;Ee++)we[Ee]=arguments[Ee+2];ge.children=we}if(K&&K.defaultProps)for(ae in ie=K.defaultProps,ie)ge[ae]===void 0&&(ge[ae]=ie[ae]);return{$$typeof:e,type:K,key:he,ref:ce,props:ge,_owner:S.current}}function R(K,q){return{$$typeof:e,type:K.type,key:q,ref:K.ref,props:K.props,_owner:K._owner}}function D(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function _(K){var q={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Y){return q[Y]})}var P=/\/+/g;function $(K,q){return typeof K=="object"&&K!==null&&K.key!=null?_(""+K.key):q.toString(36)}function L(K,q,Y,ae,ge){var he=typeof K;(he==="undefined"||he==="boolean")&&(K=null);var ce=!1;if(K===null)ce=!0;else switch(he){case"string":case"number":ce=!0;break;case"object":switch(K.$$typeof){case e:case t:ce=!0}}if(ce)return ce=K,ge=ge(ce),K=ae===""?"."+$(ce,0):ae,k(ge)?(Y="",K!=null&&(Y=K.replace(P,"$&/")+"/"),L(ge,q,Y,"",function(Ee){return Ee})):ge!=null&&(D(ge)&&(ge=R(ge,Y+(!ge.key||ce&&ce.key===ge.key?"":(""+ge.key).replace(P,"$&/")+"/")+K)),q.push(ge)),1;if(ce=0,ae=ae===""?".":ae+":",k(K))for(var ie=0;ie<K.length;ie++){he=K[ie];var we=ae+$(he,ie);ce+=L(he,q,Y,we,ge)}else if(we=u(K),typeof we=="function")for(K=we.call(K),ie=0;!(he=K.next()).done;)he=he.value,we=ae+$(he,ie++),ce+=L(he,q,Y,we,ge);else if(he==="object")throw q=String(K),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ce}function B(K,q,Y){if(K==null)return K;var ae=[],ge=0;return L(K,ae,"","",function(he){return q.call(Y,he,ge++)}),ae}function V(K){if(K._status===-1){var q=K._result;q=q(),q.then(function(Y){(K._status===0||K._status===-1)&&(K._status=1,K._result=Y)},function(Y){(K._status===0||K._status===-1)&&(K._status=2,K._result=Y)}),K._status===-1&&(K._status=0,K._result=q)}if(K._status===1)return K._result.default;throw K._result}var z={current:null},G={transition:null},W={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:G,ReactCurrentOwner:S};function F(){throw Error("act(...) is not supported in production builds of React.")}return Wt.Children={map:B,forEach:function(K,q,Y){B(K,function(){q.apply(this,arguments)},Y)},count:function(K){var q=0;return B(K,function(){q++}),q},toArray:function(K){return B(K,function(q){return q})||[]},only:function(K){if(!D(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Wt.Component=U,Wt.Fragment=n,Wt.Profiler=i,Wt.PureComponent=v,Wt.StrictMode=r,Wt.Suspense=l,Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Wt.act=F,Wt.cloneElement=function(K,q,Y){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var ae=g({},K.props),ge=K.key,he=K.ref,ce=K._owner;if(q!=null){if(q.ref!==void 0&&(he=q.ref,ce=S.current),q.key!==void 0&&(ge=""+q.key),K.type&&K.type.defaultProps)var ie=K.type.defaultProps;for(we in q)M.call(q,we)&&!A.hasOwnProperty(we)&&(ae[we]=q[we]===void 0&&ie!==void 0?ie[we]:q[we])}var we=arguments.length-2;if(we===1)ae.children=Y;else if(1<we){ie=Array(we);for(var Ee=0;Ee<we;Ee++)ie[Ee]=arguments[Ee+2];ae.children=ie}return{$$typeof:e,type:K.type,key:ge,ref:he,props:ae,_owner:ce}},Wt.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:s,_context:K},K.Consumer=K},Wt.createElement=I,Wt.createFactory=function(K){var q=I.bind(null,K);return q.type=K,q},Wt.createRef=function(){return{current:null}},Wt.forwardRef=function(K){return{$$typeof:a,render:K}},Wt.isValidElement=D,Wt.lazy=function(K){return{$$typeof:c,_payload:{_status:-1,_result:K},_init:V}},Wt.memo=function(K,q){return{$$typeof:f,type:K,compare:q===void 0?null:q}},Wt.startTransition=function(K){var q=G.transition;G.transition={};try{K()}finally{G.transition=q}},Wt.unstable_act=F,Wt.useCallback=function(K,q){return z.current.useCallback(K,q)},Wt.useContext=function(K){return z.current.useContext(K)},Wt.useDebugValue=function(){},Wt.useDeferredValue=function(K){return z.current.useDeferredValue(K)},Wt.useEffect=function(K,q){return z.current.useEffect(K,q)},Wt.useId=function(){return z.current.useId()},Wt.useImperativeHandle=function(K,q,Y){return z.current.useImperativeHandle(K,q,Y)},Wt.useInsertionEffect=function(K,q){return z.current.useInsertionEffect(K,q)},Wt.useLayoutEffect=function(K,q){return z.current.useLayoutEffect(K,q)},Wt.useMemo=function(K,q){return z.current.useMemo(K,q)},Wt.useReducer=function(K,q,Y){return z.current.useReducer(K,q,Y)},Wt.useRef=function(K){return z.current.useRef(K)},Wt.useState=function(K){return z.current.useState(K)},Wt.useSyncExternalStore=function(K,q,Y){return z.current.useSyncExternalStore(K,q,Y)},Wt.useTransition=function(){return z.current.useTransition()},Wt.version="18.3.1",Wt}var CD;function Zb(){return CD||(CD=1,eE.exports=Ule()),eE.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AD;function xle(){if(AD)return W6;AD=1;var e=Zb(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,f){var c,d={},u=null,h=null;f!==void 0&&(u=""+f),l.key!==void 0&&(u=""+l.key),l.ref!==void 0&&(h=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:a,key:u,ref:h,props:d,_owner:i.current}}return W6.Fragment=n,W6.jsx=o,W6.jsxs=o,W6}var MD;function wle(){return MD||(MD=1,Jv.exports=xle()),Jv.exports}var m=wle(),T=Zb();const Ne=Na(T),QM=yle({__proto__:null,default:Ne},[T]);var X8={},tE={exports:{}},Vs={},nE={exports:{}},rE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TD;function vle(){return TD||(TD=1,function(e){function t(G,W){var F=G.length;G.push(W);e:for(;0<F;){var K=F-1>>>1,q=G[K];if(0<i(q,W))G[K]=W,G[F]=q,F=K;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var W=G[0],F=G.pop();if(F!==W){G[0]=F;e:for(var K=0,q=G.length,Y=q>>>1;K<Y;){var ae=2*(K+1)-1,ge=G[ae],he=ae+1,ce=G[he];if(0>i(ge,F))he<q&&0>i(ce,ge)?(G[K]=ce,G[he]=F,K=he):(G[K]=ge,G[ae]=F,K=ae);else if(he<q&&0>i(ce,F))G[K]=ce,G[he]=F,K=he;else break e}}return W}function i(G,W){var F=G.sortIndex-W.sortIndex;return F!==0?F:G.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],f=[],c=1,d=null,u=3,h=!1,g=!1,y=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=G)r(f),W.sortIndex=W.expirationTime,t(l,W);else break;W=n(f)}}function k(G){if(y=!1,E(G),!g)if(n(l)!==null)g=!0,V(M);else{var W=n(f);W!==null&&z(k,W.startTime-G)}}function M(G,W){g=!1,y&&(y=!1,x(I),I=-1),h=!0;var F=u;try{for(E(W),d=n(l);d!==null&&(!(d.expirationTime>W)||G&&!_());){var K=d.callback;if(typeof K=="function"){d.callback=null,u=d.priorityLevel;var q=K(d.expirationTime<=W);W=e.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),E(W)}else r(l);d=n(l)}if(d!==null)var Y=!0;else{var ae=n(f);ae!==null&&z(k,ae.startTime-W),Y=!1}return Y}finally{d=null,u=F,h=!1}}var S=!1,A=null,I=-1,R=5,D=-1;function _(){return!(e.unstable_now()-D<R)}function P(){if(A!==null){var G=e.unstable_now();D=G;var W=!0;try{W=A(!0,G)}finally{W?$():(S=!1,A=null)}}else S=!1}var $;if(typeof v=="function")$=function(){v(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=P,$=function(){B.postMessage(null)}}else $=function(){U(P,0)};function V(G){A=G,S||(S=!0,$())}function z(G,W){I=U(function(){G(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,V(M))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(G){switch(u){case 1:case 2:case 3:var W=3;break;default:W=u}var F=u;u=W;try{return G()}finally{u=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var F=u;u=G;try{return W()}finally{u=F}},e.unstable_scheduleCallback=function(G,W,F){var K=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?K+F:K):F=K,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=F+q,G={id:c++,callback:W,priorityLevel:G,startTime:F,expirationTime:q,sortIndex:-1},F>K?(G.sortIndex=F,t(f,G),n(l)===null&&G===n(f)&&(y?(x(I),I=-1):y=!0,z(k,F-K))):(G.sortIndex=q,t(l,G),g||h||(g=!0,V(M))),G},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(G){var W=u;return function(){var F=u;u=W;try{return G.apply(this,arguments)}finally{u=F}}}}(rE)),rE}var ID;function Ele(){return ID||(ID=1,nE.exports=vle()),nE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ND;function kle(){if(ND)return Vs;ND=1;var e=Zb(),t=Ele();function n(p){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+p,w=1;w<arguments.length;w++)b+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(p,b){o(p,b),o(p+"Capture",b)}function o(p,b){for(i[p]=b,p=0;p<b.length;p++)r.add(b[p])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function u(p){return l.call(d,p)?!0:l.call(c,p)?!1:f.test(p)?d[p]=!0:(c[p]=!0,!1)}function h(p,b,w,C){if(w!==null&&w.type===0)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return C?!1:w!==null?!w.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function g(p,b,w,C){if(b===null||typeof b>"u"||h(p,b,w,C))return!0;if(C)return!1;if(w!==null)switch(w.type){case 3:return!b;case 4:return b===!1;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function y(p,b,w,C,N,j,Z){this.acceptsBooleans=b===2||b===3||b===4,this.attributeName=C,this.attributeNamespace=N,this.mustUseProperty=w,this.propertyName=p,this.type=b,this.sanitizeURL=j,this.removeEmptyString=Z}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){U[p]=new y(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var b=p[0];U[b]=new y(b,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){U[p]=new y(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){U[p]=new y(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){U[p]=new y(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){U[p]=new y(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){U[p]=new y(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){U[p]=new y(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){U[p]=new y(p,5,!1,p.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function v(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var b=p.replace(x,v);U[b]=new y(b,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var b=p.replace(x,v);U[b]=new y(b,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var b=p.replace(x,v);U[b]=new y(b,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){U[p]=new y(p,1,!1,p.toLowerCase(),null,!1,!1)}),U.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){U[p]=new y(p,1,!1,p.toLowerCase(),null,!0,!0)});function E(p,b,w,C){var N=U.hasOwnProperty(b)?U[b]:null;(N!==null?N.type!==0:C||!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(g(b,w,N,C)&&(w=null),C||N===null?u(b)&&(w===null?p.removeAttribute(b):p.setAttribute(b,""+w)):N.mustUseProperty?p[N.propertyName]=w===null?N.type===3?!1:"":w:(b=N.attributeName,C=N.attributeNamespace,w===null?p.removeAttribute(b):(N=N.type,w=N===3||N===4&&w===!0?"":""+w,C?p.setAttributeNS(C,b,w):p.setAttribute(b,w))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),_=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),G=Symbol.iterator;function W(p){return p===null||typeof p!="object"?null:(p=G&&p[G]||p["@@iterator"],typeof p=="function"?p:null)}var F=Object.assign,K;function q(p){if(K===void 0)try{throw Error()}catch(w){var b=w.stack.trim().match(/\n( *(at )?)/);K=b&&b[1]||""}return`
`+K+p}var Y=!1;function ae(p,b){if(!p||Y)return"";Y=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(me){var C=me}Reflect.construct(p,[],b)}else{try{b.call()}catch(me){C=me}p.call(b.prototype)}else{try{throw Error()}catch(me){C=me}p()}}catch(me){if(me&&C&&typeof me.stack=="string"){for(var N=me.stack.split(`
`),j=C.stack.split(`
`),Z=N.length-1,te=j.length-1;1<=Z&&0<=te&&N[Z]!==j[te];)te--;for(;1<=Z&&0<=te;Z--,te--)if(N[Z]!==j[te]){if(Z!==1||te!==1)do if(Z--,te--,0>te||N[Z]!==j[te]){var ne=`
`+N[Z].replace(" at new "," at ");return p.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",p.displayName)),ne}while(1<=Z&&0<=te);break}}}finally{Y=!1,Error.prepareStackTrace=w}return(p=p?p.displayName||p.name:"")?q(p):""}function ge(p){switch(p.tag){case 5:return q(p.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return p=ae(p.type,!1),p;case 11:return p=ae(p.type.render,!1),p;case 1:return p=ae(p.type,!0),p;default:return""}}function he(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case A:return"Fragment";case S:return"Portal";case R:return"Profiler";case I:return"StrictMode";case $:return"Suspense";case L:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case _:return(p.displayName||"Context")+".Consumer";case D:return(p._context.displayName||"Context")+".Provider";case P:var b=p.render;return p=p.displayName,p||(p=b.displayName||b.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case B:return b=p.displayName||null,b!==null?b:he(p.type)||"Memo";case V:b=p._payload,p=p._init;try{return he(p(b))}catch{}}return null}function ce(p){var b=p.type;switch(p.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=b.render,p=p.displayName||p.name||"",b.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(b);case 8:return b===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function ie(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function we(p){var b=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function Ee(p){var b=we(p)?"checked":"value",w=Object.getOwnPropertyDescriptor(p.constructor.prototype,b),C=""+p[b];if(!p.hasOwnProperty(b)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var N=w.get,j=w.set;return Object.defineProperty(p,b,{configurable:!0,get:function(){return N.call(this)},set:function(Z){C=""+Z,j.call(this,Z)}}),Object.defineProperty(p,b,{enumerable:w.enumerable}),{getValue:function(){return C},setValue:function(Z){C=""+Z},stopTracking:function(){p._valueTracker=null,delete p[b]}}}}function _e(p){p._valueTracker||(p._valueTracker=Ee(p))}function Fe(p){if(!p)return!1;var b=p._valueTracker;if(!b)return!0;var w=b.getValue(),C="";return p&&(C=we(p)?p.checked?"true":"false":p.value),p=C,p!==w?(b.setValue(p),!0):!1}function He(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function ve(p,b){var w=b.checked;return F({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??p._wrapperState.initialChecked})}function De(p,b){var w=b.defaultValue==null?"":b.defaultValue,C=b.checked!=null?b.checked:b.defaultChecked;w=ie(b.value!=null?b.value:w),p._wrapperState={initialChecked:C,initialValue:w,controlled:b.type==="checkbox"||b.type==="radio"?b.checked!=null:b.value!=null}}function Ae(p,b){b=b.checked,b!=null&&E(p,"checked",b,!1)}function ut(p,b){Ae(p,b);var w=ie(b.value),C=b.type;if(w!=null)C==="number"?(w===0&&p.value===""||p.value!=w)&&(p.value=""+w):p.value!==""+w&&(p.value=""+w);else if(C==="submit"||C==="reset"){p.removeAttribute("value");return}b.hasOwnProperty("value")?qt(p,b.type,w):b.hasOwnProperty("defaultValue")&&qt(p,b.type,ie(b.defaultValue)),b.checked==null&&b.defaultChecked!=null&&(p.defaultChecked=!!b.defaultChecked)}function Mt(p,b,w){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var C=b.type;if(!(C!=="submit"&&C!=="reset"||b.value!==void 0&&b.value!==null))return;b=""+p._wrapperState.initialValue,w||b===p.value||(p.value=b),p.defaultValue=b}w=p.name,w!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,w!==""&&(p.name=w)}function qt(p,b,w){(b!=="number"||He(p.ownerDocument)!==p)&&(w==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+w&&(p.defaultValue=""+w))}var Kt=Array.isArray;function Zn(p,b,w,C){if(p=p.options,b){b={};for(var N=0;N<w.length;N++)b["$"+w[N]]=!0;for(w=0;w<p.length;w++)N=b.hasOwnProperty("$"+p[w].value),p[w].selected!==N&&(p[w].selected=N),N&&C&&(p[w].defaultSelected=!0)}else{for(w=""+ie(w),b=null,N=0;N<p.length;N++){if(p[N].value===w){p[N].selected=!0,C&&(p[N].defaultSelected=!0);return}b!==null||p[N].disabled||(b=p[N])}b!==null&&(b.selected=!0)}}function Vi(p,b){if(b.dangerouslySetInnerHTML!=null)throw Error(n(91));return F({},b,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function Ls(p,b){var w=b.value;if(w==null){if(w=b.children,b=b.defaultValue,w!=null){if(b!=null)throw Error(n(92));if(Kt(w)){if(1<w.length)throw Error(n(93));w=w[0]}b=w}b==null&&(b=""),w=b}p._wrapperState={initialValue:ie(w)}}function Os(p,b){var w=ie(b.value),C=ie(b.defaultValue);w!=null&&(w=""+w,w!==p.value&&(p.value=w),b.defaultValue==null&&p.defaultValue!==w&&(p.defaultValue=w)),C!=null&&(p.defaultValue=""+C)}function Ti(p){var b=p.textContent;b===p._wrapperState.initialValue&&b!==""&&b!==null&&(p.value=b)}function ye(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Me(p,b){return p==null||p==="http://www.w3.org/1999/xhtml"?ye(b):p==="http://www.w3.org/2000/svg"&&b==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Ke,_t=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(b,w,C,N){MSApp.execUnsafeLocalFunction(function(){return p(b,w,C,N)})}:p}(function(p,b){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=b;else{for(Ke=Ke||document.createElement("div"),Ke.innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=Ke.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;b.firstChild;)p.appendChild(b.firstChild)}});function Tt(p,b){if(b){var w=p.firstChild;if(w&&w===p.lastChild&&w.nodeType===3){w.nodeValue=b;return}}p.textContent=b}var Vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ii=["Webkit","ms","Moz","O"];Object.keys(Vn).forEach(function(p){Ii.forEach(function(b){b=b+p.charAt(0).toUpperCase()+p.substring(1),Vn[b]=Vn[p]})});function ti(p,b,w){return b==null||typeof b=="boolean"||b===""?"":w||typeof b!="number"||b===0||Vn.hasOwnProperty(p)&&Vn[p]?(""+b).trim():b+"px"}function Zt(p,b){p=p.style;for(var w in b)if(b.hasOwnProperty(w)){var C=w.indexOf("--")===0,N=ti(w,b[w],C);w==="float"&&(w="cssFloat"),C?p.setProperty(w,N):p[w]=N}}var $r=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vn(p,b){if(b){if($r[p]&&(b.children!=null||b.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(b.dangerouslySetInnerHTML!=null){if(b.children!=null)throw Error(n(60));if(typeof b.dangerouslySetInnerHTML!="object"||!("__html"in b.dangerouslySetInnerHTML))throw Error(n(61))}if(b.style!=null&&typeof b.style!="object")throw Error(n(62))}}function wr(p,b){if(p.indexOf("-")===-1)return typeof b.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=null;function zo(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var $o=null,gs=null,js=null;function ke(p){if(p=T6(p)){if(typeof $o!="function")throw Error(n(280));var b=p.stateNode;b&&(b=l8(b),$o(p.stateNode,p.type,b))}}function it(p){gs?js?js.push(p):js=[p]:gs=p}function ze(){if(gs){var p=gs,b=js;if(js=gs=null,ke(p),b)for(p=0;p<b.length;p++)ke(b[p])}}function Yt(p,b){return p(b)}function Sn(){}var Ut=!1;function Rn(p,b,w){if(Ut)return p(b,w);Ut=!0;try{return Yt(p,b,w)}finally{Ut=!1,(gs!==null||js!==null)&&(Sn(),ze())}}function Wi(p,b){var w=p.stateNode;if(w===null)return null;var C=l8(w);if(C===null)return null;w=C[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(p=p.type,C=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!C;break e;default:p=!1}if(p)return null;if(w&&typeof w!="function")throw Error(n(231,b,typeof w));return w}var Gi=!1;if(a)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{Gi=!1}function cd(p,b,w,C,N,j,Z,te,ne){var me=Array.prototype.slice.call(arguments,3);try{b.apply(w,me)}catch(Te){this.onError(Te)}}var Ho=!1,Vo=null,go=!1,Pa=null,Rr={onError:function(p){Ho=!0,Vo=p}};function qn(p,b,w,C,N,j,Z,te,ne){Ho=!1,Vo=null,cd.apply(Rr,arguments)}function Ni(p,b,w,C,N,j,Z,te,ne){if(qn.apply(this,arguments),Ho){if(Ho){var me=Vo;Ho=!1,Vo=null}else throw Error(n(198));go||(go=!0,Pa=me)}}function Ln(p){var b=p,w=p;if(p.alternate)for(;b.return;)b=b.return;else{p=b;do b=p,b.flags&4098&&(w=b.return),p=b.return;while(p)}return b.tag===3?w:null}function Bc(p){if(p.tag===13){var b=p.memoizedState;if(b===null&&(p=p.alternate,p!==null&&(b=p.memoizedState)),b!==null)return b.dehydrated}return null}function c0(p){if(Ln(p)!==p)throw Error(n(188))}function c6(p){var b=p.alternate;if(!b){if(b=Ln(p),b===null)throw Error(n(188));return b!==p?null:p}for(var w=p,C=b;;){var N=w.return;if(N===null)break;var j=N.alternate;if(j===null){if(C=N.return,C!==null){w=C;continue}break}if(N.child===j.child){for(j=N.child;j;){if(j===w)return c0(N),p;if(j===C)return c0(N),b;j=j.sibling}throw Error(n(188))}if(w.return!==C.return)w=N,C=j;else{for(var Z=!1,te=N.child;te;){if(te===w){Z=!0,w=N,C=j;break}if(te===C){Z=!0,C=N,w=j;break}te=te.sibling}if(!Z){for(te=j.child;te;){if(te===w){Z=!0,w=j,C=N;break}if(te===C){Z=!0,C=j,w=N;break}te=te.sibling}if(!Z)throw Error(n(189))}}if(w.alternate!==C)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?p:b}function jy(p){return p=c6(p),p!==null?By(p):null}function By(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var b=By(p);if(b!==null)return b;p=p.sibling}return null}var Fy=t.unstable_scheduleCallback,zy=t.unstable_cancelCallback,h7=t.unstable_shouldYield,$y=t.unstable_requestPaint,cr=t.unstable_now,p7=t.unstable_getCurrentPriorityLevel,f6=t.unstable_ImmediatePriority,Hy=t.unstable_UserBlockingPriority,R1=t.unstable_NormalPriority,m7=t.unstable_LowPriority,Vy=t.unstable_IdlePriority,f0=null,Wo=null;function g7(p){if(Wo&&typeof Wo.onCommitFiberRoot=="function")try{Wo.onCommitFiberRoot(f0,p,void 0,(p.current.flags&128)===128)}catch{}}var bo=Math.clz32?Math.clz32:U7,b7=Math.log,y7=Math.LN2;function U7(p){return p>>>=0,p===0?32:31-(b7(p)/y7|0)|0}var _1=64,P1=4194304;function Rl(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function D1(p,b){var w=p.pendingLanes;if(w===0)return 0;var C=0,N=p.suspendedLanes,j=p.pingedLanes,Z=w&268435455;if(Z!==0){var te=Z&~N;te!==0?C=Rl(te):(j&=Z,j!==0&&(C=Rl(j)))}else Z=w&~N,Z!==0?C=Rl(Z):j!==0&&(C=Rl(j));if(C===0)return 0;if(b!==0&&b!==C&&!(b&N)&&(N=C&-C,j=b&-b,N>=j||N===16&&(j&4194240)!==0))return b;if(C&4&&(C|=w&16),b=p.entangledLanes,b!==0)for(p=p.entanglements,b&=C;0<b;)w=31-bo(b),N=1<<w,C|=p[w],b&=~N;return C}function Wy(p,b){switch(p){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x7(p,b){for(var w=p.suspendedLanes,C=p.pingedLanes,N=p.expirationTimes,j=p.pendingLanes;0<j;){var Z=31-bo(j),te=1<<Z,ne=N[Z];ne===-1?(!(te&w)||te&C)&&(N[Z]=Wy(te,b)):ne<=b&&(p.expiredLanes|=te),j&=~te}}function d6(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function L1(){var p=_1;return _1<<=1,!(_1&4194240)&&(_1=64),p}function u6(p){for(var b=[],w=0;31>w;w++)b.push(p);return b}function d0(p,b,w){p.pendingLanes|=b,b!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,b=31-bo(b),p[b]=w}function Gy(p,b){var w=p.pendingLanes&~b;p.pendingLanes=b,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=b,p.mutableReadLanes&=b,p.entangledLanes&=b,b=p.entanglements;var C=p.eventTimes;for(p=p.expirationTimes;0<w;){var N=31-bo(w),j=1<<N;b[N]=0,C[N]=-1,p[N]=-1,w&=~j}}function w7(p,b){var w=p.entangledLanes|=b;for(p=p.entanglements;w;){var C=31-bo(w),N=1<<C;N&b|p[C]&b&&(p[C]|=b),w&=~N}}var En=0;function n_(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var r_,v7,i_,s_,o_,E7=!1,Xy=[],fd=null,dd=null,ud=null,h6=new Map,p6=new Map,hd=[],Boe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a_(p,b){switch(p){case"focusin":case"focusout":fd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":ud=null;break;case"pointerover":case"pointerout":h6.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":p6.delete(b.pointerId)}}function m6(p,b,w,C,N,j){return p===null||p.nativeEvent!==j?(p={blockedOn:b,domEventName:w,eventSystemFlags:C,nativeEvent:j,targetContainers:[N]},b!==null&&(b=T6(b),b!==null&&v7(b)),p):(p.eventSystemFlags|=C,b=p.targetContainers,N!==null&&b.indexOf(N)===-1&&b.push(N),p)}function Foe(p,b,w,C,N){switch(b){case"focusin":return fd=m6(fd,p,b,w,C,N),!0;case"dragenter":return dd=m6(dd,p,b,w,C,N),!0;case"mouseover":return ud=m6(ud,p,b,w,C,N),!0;case"pointerover":var j=N.pointerId;return h6.set(j,m6(h6.get(j)||null,p,b,w,C,N)),!0;case"gotpointercapture":return j=N.pointerId,p6.set(j,m6(p6.get(j)||null,p,b,w,C,N)),!0}return!1}function l_(p){var b=u0(p.target);if(b!==null){var w=Ln(b);if(w!==null){if(b=w.tag,b===13){if(b=Bc(w),b!==null){p.blockedOn=b,o_(p.priority,function(){i_(w)});return}}else if(b===3&&w.stateNode.current.memoizedState.isDehydrated){p.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Ky(p){if(p.blockedOn!==null)return!1;for(var b=p.targetContainers;0<b.length;){var w=S7(p.domEventName,p.eventSystemFlags,b[0],p.nativeEvent);if(w===null){w=p.nativeEvent;var C=new w.constructor(w.type,w);Hr=C,w.target.dispatchEvent(C),Hr=null}else return b=T6(w),b!==null&&v7(b),p.blockedOn=w,!1;b.shift()}return!0}function c_(p,b,w){Ky(p)&&w.delete(b)}function zoe(){E7=!1,fd!==null&&Ky(fd)&&(fd=null),dd!==null&&Ky(dd)&&(dd=null),ud!==null&&Ky(ud)&&(ud=null),h6.forEach(c_),p6.forEach(c_)}function g6(p,b){p.blockedOn===b&&(p.blockedOn=null,E7||(E7=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zoe)))}function b6(p){function b(N){return g6(N,p)}if(0<Xy.length){g6(Xy[0],p);for(var w=1;w<Xy.length;w++){var C=Xy[w];C.blockedOn===p&&(C.blockedOn=null)}}for(fd!==null&&g6(fd,p),dd!==null&&g6(dd,p),ud!==null&&g6(ud,p),h6.forEach(b),p6.forEach(b),w=0;w<hd.length;w++)C=hd[w],C.blockedOn===p&&(C.blockedOn=null);for(;0<hd.length&&(w=hd[0],w.blockedOn===null);)l_(w),w.blockedOn===null&&hd.shift()}var O1=k.ReactCurrentBatchConfig,Yy=!0;function $oe(p,b,w,C){var N=En,j=O1.transition;O1.transition=null;try{En=1,k7(p,b,w,C)}finally{En=N,O1.transition=j}}function Hoe(p,b,w,C){var N=En,j=O1.transition;O1.transition=null;try{En=4,k7(p,b,w,C)}finally{En=N,O1.transition=j}}function k7(p,b,w,C){if(Yy){var N=S7(p,b,w,C);if(N===null)$7(p,b,C,Zy,w),a_(p,C);else if(Foe(N,p,b,w,C))C.stopPropagation();else if(a_(p,C),b&4&&-1<Boe.indexOf(p)){for(;N!==null;){var j=T6(N);if(j!==null&&r_(j),j=S7(p,b,w,C),j===null&&$7(p,b,C,Zy,w),j===N)break;N=j}N!==null&&C.stopPropagation()}else $7(p,b,C,null,w)}}var Zy=null;function S7(p,b,w,C){if(Zy=null,p=zo(C),p=u0(p),p!==null)if(b=Ln(p),b===null)p=null;else if(w=b.tag,w===13){if(p=Bc(b),p!==null)return p;p=null}else if(w===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;p=null}else b!==p&&(p=null);return Zy=p,null}function f_(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p7()){case f6:return 1;case Hy:return 4;case R1:case m7:return 16;case Vy:return 536870912;default:return 16}default:return 16}}var pd=null,C7=null,qy=null;function d_(){if(qy)return qy;var p,b=C7,w=b.length,C,N="value"in pd?pd.value:pd.textContent,j=N.length;for(p=0;p<w&&b[p]===N[p];p++);var Z=w-p;for(C=1;C<=Z&&b[w-C]===N[j-C];C++);return qy=N.slice(p,1<C?1-C:void 0)}function Qy(p){var b=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&b===13&&(p=13)):p=b,p===10&&(p=13),32<=p||p===13?p:0}function Jy(){return!0}function u_(){return!1}function yo(p){function b(w,C,N,j,Z){this._reactName=w,this._targetInst=N,this.type=C,this.nativeEvent=j,this.target=Z,this.currentTarget=null;for(var te in p)p.hasOwnProperty(te)&&(w=p[te],this[te]=w?w(j):j[te]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Jy:u_,this.isPropagationStopped=u_,this}return F(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Jy)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Jy)},persist:function(){},isPersistent:Jy}),b}var j1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A7=yo(j1),y6=F({},j1,{view:0,detail:0}),Voe=yo(y6),M7,T7,U6,e8=F({},y6,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N7,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==U6&&(U6&&p.type==="mousemove"?(M7=p.screenX-U6.screenX,T7=p.screenY-U6.screenY):T7=M7=0,U6=p),M7)},movementY:function(p){return"movementY"in p?p.movementY:T7}}),h_=yo(e8),Woe=F({},e8,{dataTransfer:0}),Goe=yo(Woe),Xoe=F({},y6,{relatedTarget:0}),I7=yo(Xoe),Koe=F({},j1,{animationName:0,elapsedTime:0,pseudoElement:0}),Yoe=yo(Koe),Zoe=F({},j1,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),qoe=yo(Zoe),Qoe=F({},j1,{data:0}),p_=yo(Qoe),Joe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nae(p){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(p):(p=tae[p])?!!b[p]:!1}function N7(){return nae}var rae=F({},y6,{key:function(p){if(p.key){var b=Joe[p.key]||p.key;if(b!=="Unidentified")return b}return p.type==="keypress"?(p=Qy(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?eae[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N7,charCode:function(p){return p.type==="keypress"?Qy(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Qy(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),iae=yo(rae),sae=F({},e8,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m_=yo(sae),oae=F({},y6,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N7}),aae=yo(oae),lae=F({},j1,{propertyName:0,elapsedTime:0,pseudoElement:0}),cae=yo(lae),fae=F({},e8,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),dae=yo(fae),uae=[9,13,27,32],R7=a&&"CompositionEvent"in window,x6=null;a&&"documentMode"in document&&(x6=document.documentMode);var hae=a&&"TextEvent"in window&&!x6,g_=a&&(!R7||x6&&8<x6&&11>=x6),b_=" ",y_=!1;function U_(p,b){switch(p){case"keyup":return uae.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x_(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var B1=!1;function pae(p,b){switch(p){case"compositionend":return x_(b);case"keypress":return b.which!==32?null:(y_=!0,b_);case"textInput":return p=b.data,p===b_&&y_?null:p;default:return null}}function mae(p,b){if(B1)return p==="compositionend"||!R7&&U_(p,b)?(p=d_(),qy=C7=pd=null,B1=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return g_&&b.locale!=="ko"?null:b.data;default:return null}}var gae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w_(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b==="input"?!!gae[p.type]:b==="textarea"}function v_(p,b,w,C){it(C),b=s8(b,"onChange"),0<b.length&&(w=new A7("onChange","change",null,w,C),p.push({event:w,listeners:b}))}var w6=null,v6=null;function bae(p){F_(p,0)}function t8(p){var b=V1(p);if(Fe(b))return p}function yae(p,b){if(p==="change")return b}var E_=!1;if(a){var _7;if(a){var P7="oninput"in document;if(!P7){var k_=document.createElement("div");k_.setAttribute("oninput","return;"),P7=typeof k_.oninput=="function"}_7=P7}else _7=!1;E_=_7&&(!document.documentMode||9<document.documentMode)}function S_(){w6&&(w6.detachEvent("onpropertychange",C_),v6=w6=null)}function C_(p){if(p.propertyName==="value"&&t8(v6)){var b=[];v_(b,v6,p,zo(p)),Rn(bae,b)}}function Uae(p,b,w){p==="focusin"?(S_(),w6=b,v6=w,w6.attachEvent("onpropertychange",C_)):p==="focusout"&&S_()}function xae(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return t8(v6)}function wae(p,b){if(p==="click")return t8(b)}function vae(p,b){if(p==="input"||p==="change")return t8(b)}function Eae(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var Da=typeof Object.is=="function"?Object.is:Eae;function E6(p,b){if(Da(p,b))return!0;if(typeof p!="object"||p===null||typeof b!="object"||b===null)return!1;var w=Object.keys(p),C=Object.keys(b);if(w.length!==C.length)return!1;for(C=0;C<w.length;C++){var N=w[C];if(!l.call(b,N)||!Da(p[N],b[N]))return!1}return!0}function A_(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function M_(p,b){var w=A_(p);p=0;for(var C;w;){if(w.nodeType===3){if(C=p+w.textContent.length,p<=b&&C>=b)return{node:w,offset:b-p};p=C}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=A_(w)}}function T_(p,b){return p&&b?p===b?!0:p&&p.nodeType===3?!1:b&&b.nodeType===3?T_(p,b.parentNode):"contains"in p?p.contains(b):p.compareDocumentPosition?!!(p.compareDocumentPosition(b)&16):!1:!1}function I_(){for(var p=window,b=He();b instanceof p.HTMLIFrameElement;){try{var w=typeof b.contentWindow.location.href=="string"}catch{w=!1}if(w)p=b.contentWindow;else break;b=He(p.document)}return b}function D7(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b&&(b==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||b==="textarea"||p.contentEditable==="true")}function kae(p){var b=I_(),w=p.focusedElem,C=p.selectionRange;if(b!==w&&w&&w.ownerDocument&&T_(w.ownerDocument.documentElement,w)){if(C!==null&&D7(w)){if(b=C.start,p=C.end,p===void 0&&(p=b),"selectionStart"in w)w.selectionStart=b,w.selectionEnd=Math.min(p,w.value.length);else if(p=(b=w.ownerDocument||document)&&b.defaultView||window,p.getSelection){p=p.getSelection();var N=w.textContent.length,j=Math.min(C.start,N);C=C.end===void 0?j:Math.min(C.end,N),!p.extend&&j>C&&(N=C,C=j,j=N),N=M_(w,j);var Z=M_(w,C);N&&Z&&(p.rangeCount!==1||p.anchorNode!==N.node||p.anchorOffset!==N.offset||p.focusNode!==Z.node||p.focusOffset!==Z.offset)&&(b=b.createRange(),b.setStart(N.node,N.offset),p.removeAllRanges(),j>C?(p.addRange(b),p.extend(Z.node,Z.offset)):(b.setEnd(Z.node,Z.offset),p.addRange(b)))}}for(b=[],p=w;p=p.parentNode;)p.nodeType===1&&b.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<b.length;w++)p=b[w],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Sae=a&&"documentMode"in document&&11>=document.documentMode,F1=null,L7=null,k6=null,O7=!1;function N_(p,b,w){var C=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;O7||F1==null||F1!==He(C)||(C=F1,"selectionStart"in C&&D7(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),k6&&E6(k6,C)||(k6=C,C=s8(L7,"onSelect"),0<C.length&&(b=new A7("onSelect","select",null,b,w),p.push({event:b,listeners:C}),b.target=F1)))}function n8(p,b){var w={};return w[p.toLowerCase()]=b.toLowerCase(),w["Webkit"+p]="webkit"+b,w["Moz"+p]="moz"+b,w}var z1={animationend:n8("Animation","AnimationEnd"),animationiteration:n8("Animation","AnimationIteration"),animationstart:n8("Animation","AnimationStart"),transitionend:n8("Transition","TransitionEnd")},j7={},R_={};a&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete z1.animationend.animation,delete z1.animationiteration.animation,delete z1.animationstart.animation),"TransitionEvent"in window||delete z1.transitionend.transition);function r8(p){if(j7[p])return j7[p];if(!z1[p])return p;var b=z1[p],w;for(w in b)if(b.hasOwnProperty(w)&&w in R_)return j7[p]=b[w];return p}var __=r8("animationend"),P_=r8("animationiteration"),D_=r8("animationstart"),L_=r8("transitionend"),O_=new Map,j_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function md(p,b){O_.set(p,b),s(b,[p])}for(var B7=0;B7<j_.length;B7++){var F7=j_[B7],Cae=F7.toLowerCase(),Aae=F7[0].toUpperCase()+F7.slice(1);md(Cae,"on"+Aae)}md(__,"onAnimationEnd"),md(P_,"onAnimationIteration"),md(D_,"onAnimationStart"),md("dblclick","onDoubleClick"),md("focusin","onFocus"),md("focusout","onBlur"),md(L_,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var S6="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mae=new Set("cancel close invalid load scroll toggle".split(" ").concat(S6));function B_(p,b,w){var C=p.type||"unknown-event";p.currentTarget=w,Ni(C,b,void 0,p),p.currentTarget=null}function F_(p,b){b=(b&4)!==0;for(var w=0;w<p.length;w++){var C=p[w],N=C.event;C=C.listeners;e:{var j=void 0;if(b)for(var Z=C.length-1;0<=Z;Z--){var te=C[Z],ne=te.instance,me=te.currentTarget;if(te=te.listener,ne!==j&&N.isPropagationStopped())break e;B_(N,te,me),j=ne}else for(Z=0;Z<C.length;Z++){if(te=C[Z],ne=te.instance,me=te.currentTarget,te=te.listener,ne!==j&&N.isPropagationStopped())break e;B_(N,te,me),j=ne}}}if(go)throw p=Pa,go=!1,Pa=null,p}function Wn(p,b){var w=b[K7];w===void 0&&(w=b[K7]=new Set);var C=p+"__bubble";w.has(C)||(z_(b,p,2,!1),w.add(C))}function z7(p,b,w){var C=0;b&&(C|=4),z_(w,p,C,b)}var i8="_reactListening"+Math.random().toString(36).slice(2);function C6(p){if(!p[i8]){p[i8]=!0,r.forEach(function(w){w!=="selectionchange"&&(Mae.has(w)||z7(w,!1,p),z7(w,!0,p))});var b=p.nodeType===9?p:p.ownerDocument;b===null||b[i8]||(b[i8]=!0,z7("selectionchange",!1,b))}}function z_(p,b,w,C){switch(f_(b)){case 1:var N=$oe;break;case 4:N=Hoe;break;default:N=k7}w=N.bind(null,b,w,p),N=void 0,!Gi||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(N=!0),C?N!==void 0?p.addEventListener(b,w,{capture:!0,passive:N}):p.addEventListener(b,w,!0):N!==void 0?p.addEventListener(b,w,{passive:N}):p.addEventListener(b,w,!1)}function $7(p,b,w,C,N){var j=C;if(!(b&1)&&!(b&2)&&C!==null)e:for(;;){if(C===null)return;var Z=C.tag;if(Z===3||Z===4){var te=C.stateNode.containerInfo;if(te===N||te.nodeType===8&&te.parentNode===N)break;if(Z===4)for(Z=C.return;Z!==null;){var ne=Z.tag;if((ne===3||ne===4)&&(ne=Z.stateNode.containerInfo,ne===N||ne.nodeType===8&&ne.parentNode===N))return;Z=Z.return}for(;te!==null;){if(Z=u0(te),Z===null)return;if(ne=Z.tag,ne===5||ne===6){C=j=Z;continue e}te=te.parentNode}}C=C.return}Rn(function(){var me=j,Te=zo(w),Pe=[];e:{var Ce=O_.get(p);if(Ce!==void 0){var Ze=A7,rt=p;switch(p){case"keypress":if(Qy(w)===0)break e;case"keydown":case"keyup":Ze=iae;break;case"focusin":rt="focus",Ze=I7;break;case"focusout":rt="blur",Ze=I7;break;case"beforeblur":case"afterblur":Ze=I7;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=h_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Goe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=aae;break;case __:case P_:case D_:Ze=Yoe;break;case L_:Ze=cae;break;case"scroll":Ze=Voe;break;case"wheel":Ze=dae;break;case"copy":case"cut":case"paste":Ze=qoe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=m_}var ot=(b&4)!==0,_r=!ot&&p==="scroll",le=ot?Ce!==null?Ce+"Capture":null:Ce;ot=[];for(var re=me,de;re!==null;){de=re;var Be=de.stateNode;if(de.tag===5&&Be!==null&&(de=Be,le!==null&&(Be=Wi(re,le),Be!=null&&ot.push(A6(re,Be,de)))),_r)break;re=re.return}0<ot.length&&(Ce=new Ze(Ce,rt,null,w,Te),Pe.push({event:Ce,listeners:ot}))}}if(!(b&7)){e:{if(Ce=p==="mouseover"||p==="pointerover",Ze=p==="mouseout"||p==="pointerout",Ce&&w!==Hr&&(rt=w.relatedTarget||w.fromElement)&&(u0(rt)||rt[Fc]))break e;if((Ze||Ce)&&(Ce=Te.window===Te?Te:(Ce=Te.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ze?(rt=w.relatedTarget||w.toElement,Ze=me,rt=rt?u0(rt):null,rt!==null&&(_r=Ln(rt),rt!==_r||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(Ze=null,rt=me),Ze!==rt)){if(ot=h_,Be="onMouseLeave",le="onMouseEnter",re="mouse",(p==="pointerout"||p==="pointerover")&&(ot=m_,Be="onPointerLeave",le="onPointerEnter",re="pointer"),_r=Ze==null?Ce:V1(Ze),de=rt==null?Ce:V1(rt),Ce=new ot(Be,re+"leave",Ze,w,Te),Ce.target=_r,Ce.relatedTarget=de,Be=null,u0(Te)===me&&(ot=new ot(le,re+"enter",rt,w,Te),ot.target=de,ot.relatedTarget=_r,Be=ot),_r=Be,Ze&&rt)t:{for(ot=Ze,le=rt,re=0,de=ot;de;de=$1(de))re++;for(de=0,Be=le;Be;Be=$1(Be))de++;for(;0<re-de;)ot=$1(ot),re--;for(;0<de-re;)le=$1(le),de--;for(;re--;){if(ot===le||le!==null&&ot===le.alternate)break t;ot=$1(ot),le=$1(le)}ot=null}else ot=null;Ze!==null&&$_(Pe,Ce,Ze,ot,!1),rt!==null&&_r!==null&&$_(Pe,_r,rt,ot,!0)}}e:{if(Ce=me?V1(me):window,Ze=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Ce.type==="file")var ct=yae;else if(w_(Ce))if(E_)ct=vae;else{ct=xae;var gt=Uae}else(Ze=Ce.nodeName)&&Ze.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(ct=wae);if(ct&&(ct=ct(p,me))){v_(Pe,ct,w,Te);break e}gt&&gt(p,Ce,me),p==="focusout"&&(gt=Ce._wrapperState)&&gt.controlled&&Ce.type==="number"&&qt(Ce,"number",Ce.value)}switch(gt=me?V1(me):window,p){case"focusin":(w_(gt)||gt.contentEditable==="true")&&(F1=gt,L7=me,k6=null);break;case"focusout":k6=L7=F1=null;break;case"mousedown":O7=!0;break;case"contextmenu":case"mouseup":case"dragend":O7=!1,N_(Pe,w,Te);break;case"selectionchange":if(Sae)break;case"keydown":case"keyup":N_(Pe,w,Te)}var bt;if(R7)e:{switch(p){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else B1?U_(p,w)&&(kt="onCompositionEnd"):p==="keydown"&&w.keyCode===229&&(kt="onCompositionStart");kt&&(g_&&w.locale!=="ko"&&(B1||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&B1&&(bt=d_()):(pd=Te,C7="value"in pd?pd.value:pd.textContent,B1=!0)),gt=s8(me,kt),0<gt.length&&(kt=new p_(kt,p,null,w,Te),Pe.push({event:kt,listeners:gt}),bt?kt.data=bt:(bt=x_(w),bt!==null&&(kt.data=bt)))),(bt=hae?pae(p,w):mae(p,w))&&(me=s8(me,"onBeforeInput"),0<me.length&&(Te=new p_("onBeforeInput","beforeinput",null,w,Te),Pe.push({event:Te,listeners:me}),Te.data=bt))}F_(Pe,b)})}function A6(p,b,w){return{instance:p,listener:b,currentTarget:w}}function s8(p,b){for(var w=b+"Capture",C=[];p!==null;){var N=p,j=N.stateNode;N.tag===5&&j!==null&&(N=j,j=Wi(p,w),j!=null&&C.unshift(A6(p,j,N)),j=Wi(p,b),j!=null&&C.push(A6(p,j,N))),p=p.return}return C}function $1(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function $_(p,b,w,C,N){for(var j=b._reactName,Z=[];w!==null&&w!==C;){var te=w,ne=te.alternate,me=te.stateNode;if(ne!==null&&ne===C)break;te.tag===5&&me!==null&&(te=me,N?(ne=Wi(w,j),ne!=null&&Z.unshift(A6(w,ne,te))):N||(ne=Wi(w,j),ne!=null&&Z.push(A6(w,ne,te)))),w=w.return}Z.length!==0&&p.push({event:b,listeners:Z})}var Tae=/\r\n?/g,Iae=/\u0000|\uFFFD/g;function H_(p){return(typeof p=="string"?p:""+p).replace(Tae,`
`).replace(Iae,"")}function o8(p,b,w){if(b=H_(b),H_(p)!==b&&w)throw Error(n(425))}function a8(){}var H7=null,V7=null;function W7(p,b){return p==="textarea"||p==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var G7=typeof setTimeout=="function"?setTimeout:void 0,Nae=typeof clearTimeout=="function"?clearTimeout:void 0,V_=typeof Promise=="function"?Promise:void 0,Rae=typeof queueMicrotask=="function"?queueMicrotask:typeof V_<"u"?function(p){return V_.resolve(null).then(p).catch(_ae)}:G7;function _ae(p){setTimeout(function(){throw p})}function X7(p,b){var w=b,C=0;do{var N=w.nextSibling;if(p.removeChild(w),N&&N.nodeType===8)if(w=N.data,w==="/$"){if(C===0){p.removeChild(N),b6(b);return}C--}else w!=="$"&&w!=="$?"&&w!=="$!"||C++;w=N}while(w);b6(b)}function gd(p){for(;p!=null;p=p.nextSibling){var b=p.nodeType;if(b===1||b===3)break;if(b===8){if(b=p.data,b==="$"||b==="$!"||b==="$?")break;if(b==="/$")return null}}return p}function W_(p){p=p.previousSibling;for(var b=0;p;){if(p.nodeType===8){var w=p.data;if(w==="$"||w==="$!"||w==="$?"){if(b===0)return p;b--}else w==="/$"&&b++}p=p.previousSibling}return null}var H1=Math.random().toString(36).slice(2),_l="__reactFiber$"+H1,M6="__reactProps$"+H1,Fc="__reactContainer$"+H1,K7="__reactEvents$"+H1,Pae="__reactListeners$"+H1,Dae="__reactHandles$"+H1;function u0(p){var b=p[_l];if(b)return b;for(var w=p.parentNode;w;){if(b=w[Fc]||w[_l]){if(w=b.alternate,b.child!==null||w!==null&&w.child!==null)for(p=W_(p);p!==null;){if(w=p[_l])return w;p=W_(p)}return b}p=w,w=p.parentNode}return null}function T6(p){return p=p[_l]||p[Fc],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function V1(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function l8(p){return p[M6]||null}var Y7=[],W1=-1;function bd(p){return{current:p}}function Gn(p){0>W1||(p.current=Y7[W1],Y7[W1]=null,W1--)}function On(p,b){W1++,Y7[W1]=p.current,p.current=b}var yd={},Xi=bd(yd),Bs=bd(!1),h0=yd;function G1(p,b){var w=p.type.contextTypes;if(!w)return yd;var C=p.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===b)return C.__reactInternalMemoizedMaskedChildContext;var N={},j;for(j in w)N[j]=b[j];return C&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=b,p.__reactInternalMemoizedMaskedChildContext=N),N}function Fs(p){return p=p.childContextTypes,p!=null}function c8(){Gn(Bs),Gn(Xi)}function G_(p,b,w){if(Xi.current!==yd)throw Error(n(168));On(Xi,b),On(Bs,w)}function X_(p,b,w){var C=p.stateNode;if(b=b.childContextTypes,typeof C.getChildContext!="function")return w;C=C.getChildContext();for(var N in C)if(!(N in b))throw Error(n(108,ce(p)||"Unknown",N));return F({},w,C)}function f8(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||yd,h0=Xi.current,On(Xi,p),On(Bs,Bs.current),!0}function K_(p,b,w){var C=p.stateNode;if(!C)throw Error(n(169));w?(p=X_(p,b,h0),C.__reactInternalMemoizedMergedChildContext=p,Gn(Bs),Gn(Xi),On(Xi,p)):Gn(Bs),On(Bs,w)}var zc=null,d8=!1,Z7=!1;function Y_(p){zc===null?zc=[p]:zc.push(p)}function Lae(p){d8=!0,Y_(p)}function Ud(){if(!Z7&&zc!==null){Z7=!0;var p=0,b=En;try{var w=zc;for(En=1;p<w.length;p++){var C=w[p];do C=C(!0);while(C!==null)}zc=null,d8=!1}catch(N){throw zc!==null&&(zc=zc.slice(p+1)),Fy(f6,Ud),N}finally{En=b,Z7=!1}}return null}var X1=[],K1=0,u8=null,h8=0,Go=[],Xo=0,p0=null,$c=1,Hc="";function m0(p,b){X1[K1++]=h8,X1[K1++]=u8,u8=p,h8=b}function Z_(p,b,w){Go[Xo++]=$c,Go[Xo++]=Hc,Go[Xo++]=p0,p0=p;var C=$c;p=Hc;var N=32-bo(C)-1;C&=~(1<<N),w+=1;var j=32-bo(b)+N;if(30<j){var Z=N-N%5;j=(C&(1<<Z)-1).toString(32),C>>=Z,N-=Z,$c=1<<32-bo(b)+N|w<<N|C,Hc=j+p}else $c=1<<j|w<<N|C,Hc=p}function q7(p){p.return!==null&&(m0(p,1),Z_(p,1,0))}function Q7(p){for(;p===u8;)u8=X1[--K1],X1[K1]=null,h8=X1[--K1],X1[K1]=null;for(;p===p0;)p0=Go[--Xo],Go[Xo]=null,Hc=Go[--Xo],Go[Xo]=null,$c=Go[--Xo],Go[Xo]=null}var Uo=null,xo=null,Qn=!1,La=null;function q_(p,b){var w=qo(5,null,null,0);w.elementType="DELETED",w.stateNode=b,w.return=p,b=p.deletions,b===null?(p.deletions=[w],p.flags|=16):b.push(w)}function Q_(p,b){switch(p.tag){case 5:var w=p.type;return b=b.nodeType!==1||w.toLowerCase()!==b.nodeName.toLowerCase()?null:b,b!==null?(p.stateNode=b,Uo=p,xo=gd(b.firstChild),!0):!1;case 6:return b=p.pendingProps===""||b.nodeType!==3?null:b,b!==null?(p.stateNode=b,Uo=p,xo=null,!0):!1;case 13:return b=b.nodeType!==8?null:b,b!==null?(w=p0!==null?{id:$c,overflow:Hc}:null,p.memoizedState={dehydrated:b,treeContext:w,retryLane:1073741824},w=qo(18,null,null,0),w.stateNode=b,w.return=p,p.child=w,Uo=p,xo=null,!0):!1;default:return!1}}function J7(p){return(p.mode&1)!==0&&(p.flags&128)===0}function ev(p){if(Qn){var b=xo;if(b){var w=b;if(!Q_(p,b)){if(J7(p))throw Error(n(418));b=gd(w.nextSibling);var C=Uo;b&&Q_(p,b)?q_(C,w):(p.flags=p.flags&-4097|2,Qn=!1,Uo=p)}}else{if(J7(p))throw Error(n(418));p.flags=p.flags&-4097|2,Qn=!1,Uo=p}}}function J_(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;Uo=p}function p8(p){if(p!==Uo)return!1;if(!Qn)return J_(p),Qn=!0,!1;var b;if((b=p.tag!==3)&&!(b=p.tag!==5)&&(b=p.type,b=b!=="head"&&b!=="body"&&!W7(p.type,p.memoizedProps)),b&&(b=xo)){if(J7(p))throw eP(),Error(n(418));for(;b;)q_(p,b),b=gd(b.nextSibling)}if(J_(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,b=0;p;){if(p.nodeType===8){var w=p.data;if(w==="/$"){if(b===0){xo=gd(p.nextSibling);break e}b--}else w!=="$"&&w!=="$!"&&w!=="$?"||b++}p=p.nextSibling}xo=null}}else xo=Uo?gd(p.stateNode.nextSibling):null;return!0}function eP(){for(var p=xo;p;)p=gd(p.nextSibling)}function Y1(){xo=Uo=null,Qn=!1}function tv(p){La===null?La=[p]:La.push(p)}var Oae=k.ReactCurrentBatchConfig;function I6(p,b,w){if(p=w.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var C=w.stateNode}if(!C)throw Error(n(147,p));var N=C,j=""+p;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===j?b.ref:(b=function(Z){var te=N.refs;Z===null?delete te[j]:te[j]=Z},b._stringRef=j,b)}if(typeof p!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,p))}return p}function m8(p,b){throw p=Object.prototype.toString.call(b),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":p))}function tP(p){var b=p._init;return b(p._payload)}function nP(p){function b(le,re){if(p){var de=le.deletions;de===null?(le.deletions=[re],le.flags|=16):de.push(re)}}function w(le,re){if(!p)return null;for(;re!==null;)b(le,re),re=re.sibling;return null}function C(le,re){for(le=new Map;re!==null;)re.key!==null?le.set(re.key,re):le.set(re.index,re),re=re.sibling;return le}function N(le,re){return le=Ad(le,re),le.index=0,le.sibling=null,le}function j(le,re,de){return le.index=de,p?(de=le.alternate,de!==null?(de=de.index,de<re?(le.flags|=2,re):de):(le.flags|=2,re)):(le.flags|=1048576,re)}function Z(le){return p&&le.alternate===null&&(le.flags|=2),le}function te(le,re,de,Be){return re===null||re.tag!==6?(re=Gv(de,le.mode,Be),re.return=le,re):(re=N(re,de),re.return=le,re)}function ne(le,re,de,Be){var ct=de.type;return ct===A?Te(le,re,de.props.children,Be,de.key):re!==null&&(re.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===V&&tP(ct)===re.type)?(Be=N(re,de.props),Be.ref=I6(le,re,de),Be.return=le,Be):(Be=B8(de.type,de.key,de.props,null,le.mode,Be),Be.ref=I6(le,re,de),Be.return=le,Be)}function me(le,re,de,Be){return re===null||re.tag!==4||re.stateNode.containerInfo!==de.containerInfo||re.stateNode.implementation!==de.implementation?(re=Xv(de,le.mode,Be),re.return=le,re):(re=N(re,de.children||[]),re.return=le,re)}function Te(le,re,de,Be,ct){return re===null||re.tag!==7?(re=E0(de,le.mode,Be,ct),re.return=le,re):(re=N(re,de),re.return=le,re)}function Pe(le,re,de){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Gv(""+re,le.mode,de),re.return=le,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case M:return de=B8(re.type,re.key,re.props,null,le.mode,de),de.ref=I6(le,null,re),de.return=le,de;case S:return re=Xv(re,le.mode,de),re.return=le,re;case V:var Be=re._init;return Pe(le,Be(re._payload),de)}if(Kt(re)||W(re))return re=E0(re,le.mode,de,null),re.return=le,re;m8(le,re)}return null}function Ce(le,re,de,Be){var ct=re!==null?re.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return ct!==null?null:te(le,re,""+de,Be);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case M:return de.key===ct?ne(le,re,de,Be):null;case S:return de.key===ct?me(le,re,de,Be):null;case V:return ct=de._init,Ce(le,re,ct(de._payload),Be)}if(Kt(de)||W(de))return ct!==null?null:Te(le,re,de,Be,null);m8(le,de)}return null}function Ze(le,re,de,Be,ct){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return le=le.get(de)||null,te(re,le,""+Be,ct);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case M:return le=le.get(Be.key===null?de:Be.key)||null,ne(re,le,Be,ct);case S:return le=le.get(Be.key===null?de:Be.key)||null,me(re,le,Be,ct);case V:var gt=Be._init;return Ze(le,re,de,gt(Be._payload),ct)}if(Kt(Be)||W(Be))return le=le.get(de)||null,Te(re,le,Be,ct,null);m8(re,Be)}return null}function rt(le,re,de,Be){for(var ct=null,gt=null,bt=re,kt=re=0,mi=null;bt!==null&&kt<de.length;kt++){bt.index>kt?(mi=bt,bt=null):mi=bt.sibling;var fn=Ce(le,bt,de[kt],Be);if(fn===null){bt===null&&(bt=mi);break}p&&bt&&fn.alternate===null&&b(le,bt),re=j(fn,re,kt),gt===null?ct=fn:gt.sibling=fn,gt=fn,bt=mi}if(kt===de.length)return w(le,bt),Qn&&m0(le,kt),ct;if(bt===null){for(;kt<de.length;kt++)bt=Pe(le,de[kt],Be),bt!==null&&(re=j(bt,re,kt),gt===null?ct=bt:gt.sibling=bt,gt=bt);return Qn&&m0(le,kt),ct}for(bt=C(le,bt);kt<de.length;kt++)mi=Ze(bt,le,kt,de[kt],Be),mi!==null&&(p&&mi.alternate!==null&&bt.delete(mi.key===null?kt:mi.key),re=j(mi,re,kt),gt===null?ct=mi:gt.sibling=mi,gt=mi);return p&&bt.forEach(function(Md){return b(le,Md)}),Qn&&m0(le,kt),ct}function ot(le,re,de,Be){var ct=W(de);if(typeof ct!="function")throw Error(n(150));if(de=ct.call(de),de==null)throw Error(n(151));for(var gt=ct=null,bt=re,kt=re=0,mi=null,fn=de.next();bt!==null&&!fn.done;kt++,fn=de.next()){bt.index>kt?(mi=bt,bt=null):mi=bt.sibling;var Md=Ce(le,bt,fn.value,Be);if(Md===null){bt===null&&(bt=mi);break}p&&bt&&Md.alternate===null&&b(le,bt),re=j(Md,re,kt),gt===null?ct=Md:gt.sibling=Md,gt=Md,bt=mi}if(fn.done)return w(le,bt),Qn&&m0(le,kt),ct;if(bt===null){for(;!fn.done;kt++,fn=de.next())fn=Pe(le,fn.value,Be),fn!==null&&(re=j(fn,re,kt),gt===null?ct=fn:gt.sibling=fn,gt=fn);return Qn&&m0(le,kt),ct}for(bt=C(le,bt);!fn.done;kt++,fn=de.next())fn=Ze(bt,le,kt,fn.value,Be),fn!==null&&(p&&fn.alternate!==null&&bt.delete(fn.key===null?kt:fn.key),re=j(fn,re,kt),gt===null?ct=fn:gt.sibling=fn,gt=fn);return p&&bt.forEach(function(mle){return b(le,mle)}),Qn&&m0(le,kt),ct}function _r(le,re,de,Be){if(typeof de=="object"&&de!==null&&de.type===A&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case M:e:{for(var ct=de.key,gt=re;gt!==null;){if(gt.key===ct){if(ct=de.type,ct===A){if(gt.tag===7){w(le,gt.sibling),re=N(gt,de.props.children),re.return=le,le=re;break e}}else if(gt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===V&&tP(ct)===gt.type){w(le,gt.sibling),re=N(gt,de.props),re.ref=I6(le,gt,de),re.return=le,le=re;break e}w(le,gt);break}else b(le,gt);gt=gt.sibling}de.type===A?(re=E0(de.props.children,le.mode,Be,de.key),re.return=le,le=re):(Be=B8(de.type,de.key,de.props,null,le.mode,Be),Be.ref=I6(le,re,de),Be.return=le,le=Be)}return Z(le);case S:e:{for(gt=de.key;re!==null;){if(re.key===gt)if(re.tag===4&&re.stateNode.containerInfo===de.containerInfo&&re.stateNode.implementation===de.implementation){w(le,re.sibling),re=N(re,de.children||[]),re.return=le,le=re;break e}else{w(le,re);break}else b(le,re);re=re.sibling}re=Xv(de,le.mode,Be),re.return=le,le=re}return Z(le);case V:return gt=de._init,_r(le,re,gt(de._payload),Be)}if(Kt(de))return rt(le,re,de,Be);if(W(de))return ot(le,re,de,Be);m8(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,re!==null&&re.tag===6?(w(le,re.sibling),re=N(re,de),re.return=le,le=re):(w(le,re),re=Gv(de,le.mode,Be),re.return=le,le=re),Z(le)):w(le,re)}return _r}var Z1=nP(!0),rP=nP(!1),g8=bd(null),b8=null,q1=null,nv=null;function rv(){nv=q1=b8=null}function iv(p){var b=g8.current;Gn(g8),p._currentValue=b}function sv(p,b,w){for(;p!==null;){var C=p.alternate;if((p.childLanes&b)!==b?(p.childLanes|=b,C!==null&&(C.childLanes|=b)):C!==null&&(C.childLanes&b)!==b&&(C.childLanes|=b),p===w)break;p=p.return}}function Q1(p,b){b8=p,nv=q1=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&b&&(zs=!0),p.firstContext=null)}function Ko(p){var b=p._currentValue;if(nv!==p)if(p={context:p,memoizedValue:b,next:null},q1===null){if(b8===null)throw Error(n(308));q1=p,b8.dependencies={lanes:0,firstContext:p}}else q1=q1.next=p;return b}var g0=null;function ov(p){g0===null?g0=[p]:g0.push(p)}function iP(p,b,w,C){var N=b.interleaved;return N===null?(w.next=w,ov(b)):(w.next=N.next,N.next=w),b.interleaved=w,Vc(p,C)}function Vc(p,b){p.lanes|=b;var w=p.alternate;for(w!==null&&(w.lanes|=b),w=p,p=p.return;p!==null;)p.childLanes|=b,w=p.alternate,w!==null&&(w.childLanes|=b),w=p,p=p.return;return w.tag===3?w.stateNode:null}var xd=!1;function av(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sP(p,b){p=p.updateQueue,b.updateQueue===p&&(b.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Wc(p,b){return{eventTime:p,lane:b,tag:0,payload:null,callback:null,next:null}}function wd(p,b,w){var C=p.updateQueue;if(C===null)return null;if(C=C.shared,sn&2){var N=C.pending;return N===null?b.next=b:(b.next=N.next,N.next=b),C.pending=b,Vc(p,w)}return N=C.interleaved,N===null?(b.next=b,ov(C)):(b.next=N.next,N.next=b),C.interleaved=b,Vc(p,w)}function y8(p,b,w){if(b=b.updateQueue,b!==null&&(b=b.shared,(w&4194240)!==0)){var C=b.lanes;C&=p.pendingLanes,w|=C,b.lanes=w,w7(p,w)}}function oP(p,b){var w=p.updateQueue,C=p.alternate;if(C!==null&&(C=C.updateQueue,w===C)){var N=null,j=null;if(w=w.firstBaseUpdate,w!==null){do{var Z={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};j===null?N=j=Z:j=j.next=Z,w=w.next}while(w!==null);j===null?N=j=b:j=j.next=b}else N=j=b;w={baseState:C.baseState,firstBaseUpdate:N,lastBaseUpdate:j,shared:C.shared,effects:C.effects},p.updateQueue=w;return}p=w.lastBaseUpdate,p===null?w.firstBaseUpdate=b:p.next=b,w.lastBaseUpdate=b}function U8(p,b,w,C){var N=p.updateQueue;xd=!1;var j=N.firstBaseUpdate,Z=N.lastBaseUpdate,te=N.shared.pending;if(te!==null){N.shared.pending=null;var ne=te,me=ne.next;ne.next=null,Z===null?j=me:Z.next=me,Z=ne;var Te=p.alternate;Te!==null&&(Te=Te.updateQueue,te=Te.lastBaseUpdate,te!==Z&&(te===null?Te.firstBaseUpdate=me:te.next=me,Te.lastBaseUpdate=ne))}if(j!==null){var Pe=N.baseState;Z=0,Te=me=ne=null,te=j;do{var Ce=te.lane,Ze=te.eventTime;if((C&Ce)===Ce){Te!==null&&(Te=Te.next={eventTime:Ze,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var rt=p,ot=te;switch(Ce=b,Ze=w,ot.tag){case 1:if(rt=ot.payload,typeof rt=="function"){Pe=rt.call(Ze,Pe,Ce);break e}Pe=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=ot.payload,Ce=typeof rt=="function"?rt.call(Ze,Pe,Ce):rt,Ce==null)break e;Pe=F({},Pe,Ce);break e;case 2:xd=!0}}te.callback!==null&&te.lane!==0&&(p.flags|=64,Ce=N.effects,Ce===null?N.effects=[te]:Ce.push(te))}else Ze={eventTime:Ze,lane:Ce,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Te===null?(me=Te=Ze,ne=Pe):Te=Te.next=Ze,Z|=Ce;if(te=te.next,te===null){if(te=N.shared.pending,te===null)break;Ce=te,te=Ce.next,Ce.next=null,N.lastBaseUpdate=Ce,N.shared.pending=null}}while(!0);if(Te===null&&(ne=Pe),N.baseState=ne,N.firstBaseUpdate=me,N.lastBaseUpdate=Te,b=N.shared.interleaved,b!==null){N=b;do Z|=N.lane,N=N.next;while(N!==b)}else j===null&&(N.shared.lanes=0);U0|=Z,p.lanes=Z,p.memoizedState=Pe}}function aP(p,b,w){if(p=b.effects,b.effects=null,p!==null)for(b=0;b<p.length;b++){var C=p[b],N=C.callback;if(N!==null){if(C.callback=null,C=w,typeof N!="function")throw Error(n(191,N));N.call(C)}}}var N6={},Pl=bd(N6),R6=bd(N6),_6=bd(N6);function b0(p){if(p===N6)throw Error(n(174));return p}function lv(p,b){switch(On(_6,b),On(R6,p),On(Pl,N6),p=b.nodeType,p){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Me(null,"");break;default:p=p===8?b.parentNode:b,b=p.namespaceURI||null,p=p.tagName,b=Me(b,p)}Gn(Pl),On(Pl,b)}function J1(){Gn(Pl),Gn(R6),Gn(_6)}function lP(p){b0(_6.current);var b=b0(Pl.current),w=Me(b,p.type);b!==w&&(On(R6,p),On(Pl,w))}function cv(p){R6.current===p&&(Gn(Pl),Gn(R6))}var fr=bd(0);function x8(p){for(var b=p;b!==null;){if(b.tag===13){var w=b.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if(b.flags&128)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var fv=[];function dv(){for(var p=0;p<fv.length;p++)fv[p]._workInProgressVersionPrimary=null;fv.length=0}var w8=k.ReactCurrentDispatcher,uv=k.ReactCurrentBatchConfig,y0=0,dr=null,ni=null,hi=null,v8=!1,P6=!1,D6=0,jae=0;function Ki(){throw Error(n(321))}function hv(p,b){if(b===null)return!1;for(var w=0;w<b.length&&w<p.length;w++)if(!Da(p[w],b[w]))return!1;return!0}function pv(p,b,w,C,N,j){if(y0=j,dr=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,w8.current=p===null||p.memoizedState===null?$ae:Hae,p=w(C,N),P6){j=0;do{if(P6=!1,D6=0,25<=j)throw Error(n(301));j+=1,hi=ni=null,b.updateQueue=null,w8.current=Vae,p=w(C,N)}while(P6)}if(w8.current=S8,b=ni!==null&&ni.next!==null,y0=0,hi=ni=dr=null,v8=!1,b)throw Error(n(300));return p}function mv(){var p=D6!==0;return D6=0,p}function Dl(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?dr.memoizedState=hi=p:hi=hi.next=p,hi}function Yo(){if(ni===null){var p=dr.alternate;p=p!==null?p.memoizedState:null}else p=ni.next;var b=hi===null?dr.memoizedState:hi.next;if(b!==null)hi=b,ni=p;else{if(p===null)throw Error(n(310));ni=p,p={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},hi===null?dr.memoizedState=hi=p:hi=hi.next=p}return hi}function L6(p,b){return typeof b=="function"?b(p):b}function gv(p){var b=Yo(),w=b.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=p;var C=ni,N=C.baseQueue,j=w.pending;if(j!==null){if(N!==null){var Z=N.next;N.next=j.next,j.next=Z}C.baseQueue=N=j,w.pending=null}if(N!==null){j=N.next,C=C.baseState;var te=Z=null,ne=null,me=j;do{var Te=me.lane;if((y0&Te)===Te)ne!==null&&(ne=ne.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),C=me.hasEagerState?me.eagerState:p(C,me.action);else{var Pe={lane:Te,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};ne===null?(te=ne=Pe,Z=C):ne=ne.next=Pe,dr.lanes|=Te,U0|=Te}me=me.next}while(me!==null&&me!==j);ne===null?Z=C:ne.next=te,Da(C,b.memoizedState)||(zs=!0),b.memoizedState=C,b.baseState=Z,b.baseQueue=ne,w.lastRenderedState=C}if(p=w.interleaved,p!==null){N=p;do j=N.lane,dr.lanes|=j,U0|=j,N=N.next;while(N!==p)}else N===null&&(w.lanes=0);return[b.memoizedState,w.dispatch]}function bv(p){var b=Yo(),w=b.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=p;var C=w.dispatch,N=w.pending,j=b.memoizedState;if(N!==null){w.pending=null;var Z=N=N.next;do j=p(j,Z.action),Z=Z.next;while(Z!==N);Da(j,b.memoizedState)||(zs=!0),b.memoizedState=j,b.baseQueue===null&&(b.baseState=j),w.lastRenderedState=j}return[j,C]}function cP(){}function fP(p,b){var w=dr,C=Yo(),N=b(),j=!Da(C.memoizedState,N);if(j&&(C.memoizedState=N,zs=!0),C=C.queue,yv(hP.bind(null,w,C,p),[p]),C.getSnapshot!==b||j||hi!==null&&hi.memoizedState.tag&1){if(w.flags|=2048,O6(9,uP.bind(null,w,C,N,b),void 0,null),pi===null)throw Error(n(349));y0&30||dP(w,b,N)}return N}function dP(p,b,w){p.flags|=16384,p={getSnapshot:b,value:w},b=dr.updateQueue,b===null?(b={lastEffect:null,stores:null},dr.updateQueue=b,b.stores=[p]):(w=b.stores,w===null?b.stores=[p]:w.push(p))}function uP(p,b,w,C){b.value=w,b.getSnapshot=C,pP(b)&&mP(p)}function hP(p,b,w){return w(function(){pP(b)&&mP(p)})}function pP(p){var b=p.getSnapshot;p=p.value;try{var w=b();return!Da(p,w)}catch{return!0}}function mP(p){var b=Vc(p,1);b!==null&&Fa(b,p,1,-1)}function gP(p){var b=Dl();return typeof p=="function"&&(p=p()),b.memoizedState=b.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:L6,lastRenderedState:p},b.queue=p,p=p.dispatch=zae.bind(null,dr,p),[b.memoizedState,p]}function O6(p,b,w,C){return p={tag:p,create:b,destroy:w,deps:C,next:null},b=dr.updateQueue,b===null?(b={lastEffect:null,stores:null},dr.updateQueue=b,b.lastEffect=p.next=p):(w=b.lastEffect,w===null?b.lastEffect=p.next=p:(C=w.next,w.next=p,p.next=C,b.lastEffect=p)),p}function bP(){return Yo().memoizedState}function E8(p,b,w,C){var N=Dl();dr.flags|=p,N.memoizedState=O6(1|b,w,void 0,C===void 0?null:C)}function k8(p,b,w,C){var N=Yo();C=C===void 0?null:C;var j=void 0;if(ni!==null){var Z=ni.memoizedState;if(j=Z.destroy,C!==null&&hv(C,Z.deps)){N.memoizedState=O6(b,w,j,C);return}}dr.flags|=p,N.memoizedState=O6(1|b,w,j,C)}function yP(p,b){return E8(8390656,8,p,b)}function yv(p,b){return k8(2048,8,p,b)}function UP(p,b){return k8(4,2,p,b)}function xP(p,b){return k8(4,4,p,b)}function wP(p,b){if(typeof b=="function")return p=p(),b(p),function(){b(null)};if(b!=null)return p=p(),b.current=p,function(){b.current=null}}function vP(p,b,w){return w=w!=null?w.concat([p]):null,k8(4,4,wP.bind(null,b,p),w)}function Uv(){}function EP(p,b){var w=Yo();b=b===void 0?null:b;var C=w.memoizedState;return C!==null&&b!==null&&hv(b,C[1])?C[0]:(w.memoizedState=[p,b],p)}function kP(p,b){var w=Yo();b=b===void 0?null:b;var C=w.memoizedState;return C!==null&&b!==null&&hv(b,C[1])?C[0]:(p=p(),w.memoizedState=[p,b],p)}function SP(p,b,w){return y0&21?(Da(w,b)||(w=L1(),dr.lanes|=w,U0|=w,p.baseState=!0),b):(p.baseState&&(p.baseState=!1,zs=!0),p.memoizedState=w)}function Bae(p,b){var w=En;En=w!==0&&4>w?w:4,p(!0);var C=uv.transition;uv.transition={};try{p(!1),b()}finally{En=w,uv.transition=C}}function CP(){return Yo().memoizedState}function Fae(p,b,w){var C=Sd(p);if(w={lane:C,action:w,hasEagerState:!1,eagerState:null,next:null},AP(p))MP(b,w);else if(w=iP(p,b,w,C),w!==null){var N=ys();Fa(w,p,C,N),TP(w,b,C)}}function zae(p,b,w){var C=Sd(p),N={lane:C,action:w,hasEagerState:!1,eagerState:null,next:null};if(AP(p))MP(b,N);else{var j=p.alternate;if(p.lanes===0&&(j===null||j.lanes===0)&&(j=b.lastRenderedReducer,j!==null))try{var Z=b.lastRenderedState,te=j(Z,w);if(N.hasEagerState=!0,N.eagerState=te,Da(te,Z)){var ne=b.interleaved;ne===null?(N.next=N,ov(b)):(N.next=ne.next,ne.next=N),b.interleaved=N;return}}catch{}finally{}w=iP(p,b,N,C),w!==null&&(N=ys(),Fa(w,p,C,N),TP(w,b,C))}}function AP(p){var b=p.alternate;return p===dr||b!==null&&b===dr}function MP(p,b){P6=v8=!0;var w=p.pending;w===null?b.next=b:(b.next=w.next,w.next=b),p.pending=b}function TP(p,b,w){if(w&4194240){var C=b.lanes;C&=p.pendingLanes,w|=C,b.lanes=w,w7(p,w)}}var S8={readContext:Ko,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useInsertionEffect:Ki,useLayoutEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki,useDeferredValue:Ki,useTransition:Ki,useMutableSource:Ki,useSyncExternalStore:Ki,useId:Ki,unstable_isNewReconciler:!1},$ae={readContext:Ko,useCallback:function(p,b){return Dl().memoizedState=[p,b===void 0?null:b],p},useContext:Ko,useEffect:yP,useImperativeHandle:function(p,b,w){return w=w!=null?w.concat([p]):null,E8(4194308,4,wP.bind(null,b,p),w)},useLayoutEffect:function(p,b){return E8(4194308,4,p,b)},useInsertionEffect:function(p,b){return E8(4,2,p,b)},useMemo:function(p,b){var w=Dl();return b=b===void 0?null:b,p=p(),w.memoizedState=[p,b],p},useReducer:function(p,b,w){var C=Dl();return b=w!==void 0?w(b):b,C.memoizedState=C.baseState=b,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:b},C.queue=p,p=p.dispatch=Fae.bind(null,dr,p),[C.memoizedState,p]},useRef:function(p){var b=Dl();return p={current:p},b.memoizedState=p},useState:gP,useDebugValue:Uv,useDeferredValue:function(p){return Dl().memoizedState=p},useTransition:function(){var p=gP(!1),b=p[0];return p=Bae.bind(null,p[1]),Dl().memoizedState=p,[b,p]},useMutableSource:function(){},useSyncExternalStore:function(p,b,w){var C=dr,N=Dl();if(Qn){if(w===void 0)throw Error(n(407));w=w()}else{if(w=b(),pi===null)throw Error(n(349));y0&30||dP(C,b,w)}N.memoizedState=w;var j={value:w,getSnapshot:b};return N.queue=j,yP(hP.bind(null,C,j,p),[p]),C.flags|=2048,O6(9,uP.bind(null,C,j,w,b),void 0,null),w},useId:function(){var p=Dl(),b=pi.identifierPrefix;if(Qn){var w=Hc,C=$c;w=(C&~(1<<32-bo(C)-1)).toString(32)+w,b=":"+b+"R"+w,w=D6++,0<w&&(b+="H"+w.toString(32)),b+=":"}else w=jae++,b=":"+b+"r"+w.toString(32)+":";return p.memoizedState=b},unstable_isNewReconciler:!1},Hae={readContext:Ko,useCallback:EP,useContext:Ko,useEffect:yv,useImperativeHandle:vP,useInsertionEffect:UP,useLayoutEffect:xP,useMemo:kP,useReducer:gv,useRef:bP,useState:function(){return gv(L6)},useDebugValue:Uv,useDeferredValue:function(p){var b=Yo();return SP(b,ni.memoizedState,p)},useTransition:function(){var p=gv(L6)[0],b=Yo().memoizedState;return[p,b]},useMutableSource:cP,useSyncExternalStore:fP,useId:CP,unstable_isNewReconciler:!1},Vae={readContext:Ko,useCallback:EP,useContext:Ko,useEffect:yv,useImperativeHandle:vP,useInsertionEffect:UP,useLayoutEffect:xP,useMemo:kP,useReducer:bv,useRef:bP,useState:function(){return bv(L6)},useDebugValue:Uv,useDeferredValue:function(p){var b=Yo();return ni===null?b.memoizedState=p:SP(b,ni.memoizedState,p)},useTransition:function(){var p=bv(L6)[0],b=Yo().memoizedState;return[p,b]},useMutableSource:cP,useSyncExternalStore:fP,useId:CP,unstable_isNewReconciler:!1};function Oa(p,b){if(p&&p.defaultProps){b=F({},b),p=p.defaultProps;for(var w in p)b[w]===void 0&&(b[w]=p[w]);return b}return b}function xv(p,b,w,C){b=p.memoizedState,w=w(C,b),w=w==null?b:F({},b,w),p.memoizedState=w,p.lanes===0&&(p.updateQueue.baseState=w)}var C8={isMounted:function(p){return(p=p._reactInternals)?Ln(p)===p:!1},enqueueSetState:function(p,b,w){p=p._reactInternals;var C=ys(),N=Sd(p),j=Wc(C,N);j.payload=b,w!=null&&(j.callback=w),b=wd(p,j,N),b!==null&&(Fa(b,p,N,C),y8(b,p,N))},enqueueReplaceState:function(p,b,w){p=p._reactInternals;var C=ys(),N=Sd(p),j=Wc(C,N);j.tag=1,j.payload=b,w!=null&&(j.callback=w),b=wd(p,j,N),b!==null&&(Fa(b,p,N,C),y8(b,p,N))},enqueueForceUpdate:function(p,b){p=p._reactInternals;var w=ys(),C=Sd(p),N=Wc(w,C);N.tag=2,b!=null&&(N.callback=b),b=wd(p,N,C),b!==null&&(Fa(b,p,C,w),y8(b,p,C))}};function IP(p,b,w,C,N,j,Z){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(C,j,Z):b.prototype&&b.prototype.isPureReactComponent?!E6(w,C)||!E6(N,j):!0}function NP(p,b,w){var C=!1,N=yd,j=b.contextType;return typeof j=="object"&&j!==null?j=Ko(j):(N=Fs(b)?h0:Xi.current,C=b.contextTypes,j=(C=C!=null)?G1(p,N):yd),b=new b(w,j),p.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=C8,p.stateNode=b,b._reactInternals=p,C&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=N,p.__reactInternalMemoizedMaskedChildContext=j),b}function RP(p,b,w,C){p=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(w,C),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(w,C),b.state!==p&&C8.enqueueReplaceState(b,b.state,null)}function wv(p,b,w,C){var N=p.stateNode;N.props=w,N.state=p.memoizedState,N.refs={},av(p);var j=b.contextType;typeof j=="object"&&j!==null?N.context=Ko(j):(j=Fs(b)?h0:Xi.current,N.context=G1(p,j)),N.state=p.memoizedState,j=b.getDerivedStateFromProps,typeof j=="function"&&(xv(p,b,j,w),N.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(b=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),b!==N.state&&C8.enqueueReplaceState(N,N.state,null),U8(p,w,N,C),N.state=p.memoizedState),typeof N.componentDidMount=="function"&&(p.flags|=4194308)}function ep(p,b){try{var w="",C=b;do w+=ge(C),C=C.return;while(C);var N=w}catch(j){N=`
Error generating stack: `+j.message+`
`+j.stack}return{value:p,source:b,stack:N,digest:null}}function vv(p,b,w){return{value:p,source:null,stack:w??null,digest:b??null}}function Ev(p,b){try{console.error(b.value)}catch(w){setTimeout(function(){throw w})}}var Wae=typeof WeakMap=="function"?WeakMap:Map;function _P(p,b,w){w=Wc(-1,w),w.tag=3,w.payload={element:null};var C=b.value;return w.callback=function(){_8||(_8=!0,jv=C),Ev(p,b)},w}function PP(p,b,w){w=Wc(-1,w),w.tag=3;var C=p.type.getDerivedStateFromError;if(typeof C=="function"){var N=b.value;w.payload=function(){return C(N)},w.callback=function(){Ev(p,b)}}var j=p.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(w.callback=function(){Ev(p,b),typeof C!="function"&&(Ed===null?Ed=new Set([this]):Ed.add(this));var Z=b.stack;this.componentDidCatch(b.value,{componentStack:Z!==null?Z:""})}),w}function DP(p,b,w){var C=p.pingCache;if(C===null){C=p.pingCache=new Wae;var N=new Set;C.set(b,N)}else N=C.get(b),N===void 0&&(N=new Set,C.set(b,N));N.has(w)||(N.add(w),p=sle.bind(null,p,b,w),b.then(p,p))}function LP(p){do{var b;if((b=p.tag===13)&&(b=p.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return p;p=p.return}while(p!==null);return null}function OP(p,b,w,C,N){return p.mode&1?(p.flags|=65536,p.lanes=N,p):(p===b?p.flags|=65536:(p.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(b=Wc(-1,1),b.tag=2,wd(w,b,1))),w.lanes|=1),p)}var Gae=k.ReactCurrentOwner,zs=!1;function bs(p,b,w,C){b.child=p===null?rP(b,null,w,C):Z1(b,p.child,w,C)}function jP(p,b,w,C,N){w=w.render;var j=b.ref;return Q1(b,N),C=pv(p,b,w,C,j,N),w=mv(),p!==null&&!zs?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~N,Gc(p,b,N)):(Qn&&w&&q7(b),b.flags|=1,bs(p,b,C,N),b.child)}function BP(p,b,w,C,N){if(p===null){var j=w.type;return typeof j=="function"&&!Wv(j)&&j.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(b.tag=15,b.type=j,FP(p,b,j,C,N)):(p=B8(w.type,null,C,b,b.mode,N),p.ref=b.ref,p.return=b,b.child=p)}if(j=p.child,!(p.lanes&N)){var Z=j.memoizedProps;if(w=w.compare,w=w!==null?w:E6,w(Z,C)&&p.ref===b.ref)return Gc(p,b,N)}return b.flags|=1,p=Ad(j,C),p.ref=b.ref,p.return=b,b.child=p}function FP(p,b,w,C,N){if(p!==null){var j=p.memoizedProps;if(E6(j,C)&&p.ref===b.ref)if(zs=!1,b.pendingProps=C=j,(p.lanes&N)!==0)p.flags&131072&&(zs=!0);else return b.lanes=p.lanes,Gc(p,b,N)}return kv(p,b,w,C,N)}function zP(p,b,w){var C=b.pendingProps,N=C.children,j=p!==null?p.memoizedState:null;if(C.mode==="hidden")if(!(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(np,wo),wo|=w;else{if(!(w&1073741824))return p=j!==null?j.baseLanes|w:w,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:p,cachePool:null,transitions:null},b.updateQueue=null,On(np,wo),wo|=p,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=j!==null?j.baseLanes:w,On(np,wo),wo|=C}else j!==null?(C=j.baseLanes|w,b.memoizedState=null):C=w,On(np,wo),wo|=C;return bs(p,b,N,w),b.child}function $P(p,b){var w=b.ref;(p===null&&w!==null||p!==null&&p.ref!==w)&&(b.flags|=512,b.flags|=2097152)}function kv(p,b,w,C,N){var j=Fs(w)?h0:Xi.current;return j=G1(b,j),Q1(b,N),w=pv(p,b,w,C,j,N),C=mv(),p!==null&&!zs?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~N,Gc(p,b,N)):(Qn&&C&&q7(b),b.flags|=1,bs(p,b,w,N),b.child)}function HP(p,b,w,C,N){if(Fs(w)){var j=!0;f8(b)}else j=!1;if(Q1(b,N),b.stateNode===null)M8(p,b),NP(b,w,C),wv(b,w,C,N),C=!0;else if(p===null){var Z=b.stateNode,te=b.memoizedProps;Z.props=te;var ne=Z.context,me=w.contextType;typeof me=="object"&&me!==null?me=Ko(me):(me=Fs(w)?h0:Xi.current,me=G1(b,me));var Te=w.getDerivedStateFromProps,Pe=typeof Te=="function"||typeof Z.getSnapshotBeforeUpdate=="function";Pe||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(te!==C||ne!==me)&&RP(b,Z,C,me),xd=!1;var Ce=b.memoizedState;Z.state=Ce,U8(b,C,Z,N),ne=b.memoizedState,te!==C||Ce!==ne||Bs.current||xd?(typeof Te=="function"&&(xv(b,w,Te,C),ne=b.memoizedState),(te=xd||IP(b,w,te,C,Ce,ne,me))?(Pe||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(b.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=C,b.memoizedState=ne),Z.props=C,Z.state=ne,Z.context=me,C=te):(typeof Z.componentDidMount=="function"&&(b.flags|=4194308),C=!1)}else{Z=b.stateNode,sP(p,b),te=b.memoizedProps,me=b.type===b.elementType?te:Oa(b.type,te),Z.props=me,Pe=b.pendingProps,Ce=Z.context,ne=w.contextType,typeof ne=="object"&&ne!==null?ne=Ko(ne):(ne=Fs(w)?h0:Xi.current,ne=G1(b,ne));var Ze=w.getDerivedStateFromProps;(Te=typeof Ze=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(te!==Pe||Ce!==ne)&&RP(b,Z,C,ne),xd=!1,Ce=b.memoizedState,Z.state=Ce,U8(b,C,Z,N);var rt=b.memoizedState;te!==Pe||Ce!==rt||Bs.current||xd?(typeof Ze=="function"&&(xv(b,w,Ze,C),rt=b.memoizedState),(me=xd||IP(b,w,me,C,Ce,rt,ne)||!1)?(Te||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(C,rt,ne),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(C,rt,ne)),typeof Z.componentDidUpdate=="function"&&(b.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof Z.componentDidUpdate!="function"||te===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||te===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=1024),b.memoizedProps=C,b.memoizedState=rt),Z.props=C,Z.state=rt,Z.context=ne,C=me):(typeof Z.componentDidUpdate!="function"||te===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||te===p.memoizedProps&&Ce===p.memoizedState||(b.flags|=1024),C=!1)}return Sv(p,b,w,C,j,N)}function Sv(p,b,w,C,N,j){$P(p,b);var Z=(b.flags&128)!==0;if(!C&&!Z)return N&&K_(b,w,!1),Gc(p,b,j);C=b.stateNode,Gae.current=b;var te=Z&&typeof w.getDerivedStateFromError!="function"?null:C.render();return b.flags|=1,p!==null&&Z?(b.child=Z1(b,p.child,null,j),b.child=Z1(b,null,te,j)):bs(p,b,te,j),b.memoizedState=C.state,N&&K_(b,w,!0),b.child}function VP(p){var b=p.stateNode;b.pendingContext?G_(p,b.pendingContext,b.pendingContext!==b.context):b.context&&G_(p,b.context,!1),lv(p,b.containerInfo)}function WP(p,b,w,C,N){return Y1(),tv(N),b.flags|=256,bs(p,b,w,C),b.child}var Cv={dehydrated:null,treeContext:null,retryLane:0};function Av(p){return{baseLanes:p,cachePool:null,transitions:null}}function GP(p,b,w){var C=b.pendingProps,N=fr.current,j=!1,Z=(b.flags&128)!==0,te;if((te=Z)||(te=p!==null&&p.memoizedState===null?!1:(N&2)!==0),te?(j=!0,b.flags&=-129):(p===null||p.memoizedState!==null)&&(N|=1),On(fr,N&1),p===null)return ev(b),p=b.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(b.mode&1?p.data==="$!"?b.lanes=8:b.lanes=1073741824:b.lanes=1,null):(Z=C.children,p=C.fallback,j?(C=b.mode,j=b.child,Z={mode:"hidden",children:Z},!(C&1)&&j!==null?(j.childLanes=0,j.pendingProps=Z):j=F8(Z,C,0,null),p=E0(p,C,w,null),j.return=b,p.return=b,j.sibling=p,b.child=j,b.child.memoizedState=Av(w),b.memoizedState=Cv,p):Mv(b,Z));if(N=p.memoizedState,N!==null&&(te=N.dehydrated,te!==null))return Xae(p,b,Z,C,te,N,w);if(j){j=C.fallback,Z=b.mode,N=p.child,te=N.sibling;var ne={mode:"hidden",children:C.children};return!(Z&1)&&b.child!==N?(C=b.child,C.childLanes=0,C.pendingProps=ne,b.deletions=null):(C=Ad(N,ne),C.subtreeFlags=N.subtreeFlags&14680064),te!==null?j=Ad(te,j):(j=E0(j,Z,w,null),j.flags|=2),j.return=b,C.return=b,C.sibling=j,b.child=C,C=j,j=b.child,Z=p.child.memoizedState,Z=Z===null?Av(w):{baseLanes:Z.baseLanes|w,cachePool:null,transitions:Z.transitions},j.memoizedState=Z,j.childLanes=p.childLanes&~w,b.memoizedState=Cv,C}return j=p.child,p=j.sibling,C=Ad(j,{mode:"visible",children:C.children}),!(b.mode&1)&&(C.lanes=w),C.return=b,C.sibling=null,p!==null&&(w=b.deletions,w===null?(b.deletions=[p],b.flags|=16):w.push(p)),b.child=C,b.memoizedState=null,C}function Mv(p,b){return b=F8({mode:"visible",children:b},p.mode,0,null),b.return=p,p.child=b}function A8(p,b,w,C){return C!==null&&tv(C),Z1(b,p.child,null,w),p=Mv(b,b.pendingProps.children),p.flags|=2,b.memoizedState=null,p}function Xae(p,b,w,C,N,j,Z){if(w)return b.flags&256?(b.flags&=-257,C=vv(Error(n(422))),A8(p,b,Z,C)):b.memoizedState!==null?(b.child=p.child,b.flags|=128,null):(j=C.fallback,N=b.mode,C=F8({mode:"visible",children:C.children},N,0,null),j=E0(j,N,Z,null),j.flags|=2,C.return=b,j.return=b,C.sibling=j,b.child=C,b.mode&1&&Z1(b,p.child,null,Z),b.child.memoizedState=Av(Z),b.memoizedState=Cv,j);if(!(b.mode&1))return A8(p,b,Z,null);if(N.data==="$!"){if(C=N.nextSibling&&N.nextSibling.dataset,C)var te=C.dgst;return C=te,j=Error(n(419)),C=vv(j,C,void 0),A8(p,b,Z,C)}if(te=(Z&p.childLanes)!==0,zs||te){if(C=pi,C!==null){switch(Z&-Z){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=N&(C.suspendedLanes|Z)?0:N,N!==0&&N!==j.retryLane&&(j.retryLane=N,Vc(p,N),Fa(C,p,N,-1))}return Vv(),C=vv(Error(n(421))),A8(p,b,Z,C)}return N.data==="$?"?(b.flags|=128,b.child=p.child,b=ole.bind(null,p),N._reactRetry=b,null):(p=j.treeContext,xo=gd(N.nextSibling),Uo=b,Qn=!0,La=null,p!==null&&(Go[Xo++]=$c,Go[Xo++]=Hc,Go[Xo++]=p0,$c=p.id,Hc=p.overflow,p0=b),b=Mv(b,C.children),b.flags|=4096,b)}function XP(p,b,w){p.lanes|=b;var C=p.alternate;C!==null&&(C.lanes|=b),sv(p.return,b,w)}function Tv(p,b,w,C,N){var j=p.memoizedState;j===null?p.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:C,tail:w,tailMode:N}:(j.isBackwards=b,j.rendering=null,j.renderingStartTime=0,j.last=C,j.tail=w,j.tailMode=N)}function KP(p,b,w){var C=b.pendingProps,N=C.revealOrder,j=C.tail;if(bs(p,b,C.children,w),C=fr.current,C&2)C=C&1|2,b.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=b.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&XP(p,w,b);else if(p.tag===19)XP(p,w,b);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===b)break e;for(;p.sibling===null;){if(p.return===null||p.return===b)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}C&=1}if(On(fr,C),!(b.mode&1))b.memoizedState=null;else switch(N){case"forwards":for(w=b.child,N=null;w!==null;)p=w.alternate,p!==null&&x8(p)===null&&(N=w),w=w.sibling;w=N,w===null?(N=b.child,b.child=null):(N=w.sibling,w.sibling=null),Tv(b,!1,N,w,j);break;case"backwards":for(w=null,N=b.child,b.child=null;N!==null;){if(p=N.alternate,p!==null&&x8(p)===null){b.child=N;break}p=N.sibling,N.sibling=w,w=N,N=p}Tv(b,!0,w,null,j);break;case"together":Tv(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function M8(p,b){!(b.mode&1)&&p!==null&&(p.alternate=null,b.alternate=null,b.flags|=2)}function Gc(p,b,w){if(p!==null&&(b.dependencies=p.dependencies),U0|=b.lanes,!(w&b.childLanes))return null;if(p!==null&&b.child!==p.child)throw Error(n(153));if(b.child!==null){for(p=b.child,w=Ad(p,p.pendingProps),b.child=w,w.return=b;p.sibling!==null;)p=p.sibling,w=w.sibling=Ad(p,p.pendingProps),w.return=b;w.sibling=null}return b.child}function Kae(p,b,w){switch(b.tag){case 3:VP(b),Y1();break;case 5:lP(b);break;case 1:Fs(b.type)&&f8(b);break;case 4:lv(b,b.stateNode.containerInfo);break;case 10:var C=b.type._context,N=b.memoizedProps.value;On(g8,C._currentValue),C._currentValue=N;break;case 13:if(C=b.memoizedState,C!==null)return C.dehydrated!==null?(On(fr,fr.current&1),b.flags|=128,null):w&b.child.childLanes?GP(p,b,w):(On(fr,fr.current&1),p=Gc(p,b,w),p!==null?p.sibling:null);On(fr,fr.current&1);break;case 19:if(C=(w&b.childLanes)!==0,p.flags&128){if(C)return KP(p,b,w);b.flags|=128}if(N=b.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),On(fr,fr.current),C)break;return null;case 22:case 23:return b.lanes=0,zP(p,b,w)}return Gc(p,b,w)}var YP,Iv,ZP,qP;YP=function(p,b){for(var w=b.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Iv=function(){},ZP=function(p,b,w,C){var N=p.memoizedProps;if(N!==C){p=b.stateNode,b0(Pl.current);var j=null;switch(w){case"input":N=ve(p,N),C=ve(p,C),j=[];break;case"select":N=F({},N,{value:void 0}),C=F({},C,{value:void 0}),j=[];break;case"textarea":N=Vi(p,N),C=Vi(p,C),j=[];break;default:typeof N.onClick!="function"&&typeof C.onClick=="function"&&(p.onclick=a8)}vn(w,C);var Z;w=null;for(me in N)if(!C.hasOwnProperty(me)&&N.hasOwnProperty(me)&&N[me]!=null)if(me==="style"){var te=N[me];for(Z in te)te.hasOwnProperty(Z)&&(w||(w={}),w[Z]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(i.hasOwnProperty(me)?j||(j=[]):(j=j||[]).push(me,null));for(me in C){var ne=C[me];if(te=N!=null?N[me]:void 0,C.hasOwnProperty(me)&&ne!==te&&(ne!=null||te!=null))if(me==="style")if(te){for(Z in te)!te.hasOwnProperty(Z)||ne&&ne.hasOwnProperty(Z)||(w||(w={}),w[Z]="");for(Z in ne)ne.hasOwnProperty(Z)&&te[Z]!==ne[Z]&&(w||(w={}),w[Z]=ne[Z])}else w||(j||(j=[]),j.push(me,w)),w=ne;else me==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,te=te?te.__html:void 0,ne!=null&&te!==ne&&(j=j||[]).push(me,ne)):me==="children"?typeof ne!="string"&&typeof ne!="number"||(j=j||[]).push(me,""+ne):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(i.hasOwnProperty(me)?(ne!=null&&me==="onScroll"&&Wn("scroll",p),j||te===ne||(j=[])):(j=j||[]).push(me,ne))}w&&(j=j||[]).push("style",w);var me=j;(b.updateQueue=me)&&(b.flags|=4)}},qP=function(p,b,w,C){w!==C&&(b.flags|=4)};function j6(p,b){if(!Qn)switch(p.tailMode){case"hidden":b=p.tail;for(var w=null;b!==null;)b.alternate!==null&&(w=b),b=b.sibling;w===null?p.tail=null:w.sibling=null;break;case"collapsed":w=p.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?b||p.tail===null?p.tail=null:p.tail.sibling=null:C.sibling=null}}function Yi(p){var b=p.alternate!==null&&p.alternate.child===p.child,w=0,C=0;if(b)for(var N=p.child;N!==null;)w|=N.lanes|N.childLanes,C|=N.subtreeFlags&14680064,C|=N.flags&14680064,N.return=p,N=N.sibling;else for(N=p.child;N!==null;)w|=N.lanes|N.childLanes,C|=N.subtreeFlags,C|=N.flags,N.return=p,N=N.sibling;return p.subtreeFlags|=C,p.childLanes=w,b}function Yae(p,b,w){var C=b.pendingProps;switch(Q7(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(b),null;case 1:return Fs(b.type)&&c8(),Yi(b),null;case 3:return C=b.stateNode,J1(),Gn(Bs),Gn(Xi),dv(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(p===null||p.child===null)&&(p8(b)?b.flags|=4:p===null||p.memoizedState.isDehydrated&&!(b.flags&256)||(b.flags|=1024,La!==null&&(zv(La),La=null))),Iv(p,b),Yi(b),null;case 5:cv(b);var N=b0(_6.current);if(w=b.type,p!==null&&b.stateNode!=null)ZP(p,b,w,C,N),p.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!C){if(b.stateNode===null)throw Error(n(166));return Yi(b),null}if(p=b0(Pl.current),p8(b)){C=b.stateNode,w=b.type;var j=b.memoizedProps;switch(C[_l]=b,C[M6]=j,p=(b.mode&1)!==0,w){case"dialog":Wn("cancel",C),Wn("close",C);break;case"iframe":case"object":case"embed":Wn("load",C);break;case"video":case"audio":for(N=0;N<S6.length;N++)Wn(S6[N],C);break;case"source":Wn("error",C);break;case"img":case"image":case"link":Wn("error",C),Wn("load",C);break;case"details":Wn("toggle",C);break;case"input":De(C,j),Wn("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!j.multiple},Wn("invalid",C);break;case"textarea":Ls(C,j),Wn("invalid",C)}vn(w,j),N=null;for(var Z in j)if(j.hasOwnProperty(Z)){var te=j[Z];Z==="children"?typeof te=="string"?C.textContent!==te&&(j.suppressHydrationWarning!==!0&&o8(C.textContent,te,p),N=["children",te]):typeof te=="number"&&C.textContent!==""+te&&(j.suppressHydrationWarning!==!0&&o8(C.textContent,te,p),N=["children",""+te]):i.hasOwnProperty(Z)&&te!=null&&Z==="onScroll"&&Wn("scroll",C)}switch(w){case"input":_e(C),Mt(C,j,!0);break;case"textarea":_e(C),Ti(C);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(C.onclick=a8)}C=N,b.updateQueue=C,C!==null&&(b.flags|=4)}else{Z=N.nodeType===9?N:N.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=ye(w)),p==="http://www.w3.org/1999/xhtml"?w==="script"?(p=Z.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof C.is=="string"?p=Z.createElement(w,{is:C.is}):(p=Z.createElement(w),w==="select"&&(Z=p,C.multiple?Z.multiple=!0:C.size&&(Z.size=C.size))):p=Z.createElementNS(p,w),p[_l]=b,p[M6]=C,YP(p,b,!1,!1),b.stateNode=p;e:{switch(Z=wr(w,C),w){case"dialog":Wn("cancel",p),Wn("close",p),N=C;break;case"iframe":case"object":case"embed":Wn("load",p),N=C;break;case"video":case"audio":for(N=0;N<S6.length;N++)Wn(S6[N],p);N=C;break;case"source":Wn("error",p),N=C;break;case"img":case"image":case"link":Wn("error",p),Wn("load",p),N=C;break;case"details":Wn("toggle",p),N=C;break;case"input":De(p,C),N=ve(p,C),Wn("invalid",p);break;case"option":N=C;break;case"select":p._wrapperState={wasMultiple:!!C.multiple},N=F({},C,{value:void 0}),Wn("invalid",p);break;case"textarea":Ls(p,C),N=Vi(p,C),Wn("invalid",p);break;default:N=C}vn(w,N),te=N;for(j in te)if(te.hasOwnProperty(j)){var ne=te[j];j==="style"?Zt(p,ne):j==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&_t(p,ne)):j==="children"?typeof ne=="string"?(w!=="textarea"||ne!=="")&&Tt(p,ne):typeof ne=="number"&&Tt(p,""+ne):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?ne!=null&&j==="onScroll"&&Wn("scroll",p):ne!=null&&E(p,j,ne,Z))}switch(w){case"input":_e(p),Mt(p,C,!1);break;case"textarea":_e(p),Ti(p);break;case"option":C.value!=null&&p.setAttribute("value",""+ie(C.value));break;case"select":p.multiple=!!C.multiple,j=C.value,j!=null?Zn(p,!!C.multiple,j,!1):C.defaultValue!=null&&Zn(p,!!C.multiple,C.defaultValue,!0);break;default:typeof N.onClick=="function"&&(p.onclick=a8)}switch(w){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(b.flags|=4)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return Yi(b),null;case 6:if(p&&b.stateNode!=null)qP(p,b,p.memoizedProps,C);else{if(typeof C!="string"&&b.stateNode===null)throw Error(n(166));if(w=b0(_6.current),b0(Pl.current),p8(b)){if(C=b.stateNode,w=b.memoizedProps,C[_l]=b,(j=C.nodeValue!==w)&&(p=Uo,p!==null))switch(p.tag){case 3:o8(C.nodeValue,w,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&o8(C.nodeValue,w,(p.mode&1)!==0)}j&&(b.flags|=4)}else C=(w.nodeType===9?w:w.ownerDocument).createTextNode(C),C[_l]=b,b.stateNode=C}return Yi(b),null;case 13:if(Gn(fr),C=b.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Qn&&xo!==null&&b.mode&1&&!(b.flags&128))eP(),Y1(),b.flags|=98560,j=!1;else if(j=p8(b),C!==null&&C.dehydrated!==null){if(p===null){if(!j)throw Error(n(318));if(j=b.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(n(317));j[_l]=b}else Y1(),!(b.flags&128)&&(b.memoizedState=null),b.flags|=4;Yi(b),j=!1}else La!==null&&(zv(La),La=null),j=!0;if(!j)return b.flags&65536?b:null}return b.flags&128?(b.lanes=w,b):(C=C!==null,C!==(p!==null&&p.memoizedState!==null)&&C&&(b.child.flags|=8192,b.mode&1&&(p===null||fr.current&1?ri===0&&(ri=3):Vv())),b.updateQueue!==null&&(b.flags|=4),Yi(b),null);case 4:return J1(),Iv(p,b),p===null&&C6(b.stateNode.containerInfo),Yi(b),null;case 10:return iv(b.type._context),Yi(b),null;case 17:return Fs(b.type)&&c8(),Yi(b),null;case 19:if(Gn(fr),j=b.memoizedState,j===null)return Yi(b),null;if(C=(b.flags&128)!==0,Z=j.rendering,Z===null)if(C)j6(j,!1);else{if(ri!==0||p!==null&&p.flags&128)for(p=b.child;p!==null;){if(Z=x8(p),Z!==null){for(b.flags|=128,j6(j,!1),C=Z.updateQueue,C!==null&&(b.updateQueue=C,b.flags|=4),b.subtreeFlags=0,C=w,w=b.child;w!==null;)j=w,p=C,j.flags&=14680066,Z=j.alternate,Z===null?(j.childLanes=0,j.lanes=p,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=Z.childLanes,j.lanes=Z.lanes,j.child=Z.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=Z.memoizedProps,j.memoizedState=Z.memoizedState,j.updateQueue=Z.updateQueue,j.type=Z.type,p=Z.dependencies,j.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),w=w.sibling;return On(fr,fr.current&1|2),b.child}p=p.sibling}j.tail!==null&&cr()>rp&&(b.flags|=128,C=!0,j6(j,!1),b.lanes=4194304)}else{if(!C)if(p=x8(Z),p!==null){if(b.flags|=128,C=!0,w=p.updateQueue,w!==null&&(b.updateQueue=w,b.flags|=4),j6(j,!0),j.tail===null&&j.tailMode==="hidden"&&!Z.alternate&&!Qn)return Yi(b),null}else 2*cr()-j.renderingStartTime>rp&&w!==1073741824&&(b.flags|=128,C=!0,j6(j,!1),b.lanes=4194304);j.isBackwards?(Z.sibling=b.child,b.child=Z):(w=j.last,w!==null?w.sibling=Z:b.child=Z,j.last=Z)}return j.tail!==null?(b=j.tail,j.rendering=b,j.tail=b.sibling,j.renderingStartTime=cr(),b.sibling=null,w=fr.current,On(fr,C?w&1|2:w&1),b):(Yi(b),null);case 22:case 23:return Hv(),C=b.memoizedState!==null,p!==null&&p.memoizedState!==null!==C&&(b.flags|=8192),C&&b.mode&1?wo&1073741824&&(Yi(b),b.subtreeFlags&6&&(b.flags|=8192)):Yi(b),null;case 24:return null;case 25:return null}throw Error(n(156,b.tag))}function Zae(p,b){switch(Q7(b),b.tag){case 1:return Fs(b.type)&&c8(),p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 3:return J1(),Gn(Bs),Gn(Xi),dv(),p=b.flags,p&65536&&!(p&128)?(b.flags=p&-65537|128,b):null;case 5:return cv(b),null;case 13:if(Gn(fr),p=b.memoizedState,p!==null&&p.dehydrated!==null){if(b.alternate===null)throw Error(n(340));Y1()}return p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 19:return Gn(fr),null;case 4:return J1(),null;case 10:return iv(b.type._context),null;case 22:case 23:return Hv(),null;case 24:return null;default:return null}}var T8=!1,Zi=!1,qae=typeof WeakSet=="function"?WeakSet:Set,Je=null;function tp(p,b){var w=p.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(C){vr(p,b,C)}else w.current=null}function Nv(p,b,w){try{w()}catch(C){vr(p,b,C)}}var QP=!1;function Qae(p,b){if(H7=Yy,p=I_(),D7(p)){if("selectionStart"in p)var w={start:p.selectionStart,end:p.selectionEnd};else e:{w=(w=p.ownerDocument)&&w.defaultView||window;var C=w.getSelection&&w.getSelection();if(C&&C.rangeCount!==0){w=C.anchorNode;var N=C.anchorOffset,j=C.focusNode;C=C.focusOffset;try{w.nodeType,j.nodeType}catch{w=null;break e}var Z=0,te=-1,ne=-1,me=0,Te=0,Pe=p,Ce=null;t:for(;;){for(var Ze;Pe!==w||N!==0&&Pe.nodeType!==3||(te=Z+N),Pe!==j||C!==0&&Pe.nodeType!==3||(ne=Z+C),Pe.nodeType===3&&(Z+=Pe.nodeValue.length),(Ze=Pe.firstChild)!==null;)Ce=Pe,Pe=Ze;for(;;){if(Pe===p)break t;if(Ce===w&&++me===N&&(te=Z),Ce===j&&++Te===C&&(ne=Z),(Ze=Pe.nextSibling)!==null)break;Pe=Ce,Ce=Pe.parentNode}Pe=Ze}w=te===-1||ne===-1?null:{start:te,end:ne}}else w=null}w=w||{start:0,end:0}}else w=null;for(V7={focusedElem:p,selectionRange:w},Yy=!1,Je=b;Je!==null;)if(b=Je,p=b.child,(b.subtreeFlags&1028)!==0&&p!==null)p.return=b,Je=p;else for(;Je!==null;){b=Je;try{var rt=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var ot=rt.memoizedProps,_r=rt.memoizedState,le=b.stateNode,re=le.getSnapshotBeforeUpdate(b.elementType===b.type?ot:Oa(b.type,ot),_r);le.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var de=b.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Be){vr(b,b.return,Be)}if(p=b.sibling,p!==null){p.return=b.return,Je=p;break}Je=b.return}return rt=QP,QP=!1,rt}function B6(p,b,w){var C=b.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var N=C=C.next;do{if((N.tag&p)===p){var j=N.destroy;N.destroy=void 0,j!==void 0&&Nv(b,w,j)}N=N.next}while(N!==C)}}function I8(p,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var w=b=b.next;do{if((w.tag&p)===p){var C=w.create;w.destroy=C()}w=w.next}while(w!==b)}}function Rv(p){var b=p.ref;if(b!==null){var w=p.stateNode;switch(p.tag){case 5:p=w;break;default:p=w}typeof b=="function"?b(p):b.current=p}}function JP(p){var b=p.alternate;b!==null&&(p.alternate=null,JP(b)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(b=p.stateNode,b!==null&&(delete b[_l],delete b[M6],delete b[K7],delete b[Pae],delete b[Dae])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function eD(p){return p.tag===5||p.tag===3||p.tag===4}function tD(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||eD(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function _v(p,b,w){var C=p.tag;if(C===5||C===6)p=p.stateNode,b?w.nodeType===8?w.parentNode.insertBefore(p,b):w.insertBefore(p,b):(w.nodeType===8?(b=w.parentNode,b.insertBefore(p,w)):(b=w,b.appendChild(p)),w=w._reactRootContainer,w!=null||b.onclick!==null||(b.onclick=a8));else if(C!==4&&(p=p.child,p!==null))for(_v(p,b,w),p=p.sibling;p!==null;)_v(p,b,w),p=p.sibling}function Pv(p,b,w){var C=p.tag;if(C===5||C===6)p=p.stateNode,b?w.insertBefore(p,b):w.appendChild(p);else if(C!==4&&(p=p.child,p!==null))for(Pv(p,b,w),p=p.sibling;p!==null;)Pv(p,b,w),p=p.sibling}var Ri=null,ja=!1;function vd(p,b,w){for(w=w.child;w!==null;)nD(p,b,w),w=w.sibling}function nD(p,b,w){if(Wo&&typeof Wo.onCommitFiberUnmount=="function")try{Wo.onCommitFiberUnmount(f0,w)}catch{}switch(w.tag){case 5:Zi||tp(w,b);case 6:var C=Ri,N=ja;Ri=null,vd(p,b,w),Ri=C,ja=N,Ri!==null&&(ja?(p=Ri,w=w.stateNode,p.nodeType===8?p.parentNode.removeChild(w):p.removeChild(w)):Ri.removeChild(w.stateNode));break;case 18:Ri!==null&&(ja?(p=Ri,w=w.stateNode,p.nodeType===8?X7(p.parentNode,w):p.nodeType===1&&X7(p,w),b6(p)):X7(Ri,w.stateNode));break;case 4:C=Ri,N=ja,Ri=w.stateNode.containerInfo,ja=!0,vd(p,b,w),Ri=C,ja=N;break;case 0:case 11:case 14:case 15:if(!Zi&&(C=w.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){N=C=C.next;do{var j=N,Z=j.destroy;j=j.tag,Z!==void 0&&(j&2||j&4)&&Nv(w,b,Z),N=N.next}while(N!==C)}vd(p,b,w);break;case 1:if(!Zi&&(tp(w,b),C=w.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=w.memoizedProps,C.state=w.memoizedState,C.componentWillUnmount()}catch(te){vr(w,b,te)}vd(p,b,w);break;case 21:vd(p,b,w);break;case 22:w.mode&1?(Zi=(C=Zi)||w.memoizedState!==null,vd(p,b,w),Zi=C):vd(p,b,w);break;default:vd(p,b,w)}}function rD(p){var b=p.updateQueue;if(b!==null){p.updateQueue=null;var w=p.stateNode;w===null&&(w=p.stateNode=new qae),b.forEach(function(C){var N=ale.bind(null,p,C);w.has(C)||(w.add(C),C.then(N,N))})}}function Ba(p,b){var w=b.deletions;if(w!==null)for(var C=0;C<w.length;C++){var N=w[C];try{var j=p,Z=b,te=Z;e:for(;te!==null;){switch(te.tag){case 5:Ri=te.stateNode,ja=!1;break e;case 3:Ri=te.stateNode.containerInfo,ja=!0;break e;case 4:Ri=te.stateNode.containerInfo,ja=!0;break e}te=te.return}if(Ri===null)throw Error(n(160));nD(j,Z,N),Ri=null,ja=!1;var ne=N.alternate;ne!==null&&(ne.return=null),N.return=null}catch(me){vr(N,b,me)}}if(b.subtreeFlags&12854)for(b=b.child;b!==null;)iD(b,p),b=b.sibling}function iD(p,b){var w=p.alternate,C=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Ba(b,p),Ll(p),C&4){try{B6(3,p,p.return),I8(3,p)}catch(ot){vr(p,p.return,ot)}try{B6(5,p,p.return)}catch(ot){vr(p,p.return,ot)}}break;case 1:Ba(b,p),Ll(p),C&512&&w!==null&&tp(w,w.return);break;case 5:if(Ba(b,p),Ll(p),C&512&&w!==null&&tp(w,w.return),p.flags&32){var N=p.stateNode;try{Tt(N,"")}catch(ot){vr(p,p.return,ot)}}if(C&4&&(N=p.stateNode,N!=null)){var j=p.memoizedProps,Z=w!==null?w.memoizedProps:j,te=p.type,ne=p.updateQueue;if(p.updateQueue=null,ne!==null)try{te==="input"&&j.type==="radio"&&j.name!=null&&Ae(N,j),wr(te,Z);var me=wr(te,j);for(Z=0;Z<ne.length;Z+=2){var Te=ne[Z],Pe=ne[Z+1];Te==="style"?Zt(N,Pe):Te==="dangerouslySetInnerHTML"?_t(N,Pe):Te==="children"?Tt(N,Pe):E(N,Te,Pe,me)}switch(te){case"input":ut(N,j);break;case"textarea":Os(N,j);break;case"select":var Ce=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!j.multiple;var Ze=j.value;Ze!=null?Zn(N,!!j.multiple,Ze,!1):Ce!==!!j.multiple&&(j.defaultValue!=null?Zn(N,!!j.multiple,j.defaultValue,!0):Zn(N,!!j.multiple,j.multiple?[]:"",!1))}N[M6]=j}catch(ot){vr(p,p.return,ot)}}break;case 6:if(Ba(b,p),Ll(p),C&4){if(p.stateNode===null)throw Error(n(162));N=p.stateNode,j=p.memoizedProps;try{N.nodeValue=j}catch(ot){vr(p,p.return,ot)}}break;case 3:if(Ba(b,p),Ll(p),C&4&&w!==null&&w.memoizedState.isDehydrated)try{b6(b.containerInfo)}catch(ot){vr(p,p.return,ot)}break;case 4:Ba(b,p),Ll(p);break;case 13:Ba(b,p),Ll(p),N=p.child,N.flags&8192&&(j=N.memoizedState!==null,N.stateNode.isHidden=j,!j||N.alternate!==null&&N.alternate.memoizedState!==null||(Ov=cr())),C&4&&rD(p);break;case 22:if(Te=w!==null&&w.memoizedState!==null,p.mode&1?(Zi=(me=Zi)||Te,Ba(b,p),Zi=me):Ba(b,p),Ll(p),C&8192){if(me=p.memoizedState!==null,(p.stateNode.isHidden=me)&&!Te&&p.mode&1)for(Je=p,Te=p.child;Te!==null;){for(Pe=Je=Te;Je!==null;){switch(Ce=Je,Ze=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:B6(4,Ce,Ce.return);break;case 1:tp(Ce,Ce.return);var rt=Ce.stateNode;if(typeof rt.componentWillUnmount=="function"){C=Ce,w=Ce.return;try{b=C,rt.props=b.memoizedProps,rt.state=b.memoizedState,rt.componentWillUnmount()}catch(ot){vr(C,w,ot)}}break;case 5:tp(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){aD(Pe);continue}}Ze!==null?(Ze.return=Ce,Je=Ze):aD(Pe)}Te=Te.sibling}e:for(Te=null,Pe=p;;){if(Pe.tag===5){if(Te===null){Te=Pe;try{N=Pe.stateNode,me?(j=N.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(te=Pe.stateNode,ne=Pe.memoizedProps.style,Z=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,te.style.display=ti("display",Z))}catch(ot){vr(p,p.return,ot)}}}else if(Pe.tag===6){if(Te===null)try{Pe.stateNode.nodeValue=me?"":Pe.memoizedProps}catch(ot){vr(p,p.return,ot)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===p)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===p)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===p)break e;Te===Pe&&(Te=null),Pe=Pe.return}Te===Pe&&(Te=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:Ba(b,p),Ll(p),C&4&&rD(p);break;case 21:break;default:Ba(b,p),Ll(p)}}function Ll(p){var b=p.flags;if(b&2){try{e:{for(var w=p.return;w!==null;){if(eD(w)){var C=w;break e}w=w.return}throw Error(n(160))}switch(C.tag){case 5:var N=C.stateNode;C.flags&32&&(Tt(N,""),C.flags&=-33);var j=tD(p);Pv(p,j,N);break;case 3:case 4:var Z=C.stateNode.containerInfo,te=tD(p);_v(p,te,Z);break;default:throw Error(n(161))}}catch(ne){vr(p,p.return,ne)}p.flags&=-3}b&4096&&(p.flags&=-4097)}function Jae(p,b,w){Je=p,sD(p)}function sD(p,b,w){for(var C=(p.mode&1)!==0;Je!==null;){var N=Je,j=N.child;if(N.tag===22&&C){var Z=N.memoizedState!==null||T8;if(!Z){var te=N.alternate,ne=te!==null&&te.memoizedState!==null||Zi;te=T8;var me=Zi;if(T8=Z,(Zi=ne)&&!me)for(Je=N;Je!==null;)Z=Je,ne=Z.child,Z.tag===22&&Z.memoizedState!==null?lD(N):ne!==null?(ne.return=Z,Je=ne):lD(N);for(;j!==null;)Je=j,sD(j),j=j.sibling;Je=N,T8=te,Zi=me}oD(p)}else N.subtreeFlags&8772&&j!==null?(j.return=N,Je=j):oD(p)}}function oD(p){for(;Je!==null;){var b=Je;if(b.flags&8772){var w=b.alternate;try{if(b.flags&8772)switch(b.tag){case 0:case 11:case 15:Zi||I8(5,b);break;case 1:var C=b.stateNode;if(b.flags&4&&!Zi)if(w===null)C.componentDidMount();else{var N=b.elementType===b.type?w.memoizedProps:Oa(b.type,w.memoizedProps);C.componentDidUpdate(N,w.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var j=b.updateQueue;j!==null&&aP(b,j,C);break;case 3:var Z=b.updateQueue;if(Z!==null){if(w=null,b.child!==null)switch(b.child.tag){case 5:w=b.child.stateNode;break;case 1:w=b.child.stateNode}aP(b,Z,w)}break;case 5:var te=b.stateNode;if(w===null&&b.flags&4){w=te;var ne=b.memoizedProps;switch(b.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&w.focus();break;case"img":ne.src&&(w.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(b.memoizedState===null){var me=b.alternate;if(me!==null){var Te=me.memoizedState;if(Te!==null){var Pe=Te.dehydrated;Pe!==null&&b6(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Zi||b.flags&512&&Rv(b)}catch(Ce){vr(b,b.return,Ce)}}if(b===p){Je=null;break}if(w=b.sibling,w!==null){w.return=b.return,Je=w;break}Je=b.return}}function aD(p){for(;Je!==null;){var b=Je;if(b===p){Je=null;break}var w=b.sibling;if(w!==null){w.return=b.return,Je=w;break}Je=b.return}}function lD(p){for(;Je!==null;){var b=Je;try{switch(b.tag){case 0:case 11:case 15:var w=b.return;try{I8(4,b)}catch(ne){vr(b,w,ne)}break;case 1:var C=b.stateNode;if(typeof C.componentDidMount=="function"){var N=b.return;try{C.componentDidMount()}catch(ne){vr(b,N,ne)}}var j=b.return;try{Rv(b)}catch(ne){vr(b,j,ne)}break;case 5:var Z=b.return;try{Rv(b)}catch(ne){vr(b,Z,ne)}}}catch(ne){vr(b,b.return,ne)}if(b===p){Je=null;break}var te=b.sibling;if(te!==null){te.return=b.return,Je=te;break}Je=b.return}}var ele=Math.ceil,N8=k.ReactCurrentDispatcher,Dv=k.ReactCurrentOwner,Zo=k.ReactCurrentBatchConfig,sn=0,pi=null,Vr=null,_i=0,wo=0,np=bd(0),ri=0,F6=null,U0=0,R8=0,Lv=0,z6=null,$s=null,Ov=0,rp=1/0,Xc=null,_8=!1,jv=null,Ed=null,P8=!1,kd=null,D8=0,$6=0,Bv=null,L8=-1,O8=0;function ys(){return sn&6?cr():L8!==-1?L8:L8=cr()}function Sd(p){return p.mode&1?sn&2&&_i!==0?_i&-_i:Oae.transition!==null?(O8===0&&(O8=L1()),O8):(p=En,p!==0||(p=window.event,p=p===void 0?16:f_(p.type)),p):1}function Fa(p,b,w,C){if(50<$6)throw $6=0,Bv=null,Error(n(185));d0(p,w,C),(!(sn&2)||p!==pi)&&(p===pi&&(!(sn&2)&&(R8|=w),ri===4&&Cd(p,_i)),Hs(p,C),w===1&&sn===0&&!(b.mode&1)&&(rp=cr()+500,d8&&Ud()))}function Hs(p,b){var w=p.callbackNode;x7(p,b);var C=D1(p,p===pi?_i:0);if(C===0)w!==null&&zy(w),p.callbackNode=null,p.callbackPriority=0;else if(b=C&-C,p.callbackPriority!==b){if(w!=null&&zy(w),b===1)p.tag===0?Lae(fD.bind(null,p)):Y_(fD.bind(null,p)),Rae(function(){!(sn&6)&&Ud()}),w=null;else{switch(n_(C)){case 1:w=f6;break;case 4:w=Hy;break;case 16:w=R1;break;case 536870912:w=Vy;break;default:w=R1}w=yD(w,cD.bind(null,p))}p.callbackPriority=b,p.callbackNode=w}}function cD(p,b){if(L8=-1,O8=0,sn&6)throw Error(n(327));var w=p.callbackNode;if(ip()&&p.callbackNode!==w)return null;var C=D1(p,p===pi?_i:0);if(C===0)return null;if(C&30||C&p.expiredLanes||b)b=j8(p,C);else{b=C;var N=sn;sn|=2;var j=uD();(pi!==p||_i!==b)&&(Xc=null,rp=cr()+500,w0(p,b));do try{rle();break}catch(te){dD(p,te)}while(!0);rv(),N8.current=j,sn=N,Vr!==null?b=0:(pi=null,_i=0,b=ri)}if(b!==0){if(b===2&&(N=d6(p),N!==0&&(C=N,b=Fv(p,N))),b===1)throw w=F6,w0(p,0),Cd(p,C),Hs(p,cr()),w;if(b===6)Cd(p,C);else{if(N=p.current.alternate,!(C&30)&&!tle(N)&&(b=j8(p,C),b===2&&(j=d6(p),j!==0&&(C=j,b=Fv(p,j))),b===1))throw w=F6,w0(p,0),Cd(p,C),Hs(p,cr()),w;switch(p.finishedWork=N,p.finishedLanes=C,b){case 0:case 1:throw Error(n(345));case 2:v0(p,$s,Xc);break;case 3:if(Cd(p,C),(C&130023424)===C&&(b=Ov+500-cr(),10<b)){if(D1(p,0)!==0)break;if(N=p.suspendedLanes,(N&C)!==C){ys(),p.pingedLanes|=p.suspendedLanes&N;break}p.timeoutHandle=G7(v0.bind(null,p,$s,Xc),b);break}v0(p,$s,Xc);break;case 4:if(Cd(p,C),(C&4194240)===C)break;for(b=p.eventTimes,N=-1;0<C;){var Z=31-bo(C);j=1<<Z,Z=b[Z],Z>N&&(N=Z),C&=~j}if(C=N,C=cr()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*ele(C/1960))-C,10<C){p.timeoutHandle=G7(v0.bind(null,p,$s,Xc),C);break}v0(p,$s,Xc);break;case 5:v0(p,$s,Xc);break;default:throw Error(n(329))}}}return Hs(p,cr()),p.callbackNode===w?cD.bind(null,p):null}function Fv(p,b){var w=z6;return p.current.memoizedState.isDehydrated&&(w0(p,b).flags|=256),p=j8(p,b),p!==2&&(b=$s,$s=w,b!==null&&zv(b)),p}function zv(p){$s===null?$s=p:$s.push.apply($s,p)}function tle(p){for(var b=p;;){if(b.flags&16384){var w=b.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var C=0;C<w.length;C++){var N=w[C],j=N.getSnapshot;N=N.value;try{if(!Da(j(),N))return!1}catch{return!1}}}if(w=b.child,b.subtreeFlags&16384&&w!==null)w.return=b,b=w;else{if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function Cd(p,b){for(b&=~Lv,b&=~R8,p.suspendedLanes|=b,p.pingedLanes&=~b,p=p.expirationTimes;0<b;){var w=31-bo(b),C=1<<w;p[w]=-1,b&=~C}}function fD(p){if(sn&6)throw Error(n(327));ip();var b=D1(p,0);if(!(b&1))return Hs(p,cr()),null;var w=j8(p,b);if(p.tag!==0&&w===2){var C=d6(p);C!==0&&(b=C,w=Fv(p,C))}if(w===1)throw w=F6,w0(p,0),Cd(p,b),Hs(p,cr()),w;if(w===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=b,v0(p,$s,Xc),Hs(p,cr()),null}function $v(p,b){var w=sn;sn|=1;try{return p(b)}finally{sn=w,sn===0&&(rp=cr()+500,d8&&Ud())}}function x0(p){kd!==null&&kd.tag===0&&!(sn&6)&&ip();var b=sn;sn|=1;var w=Zo.transition,C=En;try{if(Zo.transition=null,En=1,p)return p()}finally{En=C,Zo.transition=w,sn=b,!(sn&6)&&Ud()}}function Hv(){wo=np.current,Gn(np)}function w0(p,b){p.finishedWork=null,p.finishedLanes=0;var w=p.timeoutHandle;if(w!==-1&&(p.timeoutHandle=-1,Nae(w)),Vr!==null)for(w=Vr.return;w!==null;){var C=w;switch(Q7(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&c8();break;case 3:J1(),Gn(Bs),Gn(Xi),dv();break;case 5:cv(C);break;case 4:J1();break;case 13:Gn(fr);break;case 19:Gn(fr);break;case 10:iv(C.type._context);break;case 22:case 23:Hv()}w=w.return}if(pi=p,Vr=p=Ad(p.current,null),_i=wo=b,ri=0,F6=null,Lv=R8=U0=0,$s=z6=null,g0!==null){for(b=0;b<g0.length;b++)if(w=g0[b],C=w.interleaved,C!==null){w.interleaved=null;var N=C.next,j=w.pending;if(j!==null){var Z=j.next;j.next=N,C.next=Z}w.pending=C}g0=null}return p}function dD(p,b){do{var w=Vr;try{if(rv(),w8.current=S8,v8){for(var C=dr.memoizedState;C!==null;){var N=C.queue;N!==null&&(N.pending=null),C=C.next}v8=!1}if(y0=0,hi=ni=dr=null,P6=!1,D6=0,Dv.current=null,w===null||w.return===null){ri=1,F6=b,Vr=null;break}e:{var j=p,Z=w.return,te=w,ne=b;if(b=_i,te.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var me=ne,Te=te,Pe=Te.tag;if(!(Te.mode&1)&&(Pe===0||Pe===11||Pe===15)){var Ce=Te.alternate;Ce?(Te.updateQueue=Ce.updateQueue,Te.memoizedState=Ce.memoizedState,Te.lanes=Ce.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var Ze=LP(Z);if(Ze!==null){Ze.flags&=-257,OP(Ze,Z,te,j,b),Ze.mode&1&&DP(j,me,b),b=Ze,ne=me;var rt=b.updateQueue;if(rt===null){var ot=new Set;ot.add(ne),b.updateQueue=ot}else rt.add(ne);break e}else{if(!(b&1)){DP(j,me,b),Vv();break e}ne=Error(n(426))}}else if(Qn&&te.mode&1){var _r=LP(Z);if(_r!==null){!(_r.flags&65536)&&(_r.flags|=256),OP(_r,Z,te,j,b),tv(ep(ne,te));break e}}j=ne=ep(ne,te),ri!==4&&(ri=2),z6===null?z6=[j]:z6.push(j),j=Z;do{switch(j.tag){case 3:j.flags|=65536,b&=-b,j.lanes|=b;var le=_P(j,ne,b);oP(j,le);break e;case 1:te=ne;var re=j.type,de=j.stateNode;if(!(j.flags&128)&&(typeof re.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(Ed===null||!Ed.has(de)))){j.flags|=65536,b&=-b,j.lanes|=b;var Be=PP(j,te,b);oP(j,Be);break e}}j=j.return}while(j!==null)}pD(w)}catch(ct){b=ct,Vr===w&&w!==null&&(Vr=w=w.return);continue}break}while(!0)}function uD(){var p=N8.current;return N8.current=S8,p===null?S8:p}function Vv(){(ri===0||ri===3||ri===2)&&(ri=4),pi===null||!(U0&268435455)&&!(R8&268435455)||Cd(pi,_i)}function j8(p,b){var w=sn;sn|=2;var C=uD();(pi!==p||_i!==b)&&(Xc=null,w0(p,b));do try{nle();break}catch(N){dD(p,N)}while(!0);if(rv(),sn=w,N8.current=C,Vr!==null)throw Error(n(261));return pi=null,_i=0,ri}function nle(){for(;Vr!==null;)hD(Vr)}function rle(){for(;Vr!==null&&!h7();)hD(Vr)}function hD(p){var b=bD(p.alternate,p,wo);p.memoizedProps=p.pendingProps,b===null?pD(p):Vr=b,Dv.current=null}function pD(p){var b=p;do{var w=b.alternate;if(p=b.return,b.flags&32768){if(w=Zae(w,b),w!==null){w.flags&=32767,Vr=w;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{ri=6,Vr=null;return}}else if(w=Yae(w,b,wo),w!==null){Vr=w;return}if(b=b.sibling,b!==null){Vr=b;return}Vr=b=p}while(b!==null);ri===0&&(ri=5)}function v0(p,b,w){var C=En,N=Zo.transition;try{Zo.transition=null,En=1,ile(p,b,w,C)}finally{Zo.transition=N,En=C}return null}function ile(p,b,w,C){do ip();while(kd!==null);if(sn&6)throw Error(n(327));w=p.finishedWork;var N=p.finishedLanes;if(w===null)return null;if(p.finishedWork=null,p.finishedLanes=0,w===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var j=w.lanes|w.childLanes;if(Gy(p,j),p===pi&&(Vr=pi=null,_i=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||P8||(P8=!0,yD(R1,function(){return ip(),null})),j=(w.flags&15990)!==0,w.subtreeFlags&15990||j){j=Zo.transition,Zo.transition=null;var Z=En;En=1;var te=sn;sn|=4,Dv.current=null,Qae(p,w),iD(w,p),kae(V7),Yy=!!H7,V7=H7=null,p.current=w,Jae(w),$y(),sn=te,En=Z,Zo.transition=j}else p.current=w;if(P8&&(P8=!1,kd=p,D8=N),j=p.pendingLanes,j===0&&(Ed=null),g7(w.stateNode),Hs(p,cr()),b!==null)for(C=p.onRecoverableError,w=0;w<b.length;w++)N=b[w],C(N.value,{componentStack:N.stack,digest:N.digest});if(_8)throw _8=!1,p=jv,jv=null,p;return D8&1&&p.tag!==0&&ip(),j=p.pendingLanes,j&1?p===Bv?$6++:($6=0,Bv=p):$6=0,Ud(),null}function ip(){if(kd!==null){var p=n_(D8),b=Zo.transition,w=En;try{if(Zo.transition=null,En=16>p?16:p,kd===null)var C=!1;else{if(p=kd,kd=null,D8=0,sn&6)throw Error(n(331));var N=sn;for(sn|=4,Je=p.current;Je!==null;){var j=Je,Z=j.child;if(Je.flags&16){var te=j.deletions;if(te!==null){for(var ne=0;ne<te.length;ne++){var me=te[ne];for(Je=me;Je!==null;){var Te=Je;switch(Te.tag){case 0:case 11:case 15:B6(8,Te,j)}var Pe=Te.child;if(Pe!==null)Pe.return=Te,Je=Pe;else for(;Je!==null;){Te=Je;var Ce=Te.sibling,Ze=Te.return;if(JP(Te),Te===me){Je=null;break}if(Ce!==null){Ce.return=Ze,Je=Ce;break}Je=Ze}}}var rt=j.alternate;if(rt!==null){var ot=rt.child;if(ot!==null){rt.child=null;do{var _r=ot.sibling;ot.sibling=null,ot=_r}while(ot!==null)}}Je=j}}if(j.subtreeFlags&2064&&Z!==null)Z.return=j,Je=Z;else e:for(;Je!==null;){if(j=Je,j.flags&2048)switch(j.tag){case 0:case 11:case 15:B6(9,j,j.return)}var le=j.sibling;if(le!==null){le.return=j.return,Je=le;break e}Je=j.return}}var re=p.current;for(Je=re;Je!==null;){Z=Je;var de=Z.child;if(Z.subtreeFlags&2064&&de!==null)de.return=Z,Je=de;else e:for(Z=re;Je!==null;){if(te=Je,te.flags&2048)try{switch(te.tag){case 0:case 11:case 15:I8(9,te)}}catch(ct){vr(te,te.return,ct)}if(te===Z){Je=null;break e}var Be=te.sibling;if(Be!==null){Be.return=te.return,Je=Be;break e}Je=te.return}}if(sn=N,Ud(),Wo&&typeof Wo.onPostCommitFiberRoot=="function")try{Wo.onPostCommitFiberRoot(f0,p)}catch{}C=!0}return C}finally{En=w,Zo.transition=b}}return!1}function mD(p,b,w){b=ep(w,b),b=_P(p,b,1),p=wd(p,b,1),b=ys(),p!==null&&(d0(p,1,b),Hs(p,b))}function vr(p,b,w){if(p.tag===3)mD(p,p,w);else for(;b!==null;){if(b.tag===3){mD(b,p,w);break}else if(b.tag===1){var C=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Ed===null||!Ed.has(C))){p=ep(w,p),p=PP(b,p,1),b=wd(b,p,1),p=ys(),b!==null&&(d0(b,1,p),Hs(b,p));break}}b=b.return}}function sle(p,b,w){var C=p.pingCache;C!==null&&C.delete(b),b=ys(),p.pingedLanes|=p.suspendedLanes&w,pi===p&&(_i&w)===w&&(ri===4||ri===3&&(_i&130023424)===_i&&500>cr()-Ov?w0(p,0):Lv|=w),Hs(p,b)}function gD(p,b){b===0&&(p.mode&1?(b=P1,P1<<=1,!(P1&130023424)&&(P1=4194304)):b=1);var w=ys();p=Vc(p,b),p!==null&&(d0(p,b,w),Hs(p,w))}function ole(p){var b=p.memoizedState,w=0;b!==null&&(w=b.retryLane),gD(p,w)}function ale(p,b){var w=0;switch(p.tag){case 13:var C=p.stateNode,N=p.memoizedState;N!==null&&(w=N.retryLane);break;case 19:C=p.stateNode;break;default:throw Error(n(314))}C!==null&&C.delete(b),gD(p,w)}var bD;bD=function(p,b,w){if(p!==null)if(p.memoizedProps!==b.pendingProps||Bs.current)zs=!0;else{if(!(p.lanes&w)&&!(b.flags&128))return zs=!1,Kae(p,b,w);zs=!!(p.flags&131072)}else zs=!1,Qn&&b.flags&1048576&&Z_(b,h8,b.index);switch(b.lanes=0,b.tag){case 2:var C=b.type;M8(p,b),p=b.pendingProps;var N=G1(b,Xi.current);Q1(b,w),N=pv(null,b,C,p,N,w);var j=mv();return b.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,Fs(C)?(j=!0,f8(b)):j=!1,b.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,av(b),N.updater=C8,b.stateNode=N,N._reactInternals=b,wv(b,C,p,w),b=Sv(null,b,C,!0,j,w)):(b.tag=0,Qn&&j&&q7(b),bs(null,b,N,w),b=b.child),b;case 16:C=b.elementType;e:{switch(M8(p,b),p=b.pendingProps,N=C._init,C=N(C._payload),b.type=C,N=b.tag=cle(C),p=Oa(C,p),N){case 0:b=kv(null,b,C,p,w);break e;case 1:b=HP(null,b,C,p,w);break e;case 11:b=jP(null,b,C,p,w);break e;case 14:b=BP(null,b,C,Oa(C.type,p),w);break e}throw Error(n(306,C,""))}return b;case 0:return C=b.type,N=b.pendingProps,N=b.elementType===C?N:Oa(C,N),kv(p,b,C,N,w);case 1:return C=b.type,N=b.pendingProps,N=b.elementType===C?N:Oa(C,N),HP(p,b,C,N,w);case 3:e:{if(VP(b),p===null)throw Error(n(387));C=b.pendingProps,j=b.memoizedState,N=j.element,sP(p,b),U8(b,C,null,w);var Z=b.memoizedState;if(C=Z.element,j.isDehydrated)if(j={element:C,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},b.updateQueue.baseState=j,b.memoizedState=j,b.flags&256){N=ep(Error(n(423)),b),b=WP(p,b,C,w,N);break e}else if(C!==N){N=ep(Error(n(424)),b),b=WP(p,b,C,w,N);break e}else for(xo=gd(b.stateNode.containerInfo.firstChild),Uo=b,Qn=!0,La=null,w=rP(b,null,C,w),b.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Y1(),C===N){b=Gc(p,b,w);break e}bs(p,b,C,w)}b=b.child}return b;case 5:return lP(b),p===null&&ev(b),C=b.type,N=b.pendingProps,j=p!==null?p.memoizedProps:null,Z=N.children,W7(C,N)?Z=null:j!==null&&W7(C,j)&&(b.flags|=32),$P(p,b),bs(p,b,Z,w),b.child;case 6:return p===null&&ev(b),null;case 13:return GP(p,b,w);case 4:return lv(b,b.stateNode.containerInfo),C=b.pendingProps,p===null?b.child=Z1(b,null,C,w):bs(p,b,C,w),b.child;case 11:return C=b.type,N=b.pendingProps,N=b.elementType===C?N:Oa(C,N),jP(p,b,C,N,w);case 7:return bs(p,b,b.pendingProps,w),b.child;case 8:return bs(p,b,b.pendingProps.children,w),b.child;case 12:return bs(p,b,b.pendingProps.children,w),b.child;case 10:e:{if(C=b.type._context,N=b.pendingProps,j=b.memoizedProps,Z=N.value,On(g8,C._currentValue),C._currentValue=Z,j!==null)if(Da(j.value,Z)){if(j.children===N.children&&!Bs.current){b=Gc(p,b,w);break e}}else for(j=b.child,j!==null&&(j.return=b);j!==null;){var te=j.dependencies;if(te!==null){Z=j.child;for(var ne=te.firstContext;ne!==null;){if(ne.context===C){if(j.tag===1){ne=Wc(-1,w&-w),ne.tag=2;var me=j.updateQueue;if(me!==null){me=me.shared;var Te=me.pending;Te===null?ne.next=ne:(ne.next=Te.next,Te.next=ne),me.pending=ne}}j.lanes|=w,ne=j.alternate,ne!==null&&(ne.lanes|=w),sv(j.return,w,b),te.lanes|=w;break}ne=ne.next}}else if(j.tag===10)Z=j.type===b.type?null:j.child;else if(j.tag===18){if(Z=j.return,Z===null)throw Error(n(341));Z.lanes|=w,te=Z.alternate,te!==null&&(te.lanes|=w),sv(Z,w,b),Z=j.sibling}else Z=j.child;if(Z!==null)Z.return=j;else for(Z=j;Z!==null;){if(Z===b){Z=null;break}if(j=Z.sibling,j!==null){j.return=Z.return,Z=j;break}Z=Z.return}j=Z}bs(p,b,N.children,w),b=b.child}return b;case 9:return N=b.type,C=b.pendingProps.children,Q1(b,w),N=Ko(N),C=C(N),b.flags|=1,bs(p,b,C,w),b.child;case 14:return C=b.type,N=Oa(C,b.pendingProps),N=Oa(C.type,N),BP(p,b,C,N,w);case 15:return FP(p,b,b.type,b.pendingProps,w);case 17:return C=b.type,N=b.pendingProps,N=b.elementType===C?N:Oa(C,N),M8(p,b),b.tag=1,Fs(C)?(p=!0,f8(b)):p=!1,Q1(b,w),NP(b,C,N),wv(b,C,N,w),Sv(null,b,C,!0,p,w);case 19:return KP(p,b,w);case 22:return zP(p,b,w)}throw Error(n(156,b.tag))};function yD(p,b){return Fy(p,b)}function lle(p,b,w,C){this.tag=p,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qo(p,b,w,C){return new lle(p,b,w,C)}function Wv(p){return p=p.prototype,!(!p||!p.isReactComponent)}function cle(p){if(typeof p=="function")return Wv(p)?1:0;if(p!=null){if(p=p.$$typeof,p===P)return 11;if(p===B)return 14}return 2}function Ad(p,b){var w=p.alternate;return w===null?(w=qo(p.tag,b,p.key,p.mode),w.elementType=p.elementType,w.type=p.type,w.stateNode=p.stateNode,w.alternate=p,p.alternate=w):(w.pendingProps=b,w.type=p.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=p.flags&14680064,w.childLanes=p.childLanes,w.lanes=p.lanes,w.child=p.child,w.memoizedProps=p.memoizedProps,w.memoizedState=p.memoizedState,w.updateQueue=p.updateQueue,b=p.dependencies,w.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},w.sibling=p.sibling,w.index=p.index,w.ref=p.ref,w}function B8(p,b,w,C,N,j){var Z=2;if(C=p,typeof p=="function")Wv(p)&&(Z=1);else if(typeof p=="string")Z=5;else e:switch(p){case A:return E0(w.children,N,j,b);case I:Z=8,N|=8;break;case R:return p=qo(12,w,b,N|2),p.elementType=R,p.lanes=j,p;case $:return p=qo(13,w,b,N),p.elementType=$,p.lanes=j,p;case L:return p=qo(19,w,b,N),p.elementType=L,p.lanes=j,p;case z:return F8(w,N,j,b);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case D:Z=10;break e;case _:Z=9;break e;case P:Z=11;break e;case B:Z=14;break e;case V:Z=16,C=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return b=qo(Z,w,b,N),b.elementType=p,b.type=C,b.lanes=j,b}function E0(p,b,w,C){return p=qo(7,p,C,b),p.lanes=w,p}function F8(p,b,w,C){return p=qo(22,p,C,b),p.elementType=z,p.lanes=w,p.stateNode={isHidden:!1},p}function Gv(p,b,w){return p=qo(6,p,null,b),p.lanes=w,p}function Xv(p,b,w){return b=qo(4,p.children!==null?p.children:[],p.key,b),b.lanes=w,b.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},b}function fle(p,b,w,C,N){this.tag=b,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=u6(0),this.expirationTimes=u6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u6(0),this.identifierPrefix=C,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function Kv(p,b,w,C,N,j,Z,te,ne){return p=new fle(p,b,w,te,ne),b===1?(b=1,j===!0&&(b|=8)):b=0,j=qo(3,null,null,b),p.current=j,j.stateNode=p,j.memoizedState={element:C,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},av(j),p}function dle(p,b,w){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:C==null?null:""+C,children:p,containerInfo:b,implementation:w}}function UD(p){if(!p)return yd;p=p._reactInternals;e:{if(Ln(p)!==p||p.tag!==1)throw Error(n(170));var b=p;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if(Fs(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(n(171))}if(p.tag===1){var w=p.type;if(Fs(w))return X_(p,w,b)}return b}function xD(p,b,w,C,N,j,Z,te,ne){return p=Kv(w,C,!0,p,N,j,Z,te,ne),p.context=UD(null),w=p.current,C=ys(),N=Sd(w),j=Wc(C,N),j.callback=b??null,wd(w,j,N),p.current.lanes=N,d0(p,N,C),Hs(p,C),p}function z8(p,b,w,C){var N=b.current,j=ys(),Z=Sd(N);return w=UD(w),b.context===null?b.context=w:b.pendingContext=w,b=Wc(j,Z),b.payload={element:p},C=C===void 0?null:C,C!==null&&(b.callback=C),p=wd(N,b,Z),p!==null&&(Fa(p,N,Z,j),y8(p,N,Z)),Z}function $8(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function wD(p,b){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var w=p.retryLane;p.retryLane=w!==0&&w<b?w:b}}function Yv(p,b){wD(p,b),(p=p.alternate)&&wD(p,b)}var vD=typeof reportError=="function"?reportError:function(p){console.error(p)};function Zv(p){this._internalRoot=p}H8.prototype.render=Zv.prototype.render=function(p){var b=this._internalRoot;if(b===null)throw Error(n(409));z8(p,b,null,null)},H8.prototype.unmount=Zv.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var b=p.containerInfo;x0(function(){z8(null,p,null,null)}),b[Fc]=null}};function H8(p){this._internalRoot=p}H8.prototype.unstable_scheduleHydration=function(p){if(p){var b=s_();p={blockedOn:null,target:p,priority:b};for(var w=0;w<hd.length&&b!==0&&b<hd[w].priority;w++);hd.splice(w,0,p),w===0&&l_(p)}};function qv(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function V8(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function ED(){}function ule(p,b,w,C,N){if(N){if(typeof C=="function"){var j=C;C=function(){var me=$8(Z);j.call(me)}}var Z=xD(b,C,p,0,null,!1,!1,"",ED);return p._reactRootContainer=Z,p[Fc]=Z.current,C6(p.nodeType===8?p.parentNode:p),x0(),Z}for(;N=p.lastChild;)p.removeChild(N);if(typeof C=="function"){var te=C;C=function(){var me=$8(ne);te.call(me)}}var ne=Kv(p,0,!1,null,null,!1,!1,"",ED);return p._reactRootContainer=ne,p[Fc]=ne.current,C6(p.nodeType===8?p.parentNode:p),x0(function(){z8(b,ne,w,C)}),ne}function W8(p,b,w,C,N){var j=w._reactRootContainer;if(j){var Z=j;if(typeof N=="function"){var te=N;N=function(){var ne=$8(Z);te.call(ne)}}z8(b,Z,p,N)}else Z=ule(w,b,p,N,C);return $8(Z)}r_=function(p){switch(p.tag){case 3:var b=p.stateNode;if(b.current.memoizedState.isDehydrated){var w=Rl(b.pendingLanes);w!==0&&(w7(b,w|1),Hs(b,cr()),!(sn&6)&&(rp=cr()+500,Ud()))}break;case 13:x0(function(){var C=Vc(p,1);if(C!==null){var N=ys();Fa(C,p,1,N)}}),Yv(p,1)}},v7=function(p){if(p.tag===13){var b=Vc(p,134217728);if(b!==null){var w=ys();Fa(b,p,134217728,w)}Yv(p,134217728)}},i_=function(p){if(p.tag===13){var b=Sd(p),w=Vc(p,b);if(w!==null){var C=ys();Fa(w,p,b,C)}Yv(p,b)}},s_=function(){return En},o_=function(p,b){var w=En;try{return En=p,b()}finally{En=w}},$o=function(p,b,w){switch(b){case"input":if(ut(p,w),b=w.name,w.type==="radio"&&b!=null){for(w=p;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<w.length;b++){var C=w[b];if(C!==p&&C.form===p.form){var N=l8(C);if(!N)throw Error(n(90));Fe(C),ut(C,N)}}}break;case"textarea":Os(p,w);break;case"select":b=w.value,b!=null&&Zn(p,!!w.multiple,b,!1)}},Yt=$v,Sn=x0;var hle={usingClientEntryPoint:!1,Events:[T6,V1,l8,it,ze,$v]},H6={findFiberByHostInstance:u0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ple={bundleType:H6.bundleType,version:H6.version,rendererPackageName:H6.rendererPackageName,rendererConfig:H6.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=jy(p),p===null?null:p.stateNode},findFiberByHostInstance:H6.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var G8=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!G8.isDisabled&&G8.supportsFiber)try{f0=G8.inject(ple),Wo=G8}catch{}}return Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hle,Vs.createPortal=function(p,b){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qv(b))throw Error(n(200));return dle(p,b,null,w)},Vs.createRoot=function(p,b){if(!qv(p))throw Error(n(299));var w=!1,C="",N=vD;return b!=null&&(b.unstable_strictMode===!0&&(w=!0),b.identifierPrefix!==void 0&&(C=b.identifierPrefix),b.onRecoverableError!==void 0&&(N=b.onRecoverableError)),b=Kv(p,1,!1,null,null,w,!1,C,N),p[Fc]=b.current,C6(p.nodeType===8?p.parentNode:p),new Zv(b)},Vs.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var b=p._reactInternals;if(b===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=jy(b),p=p===null?null:p.stateNode,p},Vs.flushSync=function(p){return x0(p)},Vs.hydrate=function(p,b,w){if(!V8(b))throw Error(n(200));return W8(null,p,b,!0,w)},Vs.hydrateRoot=function(p,b,w){if(!qv(p))throw Error(n(405));var C=w!=null&&w.hydratedSources||null,N=!1,j="",Z=vD;if(w!=null&&(w.unstable_strictMode===!0&&(N=!0),w.identifierPrefix!==void 0&&(j=w.identifierPrefix),w.onRecoverableError!==void 0&&(Z=w.onRecoverableError)),b=xD(b,null,p,1,w??null,N,!1,j,Z),p[Fc]=b.current,C6(p),C)for(p=0;p<C.length;p++)w=C[p],N=w._getVersion,N=N(w._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[w,N]:b.mutableSourceEagerHydrationData.push(w,N);return new H8(b)},Vs.render=function(p,b,w){if(!V8(b))throw Error(n(200));return W8(null,p,b,!1,w)},Vs.unmountComponentAtNode=function(p){if(!V8(p))throw Error(n(40));return p._reactRootContainer?(x0(function(){W8(null,null,p,!1,function(){p._reactRootContainer=null,p[Fc]=null})}),!0):!1},Vs.unstable_batchedUpdates=$v,Vs.unstable_renderSubtreeIntoContainer=function(p,b,w,C){if(!V8(w))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return W8(p,b,w,!1,C)},Vs.version="18.3.1-next-f1338f8080-20240426",Vs}var RD;function UW(){if(RD)return tE.exports;RD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),tE.exports=kle(),tE.exports}var _D;function Sle(){if(_D)return X8;_D=1;var e=UW();return X8.createRoot=e.createRoot,X8.hydrateRoot=e.hydrateRoot,X8}var Cle=Sle();const Ale="6.13.1";function Mle(e,t,n){const r=t.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const i=new Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=e,i}async function Es(e){const t=Object.keys(e);return(await Promise.all(t.map(r=>Promise.resolve(e[r])))).reduce((r,i,s)=>(r[t[s]]=i,r),{})}function yt(e,t,n){for(let r in t){let i=t[r];const s=n?n[r]:null;s&&Mle(i,s,r),Object.defineProperty(e,r,{enumerable:!0,value:i,writable:!1})}}function Dp(e){if(e==null)return"null";if(Array.isArray(e))return"[ "+e.map(Dp).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[e[r]&15];return n}if(typeof e=="object"&&typeof e.toJSON=="function")return Dp(e.toJSON());switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"number":return e.toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map(n=>`${Dp(n)}: ${Dp(e[n])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ss(e,t){return e&&e.code===t}function JM(e){return ss(e,"CALL_EXCEPTION")}function Mr(e,t,n){let r=e;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Dp(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+Dp(a))}}s.push(`code=${t}`),s.push(`version=${Ale}`),s.length&&(e+=" ("+s.join(", ")+")")}let i;switch(t){case"INVALID_ARGUMENT":i=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(e);break;default:i=new Error(e)}return yt(i,{code:t}),n&&Object.assign(i,n),i.shortMessage==null&&yt(i,{shortMessage:r}),i}function Se(e,t,n,r){if(!e)throw Mr(t,n,r)}function se(e,t,n,r){Se(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function xW(e,t,n){n==null&&(n=""),n&&(n=": "+n),Se(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Se(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");e.push(t)}catch{}return e},[]);function qb(e,t,n){if(n==null&&(n=""),e!==t){let r=n,i="new";n&&(r+=".",i+=" "+n),Se(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function wW(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if(typeof e=="string"&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((e.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(e.substring(i,i+2),16),i+=2;return r}se(!1,"invalid BytesLike value",t||"value",e)}function nn(e,t){return wW(e,t,!1)}function ks(e,t){return wW(e,t,!0)}function $n(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&e.length!==2+2*t||t===!0&&e.length%2!==0)}function eT(e){return $n(e,!0)||e instanceof Uint8Array}const PD="0123456789abcdef";function nt(e){const t=nn(e);let n="0x";for(let r=0;r<t.length;r++){const i=t[r];n+=PD[(i&240)>>4]+PD[i&15]}return n}function Br(e){return"0x"+e.map(t=>nt(t).substring(2)).join("")}function tm(e){return $n(e,!0)?(e.length-2)/2:nn(e).length}function Tr(e,t,n){const r=nn(e);return n!=null&&n>r.length&&Se(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),nt(r.slice(t??0,n??r.length))}function vW(e,t,n){const r=nn(e);Se(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const i=new Uint8Array(t);return i.fill(0),n?i.set(r,t-r.length):i.set(r,0),nt(i)}function Gh(e,t){return vW(e,t,!0)}function Tle(e,t){return vW(e,t,!1)}const E9=BigInt(0),rl=BigInt(1),Lp=9007199254740991;function ox(e,t){const n=k9(e,"value"),r=BigInt(zt(t,"width"));if(Se(n>>r===E9,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-rl){const i=(rl<<r)-rl;return-((~n&i)+rl)}return n}function EW(e,t){let n=at(e,"value");const r=BigInt(zt(t,"width")),i=rl<<r-rl;if(n<E9){n=-n,Se(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});const s=(rl<<r)-rl;return(~n&s)+rl}else Se(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return n}function K0(e,t){const n=k9(e,"value"),r=BigInt(zt(t,"bits"));return n&(rl<<r)-rl}function at(e,t){switch(typeof e){case"bigint":return e;case"number":return se(Number.isInteger(e),"underflow",t||"value",e),se(e>=-Lp&&e<=Lp,"overflow",t||"value",e),BigInt(e);case"string":try{if(e==="")throw new Error("empty string");return e[0]==="-"&&e[1]!=="-"?-BigInt(e.substring(1)):BigInt(e)}catch(n){se(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}se(!1,"invalid BigNumberish value",t||"value",e)}function k9(e,t){const n=at(e,t);return Se(n>=E9,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const DD="0123456789abcdef";function S9(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=DD[n>>4],t+=DD[n&15];return BigInt(t)}return at(e)}function zt(e,t){switch(typeof e){case"bigint":return se(e>=-Lp&&e<=Lp,"overflow",t||"value",e),Number(e);case"number":return se(Number.isInteger(e),"underflow",t||"value",e),se(e>=-Lp&&e<=Lp,"overflow",t||"value",e),e;case"string":try{if(e==="")throw new Error("empty string");return zt(BigInt(e),t)}catch(n){se(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}se(!1,"invalid numeric value",t||"value",e)}function Ile(e){return zt(S9(e))}function $u(e,t){let r=k9(e,"value").toString(16);if(t==null)r.length%2&&(r="0"+r);else{const i=zt(t,"width");for(Se(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<i*2;)r="0"+r}return"0x"+r}function Ss(e){const t=k9(e,"value");if(t===E9)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(n.substring(s,s+2),16)}return r}function Op(e){let t=nt(eT(e)?e:Ss(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const LD="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const OD=BigInt(58);function Nle(e){const t=nn(e);let n=S9(t),r="";for(;n;)r=LD[Number(n%OD)]+r,n/=OD;for(let i=0;i<t.length&&!t[i];i++)r=LD[0]+r;return r}function Rle(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return nn(t)}function _le(e){const t=nn(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}var xm;class kW{constructor(t,n,r){fe(this,"filter");fe(this,"emitter");be(this,xm);ee(this,xm,n),yt(this,{emitter:t,filter:r})}async removeListener(){X(this,xm)!=null&&await this.emitter.off(this.filter,X(this,xm))}}xm=new WeakMap;function Ple(e,t,n,r,i){se(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)}function SW(e,t,n,r,i){if(e==="BAD_PREFIX"||e==="UNEXPECTED_CONTINUE"){let s=0;for(let o=t+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return e==="OVERRUN"?n.length-t-1:0}function Dle(e,t,n,r,i){return e==="OVERLONG"?(se(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),SW(e,t,n))}const Lle=Object.freeze({error:Ple,ignore:SW,replace:Dle});function Ole(e,t){t==null&&(t=Lle.error);const n=nn(e,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(!(s>>7)){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=t("UNEXPECTED_CONTINUE",i-1,n,r):i+=t("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=t("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let f=0;f<o;f++){let c=n[i];if((c&192)!=128){i+=t("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|c&63,i++}if(l!==null){if(l>1114111){i+=t("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=t("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=t("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function Df(e,t){se(typeof e=="string","invalid string value","str",e);let n=[];for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=e.charCodeAt(r);se(r<e.length&&(s&64512)===56320,"invalid surrogate pair","str",e);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function jle(e){return e.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function ax(e,t){return jle(Ole(e,t))}function CW(e){async function t(n,r){Se(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Se(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Se(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Mr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=Mr("request cancelled","CANCELLED"),o.abort()});const l={method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal};let f;try{f=await fetch(n.url,l)}catch(h){throw clearTimeout(a),s||h}clearTimeout(a);const c={};f.headers.forEach((h,g)=>{c[g.toLowerCase()]=h});const d=await f.arrayBuffer(),u=d==null?null:new Uint8Array(d);return{statusCode:f.status,statusMessage:f.statusText,headers:c,body:u}}return t}const Ble=12,Fle=250;let jD=CW();const zle=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),$le=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let iE=!1;async function AW(e,t){try{const n=e.match(zle);if(!n)throw new Error("invalid data");return new Iu(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Rle(n[3]):Vle(n[3]))}catch{return new Iu(599,"BAD REQUEST (invalid data: URI)",{},null,new Ff(e))}}function MW(e){async function t(n,r){try{const i=n.match($le);if(!i)throw new Error("invalid link");return new Ff(`${e}${i[2]}`)}catch{return new Iu(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ff(n))}}return t}const K8={data:AW,ipfs:MW("https://gateway.ipfs.io/ipfs/")},TW=new WeakMap;var ch,iu;class Hle{constructor(t){be(this,ch);be(this,iu);ee(this,ch,[]),ee(this,iu,!1),TW.set(t,()=>{if(!X(this,iu)){ee(this,iu,!0);for(const n of X(this,ch))setTimeout(()=>{n()},0);ee(this,ch,[])}})}addListener(t){Se(!X(this,iu),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),X(this,ch).push(t)}get cancelled(){return X(this,iu)}checkSignal(){Se(!this.cancelled,"cancelled","CANCELLED",{})}}ch=new WeakMap,iu=new WeakMap;function Y8(e){if(e==null)throw new Error("missing signal; should not happen");return e.checkSignal(),e}var wm,vm,Za,mf,Em,km,bi,Co,gf,fh,dh,uh,Ql,qa,su,hh,S5;const g9=class g9{constructor(t){be(this,hh);be(this,wm);be(this,vm);be(this,Za);be(this,mf);be(this,Em);be(this,km);be(this,bi);be(this,Co);be(this,gf);be(this,fh);be(this,dh);be(this,uh);be(this,Ql);be(this,qa);be(this,su);ee(this,km,String(t)),ee(this,wm,!1),ee(this,vm,!0),ee(this,Za,{}),ee(this,mf,""),ee(this,Em,3e5),ee(this,qa,{slotInterval:Fle,maxAttempts:Ble}),ee(this,su,null)}get url(){return X(this,km)}set url(t){ee(this,km,String(t))}get body(){return X(this,bi)==null?null:new Uint8Array(X(this,bi))}set body(t){if(t==null)ee(this,bi,void 0),ee(this,Co,void 0);else if(typeof t=="string")ee(this,bi,Df(t)),ee(this,Co,"text/plain");else if(t instanceof Uint8Array)ee(this,bi,t),ee(this,Co,"application/octet-stream");else if(typeof t=="object")ee(this,bi,Df(JSON.stringify(t))),ee(this,Co,"application/json");else throw new Error("invalid body")}hasBody(){return X(this,bi)!=null}get method(){return X(this,mf)?X(this,mf):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),ee(this,mf,String(t).toUpperCase())}get headers(){const t=Object.assign({},X(this,Za));return X(this,gf)&&(t.authorization=`Basic ${_le(Df(X(this,gf)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&X(this,Co)&&(t["content-type"]=X(this,Co)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,n){X(this,Za)[String(t).toLowerCase()]=String(n)}clearHeaders(){ee(this,Za,{})}[Symbol.iterator](){const t=this.headers,n=Object.keys(t);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return X(this,gf)||null}setCredentials(t,n){se(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),ee(this,gf,`${t}:${n}`)}get allowGzip(){return X(this,vm)}set allowGzip(t){ee(this,vm,!!t)}get allowInsecureAuthentication(){return!!X(this,wm)}set allowInsecureAuthentication(t){ee(this,wm,!!t)}get timeout(){return X(this,Em)}set timeout(t){se(t>=0,"timeout must be non-zero","timeout",t),ee(this,Em,t)}get preflightFunc(){return X(this,fh)||null}set preflightFunc(t){ee(this,fh,t)}get processFunc(){return X(this,dh)||null}set processFunc(t){ee(this,dh,t)}get retryFunc(){return X(this,uh)||null}set retryFunc(t){ee(this,uh,t)}get getUrlFunc(){return X(this,su)||jD}set getUrlFunc(t){ee(this,su,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${X(this,bi)?nt(X(this,bi)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(X(this,qa).slotInterval=t.slotInterval),t.maxAttempts!=null&&(X(this,qa).maxAttempts=t.maxAttempts)}send(){return Se(X(this,Ql)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),ee(this,Ql,new Hle(this)),Re(this,hh,S5).call(this,0,BD()+this.timeout,0,this,new Iu(0,"",{},null,this))}cancel(){Se(X(this,Ql)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=TW.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const n=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();Se(this.method==="GET"&&(n!=="https"||r!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const i=new g9(t);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,ee(i,Za,Object.assign({},X(this,Za))),X(this,bi)&&ee(i,bi,new Uint8Array(X(this,bi))),ee(i,Co,X(this,Co)),i}clone(){const t=new g9(this.url);return ee(t,mf,X(this,mf)),X(this,bi)&&ee(t,bi,X(this,bi)),ee(t,Co,X(this,Co)),ee(t,Za,Object.assign({},X(this,Za))),ee(t,gf,X(this,gf)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),ee(t,fh,X(this,fh)),ee(t,dh,X(this,dh)),ee(t,uh,X(this,uh)),ee(t,qa,Object.assign({},X(this,qa))),ee(t,su,X(this,su)),t}static lockConfig(){iE=!0}static getGateway(t){return K8[t.toLowerCase()]||null}static registerGateway(t,n){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(iE)throw new Error("gateways locked");K8[t]=n}static registerGetUrl(t){if(iE)throw new Error("gateways locked");jD=t}static createGetUrlFunc(t){return CW()}static createDataGateway(){return AW}static createIpfsGatewayFunc(t){return MW(t)}};wm=new WeakMap,vm=new WeakMap,Za=new WeakMap,mf=new WeakMap,Em=new WeakMap,km=new WeakMap,bi=new WeakMap,Co=new WeakMap,gf=new WeakMap,fh=new WeakMap,dh=new WeakMap,uh=new WeakMap,Ql=new WeakMap,qa=new WeakMap,su=new WeakMap,hh=new WeakSet,S5=async function(t,n,r,i,s){var c,d,u;if(t>=X(this,qa).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Se(BD()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await Wle(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in K8){const h=await K8[a](o.url,Y8(X(i,Ql)));if(h instanceof Iu){let g=h;if(this.processFunc){Y8(X(i,Ql));try{g=await this.processFunc(o,g)}catch(y){(y.throttle==null||typeof y.stall!="number")&&g.makeServerError("error in post-processing function",y).assertOk()}}return g}o=h}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,Y8(X(i,Ql)));let f=new Iu(l.statusCode,l.statusMessage,l.headers,l.body,i);if(f.statusCode===301||f.statusCode===302){try{const h=f.headers.location||"";return Re(c=o.redirect(h),hh,S5).call(c,t+1,n,0,i,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,f,t))){const h=f.headers["retry-after"];let g=X(this,qa).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(g=parseInt(h)),Re(d=o.clone(),hh,S5).call(d,t+1,n,g,i,f)}if(this.processFunc){Y8(X(i,Ql));try{f=await this.processFunc(o,f)}catch(h){(h.throttle==null||typeof h.stall!="number")&&f.makeServerError("error in post-processing function",h).assertOk();let g=X(this,qa).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return h.stall>=0&&(g=h.stall),Re(u=o.clone(),hh,S5).call(u,t+1,n,g,i,f)}}return f};let Ff=g9;var jb,Bb,Fb,Ao,Sm,ph;const JR=class JR{constructor(t,n,r,i,s){be(this,jb);be(this,Bb);be(this,Fb);be(this,Ao);be(this,Sm);be(this,ph);ee(this,jb,t),ee(this,Bb,n),ee(this,Fb,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),ee(this,Ao,i==null?null:new Uint8Array(i)),ee(this,Sm,s||null),ee(this,ph,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${X(this,Ao)?nt(X(this,Ao)):"null"}>`}get statusCode(){return X(this,jb)}get statusMessage(){return X(this,Bb)}get headers(){return Object.assign({},X(this,Fb))}get body(){return X(this,Ao)==null?null:new Uint8Array(X(this,Ao))}get bodyText(){try{return X(this,Ao)==null?"":ax(X(this,Ao))}catch{Se(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Se(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,n=Object.keys(t);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,n){let r;t?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${t})`);const i=new JR(599,r,this.headers,this.body,X(this,Sm)||void 0);return ee(i,ph,{message:t,error:n}),i}throwThrottleError(t,n){n==null?n=-1:se(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(t||"throttling requests");throw yt(r,{stall:n,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return X(this,Ao)!=null}get request(){return X(this,Sm)}ok(){return X(this,ph).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:n}=X(this,ph);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{X(this,Ao)&&(i=ax(X(this,Ao)))}catch{}Se(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};jb=new WeakMap,Bb=new WeakMap,Fb=new WeakMap,Ao=new WeakMap,Sm=new WeakMap,ph=new WeakMap;let Iu=JR;function BD(){return new Date().getTime()}function Vle(e){return Df(e.replace(/%([0-9a-f][0-9a-f])/gi,(t,n)=>String.fromCharCode(parseInt(n,16))))}function Wle(e){return new Promise(t=>setTimeout(t,e))}const Gle=BigInt(-1),Va=BigInt(0),jp=BigInt(1),Xle=BigInt(5),sp={};let nm="0000";for(;nm.length<80;)nm+=nm;function k0(e){let t=nm;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function G6(e,t,n){const r=BigInt(t.width);if(t.signed){const i=jp<<r-jp;Se(n==null||e>=-i&&e<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e>Va?e=ox(K0(e,r),r):e=-ox(K0(-e,r),r)}else{const i=jp<<r;Se(n==null||e>=0&&e<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%i+i)%i&i-jp}return e}function sE(e){typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,n=128,r=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);se(s,"invalid fixed format","format",e),t=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(e){const s=e,o=(a,l,f)=>s[a]==null?f:(se(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);t=o("signed","boolean",t),n=o("width","number",n),r=o("decimals","number",r)}se(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),se(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(t?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:t,width:n,decimals:r,name:i}}function Kle(e,t){let n="";e<Va&&(n="-",e*=Gle);let r=e.toString();if(t===0)return n+r;for(;r.length<=t;)r=nm+r;const i=r.length-t;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Qa,Cn,xs,xn,N0,nf,VS,WS,GS,XS;const Qd=class Qd{constructor(t,n,r){be(this,xn);fe(this,"format");be(this,Qa);be(this,Cn);be(this,xs);fe(this,"_value");qb(t,sp,"FixedNumber"),ee(this,Cn,n),ee(this,Qa,r);const i=Kle(n,r.decimals);yt(this,{format:r.name,_value:i}),ee(this,xs,k0(r.decimals))}get signed(){return X(this,Qa).signed}get width(){return X(this,Qa).width}get decimals(){return X(this,Qa).decimals}get value(){return X(this,Cn)}addUnsafe(t){return Re(this,xn,VS).call(this,t)}add(t){return Re(this,xn,VS).call(this,t,"add")}subUnsafe(t){return Re(this,xn,WS).call(this,t)}sub(t){return Re(this,xn,WS).call(this,t,"sub")}mulUnsafe(t){return Re(this,xn,GS).call(this,t)}mul(t){return Re(this,xn,GS).call(this,t,"mul")}mulSignal(t){Re(this,xn,N0).call(this,t);const n=X(this,Cn)*X(t,Cn);return Se(n%X(this,xs)===Va,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Re(this,xn,nf).call(this,n/X(this,xs),"mulSignal")}divUnsafe(t){return Re(this,xn,XS).call(this,t)}div(t){return Re(this,xn,XS).call(this,t,"div")}divSignal(t){Se(X(t,Cn)!==Va,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Re(this,xn,N0).call(this,t);const n=X(this,Cn)*X(this,xs);return Se(n%X(t,Cn)===Va,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Re(this,xn,nf).call(this,n/X(t,Cn),"divSignal")}cmp(t){let n=this.value,r=t.value;const i=this.decimals-t.decimals;return i>0?r*=k0(i):i<0&&(n*=k0(-i)),n<r?-1:n>r?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=X(this,Cn);return X(this,Cn)<Va&&(t-=X(this,xs)-jp),t=X(this,Cn)/X(this,xs)*X(this,xs),Re(this,xn,nf).call(this,t,"floor")}ceiling(){let t=X(this,Cn);return X(this,Cn)>Va&&(t+=X(this,xs)-jp),t=X(this,Cn)/X(this,xs)*X(this,xs),Re(this,xn,nf).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const n=this.decimals-t,r=Xle*k0(n-1);let i=this.value+r;const s=k0(n);return i=i/s*s,G6(i,X(this,Qa),"round"),new Qd(sp,i,X(this,Qa))}isZero(){return X(this,Cn)===Va}isNegative(){return X(this,Cn)<Va}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Qd.fromString(this.toString(),t)}static fromValue(t,n,r){const i=n==null?0:zt(n),s=sE(r);let o=at(t,"value");const a=i-s.decimals;if(a>0){const l=k0(a);Se(o%l===Va,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=l}else a<0&&(o*=k0(-a));return G6(o,s,"fromValue"),new Qd(sp,o,s)}static fromString(t,n){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);se(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const i=sE(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=nm;Se(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return G6(a,i,"fromString"),new Qd(sp,a,i)}static fromBytes(t,n){let r=S9(nn(t,"value"));const i=sE(n);return i.signed&&(r=ox(r,i.width)),G6(r,i,"fromBytes"),new Qd(sp,r,i)}};Qa=new WeakMap,Cn=new WeakMap,xs=new WeakMap,xn=new WeakSet,N0=function(t){se(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},nf=function(t,n){return t=G6(t,X(this,Qa),n),new Qd(sp,t,X(this,Qa))},VS=function(t,n){return Re(this,xn,N0).call(this,t),Re(this,xn,nf).call(this,X(this,Cn)+X(t,Cn),n)},WS=function(t,n){return Re(this,xn,N0).call(this,t),Re(this,xn,nf).call(this,X(this,Cn)-X(t,Cn),n)},GS=function(t,n){return Re(this,xn,N0).call(this,t),Re(this,xn,nf).call(this,X(this,Cn)*X(t,Cn)/X(this,xs),n)},XS=function(t,n){return Se(X(t,Cn)!==Va,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Re(this,xn,N0).call(this,t),Re(this,xn,nf).call(this,X(this,Cn)*X(this,xs)/X(t,Cn),n)};let lx=Qd;function Yle(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function FD(e,t,n){let r=0;for(let i=0;i<n;i++)r=r*256+e[t+i];return r}function zD(e,t,n,r){const i=[];for(;n<t+1+r;){const s=IW(e,n);i.push(s.result),n+=s.consumed,Se(n<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:i}}function IW(e,t){Se(e.length!==0,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=r=>{Se(r<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:r})};if(e[t]>=248){const r=e[t]-247;n(t+1+r);const i=FD(e,t+1,r);return n(t+1+r+i),zD(e,t,t+1+r,r+i)}else if(e[t]>=192){const r=e[t]-192;return n(t+1+r),zD(e,t,t+1,r)}else if(e[t]>=184){const r=e[t]-183;n(t+1+r);const i=FD(e,t+1,r);n(t+1+r+i);const s=nt(e.slice(t+1+r,t+1+r+i));return{consumed:1+r+i,result:s}}else if(e[t]>=128){const r=e[t]-128;n(t+1+r);const i=nt(e.slice(t+1,t+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Yle(e[t])}}function C9(e){const t=nn(e,"data"),n=IW(t,0);return se(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function $D(e){const t=[];for(;e;)t.unshift(e&255),e>>=8;return t}function NW(e){if(Array.isArray(e)){let r=[];if(e.forEach(function(s){r=r.concat(NW(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=$D(r.length);return i.unshift(247+i.length),i.concat(r)}const t=Array.prototype.slice.call(nn(e,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=$D(t.length);return n.unshift(183+n.length),n.concat(t)}const HD="0123456789abcdef";function Xh(e){let t="0x";for(const n of NW(e))t+=HD[n>>4],t+=HD[n&15];return t}function Zle(e,t){let n=18;return n=zt(t,"unit"),lx.fromValue(e,n,{decimals:n,width:512}).toString()}function qle(e,t){se(typeof e=="string","value must be a string","value",e);let n=18;return n=zt(t,"unit"),lx.fromString(e,{decimals:n,width:512}).value}function Qle(e){return Zle(e,18)}function Kc(e){return qle(e,18)}const Cs=32,KS=new Uint8Array(Cs),Jle=["then"],Z8={},RW=new WeakMap;function B0(e){return RW.get(e)}function VD(e,t){RW.set(e,t)}function X6(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}function YS(e,t,n){return e.indexOf(null)>=0?t.map((r,i)=>r instanceof sg?YS(B0(r),r,n):r):e.reduce((r,i,s)=>{let o=t.getValue(i);return i in r||(n&&o instanceof sg&&(o=YS(B0(o),o,n)),r[i]=o),r},{})}var Cm;const Qp=class Qp extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==Z8&&(i=n,s=[],o=!1);super(i.length);be(this,Cm);i.forEach((f,c)=>{this[c]=f});const a=s.reduce((f,c)=>(typeof c=="string"&&f.set(c,(f.get(c)||0)+1),f),new Map);if(VD(this,Object.freeze(i.map((f,c)=>{const d=s[c];return d!=null&&a.get(d)===1?d:null}))),ee(this,Cm,[]),X(this,Cm)==null&&X(this,Cm),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(f,c,d)=>{if(typeof c=="string"){if(c.match(/^[0-9]+$/)){const h=zt(c,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const g=f[h];return g instanceof Error&&X6(`index ${h}`,g),g}if(Jle.indexOf(c)>=0)return Reflect.get(f,c,d);const u=f[c];if(u instanceof Function)return function(...h){return u.apply(this===d?f:this,h)};if(!(c in f))return f.getValue.apply(this===d?f:this,[c])}return Reflect.get(f,c,d)}});return VD(l,B0(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&X6(`index ${s}`,i),n&&i instanceof Qp&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=B0(this);return r.reduce((i,s,o)=>(Se(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),YS(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=B0(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Qp(Z8,s,o)}filter(n,r){const i=B0(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&X6(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Qp(Z8,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&X6(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=B0(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&X6(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Qp(Z8,n,r)}};Cm=new WeakMap;let sg=Qp;function WD(e){let t=Ss(e);return Se(t.length<=Cs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Cs,offset:t.length}),t.length!==Cs&&(t=ks(Br([KS.slice(t.length%Cs),t]))),t}class td{constructor(t,n,r,i){fe(this,"name");fe(this,"type");fe(this,"localName");fe(this,"dynamic");yt(this,{name:t,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,n){se(!1,t,this.localName,n)}}var bf,mh,Am,s3;class ZS{constructor(){be(this,Am);be(this,bf);be(this,mh);ee(this,bf,[]),ee(this,mh,0)}get data(){return Br(X(this,bf))}get length(){return X(this,mh)}appendWriter(t){return Re(this,Am,s3).call(this,ks(t.data))}writeBytes(t){let n=ks(t);const r=n.length%Cs;return r&&(n=ks(Br([n,KS.slice(r)]))),Re(this,Am,s3).call(this,n)}writeValue(t){return Re(this,Am,s3).call(this,WD(t))}writeUpdatableValue(){const t=X(this,bf).length;return X(this,bf).push(KS),ee(this,mh,X(this,mh)+Cs),n=>{X(this,bf)[t]=WD(n)}}}bf=new WeakMap,mh=new WeakMap,Am=new WeakSet,s3=function(t){return X(this,bf).push(t),ee(this,mh,X(this,mh)+t.length),t.length};var Zs,Mo,gh,bh,ou,v1,QS,_W;const e_=class e_{constructor(t,n,r){be(this,v1);fe(this,"allowLoose");be(this,Zs);be(this,Mo);be(this,gh);be(this,bh);be(this,ou);yt(this,{allowLoose:!!n}),ee(this,Zs,ks(t)),ee(this,gh,0),ee(this,bh,null),ee(this,ou,r??1024),ee(this,Mo,0)}get data(){return nt(X(this,Zs))}get dataLength(){return X(this,Zs).length}get consumed(){return X(this,Mo)}get bytes(){return new Uint8Array(X(this,Zs))}subReader(t){const n=new e_(X(this,Zs).slice(X(this,Mo)+t),this.allowLoose,X(this,ou));return ee(n,bh,this),n}readBytes(t,n){let r=Re(this,v1,_W).call(this,0,t,!!n);return Re(this,v1,QS).call(this,t),ee(this,Mo,X(this,Mo)+r.length),r.slice(0,t)}readValue(){return S9(this.readBytes(Cs))}readIndex(){return Ile(this.readBytes(Cs))}};Zs=new WeakMap,Mo=new WeakMap,gh=new WeakMap,bh=new WeakMap,ou=new WeakMap,v1=new WeakSet,QS=function(t){var n;if(X(this,bh))return Re(n=X(this,bh),v1,QS).call(n,t);ee(this,gh,X(this,gh)+t),Se(X(this,ou)<1||X(this,gh)<=X(this,ou)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${X(this,ou)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:ks(X(this,Zs)),offset:X(this,Mo),length:t,info:{bytesRead:X(this,gh),dataLength:this.dataLength}})},_W=function(t,n,r){let i=Math.ceil(n/Cs)*Cs;return X(this,Mo)+i>X(this,Zs).length&&(this.allowLoose&&r&&X(this,Mo)+n<=X(this,Zs).length?i=n:Se(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ks(X(this,Zs)),length:X(this,Zs).length,offset:X(this,Mo)+i})),X(this,Zs).slice(X(this,Mo),X(this,Mo)+i)};let qS=e_;function cx(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function tT(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ece(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cx(e.outputLen),cx(e.blockLen)}function og(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function PW(e,t){tT(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const oE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const DW=e=>e instanceof Uint8Array,tce=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),aE=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ol=(e,t)=>e<<32-t|e>>>t,nce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!nce)throw new Error("Non little-endian hardware is not supported");function rce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function A9(e){if(typeof e=="string"&&(e=rce(e)),!DW(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function ice(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!DW(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class nT{clone(){return this._cloneInto()}}function rT(e){const t=r=>e().update(A9(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function sce(e=32){if(oE&&typeof oE.getRandomValues=="function")return oE.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class LW extends nT{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ece(t);const r=A9(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return og(this),this.iHash.update(t),this}digestInto(t){og(this),tT(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const OW=(e,t,n)=>new LW(e,t).update(n).digest();OW.create=(e,t)=>new LW(e,t);function oce(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,f=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+f,a,r)}class jW extends nT{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=aE(this.buffer)}update(t){og(this);const{view:n,buffer:r,blockLen:i}=this;t=A9(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=aE(t);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){og(this),PW(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;oce(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=aE(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=l/4,c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)a.setUint32(4*d,c[d],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}}const ace=(e,t,n)=>e&t^~e&n,lce=(e,t,n)=>e&t^e&n^t&n,cce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Td=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Id=new Uint32Array(64);class fce extends jW{constructor(){super(64,32,8,!1),this.A=Td[0]|0,this.B=Td[1]|0,this.C=Td[2]|0,this.D=Td[3]|0,this.E=Td[4]|0,this.F=Td[5]|0,this.G=Td[6]|0,this.H=Td[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[t,n,r,i,s,o,a,l]}set(t,n,r,i,s,o,a,l){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(t,n){for(let d=0;d<16;d++,n+=4)Id[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const u=Id[d-15],h=Id[d-2],g=Ol(u,7)^Ol(u,18)^u>>>3,y=Ol(h,17)^Ol(h,19)^h>>>10;Id[d]=y+Id[d-7]+g+Id[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:f,H:c}=this;for(let d=0;d<64;d++){const u=Ol(a,6)^Ol(a,11)^Ol(a,25),h=c+u+ace(a,l,f)+cce[d]+Id[d]|0,y=(Ol(r,2)^Ol(r,13)^Ol(r,22))+lce(r,i,s)|0;c=f,f=l,l=a,a=o+h|0,o=s,s=i,i=r,r=h+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,c=c+this.H|0,this.set(r,i,s,o,a,l,f,c)}roundClean(){Id.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const BW=rT(()=>new fce),q8=BigInt(2**32-1),JS=BigInt(32);function FW(e,t=!1){return t?{h:Number(e&q8),l:Number(e>>JS&q8)}:{h:Number(e>>JS&q8)|0,l:Number(e&q8)|0}}function zW(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=FW(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const dce=(e,t)=>BigInt(e>>>0)<<JS|BigInt(t>>>0),uce=(e,t,n)=>e>>>n,hce=(e,t,n)=>e<<32-n|t>>>n,pce=(e,t,n)=>e>>>n|t<<32-n,mce=(e,t,n)=>e<<32-n|t>>>n,gce=(e,t,n)=>e<<64-n|t>>>n-32,bce=(e,t,n)=>e>>>n-32|t<<64-n,yce=(e,t)=>t,Uce=(e,t)=>e,$W=(e,t,n)=>e<<n|t>>>32-n,HW=(e,t,n)=>t<<n|e>>>32-n,VW=(e,t,n)=>t<<n-32|e>>>64-n,WW=(e,t,n)=>e<<n-32|t>>>64-n;function xce(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const wce=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),vce=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Ece=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),kce=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,Sce=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Cce=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,Ht={fromBig:FW,split:zW,toBig:dce,shrSH:uce,shrSL:hce,rotrSH:pce,rotrSL:mce,rotrBH:gce,rotrBL:bce,rotr32H:yce,rotr32L:Uce,rotlSH:$W,rotlSL:HW,rotlBH:VW,rotlBL:WW,add:xce,add3L:wce,add3H:vce,add4L:Ece,add4H:kce,add5H:Cce,add5L:Sce},[Ace,Mce]=Ht.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Nd=new Uint32Array(80),Rd=new Uint32Array(80);class Tce extends jW{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:f,El:c,Fh:d,Fl:u,Gh:h,Gl:g,Hh:y,Hl:U}=this;return[t,n,r,i,s,o,a,l,f,c,d,u,h,g,y,U]}set(t,n,r,i,s,o,a,l,f,c,d,u,h,g,y,U){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=f|0,this.El=c|0,this.Fh=d|0,this.Fl=u|0,this.Gh=h|0,this.Gl=g|0,this.Hh=y|0,this.Hl=U|0}process(t,n){for(let E=0;E<16;E++,n+=4)Nd[E]=t.getUint32(n),Rd[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const k=Nd[E-15]|0,M=Rd[E-15]|0,S=Ht.rotrSH(k,M,1)^Ht.rotrSH(k,M,8)^Ht.shrSH(k,M,7),A=Ht.rotrSL(k,M,1)^Ht.rotrSL(k,M,8)^Ht.shrSL(k,M,7),I=Nd[E-2]|0,R=Rd[E-2]|0,D=Ht.rotrSH(I,R,19)^Ht.rotrBH(I,R,61)^Ht.shrSH(I,R,6),_=Ht.rotrSL(I,R,19)^Ht.rotrBL(I,R,61)^Ht.shrSL(I,R,6),P=Ht.add4L(A,_,Rd[E-7],Rd[E-16]),$=Ht.add4H(P,S,D,Nd[E-7],Nd[E-16]);Nd[E]=$|0,Rd[E]=P|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:f,Dl:c,Eh:d,El:u,Fh:h,Fl:g,Gh:y,Gl:U,Hh:x,Hl:v}=this;for(let E=0;E<80;E++){const k=Ht.rotrSH(d,u,14)^Ht.rotrSH(d,u,18)^Ht.rotrBH(d,u,41),M=Ht.rotrSL(d,u,14)^Ht.rotrSL(d,u,18)^Ht.rotrBL(d,u,41),S=d&h^~d&y,A=u&g^~u&U,I=Ht.add5L(v,M,A,Mce[E],Rd[E]),R=Ht.add5H(I,x,k,S,Ace[E],Nd[E]),D=I|0,_=Ht.rotrSH(r,i,28)^Ht.rotrBH(r,i,34)^Ht.rotrBH(r,i,39),P=Ht.rotrSL(r,i,28)^Ht.rotrBL(r,i,34)^Ht.rotrBL(r,i,39),$=r&s^r&a^s&a,L=i&o^i&l^o&l;x=y|0,v=U|0,y=h|0,U=g|0,h=d|0,g=u|0,{h:d,l:u}=Ht.add(f|0,c|0,R|0,D|0),f=a|0,c=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const B=Ht.add3L(D,P,L);r=Ht.add3H(B,R,_,$),i=B|0}({h:r,l:i}=Ht.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ht.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Ht.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:f,l:c}=Ht.add(this.Dh|0,this.Dl|0,f|0,c|0),{h:d,l:u}=Ht.add(this.Eh|0,this.El|0,d|0,u|0),{h,l:g}=Ht.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:y,l:U}=Ht.add(this.Gh|0,this.Gl|0,y|0,U|0),{h:x,l:v}=Ht.add(this.Hh|0,this.Hl|0,x|0,v|0),this.set(r,i,s,o,a,l,f,c,d,u,h,g,y,U,x,v)}roundClean(){Nd.fill(0),Rd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ice=rT(()=>new Tce);function Nce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const GD=Nce();GD.crypto||GD.msCrypto;function Rce(e){switch(e){case"sha256":return BW.create();case"sha512":return Ice.create()}se(!1,"invalid hashing algorithm name","algorithm",e)}const[GW,XW,KW]=[[],[],[]],_ce=BigInt(0),K6=BigInt(1),Pce=BigInt(2),Dce=BigInt(7),Lce=BigInt(256),Oce=BigInt(113);for(let e=0,t=K6,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],GW.push(2*(5*r+n)),XW.push((e+1)*(e+2)/2%64);let i=_ce;for(let s=0;s<7;s++)t=(t<<K6^(t>>Dce)*Oce)%Lce,t&Pce&&(i^=K6<<(K6<<BigInt(s))-K6);KW.push(i)}const[jce,Bce]=zW(KW,!0),XD=(e,t,n)=>n>32?VW(e,t,n):$W(e,t,n),KD=(e,t,n)=>n>32?WW(e,t,n):HW(e,t,n);function Fce(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,f=n[l],c=n[l+1],d=XD(f,c,1)^n[a],u=KD(f,c,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=u}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=XW[o],l=XD(i,s,a),f=KD(i,s,a),c=GW[o];i=e[c],s=e[c+1],e[c]=l,e[c+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=jce[r],e[1]^=Bce[r]}n.fill(0)}class iT extends nT{constructor(t,n,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,cx(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=tce(this.state)}keccak(){Fce(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){og(this);const{blockLen:n,state:r}=this;t=A9(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){og(this,!1),tT(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return cx(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(PW(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new iT(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const zce=(e,t,n)=>rT(()=>new iT(t,e,n)),$ce=zce(1,136,256/8);let YW=!1;const ZW=function(e){return $ce(e)};let qW=ZW;function Kr(e){const t=nn(e,"data");return nt(qW(t))}Kr._=ZW;Kr.lock=function(){YW=!0};Kr.register=function(e){if(YW)throw new TypeError("keccak256 is locked");qW=e};Object.freeze(Kr);const QW=function(e){return Rce("sha256").update(e).digest()};let JW=QW,eG=!1;function Xg(e){const t=nn(e,"data");return nt(JW(t))}Xg._=QW;Xg.lock=function(){eG=!0};Xg.register=function(e){if(eG)throw new Error("sha256 is locked");JW=e};Object.freeze(Xg);Object.freeze(Xg);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tG=BigInt(0),M9=BigInt(1),Hce=BigInt(2),T9=e=>e instanceof Uint8Array,Vce=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ag(e){if(!T9(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Vce[e[n]];return t}function nG(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function sT(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function lg(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Th(e){return sT(ag(e))}function oT(e){if(!T9(e))throw new Error("Uint8Array expected");return sT(ag(Uint8Array.from(e).reverse()))}function cg(e,t){return lg(e.toString(16).padStart(t*2,"0"))}function aT(e,t){return cg(e,t).reverse()}function Wce(e){return lg(nG(e))}function Ka(e,t,n){let r;if(typeof t=="string")try{r=lg(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(T9(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function N2(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!T9(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function Gce(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Xce(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Kce(e){let t;for(t=0;e>tG;e>>=M9,t+=1);return t}function Yce(e,t){return e>>BigInt(t)&M9}const Zce=(e,t,n)=>e|(n?M9:tG)<<BigInt(t),lT=e=>(Hce<<BigInt(e-1))-M9,lE=e=>new Uint8Array(e),YD=e=>Uint8Array.from(e);function rG(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=lE(e),i=lE(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),l=(d=lE())=>{i=a(YD([0]),d),r=a(),d.length!==0&&(i=a(YD([1]),d),r=a())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const u=[];for(;d<t;){r=a();const h=r.slice();u.push(h),d+=r.length}return N2(...u)};return(d,u)=>{o(),l(d);let h;for(;!(h=u(f()));)l();return o(),h}}const qce={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Qb(e,t,n={}){const r=(i,s,o)=>{const a=qce[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const Qce=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Yce,bitLen:Kce,bitMask:lT,bitSet:Zce,bytesToHex:ag,bytesToNumberBE:Th,bytesToNumberLE:oT,concatBytes:N2,createHmacDrbg:rG,ensureBytes:Ka,equalBytes:Gce,hexToBytes:lg,hexToNumber:sT,numberToBytesBE:cg,numberToBytesLE:aT,numberToHexUnpadded:nG,numberToVarBytesBE:Wce,utf8ToBytes:Xce,validateObject:Qb},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ei=BigInt(0),Or=BigInt(1),F0=BigInt(2),Jce=BigInt(3),eC=BigInt(4),ZD=BigInt(5),qD=BigInt(8);BigInt(9);BigInt(16);function Js(e,t){const n=e%t;return n>=Ei?n:t+n}function efe(e,t,n){if(n<=Ei||t<Ei)throw new Error("Expected power/modulo > 0");if(n===Or)return Ei;let r=Or;for(;t>Ei;)t&Or&&(r=r*e%n),e=e*e%n,t>>=Or;return r}function Qo(e,t,n){let r=e;for(;t-- >Ei;)r*=r,r%=n;return r}function tC(e,t){if(e===Ei||t<=Ei)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Js(e,t),r=t,i=Ei,s=Or;for(;n!==Ei;){const a=r/n,l=r%n,f=i-s*a;r=n,n=l,i=s,s=f}if(r!==Or)throw new Error("invert: does not exist");return Js(i,t)}function tfe(e){const t=(e-Or)/F0;let n,r,i;for(n=e-Or,r=0;n%F0===Ei;n/=F0,r++);for(i=F0;i<e&&efe(i,t,e)!==e-Or;i++);if(r===1){const o=(e+Or)/eC;return function(l,f){const c=l.pow(f,o);if(!l.eql(l.sqr(c),f))throw new Error("Cannot find square root");return c}}const s=(n+Or)/F0;return function(a,l){if(a.pow(l,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=r,c=a.pow(a.mul(a.ONE,i),n),d=a.pow(l,s),u=a.pow(l,n);for(;!a.eql(u,a.ONE);){if(a.eql(u,a.ZERO))return a.ZERO;let h=1;for(let y=a.sqr(u);h<f&&!a.eql(y,a.ONE);h++)y=a.sqr(y);const g=a.pow(c,Or<<BigInt(f-h-1));c=a.sqr(g),d=a.mul(d,g),u=a.mul(u,c),f=h}return d}}function nfe(e){if(e%eC===Jce){const t=(e+Or)/eC;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%qD===ZD){const t=(e-ZD)/qD;return function(r,i){const s=r.mul(i,F0),o=r.pow(s,t),a=r.mul(i,o),l=r.mul(r.mul(a,F0),o),f=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(f),i))throw new Error("Cannot find square root");return f}}return tfe(e)}const rfe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ife(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=rfe.reduce((r,i)=>(r[i]="function",r),t);return Qb(e,n)}function sfe(e,t,n){if(n<Ei)throw new Error("Expected power > 0");if(n===Ei)return e.ONE;if(n===Or)return t;let r=e.ONE,i=t;for(;n>Ei;)n&Or&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Or;return r}function ofe(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function iG(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function afe(e,t,n=!1,r={}){if(e<=Ei)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=iG(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=nfe(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:lT(i),ZERO:Ei,ONE:Or,create:l=>Js(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Ei<=l&&l<e},is0:l=>l===Ei,isOdd:l=>(l&Or)===Or,neg:l=>Js(-l,e),eql:(l,f)=>l===f,sqr:l=>Js(l*l,e),add:(l,f)=>Js(l+f,e),sub:(l,f)=>Js(l-f,e),mul:(l,f)=>Js(l*f,e),pow:(l,f)=>sfe(a,l,f),div:(l,f)=>Js(l*tC(f,e),e),sqrN:l=>l*l,addN:(l,f)=>l+f,subN:(l,f)=>l-f,mulN:(l,f)=>l*f,inv:l=>tC(l,e),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>ofe(a,l),cmov:(l,f,c)=>c?f:l,toBytes:l=>n?aT(l,s):cg(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?oT(l):Th(l)}});return Object.freeze(a)}function sG(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function oG(e){const t=sG(e);return t+Math.ceil(t/2)}function lfe(e,t,n=!1){const r=e.length,i=sG(t),s=oG(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Th(e):oT(e),a=Js(o,t-Or)+Or;return n?aT(a,i):cg(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cfe=BigInt(0),cE=BigInt(1);function ffe(e,t){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>cfe;)s&cE&&(o=o.add(a)),a=a.double(),s>>=cE;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let f=i,c=f;for(let d=0;d<o;d++){c=f,l.push(c);for(let u=1;u<a;u++)c=c.add(f),l.push(c);f=c.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let f=e.ZERO,c=e.BASE;const d=BigInt(2**i-1),u=2**i,h=BigInt(i);for(let g=0;g<a;g++){const y=g*l;let U=Number(o&d);o>>=h,U>l&&(U-=u,o+=cE);const x=y,v=y+Math.abs(U)-1,E=g%2!==0,k=U<0;U===0?c=c.add(n(E,s[x])):f=f.add(n(k,s[v]))}return{p:f,f:c}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let f=s.get(i);return f||(f=this.precomputeWindow(i,l),l!==1&&s.set(i,a(f))),this.wNAF(l,f,o)}}}function aG(e){return ife(e.Fp),Qb(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iG(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dfe(e){const t=aG(e);Qb(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:ufe,hexToBytes:hfe}=Qce,Y0={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Y0;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:ufe(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Y0,n=typeof e=="string"?hfe(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Y0._parseInt(n.subarray(2)),{d:o,l:a}=Y0._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,n=f=>{const c=f.toString(16);return c.length&1?`0${c}`:c},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},Af=BigInt(0),fa=BigInt(1);BigInt(2);const QD=BigInt(3);BigInt(4);function pfe(e){const t=dfe(e),{Fp:n}=t,r=t.toBytes||((g,y,U)=>{const x=y.toAffine();return N2(Uint8Array.from([4]),n.toBytes(x.x),n.toBytes(x.y))}),i=t.fromBytes||(g=>{const y=g.subarray(1),U=n.fromBytes(y.subarray(0,n.BYTES)),x=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:U,y:x}});function s(g){const{a:y,b:U}=t,x=n.sqr(g),v=n.mul(x,g);return n.add(n.add(v,n.mul(g,y)),U)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&Af<g&&g<t.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(g){const{allowedPrivateKeyLengths:y,nByteLength:U,wrapPrivateKey:x,n:v}=t;if(y&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=ag(g)),typeof g!="string"||!y.includes(g.length))throw new Error("Invalid key");g=g.padStart(U*2,"0")}let E;try{E=typeof g=="bigint"?g:Th(Ka("private key",g,U))}catch{throw new Error(`private key must be ${U} bytes, hex or bigint, not ${typeof g}`)}return x&&(E=Js(E,v)),a(E),E}const f=new Map;function c(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(y,U,x){if(this.px=y,this.py=U,this.pz=x,y==null||!n.isValid(y))throw new Error("x required");if(U==null||!n.isValid(U))throw new Error("y required");if(x==null||!n.isValid(x))throw new Error("z required")}static fromAffine(y){const{x:U,y:x}=y||{};if(!y||!n.isValid(U)||!n.isValid(x))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");const v=E=>n.eql(E,n.ZERO);return v(U)&&v(x)?d.ZERO:new d(U,x,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const U=n.invertBatch(y.map(x=>x.pz));return y.map((x,v)=>x.toAffine(U[v])).map(d.fromAffine)}static fromHex(y){const U=d.fromAffine(i(Ka("pointHex",y)));return U.assertValidity(),U}static fromPrivateKey(y){return d.BASE.multiply(l(y))}_setWindowSize(y){this._WINDOW_SIZE=y,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:y,y:U}=this.toAffine();if(!n.isValid(y)||!n.isValid(U))throw new Error("bad point: x or y not FE");const x=n.sqr(U),v=s(y);if(!n.eql(x,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){c(y);const{px:U,py:x,pz:v}=this,{px:E,py:k,pz:M}=y,S=n.eql(n.mul(U,M),n.mul(E,v)),A=n.eql(n.mul(x,M),n.mul(k,v));return S&&A}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:U}=t,x=n.mul(U,QD),{px:v,py:E,pz:k}=this;let M=n.ZERO,S=n.ZERO,A=n.ZERO,I=n.mul(v,v),R=n.mul(E,E),D=n.mul(k,k),_=n.mul(v,E);return _=n.add(_,_),A=n.mul(v,k),A=n.add(A,A),M=n.mul(y,A),S=n.mul(x,D),S=n.add(M,S),M=n.sub(R,S),S=n.add(R,S),S=n.mul(M,S),M=n.mul(_,M),A=n.mul(x,A),D=n.mul(y,D),_=n.sub(I,D),_=n.mul(y,_),_=n.add(_,A),A=n.add(I,I),I=n.add(A,I),I=n.add(I,D),I=n.mul(I,_),S=n.add(S,I),D=n.mul(E,k),D=n.add(D,D),I=n.mul(D,_),M=n.sub(M,I),A=n.mul(D,R),A=n.add(A,A),A=n.add(A,A),new d(M,S,A)}add(y){c(y);const{px:U,py:x,pz:v}=this,{px:E,py:k,pz:M}=y;let S=n.ZERO,A=n.ZERO,I=n.ZERO;const R=t.a,D=n.mul(t.b,QD);let _=n.mul(U,E),P=n.mul(x,k),$=n.mul(v,M),L=n.add(U,x),B=n.add(E,k);L=n.mul(L,B),B=n.add(_,P),L=n.sub(L,B),B=n.add(U,v);let V=n.add(E,M);return B=n.mul(B,V),V=n.add(_,$),B=n.sub(B,V),V=n.add(x,v),S=n.add(k,M),V=n.mul(V,S),S=n.add(P,$),V=n.sub(V,S),I=n.mul(R,B),S=n.mul(D,$),I=n.add(S,I),S=n.sub(P,I),I=n.add(P,I),A=n.mul(S,I),P=n.add(_,_),P=n.add(P,_),$=n.mul(R,$),B=n.mul(D,B),P=n.add(P,$),$=n.sub(_,$),$=n.mul(R,$),B=n.add(B,$),_=n.mul(P,B),A=n.add(A,_),_=n.mul(V,B),S=n.mul(L,S),S=n.sub(S,_),_=n.mul(L,P),I=n.mul(V,I),I=n.add(I,_),new d(S,A,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return h.wNAFCached(this,f,y,U=>{const x=n.invertBatch(U.map(v=>v.pz));return U.map((v,E)=>v.toAffine(x[E])).map(d.fromAffine)})}multiplyUnsafe(y){const U=d.ZERO;if(y===Af)return U;if(a(y),y===fa)return this;const{endo:x}=t;if(!x)return h.unsafeLadder(this,y);let{k1neg:v,k1:E,k2neg:k,k2:M}=x.splitScalar(y),S=U,A=U,I=this;for(;E>Af||M>Af;)E&fa&&(S=S.add(I)),M&fa&&(A=A.add(I)),I=I.double(),E>>=fa,M>>=fa;return v&&(S=S.negate()),k&&(A=A.negate()),A=new d(n.mul(A.px,x.beta),A.py,A.pz),S.add(A)}multiply(y){a(y);let U=y,x,v;const{endo:E}=t;if(E){const{k1neg:k,k1:M,k2neg:S,k2:A}=E.splitScalar(U);let{p:I,f:R}=this.wNAF(M),{p:D,f:_}=this.wNAF(A);I=h.constTimeNegate(k,I),D=h.constTimeNegate(S,D),D=new d(n.mul(D.px,E.beta),D.py,D.pz),x=I.add(D),v=R.add(_)}else{const{p:k,f:M}=this.wNAF(U);x=k,v=M}return d.normalizeZ([x,v])[0]}multiplyAndAddUnsafe(y,U,x){const v=d.BASE,E=(M,S)=>S===Af||S===fa||!M.equals(v)?M.multiplyUnsafe(S):M.multiply(S),k=E(this,U).add(E(y,x));return k.is0()?void 0:k}toAffine(y){const{px:U,py:x,pz:v}=this,E=this.is0();y==null&&(y=E?n.ONE:n.inv(v));const k=n.mul(U,y),M=n.mul(x,y),S=n.mul(v,y);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:k,y:M}}isTorsionFree(){const{h:y,isTorsionFree:U}=t;if(y===fa)return!0;if(U)return U(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:U}=t;return y===fa?this:U?U(d,this):this.multiplyUnsafe(t.h)}toRawBytes(y=!0){return this.assertValidity(),r(d,this,y)}toHex(y=!0){return ag(this.toRawBytes(y))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const u=t.nBitLength,h=ffe(d,t.endo?Math.ceil(u/2):u);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function mfe(e){const t=aG(e);return Qb(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function gfe(e){const t=mfe(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(B){return Af<B&&B<n.ORDER}function a(B){return Js(B,r)}function l(B){return tC(B,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:u}=pfe({...t,toBytes(B,V,z){const G=V.toAffine(),W=n.toBytes(G.x),F=N2;return z?F(Uint8Array.from([V.hasEvenY()?2:3]),W):F(Uint8Array.from([4]),W,n.toBytes(G.y))},fromBytes(B){const V=B.length,z=B[0],G=B.subarray(1);if(V===i&&(z===2||z===3)){const W=Th(G);if(!o(W))throw new Error("Point is not on curve");const F=d(W);let K=n.sqrt(F);const q=(K&fa)===fa;return(z&1)===1!==q&&(K=n.neg(K)),{x:W,y:K}}else if(V===s&&z===4){const W=n.fromBytes(G.subarray(0,n.BYTES)),F=n.fromBytes(G.subarray(n.BYTES,2*n.BYTES));return{x:W,y:F}}else throw new Error(`Point of length ${V} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=B=>ag(cg(B,t.nByteLength));function g(B){const V=r>>fa;return B>V}function y(B){return g(B)?a(-B):B}const U=(B,V,z)=>Th(B.slice(V,z));class x{constructor(V,z,G){this.r=V,this.s=z,this.recovery=G,this.assertValidity()}static fromCompact(V){const z=t.nByteLength;return V=Ka("compactSignature",V,z*2),new x(U(V,0,z),U(V,z,2*z))}static fromDER(V){const{r:z,s:G}=Y0.toSig(Ka("DER",V));return new x(z,G)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(V){return new x(this.r,this.s,V)}recoverPublicKey(V){const{r:z,s:G,recovery:W}=this,F=A(Ka("msgHash",V));if(W==null||![0,1,2,3].includes(W))throw new Error("recovery id invalid");const K=W===2||W===3?z+t.n:z;if(K>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=W&1?"03":"02",Y=f.fromHex(q+h(K)),ae=l(K),ge=a(-F*ae),he=a(G*ae),ce=f.BASE.multiplyAndAddUnsafe(Y,ge,he);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return lg(this.toDERHex())}toDERHex(){return Y0.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return lg(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const v={isValidPrivateKey(B){try{return c(B),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const B=oG(t.n);return lfe(t.randomBytes(B),t.n)},precompute(B=8,V=f.BASE){return V._setWindowSize(B),V.multiply(BigInt(3)),V}};function E(B,V=!0){return f.fromPrivateKey(B).toRawBytes(V)}function k(B){const V=B instanceof Uint8Array,z=typeof B=="string",G=(V||z)&&B.length;return V?G===i||G===s:z?G===2*i||G===2*s:B instanceof f}function M(B,V,z=!0){if(k(B))throw new Error("first arg must be private key");if(!k(V))throw new Error("second arg must be public key");return f.fromHex(V).multiply(c(B)).toRawBytes(z)}const S=t.bits2int||function(B){const V=Th(B),z=B.length*8-t.nBitLength;return z>0?V>>BigInt(z):V},A=t.bits2int_modN||function(B){return a(S(B))},I=lT(t.nBitLength);function R(B){if(typeof B!="bigint")throw new Error("bigint expected");if(!(Af<=B&&B<I))throw new Error(`bigint expected < 2^${t.nBitLength}`);return cg(B,t.nByteLength)}function D(B,V,z=_){if(["recovered","canonical"].some(we=>we in z))throw new Error("sign() legacy options not supported");const{hash:G,randomBytes:W}=t;let{lowS:F,prehash:K,extraEntropy:q}=z;F==null&&(F=!0),B=Ka("msgHash",B),K&&(B=Ka("prehashed msgHash",G(B)));const Y=A(B),ae=c(V),ge=[R(ae),R(Y)];if(q!=null){const we=q===!0?W(n.BYTES):q;ge.push(Ka("extraEntropy",we))}const he=N2(...ge),ce=Y;function ie(we){const Ee=S(we);if(!u(Ee))return;const _e=l(Ee),Fe=f.BASE.multiply(Ee).toAffine(),He=a(Fe.x);if(He===Af)return;const ve=a(_e*a(ce+He*ae));if(ve===Af)return;let De=(Fe.x===He?0:2)|Number(Fe.y&fa),Ae=ve;return F&&g(ve)&&(Ae=y(ve),De^=1),new x(He,Ae,De)}return{seed:he,k2sig:ie}}const _={lowS:t.lowS,prehash:!1},P={lowS:t.lowS,prehash:!1};function $(B,V,z=_){const{seed:G,k2sig:W}=D(B,V,z),F=t;return rG(F.hash.outputLen,F.nByteLength,F.hmac)(G,W)}f.BASE._setWindowSize(8);function L(B,V,z,G=P){var Fe;const W=B;if(V=Ka("msgHash",V),z=Ka("publicKey",z),"strict"in G)throw new Error("options.strict was renamed to lowS");const{lowS:F,prehash:K}=G;let q,Y;try{if(typeof W=="string"||W instanceof Uint8Array)try{q=x.fromDER(W)}catch(He){if(!(He instanceof Y0.Err))throw He;q=x.fromCompact(W)}else if(typeof W=="object"&&typeof W.r=="bigint"&&typeof W.s=="bigint"){const{r:He,s:ve}=W;q=new x(He,ve)}else throw new Error("PARSE");Y=f.fromHex(z)}catch(He){if(He.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&q.hasHighS())return!1;K&&(V=t.hash(V));const{r:ae,s:ge}=q,he=A(V),ce=l(ge),ie=a(he*ce),we=a(ae*ce),Ee=(Fe=f.BASE.multiplyAndAddUnsafe(Y,ie,we))==null?void 0:Fe.toAffine();return Ee?a(Ee.x)===ae:!1}return{CURVE:t,getPublicKey:E,getSharedSecret:M,sign:$,verify:L,ProjectivePoint:f,Signature:x,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bfe(e){return{hash:e,hmac:(t,...n)=>OW(e,t,ice(...n)),randomBytes:sce}}function yfe(e,t){const n=r=>gfe({...e,...bfe(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lG=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),JD=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ufe=BigInt(1),nC=BigInt(2),eL=(e,t)=>(e+t/nC)/t;function xfe(e){const t=lG,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),f=e*e*e%t,c=f*f*e%t,d=Qo(c,n,t)*c%t,u=Qo(d,n,t)*c%t,h=Qo(u,nC,t)*f%t,g=Qo(h,i,t)*h%t,y=Qo(g,s,t)*g%t,U=Qo(y,a,t)*y%t,x=Qo(U,l,t)*U%t,v=Qo(x,a,t)*y%t,E=Qo(v,n,t)*c%t,k=Qo(E,o,t)*g%t,M=Qo(k,r,t)*f%t,S=Qo(M,nC,t);if(!rC.eql(rC.sqr(S),e))throw new Error("Cannot find square root");return S}const rC=afe(lG,void 0,void 0,{sqrt:xfe}),zd=yfe({a:BigInt(0),b:BigInt(7),Fp:rC,n:JD,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=JD,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ufe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=eL(s*e,t),l=eL(-r*e,t);let f=Js(e-a*n-l*i,t),c=Js(-a*r-l*s,t);const d=f>o,u=c>o;if(d&&(f=t-f),u&&(c=t-c),f>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:f,k2neg:u,k2:c}}}},BW);BigInt(0);zd.ProjectivePoint;const R2="0x0000000000000000000000000000000000000000",tL="0x0000000000000000000000000000000000000000000000000000000000000000",nL=BigInt(0),rL=BigInt(1),iL=BigInt(2),sL=BigInt(27),oL=BigInt(28),Q8=BigInt(35),op={};function aL(e){return Gh(Ss(e),32)}var Mm,Tm,Im,yh;const Xa=class Xa{constructor(t,n,r,i){be(this,Mm);be(this,Tm);be(this,Im);be(this,yh);qb(t,op,"Signature"),ee(this,Mm,n),ee(this,Tm,r),ee(this,Im,i),ee(this,yh,null)}get r(){return X(this,Mm)}set r(t){se(tm(t)===32,"invalid r","value",t),ee(this,Mm,nt(t))}get s(){return X(this,Tm)}set s(t){se(tm(t)===32,"invalid s","value",t);const n=nt(t);se(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),ee(this,Tm,n)}get v(){return X(this,Im)}set v(t){const n=zt(t,"value");se(n===27||n===28,"invalid v","v",t),ee(this,Im,n)}get networkV(){return X(this,yh)}get legacyChainId(){const t=this.networkV;return t==null?null:Xa.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=nn(this.s);return this.yParity&&(t[0]|=128),nt(t)}get compactSerialized(){return Br([this.r,this.yParityAndS])}get serialized(){return Br([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Xa(op,this.r,this.s,this.v);return this.networkV&&ee(t,yh,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const n=at(t,"v");return n==sL||n==oL?nL:(se(n>=Q8,"invalid EIP-155 v","v",t),(n-Q8)/iL)}static getChainIdV(t,n){return at(t)*iL+BigInt(35+n-27)}static getNormalizedV(t){const n=at(t);return n===nL||n===sL?27:n===rL||n===oL?28:(se(n>=Q8,"invalid v","v",t),n&rL?27:28)}static from(t){function n(f,c){se(f,c,"signature",t)}if(t==null)return new Xa(op,tL,tL,27);if(typeof t=="string"){const f=nn(t,"signature");if(f.length===64){const c=nt(f.slice(0,32)),d=f.slice(32,64),u=d[0]&128?28:27;return d[0]&=127,new Xa(op,c,nt(d),u)}if(f.length===65){const c=nt(f.slice(0,32)),d=f.slice(32,64);n((d[0]&128)===0,"non-canonical s");const u=Xa.getNormalizedV(f[64]);return new Xa(op,c,nt(d),u)}n(!1,"invalid raw signature length")}if(t instanceof Xa)return t.clone();const r=t.r;n(r!=null,"missing r");const i=aL(r),s=function(f,c){if(f!=null)return aL(f);if(c!=null){n($n(c,32),"invalid yParityAndS");const d=nn(c);return d[0]&=127,nt(d)}n(!1,"missing s")}(t.s,t.yParityAndS);n((nn(s)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(f,c,d){if(f!=null){const u=at(f);return{networkV:u>=Q8?u:void 0,v:Xa.getNormalizedV(u)}}if(c!=null)return n($n(c,32),"invalid yParityAndS"),{v:nn(c)[0]&128?28:27};if(d!=null){switch(zt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),l=new Xa(op,i,s,a);return o&&ee(l,yh,o),n(t.yParity==null||zt(t.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(t.yParityAndS==null||t.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Mm=new WeakMap,Tm=new WeakMap,Im=new WeakMap,yh=new WeakMap;let wl=Xa;var yf;const G0=class G0{constructor(t){be(this,yf);se(tm(t)===32,"invalid private key","privateKey","[REDACTED]"),ee(this,yf,nt(t))}get privateKey(){return X(this,yf)}get publicKey(){return G0.computePublicKey(X(this,yf))}get compressedPublicKey(){return G0.computePublicKey(X(this,yf),!0)}sign(t){se(tm(t)===32,"invalid digest length","digest",t);const n=zd.sign(ks(t),ks(X(this,yf)),{lowS:!0});return wl.from({r:$u(n.r,32),s:$u(n.s,32),v:n.recovery?28:27})}computeSharedSecret(t){const n=G0.computePublicKey(t);return nt(zd.getSharedSecret(ks(X(this,yf)),nn(n),!1))}static computePublicKey(t,n){let r=nn(t,"key");if(r.length===32){const s=zd.getPublicKey(r,!!n);return nt(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=zd.ProjectivePoint.fromHex(r);return nt(i.toRawBytes(n))}static recoverPublicKey(t,n){se(tm(t)===32,"invalid digest length","digest",t);const r=wl.from(n);let i=zd.Signature.fromCompact(ks(Br([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(ks(t));return se(s!=null,"invalid signautre for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(t,n,r){const i=zd.ProjectivePoint.fromHex(G0.computePublicKey(t).substring(2)),s=zd.ProjectivePoint.fromHex(G0.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};yf=new WeakMap;let _2=G0;const wfe=BigInt(0),vfe=BigInt(36);function lL(e){e=e.toLowerCase();const t=e.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=t[i].charCodeAt(0);const r=nn(Kr(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(r[i>>1]&15)>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const cT={};for(let e=0;e<10;e++)cT[String(e)]=String(e);for(let e=0;e<26;e++)cT[String.fromCharCode(65+e)]=String(10+e);const cL=15;function Efe(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map(r=>cT[r]).join("");for(;t.length>=cL;){let r=t.substring(0,cL);t=parseInt(r,10)%97+t.substring(r.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const kfe=function(){const e={};for(let t=0;t<36;t++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[t];e[n]=BigInt(t)}return e}();function Sfe(e){e=e.toLowerCase();let t=wfe;for(let n=0;n<e.length;n++)t=t*vfe+kfe[e[n]];return t}function In(e){if(se(typeof e=="string","invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=lL(e);return se(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){se(e.substring(2,4)===Efe(e),"bad icap checksum","address",e);let t=Sfe(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return lL("0x"+t)}se(!1,"invalid address","address",e)}function Cfe(e){const t=In(e.from);let r=at(e.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,In(Tr(Kr(Xh([t,r])),12))}function cG(e){return e&&typeof e.getAddress=="function"}async function fE(e,t){const n=await t;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Se(typeof e!="string","unconfigured name","UNCONFIGURED_NAME",{value:e}),se(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),In(n)}function As(e,t){if(typeof e=="string")return e.match(/^0x[0-9a-f]{40}$/i)?In(e):(Se(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),fE(e,t.resolveName(e)));if(cG(e))return fE(e,e.getAddress());if(e&&typeof e.then=="function")return fE(e,e);se(!1,"unsupported addressable value","target",e)}const of={};function et(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new cs(of,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function dn(e,t){return new cs(of,`bytes${t||""}`,e,{size:t})}const fL=Symbol.for("_ethers_typed");var Uh;const ff=class ff{constructor(t,n,r,i){fe(this,"type");fe(this,"value");be(this,Uh);fe(this,"_typedSymbol");i==null&&(i=null),qb(of,t,"Typed"),yt(this,{_typedSymbol:fL,type:n,value:r}),ee(this,Uh,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return X(this,Uh)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return X(this,Uh)===!0?-1:X(this,Uh)===!1?this.value.length:null}static from(t,n){return new ff(of,t,n)}static uint8(t){return et(t,8)}static uint16(t){return et(t,16)}static uint24(t){return et(t,24)}static uint32(t){return et(t,32)}static uint40(t){return et(t,40)}static uint48(t){return et(t,48)}static uint56(t){return et(t,56)}static uint64(t){return et(t,64)}static uint72(t){return et(t,72)}static uint80(t){return et(t,80)}static uint88(t){return et(t,88)}static uint96(t){return et(t,96)}static uint104(t){return et(t,104)}static uint112(t){return et(t,112)}static uint120(t){return et(t,120)}static uint128(t){return et(t,128)}static uint136(t){return et(t,136)}static uint144(t){return et(t,144)}static uint152(t){return et(t,152)}static uint160(t){return et(t,160)}static uint168(t){return et(t,168)}static uint176(t){return et(t,176)}static uint184(t){return et(t,184)}static uint192(t){return et(t,192)}static uint200(t){return et(t,200)}static uint208(t){return et(t,208)}static uint216(t){return et(t,216)}static uint224(t){return et(t,224)}static uint232(t){return et(t,232)}static uint240(t){return et(t,240)}static uint248(t){return et(t,248)}static uint256(t){return et(t,256)}static uint(t){return et(t,256)}static int8(t){return et(t,-8)}static int16(t){return et(t,-16)}static int24(t){return et(t,-24)}static int32(t){return et(t,-32)}static int40(t){return et(t,-40)}static int48(t){return et(t,-48)}static int56(t){return et(t,-56)}static int64(t){return et(t,-64)}static int72(t){return et(t,-72)}static int80(t){return et(t,-80)}static int88(t){return et(t,-88)}static int96(t){return et(t,-96)}static int104(t){return et(t,-104)}static int112(t){return et(t,-112)}static int120(t){return et(t,-120)}static int128(t){return et(t,-128)}static int136(t){return et(t,-136)}static int144(t){return et(t,-144)}static int152(t){return et(t,-152)}static int160(t){return et(t,-160)}static int168(t){return et(t,-168)}static int176(t){return et(t,-176)}static int184(t){return et(t,-184)}static int192(t){return et(t,-192)}static int200(t){return et(t,-200)}static int208(t){return et(t,-208)}static int216(t){return et(t,-216)}static int224(t){return et(t,-224)}static int232(t){return et(t,-232)}static int240(t){return et(t,-240)}static int248(t){return et(t,-248)}static int256(t){return et(t,-256)}static int(t){return et(t,-256)}static bytes1(t){return dn(t,1)}static bytes2(t){return dn(t,2)}static bytes3(t){return dn(t,3)}static bytes4(t){return dn(t,4)}static bytes5(t){return dn(t,5)}static bytes6(t){return dn(t,6)}static bytes7(t){return dn(t,7)}static bytes8(t){return dn(t,8)}static bytes9(t){return dn(t,9)}static bytes10(t){return dn(t,10)}static bytes11(t){return dn(t,11)}static bytes12(t){return dn(t,12)}static bytes13(t){return dn(t,13)}static bytes14(t){return dn(t,14)}static bytes15(t){return dn(t,15)}static bytes16(t){return dn(t,16)}static bytes17(t){return dn(t,17)}static bytes18(t){return dn(t,18)}static bytes19(t){return dn(t,19)}static bytes20(t){return dn(t,20)}static bytes21(t){return dn(t,21)}static bytes22(t){return dn(t,22)}static bytes23(t){return dn(t,23)}static bytes24(t){return dn(t,24)}static bytes25(t){return dn(t,25)}static bytes26(t){return dn(t,26)}static bytes27(t){return dn(t,27)}static bytes28(t){return dn(t,28)}static bytes29(t){return dn(t,29)}static bytes30(t){return dn(t,30)}static bytes31(t){return dn(t,31)}static bytes32(t){return dn(t,32)}static address(t){return new ff(of,"address",t)}static bool(t){return new ff(of,"bool",!!t)}static bytes(t){return new ff(of,"bytes",t)}static string(t){return new ff(of,"string",t)}static array(t,n){throw new Error("not implemented yet")}static tuple(t,n){throw new Error("not implemented yet")}static overrides(t){return new ff(of,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===fL}static dereference(t,n){if(ff.isTyped(t)){if(t.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${t.type}`);return t.value}return t}};Uh=new WeakMap;let cs=ff;class Afe extends td{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,n){let r=cs.dereference(n,"string");try{r=In(r)}catch(i){return this._throwError(i.message,n)}return t.writeValue(r)}decode(t){return In($u(t.readValue(),20))}}class Mfe extends td{constructor(n){super(n.name,n.type,"_",n.dynamic);fe(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function fG(e,t,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=t.map(f=>{const c=f.localName;return Se(c,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:n}),Se(!l[c],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:n}),l[c]=!0,n[c]})}else se(!1,"invalid tuple value","tuple",n);se(t.length===r.length,"types/value length mismatch","tuple",n);let i=new ZS,s=new ZS,o=[];t.forEach((l,f)=>{let c=r[f];if(l.dynamic){let d=s.length;l.encode(s,c);let u=i.writeUpdatableValue();o.push(h=>{u(h+d)})}else l.encode(i,c)}),o.forEach(l=>{l(i.length)});let a=e.appendWriter(i);return a+=e.appendWriter(s),a}function dG(e,t){let n=[],r=[],i=e.subReader(0);return t.forEach(s=>{let o=null;if(s.dynamic){let a=e.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(f){if(ss(f,"BUFFER_OVERRUN"))throw f;o=f,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(e)}catch(a){if(ss(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),sg.fromItems(n,r)}class Tfe extends td{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);fe(this,"coder");fe(this,"length");yt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=cs.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),xW(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return fG(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Se(r*Cs<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Cs,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new Mfe(this.coder));return dG(n,i)}}class Ife extends td{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,n){const r=cs.dereference(n,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class uG extends td{constructor(t,n){super(t,t,n,!0)}defaultValue(){return"0x"}encode(t,n){n=ks(n);let r=t.writeValue(n.length);return r+=t.writeBytes(n),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class Nfe extends uG{constructor(t){super("bytes",t)}decode(t){return nt(super.decode(t))}}class Rfe extends td{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);fe(this,"size");yt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=ks(cs.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return nt(n.readBytes(this.size))}}const _fe=new Uint8Array([]);class Pfe extends td{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,n){return n!=null&&this._throwError("not null",n),t.writeBytes(_fe)}decode(t){return t.readBytes(0),null}}const Dfe=BigInt(0),Lfe=BigInt(1),Ofe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class jfe extends td{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);fe(this,"size");fe(this,"signed");yt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=at(cs.dereference(r,this.type)),s=K0(Ofe,Cs*8);if(this.signed){let o=K0(s,this.size*8-1);(i>o||i<-(o+Lfe))&&this._throwError("value out-of-bounds",r),i=EW(i,8*Cs)}else(i<Dfe||i>K0(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=K0(n.readValue(),this.size*8);return this.signed&&(r=ox(r,this.size*8)),r}}class Bfe extends uG{constructor(t){super("string",t)}defaultValue(){return""}encode(t,n){return super.encode(t,Df(cs.dereference(n,"string")))}decode(t){return ax(super.decode(t))}}class J8 extends td{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);fe(this,"coders");yt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=cs.dereference(r,"tuple");return fG(n,this.coders,i)}decode(n){return dG(n,this.coders)}}function Kh(e){return Kr(Df(e))}var Ffe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const dL=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),uL=4;function zfe(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),i=1,s=[0,1];for(let M=1;M<r;M++)s.push(i+=n());let o=n(),a=t;t+=o;let l=0,f=0;function c(){return l==0&&(f=f<<8|e[t++],l=8),f>>--l&1}const d=31,u=2**d,h=u>>>1,g=h>>1,y=u-1;let U=0;for(let M=0;M<d;M++)U=U<<1|c();let x=[],v=0,E=u;for(;;){let M=Math.floor(((U-v+1)*i-1)/E),S=0,A=r;for(;A-S>1;){let D=S+A>>>1;M<s[D]?A=D:S=D}if(S==0)break;x.push(S);let I=v+Math.floor(E*s[S]/i),R=v+Math.floor(E*s[S+1]/i)-1;for(;!((I^R)&h);)U=U<<1&y|c(),I=I<<1&y,R=R<<1&y|1;for(;I&~R&g;)U=U&h|U<<1&y>>>1|c(),I=I<<1^h,R=(R^h)<<1|h|1;v=I,E=1+R-I}let k=r-4;return x.map(M=>{switch(M-k){case 3:return k+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return k+256+(e[a++]<<8|e[a++]);case 1:return k+e[a++];default:return M-1}})}function $fe(e){let t=0;return()=>e[t++]}function hG(e){return $fe(zfe(Hfe(e)))}function Hfe(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>t[i.charCodeAt(0)]=s);let n=e.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|t[e.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function Vfe(e){return e&1?~e>>1:e>>1}function Wfe(e,t){let n=Array(e);for(let r=0,i=0;r<e;r++)n[r]=i+=Vfe(t());return n}function P2(e,t=0){let n=[];for(;;){let r=e(),i=e();if(!i)break;t+=r;for(let s=0;s<i;s++)n.push(t+s);t+=i+1}return n}function pG(e){return D2(()=>{let t=P2(e);if(t.length)return t})}function mG(e){let t=[];for(;;){let n=e();if(n==0)break;t.push(Gfe(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(Xfe(n,e))}return t.flat()}function D2(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function gG(e,t,n){let r=Array(e).fill().map(()=>[]);for(let i=0;i<t;i++)Wfe(e,n).forEach((s,o)=>r[o].push(s));return r}function Gfe(e,t){let n=1+t(),r=t(),i=D2(t);return gG(i.length,1+e,t).flatMap((o,a)=>{let[l,...f]=o;return Array(i[a]).fill().map((c,d)=>{let u=d*r;return[l+d*n,f.map(h=>h+u)]})})}function Xfe(e,t){let n=1+t();return gG(n,1+e,t).map(i=>[i[0],i.slice(1)])}function Kfe(e){let t=[],n=P2(e);return i(r([]),[]),t;function r(s){let o=e(),a=D2(()=>{let l=P2(e).map(f=>n[f]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&t.push(a);for(let f of o)for(let c of f.Q)i(f,[...a,c],l)}}}function Yfe(e){return e.toString(16).toUpperCase().padStart(2,"0")}function bG(e){return`{${Yfe(e)}}`}function Zfe(e){let t=[];for(let n=0,r=e.length;n<r;){let i=e.codePointAt(n);n+=i<65536?1:2,t.push(i)}return t}function fg(e){let n=e.length;if(n<4096)return String.fromCodePoint(...e);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...e.slice(i,i+=4096)));return r.join("")}function qfe(e,t){let n=e.length,r=n-t.length;for(let i=0;r==0&&i<n;i++)r=e[i]-t[i];return r}var Qfe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const L2=44032,fx=4352,dx=4449,ux=4519,yG=19,UG=21,dg=28,hx=UG*dg,Jfe=yG*hx,ede=L2+Jfe,tde=fx+yG,nde=dx+UG,rde=ux+dg;function C5(e){return e>>24&255}function xG(e){return e&16777215}let iC,hL,sC,o3;function ide(){let e=hG(Qfe);iC=new Map(pG(e).flatMap((t,n)=>t.map(r=>[r,n+1<<24]))),hL=new Set(P2(e)),sC=new Map,o3=new Map;for(let[t,n]of mG(e)){if(!hL.has(t)&&n.length==2){let[r,i]=n,s=o3.get(r);s||(s=new Map,o3.set(r,s)),s.set(i,t)}sC.set(t,n.reverse())}}function wG(e){return e>=L2&&e<ede}function sde(e,t){if(e>=fx&&e<tde&&t>=dx&&t<nde)return L2+(e-fx)*hx+(t-dx)*dg;if(wG(e)&&t>ux&&t<rde&&(e-L2)%dg==0)return e+(t-ux);{let n=o3.get(e);return n&&(n=n.get(t),n)?n:-1}}function vG(e){iC||ide();let t=[],n=[],r=!1;function i(s){let o=iC.get(s);o&&(r=!0,s|=o),t.push(s)}for(let s of e)for(;;){if(s<128)t.push(s);else if(wG(s)){let o=s-L2,a=o/hx|0,l=o%hx/dg|0,f=o%dg;i(fx+a),i(dx+l),f>0&&i(ux+f)}else{let o=sC.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&t.length>1){let s=C5(t[0]);for(let o=1;o<t.length;o++){let a=C5(t[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let f=t[l+1];if(t[l+1]=t[l],t[l]=f,!l||(s=C5(t[--l]),s<=a))break}s=C5(t[o])}}return t}function ode(e){let t=[],n=[],r=-1,i=0;for(let s of e){let o=C5(s),a=xG(s);if(r==-1)o==0?r=a:t.push(a);else if(i>0&&i>=o)o==0?(t.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=sde(r,a);l>=0?r=l:i==0&&o==0?(t.push(r),r=a):(n.push(a),i=o)}}return r>=0&&t.push(r,...n),t}function EG(e){return vG(e).map(xG)}function ade(e){return ode(vG(e))}const pL=45,kG=".",SG=65039,CG=1,px=e=>Array.from(e);function O2(e,t){return e.P.has(t)||e.Q.has(t)}class lde extends Array{get is_emoji(){return!0}}let oC,AG,Z0,aC,MG,rm,dE,Cp,R0,mL,lC;function fT(){if(oC)return;let e=hG(Ffe);const t=()=>P2(e),n=()=>new Set(t()),r=(c,d)=>d.forEach(u=>c.add(u));oC=new Map(mG(e)),AG=n(),Z0=t(),aC=new Set(t().map(c=>Z0[c])),Z0=new Set(Z0),MG=n(),n();let i=pG(e),s=e();const o=()=>{let c=new Set;return t().forEach(d=>r(c,i[d])),r(c,t()),c};rm=D2(c=>{let d=D2(e).map(u=>u+96);if(d.length){let u=c>=s;d[0]-=32,d=fg(d),u&&(d=`Restricted[${d}]`);let h=o(),g=o(),y=!e();return{N:d,P:h,Q:g,M:y,R:u}}}),dE=n(),Cp=new Map;let a=t().concat(px(dE)).sort((c,d)=>c-d);a.forEach((c,d)=>{let u=e(),h=a[d]=u?a[d-u]:{V:[],M:new Map};h.V.push(c),dE.has(c)||Cp.set(c,h)});for(let{V:c,M:d}of new Set(Cp.values())){let u=[];for(let g of c){let y=rm.filter(x=>O2(x,g)),U=u.find(({G:x})=>y.some(v=>x.has(v)));U||(U={G:new Set,V:[]},u.push(U)),U.V.push(g),r(U.G,y)}let h=u.flatMap(g=>px(g.G));for(let{G:g,V:y}of u){let U=new Set(h.filter(x=>!g.has(x)));for(let x of y)d.set(x,U)}}R0=new Set;let l=new Set;const f=c=>R0.has(c)?l.add(c):R0.add(c);for(let c of rm){for(let d of c.P)f(d);for(let d of c.Q)f(d)}for(let c of R0)!Cp.has(c)&&!l.has(c)&&Cp.set(c,CG);r(R0,EG(R0)),mL=Kfe(e).map(c=>lde.from(c)).sort(qfe),lC=new Map;for(let c of mL){let d=[lC];for(let u of c){let h=d.map(g=>{let y=g.get(u);return y||(y=new Map,g.set(u,y)),y});u===SG?d.push(...h):d=h}for(let u of d)u.V=c}}function dT(e){return(TG(e)?"":`${uT(I9([e]))} `)+bG(e)}function uT(e){return`"${e}"`}function cde(e){if(e.length>=4&&e[2]==pL&&e[3]==pL)throw new Error(`invalid label extension: "${fg(e.slice(0,4))}"`)}function fde(e){for(let n=e.lastIndexOf(95);n>0;)if(e[--n]!==95)throw new Error("underscore allowed only at start")}function dde(e){let t=e[0],n=dL.get(t);if(n)throw Z5(`leading ${n}`);let r=e.length,i=-1;for(let s=1;s<r;s++){t=e[s];let o=dL.get(t);if(o){if(i==s)throw Z5(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw Z5(`trailing ${n}`)}function I9(e,t=1/0,n=bG){let r=[];ude(e[0])&&r.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,s=e.length;for(let o=0;o<s;o++){let a=e[o];TG(a)&&(r.push(fg(e.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(fg(e.slice(i,s))),r.join("")}function ude(e){return fT(),Z0.has(e)}function TG(e){return fT(),MG.has(e)}function hde(e){return bde(pde(e,ade,xde))}function pde(e,t,n){if(!e)return[];fT();let r=0;return e.split(kG).map(i=>{let s=Zfe(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=Ude(s,t,n),l=a.length,f;if(!l)throw new Error("empty label");let c=o.output=a.flat();if(fde(c),!(o.emoji=l>1||a[0].is_emoji)&&c.every(u=>u<128))cde(c),f="ASCII";else{let u=a.flatMap(h=>h.is_emoji?[]:h);if(!u.length)f="Emoji";else{if(Z0.has(c[0]))throw Z5("leading combining mark");for(let y=1;y<l;y++){let U=a[y];if(!U.is_emoji&&Z0.has(U[0]))throw Z5(`emoji + combining mark: "${fg(a[y-1])} + ${I9([U[0]])}"`)}dde(c);let h=px(new Set(u)),[g]=gde(h);yde(g,u),mde(g,h),f=g.N}}o.type=f}catch(a){o.error=a}return o})}function mde(e,t){let n,r=[];for(let i of t){let s=Cp.get(i);if(s===CG)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):px(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>O2(i,s)))throw new Error(`whole-script confusable: ${e.N}/${i.N}`)}}function gde(e){let t=rm;for(let n of e){let r=t.filter(i=>O2(i,n));if(!r.length)throw rm.some(i=>O2(i,n))?NG(t[0],n):IG(n);if(t=r,r.length==1)break}return t}function bde(e){return e.map(({input:t,error:n,output:r})=>{if(n){let i=n.message;throw new Error(e.length==1?i:`Invalid label ${uT(I9(t,63))}: ${i}`)}return fg(r)}).join(kG)}function IG(e){return new Error(`disallowed character: ${dT(e)}`)}function NG(e,t){let n=dT(t),r=rm.find(i=>i.P.has(t));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function Z5(e){return new Error(`illegal placement: ${e}`)}function yde(e,t){for(let n of t)if(!O2(e,n))throw NG(e,n);if(e.M){let n=EG(t);for(let r=1,i=n.length;r<i;r++)if(aC.has(n[r])){let s=r+1;for(let o;s<i&&aC.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${dT(o)}`);if(s-r>uL)throw new Error(`excessive non-spacing marks: ${uT(I9(n.slice(r-1,s)))} (${s-r}/${uL})`);r=s}}}function Ude(e,t,n){let r=[],i=[];for(e=e.slice().reverse();e.length;){let s=wde(e);if(s)i.length&&(r.push(t(i)),i=[]),r.push(n(s));else{let o=e.pop();if(R0.has(o))i.push(o);else{let a=oC.get(o);if(a)i.push(...a);else if(!AG.has(o))throw IG(o)}}}return i.length&&r.push(t(i)),r}function xde(e){return e.filter(t=>t!=SG)}function wde(e,t){let n=lC,r,i=e.length;for(;i&&(n=n.get(e[--i]),!!n);){let{V:s}=n;s&&(r=s,e.length=i)}return r}const RG=new Uint8Array(32);RG.fill(0);function gL(e){return se(e.length!==0,"invalid ENS name; empty component","comp",e),e}function _G(e){const t=Df(vde(e)),n=[];if(e.length===0)return n;let r=0;for(let i=0;i<t.length;i++)t[i]===46&&(n.push(gL(t.slice(r,i))),r=i+1);return se(r<t.length,"invalid ENS name; empty component","name",e),n.push(gL(t.slice(r))),n}function vde(e){try{if(e.length===0)throw new Error("empty label");return hde(e)}catch(t){se(!1,`invalid ENS name (${t.message})`,"name",e)}}function cC(e){se(typeof e=="string","invalid ENS name; not a string","name",e),se(e.length,"invalid ENS name (empty label)","name",e);let t=RG;const n=_G(e);for(;n.length;)t=Kr(Br([t,Kr(n.pop())]));return nt(t)}function Ede(e,t){const n=t;return se(n<=255,"DNS encoded label cannot exceed 255","length",n),nt(Br(_G(e).map(r=>{se(r.length<=n,`label ${JSON.stringify(e)} exceeds ${n} bytes`,"name",e);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function uE(e,t){return{address:In(e),storageKeys:t.map((n,r)=>(se($n(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function E1(e){if(Array.isArray(e))return e.map((n,r)=>Array.isArray(n)?(se(n.length===2,"invalid slot set",`value[${r}]`,n),uE(n[0],n[1])):(se(n!=null&&typeof n=="object","invalid address-slot set","value",e),uE(n.address,n.storageKeys)));se(e!=null&&typeof e=="object","invalid access list","value",e);const t=Object.keys(e).map(n=>{const r=e[n].reduce((i,s)=>(i[s]=!0,i),{});return uE(n,Object.keys(r).sort())});return t.sort((n,r)=>n.address.localeCompare(r.address)),t}function kde(e){let t;return typeof e=="string"?t=_2.computePublicKey(e,!1):t=e.publicKey,In(Kr("0x"+t.substring(4)).substring(26))}function Sde(e,t){return kde(_2.recoverPublicKey(e,t))}const xi=BigInt(0),Cde=BigInt(2),Ade=BigInt(27),Mde=BigInt(28),Tde=BigInt(35),Ide=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),hE=4096*32;function bL(e,t){let n=e.toString(16);for(;n.length<2;)n="0"+n;return n+=Xg(t).substring(4),"0x"+n}function N9(e){return e==="0x"?null:In(e)}function hT(e,t){try{return E1(e)}catch(n){se(!1,n.message,t,e)}}function Jb(e,t){return e==="0x"?0:zt(e,t)}function jr(e,t){if(e==="0x")return xi;const n=at(e,t);return se(n<=Ide,"value exceeds uint size",t,n),n}function Yn(e,t){const n=at(e,"value"),r=Ss(n);return se(r.length<=32,"value too large",`tx.${t}`,n),r}function pT(e){return E1(e).map(t=>[t.address,t.storageKeys])}function Nde(e,t){se(Array.isArray(e),`invalid ${t}`,"value",e);for(let n=0;n<e.length;n++)se($n(e[n],32),"invalid ${ param } hash",`value[${n}]`,e[n]);return e}function Rde(e){const t=C9(e);se(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:Jb(t[0],"nonce"),gasPrice:jr(t[1],"gasPrice"),gasLimit:jr(t[2],"gasLimit"),to:N9(t[3]),value:jr(t[4],"value"),data:nt(t[5]),chainId:xi};if(t.length===6)return n;const r=jr(t[6],"v"),i=jr(t[7],"r"),s=jr(t[8],"s");if(i===xi&&s===xi)n.chainId=r;else{let o=(r-Tde)/Cde;o<xi&&(o=xi),n.chainId=o,se(o!==xi||r===Ade||r===Mde,"non-canonical legacy v","v",t[6]),n.signature=wl.from({r:Gh(t[7],32),s:Gh(t[8],32),v:r})}return n}function _de(e,t){const n=[Yn(e.nonce,"nonce"),Yn(e.gasPrice||0,"gasPrice"),Yn(e.gasLimit,"gasLimit"),e.to||"0x",Yn(e.value,"value"),e.data];let r=xi;if(e.chainId!=xi)r=at(e.chainId,"tx.chainId"),se(!t||t.networkV==null||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const s=e.signature.legacyChainId;s!=null&&(r=s)}if(!t)return r!==xi&&(n.push(Ss(r)),n.push("0x"),n.push("0x")),Xh(n);let i=BigInt(27+t.yParity);return r!==xi?i=wl.getChainIdV(r,t.v):BigInt(t.v)!==i&&se(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(Ss(i)),n.push(Ss(t.r)),n.push(Ss(t.s)),Xh(n)}function mT(e,t){let n;try{if(n=Jb(t[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{se(!1,"invalid yParity","yParity",t[0])}const r=Gh(t[1],32),i=Gh(t[2],32),s=wl.from({r,s:i,yParity:n});e.signature=s}function Pde(e){const t=C9(nn(e).slice(1));se(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",nt(e));const n={type:2,chainId:jr(t[0],"chainId"),nonce:Jb(t[1],"nonce"),maxPriorityFeePerGas:jr(t[2],"maxPriorityFeePerGas"),maxFeePerGas:jr(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:jr(t[4],"gasLimit"),to:N9(t[5]),value:jr(t[6],"value"),data:nt(t[7]),accessList:hT(t[8],"accessList")};return t.length===9||mT(n,t.slice(9)),n}function Dde(e,t){const n=[Yn(e.chainId,"chainId"),Yn(e.nonce,"nonce"),Yn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Yn(e.maxFeePerGas||0,"maxFeePerGas"),Yn(e.gasLimit,"gasLimit"),e.to||"0x",Yn(e.value,"value"),e.data,pT(e.accessList||[])];return t&&(n.push(Yn(t.yParity,"yParity")),n.push(Ss(t.r)),n.push(Ss(t.s))),Br(["0x02",Xh(n)])}function Lde(e){const t=C9(nn(e).slice(1));se(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",nt(e));const n={type:1,chainId:jr(t[0],"chainId"),nonce:Jb(t[1],"nonce"),gasPrice:jr(t[2],"gasPrice"),gasLimit:jr(t[3],"gasLimit"),to:N9(t[4]),value:jr(t[5],"value"),data:nt(t[6]),accessList:hT(t[7],"accessList")};return t.length===8||mT(n,t.slice(8)),n}function Ode(e,t){const n=[Yn(e.chainId,"chainId"),Yn(e.nonce,"nonce"),Yn(e.gasPrice||0,"gasPrice"),Yn(e.gasLimit,"gasLimit"),e.to||"0x",Yn(e.value,"value"),e.data,pT(e.accessList||[])];return t&&(n.push(Yn(t.yParity,"recoveryParam")),n.push(Ss(t.r)),n.push(Ss(t.s))),Br(["0x01",Xh(n)])}function jde(e){let t=C9(nn(e).slice(1)),n="3",r=null;if(t.length===4&&Array.isArray(t[0])){n="3 (network format)";const s=t[1],o=t[2],a=t[3];se(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),se(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),se(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),se(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),se(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let l=0;l<t[1].length;l++)r.push({data:s[l],commitment:o[l],proof:a[l]});t=t[0]}se(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${n}`,"data",nt(e));const i={type:3,chainId:jr(t[0],"chainId"),nonce:Jb(t[1],"nonce"),maxPriorityFeePerGas:jr(t[2],"maxPriorityFeePerGas"),maxFeePerGas:jr(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:jr(t[4],"gasLimit"),to:N9(t[5]),value:jr(t[6],"value"),data:nt(t[7]),accessList:hT(t[8],"accessList"),maxFeePerBlobGas:jr(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(i.blobs=r),se(i.to!=null,`invalid address for transaction type: ${n}`,"data",e),se(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let s=0;s<i.blobVersionedHashes.length;s++)se($n(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",e);return t.length===11||mT(i,t.slice(11)),i}function Bde(e,t,n){const r=[Yn(e.chainId,"chainId"),Yn(e.nonce,"nonce"),Yn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Yn(e.maxFeePerGas||0,"maxFeePerGas"),Yn(e.gasLimit,"gasLimit"),e.to||R2,Yn(e.value,"value"),e.data,pT(e.accessList||[]),Yn(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Nde(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(Yn(t.yParity,"yParity")),r.push(Ss(t.r)),r.push(Ss(t.s)),n)?Br(["0x03",Xh([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):Br(["0x03",Xh(r)])}var Jl,Nm,Rm,_m,Pm,Dm,Lm,Om,jm,Bm,Fm,zm,xh,au,Uf,lu,$m,a3,pa;let PG=(pa=class{constructor(){be(this,$m);be(this,Jl);be(this,Nm);be(this,Rm);be(this,_m);be(this,Pm);be(this,Dm);be(this,Lm);be(this,Om);be(this,jm);be(this,Bm);be(this,Fm);be(this,zm);be(this,xh);be(this,au);be(this,Uf);be(this,lu);ee(this,Jl,null),ee(this,Nm,null),ee(this,_m,0),ee(this,Pm,xi),ee(this,Dm,null),ee(this,Lm,null),ee(this,Om,null),ee(this,Rm,"0x"),ee(this,jm,xi),ee(this,Bm,xi),ee(this,Fm,null),ee(this,zm,null),ee(this,xh,null),ee(this,au,null),ee(this,lu,null),ee(this,Uf,null)}get type(){return X(this,Jl)}set type(t){switch(t){case null:ee(this,Jl,null);break;case 0:case"legacy":ee(this,Jl,0);break;case 1:case"berlin":case"eip-2930":ee(this,Jl,1);break;case 2:case"london":case"eip-1559":ee(this,Jl,2);break;case 3:case"cancun":case"eip-4844":ee(this,Jl,3);break;default:se(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const t=X(this,Nm);return t==null&&this.type===3?R2:t}set to(t){ee(this,Nm,t==null?null:In(t))}get nonce(){return X(this,_m)}set nonce(t){ee(this,_m,zt(t,"value"))}get gasLimit(){return X(this,Pm)}set gasLimit(t){ee(this,Pm,at(t))}get gasPrice(){const t=X(this,Dm);return t==null&&(this.type===0||this.type===1)?xi:t}set gasPrice(t){ee(this,Dm,t==null?null:at(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=X(this,Lm);return t??(this.type===2||this.type===3?xi:null)}set maxPriorityFeePerGas(t){ee(this,Lm,t==null?null:at(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=X(this,Om);return t??(this.type===2||this.type===3?xi:null)}set maxFeePerGas(t){ee(this,Om,t==null?null:at(t,"maxFeePerGas"))}get data(){return X(this,Rm)}set data(t){ee(this,Rm,nt(t))}get value(){return X(this,jm)}set value(t){ee(this,jm,at(t,"value"))}get chainId(){return X(this,Bm)}set chainId(t){ee(this,Bm,at(t))}get signature(){return X(this,Fm)||null}set signature(t){ee(this,Fm,t==null?null:wl.from(t))}get accessList(){const t=X(this,zm)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){ee(this,zm,t==null?null:E1(t))}get maxFeePerBlobGas(){const t=X(this,xh);return t==null&&this.type===3?xi:t}set maxFeePerBlobGas(t){ee(this,xh,t==null?null:at(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=X(this,au);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){se(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let n=0;n<t.length;n++)se($n(t[n],32),"invalid blobVersionedHash",`value[${n}]`,t[n])}ee(this,au,t)}get blobs(){return X(this,lu)==null?null:X(this,lu).map(t=>Object.assign({},t))}set blobs(t){if(t==null){ee(this,lu,null);return}const n=[],r=[];for(let i=0;i<t.length;i++){const s=t[i];if(eT(s)){Se(X(this,Uf),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=nn(s);if(se(o.length<=hE,"blob is too large",`blobs[${i}]`,s),o.length!==hE){const f=new Uint8Array(hE);f.set(o),o=f}const a=X(this,Uf).blobToKzgCommitment(o),l=nt(X(this,Uf).computeBlobKzgProof(o,a));n.push({data:nt(o),commitment:nt(a),proof:l}),r.push(bL(1,a))}else{const o=nt(s.commitment);n.push({data:nt(s.data),commitment:o,proof:nt(s.proof)}),r.push(bL(1,o))}}ee(this,lu,n),ee(this,au,r)}get kzg(){return X(this,Uf)}set kzg(t){ee(this,Uf,t)}get hash(){return this.signature==null?null:Kr(Re(this,$m,a3).call(this,!0,!1))}get unsignedHash(){return Kr(this.unsignedSerialized)}get from(){return this.signature==null?null:Sde(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:_2.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Re(this,$m,a3).call(this,!0,!0)}get unsignedSerialized(){return Re(this,$m,a3).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=X(this,xh)!=null||X(this,au);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Se(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Se(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Se(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):n?s.push(2):t?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return pa.from(this)}toJSON(){const t=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new pa;if(typeof t=="string"){const r=nn(t);if(r[0]>=127)return pa.from(Rde(r));switch(r[0]){case 1:return pa.from(Lde(r));case 2:return pa.from(Pde(r));case 3:return pa.from(jde(r))}Se(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new pa;return t.type!=null&&(n.type=t.type),t.to!=null&&(n.to=t.to),t.nonce!=null&&(n.nonce=t.nonce),t.gasLimit!=null&&(n.gasLimit=t.gasLimit),t.gasPrice!=null&&(n.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(n.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(n.data=t.data),t.value!=null&&(n.value=t.value),t.chainId!=null&&(n.chainId=t.chainId),t.signature!=null&&(n.signature=wl.from(t.signature)),t.accessList!=null&&(n.accessList=t.accessList),t.blobVersionedHashes!=null&&(n.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(n.kzg=t.kzg),t.blobs!=null&&(n.blobs=t.blobs),t.hash!=null&&(se(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),se(n.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(se(n.isSigned(),"unsigned transaction cannot define '.from'","tx",t),se(n.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),n}},Jl=new WeakMap,Nm=new WeakMap,Rm=new WeakMap,_m=new WeakMap,Pm=new WeakMap,Dm=new WeakMap,Lm=new WeakMap,Om=new WeakMap,jm=new WeakMap,Bm=new WeakMap,Fm=new WeakMap,zm=new WeakMap,xh=new WeakMap,au=new WeakMap,Uf=new WeakMap,lu=new WeakMap,$m=new WeakSet,a3=function(t,n){Se(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=t?this.signature:null;switch(this.inferType()){case 0:return _de(this,r);case 1:return Ode(this,r);case 2:return Dde(this,r);case 3:return Bde(this,r,n?this.blobs:null)}Se(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},pa);const DG=new Uint8Array(32);DG.fill(0);const Fde=BigInt(-1),LG=BigInt(0),OG=BigInt(1),zde=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function $de(e){const t=nn(e),n=t.length%32;return n?Br([t,DG.slice(n)]):nt(t)}const Hde=$u(OG,32),Vde=$u(LG,32),yL={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},pE=["name","version","chainId","verifyingContract","salt"];function UL(e){return function(t){return se(typeof t=="string",`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Wde={name:UL("name"),version:UL("version"),chainId:function(e){const t=at(e,"domain.chainId");return se(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):Op(t)},verifyingContract:function(e){try{return In(e).toLowerCase()}catch{}se(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=nn(e,"domain.salt");return se(t.length===32,'invalid domain value "salt"',"domain.salt",e),nt(t)}};function mE(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=t[1]==="",r=parseInt(t[2]);se(r%8===0&&r!==0&&r<=256&&t[2]===String(r),"invalid numeric width","type",e);const i=K0(zde,n?r-1:r),s=n?(i+OG)*Fde:LG;return function(o){const a=at(o,"value");return se(a>=s&&a<=i,`value out-of-bounds for ${e}`,"value",a),$u(n?EW(a,256):a,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return se(n!==0&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(r){const i=nn(r);return se(i.length===n,`invalid length for ${e}`,"value",r),$de(r)}}}switch(e){case"address":return function(t){return Gh(In(t),32)};case"bool":return function(t){return t?Hde:Vde};case"bytes":return function(t){return Kr(t)};case"string":return function(t){return Kh(t)}}return null}function xL(e,t){return`${e}(${t.map(({name:n,type:r})=>r+" "+n).join(",")})`}function eU(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}var zb,xf,Hm,b9,jG;const ra=class ra{constructor(t){be(this,b9);fe(this,"primaryType");be(this,zb);be(this,xf);be(this,Hm);ee(this,xf,new Map),ee(this,Hm,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(t).forEach(l=>{s[l]=t[l].map(({name:f,type:c})=>{let{base:d,index:u}=eU(c);return d==="int"&&!t.int&&(d="int256"),d==="uint"&&!t.uint&&(d="uint256"),{name:f,type:d+(u||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),ee(this,zb,JSON.stringify(s));for(const l in s){const f=new Set;for(const c of s[l]){se(!f.has(c.name),`duplicate variable name ${JSON.stringify(c.name)} in ${JSON.stringify(l)}`,"types",t),f.add(c.name);const d=eU(c.type).base;se(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",t),!mE(d)&&(se(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",t),r.get(d).push(l),n.get(l).add(d))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);se(o.length!==0,"missing primary type","types",t),se(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",t),yt(this,{primaryType:o[0]});function a(l,f){se(!f.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",t),f.add(l);for(const c of n.get(l))if(r.has(c)){a(c,f);for(const d of f)i.get(d).add(c)}f.delete(l)}a(this.primaryType,new Set);for(const[l,f]of i){const c=Array.from(f);c.sort(),X(this,xf).set(l,xL(l,s[l])+c.map(d=>xL(d,s[d])).join(""))}}get types(){return JSON.parse(X(this,zb))}getEncoder(t){let n=X(this,Hm).get(t);return n||(n=Re(this,b9,jG).call(this,t),X(this,Hm).set(t,n)),n}encodeType(t){const n=X(this,xf).get(t);return se(n,`unknown type: ${JSON.stringify(t)}`,"name",t),n}encodeData(t,n){return this.getEncoder(t)(n)}hashStruct(t,n){return Kr(this.encodeData(t,n))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,n,r){if(mE(t))return r(t,n);const i=eU(t).array;if(i)return se(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[t];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});se(!1,`unknown type: ${t}`,"type",t)}visit(t,n){return this._visit(this.primaryType,t,n)}static from(t){return new ra(t)}static getPrimaryType(t){return ra.from(t).primaryType}static hashStruct(t,n,r){return ra.from(n).hashStruct(t,r)}static hashDomain(t){const n=[];for(const r in t){if(t[r]==null)continue;const i=yL[r];se(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),n.push({name:r,type:i})}return n.sort((r,i)=>pE.indexOf(r.name)-pE.indexOf(i.name)),ra.hashStruct("EIP712Domain",{EIP712Domain:n},t)}static encode(t,n,r){return Br(["0x1901",ra.hashDomain(t),ra.from(n).hash(r)])}static hash(t,n,r){return Kr(ra.encode(t,n,r))}static async resolveNames(t,n,r,i){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const s={};t.verifyingContract&&!$n(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const o=ra.from(n);o.visit(r,(a,l)=>(a==="address"&&!$n(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:t,value:r}}static getPayload(t,n,r){ra.hashDomain(t);const i={},s=[];pE.forEach(l=>{const f=t[l];f!=null&&(i[l]=Wde[l](f),s.push({name:l,type:yL[l]}))});const o=ra.from(n);n=o.types;const a=Object.assign({},n);return se(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,f)=>{if(l.match(/^bytes(\d*)/))return nt(nn(f));if(l.match(/^u?int/))return at(f).toString();switch(l){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return se(typeof f=="string","invalid string","value",f),f}se(!1,"unsupported type","type",l)})}}};zb=new WeakMap,xf=new WeakMap,Hm=new WeakMap,b9=new WeakSet,jG=function(t){{const i=mE(t);if(i)return i}const n=eU(t).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{se(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return X(this,xf).has(i)&&(a=a.map(Kr)),Kr(Br(a))}}const r=this.types[t];if(r){const i=Kh(X(this,xf).get(t));return s=>{const o=r.map(({name:a,type:l})=>{const f=this.getEncoder(l)(s[a]);return X(this,xf).has(l)?Kr(f):f});return o.unshift(i),Br(o)}}se(!1,`unknown type: ${t}`,"type",t)};let mx=ra;function Ms(e){const t=new Set;return e.forEach(n=>t.add(n)),Object.freeze(t)}const Gde="external public payable override",Xde=Ms(Gde.split(" ")),BG="constant external internal payable private public pure view override",Kde=Ms(BG.split(" ")),FG="constructor error event fallback function receive struct",zG=Ms(FG.split(" ")),$G="calldata memory storage payable indexed",Yde=Ms($G.split(" ")),Zde="tuple returns",qde=[FG,$G,Zde,BG].join(" "),Qde=Ms(qde.split(" ")),Jde={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},eue=new RegExp("^(\\s*)"),tue=new RegExp("^([0-9]+)"),nue=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),HG=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),VG=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Pi,Ja,$b,fC;const y9=class y9{constructor(t){be(this,$b);be(this,Pi);be(this,Ja);ee(this,Pi,0),ee(this,Ja,t.slice())}get offset(){return X(this,Pi)}get length(){return X(this,Ja).length-X(this,Pi)}clone(){return new y9(X(this,Ja))}reset(){ee(this,Pi,0)}popKeyword(t){const n=this.peek();if(n.type!=="KEYWORD"||!t.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const n=this.peek();throw new Error(`expected ${t}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const n=Re(this,$b,fC).call(this,X(this,Pi)+1,t.match+1);return ee(this,Pi,t.match+1),n}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;X(this,Pi)<t.match-1;){const r=this.peek().linkNext;n.push(Re(this,$b,fC).call(this,X(this,Pi)+1,r)),ee(this,Pi,r)}return ee(this,Pi,t.match+1),n}peek(){if(X(this,Pi)>=X(this,Ja).length)throw new Error("out-of-bounds");return X(this,Ja)[X(this,Pi)]}peekKeyword(t){const n=this.peekType("KEYWORD");return n!=null&&t.has(n)?n:null}peekType(t){if(this.length===0)return null;const n=this.peek();return n.type===t?n.text:null}pop(){const t=this.peek();return V6(this,Pi)._++,t}toString(){const t=[];for(let n=X(this,Pi);n<X(this,Ja).length;n++){const r=X(this,Ja)[n];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}};Pi=new WeakMap,Ja=new WeakMap,$b=new WeakSet,fC=function(t=0,n=0){return new y9(X(this,Ja).slice(t,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-t,linkBack:r.linkBack-t,linkNext:r.linkNext-t}))))};let vl=y9;function Ju(e){const t=[],n=o=>{const a=s<e.length?JSON.stringify(e[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<e.length;){let o=e.substring(s),a=o.match(eue);a&&(s+=a[1].length,o=e.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(l);let f=Jde[o[0]]||"";if(f){if(l.type=f,l.text=o[0],s++,f==="OPEN_PAREN")r.push(t.length-1),i.push(t.length-1);else if(f=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1;else if(f==="COMMA")l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1,i.push(t.length-1);else if(f==="OPEN_BRACKET")l.type="BRACKET";else if(f==="CLOSE_BRACKET"){let c=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const d=t.pop().text;c=d+c,t[t.length-1].value=zt(d)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=c}continue}if(a=o.match(nue),a){if(l.text=a[1],s+=l.text.length,Qde.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(VG)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(tue),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new vl(t.map(o=>Object.freeze(o)))}function wL(e,t){let n=[];for(const r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function R9(e,t){if(t.peekKeyword(zG)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function zf(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(r==null||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function WG(e){let t=zf(e,Kde);return wL(t,Ms("constant payable nonpayable".split(" "))),wL(t,Ms("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function Lf(e,t){return e.popParams().map(n=>Hi.from(n,t))}function GG(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return at(e.pop().text);throw new Error("invalid gas")}return null}function Yh(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const rue=new RegExp(/^(.*)\[([0-9]*)\]$/);function vL(e){const t=e.match(VG);if(se(t,"invalid type","type",e),e==="uint")return"uint256";if(e==="int")return"int256";if(t[2]){const n=parseInt(t[2]);se(n!==0&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);se(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",e)}return e}const mr={},uo=Symbol.for("_ethers_internal"),EL="_ParamTypeInternal",kL="_ErrorInternal",SL="_EventInternal",CL="_ConstructorInternal",AL="_FallbackInternal",ML="_FunctionInternal",TL="_StructInternal";var Vm,l3;const ia=class ia{constructor(t,n,r,i,s,o,a,l){be(this,Vm);fe(this,"name");fe(this,"type");fe(this,"baseType");fe(this,"indexed");fe(this,"components");fe(this,"arrayLength");fe(this,"arrayChildren");if(qb(t,mr,"ParamType"),Object.defineProperty(this,uo,{value:EL}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");yt(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(t){if(t==null&&(t="sighash"),t==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(t)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(t),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(t)).join(t==="full"?", ":",")+")":n+=this.type,t!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),t==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,n){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,t)}async walkAsync(t,n){const r=[],i=[t];return Re(this,Vm,l3).call(this,r,t,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(t,n){if(ia.isParamType(t))return t;if(typeof t=="string")try{return ia.from(Ju(t),n)}catch{se(!1,"invalid param type","obj",t)}else if(t instanceof vl){let a="",l="",f=null;zf(t,Ms(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(l="tuple",f=t.popParams().map(y=>ia.from(y)),a=`tuple(${f.map(y=>y.format()).join(",")})`):(a=vL(t.popType("TYPE")),l=a);let c=null,d=null;for(;t.length&&t.peekType("BRACKET");){const y=t.pop();c=new ia(mr,"",a,l,null,f,d,c),d=y.value,a+=y.text,l="array",f=null}let u=null;if(zf(t,Yde).has("indexed")){if(!n)throw new Error("");u=!0}const g=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new ia(mr,g,a,l,u,f,d,c)}const r=t.name;se(!r||typeof r=="string"&&r.match(HG),"invalid name","obj.name",r);let i=t.indexed;i!=null&&(se(n,"parameter cannot be indexed","obj.indexed",t.indexed),i=!!i);let s=t.type,o=s.match(rue);if(o){const a=parseInt(o[2]||"-1"),l=ia.from({type:o[1],components:t.components});return new ia(mr,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=t.components!=null?t.components.map(f=>ia.from(f)):null;return new ia(mr,r||"",s,"tuple",i,a,null,null)}return s=vL(t.type),new ia(mr,r||"",s,s,i,null,null,null)}static isParamType(t){return t&&t[uo]===EL}};Vm=new WeakSet,l3=function(t,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,f)=>{var c;Re(c=o,Vm,l3).call(c,t,l,r,d=>{a[f]=d})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,f)=>{var c;Re(c=o[f],Vm,l3).call(c,t,l,r,d=>{a[f]=d})}),i(a);return}const s=r(this.type,n);s.then?t.push(async function(){i(await s)}()):i(s)};let Hi=ia,_9=class dC{constructor(t,n,r){fe(this,"type");fe(this,"inputs");qb(t,mr,"Fragment"),r=Object.freeze(r.slice()),yt(this,{type:n,inputs:r})}static from(t){if(typeof t=="string"){try{dC.from(JSON.parse(t))}catch{}return dC.from(Ju(t))}if(t instanceof vl)switch(t.peekKeyword(zG)){case"constructor":return Tf.from(t);case"error":return eo.from(t);case"event":return lc.from(t);case"fallback":case"receive":return df.from(t);case"function":return cc.from(t);case"struct":return Ih.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return Tf.from(t);case"error":return eo.from(t);case"event":return lc.from(t);case"fallback":case"receive":return df.from(t);case"function":return cc.from(t);case"struct":return Ih.from(t)}Se(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}se(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return Tf.isFragment(t)}static isError(t){return eo.isFragment(t)}static isEvent(t){return lc.isFragment(t)}static isFunction(t){return cc.isFragment(t)}static isStruct(t){return Ih.isFragment(t)}};class P9 extends _9{constructor(n,r,i,s){super(n,r,s);fe(this,"name");se(typeof i=="string"&&i.match(HG),"invalid identifier","name",i),s=Object.freeze(s.slice()),yt(this,{name:i})}}function j2(e,t){return"("+t.map(n=>n.format(e)).join(e==="full"?", ":",")+")"}class eo extends P9{constructor(t,n,r){super(t,"error",n,r),Object.defineProperty(this,uo,{value:kL})}get selector(){return Kh(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(t)))});const n=[];return t!=="sighash"&&n.push("error"),n.push(this.name+j2(t,this.inputs)),n.join(" ")}static from(t){if(eo.isFragment(t))return t;if(typeof t=="string")return eo.from(Ju(t));if(t instanceof vl){const n=R9("error",t),r=Lf(t);return Yh(t),new eo(mr,n,r)}return new eo(mr,t.name,t.inputs?t.inputs.map(Hi.from):[])}static isFragment(t){return t&&t[uo]===kL}}class lc extends P9{constructor(n,r,i,s){super(n,"event",r,i);fe(this,"anonymous");Object.defineProperty(this,uo,{value:SL}),yt(this,{anonymous:s})}get topicHash(){return Kh(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+j2(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>Hi.from(s)),new lc(mr,n,r,!1).topicHash}static from(n){if(lc.isFragment(n))return n;if(typeof n=="string")try{return lc.from(Ju(n))}catch{se(!1,"invalid event fragment","obj",n)}else if(n instanceof vl){const r=R9("event",n),i=Lf(n,!0),s=!!zf(n,Ms(["anonymous"])).has("anonymous");return Yh(n),new lc(mr,r,i,s)}return new lc(mr,n.name,n.inputs?n.inputs.map(r=>Hi.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[uo]===SL}}class Tf extends _9{constructor(n,r,i,s,o){super(n,r,i);fe(this,"payable");fe(this,"gas");Object.defineProperty(this,uo,{value:CL}),yt(this,{payable:s,gas:o})}format(n){if(Se(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${j2(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Tf.isFragment(n))return n;if(typeof n=="string")try{return Tf.from(Ju(n))}catch{se(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof vl){zf(n,Ms(["constructor"]));const r=Lf(n),i=!!zf(n,Xde).has("payable"),s=GG(n);return Yh(n),new Tf(mr,"constructor",r,i,s)}return new Tf(mr,"constructor",n.inputs?n.inputs.map(Hi.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[uo]===CL}}class df extends _9{constructor(n,r,i){super(n,"fallback",r);fe(this,"payable");Object.defineProperty(this,uo,{value:AL}),yt(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(df.isFragment(n))return n;if(typeof n=="string")try{return df.from(Ju(n))}catch{se(!1,"invalid fallback fragment","obj",n)}else if(n instanceof vl){const r=n.toString(),i=n.peekKeyword(Ms(["fallback","receive"]));if(se(i,"type must be fallback or receive","obj",r),n.popKeyword(Ms(["fallback","receive"]))==="receive"){const l=Lf(n);return se(l.length===0,"receive cannot have arguments","obj.inputs",l),zf(n,Ms(["payable"])),Yh(n),new df(mr,[],!0)}let o=Lf(n);o.length?se(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[Hi.from("bytes")];const a=WG(n);if(se(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),zf(n,Ms(["returns"])).has("returns")){const l=Lf(n);se(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(f=>f.format("minimal")).join(", "))}return Yh(n),new df(mr,o,a==="payable")}if(n.type==="receive")return new df(mr,[],!0);if(n.type==="fallback"){const r=[Hi.from("bytes")],i=n.stateMutability==="payable";return new df(mr,r,i)}se(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[uo]===AL}}class cc extends P9{constructor(n,r,i,s,o,a){super(n,"function",r,s);fe(this,"constant");fe(this,"outputs");fe(this,"stateMutability");fe(this,"payable");fe(this,"gas");Object.defineProperty(this,uo,{value:ML}),o=Object.freeze(o.slice()),yt(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return Kh(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+j2(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(j2(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>Hi.from(s)),new cc(mr,n,"view",r,[],null).selector}static from(n){if(cc.isFragment(n))return n;if(typeof n=="string")try{return cc.from(Ju(n))}catch{se(!1,"invalid function fragment","obj",n)}else if(n instanceof vl){const i=R9("function",n),s=Lf(n),o=WG(n);let a=[];zf(n,Ms(["returns"])).has("returns")&&(a=Lf(n));const l=GG(n);return Yh(n),new cc(mr,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new cc(mr,n.name,r,n.inputs?n.inputs.map(Hi.from):[],n.outputs?n.outputs.map(Hi.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[uo]===ML}}class Ih extends P9{constructor(t,n,r){super(t,"struct",n,r),Object.defineProperty(this,uo,{value:TL})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return Ih.from(Ju(t))}catch{se(!1,"invalid struct fragment","obj",t)}else if(t instanceof vl){const n=R9("struct",t),r=Lf(t);return Yh(t),new Ih(mr,n,r)}return new Ih(mr,t.name,t.inputs?t.inputs.map(Hi.from):[])}static isFragment(t){return t&&t[uo]===TL}}const Tl=new Map;Tl.set(0,"GENERIC_PANIC");Tl.set(1,"ASSERT_FALSE");Tl.set(17,"OVERFLOW");Tl.set(18,"DIVIDE_BY_ZERO");Tl.set(33,"ENUM_RANGE_ERROR");Tl.set(34,"BAD_STORAGE_DATA");Tl.set(49,"STACK_UNDERFLOW");Tl.set(50,"ARRAY_RANGE_ERROR");Tl.set(65,"OUT_OF_MEMORY");Tl.set(81,"UNINITIALIZED_FUNCTION_CALL");const iue=new RegExp(/^bytes([0-9]*)$/),sue=new RegExp(/^(u?int)([0-9]*)$/);let gE=null,IL=1024;function oue(e,t,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const f=nn(n);if(n=nt(n),f.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(f.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(nt(f.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],f.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(nt(f.slice(0,4))==="0x4e487b71")try{const c=Number(r.decode(["uint256"],f.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[c]},s=`Panic due to ${Tl.get(c)||"UNKNOWN"}(${c})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:t.to?In(t.to):null,data:t.data||"0x"};return t.from&&(l.from=In(t.from)),Mr(i,"CALL_EXCEPTION",{action:e,data:n,reason:s,transaction:l,invocation:o,revert:a})}var cu,Ap;const U9=class U9{constructor(){be(this,cu)}getDefaultValue(t){const n=t.map(i=>Re(this,cu,Ap).call(this,Hi.from(i)));return new J8(n,"_").defaultValue()}encode(t,n){xW(n.length,t.length,"types/values length mismatch");const r=t.map(o=>Re(this,cu,Ap).call(this,Hi.from(o))),i=new J8(r,"_"),s=new ZS;return i.encode(s,n),s.data}decode(t,n,r){const i=t.map(o=>Re(this,cu,Ap).call(this,Hi.from(o)));return new J8(i,"_").decode(new qS(n,r,IL))}static _setDefaultMaxInflation(t){se(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),IL=t}static defaultAbiCoder(){return gE==null&&(gE=new U9),gE}static getBuiltinCallException(t,n,r){return oue(t,n,r,U9.defaultAbiCoder())}};cu=new WeakSet,Ap=function(t){if(t.isArray())return new Tfe(Re(this,cu,Ap).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new J8(t.components.map(r=>Re(this,cu,Ap).call(this,r)),t.name);switch(t.baseType){case"address":return new Afe(t.name);case"bool":return new Ife(t.name);case"string":return new Bfe(t.name);case"bytes":return new Nfe(t.name);case"":return new Pfe(t.name)}let n=t.type.match(sue);if(n){let r=parseInt(n[2]||"256");return se(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",t),new jfe(r/8,n[1]==="int",t.name)}if(n=t.type.match(iue),n){let r=parseInt(n[1]);return se(r!==0&&r<=32,"invalid bytes length","param",t),new Rfe(r,t.name)}se(!1,"invalid type","type",t.type)};let B2=U9;class aue{constructor(t,n,r){fe(this,"fragment");fe(this,"name");fe(this,"signature");fe(this,"topic");fe(this,"args");const i=t.name,s=t.format();yt(this,{fragment:t,name:i,signature:s,topic:n,args:r})}}class lue{constructor(t,n,r,i){fe(this,"fragment");fe(this,"name");fe(this,"args");fe(this,"signature");fe(this,"selector");fe(this,"value");const s=t.name,o=t.format();yt(this,{fragment:t,name:s,args:r,signature:o,selector:n,value:i})}}class cue{constructor(t,n,r){fe(this,"fragment");fe(this,"name");fe(this,"args");fe(this,"signature");fe(this,"selector");const i=t.name,s=t.format();yt(this,{fragment:t,name:i,args:r,signature:s,selector:n})}}class NL{constructor(t){fe(this,"hash");fe(this,"_isIndexed");yt(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const RL={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},_L={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&RL[e.toString()]&&(t=RL[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};var ec,tc,nc,Qi,wc,c3,f3;const X0=class X0{constructor(t){be(this,wc);fe(this,"fragments");fe(this,"deploy");fe(this,"fallback");fe(this,"receive");be(this,ec);be(this,tc);be(this,nc);be(this,Qi);let n=[];typeof t=="string"?n=JSON.parse(t):n=t,ee(this,nc,new Map),ee(this,ec,new Map),ee(this,tc,new Map);const r=[];for(const o of n)try{r.push(_9.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}yt(this,{fragments:Object.freeze(r)});let i=null,s=!1;ee(this,Qi,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}yt(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(se(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=X(this,nc);break;case"event":l=X(this,tc);break;case"error":l=X(this,ec);break;default:return}const f=o.format();l.has(f)||l.set(f,o)}),this.deploy||yt(this,{deploy:Tf.from("constructor()")}),yt(this,{fallback:i,receive:s})}format(t){const n=t?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const t=this.fragments.map(n=>n.format("json"));return JSON.stringify(t.map(n=>JSON.parse(n)))}getAbiCoder(){return B2.defaultAbiCoder()}getFunctionName(t){const n=Re(this,wc,c3).call(this,t,null,!1);return se(n,"no matching function","key",t),n.name}hasFunction(t){return!!Re(this,wc,c3).call(this,t,null,!1)}getFunction(t,n){return Re(this,wc,c3).call(this,t,n||null,!0)}forEachFunction(t){const n=Array.from(X(this,nc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(X(this,nc).get(i),r)}}getEventName(t){const n=Re(this,wc,f3).call(this,t,null,!1);return se(n,"no matching event","key",t),n.name}hasEvent(t){return!!Re(this,wc,f3).call(this,t,null,!1)}getEvent(t,n){return Re(this,wc,f3).call(this,t,n||null,!0)}forEachEvent(t){const n=Array.from(X(this,tc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(X(this,tc).get(i),r)}}getError(t,n){if($n(t)){const i=t.toLowerCase();if(_L[i])return eo.from(_L[i].signature);for(const s of X(this,ec).values())if(i===s.selector)return s;return null}if(t.indexOf("(")===-1){const i=[];for(const[s,o]of X(this,ec))s.split("(")[0]===t&&i.push(o);if(i.length===0)return t==="Error"?eo.from("error Error(string)"):t==="Panic"?eo.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");se(!1,`ambiguous error description (i.e. ${s})`,"name",t)}return i[0]}if(t=eo.from(t).format(),t==="Error(string)")return eo.from("error Error(string)");if(t==="Panic(uint256)")return eo.from("error Panic(uint256)");const r=X(this,ec).get(t);return r||null}forEachError(t){const n=Array.from(X(this,ec).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(X(this,ec).get(i),r)}}_decodeParams(t,n){return X(this,Qi).decode(t,n)}_encodeParams(t,n){return X(this,Qi).encode(t,n)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,n){if(typeof t=="string"){const r=this.getError(t);se(r,"unknown error","fragment",t),t=r}return se(Tr(n,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",n),this._decodeParams(t.inputs,Tr(n,4))}encodeErrorResult(t,n){if(typeof t=="string"){const r=this.getError(t);se(r,"unknown error","fragment",t),t=r}return Br([t.selector,this._encodeParams(t.inputs,n||[])])}decodeFunctionData(t,n){if(typeof t=="string"){const r=this.getFunction(t);se(r,"unknown function","fragment",t),t=r}return se(Tr(n,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",n),this._decodeParams(t.inputs,Tr(n,4))}encodeFunctionData(t,n){if(typeof t=="string"){const r=this.getFunction(t);se(r,"unknown function","fragment",t),t=r}return Br([t.selector,this._encodeParams(t.inputs,n||[])])}decodeFunctionResult(t,n){if(typeof t=="string"){const s=this.getFunction(t);se(s,"unknown function","fragment",t),t=s}let r="invalid length for result data";const i=ks(n);if(i.length%32===0)try{return X(this,Qi).decode(t.outputs,i)}catch{r="could not decode result data"}Se(!1,r,"BAD_DATA",{value:nt(i),info:{method:t.name,signature:t.format()}})}makeError(t,n){const r=nn(t,"data"),i=B2.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=nt(r.slice(0,4)),l=this.getError(a);if(l)try{const f=X(this,Qi).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:f},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(t,n){if(typeof t=="string"){const r=this.getFunction(t);se(r,"unknown function","fragment",t),t=r}return nt(X(this,Qi).encode(t.outputs,n||[]))}encodeFilterTopics(t,n){if(typeof t=="string"){const s=this.getEvent(t);se(s,"unknown event","eventFragment",t),t=s}Se(n.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const i=(s,o)=>s.type==="string"?Kh(o):s.type==="bytes"?Kr(nt(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=$u(o):s.type.match(/^bytes/)?o=Tle(o,32):s.type==="address"&&X(this,Qi).encode(["address"],[o]),Gh(nt(o),32));for(n.forEach((s,o)=>{const a=t.inputs[o];if(!a.indexed){se(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?se(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(t,n){if(typeof t=="string"){const o=this.getEvent(t);se(o,"unknown event","eventFragment",t),t=o}const r=[],i=[],s=[];return t.anonymous||r.push(t.topicHash),se(n.length===t.inputs.length,"event arguments/values mismatch","values",n),t.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(Kh(l));else if(o.type==="bytes")r.push(Kr(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(X(this,Qi).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:X(this,Qi).encode(i,s),topics:r}}decodeEventLog(t,n,r){if(typeof t=="string"){const h=this.getEvent(t);se(h,"unknown event","eventFragment",t),t=h}if(r!=null&&!t.anonymous){const h=t.topicHash;se($n(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];t.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(Hi.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=r!=null?X(this,Qi).decode(i,Br(r)):null,l=X(this,Qi).decode(s,n,!0),f=[],c=[];let d=0,u=0;return t.inputs.forEach((h,g)=>{let y=null;if(h.indexed)if(a==null)y=new NL(null);else if(o[g])y=new NL(a[u++]);else try{y=a[u++]}catch(U){y=U}else try{y=l[d++]}catch(U){y=U}f.push(y),c.push(h.name||null)}),sg.fromItems(f,c)}parseTransaction(t){const n=nn(t.data,"tx.data"),r=at(t.value!=null?t.value:0,"tx.value"),i=this.getFunction(nt(n.slice(0,4)));if(!i)return null;const s=X(this,Qi).decode(i.inputs,n.slice(4));return new lue(i,i.selector,s,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const n=this.getEvent(t.topics[0]);return!n||n.anonymous?null:new aue(n,n.topicHash,this.decodeEventLog(n,t.data,t.topics))}parseError(t){const n=nt(t),r=this.getError(Tr(n,0,4));if(!r)return null;const i=X(this,Qi).decode(r.inputs,Tr(n,4));return new cue(r,r.selector,i)}static from(t){return t instanceof X0?t:typeof t=="string"?new X0(JSON.parse(t)):typeof t.formatJson=="function"?new X0(t.formatJson()):typeof t.format=="function"?new X0(t.format("json")):new X0(t)}};ec=new WeakMap,tc=new WeakMap,nc=new WeakMap,Qi=new WeakMap,wc=new WeakSet,c3=function(t,n,r){if($n(t)){const s=t.toLowerCase();for(const o of X(this,nc).values())if(s===o.selector)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of X(this,nc))o.split("(")[0]===t&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;cs.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let f=s.length-1;f>=0;f--){const c=s[f].inputs.length;c!==a&&(!l||c!==a-1)&&s.splice(f,1)}for(let f=s.length-1;f>=0;f--){const c=s[f].inputs;for(let d=0;d<n.length;d++)if(cs.isTyped(n[d])){if(d>=c.length){if(n[d].type==="overrides")continue;s.splice(f,1);break}if(n[d].type!==c[d].baseType){s.splice(f,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");se(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return s[0]}const i=X(this,nc).get(cc.from(t).format());return i||null},f3=function(t,n,r){if($n(t)){const s=t.toLowerCase();for(const o of X(this,tc).values())if(s===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of X(this,tc))o.split("(")[0]===t&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(cs.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");se(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return s[0]}const i=X(this,tc).get(lc.from(t).format());return i||null};let uC=X0;const XG=BigInt(0);function im(e){return e??null}function Lr(e){return e==null?null:e.toString()}class PL{constructor(t,n,r){fe(this,"gasPrice");fe(this,"maxFeePerGas");fe(this,"maxPriorityFeePerGas");yt(this,{gasPrice:im(t),maxFeePerGas:im(n),maxPriorityFeePerGas:im(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Lr(t),maxFeePerGas:Lr(n),maxPriorityFeePerGas:Lr(r)}}}function gx(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=nt(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in e)||e[i]==null||(t[i]=at(e[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in e)||e[i]==null||(t[i]=zt(e[i],`request.${i}`));return e.accessList&&(t.accessList=E1(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(i=>eT(i)?nt(i):Object.assign({},i))),t}var wf;class fue{constructor(t,n){fe(this,"provider");fe(this,"number");fe(this,"hash");fe(this,"timestamp");fe(this,"parentHash");fe(this,"parentBeaconBlockRoot");fe(this,"nonce");fe(this,"difficulty");fe(this,"gasLimit");fe(this,"gasUsed");fe(this,"stateRoot");fe(this,"receiptsRoot");fe(this,"blobGasUsed");fe(this,"excessBlobGas");fe(this,"miner");fe(this,"prevRandao");fe(this,"extraData");fe(this,"baseFeePerGas");be(this,wf);ee(this,wf,t.transactions.map(r=>typeof r!="string"?new F2(r,n):r)),yt(this,{provider:n,hash:im(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:im(t.prevRandao),extraData:t.extraData,baseFeePerGas:im(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return X(this,wf).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=X(this,wf).slice();return t.length===0?[]:(Se(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:f,number:c,parentHash:d,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:g,timestamp:y,transactions:U}=this;return{_type:"Block",baseFeePerGas:Lr(t),difficulty:Lr(n),extraData:r,gasLimit:Lr(i),gasUsed:Lr(s),blobGasUsed:Lr(this.blobGasUsed),excessBlobGas:Lr(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:f,number:c,parentHash:d,timestamp:y,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:g,transactions:U}}[Symbol.iterator](){let t=0;const n=this.transactions;return{next:()=>t<this.length?{value:n[t++],done:!1}:{value:void 0,done:!0}}}get length(){return X(this,wf).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let n;if(typeof t=="number")n=X(this,wf)[t];else{const r=t.toLowerCase();for(const i of X(this,wf))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash===r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(t){const n=this.prefetchedTransactions;if(typeof t=="number")return n[t];t=t.toLowerCase();for(const r of n)if(r.hash===t)return r;se(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return due(this)}}wf=new WeakMap;class ey{constructor(t,n){fe(this,"provider");fe(this,"transactionHash");fe(this,"blockHash");fe(this,"blockNumber");fe(this,"removed");fe(this,"address");fe(this,"data");fe(this,"topics");fe(this,"index");fe(this,"transactionIndex");this.provider=n;const r=Object.freeze(t.topics.slice());yt(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:f}=this;return{_type:"log",address:t,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:f}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return Se(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return Se(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return Se(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return uue(this)}}var Hb;class KG{constructor(t,n){fe(this,"provider");fe(this,"to");fe(this,"from");fe(this,"contractAddress");fe(this,"hash");fe(this,"index");fe(this,"blockHash");fe(this,"blockNumber");fe(this,"logsBloom");fe(this,"gasUsed");fe(this,"blobGasUsed");fe(this,"cumulativeGasUsed");fe(this,"gasPrice");fe(this,"blobGasPrice");fe(this,"type");fe(this,"status");fe(this,"root");be(this,Hb);ee(this,Hb,Object.freeze(t.logs.map(i=>new ey(i,n))));let r=XG;t.effectiveGasPrice!=null?r=t.effectiveGasPrice:t.gasPrice!=null&&(r=t.gasPrice),yt(this,{provider:n,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return X(this,Hb)}toJSON(){const{to:t,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:f,status:c,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Lr(this.cumulativeGasUsed),from:n,gasPrice:Lr(this.gasPrice),blobGasUsed:Lr(this.blobGasUsed),blobGasPrice:Lr(this.blobGasPrice),gasUsed:Lr(this.gasUsed),hash:i,index:s,logs:f,logsBloom:l,root:d,status:c,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return ZG(this)}reorderedEvent(t){return Se(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),YG(this,t)}}Hb=new WeakMap;var fu;const t_=class t_{constructor(t,n){fe(this,"provider");fe(this,"blockNumber");fe(this,"blockHash");fe(this,"index");fe(this,"hash");fe(this,"type");fe(this,"to");fe(this,"from");fe(this,"nonce");fe(this,"gasLimit");fe(this,"gasPrice");fe(this,"maxPriorityFeePerGas");fe(this,"maxFeePerGas");fe(this,"maxFeePerBlobGas");fe(this,"data");fe(this,"value");fe(this,"chainId");fe(this,"signature");fe(this,"accessList");fe(this,"blobVersionedHashes");be(this,fu);this.provider=n,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,ee(this,fu,-1)}toJSON(){const{blockNumber:t,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:f,signature:c,accessList:d,blobVersionedHashes:u}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:t,blockHash:n,blobVersionedHashes:u,chainId:Lr(this.chainId),data:f,from:a,gasLimit:Lr(this.gasLimit),gasPrice:Lr(this.gasPrice),hash:i,maxFeePerGas:Lr(this.maxFeePerGas),maxPriorityFeePerGas:Lr(this.maxPriorityFeePerGas),maxFeePerBlobGas:Lr(this.maxFeePerBlobGas),nonce:l,signature:c,to:o,index:r,type:s,value:Lr(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const r=await this.getTransaction();r&&(t=r.blockNumber)}if(t==null)return null;const n=this.provider.getBlock(t);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Es({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,n){const r=t??1,i=n??0;let s=X(this,fu),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:u,nonce:h}=await Es({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=u;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=s-3,o<X(this,fu)&&(o=X(this,fu)));o<=u;){if(a)return null;const y=await this.provider.getBlock(o,!0);if(y==null)return;for(const U of y)if(U===this.hash)return;for(let U=0;U<y.length;U++){const x=await y.getTransaction(U);if(x.from===this.from&&x.nonce===this.nonce){if(a)return null;const v=await this.provider.getTransactionReceipt(x.hash);if(v==null||u-v.blockNumber+1<r)return;let E="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?E="repriced":x.data==="0x"&&x.from===x.to&&x.value===XG&&(E="cancelled"),Se(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:x.replaceableTransaction(s),hash:x.hash,receipt:v})}}o++}},f=u=>{if(u==null||u.status!==0)return u;Se(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:u.to,from:u.from,data:""},receipt:u})},c=await this.provider.getTransactionReceipt(this.hash);if(r===0)return f(c);if(c){if(await c.confirmations()>=r)return f(c)}else if(await l(),r===0)return null;return await new Promise((u,h)=>{const g=[],y=()=>{g.forEach(x=>x())};if(g.push(()=>{a=!0}),i>0){const x=setTimeout(()=>{y(),h(Mr("wait for transaction timeout","TIMEOUT"))},i);g.push(()=>{clearTimeout(x)})}const U=async x=>{if(await x.confirmations()>=r){y();try{u(f(x))}catch(v){h(v)}}};if(g.push(()=>{this.provider.off(this.hash,U)}),this.provider.on(this.hash,U),s>=0){const x=async()=>{try{await l()}catch(v){if(ss(v,"TRANSACTION_REPLACED")){y(),h(v);return}}a||this.provider.once("block",x)};g.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Se(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ZG(this)}reorderedEvent(t){return Se(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Se(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),YG(this,t)}replaceableTransaction(t){se(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const n=new t_(this,this.provider);return ee(n,fu,t),n}};fu=new WeakMap;let F2=t_;function due(e){return{orphan:"drop-block",hash:e.hash,number:e.number}}function YG(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function ZG(e){return{orphan:"drop-transaction",tx:e}}function uue(e){return{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}class gT extends ey{constructor(n,r,i){super(n,n.provider);fe(this,"interface");fe(this,"fragment");fe(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);yt(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class qG extends ey{constructor(n,r){super(n,n.provider);fe(this,"error");yt(this,{error:r})}}var Wm;class hue extends KG{constructor(n,r,i){super(i,r);be(this,Wm);ee(this,Wm,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?X(this,Wm).getEvent(n.topics[0]):null;if(r)try{return new gT(n,X(this,Wm),r)}catch(i){return new qG(n,i)}return n})}}Wm=new WeakMap;var Vb;class bT extends F2{constructor(n,r,i){super(i,r);be(this,Vb);ee(this,Vb,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new hue(X(this,Vb),this.provider,i)}}Vb=new WeakMap;class QG extends kW{constructor(n,r,i,s){super(n,r,i);fe(this,"log");yt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class pue extends QG{constructor(t,n,r,i,s){super(t,n,r,new gT(s,t.interface,i));const o=t.interface.decodeEventLog(i,this.log.data,this.log.topics);yt(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const DL=BigInt(0);function JG(e){return e&&typeof e.call=="function"}function eX(e){return e&&typeof e.estimateGas=="function"}function D9(e){return e&&typeof e.resolveName=="function"}function tX(e){return e&&typeof e.sendTransaction=="function"}function nX(e){if(e!=null){if(D9(e))return e;if(e.provider)return e.provider}}var Wb;class mue{constructor(t,n,r){be(this,Wb);fe(this,"fragment");if(yt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=Zh(t.runner,"resolveName"),s=D9(i)?i:null;ee(this,Wb,async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(c,d)=>c==="address"?Array.isArray(d)?Promise.all(d.map(u=>As(u,s))):As(d,s):d)));return t.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return X(this,Wb)}}Wb=new WeakMap;function Zh(e,t){return e==null?null:typeof e[t]=="function"?e:e.provider&&typeof e.provider[t]=="function"?e.provider:null}function q0(e){return e==null?null:e.provider||null}async function rX(e,t){const n=cs.dereference(e,"overrides");se(typeof n=="object","invalid overrides parameter","overrides",e);const r=gx(n);return se(r.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),se(r.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function gue(e,t,n){const r=Zh(e,"resolveName"),i=D9(r)?r:null;return await Promise.all(t.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=cs.dereference(l,a),a==="address"?As(l,i):l))))}function bue(e){const t=async function(o){const a=await rX(o,["data"]);a.to=await e.getAddress(),a.from&&(a.from=await As(a.from,nX(e.runner)));const l=e.interface,f=at(a.value||DL,"overrides.value")===DL,c=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!c&&!f&&se(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),se(l.fallback||c,"cannot send data to receive-only contract","overrides.data",a.data);const d=l.receive||l.fallback&&l.fallback.payable;return se(d||f,"cannot send value to non-payable fallback","overrides.value",a.value),se(l.fallback||c,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Zh(e.runner,"call");Se(JG(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await t(o);try{return await a.call(l)}catch(f){throw JM(f)&&f.data?e.interface.makeError(f.data,l):f}},r=async function(o){const a=e.runner;Se(tX(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await t(o)),f=q0(e.runner);return new bT(e.interface,f,l)},i=async function(o){const a=Zh(e.runner,"estimateGas");return Se(eX(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},s=async o=>await r(o);return yt(s,{_contract:e,estimateGas:i,populateTransaction:t,send:r,staticCall:n}),s}function yue(e,t){const n=function(...f){const c=e.interface.getFunction(t,f);return Se(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:f}}),c},r=async function(...f){const c=n(...f);let d={};if(c.inputs.length+1===f.length&&(d=await rX(f.pop()),d.from&&(d.from=await As(d.from,nX(e.runner)))),c.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const u=await gue(e.runner,c.inputs,f);return Object.assign({},d,await Es({to:e.getAddress(),data:e.interface.encodeFunctionData(c,u)}))},i=async function(...f){const c=await a(...f);return c.length===1?c[0]:c},s=async function(...f){const c=e.runner;Se(tX(c),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await c.sendTransaction(await r(...f)),u=q0(e.runner);return new bT(e.interface,u,d)},o=async function(...f){const c=Zh(e.runner,"estimateGas");return Se(eX(c),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await c.estimateGas(await r(...f))},a=async function(...f){const c=Zh(e.runner,"call");Se(JG(c),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...f);let u="0x";try{u=await c.call(d)}catch(g){throw JM(g)&&g.data?e.interface.makeError(g.data,d):g}const h=n(...f);return e.interface.decodeFunctionResult(h,u)},l=async(...f)=>n(...f).constant?await i(...f):await s(...f);return yt(l,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=e.interface.getFunction(t);return Se(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),f}}),l}function Uue(e,t){const n=function(...i){const s=e.interface.getEvent(t,i);return Se(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:i}}),s},r=function(...i){return new mue(e,n(...i),i)};return yt(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=e.interface.getEvent(t);return Se(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),i}}),r}const bx=Symbol.for("_ethersInternal_contract"),iX=new WeakMap;function xue(e,t){iX.set(e[bx],t)}function So(e){return iX.get(e[bx])}function wue(e){return e&&typeof e=="object"&&"getTopicFilter"in e&&typeof e.getTopicFilter=="function"&&e.fragment}async function yT(e,t){let n,r=null;if(Array.isArray(t)){const s=function(o){if($n(o,32))return o;const a=e.interface.getEvent(o);return se(a,"unknown fragment","name",o),a.topicHash};n=t.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else t==="*"?n=[null]:typeof t=="string"?$n(t,32)?n=[t]:(r=e.interface.getEvent(t),se(r,"unknown fragment","event",t),n=[r.topicHash]):wue(t)?n=await t.getTopicFilter():"fragment"in t?(r=t.fragment,n=[r.topicHash]):se(!1,"unknown event name","event",t);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function A5(e,t){const{subs:n}=So(e);return n.get((await yT(e,t)).tag)||null}async function LL(e,t,n){const r=q0(e.runner);Se(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:s,topics:o}=await yT(e,n),{addr:a,subs:l}=So(e);let f=l.get(s);if(!f){const d={address:a||e,topics:o},u=U=>{let x=i;if(x==null)try{x=e.interface.getEvent(U.topics[0])}catch{}if(x){const v=x,E=i?e.interface.decodeEventLog(i,U.data,U.topics):[];pC(e,n,E,k=>new pue(e,k,n,v,U))}else pC(e,n,[],v=>new QG(e,v,n,U))};let h=[];f={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(d,u))},stop:async()=>{if(h.length==0)return;let U=h;h=[],await Promise.all(U),r.off(d,u)}},l.set(s,f)}return f}let hC=Promise.resolve();async function vue(e,t,n,r){await hC;const i=await A5(e,t);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(e,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),So(e).subs.delete(i.tag)),s>0}async function pC(e,t,n,r){try{await hC}catch{}const i=vue(e,t,n,r);return hC=i,await i}const tU=["then"];var yW;yW=bx;const I2=class I2{constructor(t,n,r,i){fe(this,"target");fe(this,"interface");fe(this,"runner");fe(this,"filters");fe(this,yW);fe(this,"fallback");se(typeof t=="string"||cG(t),"invalid value for Contract target","target",t),r==null&&(r=null);const s=uC.from(n);yt(this,{target:t,runner:r,interface:s}),Object.defineProperty(this,bx,{value:{}});let o,a=null,l=null;if(i){const d=q0(r);l=new bT(this.interface,d,i)}let f=new Map;if(typeof t=="string")if($n(t))a=t,o=Promise.resolve(t);else{const d=Zh(r,"resolveName");if(!D9(d))throw Mr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(t).then(u=>{if(u==null)throw Mr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return So(this).addr=u,u})}else o=t.getAddress().then(d=>{if(d==null)throw new Error("TODO");return So(this).addr=d,d});xue(this,{addrPromise:o,addr:a,deployTx:l,subs:f});const c=new Proxy({},{get:(d,u,h)=>{if(typeof u=="symbol"||tU.indexOf(u)>=0)return Reflect.get(d,u,h);try{return this.getEvent(u)}catch(g){if(!ss(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,u)=>tU.indexOf(u)>=0?Reflect.has(d,u):Reflect.has(d,u)||this.interface.hasEvent(String(u))});return yt(this,{filters:c}),yt(this,{fallback:s.receive||s.fallback?bue(this):null}),new Proxy(this,{get:(d,u,h)=>{if(typeof u=="symbol"||u in d||tU.indexOf(u)>=0)return Reflect.get(d,u,h);try{return d.getFunction(u)}catch(g){if(!ss(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,u)=>typeof u=="symbol"||u in d||tU.indexOf(u)>=0?Reflect.has(d,u):d.interface.hasFunction(u)})}connect(t){return new I2(this.target,this.interface,t)}attach(t){return new I2(t,this.interface,this.runner)}async getAddress(){return await So(this).addrPromise}async getDeployedCode(){const t=q0(this.runner);Se(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await t.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=q0(this.runner);return Se(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return So(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),yue(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),Uue(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=So(this),o=i||await s,{fragment:a,topics:l}=await yT(this,t),f={address:o,topics:l,fromBlock:n,toBlock:r},c=q0(this.runner);return Se(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(f)).map(d=>{let u=a;if(u==null)try{u=this.interface.getEvent(d.topics[0])}catch{}if(u)try{return new gT(d,this.interface,u)}catch(h){return new qG(d,h)}return new ey(d,c)})}async on(t,n){const r=await LL(this,"on",t);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(t,n){const r=await LL(this,"once",t);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(t,...n){return await pC(this,t,n,null)}async listenerCount(t){if(t){const i=await A5(this,t);return i?i.listeners.length:0}const{subs:n}=So(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(t){if(t){const i=await A5(this,t);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=So(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(t,n){const r=await A5(this,t);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),So(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const n=await A5(this,t);if(!n)return this;n.stop(),So(this).subs.delete(n.tag)}else{const{subs:n}=So(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(t,n){return await this.on(t,n)}async removeListener(t,n){return await this.off(t,n)}static buildClass(t){class n extends I2{constructor(i,s=null){super(i,t,s)}}return n}static from(t,n,r){return r==null&&(r=null),new this(t,n,r)}};let mC=I2;function Eue(){return mC}class Nh extends Eue(){}function bE(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):se(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class kue{constructor(t){fe(this,"name");yt(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,n){throw new Error("unsupported coin")}async decodeAddress(t,n){throw new Error("unsupported coin")}}const sX=new RegExp("^(ipfs)://(.*)$","i"),OL=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),sX,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var du,wh,uu,Mp,x9,oX;const Jp=class Jp{constructor(t,n,r){be(this,uu);fe(this,"provider");fe(this,"address");fe(this,"name");be(this,du);be(this,wh);yt(this,{provider:t,address:n,name:r}),ee(this,du,null),ee(this,wh,new Nh(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return X(this,du)==null&&ee(this,du,(async()=>{try{return await X(this,wh).supportsInterface("0x9061b923")}catch(t){if(ss(t,"CALL_EXCEPTION"))return!1;throw ee(this,du,null),t}})()),await X(this,du)}async getAddress(t){if(t==null&&(t=60),t===60)try{const s=await Re(this,uu,Mp).call(this,"addr(bytes32)");return s==null||s===R2?null:s}catch(s){if(ss(s,"CALL_EXCEPTION"))return null;throw s}if(t>=0&&t<2147483648){let s=t+2147483648;const o=await Re(this,uu,Mp).call(this,"addr(bytes32,uint)",[s]);if($n(o,20))return In(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof kue&&s.supportsCoinType(t)){n=s;break}if(n==null)return null;const r=await Re(this,uu,Mp).call(this,"addr(bytes32,uint)",[t]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(t,r);if(i!=null)return i;Se(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const n=await Re(this,uu,Mp).call(this,"text(bytes32,string)",[t]);return n==null||n==="0x"?null:n}async getContentHash(){const t=await Re(this,uu,Mp).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const n=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${Nle("0x"+n[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Se(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:n});for(let r=0;r<OL.length;r++){const i=n.match(OL[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return t.push({type:"url",value:n}),{linkage:t,url:n};case"ipfs":{const o=bE(n);return t.push({type:"ipfs",value:n}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:s,value:n});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const l=(i[2]||"").split("/");if(l.length!==2)return t.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:t};const f=l[1],c=new Nh(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const y=await c.ownerOf(f);if(a!==y)return t.push({type:"!owner",value:y}),{url:null,linkage:t};t.push({type:"owner",value:y})}else if(s==="erc1155"){const y=await c.balanceOf(a,f);if(!y)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:y.toString()})}let d=await c[o](f);if(d==null||d==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:d}),s==="erc1155"&&(d=d.replace("{id}",$u(f,32).substring(2)),t.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=bE(d)),t.push({type:"metadata-url",value:d});let u={};const h=await new Ff(d).send();h.assertOk();try{u=h.bodyJson}catch{try{t.push({type:"!metadata",value:h.bodyText})}catch{const x=h.body;return x&&t.push({type:"!metadata",value:nt(x)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!u)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(u)});let g=u.image;if(typeof g!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(sX)==null)return t.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:g}),g=bE(g)}return t.push({type:"url",value:g}),{linkage:t,url:g}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const n=await t.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Se(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(t,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await Re(i=Jp,x9,oX).call(i,t,r);if(s!=null){const o=new Jp(t,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};du=new WeakMap,wh=new WeakMap,uu=new WeakSet,Mp=async function(t,n){n=(n||[]).slice();const r=X(this,wh).interface;n.unshift(cC(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(t),Se(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),n=[Ede(this.name,255),r.encodeFunctionData(i,n)],t="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await X(this,wh)[t](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!ss(s,"CALL_EXCEPTION"))throw s}return null},x9=new WeakSet,oX=async function(t,n){const r=await Jp.getEnsAddress(t);try{const s=await new Nh(r,["function resolver(bytes32) view returns (address)"],t).resolver(cC(n),{enableCcipRead:!0});return s===R2?null:s}catch(i){throw i}return null},be(Jp,x9);let yx=Jp;const jL=BigInt(0);function tn(e,t){return function(n){return n==null?t:e(n)}}function L9(e,t){return n=>{if(t&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>e(r))}}function ty(e,t){return n=>{const r={};for(const i in e){let s=i;if(t&&i in t&&!(s in n)){for(const o of t[i])if(o in n){s=o;break}}try{const o=e[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Se(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r}}function Sue(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}se(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}function ug(e){return se($n(e,!0),"invalid data","value",e),e}function Oi(e){return se($n(e,32),"invalid hash","value",e),e}const Cue=ty({address:In,blockHash:Oi,blockNumber:zt,data:ug,index:zt,removed:tn(Sue,!1),topics:L9(Oi),transactionHash:Oi,transactionIndex:zt},{index:["logIndex"]});function Aue(e){return Cue(e)}const Mue=ty({hash:tn(Oi),parentHash:Oi,parentBeaconBlockRoot:tn(Oi,null),number:zt,timestamp:zt,nonce:tn(ug),difficulty:at,gasLimit:at,gasUsed:at,stateRoot:tn(Oi,null),receiptsRoot:tn(Oi,null),blobGasUsed:tn(at,null),excessBlobGas:tn(at,null),miner:tn(In),prevRandao:tn(Oi,null),extraData:ug,baseFeePerGas:tn(at)},{prevRandao:["mixHash"]});function Tue(e){const t=Mue(e);return t.transactions=e.transactions.map(n=>typeof n=="string"?n:aX(n)),t}const Iue=ty({transactionIndex:zt,blockNumber:zt,transactionHash:Oi,address:In,topics:L9(Oi),data:ug,index:zt,blockHash:Oi},{index:["logIndex"]});function Nue(e){return Iue(e)}const Rue=ty({to:tn(In,null),from:tn(In,null),contractAddress:tn(In,null),index:zt,root:tn(nt),gasUsed:at,blobGasUsed:tn(at,null),logsBloom:tn(ug),blockHash:Oi,hash:Oi,logs:L9(Nue),blockNumber:zt,cumulativeGasUsed:at,effectiveGasPrice:tn(at),blobGasPrice:tn(at,null),status:tn(zt),type:tn(zt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function _ue(e){return Rue(e)}function aX(e){e.to&&at(e.to)===jL&&(e.to="0x0000000000000000000000000000000000000000");const t=ty({hash:Oi,index:tn(zt,void 0),type:n=>n==="0x"||n==null?0:zt(n),accessList:tn(E1,null),blobVersionedHashes:tn(L9(Oi,!0),null),blockHash:tn(Oi,null),blockNumber:tn(zt,null),transactionIndex:tn(zt,null),from:In,gasPrice:tn(at),maxPriorityFeePerGas:tn(at),maxFeePerGas:tn(at),maxFeePerBlobGas:tn(at,null),gasLimit:at,to:tn(In,null),value:at,nonce:zt,data:ug,creates:tn(In,null),chainId:tn(at,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(t.to==null&&t.creates==null&&(t.creates=Cfe(t)),(e.type===1||e.type===2)&&e.accessList==null&&(t.accessList=[]),e.signature?t.signature=wl.from(e.signature):t.signature=wl.from(e),t.chainId==null){const n=t.signature.legacyChainId;n!=null&&(t.chainId=n)}return t.blockHash&&at(t.blockHash)===jL&&(t.blockHash=null),t}const Pue="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class ny{constructor(t){fe(this,"name");yt(this,{name:t})}clone(){return new ny(this.name)}}class O9 extends ny{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);fe(this,"effectiveBlock");fe(this,"txBase");fe(this,"txCreate");fe(this,"txDataZero");fe(this,"txDataNonzero");fe(this,"txAccessListStorageKey");fe(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),se(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),yt(this,i)}clone(){return new O9(this.effectiveBlock,this)}}class j9 extends ny{constructor(n,r){super("org.ethers.plugins.network.Ens");fe(this,"address");fe(this,"targetNetwork");yt(this,{address:n||Pue,targetNetwork:r??1})}clone(){return new j9(this.address,this.targetNetwork)}}var Gb,Xb;class Due extends ny{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");be(this,Gb);be(this,Xb);ee(this,Gb,n),ee(this,Xb,r)}get url(){return X(this,Gb)}get processFunc(){return X(this,Xb)}clone(){return this}}Gb=new WeakMap,Xb=new WeakMap;const yE=new Map;var Gm,Xm,hu;const em=class em{constructor(t,n){be(this,Gm);be(this,Xm);be(this,hu);ee(this,Gm,t),ee(this,Xm,at(n)),ee(this,hu,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return X(this,Gm)}set name(t){ee(this,Gm,t)}get chainId(){return X(this,Xm)}set chainId(t){ee(this,Xm,at(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===at(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===at(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===at(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(X(this,hu).values())}attachPlugin(t){if(X(this,hu).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return X(this,hu).set(t.name,t.clone()),this}getPlugin(t){return X(this,hu).get(t)||null}getPlugins(t){return this.plugins.filter(n=>n.name.split("#")[0]===t)}clone(){const t=new em(this.name,this.chainId);return this.plugins.forEach(n=>{t.attachPlugin(n.clone())}),t}computeIntrinsicGas(t){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new O9;let r=n.txBase;if(t.to==null&&(r+=n.txCreate),t.data)for(let i=2;i<t.data.length;i+=2)t.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(t.accessList){const i=E1(t.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(t){if(Lue(),t==null)return em.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const n=yE.get(t);if(n)return n();if(typeof t=="bigint")return new em("unknown",t);se(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){se(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const n=new em(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&n.attachPlugin(new j9(t.ensAddress,t.ensNetwork)),n}se(!1,"invalid network","network",t)}static register(t,n){typeof t=="number"&&(t=BigInt(t));const r=yE.get(t);r&&se(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),yE.set(t,n)}};Gm=new WeakMap,Xm=new WeakMap,hu=new WeakMap;let mc=em;function BL(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${e}`);for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function FL(e){return new Due(e,async(t,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),t()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:BL(a.maxFee,9),maxPriorityFeePerGas:BL(a.maxPriorityFee,9)}}catch(s){Se(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let zL=!1;function Lue(){if(zL)return;zL=!0;function e(t,n,r){const i=function(){const s=new mc(t,n);return r.ensNetwork!=null&&s.attachPlugin(new j9(null,r.ensNetwork)),s.attachPlugin(new O9),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};mc.register(t,i),mc.register(n,i),r.altNames&&r.altNames.forEach(s=>{mc.register(s,i)})}e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[FL("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[FL("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1})}function gC(e){return JSON.parse(JSON.stringify(e))}var vf,oa,pu,rc,Km,d3;class Oue{constructor(t){be(this,Km);be(this,vf);be(this,oa);be(this,pu);be(this,rc);ee(this,vf,t),ee(this,oa,null),ee(this,pu,4e3),ee(this,rc,-2)}get pollingInterval(){return X(this,pu)}set pollingInterval(t){ee(this,pu,t)}start(){X(this,oa)||(ee(this,oa,X(this,vf)._setTimeout(Re(this,Km,d3).bind(this),X(this,pu))),Re(this,Km,d3).call(this))}stop(){X(this,oa)&&(X(this,vf)._clearTimeout(X(this,oa)),ee(this,oa,null))}pause(t){this.stop(),t&&ee(this,rc,-2)}resume(){this.start()}}vf=new WeakMap,oa=new WeakMap,pu=new WeakMap,rc=new WeakMap,Km=new WeakSet,d3=async function(){try{const t=await X(this,vf).getBlockNumber();if(X(this,rc)===-2){ee(this,rc,t);return}if(t!==X(this,rc)){for(let n=X(this,rc)+1;n<=t;n++){if(X(this,oa)==null)return;await X(this,vf).emit("block",n)}ee(this,rc,t)}}catch{}X(this,oa)!=null&&ee(this,oa,X(this,vf)._setTimeout(Re(this,Km,d3).bind(this),X(this,pu)))};var vh,Eh,mu;class UT{constructor(t){be(this,vh);be(this,Eh);be(this,mu);ee(this,vh,t),ee(this,mu,!1),ee(this,Eh,n=>{this._poll(n,X(this,vh))})}async _poll(t,n){throw new Error("sub-classes must override this")}start(){X(this,mu)||(ee(this,mu,!0),X(this,Eh).call(this,-2),X(this,vh).on("block",X(this,Eh)))}stop(){X(this,mu)&&(ee(this,mu,!1),X(this,vh).off("block",X(this,Eh)))}pause(t){this.stop()}resume(){this.start()}}vh=new WeakMap,Eh=new WeakMap,mu=new WeakMap;var Ym,Ef;class jue extends UT{constructor(n,r){super(n);be(this,Ym);be(this,Ef);ee(this,Ym,r),ee(this,Ef,-2)}pause(n){n&&ee(this,Ef,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(X(this,Ym));i!=null&&(X(this,Ef)===-2?ee(this,Ef,i.number):i.number>X(this,Ef)&&(r.emit(X(this,Ym),i.number),ee(this,Ef,i.number)))}}Ym=new WeakMap,Ef=new WeakMap;var w9;class Bue extends UT{constructor(n,r){super(n);be(this,w9);ee(this,w9,gC(r))}async _poll(n,r){throw new Error("@TODO")}}w9=new WeakMap;var Zm;class Fue extends UT{constructor(n,r){super(n);be(this,Zm);ee(this,Zm,r)}async _poll(n,r){const i=await r.getTransactionReceipt(X(this,Zm));i&&r.emit(X(this,Zm),i)}}Zm=new WeakMap;var kf,qm,Qm,gu,aa,v9,lX;class xT{constructor(t,n){be(this,v9);be(this,kf);be(this,qm);be(this,Qm);be(this,gu);be(this,aa);ee(this,kf,t),ee(this,qm,gC(n)),ee(this,Qm,Re(this,v9,lX).bind(this)),ee(this,gu,!1),ee(this,aa,-2)}start(){X(this,gu)||(ee(this,gu,!0),X(this,aa)===-2&&X(this,kf).getBlockNumber().then(t=>{ee(this,aa,t)}),X(this,kf).on("block",X(this,Qm)))}stop(){X(this,gu)&&(ee(this,gu,!1),X(this,kf).off("block",X(this,Qm)))}pause(t){this.stop(),t&&ee(this,aa,-2)}resume(){this.start()}}kf=new WeakMap,qm=new WeakMap,Qm=new WeakMap,gu=new WeakMap,aa=new WeakMap,v9=new WeakSet,lX=async function(t){if(X(this,aa)===-2)return;const n=gC(X(this,qm));n.fromBlock=X(this,aa)+1,n.toBlock=t;const r=await X(this,kf).getLogs(n);if(r.length===0){X(this,aa)<t-60&&ee(this,aa,t-60);return}for(const i of r)X(this,kf).emit(X(this,qm),i),ee(this,aa,i.blockNumber)};const zue=BigInt(2),$ue=10;function nU(e){return e&&typeof e.then=="function"}function u3(e,t){return e+":"+JSON.stringify(t,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class cX{constructor(t){fe(this,"name");yt(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Hue(e){return JSON.parse(JSON.stringify(e))}function bC(e){return e=Array.from(new Set(e).values()),e.sort(),e}async function UE(e,t){if(e==null)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),typeof e=="string")switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if($n(e,32)){const n=e.toLowerCase();return{type:"transaction",tag:u3("tx",{hash:n}),hash:n}}if(e.orphan){const n=e;return{type:"orphan",tag:u3("orphan",n),filter:Hue(n)}}if(e.address||e.topics){const n=e,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?bC(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{$n(a)?i.push(a):s.push((async()=>{i.push(await As(a,t))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=bC(i.map(a=>a.toLowerCase()))}return{filter:r,tag:u3("event",r),type:"event"}}se(!1,"unknown ProviderEvent","event",e)}function xE(){return new Date().getTime()}const Vue={cacheTimeout:250,pollingInterval:4e3};var Ji,bu,es,Jm,To,kh,yu,Sf,Kb,la,eg,tg,Gt,Eo,yC,UC,M5,xC,T5,h3;class Wue{constructor(t,n){be(this,Gt);be(this,Ji);be(this,bu);be(this,es);be(this,Jm);be(this,To);be(this,kh);be(this,yu);be(this,Sf);be(this,Kb);be(this,la);be(this,eg);be(this,tg);if(ee(this,tg,Object.assign({},Vue,n||{})),t==="any")ee(this,kh,!0),ee(this,To,null);else if(t){const r=mc.from(t);ee(this,kh,!1),ee(this,To,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else ee(this,kh,!1),ee(this,To,null);ee(this,Sf,-1),ee(this,yu,new Map),ee(this,Ji,new Map),ee(this,bu,new Map),ee(this,es,null),ee(this,Jm,!1),ee(this,Kb,1),ee(this,la,new Map),ee(this,eg,!1)}get pollingInterval(){return X(this,tg).pollingInterval}get provider(){return this}get plugins(){return Array.from(X(this,bu).values())}attachPlugin(t){if(X(this,bu).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return X(this,bu).set(t.name,t.connect(this)),this}getPlugin(t){return X(this,bu).get(t)||null}get disableCcipRead(){return X(this,eg)}set disableCcipRead(t){ee(this,eg,!!t)}async ccipReadFetch(t,n,r){if(this.disableCcipRead||r.length===0||t.to==null)return null;const i=t.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],f=l.replace("{sender}",i).replace("{data}",s),c=new Ff(f);l.indexOf("{data}")===-1&&(c.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:a,urls:r});let d="unknown error";const u=await c.send();try{const h=u.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:h}),h.data;h.message&&(d=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:h})}catch{}Se(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:l,errorMessage:d}}),o.push(d)}Se(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:o}})}_wrapBlock(t,n){return new fue(Tue(t),this)}_wrapLog(t,n){return new ey(Aue(t),this)}_wrapTransactionReceipt(t,n){return new KG(_ue(t),this)}_wrapTransactionResponse(t,n){return new F2(aX(t),this)}_detectNetwork(){Se(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){Se(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=zt(await Re(this,Gt,Eo).call(this,{method:"getBlockNumber"}),"%response");return X(this,Sf)>=0&&ee(this,Sf,t),t}_getAddress(t){return As(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if($n(t))return $n(t,32)?t:Op(t);if(typeof t=="bigint"&&(t=zt(t,"blockTag")),typeof t=="number")return t>=0?Op(t):X(this,Sf)>=0?Op(X(this,Sf)+t):this.getBlockNumber().then(n=>Op(n+t));se(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const n=(t.topics||[]).map(l=>l==null?null:Array.isArray(l)?bC(l.map(f=>f.toLowerCase())):l.toLowerCase()),r="blockHash"in t?t.blockHash:void 0,i=(l,f,c)=>{let d;switch(l.length){case 0:break;case 1:d=l[0];break;default:l.sort(),d=l}if(r&&(f!=null||c!=null))throw new Error("invalid filter");const u={};return d&&(u.address=d),n.length&&(u.topics=n),f&&(u.fromBlock=f),c&&(u.toBlock=c),r&&(u.blockHash=r),u};let s=[];if(t.address)if(Array.isArray(t.address))for(const l of t.address)s.push(this._getAddress(l));else s.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(t){const n=gx(t),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=As(n[i],this);nU(s)?r.push(async function(){n[i]=await s}()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);nU(i)?r.push(async function(){n.blockTag=await i}()):n.blockTag=i}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(X(this,To)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw X(this,To)===i&&ee(this,To,null),s}})();return ee(this,To,i),(await i).clone()}const t=X(this,To),[n,r]=await Promise.all([t,this._detectNetwork()]);return n.chainId!==r.chainId&&(X(this,kh)?(this.emit("network",r,n),X(this,To)===t&&ee(this,To,Promise.resolve(r))):Se(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const t=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Es({_block:Re(this,Gt,xC).call(this,"latest",!1),gasPrice:(async()=>{try{const c=await Re(this,Gt,Eo).call(this,{method:"getGasPrice"});return at(c,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const c=await Re(this,Gt,Eo).call(this,{method:"getPriorityFee"});return at(c,"%response")}catch{}return null})()});let a=null,l=null;const f=this._wrapBlock(i,t);return f&&f.baseFeePerGas&&(l=o??BigInt("1000000000"),a=f.baseFeePerGas*zue+l),new PL(s,a,l)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ff(r.url),s=await r.processFunc(n,this,i);return new PL(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(t){let n=this._getTransactionRequest(t);return nU(n)&&(n=await n),at(await Re(this,Gt,Eo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(t){const{tx:n,blockTag:r}=await Es({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await Re(this,Gt,UC).call(this,Re(this,Gt,yC).call(this,n,r,t.enableCcipRead?0:-1))}async getBalance(t,n){return at(await Re(this,Gt,M5).call(this,{method:"getBalance"},t,n),"%response")}async getTransactionCount(t,n){return zt(await Re(this,Gt,M5).call(this,{method:"getTransactionCount"},t,n),"%response")}async getCode(t,n){return nt(await Re(this,Gt,M5).call(this,{method:"getCode"},t,n))}async getStorage(t,n,r){const i=at(n,"position");return nt(await Re(this,Gt,M5).call(this,{method:"getStorage",position:i},t,r))}async broadcastTransaction(t){const{blockNumber:n,hash:r,network:i}=await Es({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),s=PG.from(t);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(t,n){const{network:r,params:i}=await Es({network:this.getNetwork(),params:Re(this,Gt,xC).call(this,t,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(t){const{network:n,params:r}=await Es({network:this.getNetwork(),params:Re(this,Gt,Eo).call(this,{method:"getTransaction",hash:t})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(t){const{network:n,params:r}=await Es({network:this.getNetwork(),params:Re(this,Gt,Eo).call(this,{method:"getTransactionReceipt",hash:t})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await Re(this,Gt,Eo).call(this,{method:"getTransaction",hash:t});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(t){const{result:n}=await Es({network:this.getNetwork(),result:Re(this,Gt,Eo).call(this,{method:"getTransactionResult",hash:t})});return n==null?null:nt(n)}async getLogs(t){let n=this._getFilter(t);nU(n)&&(n=await n);const{network:r,params:i}=await Es({network:this.getNetwork(),params:Re(this,Gt,Eo).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(t){Se(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await yx.fromName(this,t)}async getAvatar(t){const n=await this.getResolver(t);return n?await n.getAvatar():null}async resolveName(t){const n=await this.getResolver(t);return n?await n.getAddress():null}async lookupAddress(t){t=In(t);const n=cC(t.substring(2).toLowerCase()+".addr.reverse");try{const r=await yx.getEnsAddress(this),s=await new Nh(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===R2)return null;const a=await new Nh(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==t?null:a}catch(r){if(ss(r,"BAD_DATA")&&r.value==="0x"||ss(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(t,n,r){const i=n??1;return i===0?this.getTransactionReceipt(t):new Promise(async(s,o)=>{let a=null;const l=async f=>{try{const c=await this.getTransactionReceipt(t);if(c!=null&&f-c.blockNumber+1>=i){s(c),a&&(clearTimeout(a),a=null);return}}catch(c){console.log("EEE",c)}this.once("block",l)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Mr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(t){Se(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const n=X(this,la).get(t);n&&(n.timer&&clearTimeout(n.timer),X(this,la).delete(t))}_setTimeout(t,n){n==null&&(n=0);const r=V6(this,Kb)._++,i=()=>{X(this,la).delete(r),t()};if(this.paused)X(this,la).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);X(this,la).set(r,{timer:s,func:i,time:xE()})}return r}_forEachSubscriber(t){for(const n of X(this,Ji).values())t(n.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new cX(t.type);case"block":{const n=new Oue(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new jue(this,t.type);case"event":return new xT(this,t.filter);case"transaction":return new Fue(this,t.hash);case"orphan":return new Bue(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,n){for(const r of X(this,Ji).values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),X(this,es)!=null&&n.pause(X(this,es));break}}async on(t,n){const r=await Re(this,Gt,h3).call(this,t);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,X(this,es)!=null&&r.subscriber.pause(X(this,es))),this}async once(t,n){const r=await Re(this,Gt,h3).call(this,t);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,X(this,es)!=null&&r.subscriber.pause(X(this,es))),this}async emit(t,...n){const r=await Re(this,Gt,T5).call(this,t,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new kW(this,o?null:s,t);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),X(this,Ji).delete(r.tag)),i>0}async listenerCount(t){if(t){const r=await Re(this,Gt,T5).call(this,t);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of X(this,Ji).values())n+=r.length;return n}async listeners(t){if(t){const r=await Re(this,Gt,T5).call(this,t);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of X(this,Ji).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(t,n){const r=await Re(this,Gt,T5).call(this,t);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),X(this,Ji).delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:n,started:r,subscriber:i}=await Re(this,Gt,h3).call(this,t);r&&i.stop(),X(this,Ji).delete(n)}else for(const[n,{started:r,subscriber:i}]of X(this,Ji))r&&i.stop(),X(this,Ji).delete(n);return this}async addListener(t,n){return await this.on(t,n)}async removeListener(t,n){return this.off(t,n)}get destroyed(){return X(this,Jm)}destroy(){this.removeAllListeners();for(const t of X(this,la).keys())this._clearTimeout(t);ee(this,Jm,!0)}get paused(){return X(this,es)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(ee(this,Sf,-1),X(this,es)!=null){if(X(this,es)==!!t)return;Se(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(t)),ee(this,es,!!t);for(const n of X(this,la).values())n.timer&&clearTimeout(n.timer),n.time=xE()-n.time}resume(){if(X(this,es)!=null){this._forEachSubscriber(t=>t.resume()),ee(this,es,null);for(const t of X(this,la).values()){let n=t.time;n<0&&(n=0),t.time=xE(),setTimeout(t.func,n)}}}}Ji=new WeakMap,bu=new WeakMap,es=new WeakMap,Jm=new WeakMap,To=new WeakMap,kh=new WeakMap,yu=new WeakMap,Sf=new WeakMap,Kb=new WeakMap,la=new WeakMap,eg=new WeakMap,tg=new WeakMap,Gt=new WeakSet,Eo=async function(t){const n=X(this,tg).cacheTimeout;if(n<0)return await this._perform(t);const r=u3(t.method,t);let i=X(this,yu).get(r);return i||(i=this._perform(t),X(this,yu).set(r,i),setTimeout(()=>{X(this,yu).get(r)===i&&X(this,yu).delete(r)},n)),await i},yC=async function(t,n,r){Se(r<$ue,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:n,enableCcipRead:!0})});const i=gx(t);try{return nt(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&JM(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&Tr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await As(i.to,this);let l;try{l=Zue(Tr(s.data,4))}catch(d){Se(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Se(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const f=await this.ccipReadFetch(i,l.calldata,l.urls);Se(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const c={to:a,data:Br([l.selector,Yue([f,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const d=await Re(this,Gt,yC).call(this,c,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:d}),d}}throw s}},UC=async function(t){const{value:n}=await Es({network:this.getNetwork(),value:t});return n},M5=async function(t,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await Re(this,Gt,UC).call(this,Re(this,Gt,Eo).call(this,Object.assign(t,{address:i,blockTag:s})))},xC=async function(t,n){if($n(t,32))return await Re(this,Gt,Eo).call(this,{method:"getBlock",blockHash:t,includeTransactions:n});let r=this._getBlockTag(t);return typeof r!="string"&&(r=await r),await Re(this,Gt,Eo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},T5=async function(t,n){let r=await UE(t,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await UE({orphan:"drop-log",log:n[0]},this)),X(this,Ji).get(r.tag)||null},h3=async function(t){const n=await UE(t,this),r=n.tag;let i=X(this,Ji).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},X(this,Ji).set(r,i)),i};function Gue(e,t){try{const n=wC(e,t);if(n)return ax(n)}catch{}return null}function wC(e,t){if(e==="0x")return null;try{const n=zt(Tr(e,t,t+32)),r=zt(Tr(e,n,n+32));return Tr(e,n+32,n+32+r)}catch{}return null}function $L(e){const t=Ss(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function Xue(e){if(e.length%32===0)return e;const t=new Uint8Array(Math.ceil(e.length/32)*32);return t.set(e),t}const Kue=new Uint8Array([]);function Yue(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(Kue),n+=32;for(let r=0;r<e.length;r++){const i=nn(e[r]);t[r]=$L(n),t.push($L(i.length)),t.push(Xue(i)),n+=32+Math.ceil(i.length/32)*32}return Br(t)}const HL="0x0000000000000000000000000000000000000000000000000000000000000000";function Zue(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Se(tm(e)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Tr(e,0,32);Se(Tr(n,0,12)===Tr(HL,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=Tr(n,12);try{const r=[],i=zt(Tr(e,32,64)),s=zt(Tr(e,i,i+32)),o=Tr(e,i+32);for(let a=0;a<s;a++){const l=Gue(o,a*32);if(l==null)throw new Error("abort");r.push(l)}t.urls=r}catch{Se(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=wC(e,64);if(r==null)throw new Error("abort");t.calldata=r}catch{Se(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Se(Tr(e,100,128)===Tr(HL,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=Tr(e,96,100);try{const r=wC(e,128);if(r==null)throw new Error("abort");t.extraData=r}catch{Se(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>t[r]),t}function ap(e,t){if(e.provider)return e.provider;Se(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function VL(e,t){let n=gx(t);if(n.to!=null&&(n.to=As(n.to,e)),n.from!=null){const r=n.from;n.from=Promise.all([e.getAddress(),As(r,e)]).then(([i,s])=>(se(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=e.getAddress();return await Es(n)}class que{constructor(t){fe(this,"provider");yt(this,{provider:t||null})}async getNonce(t){return ap(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await VL(this,t)}async populateTransaction(t){const n=ap(this,"populateTransaction"),r=await VL(this,t);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=at(r.chainId);se(o===i.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?se(!1,"eip-1559 transaction do not support gasPrice","tx",t):(r.type===0||r.type===1)&&s&&se(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Se(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Se(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Se(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Es(r)}async estimateGas(t){return ap(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return ap(this,"call").call(await this.populateCall(t))}async resolveName(t){return await ap(this,"resolveName").resolveName(t)}async sendTransaction(t){const n=ap(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const i=PG.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}}function Que(e){return JSON.parse(JSON.stringify(e))}var ws,ic,Sh,Uu,Ch,ng,Qu,vC,EC;class fX{constructor(t){be(this,Qu);be(this,ws);be(this,ic);be(this,Sh);be(this,Uu);be(this,Ch);be(this,ng);ee(this,ws,t),ee(this,ic,null),ee(this,Sh,Re(this,Qu,vC).bind(this)),ee(this,Uu,!1),ee(this,Ch,null),ee(this,ng,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,n){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){X(this,Uu)||(ee(this,Uu,!0),Re(this,Qu,vC).call(this,-2))}stop(){X(this,Uu)&&(ee(this,Uu,!1),ee(this,ng,!0),Re(this,Qu,EC).call(this),X(this,ws).off("block",X(this,Sh)))}pause(t){t&&Re(this,Qu,EC).call(this),X(this,ws).off("block",X(this,Sh))}resume(){this.start()}}ws=new WeakMap,ic=new WeakMap,Sh=new WeakMap,Uu=new WeakMap,Ch=new WeakMap,ng=new WeakMap,Qu=new WeakSet,vC=async function(t){try{X(this,ic)==null&&ee(this,ic,this._subscribe(X(this,ws)));let n=null;try{n=await X(this,ic)}catch(s){if(!ss(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){ee(this,ic,null),X(this,ws)._recoverSubscriber(this,this._recover(X(this,ws)));return}const r=await X(this,ws).getNetwork();if(X(this,Ch)||ee(this,Ch,r),X(this,Ch).chainId!==r.chainId)throw new Error("chaid changed");if(X(this,ng))return;const i=await X(this,ws).send("eth_getFilterChanges",[n]);await this._emitResults(X(this,ws),i)}catch(n){console.log("@TODO",n)}X(this,ws).once("block",X(this,Sh))},EC=function(){const t=X(this,ic);t&&(ee(this,ic,null),t.then(n=>{X(this,ws).destroyed||X(this,ws).send("eth_uninstallFilter",[n])}))};var Ah;class Jue extends fX{constructor(n,r){super(n);be(this,Ah);ee(this,Ah,Que(r))}_recover(n){return new xT(n,X(this,Ah))}async _subscribe(n){return await n.send("eth_newFilter",[X(this,Ah)])}async _emitResults(n,r){for(const i of r)n.emit(X(this,Ah),n._wrapLog(i,n._network))}}Ah=new WeakMap;class e0e extends fX{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,n){for(const r of n)t.emit("pending",r)}}const t0e="bigint,boolean,function,number,string,symbol".split(/,/g);function p3(e){if(e==null||t0e.indexOf(typeof e)>=0||typeof e.getAddress=="function")return e;if(Array.isArray(e))return e.map(p3);if(typeof e=="object")return Object.keys(e).reduce((t,n)=>(t[n]=e[n],t),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function n0e(e){return new Promise(t=>{setTimeout(t,e)})}function lp(e){return e&&e.toLowerCase()}function WL(e){return e&&typeof e.pollingInterval=="number"}const dX={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class wE extends que{constructor(n,r){super(n);fe(this,"address");r=In(r),yt(this,{address:r})}connect(n){Se(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=p3(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await As(o,this.provider);se(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await As(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const f=async()=>{try{const c=await this.provider.getTransaction(i);if(c!=null){s(c.replaceableTransaction(r));return}}catch(c){if(ss(c,"CANCELLED")||ss(c,"BAD_DATA")||ss(c,"NETWORK_ERROR")){c.info==null&&(c.info={}),c.info.sendTransactionHash=i,o(c);return}if(ss(c,"INVALID_ARGUMENT")&&(l++,c.info==null&&(c.info={}),c.info.sendTransactionHash=i,l>10)){o(c);return}this.provider.emit("error",Mr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{f()},a.pop()||4e3)};f()})}async signTransaction(n){const r=p3(n);if(r.from){const s=await As(r.from,this.provider);se(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?Df(n):n;return await this.provider.send("personal_sign",[nt(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=p3(i),o=await mx.resolveNames(n,r,s,async a=>{const l=await As(a);return se(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(mx.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Df(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),nt(r)])}}var Mh,rg,Cf,sc,el,ca,qs,Yb,kC;class r0e extends Wue{constructor(n,r){super(n,r);be(this,Yb);be(this,Mh);be(this,rg);be(this,Cf);be(this,sc);be(this,el);be(this,ca);be(this,qs);ee(this,rg,1),ee(this,Mh,Object.assign({},dX,r||{})),ee(this,Cf,[]),ee(this,sc,null),ee(this,ca,null),ee(this,qs,null);{let s=null;const o=new Promise(a=>{s=a});ee(this,el,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(se(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&ee(this,ca,mc.from(n))):i&&(se(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),ee(this,ca,i))}_getOption(n){return X(this,Mh)[n]}get _network(){return Se(X(this,ca),"network is not available yet","NETWORK_ERROR"),X(this,ca)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&at(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(X(this,ca))return X(this,ca)}else return n;return X(this,qs)?await X(this,qs):this.ready?(ee(this,qs,(async()=>{try{const r=mc.from(at(await this.send("eth_chainId",[])));return ee(this,qs,null),r}catch(r){throw ee(this,qs,null),r}})()),await X(this,qs)):(ee(this,qs,(async()=>{const r={id:V6(this,rg)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],ee(this,qs,null)}catch(s){throw ee(this,qs,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return mc.from(at(i.result));throw this.getRpcError(r,i)})()),await X(this,qs))}_start(){X(this,el)==null||X(this,el).resolve==null||(X(this,el).resolve(),ee(this,el,null),(async()=>{for(;X(this,ca)==null&&!this.destroyed;)try{ee(this,ca,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Mr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await n0e(1e3)}Re(this,Yb,kC).call(this)})())}async _waitUntilReady(){if(X(this,el)!=null)return await X(this,el).promise}_getSubscriber(n){return n.type==="pending"?new e0e(this):n.type==="event"?this._getOption("polling")?new xT(this,n.filter):new Jue(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new cX("orphan"):super._getSubscriber(n)}get ready(){return X(this,el)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Op(at(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=nt(n[i]))}),n.accessList&&(r.accessList=E1(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[lp(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[lp(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[lp(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[lp(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(lp):n.filter.address=lp(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return Mr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=SC(s),f=B2.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return f.info={error:s,payload:n},f}const o=JSON.stringify(o0e(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Mr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Mr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Mr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Mr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return Mr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Mr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):Mr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Mr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=V6(this,rg)._++,s=new Promise((o,a)=>{X(this,Cf).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return Re(this,Yb,kC).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new wE(this,s[n])}const{accounts:i}=await Es({network:this.getNetwork(),accounts:r});n=In(n);for(const s of i)if(In(s)===n)return new wE(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new wE(this,r))}destroy(){X(this,sc)&&(clearTimeout(X(this,sc)),ee(this,sc,null));for(const{payload:n,reject:r}of X(this,Cf))r(Mr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));ee(this,Cf,[]),super.destroy()}}Mh=new WeakMap,rg=new WeakMap,Cf=new WeakMap,sc=new WeakMap,el=new WeakMap,ca=new WeakMap,qs=new WeakMap,Yb=new WeakSet,kC=function(){if(X(this,sc))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");ee(this,sc,setTimeout(()=>{ee(this,sc,null);const r=X(this,Cf);for(ee(this,Cf,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==X(this,Mh).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>X(this,Mh).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:f}of i){if(this.destroyed){l(Mr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const c=o.filter(d=>d.id===f.id)[0];if(c==null){const d=Mr("missing response for request","BAD_DATA",{value:o,info:{payload:f}});this.emit("error",d),l(d);continue}if("error"in c){l(this.getRpcError(f,c));continue}a(c.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var xu;class i0e extends r0e{constructor(n,r){super(n,r);be(this,xu);let i=this._getOption("pollingInterval");i==null&&(i=dX.pollingInterval),ee(this,xu,i)}_getSubscriber(n){const r=super._getSubscriber(n);return WL(r)&&(r.pollingInterval=X(this,xu)),r}get pollingInterval(){return X(this,xu)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");ee(this,xu,n),this._forEachSubscriber(r=>{WL(r)&&(r.pollingInterval=X(this,xu))})}}xu=new WeakMap;var ig;class s0e extends i0e{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);be(this,ig);typeof n=="string"?ee(this,ig,new Ff(n)):ee(this,ig,n.clone())}_getConnection(){return X(this,ig).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}ig=new WeakMap;function SC(e){if(e==null)return null;if(typeof e.message=="string"&&e.message.match(/revert/i)&&$n(e.data))return{message:e.message,data:e.data};if(typeof e=="object"){for(const t in e){const n=SC(e[t]);if(n)return n}return null}if(typeof e=="string")try{return SC(JSON.parse(e))}catch{}return null}function CC(e,t){if(e!=null){if(typeof e.message=="string"&&t.push(e.message),typeof e=="object")for(const n in e)CC(e[n],t);if(typeof e=="string")try{return CC(JSON.parse(e),t)}catch{}}}function o0e(e){const t=[];return CC(e,t),t}const a0e="hh-sol-artifact-1",l0e="CanonThread",c0e="contracts/CanonThread.sol",f0e=[{inputs:[{internalType:"address",name:"_tokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"contentType",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ContentAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"oldContentHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"}],name:"ContentUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"nodeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"NodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"proposer",type:"address"},{indexed:!1,internalType:"uint256",name:"stake",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"bool",name:"passed",type:"bool"}],name:"ProposalExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ThreadCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"string",name:"newMetadataHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"}],name:"ThreadUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"bool",name:"support",type:"bool"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Voted",type:"event"},{inputs:[],name:"MINIMUM_STAKE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_BUFFER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_PERIOD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"_nodeType",type:"uint8"}],name:"createNode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"}],name:"createThread",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"executeProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"hasVoted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_hash",type:"string"}],name:"isValidIPFSHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"nodeCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"nodes",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposalCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"string",name:"proposedMetadataHash",type:"string"},{internalType:"string",name:"proposedContentHash",type:"string"},{internalType:"address",name:"proposer",type:"address"},{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"votesFor",type:"uint256"},{internalType:"uint256",name:"votesAgainst",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"bool",name:"passed",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"},{internalType:"uint256",name:"_stake",type:"uint256"}],name:"proposeUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"threadCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"threads",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"version",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract CanonToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"}],name:"updateThread",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"bool",name:"_support",type:"bool"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],d0e="0x60806040523480156200001157600080fd5b50604051620030f2380380620030f28339818101604052810190620000379190620000f1565b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060006006819055505062000123565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620000b9826200008c565b9050919050565b620000cb81620000ac565b8114620000d757600080fd5b50565b600081519050620000eb81620000c0565b92915050565b6000602082840312156200010a576200010962000087565b5b60006200011a84828501620000da565b91505092915050565b612fbf80620001336000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",u0e="0x608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",h0e={},p0e={},m0e={_format:a0e,contractName:l0e,sourceName:c0e,abi:f0e,bytecode:d0e,deployedBytecode:u0e,linkReferences:h0e,deployedLinkReferences:p0e},g0e="hh-sol-artifact-1",b0e="CanonToken",y0e="contracts/CanonToken.sol",U0e=[{inputs:[{internalType:"uint256",name:"initialSupply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],x0e="0x60806040523480156200001157600080fd5b5060405162001dc738038062001dc7833981810160405281019062000037919062000560565b336040518060400160405280600a81526020017f43616e6f6e546f6b656e000000000000000000000000000000000000000000008152506040518060400160405280600581526020017f43414e4f4e0000000000000000000000000000000000000000000000000000008152508160039081620000b5919062000802565b508060049081620000c7919062000802565b505050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036200013f5760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016200013691906200092e565b60405180910390fd5b62000150816200019460201b60201c565b506200018d33620001666200025a60201b60201c565b600a62000174919062000adb565b8362000181919062000b2c565b6200026360201b60201c565b5062000c1d565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60006012905090565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620002d85760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401620002cf91906200092e565b60405180910390fd5b620002ec60008383620002f060201b60201c565b5050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036200034657806002600082825462000339919062000b77565b925050819055506200041c565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015620003d5578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401620003cc9392919062000bc3565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620004675780600260008282540392505081905550620004b4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405162000513919062000c00565b60405180910390a3505050565b600080fd5b6000819050919050565b6200053a8162000525565b81146200054657600080fd5b50565b6000815190506200055a816200052f565b92915050565b60006020828403121562000579576200057862000520565b5b6000620005898482850162000549565b91505092915050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200061457607f821691505b6020821081036200062a5762000629620005cc565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620006947fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000655565b620006a0868362000655565b95508019841693508086168417925050509392505050565b6000819050919050565b6000620006e3620006dd620006d78462000525565b620006b8565b62000525565b9050919050565b6000819050919050565b620006ff83620006c2565b620007176200070e82620006ea565b84845462000662565b825550505050565b600090565b6200072e6200071f565b6200073b818484620006f4565b505050565b5b8181101562000763576200075760008262000724565b60018101905062000741565b5050565b601f821115620007b2576200077c8162000630565b620007878462000645565b8101602085101562000797578190505b620007af620007a68562000645565b83018262000740565b50505b505050565b600082821c905092915050565b6000620007d760001984600802620007b7565b1980831691505092915050565b6000620007f28383620007c4565b9150826002028217905092915050565b6200080d8262000592565b67ffffffffffffffff8111156200082957620008286200059d565b5b620008358254620005fb565b6200084282828562000767565b600060209050601f8311600181146200087a576000841562000865578287015190505b620008718582620007e4565b865550620008e1565b601f1984166200088a8662000630565b60005b82811015620008b4578489015182556001820191506020850194506020810190506200088d565b86831015620008d45784890151620008d0601f891682620007c4565b8355505b6001600288020188555050505b505050505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200091682620008e9565b9050919050565b620009288162000909565b82525050565b60006020820190506200094560008301846200091d565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b6001851115620009d957808604811115620009b157620009b06200094b565b5b6001851615620009c15780820291505b8081029050620009d1856200097a565b945062000991565b94509492505050565b600082620009f4576001905062000ac7565b8162000a04576000905062000ac7565b816001811462000a1d576002811462000a285762000a5e565b600191505062000ac7565b60ff84111562000a3d5762000a3c6200094b565b5b8360020a91508482111562000a575762000a566200094b565b5b5062000ac7565b5060208310610133831016604e8410600b841016171562000a985782820a90508381111562000a925762000a916200094b565b5b62000ac7565b62000aa7848484600162000987565b9250905081840481111562000ac15762000ac06200094b565b5b81810290505b9392505050565b600060ff82169050919050565b600062000ae88262000525565b915062000af58362000ace565b925062000b247fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484620009e2565b905092915050565b600062000b398262000525565b915062000b468362000525565b925082820262000b568162000525565b9150828204841483151762000b705762000b6f6200094b565b5b5092915050565b600062000b848262000525565b915062000b918362000525565b925082820190508082111562000bac5762000bab6200094b565b5b92915050565b62000bbd8162000525565b82525050565b600060608201905062000bda60008301866200091d565b62000be9602083018562000bb2565b62000bf8604083018462000bb2565b949350505050565b600060208201905062000c17600083018462000bb2565b92915050565b61119a8062000c2d6000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",w0e="0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",v0e={},E0e={},k0e={_format:g0e,contractName:b0e,sourceName:y0e,abi:U0e,bytecode:x0e,deployedBytecode:w0e,linkReferences:v0e,deployedLinkReferences:E0e},S0e="0x5FbDB2315678afecb367f032d93F642f64180aa3",C0e="0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",rU={canonToken:S0e,canonThread:C0e};function ei(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ei(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var A0e={value:()=>{}};function B9(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new m3(n)}function m3(e){this._=e}function M0e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}m3.prototype=B9.prototype={constructor:m3,on:function(e,t){var n=this._,r=M0e(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=T0e(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=GL(n[i],e.name,t);else if(t==null)for(i in n)n[i]=GL(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new m3(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function T0e(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function GL(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=A0e,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var AC="http://www.w3.org/1999/xhtml";const XL={svg:"http://www.w3.org/2000/svg",xhtml:AC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function F9(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),XL.hasOwnProperty(t)?{space:XL[t],local:e}:e}function I0e(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===AC&&t.documentElement.namespaceURI===AC?t.createElement(e):t.createElementNS(n,e)}}function N0e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function uX(e){var t=F9(e);return(t.local?N0e:I0e)(t)}function R0e(){}function wT(e){return e==null?R0e:function(){return this.querySelector(e)}}function _0e(e){typeof e!="function"&&(e=wT(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,f,c=0;c<o;++c)(l=s[c])&&(f=e.call(l,l.__data__,c,s))&&("__data__"in l&&(f.__data__=l.__data__),a[c]=f);return new Oo(r,this._parents)}function P0e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function D0e(){return[]}function hX(e){return e==null?D0e:function(){return this.querySelectorAll(e)}}function L0e(e){return function(){return P0e(e.apply(this,arguments))}}function O0e(e){typeof e=="function"?e=L0e(e):e=hX(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,f=0;f<a;++f)(l=o[f])&&(r.push(e.call(l,l.__data__,f,o)),i.push(l));return new Oo(r,i)}function pX(e){return function(){return this.matches(e)}}function mX(e){return function(t){return t.matches(e)}}var j0e=Array.prototype.find;function B0e(e){return function(){return j0e.call(this.children,e)}}function F0e(){return this.firstElementChild}function z0e(e){return this.select(e==null?F0e:B0e(typeof e=="function"?e:mX(e)))}var $0e=Array.prototype.filter;function H0e(){return Array.from(this.children)}function V0e(e){return function(){return $0e.call(this.children,e)}}function W0e(e){return this.selectAll(e==null?H0e:V0e(typeof e=="function"?e:mX(e)))}function G0e(e){typeof e!="function"&&(e=pX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,f=0;f<o;++f)(l=s[f])&&e.call(l,l.__data__,f,s)&&a.push(l);return new Oo(r,this._parents)}function gX(e){return new Array(e.length)}function X0e(){return new Oo(this._enter||this._groups.map(gX),this._parents)}function Ux(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ux.prototype={constructor:Ux,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function K0e(e){return function(){return e}}function Y0e(e,t,n,r,i,s){for(var o=0,a,l=t.length,f=s.length;o<f;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Ux(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function Z0e(e,t,n,r,i,s,o){var a,l,f=new Map,c=t.length,d=s.length,u=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(u[a]=h=o.call(l,l.__data__,a,t)+"",f.has(h)?i[a]=l:f.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=f.get(h))?(r[a]=l,l.__data__=s[a],f.delete(h)):n[a]=new Ux(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&f.get(u[a])===l&&(i[a]=l)}function q0e(e){return e.__data__}function Q0e(e,t){if(!arguments.length)return Array.from(this,q0e);var n=t?Z0e:Y0e,r=this._parents,i=this._groups;typeof e!="function"&&(e=K0e(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),f=0;f<s;++f){var c=r[f],d=i[f],u=d.length,h=J0e(e.call(c,c&&c.__data__,f,r)),g=h.length,y=a[f]=new Array(g),U=o[f]=new Array(g),x=l[f]=new Array(u);n(c,d,y,U,x,h,t);for(var v=0,E=0,k,M;v<g;++v)if(k=y[v]){for(v>=E&&(E=v+1);!(M=U[E])&&++E<g;);k._next=M||null}}return o=new Oo(o,r),o._enter=a,o._exit=l,o}function J0e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ehe(){return new Oo(this._exit||this._groups.map(gX),this._parents)}function the(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function nhe(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var f=n[l],c=r[l],d=f.length,u=a[l]=new Array(d),h,g=0;g<d;++g)(h=f[g]||c[g])&&(u[g]=h);for(;l<i;++l)a[l]=n[l];return new Oo(a,this._parents)}function rhe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function ihe(e){e||(e=she);function t(d,u){return d&&u?e(d.__data__,u.__data__):!d-!u}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),f,c=0;c<a;++c)(f=o[c])&&(l[c]=f);l.sort(t)}return new Oo(i,this._parents).order()}function she(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ohe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ahe(){return Array.from(this)}function lhe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function che(){let e=0;for(const t of this)++e;return e}function fhe(){return!this.node()}function dhe(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function uhe(e){return function(){this.removeAttribute(e)}}function hhe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function phe(e,t){return function(){this.setAttribute(e,t)}}function mhe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ghe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bhe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yhe(e,t){var n=F9(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?hhe:uhe:typeof t=="function"?n.local?bhe:ghe:n.local?mhe:phe)(n,t))}function bX(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Uhe(e){return function(){this.style.removeProperty(e)}}function xhe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function whe(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function vhe(e,t,n){return arguments.length>1?this.each((t==null?Uhe:typeof t=="function"?whe:xhe)(e,t,n??"")):hg(this.node(),e)}function hg(e,t){return e.style.getPropertyValue(t)||bX(e).getComputedStyle(e,null).getPropertyValue(t)}function Ehe(e){return function(){delete this[e]}}function khe(e,t){return function(){this[e]=t}}function She(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Che(e,t){return arguments.length>1?this.each((t==null?Ehe:typeof t=="function"?She:khe)(e,t)):this.node()[e]}function yX(e){return e.trim().split(/^|\s+/)}function vT(e){return e.classList||new UX(e)}function UX(e){this._node=e,this._names=yX(e.getAttribute("class")||"")}UX.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xX(e,t){for(var n=vT(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function wX(e,t){for(var n=vT(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Ahe(e){return function(){xX(this,e)}}function Mhe(e){return function(){wX(this,e)}}function The(e,t){return function(){(t.apply(this,arguments)?xX:wX)(this,e)}}function Ihe(e,t){var n=yX(e+"");if(arguments.length<2){for(var r=vT(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?The:t?Ahe:Mhe)(n,t))}function Nhe(){this.textContent=""}function Rhe(e){return function(){this.textContent=e}}function _he(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Phe(e){return arguments.length?this.each(e==null?Nhe:(typeof e=="function"?_he:Rhe)(e)):this.node().textContent}function Dhe(){this.innerHTML=""}function Lhe(e){return function(){this.innerHTML=e}}function Ohe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function jhe(e){return arguments.length?this.each(e==null?Dhe:(typeof e=="function"?Ohe:Lhe)(e)):this.node().innerHTML}function Bhe(){this.nextSibling&&this.parentNode.appendChild(this)}function Fhe(){return this.each(Bhe)}function zhe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $he(){return this.each(zhe)}function Hhe(e){var t=typeof e=="function"?e:uX(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vhe(){return null}function Whe(e,t){var n=typeof e=="function"?e:uX(e),r=t==null?Vhe:typeof t=="function"?t:wT(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ghe(){var e=this.parentNode;e&&e.removeChild(this)}function Xhe(){return this.each(Ghe)}function Khe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yhe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zhe(e){return this.select(e?Yhe:Khe)}function qhe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Qhe(e){return function(t){e.call(this,t,this.__data__)}}function Jhe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function e1e(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function t1e(e,t,n){return function(){var r=this.__on,i,s=Qhe(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function n1e(e,t,n){var r=Jhe(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,f=a.length,c;l<f;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?t1e:e1e,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function vX(e,t,n){var r=bX(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function r1e(e,t){return function(){return vX(this,e,t)}}function i1e(e,t){return function(){return vX(this,e,t.apply(this,arguments))}}function s1e(e,t){return this.each((typeof t=="function"?i1e:r1e)(e,t))}function*o1e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var EX=[null];function Oo(e,t){this._groups=e,this._parents=t}function ry(){return new Oo([[document.documentElement]],EX)}function a1e(){return this}Oo.prototype=ry.prototype={constructor:Oo,select:_0e,selectAll:O0e,selectChild:z0e,selectChildren:W0e,filter:G0e,data:Q0e,enter:X0e,exit:ehe,join:the,merge:nhe,selection:a1e,order:rhe,sort:ihe,call:ohe,nodes:ahe,node:lhe,size:che,empty:fhe,each:dhe,attr:yhe,style:vhe,property:Che,classed:Ihe,text:Phe,html:jhe,raise:Fhe,lower:$he,append:Hhe,insert:Whe,remove:Xhe,clone:Zhe,datum:qhe,on:n1e,dispatch:s1e,[Symbol.iterator]:o1e};function Ro(e){return typeof e=="string"?new Oo([[document.querySelector(e)]],[document.documentElement]):new Oo([[e]],EX)}function l1e(e){let t;for(;t=e.sourceEvent;)e=t;return e}function tl(e,t){if(e=l1e(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const c1e={passive:!1},z2={capture:!0,passive:!1};function vE(e){e.stopImmediatePropagation()}function sm(e){e.preventDefault(),e.stopImmediatePropagation()}function kX(e){var t=e.document.documentElement,n=Ro(e).on("dragstart.drag",sm,z2);"onselectstart"in t?n.on("selectstart.drag",sm,z2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function SX(e,t){var n=e.document.documentElement,r=Ro(e).on("dragstart.drag",null);t&&(r.on("click.drag",sm,z2),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const iU=e=>()=>e;function MC(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:f,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:c}})}MC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function f1e(e){return!e.ctrlKey&&!e.button}function d1e(){return this.parentNode}function u1e(e,t){return t??{x:e.x,y:e.y}}function h1e(){return navigator.maxTouchPoints||"ontouchstart"in this}function CX(){var e=f1e,t=d1e,n=u1e,r=h1e,i={},s=B9("start","drag","end"),o=0,a,l,f,c,d=0;function u(k){k.on("mousedown.drag",h).filter(r).on("touchstart.drag",U).on("touchmove.drag",x,c1e).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(k,M){if(!(c||!e.call(this,k,M))){var S=E(this,t.call(this,k,M),k,M,"mouse");S&&(Ro(k.view).on("mousemove.drag",g,z2).on("mouseup.drag",y,z2),kX(k.view),vE(k),f=!1,a=k.clientX,l=k.clientY,S("start",k))}}function g(k){if(sm(k),!f){var M=k.clientX-a,S=k.clientY-l;f=M*M+S*S>d}i.mouse("drag",k)}function y(k){Ro(k.view).on("mousemove.drag mouseup.drag",null),SX(k.view,f),sm(k),i.mouse("end",k)}function U(k,M){if(e.call(this,k,M)){var S=k.changedTouches,A=t.call(this,k,M),I=S.length,R,D;for(R=0;R<I;++R)(D=E(this,A,k,M,S[R].identifier,S[R]))&&(vE(k),D("start",k,S[R]))}}function x(k){var M=k.changedTouches,S=M.length,A,I;for(A=0;A<S;++A)(I=i[M[A].identifier])&&(sm(k),I("drag",k,M[A]))}function v(k){var M=k.changedTouches,S=M.length,A,I;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<S;++A)(I=i[M[A].identifier])&&(vE(k),I("end",k,M[A]))}function E(k,M,S,A,I,R){var D=s.copy(),_=tl(R||S,M),P,$,L;if((L=n.call(k,new MC("beforestart",{sourceEvent:S,target:u,identifier:I,active:o,x:_[0],y:_[1],dx:0,dy:0,dispatch:D}),A))!=null)return P=L.x-_[0]||0,$=L.y-_[1]||0,function B(V,z,G){var W=_,F;switch(V){case"start":i[I]=B,F=o++;break;case"end":delete i[I],--o;case"drag":_=tl(G||z,M),F=o;break}D.call(V,k,new MC(V,{sourceEvent:z,subject:L,target:u,identifier:I,active:F,x:_[0]+P,y:_[1]+$,dx:_[0]-W[0],dy:_[1]-W[1],dispatch:D}),A)}}return u.filter=function(k){return arguments.length?(e=typeof k=="function"?k:iU(!!k),u):e},u.container=function(k){return arguments.length?(t=typeof k=="function"?k:iU(k),u):t},u.subject=function(k){return arguments.length?(n=typeof k=="function"?k:iU(k),u):n},u.touchable=function(k){return arguments.length?(r=typeof k=="function"?k:iU(!!k),u):r},u.on=function(){var k=s.on.apply(s,arguments);return k===s?u:k},u.clickDistance=function(k){return arguments.length?(d=(k=+k)*k,u):Math.sqrt(d)},u}function ET(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function AX(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function iy(){}var $2=.7,xx=1/$2,om="\\s*([+-]?\\d+)\\s*",H2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",p1e=/^#([0-9a-f]{3,8})$/,m1e=new RegExp(`^rgb\\(${om},${om},${om}\\)$`),g1e=new RegExp(`^rgb\\(${yc},${yc},${yc}\\)$`),b1e=new RegExp(`^rgba\\(${om},${om},${om},${H2}\\)$`),y1e=new RegExp(`^rgba\\(${yc},${yc},${yc},${H2}\\)$`),U1e=new RegExp(`^hsl\\(${H2},${yc},${yc}\\)$`),x1e=new RegExp(`^hsla\\(${H2},${yc},${yc},${H2}\\)$`),KL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ET(iy,qh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YL,formatHex:YL,formatHex8:w1e,formatHsl:v1e,formatRgb:ZL,toString:ZL});function YL(){return this.rgb().formatHex()}function w1e(){return this.rgb().formatHex8()}function v1e(){return MX(this).formatHsl()}function ZL(){return this.rgb().formatRgb()}function qh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=p1e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qL(t):n===3?new io(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sU(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sU(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=m1e.exec(e))?new io(t[1],t[2],t[3],1):(t=g1e.exec(e))?new io(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=b1e.exec(e))?sU(t[1],t[2],t[3],t[4]):(t=y1e.exec(e))?sU(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=U1e.exec(e))?eO(t[1],t[2]/100,t[3]/100,1):(t=x1e.exec(e))?eO(t[1],t[2]/100,t[3]/100,t[4]):KL.hasOwnProperty(e)?qL(KL[e]):e==="transparent"?new io(NaN,NaN,NaN,0):null}function qL(e){return new io(e>>16&255,e>>8&255,e&255,1)}function sU(e,t,n,r){return r<=0&&(e=t=n=NaN),new io(e,t,n,r)}function E1e(e){return e instanceof iy||(e=qh(e)),e?(e=e.rgb(),new io(e.r,e.g,e.b,e.opacity)):new io}function TC(e,t,n,r){return arguments.length===1?E1e(e):new io(e,t,n,r??1)}function io(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ET(io,TC,AX(iy,{brighter(e){return e=e==null?xx:Math.pow(xx,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$2:Math.pow($2,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new io(Rh(this.r),Rh(this.g),Rh(this.b),wx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QL,formatHex:QL,formatHex8:k1e,formatRgb:JL,toString:JL}));function QL(){return`#${Q0(this.r)}${Q0(this.g)}${Q0(this.b)}`}function k1e(){return`#${Q0(this.r)}${Q0(this.g)}${Q0(this.b)}${Q0((isNaN(this.opacity)?1:this.opacity)*255)}`}function JL(){const e=wx(this.opacity);return`${e===1?"rgb(":"rgba("}${Rh(this.r)}, ${Rh(this.g)}, ${Rh(this.b)}${e===1?")":`, ${e})`}`}function wx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Q0(e){return e=Rh(e),(e<16?"0":"")+e.toString(16)}function eO(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new il(e,t,n,r)}function MX(e){if(e instanceof il)return new il(e.h,e.s,e.l,e.opacity);if(e instanceof iy||(e=qh(e)),!e)return new il;if(e instanceof il)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new il(o,a,l,e.opacity)}function S1e(e,t,n,r){return arguments.length===1?MX(e):new il(e,t,n,r??1)}function il(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ET(il,S1e,AX(iy,{brighter(e){return e=e==null?xx:Math.pow(xx,e),new il(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$2:Math.pow($2,e),new il(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new io(EE(e>=240?e-240:e+120,i,r),EE(e,i,r),EE(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new il(tO(this.h),oU(this.s),oU(this.l),wx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wx(this.opacity);return`${e===1?"hsl(":"hsla("}${tO(this.h)}, ${oU(this.s)*100}%, ${oU(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tO(e){return e=(e||0)%360,e<0?e+360:e}function oU(e){return Math.max(0,Math.min(1,e||0))}function EE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const z9=e=>()=>e;function TX(e,t){return function(n){return e+n*t}}function C1e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function JZe(e,t){var n=t-e;return n?TX(e,n>180||n<-180?n-360*Math.round(n/360):n):z9(isNaN(e)?t:e)}function A1e(e){return(e=+e)==1?IX:function(t,n){return n-t?C1e(t,n,e):z9(isNaN(t)?n:t)}}function IX(e,t){var n=t-e;return n?TX(e,n):z9(isNaN(e)?t:e)}const vx=function e(t){var n=A1e(t);function r(i,s){var o=n((i=TC(i)).r,(s=TC(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),f=IX(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=f(c),i+""}}return r.gamma=e,r}(1);function M1e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function T1e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function I1e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=q5(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function N1e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function oc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function R1e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=q5(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var IC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kE=new RegExp(IC.source,"g");function _1e(e){return function(){return e}}function P1e(e){return function(t){return e(t)+""}}function NX(e,t){var n=IC.lastIndex=kE.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=IC.exec(e))&&(i=kE.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:oc(r,i)})),n=kE.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?P1e(l[0].x):_1e(t):(t=l.length,function(f){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(f);return a.join("")})}function q5(e,t){var n=typeof t,r;return t==null||n==="boolean"?z9(t):(n==="number"?oc:n==="string"?(r=qh(t))?(t=r,vx):NX:t instanceof qh?vx:t instanceof Date?N1e:T1e(t)?M1e:Array.isArray(t)?I1e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?R1e:oc)(e,t)}var nO=180/Math.PI,NC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function RX(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*nO,skewX:Math.atan(l)*nO,scaleX:o,scaleY:a}}var aU;function D1e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?NC:RX(t.a,t.b,t.c,t.d,t.e,t.f)}function L1e(e){return e==null||(aU||(aU=document.createElementNS("http://www.w3.org/2000/svg","g")),aU.setAttribute("transform",e),!(e=aU.transform.baseVal.consolidate()))?NC:(e=e.matrix,RX(e.a,e.b,e.c,e.d,e.e,e.f))}function _X(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,c,d,u,h,g){if(f!==d||c!==u){var y=h.push("translate(",null,t,null,n);g.push({i:y-4,x:oc(f,d)},{i:y-2,x:oc(c,u)})}else(d||u)&&h.push("translate("+d+t+u+n)}function o(f,c,d,u){f!==c?(f-c>180?c+=360:c-f>180&&(f+=360),u.push({i:d.push(i(d)+"rotate(",null,r)-2,x:oc(f,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(f,c,d,u){f!==c?u.push({i:d.push(i(d)+"skewX(",null,r)-2,x:oc(f,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(f,c,d,u,h,g){if(f!==d||c!==u){var y=h.push(i(h)+"scale(",null,",",null,")");g.push({i:y-4,x:oc(f,d)},{i:y-2,x:oc(c,u)})}else(d!==1||u!==1)&&h.push(i(h)+"scale("+d+","+u+")")}return function(f,c){var d=[],u=[];return f=e(f),c=e(c),s(f.translateX,f.translateY,c.translateX,c.translateY,d,u),o(f.rotate,c.rotate,d,u),a(f.skewX,c.skewX,d,u),l(f.scaleX,f.scaleY,c.scaleX,c.scaleY,d,u),f=c=null,function(h){for(var g=-1,y=u.length,U;++g<y;)d[(U=u[g]).i]=U.x(h);return d.join("")}}}var O1e=_X(D1e,"px, ","px)","deg)"),j1e=_X(L1e,", ",")",")"),B1e=1e-12;function rO(e){return((e=Math.exp(e))+1/e)/2}function F1e(e){return((e=Math.exp(e))-1/e)/2}function z1e(e){return((e=Math.exp(2*e))-1)/(e+1)}const g3=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],f=s[2],c=o[0],d=o[1],u=o[2],h=c-a,g=d-l,y=h*h+g*g,U,x;if(y<B1e)x=Math.log(u/f)/t,U=function(A){return[a+A*h,l+A*g,f*Math.exp(t*A*x)]};else{var v=Math.sqrt(y),E=(u*u-f*f+r*y)/(2*f*n*v),k=(u*u-f*f-r*y)/(2*u*n*v),M=Math.log(Math.sqrt(E*E+1)-E),S=Math.log(Math.sqrt(k*k+1)-k);x=(S-M)/t,U=function(A){var I=A*x,R=rO(M),D=f/(n*v)*(R*z1e(t*I+M)-F1e(M));return[a+D*h,l+D*g,f*R/rO(t*I+M)]}}return U.duration=x*1e3*t/Math.SQRT2,U}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);var pg=0,I5=0,Y6=0,PX=1e3,Ex,N5,kx=0,Qh=0,$9=0,V2=typeof performance=="object"&&performance.now?performance:Date,DX=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kT(){return Qh||(DX($1e),Qh=V2.now()+$9)}function $1e(){Qh=0}function Sx(){this._call=this._time=this._next=null}Sx.prototype=LX.prototype={constructor:Sx,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?kT():+n)+(t==null?0:+t),!this._next&&N5!==this&&(N5?N5._next=this:Ex=this,N5=this),this._call=e,this._time=n,RC()},stop:function(){this._call&&(this._call=null,this._time=1/0,RC())}};function LX(e,t,n){var r=new Sx;return r.restart(e,t,n),r}function H1e(){kT(),++pg;for(var e=Ex,t;e;)(t=Qh-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pg}function iO(){Qh=(kx=V2.now())+$9,pg=I5=0;try{H1e()}finally{pg=0,W1e(),Qh=0}}function V1e(){var e=V2.now(),t=e-kx;t>PX&&($9-=t,kx=e)}function W1e(){for(var e,t=Ex,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ex=n);N5=e,RC(r)}function RC(e){if(!pg){I5&&(I5=clearTimeout(I5));var t=e-Qh;t>24?(e<1/0&&(I5=setTimeout(iO,e-V2.now()-$9)),Y6&&(Y6=clearInterval(Y6))):(Y6||(kx=V2.now(),Y6=setInterval(V1e,PX)),pg=1,DX(iO))}}function sO(e,t,n){var r=new Sx;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var G1e=B9("start","end","cancel","interrupt"),X1e=[],OX=0,oO=1,_C=2,b3=3,aO=4,PC=5,y3=6;function H9(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;K1e(e,n,{name:t,index:r,group:i,on:G1e,tween:X1e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:OX})}function ST(e,t){var n=Il(e,t);if(n.state>OX)throw new Error("too late; already scheduled");return n}function Pc(e,t){var n=Il(e,t);if(n.state>b3)throw new Error("too late; already running");return n}function Il(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function K1e(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=LX(s,0,n.time);function s(f){n.state=oO,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var c,d,u,h;if(n.state!==oO)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===b3)return sO(o);h.state===aO?(h.state=y3,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=y3,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(sO(function(){n.state===b3&&(n.state=aO,n.timer.restart(a,n.delay,n.time),a(f))}),n.state=_C,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_C){for(n.state=b3,i=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(f){for(var c=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=PC,1),d=-1,u=i.length;++d<u;)i[d].call(e,c);n.state===PC&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=y3,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function U3(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>_C&&r.state<PC,r.state=y3,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Y1e(e){return this.each(function(){U3(this,e)})}function Z1e(e,t){var n,r;return function(){var i=Pc(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function q1e(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Pc(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,f=i.length;l<f;++l)if(i[l].name===t){i[l]=a;break}l===f&&i.push(a)}s.tween=i}}function Q1e(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Il(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Z1e:q1e)(n,e,t))}function CT(e,t,n){var r=e._id;return e.each(function(){var i=Pc(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Il(i,r).value[t]}}function jX(e,t){var n;return(typeof t=="number"?oc:t instanceof qh?vx:(n=qh(t))?(t=n,vx):NX)(e,t)}function J1e(e){return function(){this.removeAttribute(e)}}function epe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tpe(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function npe(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function rpe(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function ipe(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function spe(e,t){var n=F9(e),r=n==="transform"?j1e:jX;return this.attrTween(e,typeof t=="function"?(n.local?ipe:rpe)(n,r,CT(this,"attr."+e,t)):t==null?(n.local?epe:J1e)(n):(n.local?npe:tpe)(n,r,t))}function ope(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ape(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lpe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ape(e,s)),n}return i._value=t,i}function cpe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ope(e,s)),n}return i._value=t,i}function fpe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=F9(e);return this.tween(n,(r.local?lpe:cpe)(r,t))}function dpe(e,t){return function(){ST(this,e).delay=+t.apply(this,arguments)}}function upe(e,t){return t=+t,function(){ST(this,e).delay=t}}function hpe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dpe:upe)(t,e)):Il(this.node(),t).delay}function ppe(e,t){return function(){Pc(this,e).duration=+t.apply(this,arguments)}}function mpe(e,t){return t=+t,function(){Pc(this,e).duration=t}}function gpe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ppe:mpe)(t,e)):Il(this.node(),t).duration}function bpe(e,t){if(typeof t!="function")throw new Error;return function(){Pc(this,e).ease=t}}function ype(e){var t=this._id;return arguments.length?this.each(bpe(t,e)):Il(this.node(),t).ease}function Upe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pc(this,e).ease=n}}function xpe(e){if(typeof e!="function")throw new Error;return this.each(Upe(this._id,e))}function wpe(e){typeof e!="function"&&(e=pX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,f=0;f<o;++f)(l=s[f])&&e.call(l,l.__data__,f,s)&&a.push(l);return new $f(r,this._parents,this._name,this._id)}function vpe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],f=n[a],c=l.length,d=o[a]=new Array(c),u,h=0;h<c;++h)(u=l[h]||f[h])&&(d[h]=u);for(;a<r;++a)o[a]=t[a];return new $f(o,this._parents,this._name,this._id)}function Epe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function kpe(e,t,n){var r,i,s=Epe(t)?ST:Pc;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Spe(e,t){var n=this._id;return arguments.length<2?Il(this.node(),n).on.on(e):this.each(kpe(n,e,t))}function Cpe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ape(){return this.on("end.remove",Cpe(this._id))}function Mpe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=wT(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,f=s[o]=new Array(l),c,d,u=0;u<l;++u)(c=a[u])&&(d=e.call(c,c.__data__,u,a))&&("__data__"in c&&(d.__data__=c.__data__),f[u]=d,H9(f[u],t,n,u,f,Il(c,n)));return new $f(s,this._parents,t,n)}function Tpe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hX(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],f=l.length,c,d=0;d<f;++d)if(c=l[d]){for(var u=e.call(c,c.__data__,d,l),h,g=Il(c,n),y=0,U=u.length;y<U;++y)(h=u[y])&&H9(h,t,n,y,u,g);s.push(u),o.push(c)}return new $f(s,o,t,n)}var Ipe=ry.prototype.constructor;function Npe(){return new Ipe(this._groups,this._parents)}function Rpe(e,t){var n,r,i;return function(){var s=hg(this,e),o=(this.style.removeProperty(e),hg(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function BX(e){return function(){this.style.removeProperty(e)}}function _pe(e,t,n){var r,i=n+"",s;return function(){var o=hg(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Ppe(e,t,n){var r,i,s;return function(){var o=hg(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),hg(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function Dpe(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Pc(this,e),f=l.on,c=l.value[s]==null?a||(a=BX(t)):void 0;(f!==n||i!==c)&&(r=(n=f).copy()).on(o,i=c),l.on=r}}function Lpe(e,t,n){var r=(e+="")=="transform"?O1e:jX;return t==null?this.styleTween(e,Rpe(e,r)).on("end.style."+e,BX(e)):typeof t=="function"?this.styleTween(e,Ppe(e,r,CT(this,"style."+e,t))).each(Dpe(this._id,e)):this.styleTween(e,_pe(e,r,t),n).on("end.style."+e,null)}function Ope(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function jpe(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Ope(e,o,n)),r}return s._value=t,s}function Bpe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,jpe(e,t,n??""))}function Fpe(e){return function(){this.textContent=e}}function zpe(e){return function(){var t=e(this);this.textContent=t??""}}function $pe(e){return this.tween("text",typeof e=="function"?zpe(CT(this,"text",e)):Fpe(e==null?"":e+""))}function Hpe(e){return function(t){this.textContent=e.call(this,t)}}function Vpe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Hpe(i)),t}return r._value=e,r}function Wpe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vpe(e))}function Gpe(){for(var e=this._name,t=this._id,n=FX(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,f=0;f<a;++f)if(l=o[f]){var c=Il(l,t);H9(l,e,n,f,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $f(r,this._parents,e,n)}function Xpe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var f=Pc(this,r),c=f.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),f.on=t}),i===0&&s()})}var Kpe=0;function $f(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function FX(){return++Kpe}var Yc=ry.prototype;$f.prototype={constructor:$f,select:Mpe,selectAll:Tpe,selectChild:Yc.selectChild,selectChildren:Yc.selectChildren,filter:wpe,merge:vpe,selection:Npe,transition:Gpe,call:Yc.call,nodes:Yc.nodes,node:Yc.node,size:Yc.size,empty:Yc.empty,each:Yc.each,on:Spe,attr:spe,attrTween:fpe,style:Lpe,styleTween:Bpe,text:$pe,textTween:Wpe,remove:Ape,tween:Q1e,delay:hpe,duration:gpe,ease:ype,easeVarying:xpe,end:Xpe,[Symbol.iterator]:Yc[Symbol.iterator]};function Ype(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Zpe={time:null,delay:0,duration:250,ease:Ype};function qpe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Qpe(e){var t,n;e instanceof $f?(t=e._id,e=e._name):(t=FX(),(n=Zpe).time=kT(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,f=0;f<a;++f)(l=o[f])&&H9(l,e,t,f,o,n||qpe(l,t));return new $f(r,this._parents,e,t)}ry.prototype.interrupt=Y1e;ry.prototype.transition=Qpe;const lU=e=>()=>e;function Jpe(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function If(e,t,n){this.k=e,this.x=t,this.y=n}If.prototype={constructor:If,scale:function(e){return e===1?this:new If(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new If(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var V9=new If(1,0,0);zX.prototype=If.prototype;function zX(e){for(;!e.__zoom;)if(!(e=e.parentNode))return V9;return e.__zoom}function SE(e){e.stopImmediatePropagation()}function Z6(e){e.preventDefault(),e.stopImmediatePropagation()}function eme(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function tme(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function lO(){return this.__zoom||V9}function nme(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rme(){return navigator.maxTouchPoints||"ontouchstart"in this}function ime(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function $X(){var e=eme,t=tme,n=ime,r=nme,i=rme,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=g3,f=B9("start","zoom","end"),c,d,u,h=500,g=150,y=0,U=10;function x(L){L.property("__zoom",lO).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",_).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(L,B,V,z){var G=L.selection?L.selection():L;G.property("__zoom",lO),L!==G?M(L,B,V,z):G.interrupt().each(function(){S(this,arguments).event(z).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},x.scaleBy=function(L,B,V,z){x.scaleTo(L,function(){var G=this.__zoom.k,W=typeof B=="function"?B.apply(this,arguments):B;return G*W},V,z)},x.scaleTo=function(L,B,V,z){x.transform(L,function(){var G=t.apply(this,arguments),W=this.__zoom,F=V==null?k(G):typeof V=="function"?V.apply(this,arguments):V,K=W.invert(F),q=typeof B=="function"?B.apply(this,arguments):B;return n(E(v(W,q),F,K),G,o)},V,z)},x.translateBy=function(L,B,V,z){x.transform(L,function(){return n(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),o)},null,z)},x.translateTo=function(L,B,V,z,G){x.transform(L,function(){var W=t.apply(this,arguments),F=this.__zoom,K=z==null?k(W):typeof z=="function"?z.apply(this,arguments):z;return n(V9.translate(K[0],K[1]).scale(F.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof V=="function"?-V.apply(this,arguments):-V),W,o)},z,G)};function v(L,B){return B=Math.max(s[0],Math.min(s[1],B)),B===L.k?L:new If(B,L.x,L.y)}function E(L,B,V){var z=B[0]-V[0]*L.k,G=B[1]-V[1]*L.k;return z===L.x&&G===L.y?L:new If(L.k,z,G)}function k(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function M(L,B,V,z){L.on("start.zoom",function(){S(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(z).end()}).tween("zoom",function(){var G=this,W=arguments,F=S(G,W).event(z),K=t.apply(G,W),q=V==null?k(K):typeof V=="function"?V.apply(G,W):V,Y=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),ae=G.__zoom,ge=typeof B=="function"?B.apply(G,W):B,he=l(ae.invert(q).concat(Y/ae.k),ge.invert(q).concat(Y/ge.k));return function(ce){if(ce===1)ce=ge;else{var ie=he(ce),we=Y/ie[2];ce=new If(we,q[0]-ie[0]*we,q[1]-ie[1]*we)}F.zoom(null,ce)}})}function S(L,B,V){return!V&&L.__zooming||new A(L,B)}function A(L,B){this.that=L,this.args=B,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,B),this.taps=0}A.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,B){return this.mouse&&L!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var B=Ro(this.that).datum();f.call(L,this.that,new Jpe(L,{sourceEvent:this.sourceEvent,target:x,type:L,transform:this.that.__zoom,dispatch:f}),B)}};function I(L,...B){if(!e.apply(this,arguments))return;var V=S(this,B).event(L),z=this.__zoom,G=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,r.apply(this,arguments)))),W=tl(L);if(V.wheel)(V.mouse[0][0]!==W[0]||V.mouse[0][1]!==W[1])&&(V.mouse[1]=z.invert(V.mouse[0]=W)),clearTimeout(V.wheel);else{if(z.k===G)return;V.mouse=[W,z.invert(W)],U3(this),V.start()}Z6(L),V.wheel=setTimeout(F,g),V.zoom("mouse",n(E(v(z,G),V.mouse[0],V.mouse[1]),V.extent,o));function F(){V.wheel=null,V.end()}}function R(L,...B){if(u||!e.apply(this,arguments))return;var V=L.currentTarget,z=S(this,B,!0).event(L),G=Ro(L.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",Y,!0),W=tl(L,V),F=L.clientX,K=L.clientY;kX(L.view),SE(L),z.mouse=[W,this.__zoom.invert(W)],U3(this),z.start();function q(ae){if(Z6(ae),!z.moved){var ge=ae.clientX-F,he=ae.clientY-K;z.moved=ge*ge+he*he>y}z.event(ae).zoom("mouse",n(E(z.that.__zoom,z.mouse[0]=tl(ae,V),z.mouse[1]),z.extent,o))}function Y(ae){G.on("mousemove.zoom mouseup.zoom",null),SX(ae.view,z.moved),Z6(ae),z.event(ae).end()}}function D(L,...B){if(e.apply(this,arguments)){var V=this.__zoom,z=tl(L.changedTouches?L.changedTouches[0]:L,this),G=V.invert(z),W=V.k*(L.shiftKey?.5:2),F=n(E(v(V,W),z,G),t.apply(this,B),o);Z6(L),a>0?Ro(this).transition().duration(a).call(M,F,z,L):Ro(this).call(x.transform,F,z,L)}}function _(L,...B){if(e.apply(this,arguments)){var V=L.touches,z=V.length,G=S(this,B,L.changedTouches.length===z).event(L),W,F,K,q;for(SE(L),F=0;F<z;++F)K=V[F],q=tl(K,this),q=[q,this.__zoom.invert(q),K.identifier],G.touch0?!G.touch1&&G.touch0[2]!==q[2]&&(G.touch1=q,G.taps=0):(G.touch0=q,W=!0,G.taps=1+!!c);c&&(c=clearTimeout(c)),W&&(G.taps<2&&(d=q[0],c=setTimeout(function(){c=null},h)),U3(this),G.start())}}function P(L,...B){if(this.__zooming){var V=S(this,B).event(L),z=L.changedTouches,G=z.length,W,F,K,q;for(Z6(L),W=0;W<G;++W)F=z[W],K=tl(F,this),V.touch0&&V.touch0[2]===F.identifier?V.touch0[0]=K:V.touch1&&V.touch1[2]===F.identifier&&(V.touch1[0]=K);if(F=V.that.__zoom,V.touch1){var Y=V.touch0[0],ae=V.touch0[1],ge=V.touch1[0],he=V.touch1[1],ce=(ce=ge[0]-Y[0])*ce+(ce=ge[1]-Y[1])*ce,ie=(ie=he[0]-ae[0])*ie+(ie=he[1]-ae[1])*ie;F=v(F,Math.sqrt(ce/ie)),K=[(Y[0]+ge[0])/2,(Y[1]+ge[1])/2],q=[(ae[0]+he[0])/2,(ae[1]+he[1])/2]}else if(V.touch0)K=V.touch0[0],q=V.touch0[1];else return;V.zoom("touch",n(E(F,K,q),V.extent,o))}}function $(L,...B){if(this.__zooming){var V=S(this,B).event(L),z=L.changedTouches,G=z.length,W,F;for(SE(L),u&&clearTimeout(u),u=setTimeout(function(){u=null},h),W=0;W<G;++W)F=z[W],V.touch0&&V.touch0[2]===F.identifier?delete V.touch0:V.touch1&&V.touch1[2]===F.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(F=tl(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<U)){var K=Ro(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return x.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:lU(+L),x):r},x.filter=function(L){return arguments.length?(e=typeof L=="function"?L:lU(!!L),x):e},x.touchable=function(L){return arguments.length?(i=typeof L=="function"?L:lU(!!L),x):i},x.extent=function(L){return arguments.length?(t=typeof L=="function"?L:lU([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),x):t},x.scaleExtent=function(L){return arguments.length?(s[0]=+L[0],s[1]=+L[1],x):[s[0],s[1]]},x.translateExtent=function(L){return arguments.length?(o[0][0]=+L[0][0],o[1][0]=+L[1][0],o[0][1]=+L[0][1],o[1][1]=+L[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(L){return arguments.length?(n=L,x):n},x.duration=function(L){return arguments.length?(a=+L,x):a},x.interpolate=function(L){return arguments.length?(l=L,x):l},x.on=function(){var L=f.on.apply(f,arguments);return L===f?x:L},x.clickDistance=function(L){return arguments.length?(y=(L=+L)*L,x):Math.sqrt(y)},x.tapDistance=function(L){return arguments.length?(U=+L,x):U},x}const vc={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},W2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],HX=["Enter"," ","Escape"],VX={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var mg;(function(e){e.Strict="strict",e.Loose="loose"})(mg||(mg={}));var _h;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(_h||(_h={}));var G2;(function(e){e.Partial="partial",e.Full="full"})(G2||(G2={}));const WX={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var eu;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(eu||(eu={}));var Cx;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Cx||(Cx={}));var lt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(lt||(lt={}));const cO={[lt.Left]:lt.Right,[lt.Right]:lt.Left,[lt.Top]:lt.Bottom,[lt.Bottom]:lt.Top};function GX(e){return e===null?null:e?"valid":"invalid"}const XX=e=>"id"in e&&"source"in e&&"target"in e,sme=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),AT=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),sy=(e,t=[0,0])=>{const{width:n,height:r}=nd(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},ome=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):AT(i)?i:t.nodeLookup.get(i.id));const a=o?Ax(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return W9(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return G9(n)},oy=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=W9(n,Ax(i)),r=!0)}),r?G9(n):{x:0,y:0,width:0,height:0}},MT=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...ly(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const f of e.values()){const{measured:c,selectable:d=!0,hidden:u=!1}=f;if(o&&!d||u)continue;const h=c.width??f.width??f.initialWidth??null,g=c.height??f.height??f.initialHeight??null,y=X2(a,bg(f)),U=(h??0)*(g??0),x=s&&y>0;(!f.internals.handleBounds||x||y>=U||f.dragging)&&l.push(f)}return l},ame=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function lme(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function cme({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const a=lme(e,o),l=oy(a),f=TT(l,t,n,(o==null?void 0:o.minZoom)??i,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await r.setViewport(f,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)}function KX({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:l,y:f}=a?a.internals.positionAbsolute:{x:0,y:0},c=o.origin??r;let d=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!a)s==null||s("005",vc.error005());else{const h=a.measured.width,g=a.measured.height;h&&g&&(d=[[l,f],[l+h,f+g]])}else a&&yg(o.extent)&&(d=[[o.extent[0][0]+l,o.extent[0][1]+f],[o.extent[1][0]+l,o.extent[1][1]+f]]);const u=yg(d)?Jh(t,d,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(s==null||s("015",vc.error015())),{position:{x:u.x-l+(o.measured.width??0)*c[0],y:u.y-f+(o.measured.height??0)*c[1]},positionAbsolute:u}}async function fme({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(u=>u.id)),o=[];for(const u of n){if(u.deletable===!1)continue;const h=s.has(u.id),g=!h&&u.parentId&&o.find(y=>y.id===u.parentId);(h||g)&&o.push(u)}const a=new Set(t.map(u=>u.id)),l=r.filter(u=>u.deletable!==!1),c=ame(o,l);for(const u of l)a.has(u.id)&&!c.find(g=>g.id===u.id)&&c.push(u);if(!i)return{edges:c,nodes:o};const d=await i({nodes:o,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:o}:{edges:[],nodes:[]}:d}const gg=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Jh=(e={x:0,y:0},t,n)=>({x:gg(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:gg(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function YX(e,t,n){const{width:r,height:i}=nd(n),{x:s,y:o}=n.internals.positionAbsolute;return Jh(e,[[s,o],[s+r,o+i]],t)}const fO=(e,t,n)=>e<t?gg(Math.abs(e-t),1,t)/t:e>n?-gg(Math.abs(e-n),1,t)/t:0,ZX=(e,t,n=15,r=40)=>{const i=fO(e.x,r,t.width-r)*n,s=fO(e.y,r,t.height-r)*n;return[i,s]},W9=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),DC=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),G9=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),bg=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=AT(e)?e.internals.positionAbsolute:sy(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},Ax=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=AT(e)?e.internals.positionAbsolute:sy(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},qX=(e,t)=>G9(W9(DC(e),DC(t))),X2=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},dO=e=>al(e.width)&&al(e.height)&&al(e.x)&&al(e.y),al=e=>!isNaN(e)&&isFinite(e),dme=(e,t)=>{},ay=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ly=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return s?ay(a,o):a},Mx=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function cp(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function ume(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=cp(e,n),i=cp(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=cp(e.top??e.y??0,n),i=cp(e.bottom??e.y??0,n),s=cp(e.left??e.x??0,t),o=cp(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function hme(e,t,n,r,i,s){const{x:o,y:a}=Mx(e,[t,n,r]),{x:l,y:f}=Mx({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,d=s-f;return{left:Math.floor(o),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}const TT=(e,t,n,r,i,s)=>{const o=ume(s,t,n),a=(t-o.x)/e.width,l=(n-o.y)/e.height,f=Math.min(a,l),c=gg(f,r,i),d=e.x+e.width/2,u=e.y+e.height/2,h=t/2-d*c,g=n/2-u*c,y=hme(e,h,g,c,t,n),U={left:Math.min(y.left-o.left,0),top:Math.min(y.top-o.top,0),right:Math.min(y.right-o.right,0),bottom:Math.min(y.bottom-o.bottom,0)};return{x:h-U.left+U.right,y:g-U.top+U.bottom,zoom:c}},K2=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function yg(e){return e!=null&&e!=="parent"}function nd(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function QX(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function JX(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function uO(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function pme(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function mme(e){return{...VX,...e||{}}}function Q5(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=ll(e),a=ly({x:s-((i==null?void 0:i.left)??0),y:o-((i==null?void 0:i.top)??0)},r),{x:l,y:f}=n?ay(a,t):a;return{xSnapped:l,ySnapped:f,...a}}const IT=e=>({width:e.offsetWidth,height:e.offsetHeight}),eK=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},gme=["INPUT","SELECT","TEXTAREA"];function tK(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:gme.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const nK=e=>"clientX"in e,ll=(e,t)=>{var s,o;const n=nK(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},hO=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...IT(o)}})};function rK({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=e*.125+i*.375+o*.375+n*.125,f=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),d=Math.abs(f-t);return[l,f,c,d]}function cU(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function pO({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case lt.Left:return[t-cU(t-r,s),n];case lt.Right:return[t+cU(r-t,s),n];case lt.Top:return[t,n-cU(n-i,s)];case lt.Bottom:return[t,n+cU(i-n,s)]}}function iK({sourceX:e,sourceY:t,sourcePosition:n=lt.Bottom,targetX:r,targetY:i,targetPosition:s=lt.Top,curvature:o=.25}){const[a,l]=pO({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[f,c]=pO({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,u,h,g]=rK({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:f,targetControlY:c});return[`M${e},${t} C${a},${l} ${f},${c} ${r},${i}`,d,u,h,g]}function sK({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function bme({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:s="basic"}){if(s==="manual")return r;const o=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return o+a}function yme({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=W9(Ax(e),Ax(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return X2(o,G9(s))>0}const Ume=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,xme=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),wme=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||Ume;let i;return XX(e)?i={...e}:i={...e,id:r(e)},xme(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function oK({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=sK({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const mO={[lt.Left]:{x:-1,y:0},[lt.Right]:{x:1,y:0},[lt.Top]:{x:0,y:-1},[lt.Bottom]:{x:0,y:1}},vme=({source:e,sourcePosition:t=lt.Bottom,target:n})=>t===lt.Left||t===lt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},gO=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Eme({source:e,sourcePosition:t=lt.Bottom,target:n,targetPosition:r=lt.Top,center:i,offset:s,stepPosition:o}){const a=mO[t],l=mO[r],f={x:e.x+a.x*s,y:e.y+a.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},d=vme({source:f,sourcePosition:t,target:c}),u=d.x!==0?"x":"y",h=d[u];let g=[],y,U;const x={x:0,y:0},v={x:0,y:0},[,,E,k]=sK({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[u]*l[u]===-1){u==="x"?(y=i.x??f.x+(c.x-f.x)*o,U=i.y??(f.y+c.y)/2):(y=i.x??(f.x+c.x)/2,U=i.y??f.y+(c.y-f.y)*o);const S=[{x:y,y:f.y},{x:y,y:c.y}],A=[{x:f.x,y:U},{x:c.x,y:U}];a[u]===h?g=u==="x"?S:A:g=u==="x"?A:S}else{const S=[{x:f.x,y:c.y}],A=[{x:c.x,y:f.y}];if(u==="x"?g=a.x===h?A:S:g=a.y===h?S:A,t===r){const P=Math.abs(e[u]-n[u]);if(P<=s){const $=Math.min(s-1,s-P);a[u]===h?x[u]=(f[u]>e[u]?-1:1)*$:v[u]=(c[u]>n[u]?-1:1)*$}}if(t!==r){const P=u==="x"?"y":"x",$=a[u]===l[P],L=f[P]>c[P],B=f[P]<c[P];(a[u]===1&&(!$&&L||$&&B)||a[u]!==1&&(!$&&B||$&&L))&&(g=u==="x"?S:A)}const I={x:f.x+x.x,y:f.y+x.y},R={x:c.x+v.x,y:c.y+v.y},D=Math.max(Math.abs(I.x-g[0].x),Math.abs(R.x-g[0].x)),_=Math.max(Math.abs(I.y-g[0].y),Math.abs(R.y-g[0].y));D>=_?(y=(I.x+R.x)/2,U=g[0].y):(y=g[0].x,U=(I.y+R.y)/2)}return[[e,{x:f.x+x.x,y:f.y+x.y},...g,{x:c.x+v.x,y:c.y+v.y},n],y,U,E,k]}function kme(e,t,n,r){const i=Math.min(gO(e,t)/2,gO(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const f=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function LC({sourceX:e,sourceY:t,sourcePosition:n=lt.Bottom,targetX:r,targetY:i,targetPosition:s=lt.Top,borderRadius:o=5,centerX:a,centerY:l,offset:f=20,stepPosition:c=.5}){const[d,u,h,g,y]=Eme({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:f,stepPosition:c});return[d.reduce((x,v,E)=>{let k="";return E>0&&E<d.length-1?k=kme(d[E-1],v,d[E+1],o):k=`${E===0?"M":"L"}${v.x} ${v.y}`,x+=k,x},""),u,h,g,y]}function bO(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Sme(e){var d;const{sourceNode:t,targetNode:n}=e;if(!bO(t)||!bO(n))return null;const r=t.internals.handleBounds||yO(t.handles),i=n.internals.handleBounds||yO(n.handles),s=UO((r==null?void 0:r.source)??[],e.sourceHandle),o=UO(e.connectionMode===mg.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!s||!o)return(d=e.onError)==null||d.call(e,"008",vc.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(s==null?void 0:s.position)||lt.Bottom,l=(o==null?void 0:o.position)||lt.Top,f=e1(t,s,a),c=e1(n,o,l);return{sourceX:f.x,sourceY:f.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function yO(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function e1(e,t,n=lt.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??nd(e);if(r)return{x:i+o/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case lt.Top:return{x:i+o/2,y:s};case lt.Right:return{x:i+o,y:s+a/2};case lt.Bottom:return{x:i+o/2,y:s+a};case lt.Left:return{x:i,y:s+a/2}}}function UO(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function OC(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Cme(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const f=OC(l,t);s.has(f)||(o.push({id:f,color:l.color||n,...l}),s.add(f))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const aK=1e3,Ame=10,NT={nodeOrigin:[0,0],nodeExtent:W2,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Mme={...NT,checkEquality:!0};function RT(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Tme(e,t,n){const r=RT(NT,n);for(const i of e.values())if(i.parentId)PT(i,e,t,r);else{const s=sy(i,r.nodeOrigin),o=yg(i.extent)?i.extent:r.nodeExtent,a=Jh(s,o,nd(i));i.internals.positionAbsolute=a}}function Ime(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const s={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(s):i.type==="target"&&r.push(s)}return{source:n,target:r}}function _T(e){return e==="manual"}function jC(e,t,n,r={}){var f,c;const i=RT(Mme,r),s={i:0},o=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!_T(i.zIndexMode)?aK:0;let l=e.length>0;t.clear(),n.clear();for(const d of e){let u=o.get(d.id);if(i.checkEquality&&d===(u==null?void 0:u.internals.userNode))t.set(d.id,u);else{const h=sy(d,i.nodeOrigin),g=yg(d.extent)?d.extent:i.nodeExtent,y=Jh(h,g,nd(d));u={...i.defaults,...d,measured:{width:(f=d.measured)==null?void 0:f.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:y,handleBounds:Ime(d,u),z:lK(d,a,i.zIndexMode),userNode:d}},t.set(d.id,u)}(u.measured===void 0||u.measured.width===void 0||u.measured.height===void 0)&&!u.hidden&&(l=!1),d.parentId&&PT(u,t,n,r,s)}return l}function Nme(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function PT(e,t,n,r,i){const{elevateNodesOnSelect:s,nodeOrigin:o,nodeExtent:a,zIndexMode:l}=RT(NT,r),f=e.parentId,c=t.get(f);if(!c){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Nme(e,n),i&&!c.parentId&&c.internals.rootParentIndex===void 0&&l==="auto"&&(c.internals.rootParentIndex=++i.i,c.internals.z=c.internals.z+i.i*Ame),i&&c.internals.rootParentIndex!==void 0&&(i.i=c.internals.rootParentIndex);const d=s&&!_T(l)?aK:0,{x:u,y:h,z:g}=Rme(e,c,o,a,d,l),{positionAbsolute:y}=e.internals,U=u!==y.x||h!==y.y;(U||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:U?{x:u,y:h}:y,z:g}})}function lK(e,t,n){const r=al(e.zIndex)?e.zIndex:0;return _T(n)?r:r+(e.selected?t:0)}function Rme(e,t,n,r,i,s){const{x:o,y:a}=t.internals.positionAbsolute,l=nd(e),f=sy(e,n),c=yg(e.extent)?Jh(f,e.extent,l):f;let d=Jh({x:o+c.x,y:a+c.y},r,l);e.extent==="parent"&&(d=YX(d,l,t));const u=lK(e,i,s),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>=u?h+1:u}}function DT(e,t,n,r=[0,0]){var o;const i=[],s=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const f=((o=s.get(a.parentId))==null?void 0:o.expandedRect)??bg(l),c=qX(f,a.rect);s.set(a.parentId,{expandedRect:c,parent:l})}return s.size>0&&s.forEach(({expandedRect:a,parent:l},f)=>{var E;const c=l.internals.positionAbsolute,d=nd(l),u=l.origin??r,h=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,g=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,y=Math.max(d.width,Math.round(a.width)),U=Math.max(d.height,Math.round(a.height)),x=(y-d.width)*u[0],v=(U-d.height)*u[1];(h>0||g>0||x||v)&&(i.push({id:f,type:"position",position:{x:l.position.x-h+x,y:l.position.y-g+v}}),(E=n.get(f))==null||E.forEach(k=>{e.some(M=>M.id===k.id)||i.push({id:k.id,type:"position",position:{x:k.position.x+h,y:k.position.y+g}})})),(d.width<a.width||d.height<a.height||h||g)&&i.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:y+(h?u[0]*h-x:0),height:U+(g?u[1]*g-v:0)}})}),i}function _me(e,t,n,r,i,s,o){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const f=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const h of e.values()){const g=t.get(h.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),l=!0;continue}const y=IT(h.nodeElement),U=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(U||!g.internals.handleBounds||h.force))){const v=h.nodeElement.getBoundingClientRect(),E=yg(g.extent)?g.extent:s;let{positionAbsolute:k}=g.internals;g.parentId&&g.extent==="parent"?k=YX(k,y,t.get(g.parentId)):E&&(k=Jh(k,E,y));const M={...g,measured:y,internals:{...g.internals,positionAbsolute:k,handleBounds:{source:hO("source",h.nodeElement,v,d,g.id),target:hO("target",h.nodeElement,v,d,g.id)}}};t.set(g.id,M),g.parentId&&PT(M,t,n,{nodeOrigin:i,zIndexMode:o}),l=!0,U&&(f.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&u.push({id:g.id,parentId:g.parentId,rect:bg(M,i)}))}}if(u.length>0){const h=DT(u,t,n,i);f.push(...h)}return{changes:f,updatedInternals:l}}async function Pme({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function xO(e,t,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${i}-${e}`;const l=r.get(o)||new Map;if(r.set(o,l.set(n,t)),s){o=`${i}-${e}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,t))}}function cK(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},f=`${i}-${o}--${s}-${a}`,c=`${s}-${a}--${i}-${o}`;xO("source",l,c,e,i,o),xO("target",l,f,e,s,a),t.set(r.id,r)}}function fK(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:fK(n,t):!1}function wO(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Dme(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!fK(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function CE({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,a,l;const i=[];for(const[f,c]of t){const d=(o=n.get(f))==null?void 0:o.internals.userNode;d&&i.push({...d,position:c.position,dragging:r})}if(!e)return[i[0],i];const s=(a=n.get(e))==null?void 0:a.internals.userNode;return[s?{...s,position:((l=t.get(e))==null?void 0:l.position)||s.position,dragging:r}:i[0],i]}function Lme({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=ay(s,t);return{x:o.x-s.x,y:o.y-s.y}}function Ome({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,l=!1,f={x:0,y:0},c=null,d=!1,u=null,h=!1,g=!1,y=null;function U({noDragClassName:v,handleSelector:E,domNode:k,isSelectable:M,nodeId:S,nodeClickDistance:A=0}){u=Ro(k);function I({x:P,y:$}){const{nodeLookup:L,nodeExtent:B,snapGrid:V,snapToGrid:z,nodeOrigin:G,onNodeDrag:W,onSelectionDrag:F,onError:K,updateNodePositions:q}=t();s={x:P,y:$};let Y=!1;const ae=a.size>1,ge=ae&&B?DC(oy(a)):null,he=ae&&z?Lme({dragItems:a,snapGrid:V,x:P,y:$}):null;for(const[ce,ie]of a){if(!L.has(ce))continue;let we={x:P-ie.distance.x,y:$-ie.distance.y};z&&(we=he?{x:Math.round(we.x+he.x),y:Math.round(we.y+he.y)}:ay(we,V));let Ee=null;if(ae&&B&&!ie.extent&&ge){const{positionAbsolute:He}=ie.internals,ve=He.x-ge.x+B[0][0],De=He.x+ie.measured.width-ge.x2+B[1][0],Ae=He.y-ge.y+B[0][1],ut=He.y+ie.measured.height-ge.y2+B[1][1];Ee=[[ve,Ae],[De,ut]]}const{position:_e,positionAbsolute:Fe}=KX({nodeId:ce,nextPosition:we,nodeLookup:L,nodeExtent:Ee||B,nodeOrigin:G,onError:K});Y=Y||ie.position.x!==_e.x||ie.position.y!==_e.y,ie.position=_e,ie.internals.positionAbsolute=Fe}if(g=g||Y,!!Y&&(q(a,!0),y&&(r||W||!S&&F))){const[ce,ie]=CE({nodeId:S,dragItems:a,nodeLookup:L});r==null||r(y,a,ce,ie),W==null||W(y,ce,ie),S||F==null||F(y,ie)}}async function R(){if(!c)return;const{transform:P,panBy:$,autoPanSpeed:L,autoPanOnNodeDrag:B}=t();if(!B){l=!1,cancelAnimationFrame(o);return}const[V,z]=ZX(f,c,L);(V!==0||z!==0)&&(s.x=(s.x??0)-V/P[2],s.y=(s.y??0)-z/P[2],await $({x:V,y:z})&&I(s)),o=requestAnimationFrame(R)}function D(P){var ae;const{nodeLookup:$,multiSelectionActive:L,nodesDraggable:B,transform:V,snapGrid:z,snapToGrid:G,selectNodesOnDrag:W,onNodeDragStart:F,onSelectionDragStart:K,unselectNodesAndEdges:q}=t();d=!0,(!W||!M)&&!L&&S&&((ae=$.get(S))!=null&&ae.selected||q()),M&&W&&S&&(e==null||e(S));const Y=Q5(P.sourceEvent,{transform:V,snapGrid:z,snapToGrid:G,containerBounds:c});if(s=Y,a=Dme($,B,Y,S),a.size>0&&(n||F||!S&&K)){const[ge,he]=CE({nodeId:S,dragItems:a,nodeLookup:$});n==null||n(P.sourceEvent,a,ge,he),F==null||F(P.sourceEvent,ge,he),S||K==null||K(P.sourceEvent,he)}}const _=CX().clickDistance(A).on("start",P=>{const{domNode:$,nodeDragThreshold:L,transform:B,snapGrid:V,snapToGrid:z}=t();c=($==null?void 0:$.getBoundingClientRect())||null,h=!1,g=!1,y=P.sourceEvent,L===0&&D(P),s=Q5(P.sourceEvent,{transform:B,snapGrid:V,snapToGrid:z,containerBounds:c}),f=ll(P.sourceEvent,c)}).on("drag",P=>{const{autoPanOnNodeDrag:$,transform:L,snapGrid:B,snapToGrid:V,nodeDragThreshold:z,nodeLookup:G}=t(),W=Q5(P.sourceEvent,{transform:L,snapGrid:B,snapToGrid:V,containerBounds:c});if(y=P.sourceEvent,(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||S&&!G.has(S))&&(h=!0),!h){if(!l&&$&&d&&(l=!0,R()),!d){const F=ll(P.sourceEvent,c),K=F.x-f.x,q=F.y-f.y;Math.sqrt(K*K+q*q)>z&&D(P)}(s.x!==W.xSnapped||s.y!==W.ySnapped)&&a&&d&&(f=ll(P.sourceEvent,c),I(W))}}).on("end",P=>{if(!(!d||h)&&(l=!1,d=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:$,updateNodePositions:L,onNodeDragStop:B,onSelectionDragStop:V}=t();if(g&&(L(a,!1),g=!1),i||B||!S&&V){const[z,G]=CE({nodeId:S,dragItems:a,nodeLookup:$,dragging:!1});i==null||i(P.sourceEvent,a,z,G),B==null||B(P.sourceEvent,z,G),S||V==null||V(P.sourceEvent,G)}}}).filter(P=>{const $=P.target;return!P.button&&(!v||!wO($,`.${v}`,k))&&(!E||wO($,E,k))});u.call(_)}function x(){u==null||u.on(".drag",null)}return{update:U,destroy:x}}function jme(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())X2(i,bg(s))>0&&r.push(s);return r}const Bme=250;function Fme(e,t,n,r){var a,l;let i=[],s=1/0;const o=jme(e,n,t+Bme);for(const f of o){const c=[...((a=f.internals.handleBounds)==null?void 0:a.source)??[],...((l=f.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:u,y:h}=e1(f,d,d.position,!0),g=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(h-e.y,2));g>t||(g<s?(i=[{...d,x:u,y:h}],s=g):g===s&&i.push({...d,x:u,y:h}))}}if(!i.length)return null;if(i.length>1){const f=r.type==="source"?"target":"source";return i.find(c=>c.type===f)??i[0]}return i[0]}function dK(e,t,n,r,i,s=!1){var f,c,d;const o=r.get(e);if(!o)return null;const a=i==="strict"?(f=o.internals.handleBounds)==null?void 0:f[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((d=o.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(u=>u.id===n):a==null?void 0:a[0])??null;return l&&s?{...l,...e1(o,l,l.position,!0)}:l}function uK(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function zme(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const hK=()=>!0;function $me(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:l,lib:f,autoPanOnConnect:c,flowId:d,panBy:u,cancelConnection:h,onConnectStart:g,onConnect:y,onConnectEnd:U,isValidConnection:x=hK,onReconnectEnd:v,updateConnection:E,getTransform:k,getFromHandle:M,autoPanSpeed:S,dragThreshold:A=1,handleDomNode:I}){const R=eK(e.target);let D=0,_;const{x:P,y:$}=ll(e),L=uK(s,I),B=a==null?void 0:a.getBoundingClientRect();let V=!1;if(!B||!L)return;const z=dK(i,L,r,l,t);if(!z)return;let G=ll(e,B),W=!1,F=null,K=!1,q=null;function Y(){if(!c||!B)return;const[_e,Fe]=ZX(G,B,S);u({x:_e,y:Fe}),D=requestAnimationFrame(Y)}const ae={...z,nodeId:i,type:L,position:z.position},ge=l.get(i);let ce={inProgress:!0,isValid:null,from:e1(ge,ae,lt.Left,!0),fromHandle:ae,fromPosition:ae.position,fromNode:ge,to:G,toHandle:null,toPosition:cO[ae.position],toNode:null,pointer:G};function ie(){V=!0,E(ce),g==null||g(e,{nodeId:i,handleId:r,handleType:L})}A===0&&ie();function we(_e){if(!V){const{x:ut,y:Mt}=ll(_e),qt=ut-P,Kt=Mt-$;if(!(qt*qt+Kt*Kt>A*A))return;ie()}if(!M()||!ae){Ee(_e);return}const Fe=k();G=ll(_e,B),_=Fme(ly(G,Fe,!1,[1,1]),n,l,ae),W||(Y(),W=!0);const He=pK(_e,{handle:_,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:x,doc:R,lib:f,flowId:d,nodeLookup:l});q=He.handleDomNode,F=He.connection,K=zme(!!_,He.isValid);const ve=l.get(i),De=ve?e1(ve,ae,lt.Left,!0):ce.from,Ae={...ce,from:De,isValid:K,to:He.toHandle&&K?Mx({x:He.toHandle.x,y:He.toHandle.y},Fe):G,toHandle:He.toHandle,toPosition:K&&He.toHandle?He.toHandle.position:cO[ae.position],toNode:He.toHandle?l.get(He.toHandle.nodeId):null,pointer:G};E(Ae),ce=Ae}function Ee(_e){if(!("touches"in _e&&_e.touches.length>0)){if(V){(_||q)&&F&&K&&(y==null||y(F));const{inProgress:Fe,...He}=ce,ve={...He,toPosition:ce.toHandle?ce.toPosition:null};U==null||U(_e,ve),s&&(v==null||v(_e,ve))}h(),cancelAnimationFrame(D),W=!1,K=!1,F=null,q=null,R.removeEventListener("mousemove",we),R.removeEventListener("mouseup",Ee),R.removeEventListener("touchmove",we),R.removeEventListener("touchend",Ee)}}R.addEventListener("mousemove",we),R.addEventListener("mouseup",Ee),R.addEventListener("touchmove",we),R.addEventListener("touchend",Ee)}function pK(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:l,isValidConnection:f=hK,nodeLookup:c}){const d=s==="target",u=t?o.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:g}=ll(e),y=o.elementFromPoint(h,g),U=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:u,x={handleDomNode:U,isValid:!1,connection:null,toHandle:null};if(U){const v=uK(void 0,U),E=U.getAttribute("data-nodeid"),k=U.getAttribute("data-handleid"),M=U.classList.contains("connectable"),S=U.classList.contains("connectableend");if(!E||!v)return x;const A={source:d?E:r,sourceHandle:d?k:i,target:d?r:E,targetHandle:d?i:k};x.connection=A;const R=M&&S&&(n===mg.Strict?d&&v==="source"||!d&&v==="target":E!==r||k!==i);x.isValid=R&&f(A),x.toHandle=dK(E,v,k,c,n,!0)}return x}const BC={onPointerDown:$me,isValid:pK};function Hme({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=Ro(e);function s({translateExtent:a,width:l,height:f,zoomStep:c=1,pannable:d=!0,zoomable:u=!0,inversePan:h=!1}){const g=E=>{if(E.sourceEvent.type!=="wheel"||!t)return;const k=n(),M=E.sourceEvent.ctrlKey&&K2()?10:1,S=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*c,A=k[2]*Math.pow(2,S*M);t.scaleTo(A)};let y=[0,0];const U=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(y=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},x=E=>{const k=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const M=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],S=[M[0]-y[0],M[1]-y[1]];y=M;const A=r()*Math.max(k[2],Math.log(k[2]))*(h?-1:1),I={x:k[0]-S[0]*A,y:k[1]-S[1]*A},R=[[0,0],[l,f]];t.setViewportConstrained({x:I.x,y:I.y,zoom:k[2]},R,a)},v=$X().on("start",U).on("zoom",d?x:null).on("zoom.wheel",u?g:null);i.call(v,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:tl}}const X9=e=>({x:e.x,y:e.y,zoom:e.k}),AE=({x:e,y:t,zoom:n})=>V9.translate(e,t).scale(n),Bp=(e,t)=>e.target.closest(`.${t}`),mK=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Vme=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,ME=(e,t=0,n=Vme,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},gK=e=>{const t=e.ctrlKey&&K2()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Wme({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:f}){return c=>{if(Bp(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&o){const U=tl(c),x=gK(c),v=d*Math.pow(2,x);r.scaleTo(n,v,U,c);return}const u=c.deltaMode===1?20:1;let h=i===_h.Vertical?0:c.deltaX*u,g=i===_h.Horizontal?0:c.deltaY*u;!K2()&&c.shiftKey&&i!==_h.Vertical&&(h=c.deltaY*u,g=0),r.translateBy(n,-(h/d)*s,-(g/d)*s,{internal:!0});const y=X9(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l==null||l(c,y),e.panScrollTimeout=setTimeout(()=>{f==null||f(c,y),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(c,y))}}function Gme({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,a=Bp(r,e);if(r.ctrlKey&&s&&a&&r.preventDefault(),o||a)return null;r.preventDefault(),n.call(this,r,i)}}function Xme({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var s,o,a;if((s=r.sourceEvent)!=null&&s.internal)return;const i=X9(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Kme({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{var o,a;e.usedRightMouseButton=!!(n&&mK(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!((a=s.sourceEvent)!=null&&a.internal)&&(i==null||i(s.sourceEvent,X9(s.transform)))}}function Yme({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,s&&mK(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const l=X9(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(o.sourceEvent,l)},n?150:0)}}}function Zme({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:l,lib:f,connectionInProgress:c}){return d=>{var U;const u=e||t,h=n&&d.ctrlKey,g=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Bp(d,`${f}-flow__node`)||Bp(d,`${f}-flow__edge`)))return!0;if(!r&&!u&&!i&&!s&&!n||o||c&&!g||Bp(d,a)&&g||Bp(d,l)&&(!g||i&&g&&!e)||!n&&d.ctrlKey&&g)return!1;if(!n&&d.type==="touchstart"&&((U=d.touches)==null?void 0:U.length)>1)return d.preventDefault(),!1;if(!u&&!i&&!h&&g||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||g)&&y}}function qme({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:l}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),d=$X().scaleExtent([t,n]).translateExtent(r),u=Ro(e).call(d);v({x:i.x,y:i.y,zoom:gg(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const h=u.on("wheel.zoom"),g=u.on("dblclick.zoom");d.wheelDelta(gK);function y(_,P){return u?new Promise($=>{d==null||d.interpolate((P==null?void 0:P.interpolate)==="linear"?q5:g3).transform(ME(u,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>$(!0)),_)}):Promise.resolve(!1)}function U({noWheelClassName:_,noPanClassName:P,onPaneContextMenu:$,userSelectionActive:L,panOnScroll:B,panOnDrag:V,panOnScrollMode:z,panOnScrollSpeed:G,preventScrolling:W,zoomOnPinch:F,zoomOnScroll:K,zoomOnDoubleClick:q,zoomActivationKeyPressed:Y,lib:ae,onTransformChange:ge,connectionInProgress:he,paneClickDistance:ce,selectionOnDrag:ie}){L&&!f.isZoomingOrPanning&&x();const we=B&&!Y&&!L;d.clickDistance(ie?1/0:!al(ce)||ce<0?0:ce);const Ee=we?Wme({zoomPanValues:f,noWheelClassName:_,d3Selection:u,d3Zoom:d,panOnScrollMode:z,panOnScrollSpeed:G,zoomOnPinch:F,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a}):Gme({noWheelClassName:_,preventScrolling:W,d3ZoomHandler:h});if(u.on("wheel.zoom",Ee,{passive:!1}),!L){const Fe=Xme({zoomPanValues:f,onDraggingChange:l,onPanZoomStart:o});d.on("start",Fe);const He=Kme({zoomPanValues:f,panOnDrag:V,onPaneContextMenu:!!$,onPanZoom:s,onTransformChange:ge});d.on("zoom",He);const ve=Yme({zoomPanValues:f,panOnDrag:V,panOnScroll:B,onPaneContextMenu:$,onPanZoomEnd:a,onDraggingChange:l});d.on("end",ve)}const _e=Zme({zoomActivationKeyPressed:Y,panOnDrag:V,zoomOnScroll:K,panOnScroll:B,zoomOnDoubleClick:q,zoomOnPinch:F,userSelectionActive:L,noPanClassName:P,noWheelClassName:_,lib:ae,connectionInProgress:he});d.filter(_e),q?u.on("dblclick.zoom",g):u.on("dblclick.zoom",null)}function x(){d.on("zoom",null)}async function v(_,P,$){const L=AE(_),B=d==null?void 0:d.constrain()(L,P,$);return B&&await y(B),new Promise(V=>V(B))}async function E(_,P){const $=AE(_);return await y($,P),new Promise(L=>L($))}function k(_){if(u){const P=AE(_),$=u.property("__zoom");($.k!==_.zoom||$.x!==_.x||$.y!==_.y)&&(d==null||d.transform(u,P,null,{sync:!0}))}}function M(){const _=u?zX(u.node()):{x:0,y:0,k:1};return{x:_.x,y:_.y,zoom:_.k}}function S(_,P){return u?new Promise($=>{d==null||d.interpolate((P==null?void 0:P.interpolate)==="linear"?q5:g3).scaleTo(ME(u,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>$(!0)),_)}):Promise.resolve(!1)}function A(_,P){return u?new Promise($=>{d==null||d.interpolate((P==null?void 0:P.interpolate)==="linear"?q5:g3).scaleBy(ME(u,P==null?void 0:P.duration,P==null?void 0:P.ease,()=>$(!0)),_)}):Promise.resolve(!1)}function I(_){d==null||d.scaleExtent(_)}function R(_){d==null||d.translateExtent(_)}function D(_){const P=!al(_)||_<0?0:_;d==null||d.clickDistance(P)}return{update:U,destroy:x,setViewport:E,setViewportConstrained:v,getViewport:M,scaleTo:S,scaleBy:A,setScaleExtent:I,setTranslateExtent:R,syncViewport:k,setClickDistance:D}}var Ug;(function(e){e.Line="line",e.Handle="handle"})(Ug||(Ug={}));function Qme({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}function vO(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function _d(e,t){return Math.max(0,t-e)}function Pd(e,t){return Math.max(0,e-t)}function fU(e,t,n){return Math.max(0,t-e,e-n)}function EO(e,t){return e?!t:t}function Jme(e,t,n,r,i,s,o,a){let{affectsX:l,affectsY:f}=t;const{isHorizontal:c,isVertical:d}=t,u=c&&d,{xSnapped:h,ySnapped:g}=n,{minWidth:y,maxWidth:U,minHeight:x,maxHeight:v}=r,{x:E,y:k,width:M,height:S,aspectRatio:A}=e;let I=Math.floor(c?h-e.pointerX:0),R=Math.floor(d?g-e.pointerY:0);const D=M+(l?-I:I),_=S+(f?-R:R),P=-s[0]*M,$=-s[1]*S;let L=fU(D,y,U),B=fU(_,x,v);if(o){let G=0,W=0;l&&I<0?G=_d(E+I+P,o[0][0]):!l&&I>0&&(G=Pd(E+D+P,o[1][0])),f&&R<0?W=_d(k+R+$,o[0][1]):!f&&R>0&&(W=Pd(k+_+$,o[1][1])),L=Math.max(L,G),B=Math.max(B,W)}if(a){let G=0,W=0;l&&I>0?G=Pd(E+I,a[0][0]):!l&&I<0&&(G=_d(E+D,a[1][0])),f&&R>0?W=Pd(k+R,a[0][1]):!f&&R<0&&(W=_d(k+_,a[1][1])),L=Math.max(L,G),B=Math.max(B,W)}if(i){if(c){const G=fU(D/A,x,v)*A;if(L=Math.max(L,G),o){let W=0;!l&&!f||l&&!f&&u?W=Pd(k+$+D/A,o[1][1])*A:W=_d(k+$+(l?I:-I)/A,o[0][1])*A,L=Math.max(L,W)}if(a){let W=0;!l&&!f||l&&!f&&u?W=_d(k+D/A,a[1][1])*A:W=Pd(k+(l?I:-I)/A,a[0][1])*A,L=Math.max(L,W)}}if(d){const G=fU(_*A,y,U)/A;if(B=Math.max(B,G),o){let W=0;!l&&!f||f&&!l&&u?W=Pd(E+_*A+P,o[1][0])/A:W=_d(E+(f?R:-R)*A+P,o[0][0])/A,B=Math.max(B,W)}if(a){let W=0;!l&&!f||f&&!l&&u?W=_d(E+_*A,a[1][0])/A:W=Pd(E+(f?R:-R)*A,a[0][0])/A,B=Math.max(B,W)}}}R=R+(R<0?B:-B),I=I+(I<0?L:-L),i&&(u?D>_*A?R=(EO(l,f)?-I:I)/A:I=(EO(l,f)?-R:R)*A:c?(R=I/A,f=l):(I=R*A,l=f));const V=l?E+I:E,z=f?k+R:k;return{width:M+(l?-I:I),height:S+(f?-R:R),x:s[0]*I*(l?-1:1)+V,y:s[1]*R*(f?-1:1)+z}}const bK={width:0,height:0,x:0,y:0},ege={...bK,pointerX:0,pointerY:0,aspectRatio:1};function tge(e){return[[0,0],[e.measured.width,e.measured.height]]}function nge(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,a=n[0]*s,l=n[1]*o;return[[r-a,i-l],[r+s-a,i+o-l]]}function rge({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=Ro(e);let o={controlDirection:vO("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:f,boundaries:c,keepAspectRatio:d,resizeDirection:u,onResizeStart:h,onResize:g,onResizeEnd:y,shouldResize:U}){let x={...bK},v={...ege};o={boundaries:c,resizeDirection:u,keepAspectRatio:d,controlDirection:vO(f)};let E,k=null,M=[],S,A,I,R=!1;const D=CX().on("start",_=>{const{nodeLookup:P,transform:$,snapGrid:L,snapToGrid:B,nodeOrigin:V,paneDomNode:z}=n();if(E=P.get(t),!E)return;k=(z==null?void 0:z.getBoundingClientRect())??null;const{xSnapped:G,ySnapped:W}=Q5(_.sourceEvent,{transform:$,snapGrid:L,snapToGrid:B,containerBounds:k});x={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},v={...x,pointerX:G,pointerY:W,aspectRatio:x.width/x.height},S=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(S=P.get(E.parentId),A=S&&E.extent==="parent"?tge(S):void 0),M=[],I=void 0;for(const[F,K]of P)if(K.parentId===t&&(M.push({id:F,position:{...K.position},extent:K.extent}),K.extent==="parent"||K.expandParent)){const q=nge(K,E,K.origin??V);I?I=[[Math.min(q[0][0],I[0][0]),Math.min(q[0][1],I[0][1])],[Math.max(q[1][0],I[1][0]),Math.max(q[1][1],I[1][1])]]:I=q}h==null||h(_,{...x})}).on("drag",_=>{const{transform:P,snapGrid:$,snapToGrid:L,nodeOrigin:B}=n(),V=Q5(_.sourceEvent,{transform:P,snapGrid:$,snapToGrid:L,containerBounds:k}),z=[];if(!E)return;const{x:G,y:W,width:F,height:K}=x,q={},Y=E.origin??B,{width:ae,height:ge,x:he,y:ce}=Jme(v,o.controlDirection,V,o.boundaries,o.keepAspectRatio,Y,A,I),ie=ae!==F,we=ge!==K,Ee=he!==G&&ie,_e=ce!==W&&we;if(!Ee&&!_e&&!ie&&!we)return;if((Ee||_e||Y[0]===1||Y[1]===1)&&(q.x=Ee?he:x.x,q.y=_e?ce:x.y,x.x=q.x,x.y=q.y,M.length>0)){const De=he-G,Ae=ce-W;for(const ut of M)ut.position={x:ut.position.x-De+Y[0]*(ae-F),y:ut.position.y-Ae+Y[1]*(ge-K)},z.push(ut)}if((ie||we)&&(q.width=ie&&(!o.resizeDirection||o.resizeDirection==="horizontal")?ae:x.width,q.height=we&&(!o.resizeDirection||o.resizeDirection==="vertical")?ge:x.height,x.width=q.width,x.height=q.height),S&&E.expandParent){const De=Y[0]*(q.width??0);q.x&&q.x<De&&(x.x=De,v.x=v.x-(q.x-De));const Ae=Y[1]*(q.height??0);q.y&&q.y<Ae&&(x.y=Ae,v.y=v.y-(q.y-Ae))}const Fe=Qme({width:x.width,prevWidth:F,height:x.height,prevHeight:K,affectsX:o.controlDirection.affectsX,affectsY:o.controlDirection.affectsY}),He={...x,direction:Fe};(U==null?void 0:U(_,He))!==!1&&(R=!0,g==null||g(_,He),r(q,z))}).on("end",_=>{R&&(y==null||y(_,{...x}),i==null||i({...x}),R=!1)});s.call(D)}function l(){s.on(".drag",null)}return{update:a,destroy:l}}var TE={exports:{}},IE={},NE={exports:{}},RE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kO;function ige(){if(kO)return RE;kO=1;var e=Zb();function t(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function a(d,u){var h=u(),g=r({inst:{value:h,getSnapshot:u}}),y=g[0].inst,U=g[1];return s(function(){y.value=h,y.getSnapshot=u,l(y)&&U({inst:y})},[d,h,u]),i(function(){return l(y)&&U({inst:y}),d(function(){l(y)&&U({inst:y})})},[d]),o(h),h}function l(d){var u=d.getSnapshot;d=d.value;try{var h=u();return!n(d,h)}catch{return!0}}function f(d,u){return u()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:a;return RE.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,RE}var SO;function yK(){return SO||(SO=1,NE.exports=ige()),NE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO;function sge(){if(CO)return IE;CO=1;var e=Zb(),t=yK();function n(f,c){return f===c&&(f!==0||1/f===1/c)||f!==f&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return IE.useSyncExternalStoreWithSelector=function(f,c,d,u,h){var g=s(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=a(function(){function x(S){if(!v){if(v=!0,E=S,S=u(S),h!==void 0&&y.hasValue){var A=y.value;if(h(A,S))return k=A}return k=S}if(A=k,r(E,S))return A;var I=u(S);return h!==void 0&&h(A,I)?(E=S,A):(E=S,k=I)}var v=!1,E,k,M=d===void 0?null:d;return[function(){return x(c())},M===null?void 0:function(){return x(M())}]},[c,d,u,h]);var U=i(f,g[0],g[1]);return o(function(){y.hasValue=!0,y.value=U},[U]),l(U),U},IE}var AO;function oge(){return AO||(AO=1,TE.exports=sge()),TE.exports}var UK=oge();const xK=Na(UK),MO=e=>{let t;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(t):c;if(!Object.is(u,t)){const h=t;t=d??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(g=>g(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>f,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}},f=t=e(r,i,l);return l},wK=e=>e?MO(e):MO,{useDebugValue:age}=Ne,{useSyncExternalStoreWithSelector:lge}=xK,cge=e=>e;function vK(e,t=cge,n){const r=lge(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return age(r),r}const TO=(e,t)=>{const n=wK(e),r=(i,s=t)=>vK(n,i,s);return Object.assign(r,n),r},fge=(e,t)=>e?TO(e,t):TO;function ar(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var ai=UW();const EK=Na(ai),K9=T.createContext(null),dge=K9.Provider,kK=vc.error001();function rn(e,t){const n=T.useContext(K9);if(n===null)throw new Error(kK);return vK(n,e,t)}function lr(){const e=T.useContext(K9);if(e===null)throw new Error(kK);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const IO={display:"none"},uge={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},SK="react-flow__node-desc",CK="react-flow__edge-desc",hge="react-flow__aria-live",pge=e=>e.ariaLiveMessage,mge=e=>e.ariaLabelConfig;function gge({rfId:e}){const t=rn(pge);return m.jsx("div",{id:`${hge}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:uge,children:t})}function bge({rfId:e,disableKeyboardA11y:t}){const n=rn(mge);return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:`${SK}-${e}`,style:IO,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),m.jsx("div",{id:`${CK}-${e}`,style:IO,children:n["edge.a11yDescription.default"]}),!t&&m.jsx(gge,{rfId:e})]})}const Y9=T.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return m.jsx("div",{className:ei(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});Y9.displayName="Panel";function yge({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m.jsx(Y9,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Uge=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},dU=e=>e.id;function xge(e,t){return ar(e.selectedNodes.map(dU),t.selectedNodes.map(dU))&&ar(e.selectedEdges.map(dU),t.selectedEdges.map(dU))}function wge({onSelectionChange:e}){const t=lr(),{selectedNodes:n,selectedEdges:r}=rn(Uge,xge);return T.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const vge=e=>!!e.onSelectionChangeHandlers;function Ege({onSelectionChange:e}){const t=rn(vge);return e||t?m.jsx(wge,{onSelectionChange:e}):null}const AK=[0,0],kge={x:0,y:0,zoom:1},Sge=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],NO=[...Sge,"rfId"],Cge=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),RO={translateExtent:W2,nodeOrigin:AK,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Age(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:l}=rn(Cge,ar),f=lr();T.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{c.current=RO,a()}),[]);const c=T.useRef(RO);return T.useEffect(()=>{for(const d of NO){const u=e[d],h=c.current[d];u!==h&&(typeof e[d]>"u"||(d==="nodes"?t(u):d==="edges"?n(u):d==="minZoom"?r(u):d==="maxZoom"?i(u):d==="translateExtent"?s(u):d==="nodeExtent"?o(u):d==="ariaLabelConfig"?f.setState({ariaLabelConfig:mme(u)}):d==="fitView"?f.setState({fitViewQueued:u}):d==="fitViewOptions"?f.setState({fitViewOptions:u}):f.setState({[d]:u})))}c.current=e},NO.map(d=>e[d])),null}function _O(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Mge(e){var r;const[t,n]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){n(e);return}const i=_O(),s=()=>n(i!=null&&i.matches?"dark":"light");return s(),i==null||i.addEventListener("change",s),()=>{i==null||i.removeEventListener("change",s)}},[e]),t!==null?t:(r=_O())!=null&&r.matches?"dark":"light"}const PO=typeof document<"u"?document:null;function Y2(e=null,t={target:PO,actInsideInputWithModifier:!0}){const[n,r]=T.useState(!1),i=T.useRef(!1),s=T.useRef(new Set([])),[o,a]=T.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=f.reduce((d,u)=>d.concat(...u),[]);return[f,c]}return[[],[]]},[e]);return T.useEffect(()=>{const l=(t==null?void 0:t.target)??PO,f=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=h=>{var U,x;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!f)&&tK(h))return!1;const y=LO(h.code,a);if(s.current.add(h[y]),DO(o,s.current,!1)){const v=((x=(U=h.composedPath)==null?void 0:U.call(h))==null?void 0:x[0])||h.target,E=(v==null?void 0:v.nodeName)==="BUTTON"||(v==null?void 0:v.nodeName)==="A";t.preventDefault!==!1&&(i.current||!E)&&h.preventDefault(),r(!0)}},d=h=>{const g=LO(h.code,a);DO(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[g]),h.key==="Meta"&&s.current.clear(),i.current=!1},u=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,r]),n}function DO(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function LO(e,t){return t.includes(e)?"code":"key"}const Tge=()=>{const e=lr();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=e.getState(),l=TT(t,r,i,s,o,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:a,y:l}=o.getBoundingClientRect(),f={x:t.x-a,y:t.y-l},c=n.snapGrid??i,d=n.snapToGrid??s;return ly(f,r,d,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Mx(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function MK(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const l of o)Ige(l,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function Ige(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function TK(e,t){return MK(e,t)}function IK(e,t){return MK(e,t)}function _0(e,t){return{id:e,type:"select",selected:t}}function Fp(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(_0(s.id,o)))}return r}function OO({items:e=[],lookup:t}){var i;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,o]of e.entries()){const a=t.get(o.id),l=((i=a==null?void 0:a.internals)==null?void 0:i.userNode)??a;l!==void 0&&l!==o&&n.push({id:o.id,item:o,type:"replace"}),l===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function jO(e){return{id:e.id,type:"remove"}}const BO=e=>sme(e),Nge=e=>XX(e);function NK(e){return T.forwardRef(e)}const Rge=typeof window<"u"?T.useLayoutEffect:T.useEffect;function FO(e){const[t,n]=T.useState(BigInt(0)),[r]=T.useState(()=>_ge(()=>n(i=>i+BigInt(1))));return Rge(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function _ge(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const RK=T.createContext(null);function Pge({children:e}){const t=lr(),n=T.useCallback(a=>{const{nodes:l=[],setNodes:f,hasDefaultNodes:c,onNodesChange:d,nodeLookup:u,fitViewQueued:h,onNodesChangeMiddlewareMap:g}=t.getState();let y=l;for(const x of a)y=typeof x=="function"?x(y):x;let U=OO({items:y,lookup:u});for(const x of g.values())U=x(U);c&&f(y),U.length>0?d==null||d(U):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:v,setNodes:E}=t.getState();x&&E(v)})},[]),r=FO(n),i=T.useCallback(a=>{const{edges:l=[],setEdges:f,hasDefaultEdges:c,onEdgesChange:d,edgeLookup:u}=t.getState();let h=l;for(const g of a)h=typeof g=="function"?g(h):g;c?f(h):d&&d(OO({items:h,lookup:u}))},[]),s=FO(i),o=T.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return m.jsx(RK.Provider,{value:o,children:e})}function Dge(){const e=T.useContext(RK);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Lge=e=>!!e.panZoom;function Z9(){const e=Tge(),t=lr(),n=Dge(),r=rn(Lge),i=T.useMemo(()=>{const s=d=>t.getState().nodeLookup.get(d),o=d=>{n.nodeQueue.push(d)},a=d=>{n.edgeQueue.push(d)},l=d=>{var x,v;const{nodeLookup:u,nodeOrigin:h}=t.getState(),g=BO(d)?d:u.get(d.id),y=g.parentId?JX(g.position,g.measured,g.parentId,u,h):g.position,U={...g,position:y,width:((x=g.measured)==null?void 0:x.width)??g.width,height:((v=g.measured)==null?void 0:v.height)??g.height};return bg(U)},f=(d,u,h={replace:!1})=>{o(g=>g.map(y=>{if(y.id===d){const U=typeof u=="function"?u(y):u;return h.replace&&BO(U)?U:{...y,...U}}return y}))},c=(d,u,h={replace:!1})=>{a(g=>g.map(y=>{if(y.id===d){const U=typeof u=="function"?u(y):u;return h.replace&&Nge(U)?U:{...y,...U}}return y}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var u;return(u=s(d))==null?void 0:u.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(u=>({...u}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:o,setEdges:a,addNodes:d=>{const u=Array.isArray(d)?d:[d];n.nodeQueue.push(h=>[...h,...u])},addEdges:d=>{const u=Array.isArray(d)?d:[d];n.edgeQueue.push(h=>[...h,...u])},toObject:()=>{const{nodes:d=[],edges:u=[],transform:h}=t.getState(),[g,y,U]=h;return{nodes:d.map(x=>({...x})),edges:u.map(x=>({...x})),viewport:{x:g,y,zoom:U}}},deleteElements:async({nodes:d=[],edges:u=[]})=>{const{nodes:h,edges:g,onNodesDelete:y,onEdgesDelete:U,triggerNodeChanges:x,triggerEdgeChanges:v,onDelete:E,onBeforeDelete:k}=t.getState(),{nodes:M,edges:S}=await fme({nodesToRemove:d,edgesToRemove:u,nodes:h,edges:g,onBeforeDelete:k}),A=S.length>0,I=M.length>0;if(A){const R=S.map(jO);U==null||U(S),v(R)}if(I){const R=M.map(jO);y==null||y(M),x(R)}return(I||A)&&(E==null||E({nodes:M,edges:S})),{deletedNodes:M,deletedEdges:S}},getIntersectingNodes:(d,u=!0,h)=>{const g=dO(d),y=g?d:l(d),U=h!==void 0;return y?(h||t.getState().nodes).filter(x=>{const v=t.getState().nodeLookup.get(x.id);if(v&&!g&&(x.id===d.id||!v.internals.positionAbsolute))return!1;const E=bg(U?x:v),k=X2(E,y);return u&&k>0||k>=E.width*E.height||k>=y.width*y.height}):[]},isNodeIntersecting:(d,u,h=!0)=>{const y=dO(d)?d:l(d);if(!y)return!1;const U=X2(y,u);return h&&U>0||U>=u.width*u.height||U>=y.width*y.height},updateNode:f,updateNodeData:(d,u,h={replace:!1})=>{f(d,g=>{const y=typeof u=="function"?u(g):u;return h.replace?{...g,data:y}:{...g,data:{...g.data,...y}}},h)},updateEdge:c,updateEdgeData:(d,u,h={replace:!1})=>{c(d,g=>{const y=typeof u=="function"?u(g):u;return h.replace?{...g,data:y}:{...g,data:{...g.data,...y}}},h)},getNodesBounds:d=>{const{nodeLookup:u,nodeOrigin:h}=t.getState();return ome(d,{nodeLookup:u,nodeOrigin:h})},getHandleConnections:({type:d,id:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}-${d}${u?`-${u}`:""}`))==null?void 0:g.values())??[])},getNodeConnections:({type:d,handleId:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}${d?u?`-${d}-${u}`:`-${d}`:""}`))==null?void 0:g.values())??[])},fitView:async d=>{const u=t.getState().fitViewResolver??pme();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:u}),n.nodeQueue.push(h=>[...h]),u.promise}}},[]);return T.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const zO=e=>e.selected,Oge=typeof window<"u"?window:void 0;function jge({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=lr(),{deleteElements:r}=Z9(),i=Y2(e,{actInsideInputWithModifier:!1}),s=Y2(t,{target:Oge});T.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(zO),edges:o.filter(zO)}),n.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function Bge(e){const t=lr();T.useEffect(()=>{const n=()=>{var i,s,o,a;if(!e.current||!(((s=(i=e.current).checkVisibility)==null?void 0:s.call(i))??!0))return!1;const r=IT(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",vc.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const q9={position:"absolute",width:"100%",height:"100%",top:0,left:0},Fge=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function zge({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=_h.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:f,minZoom:c,maxZoom:d,zoomActivationKeyCode:u,preventScrolling:h=!0,children:g,noWheelClassName:y,noPanClassName:U,onViewportChange:x,isControlledViewport:v,paneClickDistance:E,selectionOnDrag:k}){const M=lr(),S=T.useRef(null),{userSelectionActive:A,lib:I,connectionInProgress:R}=rn(Fge,ar),D=Y2(u),_=T.useRef();Bge(S);const P=T.useCallback($=>{x==null||x({x:$[0],y:$[1],zoom:$[2]}),v||M.setState({transform:$})},[x,v]);return T.useEffect(()=>{if(S.current){_.current=qme({domNode:S.current,minZoom:c,maxZoom:d,translateExtent:f,viewport:l,onDraggingChange:V=>M.setState(z=>z.paneDragging===V?z:{paneDragging:V}),onPanZoomStart:(V,z)=>{const{onViewportChangeStart:G,onMoveStart:W}=M.getState();W==null||W(V,z),G==null||G(z)},onPanZoom:(V,z)=>{const{onViewportChange:G,onMove:W}=M.getState();W==null||W(V,z),G==null||G(z)},onPanZoomEnd:(V,z)=>{const{onViewportChangeEnd:G,onMoveEnd:W}=M.getState();W==null||W(V,z),G==null||G(z)}});const{x:$,y:L,zoom:B}=_.current.getViewport();return M.setState({panZoom:_.current,transform:[$,L,B],domNode:S.current.closest(".react-flow")}),()=>{var V;(V=_.current)==null||V.destroy()}}},[]),T.useEffect(()=>{var $;($=_.current)==null||$.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:D,preventScrolling:h,noPanClassName:U,userSelectionActive:A,noWheelClassName:y,lib:I,onTransformChange:P,connectionInProgress:R,selectionOnDrag:k,paneClickDistance:E})},[e,t,n,r,i,s,o,a,D,h,U,A,y,I,P,R,k,E]),m.jsx("div",{className:"react-flow__renderer",ref:S,style:q9,children:g})}const $ge=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Hge(){const{userSelectionActive:e,userSelectionRect:t}=rn($ge,ar);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const _E=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Vge=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Wge({isSelecting:e,selectionKeyPressed:t,selectionMode:n=G2.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:s,onSelectionStart:o,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:f,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:h,children:g}){const y=lr(),{userSelectionActive:U,elementsSelectable:x,dragging:v,connectionInProgress:E}=rn(Vge,ar),k=x&&(e||U),M=T.useRef(null),S=T.useRef(),A=T.useRef(new Set),I=T.useRef(new Set),R=T.useRef(!1),D=G=>{if(R.current||E){R.current=!1;return}l==null||l(G),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},_=G=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){G.preventDefault();return}f==null||f(G)},P=c?G=>c(G):void 0,$=G=>{R.current&&(G.stopPropagation(),R.current=!1)},L=G=>{var ge,he;const{domNode:W}=y.getState();if(S.current=W==null?void 0:W.getBoundingClientRect(),!S.current)return;const F=G.target===M.current;if(!F&&!!G.target.closest(".nokey")||!e||!(s&&F||t)||G.button!==0||!G.isPrimary)return;(he=(ge=G.target)==null?void 0:ge.setPointerCapture)==null||he.call(ge,G.pointerId),R.current=!1;const{x:Y,y:ae}=ll(G.nativeEvent,S.current);y.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:ae,x:Y,y:ae}}),F||(G.stopPropagation(),G.preventDefault())},B=G=>{const{userSelectionRect:W,transform:F,nodeLookup:K,edgeLookup:q,connectionLookup:Y,triggerNodeChanges:ae,triggerEdgeChanges:ge,defaultEdgeOptions:he,resetSelectedElements:ce}=y.getState();if(!S.current||!W)return;const{x:ie,y:we}=ll(G.nativeEvent,S.current),{startX:Ee,startY:_e}=W;if(!R.current){const Ae=t?0:i;if(Math.hypot(ie-Ee,we-_e)<=Ae)return;ce(),o==null||o(G)}R.current=!0;const Fe={startX:Ee,startY:_e,x:ie<Ee?ie:Ee,y:we<_e?we:_e,width:Math.abs(ie-Ee),height:Math.abs(we-_e)},He=A.current,ve=I.current;A.current=new Set(MT(K,Fe,F,n===G2.Partial,!0).map(Ae=>Ae.id)),I.current=new Set;const De=(he==null?void 0:he.selectable)??!0;for(const Ae of A.current){const ut=Y.get(Ae);if(ut)for(const{edgeId:Mt}of ut.values()){const qt=q.get(Mt);qt&&(qt.selectable??De)&&I.current.add(Mt)}}if(!uO(He,A.current)){const Ae=Fp(K,A.current,!0);ae(Ae)}if(!uO(ve,I.current)){const Ae=Fp(q,I.current);ge(Ae)}y.setState({userSelectionRect:Fe,userSelectionActive:!0,nodesSelectionActive:!1})},V=G=>{var W,F;G.button===0&&((F=(W=G.target)==null?void 0:W.releasePointerCapture)==null||F.call(W,G.pointerId),!U&&G.target===M.current&&y.getState().userSelectionRect&&(D==null||D(G)),y.setState({userSelectionActive:!1,userSelectionRect:null}),R.current&&(a==null||a(G),y.setState({nodesSelectionActive:A.current.size>0})))},z=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:ei(["react-flow__pane",{draggable:z,dragging:v,selection:e}]),onClick:k?void 0:_E(D,M),onContextMenu:_E(_,M),onWheel:_E(P,M),onPointerEnter:k?void 0:d,onPointerMove:k?B:u,onPointerUp:k?V:void 0,onPointerDownCapture:k?L:void 0,onClickCapture:k?$:void 0,onPointerLeave:h,ref:M,style:q9,children:[g,m.jsx(Hge,{})]})}function FC({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:l}=t.getState(),f=a.get(e);if(!f){l==null||l("012",vc.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function _K({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=lr(),[l,f]=T.useState(!1),c=T.useRef();return T.useEffect(()=>{c.current=Ome({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{FC({id:d,store:a,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),T.useEffect(()=>{if(!(t||!e.current||!c.current))return c.current.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{var d;(d=c.current)==null||d.destroy()}},[n,r,t,s,e,i,o]),l}const Gge=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function PK(){const e=lr();return T.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:l,nodeLookup:f,nodeOrigin:c}=e.getState(),d=new Map,u=Gge(o),h=i?s[0]:5,g=i?s[1]:5,y=n.direction.x*h*n.factor,U=n.direction.y*g*n.factor;for(const[,x]of f){if(!u(x))continue;let v={x:x.internals.positionAbsolute.x+y,y:x.internals.positionAbsolute.y+U};i&&(v=ay(v,s));const{position:E,positionAbsolute:k}=KX({nodeId:x.id,nextPosition:v,nodeLookup:f,nodeExtent:r,nodeOrigin:c,onError:a});x.position=E,x.internals.positionAbsolute=k,d.set(x.id,x)}l(d)},[])}const LT=T.createContext(null),Xge=LT.Provider;LT.Consumer;const DK=()=>T.useContext(LT),Kge=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Yge=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:l,isValid:f}=o,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:s===mg.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&f}};function Zge({type:e="source",position:t=lt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:f,onMouseDown:c,onTouchStart:d,...u},h){var B,V;const g=o||null,y=e==="target",U=lr(),x=DK(),{connectOnClick:v,noPanClassName:E,rfId:k}=rn(Kge,ar),{connectingFrom:M,connectingTo:S,clickConnecting:A,isPossibleEndHandle:I,connectionInProcess:R,clickConnectionInProcess:D,valid:_}=rn(Yge(x,g,e),ar);x||(V=(B=U.getState()).onError)==null||V.call(B,"010",vc.error010());const P=z=>{const{defaultEdgeOptions:G,onConnect:W,hasDefaultEdges:F}=U.getState(),K={...G,...z};if(F){const{edges:q,setEdges:Y}=U.getState();Y(wme(K,q))}W==null||W(K),a==null||a(K)},$=z=>{if(!x)return;const G=nK(z.nativeEvent);if(i&&(G&&z.button===0||!G)){const W=U.getState();BC.onPointerDown(z.nativeEvent,{handleDomNode:z.currentTarget,autoPanOnConnect:W.autoPanOnConnect,connectionMode:W.connectionMode,connectionRadius:W.connectionRadius,domNode:W.domNode,nodeLookup:W.nodeLookup,lib:W.lib,isTarget:y,handleId:g,nodeId:x,flowId:W.rfId,panBy:W.panBy,cancelConnection:W.cancelConnection,onConnectStart:W.onConnectStart,onConnectEnd:(...F)=>{var K,q;return(q=(K=U.getState()).onConnectEnd)==null?void 0:q.call(K,...F)},updateConnection:W.updateConnection,onConnect:P,isValidConnection:n||((...F)=>{var K,q;return((q=(K=U.getState()).isValidConnection)==null?void 0:q.call(K,...F))??!0}),getTransform:()=>U.getState().transform,getFromHandle:()=>U.getState().connection.fromHandle,autoPanSpeed:W.autoPanSpeed,dragThreshold:W.connectionDragThreshold})}G?c==null||c(z):d==null||d(z)},L=z=>{const{onClickConnectStart:G,onClickConnectEnd:W,connectionClickStartHandle:F,connectionMode:K,isValidConnection:q,lib:Y,rfId:ae,nodeLookup:ge,connection:he}=U.getState();if(!x||!F&&!i)return;if(!F){G==null||G(z.nativeEvent,{nodeId:x,handleId:g,handleType:e}),U.setState({connectionClickStartHandle:{nodeId:x,type:e,id:g}});return}const ce=eK(z.target),ie=n||q,{connection:we,isValid:Ee}=BC.isValid(z.nativeEvent,{handle:{nodeId:x,id:g,type:e},connectionMode:K,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:ie,flowId:ae,doc:ce,lib:Y,nodeLookup:ge});Ee&&we&&P(we);const _e=structuredClone(he);delete _e.inProgress,_e.toPosition=_e.toHandle?_e.toHandle.position:null,W==null||W(z,_e),U.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${k}-${x}-${g}-${e}`,className:ei(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,f,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:s,clickconnecting:A,connectingfrom:M,connectingto:S,valid:_,connectionindicator:r&&(!R||I)&&(R||D?s:i)}]),onMouseDown:$,onTouchStart:$,onClick:v?L:void 0,ref:h,...u,children:l})}const da=T.memo(NK(Zge));function qge({data:e,isConnectable:t,sourcePosition:n=lt.Bottom}){return m.jsxs(m.Fragment,{children:[e==null?void 0:e.label,m.jsx(da,{type:"source",position:n,isConnectable:t})]})}function Qge({data:e,isConnectable:t,targetPosition:n=lt.Top,sourcePosition:r=lt.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(da,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m.jsx(da,{type:"source",position:r,isConnectable:t})]})}function Jge(){return null}function e6e({data:e,isConnectable:t,targetPosition:n=lt.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(da,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Tx={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},$O={input:qge,default:Qge,output:e6e,group:Jge};function t6e(e){var t,n,r,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const n6e=e=>{const{width:t,height:n,x:r,y:i}=oy(e.nodeLookup,{filter:s=>!!s.selected});return{width:al(t)?t:null,height:al(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function r6e({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=lr(),{width:i,height:s,transformString:o,userSelectionActive:a}=rn(n6e,ar),l=PK(),f=T.useRef(null);T.useEffect(()=>{var h;n||(h=f.current)==null||h.focus({preventScroll:!0})},[n]);const c=!a&&i!==null&&s!==null;if(_K({nodeRef:f,disabled:!c}),!c)return null;const d=e?h=>{const g=r.getState().nodes.filter(y=>y.selected);e(h,g)}:void 0,u=h=>{Object.prototype.hasOwnProperty.call(Tx,h.key)&&(h.preventDefault(),l({direction:Tx[h.key],factor:h.shiftKey?4:1}))};return m.jsx("div",{className:ei(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:m.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:u,style:{width:i,height:s}})})}const HO=typeof window<"u"?window:void 0,i6e=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function LK({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:f,selectionOnDrag:c,selectionMode:d,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:U,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:E,panOnScroll:k,panOnScrollSpeed:M,panOnScrollMode:S,zoomOnDoubleClick:A,panOnDrag:I,defaultViewport:R,translateExtent:D,minZoom:_,maxZoom:P,preventScrolling:$,onSelectionContextMenu:L,noWheelClassName:B,noPanClassName:V,disableKeyboardA11y:z,onViewportChange:G,isControlledViewport:W}){const{nodesSelectionActive:F,userSelectionActive:K}=rn(i6e,ar),q=Y2(f,{target:HO}),Y=Y2(y,{target:HO}),ae=Y||I,ge=Y||k,he=c&&ae!==!0,ce=q||K||he;return jge({deleteKeyCode:l,multiSelectionKeyCode:g}),m.jsx(zge,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:E,panOnScroll:ge,panOnScrollSpeed:M,panOnScrollMode:S,zoomOnDoubleClick:A,panOnDrag:!q&&ae,defaultViewport:R,translateExtent:D,minZoom:_,maxZoom:P,zoomActivationKeyCode:U,preventScrolling:$,noWheelClassName:B,noPanClassName:V,onViewportChange:G,isControlledViewport:W,paneClickDistance:a,selectionOnDrag:he,children:m.jsxs(Wge,{onSelectionStart:u,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ae,isSelecting:!!ce,selectionMode:d,selectionKeyPressed:q,paneClickDistance:a,selectionOnDrag:he,children:[e,F&&m.jsx(r6e,{onSelectionContextMenu:L,noPanClassName:V,disableKeyboardA11y:z})]})})}LK.displayName="FlowRenderer";const s6e=T.memo(LK),o6e=e=>t=>e?MT(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function a6e(e){return rn(T.useCallback(o6e(e),[e]),ar)}const l6e=e=>e.updateNodeInternals;function c6e(){const e=rn(l6e),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return T.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function f6e({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=lr(),s=T.useRef(null),o=T.useRef(null),a=T.useRef(e.sourcePosition),l=T.useRef(e.targetPosition),f=T.useRef(t),c=n&&!!e.internals.handleBounds;return T.useEffect(()=>{s.current&&!e.hidden&&(!c||o.current!==s.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(s.current),o.current=s.current)},[c,e.hidden]),T.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),T.useEffect(()=>{if(s.current){const d=f.current!==t,u=a.current!==e.sourcePosition,h=l.current!==e.targetPosition;(d||u||h)&&(f.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function d6e({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:l,nodesConnectable:f,nodesFocusable:c,resizeObserver:d,noDragClassName:u,noPanClassName:h,disableKeyboardA11y:g,rfId:y,nodeTypes:U,nodeClickDistance:x,onError:v}){const{node:E,internals:k,isParent:M}=rn(ie=>{const we=ie.nodeLookup.get(e),Ee=ie.parentLookup.has(e);return{node:we,internals:we.internals,isParent:Ee}},ar);let S=E.type||"default",A=(U==null?void 0:U[S])||$O[S];A===void 0&&(v==null||v("003",vc.error003(S)),S="default",A=(U==null?void 0:U.default)||$O.default);const I=!!(E.draggable||a&&typeof E.draggable>"u"),R=!!(E.selectable||l&&typeof E.selectable>"u"),D=!!(E.connectable||f&&typeof E.connectable>"u"),_=!!(E.focusable||c&&typeof E.focusable>"u"),P=lr(),$=QX(E),L=f6e({node:E,nodeType:S,hasDimensions:$,resizeObserver:d}),B=_K({nodeRef:L,disabled:E.hidden||!I,noDragClassName:u,handleSelector:E.dragHandle,nodeId:e,isSelectable:R,nodeClickDistance:x}),V=PK();if(E.hidden)return null;const z=nd(E),G=t6e(E),W=R||I||t||n||r||i,F=n?ie=>n(ie,{...k.userNode}):void 0,K=r?ie=>r(ie,{...k.userNode}):void 0,q=i?ie=>i(ie,{...k.userNode}):void 0,Y=s?ie=>s(ie,{...k.userNode}):void 0,ae=o?ie=>o(ie,{...k.userNode}):void 0,ge=ie=>{const{selectNodesOnDrag:we,nodeDragThreshold:Ee}=P.getState();R&&(!we||!I||Ee>0)&&FC({id:e,store:P,nodeRef:L}),t&&t(ie,{...k.userNode})},he=ie=>{if(!(tK(ie.nativeEvent)||g)){if(HX.includes(ie.key)&&R){const we=ie.key==="Escape";FC({id:e,store:P,unselect:we,nodeRef:L})}else if(I&&E.selected&&Object.prototype.hasOwnProperty.call(Tx,ie.key)){ie.preventDefault();const{ariaLabelConfig:we}=P.getState();P.setState({ariaLiveMessage:we["node.a11yDescription.ariaLiveMessage"]({direction:ie.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),V({direction:Tx[ie.key],factor:ie.shiftKey?4:1})}}},ce=()=>{var ve;if(g||!((ve=L.current)!=null&&ve.matches(":focus-visible")))return;const{transform:ie,width:we,height:Ee,autoPanOnNodeFocus:_e,setCenter:Fe}=P.getState();if(!_e)return;MT(new Map([[e,E]]),{x:0,y:0,width:we,height:Ee},ie,!0).length>0||Fe(E.position.x+z.width/2,E.position.y+z.height/2,{zoom:ie[2]})};return m.jsx("div",{className:ei(["react-flow__node",`react-flow__node-${S}`,{[h]:I},E.className,{selected:E.selected,selectable:R,parent:M,draggable:I,dragging:B}]),ref:L,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:W?"all":"none",visibility:$?"visible":"hidden",...E.style,...G},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:F,onMouseMove:K,onMouseLeave:q,onContextMenu:Y,onClick:ge,onDoubleClick:ae,onKeyDown:_?he:void 0,tabIndex:_?0:void 0,onFocus:_?ce:void 0,role:E.ariaRole??(_?"group":void 0),"aria-roledescription":"node","aria-describedby":g?void 0:`${SK}-${y}`,"aria-label":E.ariaLabel,...E.domAttributes,children:m.jsx(Xge,{value:e,children:m.jsx(A,{id:e,data:E.data,type:S,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:E.selected??!1,selectable:R,draggable:I,deletable:E.deletable??!0,isConnectable:D,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:B,dragHandle:E.dragHandle,zIndex:k.z,parentId:E.parentId,...z})})})}var u6e=T.memo(d6e);const h6e=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function OK(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=rn(h6e,ar),o=a6e(e.onlyRenderVisibleElements),a=c6e();return m.jsx("div",{className:"react-flow__nodes",style:q9,children:o.map(l=>m.jsx(u6e,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},l))})}OK.displayName="NodeRenderer";const p6e=T.memo(OK);function m6e(e){return rn(T.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&yme({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),ar)}const g6e=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return m.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},b6e=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return m.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},VO={[Cx.Arrow]:g6e,[Cx.ArrowClosed]:b6e};function y6e(e){const t=lr();return T.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(VO,e)?VO[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",vc.error009(e)),null)},[e])}const U6e=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=y6e(t);return l?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:m.jsx(l,{color:n,strokeWidth:o})}):null},jK=({defaultColor:e,rfId:t})=>{const n=rn(s=>s.edges),r=rn(s=>s.defaultEdgeOptions),i=T.useMemo(()=>Cme(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?m.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:m.jsx("defs",{children:i.map(s=>m.jsx(U6e,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};jK.displayName="MarkerDefinitions";var x6e=T.memo(jK);function BK({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:f,...c}){const[d,u]=T.useState({x:1,y:0,width:0,height:0}),h=ei(["react-flow__edge-textwrapper",f]),g=T.useRef(null);return T.useEffect(()=>{if(g.current){const y=g.current.getBBox();u({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),n?m.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...c,children:[i&&m.jsx("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),m.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:g,style:r,children:n}),l]}):null}BK.displayName="EdgeText";const w6e=T.memo(BK);function Q9({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:f=20,...c}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...c,d:e,fill:"none",className:ei(["react-flow__edge-path",c.className])}),f?m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,r&&al(t)&&al(n)?m.jsx(w6e,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function WO({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===lt.Left||e===lt.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function FK({sourceX:e,sourceY:t,sourcePosition:n=lt.Bottom,targetX:r,targetY:i,targetPosition:s=lt.Top}){const[o,a]=WO({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,f]=WO({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,d,u,h]=rK({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:f});return[`M${e},${t} C${o},${a} ${l},${f} ${r},${i}`,c,d,u,h]}function zK(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:a,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:U,interactionWidth:x})=>{const[v,E,k]=FK({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),M=e.isInternal?void 0:t;return m.jsx(Q9,{id:M,path:v,labelX:E,labelY:k,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:U,interactionWidth:x})})}const v6e=zK({isInternal:!1}),$K=zK({isInternal:!0});v6e.displayName="SimpleBezierEdge";$K.displayName="SimpleBezierEdgeInternal";function HK(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,sourcePosition:h=lt.Bottom,targetPosition:g=lt.Top,markerEnd:y,markerStart:U,pathOptions:x,interactionWidth:v})=>{const[E,k,M]=LC({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:s,targetPosition:g,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset,stepPosition:x==null?void 0:x.stepPosition}),S=e.isInternal?void 0:t;return m.jsx(Q9,{id:S,path:E,labelX:k,labelY:M,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:y,markerStart:U,interactionWidth:v})})}const VK=HK({isInternal:!1}),WK=HK({isInternal:!0});VK.displayName="SmoothStepEdge";WK.displayName="SmoothStepEdgeInternal";function GK(e){return T.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return m.jsx(VK,{...n,id:r,pathOptions:T.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const E6e=GK({isInternal:!1}),XK=GK({isInternal:!0});E6e.displayName="StepEdge";XK.displayName="StepEdgeInternal";function KK(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:y})=>{const[U,x,v]=oK({sourceX:n,sourceY:r,targetX:i,targetY:s}),E=e.isInternal?void 0:t;return m.jsx(Q9,{id:E,path:U,labelX:x,labelY:v,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:y})})}const k6e=KK({isInternal:!1}),YK=KK({isInternal:!0});k6e.displayName="StraightEdge";YK.displayName="StraightEdgeInternal";function ZK(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=lt.Bottom,targetPosition:a=lt.Top,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:U,pathOptions:x,interactionWidth:v})=>{const[E,k,M]=iK({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:x==null?void 0:x.curvature}),S=e.isInternal?void 0:t;return m.jsx(Q9,{id:S,path:E,labelX:k,labelY:M,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:U,interactionWidth:v})})}const S6e=ZK({isInternal:!1}),qK=ZK({isInternal:!0});S6e.displayName="BezierEdge";qK.displayName="BezierEdgeInternal";const GO={default:qK,straight:YK,step:XK,smoothstep:WK,simplebezier:$K},XO={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},C6e=(e,t,n)=>n===lt.Left?e-t:n===lt.Right?e+t:e,A6e=(e,t,n)=>n===lt.Top?e-t:n===lt.Bottom?e+t:e,KO="react-flow__edgeupdater";function YO({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return m.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:ei([KO,`${KO}-${a}`]),cx:C6e(t,r,e),cy:A6e(n,r,e),r,stroke:"transparent",fill:"transparent"})}function M6e({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,onReconnect:f,onReconnectStart:c,onReconnectEnd:d,setReconnecting:u,setUpdateHover:h}){const g=lr(),y=(k,M)=>{if(k.button!==0)return;const{autoPanOnConnect:S,domNode:A,connectionMode:I,connectionRadius:R,lib:D,onConnectStart:_,cancelConnection:P,nodeLookup:$,rfId:L,panBy:B,updateConnection:V}=g.getState(),z=M.type==="target",G=(K,q)=>{u(!1),d==null||d(K,n,M.type,q)},W=K=>f==null?void 0:f(n,K),F=(K,q)=>{u(!0),c==null||c(k,n,M.type),_==null||_(K,q)};BC.onPointerDown(k.nativeEvent,{autoPanOnConnect:S,connectionMode:I,connectionRadius:R,domNode:A,handleId:M.id,nodeId:M.nodeId,nodeLookup:$,isTarget:z,edgeUpdaterType:M.type,lib:D,flowId:L,cancelConnection:P,panBy:B,isValidConnection:(...K)=>{var q,Y;return((Y=(q=g.getState()).isValidConnection)==null?void 0:Y.call(q,...K))??!0},onConnect:W,onConnectStart:F,onConnectEnd:(...K)=>{var q,Y;return(Y=(q=g.getState()).onConnectEnd)==null?void 0:Y.call(q,...K)},onReconnectEnd:G,updateConnection:V,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,dragThreshold:g.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},U=k=>y(k,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=k=>y(k,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),v=()=>h(!0),E=()=>h(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(YO,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:U,onMouseEnter:v,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&m.jsx(YO,{position:l,centerX:s,centerY:o,radius:t,onMouseDown:x,onMouseEnter:v,onMouseOut:E,type:"target"})]})}function T6e({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:f,reconnectRadius:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,rfId:g,edgeTypes:y,noPanClassName:U,onError:x,disableKeyboardA11y:v}){let E=rn(Fe=>Fe.edgeLookup.get(e));const k=rn(Fe=>Fe.defaultEdgeOptions);E=k?{...k,...E}:E;let M=E.type||"default",S=(y==null?void 0:y[M])||GO[M];S===void 0&&(x==null||x("011",vc.error011(M)),M="default",S=(y==null?void 0:y.default)||GO.default);const A=!!(E.focusable||t&&typeof E.focusable>"u"),I=typeof d<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),R=!!(E.selectable||r&&typeof E.selectable>"u"),D=T.useRef(null),[_,P]=T.useState(!1),[$,L]=T.useState(!1),B=lr(),{zIndex:V,sourceX:z,sourceY:G,targetX:W,targetY:F,sourcePosition:K,targetPosition:q}=rn(T.useCallback(Fe=>{const He=Fe.nodeLookup.get(E.source),ve=Fe.nodeLookup.get(E.target);if(!He||!ve)return{zIndex:E.zIndex,...XO};const De=Sme({id:e,sourceNode:He,targetNode:ve,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Fe.connectionMode,onError:x});return{zIndex:bme({selected:E.selected,zIndex:E.zIndex,sourceNode:He,targetNode:ve,elevateOnSelect:Fe.elevateEdgesOnSelect,zIndexMode:Fe.zIndexMode}),...De||XO}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),ar),Y=T.useMemo(()=>E.markerStart?`url('#${OC(E.markerStart,g)}')`:void 0,[E.markerStart,g]),ae=T.useMemo(()=>E.markerEnd?`url('#${OC(E.markerEnd,g)}')`:void 0,[E.markerEnd,g]);if(E.hidden||z===null||G===null||W===null||F===null)return null;const ge=Fe=>{var Ae;const{addSelectedEdges:He,unselectNodesAndEdges:ve,multiSelectionActive:De}=B.getState();R&&(B.setState({nodesSelectionActive:!1}),E.selected&&De?(ve({nodes:[],edges:[E]}),(Ae=D.current)==null||Ae.blur()):He([e])),i&&i(Fe,E)},he=s?Fe=>{s(Fe,{...E})}:void 0,ce=o?Fe=>{o(Fe,{...E})}:void 0,ie=a?Fe=>{a(Fe,{...E})}:void 0,we=l?Fe=>{l(Fe,{...E})}:void 0,Ee=f?Fe=>{f(Fe,{...E})}:void 0,_e=Fe=>{var He;if(!v&&HX.includes(Fe.key)&&R){const{unselectNodesAndEdges:ve,addSelectedEdges:De}=B.getState();Fe.key==="Escape"?((He=D.current)==null||He.blur(),ve({edges:[E]})):De([e])}};return m.jsx("svg",{style:{zIndex:V},children:m.jsxs("g",{className:ei(["react-flow__edge",`react-flow__edge-${M}`,E.className,U,{selected:E.selected,animated:E.animated,inactive:!R&&!i,updating:_,selectable:R}]),onClick:ge,onDoubleClick:he,onContextMenu:ce,onMouseEnter:ie,onMouseMove:we,onMouseLeave:Ee,onKeyDown:A?_e:void 0,tabIndex:A?0:void 0,role:E.ariaRole??(A?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":A?`${CK}-${g}`:void 0,ref:D,...E.domAttributes,children:[!$&&m.jsx(S,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:R,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:z,sourceY:G,targetX:W,targetY:F,sourcePosition:K,targetPosition:q,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:Y,markerEnd:ae,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),I&&m.jsx(M6e,{edge:E,isReconnectable:I,reconnectRadius:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,sourceX:z,sourceY:G,targetX:W,targetY:F,sourcePosition:K,targetPosition:q,setUpdateHover:P,setReconnecting:L})]})})}var I6e=T.memo(T6e);const N6e=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function QK({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:f,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:y}){const{edgesFocusable:U,edgesReconnectable:x,elementsSelectable:v,onError:E}=rn(N6e,ar),k=m6e(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(x6e,{defaultColor:e,rfId:n}),k.map(M=>m.jsx(I6e,{id:M,edgesFocusable:U,edgesReconnectable:x,elementsSelectable:v,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:f,onClick:c,reconnectRadius:d,onDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:y},M))]})}QK.displayName="EdgeRenderer";const R6e=T.memo(QK),_6e=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function P6e({children:e}){const t=rn(_6e);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function D6e(e){const t=Z9(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const L6e=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function O6e(e){const t=rn(L6e),n=lr();return T.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function j6e(e){return e.connection.inProgress?{...e.connection,to:ly(e.connection.to,e.transform)}:{...e.connection}}function B6e(e){return j6e}function F6e(e){const t=B6e();return rn(t,ar)}const z6e=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function $6e({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:l}=rn(z6e,ar);return!(s&&i&&l)?null:m.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:ei(["react-flow__connection",GX(a)]),children:m.jsx(JK,{style:t,type:n,CustomComponent:r,isValid:a})})})}const JK=({style:e,type:t=eu.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:l,to:f,toNode:c,toHandle:d,toPosition:u,pointer:h}=F6e();if(!i)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:l,toPosition:u,connectionStatus:GX(r),toNode:c,toHandle:d,pointer:h});let g="";const y={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:f.x,targetY:f.y,targetPosition:u};switch(t){case eu.Bezier:[g]=iK(y);break;case eu.SimpleBezier:[g]=FK(y);break;case eu.Step:[g]=LC({...y,borderRadius:0});break;case eu.SmoothStep:[g]=LC(y);break;default:[g]=oK(y)}return m.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};JK.displayName="ConnectionLine";const H6e={};function ZO(e=H6e){T.useRef(e),lr(),T.useEffect(()=>{},[e])}function V6e(){lr(),T.useRef(!1),T.useEffect(()=>{},[])}function eY({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:u,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:U,connectionLineContainerStyle:x,selectionKeyCode:v,selectionOnDrag:E,selectionMode:k,multiSelectionKeyCode:M,panActivationKeyCode:S,zoomActivationKeyCode:A,deleteKeyCode:I,onlyRenderVisibleElements:R,elementsSelectable:D,defaultViewport:_,translateExtent:P,minZoom:$,maxZoom:L,preventScrolling:B,defaultMarkerColor:V,zoomOnScroll:z,zoomOnPinch:G,panOnScroll:W,panOnScrollSpeed:F,panOnScrollMode:K,zoomOnDoubleClick:q,panOnDrag:Y,onPaneClick:ae,onPaneMouseEnter:ge,onPaneMouseMove:he,onPaneMouseLeave:ce,onPaneScroll:ie,onPaneContextMenu:we,paneClickDistance:Ee,nodeClickDistance:_e,onEdgeContextMenu:Fe,onEdgeMouseEnter:He,onEdgeMouseMove:ve,onEdgeMouseLeave:De,reconnectRadius:Ae,onReconnect:ut,onReconnectStart:Mt,onReconnectEnd:qt,noDragClassName:Kt,noWheelClassName:Zn,noPanClassName:Vi,disableKeyboardA11y:Ls,nodeExtent:Os,rfId:Ti,viewport:ye,onViewportChange:Me}){return ZO(e),ZO(t),V6e(),D6e(n),O6e(ye),m.jsx(s6e,{onPaneClick:ae,onPaneMouseEnter:ge,onPaneMouseMove:he,onPaneMouseLeave:ce,onPaneContextMenu:we,onPaneScroll:ie,paneClickDistance:Ee,deleteKeyCode:I,selectionKeyCode:v,selectionOnDrag:E,selectionMode:k,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:M,panActivationKeyCode:S,zoomActivationKeyCode:A,elementsSelectable:D,zoomOnScroll:z,zoomOnPinch:G,zoomOnDoubleClick:q,panOnScroll:W,panOnScrollSpeed:F,panOnScrollMode:K,panOnDrag:Y,defaultViewport:_,translateExtent:P,minZoom:$,maxZoom:L,onSelectionContextMenu:d,preventScrolling:B,noDragClassName:Kt,noWheelClassName:Zn,noPanClassName:Vi,disableKeyboardA11y:Ls,onViewportChange:Me,isControlledViewport:!!ye,children:m.jsxs(P6e,{children:[m.jsx(R6e,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:ut,onReconnectStart:Mt,onReconnectEnd:qt,onlyRenderVisibleElements:R,onEdgeContextMenu:Fe,onEdgeMouseEnter:He,onEdgeMouseMove:ve,onEdgeMouseLeave:De,reconnectRadius:Ae,defaultMarkerColor:V,noPanClassName:Vi,disableKeyboardA11y:Ls,rfId:Ti}),m.jsx($6e,{style:y,type:g,component:U,containerStyle:x}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(p6e,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:c,nodeClickDistance:_e,onlyRenderVisibleElements:R,noPanClassName:Vi,noDragClassName:Kt,disableKeyboardA11y:Ls,nodeExtent:Os,rfId:Ti}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}eY.displayName="GraphView";const W6e=T.memo(eY),qO=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l=.5,maxZoom:f=2,nodeOrigin:c,nodeExtent:d,zIndexMode:u="basic"}={})=>{const h=new Map,g=new Map,y=new Map,U=new Map,x=r??t??[],v=n??e??[],E=c??[0,0],k=d??W2;cK(y,U,x);const M=jC(v,h,g,{nodeOrigin:E,nodeExtent:k,zIndexMode:u});let S=[0,0,1];if(o&&i&&s){const A=oy(h,{filter:_=>!!((_.width||_.initialWidth)&&(_.height||_.initialHeight))}),{x:I,y:R,zoom:D}=TT(A,i,s,l,f,(a==null?void 0:a.padding)??.1);S=[I,R,D]}return{rfId:"1",width:i??0,height:s??0,transform:S,nodes:v,nodesInitialized:M,nodeLookup:h,parentLookup:g,edges:x,edgeLookup:U,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:f,translateExtent:W2,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:mg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:a,fitViewResolver:null,connection:{...WX},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:dme,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:VX,zIndexMode:u,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},G6e=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:f,nodeOrigin:c,nodeExtent:d,zIndexMode:u})=>fge((h,g)=>{async function y(){const{nodeLookup:U,panZoom:x,fitViewOptions:v,fitViewResolver:E,width:k,height:M,minZoom:S,maxZoom:A}=g();x&&(await cme({nodes:U,width:k,height:M,panZoom:x,minZoom:S,maxZoom:A},v),E==null||E.resolve(!0),h({fitViewResolver:null}))}return{...qO({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:f,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:u}),setNodes:U=>{const{nodeLookup:x,parentLookup:v,nodeOrigin:E,elevateNodesOnSelect:k,fitViewQueued:M,zIndexMode:S}=g(),A=jC(U,x,v,{nodeOrigin:E,nodeExtent:d,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:S});M&&A?(y(),h({nodes:U,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:U,nodesInitialized:A})},setEdges:U=>{const{connectionLookup:x,edgeLookup:v}=g();cK(x,v,U),h({edges:U})},setDefaultNodesAndEdges:(U,x)=>{if(U){const{setNodes:v}=g();v(U),h({hasDefaultNodes:!0})}if(x){const{setEdges:v}=g();v(x),h({hasDefaultEdges:!0})}},updateNodeInternals:U=>{const{triggerNodeChanges:x,nodeLookup:v,parentLookup:E,domNode:k,nodeOrigin:M,nodeExtent:S,debug:A,fitViewQueued:I,zIndexMode:R}=g(),{changes:D,updatedInternals:_}=_me(U,v,E,k,M,S,R);_&&(Tme(v,E,{nodeOrigin:M,nodeExtent:S,zIndexMode:R}),I?(y(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(D==null?void 0:D.length)>0&&(A&&console.log("React Flow: trigger node changes",D),x==null||x(D)))},updateNodePositions:(U,x=!1)=>{const v=[];let E=[];const{nodeLookup:k,triggerNodeChanges:M,connection:S,updateConnection:A,onNodesChangeMiddlewareMap:I}=g();for(const[R,D]of U){const _=k.get(R),P=!!(_!=null&&_.expandParent&&(_!=null&&_.parentId)&&(D!=null&&D.position)),$={id:R,type:"position",position:P?{x:Math.max(0,D.position.x),y:Math.max(0,D.position.y)}:D.position,dragging:x};if(_&&S.inProgress&&S.fromNode.id===_.id){const L=e1(_,S.fromHandle,lt.Left,!0);A({...S,from:L})}P&&_.parentId&&v.push({id:R,parentId:_.parentId,rect:{...D.internals.positionAbsolute,width:D.measured.width??0,height:D.measured.height??0}}),E.push($)}if(v.length>0){const{parentLookup:R,nodeOrigin:D}=g(),_=DT(v,k,R,D);E.push(..._)}for(const R of I.values())E=R(E);M(E)},triggerNodeChanges:U=>{const{onNodesChange:x,setNodes:v,nodes:E,hasDefaultNodes:k,debug:M}=g();if(U!=null&&U.length){if(k){const S=TK(U,E);v(S)}M&&console.log("React Flow: trigger node changes",U),x==null||x(U)}},triggerEdgeChanges:U=>{const{onEdgesChange:x,setEdges:v,edges:E,hasDefaultEdges:k,debug:M}=g();if(U!=null&&U.length){if(k){const S=IK(U,E);v(S)}M&&console.log("React Flow: trigger edge changes",U),x==null||x(U)}},addSelectedNodes:U=>{const{multiSelectionActive:x,edgeLookup:v,nodeLookup:E,triggerNodeChanges:k,triggerEdgeChanges:M}=g();if(x){const S=U.map(A=>_0(A,!0));k(S);return}k(Fp(E,new Set([...U]),!0)),M(Fp(v))},addSelectedEdges:U=>{const{multiSelectionActive:x,edgeLookup:v,nodeLookup:E,triggerNodeChanges:k,triggerEdgeChanges:M}=g();if(x){const S=U.map(A=>_0(A,!0));M(S);return}M(Fp(v,new Set([...U]))),k(Fp(E,new Set,!0))},unselectNodesAndEdges:({nodes:U,edges:x}={})=>{const{edges:v,nodes:E,nodeLookup:k,triggerNodeChanges:M,triggerEdgeChanges:S}=g(),A=U||E,I=x||v,R=[];for(const _ of A){if(!_.selected)continue;const P=k.get(_.id);P&&(P.selected=!1),R.push(_0(_.id,!1))}const D=[];for(const _ of I)_.selected&&D.push(_0(_.id,!1));M(R),S(D)},setMinZoom:U=>{const{panZoom:x,maxZoom:v}=g();x==null||x.setScaleExtent([U,v]),h({minZoom:U})},setMaxZoom:U=>{const{panZoom:x,minZoom:v}=g();x==null||x.setScaleExtent([v,U]),h({maxZoom:U})},setTranslateExtent:U=>{var x;(x=g().panZoom)==null||x.setTranslateExtent(U),h({translateExtent:U})},resetSelectedElements:()=>{const{edges:U,nodes:x,triggerNodeChanges:v,triggerEdgeChanges:E,elementsSelectable:k}=g();if(!k)return;const M=x.reduce((A,I)=>I.selected?[...A,_0(I.id,!1)]:A,[]),S=U.reduce((A,I)=>I.selected?[...A,_0(I.id,!1)]:A,[]);v(M),E(S)},setNodeExtent:U=>{const{nodes:x,nodeLookup:v,parentLookup:E,nodeOrigin:k,elevateNodesOnSelect:M,nodeExtent:S,zIndexMode:A}=g();U[0][0]===S[0][0]&&U[0][1]===S[0][1]&&U[1][0]===S[1][0]&&U[1][1]===S[1][1]||(jC(x,v,E,{nodeOrigin:k,nodeExtent:U,elevateNodesOnSelect:M,checkEquality:!1,zIndexMode:A}),h({nodeExtent:U}))},panBy:U=>{const{transform:x,width:v,height:E,panZoom:k,translateExtent:M}=g();return Pme({delta:U,panZoom:k,transform:x,translateExtent:M,width:v,height:E})},setCenter:async(U,x,v)=>{const{width:E,height:k,maxZoom:M,panZoom:S}=g();if(!S)return Promise.resolve(!1);const A=typeof(v==null?void 0:v.zoom)<"u"?v.zoom:M;return await S.setViewport({x:E/2-U*A,y:k/2-x*A,zoom:A},{duration:v==null?void 0:v.duration,ease:v==null?void 0:v.ease,interpolate:v==null?void 0:v.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...WX}})},updateConnection:U=>{h({connection:U})},reset:()=>h({...qO()})}},Object.is);function tY({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:a,initialFitViewOptions:l,fitView:f,nodeOrigin:c,nodeExtent:d,zIndexMode:u,children:h}){const[g]=T.useState(()=>G6e({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:f,minZoom:o,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:d,zIndexMode:u}));return m.jsx(dge,{value:g,children:m.jsx(Pge,{children:h})})}function X6e({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,fitViewOptions:l,minZoom:f,maxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h}){return T.useContext(K9)?m.jsx(m.Fragment,{children:e}):m.jsx(tY,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,initialFitViewOptions:l,initialMinZoom:f,initialMaxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h,children:e})}const K6e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Y6e({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:l,onInit:f,onMove:c,onMoveStart:d,onMoveEnd:u,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:U,onClickConnectEnd:x,onNodeMouseEnter:v,onNodeMouseMove:E,onNodeMouseLeave:k,onNodeContextMenu:M,onNodeDoubleClick:S,onNodeDragStart:A,onNodeDrag:I,onNodeDragStop:R,onNodesDelete:D,onEdgesDelete:_,onDelete:P,onSelectionChange:$,onSelectionDragStart:L,onSelectionDrag:B,onSelectionDragStop:V,onSelectionContextMenu:z,onSelectionStart:G,onSelectionEnd:W,onBeforeDelete:F,connectionMode:K,connectionLineType:q=eu.Bezier,connectionLineStyle:Y,connectionLineComponent:ae,connectionLineContainerStyle:ge,deleteKeyCode:he="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:ie=!1,selectionMode:we=G2.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:_e=K2()?"Meta":"Control",zoomActivationKeyCode:Fe=K2()?"Meta":"Control",snapToGrid:He,snapGrid:ve,onlyRenderVisibleElements:De=!1,selectNodesOnDrag:Ae,nodesDraggable:ut,autoPanOnNodeFocus:Mt,nodesConnectable:qt,nodesFocusable:Kt,nodeOrigin:Zn=AK,edgesFocusable:Vi,edgesReconnectable:Ls,elementsSelectable:Os=!0,defaultViewport:Ti=kge,minZoom:ye=.5,maxZoom:Me=2,translateExtent:Ke=W2,preventScrolling:_t=!0,nodeExtent:Tt,defaultMarkerColor:Vn="#b1b1b7",zoomOnScroll:Ii=!0,zoomOnPinch:ti=!0,panOnScroll:Zt=!1,panOnScrollSpeed:$r=.5,panOnScrollMode:vn=_h.Free,zoomOnDoubleClick:wr=!0,panOnDrag:Hr=!0,onPaneClick:zo,onPaneMouseEnter:$o,onPaneMouseMove:gs,onPaneMouseLeave:js,onPaneScroll:ke,onPaneContextMenu:it,paneClickDistance:ze=1,nodeClickDistance:Yt=0,children:Sn,onReconnect:Ut,onReconnectStart:Rn,onReconnectEnd:Wi,onEdgeContextMenu:Gi,onEdgeDoubleClick:_a,onEdgeMouseEnter:cd,onEdgeMouseMove:Ho,onEdgeMouseLeave:Vo,reconnectRadius:go=10,onNodesChange:Pa,onEdgesChange:Rr,noDragClassName:qn="nodrag",noWheelClassName:Ni="nowheel",noPanClassName:Ln="nopan",fitView:Bc,fitViewOptions:c0,connectOnClick:c6,attributionPosition:jy,proOptions:By,defaultEdgeOptions:Fy,elevateNodesOnSelect:zy=!0,elevateEdgesOnSelect:h7=!1,disableKeyboardA11y:$y=!1,autoPanOnConnect:cr,autoPanOnNodeDrag:p7,autoPanSpeed:f6,connectionRadius:Hy,isValidConnection:R1,onError:m7,style:Vy,id:f0,nodeDragThreshold:Wo,connectionDragThreshold:g7,viewport:bo,onViewportChange:b7,width:y7,height:U7,colorMode:_1="light",debug:P1,onScroll:Rl,ariaLabelConfig:D1,zIndexMode:Wy="basic",...x7},d6){const L1=f0||"1",u6=Mge(_1),d0=T.useCallback(Gy=>{Gy.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Rl==null||Rl(Gy)},[Rl]);return m.jsx("div",{"data-testid":"rf__wrapper",...x7,onScroll:d0,style:{...Vy,...K6e},ref:d6,className:ei(["react-flow",i,u6]),id:f0,role:"application",children:m.jsxs(X6e,{nodes:e,edges:t,width:y7,height:U7,fitView:Bc,fitViewOptions:c0,minZoom:ye,maxZoom:Me,nodeOrigin:Zn,nodeExtent:Tt,zIndexMode:Wy,children:[m.jsx(W6e,{onInit:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:E,onNodeMouseLeave:k,onNodeContextMenu:M,onNodeDoubleClick:S,nodeTypes:s,edgeTypes:o,connectionLineType:q,connectionLineStyle:Y,connectionLineComponent:ae,connectionLineContainerStyle:ge,selectionKeyCode:ce,selectionOnDrag:ie,selectionMode:we,deleteKeyCode:he,multiSelectionKeyCode:_e,panActivationKeyCode:Ee,zoomActivationKeyCode:Fe,onlyRenderVisibleElements:De,defaultViewport:Ti,translateExtent:Ke,minZoom:ye,maxZoom:Me,preventScrolling:_t,zoomOnScroll:Ii,zoomOnPinch:ti,zoomOnDoubleClick:wr,panOnScroll:Zt,panOnScrollSpeed:$r,panOnScrollMode:vn,panOnDrag:Hr,onPaneClick:zo,onPaneMouseEnter:$o,onPaneMouseMove:gs,onPaneMouseLeave:js,onPaneScroll:ke,onPaneContextMenu:it,paneClickDistance:ze,nodeClickDistance:Yt,onSelectionContextMenu:z,onSelectionStart:G,onSelectionEnd:W,onReconnect:Ut,onReconnectStart:Rn,onReconnectEnd:Wi,onEdgeContextMenu:Gi,onEdgeDoubleClick:_a,onEdgeMouseEnter:cd,onEdgeMouseMove:Ho,onEdgeMouseLeave:Vo,reconnectRadius:go,defaultMarkerColor:Vn,noDragClassName:qn,noWheelClassName:Ni,noPanClassName:Ln,rfId:L1,disableKeyboardA11y:$y,nodeExtent:Tt,viewport:bo,onViewportChange:b7}),m.jsx(Age,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:U,onClickConnectEnd:x,nodesDraggable:ut,autoPanOnNodeFocus:Mt,nodesConnectable:qt,nodesFocusable:Kt,edgesFocusable:Vi,edgesReconnectable:Ls,elementsSelectable:Os,elevateNodesOnSelect:zy,elevateEdgesOnSelect:h7,minZoom:ye,maxZoom:Me,nodeExtent:Tt,onNodesChange:Pa,onEdgesChange:Rr,snapToGrid:He,snapGrid:ve,connectionMode:K,translateExtent:Ke,connectOnClick:c6,defaultEdgeOptions:Fy,fitView:Bc,fitViewOptions:c0,onNodesDelete:D,onEdgesDelete:_,onDelete:P,onNodeDragStart:A,onNodeDrag:I,onNodeDragStop:R,onSelectionDrag:B,onSelectionDragStart:L,onSelectionDragStop:V,onMove:c,onMoveStart:d,onMoveEnd:u,noPanClassName:Ln,nodeOrigin:Zn,rfId:L1,autoPanOnConnect:cr,autoPanOnNodeDrag:p7,autoPanSpeed:f6,onError:m7,connectionRadius:Hy,isValidConnection:R1,selectNodesOnDrag:Ae,nodeDragThreshold:Wo,connectionDragThreshold:g7,onBeforeDelete:F,debug:P1,ariaLabelConfig:D1,zIndexMode:Wy}),m.jsx(Ege,{onSelectionChange:$}),Sn,m.jsx(yge,{proOptions:By,position:jy}),m.jsx(bge,{rfId:L1,disableKeyboardA11y:$y})]})})}var Z6e=NK(Y6e);function q6e(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(s=>TK(i,s)),[]);return[t,n,r]}function Q6e(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(s=>IK(i,s)),[]);return[t,n,r]}function J6e({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ei(["react-flow__background-pattern",n,r])})}function e5e({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:ei(["react-flow__background-pattern","dots",t])})}var Nu;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Nu||(Nu={}));const t5e={[Nu.Dots]:1,[Nu.Lines]:1,[Nu.Cross]:6},n5e=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function nY({id:e,variant:t=Nu.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:l,className:f,patternClassName:c}){const d=T.useRef(null),{transform:u,patternId:h}=rn(n5e,ar),g=r||t5e[t],y=t===Nu.Dots,U=t===Nu.Cross,x=Array.isArray(n)?n:[n,n],v=[x[0]*u[2]||1,x[1]*u[2]||1],E=g*u[2],k=Array.isArray(s)?s:[s,s],M=U?[E,E]:v,S=[k[0]*u[2]||1+M[0]/2,k[1]*u[2]||1+M[1]/2],A=`${h}${e||""}`;return m.jsxs("svg",{className:ei(["react-flow__background",f]),style:{...l,...q9,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:d,"data-testid":"rf__background",children:[m.jsx("pattern",{id:A,x:u[0]%v[0],y:u[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`,children:y?m.jsx(e5e,{radius:E/2,className:c}):m.jsx(J6e,{dimensions:M,lineWidth:i,variant:t,className:c})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${A})`})]})}nY.displayName="Background";const r5e=T.memo(nY);function i5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function s5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function o5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function a5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function l5e(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function uU({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:ei(["react-flow__controls-button",t]),...n,children:e})}const c5e=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function rY({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:f,children:c,position:d="bottom-left",orientation:u="vertical","aria-label":h}){const g=lr(),{isInteractive:y,minZoomReached:U,maxZoomReached:x,ariaLabelConfig:v}=rn(c5e,ar),{zoomIn:E,zoomOut:k,fitView:M}=Z9(),S=()=>{E(),s==null||s()},A=()=>{k(),o==null||o()},I=()=>{M(i),a==null||a()},R=()=>{g.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)},D=u==="horizontal"?"horizontal":"vertical";return m.jsxs(Y9,{className:ei(["react-flow__controls",D,f]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??v["controls.ariaLabel"],children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(uU,{onClick:S,className:"react-flow__controls-zoomin",title:v["controls.zoomIn.ariaLabel"],"aria-label":v["controls.zoomIn.ariaLabel"],disabled:x,children:m.jsx(i5e,{})}),m.jsx(uU,{onClick:A,className:"react-flow__controls-zoomout",title:v["controls.zoomOut.ariaLabel"],"aria-label":v["controls.zoomOut.ariaLabel"],disabled:U,children:m.jsx(s5e,{})})]}),n&&m.jsx(uU,{className:"react-flow__controls-fitview",onClick:I,title:v["controls.fitView.ariaLabel"],"aria-label":v["controls.fitView.ariaLabel"],children:m.jsx(o5e,{})}),r&&m.jsx(uU,{className:"react-flow__controls-interactive",onClick:R,title:v["controls.interactive.ariaLabel"],"aria-label":v["controls.interactive.ariaLabel"],children:y?m.jsx(l5e,{}):m.jsx(a5e,{})}),c]})}rY.displayName="Controls";T.memo(rY);function f5e({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:f,borderRadius:c,shapeRendering:d,selected:u,onClick:h}){const{background:g,backgroundColor:y}=s||{},U=o||g||y;return m.jsx("rect",{className:ei(["react-flow__minimap-node",{selected:u},f]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:U,stroke:a,strokeWidth:l},shapeRendering:d,onClick:h?x=>h(x,e):void 0})}const d5e=T.memo(f5e),u5e=e=>e.nodes.map(t=>t.id),PE=e=>e instanceof Function?e:()=>e;function h5e({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=d5e,onClick:o}){const a=rn(u5e,ar),l=PE(t),f=PE(e),c=PE(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:a.map(u=>m.jsx(m5e,{id:u,nodeColorFunc:l,nodeStrokeColorFunc:f,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:d},u))})}function p5e({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:l}){const{node:f,x:c,y:d,width:u,height:h}=rn(g=>{const y=g.nodeLookup.get(e);if(!y)return{node:void 0,x:0,y:0,width:0,height:0};const U=y.internals.userNode,{x,y:v}=y.internals.positionAbsolute,{width:E,height:k}=nd(U);return{node:U,x,y:v,width:E,height:k}},ar);return!f||f.hidden||!QX(f)?null:m.jsx(a,{x:c,y:d,width:u,height:h,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:l,id:f.id})}const m5e=T.memo(p5e);var g5e=T.memo(h5e);const b5e=200,y5e=150,U5e=e=>!e.hidden,x5e=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?qX(oy(e.nodeLookup,{filter:U5e}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},w5e="react-flow__minimap-desc";function iY({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:l,maskColor:f,maskStrokeColor:c,maskStrokeWidth:d,position:u="bottom-right",onClick:h,onNodeClick:g,pannable:y=!1,zoomable:U=!1,ariaLabel:x,inversePan:v,zoomStep:E=1,offsetScale:k=5}){const M=lr(),S=T.useRef(null),{boundingRect:A,viewBB:I,rfId:R,panZoom:D,translateExtent:_,flowWidth:P,flowHeight:$,ariaLabelConfig:L}=rn(x5e,ar),B=(e==null?void 0:e.width)??b5e,V=(e==null?void 0:e.height)??y5e,z=A.width/B,G=A.height/V,W=Math.max(z,G),F=W*B,K=W*V,q=k*W,Y=A.x-(F-A.width)/2-q,ae=A.y-(K-A.height)/2-q,ge=F+q*2,he=K+q*2,ce=`${w5e}-${R}`,ie=T.useRef(0),we=T.useRef();ie.current=W,T.useEffect(()=>{if(S.current&&D)return we.current=Hme({domNode:S.current,panZoom:D,getTransform:()=>M.getState().transform,getViewScale:()=>ie.current}),()=>{var He;(He=we.current)==null||He.destroy()}},[D]),T.useEffect(()=>{var He;(He=we.current)==null||He.update({translateExtent:_,width:P,height:$,inversePan:v,pannable:y,zoomStep:E,zoomable:U})},[y,U,v,E,_,P,$]);const Ee=h?He=>{var Ae;const[ve,De]=((Ae=we.current)==null?void 0:Ae.pointer(He))||[0,0];h(He,{x:ve,y:De})}:void 0,_e=g?T.useCallback((He,ve)=>{const De=M.getState().nodeLookup.get(ve).internals.userNode;g(He,De)},[]):void 0,Fe=x??L["minimap.ariaLabel"];return m.jsx(Y9,{position:u,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*W:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:ei(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:B,height:V,viewBox:`${Y} ${ae} ${ge} ${he}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:S,onClick:Ee,children:[Fe&&m.jsx("title",{id:ce,children:Fe}),m.jsx(g5e,{onClick:_e,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${Y-q},${ae-q}h${ge+q*2}v${he+q*2}h${-ge-q*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}iY.displayName="MiniMap";T.memo(iY);const v5e=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,E5e={[Ug.Line]:"right",[Ug.Handle]:"bottom-right"};function k5e({nodeId:e,position:t,variant:n=Ug.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:f=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:u,autoScale:h=!0,shouldResize:g,onResizeStart:y,onResize:U,onResizeEnd:x}){const v=DK(),E=typeof e=="string"?e:v,k=lr(),M=T.useRef(null),S=n===Ug.Handle,A=rn(T.useCallback(v5e(S&&h),[S,h]),ar),I=T.useRef(null),R=t??E5e[n];T.useEffect(()=>{if(!(!M.current||!E))return I.current||(I.current=rge({domNode:M.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:_,transform:P,snapGrid:$,snapToGrid:L,nodeOrigin:B,domNode:V}=k.getState();return{nodeLookup:_,transform:P,snapGrid:$,snapToGrid:L,nodeOrigin:B,paneDomNode:V}},onChange:(_,P)=>{const{triggerNodeChanges:$,nodeLookup:L,parentLookup:B,nodeOrigin:V}=k.getState(),z=[],G={x:_.x,y:_.y},W=L.get(E);if(W&&W.expandParent&&W.parentId){const F=W.origin??V,K=_.width??W.measured.width??0,q=_.height??W.measured.height??0,Y={id:W.id,parentId:W.parentId,rect:{width:K,height:q,...JX({x:_.x??W.position.x,y:_.y??W.position.y},{width:K,height:q},W.parentId,L,F)}},ae=DT([Y],L,B,V);z.push(...ae),G.x=_.x?Math.max(F[0]*K,_.x):void 0,G.y=_.y?Math.max(F[1]*q,_.y):void 0}if(G.x!==void 0&&G.y!==void 0){const F={id:E,type:"position",position:{...G}};z.push(F)}if(_.width!==void 0&&_.height!==void 0){const K={id:E,type:"dimensions",resizing:!0,setAttributes:u?u==="horizontal"?"width":"height":!0,dimensions:{width:_.width,height:_.height}};z.push(K)}for(const F of P){const K={...F,type:"position"};z.push(K)}$(z)},onEnd:({width:_,height:P})=>{const $={id:E,type:"dimensions",resizing:!1,dimensions:{width:_,height:P}};k.getState().triggerNodeChanges([$])}})),I.current.update({controlPosition:R,boundaries:{minWidth:a,minHeight:l,maxWidth:f,maxHeight:c},keepAspectRatio:d,resizeDirection:u,onResizeStart:y,onResize:U,onResizeEnd:x,shouldResize:g}),()=>{var _;(_=I.current)==null||_.destroy()}},[R,a,l,f,c,d,y,U,x,g]);const D=R.split("-");return m.jsx("div",{className:ei(["react-flow__resize-control","nodrag",...D,n,r]),ref:M,style:{...i,scale:A,...o&&{[S?"backgroundColor":"borderColor"]:o}},children:s})}T.memo(k5e);const Jn="/api",Ir={async getThreads(){const e=await fetch(`${Jn}/threads`);if(!e.ok)throw new Error("Failed to fetch threads");return e.json()},async createThread({title:e,description:t,content:n,metadata:r}){const i=await fetch(`${Jn}/threads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:t,content:n,metadata:r})});if(!i.ok)throw new Error("Failed to create thread");return i.json()},async searchThreads(e){const t=await fetch(`${Jn}/threads/search?query=${encodeURIComponent(e)}`);if(!t.ok)throw new Error("Failed to search threads");return t.json()},async generateThread(e){const t=await fetch(`${Jn}/threads/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:e})});if(!t.ok)throw new Error("Failed to generate thread");return t.json()},async getThreadNodes(e){const t=await fetch(`${Jn}/threads/${e}/nodes`);if(!t.ok)throw new Error("Failed to fetch nodes");return t.json()},async createNode({threadId:e,title:t,content:n,nodeType:r,parentId:i,metadata:s}){console.log("API createNode request:",{threadId:e,title:t,content:n,nodeType:r,parentId:i,metadata:s});const o=await fetch(`${Jn}/threads/${e}/nodes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,content:n,nodeType:r,parentId:i,metadata:s})});if(!o.ok)throw new Error("Failed to create node");const a=await o.json();return console.log("API createNode response:",a),a},async createEdge({sourceId:e,targetId:t,relationshipType:n,metadata:r}){const i=await fetch(`${Jn}/edges`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceId:e,targetId:t,relationshipType:n,metadata:r})});if(!i.ok)throw new Error("Failed to create edge");return i.json()},async saveThreadLayout(e,t){const n=await fetch(`${Jn}/threads/${e}/layout`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout:t})});if(!n.ok)throw new Error("Failed to save thread layout");return n.json()},async loadThreadLayout(e){const t=await fetch(`${Jn}/threads/${e}/layout`);if(!t.ok)throw new Error("Failed to load thread layout");return t.json()},async deleteThreadLayout(e){const t=await fetch(`${Jn}/threads/${e}/layout`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete thread layout");return t.json()},async saveThreadCanvas(e,t){const n=await fetch(`${Jn}/threads/${e}/canvas`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({canvas:t})});if(!n.ok)throw new Error(`Failed to save thread canvas: ${n.status}`);return n.json()},async loadThreadCanvas(e){const t=await fetch(`${Jn}/threads/${e}/canvas`);return t.ok?t.json():null},async deleteThreadCanvas(e){const t=await fetch(`${Jn}/threads/${e}/canvas`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete thread canvas");return t.json()},async updateThreadContent(e,t){const n=await fetch(`${Jn}/threads/${e}/content`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})});if(!n.ok)throw new Error("Failed to update thread content");return n.json()},async saveArticleSequence(e,t){const n=await fetch(`${Jn}/threads/${e}/sequence`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sequence:t})});if(!n.ok)throw new Error("Failed to save article sequence");return n.json()},async loadArticleSequence(e){const t=await fetch(`${Jn}/threads/${e}/sequence`);return!t.ok||!(t.headers.get("content-type")||"").includes("application/json")?null:t.json()},async deleteArticleSequence(e){const t=await fetch(`${Jn}/threads/${e}/sequence`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete article sequence");return t.json()},async updateNode(e,t,{title:n,content:r}){const i=await fetch(`${Jn}/threads/${e}/nodes/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,content:r})});if(!i.ok)throw new Error("Failed to update node");return i.json()},async chatStream({message:e,history:t,threadId:n,apiKey:r,nodeContext:i,onToken:s,onProcessing:o,onDone:a,onError:l}){const f=await fetch(`${Jn}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,history:t,threadId:n,apiKey:r,nodeContext:i})});if(!f.ok){const h=await f.json().catch(()=>({}));throw new Error(h.error||"Chat request failed")}const c=f.body.getReader(),d=new TextDecoder;let u="";for(;;){const{done:h,value:g}=await c.read();if(h)break;u+=d.decode(g,{stream:!0});const y=u.split(`
`);u=y.pop();for(const U of y)if(U.startsWith("data: "))try{const x=JSON.parse(U.slice(6));x.type==="token"?s==null||s(x.content):x.type==="processing"?o==null||o():x.type==="done"?setTimeout(()=>a==null?void 0:a(x),0):x.type==="error"&&(l==null||l(new Error(x.error)))}catch{}}},async getThreadChats(e){const t=await fetch(`${Jn}/threads/${e}/chats`);if(!t.ok)throw new Error("Failed to fetch chats");return t.json()},async getChat(e){const t=await fetch(`${Jn}/chats/${e}`);if(!t.ok)throw new Error("Failed to fetch chat");return t.json()},async createChat({threadId:e,title:t,messages:n}){const r=await fetch(`${Jn}/chats`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:e,title:t,messages:n})});if(!r.ok)throw new Error("Failed to create chat");return r.json()},async updateChat(e,{title:t,messages:n}){const r=await fetch(`${Jn}/chats/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,messages:n})});if(!r.ok)throw new Error("Failed to update chat");return r.json()},async generateNodeSuggestions({nodeId:e,nodeType:t,content:n,title:r}){const i=await fetch(`${Jn}/nodes/suggest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nodeId:e,nodeType:t,content:n,title:r})});if(!i.ok)throw new Error("Failed to generate suggestions");return i.json()}},S0=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],q6={ROOT:"#ffd700",EVIDENCE:"#ff6b6b",REFERENCE:"#4ecdc4",CONTEXT:"#45b7d1",EXAMPLE:"#96ceb4",COUNTERPOINT:"#ff7f50",SYNTHESIS:"#9b59b6",thread:"#00ff9d"};function S5e({data:e}){const t=e.nodeColor||"#666",n=e.isThread,r=n?25:15,i=e.isMatteMode?"matte":"";return m.jsxs("div",{className:`graph-node ${i} ${n?"thread-node":""}`,style:{position:"relative",width:r*2,height:r*2},children:[m.jsx(da,{type:"target",position:lt.Top,id:"t-top",style:{opacity:0,pointerEvents:"none"}}),m.jsx(da,{type:"target",position:lt.Bottom,id:"t-bottom",style:{opacity:0,pointerEvents:"none"}}),m.jsx(da,{type:"target",position:lt.Left,id:"t-left",style:{opacity:0,pointerEvents:"none"}}),m.jsx(da,{type:"target",position:lt.Right,id:"t-right",style:{opacity:0,pointerEvents:"none"}}),m.jsx(da,{type:"source",position:lt.Top,id:"s-top",style:{opacity:0,pointerEvents:"none"}}),m.jsx(da,{type:"source",position:lt.Bottom,id:"s-bottom",style:{opacity:0,pointerEvents:"none"}}),m.jsx(da,{type:"source",position:lt.Left,id:"s-left",style:{opacity:0,pointerEvents:"none"}}),m.jsx(da,{type:"source",position:lt.Right,id:"s-right",style:{opacity:0,pointerEvents:"none"}}),m.jsx("div",{className:"graph-node-circle",style:{width:r*2,height:r*2,borderRadius:"50%",background:t,border:"2px solid #fff",cursor:"pointer"}}),m.jsx("div",{className:"graph-node-label",children:e.label})]})}const C5e={graphNode:S5e},A5e=({threads:e,onNodeClick:t,onAddNode:n,onOpenEditor:r,onSelectedNodeChange:i,loading:s})=>{var Ee,_e,Fe,He;const[o,a,l]=q6e([]),[f,c,d]=Q6e([]),[u,h]=T.useState(null),[g,y]=T.useState(!0),[U,x]=T.useState(!0),[v,E]=T.useState(!0),[k,M]=T.useState(!1),[S,A]=T.useState(!1),[I,R]=T.useState(null),{fitView:D}=Z9();T.useEffect(()=>{s!==void 0&&y(s)},[s]);function _(ve,De){const Ae=De.x-ve.x,ut=De.y-ve.y;return Math.abs(Ae)>Math.abs(ut)?Ae>0?{sourceHandle:"s-right",targetHandle:"t-left"}:{sourceHandle:"s-left",targetHandle:"t-right"}:ut>0?{sourceHandle:"s-bottom",targetHandle:"t-top"}:{sourceHandle:"s-top",targetHandle:"t-bottom"}}const P=T.useRef(null),$=T.useRef(null),L=T.useRef(!1);T.useEffect(()=>{if(!e||e.length===0)return;const ve=e[0].id;$.current===ve&&P.current||($.current=ve,L.current=!1,(async()=>{var De;try{const Ae=await Ir.loadThreadLayout(ve);P.current=Ae,((De=Ae==null?void 0:Ae.settings)==null?void 0:De.isMatteMode)!==void 0&&x(Ae.settings.isMatteMode),B(e,Ae)}catch{P.current=null,B(e,null)}L.current||(L.current=!0,setTimeout(()=>D({padding:.2}),50))})())},[e]);const B=T.useCallback((ve,De)=>{if(!ve||ve.length===0)return;const Ae={};o.forEach(Kt=>{Ae[Kt.id]=Kt.position});const ut=[],Mt=[];let qt=0;ve.forEach(Kt=>{var _t,Tt,Vn,Ii,ti;const Zn=((_t=Kt.metadata)==null?void 0:_t.title)||Kt.title||`Thread ${Kt.id}`,Vi=(Zn||"").split(/\s+/),Ls=Vi.length>2?Vi.slice(0,2).join(" ")+"...":Zn,Os=`thread-${Kt.id}`,Ti=(Tt=De==null?void 0:De.nodes)==null?void 0:Tt[Os],ye=Ae[Os];ut.push({id:Os,type:"graphNode",position:Ti?{x:Ti.x,y:Ti.y}:ye||{x:400,y:300+qt},data:{label:Ls,isThread:!0,nodeColor:q6.thread,isMatteMode:U,originalData:{...Kt,type:"thread",title:Zn,metadata:{...Kt.metadata,title:Zn}}},draggable:!0});const Me=((Vn=Kt.nodes)==null?void 0:Vn.length)||0;(Ii=Kt.nodes)==null||Ii.forEach((Zt,$r)=>{var Sn;const vn=typeof Zt.type=="number"?Zt.type:S0.indexOf(Zt.node_type),wr=S0[vn]||"",Hr=q6[wr]||"#666";let zo=Zt.content;try{typeof Zt.content=="string"&&(Zt.content.startsWith("{")||Zt.content.startsWith("["))&&(zo=JSON.parse(Zt.content))}catch{}const $o=`node-${Zt.id}`,gs=(Sn=De==null?void 0:De.nodes)==null?void 0:Sn[$o],js=Ae[$o];let ke;if(gs)ke={x:gs.x,y:gs.y};else if(js)ke=js;else{const Ut=2*Math.PI*$r/Math.max(Me,1)-Math.PI/2,Rn=180;ke={x:400+Rn*Math.cos(Ut),y:300+qt+Rn*Math.sin(Ut)}}const it=wr==="ROOT",ze=Zt.parent_id?`node-${Zt.parent_id}`:null,Yt=it&&Zt.title?Zt.title.split(/\s+/).slice(0,3).join(" ")+(Zt.title.split(/\s+/).length>3?"":""):wr;ut.push({id:$o,type:"graphNode",position:ke,data:{label:Yt,isThread:!1,isRoot:it,parentRfId:ze,nodeColor:Hr,isMatteMode:U,originalData:{...Zt,type:vn,content:zo}},draggable:!0})});const Ke={};ut.forEach(Zt=>{Ke[Zt.id]=Zt.position}),(ti=Kt.nodes)==null||ti.forEach(Zt=>{let $r,vn;vn=`node-${Zt.id}`,Zt.parent_id?$r=Kt.nodes.some(zo=>zo.id===Zt.parent_id)?`node-${Zt.parent_id}`:`thread-${Kt.id}`:$r=`thread-${Kt.id}`;const wr=_(Ke[$r]||{x:0,y:0},Ke[vn]||{x:0,y:0});Mt.push({id:`e-${$r}-${vn}`,source:$r,target:vn,sourceHandle:wr.sourceHandle,targetHandle:wr.targetHandle,style:{stroke:"rgba(0, 255, 157, 0.3)",strokeWidth:2},animated:!1})})}),a(ut),c(Mt),y(!1)},[o,U]);T.useEffect(()=>{if(!e||e.length===0)return;const ve=e[0].id;$.current===ve&&P.current!==void 0&&B(e,P.current)},[e]),T.useEffect(()=>{a(ve=>ve.map(De=>({...De,data:{...De.data,isMatteMode:U}})))},[U]);const V=T.useMemo(()=>o.map(ve=>{if(ve.id.startsWith("thread-")||ve.data.isRoot)return{...ve,hidden:!1};if(S)return{...ve,hidden:!1};const De=I!==null&&ve.data.parentRfId===I;return{...ve,hidden:!De}}),[o,S,I]),z=T.useMemo(()=>f.map(ve=>S?{...ve,hidden:!1}:ve.source.startsWith("thread-")?{...ve,hidden:!1}:I!==null&&ve.source===I?{...ve,hidden:!1}:{...ve,hidden:!0}),[f,S,I]),G=T.useCallback(ve=>{h(ve),i&&i((ve==null?void 0:ve.type)==="thread"?null:(ve==null?void 0:ve.id)??null)},[i]),W=T.useCallback((ve,De)=>{G(De.data.originalData)},[G]),F=()=>{h(null),i&&i(null)},K=ve=>{if(!e.length)return[];const De=e[0];if(ve.startsWith("thread-"))return(De.nodes||[]).filter(Ae=>!Ae.parent_id);{const Ae=parseInt(ve.replace("node-",""));return(De.nodes||[]).filter(ut=>ut.parent_id===Ae)}},q=ve=>{G(ve)},Y=ve=>ve==="thread"?q6.thread:q6[S0[ve]]||"#666",ae=T.useRef(null),ge=T.useCallback(async()=>{if(!e||e.length===0)return;const ve=e[0].id,De={nodes:{},settings:{isMatteMode:U}};o.forEach(Ae=>{De.nodes[Ae.id]={x:Ae.position.x,y:Ae.position.y}}),P.current=De;try{M(!0),await Ir.saveThreadLayout(ve,De)}catch(Ae){console.error("Failed to save layout:",Ae)}finally{M(!1)}},[e,o,U]),he=T.useCallback(()=>{ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>{ge()},500)},[ge]),ce=async()=>{if(!e||e.length===0)return;const ve=e[0].id;try{M(!0),await Ir.deleteThreadLayout(ve),a(De=>{const Ae=De.length-1;return De.map((ut,Mt)=>{if(ut.id.startsWith("thread-"))return{...ut,position:{x:400,y:300}};const qt=Mt-1,Kt=2*Math.PI*qt/Math.max(Ae,1)-Math.PI/2,Zn=180;return{...ut,position:{x:400+Zn*Math.cos(Kt),y:300+Zn*Math.sin(Kt)}}})})}catch(De){console.error("Failed to reset layout:",De)}finally{M(!1)}},ie=ve=>{if(!ve)return null;const De=String(ve);return/<[a-z][\s\S]*>/i.test(De)?m.jsx("span",{dangerouslySetInnerHTML:{__html:De}}):De},we=(ve,De)=>{if(!ve)return"No content available";try{let Ae=ve.content||ve;if(typeof Ae=="string"&&(Ae.startsWith("{")||Ae.startsWith("[")))try{Ae=JSON.parse(Ae)}catch{}if(["ROOT","EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(De)){const Mt=typeof Ae=="object"?Ae:typeof Ae=="string"&&Ae.startsWith("{")?JSON.parse(Ae):null;if(Mt)switch(De){case"ROOT":return m.jsxs("div",{className:"root-content",children:[m.jsx("h4",{className:"root-title",children:ie(Mt.title)}),m.jsx("div",{className:"root-description",children:ie(Mt.description)}),Mt.keywords&&m.jsxs("div",{className:"root-keywords",children:[m.jsx("strong",{children:"Keywords: "}),Array.isArray(Mt.keywords)?Mt.keywords.join(", "):ie(Mt.keywords)]})]});case"EVIDENCE":return m.jsxs("div",{className:"evidence-content",children:[m.jsx("div",{className:"evidence-point",children:ie(Mt.point)}),m.jsx("p",{className:"evidence-source",children:m.jsxs("em",{children:["Source: ",ie(Mt.source)]})})]});case"EXAMPLE":return m.jsxs("div",{className:"example-content",children:[m.jsx("h4",{className:"example-title",children:ie(Mt.title)}),m.jsx("div",{className:"example-description",children:ie(Mt.description)})]});case"COUNTERPOINT":return m.jsxs("div",{className:"counterpoint-content",children:[m.jsx("h4",{className:"counterpoint-argument",children:ie(Mt.argument)}),m.jsx("div",{className:"counterpoint-explanation",children:ie(Mt.explanation)})]})}}const ut=typeof Ae=="object"?JSON.stringify(Ae,null,2):String(Ae);return/<[a-z][\s\S]*>/i.test(ut)?m.jsx("div",{dangerouslySetInnerHTML:{__html:ut}}):ut.split(`
`).map((Mt,qt)=>m.jsx("p",{className:"content-paragraph",children:Mt},qt))}catch{return"Error displaying content"}};return m.jsxs("div",{className:`thread-graph ${U?"matte":""}`,children:[m.jsxs("div",{className:`graph-container ${u?"with-sidebar":""}`,children:[m.jsx(Z6e,{nodes:V,edges:z,onNodesChange:l,onEdgesChange:d,onNodeClick:W,onNodeDragStop:he,onNodeMouseEnter:(ve,De)=>{!S&&De.data.isRoot&&R(De.id)},onNodeMouseLeave:()=>R(null),nodeTypes:C5e,minZoom:.3,maxZoom:2,proOptions:{hideAttribution:!0},style:{background:"#1d1d1d"},children:m.jsx(r5e,{variant:v?"dots":"lines",gap:v?40:0,size:v?1:0,color:v?"rgba(255, 255, 255, 0.08)":"transparent"})}),g&&m.jsx("div",{className:"loading-overlay",children:m.jsx("div",{className:"loading-spinner"})}),m.jsxs("div",{className:"bottom-right-controls",children:[m.jsx("button",{className:`control-button ${S?"active":""}`,onClick:()=>A(ve=>!ve),title:S?"Hide secondary nodes (show roots only)":"Show all secondary nodes",children:S?"All":"Roots"}),m.jsx("button",{className:`control-button ${U?"active":""}`,onClick:()=>x(!U),title:U?"Switch to Glossy mode":"Switch to Matte mode",children:"M"}),m.jsx("button",{className:`control-button ${v?"active":""}`,onClick:()=>E(!v),title:v?"Switch to solid background":"Switch to dotted background",children:"D"}),m.jsx("button",{className:"control-button",onClick:()=>D({padding:.2,duration:300}),title:"Fit view",children:"F"}),m.jsx("button",{className:"control-button",onClick:ce,disabled:k,title:"Reset layout",children:"R"})]})]}),m.jsx("div",{className:`content-sidebar ${u?"open":""}`,children:u&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"content-sidebar-header",children:[u.type!=="thread"&&m.jsx("button",{className:"back-button",onClick:()=>{var De;if(u.parent_id){const Ae=e[0].nodes.find(ut=>ut.id===u.parent_id);if(Ae){G(Ae);return}}const ve=e[0];G({...ve,type:"thread",metadata:{...ve.metadata,title:((De=ve.metadata)==null?void 0:De.title)||ve.title||`Thread ${ve.id}`}})},"aria-label":"Back to parent",children:""}),m.jsx("h2",{children:u.type==="thread"?((_e=(Ee=u.originalData)==null?void 0:Ee.metadata)==null?void 0:_e.title)||((Fe=u.originalData)==null?void 0:Fe.title)||u.title||`Thread ${u.id}`:((He=u.metadata)==null?void 0:He.title)||u.title||`Node ${u.id}`}),m.jsxs("div",{className:"header-actions",children:[m.jsx("button",{className:"add-node-button",onClick:()=>r&&r(u),children:"Add Node"}),m.jsx("button",{className:"content-sidebar-close",onClick:F,children:""})]})]}),m.jsxs("div",{className:"content-sidebar-body",children:[m.jsxs("div",{className:"child-nodes-list",children:[m.jsx("h3",{children:"Connected Nodes"}),K(`${u.type==="thread"?"thread-":"node-"}${u.id}`).length>0?m.jsx("div",{className:"nodes-grid",children:K(`${u.type==="thread"?"thread-":"node-"}${u.id}`).map(ve=>{var De;return m.jsxs("div",{className:"node-card",onClick:()=>q(ve),children:[m.jsx("div",{className:"node-card-type",style:{backgroundColor:q6[S0[ve.type]]},children:S0[ve.type]}),m.jsx("div",{className:"node-card-title",children:((De=ve.metadata)==null?void 0:De.title)||`Node ${ve.id}`})]},ve.id)})}):m.jsx("p",{className:"no-nodes-message",children:"No nodes connected yet"})]}),m.jsxs("div",{className:"content-sidebar-metadata",children:[m.jsx("div",{className:"type-badge",style:{backgroundColor:Y(u.type)},children:u.type==="thread"?"THREAD":S0[u.type]}),m.jsxs("div",{className:"voting-stats",children:[m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Votes For:"}),m.jsx("span",{children:u.votesFor||"0"})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Votes Against:"}),m.jsx("span",{children:u.votesAgainst||"0"})]})]})]}),m.jsx("div",{className:"content-sidebar-content",children:we(u.content,u.type==="thread"?"thread":S0[u.type])})]})]})})]})},M5e=({node:e,onClose:t,onVote:n,onCreateProposal:r,onAddNode:i,loading:s,voteAmount:o,setVoteAmount:a})=>{T.useState(!1);const l=(c,d)=>{try{return d==="EVIDENCE"&&c.startsWith("{")&&JSON.parse(c).source||c}catch{return c}},f=(c,d)=>{if(!c)return console.log("No content provided for node type:",d),"No content available";console.log("Formatting content for node type:",d),console.log("Raw content:",c),console.log("Content type:",typeof c);let u=c.content||c;if(typeof u=="string"&&(u.startsWith("{")||u.startsWith("[")))try{u=JSON.parse(u)}catch(h){console.log("Failed to parse JSON content:",h)}try{if(["EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(d)){const g=typeof u=="object"?u:typeof u=="string"&&u.startsWith("{")?JSON.parse(u):null;if(g)switch(d){case"EVIDENCE":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"evidence-content",children:[m.jsx("p",{className:"evidence-point",children:g.point}),m.jsx("p",{className:"evidence-source",children:m.jsxs("em",{children:["Source: ",g.source]})})]})});case"EXAMPLE":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"example-content",children:[m.jsx("h4",{className:"example-title",children:g.title}),m.jsx("p",{className:"example-description",children:g.description})]})});case"COUNTERPOINT":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"counterpoint-content",children:[m.jsx("h4",{className:"counterpoint-argument",children:g.argument}),m.jsx("p",{className:"counterpoint-explanation",children:g.explanation})]})})}}if(["SYNTHESIS","CONTEXT"].includes(d)){const g=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:g.split(`
`).map((y,U)=>m.jsx("p",{className:"content-paragraph",children:y},U))})}const h=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:h})}catch(h){console.error("Error formatting content:",h);const g=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:g.split(`
`).map((y,U)=>m.jsx("p",{className:"content-paragraph",children:y},U))})}};return m.jsx("div",{className:"modal-overlay",onClick:t,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsxs("div",{className:"modal-title",children:[m.jsx("h3",{children:l(e.title,e.node_type)}),m.jsx("div",{className:"node-type-badge",children:e.node_type})]}),m.jsx("button",{className:"close-button",onClick:t,children:""})]}),m.jsx("div",{className:"modal-body",children:m.jsx("div",{className:"node-content",children:f(e.content,e.node_type)})})]})})};var sY=yK();function Di(e){this.content=e}Di.prototype={constructor:Di,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Di(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Di(n)},addToStart:function(e,t){return new Di([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Di(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Di(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Di.from(e),e.size?new Di(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Di.from(e),e.size?new Di(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Di.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Di.from=function(e){if(e instanceof Di)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Di(t)};function oY(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=oY(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function aY(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let f=0,c=Math.min(o.text.length,a.text.length);for(;f<c&&o.text[o.text.length-f-1]==a.text[a.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let f=aY(o.content,a.content,n-1,r-1);if(f)return f}n-=l,r-=l}}class Ie{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],f=a+l.nodeSize;if(f>t&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,i+c)}a=f}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(a,l)=>{let f=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&f||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=f},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new Ie(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ie(r,i)}cutByIndex(t,n){return t==n?Ie.empty:t==0&&n==this.content.length?this:new Ie(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new Ie(i,s)}addToStart(t){return new Ie([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Ie(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return oY(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return aY(this,t,n,r)}findIndex(t){if(t==0)return hU(0,t);if(t==this.size)return hU(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?hU(n+1,s):hU(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Ie.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ie(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Ie.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ie(n||t,r)}static from(t){if(!t)return Ie.empty;if(t instanceof Ie)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Ie([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ie.empty=new Ie([],0);const DE={index:0,offset:0};function hU(e,t){return DE.index=e,DE.offset=t,DE}function Ix(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Ix(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Ix(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Dn=class zC{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Ix(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return zC.none;if(t instanceof zC)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Dn.none=[];class Nx extends Error{}class Qe{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=cY(this.content,t+this.openStart,n);return r&&new Qe(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Qe(lY(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Qe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Qe(Ie.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Qe(t,r,i)}}Qe.empty=new Qe(Ie.empty,0,0);function lY(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(i==t||s.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(lY(s.content,t-i-1,n-i-1)))}function cY(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=cY(o.content,t-s-1,n,o);return a&&e.replaceChild(i,o.copy(a))}function T5e(e,t,n){if(n.openStart>e.depth)throw new Nx("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Nx("Inconsistent open depths");return fY(e,t,n,0)}function fY(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=fY(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,a=o.content;return Dh(o,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=I5e(n,e);return Dh(s,uY(e,o,a,t,r))}else return Dh(s,Rx(e,t,r))}function dY(e,t){if(!t.type.compatibleContent(e.type))throw new Nx("Cannot join "+t.type.name+" onto "+e.type.name)}function $C(e,t,n){let r=e.node(n);return dY(r,t.node(n)),r}function Ph(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function J5(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Ph(e.nodeAfter,r),s++));for(let a=s;a<o;a++)Ph(i.child(a),r);t&&t.depth==n&&t.textOffset&&Ph(t.nodeBefore,r)}function Dh(e,t){return e.type.checkContent(t),e.copy(t)}function uY(e,t,n,r,i){let s=e.depth>i&&$C(e,t,i+1),o=r.depth>i&&$C(n,r,i+1),a=[];return J5(null,e,i,a),s&&o&&t.index(i)==n.index(i)?(dY(s,o),Ph(Dh(s,uY(e,t,n,r,i+1)),a)):(s&&Ph(Dh(s,Rx(e,t,i+1)),a),J5(t,n,i,a),o&&Ph(Dh(o,Rx(n,r,i+1)),a)),J5(r,null,i,a),new Ie(a)}function Rx(e,t,n){let r=[];if(J5(null,e,n,r),e.depth>n){let i=$C(e,t,n+1);Ph(Dh(i,Rx(e,t,n+1)),r)}return J5(t,null,n,r),new Ie(r)}function I5e(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(Ie.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Z2{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Dn.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new _x(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),f=s-l;if(r.push(o,a,i+l),!f||(o=o.child(a),o.isText))break;s=f-1,i+=l+1}return new Z2(n,r,s)}static resolveCached(t,n){let r=QO.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else QO.set(t,r=new N5e);let i=r.elts[r.i]=Z2.resolve(t,n);return r.i=(r.i+1)%R5e,i}}class N5e{constructor(){this.elts=[],this.i=0}}const R5e=12,QO=new WeakMap;class _x{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const _5e=Object.create(null);let Ru=class HC{constructor(t,n,r,i=Dn.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||Ie.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Ix(this.attrs,n||t.defaultAttrs||_5e)&&Dn.sameSet(this.marks,r||Dn.none)}copy(t=null){return t==this.content?this:new HC(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new HC(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Qe.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),f=i.node(o).content.cut(i.pos-a,s.pos-a);return new Qe(f,i.depth-o,s.depth-o)}replace(t,n,r){return T5e(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Z2.resolveCached(this,t)}resolveNoCache(t){return Z2.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),hY(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=Ie.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Dn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Dn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=Ie.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Ru.prototype.text=void 0;class Px extends Ru{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):hY(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Px(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Px(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function hY(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class t1{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new P5e(t,n);if(r.next==null)return t1.empty;let i=pY(r);r.next&&r.err("Unexpected trailing text");let s=z5e(F5e(i));return $5e(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(t,r);if(l&&(!n||l.validEnd))return Ie.from(a.map(f=>f.createAndFill()));for(let f=0;f<o.next.length;f++){let{type:c,next:d}=o.next[f];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let u=s(d,a.concat(c));if(u)return u}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}t1.empty=new t1(!0);class P5e{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function pY(e){let t=[];do t.push(D5e(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function D5e(e){let t=[];do t.push(L5e(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function L5e(e){let t=B5e(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=O5e(e,t);else break;return t}function JO(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function O5e(e,t){let n=JO(e),r=n;return e.eat(",")&&(e.next!="}"?r=JO(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function j5e(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function B5e(e){if(e.eat("(")){let t=pY(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=j5e(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function F5e(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,a,l){let f={term:l,to:a};return t[o].push(f),f}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,f)=>l.concat(s(f,a)),[]);if(o.type=="seq")for(let l=0;;l++){let f=s(o.exprs[l],a);if(l==o.exprs.length-1)return f;i(f,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let f=0;f<o.min;f++){let c=n();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let f=o.min;f<o.max;f++){let c=n();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function mY(e,t){return t-e}function ej(e,t){let n=[];return r(t),n.sort(mY);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function z5e(e){let t=Object.create(null);return n(ej(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:a,to:l})=>{if(!a)return;let f;for(let c=0;c<i.length;c++)i[c][0]==a&&(f=i[c][1]);ej(e,l).forEach(c=>{f||i.push([a,f=[]]),f.indexOf(c)==-1&&f.push(c)})})});let s=t[r.join(",")]=new t1(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(mY);s.next.push({type:i[o][0],next:t[a.join(",")]||n(a)})}return s}}function $5e(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:f}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function gY(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function bY(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function yY(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function UY(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new V5e(e,r,t[r]);return n}let tj=class xY{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=UY(t,r.attrs),this.defaultAttrs=gY(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==t1.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:bY(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ru(this,this.computeAttrs(t),Ie.from(n),Dn.setFrom(r))}createChecked(t=null,n,r){return n=Ie.from(n),this.checkContent(n),new Ru(this,this.computeAttrs(t),n,Dn.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=Ie.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ie.empty,!0);return s?new Ru(this,t,n.append(s),Dn.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){yY(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Dn.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new xY(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function H5e(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class V5e{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?H5e(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class J9{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=UY(t,i.attrs),this.excluded=null;let s=gY(this.attrs);this.instance=s?new Dn(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Dn(this,bY(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new J9(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){yY(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let wY=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Di.from(t.nodes),n.marks=Di.from(t.marks||{}),this.nodes=tj.compile(this.spec.nodes,this),this.marks=J9.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=t1.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?nj(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:nj(this,o.split(" "))}this.nodeFromJSON=i=>Ru.fromJSON(this,i),this.markFromJSON=i=>Dn.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof tj){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Px(r,r.defaultAttrs,t,Dn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function nj(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let a in e.marks){let l=e.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function W5e(e){return e.tag!=null}function G5e(e){return e.style!=null}let e2=class VC{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(W5e(i))this.tags.push(i);else if(G5e(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new ij(this,n,!1);return r.addAll(t,Dn.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new ij(this,n,!0);return r.addAll(t,Dn.none,n.from,n.to),Qe.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Y5e(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=sj(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=sj(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new VC(t,VC.schemaRules(t)))}};const vY={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},X5e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},EY={ol:!0,ul:!0},q2=1,WC=2,t2=4;function rj(e,t,n){return t!=null?(t?q2:0)|(t==="full"?WC:0):e&&e.whitespace=="pre"?q2|WC:n&~t2}class pU{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Dn.none,this.match=s||(o&t2?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ie.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&q2)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ie.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Ie.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!vY.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class ij{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=rj(null,n.preserveWhitespace,0)|(r?t2:0);i?s=new pU(i.type,i.attrs,Dn.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new pU(null,null,Dn.none,!0,null,o):s=new pU(t.schema.topNodeType,null,Dn.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&WC?"full":this.localPreserveWS||(i.options&q2)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),a;EY.hasOwnProperty(o)&&this.parser.normalizeLists&&K5e(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:X5e.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let f,c=this.needsBlock;if(vY.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let d=l&&l.skip?n:this.readStyles(t,n);d&&this.addAll(t,d),f&&this.sync(s),this.needsBlock=c}else{let f=this.readStyles(t,n);f&&this.addElementByRule(t,l,f,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(f=>!l.clearMark(f)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,a=i==null?null:t.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],f=l.findWrapping(t);if(f&&(!i||i.length>f.length+a)&&(i=f,s=l,!f.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=Dn.none;for(let a of i.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):oj(a.type,t.type))&&(o=a.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=rj(t,s,o.options);o.options&t2&&o.content.length==0&&(a|=t2);let l=Dn.none;return r=r.filter(f=>(o.type?o.type.allowsMarkType(f.type):oj(f.type,t))?(l=f.addToSet(l),!1):!0),this.nodes.push(new pU(t,n,l,i,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=q2)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let f=n[a];if(f==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=f&&!c.isInGroup(f))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function K5e(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&EY.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function Y5e(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function sj(e){let t={};for(let n in e)t[n]=e[n];return t}function oj(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:f,next:c}=a.edge(l);if(f==t||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class k1{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=LE(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let f=o.marks[l];if(!this.marks[f.type.name]){l++;continue}if(!f.eq(s[a][0])||f.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let f=o.marks[l++],c=this.serializeMark(f,o.isInline,n);c&&(s.push([f,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=x3(LE(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&x3(LE(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return x3(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new k1(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=aj(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return aj(t.marks)}}function aj(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function LE(e){return e.document||window.document}const lj=new WeakMap;function Z5e(e){let t=lj.get(e);return t===void 0&&lj.set(e,t=q5e(e)),t}function q5e(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function x3(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Z5e(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?e.createElementNS(n,i):e.createElement(i),f=t[1],c=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){c=2;for(let d in f)if(f[d]!=null){let u=d.indexOf(" ");u>0?l.setAttributeNS(d.slice(0,u),d.slice(u+1),f[d]):d=="style"&&l.style?l.style.cssText=f[d]:l.setAttribute(d,f[d])}}for(let d=c;d<t.length;d++){let u=t[d];if(u===0){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:g}=x3(e,u,n,r);if(l.appendChild(h),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const kY=65535,SY=Math.pow(2,16);function Q5e(e,t){return e+t*SY}function cj(e){return e&kY}function J5e(e){return(e-(e&kY))/SY}const CY=1,AY=2,w3=4,MY=8;class GC{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&MY)>0}get deletedBefore(){return(this.delInfo&(CY|w3))>0}get deletedAfter(){return(this.delInfo&(AY|w3))>0}get deletedAcross(){return(this.delInfo&w3)>0}}class _o{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&_o.empty)return _o.empty}recover(t){let n=0,r=cj(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+J5e(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let f=this.ranges[a+s],c=this.ranges[a+o],d=l+f;if(t<=d){let u=f?t==l?-1:t==d?1:n:n,h=l+i+(u<0?0:c);if(r)return h;let g=t==(n<0?l:d)?null:Q5e(a/3,t-l),y=t==l?AY:t==d?CY:w3;return(n<0?t!=l:t!=d)&&(y|=MY),new GC(h,y,g)}i+=c-f}return r?t+i:new GC(t+i,0,null)}touches(t,n){let r=0,i=cj(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let f=this.ranges[a+s],c=l+f;if(t<=c&&a==i*3)return!0;r+=this.ranges[a+o]-f}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),f=this.ranges[i+n],c=this.ranges[i+r];t(a,a+f,l,l+c),s+=c-f}}invert(){return new _o(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?_o.empty:new _o(t<0?[0,-t,0]:[0,0,t])}}_o.empty=new _o([]);class Q2{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Q2(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Q2;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return r?t:new GC(t,i,null)}}const OE=Object.create(null);class hs{getMap(){return _o.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=OE[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in OE)throw new RangeError("Duplicate use of step JSON ID "+t);return OE[t]=n,n.prototype.jsonID=t,n}}class Yr{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Yr(t,null)}static fail(t){return new Yr(null,t)}static fromReplace(t,n,r,i){try{return Yr.ok(t.replace(n,r,i))}catch(s){if(s instanceof Nx)return Yr.fail(s.message);throw s}}}function OT(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(OT(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return Ie.fromArray(r)}class vu extends hs{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Qe(OT(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Yr.fromReplace(t,this.from,this.to,s)}invert(){return new cl(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new vu(n.pos,r.pos,this.mark)}merge(t){return t instanceof vu&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new vu(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new vu(n.from,n.to,t.markFromJSON(n.mark))}}hs.jsonID("addMark",vu);class cl extends hs{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Qe(OT(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Yr.fromReplace(t,this.from,this.to,r)}invert(){return new vu(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new cl(n.pos,r.pos,this.mark)}merge(t){return t instanceof cl&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new cl(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new cl(n.from,n.to,t.markFromJSON(n.mark))}}hs.jsonID("removeMark",cl);class Eu extends hs{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Yr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Yr.fromReplace(t,this.pos,this.pos+1,new Qe(Ie.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Eu(this.pos,n.marks[i]);return new Eu(this.pos,this.mark)}}return new n1(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Eu(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Eu(n.pos,t.markFromJSON(n.mark))}}hs.jsonID("addNodeMark",Eu);class n1 extends hs{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Yr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Yr.fromReplace(t,this.pos,this.pos+1,new Qe(Ie.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Eu(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new n1(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n1(n.pos,t.markFromJSON(n.mark))}}hs.jsonID("removeNodeMark",n1);class wi extends hs{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&XC(t,this.from,this.to)?Yr.fail("Structure replace would overwrite content"):Yr.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new _o([this.from,this.to-this.from,this.slice.size])}invert(t){return new wi(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new wi(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof wi)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Qe.empty:new Qe(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new wi(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Qe.empty:new Qe(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new wi(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new wi(n.from,n.to,Qe.fromJSON(t,n.slice),!!n.structure)}}hs.jsonID("replace",wi);class Si extends hs{constructor(t,n,r,i,s,o,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(XC(t,this.from,this.gapFrom)||XC(t,this.gapTo,this.to)))return Yr.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Yr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Yr.fromReplace(t,this.from,this.to,r):Yr.fail("Content does not fit in gap")}getMap(){return new _o([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Si(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Si(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Si(n.from,n.to,n.gapFrom,n.gapTo,Qe.fromJSON(t,n.slice),n.insert,!!n.structure)}}hs.jsonID("replaceAround",Si);function XC(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function e2e(e,t,n,r){let i=[],s=[],o,a;e.doc.nodesBetween(t,n,(l,f,c)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let u=Math.max(f,t),h=Math.min(f+l.nodeSize,n),g=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(g)||(o&&o.to==u&&o.mark.eq(d[y])?o.to=h:i.push(o=new cl(u,h,d[y])));a&&a.to==u?a.to=h:s.push(a=new vu(u,h,r))}}),i.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function t2e(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof J9){let f=o.marks,c;for(;c=r.isInSet(f);)(l||(l=[])).push(c),f=c.removeFromSet(f)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let f=Math.min(a+o.nodeSize,n);for(let c=0;c<l.length;c++){let d=l[c],u;for(let h=0;h<i.length;h++){let g=i[h];g.step==s-1&&d.eq(i[h].style)&&(u=g)}u?(u.to=f,u.step=s):i.push({style:d,from:Math.max(a,t),to:f,step:s})}}}),i.forEach(o=>e.step(new cl(o.from,o.to,o.style)))}function jT(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<s.childCount;l++){let f=s.child(l),c=a+f.nodeSize,d=r.matchType(f.type);if(!d)o.push(new wi(a,c,Qe.empty));else{r=d;for(let u=0;u<f.marks.length;u++)n.allowsMarkType(f.marks[u].type)||e.step(new cl(a,c,f.marks[u]));if(i&&f.isText&&n.whitespace!="pre"){let u,h=/\r?\n|\r/g,g;for(;u=h.exec(f.text);)g||(g=new Qe(Ie.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),o.push(new wi(a+u.index,a+u.index+u[0].length,g))}}a=c}if(!r.validEnd){let l=r.fillBefore(Ie.empty,!0);e.replace(a,a,new Qe(l,0,0))}for(let l=o.length-1;l>=0;l--)e.step(o[l])}function n2e(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Kg(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,i=0,s=0;;--r){let o=e.$from.node(r),a=e.$from.index(r)+i,l=e.$to.indexAfter(r)-s;if(r<e.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!n2e(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function r2e(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),a=i.after(s+1),l=o,f=a,c=Ie.empty,d=0;for(let g=s,y=!1;g>n;g--)y||r.index(g)>0?(y=!0,c=Ie.from(r.node(g).copy(c)),d++):l--;let u=Ie.empty,h=0;for(let g=s,y=!1;g>n;g--)y||i.after(g+1)<i.end(g)?(y=!0,u=Ie.from(i.node(g).copy(u)),h++):f++;e.step(new Si(l,f,o,a,new Qe(c.append(u),d,h),c.size-d,!0))}function BT(e,t,n=null,r=e){let i=i2e(e,t),s=i&&s2e(r,t);return s?i.map(fj).concat({type:t,attrs:n}).concat(s.map(fj)):null}function fj(e){return{type:e,attrs:null}}function i2e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function s2e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let f=r;l&&f<i;f++)l=l.matchType(n.child(f).type);return!l||!l.validEnd?null:o}function o2e(e,t,n){let r=Ie.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ie.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new Si(i,s,i,s,new Qe(r,0,0),n.length,!0))}function a2e(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&l2e(e.doc,e.mapping.slice(s).map(a),r)){let f=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!g?f=!1:!h&&g&&(f=!0)}f===!1&&IY(e,o,a,s),jT(e,e.mapping.slice(s).map(a,1),r,void 0,f===null);let c=e.mapping.slice(s),d=c.map(a,1),u=c.map(a+o.nodeSize,1);return e.step(new Si(d,u,d+1,u-1,new Qe(Ie.from(r.create(l,null,o.marks)),0,0),1,!0)),f===!0&&TY(e,o,a,s),!1}})}function TY(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function IY(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function l2e(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function c2e(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Si(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Qe(Ie.from(o),0,0),1,!0))}function am(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,c=n-2;f>s;f--,c--){let d=i.node(f),u=i.index(f);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(u,d.childCount),g=r&&r[c+1];g&&(h=h.replaceChild(0,g.type.create(g.attrs)));let y=r&&r[c]||d;if(!d.canReplace(u+1,d.childCount)||!y.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function f2e(e,t,n=1,r){let i=e.doc.resolve(t),s=Ie.empty,o=Ie.empty;for(let a=i.depth,l=i.depth-n,f=n-1;a>l;a--,f--){s=Ie.from(i.node(a).copy(s));let c=r&&r[f];o=Ie.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}e.step(new wi(t,t,new Qe(s.append(o),n,n),!0))}function e0(e,t){let n=e.resolve(t),r=n.index();return NY(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function d2e(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function NY(e,t){return!!(e&&t&&!e.isLeaf&&d2e(e,t))}function ew(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&NY(s,o)&&r.node(i).canReplace(a,a+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function u2e(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let a=e.steps.length;if(r===!1){let c=e.doc.resolve(t+n);IY(e,c.node(),c.before(),a)}o.inlineContent&&jT(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=e.mapping.slice(a),f=l.map(t-n);if(e.step(new wi(f,l.map(t+n,-1),Qe.empty,!0)),r===!0){let c=e.doc.resolve(f);TY(e,c.node(),c.before(),e.steps.length)}return e}function h2e(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function RY(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),f=r.node(o),c=!1;if(s==1)c=f.canReplace(l,l,i);else{let d=f.contentMatchAt(l).findWrapping(i.firstChild.type);c=d&&f.canReplaceWith(l,l,d[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function tw(e,t,n=t,r=Qe.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return _Y(i,s,r)?new wi(t,n,r):new p2e(i,s,r).fit()}function _Y(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class p2e{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ie.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=Ie.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Qe(s,o,a);return t>-1?new Si(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new wi(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=jE(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:f}=this.frontier[a],c,d=null;if(n==1&&(o?f.matchType(o.type)||(d=f.fillBefore(Ie.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(c=f.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&f.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=jE(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Qe(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=jE(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new Qe(R5(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Qe(R5(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-t,f=0,c=[],{match:d,type:u}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)c.push(i.child(y));d=d.matchFragment(i)}let h=a.size+t-(o.content.size-o.openEnd);for(;f<a.childCount;){let y=a.child(f),U=d.matchType(y.type);if(!U)break;f++,(f>1||l==0||y.content.size)&&(d=U,c.push(PY(y.mark(u.allowedMarks(y.marks)),f==1?l:0,f==a.childCount?h:-1)))}let g=f==a.childCount;g||(h=-1),this.placed=_5(this.placed,n,Ie.from(c)),this.frontier[n].match=d,g&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,U=a;y<h;y++){let x=U.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),U=x.content}this.unplaced=g?t==0?Qe.empty:new Qe(R5(o.content,t-1,1),t-1,h<0?o.openEnd:t-1):new Qe(R5(o.content,t,f),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!BE(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=BE(t,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:f}=this.frontier[a],c=BE(t,a,f,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=_5(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=_5(this.placed,this.depth,Ie.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ie.empty,!0);n.childCount&&(this.placed=_5(this.placed,this.frontier.length,n))}}function R5(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(R5(e.firstChild.content,t-1,n)))}function _5(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(_5(e.lastChild.content,t-1,n)))}function jE(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function PY(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,PY(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Ie.empty,!0)))),e.copy(r)}function BE(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!m2e(n,s.content,o)?a:null}function m2e(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function g2e(e){return e.spec.defining||e.spec.definingForContent}function b2e(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(_Y(i,s,r))return e.step(new wi(t,n,r));let o=LY(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let u=i.depth,h=i.pos-1;u>0;u--,h--){let g=i.node(u).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(u)>-1?a=u:i.before(u)==h&&o.splice(1,0,-u)}let l=o.indexOf(a),f=[],c=r.openStart;for(let u=r.content,h=0;;h++){let g=u.firstChild;if(f.push(g),h==r.openStart)break;u=g.content}for(let u=c-1;u>=0;u--){let h=f[u],g=g2e(h.type);if(g&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=u;else if(g||!h.type.isTextblock)break}for(let u=r.openStart;u>=0;u--){let h=(u+c+1)%(r.openStart+1),g=f[h];if(g)for(let y=0;y<o.length;y++){let U=o[(y+l)%o.length],x=!0;U<0&&(x=!1,U=-U);let v=i.node(U-1),E=i.index(U-1);if(v.canReplaceWith(E,E,g.type,g.marks))return e.replace(i.before(U),x?s.after(U):n,new Qe(DY(r.content,0,r.openStart,h),h,r.openEnd))}}let d=e.steps.length;for(let u=o.length-1;u>=0&&(e.replace(t,n,r),!(e.steps.length>d));u--){let h=o[u];h<0||(t=i.before(h),n=s.after(h))}}function DY(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(DY(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(Ie.empty,!0))}return e}function y2e(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=h2e(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new Qe(Ie.from(r),0,0))}function U2e(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=LY(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return e.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function LY(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class lm extends hs{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Yr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Yr.fromReplace(t,this.pos,this.pos+1,new Qe(Ie.from(i),0,n.isLeaf?0:1))}getMap(){return _o.empty}invert(t){return new lm(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new lm(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new lm(n.pos,n.attr,n.value)}}hs.jsonID("attr",lm);class J2 extends hs{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Yr.ok(r)}getMap(){return _o.empty}invert(t){return new J2(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new J2(n.attr,n.value)}}hs.jsonID("docAttr",J2);let xg=class extends Error{};xg=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};xg.prototype=Object.create(Error.prototype);xg.prototype.constructor=xg;xg.prototype.name="TransformError";class OY{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Q2}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new xg(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let t=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(t=i.map(t,1),n=i.map(n,-1)),i.forEach((s,o,a,l)=>{t=Math.min(t,a),n=Math.max(n,l)})}return t==1e9?null:{from:t,to:n}}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Qe.empty){let i=tw(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new Qe(Ie.from(r),0,0))}delete(t,n){return this.replace(t,n,Qe.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return b2e(this,t,n,r),this}replaceRangeWith(t,n,r){return y2e(this,t,n,r),this}deleteRange(t,n){return U2e(this,t,n),this}lift(t,n){return r2e(this,t,n),this}join(t,n=1){return u2e(this,t,n),this}wrap(t,n){return o2e(this,t,n),this}setBlockType(t,n=t,r,i=null){return a2e(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return c2e(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new lm(t,n,r)),this}setDocAttribute(t,n){return this.step(new J2(t,n)),this}addNodeMark(t,n){return this.step(new Eu(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Dn)n.isInSet(r.marks)&&this.step(new n1(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new n1(t,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(t,n=1,r){return f2e(this,t,n,r),this}addMark(t,n,r){return e2e(this,t,n,r),this}removeMark(t,n,r){return t2e(this,t,n,r),this}clearIncompatible(t,n,r){return jT(this,t,n,r),this}}const FE=Object.create(null);class Vt{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new x2e(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Qe.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:f}=o[a],c=t.mapping.slice(s);t.replaceRange(c.map(l.pos),c.map(f.pos),a?Qe.empty:n),a==0&&hj(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=t.mapping.slice(r),f=l.map(o.pos),c=l.map(a.pos);s?t.deleteRange(f,c):(t.replaceRangeWith(f,c,n),hj(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Pt(t):Tp(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?Tp(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):Tp(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new xa(t.node(0))}static atStart(t){return Tp(t,t,0,0,1)||new xa(t)}static atEnd(t){return Tp(t,t,t.content.size,t.childCount,-1)||new xa(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=FE[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in FE)throw new RangeError("Duplicate use of selection JSON ID "+t);return FE[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Pt.between(this.$anchor,this.$head).getBookmark()}}Vt.prototype.visible=!0;class x2e{constructor(t,n){this.$from=t,this.$to=n}}let dj=!1;function uj(e){!dj&&!e.parent.inlineContent&&(dj=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Pt extends Vt{constructor(t,n=t){uj(t),uj(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Vt.near(r);let i=t.resolve(n.map(this.anchor));return new Pt(i.parent.inlineContent?i:r,r)}replace(t,n=Qe.empty){if(super.replace(t,n),n==Qe.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Pt&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new nw(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Pt(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Vt.findFrom(n,r,!0)||Vt.findFrom(n,-r,!0);if(s)n=s.$head;else return Vt.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Vt.findFrom(t,-r,!0)||Vt.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Pt(t,n)}}Vt.jsonID("text",Pt);class nw{constructor(t,n){this.anchor=t,this.head=n}map(t){return new nw(t.map(this.anchor),t.map(this.head))}resolve(t){return Pt.between(t.resolve(this.anchor),t.resolve(this.head))}}class pt extends Vt{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Vt.near(s):new pt(s)}content(){return new Qe(Ie.from(this.node),0,0)}eq(t){return t instanceof pt&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new FT(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new pt(t.resolve(n.anchor))}static create(t,n){return new pt(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}pt.prototype.visible=!1;Vt.jsonID("node",pt);class FT{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new nw(r,r):new FT(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&pt.isSelectable(r)?new pt(n):Vt.near(n)}}class xa extends Vt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Qe.empty){if(n==Qe.empty){t.delete(0,t.doc.content.size);let r=Vt.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new xa(t)}map(t){return new xa(t)}eq(t){return t instanceof xa}getBookmark(){return w2e}}Vt.jsonID("all",xa);const w2e={map(){return this},resolve(e){return new xa(e)}};function Tp(e,t,n,r,i,s=!1){if(t.inlineContent)return Pt.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let a=t.child(o);if(a.isAtom){if(!s&&pt.isSelectable(a))return pt.create(e,n-(i<0?a.nodeSize:0))}else{let l=Tp(e,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function hj(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof wi||i instanceof Si))return;let s=e.mapping.maps[r],o;s.forEach((a,l,f,c)=>{o==null&&(o=c)}),e.setSelection(Vt.near(e.doc.resolve(o),n))}const pj=1,mU=2,mj=4;class v2e extends OY{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|pj)&~mU,this.storedMarks=null,this}get selectionSet(){return(this.updated&pj)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=mU,this}ensureMarks(t){return Dn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&mU)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~mU,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Dn.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Vt.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=mj,this}get scrolledIntoView(){return(this.updated&mj)>0}}function gj(e,t){return!t||!e?e:e.bind(t)}class P5{constructor(t,n,r){this.name=t,this.init=gj(n.init,r),this.apply=gj(n.apply,r)}}const E2e=[new P5("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new P5("selection",{init(e,t){return e.selection||Vt.atStart(t.doc)},apply(e){return e.selection}}),new P5("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new P5("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class zE{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=E2e.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new P5(r.key,r.spec.state,r))})}}class zp{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,f=i?i[o].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,f,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new zp(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new v2e(this)}static create(t){let n=new zE(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new zp(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new zE(this.schema,t.plugins),r=n.fields,i=new zp(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new zE(t.schema,t.plugins),s=new zp(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ru.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Vt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],f=l.spec.state;if(l.key==o.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=f.fromJSON.call(l,t,n[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function jY(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=jY(i,t,{})),n[r]=i}return n}class xr{constructor(t){this.spec=t,this.props={},t.props&&jY(t.props,this,this.props),this.key=t.key?t.key.key:BY("plugin")}getState(t){return t[this.key]}}const $E=Object.create(null);function BY(e){return e in $E?e+"$"+ ++$E[e]:($E[e]=0,e+"$")}class fi{constructor(t="key"){this.key=BY(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const k2e=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function FY(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const S2e=(e,t,n)=>{let r=FY(e,n);if(!r)return!1;let i=zT(r);if(!i){let o=r.blockRange(),a=o&&Kg(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(VY(e,i,t,-1))return!0;if(r.parent.content.size==0&&(wg(s,"end")||pt.isSelectable(s)))for(let o=r.depth;;o--){let a=tw(e.doc,r.before(o),r.after(o),Qe.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(wg(s,"end")?Vt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):pt.create(l.doc,i.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},C2e=(e,t,n)=>{let r=FY(e,n);if(!r)return!1;let i=zT(r);return i?zY(e,i,t):!1},A2e=(e,t,n)=>{let r=$Y(e,n);if(!r)return!1;let i=$T(r);return i?zY(e,i,t):!1};function zY(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=t.nodeAfter,a=o,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let f=tw(e.doc,s,l,Qe.empty);if(!f||f.from!=s||f instanceof wi&&f.slice.size>=l-s)return!1;if(n){let c=e.tr.step(f);c.setSelection(Pt.create(c.doc,s)),n(c.scrollIntoView())}return!0}function wg(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const M2e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=zT(r)}let o=s&&s.nodeBefore;return!o||!pt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(pt.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function zT(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function $Y(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const T2e=(e,t,n)=>{let r=$Y(e,n);if(!r)return!1;let i=$T(r);if(!i)return!1;let s=i.nodeAfter;if(VY(e,i,t,1))return!0;if(r.parent.content.size==0&&(wg(s,"start")||pt.isSelectable(s))){let o=tw(e.doc,r.before(),r.after(),Qe.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(wg(s,"start")?Vt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):pt.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},I2e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=$T(r)}let o=s&&s.nodeAfter;return!o||!pt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(pt.create(e.doc,s.pos)).scrollIntoView()),!0)};function $T(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const N2e=(e,t)=>{let n=e.selection,r=n instanceof pt,i;if(r){if(n.node.isTextblock||!e0(e.doc,n.from))return!1;i=n.from}else if(i=ew(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(pt.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},R2e=(e,t)=>{let n=e.selection,r;if(n instanceof pt){if(n.node.isTextblock||!e0(e.doc,n.to))return!1;r=n.to}else if(r=ew(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},_2e=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&Kg(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},P2e=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function HY(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const D2e=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=HY(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Vt.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},L2e=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof xa||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=HY(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(Pt.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},O2e=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(am(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Kg(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},j2e=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(pt.create(e.doc,i))),!0)};function B2e(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||e0(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function VY(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&B2e(e,t,n))return!0;let f=!l&&t.parent.canReplace(t.index(),t.index()+1);if(f&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let h=t.pos+s.nodeSize,g=Ie.empty;for(let x=o.length-1;x>=0;x--)g=Ie.from(o[x].create(null,g));g=Ie.from(i.copy(g));let y=e.tr.step(new Si(t.pos-1,h,t.pos,h,new Qe(g,1,0),o.length,!0)),U=y.doc.resolve(h+2*o.length);U.nodeAfter&&U.nodeAfter.type==i.type&&e0(y.doc,U.pos)&&y.join(U.pos),n(y.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&l?null:Vt.findFrom(t,1),d=c&&c.$from.blockRange(c.$to),u=d&&Kg(d);if(u!=null&&u>=t.depth)return n&&n(e.tr.lift(d,u).scrollIntoView()),!0;if(f&&wg(s,"start",!0)&&wg(i,"end")){let h=i,g=[];for(;g.push(h),!h.isTextblock;)h=h.lastChild;let y=s,U=1;for(;!y.isTextblock;y=y.firstChild)U++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(n){let x=Ie.empty;for(let E=g.length-1;E>=0;E--)x=Ie.from(g[E].copy(x));let v=e.tr.step(new Si(t.pos-g.length,t.pos+s.nodeSize,t.pos+U,t.pos+s.nodeSize-U,new Qe(x,g.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function WY(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Pt.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const F2e=WY(-1),z2e=WY(1);function $2e(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&BT(o,e,t);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function bj(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,f)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let c=n.doc.resolve(f),d=c.index();i=c.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,e,t)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function H2e(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return V2e(a,o,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function V2e(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=o.resolve(t.start-2);s=new _x(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new _x(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=BT(s,n,r,t);return a?(e&&W2e(e,t,a,i,n),!0):!1}function W2e(e,t,n,r,i){let s=Ie.empty;for(let c=n.length-1;c>=0;c--)s=Ie.from(n[c].type.create(n[c].attrs,s));e.step(new Si(t.start-(r?2:0),t.end,t.start,t.end,new Qe(s,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==i&&(o=c+1);let a=n.length-o,l=t.start+n.length-(r?2:0),f=t.parent;for(let c=t.startIndex,d=t.endIndex,u=!0;c<d;c++,u=!1)!u&&am(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=f.child(c).nodeSize;return e}function G2e(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?X2e(t,n,e,s):K2e(t,n,s):!0:!1}}function X2e(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Si(s-1,o,s,o,new Qe(Ie.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new _x(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Kg(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return e0(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function K2e(e,t,n){let r=e.tr,i=n.parent;for(let h=n.end,g=n.endIndex-1,y=n.startIndex;g>y;g--)h-=i.child(g).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,f=s.node(-1),c=s.index(-1);if(!f.canReplace(c+(a?0:1),c+1,o.content.append(l?Ie.empty:Ie.from(i))))return!1;let d=s.pos,u=d+o.nodeSize;return r.step(new Si(d-(a?1:0),u+(l?1:0),d+1,u-1,new Qe((a?Ie.empty:Ie.from(i.copy(Ie.empty))).append(l?Ie.empty:Ie.from(i.copy(Ie.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function Y2e(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=e)return!1;if(n){let f=l.lastChild&&l.lastChild.type==a.type,c=Ie.from(f?e.create():null),d=new Qe(Ie.from(e.create(null,Ie.from(a.type.create(null,c)))),f?3:1,0),u=s.start,h=s.end;n(t.tr.step(new Si(u-(f?3:1),h,u,h,d,1,!0)).scrollIntoView())}return!0}}const ji=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},vg=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let KC=null;const af=function(e,t,n){let r=KC||(KC=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Z2e=function(){KC=null},r1=function(e,t,n,r){return n&&(yj(e,t,n,r,-1)||yj(e,t,n,r,1))},q2e=/^(img|br|input|textarea|hr)$/i;function yj(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:ba(e))){let o=e.parentNode;if(!o||o.nodeType!=1||cy(e)||q2e.test(e.nodeName)||e.contentEditable=="false")return!1;t=ji(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?ba(e):0}else return!1}}function ba(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Q2e(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=ba(e)}else if(e.parentNode&&!cy(e))t=ji(e),e=e.parentNode;else return null}}function J2e(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!cy(e))t=ji(e)+1,e=e.parentNode;else return null}}function ebe(e,t,n){for(let r=t==0,i=t==ba(e);r||i;){if(e==n)return!0;let s=ji(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==ba(e)}}function cy(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const rw=function(e){return e.focusNode&&r1(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function z0(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function tbe(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function nbe(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(ba(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(ba(r.startContainer),r.startOffset)}}}const Ec=typeof navigator<"u"?navigator:null,Uj=typeof document<"u"?document:null,t0=Ec&&Ec.userAgent||"",YC=/Edge\/(\d+)/.exec(t0),GY=/MSIE \d/.exec(t0),ZC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t0),ao=!!(GY||ZC||YC),_u=GY?document.documentMode:ZC?+ZC[1]:YC?+YC[1]:0,wa=!ao&&/gecko\/(\d+)/i.test(t0);wa&&+(/Firefox\/(\d+)/.exec(t0)||[0,0])[1];const qC=!ao&&/Chrome\/(\d+)/.exec(t0),Fi=!!qC,XY=qC?+qC[1]:0,us=!ao&&!!Ec&&/Apple Computer/.test(Ec.vendor),Eg=us&&(/Mobile\/\w+/.test(t0)||!!Ec&&Ec.maxTouchPoints>2),ha=Eg||(Ec?/Mac/.test(Ec.platform):!1),KY=Ec?/Win/.test(Ec.platform):!1,Nf=/Android \d/.test(t0),fy=!!Uj&&"webkitFontSmoothing"in Uj.documentElement.style,rbe=fy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ibe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Zc(e,t){return typeof e=="number"?e:e[t]}function sbe(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function xj(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=vg(o);continue}let a=o,l=a==s.body,f=l?ibe(s):sbe(a),c=0,d=0;if(t.top<f.top+Zc(r,"top")?d=-(f.top-t.top+Zc(i,"top")):t.bottom>f.bottom-Zc(r,"bottom")&&(d=t.bottom-t.top>f.bottom-f.top?t.top+Zc(i,"top")-f.top:t.bottom-f.bottom+Zc(i,"bottom")),t.left<f.left+Zc(r,"left")?c=-(f.left-t.left+Zc(i,"left")):t.right>f.right-Zc(r,"right")&&(c=t.right-f.right+Zc(i,"right")),c||d)if(l)s.defaultView.scrollBy(c,d);else{let h=a.scrollLeft,g=a.scrollTop;d&&(a.scrollTop+=d),c&&(a.scrollLeft+=c);let y=a.scrollLeft-h,U=a.scrollTop-g;t={left:t.left-y,top:t.top-U,right:t.right-y,bottom:t.bottom-U}}let u=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(u))break;o=u=="absolute"?o.offsetParent:vg(o)}}function obe(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=e.root.elementFromPoint(s,o);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:YY(e.dom)}}function YY(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=vg(r));return t}function abe({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;ZY(n,r==0?0:r-t)}function ZY(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let fp=null;function lbe(e){if(e.setActive)return e.setActive();if(fp)return e.focus(fp);let t=YY(e);e.focus(fp==null?{get preventScroll(){return fp={preventScroll:!0},!0}}:void 0),fp||(fp=!1,ZY(t,0))}function qY(e,t){let n,r=2e8,i,s=0,o=t.top,a=t.top,l,f;for(let c=e.firstChild,d=0;c;c=c.nextSibling,d++){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=af(c).getClientRects();else continue;for(let h=0;h<u.length;h++){let g=u[h];if(g.top<=o&&g.bottom>=a){o=Math.max(g.bottom,o),a=Math.min(g.top,a);let y=g.left>t.left?g.left-t.left:g.right<t.left?t.left-g.right:0;if(y<r){n=c,r=y,i=y&&n.nodeType==3?{left:g.right<t.left?g.right:g.left,top:t.top}:t,c.nodeType==1&&y&&(s=d+(t.left>=(g.left+g.right)/2?1:0));continue}}else g.top>t.top&&!l&&g.left<=t.left&&g.right>=t.left&&(l=c,f={left:Math.max(g.left,Math.min(g.right,t.left)),top:g.top});!n&&(t.left>=g.right&&t.top>=g.top||t.left>=g.left&&t.top>=g.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=f,r=0),n&&n.nodeType==3?cbe(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:qY(n,i)}function cbe(e,t){let n=e.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let o=$d(r,1);if(o.top!=o.bottom&&HT(t,o)){i={node:e,offset:s+(t.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:e,offset:0}}function HT(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function fbe(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function dbe(e,t,n){let{node:r,offset:i}=qY(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function ube(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let a=e.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function QY(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let f=a[l];if(HT(t,f))return QY(o,t,f)}}if((s=(s+1)%r)==i)break}return e}function hbe(e,t){let n=e.dom.ownerDocument,r,i=0,s=nbe(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let f=e.dom.getBoundingClientRect();if(!HT(t,f)||(o=QY(e.dom,t,f),!o))return null}if(us)for(let f=o;r&&f;f=vg(f))f.draggable&&(r=void 0);if(o=fbe(o,t),r){if(wa&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let f;fy&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=ube(e,r,i,t))}a==null&&(a=dbe(e,o,t));let l=e.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function wj(e){return e.top<e.bottom||e.left<e.right}function $d(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(wj(r))return r}return Array.prototype.find.call(n,wj)||e.getBoundingClientRect()}const pbe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function JY(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=fy||wa;if(r.nodeType==3)if(o&&(pbe.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=$d(af(r,i,i),n);if(wa&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=$d(af(r,i-1,i-1),-1);if(f.top==l.top){let c=$d(af(r,i,i+1),-1);if(c.top!=l.top)return Q6(c,c.left<f.left)}}return l}else{let l=i,f=i,c=n<0?1:-1;return n<0&&!i?(f++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:f++,Q6($d(af(r,l,f),c),c<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ba(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return HE(l.getBoundingClientRect(),!1)}if(s==null&&i<ba(r)){let l=r.childNodes[i];if(l.nodeType==1)return HE(l.getBoundingClientRect(),!0)}return HE(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ba(r))){let l=r.childNodes[i-1],f=l.nodeType==3?af(l,ba(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(f)return Q6($d(f,1),!1)}if(s==null&&i<ba(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let f=l?l.nodeType==3?af(l,0,o?0:1):l.nodeType==1?l:null:null;if(f)return Q6($d(f,-1),!0)}return Q6($d(r.nodeType==3?af(r):r,-n),n>=0)}function Q6(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function HE(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function eZ(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function mbe(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return eZ(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=JY(e,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=af(a,0,a.nodeValue.length).getClientRects();else continue;for(let f=0;f<l.length;f++){let c=l[f];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const gbe=/[\u0590-\u08ac]/;function bbe(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=e.domSelection();return a?!gbe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:eZ(e,t,()=>{let{focusNode:l,focusOffset:f,anchorNode:c,anchorOffset:d}=e.domSelectionRange(),u=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:g,focusOffset:y}=e.domSelectionRange(),U=g&&!h.contains(g.nodeType==1?g:g.parentNode)||l==g&&f==y;try{a.collapse(c,d),l&&(l!=c||f!=d)&&a.extend&&a.extend(l,f)}catch{}return u!=null&&(a.caretBidiLevel=u),U}):r.pos==r.start()||r.pos==r.end()}let vj=null,Ej=null,kj=!1;function ybe(e,t,n){return vj==t&&Ej==n?kj:(vj=t,Ej=n,kj=n=="up"||n=="down"?mbe(e,t,n):bbe(e,t,n))}const va=0,Sj=1,J0=2,kc=3;class dy{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=va,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>ji(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>t||o instanceof nZ){i=t-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof tZ&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?ji(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?ji(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],f=o+l.size;if(i==-1&&t<=f){let c=o+l.border;if(t>=c&&n<=f-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,c);t=o;for(let d=a;d>0;d--){let u=this.children[d-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){i=ji(u.dom)+1;break}t-=u.size}i==-1&&(i=0)}if(i>-1&&(f>n||a==this.children.length-1)){n=f;for(let c=a+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=ji(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=f}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let h=0,g=0;h<this.children.length;h++){let y=this.children[h],U=g+y.size;if(s>g&&o<U)return y.setSelection(t-g-y.border,n-g-y.border,r,i);g=U}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((wa||us)&&t==n){let{node:h,offset:g}=a;if(h.nodeType==3){if(d=!!(g&&h.nodeValue[g-1]==`
`),d&&g==h.nodeValue.length)for(let y=h,U;y;y=y.parentNode){if(U=y.nextSibling){U.nodeName=="BR"&&(a=l={node:U.parentNode,offset:ji(U)+1});break}let x=y.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let y=h.childNodes[g-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(wa&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&us)&&r1(a.node,a.offset,c.anchorNode,c.anchorOffset)&&r1(l.node,l.offset,c.focusNode,c.focusOffset))return;let u=!1;if((f.extend||t==n)&&!(d&&wa)){f.collapse(a.node,a.offset);try{t!=n&&f.extend(l.node,l.offset),u=!0}catch{}}if(!u){if(t>n){let g=a;a=l,l=g}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let a=r+s.border,l=o-s.border;if(t>=a&&n<=l){this.dirty=t==r||n==o?J0:Sj,t==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=kc:s.markDirty(t-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?J0:kc}r=o}this.dirty=J0}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?J0:Sj;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class tZ extends dy{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==va&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Ube extends dy{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class i1 extends dy{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=k1.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new i1(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&kc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=kc&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=va){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=va}}slice(t,n,r){let i=i1.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=JC(s,n,o,r)),t>0&&(s=JC(s,0,t,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Pu extends dy{constructor(t,n,r,i,s,o,a,l,f){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(t,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,f=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=f&&f.dom,d=f&&f.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=k1.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let u=c;return c=sZ(c,r,n),f?l=new xbe(t,n,r,i,c,d||null,u,f,s,o+1):n.isText?new iw(t,n,r,i,c,u,s):new Pu(t,n,r,i,c,d||null,u,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Ie.empty)}return t}matchesNode(t,n,r){return this.dirty==va&&t.eq(this.node)&&Dx(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new vbe(this,o&&o.node,t);Sbe(this.node,this.innerDeco,(f,c,d)=>{f.spec.marks?l.syncToMarks(f.spec.marks,r,t,c):f.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?Dn.none:this.node.child(c).marks,r,t,c),l.placeWidget(f,t,i)},(f,c,d,u)=>{l.syncToMarks(f.marks,r,t,u);let h;l.findNodeMatch(f,c,d,u)||a&&t.state.selection.from>i&&t.state.selection.to<i+f.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(f,c,d,h,t)||l.updateNextNode(f,c,d,t,u,i)||l.addNode(f,c,d,t,i),i+=f.nodeSize}),l.syncToMarks([],r,t,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==J0)&&(o&&this.protectLocalComposition(t,o),rZ(this.contentDOM,this.children,t),Eg&&Cbe(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Pt)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=Abe(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Ube(this,s,n,i);t.input.compositionNodes.push(o),this.children=JC(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==kc||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=va}updateOuterDeco(t){if(Dx(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=iZ(this.dom,this.nodeDOM,QC(this.outerDeco,this.node,n),QC(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Cj(e,t,n,r,i){sZ(r,t,e);let s=new Pu(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class iw extends Pu{constructor(t,n,r,i,s,o,a){super(t,n,r,i,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==kc||this.dirty!=va&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=va||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=va,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new iw(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=kc)}get domAtom(){return!1}isText(t){return this.node.text==t}}class nZ extends dy{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==va&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xbe extends Pu{constructor(t,n,r,i,s,o,a,l,f,c){super(t,n,r,i,s,o,a,f,c),this.spec=l}update(t,n,r,i){if(this.dirty==kc)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function rZ(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=r;)r=Aj(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(o instanceof i1){let l=r?r.previousSibling:e.lastChild;rZ(o.contentDOM,o.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=Aj(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const n2=function(e){e&&(this.nodeName=e)};n2.prototype=Object.create(null);const eh=[new n2];function QC(e,t,n){if(e.length==0)return eh;let r=n?eh[0]:new n2,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new n2(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new n2(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function iZ(e,t,n,r){if(n==eh&&r==eh)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=eh[0]),i=l}wbe(i,a||eh[0],o)}return i}function wbe(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function sZ(e,t,n){return iZ(e,e,eh,QC(t,n,e.nodeType!=1))}function Dx(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Aj(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class vbe{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Ebe(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r,i){let s=0,o=this.stack.length>>1,a=Math.min(o,t.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=va,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let l=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let c=this.index;c<f;c++){let d=this.top.children[c];if(d.matchesMark(t[o])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=i1.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let f=this.top.children[a];if(f.matchesNode(t,n,r)&&!this.preMatch.matched.has(f)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==kc&&o.dom==o.contentDOM&&(o.dirty=J0),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Pu){let f=this.preMatch.matched.get(l);if(f!=null&&f!=s)return!1;let c=l.dom,d,u=this.isLocked(c)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=kc&&Dx(n,l.outerDeco));if(!u&&l.update(t,n,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!u&&(d=this.recreateWrapper(l,t,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=J0,d.updateChildren(i,o+1),d.dirty=va),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Dx(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let a=Pu.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,i,s){let o=Pu.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new tZ(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof i1;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof iw)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((us||Fi)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new nZ(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function Ebe(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let f=n.children[r-1];if(f instanceof i1)n=f,r=f.children.length;else{a=f,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function kbe(e,t){return e.type.side-t.type.side}function Sbe(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let f=0;f<e.childCount;f++){let c=e.child(f);r(c,i,t.forChild(s,c),f),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let f=0;;){let c,d;for(;o<i.length&&i[o].to==s;){let U=i[o++];U.widget&&(c?(d||(d=[c])).push(U):c=U)}if(c)if(d){d.sort(kbe);for(let U=0;U<d.length;U++)n(d[U],f,!!l)}else n(c,f,!!l);let u,h;if(l)h=-1,u=l,l=null;else if(f<e.childCount)h=f,u=e.child(f++);else break;for(let U=0;U<a.length;U++)a[U].to<=s&&a.splice(U--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let g=s+u.nodeSize;if(u.isText){let U=g;o<i.length&&i[o].from<U&&(U=i[o].from);for(let x=0;x<a.length;x++)a[x].to<U&&(U=a[x].to);U<g&&(l=u.cut(U-s),u=u.cut(0,U-s),g=U,h=-1)}else for(;o<i.length&&i[o].to<g;)o++;let y=u.isInline&&!u.isLeaf?a.filter(U=>!U.inline):a.slice();r(u,y,t.forChild(s,u),h),s=g}}function Cbe(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Abe(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let f=e.child(i++);if(s+=f.nodeSize,!f.isText)break;l+=f.text}if(s>=n){if(s>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let f=a<r?l.lastIndexOf(t,r-a-1):-1;if(f>=0&&f+t.length+a>=n)return a+f;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function JC(e,t,n,r,i){let s=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],f=a,c=a+=l.size;f>=n||c<=t?s.push(l):(f<t&&s.push(l.slice(0,t-f,r)),i&&(s.push(i),i=void 0),c>n&&s.push(l.slice(n-f,l.size,r)))}return s}function VT(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,f;if(rw(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&pt.isSelectable(d)&&i.parent&&!(d.isInline&&ebe(n.focusNode,n.focusOffset,i.dom))){let u=i.posBefore;f=new pt(o==u?a:r.resolve(u))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,u=o;for(let h=0;h<n.rangeCount;h++){let g=n.getRangeAt(h);d=Math.min(d,e.docView.posFromDOM(g.startContainer,g.startOffset,1)),u=Math.max(u,e.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[l,o]=u==e.state.selection.anchor?[u,d]:[d,u],a=r.resolve(o)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!f){let d=t=="pointer"||e.state.selection.head<a.pos&&!s?1:-1;f=WT(e,c,a,d)}return f}function oZ(e){return e.editable?e.hasFocus():lZ(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Of(e,t=!1){let n=e.state.selection;if(aZ(e,n),!!oZ(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Fi){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&r1(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Tbe(e);else{let{anchor:r,head:i}=n,s,o;Mj&&!(n instanceof Pt)&&(n.$from.parent.inlineContent||(s=Tj(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Tj(e,n.to))),e.docView.setSelection(r,i,e,t),Mj&&(s&&Ij(s),o&&Ij(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Mbe(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Mj=us||Fi&&XY<63;function Tj(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(us&&i&&i.contentEditable=="false")return VE(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return VE(i);if(s)return VE(s)}}function VE(e){return e.contentEditable="true",us&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Ij(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Mbe(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!oZ(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Tbe(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,ji(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&ao&&_u<=11&&(n.disabled=!0,n.disabled=!1)}function aZ(e,t){if(t instanceof pt){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Nj(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Nj(e)}function Nj(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function WT(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Pt.between(t,n,r)}function Rj(e){return e.editable&&!e.hasFocus()?!1:lZ(e)}function lZ(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Ibe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return r1(t.node,t.offset,n.anchorNode,n.anchorOffset)}function eA(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Vt.findFrom(s,t)}function Kd(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function _j(e,t,n){let r=e.state.selection;if(r instanceof Pt)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Kd(e,new Pt(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=eA(e.state,t);return i&&i instanceof pt?Kd(e,i):!1}else if(!(ha&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(a))&&!o.contentDOM?pt.isSelectable(s)?Kd(e,new pt(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):fy?Kd(e,new Pt(e.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof pt&&r.node.isInline)return Kd(e,new Pt(t>0?r.$to:r.$from));{let i=eA(e.state,t);return i?Kd(e,i):!1}}}function Lx(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function r2(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function dp(e,t){return t<0?Nbe(e):Rbe(e)}function Nbe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(wa&&n.nodeType==1&&r<Lx(n)&&r2(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(r2(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(cZ(n))break;{let a=n.previousSibling;for(;a&&r2(a,-1);)i=n.parentNode,s=ji(a),a=a.previousSibling;if(a)n=a,r=Lx(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?tA(e,n,r):i&&tA(e,i,s)}function Rbe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Lx(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(r2(a,1))s=n,o=++r;else break}else{if(cZ(n))break;{let a=n.nextSibling;for(;a&&r2(a,1);)s=a.parentNode,o=ji(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Lx(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&tA(e,s,o)}function cZ(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function _be(e,t){for(;e&&t==e.childNodes.length&&!cy(e);)t=ji(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function Pbe(e,t){for(;e&&!t&&!cy(e);)t=ji(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function tA(e,t,n){if(t.nodeType!=3){let s,o;(o=_be(t,n))?(t=o,n=0):(s=Pbe(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(rw(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Of(e)},50)}function Pj(e,t){let n=e.state.doc.resolve(t);if(!(Fi||KY)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function Dj(e,t,n){let r=e.state.selection;if(r instanceof Pt&&!r.empty||n.indexOf("s")>-1||ha&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=eA(e.state,t);if(o&&o instanceof pt)return Kd(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,a=r instanceof xa?Vt.near(o,t):Vt.findFrom(o,t);return a?Kd(e,a):!1}return!1}function Lj(e,t){if(!(e.state.selection instanceof Pt))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function Oj(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Dbe(e){if(!us||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;Oj(e,r,"true"),setTimeout(()=>Oj(e,r,"false"),20)}return!1}function Lbe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Obe(e,t){let n=t.keyCode,r=Lbe(t);if(n==8||ha&&n==72&&r=="c")return Lj(e,-1)||dp(e,-1);if(n==46&&!t.shiftKey||ha&&n==68&&r=="c")return Lj(e,1)||dp(e,1);if(n==13||n==27)return!0;if(n==37||ha&&n==66&&r=="c"){let i=n==37?Pj(e,e.state.selection.from)=="ltr"?-1:1:-1;return _j(e,i,r)||dp(e,i)}else if(n==39||ha&&n==70&&r=="c"){let i=n==39?Pj(e,e.state.selection.from)=="ltr"?1:-1:1;return _j(e,i,r)||dp(e,i)}else{if(n==38||ha&&n==80&&r=="c")return Dj(e,-1,r)||dp(e,-1);if(n==40||ha&&n==78&&r=="c")return Dbe(e)||Dj(e,1,r)||dp(e,1);if(r==(ha?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function GT(e,t){e.someProp("transformCopied",h=>{t=h(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=e.someProp("clipboardSerializer")||k1.fromSchema(e.state.schema),a=mZ(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let f=l.firstChild,c,d=0;for(;f&&f.nodeType==1&&(c=pZ[f.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let g=a.createElement(c[h]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),d++}f=l.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let u=e.someProp("clipboardTextSerializer",h=>h(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:u,slice:t}}function fZ(e,t,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!t)return null;let l=!!t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",u=>{t=u(t,s||r,e)}),s)return a=new Qe(Ie.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",u=>{a=u(a,e,!0)}),a;let d=e.someProp("clipboardTextParser",u=>u(t,i,r,e));if(d)a=d;else{let u=i.marks(),{schema:h}=e.state,g=k1.fromSchema(h);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(y=>{let U=o.appendChild(document.createElement("p"));y&&U.appendChild(g.serializeNode(h.text(y,u)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),o=zbe(n),fy&&$be(o);let f=o&&o.querySelector("[data-pm-slice]"),c=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let u=o.firstChild;for(;u&&u.nodeType!=1;)u=u.nextSibling;if(!u)break;o=u}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||e2.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(u){return u.nodeName=="BR"&&!u.nextSibling&&u.parentNode&&!jbe.test(u.parentNode.nodeName)?{ignore:!0}:null}})),c)a=Hbe(jj(a,+c[1],+c[2]),c[4]);else if(a=Qe.maxOpen(Bbe(a.content,i),!0),a.openStart||a.openEnd){let d=0,u=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;u<a.openEnd&&!h.type.spec.isolating;u++,h=h.lastChild);a=jj(a,d,u)}return e.someProp("transformPasted",d=>{a=d(a,e,l)}),a}const jbe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Bbe(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),f;if(!l)return o=null;if(f=o.length&&s.length&&uZ(l,s,a,o[o.length-1],0))o[o.length-1]=f;else{o.length&&(o[o.length-1]=hZ(o[o.length-1],s.length));let c=dZ(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return Ie.from(o)}return e}function dZ(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Ie.from(e));return e}function uZ(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=uZ(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(Ie.from(dZ(n,e,i+1))))}}function hZ(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,hZ(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Ie.empty,!0);return e.copy(n.append(r))}function nA(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(s=0),i<r-1&&(a=nA(a,t,n,r,i+1,s)),i>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ie.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function jj(e,t,n){return t<e.openStart&&(e=new Qe(nA(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Qe(nA(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const pZ={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Bj=null;function mZ(){return Bj||(Bj=document.implementation.createHTMLDocument("title"))}let WE=null;function Fbe(e){let t=window.trustedTypes;return t?(WE||(WE=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),WE.createHTML(e)):e}function zbe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=mZ().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&pZ[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=Fbe(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function $be(e){let t=e.querySelectorAll(Fi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Hbe(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Ie.from(l.create(r[a+1],i)),s++,o++}return new Qe(i,s,o)}const Is={},Ns={},Vbe={touchstart:!0,touchmove:!0};class Wbe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Gbe(e){for(let t in Is){let n=Is[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{Kbe(e,r)&&!XT(e,r)&&(e.editable||!(r.type in Ns))&&n(e,r)},Vbe[t]?{passive:!0}:void 0)}us&&e.dom.addEventListener("input",()=>null),rA(e)}function ku(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Xbe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function rA(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>XT(e,r))})}function XT(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function Kbe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Ybe(e,t){!XT(e,t)&&Is[t.type]&&(e.editable||!(t.type in Ns))&&Is[t.type](e,t)}Ns.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!bZ(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Nf&&Fi&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Eg&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,z0(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||Obe(e,n)?n.preventDefault():ku(e,"key")};Ns.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Ns.keypress=(e,t)=>{let n=t;if(bZ(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||ha&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Pt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function sw(e){return{left:e.clientX,top:e.clientY}}function Zbe(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function KT(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,a=>o>s.depth?a(e,n,s.nodeAfter,s.before(o),i,!0):a(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function cm(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function qbe(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&pt.isSelectable(r)?(cm(e,new pt(n)),!0):!1}function Qbe(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof pt&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(pt.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(cm(e,pt.create(e.state.doc,i)),!0):!1}function Jbe(e,t,n,r,i){return KT(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?Qbe(e,n):qbe(e,n))}function eye(e,t,n,r){return KT(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function tye(e,t,n,r){return KT(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||nye(e,n,r)}function nye(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(cm(e,Pt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)cm(e,Pt.create(r,a+1,a+1+o.content.size));else if(pt.isSelectable(o))cm(e,pt.create(r,a));else continue;return!0}}function YT(e){return Ox(e)}const gZ=ha?"metaKey":"ctrlKey";Is.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=YT(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&Zbe(n,e.input.lastClick)&&!n[gZ]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(sw(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new rye(e,o,n,!!r)):(s=="doubleClick"?eye:tye)(e,o.pos,o.inside,n)?n.preventDefault():ku(e,"pointer"))};class rye{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[gZ],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let c=t.state.doc.resolve(n.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:f}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof pt&&f.from<=o&&f.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&wa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ku(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Of(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(sw(t))),this.updateAllowDefault(t),this.allowDefault||!n?ku(this.view,"pointer"):Jbe(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||us&&this.mightDrag&&!this.mightDrag.node.isAtom||Fi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(cm(this.view,Vt.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):ku(this.view,"pointer")}move(t){this.updateAllowDefault(t),ku(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Is.touchstart=e=>{e.input.lastTouch=Date.now(),YT(e),ku(e,"pointer")};Is.touchmove=e=>{e.input.lastTouch=Date.now(),ku(e,"pointer")};Is.contextmenu=e=>YT(e);function bZ(e,t){return e.composing?!0:us&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const iye=Nf?5e3:-1;Ns.compositionstart=Ns.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Pt&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Fi&&KY&&sye(e)))e.markCursor=e.state.storedMarks||n.marks(),Ox(e,!0),e.markCursor=null;else if(Ox(e,!t.selection.empty),wa&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=e.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}yZ(e,iye)};function sye(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Ns.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.badSafariComposition?e.domObserver.forceFlush():e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,yZ(e,20))};function yZ(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Ox(e),t))}function UZ(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=aye());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function oye(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Q2e(t.focusNode,t.focusOffset),r=J2e(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function aye(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Ox(e,t=!1){if(!(Nf&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),UZ(e),t||e.docView&&e.docView.dirty){let n=VT(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function lye(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const eb=ao&&_u<15||Eg&&rbe<604;Is.copy=Ns.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=eb?null:n.clipboardData,o=r.content(),{dom:a,text:l}=GT(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):lye(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function cye(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function fye(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?tb(e,r.value,null,i,t):tb(e,r.textContent,r.innerHTML,i,t)},50)}function tb(e,t,n,r,i){let s=fZ(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,s||Qe.empty)))return!0;if(!s)return!1;let o=cye(s),a=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xZ(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ns.paste=(e,t)=>{let n=t;if(e.composing&&!Nf)return;let r=eb?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&tb(e,xZ(r),r.getData("text/html"),i,n)?n.preventDefault():fye(e,n)};class wZ{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const dye=ha?"altKey":"ctrlKey";function vZ(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[dye]}Is.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(sw(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof pt?i.to-1:i.to))){if(r&&r.mightDrag)o=pt.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(o=pt.create(e.state.doc,d.posBefore))}}let a=(o||e.state.selection).content(),{dom:l,text:f,slice:c}=GT(e,a);(!n.dataTransfer.files.length||!Fi||XY>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(eb?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",eb||n.dataTransfer.setData("text/plain",f),e.dragging=new wZ(c,vZ(e,n),o)};Is.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Ns.dragover=Ns.dragenter=(e,t)=>t.preventDefault();Ns.drop=(e,t)=>{try{uye(e,t,e.dragging)}finally{e.dragging=null}};function uye(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(sw(t));if(!r)return;let i=e.state.doc.resolve(r.pos),s=n&&n.slice;s?e.someProp("transformPasted",h=>{s=h(s,e,!1)}):s=fZ(e,xZ(t.dataTransfer),eb?null:t.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&vZ(e,t));if(e.someProp("handleDrop",h=>h(e,t,s||Qe.empty,o))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?RY(e.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=e.state.tr;if(o){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let f=l.mapping.map(a),c=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=l.doc;if(c?l.replaceRangeWith(f,f,s.content.firstChild):l.replaceRange(f,f,s),l.doc.eq(d))return;let u=l.doc.resolve(f);if(c&&pt.isSelectable(s.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new pt(u));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((g,y,U,x)=>h=x),l.setSelection(WT(e,u,l.doc.resolve(h)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}Is.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Of(e)},20))};Is.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Is.beforeinput=(e,t)=>{if(Fi&&Nf&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,z0(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Ns)Is[e]=Ns[e];function nb(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class jx{constructor(t,n){this.toDOM=t,this.spec=n||Lh,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Ts(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof jx&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&nb(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Du{constructor(t,n){this.attrs=t,this.spec=n||Lh}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Ts(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Du&&nb(this.attrs,t.attrs)&&nb(this.spec,t.spec)}static is(t){return t.type instanceof Du}destroy(){}}class ZT{constructor(t,n){this.attrs=t,this.spec=n||Lh}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Ts(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof ZT&&nb(this.attrs,t.attrs)&&nb(this.spec,t.spec)}destroy(){}}class Ts{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Ts(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Ts(t,t,new jx(n,r))}static inline(t,n,r,i){return new Ts(t,n,new Du(r,i))}static node(t,n,r,i){return new Ts(t,n,new ZT(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Du}get widget(){return this.type instanceof jx}}const Ip=[],Lh={};class pr{constructor(t,n){this.local=t.length?t:Ip,this.children=n.length?n:Ip}static create(t,n){return n.length?Bx(n,t,0,Lh):ts}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=t&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,n-a,r,i+a,s)}}map(t,n,r){return this==ts||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Lh)}mapInner(t,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?hye(this.children,o||[],t,n,r,i,s):o?new pr(o.sort(Oh),Ip):ts}add(t,n){return n.length?this==ts?pr.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((a,l)=>{let f=l+r,c;if(c=kZ(n,a,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,f+1):i.splice(s,0,l,l+a.nodeSize,Bx(c,a,f+1,Lh)),s+=3}});let o=EZ(s?SZ(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new pr(o.length?this.local.concat(o).sort(Oh):this.local,i||this.children)}remove(t){return t.length==0||this==ts?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let c=0,d;c<t.length;c++)(d=t[c])&&d.from>a&&d.to<l&&(t[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(o,a+1);f!=ts?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new pr(i,r):ts}forChild(t,n){if(this==ts)return this;if(n.isLeaf)return pr.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let s=t+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Du){let f=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;f<c&&(i||(i=[])).push(l.copy(f,c))}}if(i){let a=new pr(i.sort(Oh),Ip);return r?new tu([a,r]):a}return r||ts}eq(t){if(this==t)return!0;if(!(t instanceof pr)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return qT(this.localsInner(t))}localsInner(t){if(this==ts)return Ip;if(t.inlineContent||!this.local.some(Du.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Du||n.push(this.local[r]);return n}forEachSet(t){t(this)}}pr.empty=new pr([],[]);pr.removeOverlap=qT;const ts=pr.empty;class tu{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Lh));return tu.from(r)}forChild(t,n){if(n.isLeaf)return pr.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=ts&&(s instanceof tu?r=r.concat(s.members):r.push(s))}return tu.from(r)}eq(t){if(!(t instanceof tu)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?qT(r?n:n.sort(Oh)):Ip}static from(t){switch(t.length){case 0:return ts;case 1:return t[0];default:return new tu(t.every(n=>n instanceof pr)?t:t.reduce((n,r)=>n.concat(r instanceof pr?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function hye(e,t,n,r,i,s,o){let a=e.slice();for(let f=0,c=s;f<n.maps.length;f++){let d=0;n.maps[f].forEach((u,h,g,y)=>{let U=y-g-(h-u);for(let x=0;x<a.length;x+=3){let v=a[x+1];if(v<0||u>v+c-d)continue;let E=a[x]+c-d;h>=E?a[x+1]=u<=E?-2:-1:u>=c&&U&&(a[x]+=U,a[x+1]+=U)}d+=U}),c=n.maps[f].map(c,-1)}let l=!1;for(let f=0;f<a.length;f+=3)if(a[f+1]<0){if(a[f+1]==-2){l=!0,a[f+1]=-1;continue}let c=n.map(e[f]+s),d=c-i;if(d<0||d>=r.content.size){l=!0;continue}let u=n.map(e[f+1]+s,-1),h=u-i,{index:g,offset:y}=r.content.findIndex(d),U=r.maybeChild(g);if(U&&y==d&&y+U.nodeSize==h){let x=a[f+2].mapInner(n,U,c+1,e[f]+s+1,o);x!=ts?(a[f]=d,a[f+1]=h,a[f+2]=x):(a[f+1]=-2,l=!0)}else l=!0}if(l){let f=pye(a,e,t,n,i,s,o),c=Bx(f,r,0,o);t=c.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,u=0;d<c.children.length;d+=3){let h=c.children[d];for(;u<a.length&&a[u]<h;)u+=3;a.splice(u,0,c.children[d],c.children[d+1],c.children[d+2])}}return new pr(t.sort(Oh),a)}function EZ(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Ts(i.from+t,i.to+t,i.type))}return n}function pye(e,t,n,r,i,s,o){function a(l,f){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(r,i,f);d?n.push(d):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+f+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+s+1);return n}function kZ(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function SZ(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Bx(e,t,n,r){let i=[],s=!1;t.forEach((a,l)=>{let f=kZ(e,a,l+n);if(f){s=!0;let c=Bx(f,a,n+l+1,r);c!=ts&&i.push(l,l+a.nodeSize,c)}});let o=EZ(s?SZ(e):e,-n).sort(Oh);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new pr(o,i):ts}function Oh(e,t){return e.from-t.from||e.to-t.to}function qT(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),Fj(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),Fj(t,i,r.copy(s.from,r.to)));break}}}return t}function Fj(e,t,n){for(;t<e.length&&Oh(n,e[t])>0;)t++;e.splice(t,0,n)}function GE(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ts&&t.push(r)}),e.cursorWrapper&&t.push(pr.create(e.state.doc,[e.cursorWrapper.deco])),tu.from(t)}const mye={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},gye=ao&&_u<=11;class bye{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class yye{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new bye,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ao&&_u<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():us&&t.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(t.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),gye&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,mye)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Rj(this.view)){if(this.suppressingSelectionUpdates)return Of(this.view);if(ao&&_u<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&r1(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=vg(s))n.add(s);for(let s=t.anchorNode;s;s=vg(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Rj(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(l.some(c=>c.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let c of l)if(c.nodeName=="BR"&&c.parentNode){let d=c.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&c.parentNode.removeChild(c)}}else if(wa&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,u]=c;d.parentNode&&d.parentNode.parentNode==u.parentNode?u.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let u of c){let h=u.parentNode;h&&h.nodeName=="LI"&&(!d||wye(t,d)!=h)&&u.remove()}}}let f=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&rw(r)&&(f=VT(t))&&f.eq(Vt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Of(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),Uye(t)),t.input.badSafariComposition&&(t.input.badSafariComposition=!1,vye(t,l)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Of(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++){let d=t.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(ao&&_u<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:d,nextSibling:u}=t.addedNodes[c];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(s=u)}let o=i&&i.parentNode==t.target?ji(i)+1:0,a=r.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?ji(s):t.target.childNodes.length,f=r.localPosFromDOM(t.target,l,1);return{from:a,to:f}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let zj=new WeakMap,$j=!1;function Uye(e){if(!zj.has(e)&&(zj.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=wa,$j)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$j=!0}}function Hj(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return r1(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function xye(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return Hj(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?Hj(e,n):null}function wye(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function vye(e,t){var n;let{focusNode:r,focusOffset:i}=e.domSelectionRange();for(let s of t)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(s,a.firstChild),r==s&&e.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function Eye(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),f,c=l.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(f=[{node:c,offset:l.anchorOffset}],rw(l)||f.push({node:l.focusNode,offset:l.focusOffset})),Fi&&e.input.lastKeyCode===8)for(let U=s;U>i;U--){let x=r.childNodes[U-1],v=x.pmViewDesc;if(x.nodeName=="BR"&&!v){s=U;break}if(!v||v.size)break}let d=e.state.doc,u=e.someProp("domParser")||e2.fromSchema(e.state.schema),h=d.resolve(o),g=null,y=u.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:kye,context:h});if(f&&f[0].pos!=null){let U=f[0].pos,x=f[1]&&f[1].pos;x==null&&(x=U),g={anchor:U+o,head:x+o}}return{doc:y,sel:g,from:o,to:a}}function kye(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(us&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||us&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Sye=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Cye(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let A=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,I=VT(e,A);if(I&&!e.state.selection.eq(I)){if(Fi&&Nf&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",D=>D(e,z0(13,"Enter"))))return;let R=e.state.tr.setSelection(I);A=="pointer"?R.setMeta("pointer",!0):A=="key"&&R.scrollIntoView(),s&&R.setMeta("composition",s),e.dispatch(R)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(n);t=o.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,f=Eye(e,t,n),c=e.state.doc,d=c.slice(f.from,f.to),u,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(u=e.state.selection.to,h="end"):(u=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let g=Tye(d.content,f.doc.content,f.from,u,h);if(g&&e.input.domChangeCount++,(Eg&&e.input.lastIOSEnter>Date.now()-225||Nf)&&i.some(A=>A.nodeType==1&&!Sye.test(A.nodeName))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",A=>A(e,z0(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!g)if(r&&l instanceof Pt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(f.sel){let A=Vj(e,e.state.doc,f.sel);if(A&&!A.eq(e.state.selection)){let I=e.state.tr.setSelection(A);s&&I.setMeta("composition",s),e.dispatch(I)}}return}e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof Pt&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=f.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=f.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),ao&&_u<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>f.from&&f.doc.textBetween(g.start-f.from-1,g.start-f.from+1)==" "&&(g.start--,g.endA--,g.endB--);let y=f.doc.resolveNoCache(g.start-f.from),U=f.doc.resolveNoCache(g.endB-f.from),x=c.resolve(g.start),v=y.sameParent(U)&&y.parent.inlineContent&&x.end()>=g.endA;if((Eg&&e.input.lastIOSEnter>Date.now()-225&&(!v||i.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!v&&y.pos<f.doc.content.size&&(!y.sameParent(U)||!y.parent.inlineContent)&&y.pos<U.pos&&!/\S/.test(f.doc.textBetween(y.pos,U.pos,"","")))&&e.someProp("handleKeyDown",A=>A(e,z0(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>g.start&&Mye(c,g.start,g.endA,y,U)&&e.someProp("handleKeyDown",A=>A(e,z0(8,"Backspace")))){Nf&&Fi&&e.domObserver.suppressSelectionUpdates();return}Fi&&g.endB==g.start&&(e.input.lastChromeDelete=Date.now()),Nf&&!v&&y.start()!=U.start()&&U.parentOffset==0&&y.depth==U.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==g.endA&&(g.endB-=2,U=f.doc.resolveNoCache(g.endB-f.from),setTimeout(()=>{e.someProp("handleKeyDown",function(A){return A(e,z0(13,"Enter"))})},20));let E=g.start,k=g.endA,M=A=>{let I=A||e.state.tr.replace(E,k,f.doc.slice(g.start-f.from,g.endB-f.from));if(f.sel){let R=Vj(e,I.doc,f.sel);R&&!(Fi&&e.composing&&R.empty&&(g.start!=g.endB||e.input.lastChromeDelete<Date.now()-100)&&(R.head==E||R.head==I.mapping.map(k)-1)||ao&&R.empty&&R.head==E)&&I.setSelection(R)}return s&&I.setMeta("composition",s),I.scrollIntoView()},S;if(v)if(y.pos==U.pos){ao&&_u<=11&&y.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Of(e),20));let A=M(e.state.tr.delete(E,k)),I=c.resolve(g.start).marksAcross(c.resolve(g.endA));I&&A.ensureMarks(I),e.dispatch(A)}else if(g.endA==g.endB&&(S=Aye(y.parent.content.cut(y.parentOffset,U.parentOffset),x.parent.content.cut(x.parentOffset,g.endA-x.start())))){let A=M(e.state.tr);S.type=="add"?A.addMark(E,k,S.mark):A.removeMark(E,k,S.mark),e.dispatch(A)}else if(y.parent.child(y.index()).isText&&y.index()==U.index()-(U.textOffset?0:1)){let A=y.parent.textBetween(y.parentOffset,U.parentOffset),I=()=>M(e.state.tr.insertText(A,E,k));e.someProp("handleTextInput",R=>R(e,E,k,A,I))||e.dispatch(I())}else e.dispatch(M());else e.dispatch(M())}function Vj(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:WT(e,t.resolve(n.anchor),t.resolve(n.head))}function Aye(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let f=[];for(let c=0;c<t.childCount;c++)f.push(l(t.child(c)));if(Ie.from(f).eq(e))return{mark:a,type:o}}function Mye(e,t,n,r,i){if(n-t<=i.pos-r.pos||XE(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(XE(s,!0,!0));return!o.parent.isTextblock||o.pos>n||XE(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function XE(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Tye(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&e.size<t.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<t.size&&Wj(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<e.size&&Wj(e.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Wj(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class CZ{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Wbe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Zj),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Kj(this),Xj(this),this.nodeViews=Yj(this),this.docView=Cj(this.state.doc,Gj(this),GE(this),this.dom,this),this.domObserver=new yye(this,(r,i,s,o)=>Cye(this,r,i,s,o)),this.domObserver.start(),Gbe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&rA(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Zj),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(UZ(this),o=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Yj(this);Nye(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&rA(this),this.editable=Kj(this),Xj(this);let l=GE(this),f=Gj(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,f,l);(d||!t.selection.eq(i.selection))&&(o=!0);let u=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&obe(this);if(o){this.domObserver.stop();let h=d&&(ao||Fi)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&Iye(i.selection,t.selection);if(d){let g=Fi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=oye(this)),(s||!this.docView.update(t.doc,f,l,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=Cj(t.doc,f,l,this.dom,this)),g&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Ibe(this))?Of(this,h):(aZ(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():u&&abe(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof pt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&xj(this,n.getBoundingClientRect(),t)}else xj(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new wZ(t.slice,t.move,i<0?void 0:pt.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(ao){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&lbe(this.dom),Of(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return hbe(this,t)}coordsAtPos(t,n=1){return JY(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return ybe(this,n||this.state,t)}pasteHTML(t,n){return tb(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return tb(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return GT(this,t)}destroy(){this.docView&&(Xbe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],GE(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Z2e())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Ybe(this,t)}domSelectionRange(){let t=this.domSelection();return t?us&&this.root.nodeType===11&&tbe(this.dom.ownerDocument)==this.dom&&xye(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}CZ.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function Gj(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Ts.node(0,e.state.doc.content.size,t)]}function Xj(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ts.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Kj(e){return!e.someProp("editable",t=>t(e.state)===!1)}function Iye(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function Yj(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Nye(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function Zj(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Hu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Fx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Rye=typeof navigator<"u"&&/Mac/.test(navigator.platform),_ye=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Bi=0;Bi<10;Bi++)Hu[48+Bi]=Hu[96+Bi]=String(Bi);for(var Bi=1;Bi<=24;Bi++)Hu[Bi+111]="F"+Bi;for(var Bi=65;Bi<=90;Bi++)Hu[Bi]=String.fromCharCode(Bi+32),Fx[Bi]=String.fromCharCode(Bi);for(var KE in Hu)Fx.hasOwnProperty(KE)||(Fx[KE]=Hu[KE]);function Pye(e){var t=Rye&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||_ye&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Fx:Hu)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Dye=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Lye=typeof navigator<"u"&&/Win/.test(navigator.platform);function Oye(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Dye?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function jye(e){let t=Object.create(null);for(let n in e)t[Oye(n)]=e[n];return t}function YE(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Bye(e){return new xr({props:{handleKeyDown:AZ(e)}})}function AZ(e){let t=jye(e);return function(n,r){let i=Pye(r),s,o=t[YE(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=t[YE(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Lye&&r.ctrlKey&&r.altKey)&&(s=Hu[r.keyCode])&&s!=i){let a=t[YE(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var Fye=Object.defineProperty,QT=(e,t)=>{for(var n in t)Fye(e,n,{get:t[n],enumerable:!0})};function ow(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var aw=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,a])=>[o,(...f)=>{const c=a(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!e,l=e||i.tr,f=()=>(!a&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(n).map(([d,u])=>[d,(...g)=>{const y=this.buildProps(l,t),U=u(...g)(y);return o.push(U),c}])),run:f};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...f)=>l(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:ow({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...f)=>l(...f)(o)]))}};return o}},MZ={};QT(MZ,{blur:()=>zye,clearContent:()=>$ye,clearNodes:()=>Hye,command:()=>Vye,createParagraphNear:()=>Wye,cut:()=>Gye,deleteCurrentNode:()=>Xye,deleteNode:()=>Kye,deleteRange:()=>Yye,deleteSelection:()=>Zye,enter:()=>qye,exitCode:()=>Qye,extendMarkRange:()=>Jye,first:()=>e8e,focus:()=>n8e,forEach:()=>r8e,insertContent:()=>i8e,insertContentAt:()=>a8e,joinBackward:()=>f8e,joinDown:()=>c8e,joinForward:()=>d8e,joinItemBackward:()=>u8e,joinItemForward:()=>h8e,joinTextblockBackward:()=>p8e,joinTextblockForward:()=>m8e,joinUp:()=>l8e,keyboardShortcut:()=>b8e,lift:()=>y8e,liftEmptyBlock:()=>U8e,liftListItem:()=>x8e,newlineInCode:()=>w8e,resetAttributes:()=>v8e,scrollIntoView:()=>E8e,selectAll:()=>k8e,selectNodeBackward:()=>S8e,selectNodeForward:()=>C8e,selectParentNode:()=>A8e,selectTextblockEnd:()=>M8e,selectTextblockStart:()=>T8e,setContent:()=>I8e,setMark:()=>Z8e,setMeta:()=>q8e,setNode:()=>Q8e,setNodeSelection:()=>J8e,setTextDirection:()=>eUe,setTextSelection:()=>tUe,sinkListItem:()=>nUe,splitBlock:()=>rUe,splitListItem:()=>iUe,toggleList:()=>sUe,toggleMark:()=>oUe,toggleNode:()=>aUe,toggleWrap:()=>lUe,undoInputRule:()=>cUe,unsetAllMarks:()=>fUe,unsetMark:()=>dUe,unsetTextDirection:()=>uUe,updateAttributes:()=>hUe,wrapIn:()=>pUe,wrapInList:()=>mUe});var zye=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),$ye=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),Hye=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:f,mapping:c}=t,d=f.resolve(c.map(l)),u=f.resolve(c.map(l+a.nodeSize)),h=d.blockRange(u);if(!h)return;const g=Kg(h);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(h.start,y)}(g||g===0)&&t.lift(h,g)})}),!0},Vye=e=>t=>e(t),Wye=()=>({state:e,dispatch:t})=>L2e(e,t),Gye=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Pt(r.doc.resolve(Math.max(o-1,0)))),!0},Xye=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const a=i.before(s),l=i.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1};function Jr(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var Kye=e=>({tr:t,state:n,dispatch:r})=>{const i=Jr(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),f=s.after(o);t.delete(l,f).scrollIntoView()}return!0}return!1},Yye=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},Zye=()=>({state:e,dispatch:t})=>k2e(e,t),qye=()=>({commands:e})=>e.keyboardShortcut("Enter"),Qye=()=>({state:e,dispatch:t})=>D2e(e,t);function JT(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function zx(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:JT(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function TZ(e,t,n={}){return e.find(r=>r.type===t&&zx(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function qj(e,t,n={}){return!!TZ(e,t,n)}function eI(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!TZ([...i.node.marks],t,n)))return;let o=i.index,a=e.start()+i.offset,l=o+1,f=a+i.node.nodeSize;for(;o>0&&qj([...e.parent.child(o-1).marks],t,n);)o-=1,a-=e.parent.child(o).nodeSize;for(;l<e.parent.childCount&&qj([...e.parent.child(l).marks],t,n);)f+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:f}}function rd(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var Jye=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=rd(e,r.schema),{doc:o,selection:a}=n,{$from:l,from:f,to:c}=a;if(i){const d=eI(l,s,t);if(d&&d.from<=f&&d.to>=c){const u=Pt.create(o,d.from,d.to);n.setSelection(u)}}return!0},e8e=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function IZ(e){return e instanceof Pt}function th(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function NZ(e,t=null){if(!t)return null;const n=Vt.atStart(e),r=Vt.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Pt.create(e,th(0,i,s),th(e.content.size,i,s)):Pt.create(e,th(t,i,s),th(t,i,s))}function Qj(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function $x(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function t8e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var n8e=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{($x()||Qj())&&r.dom.focus(),t8e()&&!$x()&&!Qj()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&e===null||e===!1)return!0}catch{return!1}if(s&&e===null&&!IZ(n.state.selection))return o(),!0;const a=NZ(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},r8e=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),i8e=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),RZ=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&RZ(r)}return e};function gU(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return RZ(n)}function rb(e,t,n){if(e instanceof Ru||e instanceof Ie)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return Ie.fromArray(e.map(a=>t.nodeFromJSON(a)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),rb("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new wY({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(o=!0,a=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?e2.fromSchema(l).parseSlice(gU(e),n.parseOptions):e2.fromSchema(l).parse(gU(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=e2.fromSchema(t);return n.slice?s.parseSlice(gU(e),n.parseOptions).content:s.parse(gU(e),n.parseOptions)}return rb("",t,n)}function s8e(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof wi||i instanceof Si))return;const s=e.mapping.maps[r];let o=0;s.forEach((a,l,f,c)=>{o===0&&(o=c)}),e.setSelection(Vt.near(e.doc.resolve(o),n))}var o8e=e=>!("type"in e),a8e=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=U=>{s.emit("contentError",{editor:s,error:U,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{rb(t,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(U){l(U)}try{a=rb(t,s.schema,{parseOptions:f,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(U){return l(U),!1}let{from:c,to:d}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},u=!0,h=!0;if((o8e(a)?a:[a]).forEach(U=>{U.check(),u=u?U.isText&&U.marks.length===0:!1,h=h?U.isBlock:!1}),c===d&&h){const{parent:U}=r.doc.resolve(c);U.isTextblock&&!U.type.spec.code&&!U.childCount&&(c-=1,d+=1)}let y;if(u){if(Array.isArray(t))y=t.map(U=>U.text||"").join("");else if(t instanceof Ie){let U="";t.forEach(x=>{x.text&&(U+=x.text)}),y=U}else typeof t=="object"&&t&&t.text?y=t.text:y=t;r.insertText(y,c,d)}else{y=a;const U=r.doc.resolve(c),x=U.node(),v=U.parentOffset===0,E=x.isText||x.isTextblock,k=x.content.size>0;v&&E&&k&&(c=Math.max(0,c-1)),r.replaceWith(c,d,y)}n.updateSelection&&s8e(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:y})}return!0},l8e=()=>({state:e,dispatch:t})=>N2e(e,t),c8e=()=>({state:e,dispatch:t})=>R2e(e,t),f8e=()=>({state:e,dispatch:t})=>S2e(e,t),d8e=()=>({state:e,dispatch:t})=>T2e(e,t),u8e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=ew(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},h8e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=ew(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},p8e=()=>({state:e,dispatch:t})=>C2e(e,t),m8e=()=>({state:e,dispatch:t})=>A2e(e,t);function _Z(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function g8e(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))$x()||_Z()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var b8e=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=g8e(e).split(/-(?!$)/),o=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,a))});return l==null||l.steps.forEach(f=>{const c=f.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Vu(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Jr(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(d,u)=>{if(d.isText)return;const h=Math.max(r,u),g=Math.min(i,u+d.nodeSize);a.push({node:d,from:h,to:g})});const l=i-r,f=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>zx(d.node.attrs,n,{strict:!1}));return s?!!f.length:f.reduce((d,u)=>d+u.to-u.from,0)>=l}var y8e=(e,t={})=>({state:n,dispatch:r})=>{const i=Jr(e,n.schema);return Vu(n,i,t)?_2e(n,r):!1},U8e=()=>({state:e,dispatch:t})=>O2e(e,t),x8e=e=>({state:t,dispatch:n})=>{const r=Jr(e,t.schema);return G2e(r)(t,n)},w8e=()=>({state:e,dispatch:t})=>P2e(e,t);function lw(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Jj(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var v8e=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=lw(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=Jr(e,r.schema)),a==="mark"&&(o=rd(e,r.schema));let l=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(c,d)=>{s&&s===c.type&&(l=!0,i&&n.setNodeMarkup(d,void 0,Jj(c.attrs,t))),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&(l=!0,i&&n.addMark(d,d+c.nodeSize,o.create(Jj(u.attrs,t))))})})}),l},E8e=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),k8e=()=>({tr:e,dispatch:t})=>{if(t){const n=new xa(e.doc);e.setSelection(n)}return!0},S8e=()=>({state:e,dispatch:t})=>M2e(e,t),C8e=()=>({state:e,dispatch:t})=>I2e(e,t),A8e=()=>({state:e,dispatch:t})=>j2e(e,t),M8e=()=>({state:e,dispatch:t})=>z2e(e,t),T8e=()=>({state:e,dispatch:t})=>F2e(e,t);function iA(e,t,n={},r={}){return rb(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var I8e=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const f=iA(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,f).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function PZ(e,t){const n=rd(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function DZ(e,t){const n=new OY(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function N8e(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function R8e(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function _8e(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function cw(e){return t=>_8e(t.$from,e)}function dt(e,t,n){return e.config[t]===void 0&&e.parent?dt(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?dt(e.parent,t,n):null}):e.config[t]}function tI(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=dt(t,"addExtensions",n);return r?[t,...tI(r())]:t}).flat(10)}function nI(e,t){const n=k1.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function LZ(e){return typeof e=="function"}function gn(e,t=void 0,...n){return LZ(e)?t?e.bind(t)(...n):e(...n):e}function P8e(e={}){return Object.keys(e).length===0&&e.constructor===Object}function kg(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function OZ(e){const t=[],{nodeExtensions:n,markExtensions:r}=kg(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},o=n.filter(f=>f.name!=="text").map(f=>f.name),a=r.map(f=>f.name),l=[...o,...a];return e.forEach(f=>{const c={name:f.name,options:f.options,storage:f.storage,extensions:i},d=dt(f,"addGlobalAttributes",c);if(!d)return;d().forEach(h=>{let g;Array.isArray(h.types)?g=h.types:h.types==="*"?g=l:h.types==="nodes"?g=o:h.types==="marks"?g=a:g=[],g.forEach(y=>{Object.entries(h.attributes).forEach(([U,x])=>{t.push({type:y,name:U,attribute:{...s,...x}})})})})}),i.forEach(f=>{const c={name:f.name,options:f.options,storage:f.storage},d=dt(f,"addAttributes",c);if(!d)return;const u=d();Object.entries(u).forEach(([h,g])=>{const y={...s,...g};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&(y==null?void 0:y.default)===void 0&&delete y.default,t.push({type:f.name,name:h,attribute:y})})}),t}function Fr(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],f=a.filter(c=>!l.includes(c));r[i]=[...l,...f].join(" ")}else if(i==="style"){const a=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],f=new Map;l.forEach(c=>{const[d,u]=c.split(":").map(h=>h.trim());f.set(d,u)}),a.forEach(c=>{const[d,u]=c.split(":").map(h=>h.trim());f.set(d,u)}),r[i]=Array.from(f.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function ib(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Fr(n,r),{})}function D8e(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function eB(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):D8e(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function tB(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&P8e(n)?!1:n!=null))}function nB(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function L8e(e,t){var n;const r=OZ(e),{nodeExtensions:i,markExtensions:s}=kg(e),o=(n=i.find(f=>dt(f,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(f=>{const c=r.filter(x=>x.type===f.name),d={name:f.name,options:f.options,storage:f.storage,editor:t},u=e.reduce((x,v)=>{const E=dt(v,"extendNodeSchema",d);return{...x,...E?E(f):{}}},{}),h=tB({...u,content:gn(dt(f,"content",d)),marks:gn(dt(f,"marks",d)),group:gn(dt(f,"group",d)),inline:gn(dt(f,"inline",d)),atom:gn(dt(f,"atom",d)),selectable:gn(dt(f,"selectable",d)),draggable:gn(dt(f,"draggable",d)),code:gn(dt(f,"code",d)),whitespace:gn(dt(f,"whitespace",d)),linebreakReplacement:gn(dt(f,"linebreakReplacement",d)),defining:gn(dt(f,"defining",d)),isolating:gn(dt(f,"isolating",d)),attrs:Object.fromEntries(c.map(nB))}),g=gn(dt(f,"parseHTML",d));g&&(h.parseDOM=g.map(x=>eB(x,c)));const y=dt(f,"renderHTML",d);y&&(h.toDOM=x=>y({node:x,HTMLAttributes:ib(x,c)}));const U=dt(f,"renderText",d);return U&&(h.toText=U),[f.name,h]})),l=Object.fromEntries(s.map(f=>{const c=r.filter(U=>U.type===f.name),d={name:f.name,options:f.options,storage:f.storage,editor:t},u=e.reduce((U,x)=>{const v=dt(x,"extendMarkSchema",d);return{...U,...v?v(f):{}}},{}),h=tB({...u,inclusive:gn(dt(f,"inclusive",d)),excludes:gn(dt(f,"excludes",d)),group:gn(dt(f,"group",d)),spanning:gn(dt(f,"spanning",d)),code:gn(dt(f,"code",d)),attrs:Object.fromEntries(c.map(nB))}),g=gn(dt(f,"parseHTML",d));g&&(h.parseDOM=g.map(U=>eB(U,c)));const y=dt(f,"renderHTML",d);return y&&(h.toDOM=U=>y({mark:U,HTMLAttributes:ib(U,c)})),[f.name,h]}));return new wY({topNode:o,nodes:a,marks:l})}function O8e(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function i2(e){return e.sort((n,r)=>{const i=dt(n,"priority")||100,s=dt(r,"priority")||100;return i>s?-1:i<s?1:0})}function jZ(e){const t=i2(tI(e)),n=O8e(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function BZ(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return e.nodesBetween(r,i,(l,f,c,d)=>{var u;l.isBlock&&f>r&&(a+=s);const h=o==null?void 0:o[l.type.name];if(h)return c&&(a+=h({node:l,pos:f,parent:c,index:d,range:t})),!1;l.isText&&(a+=(u=l==null?void 0:l.text)==null?void 0:u.slice(Math.max(r,f)-f,i-f))}),a}function j8e(e,t){const n={from:0,to:e.content.size};return BZ(e,n,t)}function FZ(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function B8e(e,t){const n=Jr(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function zZ(e,t){const n=lw(typeof t=="string"?t:t.name,e.schema);return n==="node"?B8e(e,t):n==="mark"?PZ(e,t):{}}function F8e(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function z8e(e){const t=F8e(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function $Z(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const f=t.slice(s).map(a,-1),c=t.slice(s).map(l),d=t.invert().map(f,-1),u=t.invert().map(c);r.push({oldRange:{from:d,to:u},newRange:{from:f,to:c}})})}),z8e(r)}function rI(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=eI(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var $8e=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===t?o=a:s-=1}return[o,s]};function J6(e,t){return t.nodes[e]||t.marks[e]||null}function v3(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var H8e=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,a)=>{var l,f;const c=((f=(l=i.type.spec).toText)==null?void 0:f.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function sA(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?rd(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>zx(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:u})=>{const h=d.pos,g=u.pos;e.doc.nodesBetween(h,g,(y,U)=>{if(s&&y.inlineContent&&!y.type.allowsMarkType(s))return!1;if(!y.isText&&!y.marks.length)return;const x=Math.max(h,U),v=Math.min(g,U+y.nodeSize),E=v-x;o+=E,a.push(...y.marks.map(k=>({mark:k,from:x,to:v})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>zx(d.mark.attrs,n,{strict:!1})).reduce((d,u)=>d+u.to-u.from,0),f=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,u)=>d+u.to-u.from,0);return(l>0?l+f:l)>=o}function V8e(e,t,n={}){if(!t)return Vu(e,null,n)||sA(e,null,n);const r=lw(t,e.schema);return r==="node"?Vu(e,t,n):r==="mark"?sA(e,t,n):!1}var W8e=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=cw(a=>a.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},G8e=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function rB(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function iB(e,t){const{nodeExtensions:n}=kg(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=gn(dt(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function fw(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(fw(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function HZ(e){return e instanceof pt}var VZ=class WZ{constructor(t){this.position=t}static fromJSON(t){return new WZ(t.position)}toJSON(){return{position:this.position}}};function X8e(e,t){const n=t.mapping.mapResult(e.position);return{position:new VZ(n.pos),mapResult:n}}function K8e(e){return new VZ(e)}function Y8e(e,t,n){var r;const{selection:i}=t;let s=null;if(IZ(i)&&(s=i.$cursor),s){const a=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(f=>f.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let f=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(c,d,u)=>{if(f)return!1;if(c.isInline){const h=!u||u.type.allowsMarkType(n),g=!!n.isInSet(c.marks)||!c.marks.some(y=>y.type.excludes(n));f=h&&g}return!f}),f})}var Z8e=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=rd(e,r.schema);if(i)if(o){const f=PZ(r,l);n.addStoredMark(l.create({...f,...t}))}else a.forEach(f=>{const c=f.$from.pos,d=f.$to.pos;r.doc.nodesBetween(c,d,(u,h)=>{const g=Math.max(h,c),y=Math.min(h+u.nodeSize,d);u.marks.find(x=>x.type===l)?u.marks.forEach(x=>{l===x.type&&n.addMark(g,y,l.create({...x.attrs,...t}))}):n.addMark(g,y,l.create(t))})});return Y8e(r,n,l)},q8e=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),Q8e=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Jr(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>bj(s,{...o,...t})(n)?!0:a.clearNodes()).command(({state:a})=>bj(s,{...o,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},J8e=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=th(e,0,r.content.size),s=pt.create(r,i);t.setSelection(s)}return!0},eUe=(e,t)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let o,a;return typeof t=="number"?(o=t,a=t):t&&"from"in t&&"to"in t?(o=t.from,a=t.to):(o=s.from,a=s.to),i&&n.doc.nodesBetween(o,a,(l,f)=>{l.isText||n.setNodeMarkup(f,void 0,{...l.attrs,dir:e})}),!0},tUe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Pt.atStart(r).from,a=Pt.atEnd(r).to,l=th(i,o,a),f=th(s,o,a),c=Pt.create(r,l,f);t.setSelection(c)}return!0},nUe=e=>({state:t,dispatch:n})=>{const r=Jr(e,t.schema);return Y2e(r)(t,n)};function sB(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var rUe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,f=i.extensionManager.attributes,c=v3(f,a.node().type.name,a.node().attrs);if(s instanceof pt&&s.node.isBlock)return!a.parentOffset||!am(o,a.pos)?!1:(r&&(e&&sB(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,u=a.depth===0?void 0:N8e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&u?[{type:u,attrs:c}]:void 0,g=am(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!g&&am(t.doc,t.mapping.map(a.pos),1,u?[{type:u}]:void 0)&&(g=!0,h=u?[{type:u,attrs:c}]:void 0),r){if(g&&(s instanceof Pt&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,h),u&&!d&&!a.parentOffset&&a.parent.type!==u)){const y=t.mapping.map(a.before()),U=t.doc.resolve(y);a.node(-1).canReplaceWith(U.index(),U.index()+1,u)&&t.setNodeMarkup(t.mapping.map(a.before()),u)}e&&sB(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return g},iUe=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Jr(e,r.schema),{$from:l,$to:f}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(f))return!1;const d=l.node(-1);if(d.type!==a)return!1;const u=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let x=Ie.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let I=l.depth-v;I>=l.depth-3;I-=1)x=Ie.from(l.node(I).copy(x));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...v3(u,l.node().type.name,l.node().attrs),...t},M=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(k))||void 0;x=x.append(Ie.from(a.createAndFill(null,M)||void 0));const S=l.before(l.depth-(v-1));n.replace(S,l.after(-E),new Qe(x,4-v,0));let A=-1;n.doc.nodesBetween(S,n.doc.content.size,(I,R)=>{if(A>-1)return!1;I.isTextblock&&I.content.size===0&&(A=R+1)}),A>-1&&n.setSelection(Pt.near(n.doc.resolve(A))),n.scrollIntoView()}return!0}const h=f.pos===l.end()?d.contentMatchAt(0).defaultType:null,g={...v3(u,d.type.name,d.attrs),...t},y={...v3(u,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,f.pos);const U=h?[{type:a,attrs:g},{type:h,attrs:y}]:[{type:a,attrs:g}];if(!am(n.doc,l.pos,2))return!1;if(i){const{selection:x,storedMarks:v}=r,{splittableMarks:E}=s.extensionManager,k=v||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,U).scrollIntoView(),!k||!i)return!0;const M=k.filter(S=>E.includes(S.type.name));n.ensureMarks(M)}return!0},ZE=(e,t)=>{const n=cw(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&e0(e.doc,n.pos)&&e.join(n.pos),!0},qE=(e,t)=>{const n=cw(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&e0(e.doc,r)&&e.join(r),!0},sUe=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:f,can:c})=>{const{extensions:d,splittableMarks:u}=i.extensionManager,h=Jr(e,o.schema),g=Jr(t,o.schema),{selection:y,storedMarks:U}=o,{$from:x,$to:v}=y,E=x.blockRange(v),k=U||y.$to.parentOffset&&y.$from.marks();if(!E)return!1;const M=cw(S=>iB(S.type.name,d))(y);if(E.depth>=1&&M&&E.depth-M.depth<=1){if(M.node.type===h)return f.liftListItem(g);if(iB(M.node.type.name,d)&&h.validContent(M.node.content)&&a)return l().command(()=>(s.setNodeMarkup(M.pos,h),!0)).command(()=>ZE(s,h)).command(()=>qE(s,h)).run()}return!n||!k||!a?l().command(()=>c().wrapInList(h,r)?!0:f.clearNodes()).wrapInList(h,r).command(()=>ZE(s,h)).command(()=>qE(s,h)).run():l().command(()=>{const S=c().wrapInList(h,r),A=k.filter(I=>u.includes(I.type.name));return s.ensureMarks(A),S?!0:f.clearNodes()}).wrapInList(h,r).command(()=>ZE(s,h)).command(()=>qE(s,h)).run()},oUe=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=rd(e,r.schema);return sA(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},aUe=(e,t,n={})=>({state:r,commands:i})=>{const s=Jr(e,r.schema),o=Jr(t,r.schema),a=Vu(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},lUe=(e,t={})=>({state:n,commands:r})=>{const i=Jr(e,n.schema);return Vu(n,i,t)?r.lift(i):r.wrapIn(i,t)},cUe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},fUe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},dUe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=n,l=rd(e,r.schema),{$from:f,empty:c,ranges:d}=a;if(!i)return!0;if(c&&o){let{from:u,to:h}=a;const g=(s=f.marks().find(U=>U.type===l))==null?void 0:s.attrs,y=eI(f,l,g);y&&(u=y.from,h=y.to),n.removeMark(u,h,l)}else d.forEach(u=>{n.removeMark(u.$from.pos,u.$to.pos,l)});return n.removeStoredMark(l),!0},uUe=e=>({tr:t,state:n,dispatch:r})=>{const{selection:i}=n;let s,o;return typeof e=="number"?(s=e,o=e):e&&"from"in e&&"to"in e?(s=e.from,o=e.to):(s=i.from,o=i.to),r&&t.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const f={...a.attrs};delete f.dir,t.setNodeMarkup(l,void 0,f)}),!0},hUe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=lw(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=Jr(e,r.schema)),a==="mark"&&(o=rd(e,r.schema));let l=!1;return n.selection.ranges.forEach(f=>{const c=f.$from.pos,d=f.$to.pos;let u,h,g,y;n.selection.empty?r.doc.nodesBetween(c,d,(U,x)=>{s&&s===U.type&&(l=!0,g=Math.max(x,c),y=Math.min(x+U.nodeSize,d),u=x,h=U)}):r.doc.nodesBetween(c,d,(U,x)=>{x<c&&s&&s===U.type&&(l=!0,g=Math.max(x,c),y=Math.min(x+U.nodeSize,d),u=x,h=U),x>=c&&x<=d&&(s&&s===U.type&&(l=!0,i&&n.setNodeMarkup(x,void 0,{...U.attrs,...t})),o&&U.marks.length&&U.marks.forEach(v=>{if(o===v.type&&(l=!0,i)){const E=Math.max(x,c),k=Math.min(x+U.nodeSize,d);n.addMark(E,k,o.create({...v.attrs,...t}))}}))}),h&&(u!==void 0&&i&&n.setNodeMarkup(u,void 0,{...h.attrs,...t}),o&&h.marks.length&&h.marks.forEach(U=>{o===U.type&&i&&n.addMark(g,y,o.create({...U.attrs,...t}))}))}),l},pUe=(e,t={})=>({state:n,dispatch:r})=>{const i=Jr(e,n.schema);return $2e(i,t)(n,r)},mUe=(e,t={})=>({state:n,dispatch:r})=>{const i=Jr(e,n.schema);return H2e(i,t)(n,r)},gUe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},dw=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},bUe=(e,t)=>{if(JT(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function bU(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const f=l.state.doc.resolve(r);if(f.parent.type.spec.code||(t=f.nodeBefore||f.nodeAfter)!=null&&t.marks.find(u=>u.type.spec.code))return!1;let c=!1;const d=H8e(f)+s;return o.forEach(u=>{if(c)return;const h=bUe(d,u.find);if(!h)return;const g=l.state.tr,y=ow({state:l.state,transaction:g}),U={from:r-(h[0].length-s.length),to:i},{commands:x,chain:v,can:E}=new aw({editor:n,state:y});u.handler({state:y,range:U,match:h,commands:x,chain:v,can:E})===null||!g.steps.length||(u.undoable&&g.setMeta(a,{transform:g,from:r,to:i,text:s}),l.dispatch(g),c=!0)}),c}function yUe(e){const{editor:t,rules:n}=e,r=new xr({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=nI(Ie.from(c),o.schema);const{from:d}=l,u=d+c.length;bU({editor:t,from:d,to:u,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return bU({editor:t,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&bU({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?bU({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function UUe(e){return Object.prototype.toString.call(e).slice(8,-1)}function yU(e){return UUe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function GZ(e,t){const n={...e};return yU(e)&&yU(t)&&Object.keys(t).forEach(r=>{yU(t[r])&&yU(e[r])?n[r]=GZ(e[r],t[r]):n[r]=t[r]}),n}var iI=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...gn(dt(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...gn(dt(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>GZ(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},S1=class XZ extends iI{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new XZ(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const l=o.find(f=>(f==null?void 0:f.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function xUe(e){return typeof e=="number"}var KZ=class{constructor(e){this.find=e.find,this.handler=e.handler}},wUe=(e,t,n)=>{if(JT(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function vUe(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=e,{commands:l,chain:f,can:c}=new aw({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,g)=>{var y,U,x,v,E;if((U=(y=h.type)==null?void 0:y.spec)!=null&&U.code||!(h.isText||h.isTextblock||h.isInline))return;const k=(E=(v=(x=h.content)==null?void 0:x.size)!=null?v:h.nodeSize)!=null?E:0,M=Math.max(r,g),S=Math.min(i,g+k);if(M>=S)return;const A=h.isText?h.text||"":h.textBetween(M-g,S-g,void 0,"");wUe(A,s.find,o).forEach(R=>{if(R.index===void 0)return;const D=M+R.index+1,_=D+R[0].length,P={from:n.tr.mapping.map(D),to:n.tr.mapping.map(_)},$=s.handler({state:n,range:P,match:R,commands:l,chain:f,can:c,pasteEvent:o,dropEvent:a});d.push($)})}),d.every(h=>h!==null)}var UU=null,EUe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function kUe(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:d,to:u,rule:h,pasteEvt:g})=>{const y=c.tr,U=ow({state:c,transaction:y});if(!(!vUe({editor:t,state:U,from:Math.max(d-1,0),to:u.b-1,rule:h,pasteEvent:g,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(c=>new xr({view(d){const u=g=>{var y;r=(y=d.dom.parentElement)!=null&&y.contains(g.target)?d.dom.parentElement:null,r&&(UU=t)},h=()=>{UU&&(UU=null)};return window.addEventListener("dragstart",u),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",u),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,u)=>{if(s=r===d.dom.parentElement,a=u,!s){const h=UU;h!=null&&h.isEditable&&setTimeout(()=>{const g=h.state.selection;g&&h.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,u)=>{var h;const g=(h=u.clipboardData)==null?void 0:h.getData("text/html");return o=u,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,u,h)=>{const g=d[0],y=g.getMeta("uiEvent")==="paste"&&!i,U=g.getMeta("uiEvent")==="drop"&&!s,x=g.getMeta("applyPasteRules"),v=!!x;if(!y&&!U&&!v)return;if(v){let{text:M}=x;typeof M=="string"?M=M:M=nI(Ie.from(M),h.schema);const{from:S}=x,A=S+M.length,I=EUe(M);return l({rule:c,state:h,from:S,to:{b:A},pasteEvt:I})}const E=u.doc.content.findDiffStart(h.doc.content),k=u.doc.content.findDiffEnd(h.doc.content);if(!(!xUe(E)||!k||E===k.b))return l({rule:c,state:h,from:E,to:k,pasteEvt:o})}}))}var uw=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=jZ(e),this.schema=L8e(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:J6(t.name,this.schema)},r=dt(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return i2([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:J6(r.name,this.schema)},s=[],o=dt(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&dt(r,"exitable",i)&&(a.ArrowRight=()=>S1.handleExit({editor:e,mark:r})),o){const u=Object.fromEntries(Object.entries(o()).map(([h,g])=>[h,()=>g({editor:e})]));a={...a,...u}}const l=Bye(a);s.push(l);const f=dt(r,"addInputRules",i);if(rB(r,e.options.enableInputRules)&&f){const u=f();if(u&&u.length){const h=yUe({editor:e,rules:u}),g=Array.isArray(h)?h:[h];s.push(...g)}}const c=dt(r,"addPasteRules",i);if(rB(r,e.options.enablePasteRules)&&c){const u=c();if(u&&u.length){const h=kUe({editor:e,rules:u});s.push(...h)}}const d=dt(r,"addProseMirrorPlugins",i);if(d){const u=d();s.push(...u)}return s})}get attributes(){return OZ(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=kg(this.extensions);return Object.fromEntries(t.filter(n=>!!dt(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Jr(n.name,this.schema)},s=dt(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,f,c,d,u)=>{const h=ib(l,r);return o({node:l,view:f,getPos:c,decorations:d,innerDecorations:u,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}dispatchTransaction(e){const{editor:t}=this;return i2([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:J6(i.name,this.schema)},o=dt(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:r})}:r},e)}transformPastedHTML(e){const{editor:t}=this;return i2([...this.extensions]).reduce((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:J6(i.name,this.schema)},o=dt(i,"transformPastedHTML",s);return o?(a,l)=>{const f=r(a,l);return o.call(s,f)}:r},e||(r=>r))}get markViews(){const{editor:e}=this,{markExtensions:t}=kg(this.extensions);return Object.fromEntries(t.filter(n=>!!dt(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:rd(n.name,this.schema)},s=dt(n,"addMarkView",i);if(!s)return[];const o=(a,l,f)=>{const c=ib(a,r);return s()({mark:a,view:l,inline:f,editor:e,extension:n,HTMLAttributes:c,updateAttributes:d=>{OUe(a,e,d)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:J6(t.name,this.schema)};t.type==="mark"&&((n=gn(dt(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=dt(t,"onBeforeCreate",r),s=dt(t,"onCreate",r),o=dt(t,"onUpdate",r),a=dt(t,"onSelectionUpdate",r),l=dt(t,"onTransaction",r),f=dt(t,"onFocus",r),c=dt(t,"onBlur",r),d=dt(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),f&&this.editor.on("focus",f),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};uw.resolve=jZ;uw.sort=i2;uw.flatten=tI;var SUe={};QT(SUe,{ClipboardTextSerializer:()=>ZZ,Commands:()=>qZ,Delete:()=>QZ,Drop:()=>JZ,Editable:()=>eq,FocusEvents:()=>nq,Keymap:()=>rq,Paste:()=>iq,Tabindex:()=>sq,TextDirection:()=>oq,focusEventsPluginKey:()=>tq});var zr=class YZ extends iI{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new YZ(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},ZZ=zr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new xr({key:new fi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=FZ(n);return BZ(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),qZ=zr.create({name:"commands",addCommands(){return{...MZ}}}),QZ=zr.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,a,l,f;if((f=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?f:e.getMeta("y-sync$"))return;const c=DZ(e.before,[e,...t]);$Z(c).forEach(h=>{c.mapping.mapResult(h.oldRange.from).deletedAfter&&c.mapping.mapResult(h.oldRange.to).deletedBefore&&c.before.nodesBetween(h.oldRange.from,h.oldRange.to,(g,y)=>{const U=y+g.nodeSize-2,x=h.oldRange.from<=y&&U<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:g,from:y,to:U,newFrom:c.mapping.map(y),newTo:c.mapping.map(U),deletedRange:h.oldRange,newRange:h.newRange,partial:!x,editor:this.editor,transaction:e,combinedTransform:c})})});const u=c.mapping;c.steps.forEach((h,g)=>{var y,U;if(h instanceof cl){const x=u.slice(g).map(h.from,-1),v=u.slice(g).map(h.to),E=u.invert().map(x,-1),k=u.invert().map(v),M=(y=c.doc.nodeAt(x-1))==null?void 0:y.marks.some(A=>A.eq(h.mark)),S=(U=c.doc.nodeAt(v))==null?void 0:U.marks.some(A=>A.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:E,to:k},newRange:{from:x,to:v},partial:!!(S||M),editor:this.editor,transaction:e,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),JZ=zr.create({name:"drop",addProseMirrorPlugins(){return[new xr({key:new fi("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),eq=zr.create({name:"editable",addProseMirrorPlugins(){return[new xr({key:new fi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),tq=new fi("focusEvents"),nq=zr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new xr({key:tq,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),rq=zr.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:f}=a,{empty:c,$anchor:d}=l,{pos:u,parent:h}=d,g=d.parent.isTextblock&&u>0?a.doc.resolve(u-1):d,y=g.parent.type.spec.isolating,U=d.pos-d.parentOffset,x=y&&g.parent.childCount===1?U===d.pos:Vt.atStart(f).from===u;return!c||!h.type.isTextblock||h.textContent.length||!x||x&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return $x()||_Z()?s:i},addProseMirrorPlugins(){return[new xr({key:new fi("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(y=>y.getMeta("composition")))return;const r=e.some(y=>y.docChanged)&&!t.doc.eq(n.doc),i=e.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=t.selection,l=Vt.atStart(t.doc).from,f=Vt.atEnd(t.doc).to;if(s||!(o===l&&a===f)||!fw(n.doc))return;const u=n.tr,h=ow({state:n,transaction:u}),{commands:g}=new aw({editor:this.editor,state:h});if(g.clearNodes(),!!u.steps.length)return u}})]}}),iq=zr.create({name:"paste",addProseMirrorPlugins(){return[new xr({key:new fi("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),sq=zr.create({name:"tabindex",addProseMirrorPlugins(){return[new xr({key:new fi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),oq=zr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=kg(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new xr({key:new fi("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),CUe=class D5{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new D5(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new D5(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new D5(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=n.isInline,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!i&&!o&&l.depth<=this.depth)return;const f=new D5(l,this.editor,i,i||o?n:null);i&&(f.actualDepth=this.depth+1),t.push(f)}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},AUe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function MUe(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var TUe=class extends gUe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:X8e,createMappablePosition:K8e},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=NZ(t,this.options.autofocus);this.editorState=zp.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=MUe(AUe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=LZ(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[eq,ZZ.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),qZ,nq,rq,sq,JZ,iq,QZ,oq.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new uw(r,this)}createCommandManager(){this.commandManager=new aw({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=iA(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=iA(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){const{editorProps:t,enableExtensionDispatchTransaction:n}=this.options,r=t.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r,s=t.transformPastedHTML,o=this.extensionManager.transformPastedHTML(s);this.editorView=new CZ(e,{...t,attributes:{role:"textbox",...t==null?void 0:t.attributes},dispatchTransaction:i,transformPastedHTML:o,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(f=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(f)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return zZ(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return V8e(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return nI(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return j8e(this.state.doc,{blockSeparator:t,textSerializers:{...FZ(this.schema),...n}})}get isEmpty(){return fw(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new CUe(t,this)}get $doc(){return this.$pos(0)}};function Sg(e){return new dw({find:e.find,handler:({state:t,range:n,match:r})=>{const i=gn(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),f=n.from+a.indexOf(o),c=f+o.length;if(rI(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(y=>y===e.type&&y!==h.mark.type)).filter(h=>h.to>f).length)return null;c<n.to&&s.delete(c,n.to),f>n.from&&s.delete(n.from+l,f);const u=n.from+l+o.length;s.addMark(n.from+l,u,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function IUe(e){return new dw({find:e.find,handler:({state:t,range:n,match:r})=>{const i=gn(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let a=n.to;const l=e.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let c=o+f;c>a?c=a:a=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(c,a,l)}else if(r[0]){const f=e.type.isInline?o:o-1;s.insert(f,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:e.undoable})}function oA(e){return new dw({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=gn(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function Cg(e){return new dw({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=gn(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),f=l&&BT(l,e.type,s);if(!f)return null;if(o.wrap(l,f),e.keepMarks&&e.editor){const{selection:d,storedMarks:u}=t,{splittableMarks:h}=e.editor.extensionManager,g=u||d.$to.parentOffset&&d.$from.marks();if(g){const y=g.filter(U=>h.includes(U.type.name));o.ensureMarks(y)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&e0(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&o.join(n.from-1)},undoable:e.undoable})}function NUe(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof pt){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}var RUe={};QT(RUe,{createAtomBlockMarkdownSpec:()=>aq,createBlockMarkdownSpec:()=>_Ue,createInlineMarkdownSpec:()=>LUe,parseAttributes:()=>sI,parseIndentedBlocks:()=>aA,renderNestedMarkdownContent:()=>aI,serializeAttributes:()=>oI});function sI(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(c=>c.trim().slice(1));t.class=f.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(t.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,f,c])=>{var d;const u=parseInt(((d=c.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),h=n[u];h&&(t[f]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(t[c]=!0)}),t}function oI(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function aq(e){const{nodeName:t,name:n,parseAttributes:r=sI,serializeAttributes:i=oI,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=e,l=n||t,f=c=>{if(!a)return c;const d={};return a.forEach(u=>{u in c&&(d[u]=c[u])}),d};return{parseMarkdown:(c,d)=>{const u={...s,...c.attributes};return d.createNode(t,u,[])},markdownTokenizer:{name:t,level:"block",start(c){var d;const u=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(d=c.match(u))==null?void 0:d.index;return h!==void 0?h:-1},tokenize(c,d,u){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),g=c.match(h);if(!g)return;const y=g[1]||"",U=r(y);if(!o.find(v=>!(v in U)))return{type:t,raw:g[0],attributes:U}}},renderMarkdown:c=>{const d=f(c.attrs||{}),u=i(d),h=u?` {${u}}`:"";return`:::${l}${h} :::`}}}function _Ue(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=sI,serializeAttributes:s=oI,defaultAttributes:o={},content:a="block",allowedAttributes:l}=e,f=n||t,c=d=>{if(!l)return d;const u={};return l.forEach(h=>{h in d&&(u[h]=d[h])}),u};return{parseMarkdown:(d,u)=>{let h;if(r){const y=r(d);h=typeof y=="string"?[{type:"text",text:y}]:y}else a==="block"?h=u.parseChildren(d.tokens||[]):h=u.parseInline(d.tokens||[]);const g={...o,...d.attributes};return u.createNode(t,g,h)},markdownTokenizer:{name:t,level:"block",start(d){var u;const h=new RegExp(`^:::${f}`,"m"),g=(u=d.match(h))==null?void 0:u.index;return g!==void 0?g:-1},tokenize(d,u,h){var g;const y=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),U=d.match(y);if(!U)return;const[x,v=""]=U,E=i(v);let k=1;const M=x.length;let S="";const A=/^:::([\w-]*)(\s.*)?/gm,I=d.slice(M);for(A.lastIndex=0;;){const R=A.exec(I);if(R===null)break;const D=R.index,_=R[1];if(!((g=R[2])!=null&&g.endsWith(":::"))){if(_)k+=1;else if(k-=1,k===0){const P=I.slice(0,D);S=P.trim();const $=d.slice(0,M+D+R[0].length);let L=[];if(S)if(a==="block")for(L=h.blockTokens(P),L.forEach(B=>{B.text&&(!B.tokens||B.tokens.length===0)&&(B.tokens=h.inlineTokens(B.text))});L.length>0;){const B=L[L.length-1];if(B.type==="paragraph"&&(!B.text||B.text.trim()===""))L.pop();else break}else L=h.inlineTokens(S);return{type:t,raw:$,attributes:E,content:S,tokens:L}}}}}},renderMarkdown:(d,u)=>{const h=c(d.attrs||{}),g=s(h),y=g?` {${g}}`:"",U=u.renderChildren(d.content||[],`

`);return`:::${f}${y}

${U}

:::`}}}function PUe(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,i,s,o]=r;t[i]=s||o,r=n.exec(e)}return t}function DUe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function LUe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=PUe,serializeAttributes:s=DUe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=e,f=n||t,c=u=>{if(!l)return u;const h={};return l.forEach(g=>{const y=typeof g=="string"?g:g.name,U=typeof g=="string"?void 0:g.skipIfDefault;if(y in u){const x=u[y];if(U!==void 0&&x===U)return;h[y]=x}}),h},d=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(u,h)=>{const g={...o,...u.attributes};if(a)return h.createNode(t,g);const y=r?r(u):u.content||"";return y?h.createNode(t,g,[h.createTextNode(y)]):h.createNode(t,g,[])},markdownTokenizer:{name:t,level:"inline",start(u){const h=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),g=u.match(h),y=g==null?void 0:g.index;return y!==void 0?y:-1},tokenize(u,h,g){const y=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),U=u.match(y);if(!U)return;let x="",v="";if(a){const[,k]=U;v=k}else{const[,k,M]=U;v=k,x=M||""}const E=i(v.trim());return{type:t,raw:U[0],content:x.trim(),attributes:E}}},renderMarkdown:u=>{let h="";r?h=r(u):u.content&&u.content.length>0&&(h=u.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const g=c(u.attrs||{}),y=s(g),U=y?` ${y}`:"";return a?`[${f}${U}]`:`[${f}${U}]${h}[/${f}]`}}}function aA(e,t,n){var r,i,s,o;const a=e.split(`
`),l=[];let f="",c=0;const d=t.baseIndentSize||2;for(;c<a.length;){const u=a[c],h=u.match(t.itemPattern);if(!h){if(l.length>0)break;if(u.trim()===""){c+=1,f=`${f}${u}
`;continue}else return}const g=t.extractItemData(h),{indentLevel:y,mainContent:U}=g;f=`${f}${u}
`;const x=[U];for(c+=1;c<a.length;){const M=a[c];if(M.trim()===""){const A=a.slice(c+1).findIndex(D=>D.trim()!=="");if(A===-1)break;if((((i=(r=a[c+1+A].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>y){x.push(M),f=`${f}${M}
`,c+=1;continue}else break}if((((o=(s=M.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>y)x.push(M),f=`${f}${M}
`,c+=1;else break}let v;const E=x.slice(1);if(E.length>0){const M=E.map(S=>S.slice(y+d)).join(`
`);M.trim()&&(t.customNestedParser?v=t.customNestedParser(M):v=n.blockTokens(M))}const k=t.createToken(g,v);l.push(k)}if(l.length!==0)return{items:l,raw:f}}function aI(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=e.content,a=t.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(f=>{const c=t.renderChildren([f]);if(c){const d=c.split(`
`).map(u=>u?t.indent(u):"").join(`
`);l.push(d)}}),l.join(`
`)}function OUe(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((a,l)=>{const f=s.mapping.map(l),c=s.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(h=>{if(h!==o)return!1;d=h}),!d)return;let u=!1;if(Object.keys(n).forEach(h=>{n[h]!==d.attrs[h]&&(u=!0)}),u){const h=e.type.create({...e.attrs,...n});s.removeMark(f,c,e.type),s.addMark(f,c,h)}}),s.docChanged&&t.view.dispatch(s)}var ho=class lq extends iI{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new lq(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function s1(e){return new KZ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=gn(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,a=r[r.length-1],l=r[0];let f=n.to;if(a){const c=l.search(/\S/),d=n.from+l.indexOf(a),u=d+a.length;if(rI(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(U=>U===e.type&&U!==g.mark.type)).filter(g=>g.to>d).length)return null;u<n.to&&o.delete(u,n.to),d>n.from&&o.delete(n.from+c,d),f=n.from+c+a.length,o.addMark(n.from+c,f,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function jUe(e){return new KZ({find:e.find,handler({match:t,chain:n,range:r,pasteEvent:i}){const s=gn(e.getAttributes,void 0,t,i),o=gn(e.getContent,void 0,s);if(s===!1||s===null)return null;const a={type:e.type.name,attrs:s};o&&(a.content=o),t.input&&n().deleteRange(r).insertContentAt(r.from,a)}})}const{getOwnPropertyNames:BUe,getOwnPropertySymbols:FUe}=Object,{hasOwnProperty:zUe}=Object.prototype;function QE(e,t){return function(r,i,s){return e(r,i,s)&&t(r,i,s)}}function xU(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const l=e(n,r,i);return s.delete(n),s.delete(r),l}}function $Ue(e){return e!=null?e[Symbol.toStringTag]:void 0}function oB(e){return BUe(e).concat(FUe(e))}const HUe=Object.hasOwn||((e,t)=>zUe.call(e,t));function C1(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const VUe="__v",WUe="__o",GUe="_owner",{getOwnPropertyDescriptor:aB,keys:lB}=Object;function XUe(e,t){return e.byteLength===t.byteLength&&Hx(new Uint8Array(e),new Uint8Array(t))}function KUe(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function YUe(e,t){return e.byteLength===t.byteLength&&Hx(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function ZUe(e,t){return C1(e.getTime(),t.getTime())}function qUe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function QUe(e,t){return e===t}function cB(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const f=t.entries();let c=!1,d=0;for(;(a=f.next())&&!a.done;){if(i[d]){d++;continue}const u=o.value,h=a.value;if(n.equals(u[0],h[0],l,d,e,t,n)&&n.equals(u[1],h[1],u[0],h[0],e,t,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const JUe=C1;function e3e(e,t,n){const r=lB(e);let i=r.length;if(lB(t).length!==i)return!1;for(;i-- >0;)if(!cq(e,t,n,r[i]))return!1;return!0}function e5(e,t,n){const r=oB(e);let i=r.length;if(oB(t).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!cq(e,t,n,s)||(o=aB(e,s),a=aB(t,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function t3e(e,t){return C1(e.valueOf(),t.valueOf())}function n3e(e,t){return e.source===t.source&&e.flags===t.flags}function fB(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.values();let o,a;for(;(o=s.next())&&!o.done;){const l=t.values();let f=!1,c=0;for(;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,e,t,n)){f=i[c]=!0;break}c++}if(!f)return!1}return!0}function Hx(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function r3e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function cq(e,t,n,r){return(r===GUe||r===WUe||r===VUe)&&(e.$$typeof||t.$$typeof)?!0:HUe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const i3e="[object ArrayBuffer]",s3e="[object Arguments]",o3e="[object Boolean]",a3e="[object DataView]",l3e="[object Date]",c3e="[object Error]",f3e="[object Map]",d3e="[object Number]",u3e="[object Object]",h3e="[object RegExp]",p3e="[object Set]",m3e="[object String]",g3e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},b3e="[object URL]",y3e=Object.prototype.toString;function U3e({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:f,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:u,areUrlsEqual:h,unknownTagComparators:g}){return function(U,x,v){if(U===x)return!0;if(U==null||x==null)return!1;const E=typeof U;if(E!==typeof x)return!1;if(E!=="object")return E==="number"?a(U,x,v):E==="function"?s(U,x,v):!1;const k=U.constructor;if(k!==x.constructor)return!1;if(k===Object)return l(U,x,v);if(Array.isArray(U))return t(U,x,v);if(k===Date)return r(U,x,v);if(k===RegExp)return c(U,x,v);if(k===Map)return o(U,x,v);if(k===Set)return d(U,x,v);const M=y3e.call(U);if(M===l3e)return r(U,x,v);if(M===h3e)return c(U,x,v);if(M===f3e)return o(U,x,v);if(M===p3e)return d(U,x,v);if(M===u3e)return typeof U.then!="function"&&typeof x.then!="function"&&l(U,x,v);if(M===b3e)return h(U,x,v);if(M===c3e)return i(U,x,v);if(M===s3e)return l(U,x,v);if(g3e[M])return u(U,x,v);if(M===i3e)return e(U,x,v);if(M===a3e)return n(U,x,v);if(M===o3e||M===d3e||M===m3e)return f(U,x,v);if(g){let S=g[M];if(!S){const A=$Ue(U);A&&(S=g[A])}if(S)return S(U,x,v)}return!1}}function x3e({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:XUe,areArraysEqual:n?e5:KUe,areDataViewsEqual:YUe,areDatesEqual:ZUe,areErrorsEqual:qUe,areFunctionsEqual:QUe,areMapsEqual:n?QE(cB,e5):cB,areNumbersEqual:JUe,areObjectsEqual:n?e5:e3e,arePrimitiveWrappersEqual:t3e,areRegExpsEqual:n3e,areSetsEqual:n?QE(fB,e5):fB,areTypedArraysEqual:n?QE(Hx,e5):Hx,areUrlsEqual:r3e,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const i=xU(r.areArraysEqual),s=xU(r.areMapsEqual),o=xU(r.areObjectsEqual),a=xU(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function w3e(e){return function(t,n,r,i,s,o,a){return e(t,n,a)}}function v3e({circular:e,comparator:t,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:f=e?new WeakMap:void 0,meta:c}=n();return t(a,l,{cache:f,equals:r,meta:c,strict:i})};if(e)return function(a,l){return t(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return t(a,l,s)}}const E3e=n0();n0({strict:!0});n0({circular:!0});n0({circular:!0,strict:!0});n0({createInternalComparator:()=>C1});n0({strict:!0,createInternalComparator:()=>C1});n0({circular:!0,createInternalComparator:()=>C1});n0({circular:!0,createInternalComparator:()=>C1,strict:!0});function n0(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:i=!1}=e,s=x3e(e),o=U3e(s),a=n?n(o):w3e(o);return v3e({circular:t,comparator:o,createState:r,equals:a,strict:i})}var k3e=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},S3e=({contentComponent:e})=>{const t=sY.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(t)})};function C3e(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:EK.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var A3e=class extends Ne.Component{constructor(e){var t;super(e),this.editorContentRef=Ne.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var e;const t=this.props.editor;if(t&&!t.isDestroyed&&((e=t.view.dom)!=null&&e.parentNode)){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n}),t.contentComponent=C3e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.parentNode))return;const n=document.createElement("div");n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:k3e(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&m.jsx(S3e,{contentComponent:e.contentComponent})]})}},M3e=T.forwardRef((e,t)=>{const n=Ne.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Ne.createElement(A3e,{key:n,innerRef:t,...e})}),hw=Ne.memo(M3e),T3e=typeof window<"u"?T.useLayoutEffect:T.useEffect,I3e=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function N3e(e){var t;const[n]=T.useState(()=>new I3e(e.editor)),r=UK.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:E3e);return T3e(()=>n.watch(e.editor),[e.editor,n]),T.useDebugValue(r),r}var R3e=!1,lA=typeof window>"u",_3e=lA||!!(typeof window<"u"&&window.next),P3e=class fq{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?lA||_3e?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new TUe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?fq.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function lI(e={},t=[]){const n=T.useRef(e);n.current=e;const[r]=T.useState(()=>new P3e(n)),i=sY.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return T.useDebugValue(i),T.useEffect(r.onRender(t)),N3e({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var dq=T.createContext({editor:null});dq.Consumer;var D3e=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),L3e=()=>T.useContext(D3e);Ne.forwardRef((e,t)=>{const{onDragStart:n}=L3e(),r=e.as||"div";return m.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Ne.createContext({markViewContentRef:()=>{}});var cI=T.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});cI.displayName="TiptapContext";var O3e=()=>T.useContext(cI);function uq({editor:e,instance:t,children:n}){const r=e??t;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=T.useMemo(()=>({editor:r}),[r]),s=T.useMemo(()=>({editor:r}),[r]);return m.jsx(dq.Provider,{value:s,children:m.jsx(cI.Provider,{value:i,children:n})})}uq.displayName="Tiptap";function hq({...e}){const{editor:t}=O3e();return m.jsx(hw,{editor:t,...e})}hq.displayName="Tiptap.Content";Object.assign(uq,{Content:hq});var Vx=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},j3e=/^\s*>\s$/,B3e=ho.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Vx("blockquote",{...Fr(this.options.HTMLAttributes,e),children:Vx("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(i=>{const a=t.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Cg({find:j3e,type:this.type})]}}),F3e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,z3e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,$3e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,H3e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,V3e=S1.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Vx("strong",{...Fr(this.options.HTMLAttributes,e),children:Vx("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Sg({find:F3e,type:this.type}),Sg({find:$3e,type:this.type})]},addPasteRules(){return[s1({find:z3e,type:this.type}),s1({find:H3e,type:this.type})]}}),W3e=/(^|[^`])`([^`]+)`(?!`)$/,G3e=/(^|[^`])`([^`]+)`(?!`)/g,X3e=S1.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Fr(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Sg({find:W3e,type:this.type})]},addPasteRules(){return[s1({find:G3e,type:this.type})]}}),JE=4,K3e=/^```([a-z]+)?[\s\n]$/,Y3e=/^~~~([a-z]+)?[\s\n]$/,Z3e=ho.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:JE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Fr(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const i=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:JE,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?e.commands.insertContent(a):e.commands.command(({tr:l})=>{const{from:f,to:c}=i,h=r.doc.textBetween(f,c,`
`,`
`).split(`
`).map(g=>a+g).join(`
`);return l.replaceWith(f,c,r.schema.text(h)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:JE,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?e.commands.command(({tr:a})=>{var l;const{pos:f}=s,c=s.start(),d=s.end(),h=r.doc.textBetween(c,d,`
`,`
`).split(`
`);let g=0,y=0;const U=f-c;for(let S=0;S<h.length;S+=1){if(y+h[S].length>=U){g=S;break}y+=h[S].length+1}const v=((l=h[g].match(/^ */))==null?void 0:l[0])||"",E=Math.min(v.length,n);if(E===0)return!0;let k=c;for(let S=0;S<g;S+=1)k+=h[S].length+1;return a.delete(k,k+E),f-k<=E&&a.setSelection(Pt.create(a.doc,k)),!0}):e.commands.command(({tr:a})=>{const{from:l,to:f}=i,u=r.doc.textBetween(l,f,`
`,`
`).split(`
`).map(h=>{var g;const y=((g=h.match(/^ */))==null?void 0:g[0])||"",U=Math.min(y.length,n);return h.slice(U)}).join(`
`);return a.replaceWith(l,f,r.schema.text(u)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:f})=>(f.setSelection(Vt.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[oA({find:K3e,type:this.type,getAttributes:e=>({language:e[1]})}),oA({find:Y3e,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new xr({key:new fi("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Pt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),q3e=ho.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),Q3e=ho.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Fr(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:f,dispatch:c})=>{if(c&&l&&o){const d=l.filter(u=>a.includes(u.type.name));f.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),J3e=ho.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Fr(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,i="#".repeat(r);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>oA({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),exe=ho.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Fr(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!NUe(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return HZ(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,f=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Pt.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(pt.create(o.doc,l.pos)):o.setSelection(Pt.create(o.doc,l.pos));else{const c=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=c==null?void 0:c.create();d&&(o.insert(f,d),o.setSelection(Pt.create(o.doc,f+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[IUe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),txe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,nxe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,rxe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ixe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,sxe=S1.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Fr(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Sg({find:txe,type:this.type}),Sg({find:rxe,type:this.type})]},addPasteRules(){return[s1({find:nxe,type:this.type}),s1({find:ixe,type:this.type})]}});const oxe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",axe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",cA="numeric",fA="ascii",dA="alpha",s2="asciinumeric",L5="alphanumeric",uA="domain",pq="emoji",lxe="scheme",cxe="slashscheme",ek="whitespace";function fxe(e,t){return e in t||(t[e]=[]),t[e]}function nh(e,t,n){t[cA]&&(t[s2]=!0,t[L5]=!0),t[fA]&&(t[s2]=!0,t[dA]=!0),t[s2]&&(t[L5]=!0),t[dA]&&(t[L5]=!0),t[L5]&&(t[uA]=!0),t[pq]&&(t[uA]=!0);for(const r in t){const i=fxe(r,n);i.indexOf(e)<0&&i.push(e)}}function dxe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function to(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}to.groups={};to.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||to.groups;let i;return t&&t.j?i=t:(i=new to(t),n&&r&&nh(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||to.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,a=i.go(e);if(a?(o=new to,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new to,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(dxe(o.t,r),n);nh(s,l,r)}else n&&nh(s,n,r);o.t=s}return i.j[e]=o,o}};const $t=(e,t,n,r,i)=>e.ta(t,n,r,i),Er=(e,t,n,r,i)=>e.tr(t,n,r,i),dB=(e,t,n,r,i)=>e.ts(t,n,r,i),Le=(e,t,n,r,i)=>e.tt(t,n,r,i),rf="WORD",hA="UWORD",mq="ASCIINUMERICAL",gq="ALPHANUMERICAL",sb="LOCALHOST",pA="TLD",mA="UTLD",E3="SCHEME",Np="SLASH_SCHEME",fI="NUM",gA="WS",dI="NL",o2="OPENBRACE",a2="CLOSEBRACE",Wx="OPENBRACKET",Gx="CLOSEBRACKET",Xx="OPENPAREN",Kx="CLOSEPAREN",Yx="OPENANGLEBRACKET",Zx="CLOSEANGLEBRACKET",qx="FULLWIDTHLEFTPAREN",Qx="FULLWIDTHRIGHTPAREN",Jx="LEFTCORNERBRACKET",e4="RIGHTCORNERBRACKET",t4="LEFTWHITECORNERBRACKET",n4="RIGHTWHITECORNERBRACKET",r4="FULLWIDTHLESSTHAN",i4="FULLWIDTHGREATERTHAN",s4="AMPERSAND",o4="APOSTROPHE",a4="ASTERISK",Yd="AT",l4="BACKSLASH",c4="BACKTICK",f4="CARET",nu="COLON",uI="COMMA",d4="DOLLAR",Hl="DOT",u4="EQUALS",hI="EXCLAMATION",ea="HYPHEN",l2="PERCENT",h4="PIPE",p4="PLUS",m4="POUND",c2="QUERY",pI="QUOTE",bq="FULLWIDTHMIDDLEDOT",mI="SEMI",Vl="SLASH",f2="TILDE",g4="UNDERSCORE",yq="EMOJI",b4="SYM";var Uq=Object.freeze({__proto__:null,ALPHANUMERICAL:gq,AMPERSAND:s4,APOSTROPHE:o4,ASCIINUMERICAL:mq,ASTERISK:a4,AT:Yd,BACKSLASH:l4,BACKTICK:c4,CARET:f4,CLOSEANGLEBRACKET:Zx,CLOSEBRACE:a2,CLOSEBRACKET:Gx,CLOSEPAREN:Kx,COLON:nu,COMMA:uI,DOLLAR:d4,DOT:Hl,EMOJI:yq,EQUALS:u4,EXCLAMATION:hI,FULLWIDTHGREATERTHAN:i4,FULLWIDTHLEFTPAREN:qx,FULLWIDTHLESSTHAN:r4,FULLWIDTHMIDDLEDOT:bq,FULLWIDTHRIGHTPAREN:Qx,HYPHEN:ea,LEFTCORNERBRACKET:Jx,LEFTWHITECORNERBRACKET:t4,LOCALHOST:sb,NL:dI,NUM:fI,OPENANGLEBRACKET:Yx,OPENBRACE:o2,OPENBRACKET:Wx,OPENPAREN:Xx,PERCENT:l2,PIPE:h4,PLUS:p4,POUND:m4,QUERY:c2,QUOTE:pI,RIGHTCORNERBRACKET:e4,RIGHTWHITECORNERBRACKET:n4,SCHEME:E3,SEMI:mI,SLASH:Vl,SLASH_SCHEME:Np,SYM:b4,TILDE:f2,TLD:pA,UNDERSCORE:g4,UTLD:mA,UWORD:hA,WORD:rf,WS:gA});const qc=/[a-z]/,t5=new RegExp("\\p{L}","u"),tk=new RegExp("\\p{Emoji}","u"),Qc=/\d/,nk=/\s/,uB="\r",rk=`
`,uxe="",hxe="",ik="";let wU=null,vU=null;function pxe(e=[]){const t={};to.groups=t;const n=new to;wU==null&&(wU=hB(oxe)),vU==null&&(vU=hB(axe)),Le(n,"'",o4),Le(n,"{",o2),Le(n,"}",a2),Le(n,"[",Wx),Le(n,"]",Gx),Le(n,"(",Xx),Le(n,")",Kx),Le(n,"<",Yx),Le(n,">",Zx),Le(n,"",qx),Le(n,"",Qx),Le(n,"",Jx),Le(n,"",e4),Le(n,"",t4),Le(n,"",n4),Le(n,"",r4),Le(n,"",i4),Le(n,"&",s4),Le(n,"*",a4),Le(n,"@",Yd),Le(n,"`",c4),Le(n,"^",f4),Le(n,":",nu),Le(n,",",uI),Le(n,"$",d4),Le(n,".",Hl),Le(n,"=",u4),Le(n,"!",hI),Le(n,"-",ea),Le(n,"%",l2),Le(n,"|",h4),Le(n,"+",p4),Le(n,"#",m4),Le(n,"?",c2),Le(n,'"',pI),Le(n,"/",Vl),Le(n,";",mI),Le(n,"~",f2),Le(n,"_",g4),Le(n,"\\",l4),Le(n,"",bq);const r=Er(n,Qc,fI,{[cA]:!0});Er(r,Qc,r);const i=Er(r,qc,mq,{[s2]:!0}),s=Er(r,t5,gq,{[L5]:!0}),o=Er(n,qc,rf,{[fA]:!0});Er(o,Qc,i),Er(o,qc,o),Er(i,Qc,i),Er(i,qc,i);const a=Er(n,t5,hA,{[dA]:!0});Er(a,qc),Er(a,Qc,s),Er(a,t5,a),Er(s,Qc,s),Er(s,qc),Er(s,t5,s);const l=Le(n,rk,dI,{[ek]:!0}),f=Le(n,uB,gA,{[ek]:!0}),c=Er(n,nk,gA,{[ek]:!0});Le(n,ik,c),Le(f,rk,l),Le(f,ik,c),Er(f,nk,c),Le(c,uB),Le(c,rk),Er(c,nk,c),Le(c,ik,c);const d=Er(n,tk,yq,{[pq]:!0});Le(d,"#"),Er(d,tk,d),Le(d,uxe,d);const u=Le(d,hxe);Le(u,"#"),Er(u,tk,d);const h=[[qc,o],[Qc,i]],g=[[qc,null],[t5,a],[Qc,s]];for(let y=0;y<wU.length;y++)Dd(n,wU[y],pA,rf,h);for(let y=0;y<vU.length;y++)Dd(n,vU[y],mA,hA,g);nh(pA,{tld:!0,ascii:!0},t),nh(mA,{utld:!0,alpha:!0},t),Dd(n,"file",E3,rf,h),Dd(n,"mailto",E3,rf,h),Dd(n,"http",Np,rf,h),Dd(n,"https",Np,rf,h),Dd(n,"ftp",Np,rf,h),Dd(n,"ftps",Np,rf,h),nh(E3,{scheme:!0,ascii:!0},t),nh(Np,{slashscheme:!0,ascii:!0},t),e=e.sort((y,U)=>y[0]>U[0]?1:-1);for(let y=0;y<e.length;y++){const U=e[y][0],v=e[y][1]?{[lxe]:!0}:{[cxe]:!0};U.indexOf("-")>=0?v[uA]=!0:qc.test(U)?Qc.test(U)?v[s2]=!0:v[fA]=!0:v[cA]=!0,dB(n,U,U,v)}return dB(n,"localhost",sb,{ascii:!0}),n.jd=new to(b4),{start:n,tokens:Object.assign({groups:t},Uq)}}function xq(e,t){const n=mxe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=e,l=null,f=0,c=null,d=-1,u=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,u=0,c=a):d>=0&&(d+=n[o].length,u++),f+=n[o].length,s+=n[o].length,o++;s-=d,o-=u,f-=d,i.push({t:c.t,v:t.slice(s-f,s),s:s-f,e:s})}return i}function mxe(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Dd(e,t,n,r,i){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];e.j[l]?s=e.j[l]:(s=new to(r),s.jr=i.slice(),e.j[l]=s),e=s}return s=new to(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function hB(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const ob={defaultProtocol:"http",events:null,format:pB,formatHref:pB,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function gI(e,t=null){let n=Object.assign({},ob);e&&(n=Object.assign(n,e instanceof gI?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}gI.prototype={o:ob,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:ob[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function pB(e){return e}function wq(e,t){this.t="token",this.v=e,this.tk=t}wq.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=ob.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},a=e.get("className",n,t),l=e.get("target",n,t),f=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return o.href=r,a&&(o.class=a),l&&(o.target=l),f&&(o.rel=f),c&&Object.assign(o,c),{tagName:i,attributes:o,content:s,eventListeners:d}}};function pw(e,t){class n extends wq{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const mB=pw("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),gB=pw("text"),gxe=pw("nl"),EU=pw("url",{isLink:!0,toHref(e=ob.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==sb&&e[1].t===nu}}),Jo=e=>new to(e);function bxe({groups:e}){const t=e.domain.concat([s4,a4,Yd,l4,c4,f4,d4,u4,ea,fI,l2,h4,p4,m4,Vl,b4,f2,g4]),n=[o4,nu,uI,Hl,hI,l2,c2,pI,mI,Yx,Zx,o2,a2,Gx,Wx,Xx,Kx,qx,Qx,Jx,e4,t4,n4,r4,i4],r=[s4,o4,a4,l4,c4,f4,d4,u4,ea,o2,a2,l2,h4,p4,m4,c2,Vl,b4,f2,g4],i=Jo(),s=Le(i,f2);$t(s,r,s),$t(s,e.domain,s);const o=Jo(),a=Jo(),l=Jo();$t(i,e.domain,o),$t(i,e.scheme,a),$t(i,e.slashscheme,l),$t(o,r,s),$t(o,e.domain,o);const f=Le(o,Yd);Le(s,Yd,f),Le(a,Yd,f),Le(l,Yd,f);const c=Le(s,Hl);$t(c,r,s),$t(c,e.domain,s);const d=Jo();$t(f,e.domain,d),$t(d,e.domain,d);const u=Le(d,Hl);$t(u,e.domain,d);const h=Jo(mB);$t(u,e.tld,h),$t(u,e.utld,h),Le(f,sb,h);const g=Le(d,ea);Le(g,ea,g),$t(g,e.domain,d),$t(h,e.domain,d),Le(h,Hl,u),Le(h,ea,g);const y=Le(h,nu);$t(y,e.numeric,mB);const U=Le(o,ea),x=Le(o,Hl);Le(U,ea,U),$t(U,e.domain,o),$t(x,r,s),$t(x,e.domain,o);const v=Jo(EU);$t(x,e.tld,v),$t(x,e.utld,v),$t(v,e.domain,o),$t(v,r,s),Le(v,Hl,x),Le(v,ea,U),Le(v,Yd,f);const E=Le(v,nu),k=Jo(EU);$t(E,e.numeric,k);const M=Jo(EU),S=Jo();$t(M,t,M),$t(M,n,S),$t(S,t,M),$t(S,n,S),Le(v,Vl,M),Le(k,Vl,M);const A=Le(a,nu),I=Le(l,nu),R=Le(I,Vl),D=Le(R,Vl);$t(a,e.domain,o),Le(a,Hl,x),Le(a,ea,U),$t(l,e.domain,o),Le(l,Hl,x),Le(l,ea,U),$t(A,e.domain,M),Le(A,Vl,M),Le(A,c2,M),$t(D,e.domain,M),$t(D,t,M),Le(D,Vl,M);const _=[[o2,a2],[Wx,Gx],[Xx,Kx],[Yx,Zx],[qx,Qx],[Jx,e4],[t4,n4],[r4,i4]];for(let P=0;P<_.length;P++){const[$,L]=_[P],B=Le(M,$);Le(S,$,B),Le(B,L,M);const V=Jo(EU);$t(B,t,V);const z=Jo();$t(B,n),$t(V,t,V),$t(V,n,z),$t(z,t,V),$t(z,n,z),Le(V,L,M),Le(z,L,M)}return Le(i,sb,v),Le(i,dI,gxe),{start:i,tokens:Uq}}function yxe(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=e,l=null,f=null,c=0,d=null,u=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(f=l||a.go(n[i].t));)l=null,a=f,a.accepts()?(u=0,d=a):u>=0&&u++,i++,c++;if(u<0)i-=c,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(sk(gB,t,o)),o=[]),i-=u,c-=u;const h=d.t,g=n.slice(i-c,i);s.push(sk(h,t,g))}}return o.length>0&&s.push(sk(gB,t,o)),s}function sk(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const Uxe=typeof console<"u"&&console&&console.warn||(()=>{}),xxe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Xn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function wxe(){return to.groups={},Xn.scanner=null,Xn.parser=null,Xn.tokenQueue=[],Xn.pluginQueue=[],Xn.customSchemes=[],Xn.initialized=!1,Xn}function bB(e,t=!1){if(Xn.initialized&&Uxe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${xxe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Xn.customSchemes.push([e,t])}function vxe(){Xn.scanner=pxe(Xn.customSchemes);for(let e=0;e<Xn.tokenQueue.length;e++)Xn.tokenQueue[e][1]({scanner:Xn.scanner});Xn.parser=bxe(Xn.scanner.tokens);for(let e=0;e<Xn.pluginQueue.length;e++)Xn.pluginQueue[e][1]({scanner:Xn.scanner,parser:Xn.parser});return Xn.initialized=!0,Xn}function bI(e){return Xn.initialized||vxe(),yxe(Xn.parser.start,e,xq(Xn.scanner.start,e))}bI.scan=xq;function vq(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new gI(n),i=bI(e),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!t||a.t===t)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var yI="[\0- -\u2029]",Exe=new RegExp(yI),kxe=new RegExp(`${yI}$`),Sxe=new RegExp(yI,"g");function Cxe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Axe(e){return new xr({key:new fi("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(f=>f.docChanged)&&!n.doc.eq(r.doc),s=t.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=DZ(n.doc,[...t]);if($Z(a).forEach(({newRange:f})=>{const c=R8e(r.doc,f,h=>h.isTextblock);let d,u;if(c.length>1)d=c[0],u=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(f.from,f.to," "," ");if(!kxe.test(h))return;d=c[0],u=r.doc.textBetween(d.pos,f.to,void 0," ")}if(d&&u){const h=u.split(Exe).filter(Boolean);if(h.length<=0)return!1;const g=h[h.length-1],y=d.pos+u.lastIndexOf(g);if(!g)return!1;const U=bI(g).map(x=>x.toObject(e.defaultProtocol));if(!Cxe(U))return!1;U.filter(x=>x.isLink).map(x=>({...x,from:y+x.start+1,to:y+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{rI(x.from,x.to,r.doc).some(v=>v.mark.type===e.type)||o.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!o.steps.length)return o}})}function Mxe(e){return new xr({key:new fi("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const l=r.target;if(!l)return!1;const f=e.editor.view.dom;o=l.closest("a"),o&&!f.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(e.enableClickSelection&&(a=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){const l=zZ(t.state,e.type.name),f=(i=o.href)!=null?i:l.href,c=(s=o.target)!=null?s:l.target;f&&(window.open(f,c),a=!0)}return a}}})}function Txe(e){return new xr({key:new fi("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:i}=e,{state:s}=t,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const f=vq(l,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!f||i!==void 0&&!i(f.value)?!1:e.editor.commands.setMark(e.type,{href:f.href})}}})}function C0(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(Sxe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Eq=S1.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){bB(e);return}bB(e.scheme,e.optionalSlashes)})},onDestroy(){wxe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!C0(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>{const t=/^[a-z][a-z0-9+.-]*:\/\//i.test(e),n=/^[a-z][a-z0-9+.-]*:/i.test(e);if(t||n&&!e.includes("@"))return!0;const i=(e.includes("@")?e.split("@").pop():e).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!C0(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!C0(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Fr(this.options.HTMLAttributes,e),0]:["a",Fr(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n,r,i,s;const o=(r=(n=e.attrs)==null?void 0:n.href)!=null?r:"",a=(s=(i=e.attrs)==null?void 0:i.title)!=null?s:"",l=t.renderChildren(e);return a?`[${l}](${o} "${a}")`:`[${l}](${o})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!C0(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!C0(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[s1({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=vq(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!C0(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&t.push({text:s.value,data:{href:s.href},index:s.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Axe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!C0(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(Mxe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(Txe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),UI=Eq,Ixe=Object.defineProperty,Nxe=(e,t)=>{for(var n in t)Ixe(e,n,{get:t[n],enumerable:!0})},Rxe="listItem",yB="textStyle",UB=/^\s*([-+*])\s$/,kq=ho.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Fr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Rxe,this.editor.getAttributes(yB)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Cg({find:UB,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Cg({find:UB,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(yB),editor:this.editor})),[e]}}),Sq=ho.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Fr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))n=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),a=t.parseChildren(o);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>aI(e,t,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_xe={};Nxe(_xe,{findListItemPos:()=>uy,getNextListDepth:()=>xI,handleBackspace:()=>bA,handleDelete:()=>yA,hasListBefore:()=>Cq,hasListItemAfter:()=>Pxe,hasListItemBefore:()=>Aq,listItemHasSubList:()=>Mq,nextListIsDeeper:()=>Tq,nextListIsHigher:()=>Iq});var uy=(e,t)=>{const{$from:n}=t.selection,r=Jr(e,t.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:t.doc.resolve(o),depth:a}},xI=(e,t)=>{const n=uy(e,t);if(!n)return!1;const[,r]=$8e(t,e,n.$pos.pos+4);return r},Cq=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Aq=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},Mq=(e,t,n)=>{if(!n)return!1;const r=Jr(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},bA=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Vu(e.state,t)&&Cq(e.state,t,n)){const{$anchor:a}=e.state.selection,l=e.state.doc.resolve(a.before()-1),f=[];l.node().descendants((u,h)=>{u.type.name===t&&f.push({node:u,pos:h})});const c=f.at(-1);if(!c)return!1;const d=e.state.doc.resolve(l.start()+c.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Vu(e.state,t)||!G8e(e.state))return!1;const r=uy(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Mq(t,e.state,s);return Aq(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Tq=(e,t)=>{const n=xI(e,t),r=uy(e,t);return!r||!n?!1:n>r.depth},Iq=(e,t)=>{const n=xI(e,t),r=uy(e,t);return!r||!n?!1:n<r.depth},yA=(e,t)=>{if(!Vu(e.state,t)||!W8e(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Tq(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Iq(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},Pxe=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},Nq=zr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&yA(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&yA(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&bA(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&bA(e,n,r)&&(t=!0)}),t}}}}),xB=/^(\s*)(\d+)\.\s+(.*)$/,Dxe=/^\s/;function Lxe(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n],s=i.match(xB);if(!s)break;const[,o,a,l]=s,f=o.length;let c=l,d=n+1;const u=[i];for(;d<e.length;){const h=e[d];if(h.match(xB))break;if(h.trim()==="")u.push(h),c+=`
`,d+=1;else if(h.match(Dxe))u.push(h),c+=`
${h.slice(f+2)}`,d+=1;else break}t.push({indent:f,number:parseInt(a,10),content:c.trim(),raw:u.join(`
`)}),r=d,n=d}return[t,r]}function Rq(e,t,n){var r;const i=[];let s=0;for(;s<e.length;){const o=e[s];if(o.indent===t){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",f=[];l&&f.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const c=a.slice(1).join(`
`).trim();if(c){const h=n.blockTokens(c);f.push(...h)}let d=s+1;const u=[];for(;d<e.length&&e[d].indent>t;)u.push(e[d]),d+=1;if(u.length>0){const h=Math.min(...u.map(y=>y.indent)),g=Rq(u,h,n);f.push({type:"list",ordered:!0,start:u[0].number,items:g,raw:u.map(y=>y.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:f}),s=d}else s+=1}return i}function Oxe(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=t.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=t.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var jxe="listItem",wB="textStyle",vB=/^(\d+)\.\s$/,_q=ho.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Fr(this.options.HTMLAttributes,n),0]:["ol",Fr(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?Oxe(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const i=e.split(`
`),[s,o]=Lxe(i);if(s.length===0)return;const a=Rq(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jxe,this.editor.getAttributes(wB)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Cg({find:vB,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Cg({find:vB,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(wB)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Bxe=/^\s*(\[([( |x])?\])\s$/,Fxe=ho.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Fr(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const i=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return aI(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),f=d=>{var u,h;a.ariaLabel=((h=(u=this.options.a11y)==null?void 0:u.checkboxLabel)==null?void 0:h.call(u,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};f(e),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:u}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const g=n();if(typeof g!="number")return!1;const y=h.doc.nodeAt(g);return h.setNodeMarkup(g,void 0,{...y==null?void 0:y.attrs,checked:u}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,u)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,u])=>{i.setAttribute(d,u)}),i.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(t).forEach(([d,u])=>{i.setAttribute(d,u)});let c=new Set(Object.keys(t));return{dom:i,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;i.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,f(d);const u=r.extensionManager.attributes,h=ib(d,u),g=new Set(Object.keys(h)),y=this.options.HTMLAttributes;return c.forEach(U=>{g.has(U)||(U in y?i.setAttribute(U,y[U]):i.removeAttribute(U))}),Object.entries(h).forEach(([U,x])=>{x==null?U in y?i.setAttribute(U,y[U]):i.removeAttribute(U):i.setAttribute(U,x)}),c=g,!0}}}},addInputRules(){return[Cg({find:Bxe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),zxe=ho.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Fr(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=s=>{const o=aA(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=aA(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});zr.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(kq.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Sq.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Nq.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(_q.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Fxe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(zxe.configure(this.options.taskList)),e}});var EB="&nbsp;",$xe="",Hxe=ho.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Fr(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];if(n.length===1&&n[0].type==="image")return t.parseChildren([n[0]]);const r=t.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===EB||r[0].text===$xe)?t.createNode("paragraph",void 0,[]):t.createNode("paragraph",void 0,r)},renderMarkdown:(e,t)=>{if(!e)return"";const n=Array.isArray(e.content)?e.content:[];return n.length===0?EB:t.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Vxe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Wxe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Gxe=S1.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Fr(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Sg({find:Vxe,type:this.type})]},addPasteRules(){return[s1({find:Wxe,type:this.type})]}}),Xxe=ho.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),Kxe=S1.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Fr(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Yxe(e={}){return new xr({view(t){return new Zxe(t,e)}})}class Zxe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=t.nodeBefore,u=t.nodeAfter;if(d||u){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let g=h.getBoundingClientRect(),y=d?g.bottom:g.top;d&&u&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let U=this.width/2*a;r={left:g.left,right:g.right,top:y-U,bottom:y+U}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),u=this.width/2*o;r={left:d.left-u,right:d.left+u,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")f=-pageXOffset,c=-pageYOffset;else{let d=l.getBoundingClientRect(),u=d.width/l.offsetWidth,h=d.height/l.offsetHeight;f=d.left-l.scrollLeft*u,c=d.top-l.scrollTop*h}this.element.style.left=(r.left-f)/o+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=RY(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Nr extends Vt{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Nr.valid(r)?new Nr(r):Vt.near(r)}content(){return Qe.empty}eq(t){return t instanceof Nr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Nr(t.resolve(n.pos))}getBookmark(){return new wI(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!qxe(t)||!Qxe(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Nr.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(n>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let l=t.doc.resolve(i);if(Nr.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!pt.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=t.doc.resolve(i);if(Nr.valid(a))return a}return null}}}Nr.prototype.visible=!1;Nr.findFrom=Nr.findGapCursorFrom;Vt.jsonID("gapcursor",Nr);class wI{constructor(t){this.pos=t}map(t){return new wI(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Nr.valid(n)?new Nr(n):Vt.near(n)}}function Pq(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function qxe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Pq(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Qxe(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Pq(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Jxe(){return new xr({props:{decorations:r4e,createSelectionBetween(e,t,n){return t.pos==n.pos&&Nr.valid(n)?new Nr(n):null},handleClick:t4e,handleKeyDown:e4e,handleDOMEvents:{beforeinput:n4e}}})}const e4e=AZ({ArrowLeft:kU("horiz",-1),ArrowRight:kU("horiz",1),ArrowUp:kU("vert",-1),ArrowDown:kU("vert",1)});function kU(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof Pt){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let f=Nr.findGapCursorFrom(a,t,l);return f?(i&&i(r.tr.setSelection(new Nr(f))),!0):!1}}function t4e(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Nr.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&pt.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Nr(r))),!0)}function n4e(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Nr))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=Ie.empty;for(let o=r.length-1;o>=0;o--)i=Ie.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new Qe(i,0,0));return s.setSelection(Pt.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function r4e(e){if(!(e.selection instanceof Nr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",pr.create(e.doc,[Ts.widget(e.selection.head,t,{key:"gapcursor"})])}var y4=200,Ci=function(){};Ci.prototype.append=function(t){return t.length?(t=Ci.from(t),!this.length&&t||t.length<y4&&this.leafAppend(t)||this.length<y4&&t.leafPrepend(this)||this.appendInner(t)):this};Ci.prototype.prepend=function(t){return t.length?Ci.from(t).append(this):this};Ci.prototype.appendInner=function(t){return new i4e(this,t)};Ci.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ci.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ci.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ci.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ci.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};Ci.from=function(t){return t instanceof Ci?t:t&&t.length?new Dq(t):Ci.empty};var Dq=function(e){function t(r){e.call(this),this.values=r}t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=y4)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=y4)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ci);Ci.empty=new Dq([]);var i4e=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Ci);const s4e=500;class sl{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,a,l,f=[],c=[];return this.items.forEach((d,u)=>{if(!d.step){i||(i=this.remapping(r,u+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new Wl(d.map));let h=d.step.map(i.slice(s)),g;h&&o.maybeStep(h).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],f.push(new Wl(g,void 0,void 0,f.length+c.length))),s--,g&&i.appendMap(g,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new sl(this.items.slice(0,r).append(c.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<t.steps.length;c++){let d=t.steps[c].invert(t.docs[c]),u=new Wl(t.mapping.maps[c],d,n),h;(h=l&&l.merge(u))&&(u=h,c?s.pop():a=a.slice(0,a.length-1)),s.push(u),n&&(o++,n=void 0),i||(l=u)}let f=o-r.depth;return f>a4e&&(a=o4e(a,f),o-=f),new sl(a.append(s),o)}remapping(t,n){let r=new Q2;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new sl(this.items.append(t.map(n=>new Wl(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(u=>{u.selection&&a--},i);let l=n;this.items.forEach(u=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let g=s.maps[h];if(u.step){let y=t.steps[h].invert(t.docs[h]),U=u.selection&&u.selection.map(s.slice(l+1,h));U&&a++,r.push(new Wl(g,y,U))}else r.push(new Wl(g))},i);let f=[];for(let u=n;u<o;u++)f.push(new Wl(s.maps[u]));let c=this.items.slice(0,i).append(f).append(r),d=new sl(c,a);return d.emptyItemCount()>s4e&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),f=l&&l.getMap();if(r--,f&&n.appendMap(f,r),l){let c=o.selection&&o.selection.map(n.slice(r));c&&s++;let d=new Wl(f.invert(),l,c),u,h=i.length-1;(u=i.length&&i[h].merge(d))?i[h]=u:i.push(d)}}else o.map&&r--},this.items.length,0),new sl(Ci.from(i.reverse()),s)}}sl.empty=new sl(Ci.empty,0);function o4e(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Wl{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Wl(n.getMap().invert(),n,this.selection)}}}class Zd{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const a4e=20;function l4e(e,t,n,r){let i=n.getMeta(jh),s;if(i)return i.historyState;n.getMeta(d4e)&&(e=new Zd(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(jh))return o.getMeta(jh).redo?new Zd(e.done.addTransform(n,void 0,r,k3(t)),e.undone,kB(n.mapping.maps),e.prevTime,e.prevComposition):new Zd(e.done,e.undone.addTransform(n,void 0,r,k3(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!o&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!c4e(n,e.prevRanges)),f=o?ok(e.prevRanges,n.mapping):kB(n.mapping.maps);return new Zd(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,k3(t)),sl.empty,f,n.time,a??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Zd(e.done.rebased(n,s),e.undone.rebased(n,s),ok(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Zd(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),ok(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function c4e(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function kB(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function ok(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function f4e(e,t,n){let r=k3(t),i=jh.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),l=new Zd(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(jh,{redo:n,historyState:l})}let ak=!1,SB=null;function k3(e){let t=e.plugins;if(SB!=t){ak=!1,SB=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){ak=!0;break}}return ak}const jh=new fi("history"),d4e=new fi("closeHistory");function u4e(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new xr({key:jh,state:{init(){return new Zd(sl.empty,sl.empty,null,0,-1)},apply(t,n,r){return l4e(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?Oq:r=="historyRedo"?jq:null;return!i||!t.editable?!1:(n.preventDefault(),i(t.state,t.dispatch))}}}})}function Lq(e,t){return(n,r)=>{let i=jh.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=f4e(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const Oq=Lq(!1,!0),jq=Lq(!0,!0);zr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new xr({key:new fi("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(a,l);return e=!0,f}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,l=s-r,f=a-l,c=a;return t.deleteRange(f,c),!(this.storage.characters({node:t.doc})>r)}})]}});var h4e=zr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Yxe(this.options)]}});zr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new xr({key:new fi("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return pr.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((l,f)=>{if(l.isText)return;if(!(i>=f&&i<=f+l.nodeSize-1))return!1;o+=1});let a=0;return e.descendants((l,f)=>{if(l.isText||!(i>=f&&i<=f+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Ts.node(f,f+l.nodeSize,{class:this.options.className}))}),pr.create(e,s)}}})]}});var p4e=zr.create({name:"gapCursor",addProseMirrorPlugins(){return[Jxe()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=gn(dt(e,"allowGapCursor",n)))!=null?t:null}}}),CB="placeholder";function m4e(e){return e.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var g4e=zr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:CB,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const e=this.options.dataAttribute?`data-${m4e(this.options.dataAttribute)}`:`data-${CB}`;return[new xr({key:new fi("placeholder"),props:{decorations:({doc:t,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,s=[];if(!r)return null;const o=this.editor.isEmpty;return t.descendants((a,l)=>{const f=i>=l&&i<=l+a.nodeSize,c=!a.isLeaf&&fw(a);if((f||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const u=Ts.node(l,l+a.nodeSize,{class:d.join(" "),[e]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:f}):this.options.placeholder});s.push(u)}return this.options.includeChildren}),pr.create(t,s)}}})]}});zr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new xr({key:new fi("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||HZ(n.selection)||e.view.dragging?null:pr.create(n.doc,[Ts.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function AB({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var b4e=zr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new fi(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new xr({key:t,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:f}=o,c=t.getState(o),d=a.content.size,u=f.nodes[n];if(c)return l.insert(d,u.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!AB({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!AB({node:o,types:r})}}})]}}),y4e=zr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Oq(e,t),redo:()=>({state:e,dispatch:t})=>jq(e,t)}},addProseMirrorPlugins(){return[u4e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),U4e=zr.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(V3e.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(B3e.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(kq.configure(this.options.bulletList)),this.options.code!==!1&&i.push(X3e.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Z3e.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(q3e.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(h4e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(p4e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Q3e.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(J3e.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(y4e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(exe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(sxe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Sq.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Nq.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Eq.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(_q.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Hxe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Gxe.configure(this.options.strike)),this.options.text!==!1&&i.push(Xxe.configure(this.options.text)),this.options.underline!==!1&&i.push(Kxe.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(b4e.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),vI=U4e,x4e=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,w4e=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,Bq=e=>e.match(x4e),MB=(e,t)=>t?"https://www.youtube-nocookie.com/embed/videoseries?list=":e?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",v4e=e=>{const{url:t,allowFullscreen:n,autoplay:r,ccLanguage:i,ccLoadPolicy:s,controls:o,disableKBcontrols:a,enableIFrameApi:l,endTime:f,interfaceLanguage:c,ivLoadPolicy:d,loop:u,modestBranding:h,nocookie:g,origin:y,playlist:U,progressBarColor:x,startAt:v,rel:E}=e;if(!Bq(t))return null;if(t.includes("/embed/"))return t;if(t.includes("youtu.be")){const I=t.split("/").pop();return I?`${MB(g)}${I}`:null}const M=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(t);if(!M||!M[2])return null;let S=`${MB(g,M[1]==="list")}${M[2]}`;const A=[];return n===!1&&A.push("fs=0"),r&&A.push("autoplay=1"),i&&A.push(`cc_lang_pref=${i}`),s&&A.push("cc_load_policy=1"),o||A.push("controls=0"),a&&A.push("disablekb=1"),l&&A.push("enablejsapi=1"),f&&A.push(`end=${f}`),c&&A.push(`hl=${c}`),d&&A.push(`iv_load_policy=${d}`),u&&A.push("loop=1"),h&&A.push("modestbranding=1"),y&&A.push(`origin=${y}`),U&&A.push(`playlist=${U}`),v&&A.push(`start=${v}`),x&&A.push(`color=${x}`),E!==void 0&&A.push(`rel=${E}`),A.length&&(S+=`${M[1]==="list"?"&":"?"}${A.join("&")}`),S},E4e=ho.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:e=>({commands:t})=>Bq(e.src)?t.insertContent({type:this.name,attrs:e}):!1}},addPasteRules(){return this.options.addPasteHandler?[jUe({find:w4e,type:this.type,getAttributes:e=>({src:e.input})})]:[]},renderHTML({HTMLAttributes:e}){const t=v4e({url:e.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:e.start||0,rel:this.options.rel});return e.src=t,["div",{"data-youtube-video":""},["iframe",Fr(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},e)]]},...aq({nodeName:"youtube",allowedAttributes:["src","width","height","start"]})}),EI=E4e,kI=g4e;const U4=({label:e,placeholder:t,onSubmit:n,onCancel:r})=>{const[i,s]=T.useState(""),o=T.useRef(null);T.useEffect(()=>{var f;(f=o.current)==null||f.focus()},[]);const a=()=>{i.trim()&&n(i.trim())},l=f=>{f.key==="Enter"?(f.preventDefault(),a()):f.key==="Escape"&&r()};return m.jsx("div",{className:"im-overlay",onMouseDown:r,children:m.jsxs("div",{className:"im-dialog",onMouseDown:f=>f.stopPropagation(),children:[m.jsx("label",{className:"im-label",children:e}),m.jsx("input",{ref:o,className:"im-input",type:"text",placeholder:t,value:i,onChange:f=>s(f.target.value),onKeyDown:l}),m.jsxs("div",{className:"im-actions",children:[m.jsx("button",{className:"im-cancel",onClick:r,children:"Cancel"}),m.jsx("button",{className:"im-submit",disabled:!i.trim(),onClick:a,children:"Add"})]})]})})};function k4e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const S4e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,C4e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,A4e={};function TB(e,t){return(A4e.jsx?C4e:S4e).test(e)}const M4e=/[ \t\n\f\r]/g;function T4e(e){return typeof e=="object"?e.type==="text"?IB(e.value):!1:IB(e)}function IB(e){return e.replace(M4e,"")===""}class hy{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}hy.prototype.normal={};hy.prototype.property={};hy.prototype.space=void 0;function Fq(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new hy(n,r,t)}function UA(e){return e.toLowerCase()}class po{constructor(t,n){this.attribute=n,this.property=t}}po.prototype.attribute="";po.prototype.booleanish=!1;po.prototype.boolean=!1;po.prototype.commaOrSpaceSeparated=!1;po.prototype.commaSeparated=!1;po.prototype.defined=!1;po.prototype.mustUseProperty=!1;po.prototype.number=!1;po.prototype.overloadedBoolean=!1;po.prototype.property="";po.prototype.spaceSeparated=!1;po.prototype.space=void 0;let I4e=0;const Bt=A1(),Xr=A1(),xA=A1(),Oe=A1(),Bn=A1(),fm=A1(),ko=A1();function A1(){return 2**++I4e}const wA=Object.freeze(Object.defineProperty({__proto__:null,boolean:Bt,booleanish:Xr,commaOrSpaceSeparated:ko,commaSeparated:fm,number:Oe,overloadedBoolean:xA,spaceSeparated:Bn},Symbol.toStringTag,{value:"Module"})),lk=Object.keys(wA);class SI extends po{constructor(t,n,r,i){let s=-1;if(super(t,n),NB(this,"space",i),typeof r=="number")for(;++s<lk.length;){const o=lk[s];NB(this,lk[s],(r&wA[o])===wA[o])}}}SI.prototype.defined=!0;function NB(e,t,n){n&&(e[t]=n)}function Yg(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new SI(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[UA(r)]=r,n[UA(s.attribute)]=r}return new hy(t,n,e.space)}const zq=Yg({properties:{ariaActiveDescendant:null,ariaAtomic:Xr,ariaAutoComplete:null,ariaBusy:Xr,ariaChecked:Xr,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:Bn,ariaCurrent:null,ariaDescribedBy:Bn,ariaDetails:null,ariaDisabled:Xr,ariaDropEffect:Bn,ariaErrorMessage:null,ariaExpanded:Xr,ariaFlowTo:Bn,ariaGrabbed:Xr,ariaHasPopup:null,ariaHidden:Xr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Bn,ariaLevel:Oe,ariaLive:null,ariaModal:Xr,ariaMultiLine:Xr,ariaMultiSelectable:Xr,ariaOrientation:null,ariaOwns:Bn,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:Xr,ariaReadOnly:Xr,ariaRelevant:null,ariaRequired:Xr,ariaRoleDescription:Bn,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:Xr,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function $q(e,t){return t in e?e[t]:t}function Hq(e,t){return $q(e,t.toLowerCase())}const N4e=Yg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:fm,acceptCharset:Bn,accessKey:Bn,action:null,allow:null,allowFullScreen:Bt,allowPaymentRequest:Bt,allowUserMedia:Bt,alt:null,as:null,async:Bt,autoCapitalize:null,autoComplete:Bn,autoFocus:Bt,autoPlay:Bt,blocking:Bn,capture:null,charSet:null,checked:Bt,cite:null,className:Bn,cols:Oe,colSpan:null,content:null,contentEditable:Xr,controls:Bt,controlsList:Bn,coords:Oe|fm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Bt,defer:Bt,dir:null,dirName:null,disabled:Bt,download:xA,draggable:Xr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Bt,formTarget:null,headers:Bn,height:Oe,hidden:xA,high:Oe,href:null,hrefLang:null,htmlFor:Bn,httpEquiv:Bn,id:null,imageSizes:null,imageSrcSet:null,inert:Bt,inputMode:null,integrity:null,is:null,isMap:Bt,itemId:null,itemProp:Bn,itemRef:Bn,itemScope:Bt,itemType:Bn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Bt,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:Bt,muted:Bt,name:null,nonce:null,noModule:Bt,noValidate:Bt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Bt,optimum:Oe,pattern:null,ping:Bn,placeholder:null,playsInline:Bt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Bt,referrerPolicy:null,rel:Bn,required:Bt,reversed:Bt,rows:Oe,rowSpan:Oe,sandbox:Bn,scope:null,scoped:Bt,seamless:Bt,selected:Bt,shadowRootClonable:Bt,shadowRootDelegatesFocus:Bt,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:Xr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:Bt,useMap:null,value:Xr,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Bn,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Bt,declare:Bt,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:Bt,noHref:Bt,noShade:Bt,noWrap:Bt,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:Xr,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Bt,disableRemotePlayback:Bt,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:Hq}),R4e=Yg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ko,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:Bn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:Bt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:fm,g2:fm,glyphName:fm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:ko,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Bn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ko,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ko,rev:ko,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ko,requiredFeatures:ko,requiredFonts:ko,requiredFormats:ko,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:ko,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ko,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ko,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:$q}),Vq=Yg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Wq=Yg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Hq}),Gq=Yg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),_4e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},P4e=/[A-Z]/g,RB=/-[a-z]/g,D4e=/^data[-\w.:]+$/i;function L4e(e,t){const n=UA(t);let r=t,i=po;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&D4e.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(RB,j4e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!RB.test(s)){let o=s.replace(P4e,O4e);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=SI}return new i(r,t)}function O4e(e){return"-"+e.toLowerCase()}function j4e(e){return e.charAt(1).toUpperCase()}const B4e=Fq([zq,N4e,Vq,Wq,Gq],"html"),CI=Fq([zq,R4e,Vq,Wq,Gq],"svg");function F4e(e){return e.join(" ").trim()}var n5={},ck,_B;function z4e(){if(_B)return ck;_B=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,f="/",c="*",d="",u="comment",h="declaration";function g(U,x){if(typeof U!="string")throw new TypeError("First argument must be a string");if(!U)return[];x=x||{};var v=1,E=1;function k(L){var B=L.match(t);B&&(v+=B.length);var V=L.lastIndexOf(l);E=~V?L.length-V:E+L.length}function M(){var L={line:v,column:E};return function(B){return B.position=new S(L),R(),B}}function S(L){this.start=L,this.end={line:v,column:E},this.source=x.source}S.prototype.content=U;function A(L){var B=new Error(x.source+":"+v+":"+E+": "+L);if(B.reason=L,B.filename=x.source,B.line=v,B.column=E,B.source=U,!x.silent)throw B}function I(L){var B=L.exec(U);if(B){var V=B[0];return k(V),U=U.slice(V.length),B}}function R(){I(n)}function D(L){var B;for(L=L||[];B=_();)B!==!1&&L.push(B);return L}function _(){var L=M();if(!(f!=U.charAt(0)||c!=U.charAt(1))){for(var B=2;d!=U.charAt(B)&&(c!=U.charAt(B)||f!=U.charAt(B+1));)++B;if(B+=2,d===U.charAt(B-1))return A("End of comment missing");var V=U.slice(2,B-2);return E+=2,k(V),U=U.slice(B),E+=2,L({type:u,comment:V})}}function P(){var L=M(),B=I(r);if(B){if(_(),!I(i))return A("property missing ':'");var V=I(s),z=L({type:h,property:y(B[0].replace(e,d)),value:V?y(V[0].replace(e,d)):d});return I(o),z}}function $(){var L=[];D(L);for(var B;B=P();)B!==!1&&(L.push(B),D(L));return L}return R(),$()}function y(U){return U?U.replace(a,d):d}return ck=g,ck}var PB;function $4e(){if(PB)return n5;PB=1;var e=n5.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(n5,"__esModule",{value:!0}),n5.default=n;const t=e(z4e());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,t.default)(r),a=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:f,value:c}=l;a?i(f,c,l):c&&(s=s||{},s[f]=c)}),s}return n5}var r5={},DB;function H4e(){if(DB)return r5;DB=1,Object.defineProperty(r5,"__esModule",{value:!0}),r5.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(f){return!f||n.test(f)||e.test(f)},o=function(f,c){return c.toUpperCase()},a=function(f,c){return"".concat(c,"-")},l=function(f,c){return c===void 0&&(c={}),s(f)?f:(f=f.toLowerCase(),c.reactCompat?f=f.replace(i,a):f=f.replace(r,a),f.replace(t,o))};return r5.camelCase=l,r5}var i5,LB;function V4e(){if(LB)return i5;LB=1;var e=i5&&i5.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e($4e()),n=H4e();function r(i,s){var o={};return!i||typeof i!="string"||(0,t.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,i5=r,i5}var W4e=V4e();const G4e=Na(W4e),Xq=Kq("end"),AI=Kq("start");function Kq(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function X4e(e){const t=AI(e),n=Xq(e);if(t&&n)return{start:t,end:n}}function K4e(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?OB(e.position):"start"in e||"end"in e?OB(e):"line"in e||"column"in e?vA(e):""}function vA(e){return jB(e&&e.line)+":"+jB(e&&e.column)}function OB(e){return vA(e&&e.start)+"-"+vA(e&&e.end)}function jB(e){return e&&typeof e=="number"?e:1}class ps extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=K4e(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ps.prototype.file="";ps.prototype.name="";ps.prototype.reason="";ps.prototype.message="";ps.prototype.stack="";ps.prototype.column=void 0;ps.prototype.line=void 0;ps.prototype.ancestors=void 0;ps.prototype.cause=void 0;ps.prototype.fatal=void 0;ps.prototype.place=void 0;ps.prototype.ruleId=void 0;ps.prototype.source=void 0;const MI={}.hasOwnProperty,Y4e=new Map,Z4e=/[A-Z]/g,q4e=new Set(["table","tbody","thead","tfoot","tr"]),Q4e=new Set(["td","th"]),Yq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function J4e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=a9e(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=o9e(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?CI:B4e,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Zq(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Zq(e,t,n){if(t.type==="element")return e9e(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return t9e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return r9e(e,t,n);if(t.type==="mdxjsEsm")return n9e(e,t);if(t.type==="root")return i9e(e,t,n);if(t.type==="text")return s9e(e,t)}function e9e(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=CI,e.schema=i),e.ancestors.push(t);const s=Qq(e,t.tagName,!1),o=l9e(e,t);let a=II(e,t);return q4e.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!T4e(l):!0})),qq(e,o,s,t),TI(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function t9e(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ab(e,t.position)}function n9e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ab(e,t.position)}function r9e(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=CI,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Qq(e,t.name,!0),o=c9e(e,t),a=II(e,t);return qq(e,o,s,t),TI(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function i9e(e,t,n){const r={};return TI(r,II(e,t)),e.create(t,e.Fragment,r,n)}function s9e(e,t){return t.value}function qq(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function TI(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function o9e(e,t,n){return r;function r(i,s,o,a){const f=Array.isArray(o.children)?n:t;return a?f(s,o,a):f(s,o)}}function a9e(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=AI(r);return t(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function l9e(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&MI.call(t.properties,i)){const s=f9e(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Q4e.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function c9e(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else ab(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else ab(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function II(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Y4e;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const f=i.get(l)||0;o=l+"-"+f,i.set(l,f+1)}}const a=Zq(e,s,o);a!==void 0&&n.push(a)}return n}function f9e(e,t,n){const r=L4e(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?k4e(n):F4e(n)),r.property==="style"){let i=typeof n=="object"?n:d9e(e,String(n));return e.stylePropertyNameCase==="css"&&(i=u9e(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?_4e[r.property]||r.property:r.attribute,n]}}function d9e(e,t){try{return G4e(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new ps("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Yq+"#cannot-parse-style-attribute",i}}function Qq(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=TB(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=TB(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return MI.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);ab(e)}function ab(e,t){const n=new ps("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Yq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function u9e(e){const t={};let n;for(n in e)MI.call(e,n)&&(t[h9e(n)]=e[n]);return t}function h9e(e){let t=e.replace(Z4e,p9e);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function p9e(e){return"-"+e.toLowerCase()}const fk={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},m9e={};function g9e(e,t){const n=m9e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Jq(e,r,i)}function Jq(e,t,n){if(b9e(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return BB(e.children,t,n)}return Array.isArray(e)?BB(e,t,n):""}function BB(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Jq(e[i],t,n);return r.join("")}function b9e(e){return!!(e&&typeof e=="object")}const FB=document.createElement("i");function NI(e){const t="&"+e+";";FB.innerHTML=t;const n=FB.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Sc(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function ma(e,t){return e.length>0?(Sc(e,e.length,0,t),e):t}const zB={}.hasOwnProperty;function y9e(e){const t={};let n=-1;for(;++n<e.length;)U9e(t,e[n]);return t}function U9e(e,t){let n;for(n in t){const i=(zB.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){zB.call(i,o)||(i[o]=[]);const a=s[o];x9e(i[o],Array.isArray(a)?a:a?[a]:[])}}}function x9e(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Sc(e,0,0,r)}function eQ(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function dm(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fc=r0(/[A-Za-z]/),fl=r0(/[\dA-Za-z]/),w9e=r0(/[#-'*+\--9=?A-Z^-~]/);function EA(e){return e!==null&&(e<32||e===127)}const kA=r0(/\d/),v9e=r0(/[\dA-Fa-f]/),E9e=r0(/[!-/:-@[-`{-~]/);function St(e){return e!==null&&e<-2}function lo(e){return e!==null&&(e<0||e===32)}function yn(e){return e===-2||e===-1||e===32}const k9e=r0(new RegExp("\\p{P}|\\p{S}","u")),S9e=r0(/\s/);function r0(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function zn(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return yn(l)?(e.enter(n),a(l)):t(l)}function a(l){return yn(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const C9e={tokenize:A9e};function A9e(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),zn(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return St(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const M9e={tokenize:T9e},$B={tokenize:I9e};function T9e(e){const t=this,n=[];let r=0,i,s,o;return a;function a(E){if(r<n.length){const k=n[r];return t.containerState=k[1],e.attempt(k[0].continuation,l,f)(E)}return f(E)}function l(E){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const k=t.events.length;let M=k,S;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){S=t.events[M][1].end;break}x(r);let A=k;for(;A<t.events.length;)t.events[A][1].end={...S},A++;return Sc(t.events,M+1,0,t.events.slice(k)),t.events.length=A,f(E)}return a(E)}function f(E){if(r===n.length){if(!i)return u(E);if(i.currentConstruct&&i.currentConstruct.concrete)return g(E);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check($B,c,d)(E)}function c(E){return i&&v(),x(r),u(E)}function d(E){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(E)}function u(E){return t.containerState={},e.attempt($B,h,g)(E)}function h(E){return r++,n.push([t.currentConstruct,t.containerState]),u(E)}function g(E){if(E===null){i&&v(),x(0),e.consume(E);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),y(E)}function y(E){if(E===null){U(e.exit("chunkFlow"),!0),x(0),e.consume(E);return}return St(E)?(e.consume(E),U(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(E),y)}function U(E,k){const M=t.sliceStream(E);if(k&&M.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(M),t.parser.lazy[E.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const A=t.events.length;let I=A,R,D;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(R){D=t.events[I][1].end;break}R=!0}for(x(r),S=A;S<t.events.length;)t.events[S][1].end={...D},S++;Sc(t.events,I+1,0,t.events.slice(A)),t.events.length=S}}function x(E){let k=n.length;for(;k-- >E;){const M=n[k];t.containerState=M[1],M[0].exit.call(t,e)}n.length=E}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function I9e(e,t,n){return zn(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function HB(e){if(e===null||lo(e)||S9e(e))return 1;if(k9e(e))return 2}function RI(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const SA={name:"attention",resolveAll:N9e,tokenize:R9e};function N9e(e,t){let n=-1,r,i,s,o,a,l,f,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},u={...e[n][1].start};VB(d,-l),VB(u,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:u},s={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[r][1].end={...o.start},e[n][1].start={...a.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=ma(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=ma(f,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),f=ma(f,RI(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=ma(f,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,f=ma(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Sc(e,r-1,n-r+3,f),n=r+f.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function R9e(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=HB(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const f=e.exit("attentionSequence"),c=HB(l),d=!c||c===2&&i||n.includes(l),u=!i||i===2&&c||n.includes(r);return f._open=!!(s===42?d:d&&(i||!u)),f._close=!!(s===42?u:u&&(c||!d)),t(l)}}function VB(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const _9e={name:"autolink",tokenize:P9e};function P9e(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return fc(h)?(e.consume(h),o):h===64?n(h):f(h)}function o(h){return h===43||h===45||h===46||fl(h)?(r=1,a(h)):f(h)}function a(h){return h===58?(e.consume(h),r=0,l):(h===43||h===45||h===46||fl(h))&&r++<32?(e.consume(h),a):(r=0,f(h))}function l(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||EA(h)?n(h):(e.consume(h),l)}function f(h){return h===64?(e.consume(h),c):w9e(h)?(e.consume(h),f):n(h)}function c(h){return fl(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):u(h)}function u(h){if((h===45||fl(h))&&r++<63){const g=h===45?u:d;return e.consume(h),g}return n(h)}}const mw={partial:!0,tokenize:D9e};function D9e(e,t,n){return r;function r(s){return yn(s)?zn(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||St(s)?t(s):n(s)}}const tQ={continuation:{tokenize:O9e},exit:j9e,name:"blockQuote",tokenize:L9e};function L9e(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return yn(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function O9e(e,t,n){const r=this;return i;function i(o){return yn(o)?zn(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(tQ,t,n)(o)}}function j9e(e){e.exit("blockQuote")}const nQ={name:"characterEscape",tokenize:B9e};function B9e(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return E9e(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const rQ={name:"characterReference",tokenize:F9e};function F9e(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),s=31,o=fl,c(d))}function f(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=v9e,c):(e.enter("characterReferenceValue"),s=7,o=kA,c(d))}function c(d){if(d===59&&i){const u=e.exit("characterReferenceValue");return o===fl&&!NI(r.sliceSerialize(u))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const WB={partial:!0,tokenize:$9e},GB={concrete:!0,name:"codeFenced",tokenize:z9e};function z9e(e,t,n){const r=this,i={partial:!0,tokenize:M};let s=0,o=0,a;return l;function l(S){return f(S)}function f(S){const A=r.events[r.events.length-1];return s=A&&A[1].type==="linePrefix"?A[2].sliceSerialize(A[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),yn(S)?zn(e,d,"whitespace")(S):d(S))}function d(S){return S===null||St(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(WB,y,k)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(S))}function u(S){return S===null||St(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(S)):yn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),zn(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),u)}function h(S){return S===null||St(S)?d(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||St(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(S)):S===96&&S===a?n(S):(e.consume(S),g)}function y(S){return e.attempt(i,k,U)(S)}function U(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),x}function x(S){return s>0&&yn(S)?zn(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||St(S)?e.check(WB,y,k)(S):(e.enter("codeFlowValue"),E(S))}function E(S){return S===null||St(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),E)}function k(S){return e.exit("codeFenced"),t(S)}function M(S,A,I){let R=0;return D;function D(B){return S.enter("lineEnding"),S.consume(B),S.exit("lineEnding"),_}function _(B){return S.enter("codeFencedFence"),yn(B)?zn(S,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):P(B)}function P(B){return B===a?(S.enter("codeFencedFenceSequence"),$(B)):I(B)}function $(B){return B===a?(R++,S.consume(B),$):R>=o?(S.exit("codeFencedFenceSequence"),yn(B)?zn(S,L,"whitespace")(B):L(B)):I(B)}function L(B){return B===null||St(B)?(S.exit("codeFencedFence"),A(B)):I(B)}}}function $9e(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const dk={name:"codeIndented",tokenize:V9e},H9e={partial:!0,tokenize:W9e};function V9e(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),zn(e,s,"linePrefix",5)(f)}function s(f){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(f):n(f)}function o(f){return f===null?l(f):St(f)?e.attempt(H9e,o,l)(f):(e.enter("codeFlowValue"),a(f))}function a(f){return f===null||St(f)?(e.exit("codeFlowValue"),o(f)):(e.consume(f),a)}function l(f){return e.exit("codeIndented"),t(f)}}function W9e(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):St(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):zn(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):St(o)?i(o):n(o)}}const G9e={name:"codeText",previous:K9e,resolve:X9e,tokenize:Y9e};function X9e(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function K9e(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Y9e(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):St(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),f(d))}function f(d){return d===null||d===32||d===96||St(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),f)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",f(d))}}class Z9e{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&s5(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),s5(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),s5(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);s5(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);s5(this.left,n.reverse())}}}function s5(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function iQ(e){const t={};let n=-1,r,i,s,o,a,l,f;const c=new Z9e(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,q9e(c,n)),n=t[n],f=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Sc(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!f}function q9e(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],f={};let c,d,u=-1,h=n,g=0,y=0;const U=[y];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++u<a.length;)a[u][0]==="exit"&&a[u-1][0]==="enter"&&a[u][1].type===a[u-1][1].type&&a[u][1].start.line!==a[u][1].end.line&&(y=u+1,U.push(y),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):U.pop(),u=U.length;u--;){const x=a.slice(U[u],U[u+1]),v=s.pop();l.push([v,v+x.length-1]),e.splice(v,2,x)}for(l.reverse(),u=-1;++u<l.length;)f[g+l[u][0]]=g+l[u][1],g+=l[u][1]-l[u][0]-1;return f}const Q9e={resolve:ewe,tokenize:twe},J9e={partial:!0,tokenize:nwe};function ewe(e){return iQ(e),e}function twe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):St(a)?e.check(J9e,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function nwe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),zn(e,s,"linePrefix")}function s(o){if(o===null||St(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function sQ(e,t,n,r,i,s,o,a,l){const f=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(x){return x===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(x),e.exit(s),u):x===null||x===32||x===41||EA(x)?n(x):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),y(x))}function u(x){return x===62?(e.enter(s),e.consume(x),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===62?(e.exit("chunkString"),e.exit(a),u(x)):x===null||x===60||St(x)?n(x):(e.consume(x),x===92?g:h)}function g(x){return x===60||x===62||x===92?(e.consume(x),h):h(x)}function y(x){return!c&&(x===null||x===41||lo(x))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(x)):c<f&&x===40?(e.consume(x),c++,y):x===41?(e.consume(x),c--,y):x===null||x===32||x===40||EA(x)?n(x):(e.consume(x),x===92?U:y)}function U(x){return x===40||x===41||x===92?(e.consume(x),y):y(x)}}function oQ(e,t,n,r,i,s){const o=this;let a=0,l;return f;function f(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):St(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||St(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),l||(l=!yn(h)),h===92?u:d)}function u(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function aQ(e,t,n,r,i,s){let o;return a;function a(u){return u===34||u===39||u===40?(e.enter(r),e.enter(i),e.consume(u),e.exit(i),o=u===40?41:u,l):n(u)}function l(u){return u===o?(e.enter(i),e.consume(u),e.exit(i),e.exit(r),t):(e.enter(s),f(u))}function f(u){return u===o?(e.exit(s),l(o)):u===null?n(u):St(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),zn(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(u))}function c(u){return u===o||u===null||St(u)?(e.exit("chunkString"),f(u)):(e.consume(u),u===92?d:c)}function d(u){return u===o||u===92?(e.consume(u),c):c(u)}}function d2(e,t){let n;return r;function r(i){return St(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):yn(i)?zn(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const rwe={name:"definition",tokenize:swe},iwe={partial:!0,tokenize:owe};function swe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return oQ.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=dm(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),l):n(h)}function l(h){return lo(h)?d2(e,f)(h):f(h)}function f(h){return sQ(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(iwe,d,d)(h)}function d(h){return yn(h)?zn(e,u,"whitespace")(h):u(h)}function u(h){return h===null||St(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function owe(e,t,n){return r;function r(a){return lo(a)?d2(e,i)(a):n(a)}function i(a){return aQ(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return yn(a)?zn(e,o,"whitespace")(a):o(a)}function o(a){return a===null||St(a)?t(a):n(a)}}const awe={name:"hardBreakEscape",tokenize:lwe};function lwe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return St(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const cwe={name:"headingAtx",resolve:fwe,tokenize:dwe};function fwe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Sc(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function dwe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||lo(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||St(c)?(e.exit("atxHeading"),t(c)):yn(c)?zn(e,a,"whitespace")(c):(e.enter("atxHeadingText"),f(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function f(c){return c===null||c===35||lo(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),f)}}const uwe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XB=["pre","script","style","textarea"],hwe={concrete:!0,name:"htmlFlow",resolveTo:gwe,tokenize:bwe},pwe={partial:!0,tokenize:Uwe},mwe={partial:!0,tokenize:ywe};function gwe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function bwe(e,t,n){const r=this;let i,s,o,a,l;return f;function f(Y){return c(Y)}function c(Y){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Y),d}function d(Y){return Y===33?(e.consume(Y),u):Y===47?(e.consume(Y),s=!0,y):Y===63?(e.consume(Y),i=3,r.interrupt?t:F):fc(Y)?(e.consume(Y),o=String.fromCharCode(Y),U):n(Y)}function u(Y){return Y===45?(e.consume(Y),i=2,h):Y===91?(e.consume(Y),i=5,a=0,g):fc(Y)?(e.consume(Y),i=4,r.interrupt?t:F):n(Y)}function h(Y){return Y===45?(e.consume(Y),r.interrupt?t:F):n(Y)}function g(Y){const ae="CDATA[";return Y===ae.charCodeAt(a++)?(e.consume(Y),a===ae.length?r.interrupt?t:P:g):n(Y)}function y(Y){return fc(Y)?(e.consume(Y),o=String.fromCharCode(Y),U):n(Y)}function U(Y){if(Y===null||Y===47||Y===62||lo(Y)){const ae=Y===47,ge=o.toLowerCase();return!ae&&!s&&XB.includes(ge)?(i=1,r.interrupt?t(Y):P(Y)):uwe.includes(o.toLowerCase())?(i=6,ae?(e.consume(Y),x):r.interrupt?t(Y):P(Y)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Y):s?v(Y):E(Y))}return Y===45||fl(Y)?(e.consume(Y),o+=String.fromCharCode(Y),U):n(Y)}function x(Y){return Y===62?(e.consume(Y),r.interrupt?t:P):n(Y)}function v(Y){return yn(Y)?(e.consume(Y),v):D(Y)}function E(Y){return Y===47?(e.consume(Y),D):Y===58||Y===95||fc(Y)?(e.consume(Y),k):yn(Y)?(e.consume(Y),E):D(Y)}function k(Y){return Y===45||Y===46||Y===58||Y===95||fl(Y)?(e.consume(Y),k):M(Y)}function M(Y){return Y===61?(e.consume(Y),S):yn(Y)?(e.consume(Y),M):E(Y)}function S(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(e.consume(Y),l=Y,A):yn(Y)?(e.consume(Y),S):I(Y)}function A(Y){return Y===l?(e.consume(Y),l=null,R):Y===null||St(Y)?n(Y):(e.consume(Y),A)}function I(Y){return Y===null||Y===34||Y===39||Y===47||Y===60||Y===61||Y===62||Y===96||lo(Y)?M(Y):(e.consume(Y),I)}function R(Y){return Y===47||Y===62||yn(Y)?E(Y):n(Y)}function D(Y){return Y===62?(e.consume(Y),_):n(Y)}function _(Y){return Y===null||St(Y)?P(Y):yn(Y)?(e.consume(Y),_):n(Y)}function P(Y){return Y===45&&i===2?(e.consume(Y),V):Y===60&&i===1?(e.consume(Y),z):Y===62&&i===4?(e.consume(Y),K):Y===63&&i===3?(e.consume(Y),F):Y===93&&i===5?(e.consume(Y),W):St(Y)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(pwe,q,$)(Y)):Y===null||St(Y)?(e.exit("htmlFlowData"),$(Y)):(e.consume(Y),P)}function $(Y){return e.check(mwe,L,q)(Y)}function L(Y){return e.enter("lineEnding"),e.consume(Y),e.exit("lineEnding"),B}function B(Y){return Y===null||St(Y)?$(Y):(e.enter("htmlFlowData"),P(Y))}function V(Y){return Y===45?(e.consume(Y),F):P(Y)}function z(Y){return Y===47?(e.consume(Y),o="",G):P(Y)}function G(Y){if(Y===62){const ae=o.toLowerCase();return XB.includes(ae)?(e.consume(Y),K):P(Y)}return fc(Y)&&o.length<8?(e.consume(Y),o+=String.fromCharCode(Y),G):P(Y)}function W(Y){return Y===93?(e.consume(Y),F):P(Y)}function F(Y){return Y===62?(e.consume(Y),K):Y===45&&i===2?(e.consume(Y),F):P(Y)}function K(Y){return Y===null||St(Y)?(e.exit("htmlFlowData"),q(Y)):(e.consume(Y),K)}function q(Y){return e.exit("htmlFlow"),t(Y)}}function ywe(e,t,n){const r=this;return i;function i(o){return St(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Uwe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(mw,t,n)}}const xwe={name:"htmlText",tokenize:wwe};function wwe(e,t,n){const r=this;let i,s,o;return a;function a(F){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(F),l}function l(F){return F===33?(e.consume(F),f):F===47?(e.consume(F),M):F===63?(e.consume(F),E):fc(F)?(e.consume(F),I):n(F)}function f(F){return F===45?(e.consume(F),c):F===91?(e.consume(F),s=0,g):fc(F)?(e.consume(F),v):n(F)}function c(F){return F===45?(e.consume(F),h):n(F)}function d(F){return F===null?n(F):F===45?(e.consume(F),u):St(F)?(o=d,z(F)):(e.consume(F),d)}function u(F){return F===45?(e.consume(F),h):d(F)}function h(F){return F===62?V(F):F===45?u(F):d(F)}function g(F){const K="CDATA[";return F===K.charCodeAt(s++)?(e.consume(F),s===K.length?y:g):n(F)}function y(F){return F===null?n(F):F===93?(e.consume(F),U):St(F)?(o=y,z(F)):(e.consume(F),y)}function U(F){return F===93?(e.consume(F),x):y(F)}function x(F){return F===62?V(F):F===93?(e.consume(F),x):y(F)}function v(F){return F===null||F===62?V(F):St(F)?(o=v,z(F)):(e.consume(F),v)}function E(F){return F===null?n(F):F===63?(e.consume(F),k):St(F)?(o=E,z(F)):(e.consume(F),E)}function k(F){return F===62?V(F):E(F)}function M(F){return fc(F)?(e.consume(F),S):n(F)}function S(F){return F===45||fl(F)?(e.consume(F),S):A(F)}function A(F){return St(F)?(o=A,z(F)):yn(F)?(e.consume(F),A):V(F)}function I(F){return F===45||fl(F)?(e.consume(F),I):F===47||F===62||lo(F)?R(F):n(F)}function R(F){return F===47?(e.consume(F),V):F===58||F===95||fc(F)?(e.consume(F),D):St(F)?(o=R,z(F)):yn(F)?(e.consume(F),R):V(F)}function D(F){return F===45||F===46||F===58||F===95||fl(F)?(e.consume(F),D):_(F)}function _(F){return F===61?(e.consume(F),P):St(F)?(o=_,z(F)):yn(F)?(e.consume(F),_):R(F)}function P(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),i=F,$):St(F)?(o=P,z(F)):yn(F)?(e.consume(F),P):(e.consume(F),L)}function $(F){return F===i?(e.consume(F),i=void 0,B):F===null?n(F):St(F)?(o=$,z(F)):(e.consume(F),$)}function L(F){return F===null||F===34||F===39||F===60||F===61||F===96?n(F):F===47||F===62||lo(F)?R(F):(e.consume(F),L)}function B(F){return F===47||F===62||lo(F)?R(F):n(F)}function V(F){return F===62?(e.consume(F),e.exit("htmlTextData"),e.exit("htmlText"),t):n(F)}function z(F){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),G}function G(F){return yn(F)?zn(e,W,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):W(F)}function W(F){return e.enter("htmlTextData"),o(F)}}const _I={name:"labelEnd",resolveAll:Swe,resolveTo:Cwe,tokenize:Awe},vwe={tokenize:Mwe},Ewe={tokenize:Twe},kwe={tokenize:Iwe};function Swe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Sc(e,0,e.length,n),e}function Cwe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},c={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return a=[["enter",l,t],["enter",f,t]],a=ma(a,e.slice(s+1,s+r+3)),a=ma(a,[["enter",c,t]]),a=ma(a,RI(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=ma(a,[["exit",c,t],e[o-2],e[o-1],["exit",f,t]]),a=ma(a,e.slice(o+1)),a=ma(a,[["exit",l,t]]),Sc(e,s,e.length,a),e}function Awe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(u){return s?s._inactive?d(u):(o=r.parser.defined.includes(dm(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelEnd"),l):n(u)}function l(u){return u===40?e.attempt(vwe,c,o?c:d)(u):u===91?e.attempt(Ewe,c,o?f:d)(u):o?c(u):d(u)}function f(u){return e.attempt(kwe,c,d)(u)}function c(u){return t(u)}function d(u){return s._balanced=!0,n(u)}}function Mwe(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return lo(d)?d2(e,s)(d):s(d)}function s(d){return d===41?c(d):sQ(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return lo(d)?d2(e,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?aQ(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function f(d){return lo(d)?d2(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function Twe(e,t,n){const r=this;return i;function i(a){return oQ.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(dm(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Iwe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Nwe={name:"labelStartImage",resolveAll:_I.resolveAll,tokenize:Rwe};function Rwe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const _we={name:"labelStartLink",resolveAll:_I.resolveAll,tokenize:Pwe};function Pwe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const uk={name:"lineEnding",tokenize:Dwe};function Dwe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),zn(e,t,"linePrefix")}}const S3={name:"thematicBreak",tokenize:Lwe};function Lwe(e,t,n){let r=0,i;return s;function s(f){return e.enter("thematicBreak"),o(f)}function o(f){return i=f,a(f)}function a(f){return f===i?(e.enter("thematicBreakSequence"),l(f)):r>=3&&(f===null||St(f))?(e.exit("thematicBreak"),t(f)):n(f)}function l(f){return f===i?(e.consume(f),r++,l):(e.exit("thematicBreakSequence"),yn(f)?zn(e,a,"whitespace")(f):a(f))}}const Xs={continuation:{tokenize:Fwe},exit:$we,name:"list",tokenize:Bwe},Owe={partial:!0,tokenize:Hwe},jwe={partial:!0,tokenize:zwe};function Bwe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const g=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:kA(h)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(S3,n,f)(h):f(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(h)}return n(h)}function l(h){return kA(h)&&++o<10?(e.consume(h),l):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),f(h)):n(h)}function f(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(mw,r.interrupt?n:c,e.attempt(Owe,u,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,u(h)}function d(h){return yn(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),u):n(h)}function u(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Fwe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(mw,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,zn(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!yn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(jwe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,zn(e,e.attempt(Xs,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function zwe(e,t,n){const r=this;return zn(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function $we(e){e.exit(this.containerState.type)}function Hwe(e,t,n){const r=this;return zn(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!yn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const KB={name:"setextUnderline",resolveTo:Vwe,tokenize:Wwe};function Vwe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Wwe(e,t,n){const r=this;let i;return s;function s(f){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=f,o(f)):n(f)}function o(f){return e.enter("setextHeadingLineSequence"),a(f)}function a(f){return f===i?(e.consume(f),a):(e.exit("setextHeadingLineSequence"),yn(f)?zn(e,l,"lineSuffix")(f):l(f))}function l(f){return f===null||St(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const Gwe={tokenize:Xwe};function Xwe(e){const t=this,n=e.attempt(mw,r,e.attempt(this.parser.constructs.flowInitial,i,zn(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Q9e,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Kwe={resolveAll:cQ()},Ywe=lQ("string"),Zwe=lQ("text");function lQ(e){return{resolveAll:cQ(e==="text"?qwe:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return f(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return f(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function f(c){if(c===null)return!0;const d=i[c];let u=-1;if(d)for(;++u<d.length;){const h=d[u];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function cQ(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function qwe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const f=i[s];if(typeof f=="string"){for(o=f.length;f.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(f===-2)l=!0,a++;else if(f!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const f={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const Qwe={42:Xs,43:Xs,45:Xs,48:Xs,49:Xs,50:Xs,51:Xs,52:Xs,53:Xs,54:Xs,55:Xs,56:Xs,57:Xs,62:tQ},Jwe={91:rwe},e7e={[-2]:dk,[-1]:dk,32:dk},t7e={35:cwe,42:S3,45:[KB,S3],60:hwe,61:KB,95:S3,96:GB,126:GB},n7e={38:rQ,92:nQ},r7e={[-5]:uk,[-4]:uk,[-3]:uk,33:Nwe,38:rQ,42:SA,60:[_9e,xwe],91:_we,92:[awe,nQ],93:_I,95:SA,96:G9e},i7e={null:[SA,Kwe]},s7e={null:[42,95]},o7e={null:[]},a7e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:s7e,contentInitial:Jwe,disable:o7e,document:Qwe,flow:t7e,flowInitial:e7e,insideSpan:i7e,string:n7e,text:r7e},Symbol.toStringTag,{value:"Module"}));function l7e(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:A(M),check:A(S),consume:v,enter:E,exit:k,interrupt:A(S,{interrupt:!0})},f={code:null,containerState:{},defineSkip:y,events:[],now:g,parser:e,previous:null,sliceSerialize:u,sliceStream:h,write:d};let c=t.tokenize.call(f,l);return t.resolveAll&&s.push(t),f;function d(_){return o=ma(o,_),U(),o[o.length-1]!==null?[]:(I(t,0),f.events=RI(s,f.events,f),f.events)}function u(_,P){return f7e(h(_),P)}function h(_){return c7e(o,_)}function g(){const{_bufferIndex:_,_index:P,line:$,column:L,offset:B}=r;return{_bufferIndex:_,_index:P,line:$,column:L,offset:B}}function y(_){i[_.line]=_.column,D()}function U(){let _;for(;r._index<o.length;){const P=o[r._index];if(typeof P=="string")for(_=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===_&&r._bufferIndex<P.length;)x(P.charCodeAt(r._bufferIndex));else x(P)}}function x(_){c=c(_)}function v(_){St(_)?(r.line++,r.column=1,r.offset+=_===-3?2:1,D()):_!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=_}function E(_,P){const $=P||{};return $.type=_,$.start=g(),f.events.push(["enter",$,f]),a.push($),$}function k(_){const P=a.pop();return P.end=g(),f.events.push(["exit",P,f]),P}function M(_,P){I(_,P.from)}function S(_,P){P.restore()}function A(_,P){return $;function $(L,B,V){let z,G,W,F;return Array.isArray(L)?q(L):"tokenize"in L?q([L]):K(L);function K(he){return ce;function ce(ie){const we=ie!==null&&he[ie],Ee=ie!==null&&he.null,_e=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(Ee)?Ee:Ee?[Ee]:[]];return q(_e)(ie)}}function q(he){return z=he,G=0,he.length===0?V:Y(he[G])}function Y(he){return ce;function ce(ie){return F=R(),W=he,he.partial||(f.currentConstruct=he),he.name&&f.parser.constructs.disable.null.includes(he.name)?ge():he.tokenize.call(P?Object.assign(Object.create(f),P):f,l,ae,ge)(ie)}}function ae(he){return _(W,F),B}function ge(he){return F.restore(),++G<z.length?Y(z[G]):V}}}function I(_,P){_.resolveAll&&!s.includes(_)&&s.push(_),_.resolve&&Sc(f.events,P,f.events.length-P,_.resolve(f.events.slice(P),f)),_.resolveTo&&(f.events=_.resolveTo(f.events,f))}function R(){const _=g(),P=f.previous,$=f.currentConstruct,L=f.events.length,B=Array.from(a);return{from:L,restore:V};function V(){r=_,f.previous=P,f.currentConstruct=$,f.events.length=L,a=B,D()}}function D(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function c7e(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function f7e(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function d7e(e){const r={constructs:y9e([a7e,...(e||{}).extensions||[]]),content:i(C9e),defined:[],document:i(M9e),flow:i(Gwe),lazy:{},string:i(Ywe),text:i(Zwe)};return r;function i(s){return o;function o(a){return l7e(r,s,a)}}}function u7e(e){for(;!iQ(e););return e}const YB=/[\0\t\n\r]/g;function h7e(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let f,c,d,u,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(YB.lastIndex=d,f=YB.exec(s),u=f&&f.index!==void 0?f.index:s.length,h=s.charCodeAt(u),!f){t=s.slice(d);break}if(h===10&&d===u&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<u&&(l.push(s.slice(d,u)),e+=u-d),h){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=u+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const p7e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function m7e(e){return e.replace(p7e,g7e)}function g7e(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return eQ(n.slice(s?2:1),s?16:10)}return NI(n)||e}function C3(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?ZB(e.position):"start"in e||"end"in e?ZB(e):"line"in e||"column"in e?CA(e):""}function CA(e){return qB(e&&e.line)+":"+qB(e&&e.column)}function ZB(e){return CA(e&&e.start)+"-"+CA(e&&e.end)}function qB(e){return e&&typeof e=="number"?e:1}const fQ={}.hasOwnProperty;function b7e(e,t,n){return t&&typeof t=="object"&&(n=t,t=void 0),y7e(n)(u7e(d7e(n).document().write(h7e()(e,t,!0))))}function y7e(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(qt),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(De),blockQuote:s(Ee),characterEscape:R,characterReference:R,codeFenced:s(_e),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(_e,o),codeText:s(Fe,o),codeTextData:R,data:R,codeFlowValue:R,definition:s(He),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ve),hardBreakEscape:s(Ae),hardBreakTrailing:s(Ae),htmlFlow:s(ut,o),htmlFlowData:R,htmlText:s(ut,o),htmlTextData:R,image:s(Mt),label:o,link:s(qt),listItem:s(Zn),listItemValue:u,listOrdered:s(Kt,d),listUnordered:s(Kt),paragraph:s(Vi),reference:Y,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(De),strong:s(Ls),thematicBreak:s(Ti)},exit:{atxHeading:l(),atxHeadingSequence:M,autolink:l(),autolinkEmail:we,autolinkProtocol:ie,blockQuote:l(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:he,characterReference:ce,codeFenced:l(U),codeFencedFence:y,codeFencedFenceInfo:h,codeFencedFenceMeta:g,codeFlowValue:D,codeIndented:l(x),codeText:l(B),codeTextData:D,data:D,definition:l(),definitionDestinationString:k,definitionLabelString:v,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l($),htmlFlowData:D,htmlText:l(L),htmlTextData:D,image:l(z),label:W,labelText:G,lineEnding:_,link:l(V),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ae,resourceDestinationString:F,resourceTitleString:K,resource:q,setextHeading:l(I),setextHeadingLineSequence:A,setextHeadingText:S,strong:l(),thematicBreak:l()}};dQ(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ye){let Me={type:"root",children:[]};const Ke={stack:[Me],tokenStack:[],config:t,enter:a,exit:f,buffer:o,resume:c,data:n},_t=[];let Tt=-1;for(;++Tt<ye.length;)if(ye[Tt][1].type==="listOrdered"||ye[Tt][1].type==="listUnordered")if(ye[Tt][0]==="enter")_t.push(Tt);else{const Vn=_t.pop();Tt=i(ye,Vn,Tt)}for(Tt=-1;++Tt<ye.length;){const Vn=t[ye[Tt][0]];fQ.call(Vn,ye[Tt][1].type)&&Vn[ye[Tt][1].type].call(Object.assign({sliceSerialize:ye[Tt][2].sliceSerialize},Ke),ye[Tt][1])}if(Ke.tokenStack.length>0){const Vn=Ke.tokenStack[Ke.tokenStack.length-1];(Vn[1]||QB).call(Ke,void 0,Vn[0])}for(Me.position={start:Ld(ye.length>0?ye[0][1].start:{line:1,column:1,offset:0}),end:Ld(ye.length>0?ye[ye.length-2][1].end:{line:1,column:1,offset:0})},Tt=-1;++Tt<t.transforms.length;)Me=t.transforms[Tt](Me)||Me;return Me}function i(ye,Me,Ke){let _t=Me-1,Tt=-1,Vn=!1,Ii,ti,Zt,$r;for(;++_t<=Ke;){const vn=ye[_t];switch(vn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{vn[0]==="enter"?Tt++:Tt--,$r=void 0;break}case"lineEndingBlank":{vn[0]==="enter"&&(Ii&&!$r&&!Tt&&!Zt&&(Zt=_t),$r=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:$r=void 0}if(!Tt&&vn[0]==="enter"&&vn[1].type==="listItemPrefix"||Tt===-1&&vn[0]==="exit"&&(vn[1].type==="listUnordered"||vn[1].type==="listOrdered")){if(Ii){let wr=_t;for(ti=void 0;wr--;){const Hr=ye[wr];if(Hr[1].type==="lineEnding"||Hr[1].type==="lineEndingBlank"){if(Hr[0]==="exit")continue;ti&&(ye[ti][1].type="lineEndingBlank",Vn=!0),Hr[1].type="lineEnding",ti=wr}else if(!(Hr[1].type==="linePrefix"||Hr[1].type==="blockQuotePrefix"||Hr[1].type==="blockQuotePrefixWhitespace"||Hr[1].type==="blockQuoteMarker"||Hr[1].type==="listItemIndent"))break}Zt&&(!ti||Zt<ti)&&(Ii._spread=!0),Ii.end=Object.assign({},ti?ye[ti][1].start:vn[1].end),ye.splice(ti||_t,0,["exit",Ii,vn[2]]),_t++,Ke++}if(vn[1].type==="listItemPrefix"){const wr={type:"listItem",_spread:!1,start:Object.assign({},vn[1].start),end:void 0};Ii=wr,ye.splice(_t,0,["enter",wr,vn[2]]),_t++,Ke++,Zt=void 0,$r=!0}}}return ye[Me][1]._spread=Vn,Ke}function s(ye,Me){return Ke;function Ke(_t){a.call(this,ye(_t),_t),Me&&Me.call(this,_t)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ye,Me,Ke){this.stack[this.stack.length-1].children.push(ye),this.stack.push(ye),this.tokenStack.push([Me,Ke||void 0]),ye.position={start:Ld(Me.start),end:void 0}}function l(ye){return Me;function Me(Ke){ye&&ye.call(this,Ke),f.call(this,Ke)}}function f(ye,Me){const Ke=this.stack.pop(),_t=this.tokenStack.pop();if(_t)_t[0].type!==ye.type&&(Me?Me.call(this,ye,_t[0]):(_t[1]||QB).call(this,ye,_t[0]));else throw new Error("Cannot close `"+ye.type+"` ("+C3({start:ye.start,end:ye.end})+"): its not open");Ke.position.end=Ld(ye.end)}function c(){return g9e(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function u(ye){if(this.data.expectingFirstListItemValue){const Me=this.stack[this.stack.length-2];Me.start=Number.parseInt(this.sliceSerialize(ye),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.lang=ye}function g(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.meta=ye}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function U(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.value=ye.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.value=ye.replace(/(\r?\n|\r)$/g,"")}function v(ye){const Me=this.resume(),Ke=this.stack[this.stack.length-1];Ke.label=Me,Ke.identifier=dm(this.sliceSerialize(ye)).toLowerCase()}function E(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.title=ye}function k(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.url=ye}function M(ye){const Me=this.stack[this.stack.length-1];if(!Me.depth){const Ke=this.sliceSerialize(ye).length;Me.depth=Ke}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function A(ye){const Me=this.stack[this.stack.length-1];Me.depth=this.sliceSerialize(ye).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function R(ye){const Ke=this.stack[this.stack.length-1].children;let _t=Ke[Ke.length-1];(!_t||_t.type!=="text")&&(_t=Os(),_t.position={start:Ld(ye.start),end:void 0},Ke.push(_t)),this.stack.push(_t)}function D(ye){const Me=this.stack.pop();Me.value+=this.sliceSerialize(ye),Me.position.end=Ld(ye.end)}function _(ye){const Me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ke=Me.children[Me.children.length-1];Ke.position.end=Ld(ye.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Me.type)&&(R.call(this,ye),D.call(this,ye))}function P(){this.data.atHardBreak=!0}function $(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.value=ye}function L(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.value=ye}function B(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.value=ye}function V(){const ye=this.stack[this.stack.length-1];if(this.data.inReference){const Me=this.data.referenceType||"shortcut";ye.type+="Reference",ye.referenceType=Me,delete ye.url,delete ye.title}else delete ye.identifier,delete ye.label;this.data.referenceType=void 0}function z(){const ye=this.stack[this.stack.length-1];if(this.data.inReference){const Me=this.data.referenceType||"shortcut";ye.type+="Reference",ye.referenceType=Me,delete ye.url,delete ye.title}else delete ye.identifier,delete ye.label;this.data.referenceType=void 0}function G(ye){const Me=this.sliceSerialize(ye),Ke=this.stack[this.stack.length-2];Ke.label=m7e(Me),Ke.identifier=dm(Me).toLowerCase()}function W(){const ye=this.stack[this.stack.length-1],Me=this.resume(),Ke=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ke.type==="link"){const _t=ye.children;Ke.children=_t}else Ke.alt=Me}function F(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.url=ye}function K(){const ye=this.resume(),Me=this.stack[this.stack.length-1];Me.title=ye}function q(){this.data.inReference=void 0}function Y(){this.data.referenceType="collapsed"}function ae(ye){const Me=this.resume(),Ke=this.stack[this.stack.length-1];Ke.label=Me,Ke.identifier=dm(this.sliceSerialize(ye)).toLowerCase(),this.data.referenceType="full"}function ge(ye){this.data.characterReferenceType=ye.type}function he(ye){const Me=this.sliceSerialize(ye),Ke=this.data.characterReferenceType;let _t;Ke?(_t=eQ(Me,Ke==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_t=NI(Me);const Tt=this.stack[this.stack.length-1];Tt.value+=_t}function ce(ye){const Me=this.stack.pop();Me.position.end=Ld(ye.end)}function ie(ye){D.call(this,ye);const Me=this.stack[this.stack.length-1];Me.url=this.sliceSerialize(ye)}function we(ye){D.call(this,ye);const Me=this.stack[this.stack.length-1];Me.url="mailto:"+this.sliceSerialize(ye)}function Ee(){return{type:"blockquote",children:[]}}function _e(){return{type:"code",lang:null,meta:null,value:""}}function Fe(){return{type:"inlineCode",value:""}}function He(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ve(){return{type:"emphasis",children:[]}}function De(){return{type:"heading",depth:0,children:[]}}function Ae(){return{type:"break"}}function ut(){return{type:"html",value:""}}function Mt(){return{type:"image",title:null,url:"",alt:null}}function qt(){return{type:"link",title:null,url:"",children:[]}}function Kt(ye){return{type:"list",ordered:ye.type==="listOrdered",start:null,spread:ye._spread,children:[]}}function Zn(ye){return{type:"listItem",spread:ye._spread,checked:null,children:[]}}function Vi(){return{type:"paragraph",children:[]}}function Ls(){return{type:"strong",children:[]}}function Os(){return{type:"text",value:""}}function Ti(){return{type:"thematicBreak"}}}function Ld(e){return{line:e.line,column:e.column,offset:e.offset}}function dQ(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?dQ(e,r):U7e(e,r)}}function U7e(e,t){let n;for(n in t)if(fQ.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function QB(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+C3({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+C3({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+C3({start:t.start,end:t.end})+") is still open")}function x7e(e){const t=this;t.parser=n;function n(r){return b7e(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function w7e(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function v7e(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function E7e(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function k7e(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function S7e(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const JB=C7e(/[\dA-Za-z]/);function C7e(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Zg(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&JB(e.charCodeAt(n+1))&&JB(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function A7e(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Zg(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const f={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,f),e.applyData(t,f)}function M7e(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function T7e(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function uQ(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function I7e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uQ(e,t);const i={src:Zg(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function N7e(e,t){const n={src:Zg(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function R7e(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function _7e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uQ(e,t);const i={href:Zg(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function P7e(e,t){const n={href:Zg(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function D7e(e,t,n){const r=e.all(t),i=n?L7e(n):hQ(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,f),e.applyData(t,f)}function L7e(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=hQ(n[r])}return t}function hQ(e){const t=e.spread;return t??e.children.length>1}function O7e(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function j7e(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function B7e(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function F7e(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function z7e(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=AI(t.children[1]),l=Xq(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function $7e(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const f=[];for(;++l<a;){const d=t.children[l],u={},h=o?o[l]:void 0;h&&(u.align=h);let g={type:"element",tagName:s,properties:u,children:[]};d&&(g.children=e.all(d),e.patch(d,g),g=e.applyData(d,g)),f.push(g)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,c),e.applyData(t,c)}function H7e(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const eF=9,tF=32;function V7e(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(nF(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(nF(t.slice(i),i>0,!1)),s.join("")}function nF(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===eF||s===tF;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===eF||s===tF;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function W7e(e,t){const n={type:"text",value:V7e(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function G7e(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const X7e={blockquote:w7e,break:v7e,code:E7e,delete:k7e,emphasis:S7e,footnoteReference:A7e,heading:M7e,html:T7e,imageReference:I7e,image:N7e,inlineCode:R7e,linkReference:_7e,link:P7e,listItem:D7e,list:O7e,paragraph:j7e,root:B7e,strong:F7e,table:z7e,tableCell:H7e,tableRow:$7e,text:W7e,thematicBreak:G7e,toml:SU,yaml:SU,definition:SU,footnoteDefinition:SU};function SU(){}const pQ=-1,gw=0,u2=1,x4=2,PI=3,DI=4,LI=5,OI=6,mQ=7,gQ=8,rF=typeof self=="object"?self:globalThis,K7e=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case gw:case pQ:return n(o,i);case u2:{const a=n([],i);for(const l of o)a.push(r(l));return a}case x4:{const a=n({},i);for(const[l,f]of o)a[r(l)]=r(f);return a}case PI:return n(new Date(o),i);case DI:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case LI:{const a=n(new Map,i);for(const[l,f]of o)a.set(r(l),r(f));return a}case OI:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case mQ:{const{name:a,message:l}=o;return n(new rF[a](l),i)}case gQ:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new rF[s](o),i)};return r},iF=e=>K7e(new Map,e)(0),up="",{toString:Y7e}={},{keys:Z7e}=Object,o5=e=>{const t=typeof e;if(t!=="object"||!e)return[gw,t];const n=Y7e.call(e).slice(8,-1);switch(n){case"Array":return[u2,up];case"Object":return[x4,up];case"Date":return[PI,up];case"RegExp":return[DI,up];case"Map":return[LI,up];case"Set":return[OI,up];case"DataView":return[u2,n]}return n.includes("Array")?[u2,n]:n.includes("Error")?[mQ,n]:[x4,n]},CU=([e,t])=>e===gw&&(t==="function"||t==="symbol"),q7e=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=o5(o);switch(a){case gw:{let c=o;switch(l){case"bigint":a=gQ,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([pQ],o)}return i([a,c],o)}case u2:{if(l){let u=o;return l==="DataView"?u=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(u=new Uint8Array(o)),i([l,[...u]],o)}const c=[],d=i([a,c],o);for(const u of o)c.push(s(u));return d}case x4:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const u of Z7e(o))(e||!CU(o5(o[u])))&&c.push([s(u),s(o[u])]);return d}case PI:return i([a,o.toISOString()],o);case DI:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case LI:{const c=[],d=i([a,c],o);for(const[u,h]of o)(e||!(CU(o5(u))||CU(o5(h))))&&c.push([s(u),s(h)]);return d}case OI:{const c=[],d=i([a,c],o);for(const u of o)(e||!CU(o5(u)))&&c.push(s(u));return d}}const{message:f}=o;return i([a,{name:l,message:f}],o)};return s},sF=(e,{json:t,lossy:n}={})=>{const r=[];return q7e(!(t||n),!!t,new Map,r)(e),r},w4=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?iF(sF(e,t)):structuredClone(e):(e,t)=>iF(sF(e,t));function Q7e(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function J7e(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function eve(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Q7e,r=e.options.footnoteBackLabel||J7e,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[l]);if(!f)continue;const c=e.all(f),d=String(f.identifier).toUpperCase(),u=Zg(d.toLowerCase());let h=0;const g=[],y=e.footnoteCounts.get(d);for(;y!==void 0&&++h<=y;){g.length>0&&g.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,h);typeof v=="string"&&(v={type:"text",value:v}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+u+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const U=c[c.length-1];if(U&&U.type==="element"&&U.tagName==="p"){const v=U.children[U.children.length-1];v&&v.type==="text"?v.value+=" ":U.children.push({type:"text",value:" "}),U.children.push(...g)}else c.push(...g);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+u},children:e.wrap(c,!0)};e.patch(f,x),a.push(x)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...w4(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const bQ=function(e){if(e==null)return ive;if(typeof e=="function")return bw(e);if(typeof e=="object")return Array.isArray(e)?tve(e):nve(e);if(typeof e=="string")return rve(e);throw new Error("Expected function, string, or object as test")};function tve(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=bQ(e[n]);return bw(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function nve(e){const t=e;return bw(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function rve(e){return bw(t);function t(n){return n&&n.type===e}}function bw(e){return t;function t(n,r,i){return!!(sve(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function ive(){return!0}function sve(e){return e!==null&&typeof e=="object"&&"type"in e}const yQ=[],ove=!0,oF=!1,ave="skip";function lve(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=bQ(i),o=r?-1:1;a(e,void 0,[])();function a(l,f,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(u,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return u;function u(){let h=yQ,g,y,U;if((!t||s(l,f,c[c.length-1]||void 0))&&(h=cve(n(l,c)),h[0]===oF))return h;if("children"in l&&l.children){const x=l;if(x.children&&h[0]!==ave)for(y=(r?x.children.length:-1)+o,U=c.concat(x);y>-1&&y<x.children.length;){const v=x.children[y];if(g=a(v,y,U)(),g[0]===oF)return g;y=typeof g[1]=="number"?g[1]:y+o}}return h}}}function cve(e){return Array.isArray(e)?e:typeof e=="number"?[ove,e]:e==null?yQ:[e]}function UQ(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),lve(e,s,a,i);function a(l,f){const c=f[f.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const AA={}.hasOwnProperty,fve={};function dve(e,t){const n=t||fve,r=new Map,i=new Map,s=new Map,o={...X7e,...n.handlers},a={all:f,applyData:hve,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:uve,wrap:mve};return UQ(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,u=String(c.identifier).toUpperCase();d.has(u)||d.set(u,c)}}),a;function l(c,d){const u=c.type,h=a.handlers[u];if(AA.call(a.handlers,u)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(u)){if("children"in c){const{children:y,...U}=c,x=w4(U);return x.children=a.all(c),x}return w4(c)}return(a.options.unknownHandler||pve)(a,c,d)}function f(c){const d=[];if("children"in c){const u=c.children;let h=-1;for(;++h<u.length;){const g=a.one(u[h],c);if(g){if(h&&u[h-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=aF(g.value)),!Array.isArray(g)&&g.type==="element")){const y=g.children[0];y&&y.type==="text"&&(y.value=aF(y.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function uve(e,t){e.position&&(t.position=X4e(e))}function hve(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,w4(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function pve(e,t){const n=t.data||{},r="value"in t&&!(AA.call(n,"hProperties")||AA.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function mve(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function aF(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function lF(e,t){const n=dve(e,t),r=n.one(e,void 0),i=eve(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function gve(e,t){return e&&"run"in e?async function(n,r){const i=lF(n,{file:r,...t});await e.run(i,r)}:function(n,r){return lF(n,{file:r,...e||t})}}function cF(e){if(e)throw e}var hk,fF;function bve(){if(fF)return hk;fF=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},s=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var c=e.call(f,"constructor"),d=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!c&&!d)return!1;var u;for(u in f);return typeof u>"u"||e.call(f,u)},o=function(f,c){n&&c.name==="__proto__"?n(f,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):f[c.name]=c.newValue},a=function(f,c){if(c==="__proto__")if(e.call(f,c)){if(r)return r(f,c).value}else return;return f[c]};return hk=function l(){var f,c,d,u,h,g,y=arguments[0],U=1,x=arguments.length,v=!1;for(typeof y=="boolean"&&(v=y,y=arguments[1]||{},U=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});U<x;++U)if(f=arguments[U],f!=null)for(c in f)d=a(y,c),u=a(f,c),y!==u&&(v&&u&&(s(u)||(h=i(u)))?(h?(h=!1,g=d&&i(d)?d:[]):g=d&&s(d)?d:{},o(y,{name:c,newValue:l(v,g,u)})):typeof u<"u"&&o(y,{name:c,newValue:u}));return y},hk}var yve=bve();const pk=Na(yve);function MA(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Uve(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...f){const c=e[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(f[d]===null||f[d]===void 0)&&(f[d]=i[d]);i=f,c?xve(c,a)(...f):o(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function xve(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(f){const c=f;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Gl={basename:wve,dirname:vve,extname:Eve,join:kve,sep:"/"};function wve(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');py(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function vve(e){if(py(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Eve(e){py(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function kve(...e){let t=-1,n;for(;++t<e.length;)py(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Sve(n)}function Sve(e){py(e);const t=e.codePointAt(0)===47;let n=Cve(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Cve(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function py(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ave={cwd:Mve};function Mve(){return"/"}function TA(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Tve(e){if(typeof e=="string")e=new URL(e);else if(!TA(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Ive(e)}function Ive(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const mk=["history","path","basename","stem","extname","dirname"];class xQ{constructor(t){let n;t?TA(t)?n={path:t}:typeof t=="string"||Nve(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Ave.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<mk.length;){const s=mk[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)mk.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Gl.basename(this.path):void 0}set basename(t){bk(t,"basename"),gk(t,"basename"),this.path=Gl.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Gl.dirname(this.path):void 0}set dirname(t){dF(this.basename,"dirname"),this.path=Gl.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Gl.extname(this.path):void 0}set extname(t){if(gk(t,"extname"),dF(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gl.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){TA(t)&&(t=Tve(t)),bk(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Gl.basename(this.path,this.extname):void 0}set stem(t){bk(t,"stem"),gk(t,"stem"),this.path=Gl.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ps(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function gk(e,t){if(e&&e.includes(Gl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Gl.sep+"`")}function bk(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function dF(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Nve(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Rve=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},_ve={}.hasOwnProperty;class jI extends Rve{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Uve()}copy(){const t=new jI;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(pk(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(xk("data",this.frozen),this.namespace[t]=n,this):_ve.call(this.namespace,t)&&this.namespace[t]||void 0:t?(xk("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=AU(t),r=this.parser||this.Parser;return yk("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),yk("process",this.parser||this.Parser),Uk("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=AU(t),l=r.parse(a);r.run(l,a,function(c,d,u){if(c||!d||!u)return f(c);const h=d,g=r.stringify(h,u);Lve(g)?u.value=g:u.result=g,f(c,u)});function f(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),yk("processSync",this.parser||this.Parser),Uk("processSync",this.compiler||this.Compiler),this.process(t,i),hF("processSync","process",n),r;function i(s,o){n=!0,cF(s),r=o}}run(t,n,r){uF(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=AU(n);i.run(t,l,f);function f(c,d,u){const h=d||t;c?a(c):o?o(h):r(void 0,h,u)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),hF("runSync","run",r),i;function s(o,a){cF(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=AU(n),i=this.compiler||this.Compiler;return Uk("stringify",i),uF(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(xk("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(f){if(typeof f=="function")l(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[c,...d]=f;l(c,d)}else o(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function o(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(f.plugins),f.settings&&(i.settings=pk(!0,i.settings,f.settings))}function a(f){let c=-1;if(f!=null)if(Array.isArray(f))for(;++c<f.length;){const d=f[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function l(f,c){let d=-1,u=-1;for(;++d<r.length;)if(r[d][0]===f){u=d;break}if(u===-1)r.push([f,...c]);else if(c.length>0){let[h,...g]=c;const y=r[u][1];MA(y)&&MA(h)&&(h=pk(!0,y,h)),r[u]=[f,h,...g]}}}}const Pve=new jI().freeze();function yk(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Uk(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function xk(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function uF(e){if(!MA(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function hF(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function AU(e){return Dve(e)?e:new xQ(e)}function Dve(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Lve(e){return typeof e=="string"||Ove(e)}function Ove(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const jve="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pF=[],mF={allowDangerousHtml:!0},Bve=/^(https?|ircs?|mailto|xmpp)$/i,Fve=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function zve(e){const t=$ve(e),n=Hve(e);return Vve(t.runSync(t.parse(n),n),e)}function $ve(e){const t=e.rehypePlugins||pF,n=e.remarkPlugins||pF,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...mF}:mF;return Pve().use(x7e).use(n).use(gve,r).use(t)}function Hve(e){const t=e.children||"",n=new xQ;return typeof t=="string"&&(n.value=t),n}function Vve(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,o=t.skipHtml,a=t.unwrapDisallowed,l=t.urlTransform||Wve;for(const c of Fve)Object.hasOwn(t,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+jve+c.id,void 0);return UQ(e,f),J4e(e,{Fragment:m.Fragment,components:i,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function f(c,d,u){if(c.type==="raw"&&u&&typeof d=="number")return o?u.children.splice(d,1):u.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let h;for(h in fk)if(Object.hasOwn(fk,h)&&Object.hasOwn(c.properties,h)){const g=c.properties[h],y=fk[h];(y===null||y.includes(c.tagName))&&(c.properties[h]=l(String(g||""),h,c))}}if(c.type==="element"){let h=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!h&&r&&typeof d=="number"&&(h=!r(c,d,u)),h&&u&&typeof d=="number")return a&&c.children?u.children.splice(d,1,...c.children):u.children.splice(d,1),d}}}function Wve(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Bve.test(e.slice(0,t))?e:""}const Gve=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/,Xve={a:({href:e,children:t})=>{const n=e==null?void 0:e.match(Gve);return n?m.jsx("div",{className:"cp-youtube",children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${n[1]}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`yt-${n[1]}`})}):m.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:t})}},gF={EVIDENCE:"#4ade80",EXAMPLE:"#60a5fa",CONTEXT:"#fbbf24",COUNTERPOINT:"#f87171",SYNTHESIS:"#a78bfa",REFERENCE:"#34d399"};function Kve(e){if(!e)return"";const t=Date.now()-new Date(e).getTime(),n=Math.floor(t/864e5);return n===0?"Today":n===1?"Yesterday":n<7?`${n}d ago`:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function wQ({selectedThreadId:e,initialThreadId:t,onNodesCreated:n,onThreadCreated:r,articleContext:i,onProposedUpdate:s,defaultSidebarCollapsed:o=!1}){const[a,l]=T.useState([]),[f,c]=T.useState(""),[d,u]=T.useState(!1),[h,g]=T.useState([]),[y,U]=T.useState(null),[x,v]=T.useState(o),E=T.useRef(t||null),k=T.useRef(null),M=T.useRef(""),S=T.useRef(null),A=T.useRef(null);T.useEffect(()=>{var L;(L=S.current)==null||L.scrollIntoView({behavior:"smooth"})},[a,d]);const I=T.useCallback(async L=>{if(!L){g([]);return}try{const B=await Ir.getThreadChats(L);g(B)}catch(B){console.error("Failed to load chat history:",B)}},[]);T.useEffect(()=>{I(e)},[e,I]);const R=()=>{l([]),c(""),E.current=t||e||null,k.current=null,U(null)},D=async L=>{try{const B=await Ir.getChat(L);l(B.messages||[]),k.current=L,U(L),B.threadId&&B.threadId!==E.current&&(E.current=B.threadId,await I(B.threadId))}catch(B){console.error("Failed to load chat:",B)}},_=T.useCallback(async()=>{if(!f.trim()||d)return;const L=f.trim();c(""),A.current&&(A.current.style.height="auto");const B=a.filter(z=>z.role==="user"||z.role==="assistant").map(({role:z,content:G})=>({role:z,content:G})),V=a.length+1;l(z=>[...z,{role:"user",content:L},{role:"assistant",content:"",citations:[],createdNodes:[],newThread:null,proposedUpdate:null,streaming:!0,processing:!1}]),u(!0),M.current="";try{await Ir.chatStream({message:L,history:B,threadId:E.current,nodeContext:i||null,onProcessing:()=>{ai.flushSync(()=>{l(z=>{const G=[...z],W=G[V];return(W==null?void 0:W.role)==="assistant"&&(G[V]={...W,streaming:!1,processing:!0}),G})})},onToken:z=>{M.current+=z,l(G=>{const W=[...G],F=W[V];return(F==null?void 0:F.role)==="assistant"&&(W[V]={...F,content:F.content+z}),W})},onDone:async z=>{var W;l(F=>{const K=[...F],q=K[V];return(q==null?void 0:q.role)==="assistant"&&(K[V]={...q,streaming:!1,processing:!1,citations:z.citations||[],createdNodes:z.createdNodes||[],newThread:z.newThread||null,proposedUpdate:z.proposedUpdate||null}),K});const G=z.threadId||E.current;if(z.newThread?(E.current=z.threadId,r==null||r(z.threadId)):((W=z.createdNodes)==null?void 0:W.length)>0&&(E.current=z.threadId,n==null||n(z.threadId)),G){const F=[...B,{role:"user",content:L},{role:"assistant",content:M.current,citations:z.citations||[],createdNodes:z.createdNodes||[]}],K=L.substring(0,80);try{if(k.current)await Ir.updateChat(k.current,{messages:F});else{const q=await Ir.createChat({threadId:G,title:K,messages:F});k.current=q.id,U(q.id)}await I(G)}catch(q){console.error("Failed to save chat:",q)}}u(!1)},onError:z=>{l(G=>{const W=[...G];return W[V]={role:"error",content:`Error: ${z.message}`},W}),u(!1)}})}catch(z){l(G=>{const W=[...G];return W[V]={role:"error",content:`Error: ${z.message}`},W}),u(!1)}},[f,d,a,I,n,r,i,s]),P=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),_())},$=L=>{c(L.target.value),L.target.style.height="auto",L.target.style.height=Math.min(L.target.scrollHeight,160)+"px"};return m.jsxs("div",{className:"cp-panel",children:[m.jsxs("div",{className:`cp-sidebar${x?" cp-sidebar--collapsed":""}`,children:[m.jsxs("div",{className:"cp-sidebar-header",children:[m.jsx("button",{className:"cp-sidebar-toggle",onClick:()=>v(L=>!L),title:x?"Show chats":"Hide chats",children:x?"":""}),!x&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"cp-sidebar-title",children:"Chats"}),m.jsx("button",{className:"cp-new-btn",onClick:R,title:"New chat",children:"+ New"})]})]}),m.jsxs("div",{className:"cp-chat-list",style:{display:x?"none":void 0},children:[h.length===0&&m.jsx("p",{className:"cp-chat-empty",children:"No saved chats yet."}),h.map(L=>m.jsxs("button",{className:`cp-chat-item${L.id===y?" cp-chat-item--active":""}`,onClick:()=>D(L.id),children:[m.jsx("span",{className:"cp-chat-item-title",children:L.title}),m.jsxs("span",{className:"cp-chat-item-meta",children:[L.messageCount," ",L.messageCount===1?"exchange":"exchanges","  ",Kve(L.created_at)]})]},L.id))]})]}),m.jsxs("div",{className:"cp-main",children:[m.jsx("div",{className:"cp-header",children:m.jsx("span",{className:"cp-title",children:"Research Chat"})}),m.jsxs("div",{className:"cp-messages",children:[a.length===0&&m.jsx("div",{className:"cp-empty",children:m.jsxs("p",{children:["Ask anything  nodes will be auto-created in your knowledge graph as you research.",m.jsx("br",{}),"Topic shifts automatically create new threads."]})}),a.map((L,B)=>{var V,z,G;return m.jsxs("div",{className:`cp-msg cp-msg--${L.role}`,children:[L.role==="user"&&m.jsx("div",{className:"cp-bubble cp-bubble--user",children:L.content}),L.role==="assistant"&&m.jsx("div",{className:`cp-bubble cp-bubble--assistant${L.streaming&&!L.content?" cp-bubble--loading":""}`,children:L.streaming&&!L.content?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"cp-markdown",children:m.jsx(zve,{components:Xve,children:L.content})}),L.processing&&m.jsxs("div",{className:"cp-processing",children:[m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-dot"}),m.jsx("span",{className:"cp-processing-label",children:"Extracting knowledge"})]}),((V=L.citations)==null?void 0:V.length)>0&&m.jsxs("div",{className:"cp-citations",children:[m.jsx("span",{className:"cp-citations-label",children:"Sources"}),L.citations.map((W,F)=>m.jsxs("a",{href:W.url,target:"_blank",rel:"noopener noreferrer",className:"cp-citation",title:W.url,children:["[",F+1,"] ",(W.title||W.url).substring(0,60)]},F))]}),(((z=L.createdNodes)==null?void 0:z.length)>0||L.newThread)&&m.jsxs("div",{className:"cp-nodes-created",children:[L.newThread&&m.jsxs("span",{className:"cp-new-thread",children:[" New thread: ",L.newThread.title]}),(G=L.createdNodes)==null?void 0:G.map((W,F)=>m.jsx("span",{className:"cp-node-chip",style:{borderColor:gF[W.type]||"#555",color:gF[W.type]||"#aaa"},title:W.title,children:W.type},F))]}),L.proposedUpdate&&s&&m.jsxs("div",{className:"cp-proposed-update",children:[m.jsxs("div",{className:"cp-proposed-update-label",children:[" Proposed update to ",m.jsx("em",{children:L.proposedUpdate.title})]}),m.jsx("div",{className:"cp-proposed-update-preview",children:L.proposedUpdate.description}),m.jsxs("div",{className:"cp-proposed-update-actions",children:[m.jsx("button",{className:"cp-accept-btn",onClick:()=>s(L.proposedUpdate),children:"Accept"}),m.jsx("button",{className:"cp-dismiss-btn",onClick:()=>l(W=>W.map((F,K)=>K===B?{...F,proposedUpdate:null}:F)),children:"Dismiss"})]})]})]})}),L.role==="error"&&m.jsx("div",{className:"cp-bubble cp-bubble--error",children:L.content})]},B)}),m.jsx("div",{ref:S})]}),m.jsxs("div",{className:"cp-input-area",children:[m.jsx("textarea",{ref:A,className:"cp-input",placeholder:"Ask anything (Shift+Enter for new line)",value:f,onChange:$,onKeyDown:P,disabled:d,rows:1,autoFocus:!0}),m.jsx("button",{className:"cp-send",onClick:_,disabled:!f.trim()||d,"aria-label":"Send",children:""})]})]})]})}const Yve=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],Zve={ROOT:"#888",EVIDENCE:"#4fc3f7",REFERENCE:"#ab47bc",CONTEXT:"#ff8a65",EXAMPLE:"#66bb6a",COUNTERPOINT:"#ef5350",SYNTHESIS:"#fdd835"},vQ=({editor:e})=>{const[t,n]=T.useState(null);if(!e)return null;const r=({onClick:s,active:o,children:a})=>m.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:a}),i=()=>m.jsx("span",{className:"ar-toolbar-divider"});return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"ar-toolbar",children:[m.jsx(r,{onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold"),children:"B"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic"),children:"I"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike"),children:"S"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),active:e.isActive("heading",{level:1}),children:"H1"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2}),children:"H2"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3}),children:"H3"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList"),children:"Bullet"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList"),children:"Ordered"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote"),children:"Quote"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock"),children:"Code"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>n("link"),active:e.isActive("link"),children:"Link"}),m.jsx(r,{onClick:()=>n("youtube"),children:"YouTube"})]}),t==="link"&&m.jsx(U4,{label:"Enter URL",placeholder:"https://example.com",onSubmit:s=>{e.chain().focus().extendMarkRange("link").setLink({href:s}).run(),n(null)},onCancel:()=>n(null)}),t==="youtube"&&m.jsx(U4,{label:"Enter YouTube URL",placeholder:"https://youtube.com/watch?v=...",onSubmit:s=>{e.commands.setYoutubeVideo({src:s}),n(null)},onCancel:()=>n(null)})]})};function qve(e){const t=A3(e);let n=e.content;n&&typeof n=="object"&&n.content!==void 0&&(n=n.content);let r=n;if(typeof n=="string"&&(n.startsWith("{")||n.startsWith("[")))try{r=JSON.parse(n)}catch{}switch(t){case"ROOT":return{title:(typeof r=="object"?r==null?void 0:r.title:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.description:null)||"",keywords:typeof r=="object"&&(r!=null&&r.keywords)?Array.isArray(r.keywords)?r.keywords.join(", "):r.keywords:""};case"EVIDENCE":return{title:(typeof r=="object"?r==null?void 0:r.source:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.point:null)||""};case"EXAMPLE":return{title:(typeof r=="object"?r==null?void 0:r.title:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.description:null)||""};case"COUNTERPOINT":return{title:(typeof r=="object"?r==null?void 0:r.argument:null)||e.title||"",html:(typeof r=="object"?r==null?void 0:r.explanation:null)||""};default:return{title:e.title||"",html:typeof n=="string"?n:""}}}function Qve(e,t,n,r){switch(e){case"ROOT":return JSON.stringify({title:t,description:n,keywords:r?r.split(",").map(i=>i.trim()).filter(Boolean):[]});case"EVIDENCE":return JSON.stringify({point:n,source:t});case"EXAMPLE":return JSON.stringify({title:t,description:n});case"COUNTERPOINT":return JSON.stringify({argument:t,explanation:n});default:return n}}const Jve=e=>{if(!e)return m.jsx("p",{className:"ar-empty",children:"No content available."});let t=e;if(typeof t=="object"&&(t=t.content||t.text||JSON.stringify(t,null,2)),typeof t!="string")return m.jsx("p",{className:"ar-empty",children:"No content available."});if(t.trim().startsWith("<"))return m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:t}});const n=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/,r=/https?:\/\/[^\s<>"]+/g;return t.split(/\n{2,}/).flatMap(s=>s.includes(`
`)?s.split(`
`):[s]).filter(s=>s.trim()!=="").map((s,o)=>{const a=s.trim().match(n);if(a)return m.jsx("div",{className:"ar-youtube",children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${a[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`video-${o}`})},o);const l=[];let f=0,c;for(r.lastIndex=0;(c=r.exec(s))!==null;)c.index>f&&l.push(s.slice(f,c.index)),l.push(m.jsx("a",{href:c[0],target:"_blank",rel:"noopener noreferrer",children:c[0]},c.index)),f=c.index+c[0].length;return f<s.length&&l.push(s.slice(f)),m.jsx("p",{children:l.length?l:s},o)})},A3=e=>e.node_type?e.node_type:typeof e.type=="number"?Yve[e.type]||"ROOT":e.type||"ROOT",MU=e=>{if(!e)return null;const t=String(e);return/<[a-z][\s\S]*>/i.test(t)?m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:t}}):m.jsx("p",{children:t})},eEe=e=>{var n;let t=e.content;if(!t)return null;if(typeof t=="string")try{const r=JSON.parse(t);typeof r=="object"&&(t=r)}catch{}if(typeof t=="object"){if(t.title&&t.description&&"keywords"in t)return m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.title}),MU(t.description),((n=t.keywords)==null?void 0:n.length)>0&&m.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.9rem",marginTop:16},children:m.jsxs("em",{children:["Keywords: ",Array.isArray(t.keywords)?t.keywords.join(", "):t.keywords]})})]});if(t.point){const r=t.source,i=r==null?void 0:r.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/),s=r&&/^https?:\/\//.test(r);return m.jsxs("div",{children:[MU(t.point),r&&(i?m.jsx("div",{className:"ar-youtube",style:{marginTop:20},children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${i[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`yt-${i[1]}`})}):m.jsxs("p",{style:{color:"rgba(255,255,255,0.45)",fontStyle:"italic",marginTop:16,fontSize:"0.9rem"},children:["Source:"," ",s?m.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:{color:"#00ff9d",textDecoration:"underline",textUnderlineOffset:"3px",wordBreak:"break-all"},children:r}):r]}))]})}return t.title&&t.description?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.title}),MU(t.description)]}):t.argument?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.argument}),t.explanation&&MU(t.explanation)]}):t.content?t.content:t.text?t.text:JSON.stringify(t,null,2)}return t},tEe=({thread:e,onContentChange:t})=>{var u,h;const[n,r]=T.useState(!1),[i,s]=T.useState(!1),o=lI({extensions:[vI,UI.configure({openOnClick:!1}),EI.configure({width:640,height:360}),kI.configure({placeholder:"Write your thread notes here..."})],content:e.content||"",editable:!1});T.useEffect(()=>{o&&(o.commands.setContent(e.content||""),o.setEditable(!1),r(!1))},[e.id]);const a=()=>{o==null||o.setEditable(!0),r(!0)},l=async()=>{if(!o)return;s(!0);const g=o.getHTML();try{await Ir.updateThreadContent(e.id,g),t&&t(g),o.setEditable(!1),r(!1)}catch(y){console.error("Failed to save content:",y)}finally{s(!1)}},f=()=>{o==null||o.commands.setContent(e.content||""),o==null||o.setEditable(!1),r(!1)},c=((u=e.metadata)==null?void 0:u.title)||e.title||`Thread ${e.id}`,d=((h=e.metadata)==null?void 0:h.description)||e.description||"";return m.jsxs("article",{className:"ar-article",children:[m.jsxs("div",{className:"ar-node-header",children:[m.jsx("div",{className:"ar-node-badge",style:{background:"#555"},children:"THREAD"}),!n&&m.jsx("button",{className:"ar-edit-btn",onClick:a,children:"Edit"}),n&&m.jsxs("div",{className:"ar-edit-actions",children:[m.jsx("button",{className:"ar-save-btn",onClick:l,disabled:i,children:i?"Saving":"Save"}),m.jsx("button",{className:"ar-cancel-btn",onClick:f,disabled:i,children:"Cancel"})]})]}),m.jsx("h1",{className:"ar-title",children:c}),d&&m.jsx("p",{className:"ar-description",children:d}),m.jsx("hr",{className:"ar-divider"}),n?m.jsxs("div",{className:"ar-editor-section",children:[m.jsx(vQ,{editor:o}),m.jsx("div",{className:"ar-editor-wrapper",children:m.jsx(hw,{editor:o})})]}):m.jsx("div",{className:"ar-content",children:e.content&&e.content!=="<p></p>"?m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:e.content}}):m.jsx("p",{className:"ar-empty",children:"No notes yet. Click Edit to add content."})})]})},nEe=({thread:e,initialNodeId:t,onContentChange:n,onUpdateNode:r,onNodesCreated:i,onThreadCreated:s})=>{const[o,a]=T.useState(0),[l,f]=T.useState([]),[c,d]=T.useState(!0),[u,h]=T.useState(!1),[g,y]=T.useState(!1);T.useState(null);const[U,x]=T.useState(""),[v,E]=T.useState(""),[k,M]=T.useState(!1),S=lI({extensions:[vI,UI.configure({openOnClick:!1}),EI.configure({width:640,height:360}),kI.configure({placeholder:"Edit content..."})],content:""});T.useEffect(()=>{h(!1)},[o]),T.useEffect(()=>{e!=null&&e.id&&A()},[e==null?void 0:e.id]),T.useEffect(()=>{if(!t||l.length===0)return;const P=l.findIndex($=>$.id===t);P>=0&&a(P+1)},[t,l]);const A=async()=>{d(!0);try{const P=e.nodes||[],$=await Ir.loadArticleSequence(e.id);let L;if($&&Array.isArray($)){const B=new Set($),V=$.map(G=>P.find(W=>W.id===G)).filter(Boolean),z=P.filter(G=>!B.has(G.id));L=[...V,...z]}else L=[...P];if(f(L),t){const B=L.findIndex(V=>V.id===t);a(B>=0?B+1:0)}else a(0)}catch(P){console.error("Failed to load article sequence:",P);const $=[...e.nodes||[]];if(f($),t){const L=$.findIndex(B=>B.id===t);a(L>=0?L+1:0)}else a(0)}finally{d(!1)}};if(!e)return null;const I=1+l.length,R=(()=>{if(c||o===0)return null;const P=l[o-1];return P?{nodeId:P.id,nodeType:A3(P),title:P.title||`Node ${P.id}`,content:P.content||""}:null})(),D=async P=>{if(!P||!P.nodeId||!r)return;const $=l.find(z=>z.id===P.nodeId);if(!$)return;const L=A3($);let B={};if(typeof $.content=="string")try{B=JSON.parse($.content)}catch{}let V;L==="ROOT"?V=JSON.stringify({title:P.title,description:P.description,keywords:B.keywords||[]}):L==="EXAMPLE"?V=JSON.stringify({title:P.title,description:P.description}):L==="COUNTERPOINT"?V=JSON.stringify({argument:P.title,explanation:P.description}):L==="EVIDENCE"?V=JSON.stringify({point:P.description,source:B.source||""}):V=P.description;try{await r({nodeId:P.nodeId,threadId:e.id},{title:P.title,content:V}),f(G=>G.map(W=>W.id===P.nodeId?{...W,title:P.title,content:V}:W));const z=l.findIndex(G=>G.id===P.nodeId);z>=0&&a(z+1)}catch(z){console.error("Failed to apply proposed update:",z)}},_=()=>{if(o===0)return m.jsx(tEe,{thread:e,onContentChange:n});const P=l[o-1];if(!P)return m.jsx("p",{className:"ar-empty",children:"Node not found."});const $=A3(P),L=Zve[$]||"#888",B=P.title||`Node ${P.id}`,V=eEe(P),z=Ne.isValidElement(V),G=()=>{const{title:F,html:K,keywords:q}=qve(P);x(F),E(q||""),S==null||S.commands.setContent(K||""),h(!0)},W=async()=>{if(!S||!r)return;const F=S.getHTML(),K=Qve($,U,F,v);M(!0);try{await r({nodeId:P.id,threadId:e.id},{title:U,content:K}),f(q=>q.map(Y=>Y.id===P.id?{...Y,title:U,content:K}:Y)),h(!1)}catch(q){console.error("Failed to save node:",q)}finally{M(!1)}};return m.jsxs("article",{className:"ar-article",children:[m.jsxs("div",{className:"ar-node-header",children:[m.jsx("div",{className:"ar-node-badge",style:{background:L},children:$}),!u&&r&&m.jsx("button",{className:"ar-edit-btn",onClick:G,children:"Edit"}),u&&m.jsxs("div",{className:"ar-edit-actions",children:[m.jsx("button",{className:"ar-save-btn",onClick:W,disabled:k,children:k?"Saving":"Save"}),m.jsx("button",{className:"ar-cancel-btn",onClick:()=>h(!1),disabled:k,children:"Cancel"})]})]}),u?m.jsxs(m.Fragment,{children:[m.jsx("input",{className:"ar-edit-title",type:"text",value:U,onChange:F=>x(F.target.value),placeholder:"Title"}),$==="ROOT"&&m.jsx("input",{className:"ar-edit-keywords",type:"text",value:v,onChange:F=>E(F.target.value),placeholder:"Keywords (comma-separated)"}),m.jsx("hr",{className:"ar-divider"}),m.jsxs("div",{className:"ar-editor-section",children:[m.jsx(vQ,{editor:S}),m.jsx("div",{className:"ar-editor-wrapper",children:m.jsx(hw,{editor:S})})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h1",{className:"ar-title",children:B}),m.jsx("hr",{className:"ar-divider"}),m.jsx("div",{className:"ar-content",children:z?V:Jve(V)})]})]})};return m.jsxs("div",{className:"ar-page",children:[m.jsxs("div",{className:"ar-content-row",children:[m.jsxs("div",{className:"ar-content-area",children:[m.jsx("main",{className:"ar-body",children:c?m.jsx("div",{className:"ar-loading",children:"Loading..."}):_()}),!c&&I>1&&m.jsxs("div",{className:"ar-nav",children:[m.jsx("button",{className:"ar-nav-btn",disabled:o===0,onClick:()=>a(P=>P-1),children:" Prev"}),m.jsxs("span",{className:"ar-nav-info",children:[o+1," / ",I]}),m.jsx("button",{className:"ar-nav-btn",disabled:o>=I-1,onClick:()=>a(P=>P+1),children:"Next "})]})]}),m.jsx("div",{className:`ar-chat-sidebar${g?" ar-chat-sidebar--open":""}`,children:m.jsx(wQ,{selectedThreadId:e.id,initialThreadId:e.id,onNodesCreated:i,onThreadCreated:s,articleContext:R,onProposedUpdate:D,defaultSidebarCollapsed:!0})})]}),m.jsx("button",{className:`ar-chat-toggle${g?" ar-chat-toggle--open":""}`,onClick:()=>y(P=>!P),title:g?"Close chat":"Open chat",children:g?"":""})]})},rEe="modulepreload",iEe=function(e){return"/"+e},bF={},qe=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=iEe(l),l in bF)return;bF[l]=!0;const f=l.endsWith(".css"),c=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":rEe,f||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),f)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var It={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"false",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",PKG_NAME:"@excalidraw/excalidraw",PKG_VERSION:"0.18.0",PROD:!0},EQ=Object.defineProperty,sEe=(e,t,n)=>t in e?EQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tqe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),oEe=e=>t=>{var n=e[t];if(n)return n();throw new Error("Module not found in bundle: "+t)},kQ=(e,t)=>{for(var n in t)EQ(e,n,{get:t[n],enumerable:!0})},Q=(e,t,n)=>(sEe(e,typeof t!="symbol"?t+"":t,n),n),wk={},yF;function aEe(){return yF||(yF=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var f=0,c=new Array(256),d=0;d!=256;++d)f=d,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,c[d]=f;return typeof Int32Array<"u"?new Int32Array(c):c}var r=n(),i=typeof Buffer<"u";function s(f){if(f.length>32768&&i)return a(new Buffer(f));for(var c=-1,d=f.length-1,u=0;u<d;)c=r[(c^f.charCodeAt(u++))&255]^c>>>8,c=r[(c^f.charCodeAt(u++))&255]^c>>>8;return u===d&&(c=c>>>8^r[(c^f.charCodeAt(u))&255]),c^-1}function o(f){if(f.length>1e4)return a(f);for(var c=-1,d=0,u=f.length-3;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+3;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function a(f){for(var c=-1,d=0,u=f.length-7;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+7;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function l(f){for(var c=-1,d=0,u=f.length,h,g;d<u;)h=f.charCodeAt(d++),h<128?c=c>>>8^r[(c^h)&255]:h<2048?(c=c>>>8^r[(c^(192|h>>6&31))&255],c=c>>>8^r[(c^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,g=f.charCodeAt(d++)&1023,c=c>>>8^r[(c^(240|h>>8&7))&255],c=c>>>8^r[(c^(128|h>>2&63))&255],c=c>>>8^r[(c^(128|g>>6&15|h&3))&255],c=c>>>8^r[(c^(128|g&63))&255]):(c=c>>>8^r[(c^(224|h>>12&15))&255],c=c>>>8^r[(c^(128|h>>6&63))&255],c=c>>>8^r[(c^(128|h&63))&255]);return c^-1}t.table=r,t.bstr=s,t.buf=o,t.str=l})}(wk)),wk}var vk,UF;function lEe(){if(UF)return vk;UF=1;var e=aEe();vk=i;var t=new Uint8Array(4),n=new Int32Array(t.buffer),r=new Uint32Array(t.buffer);function i(s){if(s[0]!==137)throw new Error("Invalid .png file header");if(s[1]!==80)throw new Error("Invalid .png file header");if(s[2]!==78)throw new Error("Invalid .png file header");if(s[3]!==71)throw new Error("Invalid .png file header");if(s[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(s[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(s[6]!==26)throw new Error("Invalid .png file header");if(s[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var o=!1,a=[],l=8;l<s.length;){t[3]=s[l++],t[2]=s[l++],t[1]=s[l++],t[0]=s[l++];var f=r[0]+4,c=new Uint8Array(f);c[0]=s[l++],c[1]=s[l++],c[2]=s[l++],c[3]=s[l++];var d=String.fromCharCode(c[0])+String.fromCharCode(c[1])+String.fromCharCode(c[2])+String.fromCharCode(c[3]);if(!a.length&&d!=="IHDR")throw new Error("IHDR header missing");if(d==="IEND"){o=!0,a.push({name:d,data:new Uint8Array(0)});break}for(var u=4;u<f;u++)c[u]=s[l++];t[3]=s[l++],t[2]=s[l++],t[1]=s[l++],t[0]=s[l++];var h=n[0],g=e.buf(c);if(g!==h)throw new Error("CRC values for "+d+" header do not match, PNG file is likely corrupted");var y=new Uint8Array(c.buffer.slice(4));a.push({name:d,data:y})}if(!o)throw new Error(".png file ended prematurely: no IEND header was found");return a}return vk}var cEe=lEe();const SQ=Na(cEe);var TU={},Ek,xF;function fEe(){if(xF)return Ek;xF=1,Ek=e;function e(t,n){if(t=String(t),n=String(n),!/^[\x00-\xFF]+$/.test(t)||!/^[\x00-\xFF]+$/.test(n))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(t.length>=80)throw new Error('Keyword "'+t+'" is longer than the 79-character limit imposed by the PNG specification');for(var r=t.length+n.length+1,i=new Uint8Array(r),s=0,o,a=0;a<t.length;a++){if(!(o=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt keywords");i[s++]=o}i[s++]=0;for(var l=0;l<n.length;l++){if(!(o=n.charCodeAt(l)))throw new Error("0x00 character is not permitted in tEXt content");i[s++]=o}return{name:"tEXt",data:i}}return Ek}var kk,wF;function dEe(){if(wF)return kk;wF=1,kk=e;function e(t){t.data&&t.name&&(t=t.data);for(var n=!0,r="",i="",s=0;s<t.length;s++){var o=t[s];if(n)o?i+=String.fromCharCode(o):n=!1;else if(o)r+=String.fromCharCode(o);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:r}}return kk}var vF;function uEe(){return vF||(vF=1,TU.encode=fEe(),TU.decode=dEe()),TU}var hEe=uEe();const CQ=Na(hEe);var Sk,EF;function pEe(){return EF||(EF=1,Sk=function(e,t,n){var r=[],i=e.length;if(i===0)return r;var s=t<0?Math.max(0,t+i):t||0;for(n!==void 0&&(i=n<0?n+i:n);i-- >s;)r[i-s]=e[i];return r}),Sk}var Ck={},kF;function mEe(){return kF||(kF=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var f=0,c=new Array(256),d=0;d!=256;++d)f=d,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,c[d]=f;return typeof Int32Array<"u"?new Int32Array(c):c}var r=n(),i=typeof Buffer<"u";function s(f){if(f.length>32768&&i)return a(new Buffer(f));for(var c=-1,d=f.length-1,u=0;u<d;)c=r[(c^f.charCodeAt(u++))&255]^c>>>8,c=r[(c^f.charCodeAt(u++))&255]^c>>>8;return u===d&&(c=c>>>8^r[(c^f.charCodeAt(u))&255]),c^-1}function o(f){if(f.length>1e4)return a(f);for(var c=-1,d=0,u=f.length-3;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+3;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function a(f){for(var c=-1,d=0,u=f.length-7;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+7;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function l(f){for(var c=-1,d=0,u=f.length,h,g;d<u;)h=f.charCodeAt(d++),h<128?c=c>>>8^r[(c^h)&255]:h<2048?(c=c>>>8^r[(c^(192|h>>6&31))&255],c=c>>>8^r[(c^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,g=f.charCodeAt(d++)&1023,c=c>>>8^r[(c^(240|h>>8&7))&255],c=c>>>8^r[(c^(128|h>>2&63))&255],c=c>>>8^r[(c^(128|g>>6&15|h&3))&255],c=c>>>8^r[(c^(128|g&63))&255]):(c=c>>>8^r[(c^(224|h>>12&15))&255],c=c>>>8^r[(c^(128|h>>6&63))&255],c=c>>>8^r[(c^(128|h&63))&255]);return c^-1}t.table=r,t.bstr=s,t.buf=o,t.str=l})}(Ck)),Ck}var Ak,SF;function gEe(){if(SF)return Ak;SF=1;var e=pEe(),t=mEe();Ak=s;var n=new Uint8Array(4),r=new Int32Array(n.buffer),i=new Uint32Array(n.buffer);function s(o){var a=8,l=a,f;for(f=0;f<o.length;f++)a+=o[f].data.length,a+=12;var c=new Uint8Array(a);for(c[0]=137,c[1]=80,c[2]=78,c[3]=71,c[4]=13,c[5]=10,c[6]=26,c[7]=10,f=0;f<o.length;f++){var d=o[f],u=d.name,h=d.data,g=h.length,y=[u.charCodeAt(0),u.charCodeAt(1),u.charCodeAt(2),u.charCodeAt(3)];i[0]=g,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0],c[l++]=y[0],c[l++]=y[1],c[l++]=y[2],c[l++]=y[3];for(var U=0;U<g;)c[l++]=h[U++];var x=y.concat(e(h)),v=t.buf(x);r[0]=v,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0]}return c}return Ak}var bEe=gEe();const yEe=Na(bEe);/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const UEe=4,CF=0,AF=1,xEe=2;function qg(e){let t=e.length;for(;--t>=0;)e[t]=0}const wEe=0,AQ=1,vEe=2,EEe=3,kEe=258,BI=29,my=256,lb=my+1+BI,um=30,FI=19,MQ=2*lb+1,rh=15,Mk=16,SEe=7,zI=256,TQ=16,IQ=17,NQ=18,IA=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),M3=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),CEe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),RQ=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),AEe=512,uf=new Array((lb+2)*2);qg(uf);const h2=new Array(um*2);qg(h2);const cb=new Array(AEe);qg(cb);const fb=new Array(kEe-EEe+1);qg(fb);const $I=new Array(BI);qg($I);const v4=new Array(um);qg(v4);function Tk(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let _Q,PQ,DQ;function Ik(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const LQ=e=>e<256?cb[e]:cb[256+(e>>>7)],db=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},so=(e,t,n)=>{e.bi_valid>Mk-n?(e.bi_buf|=t<<e.bi_valid&65535,db(e,e.bi_buf),e.bi_buf=t>>Mk-e.bi_valid,e.bi_valid+=n-Mk):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},dc=(e,t,n)=>{so(e,n[t*2],n[t*2+1])},OQ=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},MEe=e=>{e.bi_valid===16?(db(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},TEe=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let f,c,d,u,h,g,y=0;for(u=0;u<=rh;u++)e.bl_count[u]=0;for(n[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<MQ;f++)c=e.heap[f],u=n[n[c*2+1]*2+1]+1,u>l&&(u=l,y++),n[c*2+1]=u,!(c>r)&&(e.bl_count[u]++,h=0,c>=a&&(h=o[c-a]),g=n[c*2],e.opt_len+=g*(u+h),s&&(e.static_len+=g*(i[c*2+1]+h)));if(y!==0){do{for(u=l-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,y-=2}while(y>0);for(u=l;u!==0;u--)for(c=e.bl_count[u];c!==0;)d=e.heap[--f],!(d>r)&&(n[d*2+1]!==u&&(e.opt_len+=(u-n[d*2+1])*n[d*2],n[d*2+1]=u),c--)}},jQ=(e,t,n)=>{const r=new Array(rh+1);let i=0,s,o;for(s=1;s<=rh;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=OQ(r[a]++,a))}},IEe=()=>{let e,t,n,r,i;const s=new Array(rh+1);for(n=0,r=0;r<BI-1;r++)for($I[r]=n,e=0;e<1<<IA[r];e++)fb[n++]=r;for(fb[n-1]=r,i=0,r=0;r<16;r++)for(v4[r]=i,e=0;e<1<<M3[r];e++)cb[i++]=r;for(i>>=7;r<um;r++)for(v4[r]=i<<7,e=0;e<1<<M3[r]-7;e++)cb[256+i++]=r;for(t=0;t<=rh;t++)s[t]=0;for(e=0;e<=143;)uf[e*2+1]=8,e++,s[8]++;for(;e<=255;)uf[e*2+1]=9,e++,s[9]++;for(;e<=279;)uf[e*2+1]=7,e++,s[7]++;for(;e<=287;)uf[e*2+1]=8,e++,s[8]++;for(jQ(uf,lb+1,s),e=0;e<um;e++)h2[e*2+1]=5,h2[e*2]=OQ(e,5);_Q=new Tk(uf,IA,my+1,lb,rh),PQ=new Tk(h2,M3,0,um,rh),DQ=new Tk(new Array(0),CEe,0,FI,SEe)},BQ=e=>{let t;for(t=0;t<lb;t++)e.dyn_ltree[t*2]=0;for(t=0;t<um;t++)e.dyn_dtree[t*2]=0;for(t=0;t<FI;t++)e.bl_tree[t*2]=0;e.dyn_ltree[zI*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},FQ=e=>{e.bi_valid>8?db(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},NEe=(e,t,n,r)=>{FQ(e),db(e,n),db(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},MF=(e,t,n,r)=>{const i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},Nk=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&MF(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!MF(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},TF=(e,t,n)=>{let r,i,s=0,o,a;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,r===0?dc(e,i,t):(o=fb[i],dc(e,o+my+1,t),a=IA[o],a!==0&&(i-=$I[o],so(e,i,a)),r--,o=LQ(r),dc(e,o,n),a=M3[o],a!==0&&(r-=v4[o],so(e,r,a)));while(s<e.last_lit);dc(e,zI,t)},NA=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,f;for(e.heap_len=0,e.heap_max=MQ,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=l<2?++l:0,n[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=r[f*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)Nk(e,n,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Nk(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[f*2]=n[o*2]+n[a*2],e.depth[f]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=f,e.heap[1]=f++,Nk(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],TEe(e,t),jQ(n,l,e.bl_count)},IF=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)&&(a<f?e.bl_tree[s*2]+=a:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[TQ*2]++):a<=10?e.bl_tree[IQ*2]++:e.bl_tree[NQ*2]++,a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4))},NF=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),r=0;r<=n;r++)if(s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)){if(a<f)do dc(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==i&&(dc(e,s,e.bl_tree),a--),dc(e,TQ,e.bl_tree),so(e,a-3,2)):a<=10?(dc(e,IQ,e.bl_tree),so(e,a-3,3)):(dc(e,NQ,e.bl_tree),so(e,a-11,7));a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4)}},REe=e=>{let t;for(IF(e,e.dyn_ltree,e.l_desc.max_code),IF(e,e.dyn_dtree,e.d_desc.max_code),NA(e,e.bl_desc),t=FI-1;t>=3&&e.bl_tree[RQ[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},_Ee=(e,t,n,r)=>{let i;for(so(e,t-257,5),so(e,n-1,5),so(e,r-4,4),i=0;i<r;i++)so(e,e.bl_tree[RQ[i]*2+1],3);NF(e,e.dyn_ltree,t-1),NF(e,e.dyn_dtree,n-1)},PEe=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return CF;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return AF;for(n=32;n<my;n++)if(e.dyn_ltree[n*2]!==0)return AF;return CF};let RF=!1;const DEe=e=>{RF||(IEe(),RF=!0),e.l_desc=new Ik(e.dyn_ltree,_Q),e.d_desc=new Ik(e.dyn_dtree,PQ),e.bl_desc=new Ik(e.bl_tree,DQ),e.bi_buf=0,e.bi_valid=0,BQ(e)},zQ=(e,t,n,r)=>{so(e,(wEe<<1)+(r?1:0),3),NEe(e,t,n)},LEe=e=>{so(e,AQ<<1,3),dc(e,zI,uf),MEe(e)},OEe=(e,t,n,r)=>{let i,s,o=0;e.level>0?(e.strm.data_type===xEe&&(e.strm.data_type=PEe(e)),NA(e,e.l_desc),NA(e,e.d_desc),o=REe(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?zQ(e,t,n,r):e.strategy===UEe||s===i?(so(e,(AQ<<1)+(r?1:0),3),TF(e,uf,h2)):(so(e,(vEe<<1)+(r?1:0),3),_Ee(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),TF(e,e.dyn_ltree,e.dyn_dtree)),BQ(e),r&&FQ(e)},jEe=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(fb[n]+my+1)*2]++,e.dyn_dtree[LQ(t)*2]++),e.last_lit===e.lit_bufsize-1);var BEe=DEe,FEe=zQ,zEe=OEe,$Ee=jEe,HEe=LEe,VEe={_tr_init:BEe,_tr_stored_block:FEe,_tr_flush_block:zEe,_tr_tally:$Ee,_tr_align:HEe};const WEe=(e,t,n,r)=>{let i=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var ub=WEe;const GEe=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},XEe=new Uint32Array(GEe()),KEe=(e,t,n,r)=>{const i=XEe,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var yi=KEe,o1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Qg={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:YEe,_tr_stored_block:ZEe,_tr_flush_block:qEe,_tr_tally:Lu,_tr_align:QEe}=VEe,{Z_NO_FLUSH:M1,Z_PARTIAL_FLUSH:JEe,Z_FULL_FLUSH:eke,Z_FINISH:Ou,Z_BLOCK:_F,Z_OK:uc,Z_STREAM_END:PF,Z_STREAM_ERROR:Ea,Z_DATA_ERROR:tke,Z_BUF_ERROR:Rk,Z_DEFAULT_COMPRESSION:nke,Z_FILTERED:rke,Z_HUFFMAN_ONLY:IU,Z_RLE:ike,Z_FIXED:ske,Z_DEFAULT_STRATEGY:oke,Z_UNKNOWN:ake,Z_DEFLATED:yw}=Qg,lke=9,cke=15,fke=8,dke=29,uke=256,RA=uke+1+dke,hke=30,pke=19,mke=2*RA+1,gke=15,Qt=3,Su=258,gl=Su+Qt+1,bke=32,Uw=42,_A=69,T3=73,I3=91,N3=103,ih=113,O5=666,li=1,gy=2,a1=3,Jg=4,yke=3,Cu=(e,t)=>(e.msg=o1[t],t),DF=e=>(e<<1)-(e>4?9:0),ru=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Uke=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ju=Uke;const Hd=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},zi=(e,t)=>{qEe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Hd(e.strm)},un=(e,t)=>{e.pending_buf[e.pending++]=t},a5=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},xke=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=ub(e.adler,t,i,n):e.state.wrap===2&&(e.adler=yi(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},$Q=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-gl?e.strstart-(e.w_size-gl):0,f=e.window,c=e.w_mask,d=e.prev,u=e.strstart+Su;let h=f[r+o-1],g=f[r+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(f[i+o]!==g||f[i+o-1]!==h||f[i]!==f[r]||f[++i]!==f[r+1])){r+=2,i++;do;while(f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&r<u);if(s=Su-(u-r),r=u-Su,s>o){if(e.match_start=t,o=s,s>=a)break;h=f[r+o-1],g=f[r+o]}}while((t=d[t&c])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},l1=e=>{const t=e.w_size;let n,r,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-gl)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);s+=t}if(e.strm.avail_in===0)break;if(r=xke(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=Qt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=ju(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=ju(e,e.ins_h,e.window[o+Qt-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<Qt)););}while(e.lookahead<gl&&e.strm.avail_in!==0)},wke=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(l1(e),e.lookahead===0&&t===M1)return li;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,zi(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-gl&&(zi(e,!1),e.strm.avail_out===0))return li}return e.insert=0,t===Ou?(zi(e,!0),e.strm.avail_out===0?a1:Jg):(e.strstart>e.block_start&&(zi(e,!1),e.strm.avail_out===0),li)},_k=(e,t)=>{let n,r;for(;;){if(e.lookahead<gl){if(l1(e),e.lookahead<gl&&t===M1)return li;if(e.lookahead===0)break}if(n=0,e.lookahead>=Qt&&(e.ins_h=ju(e,e.ins_h,e.window[e.strstart+Qt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-gl&&(e.match_length=$Q(e,n)),e.match_length>=Qt)if(r=Lu(e,e.strstart-e.match_start,e.match_length-Qt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Qt){e.match_length--;do e.strstart++,e.ins_h=ju(e,e.ins_h,e.window[e.strstart+Qt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ju(e,e.ins_h,e.window[e.strstart+1]);else r=Lu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(zi(e,!1),e.strm.avail_out===0))return li}return e.insert=e.strstart<Qt-1?e.strstart:Qt-1,t===Ou?(zi(e,!0),e.strm.avail_out===0?a1:Jg):e.last_lit&&(zi(e,!1),e.strm.avail_out===0)?li:gy},hp=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<gl){if(l1(e),e.lookahead<gl&&t===M1)return li;if(e.lookahead===0)break}if(n=0,e.lookahead>=Qt&&(e.ins_h=ju(e,e.ins_h,e.window[e.strstart+Qt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Qt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-gl&&(e.match_length=$Q(e,n),e.match_length<=5&&(e.strategy===rke||e.match_length===Qt&&e.strstart-e.match_start>4096)&&(e.match_length=Qt-1)),e.prev_length>=Qt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Qt,r=Lu(e,e.strstart-1-e.prev_match,e.prev_length-Qt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=ju(e,e.ins_h,e.window[e.strstart+Qt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Qt-1,e.strstart++,r&&(zi(e,!1),e.strm.avail_out===0))return li}else if(e.match_available){if(r=Lu(e,0,e.window[e.strstart-1]),r&&zi(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return li}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Lu(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Qt-1?e.strstart:Qt-1,t===Ou?(zi(e,!0),e.strm.avail_out===0?a1:Jg):e.last_lit&&(zi(e,!1),e.strm.avail_out===0)?li:gy},vke=(e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=Su){if(l1(e),e.lookahead<=Su&&t===M1)return li;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Qt&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+Su;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=Su-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Qt?(n=Lu(e,1,e.match_length-Qt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Lu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(zi(e,!1),e.strm.avail_out===0))return li}return e.insert=0,t===Ou?(zi(e,!0),e.strm.avail_out===0?a1:Jg):e.last_lit&&(zi(e,!1),e.strm.avail_out===0)?li:gy},Eke=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(l1(e),e.lookahead===0)){if(t===M1)return li;break}if(e.match_length=0,n=Lu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(zi(e,!1),e.strm.avail_out===0))return li}return e.insert=0,t===Ou?(zi(e,!0),e.strm.avail_out===0?a1:Jg):e.last_lit&&(zi(e,!1),e.strm.avail_out===0)?li:gy};function jl(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const j5=[new jl(0,0,0,0,wke),new jl(4,4,8,4,_k),new jl(4,5,16,8,_k),new jl(4,6,32,32,_k),new jl(4,4,16,16,hp),new jl(8,16,32,32,hp),new jl(8,16,128,128,hp),new jl(8,32,128,256,hp),new jl(32,128,258,1024,hp),new jl(32,258,258,4096,hp)],kke=e=>{e.window_size=2*e.w_size,ru(e.head),e.max_lazy_match=j5[e.level].max_lazy,e.good_match=j5[e.level].good_length,e.nice_match=j5[e.level].nice_length,e.max_chain_length=j5[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Qt-1,e.match_available=0,e.ins_h=0};function Ske(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=yw,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(mke*2),this.dyn_dtree=new Uint16Array((2*hke+1)*2),this.bl_tree=new Uint16Array((2*pke+1)*2),ru(this.dyn_ltree),ru(this.dyn_dtree),ru(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(gke+1),this.heap=new Uint16Array(2*RA+1),ru(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*RA+1),ru(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const HQ=e=>{if(!e||!e.state)return Cu(e,Ea);e.total_in=e.total_out=0,e.data_type=ake;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Uw:ih,e.adler=t.wrap===2?0:1,t.last_flush=M1,YEe(t),uc},VQ=e=>{const t=HQ(e);return t===uc&&kke(e.state),t},Cke=(e,t)=>!e||!e.state||e.state.wrap!==2?Ea:(e.state.gzhead=t,uc),WQ=(e,t,n,r,i,s)=>{if(!e)return Ea;let o=1;if(t===nke&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>lke||n!==yw||r<8||r>15||t<0||t>9||s<0||s>ske)return Cu(e,Ea);r===8&&(r=9);const a=new Ske;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Qt-1)/Qt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,VQ(e)},Ake=(e,t)=>WQ(e,t,yw,cke,fke,oke),Mke=(e,t)=>{let n,r;if(!e||!e.state||t>_F||t<0)return e?Cu(e,Ea):Ea;const i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===O5&&t!==Ou)return Cu(e,e.avail_out===0?Rk:Ea);i.strm=e;const s=i.last_flush;if(i.last_flush=t,i.status===Uw)if(i.wrap===2)e.adler=0,un(i,31),un(i,139),un(i,8),i.gzhead?(un(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),un(i,i.gzhead.time&255),un(i,i.gzhead.time>>8&255),un(i,i.gzhead.time>>16&255),un(i,i.gzhead.time>>24&255),un(i,i.level===9?2:i.strategy>=IU||i.level<2?4:0),un(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(un(i,i.gzhead.extra.length&255),un(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=yi(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=_A):(un(i,0),un(i,0),un(i,0),un(i,0),un(i,0),un(i,i.level===9?2:i.strategy>=IU||i.level<2?4:0),un(i,yke),i.status=ih);else{let o=yw+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=IU||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,o|=a<<6,i.strstart!==0&&(o|=bke),o+=31-o%31,i.status=ih,a5(i,o),i.strstart!==0&&(a5(i,e.adler>>>16),a5(i,e.adler&65535)),e.adler=1}if(i.status===_A)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=yi(e.adler,i.pending_buf,i.pending-n,n)),Hd(e),n=i.pending,i.pending===i.pending_buf_size));)un(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=yi(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=T3)}else i.status=T3;if(i.status===T3)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=yi(e.adler,i.pending_buf,i.pending-n,n)),Hd(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.name.length?r=i.gzhead.name.charCodeAt(i.gzindex++)&255:r=0,un(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=yi(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.gzindex=0,i.status=I3)}else i.status=I3;if(i.status===I3)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=yi(e.adler,i.pending_buf,i.pending-n,n)),Hd(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.comment.length?r=i.gzhead.comment.charCodeAt(i.gzindex++)&255:r=0,un(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=yi(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.status=N3)}else i.status=N3;if(i.status===N3&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Hd(e),i.pending+2<=i.pending_buf_size&&(un(i,e.adler&255),un(i,e.adler>>8&255),e.adler=0,i.status=ih)):i.status=ih),i.pending!==0){if(Hd(e),e.avail_out===0)return i.last_flush=-1,uc}else if(e.avail_in===0&&DF(t)<=DF(s)&&t!==Ou)return Cu(e,Rk);if(i.status===O5&&e.avail_in!==0)return Cu(e,Rk);if(e.avail_in!==0||i.lookahead!==0||t!==M1&&i.status!==O5){let o=i.strategy===IU?Eke(i,t):i.strategy===ike?vke(i,t):j5[i.level].func(i,t);if((o===a1||o===Jg)&&(i.status=O5),o===li||o===a1)return e.avail_out===0&&(i.last_flush=-1),uc;if(o===gy&&(t===JEe?QEe(i):t!==_F&&(ZEe(i,0,0,!1),t===eke&&(ru(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),Hd(e),e.avail_out===0))return i.last_flush=-1,uc}return t!==Ou?uc:i.wrap<=0?PF:(i.wrap===2?(un(i,e.adler&255),un(i,e.adler>>8&255),un(i,e.adler>>16&255),un(i,e.adler>>24&255),un(i,e.total_in&255),un(i,e.total_in>>8&255),un(i,e.total_in>>16&255),un(i,e.total_in>>24&255)):(a5(i,e.adler>>>16),a5(i,e.adler&65535)),Hd(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?uc:PF)},Tke=e=>{if(!e||!e.state)return Ea;const t=e.state.status;return t!==Uw&&t!==_A&&t!==T3&&t!==I3&&t!==N3&&t!==ih&&t!==O5?Cu(e,Ea):(e.state=null,t===ih?Cu(e,tke):uc)},Ike=(e,t)=>{let n=t.length;if(!e||!e.state)return Ea;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==Uw||r.lookahead)return Ea;if(i===1&&(e.adler=ub(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(ru(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,l1(r);r.lookahead>=Qt;){let l=r.strstart,f=r.lookahead-(Qt-1);do r.ins_h=ju(r,r.ins_h,r.window[l+Qt-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--f);r.strstart=l,r.lookahead=Qt-1,l1(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Qt-1,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,uc};var Nke=Ake,Rke=WQ,_ke=VQ,Pke=HQ,Dke=Cke,Lke=Mke,Oke=Tke,jke=Ike,Bke="pako deflate (from Nodeca project)",p2={deflateInit:Nke,deflateInit2:Rke,deflateReset:_ke,deflateResetKeep:Pke,deflateSetHeader:Dke,deflate:Lke,deflateEnd:Oke,deflateSetDictionary:jke,deflateInfo:Bke};const Fke=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var zke=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Fke(n,r)&&(e[r]=n[r])}}return e},$ke=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let o=e[r];n.set(o,i),i+=o.length}return n},xw={assign:zke,flattenChunks:$ke};let GQ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{GQ=!1}const hb=new Uint8Array(256);for(let e=0;e<256;e++)hb[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;hb[254]=hb[254]=1;var Hke=e=>{let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const Vke=(e,t)=>{if(t<65534&&e.subarray&&GQ)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var Wke=(e,t)=>{let n,r;const i=t||e.length,s=new Array(i*2);for(r=0,n=0;n<i;){let o=e[n++];if(o<128){s[r++]=o;continue}let a=hb[o];if(a>4){s[r++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<i;)o=o<<6|e[n++]&63,a--;if(a>1){s[r++]=65533;continue}o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|o&1023)}return Vke(s,r)},Gke=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+hb[e[n]]>t?n:t},pb={string2buf:Hke,buf2string:Wke,utf8border:Gke};function Xke(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var XQ=Xke;const KQ=Object.prototype.toString,{Z_NO_FLUSH:Kke,Z_SYNC_FLUSH:Yke,Z_FULL_FLUSH:Zke,Z_FINISH:qke,Z_OK:E4,Z_STREAM_END:Qke,Z_DEFAULT_COMPRESSION:Jke,Z_DEFAULT_STRATEGY:eSe,Z_DEFLATED:tSe}=Qg;function by(e){this.options=xw.assign({level:Jke,method:tSe,chunkSize:16384,windowBits:15,memLevel:8,strategy:eSe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new XQ,this.strm.avail_out=0;let n=p2.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==E4)throw new Error(o1[n]);if(t.header&&p2.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=pb.string2buf(t.dictionary):KQ.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=p2.deflateSetDictionary(this.strm,r),n!==E4)throw new Error(o1[n]);this._dict_set=!0}}by.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?qke:Kke,typeof e=="string"?n.input=pb.string2buf(e):KQ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Yke||s===Zke)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=p2.deflate(n,s),i===Qke)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=p2.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===E4;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};by.prototype.onData=function(e){this.chunks.push(e)};by.prototype.onEnd=function(e){e===E4&&(this.result=xw.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function HI(e,t){const n=new by(t);if(n.push(e,!0),n.err)throw n.msg||o1[n.err];return n.result}function nSe(e,t){return t=t||{},t.raw=!0,HI(e,t)}function rSe(e,t){return t=t||{},t.gzip=!0,HI(e,t)}var iSe=by,sSe=HI,oSe=nSe,aSe=rSe,lSe=Qg,cSe={Deflate:iSe,deflate:sSe,deflateRaw:oSe,gzip:aSe,constants:lSe};const NU=30,fSe=12;var dSe=function(t,n){let r,i,s,o,a,l,f,c,d,u,h,g,y,U,x,v,E,k,M,S,A,I,R,D;const _=t.state;r=t.next_in,R=t.input,i=r+(t.avail_in-5),s=t.next_out,D=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=_.dmax,f=_.wsize,c=_.whave,d=_.wnext,u=_.window,h=_.hold,g=_.bits,y=_.lencode,U=_.distcode,x=(1<<_.lenbits)-1,v=(1<<_.distbits)-1;e:do{g<15&&(h+=R[r++]<<g,g+=8,h+=R[r++]<<g,g+=8),E=y[h&x];t:for(;;){if(k=E>>>24,h>>>=k,g-=k,k=E>>>16&255,k===0)D[s++]=E&65535;else if(k&16){M=E&65535,k&=15,k&&(g<k&&(h+=R[r++]<<g,g+=8),M+=h&(1<<k)-1,h>>>=k,g-=k),g<15&&(h+=R[r++]<<g,g+=8,h+=R[r++]<<g,g+=8),E=U[h&v];n:for(;;){if(k=E>>>24,h>>>=k,g-=k,k=E>>>16&255,k&16){if(S=E&65535,k&=15,g<k&&(h+=R[r++]<<g,g+=8,g<k&&(h+=R[r++]<<g,g+=8)),S+=h&(1<<k)-1,S>l){t.msg="invalid distance too far back",_.mode=NU;break e}if(h>>>=k,g-=k,k=s-o,S>k){if(k=S-k,k>c&&_.sane){t.msg="invalid distance too far back",_.mode=NU;break e}if(A=0,I=u,d===0){if(A+=f-k,k<M){M-=k;do D[s++]=u[A++];while(--k);A=s-S,I=D}}else if(d<k){if(A+=f+d-k,k-=d,k<M){M-=k;do D[s++]=u[A++];while(--k);if(A=0,d<M){k=d,M-=k;do D[s++]=u[A++];while(--k);A=s-S,I=D}}}else if(A+=d-k,k<M){M-=k;do D[s++]=u[A++];while(--k);A=s-S,I=D}for(;M>2;)D[s++]=I[A++],D[s++]=I[A++],D[s++]=I[A++],M-=3;M&&(D[s++]=I[A++],M>1&&(D[s++]=I[A++]))}else{A=s-S;do D[s++]=D[A++],D[s++]=D[A++],D[s++]=D[A++],M-=3;while(M>2);M&&(D[s++]=D[A++],M>1&&(D[s++]=D[A++]))}}else if(k&64){t.msg="invalid distance code",_.mode=NU;break e}else{E=U[(E&65535)+(h&(1<<k)-1)];continue n}break}}else if(k&64)if(k&32){_.mode=fSe;break e}else{t.msg="invalid literal/length code",_.mode=NU;break e}else{E=y[(E&65535)+(h&(1<<k)-1)];continue t}break}}while(r<i&&s<a);M=g>>3,r-=M,g-=M<<3,h&=(1<<g)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=s<a?257+(a-s):257-(s-a),_.hold=h,_.bits=g};const pp=15,LF=852,OF=592,jF=0,Pk=1,BF=2,uSe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),hSe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pSe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),mSe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),gSe=(e,t,n,r,i,s,o,a)=>{const l=a.bits;let f=0,c=0,d=0,u=0,h=0,g=0,y=0,U=0,x=0,v=0,E,k,M,S,A,I=null,R=0,D;const _=new Uint16Array(pp+1),P=new Uint16Array(pp+1);let $=null,L=0,B,V,z;for(f=0;f<=pp;f++)_[f]=0;for(c=0;c<r;c++)_[t[n+c]]++;for(h=l,u=pp;u>=1&&_[u]===0;u--);if(h>u&&(h=u),u===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<u&&_[d]===0;d++);for(h<d&&(h=d),U=1,f=1;f<=pp;f++)if(U<<=1,U-=_[f],U<0)return-1;if(U>0&&(e===jF||u!==1))return-1;for(P[1]=0,f=1;f<pp;f++)P[f+1]=P[f]+_[f];for(c=0;c<r;c++)t[n+c]!==0&&(o[P[t[n+c]]++]=c);if(e===jF?(I=$=o,D=19):e===Pk?(I=uSe,R-=257,$=hSe,L-=257,D=256):(I=pSe,$=mSe,D=-1),v=0,c=0,f=d,A=s,g=h,y=0,M=-1,x=1<<h,S=x-1,e===Pk&&x>LF||e===BF&&x>OF)return 1;for(;;){B=f-y,o[c]<D?(V=0,z=o[c]):o[c]>D?(V=$[L+o[c]],z=I[R+o[c]]):(V=96,z=0),E=1<<f-y,k=1<<g,d=k;do k-=E,i[A+(v>>y)+k]=B<<24|V<<16|z|0;while(k!==0);for(E=1<<f-1;v&E;)E>>=1;if(E!==0?(v&=E-1,v+=E):v=0,c++,--_[f]===0){if(f===u)break;f=t[n+o[c]]}if(f>h&&(v&S)!==M){for(y===0&&(y=h),A+=d,g=f-y,U=1<<g;g+y<u&&(U-=_[g+y],!(U<=0));)g++,U<<=1;if(x+=1<<g,e===Pk&&x>LF||e===BF&&x>OF)return 1;M=v&S,i[M]=h<<24|g<<16|A-s|0}}return v!==0&&(i[A+v]=f-y<<24|64<<16|0),a.bits=h,0};var m2=gSe;const bSe=0,YQ=1,ZQ=2,{Z_FINISH:FF,Z_BLOCK:ySe,Z_TREES:RU,Z_OK:c1,Z_STREAM_END:USe,Z_NEED_DICT:xSe,Z_STREAM_ERROR:Ca,Z_DATA_ERROR:qQ,Z_MEM_ERROR:QQ,Z_BUF_ERROR:wSe,Z_DEFLATED:zF}=Qg,JQ=1,$F=2,HF=3,VF=4,WF=5,GF=6,XF=7,KF=8,YF=9,ZF=10,k4=11,Jc=12,Dk=13,qF=14,Lk=15,QF=16,JF=17,ez=18,tz=19,_U=20,PU=21,nz=22,rz=23,iz=24,sz=25,oz=26,Ok=27,az=28,lz=29,er=30,eJ=31,vSe=32,ESe=852,kSe=592,SSe=15,CSe=SSe,cz=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function ASe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const tJ=e=>{if(!e||!e.state)return Ca;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=JQ,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ESe),t.distcode=t.distdyn=new Int32Array(kSe),t.sane=1,t.back=-1,c1},nJ=e=>{if(!e||!e.state)return Ca;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,tJ(e)},rJ=(e,t)=>{let n;if(!e||!e.state)return Ca;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Ca:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,nJ(e))},iJ=(e,t)=>{if(!e)return Ca;const n=new ASe;e.state=n,n.window=null;const r=rJ(e,t);return r!==c1&&(e.state=null),r},MSe=e=>iJ(e,CSe);let fz=!0,jk,Bk;const TSe=e=>{if(fz){jk=new Int32Array(512),Bk=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(m2(YQ,e.lens,0,288,jk,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;m2(ZQ,e.lens,0,32,Bk,0,e.work,{bits:5}),fz=!1}e.lencode=jk,e.lenbits=9,e.distcode=Bk,e.distbits=5},sJ=(e,t,n,r)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},ISe=(e,t)=>{let n,r,i,s,o,a,l,f,c,d,u,h,g,y,U=0,x,v,E,k,M,S,A,I;const R=new Uint8Array(4);let D,_;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Ca;n=e.state,n.mode===Jc&&(n.mode=Dk),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,f=n.hold,c=n.bits,d=a,u=l,I=c1;e:for(;;)switch(n.mode){case JQ:if(n.wrap===0){n.mode=Dk;break}for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.wrap&2&&f===35615){n.check=0,R[0]=f&255,R[1]=f>>>8&255,n.check=yi(n.check,R,2,0),f=0,c=0,n.mode=$F;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=er;break}if((f&15)!==zF){e.msg="unknown compression method",n.mode=er;break}if(f>>>=4,c-=4,A=(f&15)+8,n.wbits===0)n.wbits=A;else if(A>n.wbits){e.msg="invalid window size",n.mode=er;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=f&512?ZF:Jc,f=0,c=0;break;case $F:for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.flags=f,(n.flags&255)!==zF){e.msg="unknown compression method",n.mode=er;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=er;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=yi(n.check,R,2,0)),f=0,c=0,n.mode=HF;case HF:for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.head&&(n.head.time=f),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,R[2]=f>>>16&255,R[3]=f>>>24&255,n.check=yi(n.check,R,4,0)),f=0,c=0,n.mode=VF;case VF:for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=yi(n.check,R,2,0)),f=0,c=0,n.mode=WF;case WF:if(n.flags&1024){for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=yi(n.check,R,2,0)),f=0,c=0}else n.head&&(n.head.extra=null);n.mode=GF;case GF:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+h),A)),n.flags&512&&(n.check=yi(n.check,r,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=XF;case XF:if(n.flags&2048){if(a===0)break e;h=0;do A=r[s+h++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A));while(A&&h<a);if(n.flags&512&&(n.check=yi(n.check,r,h,s)),a-=h,s+=h,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=KF;case KF:if(n.flags&4096){if(a===0)break e;h=0;do A=r[s+h++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A));while(A&&h<a);if(n.flags&512&&(n.check=yi(n.check,r,h,s)),a-=h,s+=h,A)break e}else n.head&&(n.head.comment=null);n.mode=YF;case YF:if(n.flags&512){for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f!==(n.check&65535)){e.msg="header crc mismatch",n.mode=er;break}f=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Jc;break;case ZF:for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}e.adler=n.check=cz(f),f=0,c=0,n.mode=k4;case k4:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,xSe;e.adler=n.check=1,n.mode=Jc;case Jc:if(t===ySe||t===RU)break e;case Dk:if(n.last){f>>>=c&7,c-=c&7,n.mode=Ok;break}for(;c<3;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}switch(n.last=f&1,f>>>=1,c-=1,f&3){case 0:n.mode=qF;break;case 1:if(TSe(n),n.mode=_U,t===RU){f>>>=2,c-=2;break e}break;case 2:n.mode=JF;break;case 3:e.msg="invalid block type",n.mode=er}f>>>=2,c-=2;break;case qF:for(f>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=er;break}if(n.length=f&65535,f=0,c=0,n.mode=Lk,t===RU)break e;case Lk:n.mode=QF;case QF:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;i.set(r.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=Jc;break;case JF:for(;c<14;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.nlen=(f&31)+257,f>>>=5,c-=5,n.ndist=(f&31)+1,f>>>=5,c-=5,n.ncode=(f&15)+4,f>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=er;break}n.have=0,n.mode=ez;case ez:for(;n.have<n.ncode;){for(;c<3;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.lens[P[n.have++]]=f&7,f>>>=3,c-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},I=m2(bSe,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,I){e.msg="invalid code lengths set",n.mode=er;break}n.have=0,n.mode=tz;case tz:for(;n.have<n.nlen+n.ndist;){for(;U=n.lencode[f&(1<<n.lenbits)-1],x=U>>>24,v=U>>>16&255,E=U&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(E<16)f>>>=x,c-=x,n.lens[n.have++]=E;else{if(E===16){for(_=x+2;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f>>>=x,c-=x,n.have===0){e.msg="invalid bit length repeat",n.mode=er;break}A=n.lens[n.have-1],h=3+(f&3),f>>>=2,c-=2}else if(E===17){for(_=x+3;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=x,c-=x,A=0,h=3+(f&7),f>>>=3,c-=3}else{for(_=x+7;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=x,c-=x,A=0,h=11+(f&127),f>>>=7,c-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=er;break}for(;h--;)n.lens[n.have++]=A}}if(n.mode===er)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=er;break}if(n.lenbits=9,D={bits:n.lenbits},I=m2(YQ,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,I){e.msg="invalid literal/lengths set",n.mode=er;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},I=m2(ZQ,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,I){e.msg="invalid distances set",n.mode=er;break}if(n.mode=_U,t===RU)break e;case _U:n.mode=PU;case PU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,dSe(e,u),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,f=n.hold,c=n.bits,n.mode===Jc&&(n.back=-1);break}for(n.back=0;U=n.lencode[f&(1<<n.lenbits)-1],x=U>>>24,v=U>>>16&255,E=U&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(v&&!(v&240)){for(k=x,M=v,S=E;U=n.lencode[S+((f&(1<<k+M)-1)>>k)],x=U>>>24,v=U>>>16&255,E=U&65535,!(k+x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=k,c-=k,n.back+=k}if(f>>>=x,c-=x,n.back+=x,n.length=E,v===0){n.mode=oz;break}if(v&32){n.back=-1,n.mode=Jc;break}if(v&64){e.msg="invalid literal/length code",n.mode=er;break}n.extra=v&15,n.mode=nz;case nz:if(n.extra){for(_=n.extra;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=rz;case rz:for(;U=n.distcode[f&(1<<n.distbits)-1],x=U>>>24,v=U>>>16&255,E=U&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(!(v&240)){for(k=x,M=v,S=E;U=n.distcode[S+((f&(1<<k+M)-1)>>k)],x=U>>>24,v=U>>>16&255,E=U&65535,!(k+x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=k,c-=k,n.back+=k}if(f>>>=x,c-=x,n.back+=x,v&64){e.msg="invalid distance code",n.mode=er;break}n.offset=E,n.extra=v&15,n.mode=iz;case iz:if(n.extra){for(_=n.extra;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=er;break}n.mode=sz;case sz:if(l===0)break e;if(h=u-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=er;break}h>n.wnext?(h-=n.wnext,g=n.wsize-h):g=n.wnext-h,h>n.length&&(h=n.length),y=n.window}else y=i,g=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[o++]=y[g++];while(--h);n.length===0&&(n.mode=PU);break;case oz:if(l===0)break e;i[o++]=n.length,l--,n.mode=PU;break;case Ok:if(n.wrap){for(;c<32;){if(a===0)break e;a--,f|=r[s++]<<c,c+=8}if(u-=l,e.total_out+=u,n.total+=u,u&&(e.adler=n.check=n.flags?yi(n.check,i,u,o-u):ub(n.check,i,u,o-u)),u=l,(n.flags?f:cz(f))!==n.check){e.msg="incorrect data check",n.mode=er;break}f=0,c=0}n.mode=az;case az:if(n.wrap&&n.flags){for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=er;break}f=0,c=0}n.mode=lz;case lz:I=USe;break e;case er:I=qQ;break e;case eJ:return QQ;case vSe:default:return Ca}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,(n.wsize||u!==e.avail_out&&n.mode<er&&(n.mode<Ok||t!==FF))&&sJ(e,e.output,e.next_out,u-e.avail_out),d-=e.avail_in,u-=e.avail_out,e.total_in+=d,e.total_out+=u,n.total+=u,n.wrap&&u&&(e.adler=n.check=n.flags?yi(n.check,i,u,e.next_out-u):ub(n.check,i,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Jc?128:0)+(n.mode===_U||n.mode===Lk?256:0),(d===0&&u===0||t===FF)&&I===c1&&(I=wSe),I},NSe=e=>{if(!e||!e.state)return Ca;let t=e.state;return t.window&&(t.window=null),e.state=null,c1},RSe=(e,t)=>{if(!e||!e.state)return Ca;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,c1):Ca},_Se=(e,t)=>{const n=t.length;let r,i,s;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==k4)?Ca:r.mode===k4&&(i=1,i=ub(i,t,n,0),i!==r.check)?qQ:(s=sJ(e,t,n,n),s?(r.mode=eJ,QQ):(r.havedict=1,c1))};var PSe=nJ,DSe=rJ,LSe=tJ,OSe=MSe,jSe=iJ,BSe=ISe,FSe=NSe,zSe=RSe,$Se=_Se,HSe="pako inflate (from Nodeca project)",hf={inflateReset:PSe,inflateReset2:DSe,inflateResetKeep:LSe,inflateInit:OSe,inflateInit2:jSe,inflate:BSe,inflateEnd:FSe,inflateGetHeader:zSe,inflateSetDictionary:$Se,inflateInfo:HSe};function VSe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var WSe=VSe;const oJ=Object.prototype.toString,{Z_NO_FLUSH:GSe,Z_FINISH:XSe,Z_OK:mb,Z_STREAM_END:Fk,Z_NEED_DICT:zk,Z_STREAM_ERROR:KSe,Z_DATA_ERROR:dz,Z_MEM_ERROR:YSe}=Qg;function yy(e){this.options=xw.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new XQ,this.strm.avail_out=0;let n=hf.inflateInit2(this.strm,t.windowBits);if(n!==mb)throw new Error(o1[n]);if(this.header=new WSe,hf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=pb.string2buf(t.dictionary):oJ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=hf.inflateSetDictionary(this.strm,t.dictionary),n!==mb)))throw new Error(o1[n])}yy.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?XSe:GSe,oJ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=hf.inflate(n,o),s===zk&&i&&(s=hf.inflateSetDictionary(n,i),s===mb?s=hf.inflate(n,o):s===dz&&(s=zk));n.avail_in>0&&s===Fk&&n.state.wrap>0&&e[n.next_in]!==0;)hf.inflateReset(n),s=hf.inflate(n,o);switch(s){case KSe:case dz:case zk:case YSe:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===Fk))if(this.options.to==="string"){let l=pb.utf8border(n.output,n.next_out),f=n.next_out-l,c=pb.buf2string(n.output,l);n.next_out=f,n.avail_out=r-f,f&&n.output.set(n.output.subarray(l,l+f),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===mb&&a===0)){if(s===Fk)return s=hf.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};yy.prototype.onData=function(e){this.chunks.push(e)};yy.prototype.onEnd=function(e){e===mb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=xw.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function VI(e,t){const n=new yy(t);if(n.push(e),n.err)throw n.msg||o1[n.err];return n.result}function ZSe(e,t){return t=t||{},t.raw=!0,VI(e,t)}var qSe=yy,QSe=VI,JSe=ZSe,eCe=VI,tCe=Qg,nCe={Inflate:qSe,inflate:QSe,inflateRaw:JSe,ungzip:eCe,constants:tCe};const{Deflate:nqe,deflate:rCe,deflateRaw:rqe,gzip:iqe}=cSe,{Inflate:sqe,inflate:iCe,inflateRaw:oqe,ungzip:aqe}=nCe;var sCe=rCe,oCe=iCe;const aCe="#ffffff",lCe="#000000",cCe=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],fCe=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],dCe=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],uCe=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],hCe=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],pCe=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],mCe=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],gCe=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],bCe=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],yCe=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],UCe=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],xCe=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],wCe=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],ki={white:aCe,black:lCe,gray:cCe,red:fCe,pink:dCe,grape:uCe,violet:hCe,indigo:pCe,blue:mCe,cyan:gCe,teal:bCe,green:yCe,lime:UCe,yellow:xCe,orange:wCe};let WI=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var $k,uz;function vCe(){if(uz)return $k;uz=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof wu=="object"&&wu&&wu.Object===Object&&wu,f=typeof self=="object"&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,u=d.toString,h=Math.max,g=Math.min,y=function(){return c.Date.now()};function U(S,A,I){var R,D,_,P,$,L,B=0,V=!1,z=!1,G=!0;if(typeof S!="function")throw new TypeError(e);A=M(A)||0,v(I)&&(V=!!I.leading,z="maxWait"in I,_=z?h(M(I.maxWait)||0,A):_,G="trailing"in I?!!I.trailing:G);function W(ie){var we=R,Ee=D;return R=D=void 0,B=ie,P=S.apply(Ee,we),P}function F(ie){return B=ie,$=setTimeout(Y,A),V?W(ie):P}function K(ie){var we=ie-L,Ee=ie-B,_e=A-we;return z?g(_e,_-Ee):_e}function q(ie){var we=ie-L,Ee=ie-B;return L===void 0||we>=A||we<0||z&&Ee>=_}function Y(){var ie=y();if(q(ie))return ae(ie);$=setTimeout(Y,K(ie))}function ae(ie){return $=void 0,G&&R?W(ie):(R=D=void 0,P)}function ge(){$!==void 0&&clearTimeout($),B=0,R=L=D=$=void 0}function he(){return $===void 0?P:ae(y())}function ce(){var ie=y(),we=q(ie);if(R=arguments,D=this,L=ie,we){if($===void 0)return F(L);if(z)return $=setTimeout(Y,A),W(L)}return $===void 0&&($=setTimeout(Y,A)),P}return ce.cancel=ge,ce.flush=he,ce}function x(S,A,I){var R=!0,D=!0;if(typeof S!="function")throw new TypeError(e);return v(I)&&(R="leading"in I?!!I.leading:R,D="trailing"in I?!!I.trailing:D),U(S,A,{leading:R,maxWait:A,trailing:D})}function v(S){var A=typeof S;return!!S&&(A=="object"||A=="function")}function E(S){return!!S&&typeof S=="object"}function k(S){return typeof S=="symbol"||E(S)&&u.call(S)==n}function M(S){if(typeof S=="number")return S;if(k(S))return t;if(v(S)){var A=typeof S.valueOf=="function"?S.valueOf():S;S=v(A)?A+"":A}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var I=s.test(S);return I||o.test(S)?a(S.slice(2),I?2:8):i.test(S)?t:+S}return $k=x,$k}var ECe=vCe();const Uy=Na(ECe);var R3={exports:{}},kCe=R3.exports,hz;function SCe(){return hz||(hz=1,function(e,t){(function(n,r){e.exports=r()})(kCe,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(f,c){this._listeners[f]=this._listeners[f]||[],this._listeners[f].indexOf(c)<0&&this._listeners[f].push(c)},n.prototype.removeEventListener=function(f,c){if(this._listeners[f]){var d=this._listeners[f].indexOf(c);d>=0&&this._listeners[f].splice(d,1)}},n.prototype.dispatchEvent=function(f){if(this._listeners[f.type]&&this._listeners[f.type].length)for(var c=this._listeners[f.type].slice(),d=0,u=c.length;d<u;++d)c[d].call(this,f)};var r=function(f){return typeof f.constructor=="function"&&f.constructor.name==="GeneratorFunction"},i=function(f){return{next:function(){var c=f();return c?{value:c}:{done:!0}}}},s=function(f){var c=!1;return{next:function(){return c?{done:!0}:(c=!0,{value:f})}}},o=function(f,c){var d=typeof f;if(d==="object"){if(typeof f.next=="function")return f;if(typeof f.then=="function")return s(f)}return d==="function"?r(f)?f():i(f):s(c.resolve(f))},a=function(f,c,d){this.target=f,this.type=c,this.data=d},l=function(f,c,d){if(n.call(this),typeof c!="number"||Math.floor(c)!==c||c<1)throw new Error("Invalid concurrency");this._concurrency=c,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(f,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(f){return typeof f<"u"&&(this._concurrency=f,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var f=this,c=this._options.promise;return this._promise=new c(function(d,u){f._callbacks={reject:u,resolve:d},f._proceed()}),this._promise},l.prototype._fireEvent=function(f,c){this.dispatchEvent(new a(this,f,c))},l.prototype._settle=function(f){f?this._callbacks.reject(f):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(f,c){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:f,result:c}),this._proceed())},l.prototype._onPooledPromiseRejected=function(f,c){this._size--,this.active()&&(this._fireEvent("rejected",{promise:f,error:c}),this._settle(c||new Error("Unknown error")))},l.prototype._trackPromise=function(f){var c=this;f.then(function(d){c._onPooledPromiseFulfilled(f,d)},function(d){c._onPooledPromiseRejected(f,d)}).catch(function(d){c._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var f={done:!1};this._size<this._concurrency&&!(f=this._iterator.next()).done;)this._size++,this._trackPromise(f.value);this._done=f===null||!!f.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})}(R3)),R3.exports}var CCe=SCe();const ACe=Na(CCe);function PA(e,t,n){if(e&&e.length){const[r,i]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[f,c]=l;l[0]=(f-r)*o-(c-i)*a+r,l[1]=(f-r)*a+(c-i)*o+i}}}function MCe(e,t,n){const r=[];e.forEach(i=>r.push(...i)),PA(r,t,n)}function TCe(e,t){return e[0]===t[0]&&e[1]===t[1]}function ICe(e,t,n,r=1){const i=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(i)for(const f of o)PA(f,a,i);const l=NCe(o,s,r);if(i){for(const f of o)PA(f,a,-i);MCe(l,a,-i)}return l}function NCe(e,t,n){const r=[];for(const f of e){const c=[...f];TCe(c[0],c[c.length-1])||c.push([c[0][0],c[0][1]]),c.length>2&&r.push(c)}const i=[];t=Math.max(t,.1);const s=[];for(const f of r)for(let c=0;c<f.length-1;c++){const d=f[c],u=f[c+1];if(d[1]!==u[1]){const h=Math.min(d[1],u[1]);s.push({ymin:h,ymax:Math.max(d[1],u[1]),x:h===d[1]?d[0]:u[0],islope:(u[0]-d[0])/(u[1]-d[1])})}}if(s.sort((f,c)=>f.ymin<c.ymin?-1:f.ymin>c.ymin?1:f.x<c.x?-1:f.x>c.x?1:f.ymax===c.ymax?0:(f.ymax-c.ymax)/Math.abs(f.ymax-c.ymax)),!s.length)return i;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let f=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)f=d;s.splice(0,f+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(f=>!(f.edge.ymax<=a)),o.sort((f,c)=>f.edge.x===c.edge.x?0:(f.edge.x-c.edge.x)/Math.abs(f.edge.x-c.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let f=0;f<o.length;f=f+2){const c=f+1;if(c>=o.length)break;const d=o[f].edge,u=o[c].edge;i.push([[Math.round(d.x),a],[Math.round(u.x),a]])}a+=n,o.forEach(f=>{f.edge.x=f.edge.x+n*f.edge.islope}),l++}return i}function xy(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.max(i,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),ICe(e,i,r,s||1)}class GI{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=xy(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function ww(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class RCe extends GI{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),s=xy(t,i),o=Math.PI/180*n.hachureAngle,a=[],l=r*.5*Math.cos(o),f=r*.5*Math.sin(o);for(const[d,u]of s)ww([d,u])&&a.push([[d[0]-l,d[1]+f],[...u]],[[d[0]+l,d[1]-f],[...u]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class _Ce extends GI{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,i);return r.ops=r.ops.concat(s.ops),r}}class PCe{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=xy(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=i/4;for(const a of t){const l=ww(a),f=l/i,c=Math.ceil(f)-1,d=l-c*i,u=(a[0][0]+a[1][0])/2-i/4,h=Math.min(a[0][1],a[1][1]);for(let g=0;g<c;g++){const y=h+d+g*i,U=u-o+Math.random()*2*o,x=y-o+Math.random()*2*o,v=this.helper.ellipse(U,x,s,s,n);r.push(...v.ops)}}return{type:"fillSketch",ops:r}}}class DCe{constructor(t){this.helper=t}fillPolygons(t,n){const r=xy(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=ww(o),l=Math.floor(a/(r+i)),f=(a+i-l*(r+i))/2;let c=o[0],d=o[1];c[0]>d[0]&&(c=o[1],d=o[0]);const u=Math.atan((d[1]-c[1])/(d[0]-c[0]));for(let h=0;h<l;h++){const g=h*(r+i),y=g+r,U=[c[0]+g*Math.cos(u)+f*Math.cos(u),c[1]+g*Math.sin(u)+f*Math.sin(u)],x=[c[0]+y*Math.cos(u)+f*Math.cos(u),c[1]+y*Math.sin(u)+f*Math.sin(u)];s.push(...this.helper.doubleLineOps(U[0],U[1],x[0],x[1],n))}}),s}}class LCe{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const s=xy(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(s=>{const o=ww(s),a=Math.round(o/(2*n));let l=s[0],f=s[1];l[0]>f[0]&&(l=s[1],f=s[0]);const c=Math.atan((f[1]-l[1])/(f[0]-l[0]));for(let d=0;d<a;d++){const u=d*2*n,h=(d+1)*2*n,g=Math.sqrt(2*Math.pow(n,2)),y=[l[0]+u*Math.cos(c),l[1]+u*Math.sin(c)],U=[l[0]+h*Math.cos(c),l[1]+h*Math.sin(c)],x=[y[0]+g*Math.cos(c+Math.PI/4),y[1]+g*Math.sin(c+Math.PI/4)];i.push(...this.helper.doubleLineOps(y[0],y[1],x[0],x[1],r),...this.helper.doubleLineOps(x[0],x[1],U[0],U[1],r))}}),i}}const Ws={};function OCe(e,t){let n=e.fillStyle||"hachure";if(!Ws[n])switch(n){case"zigzag":Ws[n]||(Ws[n]=new RCe(t));break;case"cross-hatch":Ws[n]||(Ws[n]=new _Ce(t));break;case"dots":Ws[n]||(Ws[n]=new PCe(t));break;case"dashed":Ws[n]||(Ws[n]=new DCe(t));break;case"zigzag-line":Ws[n]||(Ws[n]=new LCe(t));break;case"hachure":default:n="hachure",Ws[n]||(Ws[n]=new GI(t));break}return Ws[n]}function jCe(){return Math.floor(Math.random()*2**31)}class aJ{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const BCe=0,DA=1,lJ=2,DU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function FCe(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:BCe,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:DA,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:lJ,text:""},t}function Hk(e,t){return e.type===t}function XI(e){const t=[],n=FCe(e);let r="BOD",i=0,s=n[i];for(;!Hk(s,lJ);){let o=0;const a=[];if(r==="BOD")if(s.text==="M"||s.text==="m")i++,o=DU[s.text],r=s.text;else return XI("M0,0"+e);else Hk(s,DA)?o=DU[r]:(i++,o=DU[s.text],r=s.text);if(i+o<n.length){for(let l=i;l<i+o;l++){const f=n[l];if(Hk(f,DA))a[a.length]=+f.text;else throw new Error("Param not a number: "+r+","+f.text)}if(typeof DU[r]=="number"){const l={key:r,data:a};t.push(l),i+=o,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function cJ(e){let t=0,n=0,r=0,i=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[r,i]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=r,n=i;break}return s}function fJ(e){const t=[];let n="",r=0,i=0,s=0,o=0,a=0,l=0;for(const{key:f,data:c}of e){switch(f){case"M":t.push({key:"M",data:[...c]}),[r,i]=c,[s,o]=c;break;case"C":t.push({key:"C",data:[...c]}),r=c[4],i=c[5],a=c[2],l=c[3];break;case"L":t.push({key:"L",data:[...c]}),[r,i]=c;break;case"H":r=c[0],t.push({key:"L",data:[r,i]});break;case"V":i=c[0],t.push({key:"L",data:[r,i]});break;case"S":{let d=0,u=0;n==="C"||n==="S"?(d=r+(r-a),u=i+(i-l)):(d=r,u=i),t.push({key:"C",data:[d,u,...c]}),a=c[0],l=c[1],r=c[2],i=c[3];break}case"T":{const[d,u]=c;let h=0,g=0;n==="Q"||n==="T"?(h=r+(r-a),g=i+(i-l)):(h=r,g=i);const y=r+2*(h-r)/3,U=i+2*(g-i)/3,x=d+2*(h-d)/3,v=u+2*(g-u)/3;t.push({key:"C",data:[y,U,x,v,d,u]}),a=h,l=g,r=d,i=u;break}case"Q":{const[d,u,h,g]=c,y=r+2*(d-r)/3,U=i+2*(u-i)/3,x=h+2*(d-h)/3,v=g+2*(u-g)/3;t.push({key:"C",data:[y,U,x,v,h,g]}),a=d,l=u,r=h,i=g;break}case"A":{const d=Math.abs(c[0]),u=Math.abs(c[1]),h=c[2],g=c[3],y=c[4],U=c[5],x=c[6];d===0||u===0?(t.push({key:"C",data:[r,i,U,x,U,x]}),r=U,i=x):(r!==U||i!==x)&&(dJ(r,i,U,x,d,u,h,g,y).forEach(function(E){t.push({key:"C",data:E})}),r=U,i=x);break}case"Z":t.push({key:"Z",data:[]}),r=s,i=o;break}n=f}return t}function zCe(e){return Math.PI*e/180}function l5(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function dJ(e,t,n,r,i,s,o,a,l,f){const c=zCe(o);let d=[],u=0,h=0,g=0,y=0;if(f)[u,h,g,y]=f;else{[e,t]=l5(e,t,-c),[n,r]=l5(n,r,-c);const P=(e-n)/2,$=(t-r)/2;let L=P*P/(i*i)+$*$/(s*s);L>1&&(L=Math.sqrt(L),i=L*i,s=L*s);const B=a===l?-1:1,V=i*i,z=s*s,G=V*z-V*$*$-z*P*P,W=V*$*$+z*P*P,F=B*Math.sqrt(Math.abs(G/W));g=F*i*$/s+(e+n)/2,y=F*-s*P/i+(t+r)/2,u=Math.asin(parseFloat(((t-y)/s).toFixed(9))),h=Math.asin(parseFloat(((r-y)/s).toFixed(9))),e<g&&(u=Math.PI-u),n<g&&(h=Math.PI-h),u<0&&(u=Math.PI*2+u),h<0&&(h=Math.PI*2+h),l&&u>h&&(u=u-Math.PI*2),!l&&h>u&&(h=h-Math.PI*2)}let U=h-u;if(Math.abs(U)>Math.PI*120/180){const P=h,$=n,L=r;l&&h>u?h=u+Math.PI*120/180*1:h=u+Math.PI*120/180*-1,n=g+i*Math.cos(h),r=y+s*Math.sin(h),d=dJ(n,r,$,L,i,s,o,0,l,[h,P,g,y])}U=h-u;const x=Math.cos(u),v=Math.sin(u),E=Math.cos(h),k=Math.sin(h),M=Math.tan(U/4),S=4/3*i*M,A=4/3*s*M,I=[e,t],R=[e+S*v,t-A*x],D=[n+S*k,r-A*E],_=[n,r];if(R[0]=2*I[0]-R[0],R[1]=2*I[1]-R[1],f)return[R,D,_].concat(d);{d=[R,D,_].concat(d);const P=[];for(let $=0;$<d.length;$+=3){const L=l5(d[$][0],d[$][1],c),B=l5(d[$+1][0],d[$+1][1],c),V=l5(d[$+2][0],d[$+2][1],c);P.push([L[0],L[1],B[0],B[1],V[0],V[1]])}return P}}const $Ce={randOffset:XCe,randOffsetWithRange:KCe,ellipse:WCe,doubleLineOps:YCe};function uJ(e,t,n,r,i){return{type:"path",ops:Hf(e,t,n,r,i)}}function _3(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...Hf(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&i.push(...Hf(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return uJ(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function HCe(e,t){return _3(e,!0,t)}function VCe(e,t,n,r,i){const s=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return HCe(s,i)}function pz(e,t){let n=yz(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const r=yz(e,1.5*(1+t.roughness*.22),ZCe(t));n=n.concat(r)}return{type:"path",ops:n}}function WCe(e,t,n,r,i){const s=hJ(n,r,i);return LA(e,t,i,s).opset}function hJ(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=Math.PI*2/i;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=xt(o*l,n),a+=xt(a*l,n),{increment:s,rx:o,ry:a}}function LA(e,t,n,r){const[i,s]=Uz(r.increment,e,t,r.rx,r.ry,1,r.increment*S4(.1,S4(.4,1,n),n),n);let o=C4(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=Uz(r.increment,e,t,r.rx,r.ry,1.5,0,n),l=C4(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function mz(e,t,n,r,i,s,o,a,l){const f=e,c=t;let d=Math.abs(n/2),u=Math.abs(r/2);d+=xt(d*.01,l),u+=xt(u*.01,l);let h=i,g=s;for(;h<0;)h+=Math.PI*2,g+=Math.PI*2;g-h>Math.PI*2&&(h=0,g=Math.PI*2);const y=Math.PI*2/l.curveStepCount,U=Math.min(y/2,(g-h)/2),x=xz(U,f,c,d,u,h,g,1,l);if(!l.disableMultiStroke){const v=xz(U,f,c,d,u,h,g,1.5,l);x.push(...v)}return o&&(a?x.push(...Hf(f,c,f+d*Math.cos(h),c+u*Math.sin(h),l),...Hf(f,c,f+d*Math.cos(g),c+u*Math.sin(g),l)):x.push({op:"lineTo",data:[f,c]},{op:"lineTo",data:[f+d*Math.cos(h),c+u*Math.sin(h)]})),{type:"path",ops:x}}function gz(e,t){const n=fJ(cJ(XI(e))),r=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],i=[a[0],a[1]];break}case"L":r.push(...Hf(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,f,c,d,u,h]=a;r.push(...qCe(l,f,c,d,u,h,s,t)),s=[u,h];break}case"Z":r.push(...Hf(s[0],s[1],i[0],i[1],t)),s=[i[0],i[1]];break}return{type:"path",ops:r}}function Vk(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+xt(i,t),r[0][1]+xt(i,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[r[o][0]+xt(i,t),r[o][1]+xt(i,t)]})}}return{type:"fillPath",ops:n}}function Rp(e,t){return OCe(t,$Ce).fillPolygons(e,t)}function GCe(e,t,n,r,i,s,o){const a=e,l=t;let f=Math.abs(n/2),c=Math.abs(r/2);f+=xt(f*.01,o),c+=xt(c*.01,o);let d=i,u=s;for(;d<0;)d+=Math.PI*2,u+=Math.PI*2;u-d>Math.PI*2&&(d=0,u=Math.PI*2);const h=(u-d)/o.curveStepCount,g=[];for(let y=d;y<=u;y=y+h)g.push([a+f*Math.cos(y),l+c*Math.sin(y)]);return g.push([a+f*Math.cos(u),l+c*Math.sin(u)]),g.push([a,l]),Rp([g],o)}function XCe(e,t){return xt(e,t)}function KCe(e,t,n){return S4(e,t,n)}function YCe(e,t,n,r,i){return Hf(e,t,n,r,i,!0)}function ZCe(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function pJ(e){return e.randomizer||(e.randomizer=new aJ(e.seed||0)),e.randomizer.next()}function S4(e,t,n,r=1){return n.roughness*r*(pJ(n)*(t-e)+e)}function xt(e,t,n=1){return S4(-e,e,t,n)}function Hf(e,t,n,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=bz(e,t,n,r,i,!0,!1);if(o)return a;const l=bz(e,t,n,r,i,!0,!0);return a.concat(l)}function bz(e,t,n,r,i,s,o){const a=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(a);let f=1;l<200?f=1:l>500?f=.4:f=-.0016668*l+1.233334;let c=i.maxRandomnessOffset||0;c*c*100>a&&(c=l/10);const d=c/2,u=.2+pJ(i)*.2;let h=i.bowing*i.maxRandomnessOffset*(r-t)/200,g=i.bowing*i.maxRandomnessOffset*(e-n)/200;h=xt(h,i,f),g=xt(g,i,f);const y=[],U=()=>xt(d,i,f),x=()=>xt(c,i,f),v=i.preserveVertices;return o?y.push({op:"move",data:[e+(v?0:U()),t+(v?0:U())]}):y.push({op:"move",data:[e+(v?0:xt(c,i,f)),t+(v?0:xt(c,i,f))]}),o?y.push({op:"bcurveTo",data:[h+e+(n-e)*u+U(),g+t+(r-t)*u+U(),h+e+2*(n-e)*u+U(),g+t+2*(r-t)*u+U(),n+(v?0:U()),r+(v?0:U())]}):y.push({op:"bcurveTo",data:[h+e+(n-e)*u+x(),g+t+(r-t)*u+x(),h+e+2*(n-e)*u+x(),g+t+2*(r-t)*u+x(),n+(v?0:x()),r+(v?0:x())]}),y}function yz(e,t,n){const r=[];r.push([e[0][0]+xt(t,n),e[0][1]+xt(t,n)]),r.push([e[0][0]+xt(t,n),e[0][1]+xt(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+xt(t,n),e[i][1]+xt(t,n)]),i===e.length-1&&r.push([e[i][0]+xt(t,n),e[i][1]+xt(t,n)]);return C4(r,null,n)}function C4(e,t,n){const r=e.length,i=[];if(r>3){const s=[],o=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<r;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...Hf(e[0][0],e[0][1],e[1][0],e[1][1],n));return i}function Uz(e,t,n,r,i,s,o,a){const l=a.roughness===0,f=[],c=[];if(l){e=e/4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const u=[t+r*Math.cos(d),n+i*Math.sin(d)];f.push(u),c.push(u)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const d=xt(.5,a)-Math.PI/2;c.push([xt(s,a)+t+.9*r*Math.cos(d-e),xt(s,a)+n+.9*i*Math.sin(d-e)]);const u=Math.PI*2+d-.01;for(let h=d;h<u;h=h+e){const g=[xt(s,a)+t+r*Math.cos(h),xt(s,a)+n+i*Math.sin(h)];f.push(g),c.push(g)}c.push([xt(s,a)+t+r*Math.cos(d+Math.PI*2+o*.5),xt(s,a)+n+i*Math.sin(d+Math.PI*2+o*.5)]),c.push([xt(s,a)+t+.98*r*Math.cos(d+o),xt(s,a)+n+.98*i*Math.sin(d+o)]),c.push([xt(s,a)+t+.9*r*Math.cos(d+o*.5),xt(s,a)+n+.9*i*Math.sin(d+o*.5)])}return[c,f]}function xz(e,t,n,r,i,s,o,a,l){const f=s+xt(.1,l),c=[];c.push([xt(a,l)+t+.9*r*Math.cos(f-e),xt(a,l)+n+.9*i*Math.sin(f-e)]);for(let d=f;d<=o;d=d+e)c.push([xt(a,l)+t+r*Math.cos(d),xt(a,l)+n+i*Math.sin(d)]);return c.push([t+r*Math.cos(o),n+i*Math.sin(o)]),c.push([t+r*Math.cos(o),n+i*Math.sin(o)]),C4(c,null,l)}function qCe(e,t,n,r,i,s,o,a){const l=[],f=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let c=[0,0];const d=a.disableMultiStroke?1:2,u=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(u?0:xt(f[0],a)),o[1]+(u?0:xt(f[0],a))]}),c=u?[i,s]:[i+xt(f[h],a),s+xt(f[h],a)],l.push({op:"bcurveTo",data:[e+xt(f[h],a),t+xt(f[h],a),n+xt(f[h],a),r+xt(f[h],a),c[0],c[1]]});return l}function c5(e){return[...e]}function QCe(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(c5(e[0]),c5(e[1]),c5(e[2]),c5(e[2]));else{const i=[];i.push(e[0],e[0]);for(let a=1;a<e.length;a++)i.push(e[a]),a===e.length-1&&i.push(e[a]);const s=[],o=1-t;r.push(c5(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],r.push(s[1],s[2],s[3])}}return r}function JCe(e,t){return Math.sqrt(P3(e,t))}function P3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function eAe(e,t,n){const r=P3(t,n);if(r===0)return P3(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),P3(e,P0(t,n,i))}function P0(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function tAe(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function OA(e,t,n,r){const i=r||[];if(tAe(e,t)<n){const s=e[t+0];i.length?JCe(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=P0(o,a,.5),d=P0(a,l,.5),u=P0(l,f,.5),h=P0(c,d,.5),g=P0(d,u,.5),y=P0(h,g,.5);OA([o,c,h,y],0,n,i),OA([y,g,u,f],0,n,i)}return i}function jA(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=eAe(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(jA(e,t,f+1,r,s),jA(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function nAe(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;OA(e,o,t,r)}return n&&n>0?jA(r,0,r.length,n):r}function rAe(e,t){return Math.sqrt(D3(e,t))}function D3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function iAe(e,t,n){const r=D3(t,n);if(r===0)return D3(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),D3(e,D0(t,n,i))}function D0(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function sAe(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function BA(e,t,n,r){const i=r||[];if(sAe(e,t)<n){const s=e[t+0];i.length?rAe(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=D0(o,a,.5),d=D0(a,l,.5),u=D0(l,f,.5),h=D0(c,d,.5),g=D0(d,u,.5),y=D0(h,g,.5);BA([o,c,h,y],0,n,i),BA([y,g,u,f],0,n,i)}return i}function oAe(e,t){return FA(e,0,e.length,t)}function FA(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=iAe(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(FA(e,t,f+1,r,s),FA(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function aAe(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;BA(e,o,t,r)}return r}function lAe(e,t,n){const r=XI(e),i=fJ(cJ(r)),s=[];let o=[],a=[0,0],l=[];const f=()=>{l.length>=4&&o.push(...aAe(l,t)),l=[]},c=()=>{f(),o.length&&(s.push(o),o=[])};for(const{key:u,data:h}of i)switch(u){case"M":c(),a=[h[0],h[1]],o.push(a);break;case"L":f(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const g=o.length?o[o.length-1]:a;l.push([g[0],g[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":f(),o.push([a[0],a[1]]);break}if(c(),!n)return s;const d=[];for(const u of s){const h=oAe(u,n);h.length&&d.push(h)}return d}const vo="none";class gb{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return jCe()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,s){const o=this._o(s);return this._d("line",[uJ(t,n,r,i,o)],o)}rectangle(t,n,r,i,s){const o=this._o(s),a=[],l=VCe(t,n,r,i,o);if(o.fill){const f=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];o.fillStyle==="solid"?a.push(Vk([f],o)):a.push(Rp([f],o))}return o.stroke!==vo&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,r,i,s){const o=this._o(s),a=[],l=hJ(r,i,o),f=LA(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const c=LA(t,n,o,l).opset;c.type="fillPath",a.push(c)}else a.push(Rp([f.estimatedPoints],o));return o.stroke!==vo&&a.push(f.opset),this._d("ellipse",a,o)}circle(t,n,r,i){const s=this.ellipse(t,n,r,r,i);return s.shape="circle",s}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[_3(t,!1,r)],r)}arc(t,n,r,i,s,o,a=!1,l){const f=this._o(l),c=[],d=mz(t,n,r,i,s,o,a,!0,f);if(a&&f.fill)if(f.fillStyle==="solid"){const u=Object.assign({},f);u.disableMultiStroke=!0;const h=mz(t,n,r,i,s,o,!0,!1,u);h.type="fillPath",c.push(h)}else c.push(GCe(t,n,r,i,s,o,f));return f.stroke!==vo&&c.push(d),this._d("arc",c,f)}curve(t,n){const r=this._o(n),i=[],s=pz(t,r);if(r.fill&&r.fill!==vo&&t.length>=3)if(r.fillStyle==="solid"){const o=pz(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=QCe(t),a=nAe(o,10,(1+r.roughness)/2);i.push(Rp([a],r))}return r.stroke!==vo&&i.push(s),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],s=_3(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(Vk([t],r)):i.push(Rp([t],r))),r.stroke!==vo&&i.push(s),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==vo,o=r.stroke!==vo,a=!!(r.simplification&&r.simplification<1),l=a?4-4*(r.simplification||1):(1+r.roughness)/2,f=lAe(t,1,l),c=gz(t,r);if(s)if(r.fillStyle==="solid")if(f.length===1){const d=gz(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else i.push(Vk(f,r));else i.push(Rp(f,r));return o&&(a?f.forEach(d=>{i.push(_3(d,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const s=typeof n=="number"&&n>=0?i.data.map(o=>+o.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:vo};break;case"fillPath":o={d:this.opsToPath(s),stroke:vo,strokeWidth:0,fill:r.fill||vo};break;case"fillSketch":o=this.fillSketch(s,r);break}o&&i.push(o)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||vo,strokeWidth:r,fill:vo}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class cAe{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new gb(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof r=="number"&&r>=0?s.data.map(a=>+a.toFixed(r)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,s){const o=this.gen.line(t,n,r,i,s);return this.draw(o),o}rectangle(t,n,r,i,s){const o=this.gen.rectangle(t,n,r,i,s);return this.draw(o),o}ellipse(t,n,r,i,s){const o=this.gen.ellipse(t,n,r,i,s);return this.draw(o),o}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s),s}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,s,o,a=!1,l){const f=this.gen.arc(t,n,r,i,s,o,a,l);return this.draw(f),f}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const LU="http://www.w3.org/2000/svg";class fAe{constructor(t,n){this.svg=t,this.gen=new gb(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(LU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=i.createElementNS(LU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{l=i.createElementNS(LU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(i,a,r);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=t.createElementNS(LU,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,s){const o=this.gen.line(t,n,r,i,s);return this.draw(o)}rectangle(t,n,r,i,s){const o=this.gen.rectangle(t,n,r,i,s);return this.draw(o)}ellipse(t,n,r,i,s){const o=this.gen.ellipse(t,n,r,i,s);return this.draw(o)}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,s,o,a=!1,l){const f=this.gen.arc(t,n,r,i,s,o,a,l);return this.draw(f)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const i0={canvas(e,t){return new cAe(e,t)},svg(e,t){return new fAe(e,t)},generator(e){return new gb(e)},newSeed(){return gb.newSeed()}};function wz(e,t,n,r=i=>i){return e*r(.5-t*(.5-n))}function dAe(e){return[-e[0],-e[1]]}function Ya(e,t){return[e[0]+t[0],e[1]+t[1]]}function sa(e,t){return[e[0]-t[0],e[1]-t[1]]}function Wa(e,t){return[e[0]*t,e[1]*t]}function uAe(e,t){return[e[0]/t,e[1]/t]}function f5(e){return[e[1],-e[0]]}function vz(e,t){return e[0]*t[0]+e[1]*t[1]}function hAe(e,t){return e[0]===t[0]&&e[1]===t[1]}function pAe(e){return Math.hypot(e[0],e[1])}function mAe(e){return e[0]*e[0]+e[1]*e[1]}function Ez(e,t){return mAe(sa(e,t))}function mJ(e){return uAe(e,pAe(e))}function gAe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function d5(e,t,n){let r=Math.sin(n),i=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*i-o*r,l=s*r+o*i;return[a+t[0],l+t[1]]}function zA(e,t,n){return Ya(e,Wa(sa(t,e),n))}function kz(e,t,n){return Ya(e,Wa(t,n))}var{min:mp,PI:bAe}=Math,Sz=.275,u5=bAe+1e-4;function yAe(e,t={}){let{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:s=!0,easing:o=z=>z,start:a={},end:l={},last:f=!1}=t,{cap:c=!0,easing:d=z=>z*(2-z)}=a,{cap:u=!0,easing:h=z=>--z*z*z+1}=l;if(e.length===0||n<=0)return[];let g=e[e.length-1].runningLength,y=a.taper===!1?0:a.taper===!0?Math.max(n,g):a.taper,U=l.taper===!1?0:l.taper===!0?Math.max(n,g):l.taper,x=Math.pow(n*r,2),v=[],E=[],k=e.slice(0,10).reduce((z,G)=>{let W=G.pressure;if(s){let F=mp(1,G.distance/n),K=mp(1,1-F);W=mp(1,z+(K-z)*(F*Sz))}return(z+W)/2},e[0].pressure),M=wz(n,i,e[e.length-1].pressure,o),S,A=e[0].vector,I=e[0].point,R=I,D=I,_=R,P=!1;for(let z=0;z<e.length;z++){let{pressure:G}=e[z],{point:W,vector:F,distance:K,runningLength:q}=e[z];if(z<e.length-1&&g-q<3)continue;if(i){if(s){let Ee=mp(1,K/n),_e=mp(1,1-Ee);G=mp(1,k+(_e-k)*(Ee*Sz))}M=wz(n,i,G,o)}else M=n/2;S===void 0&&(S=M);let Y=q<y?d(q/y):1,ae=g-q<U?h((g-q)/U):1;M=Math.max(.01,M*Math.min(Y,ae));let ge=(z<e.length-1?e[z+1]:e[z]).vector,he=z<e.length-1?vz(F,ge):1,ce=vz(F,A)<0&&!P,ie=he!==null&&he<0;if(ce||ie){let Ee=Wa(f5(A),M);for(let _e=1/13,Fe=0;Fe<=1;Fe+=_e)D=d5(sa(W,Ee),W,u5*Fe),v.push(D),_=d5(Ya(W,Ee),W,u5*-Fe),E.push(_);I=D,R=_,ie&&(P=!0);continue}if(P=!1,z===e.length-1){let Ee=Wa(f5(F),M);v.push(sa(W,Ee)),E.push(Ya(W,Ee));continue}let we=Wa(f5(zA(ge,F,he)),M);D=sa(W,we),(z<=1||Ez(I,D)>x)&&(v.push(D),I=D),_=Ya(W,we),(z<=1||Ez(R,_)>x)&&(E.push(_),R=_),k=G,A=F}let $=e[0].point.slice(0,2),L=e.length>1?e[e.length-1].point.slice(0,2):Ya(e[0].point,[1,1]),B=[],V=[];if(e.length===1){if(!(y||U)||f){let z=kz($,mJ(f5(sa($,L))),-(S||M)),G=[];for(let W=1/13,F=W;F<=1;F+=W)G.push(d5(z,$,u5*2*F));return G}}else{if(!(y||U&&e.length===1))if(c)for(let G=1/13,W=G;W<=1;W+=G){let F=d5(E[0],$,u5*W);B.push(F)}else{let G=sa(v[0],E[0]),W=Wa(G,.5),F=Wa(G,.51);B.push(sa($,W),sa($,F),Ya($,F),Ya($,W))}let z=f5(dAe(e[e.length-1].vector));if(U||y&&e.length===1)V.push(L);else if(u){let G=kz(L,z,M);for(let W=1/29,F=W;F<1;F+=W)V.push(d5(G,L,u5*3*F))}else V.push(Ya(L,Wa(z,M)),Ya(L,Wa(z,M*.99)),sa(L,Wa(z,M*.99)),sa(L,Wa(z,M)))}return v.concat(V,E.reverse(),B)}function UAe(e,t={}){var n;let{streamline:r=.5,size:i=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-r)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:g,pressure:y=.5})=>[h,g,y]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let g=1;g<5;g++)a.push(zA(a[0],h,g/4))}a.length===1&&(a=[...a,[...Ya(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],f=!1,c=0,d=l[0],u=a.length-1;for(let h=1;h<a.length;h++){let g=s&&h===u?a[h].slice(0,2):zA(d.point,a[h],o);if(hAe(d.point,g))continue;let y=gAe(g,d.point);if(c+=y,h<u&&!f){if(c<i)continue;f=!0}d={point:g,pressure:a[h][2]>=0?a[h][2]:.5,vector:mJ(sa(d.point,g)),distance:y,runningLength:c},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function xAe(e,t={}){return yAe(UAe(e,t),t)}function gJ(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=gJ(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Ye(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=gJ(t))&&(r&&(r+=" "),r+=n);return r}function wAe(e,t){return Math.sqrt(L3(e,t))}function L3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function vAe(e,t,n){const r=L3(t,n);if(r===0)return L3(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),L3(e,L0(t,n,i))}function L0(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function EAe(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function $A(e,t,n,r){const i=r||[];if(EAe(e,t)<n){const s=e[t+0];i.length?wAe(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=L0(o,a,.5),d=L0(a,l,.5),u=L0(l,f,.5),h=L0(c,d,.5),g=L0(d,u,.5),y=L0(h,g,.5);$A([o,c,h,y],0,n,i),$A([y,g,u,f],0,n,i)}return i}function kAe(e,t){return A4(e,0,e.length,t)}function A4(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=vAe(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(A4(e,t,f+1,r,s),A4(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function SAe(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;$A(e,o,t,r)}return A4(r,0,r.length,n)}var h5={},Cz;function CAe(){if(Cz)return h5;Cz=1,Object.defineProperty(h5,"__esModule",{value:!0}),h5.sanitizeUrl=void 0;var e=/^([^\w]*)(javascript|data|vbscript)/im,t=/&#(\w+)(^\w|;)?/g,n=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,i=/^.+(:|&colon;)/gim,s=[".","/"];function o(f){return s.indexOf(f[0])>-1}function a(f){return f.replace(t,function(c,d){return String.fromCharCode(d)})}function l(f){var c=a(f||"").replace(n,"").replace(r,"").trim();if(!c)return"about:blank";if(o(c))return c;var d=c.match(i);if(!d)return c;var u=d[0];return e.test(u)?"about:blank":c}return h5.sanitizeUrl=l,h5}var AAe=CAe();const bJ="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function $p(e,t,n){const r=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||r)===t[o];)o++;if(o>0)return t.slice(0,o)+$p(e.slice(o),t.slice(o),n)}const i=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-i>1){const o=Math.round(.5*(i+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[i]+$p(e.slice(1),null,n)}function yJ(e){if(e.length!==UJ(e[0]))throw new Error("invalid integer part of order key: "+e)}function UJ(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function B5(e){const t=UJ(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function Az(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=B5(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function Mz(e,t){yJ(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const o=t.indexOf(r[s])+1;o===t.length?r[s]=t[0]:(r[s]=t[o],i=!1)}if(i){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?r.push(t[0]):r.pop(),s+r.join("")}else return n+r.join("")}function MAe(e,t){yJ(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const o=t.indexOf(r[s])-1;o===-1?r[s]=t.slice(-1):(r[s]=t[o],i=!1)}if(i){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?r.push(t.slice(-1)):r.pop(),s+r.join("")}else return n+r.join("")}function gp(e,t,n=bJ){if(e!=null&&Az(e,n),t!=null&&Az(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=B5(t),f=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+$p("",f,n);if(l<t)return l;const c=MAe(l,n);if(c==null)throw new Error("cannot decrement any more");return c}if(t==null){const l=B5(e),f=e.slice(l.length),c=Mz(l,n);return c??l+$p(f,null,n)}const r=B5(e),i=e.slice(r.length),s=B5(t),o=t.slice(s.length);if(r===s)return r+$p(i,o,n);const a=Mz(r,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:r+$p(i,null,n)}function HA(e,t,n,r=bJ){if(n===0)return[];if(n===1)return[gp(e,t,r)];if(t==null){let o=gp(e,t,r);const a=[o];for(let l=0;l<n-1;l++)o=gp(o,t,r),a.push(o);return a}if(e==null){let o=gp(e,t,r);const a=[o];for(let l=0;l<n-1;l++)o=gp(e,o,r),a.push(o);return a.reverse(),a}const i=Math.floor(n/2),s=gp(e,t,r);return[...HA(e,s,i,r),s,...HA(s,t,n-i-1,r)]}const T1=(()=>{if(typeof self>"u")return!1;if(!("top"in self&&self!==top)){if("showOpenFilePicker"in self)return"showOpenFilePicker"}return!1})(),TAe=qe(T1?()=>import("./file-open-002ab408-CQ9a1yTP.js"):()=>import("./file-open-7c801643-CD3BRLr1.js"),[]);async function IAe(...e){return(await TAe).default(...e)}qe(T1?()=>import("./directory-open-4ed118d0-BNgAhb94.js"):()=>import("./directory-open-01563666-DWU9wJ6I.js"),[]);const NAe=qe(T1?()=>import("./file-save-745eba88-D6MGJDcB.js"):()=>import("./file-save-3189631c-x92wctJd.js"),[]);async function RAe(...e){return(await NAe).default(...e)}var _Ae=(e,t)=>t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{}),PAe=5,_p=5,DAe=4,F5=4,z5=1,za=[0,2,4,6,8],$a=(e,t)=>t.map(n=>ki[e][n]),Lt={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:$a("gray",za),red:$a("red",za),pink:$a("pink",za),grape:$a("grape",za),violet:$a("violet",za),blue:$a("blue",za),cyan:$a("cyan",za),teal:$a("teal",za),green:$a("green",za),yellow:$a("yellow",za),orange:$a("orange",za),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},xJ=_Ae(Lt,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),wJ=[Lt.black,Lt.red[F5],Lt.green[F5],Lt.blue[F5],Lt.yellow[F5]],vJ=[Lt.transparent,Lt.red[z5],Lt.green[z5],Lt.blue[z5],Lt.yellow[z5]],EJ=[Lt.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],LAe={transparent:Lt.transparent,white:Lt.white,gray:Lt.gray,black:Lt.black,bronze:Lt.bronze,...xJ},OAe={transparent:Lt.transparent,white:Lt.white,gray:Lt.gray,black:Lt.black,bronze:Lt.bronze,...xJ},jAe=e=>[Lt.cyan[e],Lt.blue[e],Lt.violet[e],Lt.grape[e],Lt.pink[e],Lt.green[e],Lt.teal[e],Lt.yellow[e],Lt.orange[e],Lt.red[e]],BAe=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,Cc=/Mac|iPod|iPhone|iPad/.test(navigator.platform),kJ=/^Win/.test(navigator.platform),FAe=/\b(android)\b/i.test(navigator.userAgent),bb="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,zAe=navigator.userAgent.indexOf("Chrome")!==-1,$Ae=!zAe&&navigator.userAgent.indexOf("Safari")!==-1,SJ=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,HAe=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},VA=typeof window<"u"&&"ResizeObserver"in window,VAe="Excalidraw",WAe=36,O0=10,O3=8,GAe=5,Tz=1,XAe=30,Wu=Math.PI/12,KAe="red",mn={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},Vd={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},bp={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"},OU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},oo={TEST:"test",DEVELOPMENT:"development"},Ag={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper"},Hp="Xiaolai",yb="Segoe UI Emoji",rr={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},Vp={[Hp]:100,[yb]:1e3},CJ=e=>{switch(e){case rr.Excalifont:return[Hp,yb];default:return[yb]}},Ft={LIGHT:"light",DARK:"dark"},ir={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},KI=1,id=20,s0=rr.Excalifont,wy="left",M4="top",f1=2,T4=2*f1,YAe=1e-5,ZAe=2*T4-YAe,jU="#ffffff",qAe="#1e1e1e",QAe="#a2f1a6",I4=20,AJ=5,Mg={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},ft={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...Mg},JAe=[ft.text,ft.html,...Object.values(Mg)],Wk={png:"png",svg:"svg",clipboard:"clipboard"},ka={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},YI=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,eMe=500,tMe=300,nMe=500,rMe=100,vw=.1,ZI=.1,qI=30,iMe=300,QI="invert(93%) hue-rotate(180deg)",Iz={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},sMe=730,oMe=1e3,aMe=500,lMe=1229,p5=2,JI=[1,2,3],e6=10,cMe=1440,Nz=4*1024*1024,en="http://www.w3.org/2000/svg",Ew={excalidraw:2,excalidrawLibrary:2},Zr=5,fMe=.7,dMe=11,Po={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},Ub={LEFT:"left",CENTER:"center",RIGHT:"right"},uMe=20,Gk=.25,hMe=32,qr={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},MJ={architect:0,artist:1,cartoonist:2},Xk={thin:1,bold:2,extraBold:4},hr={strokeColor:Lt.black,backgroundColor:Lt.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:MJ.artist,opacity:100,locked:!1},N4="library",hm="search",bl={name:"default",defaultTab:N4},TJ=new Set(["iframe","embeddable","image"]),oi={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},g2={OAI_API_KEY:"excalidraw-oai-api-key",MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},IJ="Untitled",Wp={generalStats:1,elementProperties:2},ua=1,Ui={sharp:"sharp",round:"round",elbow:"elbow"},NJ=.3,R4="element",pMe=Symbol.for("__test__originalId__"),mMe=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(mMe||{}),gMe=JI.includes(devicePixelRatio)?devicePixelRatio:1,Ac=()=>({showWelcomeScreen:!1,theme:Ft.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:hr.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:hr.fillStyle,currentItemFontFamily:s0,currentItemFontSize:id,currentItemOpacity:hr.opacity,currentItemRoughness:hr.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:hr.strokeColor,currentItemRoundness:"round",currentItemArrowType:Ui.round,currentItemStrokeStyle:hr.strokeStyle,currentItemStrokeWidth:hr.strokeWidth,currentItemTextAlign:wy,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:hr.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:gMe,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:I4,gridStep:AJ,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:Wp.generalStats|Wp.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:Lt.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:[]}),bMe=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}),yMe=(e,t)=>{var r;let n={};for(let i of Object.keys(e))if((r=bMe[i])!=null&&r[t]){let s=e[i];n[i]=s}return n},RJ=e=>yMe(e,"export"),Yl=({activeTool:e})=>e.type==="eraser",Tg=({activeTool:e})=>e.type==="hand",Ot=(e,t,n)=>Math.min(Math.max(e,t),n),Uc=(e,t,n="round")=>{let r=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*r)/r},UMe=(e,t,n="round")=>{let r=1/t;return Math[n](e*r)/r},BU=(e,t)=>(e+t)/2,b2=e=>typeof e=="number"&&Number.isFinite(e),Rz=(e,t,n=1e-4)=>Math.abs(e-t)<n,_4=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function Bh(e){return e*Math.PI/180}function vy(e){return e*180/Math.PI}function xMe(e){return Math.abs(Math.sin(2*e))<1e-4}function Li(e,t,n=0,r=0){return[e-n,t-r]}function tt(e,t=[0,0]){return Li(e[0]-t[0],e[1]-t[1])}function si(e,t){return e[0]*t[1]-t[0]*e[1]}function _z(e,t){return e[0]*t[0]+e[1]*t[1]}function Au(e,t){return[e[0]+t[0],e[1]+t[1]]}function P4(e,t){return[e[0]-t[0],e[1]-t[1]]}function br(e,t){return Li(e[0]*t,e[1]*t)}function wMe(e){return e[0]*e[0]+e[1]*e[1]}function vMe(e){return Math.sqrt(wMe(e))}var as=e=>{let t=vMe(e);return t===0?Li(0,0):Li(e[0]/t,e[1]/t)};function O(e,t){return[e,t]}function eN(e){return e.length===2?O(e[0],e[1]):void 0}function jt(e,t=O(0,0)){return O(t[0]+e[0],t[1]+e[1])}function EMe(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function El(e,t){let n=Math.abs;return n(e[0]-t[0])<1e-4&&n(e[1]-t[1])<1e-4}function ue([e,t],[n,r],i){return O((e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r)}function D4(e,t=[0,0]){return O(e[0]+t[0],e[1]+t[1])}function Ey(e,t){return O((e[0]+t[0])/2,(e[1]+t[1])/2)}function cn(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function xb(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}var sf=(e,t,n)=>D4(t,br(tt(e,t),n)),_J=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function WA(e,t){return[e,t]}function kMe(e,t){let n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],i=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-i*r;if(o!==0){let a=n*e[0][0]+r*e[0][1],l=i*t[0][0]+s*t[0][1];return O((a*s-l*r)/o,(n*l-i*a)/o)}return null}function st(e,t){return[e,t]}var d1=(e,t,n=1e-4)=>{let r=tN(e,t);return r===0?!0:r<n},tN=(e,t)=>{let[n,r]=e,[[i,s],[o,a]]=t,l=n-i,f=r-s,c=o-i,d=a-s,u=l*c+f*d,h=c*c+d*d,g=-1;h!==0&&(g=u/h);let y,U;g<0?(y=i,U=s):g>1?(y=o,U=a):(y=i+g*c,U=s+g*d);let x=n-y,v=r-U;return Math.sqrt(x*x+v*v)};function wb(e,t){let n=kMe(WA(e[0],e[1]),WA(t[0],t[1]));return!n||!d1(n,t)||!d1(n,e)?null:n}function GA(e,t){return[e,t]}function SMe(e,t){return[st(e[0],O(e[1][0],e[0][1])),st(O(e[1][0],e[0][1]),e[1]),st(e[1],O(e[0][0],e[1][1])),st(O(e[0][0],e[1][1]),e[0])].map(n=>wb(t,n)).filter(n=>!!n)}function Rf(e,t,n,r){return[e,t,n,r]}function Pz(e,t,n,r=1e-6){return[(e(t+r,n)-e(t-r,n))/(2*r),(e(t,n+r)-e(t,n-r))/(2*r)]}function CMe(e,t,n,r=.001,i=10){let s=1/0,o=0;for(;s>=r;){if(o>=i)return null;let a=e(t,n),l=[Pz((y,U)=>e(y,U)[0],t,n),Pz((y,U)=>e(y,U)[1],t,n)],f=[[-a[0]],[-a[1]]],c=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(c===0)return null;let d=[[l[1][1]/c,-l[0][1]/c],[-l[1][0]/c,l[0][0]/c]],u=[[d[0][0]*f[0][0]+d[0][1]*f[1][0]],[d[1][0]*f[0][0]+d[1][1]*f[1][0]]];t=t+u[0][0],n=n+u[1][0];let[h,g]=e(t,n);s=Math.max(Math.abs(h),Math.abs(g)),o+=1}return[t,n]}var y2=(e,t)=>O((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function PJ(e,t){let n=MMe(e);if(SMe(GA(O(n[0],n[1]),O(n[2],n[3])),t).length===0)return[];let r=a=>O(t[0][0]+a*(t[1][0]-t[0][0]),t[0][1]+a*(t[1][1]-t[0][1])),i=[[.5,0],[.2,0],[.8,0]],s=([a,l])=>{let f=CMe((u,h)=>{let g=y2(e,u),y=r(h);return[g[0]-y[0],g[1]-y[1]]},a,l);if(!f)return null;let[c,d]=f;return c<0||c>1||d<0||d>1?null:y2(e,c)},o=s(i[0]);return o?[o]:(o=s(i[1]),o?[o]:(o=s(i[2]),o?[o]:[]))}function AMe(e,t,n=.001){let r=(l,f,c,d=n)=>{let u=l,h=f,g;for(;h-u>d;)g=(h+u)/2,c(g-d)<c(g+d)?h=g:u=g;return g},i=0;for(let l=1/0,f=0;f<30;f++){let c=cn(t,y2(e,f/30));c<l&&(l=c,i=f)}let s=Math.max((i-1)/30,0),o=Math.min((i+1)/30,1),a=r(s,o,l=>cn(t,y2(e,l)));return a?y2(e,a):null}function DJ(e,t){let n=AMe(e,t);return n?cn(t,n):0}function MMe(e){let[t,n,r,i]=e,s=[t[0],n[0],r[0],i[0]],o=[t[1],n[1],r[1],i[1]];return[Math.min(...s),Math.min(...o),Math.max(...s),Math.max(...o)]}function Dz(...e){return LJ(e)}function L4(e){return LJ(e)}var Lz=(e,t)=>{let n=e[0],r=e[1],i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){let a=t[s][0],l=t[s][1],f=t[o][0],c=t[o][1];(l>r&&c<=r||l<=r&&c>r)&&n<(f-a)*(r-l)/(c-l)+a&&(i=!i)}return i},TMe=(e,t,n=1e-4)=>{let r=!1;for(let i=0,s=t.length-1;i<s;i++)if(d1(e,st(t[i],t[i+1]),n)){r=!0;break}return r};function LJ(e){return IMe(e)?e:[...e,e[0]]}function IMe(e){return El(e[0],e[e.length-1])}function ns(e,t){return Aa([e,t])}var O4=([e,t],[n,r])=>e<=n?t>=n:e>=n?r>=e:!1,j4=([e,t],[n,r])=>{let i=Math.max(e,n),s=Math.min(t,r);return i<=s?Aa([i,s]):null},FU=(e,[t,n])=>e>=t&&e<=n;function yp([e,t,n],r){let i=(c,d,u)=>(c[0]-u[0])*(d[1]-u[1])-(d[0]-u[0])*(c[1]-u[1]),s=i(r,e,t),o=i(r,t,n),a=i(r,n,e),l=s<0||o<0||a<0,f=s>0||o>0||a>0;return!(l&&f)}var Oz=()=>{let e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),r=`${e.getDate()}`.padStart(2,"0"),i=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${r}-${i}${s}`},U2=e=>e.charAt(0).toUpperCase()+e.slice(1),NMe=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),XA=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,RMe=e=>XA(e)||e instanceof Element&&!!e.closest("label, button"),$0=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),Ig=({fontFamily:e})=>{for(let[t,n]of Object.entries(rr))if(n===e)return`${t}${CJ(n).map(r=>`, ${r}`).join("")}`;return yb},wn=({fontSize:e,fontFamily:t})=>`${e}px ${Ig({fontFamily:t})}`,Ng=(e,t)=>{let n=0,r=null,i=(...s)=>{r=s,clearTimeout(n),n=window.setTimeout(()=>{r=null,e(...s)},t)};return i.flush=()=>{if(clearTimeout(n),r){let s=r;r=null,e(...s)}},i.cancel=()=>{r=null,clearTimeout(n)},i},kw=(e,t)=>{let n=null,r=null,i=null,s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),r=null,i&&(r=i,i=null,s(r))})},o=(...a)=>{if(It.MODE==="test"){e(...a);return}r=a,n===null?s(r):t!=null&&t.trailing&&(i=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),r&&(e(...i||r),r=i=null)},o.cancel=()=>{r=i=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},Fh=e=>1-Math.pow(1-e,4),jz=(e,t,n)=>(t-e)*Fh(n)+e,_Me=({fromValues:e,toValues:t,onStep:n,duration:r=250,interpolateValue:i,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,f=0,c;function d(u){if(l)return;c===void 0&&(c=u,s==null||s());let h=Math.min(u-c,r),g=Fh(h/r),y={};if(Object.keys(e).forEach(U=>{let x=U,v=(t[x]-e[x])*g+e[x];y[x]=v}),n(y),h<r){let U=h/r,x={};Object.keys(e).forEach(v=>{let E=v,k=e[E],M=t[E],S;S=i?i(k,M,U,E):jz(k,M,U),S==null&&(S=jz(k,M,U)),x[E]=S}),n(x),f=window.requestAnimationFrame(d)}else n(t),o==null||o()}return f=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(f)}},PMe=(e,t)=>{if(!e.length||t<1)return[];let n=0,r=0,i=Array(Math.ceil(e.length/t));for(;n<e.length;)i[r++]=e.slice(n,n+=t);return i},rs=(e,t)=>Math.abs(e-t),Dr=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},Ue=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),Cc?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),_n=({clientX:e,clientY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:o})=>{let a=(e-r)/n.value-s,l=(t-i)/n.value-o;return{x:a,y:l}},dl=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:o})=>{let a=(e+s)*n.value+r,l=(t+o)*n.value+i;return{x:a,y:l}},zU=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),DMe="A-Za-z--------",LMe="---",OMe=new RegExp(`^[^${DMe}]*[${LMe}]`),OJ=e=>OMe.test(e),ul=e=>{let[t,n]=e;return{x:t,y:n}},jJ=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},BJ=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},H0=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},hl=e=>{let t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===Lt.transparent},Kk=e=>e.fillStyle!=="solid"||hl(e.backgroundColor),jMe=()=>{let e,t,n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},BMe=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;let{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},FMe=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},zMe=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),t6=()=>Vf()?1:Date.now(),mt=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),$Me=e=>e.reduce((t,n,r)=>(t.set(n.id,[n,r]),t),new Map),ef=(e,t)=>e.reduce((n,r)=>(n[t?t(r):String(r)]=r,n),{}),HMe=e=>e.reduce((t,n,r)=>{let i={...n,prev:null,next:null};if(r!==0){let s=t[r-1];if(i.prev=s,s.next=i,r===e.length-1){let o=t[0];i.next=o,o.prev=i}}return t.push(i),t},[]),Vf=()=>It.MODE==="test",FJ=()=>It.MODE==="development",VMe=()=>typeof process<"u"&&!0,zJ=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),j3=(e,t)=>{let n=!1;for(let r in t){let i=t[r];if(typeof i<"u"){if(e[r]===i&&(typeof i!="object"||i===null))continue;n=!0}}return n?{...e,...t}:e},WMe=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},ky=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,KA=e=>{let t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},Bz=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,$i=(e,t,n,r=!1)=>{let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return r&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(let o of n)if(!(e[o]===t[o]||Bz(e[o],t[o])))return r&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return i.every(o=>{let a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||Bz(e[o],t[o]);return!l&&r&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},Sw=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},u1=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function fs(e,t){if(!e)throw new Error(t)}var GMe=e=>{let t,n,r=function(i){let s=Object.entries(i);if(t){let a=!0;for(let[l,f]of s)if(t.get(l)!==f){a=!1;break}if(a)return n}let o=e(i);return t=new Map(s),n=o,o};return r.clear=()=>{t=void 0,n=void 0},r},$J=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),jf=e=>JSON.parse(JSON.stringify(e)),m5=(e,t)=>$i(e,t)?e:t;function tr(e,t,n,r){var i;return e?((i=e==null?void 0:e.addEventListener)==null||i.call(e,t,n,r),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,r)}):()=>{}}function XMe(e,t=!0){let n=e.length;if(n<4)return"";let r=e[0],i=e[1],s=e[2],o=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${BU(i[0],s[0]).toFixed(2)},${BU(i[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)r=e[a],i=e[a+1],o+=`${BU(r[0],i[0]).toFixed(2)},${BU(r[1],i[1]).toFixed(2)} `;return t&&(o+="Z"),o}var HJ=e=>e.replace(/\r?\n|\r/g,`
`),Aa=e=>e,Rg=async(e,...t)=>new Promise(n=>{n(e(...t))}),KMe=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Fz=class{constructor(e,t){Q(this,"pool"),Q(this,"entries",{}),this.pool=new ACe(e,t)}all(){let e=t=>{if(t.data.result){let[n,r]=t.data.result;this.entries[n]=r}};return this.pool.addEventListener("fulfilled",e),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",e)}),Object.values(this.entries)))}},B3=e=>e.replace(/"/g,"&quot;"),zz=e=>Array.isArray(e)?e:[e],ga=e=>!!e&&e.type==="image"&&!!e.fileId,ln=e=>!!e&&e.type==="image",Qs=e=>!!e&&e.type==="embeddable",qd=e=>!!e&&e.type==="iframe",ya=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),Ve=e=>e!=null&&e.type==="text",VJ=e=>e!=null&&e.type==="frame",F3=e=>e!=null&&e.type==="magicframe",ht=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),Ma=e=>e!=null&&YMe(e.type),YMe=e=>e==="freedraw",wt=e=>e!=null&&nN(e.type),Rt=e=>e!=null&&e.type==="arrow",Ge=e=>Rt(e)&&e.elbowed,nN=e=>e==="arrow"||e==="line",hc=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&WJ(e.type),WJ=e=>e==="arrow",kl=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),ZMe=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),zh=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||Rt(e)),GJ=e=>{let t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return u1(t,null),!1}},Cw=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",Ta=e=>{var t;return zh(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Hn=e=>e!==null&&"containerId"in e&&e.containerId!==null&&Ve(e),n6=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",XJ=e=>e==="line"||e==="arrow"||e==="diamond",qMe=(e,t)=>!!((e===qr.ADAPTIVE_RADIUS||e===qr.LEGACY)&&n6(t.type)||e===qr.PROPORTIONAL_RADIUS&&XJ(t.type)),QMe=e=>XJ(e.type)?{type:qr.PROPORTIONAL_RADIUS}:n6(e.type)?{type:qr.ADAPTIVE_RADIUS}:null,B4=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,ds=(e,t,n)=>{let r=e.split(`
`).map(o=>o||" ").join(`
`),i=parseFloat(t),s=nTe(r,i,n);return{width:sN(r,t),height:s}},KJ="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),YJ=(e,t)=>{let n=rTe(e);return n===0?ds(KJ.split("").join(`
`),e,t).width+Zr*2:n+Zr*2},rN=(e,t)=>ds("",e,t).width+Zr*2,JMe=()=>sN(KJ,wn({fontSize:id,fontFamily:s0}))>0,_g=e=>HJ(e).replace(/\t/g,"        "),iN=e=>_g(e).split(`
`),eTe=e=>{let t=iN(e.text).length;return e.height/t/e.fontSize},Sy=(e,t)=>e*t,ZJ=(e,t)=>Sy(e,t)+Zr*2,Yk,tTe=class{constructor(){Q(this,"canvas"),this.canvas=document.createElement("canvas")}getLineWidth(e,t){let n=this.canvas.getContext("2d");n.font=t;let r=n.measureText(e).width;return Vf()?r*10:r}},h1=(e,t)=>(Yk||(Yk=new tTe),Yk.getLineWidth(e,t)),sN=(e,t)=>{let n=iN(e),r=0;return n.forEach(i=>{r=Math.max(r,h1(i,t))}),r},nTe=(e,t,n)=>{let r=iN(e).length;return Sy(t,n)*r},Cy=(()=>{let e={};return{calculate:(t,n)=>{let r=t.charCodeAt(0);if(e[n]||(e[n]=[]),!e[n][r]){let i=h1(t,n);e[n][r]=i}return e[n][r]},getCache:t=>e[t],clearCache:t=>{e[t]=[]}}})(),rTe=e=>{let t=Cy.getCache(e);if(!t)return 0;let n=t.filter(r=>r!==void 0);return Math.max(...n)},Zk,$U,qk,iTe=e=>(Zk||(Zk=hn.class(...Object.values(lf))),Zk.test(e)),sTe=()=>{if(!$U)try{$U=aTe()}catch{$U=oTe()}return $U},oN=()=>(qk||(qk=lTe()),qk),ta={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?\//u},lf={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}","u"),OPENING://u,CLOSING://u,CURRENCY://u},A0={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},oTe=()=>hn.or(oN(),Ar.On(ta.HYPHEN,ta.WHITESPACE,lf.CHAR)),aTe=()=>hn.or(oN(),Ar.Before(ta.WHITESPACE).Build(),Ar.After(ta.WHITESPACE,ta.HYPHEN).Build(),Ar.Before(lf.CHAR,lf.CURRENCY).NotPrecededBy(ta.OPENING,lf.OPENING).Build(),Ar.After(lf.CHAR).NotFollowedBy(ta.HYPHEN,ta.CLOSING,lf.CLOSING).Build(),Ar.BeforeMany(lf.OPENING).NotPrecededBy(ta.OPENING).Build(),Ar.AfterMany(lf.CLOSING).NotFollowedBy(ta.CLOSING).Build(),Ar.AfterMany(ta.CLOSING).FollowedBy(ta.OPENING).Build()),lTe=()=>hn.group(hn.or(A0.FLAG,hn.and(A0.MOST,A0.JOINER,hn.build(`(?:${A0.ZWJ.source}(?:${A0.FLAG.source}|${A0.ANY.source}${A0.JOINER.source}))*`)))),hn={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>hn.build(hn.join(...e)),or:(...e)=>hn.build(e.map(t=>t.source).join("|")),group:(...e)=>hn.build(`(${hn.join(...e)})`),class:(...e)=>hn.build(`[${hn.join(...e)}]`)},Ar={On:(...e)=>{let t=hn.join(...e);return hn.build(`([${t}])`)},Before:(...e)=>{let t=hn.join(...e),n=()=>hn.build(`(?=[${t}])`);return Ar.Chain(n)},After:(...e)=>{let t=hn.join(...e),n=()=>hn.build(`(?<=[${t}])`);return Ar.Chain(n)},BeforeMany:(...e)=>{let t=hn.join(...e),n=()=>hn.build(`(?<![${t}])(?=[${t}])`);return Ar.Chain(n)},AfterMany:(...e)=>{let t=hn.join(...e),n=()=>hn.build(`(?<=[${t}])(?![${t}])`);return Ar.Chain(n)},NotBefore:(...e)=>{let t=hn.join(...e),n=()=>hn.build(`(?![${t}])`);return Ar.Chain(n)},NotAfter:(...e)=>{let t=hn.join(...e),n=()=>hn.build(`(?<![${t}])`);return Ar.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{let n=e(),r=Ar.After(...t).Build(),i=()=>hn.and(r,n);return Ar.Chain(i)},FollowedBy:(...t)=>{let n=e(),r=Ar.Before(...t).Build(),i=()=>hn.and(n,r);return Ar.Chain(i)},NotPrecededBy:(...t)=>{let n=e(),r=Ar.NotAfter(...t).Build(),i=()=>hn.and(r,n);return Ar.Chain(i)},NotFollowedBy:(...t)=>{let n=e(),r=Ar.NotBefore(...t).Build(),i=()=>hn.and(n,r);return Ar.Chain(i)}})},cTe=e=>{let t=sTe();return e.normalize("NFC").split(t).filter(Boolean)},I1=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;let r=[],i=e.split(`
`);for(let s of i){if(h1(s,t)<=n){r.push(s);continue}let o=fTe(s,t,n);r.push(...o)}return r.join(`
`)},fTe=(e,t,n)=>{let r=[],i=cTe(e)[Symbol.iterator](),s="",o=0,a=i.next();for(;!a.done;){let l=a.value,f=s+l,c=hTe(l)?o+Cy.calculate(l,t):h1(f,t);if(/\s/.test(l)||c<=n){s=f,o=c,a=i.next();continue}if(s)r.push(s.trimEnd()),s="",o=0;else{let d=dTe(l,t,n),u=d[d.length-1]??"",h=d.slice(0,-1);r.push(...h),s=u,o=h1(u,t),a=i.next()}}if(s){let l=uTe(s,t,n);r.push(l)}return r},dTe=(e,t,n)=>{if(oN().test(e))return[e];pTe(e);let r=[],i=Array.from(e),s="",o=0;for(let a of i){let l=Cy.calculate(a,t),f=o+l;if(f<=n){s=s+a,o=f;continue}s&&r.push(s),s=a,o=l}return s&&r.push(s),r},uTe=(e,t,n)=>{if(!(h1(e,t)>n))return e;let[,r,i]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],s=h1(r,t);for(let o of Array.from(i)){let a=Cy.calculate(o,t),l=s+a;if(l>n)break;r=r+o,s=l}return r},hTe=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,pTe=e=>{if((It.MODE===oo.TEST||It.DEV)&&/\s/.test(e))throw new Error("Word should not contain any whitespaces!")},Us=class{};Q(Us,"rg",new gb),Q(Us,"cache",new WeakMap),Q(Us,"get",e=>Us.cache.get(e)),Q(Us,"set",(e,t)=>Us.cache.set(e,t)),Q(Us,"delete",e=>Us.cache.delete(e)),Q(Us,"destroy",()=>{Us.cache=new WeakMap}),Q(Us,"generateElementShape",(e,t)=>{let n=t!=null&&t.isExporting?void 0:Us.get(e);if(n!==void 0)return n;rM.delete(e);let r=wLe(e,Us.rg,t||{isExporting:!1,canvasBackgroundColor:Lt.white,embedsValidationStatus:null});return Us.cache.set(e,r),r});var or=Us,ol=e=>"var(--icon-fill-color)",qJ=e=>e===Ft.LIGHT?ki.white:"#1e1e1e",oe=(e,t=512)=>{let{width:n=512,height:r=n,mirror:i,style:s,...o}=typeof t=="number"?{width:t}:t;return m.jsx("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${r}`,className:Ye({"rtl-mirror":i}),style:s,...o,children:typeof e=="string"?m.jsx("path",{fill:"currentColor",d:e}):e})},$e={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Et={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("rect",{x:3,y:8,width:18,height:4,rx:1}),m.jsx("line",{x1:12,y1:8,x2:12,y2:21}),m.jsx("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),m.jsx("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),$e);var aN=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),m.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),m.jsx("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),$e),mTe=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),$e),gTe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"1"}),m.jsx("circle",{cx:"12",cy:"19",r:"1"}),m.jsx("circle",{cx:"12",cy:"5",r:"1"})]}),$e),bTe=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),m.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),m.jsx("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),$e),Aw=oe(m.jsxs("g",{children:[m.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:m.jsx("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),m.jsx("g",{mask:"url(#UnlockedIcon)",children:m.jsx("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),Et),lN=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),m.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),m.jsx("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),Et),yTe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),m.jsx("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),UTe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),m.jsx("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),xTe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),m.jsx("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"});oe(m.jsx("g",{fill:"currentColor",children:m.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"});var wTe=oe(m.jsxs("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),m.jsx("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),vTe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),$e),ETe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),$e),kTe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"})]}),$e),STe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),m.jsx("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),$e),CTe=oe(m.jsx("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),Et),ATe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),m.jsx("path",{d:"M16 7h4"}),m.jsx("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),$e),vb=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),m.jsx("path",{d:"m11.25 5.417 3.333 3.333"})]}),Et),QJ=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),m.jsx("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),m.jsx("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),m.jsx("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),m.jsx("polyline",{points:"5 20 11 4 13 4 20 20"})]}),$e),MTe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M12.5 6.667h.01"}),m.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),m.jsx("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),m.jsx("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),Et),TTe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),m.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]}),$e),$z=oe(m.jsx("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),Et),Hz=oe(m.jsx("path",{d:"M5 10h10",strokeWidth:"1.25"}),Et),ITe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M21 21l-6 -6"}),m.jsx("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),m.jsx("path",{d:"M3 4v4h4"})]}),$e),p1=oe(m.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),Et),NTe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("polyline",{points:"12 16 18 10 12 4"}),m.jsx("polyline",{points:"8 4 2 10 8 16"})]}),Et),YA=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),m.jsx("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),Et),ZA=oe(m.jsx("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),Et),qA=oe(m.jsx("g",{stroke:"currentColor",strokeLinejoin:"round",children:m.jsx("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...Et,strokeWidth:1.5}),JJ=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),m.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),$e),Mw=oe(m.jsx("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),Et),cN=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),$e),RTe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),$e),Vz=oe(m.jsx("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),Et),eee=oe(m.jsx("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),Et),_Te=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),m.jsx("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),Et),PTe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),m.jsx("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),$e),DTe=oe(m.jsx("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),QA=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),m.jsx("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),Et),LTe=oe("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),OTe=oe("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),fN=oe(m.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),Et);oe("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});var jTe=oe("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),Qk=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),m.jsx("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),m.jsx("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),$e),tee=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 8h.01"}),m.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),m.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),m.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),m.jsx("path",{d:"M19 16v6"}),m.jsx("path",{d:"M22 19l-3 3l-3 -3"})]}),$e),BTe=oe("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});oe("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});oe("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});var FTe=oe("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");oe("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");var Wz=oe(m.jsx("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),Et),Gz=oe(m.jsx("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),Et),zTe=oe("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0});oe(m.jsx("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),Et);oe("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");oe("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24});oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),m.jsx("path",{d:"M12 14v-11"}),m.jsx("path",{d:"M9 6l3 -3l3 3"})]}),$e);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),m.jsx("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});oe(m.jsx("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});var nee=m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 10l0 10"}),m.jsx("path",{d:"M12 10l4 4"}),m.jsx("path",{d:"M12 10l-4 4"}),m.jsx("path",{d:"M4 4l16 0"})]}),ree=m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 5l0 14"}),m.jsx("path",{d:"M16 9l-4 -4"}),m.jsx("path",{d:"M8 9l4 -4"})]}),Xz=oe(ree,$e),Kz=oe(ree,{...$e,style:{transform:"rotate(180deg)"}}),Yz=oe(nee,$e),Zz=oe(nee,{...$e,style:{transform:"rotate(180deg)"}}),qz=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),Qz=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),Jz=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),e$=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),$Te=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),HTe=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),t$=oe(m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),m.jsx("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),Et),n$=oe(m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),m.jsx("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),Et),iee=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"9",cy:"7",r:"4"}),m.jsx("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),m.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),m.jsx("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),$e);oe("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");oe("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");var r6=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M15 5 5 15M5 5l10 10"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et);oe("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});oe("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});oe("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});var r$=Ne.memo(({theme:e})=>oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M25 26H111V111H25",fill:ol()}),m.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:ol(),strokeWidth:"2"}),m.jsx("path",{d:"M100 100H160V160H100",fill:ol()}),m.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:ol(),strokeWidth:"2"}),m.jsxs("g",{fill:qJ(e),stroke:ol(),strokeWidth:"6",children:[m.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),i$=Ne.memo(({theme:e})=>oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M25 26H111V111H25",fill:ol()}),m.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:ol(),strokeWidth:"2"}),m.jsx("path",{d:"M100 100H160V160H100",fill:ol()}),m.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:ol(),strokeWidth:"2"}),m.jsxs("g",{fill:qJ(e),stroke:ol(),strokeWidth:"6",children:[m.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),m.jsx("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),VTe=oe(m.jsx("g",{strokeWidth:1.25,children:m.jsx("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),Et),WTe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),m.jsx("g",{mask:"url(#FillHachureIcon)",children:m.jsx("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Et),GTe=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",children:[m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:m.jsx("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("g",{mask:"url(#FillCrossHatchIcon)",children:m.jsx("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),XTe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...Et,fill:"currentColor"}),see=oe(m.jsx(m.Fragment,{children:m.jsx("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Et),KTe=oe(m.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),Et),YTe=oe(m.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),Et);Ne.memo(({theme:e})=>oe(m.jsx("path",{d:"M6 10H34",stroke:ol(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));var ZTe=oe(m.jsxs("g",{strokeWidth:"2",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12h2"}),m.jsx("path",{d:"M17 12h2"}),m.jsx("path",{d:"M11 12h2"})]}),$e),qTe=oe(m.jsxs("g",{strokeWidth:"2",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 12v.01"}),m.jsx("path",{d:"M8 12v.01"}),m.jsx("path",{d:"M12 12v.01"}),m.jsx("path",{d:"M16 12v.01"}),m.jsx("path",{d:"M20 12v.01"})]}),$e),QTe=oe(m.jsx("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),Et),JTe=oe(m.jsx("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),Et),eIe=oe(m.jsx("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),Et),tIe=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),m.jsx("path",{d:"M13.3333 3.33331V3.34331"}),m.jsx("path",{d:"M16.6667 3.33331V3.34331"}),m.jsx("path",{d:"M16.6667 6.66669V6.67669"}),m.jsx("path",{d:"M16.6667 10V10.01"}),m.jsx("path",{d:"M3.33334 13.3333V13.3433"}),m.jsx("path",{d:"M16.6667 13.3333V13.3433"}),m.jsx("path",{d:"M3.33334 16.6667V16.6767"}),m.jsx("path",{d:"M6.66666 16.6667V16.6767"}),m.jsx("path",{d:"M10 16.6667V16.6767"}),m.jsx("path",{d:"M13.3333 16.6667V16.6767"}),m.jsx("path",{d:"M16.6667 16.6667V16.6767"})]}),Et),nIe=oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),m.jsx("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),m.jsx("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),m.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),m.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),m.jsx("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),m.jsx("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),m.jsx("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),m.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),m.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),m.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),m.jsx("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),$e),rIe=oe(m.jsxs("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[m.jsx("path",{d:"M12 12l9 0"}),m.jsx("path",{d:"M3 9l6 6"}),m.jsx("path",{d:"M3 15l6 -6"})]}),$e),iIe=Ne.memo(({flip:e=!1})=>oe(m.jsxs("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[m.jsx("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),m.jsx("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),sIe=Ne.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[m.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),m.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),oIe=Ne.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[m.jsx("path",{d:"M26 10L6 10"}),m.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),aIe=Ne.memo(({flip:e=!1})=>oe(m.jsx("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:m.jsx("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),lIe=Ne.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[m.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),m.jsx("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),cIe=Ne.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[m.jsx("path",{d:"M6,9.5H27"}),m.jsx("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),fIe=Ne.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{d:"M6,9.5H20"}),m.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),dIe=Ne.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{d:"M6,9.5H20"}),m.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),uIe=Ne.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),hIe=Ne.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),pIe=Ne.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),mIe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),gIe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),bIe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),yIe=oe(m.jsx(m.Fragment,{children:m.jsx("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Et),Tw=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 7v-2h13v2"}),m.jsx("path",{d:"M10 5v14"}),m.jsx("path",{d:"M12 19h-4"}),m.jsx("path",{d:"M15 13v-1h6v1"}),m.jsx("path",{d:"M18 12v7"}),m.jsx("path",{d:"M17 19h2"})]}),$e),UIe=oe(m.jsx(m.Fragment,{children:m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 12h10"}),m.jsx("path",{d:"M7 5v14"}),m.jsx("path",{d:"M17 5v14"}),m.jsx("path",{d:"M15 19h4"}),m.jsx("path",{d:"M15 5h4"}),m.jsx("path",{d:"M5 19h4"}),m.jsx("path",{d:"M5 5h4"})]})}),$e),F4=oe(m.jsx(m.Fragment,{children:m.jsx("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),Et),JA=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Et),xIe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),m.jsx("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),$e),wIe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),m.jsx("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),$e),vIe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),$e),EIe=Ne.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),m.jsx("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),$e)),kIe=Ne.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),m.jsx("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),$e)),SIe=Ne.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),m.jsx("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),m.jsx("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),$e)),oee=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M21 19h-18l9 -15"}),m.jsx("path",{d:"M20.615 15.171h.015"}),m.jsx("path",{d:"M19.515 11.771h.015"}),m.jsx("path",{d:"M17.715 8.671h.015"}),m.jsx("path",{d:"M15.415 5.971h.015"})]}),$e),CIe=oe(m.jsx("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});oe(m.jsx("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));var aee=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),m.jsx("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),m.jsx("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),m.jsx("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),$e),s$=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M7 11l5 5l5 -5"}),m.jsx("path",{d:"M12 4l0 12"})]}),$e),dN=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),m.jsx("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),$e),AIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M9.15 14.85l8.85 -10.85"}),m.jsx("path",{d:"M6 4l8.85 10.85"})]}),$e),MIe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),m.jsx("path",{d:"M12 17l0 .01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),$e);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 4v16l13 -8z"})]}),$e);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),$e);var TIe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12l5 5l10 -10"})]}),$e),IIe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),m.jsx("path",{d:"M12 9v4"}),m.jsx("path",{d:"M12 17h.01"})]}),$e),NIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 7l6 6"}),m.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),$e),RIe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 3l-4 7h8z"}),m.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),$e),lee=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 7l16 0"}),m.jsx("path",{d:"M4 17l16 0"}),m.jsx("path",{d:"M7 4l0 16"}),m.jsx("path",{d:"M17 4l0 16"})]}),$e),cee=oe(m.jsx("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),z3=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M4.16602 10H15.8327"}),m.jsx("path",{d:"M12.5 13.3333L15.8333 10"}),m.jsx("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),Et),fee=oe(m.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[m.jsx("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),m.jsx("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),dee=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),m.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),$e);oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),m.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),$e);oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),m.jsx("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),m.jsx("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),m.jsx("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),m.jsx("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),m.jsx("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),$e);var _Ie=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),m.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),m.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),m.jsx("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),$e),uN=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),m.jsx("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),$e),PIe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),m.jsx("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),m.jsx("path",{d:"M3 3l18 18"})]}),$e);oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),m.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),m.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),m.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),m.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),m.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),$e);var DIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),m.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),m.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),m.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),m.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),m.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),$e),m1=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),m.jsx("path",{d:"M21 21l-6 -6"})]}),$e),LIe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),m.jsx("path",{d:"M12 7v5l3 3"}),m.jsx("path",{d:"M19 16l-2 3h4l-2 3"})]}),$e),OIe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),m.jsx("path",{d:"M5 10a7 7 0 0 0 14 0"}),m.jsx("path",{d:"M8 21l8 0"}),m.jsx("path",{d:"M12 17l0 4"})]}),$e),jIe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 3l18 18"}),m.jsx("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),m.jsx("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),m.jsx("path",{d:"M8 21l8 0"}),m.jsx("path",{d:"M12 17l0 4"})]}),$e),uee=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),$e),BIe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M12 20v.01"}),m.jsx("path",{d:"M16 20v.01"}),m.jsx("path",{d:"M8 20v.01"}),m.jsx("path",{d:"M4 20v.01"}),m.jsx("path",{d:"M4 16v.01"}),m.jsx("path",{d:"M4 12v.01"}),m.jsx("path",{d:"M4 8v.01"}),m.jsx("path",{d:"M4 4v.01"}),m.jsx("path",{d:"M8 4v.01"}),m.jsx("path",{d:"M12 4v.01"}),m.jsx("path",{d:"M16 4v.01"}),m.jsx("path",{d:"M20 4v.01"}),m.jsx("path",{d:"M20 8v.01"}),m.jsx("path",{d:"M20 12v.01"}),m.jsx("path",{d:"M20 16v.01"}),m.jsx("path",{d:"M20 20v.01"})]}),$e),FIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 3v18"}),m.jsx("path",{d:"M19 21v-18"}),m.jsx("path",{d:"M5 7h14"}),m.jsx("path",{d:"M5 15h14"}),m.jsx("path",{d:"M8 13v4"}),m.jsx("path",{d:"M11 13v4"}),m.jsx("path",{d:"M16 13v4"}),m.jsx("path",{d:"M14 5v4"}),m.jsx("path",{d:"M11 5v4"}),m.jsx("path",{d:"M8 5v4"}),m.jsx("path",{d:"M3 21h18"})]}),$e),zIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 12l18 0"}),m.jsx("path",{d:"M7 16l10 0l-10 5l0 -5"}),m.jsx("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),$e),$Ie=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 3l0 18"}),m.jsx("path",{d:"M16 7l0 10l5 0l-5 -10"}),m.jsx("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),$e),hee=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),m.jsx("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),m.jsx("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),$e),hN=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),m.jsx("path",{d:"M22 22l-3 -3"}),m.jsx("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),m.jsx("path",{d:"M3 11v-1"}),m.jsx("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),m.jsx("path",{d:"M10 3h1"}),m.jsx("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),$e),HIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),m.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),m.jsx("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),m.jsx("path",{d:"M10 15l2 6l2 -6"}),m.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),$e),VIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),m.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),m.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),m.jsx("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),m.jsx("path",{d:"M11 21v-6l3 6v-6"})]}),$e),WIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),m.jsx("path",{d:"M4 8l5 0"}),m.jsx("path",{d:"M15 8l4 0"})]}),$e),GIe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),m.jsx("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),m.jsx("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),m.jsx("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),m.jsx("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),$e),XIe=oe(m.jsxs("g",{stroke:"currentColor",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...$e,strokeWidth:1.5});oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M21 12h-13l3 -3"}),m.jsx("path",{d:"M11 15l-3 -3"})]}),$e);var KIe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),m.jsx("path",{d:"M10 9l5 3l-5 3z"})]}),$e),YIe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 6h18"}),m.jsx("path",{d:"M3 12h18"}),m.jsx("path",{d:"M3 18h18"}),m.jsx("path",{d:"M6 3v18"}),m.jsx("path",{d:"M12 3v18"}),m.jsx("path",{d:"M18 3v18"})]}),$e),ZIe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),$e),qIe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 18l12 -12"}),m.jsx("path",{d:"M18 10v-4h-4"})]}),$e),QIe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),m.jsx("path",{d:"M18 4l3 3l-3 3"})]}),$e),JIe=oe(m.jsxs("g",{children:[m.jsx("path",{d:"M16,12L20,9L16,6"}),m.jsx("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),$e),pee=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 9l6 6l6 -6"})]}),$e),eNe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15l6 -6l6 6"})]}),$e),tNe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15l6 -6l6 6"})]}),$e),o$=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),m.jsx("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),$e),mee=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M5 7l0 10"}),m.jsx("path",{d:"M7 5l10 0"}),m.jsx("path",{d:"M7 19l10 0"}),m.jsx("path",{d:"M19 7l0 10"})]}),$e),z4={[rr.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:vb},[rr.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35},icon:F4},[rr["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15},icon:UIe},[rr["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25},icon:JA},[rr.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:vb,deprecated:!0},[rr.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},icon:F4,deprecated:!0,local:!0},[rr.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},icon:JA,deprecated:!0},[rr["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[Vp.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[Vp["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},V0={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},pN="local:",nNe=class extends Error{constructor(e="Couldn't export canvas.",t="CANVAS_ERROR"){super(),this.name=t,this.message=e}},Iw=class extends DOMException{constructor(e="Request Aborted"){super(e,"AbortError")}},sh=class extends Error{constructor(e="Image Scene Data Error",t="IMAGE_SCENE_DATA_ERROR"){super(e),Q(this,"code"),this.name="EncodingError",this.code=t}},rNe=class extends Error{constructor(){super(...arguments),Q(this,"code","ELEMENT_HAS_INVALID_INDEX")}},gee=class extends Error{constructor(e="Worker URL is not defined!",t="WORKER_URL_NOT_DEFINED"){super(e),Q(this,"code"),this.name="WorkerUrlNotDefinedError",this.code=t}},bee=class extends Error{constructor(e="Worker has to be in a separate chunk!",t="WORKER_IN_THE_MAIN_CHUNK"){super(e),Q(this,"code"),this.name="WorkerInTheMainChunkError",this.code=t}},a$=class extends Error{constructor(e){super(e),this.name="ExcalidrawError"}},iNe=class{constructor(e){Q(this,"instance"),Q(this,"debounceTerminate"),this.instance=new Worker(e,{type:"module"})}},sNe=class yee{constructor(t,n){Q(this,"idleWorkers",new Set),Q(this,"workerUrl"),Q(this,"workerTTL"),this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new gee;if(!import.meta.url||t.toString()===import.meta.url)throw new bee;return new yee(t,n)}async postMessage(t,n){let r,i=Array.from(this.idleWorkers).shift();return i?(this.idleWorkers.delete(i),r=i):r=await this.createWorker(),new Promise((s,o)=>{r.instance.onmessage=this.onMessageHandler(r,s),r.instance.onerror=this.onErrorHandler(r,o),r.instance.postMessage(t,n),r.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(let t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){let t=new iNe(this.workerUrl);return t.debounceTerminate=Ng(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return r=>{t.debounceTerminate(),this.idleWorkers.add(t),n(r.data)}}onErrorHandler(t,n){return r=>{t.debounceTerminate(()=>n(r)),t.debounceTerminate.flush(),this.clear()}}},l$=typeof Worker<"u",oNe=async(e,t)=>{let{Commands:n,subsetToBase64:r,toBase64:i}=await lNe();return l$?Rg(async()=>{try{let s=await cNe(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return i(a)}catch(s){return l$=!1,VMe()&&(s instanceof gee||s instanceof bee)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),r(e,t)}}):r(e,t)},Jk=null,eS=null,aNe=async()=>(Jk||(Jk=qe(()=>import("./subset-worker.chunk-CNo9FwPq.js"),__vite__mapDeps([0,1]))),Jk),lNe=async()=>(eS||(eS=qe(()=>import("./subset-shared.chunk-D0UOGVCh.js"),[])),eS),tS=null,cNe=()=>(tS||(tS=Rg(async()=>{let{WorkerUrl:e}=await aNe();return sNe.create(e)})),tS),Uee=class $3{constructor(t,n,r){Q(this,"urls"),Q(this,"fontFace"),this.urls=$3.createUrls(n);let i=this.urls.map(s=>`url(${s}) ${$3.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,i,{display:"swap",style:"normal",weight:"400",...r})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;let n=Array.from(t).map(r=>r.codePointAt(0));return this.getContent(n).then(r=>`@font-face { font-family: ${this.fontFace.family}; src: url(${r}); }`)}async getContent(t){let n=0,r=[];for(;n<this.urls.length;){let i=this.urls[n];try{let s=await this.fetchFont(i);return await oNe(s,t)}catch(s){r.push(`"${i.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(r,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return Rg(async()=>{let n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){let r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){let t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{let[r,i]=n.replace("U+","").split("-");return i?`\\u{${r}}-\\u{${i}}`:`\\u{${r}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(pN))return[];if(t.startsWith("http"))return[new URL(t)];let n=t.replace(/^\/+/,""),r=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){let i=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);r.push(new URL(n,i))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(i=>{let s=this.normalizeBaseUrl(i);r.push(new URL(n,s))});return r.push(new URL(n,$3.ASSETS_FALLBACK_URL)),r}static getFormat(t){if(!(t instanceof URL))return"";try{let n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var r;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(r=window==null?void 0:window.location)==null?void 0:r.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};Q(Uee,"ASSETS_FALLBACK_URL",`https://esm.sh/${`${It.PKG_NAME}@${It.PKG_VERSION}`}/dist/prod/`);var fNe=Uee,dNe="./fonts/Cascadia/CascadiaCode-Regular.woff2",uNe=[{uri:dNe}],hNe="./fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",pNe="./fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",mNe="./fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",gNe="./fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",bNe=[{uri:hNe,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:pNe,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:mNe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:gNe,descriptors:{unicodeRange:"U+3bb"}}],yNe=[{uri:pN}],UNe="./fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",xNe="./fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",wNe="./fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",vNe="./fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",ENe="./fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",kNe="./fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",SNe="./fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",CNe=[{uri:UNe,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:xNe,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:wNe,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:vNe,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:ENe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:kNe,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:SNe,descriptors:{unicodeRange:"U+300-301,U+303"}}],ANe=[{uri:pN}],MNe="./fonts/Liberation/LiberationSans-Regular.woff2",TNe=[{uri:MNe}],INe="./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",NNe="./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",RNe=[{uri:NNe,descriptors:{unicodeRange:V0.LATIN_EXT}},{uri:INe,descriptors:{unicodeRange:V0.LATIN}}],_Ne="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",PNe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",DNe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",LNe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",ONe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",jNe=[{uri:LNe,descriptors:{unicodeRange:V0.CYRILIC_EXT,weight:"500"}},{uri:DNe,descriptors:{unicodeRange:V0.CYRILIC,weight:"500"}},{uri:ONe,descriptors:{unicodeRange:V0.VIETNAMESE,weight:"500"}},{uri:PNe,descriptors:{unicodeRange:V0.LATIN_EXT,weight:"500"}},{uri:_Ne,descriptors:{unicodeRange:V0.LATIN,weight:"500"}}],BNe="./fonts/Virgil/Virgil-Regular.woff2",FNe=[{uri:BNe}],zNe="./fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",$Ne="./fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",HNe="./fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",VNe="./fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",WNe="./fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",GNe="./fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",XNe="./fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",KNe="./fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",YNe="./fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",ZNe="./fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",qNe="./fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",QNe="./fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",JNe="./fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",eRe="./fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",tRe="./fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",nRe="./fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",rRe="./fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",iRe="./fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",sRe="./fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",oRe="./fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",aRe="./fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",lRe="./fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",cRe="./fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",fRe="./fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",dRe="./fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",uRe="./fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",hRe="./fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",pRe="./fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",mRe="./fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",gRe="./fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",bRe="./fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",yRe="./fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",URe="./fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",xRe="./fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",wRe="./fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",vRe="./fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",ERe="./fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",kRe="./fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",SRe="./fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",CRe="./fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",ARe="./fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",MRe="./fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",TRe="./fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",IRe="./fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",NRe="./fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",RRe="./fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",_Re="./fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",PRe="./fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",DRe="./fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",LRe="./fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",ORe="./fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",jRe="./fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",BRe="./fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",FRe="./fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",zRe="./fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",$Re="./fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",HRe="./fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",VRe="./fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",WRe="./fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",GRe="./fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",XRe="./fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",KRe="./fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",YRe="./fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",ZRe="./fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",qRe="./fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",QRe="./fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",JRe="./fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",e_e="./fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",t_e="./fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",n_e="./fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",r_e="./fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",i_e="./fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",s_e="./fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",o_e="./fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",a_e="./fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",l_e="./fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",c_e="./fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",f_e="./fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",d_e="./fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",u_e="./fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",h_e="./fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",p_e="./fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",m_e="./fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",g_e="./fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",b_e="./fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",y_e="./fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",U_e="./fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",x_e="./fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",w_e="./fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",v_e="./fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",E_e="./fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",k_e="./fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",S_e="./fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",C_e="./fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",A_e="./fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",M_e="./fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",T_e="./fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",I_e="./fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",N_e="./fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",R_e="./fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",__e="./fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",P_e="./fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",D_e="./fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",L_e="./fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",O_e="./fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",j_e="./fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",B_e="./fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",F_e="./fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",z_e="./fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",$_e="./fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",H_e="./fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",V_e="./fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",W_e="./fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",G_e="./fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",X_e="./fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",K_e="./fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",Y_e="./fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",Z_e="./fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",q_e="./fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",Q_e="./fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",J_e="./fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",ePe="./fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",tPe="./fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",nPe="./fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",rPe="./fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",iPe="./fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",sPe="./fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",oPe="./fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",aPe="./fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",lPe="./fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",cPe="./fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",fPe="./fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",dPe="./fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",uPe="./fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",hPe="./fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",pPe="./fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",mPe="./fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",gPe="./fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",bPe="./fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",yPe="./fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",UPe="./fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",xPe="./fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",wPe="./fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",vPe="./fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",EPe="./fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",kPe="./fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",SPe="./fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",CPe="./fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",APe="./fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",MPe="./fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",TPe="./fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",IPe="./fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",NPe="./fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",RPe="./fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",_Pe="./fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",PPe="./fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",DPe="./fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",LPe="./fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",OPe="./fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",jPe="./fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",BPe="./fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",FPe="./fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",zPe="./fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",$Pe="./fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",HPe="./fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",VPe="./fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",WPe="./fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",GPe="./fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",XPe="./fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",KPe="./fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",YPe="./fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",ZPe="./fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",qPe="./fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",QPe="./fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",JPe="./fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",eDe="./fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",tDe="./fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",nDe="./fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",rDe="./fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",iDe="./fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",sDe="./fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",oDe="./fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",aDe="./fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",lDe="./fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",cDe="./fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",fDe="./fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",dDe="./fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",uDe="./fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",hDe="./fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",pDe="./fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",mDe="./fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",gDe="./fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",bDe="./fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",yDe="./fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",UDe="./fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",xDe="./fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",wDe="./fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",vDe="./fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",EDe="./fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",kDe="./fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",SDe="./fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",CDe="./fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",ADe="./fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",MDe="./fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",TDe="./fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",IDe="./fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",NDe="./fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",RDe="./fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",_De="./fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",PDe=[{uri:zNe,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:$Ne,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:HNe,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:VNe,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:WNe,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:GNe,descriptors:{unicodeRange:"U+d520-d608"}},{uri:XNe,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:KNe,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:YNe,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:ZNe,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:qNe,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:QNe,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:JNe,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:eRe,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:tRe,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:nRe,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:rRe,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:iRe,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:sRe,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:oRe,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:aRe,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:lRe,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:cRe,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:fRe,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:dRe,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:uRe,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:hRe,descriptors:{unicodeRange:"U+c258-c340"}},{uri:pRe,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:mRe,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:gRe,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:bRe,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:yRe,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:URe,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:xRe,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:wRe,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:vRe,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:ERe,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:kRe,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:SRe,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:CRe,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:ARe,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:MRe,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:TRe,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:IRe,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:NRe,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:RRe,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:_Re,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:PRe,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:DRe,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:LRe,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:ORe,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:jRe,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:BRe,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:FRe,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:zRe,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:$Re,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:HRe,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:VRe,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:WRe,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:GRe,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:XRe,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:KRe,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:YRe,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:ZRe,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:qRe,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:QRe,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:JRe,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:e_e,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:t_e,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:n_e,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:r_e,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:i_e,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:s_e,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:o_e,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:a_e,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:l_e,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:c_e,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:f_e,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:d_e,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:u_e,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:h_e,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:p_e,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:m_e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:g_e,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:b_e,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:y_e,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:U_e,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:x_e,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:w_e,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:v_e,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:E_e,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:k_e,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:S_e,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:C_e,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:A_e,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:M_e,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:T_e,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:I_e,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:N_e,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:R_e,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:__e,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:P_e,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:D_e,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:L_e,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:O_e,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:j_e,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:B_e,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:F_e,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:z_e,descriptors:{unicodeRange:"U+487a-4932"}},{uri:$_e,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:H_e,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:V_e,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:W_e,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:G_e,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:X_e,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:K_e,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:Y_e,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:Z_e,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:q_e,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:Q_e,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:J_e,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:ePe,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:tPe,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:nPe,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:rPe,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:iPe,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:sPe,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:oPe,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:aPe,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:lPe,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:cPe,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:fPe,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:dPe,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:uPe,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:hPe,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:pPe,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:mPe,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:gPe,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:bPe,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:yPe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:UPe,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:xPe,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:wPe,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:vPe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:EPe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:kPe,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:SPe,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:CPe,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:APe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:MPe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:TPe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:IPe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:NPe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:RPe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:_Pe,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:PPe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:DPe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:LPe,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:OPe,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:jPe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:BPe,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:FPe,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:zPe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:$Pe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:HPe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:VPe,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:WPe,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:GPe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:XPe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:KPe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:YPe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:ZPe,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:qPe,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:QPe,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:JPe,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:eDe,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:tDe,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:nDe,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:rDe,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:iDe,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:sDe,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:oDe,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:aDe,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:lDe,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:cDe,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:fDe,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:dDe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:uDe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:hDe,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:pDe,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:mDe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:gDe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:bDe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:yDe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:UDe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:xDe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:wDe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:vDe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:EDe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:kDe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:SDe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:CDe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:ADe,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:MDe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:TDe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:IDe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:NDe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:RDe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:_De,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],Wd=class kn{constructor(t){Q(this,"scene"),Q(this,"getSceneFamilies",()=>kn.getUniqueFamilies(this.scene.getNonDeletedElements())),Q(this,"onLoaded",n=>{let r=!0;for(let o of n){let a=`${o.family}-${o.style}-${o.weight}-${o.unicodeRange}`;kn.loadedFontsCache.has(a)||(kn.loadedFontsCache.add(a),r=!1)}if(r)return;let i=!1,s=this.scene.getNonDeletedElementsMap();for(let o of this.scene.getNonDeletedElements())if(Ve(o)){i=!0,or.delete(o),Cy.clearCache(wn(o));let a=Ai(o,s);a&&or.delete(a)}i&&this.scene.triggerUpdate()}),Q(this,"loadSceneFonts",async()=>{let n=this.getSceneFamilies(),r=kn.getCharsPerFamily(this.scene.getNonDeletedElements());return kn.loadFontFaces(n,r)}),this.scene=t}static get registered(){return kn._registered?kn._initialized||(kn._registered=new Map([...kn.init().entries(),...kn._registered.entries()])):kn._registered=kn.init(),kn._registered}get registered(){return kn.registered}static async generateFontFaceDeclarations(t){let n=kn.getUniqueFamilies(t),r=kn.getCharsPerFamily(t),i=n.find(l=>CJ(l).includes(Hp));if(i){let l=kn.getCharacters(r,i);if(iTe(l)){let f=Vp[Hp];r[f]=new Set(l),n.unshift(Vp[Hp])}}let s=kn.fontFacesStylesGenerator(n,r),o=3,a=await new Fz(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(let{fontFaces:s,metadata:o}of kn.registered.values())if(!o.local)for(let{fontFace:a}of s)window.document.fonts.has(a)||window.document.fonts.add(a);let r=kn.fontFacesLoader(t,n),i=10;return(await new Fz(r,i).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(let[r,i]of t.entries()){let s=wn({fontFamily:i,fontSize:16}),o=kn.getCharacters(n,i);window.document.fonts.check(s,o)||(yield Rg(async()=>{var a;try{let l=await window.document.fonts.load(s,o);return[r,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=kn.registered.get(i))==null?void 0:a.fontFaces.map(f=>f.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(let[r,i]of t.entries()){let{fontFaces:s,metadata:o}=kn.registered.get(i)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${i}"`,kn.registered);continue}if(!(o!=null&&o.local))for(let[a,l]of s.entries())yield Rg(async()=>{try{let f=kn.getCharacters(n,i),c=await l.toCSS(f);return c?[r*1e4+a,c]:void 0}catch(f){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,f)}})}}static register(t,n,...r){let i=rr[t]??Vp[t];return this.registered.get(i)||this.registered.set(i,{metadata:n,fontFaces:r.map(({uri:s,descriptors:o})=>new fNe(t,s,o))}),this.registered}static init(){let t={registered:new Map},n=(r,...i)=>{let s=rr[r]??Vp[r],o=z4[s]??z4[rr.Excalifont];kn.register.call(t,r,o,...i)};return n("Cascadia",...uNe),n("Comic Shanns",...bNe),n("Excalifont",...CNe),n("Helvetica",...ANe),n("Liberation Sans",...TNe),n("Lilita One",...RNe),n("Nunito",...jNe),n("Virgil",...FNe),n(Hp,...PDe),n(yb,...yNe),kn._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,r)=>(Ve(r)&&n.add(r.fontFamily),n),new Set))}static getCharsPerFamily(t){let n={};for(let r of t)if(Ve(r))for(let i of r.originalText)n[r.fontFamily]||(n[r.fontFamily]=new Set),n[r.fontFamily].add(i);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(kn.registered.keys())}};Q(Wd,"loadedFontsCache",new Set),Q(Wd,"_registered"),Q(Wd,"_initialized",!1),Q(Wd,"loadElementsFonts",async e=>{let t=Wd.getUniqueFamilies(e),n=Wd.getCharsPerFamily(e);return Wd.loadFontFaces(t,n)});var Bf=Wd,xee=(e,t,n)=>{var l;let{unitsPerEm:r,ascender:i,descender:s}=((l=Bf.registered.get(e))==null?void 0:l.metadata.metrics)||z4[rr.Virgil].metrics,o=t/r,a=(n-o*i+o*s)/2;return o*i+a},g1=e=>{var n;let{lineHeight:t}=((n=Bf.registered.get(e))==null?void 0:n.metadata.metrics)||z4[rr.Excalifont].metrics;return t},wee=e=>{let{angle:t,width:n,height:r,x:i,y:s}=e,o=i+n/2,a=s+r/2,l=O(o,a),f;return e.type==="diamond"?f=Dz(ue(O(o,s),l,t),ue(O(i+n,a),l,t),ue(O(o,s+r),l,t),ue(O(i,a),l,t)):f=Dz(ue(O(i,s),l,t),ue(O(i+n,s),l,t),ue(O(i+n,s+r),l,t),ue(O(i,s+r),l,t)),{type:"polygon",data:f}},DDe=(e,t,n=10)=>{let[r,i,s,o,a,l]=vt(e,t,!0);r-=n,s+=n,i-=n,o+=n;let f=O(a,l),c=ue(O(r,i),f,e.angle),d=ue(O(s,i),f,e.angle),u=ue(O(r,o),f,e.angle),h=ue(O(s,o),f,e.angle);return{type:"polygon",data:[c,d,h,u]}},LDe=e=>{let{width:t,height:n,angle:r,x:i,y:s}=e;return{type:"ellipse",data:{center:O(i+t/2,s+n/2),angle:r,halfWidth:t/2,halfHeight:n/2}}},o0=e=>{if(!e)return[];for(let t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},ODe=(e,t=O(0,0),n,r)=>{let i=l=>ue(O(l[0]+t[0],l[1]+t[1]),r,n),s=o0(e),o=[],a=O(0,0);for(let l of s){if(l.op==="move"){let f=eN(l.data);fs(f!=null,"Ops data is not a point"),a=i(f)}if(l.op==="bcurveTo"){let f=i(O(l.data[0],l.data[1])),c=i(O(l.data[2],l.data[3])),d=i(O(l.data[4],l.data[5]));o.push(Rf(a,f,c,d)),a=d}}return{type:"polycurve",data:o}},jDe=e=>{let t=e[0],n=[];for(let r=1;r<e.length;r++){let i=e[r];n.push(st(t,i)),t=i}return n},BDe=(e,t,n=!1)=>{let r=s=>ue(jt(Au(tt(s),Li(e.x,e.y))),t,e.angle),i=jDe(e.points.map(s=>r(s)));return n?{type:"polygon",data:L4(i.flat())}:{type:"polyline",data:i}},FDe=(e,t,n=O(0,0),r,i)=>{let s=c=>ue(O(c[0]+n[0],c[1]+n[1]),i,r);if(e.roundness===null)return{type:"polygon",data:L4(e.points.map(c=>s(c)))};let o=o0(t),a=[],l=!1;for(let c of o)c.op==="move"?(l=!l,l&&a.push(O(c.data[0],c.data[1]))):c.op==="bcurveTo"?l&&(a.push(O(c.data[0],c.data[1])),a.push(O(c.data[2],c.data[3])),a.push(O(c.data[4],c.data[5]))):c.op==="lineTo"&&l&&a.push(O(c.data[0],c.data[1]));let f=SAe(a,10,5).map(c=>s(c));return{type:"polygon",data:L4(f)}},zDe=(e,t)=>{let{angle:n,halfWidth:r,halfHeight:i,center:s}=t,o=r,a=i,l=Au(tt(e),br(tt(s),-1)),[f,c]=ue(jt(l),O(0,0),-n),d=Math.abs(f),u=Math.abs(c),h=.707,g=.707;for(let x=0;x<3;x++){let v=o*h,E=a*g,k=(o*o-a*a)*h**3/o,M=(a*a-o*o)*g**3/a,S=v-k,A=E-M,I=d-k,R=u-M,D=Math.hypot(A,S),_=Math.hypot(R,I);h=Math.min(1,Math.max(0,(I*D/_+k)/o)),g=Math.min(1,Math.max(0,(R*D/_+M)/a));let P=Math.hypot(g,h);h/=P,g/=P}let[y,U]=[o*h*Math.sign(f),a*g*Math.sign(c)];return cn(O(f,c),O(y,U))},$De=(e,t,n=1e-4)=>zDe(e,t)<=n,HDe=(e,t)=>{let{center:n,angle:r,halfWidth:i,halfHeight:s}=t,o=Au(tt(e),br(tt(n),-1)),[a,l]=ue(jt(o),O(0,0),-r);return a/i*(a/i)+l/s*(l/s)<=1},eM=(e,t,n=0)=>{switch(t.type){case"polygon":return TMe(e,t.data,n);case"ellipse":return $De(e,t.data,n);case"line":return d1(e,t.data,n);case"polyline":return Eee(e,t.data,n);case"curve":return vee(e,t.data,n);case"polycurve":return VDe(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},$4=(e,t)=>{switch(t.type){case"polygon":return Lz(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return HDe(e,t.data);case"polyline":{let n=L4(t.data.flat());return Lz(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},VDe=(e,t,n)=>t.some(r=>vee(e,r,n)),WDe=e=>{let[t,n,r,i]=e;return(s,o)=>Math.pow(1-s,3)*i[o]+3*s*Math.pow(1-s,2)*r[o]+3*Math.pow(s,2)*(1-s)*n[o]+t[o]*Math.pow(s,3)},GDe=(e,t=10)=>{let n=WDe(e),r=[n(0,0),n(0,1)],i=[],s=0,o=1/t;for(let a=0;a<t;a++)if(s+=o,s<=1){let l=O(n(s,0),n(s,1));i.push(st(r,l)),r=l}return i},vee=(e,t,n)=>Eee(e,GDe(t),n),Eee=(e,t,n=1e-4)=>t.some(r=>d1(e,r,n));function kee(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}var XDe=(e,t)=>{let{halfWidth:n,halfHeight:r,center:i}=t,s=n,o=r,a=Au(tt(e),br(tt(i),-1)),l=Math.abs(a[0]),f=Math.abs(a[1]),c=.707,d=.707;for(let g=0;g<3;g++){let y=s*c,U=o*d,x=(s*s-o*o)*c**3/s,v=(o*o-s*s)*d**3/o,E=y-x,k=U-v,M=l-x,S=f-v,A=Math.hypot(k,E),I=Math.hypot(S,M);c=Math.min(1,Math.max(0,(M*A/I+x)/s)),d=Math.min(1,Math.max(0,(S*A/I+v)/o));let R=Math.hypot(d,c);c/=R,d/=R}let[u,h]=[s*c*Math.sign(a[0]),o*d*Math.sign(a[1])];return cn(jt(a),O(u,h))};function KDe({center:e,halfWidth:t,halfHeight:n},[r,i]){let[s,o]=e,a=r[0]-s,l=r[1]-o,f=i[0]-s,c=i[1]-o,d=Math.pow(f-a,2)/Math.pow(t,2)+Math.pow(c-l,2)/Math.pow(n,2),u=2*(a*(f-a)/Math.pow(t,2)+l*(c-l)/Math.pow(n,2)),h=Math.pow(a,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,g=(-u+Math.sqrt(Math.pow(u,2)-4*d*h))/(2*d),y=(-u-Math.sqrt(Math.pow(u,2)-4*d*h))/(2*d),U=[O(a+g*(f-a)+s,l+g*(c-l)+o),O(a+y*(f-a)+s,l+y*(c-l)+o)].filter(x=>!isNaN(x[0])&&!isNaN(x[1]));return U.length===2&&El(U[0],U[1])?[U[0]]:U}function See(e,t=0){let n=yl(Math.min(e.width,e.height),e);if(n<=0){let d=GA(O(e.x-t,e.y-t),O(e.x+e.width+t,e.y+e.height+t)),u=st(O(d[0][0]+n,d[0][1]),O(d[1][0]-n,d[0][1])),h=st(O(d[1][0],d[0][1]+n),O(d[1][0],d[1][1]-n)),g=st(O(d[0][0]+n,d[1][1]),O(d[1][0]-n,d[1][1])),y=st(O(d[0][0],d[1][1]-n),O(d[0][0],d[0][1]+n));return[[u,h,g,y],[]]}let r=O(e.x+e.width/2,e.y+e.height/2),i=GA(O(e.x,e.y),O(e.x+e.width,e.y+e.height)),s=st(O(i[0][0]+n,i[0][1]),O(i[1][0]-n,i[0][1])),o=st(O(i[1][0],i[0][1]+n),O(i[1][0],i[1][1]-n)),a=st(O(i[0][0]+n,i[1][1]),O(i[1][0]-n,i[1][1])),l=st(O(i[0][0],i[1][1]-n),O(i[0][0],i[0][1]+n)),f=[br(as(tt(O(i[0][0]-t,i[0][1]-t),r)),t),br(as(tt(O(i[1][0]+t,i[0][1]-t),r)),t),br(as(tt(O(i[1][0]+t,i[1][1]+t),r)),t),br(as(tt(O(i[0][0]-t,i[1][1]+t),r)),t)],c=[Rf(jt(f[0],l[1]),jt(f[0],O(l[1][0]+2/3*(i[0][0]-l[1][0]),l[1][1]+2/3*(i[0][1]-l[1][1]))),jt(f[0],O(s[0][0]+2/3*(i[0][0]-s[0][0]),s[0][1]+2/3*(i[0][1]-s[0][1]))),jt(f[0],s[0])),Rf(jt(f[1],s[1]),jt(f[1],O(s[1][0]+2/3*(i[1][0]-s[1][0]),s[1][1]+2/3*(i[0][1]-s[1][1]))),jt(f[1],O(o[0][0]+2/3*(i[1][0]-o[0][0]),o[0][1]+2/3*(i[0][1]-o[0][1]))),jt(f[1],o[0])),Rf(jt(f[2],o[1]),jt(f[2],O(o[1][0]+2/3*(i[1][0]-o[1][0]),o[1][1]+2/3*(i[1][1]-o[1][1]))),jt(f[2],O(a[1][0]+2/3*(i[1][0]-a[1][0]),a[1][1]+2/3*(i[1][1]-a[1][1]))),jt(f[2],a[1])),Rf(jt(f[3],a[0]),jt(f[3],O(a[0][0]+2/3*(i[0][0]-a[0][0]),a[0][1]+2/3*(i[1][1]-a[0][1]))),jt(f[3],O(l[0][0]+2/3*(i[0][0]-l[0][0]),l[0][1]+2/3*(i[1][1]-l[0][1]))),jt(f[3],l[0]))];return[[st(c[0][3],c[1][0]),st(c[1][3],c[2][0]),st(c[2][3],c[3][0]),st(c[3][3],c[0][0])],c]}function Cee(e,t=0){var E;let[n,r,i,s,o,a,l,f]=Gee(e),c=yl(Math.abs(n-l),e),d=yl(Math.abs(s-r),e);if(((E=e.roundness)==null?void 0:E.type)==null){let[k,M,S,A]=[O(e.x+n,e.y+r-t),O(e.x+i+t,e.y+s),O(e.x+o,e.y+a+t),O(e.x+l-t,e.y+f)],I=st(O(k[0]+c,k[1]+d),O(M[0]-c,M[1]-d)),R=st(O(M[0]-c,M[1]+d),O(S[0]+c,S[1]-d)),D=st(O(S[0]-c,S[1]-d),O(A[0]+c,A[1]+d)),_=st(O(A[0]+c,A[1]-d),O(k[0]-c,k[1]+d));return[[I,R,D,_],[]]}let u=O(e.x+e.width/2,e.y+e.height/2),[h,g,y,U]=[O(e.x+n,e.y+r),O(e.x+i,e.y+s),O(e.x+o,e.y+a),O(e.x+l,e.y+f)],x=[br(as(tt(g,u)),t),br(as(tt(y,u)),t),br(as(tt(U,u)),t),br(as(tt(h,u)),t)],v=[Rf(jt(x[0],O(g[0]-c,g[1]-d)),jt(x[0],g),jt(x[0],g),jt(x[0],O(g[0]-c,g[1]+d))),Rf(jt(x[1],O(y[0]+c,y[1]-d)),jt(x[1],y),jt(x[1],y),jt(x[1],O(y[0]-c,y[1]-d))),Rf(jt(x[2],O(U[0]+c,U[1]+d)),jt(x[2],U),jt(x[2],U),jt(x[2],O(U[0]+c,U[1]-d))),Rf(jt(x[3],O(h[0]-c,h[1]+d)),jt(x[3],h),jt(x[3],h),jt(x[3],O(h[0]+c,h[1]+d)))];return[[st(v[0][3],v[1][0]),st(v[1][3],v[2][0]),st(v[2][3],v[3][0]),st(v[3][3],v[0][0])],v]}var tM=e=>{if(e.type==="arrow")return!1;let t=!hl(e.backgroundColor)||Ta(e)||ya(e)||Ve(e);return e.type==="line"||e.type==="freedraw"?t&&Wf(e.points):t||ln(e)},Pp=({x:e,y:t,element:n,shape:r,threshold:i=10,frameNameBound:s=null})=>{let o=tM(n)&&$4(O(e,t),r)||eM(O(e,t),r,i);return!o&&s&&(o=$4(O(e,t),{type:"polygon",data:wee(s).data})),o},mN=(e,t,n,r,i=0)=>{let[s,o,a,l]=Sl(n,r);return s-=i,o-=i,a+=i,l+=i,_J(O(s,o),O(e,t),O(a,l))},YDe=(e,t)=>!Pp(e)&&!Aee(e.x,e.y,Tee(e.element,t))&&mN(e.x,e.y,e.element,t),Aee=(e,t,n)=>!!n&&$4(O(e,t),n),Mee=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return ZDe(e,t,n);case"diamond":return qDe(e,t,n);case"ellipse":return QDe(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},ZDe=(e,t,n=0)=>{let r=O(e.x+e.width/2,e.y+e.height/2),i=ue(t[0],r,-e.angle),s=ue(t[1],r,-e.angle),[o,a]=See(e,n);return[...o.map(l=>wb(st(i,s),l)).filter(l=>l!=null).map(l=>ue(l,r,e.angle)),...a.flatMap(l=>PJ(l,st(i,s))).filter(l=>l!=null).map(l=>ue(l,r,e.angle))].filter((l,f,c)=>c.findIndex(d=>El(l,d))===f)},qDe=(e,t,n=0)=>{let r=O(e.x+e.width/2,e.y+e.height/2),i=ue(t[0],r,-e.angle),s=ue(t[1],r,-e.angle),[o,a]=Cee(e,n);return[...o.map(l=>wb(st(i,s),l)).filter(l=>l!=null).map(l=>ue(l,r,e.angle)),...a.flatMap(l=>PJ(l,st(i,s))).filter(l=>l!=null).map(l=>ue(l,r,e.angle))].filter((l,f,c)=>c.findIndex(d=>El(l,d))===f)},QDe=(e,t,n=0)=>{let r=O(e.x+e.width/2,e.y+e.height/2),i=ue(t[0],r,-e.angle),s=ue(t[1],r,-e.angle);return KDe(kee(r,e.width/2+n,e.height/2+n),WA(i,s)).map(o=>ue(o,r,e.angle))},Jt={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},J={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:Cc?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},JDe=new Map([[J.Z,Jt.Z],[J.Y,Jt.Y]]),eLe=e=>/^[a-z]$/.test(e.toLowerCase()),nM=(e,t)=>{if(t===e.key.toLowerCase())return!0;let n=JDe.get(t);return!!(n&&!eLe(e.key)&&e.code===n)},$5=e=>e===J.ARROW_LEFT||e===J.ARROW_RIGHT||e===J.ARROW_DOWN||e===J.ARROW_UP,nS=e=>e.altKey,g5=e=>e.shiftKey,x2=e=>e.shiftKey,gN=[{icon:wTe,value:"selection",key:J.V,numericKey:J[1],fillable:!0},{icon:vTe,value:"rectangle",key:J.R,numericKey:J[2],fillable:!0},{icon:ETe,value:"diamond",key:J.D,numericKey:J[3],fillable:!0},{icon:kTe,value:"ellipse",key:J.O,numericKey:J[4],fillable:!0},{icon:STe,value:"arrow",key:J.A,numericKey:J[5],fillable:!0},{icon:CTe,value:"line",key:J.L,numericKey:J[6],fillable:!0},{icon:vb,value:"freedraw",key:[J.P,J.X],numericKey:J[7],fillable:!1},{icon:QJ,value:"text",key:J.T,numericKey:J[8],fillable:!1},{icon:MTe,value:"image",key:null,numericKey:J[9],fillable:!1},{icon:TTe,value:"eraser",key:J.E,numericKey:J[0],fillable:!1}],tLe=e=>{var t;return((t=gN.find((n,r)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e))))==null?void 0:t.value)||null},pf=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return wee(e);case"arrow":case"line":{let r=((n=or.get(e))==null?void 0:n[0])??or.generateElementShape(e,null)[0],[,,,,i,s]=vt(e,t);return tM(e)?FDe(e,r,O(e.x,e.y),e.angle,O(i,s)):ODe(r,O(e.x,e.y),e.angle,O(i,s))}case"ellipse":return LDe(e);case"freedraw":{let[,,,,r,i]=vt(e,t);return BDe(e,O(r,i),tM(e))}}},Tee=(e,t)=>{let n=At(e,t);return n?e.type==="arrow"?pf({...n,...We.getBoundTextElementPosition(e,n,t)},t):pf(n,t):null},Iee=(e,t)=>{let n=or.generateElementShape(e,null);if(!n)return null;let r=o0(n[0]),i=O(0,0),s=0,o=1/0,a=null;for(;s<r.length;){let{op:l,data:f}=r[s];if(l==="move"&&(fs(EMe(f),"The returned ops is not compatible with a point"),i=f),l==="bcurveTo"){let c=i,d=O(f[0],f[1]),u=O(f[2],f[3]),h=O(f[4],f[5]),g=cn(h,t);g<o&&(o=g,a=[c,d,u,h]),i=h}s++}return a},Nee=(e,t,n,r,i)=>{let s=(l,f)=>Math.pow(1-l,3)*r[f]+3*l*Math.pow(1-l,2)*n[f]+3*Math.pow(l,2)*(1-l)*t[f]+e[f]*Math.pow(l,3),o=s(i,0),a=s(i,1);return O(o,a)},nLe=(e,t)=>{let n=Iee(e,t);if(!n)return[];let r=[],i=1;for(;i>0;){let s=Nee(n[0],n[1],n[2],n[3],i);r.push(O(s[0],s[1])),i-=.05}return r.length&&El(r.at(-1),t)&&r.push(O(t[0],t[1])),r},Ree=(e,t)=>{let n=[];n[0]=0;let r=nLe(e,t),i=0,s=0;for(;i<r.length-1;){let o=cn(r[i],r[i+1]);s+=o,n.push(s),i++}return n},rLe=(e,t)=>Ree(e,t).at(-1),iLe=(e,t,n)=>{let r=Ree(e,t),i=r.length-1,s=r.at(-1),o=n*s,a=0,l=i,f=0;for(;a<l;)f=Math.floor(a+(l-a)/2),r[f]<o?a=f+1:l=f;return r[f]>o&&f--,r[f]===o?f/i:1-(f+(o-r[f])/(r[f+1]-r[f]))/i},ac=(e,t)=>{let n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=O(n.midX,n.midY),[i,s]=ue(O(n.minX,n.minY),r,e.angle),[o,a]=ue(O(n.maxX,n.minY),r,e.angle),[l,f]=ue(O(n.maxX,n.maxY),r,e.angle),[c,d]=ue(O(n.minX,n.maxY),r,e.angle),u=[Math.min(i,o,l,c),Math.min(s,a,f,d),Math.max(i,o,l,c),Math.max(s,a,f,d)];if(t){let[h,g,y,U]=t;return[u[0]-U,u[1]-h,u[2]+g,u[3]+y]}return u},Pg=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],yl=(e,t)=>{var n,r,i,s;if(((n=t.roundness)==null?void 0:n.type)===qr.PROPORTIONAL_RADIUS||((r=t.roundness)==null?void 0:r.type)===qr.LEGACY)return e*Gk;if(((i=t.roundness)==null?void 0:i.type)===qr.ADAPTIVE_RADIUS){let o=((s=t.roundness)==null?void 0:s.value)??hMe,a=o/Gk;return e<=a?e*Gk:o}return 0},Wf=(e,t=1)=>{if(e.length>=3){let[n,r]=[e[0],e[e.length-1]];return cn(n,r)<=O3/t}return!1},gi=10,sLe=(e,t,n,r,i,s,o)=>{var D,_;let{width:a,height:l}=Gf(e),f=n/a,c=r/l,d=(((D=e.crop)==null?void 0:D.x)??0)/f,u=(((_=e.crop)==null?void 0:_.y)??0)/c,h=ue(O(i,s),O(e.x+e.width/2,e.y+e.height/2),-e.angle);i=h[0],s=h[1];let g=e.width,y=e.height,U=e.crop??{x:0,y:0,width:n,height:r,naturalWidth:n,naturalHeight:r},x=U.height,v=U.width,E=e.scale[0]===-1,k=e.scale[1]===-1,M=s-e.y,S=i-e.x;t.includes("n")&&(y=Ot(e.height-M,gi,k?l-u:e.height+u)),t.includes("s")&&(M=s-e.y-e.height,y=Ot(e.height+M,gi,k?e.height+u:l-u)),t.includes("e")&&(S=i-e.x-e.width,g=Ot(e.width+S,gi,E?e.width+d:a-d)),t.includes("w")&&(g=Ot(e.width-S,gi,E?a-d:e.width+d));let A=P=>{P.height=y*c,P.width=g*f};A(U);let I=(P,$)=>{A($),P.includes("n")&&(k||($.y+=x-$.height)),P.includes("s")&&k&&($.y+=x-$.height),P.includes("e")&&E&&($.x+=v-$.width),P.includes("w")&&(E||($.x+=v-$.width))};switch(t){case"n":{if(o){let P=d+e.width/2,$=a-d-e.width/2,L=Math.min(P,$)*2;g=Ot(y*o,gi,L),y=g/o}I(t,U),o&&(U.x+=(v-U.width)/2);break}case"s":{if(o){let P=d+e.width/2,$=a-d-e.width/2,L=Math.min(P,$)*2;g=Ot(y*o,gi,L),y=g/o}I(t,U),o&&(U.x+=(v-U.width)/2);break}case"w":{if(o){let P=u+e.height/2,$=l-u-e.height/2,L=Math.min(P,$)*2;y=Ot(g/o,gi,L),g=y*o}I(t,U),o&&(U.y+=(x-U.height)/2);break}case"e":{if(o){let P=u+e.height/2,$=l-u-e.height/2,L=Math.min(P,$)*2;y=Ot(g/o,gi,L),g=y*o}I(t,U),o&&(U.y+=(x-U.height)/2);break}case"ne":{if(o)if(S>-M){let P=k?l-u:u+e.height;y=Ot(g/o,gi,P),g=y*o}else{let P=E?d+e.width:a-d;g=Ot(y*o,gi,P),y=g/o}I(t,U);break}case"nw":{if(o)if(S<M){let P=k?l-u:u+e.height;y=Ot(g/o,gi,P),g=y*o}else{let P=E?a-d:d+e.width;g=Ot(y*o,gi,P),y=g/o}I(t,U);break}case"se":{if(o)if(S>M){let P=k?u+e.height:l-u;y=Ot(g/o,gi,P),g=y*o}else{let P=E?d+e.width:a-d;g=Ot(y*o,gi,P),y=g/o}I(t,U);break}case"sw":{if(o)if(-S>M){let P=k?u+e.height:l-u;y=Ot(g/o,gi,P),g=y*o}else{let P=E?a-d:d+e.width;g=Ot(y*o,gi,P),y=g/o}I(t,U);break}}let R=oLe(e,t,g,y,!!o);return Rz(U.width,U.naturalWidth)&&Rz(U.height,U.naturalHeight)&&(U=null),{x:R[0],y:R[1],width:g,height:y,crop:U}},oLe=(e,t,n,r,i)=>{let[s,o,a,l]=Bu(e,e.width,e.height,!0),f=O(s,o),c=O(a,l),d=Ey(f,c),[u,h,g,y]=Bu(e,n,r,!0),U=g-u,x=y-h,v=[...f];if(["n","w","nw"].includes(t)&&(v=[c[0]-Math.abs(U),c[1]-Math.abs(x)]),t==="ne"){let I=[f[0],c[1]];v=[I[0],I[1]-Math.abs(x)]}if(t==="sw"){let I=[c[0],f[1]];v=[I[0]-Math.abs(U),I[1]]}i&&(["s","n"].includes(t)&&(v[0]=d[0]-U/2),["e","w"].includes(t)&&(v[1]=d[1]-x/2));let E=e.angle,k=ue(v,d,E),M=[v[0]+Math.abs(U)/2,v[1]+Math.abs(x)/2],S=ue(M,d,E);v=ue(k,S,-E);let A=[...v];return A[0]+=e.x-u,A[1]+=e.y-h,A},aLe=(e,t)=>{if(e.crop){let{width:n,height:r}=Gf(e),[i,s,o,a,l,f]=vt(e,t),c=tt(ue(O(i,s),O(l,f),e.angle)),d=tt(ue(O(o,s),O(l,f),e.angle)),u=as(P4(d,c)),h=tt(ue(O(i,a),O(l,f),e.angle)),g=P4(h,c),y=as(g),{cropX:U,cropY:x}=lLe(e.crop,e.scale),v=Au(Au(c,br(u,-U*n/e.crop.naturalWidth)),br(y,-x*r/e.crop.naturalHeight)),E=jt(Au(Au(v,br(u,n/2)),br(y,r/2))),k=ue(jt(v),E,-e.angle);return{...e,x:k[0],y:k[1],width:n,height:r,crop:null}}return e},Gf=e=>{if(e.crop){let t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},lLe=(e,t)=>{let n=e.x,r=e.y,i=t[0]===-1,s=t[1]===-1;return i&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(r=e.naturalHeight-Math.abs(r)-e.height),{cropX:n,cropY:r}},cLe=(e,t=!1)=>{let n=e.crop;if(!n)return null;let r=e.scale[0]===-1,i=e.scale[1]===-1,s=n.x,o=n.y;if(r&&(s=n.naturalWidth-n.width-n.x),i&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};let{width:a,height:l}=Gf(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},_ee="invert(100%) hue-rotate(180deg) saturate(1.25)",fLe=Ac(),Pee=(e,t)=>ga(e)&&!t.imageCache.has(e.fileId),Dee=(e,t,n)=>{var r;return n.theme===Ft.DARK&&ga(e)&&!Pee(e,t)&&((r=t.imageCache.get(e.fileId))==null?void 0:r.mimeType)!==ft.svg},Nw=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},Lee=(e,t,n,r,i=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*i;return(n.has(e.id)||r&&r.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=uMe/100),s},dLe=(e,t,n)=>{let r=Nw(e),[i,s,o,a]=vt(e,t),l=wt(e)||Ma(e)?rs(i,o):e.width,f=wt(e)||Ma(e)?rs(s,a):e.height,c=l*window.devicePixelRatio+r*2,d=f*window.devicePixelRatio+r*2,u=n.value;return(c*u>32767||d*u>32767)&&(u=Math.min(32767/c,32767/d)),c*d*u*u>16777216&&(u=Math.sqrt(16777216/(c*d))),c=Math.floor(c*u),d=Math.floor(d*u),{width:c,height:d,scale:u}},Oee=(e,t,n,r,i)=>{var x,v;let s=document.createElement("canvas"),o=s.getContext("2d"),a=Nw(e),{width:l,height:f,scale:c}=dLe(e,t,n);if(!l||!f)return null;s.width=l,s.height=f;let d=-100,u=0;if(wt(e)||Ma(e)){let[E,k]=vt(e,t);d=e.x>E?rs(e.x,E)*window.devicePixelRatio*c:0,u=e.y>k?rs(e.y,k)*window.devicePixelRatio*c:0,o.translate(d,u)}o.save(),o.translate(a*c,a*c),o.scale(window.devicePixelRatio*c,window.devicePixelRatio*c);let h=i0.canvas(s);Dee(e,r,i)&&(o.filter=_ee),H3(e,h,o,r),o.restore();let g=At(e,t),y=document.createElement("canvas"),U=y.getContext("2d");if(Rt(e)&&g){let[E,k,M,S]=vt(e,t),A=Math.max(rs(E,M),rs(k,S));y.width=A*window.devicePixelRatio*c+a*c*10,y.height=A*window.devicePixelRatio*c+a*c*10,U.translate(y.width/2,y.height/2),U.rotate(e.angle),U.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);let[,,,,I,R]=vt(g,t);U.rotate(-e.angle);let D=(y.width-s.width)/2,_=(y.height-s.height)/2,P=y.width/2-(I-E)*window.devicePixelRatio*c-D-a*c,$=y.height/2-(R-k)*window.devicePixelRatio*c-_-a*c;U.translate(-P,-$),U.clearRect(-(g.width/2+Zr)*window.devicePixelRatio*c,-(g.height/2+Zr)*window.devicePixelRatio*c,(g.width+Zr*2)*window.devicePixelRatio*c,(g.height+Zr*2)*window.devicePixelRatio*c)}return{element:e,canvas:s,theme:i.theme,scale:c,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:u,boundTextElementVersion:((x=At(e,t))==null?void 0:x.version)||null,containingFrameOpacity:((v=fo(e,t))==null?void 0:v.opacity)||100,boundTextCanvas:y,angle:e.angle,imageCrop:ln(e)?e.crop:null}},uLe=14,jee=document.createElement("img");jee.src=`data:${ft.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;var Bee=document.createElement("img");Bee.src=`data:${ft.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;var hLe=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);let n=Math.min(e.width,e.height),r=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?Bee:jee,e.width/2-r/2,e.height/2-r/2,r,r)},H3=(e,t,n,r,i)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(or.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",or.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;let o=gLe(e),a=or.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{let o=ga(e)?(s=r.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,yl(Math.min(e.width,e.height),e)),n.clip());let{x:a,y:l,width:f,height:c}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,f,c,0,0,e.width,e.height)}else hLe(e,n);break}default:if(Ve(e)){let o=OJ(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=wn(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;let l=e.text.replace(/\r\n?/g,`
`).split(`
`),f=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,c=Sy(e.fontSize,e.lineHeight),d=xee(e.fontFamily,e.fontSize,c);for(let u=0;u<l.length;u++)n.fillText(l[u],f,u*c+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},rM=new WeakMap,c$=(e,t,n,r)=>{var d;let i=n?r.zoom:fLe.zoom,s=rM.get(e),o=s&&s.zoomValue!==i.value&&!(r!=null&&r.shouldCacheIgnoreZoom),a=At(e,t),l=(a==null?void 0:a.version)||null,f=ln(e)?e.crop:null,c=((d=fo(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==r.theme||s.boundTextElementVersion!==l||s.imageCrop!==f||s.containingFrameOpacity!==c||Rt(e)&&a&&e.angle!==s.angle){let u=Oee(e,t,i,n,r);return u?(rM.set(e,u),u):null}return s},rS=(e,t,n,r,i)=>{let s=e.element,o=Nw(s),a=e.scale,[l,f,c,d]=vt(s,i),u=((l+c)/2+r.scrollX)*window.devicePixelRatio,h=((f+d)/2+r.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);let g=At(s,i);if(Rt(s)&&g){let y=(e.boundTextCanvas.width-e.canvas.width)/2,U=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(u,h),t.drawImage(e.boundTextCanvas,-(c-l)/2*window.devicePixelRatio-y/a-o,-(d-f)/2*window.devicePixelRatio-U/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(u,h),t.rotate(s.angle),"scale"in e.element&&!Pee(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-u,-h),t.drawImage(e.canvas,(l+r.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(f+r.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale),It.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX;t.restore()},pLe=(e,t,n,r)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";let i=.5/n.zoom.value;t.fillRect(i,i,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(i,i,e.width,e.height),t.restore()},j0=(e,t,n,r,i,s,o)=>{var l;let a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(i.globalAlpha=Lee(e,fo(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?NJ:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(i.save(),i.translate(e.x+o.scrollX,e.y+o.scrollY),i.fillStyle="rgba(0, 0, 200, 0.04)",i.lineWidth=ir.strokeWidth/o.zoom.value,i.strokeStyle=ir.strokeColor,F3(e)&&(i.strokeStyle=o.theme===Ft.LIGHT?"#7affd7":"#1d8264"),i.roundRect?(i.beginPath(),i.roundRect(0,0,e.width,e.height,ir.radius/o.zoom.value),i.stroke(),i.closePath()):i.strokeRect(0,0,e.width,e.height),i.restore());break}case"freedraw":{if(or.generateElementShape(e,null),s.isExporting){let[f,c,d,u]=vt(e,t),h=(f+d)/2+o.scrollX,g=(c+u)/2+o.scrollY,y=(d-f)/2-(e.x-f),U=(u-c)/2-(e.y-c);i.save(),i.translate(h,g),i.rotate(e.angle),i.translate(-y,-U),H3(e,r,i,s),i.restore()}else{let f=c$(e,n,s,o);if(!f)return;rS(f,i,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(or.generateElementShape(e,s),s.isExporting){let[f,c,d,u]=vt(e,t),h=(f+d)/2+o.scrollX,g=(c+u)/2+o.scrollY,y=(d-f)/2-(e.x-f),U=(u-c)/2-(e.y-c);if(Ve(e)){let v=Ai(e,t);if(Rt(v)){let E=We.getBoundTextElementPosition(v,e,t);y=(d-f)/2-(E.x-f),U=(u-c)/2-(E.y-c)}}i.save(),i.translate(h,g),Dee(e,s,o)&&(i.filter="none");let x=At(e,t);if(Rt(e)&&x){let v=document.createElement("canvas"),E=v.getContext("2d"),k=Math.max(rs(f,d),rs(c,u)),M=Nw(e);v.width=k*o.exportScale+M*10*o.exportScale,v.height=k*o.exportScale+M*10*o.exportScale,E.translate(v.width/2,v.height/2),E.scale(o.exportScale,o.exportScale),y=e.width/2-(e.x-f),U=e.height/2-(e.y-c),E.rotate(e.angle);let S=i0.canvas(v);E.translate(-y,-U),H3(e,S,E,s),E.translate(y,U),E.rotate(-e.angle);let[,,,,A,I]=vt(x,t),R=(f+d)/2-A,D=(c+u)/2-I;E.translate(-R,-D),E.clearRect(-x.width/2,-x.height/2,x.width,x.height),i.scale(1/o.exportScale,1/o.exportScale),i.drawImage(v,-v.width/2,-v.height/2,v.width,v.height)}else i.rotate(e.angle),e.type==="image"&&i.scale(e.scale[0],e.scale[1]),i.translate(-y,-U),H3(e,r,i,s);i.restore()}else{let f=c$(e,n,s,o);if(!f)return;let c=i.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||xMe(e.angle))&&(i.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&ln(f.element)&&f.element.crop!==null){i.save(),i.globalAlpha=.1;let d=Oee(aLe(f.element,t),n,o.zoom,s,o);d&&rS(d,i,s,o,n),i.restore()}rS(f,i,s,o,n),i.imageSmoothingEnabled=c}break}default:throw new Error(`Unimplemented type ${e.type}`)}i.globalAlpha=1},Fee=new WeakMap([]);function mLe(e){let t=zee(e),n=new Path2D(t);return Fee.set(e,n),n}function gLe(e){return Fee.get(e)}function zee(e){let t=e.simulatePressure?e.points:e.points.length?e.points.map(([r,i],s)=>[r,i,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:r=>Math.sin(r*Math.PI/2),last:!!e.lastCommittedPoint};return yLe(xAe(t,n))}function f$(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var bLe=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function yLe(e){if(!e.length)return"";let t=e.length-1;return e.reduce((n,r,i,s)=>(i===t?n.push(r,f$(r,s[0]),"L",s[0],"Z"):n.push(r,f$(r,s[i+1])),n),["M",e[0],"Q"]).join(" ").replace(bLe,"$1")}var Dg=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",iM=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",d$=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",u$=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",sM=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",h$=e=>e==="arrow",H4=e=>e==="arrow",gr=[1,0],vi=[0,1],no=[-1,0],ro=[0,-1],HU=(e,t)=>{let n=vy(Math.atan2(t[1]-e[1],t[0]-e[0]));return n>=315||n<45?ro:n>=45&&n<135?gr:n>=135&&n<225?vi:no},b1=e=>{let[t,n]=e,r=Math.abs(t),i=Math.abs(n);return t>i?gr:t<=-i?no:n>r?vi:ro},Eb=(e,t)=>b1(tt(e,t)),Mf=(e,t)=>_f(Eb(e,t)),yr=(e,t)=>e[0]===t[0]&&e[1]===t[1],_f=e=>yr(e,gr)||yr(e,no),$ee=(e,t,n)=>{let r=UN(t);if(e.type==="diamond"){if(n[0]<e.x)return no;if(n[1]<e.y)return ro;if(n[0]>e.x+e.width)return gr;if(n[1]>e.y+e.height)return vi;let l=ue(sf(O(e.x+e.width/2,e.y),r,2),r,e.angle),f=ue(sf(O(e.x+e.width,e.y+e.height/2),r,2),r,e.angle),c=ue(sf(O(e.x+e.width/2,e.y+e.height),r,2),r,e.angle),d=ue(sf(O(e.x,e.y+e.height/2),r,2),r,e.angle);return yp([l,f,r],n)?HU(l,f):yp([f,c,r],n)?HU(f,c):yp([c,d,r],n)?HU(c,d):HU(d,l)}let i=sf(O(t[0],t[1]),r,2),s=sf(O(t[2],t[1]),r,2),o=sf(O(t[0],t[3]),r,2),a=sf(O(t[2],t[3]),r,2);return yp([i,s,r],n)?ro:yp([s,a,r],n)?gr:yp([a,o,r],n)?vi:no},Hee=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],ULe=e=>[8,8+e],Vee=e=>[1.5,6+e];function xLe(e){let t=e.roughness,n=Math.max(e.width,e.height),r=Math.min(e.width,e.height);return r>=20&&n>=50||r>=15&&e.roundness&&sM(e.type)||wt(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}var Io=(e,t=!1)=>{let n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?ULe(e.strokeWidth):e.strokeStyle==="dotted"?Vee(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:xLe(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<MJ.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=hl(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return Wf(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},p$=(e,t,n)=>ya(e)&&(t||Qs(e)&&(n==null?void 0:n.get(e.id))!==!0)&&hl(e.backgroundColor)&&hl(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:qd(e)?{...e,strokeColor:hl(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:hl(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,m$=(e,t,n,r,i,s,o)=>{let a=U$(e,t,n,r);if(a===null)return[];let l=(f,c)=>{if(f===null)return[];let[,,d,u,h,g]=f;return[i.line(d,u,h,g,c)]};switch(r){case"dot":case"circle":case"circle_outline":{let[f,c,d]=a;return delete s.strokeLineDash,[i.circle(f,c,d,{...s,fill:r==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{let[f,c,d,u,h,g]=a;return delete s.strokeLineDash,[i.polygon([[f,c],[d,u],[h,g],[f,c]],{...s,fill:r==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{let[f,c,d,u,h,g,y,U]=a;return delete s.strokeLineDash,[i.polygon([[f,c],[d,u],[h,g],[y,U],[f,c]],{...s,fill:r==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{let[f,c,d,u,h,g]=a;if(e.strokeStyle==="dotted"){let y=Vee(e.strokeWidth-1);s.strokeLineDash=[y[0],y[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[i.line(d,u,f,c,s),i.line(h,g,f,c,s),...r==="crowfoot_one_or_many"?l(U$(e,t,n,"crowfoot_one"),s):[]]}}},wLe=(e,t,{isExporting:n,canvasBackgroundColor:r,embedsValidationStatus:i})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){let o=e.width,a=e.height,l=yl(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,Io(p$(e,n,i),!0))}else s=t.rectangle(0,0,e.width,e.height,Io(p$(e,n,i),!1));return s}case"diamond":{let s,[o,a,l,f,c,d,u,h]=Gee(e);if(e.roundness){let g=yl(Math.abs(o-u),e),y=yl(Math.abs(f-a),e);s=t.path(`M ${o+g} ${a+y} L ${l-g} ${f-y}
            C ${l} ${f}, ${l} ${f}, ${l-g} ${f+y}
            L ${c+g} ${d-y}
            C ${c} ${d}, ${c} ${d}, ${c-g} ${d-y}
            L ${u+g} ${h+y}
            C ${u} ${h}, ${u} ${h}, ${u+g} ${h-y}
            L ${o-g} ${a+y}
            C ${o} ${a}, ${o} ${a}, ${o+g} ${a+y}`,Io(e,!0))}else s=t.polygon([[o,a],[l,f],[c,d],[u,h]],Io(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,Io(e));case"line":case"arrow":{let s,o=Io(e),a=e.points.length?e.points:[O(0,0)];if(Ge(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(vLe(a,16),Io(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){let{startArrowhead:l=null,endArrowhead:f="arrow"}=e;if(l!==null){let c=m$(e,s,"start",l,t,o,r);s.push(...c)}if(f!==null){let c=m$(e,s,"end",f,t,o,r);s.push(...c)}}return s}case"freedraw":{let s;if(mLe(e),Wf(e.points)){let o=kAe(e.points,.75);s=t.curve(o,{...Io(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return u1(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},vLe=(e,t)=>{let n=[];for(let i=1;i<e.length-1;i+=1){let s=e[i-1],o=e[i+1],a=e[i],l=Mf(a,s),f=Mf(o,a),c=Math.min(t,cn(e[i],o)/2,cn(e[i],s)/2);l?s[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):s[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c]),n.push(e[i]),f?o[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):o[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c])}let r=[`M ${e[0][0]} ${e[0][1]}`];for(let i=0;i<n.length;i+=3)r.push(`L ${n[i][0]} ${n[i][1]}`),r.push(`Q ${n[i+1][0]} ${n[i+1][1]}, ${n[i+2][0]} ${n[i+2][1]}`);return r.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),r.join(" ")},Lg=e=>{let t=e.map(r=>r[0]),n=e.map(r=>r[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},V4=(e,t,n,r)=>{let i=n.map(u=>u[e]),s=Math.max(...i),o=Math.min(...i),a=s-o,l=a===0?1:t/a,f=1/0,c=n.map(u=>{let h=u[e]*l,g=[...u];return g[e]=h,h<f&&(f=h),g});if(!r||c.length===2)return c;let d=o-f;return c.map(u=>u.map((h,g)=>g===e?h+d:h))},Wee=class V3{static getBounds(t,n){let r=V3.boundsCache.get(t);if(r!=null&&r.version&&r.version===t.version&&!Hn(t))return r.bounds;let i=V3.calculateBounds(t,n);return V3.boundsCache.set(t,{version:t.version,bounds:i}),i}static calculateBounds(t,n){let r,[i,s,o,a,l,f]=vt(t,n);if(Ma(t)){let[c,d,u,h]=bN(t.points.map(([g,y])=>ue(O(g,y),O(l-t.x,f-t.y),t.angle)));return[c+t.x,d+t.y,u+t.x,h+t.y]}else if(wt(t))r=TLe(t,l,f,n);else if(t.type==="diamond"){let[c,d]=ue(O(l,s),O(l,f),t.angle),[u,h]=ue(O(l,a),O(l,f),t.angle),[g,y]=ue(O(i,f),O(l,f),t.angle),[U,x]=ue(O(o,f),O(l,f),t.angle),v=Math.min(c,u,g,U),E=Math.min(d,h,y,x),k=Math.max(c,u,g,U),M=Math.max(d,h,y,x);r=[v,E,k,M]}else if(t.type==="ellipse"){let c=(o-i)/2,d=(a-s)/2,u=Math.cos(t.angle),h=Math.sin(t.angle),g=Math.hypot(c*u,d*h),y=Math.hypot(d*u,c*h);r=[l-g,f-y,l+g,f+y]}else{let[c,d]=ue(O(i,s),O(l,f),t.angle),[u,h]=ue(O(i,a),O(l,f),t.angle),[g,y]=ue(O(o,a),O(l,f),t.angle),[U,x]=ue(O(o,s),O(l,f),t.angle),v=Math.min(c,u,g,U),E=Math.min(d,h,y,x),k=Math.max(c,u,g,U),M=Math.max(d,h,y,x);r=[v,E,k,M]}return r}};Q(Wee,"boundsCache",new WeakMap);var ELe=Wee,vt=(e,t,n=!1)=>{if(Ma(e))return SLe(e);if(wt(e))return We.getElementAbsoluteCoords(e,t,n);if(Ve(e)){let r=t?Ai(e,t):null;if(Rt(r)){let{x:i,y:s}=We.getBoundTextElementPosition(r,e,t);return[i,s,i+e.width,s+e.height,i+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},g$=(e,t)=>{let[n,r,i,s,o,a]=vt(e,t),l=O(o,a);if(wt(e)||Ma(e)){let x=[],v=0;for(;v<e.points.length-1;)x.push(st(ue(O(e.points[v][0]+e.x,e.points[v][1]+e.y),l,e.angle),ue(O(e.points[v+1][0]+e.x,e.points[v+1][1]+e.y),l,e.angle))),v++;return x}let[f,c,d,u,h,g,y,U]=[[n,r],[i,r],[n,s],[i,s],[o,r],[o,s],[n,a],[i,a]].map(x=>ue(x,l,e.angle));return e.type==="diamond"?[st(h,y),st(h,U),st(g,y),st(g,U)]:e.type==="ellipse"?[st(h,y),st(h,U),st(g,y),st(g,U),st(h,y),st(h,U),st(g,y),st(g,U)]:[st(f,c),st(d,u),st(f,d),st(c,u),st(f,U),st(d,U),st(c,y),st(u,y)]},Gee=e=>{let t=Math.floor(e.width/2)+1,n=0,r=e.width,i=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,r,i,s,o,0,i]},b$=(e,t,n,r,i)=>{let s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*r+Math.pow(e,3)*i},y$=(e,t,n,r)=>{let i=t-e,s=n-t,o=r-n,a=3*i-6*s+3*o,l=6*s-6*i,f=3*i,c=l*l-4*a*f;if(!(c>=0))return!1;let d=null,u=null,h=1/0,g=1/0;return a===0?h=g=-f/l:(h=(-l+Math.sqrt(c))/(2*a),g=(-l-Math.sqrt(c))/(2*a)),h>=0&&h<=1&&(d=b$(h,e,t,n,r)),g>=0&&g<=1&&(u=b$(g,e,t,n,r)),[d,u]},kLe=(e,t,n,r)=>{let i=y$(e[0],t[0],n[0],r[0]),s=y$(e[1],t[1],n[1],r[1]),o=Math.min(e[0],r[0]),a=Math.max(e[0],r[0]);if(i){let c=i.filter(d=>d!==null);o=Math.min(o,...c),a=Math.max(a,...c)}let l=Math.min(e[1],r[1]),f=Math.max(e[1],r[1]);if(s){let c=s.filter(d=>d!==null);l=Math.min(l,...c),f=Math.max(f,...c)}return[o,l,a,f]},Rw=(e,t)=>{let n=O(0,0),{minX:r,minY:i,maxX:s,maxY:o}=e.reduce((a,{op:l,data:f})=>{if(l==="move"){let c=eN(f);fs(c!=null,"Op data is not a point"),n=c}else if(l==="bcurveTo"){let c=O(f[0],f[1]),d=O(f[2],f[3]),u=O(f[4],f[5]),h=t?t(c):c,g=t?t(d):d,y=t?t(u):u,U=t?t(n):n;n=u;let[x,v,E,k]=kLe(U,h,g,y);a.minX=Math.min(a.minX,x),a.minY=Math.min(a.minY,v),a.maxX=Math.max(a.maxX,E),a.maxY=Math.max(a.maxY,k)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r,i,s,o]},bN=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),r=Math.max(r,s),i=Math.max(i,o);return[t,n,r,i]},SLe=e=>{let[t,n,r,i]=bN(e.points),s=t+e.x,o=n+e.y,a=r+e.x,l=i+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},CLe=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},ALe=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},U$=(e,t,n,r)=>{if(t.length<1)return null;let i=o0(t[0]);if(i.length<1)return null;let s=n==="start"?1:i.length-1,o=i[s].data;fs(o.length===6,"Op data length is not 6");let a=O(o[4],o[5]),l=O(o[2],o[3]),f=O(o[0],o[1]),c=i[s-1],d=O(0,0);if(c.op==="move"){let L=eN(c.data);fs(L!=null,"Op data is not a point"),d=L}else c.op==="bcurveTo"&&(d=O(c.data[4],c.data[5]));let u=(L,B)=>Math.pow(1-L,3)*a[B]+3*L*Math.pow(1-L,2)*l[B]+3*Math.pow(L,2)*(1-L)*f[B]+d[B]*Math.pow(L,3),[h,g]=n==="start"?d:a,[y,U]=[u(.3,0),u(.3,1)],x=Math.hypot(h-y,g-U),v=(h-y)/x,E=(g-U)/x,k=CLe(r),M=0;{let[L,B]=n==="end"?e.points[e.points.length-1]:e.points[0],[V,z]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];M=Math.hypot(L-V,B-z)}let S=Math.min(k,M*(r==="diamond"||r==="diamond_outline"?.25:.5)),A=h-v*S,I=g-E*S;if(r==="dot"||r==="circle"||r==="circle_outline"){let L=Math.hypot(I-g,A-h)+e.strokeWidth-2;return[h,g,L]}let R=ALe(r);if(r==="crowfoot_many"||r==="crowfoot_one_or_many"){let[L,B]=ue(O(h,g),O(A,I),Bh(-R)),[V,z]=ue(O(h,g),O(A,I),Bh(R));return[A,I,L,B,V,z]}let[D,_]=ue(O(A,I),O(h,g),-R*Math.PI/180),[P,$]=ue(O(A,I),O(h,g),Bh(R));if(r==="diamond"||r==="diamond_outline"){let L,B;if(n==="start"){let[V,z]=e.points.length>1?e.points[1]:[0,0];[L,B]=ue(O(h+S*2,g),O(h,g),Math.atan2(z-g,V-h))}else{let[V,z]=e.points.length>1?e.points[e.points.length-2]:[0,0];[L,B]=ue(O(h-S*2,g),O(h,g),Math.atan2(g-z,h-V))}return[h,g,D,_,L,B,P,$]}return[h,g,D,_,P,$]},MLe=e=>{let t=i0.generator(),n=Io(e),r=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[r](e.points,n)},TLe=(e,t,n,r)=>{var f;let i=At(e,r);if(e.points.length<2){let[c,d]=e.points[0],[u,h]=ue(O(e.x+c,e.y+d),O(t,n),e.angle),g=[u,h,u,h];if(i){let y=We.getMinMaxXYWithBoundText(e,r,[u,h,u,h],i);g=[y[0],y[1],y[2],y[3]]}return g}let s=((f=or.get(e))==null?void 0:f[0])??MLe(e),o=o0(s),a=Rw(o,([c,d])=>ue(O(e.x+c,e.y+d),O(t,n),e.angle)),l=[a[0],a[1],a[2],a[3]];if(i){let c=We.getMinMaxXYWithBoundText(e,r,l,i);l=[c[0],c[1],c[2],c[3]]}return l},Sl=(e,t)=>ELe.getBounds(e,t),pn=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=-1/0,i=1/0,s=-1/0,o=t||mt(e);return e.forEach(a=>{let[l,f,c,d]=Sl(a,o);n=Math.min(n,l),i=Math.min(i,f),r=Math.max(r,c),s=Math.max(s,d)}),[n,i,r,s]},yN=(e,t)=>{let[n,r,i,s]=pn(e);return[n+t.x,r+t.y,i+t.x,s+t.y]},Bu=(e,t,n,r)=>{if(!(wt(e)||Ma(e)))return[e.x,e.y,e.x+t,e.y+n];let i=V4(0,t,V4(1,n,e.points,r),r),s;if(Ma(e))s=bN(i);else{let c=i0.generator(),d=e.roundness?c.curve(i,Io(e)):c.linearPath(i,Io(e)),u=o0(d);s=Rw(u)}let[o,a,l,f]=s;return[o+e.x,a+e.y,l+e.x,f+e.y]},x$=(e,t)=>{let n=i0.generator(),r=e.roundness==null?n.linearPath(t,Io(e)):n.curve(t,Io(e)),i=o0(r),[s,o,a,l]=Rw(i);return[s+e.x,o+e.y,a+e.x,l+e.y]},ILe=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=e[0],i=mt(e);return e.forEach(s=>{let[o,a,l,f]=Sl(s,i),c=cn(O((o+l)/2,(a+f)/2),O(t.x,t.y));c<n&&(n=c,r=s)}),Sl(r,i)},Ul=e=>{let[t,n,r,i]=pn(e);return{minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n,midX:(t+r)/2,midY:(n+i)/2}},NLe=({scrollX:e,scrollY:t,width:n,height:r,zoom:i})=>[-e,-t,-e+n/i.value,-t+r/i.value],UN=e=>O(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),RLe=(e,t)=>{if(e==null||t==null)return!1;let[n,r,i,s]=e,[o,a,l,f]=t;return n<l&&i>o&&r<f&&s>a},_w=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return _Le(e,t);case"diamond":return PLe(e,t);case"ellipse":return DLe(e,t)}},_Le=(e,t)=>{let n=O(e.x+e.width/2,e.y+e.height/2),r=ue(t,n,-e.angle),[i,s]=See(e);return Math.min(...i.map(o=>tN(r,o)),...s.map(o=>DJ(o,r)).filter(o=>o!==null))},PLe=(e,t)=>{let n=O(e.x+e.width/2,e.y+e.height/2),r=ue(t,n,-e.angle),[i,s]=Cee(e);return Math.min(...i.map(o=>tN(r,o)),...s.map(o=>DJ(o,r)).filter(o=>o!==null))},DLe=(e,t)=>{let n=O(e.x+e.width/2,e.y+e.height/2);return XDe(ue(t,n,-e.angle),kee(n,e.width/2,e.height/2))},LLe=e=>!e[J.CTRL_OR_CMD],oh=e=>e.isBindingEnabled,Tn=5,xN=10,wN=4,OLe=(e,t)=>{let n=[];return t.forEach(r=>{let i=e.getNonDeletedElement(r);i!=null&&n.push(i)}),n},Pw=(e,t,n,r,i)=>{let s=new Set,o=new Set;w$(e,t,n,"start",s,o,r),w$(e,n,t,"end",s,o,r);let a=Array.from(o).filter(l=>!s.has(l));OLe(i,a).forEach(l=>{var f;xe(l,{boundElements:(f=l.boundElements)==null?void 0:f.filter(c=>c.type!=="arrow"||c.id!==e.id)})})},w$=(e,t,n,r,i,s,o)=>{if(t!=="keep"){if(t===null){let a=$Le(e,r);a!=null&&s.add(a);return}Zee(e)?(n==null||(n==="keep"?!Kee(e,t,r):r==="start"||n.id!==t.id))&&(Mc(e,t,r,o),i.add(t.id)):(Mc(e,t,r,o),i.add(t.id))}},jLe=(e,t,n,r)=>{var o,a;let i=qee(e,t,n),s=t==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){let l=n.get(s);if(kl(l)&&W3(l,i,n,r))return l}return null},Xee=(e,t,n)=>["start","end"].map(r=>jLe(e,r,t,n)),BLe=(e,t,n,r,i,s)=>{let o=e.points.length-1,a=n.findIndex(d=>d===0)>-1,l=n.findIndex(d=>d===o)>-1,f=a?t?Gp(e,"start",r,i,s):null:Ge(e)?"keep":Gp(e,"start",r,i,s),c=l?t?Gp(e,"end",r,i,s):null:Ge(e)?"keep":Gp(e,"end",r,i,s);return[f,c]},FLe=(e,t,n,r,i)=>{if(Ge(e))return["keep","keep"];let[s,o]=Xee(e,t,i),a=s&&r?Gp(e,"start",t,n,i):null,l=o&&r?Gp(e,"end",t,n,i):null;return[a,l]},W4=(e,t,n,r,i,s,o)=>{e.forEach(a=>{let[l,f]=s!=null&&s.length?BLe(a,i,s??[],t,n,o):FLe(a,t,n,i,o);Pw(a,l,f,t,r)})},iS=(e,t,n)=>e.length>50?[]:e.filter(wt).flatMap(r=>Xee(r,t,n)).filter(r=>r!==null).filter(r=>e.filter(i=>i.id===(r==null?void 0:r.id)).length===0),oM=(e,t,n,r,i)=>{t.startBoundElement!=null&&Mc(e,t.startBoundElement,"start",r);let s=pl(n,i,r,t.zoom,Ge(e),Ge(e));s!==null&&(Kee(e,s,"end")||Mc(e,s,"end",r))},zLe=(e,t)=>{let n=e.gap,r=Ay(t,t.width,t.height);return n>r&&(n=xN+wN),{...e,gap:n}},Mc=(e,t,n,r)=>{if(!Rt(e))return;let i={elementId:t.id,...Ge(e)?{...G4(e,t,n),focus:0,gap:0}:{...zLe(WLe(e,t,n,r),t)}};xe(e,{[n==="start"?"startBinding":"endBinding"]:i}),mt(t.boundElements||[]).has(e.id)||xe(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},Kee=(e,t,n)=>{let r=e[n==="start"?"endBinding":"startBinding"];return Yee(e,r==null?void 0:r.elementId,t)},Yee=(e,t,n)=>t===n.id&&Zee(e),Zee=e=>e.points.length<3,$Le=(e,t)=>{let n=t==="start"?"startBinding":"endBinding",r=e[n];return r==null?null:(xe(e,{[n]:null}),r.elementId)},pl=(e,t,n,r,i,s)=>{if(s){let o=!1,a=VLe(t,f=>kl(f,!1)&&W3(f,e,n,r,(i||!Kk(f))&&!ht(f))).filter(f=>o?!1:(Kk(f)||(o=!0),!0));if(!a||a.length===0)return null;if(a.length===1)return a[0];let l=a.filter(f=>W3(f,e,n,r,!1));return l.length===1?l[0]:a.sort((f,c)=>c.width**2+c.height**2-(f.width**2+f.height**2)).pop()}return HLe(t,o=>kl(o,!1)&&W3(o,e,n,r,(i||!Kk(o))&&!ht(o)))},HLe=(e,t)=>{let n=null;for(let r=e.length-1;r>=0;--r){let i=e[r];if(!i.isDeleted&&t(i)){n=i;break}}return n},VLe=(e,t)=>{let n=[];for(let r=e.length-1;r>=0;--r){let i=e[r];i.isDeleted||t(i)&&n.push(i)}return n},WLe=(e,t,n,r)=>{let i=n==="start"?-1:1,s=i===-1?0:e.points.length-1,o=s-i,a=We.getPointAtIndexGlobalCoordinates(e,s,r),l=We.getPointAtIndexGlobalCoordinates(e,o,r);return{focus:eOe(t,l,a),gap:Math.max(1,_w(t,a))}},co=(e,t,n)=>{let{newSize:r,simultaneouslyUpdated:i}=n??{},s=XLe(i);kl(e)&&Dw(t,e,o=>{var g,y;if(!wt(o)||o.isDeleted||!GLe(o,e))return;let a=o.startBinding?t.get(o.startBinding.elementId):null,l=o.endBinding?t.get(o.endBinding.elementId):null,f=null,c=null;a&&l&&(f=Sl(a,t),c=Sl(l,t));let d={startBinding:v$(e,o.startBinding,r),endBinding:v$(e,o.endBinding,r)};if(s.has(o.id)){xe(o,d,!0);return}let u=Lw(t,o,(U,x)=>{var v,E;if(U&&kl(U)&&(x==="startBinding"||x==="endBinding")&&(e.id===((v=o[x])==null?void 0:v.elementId)||e.id===((E=o[x==="startBinding"?"endBinding":"startBinding"])==null?void 0:E.elementId)&&!RLe(f,c))){let k=JLe(o,x,d[x],U,t);if(k)return{index:x==="startBinding"?0:o.points.length-1,point:k}}return null}).filter(U=>U!==null);We.movePoints(o,u,{...e.id===((g=o.startBinding)==null?void 0:g.elementId)?{startBinding:d.startBinding}:{},...e.id===((y=o.endBinding)==null?void 0:y.elementId)?{endBinding:d.endBinding}:{}});let h=At(o,t);h&&!h.isDeleted&&My(o,t,!1)})},GLe=(e,t)=>{var n,r;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((r=e.endBinding)==null?void 0:r.elementId)===t.id},XLe=e=>new Set((e||[]).map(t=>t.id)),KLe=(e,t,n,r,i,s,o)=>{let a=b1(tt(t,e));return!n||!r?a:YLe(s,n,i,o)?$ee(n,r,e):b1(tt(e,O(n.x+n.width/2,n.y+n.height/2)))},YLe=(e,t,n,r)=>{let i=_w(t,e),s=Ay(t,t.width,t.height,r);return i>s?null:i},kb=(e,t,n)=>{let r=t&&ac(t),i=e.points[n==="start"?0:e.points.length-1],s=O(e.x+i[0],e.y+i[1]),o=ZMe(t)?qLe(t,s):s;if(t&&r){let a=UN(r),l=Mee(t,st(a,jt(br(as(tt(o,a)),Math.max(t.width,t.height)),a)))[0],f=cn(o,a),c=Math.max(cn(l??o,a),1e-4),d=Uc(f/c,6);switch(!0){case d>.9:return f-c>Tn||xb(o,l)<1e-4?o:jt(br(as(tt(o,l??a)),d>1?Tn:-Tn),l??a);default:return ZLe(o,t,r)}}return o},ZLe=(e,t,n)=>{let r=UN(n),i=b1(tt(e,r));switch(!0){case yr(i,ro):return ue(O((n[0]+n[2])/2+.1,n[1]),r,t.angle);case yr(i,gr):return ue(O(n[2],(n[1]+n[3])/2+.1),r,t.angle);case yr(i,vi):return ue(O((n[0]+n[2])/2-.1,n[3]),r,t.angle);default:return ue(O(n[0],(n[1]+n[3])/2-.1),r,t.angle)}},qLe=(e,t)=>{let n=O(e.x+e.width/2,e.y+e.height/2),r=ue(t,n,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-Tn?ue(O(e.x-Tn,e.y),n,e.angle):ue(O(e.x,e.y-Tn),n,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-Tn?ue(O(e.x,e.y+e.height+Tn),n,e.angle):ue(O(e.x-Tn,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+Tn?ue(O(e.x+e.width,e.y+e.height+Tn),n,e.angle):ue(O(e.x+e.width+Tn,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+Tn?ue(O(e.x+e.width,e.y-Tn),n,e.angle):ue(O(e.x+e.width+Tn,e.y),n,e.angle):t},QLe=(e,t,n=.05)=>{let{x:r,y:i,width:s,height:o,angle:a}=e,l=O(r+s/2-.1,i+o/2-.1),f=ue(t,l,-a),c=Ot(n*o,5,80),d=Ot(n*s,5,80);return f[0]<=r+s/2&&f[1]>l[1]-c&&f[1]<l[1]+c?ue(O(r-Tn,l[1]),l,a):f[1]<=i+o/2&&f[0]>l[0]-d&&f[0]<l[0]+d?ue(O(l[0],i-Tn),l,a):f[0]>=r+s/2&&f[1]>l[1]-c&&f[1]<l[1]+c?ue(O(r+s+Tn,l[1]),l,a):f[1]>=i+o/2&&f[0]>l[0]-d&&f[0]<l[0]+d?ue(O(l[0],i+o+Tn),l,a):t},JLe=(e,t,n,r,i)=>{if(n==null||n.elementId!==r.id&&e.points.length>2)return null;let s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(Ge(e)&&B4(n)){let d=Ow(n.fixedPoint)??G4(e,r,t==="startBinding"?"start":"end").fixedPoint,u=O(r.x+r.width/2,r.y+r.height/2),h=O(r.x+d[0]*r.width,r.y+d[1]*r.height),g=ue(h,u,r.angle);return We.pointFromAbsoluteCoords(e,g,i)}let a=o-s,l=We.getPointAtIndexGlobalCoordinates(e,a,i),f=tOe(r,n.focus,l),c;if(n.gap===0)c=f;else{let d=We.getPointAtIndexGlobalCoordinates(e,o,i),u=O(r.x+r.width/2,r.y+r.height/2),h=cn(l,d)+cn(l,u)+Math.max(r.width,r.height)*2,g=Mee(r,st(l,jt(br(as(tt(f,l)),h),l)),n.gap).sort((y,U)=>xb(y,l)-xb(U,l));g.length>1?c=g[0]:g.length===1?c=f:c=d}return We.pointFromAbsoluteCoords(e,c,i)},G4=(e,t,n,r)=>{let i=[t.x,t.y,t.x+t.width,t.y+t.height],s=kb(e,t,n),o=O(i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2),a=ue(s,o,-t.angle);return{fixedPoint:Ow([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},v$=(e,t,n)=>{if(t==null||n==null)return t;let{width:r,height:i}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(Ay(e,r,i),t.gap*(r<i?r/s:i/o)));return{...t,gap:a}},Gp=(e,t,n,r,i)=>pl(qee(e,t,n),r,n,i,Ge(e),Ge(e)),qee=(e,t,n)=>{let r=t==="start"?0:-1;return ul(We.getPointAtIndexGlobalCoordinates(e,r,n))},Qee=(e,t,n,r)=>{let i=new Set,s=new Set,o=r==="duplicatesServeAsOld",a=new Map([...n].map(([l,f])=>[f,l]));t.forEach(l=>{let{boundElements:f}=l;if(f!=null&&f.length>0&&(f.forEach(c=>{o&&!n.has(c.id)&&i.add(c.id)}),s.add(n.get(l.id))),hc(l)){if(l.startBinding!=null){let{elementId:c}=l.startBinding;o&&!n.has(c)&&s.add(c)}if(l.endBinding!=null){let{elementId:c}=l.endBinding;o&&!n.has(c)&&s.add(c)}(l.startBinding!=null||l.endBinding!=null)&&i.add(n.get(l.id))}}),e.filter(({id:l})=>i.has(l)).forEach(l=>{let{startBinding:f,endBinding:c}=l;xe(l,{startBinding:E$(f,n),endBinding:E$(c,n)})}),e.filter(({id:l})=>s.has(l)).forEach(l=>{var d;let f=a.get(l.id),c=(d=e.find(({id:u})=>u===f))==null?void 0:d.boundElements;c&&c.length>0&&xe(l,{boundElements:c.map(u=>n.has(u.id)?{id:n.get(u.id),type:u.type}:u)})})},E$=(e,t)=>e==null?null:{...e,elementId:t.get(e.elementId)??e.elementId},Jee=(e,t)=>{let n=mt(e);for(let r of t)Xp.unbindAffected(n,r,xe),Kp.unbindAffected(n,r,xe)},Sb=(e,t,n=[])=>{if(!e)return null;let r=e.filter(i=>!t.has(i.id));return r.push(...n.map(i=>({id:i.id,type:i.type}))),r},W3=(e,{x:t,y:n},r,i,s)=>{let o=Ay(e,e.width,e.height,i),a=pf(e,r);return eM(O(t,n),a,o)||s===!0&&Pg(O(t,n),ac(e))},Ay=(e,t,n,r)=>{let i=r!=null&&r.value&&r.value<1?r.value:1,s=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*s,32),xN/i+wN)},eOe=(e,t,n)=>{let r=O(e.x+e.width/2,e.y+e.height/2);if(El(t,n))return 0;let i=ue(t,r,-e.angle),s=ue(n,r,-e.angle),o=Math.sign(si(tt(s,t),tt(s,r)))*-1,a=st(s,jt(br(as(tt(s,i)),Math.max(e.width*2,e.height*2)),s)),l=e.type==="diamond"?[st(O(e.x+e.width/2,e.y),O(e.x+e.width/2,e.y+e.height)),st(O(e.x,e.y+e.height/2),O(e.x+e.width,e.y+e.height/2))]:[st(O(e.x,e.y),O(e.x+e.width,e.y+e.height)),st(O(e.x+e.width,e.y),O(e.x,e.y+e.height))],f=e.type==="diamond"?[st(O(e.x+e.width/2,e.y-e.height),O(e.x+e.width/2,e.y+e.height*2)),st(O(e.x-e.width,e.y+e.height/2),O(e.x+e.width*2,e.y+e.height/2))]:[st(O(e.x-e.width,e.y-e.height),O(e.x+e.width*2,e.y+e.height*2)),st(O(e.x+e.width*2,e.y-e.height),O(e.x-e.width,e.y+e.height*2))];return[wb(a,f[0]),wb(a,f[1])].filter(c=>c!==null).sort((c,d)=>xb(c,n)-xb(d,n)).map((c,d)=>o*cn(r,c)/(e.type==="diamond"?cn(l[d][0],l[d][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((c,d)=>Math.abs(c)-Math.abs(d))[0]??0},tOe=(e,t,n)=>{let r=O(e.x+e.width/2,e.y+e.height/2);if(t===0)return r;let i=(e.type==="diamond"?[O(e.x,e.y+e.height/2),O(e.x+e.width/2,e.y),O(e.x+e.width,e.y+e.height/2),O(e.x+e.width/2,e.y+e.height)]:[O(e.x,e.y),O(e.x+e.width,e.y),O(e.x+e.width,e.y+e.height),O(e.x,e.y+e.height)]).map(o=>jt(br(tt(o,r),Math.abs(t)),r)).map(o=>ue(o,r,e.angle)),s=[si(tt(n,i[0]),tt(i[1],i[0]))>0&&(t>0?si(tt(n,i[1]),tt(i[2],i[1]))<0:si(tt(n,i[3]),tt(i[0],i[3]))<0),si(tt(n,i[1]),tt(i[2],i[1]))>0&&(t>0?si(tt(n,i[2]),tt(i[3],i[2]))<0:si(tt(n,i[0]),tt(i[1],i[0]))<0),si(tt(n,i[2]),tt(i[3],i[2]))>0&&(t>0?si(tt(n,i[3]),tt(i[0],i[3]))<0:si(tt(n,i[1]),tt(i[2],i[1]))<0),si(tt(n,i[3]),tt(i[0],i[3]))>0&&(t>0?si(tt(n,i[0]),tt(i[1],i[0]))<0:si(tt(n,i[2]),tt(i[3],i[2]))<0)];return s[0]?t>0?i[1]:i[0]:s[1]?t>0?i[2]:i[1]:s[2]?t>0?i[3]:i[2]:t>0?i[0]:i[3]},nOe=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),Dw=(e,t,n)=>{var r;kl(t)&&(((r=t.boundElements)==null?void 0:r.slice())??[]).forEach(({id:i})=>{n(e.get(i),"boundElements",i)})},Lw=(e,t,n)=>{let r=[];if(t.frameId){let i=t.frameId;r.push(n(e.get(i),"frameId",i))}if(Hn(t)){let i=t.containerId;r.push(n(e.get(i),"containerId",i))}if(Rt(t)){if(t.startBinding){let i=t.startBinding.elementId;r.push(n(e.get(i),"startBinding",i))}if(t.endBinding){let i=t.endBinding.elementId;r.push(n(e.get(i),"endBinding",i))}}return r},Xp=class{static unbindAffected(e,t,n){t&&Lw(e,t,r=>{!r||r.isDeleted||Dw(e,r,(i,s,o)=>{o===t.id&&n(r,{boundElements:Sb(r.boundElements,new Set([o]))})})})}};Q(Xp,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||Lw(e,t,(r,i)=>{var s,o;if(!r||r.isDeleted){n(t,{[i]:null});return}i!=="frameId"&&((s=r.boundElements)!=null&&s.find(a=>a.id===t.id)||(Rt(t)&&n(r,{boundElements:Sb(r.boundElements,new Set,new Array(t))}),Ve(t)&&((o=r.boundElements)!=null&&o.find(a=>a.type==="text")?n(t,{[i]:null}):n(r,{boundElements:Sb(r.boundElements,new Set,new Array(t))}))))})});var Kp=class{static unbindAffected(e,t,n){t&&Dw(e,t,r=>{!r||r.isDeleted||Lw(e,r,(i,s,o)=>{o===t.id&&n(r,{[s]:null})})})}};Q(Kp,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||Dw(e,t,(r,i,s)=>{var o,a;if(!r||r.isDeleted){n(t,{boundElements:Sb(t.boundElements,new Set([s]))});return}Ve(r)&&(((a=(((o=t.boundElements)==null?void 0:o.slice())??[]).reverse().find(l=>l.type==="text"))==null?void 0:a.id)===r.id?r.containerId!==t.id&&n(r,{containerId:t.id}):(r.containerId!==null&&n(r,{containerId:null}),n(t,{boundElements:Sb(t.boundElements,new Set([r.id]))})))})});var aM=(e,t)=>{let[n,r]=Ow(e);return ue(O(t.x+t.width*n,t.y+t.height*r),O(t.x+t.width/2,t.y+t.height/2),t.angle)},rOe=(e,t)=>{let n=e.startBinding&&t.get(e.startBinding.elementId),r=e.endBinding&&t.get(e.endBinding.elementId),i=n&&e.startBinding?aM(e.startBinding.fixedPoint,n):O(e.x+e.points[0][0],e.y+e.points[0][1]),s=r&&e.endBinding?aM(e.endBinding.fixedPoint,r):O(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[i,s]},iOe=(e,t)=>{let[n,r]=rOe(e,t);return[We.pointFromAbsoluteCoords(e,n,t),We.pointFromAbsoluteCoords(e,r,t)]},Ow=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,sOe=(e,t)=>{let[n,r,i,s]=t,{x:o,y:a}=dl({sceneX:n,sceneY:r},e),{x:l,y:f}=dl({sceneX:i,sceneY:s},e);return l-o>e.width||f-a>e.height},ete=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:r})=>{let i=(t.width-((r==null?void 0:r.right)??0))/2/n.value-e.x;i+=((r==null?void 0:r.left)??0)/2/n.value;let s=(t.height-((r==null?void 0:r.bottom)??0))/2/n.value-e.y;return s+=((r==null?void 0:r.top)??0)/2/n.value,{scrollX:i,scrollY:s}},Cb=(e,t)=>{if(e=NBe(e),!e.length)return{scrollX:0,scrollY:0};let[n,r,i,s]=pn(e);sOe(t,[n,r,i,s])&&([n,r,i,s]=ILe(e,_n({clientX:t.scrollX,clientY:t.scrollY},t)));let o=(n+i)/2,a=(r+s)/2;return ete({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Pf=e=>Ot(Uc(e,6),ZI,qI),oOe=e=>Ot(Math.round(e),1,100),tte=e=>Ot(Math.round(e),1,100),nte=(e,t,n)=>{let r=n.reduce((i,s)=>(s.groupIds.includes(e)&&(i[s.id]=!0),i),{});return Object.keys(r).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...r}}},vs=function(){let e=null,t=null,n=null,r=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;let f={};for(let u of s){let h=u.groupIds;if(a.editingGroupId){let g=h.indexOf(a.editingGroupId);g>-1&&(h=h.slice(0,g))}if(h.length>0){let g=h[h.length-1];f[g]=!0}}let c={},d=o.reduce((u,h)=>{if(h.isDeleted)return u;let g=h.groupIds.find(y=>f[y]);return g&&(u[h.id]=!0,Array.isArray(c[g])?c[g].push(h.id):c[g]=[h.id]),u},{});for(let u of Object.keys(c))c[u].length<2&&f[u]&&(f[u]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:f,selectedElementIds:an({...a.selectedElementIds,...d},l)},n},i=(s,o,a,l)=>{let f=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):Nt(o,s);return f.length?r(f,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:an(s.selectedElementIds,a)}};return i.clearCache=()=>{t=null,e=null,n=null},i}(),rte=(e,t)=>ite(e,t)!=null,ite=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),$h=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),ste=(e,t)=>{let n={...t,selectedGroupIds:{}};for(let r of e){let i=r.groupIds;if(t.editingGroupId){let s=i.indexOf(t.editingGroupId);s>-1&&(i=i.slice(0,s))}if(i.length>0){let s=i[i.length-1];n={...n,...nte(s,n,e)}}}return n.selectedGroupIds},aOe=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),Ab=(e,t)=>e.groupIds.includes(t),Fn=(e,t)=>{let n=[];for(let r of e.values())Ab(r,t)&&n.push(r);return n},lOe=(e,t)=>e.groupIds.find(n=>t[n]),cOe=(e,t,n)=>{let r=[...e],i=t?e.indexOf(t):-1,s=i>-1?i:e.length;for(let o=0;o<s;o++)r[o]=n(r[o]);return r},fOe=(e,t,n)=>{let r=[...e],i=n?r.indexOf(n):-1,s=i>-1?i:r.length;return r.splice(s,0,t),r},dOe=(e,t)=>e.filter(n=>!t[n]),jw=(e,t)=>{let n=new Map;return e.forEach(r=>{let i=r.groupIds.length===0?r.id:r.groupIds[r.groupIds.length-1],s=n.get(i)||[],o=At(r,t);o&&s.push(o),n.set(i,[...s,r])}),Array.from(n.values())},uOe=e=>{let t=new Set;for(let[,n]of e)if(!n.isDeleted)for(let r of n.groupIds??[])t.add(r);return t},ote=e=>{let t=e.flatMap(i=>i.groupIds),n=new Map,r=0;for(let i of t)n.set(i,(n.get(i)??0)+1),n.get(i)>r&&(r=n.get(i));return r===e.length},Og=e=>e.groupIds.length>0,hOe=8,k$=99999,Bw=e=>hOe/e,Ks=class{};Q(Ks,"referenceSnapPoints",null),Q(Ks,"visibleGaps",null),Q(Ks,"setReferenceSnapPoints",e=>{Ks.referenceSnapPoints=e}),Q(Ks,"getReferenceSnapPoints",()=>Ks.referenceSnapPoints),Q(Ks,"setVisibleGaps",e=>{Ks.visibleGaps=e}),Q(Ks,"getVisibleGaps",()=>Ks.visibleGaps),Q(Ks,"destroy",()=>{Ks.referenceSnapPoints=null,Ks.visibleGaps=null});var cf=Ks,Mb=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,Gu=({event:e,app:t,selectedElements:n})=>e?t.state.objectsSnapModeEnabled&&!e[J.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[J.CTRL_OR_CMD]&&!Mb(t):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,pOe=(e,t,n=.01)=>Math.abs(e-t)<=n,Tb=(e,t,{omitCenter:n,boundingBoxCorners:r,dragOffset:i}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){let o=e[0],[a,l,f,c,d,u]=vt(o,t);i&&(a+=i.x,f+=i.x,d+=i.x,l+=i.y,c+=i.y,u+=i.y);let h=(f-a)/2,g=(c-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!r){let y=ue(O(a,l+g),O(d,u),o.angle),U=ue(O(a+h,l),O(d,u),o.angle),x=ue(O(f,l+g),O(d,u),o.angle),v=ue(O(a+h,c),O(d,u),o.angle),E=O(d,u);s=n?[y,U,x,v]:[y,U,x,v,E]}else{let y=ue(O(a,l),O(d,u),o.angle),U=ue(O(f,l),O(d,u),o.angle),x=ue(O(a,c),O(d,u),o.angle),v=ue(O(f,c),O(d,u),o.angle),E=O(d,u);s=n?[y,U,x,v]:[y,U,x,v,E]}}else if(e.length>1){let[o,a,l,f]=yN(e,i??{x:0,y:0}),c=l-o,d=f-a,u=O(o,a),h=O(l,a),g=O(o,f),y=O(l,f),U=O(o+c/2,a+d/2);s=n?[u,h,g,y]:[u,h,g,y,U]}return s.map(o=>O(sr(o[0]),sr(o[1])))},ate=(e,t,n,r)=>{let i=t.filter(s=>ht(s)).map(s=>s.id);return tne(e,t,n,r).filter(s=>!(s.frameId&&i.includes(s.frameId)))},mOe=(e,t,n,r)=>{let i=ate(e,t,n,r),s=jw(i,r).filter(d=>!(d.length===1&&Hn(d[0]))).map(d=>pn(d).map(u=>sr(u))),o=s.sort((d,u)=>d[0]-u[0]),a=[],l=0;e:for(let d=0;d<o.length;d++){let u=o[d];for(let h=d+1;h<o.length;h++){if(++l>k$)break e;let g=o[h],[,y,U,x]=u,[v,E,,k]=g;U<v&&O4(ns(y,x),ns(E,k))&&a.push({startBounds:u,endBounds:g,startSide:[O(U,y),O(U,x)],endSide:[O(v,E),O(v,k)],length:v-U,overlap:j4(ns(y,x),ns(E,k))})}}let f=s.sort((d,u)=>d[1]-u[1]),c=[];l=0;e:for(let d=0;d<f.length;d++){let u=f[d];for(let h=d+1;h<f.length;h++){if(++l>k$)break e;let g=f[h],[y,,U,x]=u,[v,E,k]=g;x<E&&O4(ns(y,U),ns(v,k))&&c.push({startBounds:u,endBounds:g,startSide:[O(y,x),O(U,x)],endSide:[O(v,E),O(k,E)],length:E-x,overlap:j4(ns(y,U),ns(v,k))})}}return{horizontalGaps:a,verticalGaps:c}},S$=(e,t,n,r,i,s,o)=>{if(!Gu({app:n,event:r,selectedElements:e}))return[];if(e.length===0)return[];let a=cf.getVisibleGaps();if(a){let{horizontalGaps:l,verticalGaps:f}=a,[c,d,u,h]=yN(e,t).map(U=>sr(U)),g=(c+u)/2,y=(d+h)/2;for(let U of l){if(!O4(ns(d,h),U.overlap))continue;let x=U.startSide[0][0]+U.length/2,v=sr(x-g);if(U.length>u-c&&Math.abs(v)<=o.x){Math.abs(v)<o.x&&(i.length=0),o.x=Math.abs(v);let R={type:"gap",direction:"center_horizontal",gap:U,offset:v};i.push(R);continue}let[,,E]=U.endBounds,k=c-E,M=sr(U.length-k);if(Math.abs(M)<=o.x){Math.abs(M)<o.x&&(i.length=0),o.x=Math.abs(M);let R={type:"gap",direction:"side_right",gap:U,offset:M};i.push(R);continue}let[S,,,]=U.startBounds,A=S-u,I=sr(A-U.length);if(Math.abs(I)<=o.x){Math.abs(I)<o.x&&(i.length=0),o.x=Math.abs(I);let R={type:"gap",direction:"side_left",gap:U,offset:I};i.push(R);continue}}for(let U of f){if(!O4(ns(c,u),U.overlap))continue;let x=U.startSide[0][1]+U.length/2,v=sr(x-y);if(U.length>h-d&&Math.abs(v)<=o.y){Math.abs(v)<o.y&&(s.length=0),o.y=Math.abs(v);let R={type:"gap",direction:"center_vertical",gap:U,offset:v};s.push(R);continue}let[,E,,]=U.startBounds,k=E-h,M=sr(k-U.length);if(Math.abs(M)<=o.y){Math.abs(M)<o.y&&(s.length=0),o.y=Math.abs(M);let R={type:"gap",direction:"side_top",gap:U,offset:M};s.push(R);continue}let[,,,S]=U.endBounds,A=sr(d-S),I=U.length-A;if(Math.abs(I)<=o.y){Math.abs(I)<o.y&&(s.length=0),o.y=Math.abs(I);let R={type:"gap",direction:"side_bottom",gap:U,offset:I};s.push(R);continue}}}},gOe=(e,t,n,r)=>{let i=ate(e,t,n,r);return jw(i,r).filter(s=>!(s.length===1&&Hn(s[0]))).flatMap(s=>Tb(s,r))},jg=(e,t,n,r,i,s,o)=>{if(!Gu({app:n,event:r,selectedElements:e})||e.length===0&&t.length===0)return[];let a=cf.getReferenceSnapPoints();if(a)for(let l of t)for(let f of a){let c=f[0]-l[0],d=f[1]-l[1];Math.abs(c)<=o.x&&(Math.abs(c)<o.x&&(i.length=0),i.push({type:"point",points:[l,f],offset:c}),o.x=Math.abs(c)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,f],offset:d}),o.y=Math.abs(d))}},bOe=(e,t,n,r,i)=>{var U,x;let s=n.state,o=Nt(e,s);if(!Gu({app:n,event:r,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=sr(t.x),t.y=sr(t.y);let a=[],l=[],f=Bw(s.zoom.value),c={x:f,y:f},d=Tb(o,i,{dragOffset:t});jg(o,d,n,r,a,l,c),S$(o,t,n,r,a,l,c);let u={x:((U=a[0])==null?void 0:U.offset)??0,y:((x=l[0])==null?void 0:x.offset)??0};c.x=0,c.y=0,a.length=0,l.length=0;let h={x:sr(t.x+u.x),y:sr(t.y+u.y)};jg(o,Tb(o,i,{dragOffset:h}),n,r,a,l,c),S$(o,h,n,r,a,l,c);let g=vN(a,l),y=UOe(o,h,[...a,...l].filter(v=>v.type==="gap"));return{snapOffset:u,snapLines:[...g,...y]}},sr=e=>Math.round(e*10**6)/10**6,C$=e=>{let t=new Map;for(let n of e){let r=n.join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},vN=(e,t)=>{let n={},r={};if(e.length>0){for(let i of e)if(i.type==="point"){let s=sr(i.points[0][0]);n[s]||(n[s]=[]),n[s].push(...i.points.map(o=>O(sr(o[0]),sr(o[1]))))}}if(t.length>0){for(let i of t)if(i.type==="point"){let s=sr(i.points[0][1]);r[s]||(r[s]=[]),r[s].push(...i.points.map(o=>O(sr(o[0]),sr(o[1]))))}}return Object.entries(n).map(([i,s])=>({type:"points",points:C$(s.map(o=>O(Number(i),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(r).map(([i,s])=>({type:"points",points:C$(s.map(o=>O(o[0],Number(i))).sort((o,a)=>o[0]-a[0]))})))},yOe=e=>{let t=new Map;for(let n of e){let r=n.points.flat().map(i=>[sr(i)]).join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},UOe=(e,t,n)=>{let[r,i,s,o]=yN(e,t),a=[];for(let l of n){let[f,c,d,u]=l.gap.startBounds,[h,g,y,U]=l.gap.endBounds,x=j4(ns(i,o),l.gap.overlap),v=j4(ns(r,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[O(l.gap.startSide[0][0],E),O(r,E)]},{type:"gap",direction:"horizontal",points:[O(s,E),O(l.gap.endSide[0][0],E)]})}break}case"center_vertical":{if(v){let E=(v[0]+v[1])/2;a.push({type:"gap",direction:"vertical",points:[O(E,l.gap.startSide[0][1]),O(E,i)]},{type:"gap",direction:"vertical",points:[O(E,o),O(E,l.gap.endSide[0][1])]})}break}case"side_right":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[O(d,E),O(h,E)]},{type:"gap",direction:"horizontal",points:[O(y,E),O(r,E)]})}break}case"side_left":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[O(s,E),O(f,E)]},{type:"gap",direction:"horizontal",points:[O(d,E),O(h,E)]})}break}case"side_top":{if(v){let E=(v[0]+v[1])/2;a.push({type:"gap",direction:"vertical",points:[O(E,o),O(E,c)]},{type:"gap",direction:"vertical",points:[O(E,u),O(E,g)]})}break}case"side_bottom":{if(v){let E=(v[0]+v[1])/2;a.push({type:"gap",direction:"vertical",points:[O(E,u),O(E,g)]},{type:"gap",direction:"vertical",points:[O(E,U),O(E,i)]})}break}}}return yOe(a.map(l=>({...l,points:l.points.map(f=>O(sr(f[0]),sr(f[1])))})))},A$=(e,t,n,r,i,s)=>{var S,A;if(!Gu({event:r,selectedElements:e,app:n})||e.length===0||e.length===1&&!pOe(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,f]=pn(t);s&&(s.includes("e")?l+=i.x:s.includes("w")&&(o+=i.x),s.includes("n")?a+=i.y:s.includes("s")&&(f+=i.y));let c=[];if(s)switch(s){case"e":{c.push(O(l,a),O(l,f));break}case"w":{c.push(O(o,a),O(o,f));break}case"n":{c.push(O(o,a),O(l,a));break}case"s":{c.push(O(o,f),O(l,f));break}case"ne":{c.push(O(l,a));break}case"nw":{c.push(O(o,a));break}case"se":{c.push(O(l,f));break}case"sw":{c.push(O(o,f));break}}let d=Bw(n.state.zoom.value),u={x:d,y:d},h=[],g=[];jg(t,c,n,r,h,g,u);let y={x:((S=h[0])==null?void 0:S.offset)??0,y:((A=g[0])==null?void 0:A.offset)??0};u.x=0,u.y=0,h.length=0,g.length=0;let[U,x,v,E]=pn(e).map(I=>sr(I)),k=[O(U,x),O(U,E),O(v,x),O(v,E)];jg(e,k,n,r,h,g,u);let M=vN(h,g);return{snapOffset:y,snapLines:M}},xOe=(e,t,n,r,i,s)=>{var g,y;if(!Gu({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};let o=[O(r.x+i.x,r.y+i.y)],a=Bw(t.state.zoom.value),l={x:a,y:a},f=[],c=[];jg([e],o,t,n,f,c,l);let d={x:((g=f[0])==null?void 0:g.offset)??0,y:((y=c[0])==null?void 0:y.offset)??0};l.x=0,l.y=0,f.length=0,c.length=0;let u=Tb([e],s,{boundingBoxCorners:!0,omitCenter:!0});jg([e],u,t,n,f,c,l);let h=vN(f,c);return{snapOffset:d,snapLines:h}},wOe=(e,t,n,r,i)=>{if(!Gu({event:r,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};let s=tne(e,[],t.state,i),o=Bw(t.state.zoom.value),a={x:o,y:o},l=[],f=[];for(let c of s){let d=Tb([c],i);for(let u of d){let h=u[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(f.length=0),f.push({type:"pointer",points:[u,O(u[0],n.y)],direction:"vertical"}),a.x=h);let g=u[1]-n.y;Math.abs(g)<=Math.abs(a.y)&&(Math.abs(g)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[u,O(n.x,u[1])],direction:"horizontal"}),a.y=g)}}return{originOffset:{x:f.length>0?f[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...f,...l]}},vOe=e=>e===oi.rectangle||e===oi.ellipse||e===oi.diamond||e===oi.frame||e===oi.magicframe||e===oi.image||e===oi.text,Gr=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t],Od={version:null,points:[],zoom:null},kr=class Dt{constructor(t){Q(this,"elementId"),Q(this,"selectedPointsIndices"),Q(this,"pointerDownState"),Q(this,"isDragging"),Q(this,"lastUncommittedPoint"),Q(this,"pointerOffset"),Q(this,"startBindingElement"),Q(this,"endBindingElement"),Q(this,"hoverPointIndex"),Q(this,"segmentMidPointHoveredCoords"),Q(this,"elbowed"),this.elementId=t.id,El(t.points[0],O(0,0))||console.error("Linear element is not normalized",Error().stack),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=Ge(t)&&t.elbowed}static getElement(t,n){return n.get(t)||null}static handleBoxSelection(t,n,r,i){if(!n.editingLinearElement||!n.selectionElement)return!1;let{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=Dt.getElement(a,i);if(!l)return!1;let[f,c,d,u]=vt(n.selectionElement,i),h=Dt.getPointsGlobalCoordinates(l,i).reduce((g,y,U)=>((y[0]>=f&&y[0]<=d&&y[1]>=c&&y[1]<=u||t.shiftKey&&(o!=null&&o.includes(U)))&&g.push(U),g),[]).filter(g=>!(Ge(l)&&g!==0&&g!==l.points.length-1));r({editingLinearElement:{...s,selectedPointsIndices:h.length?h:null}})}static handlePointDragging(t,n,r,i,s,o,a){var g;if(!o)return!1;let{elementId:l}=o,f=a.getNonDeletedElementsMap(),c=Dt.getElement(l,f);if(!c||Ge(c)&&!o.pointerDownState.lastClickedIsEndPoint&&o.pointerDownState.lastClickedPoint!==0)return!1;let d=Ge(c)?(g=o.selectedPointsIndices)==null?void 0:g.reduce((y,U)=>U===0?[0,y[1]]:[y[0],c.points.length-1],[!1,!1]).filter(y=>typeof y=="number"):o.selectedPointsIndices,u=Ge(c)?o.pointerDownState.lastClickedPoint>0?c.points.length-1:0:o.pointerDownState.lastClickedPoint,h=c.points[u];if(d&&h){if(x2(t)&&d.length===1&&c.points.length>1){let y=d[0],U=c.points[y===0?1:y-1],[x,v]=Dt._getShiftLockedDelta(c,f,U,O(r,i),t[J.CTRL_OR_CMD]?null:n.getEffectiveGridSize());Dt.movePoints(c,[{index:y,point:O(x+U[0],v+U[1]),isDragging:y===u}])}else{let y=Dt.createPointAt(c,f,r-o.pointerOffset.x,i-o.pointerOffset.y,t[J.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),U=y[0]-h[0],x=y[1]-h[1];Dt.movePoints(c,d.map(v=>{let E=v===u?Dt.createPointAt(c,f,r-o.pointerOffset.x,i-o.pointerOffset.y,t[J.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):O(c.points[v][0]+U,c.points[v][1]+x);return{index:v,point:E,isDragging:v===u}}))}if(At(c,f)&&My(c,f,!1),hc(c,!1)){let y=[];d[0]===0&&y.push(ul(Dt.getPointGlobalCoordinates(c,c.points[0],f)));let U=d[d.length-1];U===c.points.length-1&&y.push(ul(Dt.getPointGlobalCoordinates(c,c.points[U],f))),y.length&&s(c,y)}return!0}return!1}static handlePointerUp(t,n,r,i){var h;let s=i.getNonDeletedElementsMap(),o=i.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:f,pointerDownState:c}=n,d=Dt.getElement(a,s);if(!d)return n;let u={};if(f&&l){for(let g of l)if(g===0||g===d.points.length-1){Wf(d.points,r.zoom.value)&&Dt.movePoints(d,[{index:g,point:g===0?d.points[d.points.length-1]:d.points[0]}]);let y=oh(r)?pl(ul(Dt.getPointAtIndexGlobalCoordinates(d,g,s)),o,s,r.zoom,Ge(d),Ge(d)):null;u[g===0?"startBindingElement":"endBindingElement"]=y}}return{...n,...u,selectedPointsIndices:f||t.shiftKey?!f&&t.shiftKey&&((h=c.prevSelectedPointsIndices)!=null&&h.includes(c.lastClickedPoint))?l&&l.filter(g=>g!==c.lastClickedPoint):l:l!=null&&l.includes(c.lastClickedPoint)?[c.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,r,i,s){if(Ge(t))return i>=0&&i<t.points.length?cn(n,r)*s.value<Dt.POINT_HANDLE_SIZE/2:!1;let o=cn(n,r);return t.points.length>2&&t.roundness&&(o=rLe(t,r)),o*s.value<Dt.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,r,i,s){let o=Ey(n,r);if(t.points.length>2&&t.roundness){let a=Iee(t,t.points[i]);if(a){let l=iLe(t,t.points[i],.5);o=Dt.getPointGlobalCoordinates(t,Nee(a[0],a[1],a[2],a[3],l),s)}}return o}static getSegmentMidPointIndex(t,n,r,i){let s=Dt.getElement(t.elementId,i);if(!s)return-1;let o=Dt.getEditorMidPoints(s,i,n),a=0;for(;a<o.length;){if(Dt.arePointsEqual(r,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,r,i,s,o){var I;let a=n.state,l=o.getNonDeletedElementsMap(),f=o.getNonDeletedElements(),c={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return c;let{elementId:d}=s,u=Dt.getElement(d,l);if(!u)return c;let h=Dt.getSegmentMidpointHitCoords(s,i,a,l),g=null;if(h)g=Dt.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(xe(u,{points:[...u.points,Dt.createPointAt(u,l,i.x,i.y,t[J.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),c.didAddPoint=!0),r.shouldCaptureIncrement(),c.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:h,index:g,added:!1}},selectedPointsIndices:[u.points.length-1],lastUncommittedPoint:null,endBindingElement:pl(i,f,l,n.state.zoom,s.elbowed)},c.didAddPoint=!0,c;let y=Dt.getPointIndexUnderCursor(u,l,a.zoom,i.x,i.y);if(y>=0||h)c.hitElement=u;else{let{startBindingElement:R,endBindingElement:D}=s;oh(a)&&hc(u)&&Pw(u,R,D,l,o)}let[U,x,v,E]=vt(u,l),k=(U+v)/2,M=(x+E)/2,S=y>-1&&ue(O(u.x+u.points[y][0],u.y+u.points[y][1]),O(k,M),u.angle),A=y>-1||t.shiftKey?t.shiftKey||(I=s.selectedPointsIndices)!=null&&I.includes(y)?EOe([...s.selectedPointsIndices||[],y]):[y]:null;return c.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:y,lastClickedIsEndPoint:y===u.points.length-1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:h,index:g,added:!1}},selectedPointsIndices:A,pointerOffset:S?{x:i.x-S[0],y:i.y-S[1]}:{x:0,y:0}},c}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:El(t,n)}static handlePointerMove(t,n,r,i,s){let o=i.state;if(!o.editingLinearElement)return null;let{elementId:a,lastUncommittedPoint:l}=o.editingLinearElement,f=Dt.getElement(a,s);if(!f)return o.editingLinearElement;let{points:c}=f,d=c[c.length-1];if(!t.altKey)return d===l&&Dt.deletePoints(f,[c.length-1]),{...o.editingLinearElement,lastUncommittedPoint:null};let u;if(x2(t)&&c.length>=2){let h=c[c.length-2],[g,y]=Dt._getShiftLockedDelta(f,s,h,O(n,r),t[J.CTRL_OR_CMD]?null:i.getEffectiveGridSize());u=O(g+h[0],y+h[1])}else u=Dt.createPointAt(f,s,n-o.editingLinearElement.pointerOffset.x,r-o.editingLinearElement.pointerOffset.y,t[J.CTRL_OR_CMD]||Ge(f)?null:i.getEffectiveGridSize());return d===l?Dt.movePoints(f,[{index:f.points.length-1,point:u}]):Dt.addPoints(f,[{point:u}]),{...o.editingLinearElement,lastUncommittedPoint:f.points[f.points.length-1]}}static getPointGlobalCoordinates(t,n,r){let[i,s,o,a]=vt(t,r),l=(i+o)/2,f=(s+a)/2,{x:c,y:d}=t;return ue(O(c+n[0],d+n[1]),O(l,f),t.angle)}static getPointsGlobalCoordinates(t,n){let[r,i,s,o]=vt(t,n),a=(r+s)/2,l=(i+o)/2;return t.points.map(f=>{let{x:c,y:d}=t;return ue(O(c+f[0],d+f[1]),O(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,r){let i=n<0?t.points.length+n:n,[s,o,a,l]=vt(t,r),f=(s+a)/2,c=(o+l)/2,d=t.points[i],{x:u,y:h}=t;return ue(d?O(u+d[0],h+d[1]):O(u,h),O(f,c),t.angle)}static pointFromAbsoluteCoords(t,n,r){if(Ge(t))return O(n[0]-t.x,n[1]-t.y);let[i,s,o,a]=vt(t,r),l=(i+o)/2,f=(s+a)/2,[c,d]=ue(O(n[0],n[1]),O(l,f),-t.angle);return O(c-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,r,i,s){let o=Dt.getPointsGlobalCoordinates(t,n),a=o.length;for(;--a>-1;){let l=o[a];if(cn(O(i,s),O(l[0],l[1]))*r.value<Dt.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,r,i,s){let o=Gr(r,i,s),[a,l,f,c]=vt(t,n),d=(a+f)/2,u=(l+c)/2,[h,g]=ue(O(o[0],o[1]),O(d,u),-t.angle);return O(h-t.x,g-t.y)}static getNormalizedPoints(t){let{points:n}=t,r=n[0][0],i=n[0][1];return{points:n.map(s=>O(s[0]-r,s[1]-i)),x:t.x+r,y:t.y+i}}static normalizePoints(t){xe(t,Dt.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){fs(t.editingLinearElement,"Not currently editing a linear element");let{selectedPointsIndices:r,elementId:i}=t.editingLinearElement,s=Dt.getElement(i,n);fs(s,"The linear element does not exist in the provided Scene"),fs(r!=null,"There are no selected points to duplicate");let{points:o}=s,a=[],l=!1,f=-1,c=o.reduce((d,u,h)=>{if(++f,d.push(u),r.includes(h)){let g=o[h+1];g||(l=!0),d.push(g?O((u[0]+g[0])/2,(u[1]+g[1])/2):O(u[0],u[1])),a.push(f+1),++f}return d},[]);if(xe(s,{points:c}),l){let d=s.points[s.points.length-1];Dt.movePoints(s,[{index:s.points.length-1,point:O(d[0]+30,d[1]+30)}])}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:a}}}static deletePoints(t,n){let r=0,i=0;if(n.includes(0)){let o=t.points.find((a,l)=>!n.includes(l));o&&(r=o[0],i=o[1])}let s=t.points.reduce((o,a,l)=>(n.includes(l)||o.push(o.length?O(a[0]-r,a[1]-i):O(0,0)),o),[]);Dt._updatePoints(t,s,r,i)}static addPoints(t,n){let r=[...t.points,...n.map(i=>i.point)];Dt._updatePoints(t,r,0,0)}static movePoints(t,n,r){var c,d,u;let{points:i}=t,[s,o]=((c=n.find(({index:h})=>h===0))==null?void 0:c.point)??O(0,0),[a,l]=O(s-i[0][0],o-i[0][1]),f=Ge(t)?[((d=n.find(h=>h.index===0))==null?void 0:d.point)??i[0],((u=n.find(h=>h.index===i.length-1))==null?void 0:u.point)??i[i.length-1]]:i.map((h,g)=>{var U;let y=((U=n.find(x=>x.index===g))==null?void 0:U.point)??h;return O(y[0]-a,y[1]-l)});Dt._updatePoints(t,f,a,l,r,{isDragging:n.reduce((h,g)=>h||g.isDragging===!0,!1)})}static shouldAddMidpoint(t,n,r,i){let s=Dt.getElement(t.elementId,i);if(s&&Ge(s)||!s)return!1;let{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;let a=t.pointerDownState.origin,l=cn(O(a.x,a.y),O(n.x,n.y));return!(!r.editingLinearElement&&l<O0/r.zoom.value)}static addMidpoint(t,n,r,i,s){let o=Dt.getElement(t.elementId,s);if(!o)return;let{segmentMidpoint:a}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},f=Dt.createPointAt(o,s,n.x,n.y,i&&!Ge(o)?r.getEffectiveGridSize():null),c=[...o.points.slice(0,a.index),f,...o.points.slice(a.index)];return xe(o,{points:c}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:a.index},l.selectedPointsIndices=[a.index],l}static _updatePoints(t,n,r,i,s,o){if(Ge(t)){let a={};(s==null?void 0:s.startBinding)!==void 0&&(a.startBinding=s.startBinding!==null&&B4(s.startBinding)?s.startBinding:null),(s==null?void 0:s.endBinding)!==void 0&&(a.endBinding=s.endBinding!==null&&B4(s.endBinding)?s.endBinding:null),a.points=Array.from(n),xe(t,a,!0,{isDragging:o==null?void 0:o.isDragging})}else{let a=x$(t,n),l=x$(t,t.points),f=(a[0]+a[2])/2,c=(a[1]+a[3])/2,d=(l[0]+l[2])/2,u=(l[1]+l[3])/2,h=d-f,g=u-c,y=ue(O(r,i),O(h,g),t.angle);xe(t,{...s,points:n,x:t.x+y[0],y:t.y+y[1]})}}static _getShiftLockedDelta(t,n,r,i,s){let o=Dt.getPointGlobalCoordinates(t,r,n);if(Ge(t))return[i[0]-o[0],i[1]-o[1]];let[a,l]=Gr(i[0],i[1],s),{width:f,height:c}=gM(o[0],o[1],a,l);return ue(O(f,c),O(0,0),-t.angle)}static moveFixedSegment(t,n,r,i,s){let o=Dt.getElement(t.elementId,s);if(!o||!Ge(o))return t;if(n&&n>0&&n<o.points.length){let a=_f(b1(tt(o.points[n],o.points[n-1]))),l=(o.fixedSegments??[]).reduce((u,h)=>(u[h.index]=h,u),{});l[n]={index:n,start:O(a?o.points[n-1][0]:r-o.x,a?i-o.y:o.points[n-1][1]),end:O(a?o.points[n][0]:r-o.x,a?i-o.y:o.points[n][1])};let f=Object.values(l).sort((u,h)=>u.index-h.index),c=f.map(u=>u.index).reduce((u,h)=>h<n?u+1:u,0);xe(o,{fixedSegments:f});let d=O(o.x+(o.fixedSegments[c].start[0]+o.fixedSegments[c].end[0])/2,o.y+(o.fixedSegments[c].start[1]+o.fixedSegments[c].end[1])/2);return{...t,segmentMidPointHoveredCoords:d,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:o.fixedSegments[c].index,value:d}}}}return t}static deleteFixedSegment(t,n){var r;xe(t,{fixedSegments:(r=t.fixedSegments)==null?void 0:r.filter(i=>i.index!==n)}),xe(t,{},!0)}};Q(kr,"POINT_HANDLE_SIZE",10),Q(kr,"getEditorMidPoints",(e,t,n)=>{let r=At(e,t);return!Ge(e)&&!n.editingLinearElement&&e.points.length>2&&!r?[]:(Od.version===e.version&&Od.zoom===n.zoom.value||kr.updateEditorMidPointsCache(e,t,n),Od.points)}),Q(kr,"updateEditorMidPointsCache",(e,t,n)=>{let r=kr.getPointsGlobalCoordinates(e,t),i=0,s=[];for(;i<r.length-1;){if(kr.isSegmentTooShort(e,e.points[i],e.points[i+1],i,n.zoom)){s.push(null),i++;continue}let o=kr.getSegmentMidPoint(e,r[i],r[i+1],i+1,t);s.push(o),i++}Od.points=s,Od.version=e.version,Od.zoom=n.zoom.value}),Q(kr,"getSegmentMidpointHitCoords",(e,t,n,r)=>{let{elementId:i}=e,s=kr.getElement(i,r);if(!s)return null;let o=kr.getPointIndexUnderCursor(s,r,n.zoom,t.x,t.y);if(!Ge(s)&&o>=0||kr.getPointsGlobalCoordinates(s,r).length>=3&&!n.editingLinearElement&&!Ge(s))return null;let a=(kr.POINT_HANDLE_SIZE+1)/n.zoom.value,l=e.segmentMidPointHoveredCoords;if(l&&cn(O(l[0],l[1]),O(t.x,t.y))<=a)return l;let f=0,c=kr.getEditorMidPoints(s,r,n);for(;f<c.length;){if(c[f]!==null&&cn(c[f],O(t.x,t.y))<=a)return c[f];f++}return null}),Q(kr,"getBoundTextElementPosition",(e,t,n)=>{let r=kr.getPointsGlobalCoordinates(e,n);r.length<2&&xe(t,{isDeleted:!0});let i=0,s=0;if(e.points.length%2===1){let o=Math.floor(e.points.length/2),a=kr.getPointGlobalCoordinates(e,e.points[o],n);i=a[0]-t.width/2,s=a[1]-t.height/2}else{let o=e.points.length/2-1,a=Od.points[o];e.points.length===2&&(a=Ey(r[0],r[1])),(!a||Od.version!==e.version)&&(a=kr.getSegmentMidPoint(e,r[o],r[o+1],o+1,n)),i=a[0]-t.width/2,s=a[1]-t.height/2}return{x:i,y:s}}),Q(kr,"getMinMaxXYWithBoundText",(e,t,n,r)=>{let[i,s,o,a]=n,l=(i+o)/2,f=(s+a)/2,{x:c,y:d}=kr.getBoundTextElementPosition(e,r,t),u=c+r.width,h=d+r.height,g=O(l,f),y=ue(O(i,s),g,e.angle),U=ue(O(o,s),g,e.angle),x=ue(O(c,d),g,-e.angle),v=ue(O(u,d),g,-e.angle),E=ue(O(c,h),g,-e.angle),k=ue(O(u,h),g,-e.angle);return y[0]<U[0]&&y[1]>=U[1]?(i=Math.min(i,E[0]),o=Math.max(o,Math.max(v[0],k[0])),s=Math.min(s,x[1]),a=Math.max(a,k[1])):y[0]>=U[0]&&y[1]>U[1]?(i=Math.min(i,k[0]),o=Math.max(o,Math.max(x[0],v[0])),s=Math.min(s,E[1]),a=Math.max(a,v[1])):y[0]>=U[0]?(i=Math.min(i,v[0]),o=Math.max(o,E[0]),s=Math.min(s,k[1]),a=Math.max(a,x[1])):y[1]<=U[1]&&(i=Math.min(i,Math.min(v[0],x[0])),o=Math.max(o,k[0]),s=Math.min(s,v[1]),a=Math.max(a,E[1])),[i,s,o,a,l,f]}),Q(kr,"getElementAbsoluteCoords",(e,t,n=!1)=>{let r,i,s,o,a;if(e.points.length<2||!or.get(e)){let{minX:d,minY:u,maxX:h,maxY:g}=e.points.reduce((y,[U,x])=>(y.minY=Math.min(y.minY,x),y.minX=Math.min(y.minX,U),y.maxX=Math.max(y.maxX,U),y.maxY=Math.max(y.maxY,x),y),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});i=d+e.x,s=u+e.y,o=h+e.x,a=g+e.y}else{let d=or.generateElementShape(e,null),u=o0(d[0]),[h,g,y,U]=Rw(u);i=h+e.x,s=g+e.y,o=y+e.x,a=U+e.y}let l=(i+o)/2,f=(s+a)/2;if(r=[i,s,o,a,l,f],!n)return r;let c=At(e,t);return c&&(r=kr.getMinMaxXYWithBoundText(e,t,[i,s,o,a],c)),r});var We=kr,EOe=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,r)=>n-r),t.length?t:null},Bg={},X4=(e,t)=>{let n=Bg[e]||(Bg[e]={height:t});return n.height=t,n},lte=e=>{Bg[e]&&delete Bg[e]},kOe=e=>{var t;return((t=Bg[e])==null?void 0:t.height)??null},Rs=(e,t,n,r=!0)=>{let i,s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:(t==null?void 0:t.angle)??e.angle};s.text=e.text,(t||!e.autoResize)&&(i=t?Kf(t,e):e.width,s.text=I1(e.originalText,wn(e),i));let o=ds(s.text,wn(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){let a=zw(t,e),l=Kf(t,e);if(!Rt(t)&&o.height>a){let u=y1(o.height,t.type);xe(t,{height:u},r),X4(t.id,u)}if(o.width>l){let u=y1(o.width,t.type);xe(t,{width:u},r)}let f={...e,...s},{x:c,y:d}=Fw(t,f,n);s.x=c,s.y=d}xe(e,s,r)},cte=(e,t,n)=>{let r=mt(e);t.forEach(i=>{let s=n.get(i.id),o=Xf(i);if(o){let a=n.get(o);if(a){let l=r.get(s);l&&xe(l,{boundElements:(i.boundElements||[]).filter(c=>c.id!==a&&c.id!==o).concat({type:"text",id:a})});let f=r.get(a);f&&Ve(f)&&xe(f,{containerId:l?s:null})}}})},My=(e,t,n,r=!1)=>{if(!Xf(e))return;lte(e.id);let i=At(e,t);if(i&&i.text){if(!e)return;let s=i.text,o=i.height,a=i.width,l=Kf(e,i),f=zw(e,i),c=e.height;if(r||n!=="n"&&n!=="s"){s&&(s=I1(i.originalText,wn(i),l));let d=ds(s,wn(i),i.lineHeight);o=d.height,a=d.width}if(o>f){c=y1(o,e.type);let d=c-e.height,u=!Rt(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-d:e.y;xe(e,{height:c,y:u})}xe(i,{text:s,width:a,height:o}),Rt(e)||xe(i,Fw(e,i,t))}},Fw=(e,t,n)=>{if(Rt(e))return We.getBoundTextElementPosition(e,t,n);let r=SOe(e),i=zw(e,t),s=Kf(e,t),o,a;return t.verticalAlign===Po.TOP?a=r.y:t.verticalAlign===Po.BOTTOM?a=r.y+(i-t.height):a=r.y+(i/2-t.height/2),t.textAlign===Ub.LEFT?o=r.x:t.textAlign===Ub.RIGHT?o=r.x+(s-t.width):o=r.x+(s/2-t.width/2),{x:o,y:a}},Xf=e=>{var t,n,r;return((t=e==null?void 0:e.boundElements)==null?void 0:t.length)&&((r=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(i=>i.type==="text"))==null?void 0:r.id)||null},At=(e,t)=>{if(!e)return null;let n=Xf(e);return n&&t.get(n)||null},Ai=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,sS=(e,t,n)=>{if(!Rt(e))return{x:e.x+e.width/2,y:e.y+e.height/2};let r=We.getPointsGlobalCoordinates(e,n);if(r.length%2===1){let o=Math.floor(e.points.length/2),a=We.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}let i=e.points.length/2-1,s=We.getEditorMidPoints(e,n,t)[i];return s||(s=We.getSegmentMidPoint(e,r[i],r[i+1],i+1,n)),{x:s[0],y:s[1]}},SOe=e=>{let t=Zr,n=Zr;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},COe=(e,t)=>!t||Rt(t)?e.angle:t.angle,AOe=(e,t)=>e.some(n=>{if(Hn(n)){let r=Ai(n,t);return!Rt(r)}return!1}),MOe=(e,t)=>e.some(n=>{if(Hn(n)){let r=Ai(n,t);return!Rt(r)}return Ve(n)}),TOe=new Set(["rectangle","ellipse","diamond","arrow"]),IOe=e=>TOe.has(e.type),y1=(e,t)=>{e=Math.ceil(e);let n=Zr*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Kf=(e,t)=>{let{width:n}=e;if(Rt(e)){let r=((t==null?void 0:t.fontSize)??id)*dMe;return Math.max(fMe*n,r)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Zr*2:e.type==="diamond"?Math.round(n/2)-Zr*2:n-Zr*2},zw=(e,t)=>{let{height:n}=e;return Rt(e)?n-Zr*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Zr*2:e.type==="diamond"?Math.round(n/2)-Zr*2:n-Zr*2},NOe=(e,t=`

`)=>e.reduce((n,r)=>(Ve(r)&&n.push(r.text),n),[]).join(t),Do=e=>(e=e.trim(),e&&AAe.sanitizeUrl(B3(e))),fte=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),dte=e=>{if(e=Do(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e},lM=[],je=e=>(lM=lM.concat(e),e),ute='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',ROe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',hte='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',_Oe=`data:${ft.svg},${encodeURIComponent(`${ute}${hte}</svg>`)}`,POe=`data:${ft.svg},${encodeURIComponent(`${ute}${ROe}${hte}</svg>`)}`,Ga=e=>{e&&(e.style.cursor="")},Un=(e,t)=>{e&&(e.style.cursor=t)},Bl,M$,pte=(e,t)=>{let n=()=>{let r=t===Ft.DARK;Bl=document.createElement("canvas"),Bl.theme=t,Bl.height=20,Bl.width=20;let i=Bl.getContext("2d");i.lineWidth=1,i.beginPath(),i.arc(Bl.width/2,Bl.height/2,5,0,2*Math.PI),i.fillStyle=r?ki.black:ki.white,i.fill(),i.strokeStyle=r?ki.white:ki.black,i.stroke(),M$=Bl.toDataURL(ft.svg)};(!Bl||Bl.theme!==t)&&n(),Un(e,`url(${M$}) ${20/2} ${20/2}, auto`)},Xl=(e,t)=>{if(e)if(t.activeTool.type==="selection")Ga(e);else if(Tg(t))e.style.cursor=mn.GRAB;else if(Yl(t))pte(e,t.theme);else if(t.activeTool.type==="laser"){let n=t.theme===Ft.LIGHT?_Oe:POe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=mn.AUTO):e.style.cursor=mn.CROSSHAIR},DOe=new aJ(Date.now()),LOe=0,Tc=()=>Math.floor(DOe.next()*2**31),Ia=()=>Vf()?`id${LOe++}`:WI(),Cl=(e,{x:t,y:n,strokeColor:r=hr.strokeColor,backgroundColor:i=hr.backgroundColor,fillStyle:s=hr.fillStyle,strokeWidth:o=hr.strokeWidth,strokeStyle:a=hr.strokeStyle,roughness:l=hr.roughness,opacity:f=hr.opacity,width:c=0,height:d=0,angle:u=0,groupIds:h=[],frameId:g=null,index:y=null,roundness:U=null,boundElements:x=null,link:v=null,locked:E=hr.locked,...k})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||c<-1e6||c>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:c,height:d,points:k.points}),{id:k.id||Ia(),type:e,x:t,y:n,width:c,height:d,angle:u,strokeColor:r,backgroundColor:i,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:f,groupIds:h,frameId:g,index:y,roundness:U,seed:k.seed??Tc(),version:k.version||1,versionNonce:k.versionNonce??0,isDeleted:!1,boundElements:x,updated:t6(),link:v,locked:E,customData:k.customData}),Ic=e=>Cl(e.type,e),T$=e=>Cl("embeddable",e),OOe=e=>({...Cl("iframe",e)}),EN=e=>Ct({...Cl("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),cM=e=>Ct({...Cl("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),mte=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),jo=e=>{let t=e.fontFamily||s0,n=e.fontSize||id,r=e.lineHeight||g1(t),i=_g(e.text),s=ds(i,wn({fontFamily:t,fontSize:n}),r),o=e.textAlign||wy,a=e.verticalAlign||M4,l=mte({textAlign:o,verticalAlign:a},s),f={...Cl("text",e),text:i,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??i,autoResize:e.autoResize??!0,lineHeight:r};return Ct(f,{})},jOe=(e,t,n)=>{let{width:r,height:i}=ds(n,wn(e),e.lineHeight);e.autoResize||(r=e.width);let{textAlign:s,verticalAlign:o}=e,a,l;if(s==="center"&&o===Po.MIDDLE&&!e.containerId&&e.autoResize){let f=ds(e.text,wn(e),e.lineHeight),c=mte(e,{width:r-f.width,height:i-f.height});a=e.x-c.x,l=e.y-c.y}else{let[f,c,d,u]=vt(e,t),[h,g,y,U]=Bu(e,r,i,!1),x=(f-h)/2,v=(c-g)/2,E=(d-y)/2,k=(u-U)/2;[a,l]=BOe({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,x,v,E,k)}return{width:r,height:i,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},BOe=(e,t,n,r,i,s,o,a)=>{let l=Math.cos(r),f=Math.sin(r);return e.e&&e.w?t+=i+o:e.e?(t+=i*(1+l),n+=i*f,t+=o*(1-l),n+=o*-f):e.w&&(t+=i*(1-l),n+=i*-f,t+=o*(1+l),n+=o*f),e.n&&e.s?n+=s+a:e.n?(t+=s*f,n+=s*(1-l),t+=a*-f,n+=a*(1+l)):(t+=s*-f,n+=s*(1+l),t+=a*f,n+=a*(1-l)),[t,n]},gte=(e,t,n,r=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(r=I1(r,wn(e),t?Kf(t,e):e.width));let i=jOe(e,n,r);return{text:r,...i}},FOe=e=>({...Cl(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),Hh=e=>({...Cl(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),kN=e=>e.elbowed?{...Cl(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...Cl(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},bte=e=>({...Cl("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),K4=(e,t=0)=>{if(e==null||typeof e!="object")return e;let n=Object.prototype.toString.call(e);if(n==="[object Object]"){let r=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(let i in e)if(e.hasOwnProperty(i)){if(t===0&&(i==="shape"||i==="canvas"))continue;r[i]=K4(e[i],t+1)}return r}if(Array.isArray(e)){let r=e.length,i=new Array(r);for(;r--;)i[r]=K4(e[r],t+1);return i}return It.DEV&&n!=="[object Object]"&&n!=="[object Array]"&&n.startsWith("[object ")&&console.warn(`_deepCloneElement: unexpected object type ${n}. This value will not be cloned!`),e},N1=e=>K4(e),yte=(e,t)=>{Object.defineProperty(e,pMe,{value:t,writable:!1,enumerable:!1})},Y4=()=>Ia(),Ute=(e,t,n,r)=>{let i=N1(n);return Vf()&&yte(i,n.id),i.id=Y4(),i.boundElements=null,i.updated=t6(),i.seed=Tc(),i.groupIds=cOe(i.groupIds,e,s=>(t.has(s)||t.set(s,Y4()),t.get(s))),r&&(i=Object.assign(i,r)),i},xte=(e,t)=>{let n=[],r=mt(e),i=new Map,s=a=>{if(i.has(a))return i.get(a);if(r.has(a)){let l=Y4();return i.set(a,l),l}return null},o=new Map;for(let a of e){let l=K4(a);if(l.id=s(a.id),Vf()&&yte(l,a.id),t!=null&&t.randomizeSeed&&(l.seed=Tc(),Gw(l)),l.groupIds&&(l.groupIds=l.groupIds.map(f=>(o.has(f)||o.set(f,Y4()),o.get(f)))),"containerId"in l&&l.containerId){let f=s(l.containerId);l.containerId=f}if("boundElements"in l&&l.boundElements&&(l.boundElements=l.boundElements.reduce((f,c)=>{let d=s(c.id);return d&&f.push({...c,id:d}),f},[])),"endBinding"in l&&l.endBinding){let f=s(l.endBinding.elementId);l.endBinding=f?{...l.endBinding,elementId:f}:null}if("startBinding"in l&&l.startBinding){let f=s(l.startBinding.elementId);l.startBinding=f?{...l.startBinding,elementId:f}:null}l.frameId&&(l.frameId=s(l.frameId)),n.push(l)}return n},SN=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:r,reconciliationContext:i})=>{let s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(let[l,f]of a.entries()){let c=a[l-1],d=a[l+1];if(fM(f,c,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&Ta(e[l])){let u=e[l],h=At(u,mt(e));h&&h.index<=u.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(u)}"`)}}if(s.length){let l=new rNe,f=[];if(i&&(f.push("Additional reconciliation context:"),f.push(i.localElements.map(c=>o(c))),f.push(i.remoteElements.map(c=>o(c)))),r||console.error(s.join(`

`),l.stack,e.map(c=>o(c)),...f),t)throw l}},zOe=e=>e.sort((t,n)=>I$(t)&&I$(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),Nc=(e,t)=>{try{let n=$Oe(e,t),r=wte(e,n),i=e.map(s=>r.has(s)?{...s,...r.get(s)}:s);SN(i,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(let[s,o]of r)xe(s,o,!1)}catch{Yf(e)}return e},Yf=e=>{let t=HOe(e),n=wte(e,t);for(let[r,i]of n)xe(r,i,!1);return e},$Oe=(e,t)=>{let n=[],r=0;for(;r<e.length;)if(t.has(e[r].id)){let i=[r-1,r];for(;++r<e.length&&t.has(e[r].id);)i.push(r);i.push(r),n.push(i)}else r++;return n},HOe=e=>{let t=[],n,r,i=-1,s=0,o=f=>{var u;let c=e[i]?e[i].index:void 0,d=(u=e[f-1])==null?void 0:u.index;return!c&&d||c&&d&&d>c?[d,f-1]:[c,i]},a=f=>{var u;let c=e[s]?e[s].index:void 0;if(c&&f<s)return[c,s];let d=s;for(;++d<e.length;){let h=(u=e[d])==null?void 0:u.index;if(!c&&h||c&&h&&h>c)return[h,d]}return[void 0,d]},l=0;for(;l<e.length;){let f=e[l].index;if([n,i]=o(l),[r,s]=a(l),fM(f,n,r))l++;else{let c=[i,l];for(;++l<e.length;){let d=e[l].index,[u,h]=o(l),[g,y]=a(l);if(fM(d,u,g))break;[n,i]=[u,h],[r,s]=[g,y],c.push(l)}c.push(s),t.push(c)}}return t},fM=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,wte=(e,t)=>{var r,i;let n=new Map;for(let s of t){let o=s.shift(),a=s.pop(),l=HA((r=e[o])==null?void 0:r.index,(i=e[a])==null?void 0:i.index,s.length);for(let f=0;f<s.length;f++){let c=e[s[f]];n.set(c,{index:l[f]})}}return n},I$=e=>!!e.index,Pr=class $l{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,r,i){let s=r&&i!=="inserted"?r(t):t,o=r&&i!=="deleted"?r(n):n;return new $l(s,o)}static calculate(t,n,r,i){if(t===n)return $l.empty();let s={},o={};for(let f of this.distinctKeysIterator("full",t,n))s[f]=t[f],o[f]=n[f];let[a,l]=i?i(s,o):[s,o];return $l.create(a,l,r)}static empty(){return new $l({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,r){let i={...t};for(let s of Object.keys(r))delete i[s];return{...i,...n}}static mergeArrays(t,n,r,i){return Object.values($l.mergeObjects(ef(t??[],i),ef(n??[],i),ef(r??[],i)))}static diffObjects(t,n,r,i){if(!(!t[r]&&!n[r])&&(typeof t[r]=="object"||typeof n[r]=="object")){let s=t[r]??{},o=n[r]??{},a=$l.getLeftDifferences(s,o).reduce((f,c)=>(f[c]=i(s[c]),f),{}),l=$l.getRightDifferences(s,o).reduce((f,c)=>(f[c]=i(o[c]),f),{});Object.keys(a).length||Object.keys(l).length?(Reflect.set(t,r,a),Reflect.set(n,r,l)):(Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r))}}static diffArrays(t,n,r,i){if(!(!t[r]&&!n[r])&&(Array.isArray(t[r])||Array.isArray(n[r]))){let s=Array.isArray(t[r])?t[r]:[],o=Array.isArray(n[r])?n[r]:[],a=ef($l.getLeftDifferences(ef(s,i),ef(o,i))),l=ef($l.getRightDifferences(ef(s,i),ef(o,i)));if(Object.keys(a).length||Object.keys(l).length){let f=s.filter(d=>a[i?i(d):String(d)]),c=o.filter(d=>l[i?i(d):String(d)]);Reflect.set(t,r,f),Reflect.set(n,r,c)}else Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r)}}static isLeftDifferent(t,n,r=!1){return!!this.distinctKeysIterator("left",t,n,r).next().value}static isRightDifferent(t,n,r=!1){return!!this.distinctKeysIterator("right",t,n,r).next().value}static getLeftDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("left",t,n,r))}static getRightDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("right",t,n,r))}static*distinctKeysIterator(t,n,r,i=!1){if(n===r)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(r):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(r)])):u1(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(let o of s){let a=n[o],l=r[o];if(a!==l){if(!i&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&$i(a,l))continue;yield o}}}},N$=class Ys{constructor(t){this.delta=t}static calculate(t,n){let r=Pr.calculate(t,n,void 0,Ys.postProcess);return new Ys(r)}static empty(){return new Ys(Pr.create({},{}))}inverse(){let t=Pr.create(this.delta.inserted,this.delta.deleted);return new Ys(t)}applyTo(t,n){try{let{selectedElementIds:r={},selectedGroupIds:i={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...f}=this.delta.inserted,c=Pr.mergeObjects(t.selectedElementIds,s,r),d=Pr.mergeObjects(t.selectedGroupIds,o,i),u=a&&n.has(a)?new We(n.get(a)):null,h=l&&n.has(l)?new We(n.get(l)):null,g={...t,...f,selectedElementIds:c,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?u:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},y=this.filterInvisibleChanges(t,g,n);return[g,y]}catch(r){if(console.error("Couldn't apply appstate change",r),It.DEV||It.MODE===oo.TEST)throw r;return[t,!1]}}isEmpty(){return Pr.isEmpty(this.delta)}static postProcess(t,n){try{Pr.diffObjects(t,n,"selectedElementIds",r=>!0),Pr.diffObjects(t,n,"selectedGroupIds",r=>r??!1)}catch(r){if(console.error("Couldn't postprocess appstate change deltas."),It.DEV||It.MODE===oo.TEST)throw r}finally{return[t,n]}}filterInvisibleChanges(t,n,r){let i=Z4(t),s=Z4(n),o=Pr.isRightDifferent(Ys.stripElementsProps(i),Ys.stripElementsProps(s)),a=Pr.isRightDifferent(Ys.stripStandaloneProps(i),Ys.stripStandaloneProps(s));if(!o&&!a)return!1;let l={value:o};if(a){let f=Pr.getRightDifferences(Ys.stripStandaloneProps(i),Ys.stripStandaloneProps(s)),c=new Set;(f.includes("editingGroupId")||f.includes("selectedGroupIds"))&&(c=uOe(r));for(let d of f)switch(d){case"selectedElementIds":n[d]=Ys.filterSelectedElements(n[d],r,l);break;case"selectedGroupIds":n[d]=Ys.filterSelectedGroups(n[d],c,l);break;case"croppingElementId":{let y=n[d],U=y&&r.get(y);U&&!U.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":let u=n[d];u?c.has(u)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":let h=Ys.convertToAppStateKey(d),g=n[h];if(!g)l.value=!0;else{let y=r.get(g.elementId);y&&!y.isDeleted?l.value=!0:n[h]=null}break;default:u1(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,r){let i=Object.keys(t);if(!i.length)return r.value=!0,t;let s={...t};for(let o of i){let a=n.get(o);a&&!a.isDeleted?r.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,r){if(!Object.keys(t).length)return r.value=!0,t;let i={...t};for(let s of Object.keys(i))n.has(s)?r.value=!0:delete i[s];return i}static stripElementsProps(t){let{editingGroupId:n,selectedGroupIds:r,selectedElementIds:i,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,...l}=t;return l}static stripStandaloneProps(t){let{name:n,viewBackgroundColor:r,...i}=t;return i}},Gd=class nr{constructor(t,n,r){this.added=t,this.removed=n,this.updated=r}static create(t,n,r,i={shouldRedistribute:!1}){let s;if(i.shouldRedistribute){let o=new Map,a=new Map,l=new Map,f=[...t,...n,...r];for(let[c,d]of f)this.satisfiesAddition(d)?o.set(c,d):this.satisfiesRemoval(d)?a.set(c,d):l.set(c,d);s=new nr(o,a,l)}else s=new nr(t,n,r);return(It.DEV||It.MODE===oo.TEST)&&(nr.validate(s,"added",this.satisfiesAddition),nr.validate(s,"removed",this.satisfiesRemoval),nr.validate(s,"updated",this.satisfiesUpdate)),s}static validate(t,n,r){for(let[i,s]of t[n].entries())if(!r(s))throw console.error(`Broken invariant for "${n}" delta, element "${i}", delta:`,s),new Error(`ElementsChange invariant broken for element "${i}".`)}static calculate(t,n){if(t===n)return nr.empty();let r=new Map,i=new Map,s=new Map;for(let o of t.values())if(!n.get(o.id)){let a={...o,isDeleted:!1},l={isDeleted:!0},f=Pr.create(a,l,nr.stripIrrelevantProps);i.set(o.id,f)}for(let o of n.values()){let a=t.get(o.id);if(!a){let l={isDeleted:!0},f={...o,isDeleted:!1},c=Pr.create(l,f,nr.stripIrrelevantProps);r.set(o.id,c);continue}if(a.versionNonce!==o.versionNonce){let l=Pr.calculate(a,o,nr.stripIrrelevantProps,nr.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?r.set(o.id,l):i.set(o.id,l);continue}Pr.isEmpty(l)||s.set(o.id,l)}}return nr.create(r,i,s)}static empty(){return nr.create(new Map,new Map,new Map)}inverse(){let t=s=>{let o=new Map;for(let[a,l]of s.entries())o.set(a,Pr.create(l.inserted,l.deleted));return o},n=t(this.added),r=t(this.removed),i=t(this.updated);return nr.create(r,n,i)}isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}applyLatestChanges(t){let n=a=>l=>{let f={};for(let c of Object.keys(l))switch(c){case"boundElements":f[c]=l[c];break;default:f[c]=a[c]}return f},r=a=>{let l=new Map;for(let[f,c]of a.entries()){let d=t.get(f);if(d){let u=Pr.create(c.deleted,c.inserted,n(d),"inserted");l.set(f,u)}else l.set(f,c)}return l},i=r(this.added),s=r(this.removed),o=r(this.updated);return nr.create(i,s,o,{shouldRedistribute:!0})}applyTo(t,n){let r=Aa(new Map(t)),i,s={containsVisibleDifference:!1,containsZindexDifference:!1};try{let o=nr.createApplier(r,n,s),a=o(this.added),l=o(this.removed),f=o(this.updated),c=this.resolveConflicts(t,r);i=new Map([...a,...l,...f,...c])}catch(o){if(console.error("Couldn't apply elements change",o),It.DEV||It.MODE===oo.TEST)throw o;return[t,!0]}try{nr.redrawTextBoundingBoxes(r,i),r=nr.reorderElements(r,i,s),nr.redrawBoundArrows(r,i)}catch(o){if(console.error("Couldn't mutate elements after applying elements change",o),It.DEV||It.MODE===oo.TEST)throw o}finally{return[r,s.containsVisibleDifference]}}static applyDelta(t,n,r={containsVisibleDifference:!0,containsZindexDifference:!0}){var o,a;let{boundElements:i,...s}=n.inserted;if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){let l=Pr.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,f=>f.id);Object.assign(s,{boundElements:l})}if(ln(t)){let l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(s,{crop:l.inserted.crop??null})}if(!r.containsVisibleDifference){let{index:l,...f}=s,c=nr.checkForVisibleDifference(t,f);r.containsVisibleDifference=c}return r.containsZindexDifference||(r.containsZindexDifference=n.deleted.index!==n.inserted.index),Ct(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:Pr.isRightDifferent(t,n)}resolveConflicts(t,n){let r=new Map,i=(f,c)=>{let d=n.get(f.id);if(!d)return;let u;t.get(f.id)===d?u=Ct(d,c):u=xe(d,c),r.set(u.id,u),n.set(u.id,u)};for(let[f]of this.removed)nr.unbindAffected(t,n,f,i);for(let[f]of this.added)nr.rebindAffected(t,n,f,i);for(let[f]of Array.from(this.updated).filter(([c,d])=>Object.keys({...d.deleted,...d.inserted}).find(u=>nOe.has(u)))){let c=n.get(f);!c||c.isDeleted||nr.rebindAffected(t,n,f,i)}let s=new Map(Array.from(t).filter(([f])=>r.has(f))),{added:o,removed:a,updated:l}=nr.calculate(s,r);for(let[f,c]of o)this.added.set(f,c);for(let[f,c]of a)this.removed.set(f,c);for(let[f,c]of l)this.updated.set(f,c);return r}static unbindAffected(t,n,r,i){let s=()=>t.get(r),o=()=>n.get(r);Xp.unbindAffected(n,s(),i),Xp.unbindAffected(n,o(),i),Kp.unbindAffected(n,s(),i),Kp.unbindAffected(n,o(),i)}static rebindAffected(t,n,r,i){let s=()=>t.get(r),o=()=>n.get(r);Xp.unbindAffected(n,s(),i),Xp.rebindAffected(n,o(),i),Kp.unbindAffected(n,s(),(a,l)=>{Ve(a)&&i(a,l)}),Kp.rebindAffected(n,o(),i)}static redrawTextBoundingBoxes(t,n){let r=new Map;for(let i of n.values()){if(Hn(i)){let{containerId:s}=i,o=s?t.get(s):void 0;o&&r.set(o.id,{container:o,boundText:i})}if(Ta(i)){let s=Xf(i),o=s?t.get(s):void 0;o&&r.set(i.id,{container:i,boundText:o})}}for(let{container:i,boundText:s}of r.values())i.isDeleted||s.isDeleted||Rs(s,i,t,!1)}static redrawBoundArrows(t,n){for(let r of n.values())!r.isDeleted&&kl(r)&&co(r,t,{changedElements:n})}static reorderElements(t,n,r){if(!r.containsZindexDifference)return t;let i=Array.from(t.values()),s=zOe([...i]),o=Pr.getRightDifferences(i,s,!0).reduce((a,l)=>{let f=i[Number(l)];return f&&n.has(f.id)&&a.set(f.id,f),a},new Map);return!r.containsVisibleDifference&&o.size&&(r.containsVisibleDifference=!0),mt(Nc(s,o))}static postProcess(t,n){try{Pr.diffArrays(t,n,"boundElements",r=>r.id)}catch(r){if(console.error("Couldn't postprocess elements change deltas."),It.DEV||It.MODE===oo.TEST)throw r}finally{return[t,n]}}static stripIrrelevantProps(t){let{id:n,updated:r,version:i,versionNonce:s,seed:o,...a}=t;return a}};Q(Gd,"satisfiesAddition",({deleted:e,inserted:t})=>e.isDeleted===!0&&!t.isDeleted),Q(Gd,"satisfiesRemoval",({deleted:e,inserted:t})=>!e.isDeleted&&t.isDeleted===!0),Q(Gd,"satisfiesUpdate",({deleted:e,inserted:t})=>!!e.isDeleted==!!t.isDeleted),Q(Gd,"createApplier",(e,t,n)=>{let r=Gd.createGetter(e,t,n);return i=>Array.from(i.entries()).reduce((s,[o,a])=>{let l=r(o,a.inserted);if(l){let f=Gd.applyDelta(l,a,n);e.set(f.id,f),s.set(f.id,f)}return s},new Map)}),Q(Gd,"createGetter",(e,t,n)=>(r,i)=>{let s=e.get(r);return s||(s=t.get(r),s&&(n.containsZindexDifference=!0,(i.isDeleted===!1||i.isDeleted!==!0&&s.isDeleted===!1)&&(n.containsVisibleDifference=!0))),s});var R$=Gd,Zl=class{constructor(){Q(this,"subscribers",[])}on(...e){let t=e.flat().filter(n=>typeof n=="function");return this.subscribers.push(...t),()=>this.off(t)}once(...e){let t=e.flat().filter(r=>typeof r=="function");t.push(()=>n());let n=this.on(...t);return n}off(...e){let t=e.flat();this.subscribers=this.subscribers.filter(n=>!t.includes(n))}trigger(...e){for(let t of this.subscribers)t(...e);return this}clear(){this.subscribers=[]}},vte="__observedAppState",Z4=e=>{var n,r;let t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((r=e.selectedLinearElement)==null?void 0:r.elementId)||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,vte,{value:!0,enumerable:!1}),t},VOe=e=>!!Reflect.get(e,vte),pe={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"},WOe=class{constructor(e,t){this.elementsChange=e,this.appStateChange=t}},GOe=class{constructor(){Q(this,"onStoreIncrementEmitter",new Zl),Q(this,"scheduledActions",new Set),Q(this,"_snapshot",_$.empty()),Q(this,"shouldCaptureIncrement",()=>{this.scheduleAction(pe.IMMEDIATELY)}),Q(this,"shouldUpdateSnapshot",()=>{this.scheduleAction(pe.NEVER)}),Q(this,"scheduleAction",e=>{this.scheduledActions.add(e),this.satisfiesScheduledActionsInvariant()}),Q(this,"commit",(e,t)=>{try{this.scheduledActions.has(pe.IMMEDIATELY)?this.captureIncrement(e,t):this.scheduledActions.has(pe.NEVER)&&this.updateSnapshot(e,t)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}}),Q(this,"captureIncrement",(e,t)=>{let n=this.snapshot,r=this.snapshot.maybeClone(e,t);if(n!==r){let i=r.meta.didElementsChange?R$.calculate(n.elements,r.elements):R$.empty(),s=r.meta.didAppStateChange?N$.calculate(n.appState,r.appState):N$.empty();(!i.isEmpty()||!s.isEmpty())&&this.onStoreIncrementEmitter.trigger(new WOe(i,s)),this.snapshot=r}}),Q(this,"updateSnapshot",(e,t)=>{let n=this.snapshot.maybeClone(e,t);this.snapshot!==n&&(this.snapshot=n)}),Q(this,"filterUncomittedElements",(e,t)=>{for(let[n,r]of e.entries()){if(!t.get(n))continue;let i=this.snapshot.elements.get(n);i?i.version<r.version&&t.set(n,i):t.delete(n)}return t}),Q(this,"clear",()=>{this.snapshot=_$.empty(),this.scheduledActions=new Set}),Q(this,"satisfiesScheduledActionsInvariant",()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){let e=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;if(console.error(e,this.scheduledActions.values()),It.DEV||It.MODE===oo.TEST)throw new Error(e)}})}get snapshot(){return this._snapshot}set snapshot(e){this._snapshot=e}},_$=class dM{constructor(t,n,r={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t,this.appState=n,this.meta=r}static empty(){return new dM(new Map,Z4(Ac()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,n){let r=this.maybeCreateElementsSnapshot(t),i=this.maybeCreateAppStateSnapshot(n),s=!1,o=!1;return this.elements!==r&&(s=!0),this.appState!==i&&(o=!0),!s&&!o?this:new dM(r,i,{didElementsChange:s,didAppStateChange:o})}maybeCreateAppStateSnapshot(t){if(!t)return this.appState;let n=VOe(t)?t:Z4(t);return this.detectChangedAppState(n)?n:this.appState}detectChangedAppState(t){return!$i(this.appState,t,{selectedElementIds:$i,selectedGroupIds:$i})}maybeCreateElementsSnapshot(t){return t?this.detectChangedElements(t)?this.createElementsSnapshot(t):this.elements:this.elements}detectChangedElements(t){if(this.elements===t)return!1;if(this.elements.size!==t.size)return!0;let n=Array.from(t.keys());for(let r=n.length-1;r>=0;r--){let i=this.elements.get(n[r]),s=t.get(n[r]);if(!i||!s||i.id!==s.id||i.versionNonce!==s.versionNonce)return!0}return!1}createElementsSnapshot(t){let n=new Map;for(let[r,i]of this.elements.entries())t.get(r)?n.set(r,i):n.set(r,Ct(i,{isDeleted:!0}));for(let[r,i]of t.entries()){let s=n.get(r);(!s||s&&s.versionNonce!==i.versionNonce)&&n.set(r,N1(i))}return n}},Fl=new Map,XOe=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,KOe=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,YOe=/^https:\/\/(?:www\.)?figma\.com/,P$=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,ZOe=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,D$=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,qOe=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,QOe=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,JOe=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,L$=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,O$=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,eje=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,uM=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com"]),j$=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com"]),w2=e=>`<html><body>${e}</body></html>`,Yp=e=>{if(!e)return null;if(Fl.has(e))return Fl.get(e);let t=e,n=j$.has(hM(e,j$)||""),r="generic",i={w:560,h:840},s=e.match(XOe);if(s!=null&&s[2]){let l=s[3]?`&start=${s[3]}`:"",f=e.includes("shorts");switch(r="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${l}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${l}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${l}`;break}return i=f?{w:315,h:560}:{w:560,h:315},Fl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}}let o=e.match(KOe);if(o!=null&&o[1]){let l=o==null?void 0:o[1],f=/^\d+$/.test(l)?void 0:new URIError("Invalid embed link format");return r="video",e=`https://player.vimeo.com/video/${l}?api=1`,i={w:560,h:315},Fl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,error:f,sandbox:{allowSameOrigin:n}}}if(e.match(YOe))return r="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,i={w:550,h:550},Fl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};let a=e.match(QOe);if(a)return e=a[1]==="embed"?a[0]:a[0].replace("/v","/embed"),Fl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};if(D$.test(e)){let l=e.match(D$)[1],f=B3(`https://twitter.com/x/status/${l}`),c={type:"document",srcdoc:d=>w2(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${d}"><a href="${f}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return Fl.set(t,c),c}if(O$.test(e)){let[,l,f,c]=e.match(O$),d=B3(`https://reddit.com/r/${l}/comments/${f}/${c}`),u={type:"document",srcdoc:h=>w2(`<blockquote class="reddit-embed-bq" data-embed-theme="${h}"><a href="${d}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return Fl.set(t,u),u}if(P$.test(e)){let[,l,f]=e.match(P$),c=B3(`https://gist.github.com/${l}/${f}`),d={type:"document",srcdoc:()=>w2(`
          <script src="${c}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return Fl.set(e,d),d}return Fl.set(e,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}},Ete=e=>{let t;qd(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;let n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),r=rr.Helvetica,i=wn({fontSize:n,fontFamily:r});return jo({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:r,fontSize:n,text:I1(t,i,e.width-20),textAlign:"center",verticalAlign:Po.MIDDLE,angle:e.angle??0})};je({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,r)=>{let i=Dr(t,{type:"embeddable"});return Xl(r.canvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:Dr(t,{type:"embeddable"})},captureUpdate:pe.EVENTUALLY}}});var hM=(e,t)=>{try{let{hostname:n}=new URL(e),r=n.replace(/^www\./,"");if(t instanceof Set){if(uM.has(r))return r;let s=r.replace(/^([^.]+)/,"*");return uM.has(s)?s:null}let i=t.replace(/^www\./,"");if(r===i)return i}catch{}return null},tje=e=>{let t=e.match(qOe);if(t&&t.length===2)return t[1];let n=e.match(eje);if(n&&n.length===2)return n[1];let r=e.match(ZOe);if(r&&r.length===2)return r[1];if(L$.test(e))return`https://giphy.com/embed/${L$.exec(e)[1]}`;let i=e.match(JOe);return i&&i.length===2?i[1]:e},G3=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){let n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(let n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(hM(e,n))return!0;return!1}}return!!hM(e,uM)},b5=(e,t,n)=>{let r={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(r)},y5=(e,t,n,r,i)=>{if(!r.enabled||!r.clip)return null;let s=fo(e,i);if(s){let o=t.ownerDocument.createElementNS(en,"g");return o.setAttributeNS(en,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},X3=(e,t,n,r,i,s,o,a)=>{var E;let l={x:s,y:o},[f,c,d,u]=vt(e,t),h=(d-f)/2-(e.x-f),g=(u-c)/2-(e.y-c);if(Ve(e)){let k=Ai(e,t);if(Rt(k)){let[M,S,A,I]=vt(k,t),R=We.getBoundTextElementPosition(k,e,t);h=(A-M)/2-(R.x-M),g=(I-S)/2-(R.y-S),s=s+R.x-e.x,o=o+R.y-e.y}}let y=180*e.angle/Math.PI,U=r;if(e.link){let k=r.ownerDocument.createElementNS(en,"a");k.setAttribute("href",Do(e.link)),U.appendChild(k),U=k}let x=(k,M)=>{Vf()&&k.setAttribute("data-id",M.id),U.appendChild(k)},v=(((E=fo(e,t))==null?void 0:E.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{let k=or.generateElementShape(e,null),M=b5(n,k,p5);v!==1&&(M.setAttribute("stroke-opacity",`${v}`),M.setAttribute("fill-opacity",`${v}`)),M.setAttribute("stroke-linecap","round"),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`);let S=y5(e,U,[M],a.frameRendering,t);x(S||M,e);break}case"iframe":case"embeddable":{let k=or.generateElementShape(e,a),M=b5(n,k,p5),S=e.opacity/100;S!==1&&(M.setAttribute("stroke-opacity",`${S}`),M.setAttribute("fill-opacity",`${S}`)),M.setAttribute("stroke-linecap","round"),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`),x(M,e);let A=Ete(e);X3(A,t,n,U,i,A.x+l.x-e.x,A.y+l.y-e.y,a);let I=b5(n,k,p5);for(I.setAttribute("stroke-linecap","round"),I.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`);I.firstChild;)I.removeChild(I.firstChild);let R=yl(Math.min(e.width,e.height),e),D=Yp(dte(e.link||""));if(a.renderEmbeddables===!1||(D==null?void 0:D.type)==="document"){let _=r.ownerDocument.createElementNS(en,"a");_.setAttribute("href",Do(e.link||"")),_.setAttribute("target","_blank"),_.setAttribute("rel","noopener noreferrer"),_.style.borderRadius=`${R}px`,I.appendChild(_)}else{let _=r.ownerDocument.createElementNS(en,"foreignObject");_.style.width=`${e.width}px`,_.style.height=`${e.height}px`,_.style.border="none";let P=_.ownerDocument.createElementNS(en,"div");P.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),P.style.width="100%",P.style.height="100%";let $=P.ownerDocument.createElement("iframe");$.src=(D==null?void 0:D.link)??"",$.style.width="100%",$.style.height="100%",$.style.border="none",$.style.borderRadius=`${R}px`,$.style.top="0",$.style.left="0",$.allowFullscreen=!0,P.appendChild($),_.appendChild(P),I.appendChild(_)}x(I,e);break}case"line":case"arrow":{let k=At(e,t),M=r.ownerDocument.createElementNS(en,"mask");if(k){M.setAttribute("id",`mask-${e.id}`);let I=r.ownerDocument.createElementNS(en,"rect");s=s||0,o=o||0,I.setAttribute("x","0"),I.setAttribute("y","0"),I.setAttribute("fill","#fff"),I.setAttribute("width",`${e.width+100+s}`),I.setAttribute("height",`${e.height+100+o}`),M.appendChild(I);let R=r.ownerDocument.createElementNS(en,"rect"),D=We.getBoundTextElementPosition(e,k,t),_=s+D.x-e.x,P=o+D.y-e.y;R.setAttribute("x",_.toString()),R.setAttribute("y",P.toString()),R.setAttribute("fill","#000"),R.setAttribute("width",`${k.width}`),R.setAttribute("height",`${k.height}`),R.setAttribute("opacity","1"),M.appendChild(R)}let S=r.ownerDocument.createElementNS(en,"g");k&&S.setAttribute("mask",`url(#mask-${e.id})`),S.setAttribute("stroke-linecap","round"),or.generateElementShape(e,a).forEach(I=>{let R=b5(n,I,p5);v!==1&&(R.setAttribute("stroke-opacity",`${v}`),R.setAttribute("fill-opacity",`${v}`)),R.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`),e.type==="line"&&Wf(e.points)&&e.backgroundColor!=="transparent"&&R.setAttribute("fill-rule","evenodd"),S.appendChild(R)});let A=y5(e,U,[S,M],a.frameRendering,t);A?(x(A,e),U.appendChild(A)):(x(S,e),U.append(M));break}case"freedraw":{let k=or.generateElementShape(e,a),M=k?b5(n,k,p5):r.ownerDocument.createElementNS(en,"g");v!==1&&(M.setAttribute("stroke-opacity",`${v}`),M.setAttribute("fill-opacity",`${v}`)),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`),M.setAttribute("stroke","none");let S=r.ownerDocument.createElementNS(en,"path");S.setAttribute("fill",e.strokeColor),S.setAttribute("d",zee(e)),M.appendChild(S);let A=y5(e,U,[M],a.frameRendering,t);x(A||M,e);break}case"image":{let k=Math.round(e.width),M=Math.round(e.height),S=ga(e)&&i[e.fileId];if(S){let{reuseImages:A=!0}=a,I=`image-${S.id}`,R=e.width,D=e.height;e.crop&&({width:R,height:D}=Gf(e),I=`image-crop-${S.id}-${IBe(`${R}x${D}`)}`),A||(I=`image-${e.id}`);let _=r.querySelector(`#${I}`);if(!_){_=r.ownerDocument.createElementNS(en,"symbol"),_.id=I;let W=r.ownerDocument.createElementNS(en,"image");W.setAttribute("href",S.dataURL),W.setAttribute("preserveAspectRatio","none"),e.crop||!A?(W.setAttribute("width",`${R}`),W.setAttribute("height",`${D}`)):(W.setAttribute("width","100%"),W.setAttribute("height","100%")),_.appendChild(W),(U.querySelector("defs")||U).prepend(_)}let P=r.ownerDocument.createElementNS(en,"use");P.setAttribute("href",`#${I}`),a.exportWithDarkMode&&S.mimeType!==ft.svg&&P.setAttribute("filter",_ee);let $=0,L=0;if(e.crop){let{width:W,height:F}=Gf(e);$=e.crop.x/(e.crop.naturalWidth/W),L=e.crop.y/(e.crop.naturalHeight/F)}let B=h+$,V=g+L;P.setAttribute("width",`${k+$}`),P.setAttribute("height",`${M+L}`),P.setAttribute("opacity",`${v}`),(e.scale[0]!==1||e.scale[1]!==1)&&P.setAttribute("transform",`translate(${B} ${V}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-B} ${-V})`);let z=r.ownerDocument.createElementNS(en,"g");if(e.crop){let W=r.ownerDocument.createElementNS(en,"mask");W.setAttribute("id",`mask-image-crop-${e.id}`),W.setAttribute("fill","#fff");let F=r.ownerDocument.createElementNS(en,"rect");F.setAttribute("x",`${$}`),F.setAttribute("y",`${L}`),F.setAttribute("width",`${k}`),F.setAttribute("height",`${M}`),W.appendChild(F),U.appendChild(W),z.setAttribute("mask",`url(#${W.id})`)}if(z.appendChild(P),z.setAttribute("transform",`translate(${s-$} ${o-L}) rotate(${y} ${B} ${V})`),e.roundness){let W=r.ownerDocument.createElementNS(en,"clipPath");W.id=`image-clipPath-${e.id}`;let F=r.ownerDocument.createElementNS(en,"rect"),K=yl(Math.min(e.width,e.height),e);F.setAttribute("width",`${e.width}`),F.setAttribute("height",`${e.height}`),F.setAttribute("rx",`${K}`),F.setAttribute("ry",`${K}`),W.appendChild(F),x(W,e),z.setAttributeNS(en,"clip-path",`url(#${W.id})`)}let G=y5(e,U,[z],a.frameRendering,t);x(G||z,e)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){let k=document.createElementNS(en,"rect");k.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`),k.setAttribute("width",`${e.width}px`),k.setAttribute("height",`${e.height}px`),k.setAttribute("rx",ir.radius.toString()),k.setAttribute("ry",ir.radius.toString()),k.setAttribute("fill","none"),k.setAttribute("stroke",ir.strokeColor),k.setAttribute("stroke-width",ir.strokeWidth.toString()),x(k,e)}break}default:if(Ve(e)){let k=r.ownerDocument.createElementNS(en,"g");v!==1&&(k.setAttribute("stroke-opacity",`${v}`),k.setAttribute("fill-opacity",`${v}`)),k.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${y} ${h} ${g})`);let M=e.text.replace(/\r\n?/g,`
`).split(`
`),S=Sy(e.fontSize,e.lineHeight),A=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,I=xee(e.fontFamily,e.fontSize,S),R=OJ(e.text)?"rtl":"ltr",D=e.textAlign==="center"?"middle":e.textAlign==="right"||R==="rtl"?"end":"start";for(let P=0;P<M.length;P++){let $=r.ownerDocument.createElementNS(en,"text");$.textContent=M[P],$.setAttribute("x",`${A}`),$.setAttribute("y",`${P*S+I}`),$.setAttribute("font-family",Ig(e)),$.setAttribute("font-size",`${e.fontSize}px`),$.setAttribute("fill",e.strokeColor),$.setAttribute("text-anchor",D),$.setAttribute("style","white-space: pre;"),$.setAttribute("direction",R),$.setAttribute("dominant-baseline","alphabetic"),k.appendChild($)}let _=y5(e,U,[k],a.frameRendering,t);x(_||k,e)}else throw new Error(`Unimplemented type ${e.type}`)}},nje=(e,t,n,r,i,s)=>{r&&(e.filter(o=>!ya(o)).forEach(o=>{if(!o.isDeleted){if(Ve(o)&&o.containerId&&t.has(o.containerId))return;try{X3(o,t,n,r,i,o.x+s.offsetX,o.y+s.offsetY,s);let a=At(o,t);a&&X3(a,t,n,r,i,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>ya(o)).forEach(o=>{if(!o.isDeleted)try{X3(o,t,n,r,i,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},B$=500,CN=e=>{var r,i;let t=(r=e.extensions)==null?void 0:r.reduce((s,o)=>(s.push(ft[o]),s),[]),n=(i=e.extensions)==null?void 0:i.reduce((s,o)=>o==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${o}`),[]);return IAe({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(s,o,a)=>{let l=Ng(o,B$),f=()=>{c(),document.addEventListener("keyup",l),document.addEventListener("pointerup",l),l()},c=()=>{var u;if((u=a.files)!=null&&u.length){let h=e.multiple?[...a.files]:a.files[0];s(h)}};requestAnimationFrame(()=>{window.addEventListener("focus",f)});let d=window.setInterval(()=>{c()},B$);return u=>{clearInterval(d),l.cancel(),window.removeEventListener("focus",f),document.removeEventListener("keyup",l),document.removeEventListener("pointerup",l),u&&(console.warn("Opening the file was canceled (legacy-fs)."),u(new Iw))}}})},q4=(e,t)=>RAe(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),rje=(e,t)=>{let n={};for(let r of e)!r.isDeleted&&"fileId"in r&&r.fileId&&t[r.fileId]&&(n[r.fileId]=t[r.fileId]);return n},AN=(e,t,n,r)=>{let i={type:ka.excalidraw,version:Ew.excalidraw,source:YI,elements:cne(e),appState:RJ(t),files:rje(e,n)};return JSON.stringify(i,null,2)},kte=async(e,t,n,r=t.name||IJ)=>{let i=AN(e,t,n),s=new Blob([i],{type:ft.excalidraw});return{fileHandle:await q4(s,{name:r,extension:"excalidraw",description:"Excalidraw file",fileHandle:rR(t.fileHandle)?null:t.fileHandle})}},ije=async(e,t)=>{let n=await CN({description:"Excalidraw files"});return pne(await iR(n),e,t,n.handle)},sje=e=>(e==null?void 0:e.type)===ka.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),Ste=e=>typeof e=="object"&&e&&e.type===ka.excalidrawLibrary&&(e.version===1||e.version===2),Cte=e=>{let t={type:ka.excalidrawLibrary,version:Ew.excalidrawLibrary,source:YI,libraryItems:e};return JSON.stringify(t,null,2)},oje=async e=>{let t=Cte(e);await q4(new Blob([t],{type:ft.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},Ate=e=>new Promise((t,n)=>{let r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Mte=async({fileIds:e,files:t,imageCache:n})=>{let r=new Map,i=new Map;return await Promise.all(e.reduce((s,o)=>{let a=t[o];return a&&!r.has(o)?(r.set(o,!0),s.concat((async()=>{try{if(a.mimeType===ft.binary)throw new Error("Only images can be added to ImageCache");let l=Ate(a.dataURL),f={image:l,mimeType:a.mimeType};n.set(o,f);let c=await l;n.set(o,{...f,image:c})}catch{i.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:r,erroredFiles:i}},Tte=e=>e.filter(t=>ga(t)),aje=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",F$=e=>{let t=new DOMParser().parseFromString(e,ft.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!aje(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",en);let r=n.getAttribute("width"),i=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(i!=null&&i.includes("%")||i==="auto")&&(i=null);let s=n.getAttribute("viewBox");if(!r||!i){if(r=r||"50",i=i||"50",s){let o=s.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);o&&([,r,i]=o)}n.setAttribute("width",r),n.setAttribute("height",i)}return s||n.setAttribute("viewBox",`0 0 ${r} ${i}`),n.outerHTML}},Ite=document.createElement("img");Ite.src=`data:${ft.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;var Nte=document.createElement("img");Nte.src=`data:${ft.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;var MN=([e,t,n,r],i,s)=>{let o=uLe,a=o/s.zoom.value,l=o/s.zoom.value,f=o/s.zoom.value,c=(e+n)/2,d=(t+r)/2,u=(o-8)/(2*s.zoom.value),h=4/s.zoom.value,g=n+h-u,y=t-h-f+u,[U,x]=ue(O(g+a/2,y+l/2),O(c,d),i);return[U-a/2,x-l/2,a,l]},Rte=(e,t,n,[r,i])=>{let s=4/n.zoom.value,[o,a,l,f]=vt(e,t),[c,d,u,h]=MN([o,a,l,f],e.angle,n);return r>c-s&&r<c+s+u&&i>d-s&&i<d+h+s},oS=(e,t,n,[r,i],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&mN(r,i,e,t)?!0:Rte(e,t,n,O(r,i)),$w=(e,t,n,r,i=!0)=>{e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill(),i&&e.stroke()},TN=(e,t)=>[e.width/t,e.height/t],IN=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:r,theme:i,isExporting:s,viewBackgroundColor:o})=>{let a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&i===Ft.DARK&&(a.filter=QI),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,r),a.save(),a.fillStyle=o,a.fillRect(0,0,n,r),a.restore()):a.clearRect(0,0,n,r),a},_te=(e,t)=>{let n=window.location.href;try{let r=new URL(n);return r.searchParams.set(R4,e),Do(r.toString())}catch(r){console.error(r)}return Do(n)},Pte=(e,t)=>{if(e.length>0&&Q4(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){let n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},Q4=e=>!!(e.length===1||e.length>1&&ote(e)),v2=e=>{try{let t=new URL(e);return t.searchParams.has(R4)&&t.host===window.location.host}catch{return!1}},lje=e=>{try{let{searchParams:t}=new URL(e);if(t.has(R4))return t.get(R4)}catch{}return null},VU={Bold:"#dddddd",Regular:"#e5e5e5"},cje=(e,t,n,r,i,s,o,a)=>{let l=r%t-t,f=i%t-t,c=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,f%1?0:.5);for(let u=l;u<l+o+t*2;u+=t){let h=n>1&&Math.round(u-r)%(n*t)===0;if(!h&&c<10)continue;let g=Math.min(1/s.value,h?4:1);e.lineWidth=g;let y=[g*3,d+(g+d)];e.beginPath(),e.setLineDash(h?[]:y),e.strokeStyle=h?VU.Bold:VU.Regular,e.moveTo(u,f-t),e.lineTo(u,Math.ceil(f+a+t*2)),e.stroke()}for(let u=f;u<f+a+t*2;u+=t){let h=n>1&&Math.round(u-i)%(n*t)===0;if(!h&&c<10)continue;let g=Math.min(1/s.value,h?4:1);e.lineWidth=g;let y=[g*3,d+(g+d)];e.beginPath(),e.setLineDash(h?[]:y),e.strokeStyle=h?VU.Bold:VU.Regular,e.moveTo(l-t,u),e.lineTo(Math.ceil(l+o+t*2),u),e.stroke()}e.restore()},z$=(e,t,n,r)=>{t.translate(e.x+r.scrollX,e.y+r.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,ir.radius/r.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+r.scrollX),-(e.y+r.scrollY))},$$={regularLink:null,elementLink:null},H$=(e,t,n,r)=>{if(e.link&&!n.selectedElementIds[e.id]){let[i,s,o,a]=vt(e,r),[l,f,c,d]=MN([i,s,o,a],e.angle,n),u=l+c/2,h=f+d/2;t.save(),t.translate(n.scrollX+u,n.scrollY+h),t.rotate(e.angle);let g=v2(e.link)?"elementLink":"regularLink",y=$$[g];if(!y||y.zoom!==n.zoom.value){y=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),y.width=c*window.devicePixelRatio*n.zoom.value,y.height=d*window.devicePixelRatio*n.zoom.value,$$[g]=y;let U=y.getContext("2d");U.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),U.fillStyle="#fff",U.fillRect(0,0,c,d),g==="elementLink"?U.drawImage(Nte,0,0,c,d):U.drawImage(Ite,0,0,c,d),U.restore()}t.drawImage(y,l-u,f-h,c,d),t.restore()}},Dte=({canvas:e,rc:t,elementsMap:n,allElementsMap:r,visibleElements:i,scale:s,appState:o,renderConfig:a})=>{var y;if(e===null)return;let{renderGrid:l=!0,isExporting:f}=a,[c,d]=TN(e,s),u=IN({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:d,theme:o.theme,isExporting:f,viewBackgroundColor:o.viewBackgroundColor});u.scale(o.zoom.value,o.zoom.value),l&&cje(u,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,c/o.zoom.value,d/o.zoom.value);let h=new Set;i.forEach(U=>{U.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[U.id]&&(Ku(U,o.frameToHighlight,n)||U.groupIds.find(x=>h.has(x)))&&U.groupIds.forEach(x=>h.add(x))});let g=new Map;i.filter(U=>!ya(U)).forEach(U=>{var x;try{let v=U.frameId||((x=o.frameToHighlight)==null?void 0:x.id);if(Ve(U)&&U.containerId&&n.has(U.containerId))return;if(u.save(),v&&o.frameRendering.enabled&&o.frameRendering.clip){let k=pM(U,n,o);k&&iH(U,k,o,n,g)&&z$(k,u,a,o),j0(U,n,r,t,u,a,o)}else j0(U,n,r,t,u,a,o);let E=At(U,n);E&&j0(E,n,r,t,u,a,o),u.restore(),f||H$(U,u,o,n)}catch(v){console.error(v,U.id,U.x,U.y,U.width,U.height)}}),i.filter(U=>ya(U)).forEach(U=>{var x;try{let v=()=>{if(j0(U,n,r,t,u,a,o),ya(U)&&(f||Qs(U)&&a.embedsValidationStatus.get(U.id)!==!0)&&U.width&&U.height){let E=Ete(U);j0(E,n,r,t,u,a,o)}f||H$(U,u,o,n)};if((U.frameId||(x=o.frameToHighlight)!=null&&x.id)&&o.frameRendering.enabled&&o.frameRendering.clip){u.save();let E=pM(U,n,o);E&&iH(U,E,o,n,g)&&z$(E,u,a,o),v(),u.restore()}else v()}catch(v){console.error(v)}}),(y=a.pendingFlowchartNodes)==null||y.forEach(U=>{try{j0(U,n,r,t,u,a,o)}catch(x){console.error(x)}})},Lte=kw(e=>{Dte(e)},{trailing:!0}),Ote=(e,t)=>{if(t){Lte(e);return}Dte(e)},fje=(e,t)=>{if(e.width<=t)return e;let n=document.createElement("canvas").getContext("2d");n.font=wn({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(n.measureText(r).width>t)for(let i=r.length;i>0;i--){let s=`${r.slice(0,i)}...`;if(n.measureText(s).width<=t){r=s;break}}return Ct(e,{text:r,width:t})},dje=(e,t)=>{let n=[];for(let r of e){if(ht(r)){let i=jo({x:r.x,y:r.y-ir.nameOffsetY,fontFamily:rr.Helvetica,fontSize:ir.nameFontSize,lineHeight:ir.nameLineHeight,strokeColor:t.exportWithDarkMode?ir.nameColorDarkTheme:ir.nameColorLightTheme,text:Jte(r)});i.y-=i.height,i=fje(i,r.width),n.push(i)}n.push(r)}return n},jte=(e,t)=>(t=t||Ac().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),Bte=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:r})=>{let i;return t?i=YN(e,t):n.enabled&&n.name?i=dje(e,{exportWithDarkMode:r}):i=e,i},Fte=async(e,t,n,{exportBackground:r,exportPadding:i=e6,viewBackgroundColor:s,exportingFrame:o},a=(f,c)=>{let d=document.createElement("canvas");return d.width=f*t.exportScale,d.height=c*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await Bf.loadElementsFonts(e)})=>{await l();let f=jte(o??null,t.frameRendering??null);o&&(f.clip=!1);let c=Bte({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:f});o&&(i=0);let[d,u,h,g]=RN(o?[o]:KN(c),i),{canvas:y,scale:U=1}=a(h,g),x=Ac(),{imageCache:v}=await Mte({imageCache:new Map,fileIds:Tte(c).map(E=>E.fileId),files:n});return Ote({canvas:y,rc:i0.canvas(y),elementsMap:Aa(mt(c)),allElementsMap:Aa(mt(Yf(e))),visibleElements:c,scale:U,appState:{...t,frameRendering:f,viewBackgroundColor:r?s:null,scrollX:-d+i,scrollY:-u+i,zoom:x.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?Ft.DARK:Ft.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:v,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),y},H5=e=>document.createComment(` ${e} `),NN=async(e,t,n,r)=>{let i=jte((r==null?void 0:r.exportingFrame)??null,t.frameRendering??null),{exportPadding:s=e6,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:f}=t,{exportingFrame:c=null}=r||{},d=Bte({elements:e,exportingFrame:c,exportWithDarkMode:o,frameRendering:i});c&&(s=0);let[u,h,g,y]=RN(c?[c]:KN(d),s),U=-u+s,x=-h+s,v=document.createElementNS(en,"svg");v.setAttribute("version","1.1"),v.setAttribute("xmlns",en),v.setAttribute("viewBox",`0 0 ${g} ${y}`),v.setAttribute("width",`${g*l}`),v.setAttribute("height",`${y*l}`),o&&v.setAttribute("filter",QI);let E=v.ownerDocument.createElementNS(en,"defs"),k=v.ownerDocument.createElementNS(en,"metadata");if(v.appendChild(H5("svg-source:excalidraw")),v.appendChild(k),v.appendChild(E),f)try{uje({metadataElement:k,payload:AN(e,t,n||{},"local")})}catch(_){console.error(_)}let M=XN(e);if(M.length){let _=mt(e);for(let P of M){let $=v.ownerDocument.createElementNS(en,"clipPath");$.setAttribute("id",P.id);let[L,B,V,z]=vt(P,_),G=(V-L)/2-(P.x-L),W=(z-B)/2-(P.y-B),F=v.ownerDocument.createElementNS(en,"rect");F.setAttribute("transform",`translate(${P.x+U} ${P.y+x}) rotate(${P.angle} ${G} ${W})`),F.setAttribute("width",`${P.width}`),F.setAttribute("height",`${P.height}`),c||(F.setAttribute("rx",`${ir.radius}`),F.setAttribute("ry",`${ir.radius}`)),$.appendChild(F),E.appendChild($)}}let S=r!=null&&r.skipInliningFonts?[]:await Bf.generateFontFaceDeclarations(e),A=`
      `,I=v.ownerDocument.createElementNS(en,"style");if(I.classList.add("style-fonts"),I.appendChild(document.createTextNode(`${A}${S.join(A)}`)),E.appendChild(I),t.exportBackground&&a){let _=v.ownerDocument.createElementNS(en,"rect");_.setAttribute("x","0"),_.setAttribute("y","0"),_.setAttribute("width",`${g}`),_.setAttribute("height",`${y}`),_.setAttribute("fill",a),v.appendChild(_)}let R=i0.svg(v),D=(r==null?void 0:r.renderEmbeddables)??!1;return nje(d,Aa(mt(d)),R,v,n||{},{offsetX:U,offsetY:x,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:D,frameRendering:i,canvasBackgroundColor:a,embedsValidationStatus:D?new Map(d.filter(_=>ht(_)).map(_=>[_.id,!0])):new Map,reuseImages:(r==null?void 0:r.reuseImages)??!0}),v},uje=({payload:e,metadataElement:t})=>{let n=yne(JSON.stringify(xne({text:e})),!0);t.appendChild(H5(`payload-type:${ft.excalidraw}`)),t.appendChild(H5("payload-version:2")),t.appendChild(H5("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(H5("payload-end"))},hje=({svg:e})=>{var t;if(e.includes(`payload-type:${ft.excalidraw}`)){let n=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!n)throw new Error("INVALID");let r=(((t=e.match(/<!-- payload-version:(\d+) -->/))==null?void 0:t[1])||"1")!=="1";try{let i=Une(n[1],r),s=JSON.parse(i);if(!("encoded"in s)){if("type"in s&&s.type===ka.excalidraw)return i;throw new Error("FAILED")}return wne(s)}catch(i){throw console.error(i),new Error("FAILED")}}throw new Error("INVALID")},RN=(e,t)=>{let[n,r,i,s]=pn(e),o=rs(n,i)+t*2,a=rs(r,s)+t*2;return[n,r,o,a]},pje=(e,t,n)=>{let[,,r,i]=RN(e,t).map(s=>Math.trunc(s*n));return[r,i]},mje=class{constructor(t){this.scoreFunction=t,Q(this,"content",[])}sinkDown(t){let n=this.content[t];for(;t>0;){let r=(t+1>>1)-1,i=this.content[r];if(this.scoreFunction(n)<this.scoreFunction(i))this.content[r]=n,this.content[t]=i,t=r;else break}}bubbleUp(t){let n=this.content.length,r=this.content[t],i=this.scoreFunction(r);for(;;){let s=t+1<<1,o=s-1,a=null,l=0;if(o<n){let f=this.content[o];l=this.scoreFunction(f),l<i&&(a=o)}if(s<n){let f=this.content[s];this.scoreFunction(f)<(a===null?i:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=r,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;let t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;let n=this.content.indexOf(t),r=this.content.pop();n<this.content.length&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}},_N=1,bn=40,gje=(e,t)=>{let n=e.fixedSegments?e.fixedSegments.slice():null;if(n){let r=[];e.points.map(o=>O(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return r.push(o);let f=Eb(o,l[a-1]),c=Eb(l[a-1],l[a-2]);if(yr(f,c)){let d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,u=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;u!==-1&&(n[u].start=O(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),r.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return r.push(o)});let i=[];r.forEach((o,a,l)=>{if(a<3)return i.push(o);if(cn(l[a-2],l[a-1])<_N){let f=(n==null?void 0:n.findIndex(u=>u.index===a-2))??-1,c=(n==null?void 0:n.findIndex(u=>u.index===a-1))??-1;c!==-1&&n.splice(c,1),f!==-1&&n.splice(f,1),i.splice(-2,2),n.forEach(u=>{u.index>a-2&&(u.index-=2)});let d=Mf(o,l[a-1]);return i.push(O(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}i.push(o)});let s=n.filter(o=>o.index!==1&&o.index!==i.length-1);return s.length===0?Xu(ON(jN(LN(e,DN(e,t,i.map(o=>O(o[0]-e.x,o[1]-e.y)),e.startBinding&&Fg(e.startBinding.elementId,t),e.endBinding&&Fg(e.endBinding.elementId,t)))??[])),s,null,null):(It.DEV&&fs(BN(i),"Invalid elbow points with fixed segments"),Xu(i,s,e.startIsSpecial,e.endIsSpecial))}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},bje=(e,t,n)=>{var I,R;let r=t.map(D=>D.index),i=(((I=e.fixedSegments)==null?void 0:I.map(D=>D.index))??[]).findIndex(D=>!r.includes(D));if(i===-1||!((R=e.fixedSegments)!=null&&R[i]))return{points:e.points};let s=e.fixedSegments[i].index,o=e.fixedSegments[i-1],a=e.fixedSegments[i+1],l=e.x+(o?o.end[0]:0),f=e.y+(o?o.end[1]:0),c=o?null:e.startBinding,d=a?null:e.endBinding,{startHeading:u,endHeading:h,startGlobalPoint:g,endGlobalPoint:y,hoveredStartElement:U,hoveredEndElement:x,...v}=DN({x:l,y:f,startBinding:c,endBinding:d,startArrowhead:null,endArrowhead:null,points:e.points},n,[O(0,0),O(e.x+((a==null?void 0:a.start[0])??e.points[e.points.length-1][0])-l,e.y+((a==null?void 0:a.start[1])??e.points[e.points.length-1][1])-f)],c&&Fg(c.elementId,n),d&&Fg(d.elementId,n),{isDragging:!1}),{points:E}=Xu(ON(jN(LN(e,{startHeading:u,endHeading:h,startGlobalPoint:g,endGlobalPoint:y,hoveredStartElement:U,hoveredEndElement:x,...v})??[])),t,null,null),k=[];if(o)for(let D=0;D<o.index;D++)k.push(O(e.x+e.points[D][0],e.y+e.points[D][1]));if(E.forEach(D=>{k.push(O(e.x+(o?o.end[0]:0)+D[0],e.y+(o?o.end[1]:0)+D[1]))}),a)for(let D=a.index;D<e.points.length;D++)k.push(O(e.x+e.points[D][0],e.y+e.points[D][1]));let M=((a==null?void 0:a.index)??e.points.length)-((o==null?void 0:o.index)??0)-1,S=t.map(D=>D.index>s?{...D,index:D.index-M+(E.length-1)}:D),A=k.flatMap((D,_)=>{let P=k[_-1],$=k[_+1];if(P&&$){let L=Eb(D,P),B=Eb($,D);if(yr(L,B))return S.forEach(V=>{V.index>_&&(V.index-=1)}),[];if(yr(L,Hee(B)))return S.forEach(V=>{V.index>_&&(V.index+=1)}),[D,D]}return[D]});return Xu(A,S,!1,!1)},yje=(e,t,n,r,i,s)=>{var M,S;let o=t.map((A,I)=>e.fixedSegments==null||e.fixedSegments[I]===void 0||e.fixedSegments[I].index!==A.index||(A.start[0]!==e.fixedSegments[I].start[0]&&A.end[0]!==e.fixedSegments[I].end[0])!=(A.start[1]!==e.fixedSegments[I].start[1]&&A.end[1]!==e.fixedSegments[I].end[1])?I:null).filter(A=>A!==null).shift();if(o==null)return{points:e.points};let a=((M=e.fixedSegments)==null?void 0:M.findIndex(A=>A.index===1))??-1,l=((S=e.fixedSegments)==null?void 0:S.findIndex(A=>A.index===e.points.length-1))??-1,f=cn(t[o].start,t[o].end),c=f<bn+5;if(a===-1&&t[o].index===1&&i){let A=_f(n),I=(A?yr(n,gr):yr(n,vi))?c?f/2:bn:c?-f/2:-bn;t[o].start=O(t[o].start[0]+(A?I:0),t[o].start[1]+(A?0:I))}if(l===-1&&t[o].index===e.points.length-1&&s){let A=_f(r),I=(A?yr(r,gr):yr(r,vi))?c?f/2:bn:c?-f/2:-bn;t[o].end=O(t[o].end[0]+(A?I:0),t[o].end[1]+(A?0:I))}let d=t.map(A=>({...A,start:O(e.x+A.start[0],e.y+A.start[1]),end:O(e.x+A.end[0],e.y+A.end[1])})),u=e.points.map((A,I)=>O(e.x+A[0],e.y+A[1])),h=d[o].index-1,g=d[o].index,y=d[o].start,U=d[o].end,x=u[h-1]&&!El(u[h],u[h-1])?Mf(u[h-1],u[h]):void 0,v=u[g+1]&&!El(u[g],u[g+1])?Mf(u[g+1],u[g]):void 0;if(x!==void 0){let A=x?1:0;u[h-1][A]=y[A]}if(u[h]=y,u[g]=U,v!==void 0){let A=v?1:0;u[g+1][A]=U[A]}let E=d.findIndex(A=>A.index===h);if(E!==-1){let A=Mf(d[E].end,d[E].start)?1:0;d[E].start[A]=y[A],d[E].end=y}let k=d.findIndex(A=>A.index===g+1);if(k!==-1){let A=Mf(d[k].end,d[k].start)?1:0;d[k].end[A]=U[A],d[k].start=U}if(a===-1&&h===0){let A=i?_f(n):Mf(u[1],u[0]);u.unshift(O(A?y[0]:e.x+e.points[0][0],A?e.y+e.points[0][1]:y[1])),i&&u.unshift(O(e.x+e.points[0][0],e.y+e.points[0][1]));for(let I of d)I.index+=i?2:1}if(l===-1&&g===e.points.length-1){let A=_f(r);u.push(O(A?U[0]:e.x+e.points[e.points.length-1][0],A?e.y+e.points[e.points.length-1][1]:U[1])),s&&u.push(O(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return Xu(u,d.map(A=>({...A,start:O(A.start[0]-e.x,A.start[1]-e.y),end:O(A.end[0]-e.x,A.end[1]-e.y)})),!1,!1)},Uje=(e,t,n,r,i,s,o,a,l)=>{let f=e.startIsSpecial??null,c=e.endIsSpecial??null,d=t.map((U,x)=>x===0||x===t.length-1?O(e.x+U[0],e.y+U[1]):O(e.x+e.points[x][0],e.y+e.points[x][1])),u=n.map(U=>({...U,start:O(e.x+(U.start[0]-t[0][0]),e.y+(U.start[1]-t[0][1])),end:O(e.x+(U.end[0]-t[0][0]),e.y+(U.end[1]-t[0][1]))})),h=[],g=2+(f?1:0),y=2+(c?1:0);for(;h.length+g<d.length-y;)h.push(d[h.length+g]);{let U=d[f?2:1],x=d[f?3:2],v=_f(r),E=_f(b1(tt(U,x)));if(a&&v===E){let k=v?yr(r,gr):yr(r,vi);if(h.unshift(O(E?s[0]+(k?bn:-bn):x[0],E?x[1]:s[1]+(k?bn:-bn))),h.unshift(O(v?s[0]+(k?bn:-bn):s[0],v?s[1]:s[1]+(k?bn:-bn))),!f){f=!0;for(let M of u)M.index>1&&(M.index+=1)}}else if(h.unshift(O(E?s[0]:U[0],E?U[1]:s[1])),f){f=!1;for(let k of u)k.index>1&&(k.index-=1)}h.unshift(s)}{let U=d[d.length-(c?3:2)],x=d[d.length-(c?4:3)],v=_f(i),E=Mf(x,U);if(l&&v===E){let k=v?yr(i,gr):yr(i,vi);h.push(O(E?o[0]+(k?bn:-bn):x[0],E?x[1]:o[1]+(k?bn:-bn))),h.push(O(v?o[0]+(k?bn:-bn):o[0],v?o[1]:o[1]+(k?bn:-bn))),c||(c=!0)}else h.push(O(E?o[0]:U[0],E?U[1]:o[1])),c&&(c=!1)}return h.push(o),Xu(h,u.map(({index:U})=>({index:U,start:h[U-1],end:h[U]})).map(U=>({...U,start:O(U.start[0]-s[0],U.start[1]-s[1]),end:O(U.end[0]-s[0],U.end[1]-s[1])})),f,c)},An=1e6,PN=(e,t,n,r)=>{var x,v,E,k,M,S,A,I,R,D,_,P,$,L,B,V,z,G,W,F,K,q,Y,ae,ge;if(e.points.length<2)return{points:n.points??e.points};(e.x<-An||e.x>An||e.y<-An||e.y>An||e.x+(((E=(v=n==null?void 0:n.points)==null?void 0:v[((x=n==null?void 0:n.points)==null?void 0:x.length)-1])==null?void 0:E[0])??0)<-An||e.x+(((S=(M=n==null?void 0:n.points)==null?void 0:M[((k=n==null?void 0:n.points)==null?void 0:k.length)-1])==null?void 0:S[0])??0)>An||e.y+(((R=(I=n==null?void 0:n.points)==null?void 0:I[((A=n==null?void 0:n.points)==null?void 0:A.length)-1])==null?void 0:R[1])??0)<-An||e.y+(((P=(_=n==null?void 0:n.points)==null?void 0:_[((D=n==null?void 0:n.points)==null?void 0:D.length)-1])==null?void 0:P[1])??0)>An||e.x+(((B=(L=e==null?void 0:e.points)==null?void 0:L[(($=e==null?void 0:e.points)==null?void 0:$.length)-1])==null?void 0:B[0])??0)<-An||e.x+(((G=(z=e==null?void 0:e.points)==null?void 0:z[((V=e==null?void 0:e.points)==null?void 0:V.length)-1])==null?void 0:G[0])??0)>An||e.y+(((K=(F=e==null?void 0:e.points)==null?void 0:F[((W=e==null?void 0:e.points)==null?void 0:W.length)-1])==null?void 0:K[1])??0)<-An||e.y+(((ae=(Y=e==null?void 0:e.points)==null?void 0:Y[((q=e==null?void 0:e.points)==null?void 0:q.length)-1])==null?void 0:ae[1])??0)>An)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=Ot(e.x,-An,An),e.y=Ot(e.y,-An,An),n.points&&(n.points=n.points.map(([he,ce])=>O(Ot(he,-An,An),Ot(ce,-An,An))));let i=n.points?n.points&&n.points.length===2?e.points.map((he,ce)=>ce===0?n.points[0]:ce===e.points.length-1?n.points[1]:he):n.points.slice():e.points.slice(),s=typeof n.startBinding<"u"?n.startBinding:e.startBinding,o=typeof n.endBinding<"u"?n.endBinding:e.endBinding,a=s&&Fg(s.elementId,t),l=o&&Fg(o.elementId,t);if(t.size===0&&BN(i)||(a==null?void 0:a.id)!==(s==null?void 0:s.elementId)||(l==null?void 0:l.id)!==(o==null?void 0:o.elementId))return Xu(i.map(he=>O(e.x+he[0],e.y+he[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);let{startHeading:f,endHeading:c,startGlobalPoint:d,endGlobalPoint:u,hoveredStartElement:h,hoveredEndElement:g,...y}=DN({x:e.x,y:e.y,startBinding:s,endBinding:o,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,i,a,l,r),U=n.fixedSegments??e.fixedSegments??[];return!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?gje(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((he,ce)=>El(he,e.points[ce]??O(1/0,1/0)))?{}:U.length===0?Xu(ON(jN(LN(e,{startHeading:f,endHeading:c,startGlobalPoint:d,endGlobalPoint:u,hoveredStartElement:h,hoveredEndElement:g,...y})??[])),U,null,null):(((ge=e.fixedSegments)==null?void 0:ge.length)??0)>U.length?bje(e,U,t):n.points?n.points&&n.fixedSegments?n:Uje(e,i,U,f,c,d,u,h,g):yje(e,U,f,c,h,g)},DN=(e,t,n,r,i,s)=>{var A,I;let o=D4(n[0],Li(e.x,e.y)),a=D4(n[n.length-1],Li(e.x,e.y)),l=r,f=i;if(s!=null&&s.isDragging){let R=Array.from(t.values());l=X$(o,t,R,s==null?void 0:s.zoom)||r,f=X$(a,t,R,s==null?void 0:s.zoom)||i}let c=W$({...e,elbowed:!0,points:n},"start",(A=e.startBinding)==null?void 0:A.fixedPoint,o,r,l,s==null?void 0:s.isDragging),d=W$({...e,elbowed:!0,points:n},"end",(I=e.endBinding)==null?void 0:I.fixedPoint,a,i,f,s==null?void 0:s.isDragging),u=G$(c,d,t,l,o),h=G$(d,c,t,f,a),g=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],y=[d[0]-2,d[1]-2,d[0]+2,d[1]+2],U=l?ac(l,jd(u,e.startArrowhead?Tn*6:Tn*2,1)):g,x=f?ac(f,jd(h,e.endArrowhead?Tn*6:Tn*2,1)):y,v=Pg(c,f?ac(f,jd(h,bn,bn)):y)||Pg(d,l?ac(l,jd(u,bn,bn)):g),E=zte(v?[g,y]:[U,x]),k=vje(v?g:U,v?y:x,E,v?jd(u,!l&&!f?0:bn,0):jd(u,!l&&!f?0:bn-(e.startArrowhead?Tn*6:Tn*2),bn),v?jd(h,!l&&!f?0:bn,0):jd(h,!l&&!f?0:bn-(e.endArrowhead?Tn*6:Tn*2),bn),v,l&&ac(l),f&&ac(f)),M=V$(k[0],u,c),S=V$(k[1],h,d);return{dynamicAABBs:k,startDonglePosition:M,startGlobalPoint:c,startHeading:u,endDonglePosition:S,endGlobalPoint:d,endHeading:h,commonBounds:E,hoveredStartElement:l,hoveredEndElement:f,boundsOverlap:v,startElementBounds:U,endElementBounds:x}},LN=(e,t)=>{let{dynamicAABBs:n,startDonglePosition:r,startGlobalPoint:i,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:f,hoveredEndElement:c}=t,d=Eje(n,r||i,s,o||a,l,f),u=r&&WU(r,d),h=o&&WU(o,d),g=WU(a,d);g&&c&&(g.closed=!0);let y=WU(i,d);y&&e.startBinding&&(y.closed=!0);let U=u&&h&&(Pg(u.pos,n[1])||Pg(h.pos,n[0])),x=xje(u||y,h||g,d,s||gr,l||gr,U?[]:n);if(x){let v=x.map(E=>[E.pos[0],E.pos[1]]);return u&&v.unshift(i),h&&v.push(a),v}return null},jd=(e,t,n)=>{switch(e){case ro:return[t,n,n,n];case gr:return[n,t,n,n];case vi:return[n,n,t,n]}return[n,n,n,t]},xje=(e,t,n,r,i,s)=>{let o=aS(e.pos,t.pos),a=new mje(l=>l.f);for(a.push(e);a.size()>0;){let l=a.pop();if(!l||l.closed)continue;if(l===t)return wje(e,l);l.closed=!0;let f=Sje(l.addr,n);for(let c=0;c<4;c++){let d=f[c];if(!d||d.closed)continue;let u=sf(d.pos,l.pos,.5);if(KMe(...s.map(E=>Pg(u,E))))continue;let h=Cje(c),g=l.parent?b1(tt(l.pos,l.parent.pos)):r,y=Hee(g);if(yr(y,h)||K$(e.addr,d.addr)&&yr(h,r)||K$(t.addr,d.addr)&&yr(h,i))continue;let U=g!==h,x=l.g+aS(d.pos,l.pos)+(U?Math.pow(o,3):0),v=d.visited;if(!v||x<d.g){let E=kje(d,t,h,i);d.visited=!0,d.parent=l,d.h=aS(t.pos,d.pos)+E*Math.pow(o,2),d.g=x,d.f=d.g+d.h,v?a.rescoreElement(d):a.push(d)}}}return null},wje=(e,t)=>{let n=t,r=[];for(;n.parent;)r.unshift(n),n=n.parent;return r.unshift(e),r},aS=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),vje=(e,t,n,r,i,s,o,a)=>{let l=o??e,f=a??t,[c,d,u,h]=r??[0,0,0,0],[g,y,U,x]=i??[0,0,0,0],v=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+f[2])/2,e[0]-h):(l[0]+f[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+f[3])/2,e[1]-c):(l[1]+f[3])/2:e[1]>t[1]?e[1]-c:n[1]-c,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+f[0])/2,e[2]+d):(l[2]+f[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+f[1])/2,e[3]+u):(l[3]+f[1])/2:e[3]<t[3]?e[3]+u:n[3]+u],E=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((f[0]+l[2])/2,t[0]-x):(f[0]+l[2])/2:t[0]>e[0]?t[0]-x:n[0]-x,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((f[1]+l[3])/2,t[1]-g):(f[1]+l[3])/2:t[1]>e[1]?t[1]-g:n[1]-g,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((f[2]+l[0])/2,t[2]+y):(f[2]+l[0])/2:t[2]<e[2]?t[2]+y:n[2]+y,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((f[3]+l[1])/2,t[3]+U):(f[3]+l[1])/2:t[3]<e[3]?t[3]+U:n[3]+U],k=zte([v,E]);if(!s&&v[2]-v[0]+E[2]-E[0]>k[2]-k[0]+1e-11&&v[3]-v[1]+E[3]-E[1]>k[3]-k[1]+1e-11){let[M,S]=[(E[0]+E[2])/2,(E[1]+E[3])/2];if(t[0]>e[2]&&e[1]>t[3]){let A=v[2]+(E[0]-v[2])/2,I=E[3]+(v[1]-E[3])/2;return si(Li(e[2]-M,e[1]-S),Li(e[0]-M,e[3]-S))>0?[[v[0],v[1],A,v[3]],[A,E[1],E[2],E[3]]]:[[v[0],I,v[2],v[3]],[E[0],E[1],E[2],I]]}else if(e[2]<t[0]&&e[3]<t[1]){let A=v[2]+(E[0]-v[2])/2,I=v[3]+(E[1]-v[3])/2;return si(Li(e[0]-M,e[1]-S),Li(e[2]-M,e[3]-S))>0?[[v[0],v[1],v[2],I],[E[0],I,E[2],E[3]]]:[[v[0],v[1],A,v[3]],[A,E[1],E[2],E[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){let A=E[2]+(v[0]-E[2])/2,I=v[3]+(E[1]-v[3])/2;return si(Li(e[2]-M,e[1]-S),Li(e[0]-M,e[3]-S))>0?[[A,v[1],v[2],v[3]],[E[0],E[1],A,E[3]]]:[[v[0],v[1],v[2],I],[E[0],I,E[2],E[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){let A=E[2]+(v[0]-E[2])/2,I=E[3]+(v[1]-E[3])/2;return si(Li(e[0]-M,e[1]-S),Li(e[2]-M,e[3]-S))>0?[[A,v[1],v[2],v[3]],[E[0],E[1],A,E[3]]]:[[v[0],I,v[2],v[3]],[E[0],E[1],E[2],I]]}}return[v,E]},Eje=(e,t,n,r,i,s)=>{let o=new Set,a=new Set;n===no||n===gr?a.add(t[1]):o.add(t[0]),i===no||i===gr?a.add(r[1]):o.add(r[0]),e.forEach(c=>{o.add(c[0]),o.add(c[2]),a.add(c[1]),a.add(c[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);let l=Array.from(a).sort((c,d)=>c-d),f=Array.from(o).sort((c,d)=>c-d);return{row:l.length,col:f.length,data:l.flatMap((c,d)=>f.map((u,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[u,c]})))}},V$=(e,t,n)=>{switch(t){case ro:return O(n[0],e[1]);case gr:return O(e[2],n[1]);case vi:return O(n[0],e[3])}return O(e[0],n[1])},kje=(e,t,n,r)=>{if(r===gr)switch(n){case gr:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case ro:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case vi:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case no:return e.pos[1]===t.pos[1]?4:2}else if(r===no)switch(n){case gr:return e.pos[1]===t.pos[1]?4:2;case ro:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case vi:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case no:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(r===ro)switch(n){case gr:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case ro:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case vi:return e.pos[0]===t.pos[0]?4:2;case no:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(r===vi)switch(n){case gr:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case ro:return e.pos[0]===t.pos[0]?4:2;case vi:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case no:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},Sje=([e,t],n)=>[V5([e,t-1],n),V5([e+1,t],n),V5([e,t+1],n),V5([e-1,t],n)],V5=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,WU=(e,t)=>{for(let n=0;n<t.col;n++)for(let r=0;r<t.row;r++){let i=V5([n,r],t);if(i&&e[0]===i.pos[0]&&e[1]===i.pos[1])return i}return null},zte=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],Fg=(e,t)=>{let n=t.get(e);return n&&kl(n)?n:null},Xu=(e,t,n,r)=>{let i=e[0][0],s=e[0][1],o=e.map(a=>D4(a,br(tt(e[0]),-1)));return(i<-An||i>An||s<-An||s>An||i+o[o.length-1][0]<-An||s+o[o.length-1][0]>An||i+o[o.length-1][1]<-An||s+o[o.length-1][1]>An)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:i,y:s,points:o,...Lg(o)}),o=o.map(([a,l])=>O(Ot(a,-1e6,1e6),Ot(l,-1e6,1e6))),{points:o,x:Ot(i,-1e6,1e6),y:Ot(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...Lg(o),startIsSpecial:n,endIsSpecial:r}},ON=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,r)=>{if(r===0||r===e.length-1)return!0;let i=e[r+1],s=Math.abs(n[1]-i[1])<Math.abs(n[0]-i[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},jN=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;let r=e[n-1];return cn(r,t)>_N}):e,Cje=e=>{switch(e){case 0:return ro;case 1:return gr;case 2:return vi}return no},W$=(e,t,n,r,i,s,o)=>{if(o){if(s){let a=kb(e,s,t);return QLe(s,a)}return r}if(i){let a=aM(n||[0,0],i);return Math.abs(_w(i,a)-Tn)>.01?kb(e,i,t):a}return r},G$=(e,t,n,r,i)=>KLe(e,t,r,r&&ac(r,Array(4).fill(_w(r,e))),n,i),X$=(e,t,n,r)=>pl(ul(e),n,t,r,!0,!0),K$=(e,t)=>e[0]===t[0]&&e[1]===t[1],BN=(e,t=_N)=>e.slice(1).map((n,r)=>Math.abs(n[0]-e[r][0])<t||Math.abs(n[1]-e[r][1])<t).every(Boolean),Aje={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},Mje=e=>Object.keys(rr).includes(e)?rr[e]:s0,Up=(e,t)=>{if(!t)return null;let n=t.focus||0;return Ge(e)?B4(t)?{...t,focus:n,fixedPoint:Ow(t.fixedPoint??[0,0])}:null:{...t,focus:n}},Bd=(e,t)=>{let n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||Ia(),fillStyle:e.fillStyle||hr.fillStyle,strokeWidth:e.strokeWidth||hr.strokeWidth,strokeStyle:e.strokeStyle??hr.strokeStyle,roughness:e.roughness??hr.roughness,opacity:e.opacity==null?hr.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||hr.strokeColor,backgroundColor:e.backgroundColor||hr.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:n6(e.type)?qr.LEGACY:qr.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??t6(),link:e.link?Do(e.link):null,locked:e.locked??!1};return("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData),{...e,...n,...rne(n),...t}},Tje=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){let[c,d]=e.font.split(" ");t=parseFloat(c),n=Mje(d)}let r=typeof e.text=="string"&&e.text||"",i=e.lineHeight||(e.height?eTe(e):g1(e.fontFamily));return e=Bd(e,{fontSize:t,fontFamily:n,text:r,textAlign:e.textAlign||wy,verticalAlign:e.verticalAlign||M4,containerId:e.containerId??null,originalText:e.originalText||r,autoResize:e.autoResize??!0,lineHeight:i}),!r&&!e.isDeleted&&(e={...e,originalText:r,isDeleted:!0},e=Gw(e)),e;case"freedraw":return Bd(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return Bd(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":let{startArrowhead:s=null,endArrowhead:o=null}=e,a=e.x,l=e.y,f=!Array.isArray(e.points)||e.points.length<2?[O(0,0),O(e.width,e.height)]:e.points;return(f[0][0]!==0||f[0][1]!==0)&&({points:f,x:a,y:l}=We.getNormalizedPoints(e)),Bd(e,{type:e.type==="draw"?"line":e.type,startBinding:Up(e,e.startBinding),endBinding:Up(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:f,x:a,y:l,...Lg(f)});case"arrow":{let{startArrowhead:c=null,endArrowhead:d="arrow"}=e,u=e.x,h=e.y,g=!Array.isArray(e.points)||e.points.length<2?[O(0,0),O(e.width,e.height)]:e.points;(g[0][0]!==0||g[0][1]!==0)&&({points:g,x:u,y:h}=We.getNormalizedPoints(e));let y={type:e.type,startBinding:Up(e,e.startBinding),endBinding:Up(e,e.endBinding),lastCommittedPoint:null,startArrowhead:c,endArrowhead:d,points:g,x:u,y:h,elbowed:e.elbowed,...Lg(g)};return Ge(e)?Bd(e,{...y,elbowed:!0,startBinding:Up(e,e.startBinding),endBinding:Up(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):Bd(e,y)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return Bd(e,{});case"magicframe":case"frame":return Bd(e,{name:e.name??null})}return null},Ije=(e,t)=>{if(e.boundElements){let n=e.boundElements.slice(),r=new Set;e.boundElements=n.reduce((i,s)=>{let o=t.get(s.id);if(o&&!r.has(s.id)){if(r.add(s.id),o.isDeleted)return i;i.push(s),Ve(o)&&!o.containerId&&(o.containerId=e.id)}return i},[])}},Nje=(e,t)=>{let n=e.containerId?t.get(e.containerId):null;if(!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(r=>r.id===e.id)){let r=(n.boundElements||(n.boundElements=[])).slice();r.push({type:"text",id:e.id}),n.boundElements=r}},Rje=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},FN=(e,t,n)=>{let r=new Set,i=t?mt(t):null,s=Yf((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!$g(l)){let f=Tje(l);if(f){let c=i==null?void 0:i.get(l.id);c&&c.version>f.version&&(f=Gw(f,c.version)),r.has(f.id)&&(f={...f,id:Ia()}),r.add(f.id),a.push(f)}}return a},[]));if(!(n!=null&&n.repairBindings))return s;let o=mt(s);for(let a of s)a.frameId&&Rje(a,o),Ve(a)&&a.containerId?Nje(a,o):a.boundElements&&Ije(a,o),n.refreshDimensions&&Ve(a)&&Object.assign(a,gte(a,Ai(a,o),o)),wt(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!Rt(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!Rt(a))&&(a.endBinding=null));return s.map(a=>{if(Ge(a)&&a.startBinding==null&&a.endBinding==null&&!BN(a.points))return{...a,...PN(a,o,{points:[O(0,0),a.points[a.points.length-1]]}),index:a.index};if(Ge(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,f])=>Math.abs(l)>1e6||Math.abs(f)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);let l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[O(0,0),O(0,-10),O(l.width/2+5,-10),O(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},_je=(e,t,n)=>{let r=t[e];return r!==void 0?r:n[e]},Y$={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??_je("defaultSidebarDockedPreference",e,t)]},Pje=(e,t)=>{var i;e=e||{};let n=Ac(),r={};for(let s of Object.keys(Y$))if(s in e){let[o,a]=Y$[s](e,n);r[o]=a}for(let[s,o]of Object.entries(n)){let a=e[s],l=t?t[s]:void 0;r[s]=a!==void 0?a:l!==void 0?l:o}return{...r,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...Dr(n,r.activeTool.type&&Aje[r.activeTool.type]?r.activeTool:{type:"selection"}),lastActiveTool:null,locked:r.activeTool.locked??!1},zoom:{value:Pf(b2(e.zoom)?e.zoom:((i=e.zoom)==null?void 0:i.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:bl.name}:r.openSidebar,gridSize:oOe(b2(e.gridSize)?e.gridSize:I4),gridStep:tte(b2(e.gridStep)?e.gridStep:AJ),editingFrame:null}},Hw=(e,t,n,r)=>({elements:FN(e==null?void 0:e.elements,n,r),appState:Pje(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),Z$=e=>{let t=FN(Nn(e.elements),null);return t.length?{...e,elements:t}:null},zN=(e=[],t)=>{let n=[];for(let r of e)if(Array.isArray(r)){let i=Z$({status:t,elements:r,id:Ia(),created:Date.now()});i&&n.push(i)}else{let i=r,s=Z$({...i,id:i.id||Ia(),status:i.status||t,created:i.created||Date.now()});s&&n.push(s)}return n},nl=32,Mn=12,Fu=256,$te=50,W0="NOT_SPREADSHEET",Ib="VALID_SPREADSHEET",W5=e=>{let t=/^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},lS=(e,t)=>e.slice(1).every(n=>W5(n[t])!==null),q$=e=>{let t=e[0].length;if(t>2)return{type:W0,reason:"More than 2 columns"};if(t===1){if(!lS(e,0))return{type:W0,reason:"Value is not numeric"};let l=W5(e[0][0])===null,f=(l?e.slice(1):e).map(c=>W5(c[0]));return f.length<2?{type:W0,reason:"Less than two rows"}:{type:Ib,spreadsheet:{title:l?e[0][0]:null,labels:null,values:f}}}let n=lS(e,0),r=lS(e,1);if(!n&&!r)return{type:W0,reason:"Value is not numeric"};let[i,s]=r?[0,1]:[1,0],o=W5(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:W0,reason:"Less than 2 rows"}:{type:Ib,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[i]),values:a.map(l=>W5(l[s]))}}},Dje=e=>{let t=[];for(let n=0;n<e[0].length;n++){let r=[];for(let i=0;i<e.length;i++)r.push(e[i][n]);t.push(r)}return t},Lje=e=>{let t=e.trim().split(`
`).map(i=>i.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(i=>i.trim().split(","))),t.length===0)return{type:W0,reason:"No values"};let n=t[0].length;if(!t.every(i=>i.length===n))return{type:W0,reason:"All rows don't have same number of columns"};let r=q$(t);if(r.type!==Ib){let i=q$(Dje(t));if(i.type===Ib)return i}return r},J4=jAe(DAe),Sa={fillStyle:"hachure",fontFamily:s0,fontSize:id,opacity:100,roughness:1,strokeColor:Lt.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:Po.MIDDLE,locked:!1},Hte=e=>{let t=(nl+Mn)*e.values.length+Mn,n=Fu+Mn*2;return{chartWidth:t,chartHeight:n}},Oje=(e,t,n,r,i)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>jo({groupIds:[r],backgroundColor:i,...Sa,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(nl+Mn)+Mn*2,y:n+Mn/2,width:nl,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},jje=(e,t,n,r,i)=>{let s=jo({groupIds:[r],backgroundColor:i,...Sa,x:t-Mn,y:n-Mn,text:"0",textAlign:"right"}),o=jo({groupIds:[r],backgroundColor:i,...Sa,x:t-Mn,y:n-Fu-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},Bje=(e,t,n,r,i)=>{let{chartWidth:s,chartHeight:o}=Hte(e),a=Hh({backgroundColor:i,groupIds:[r],...Sa,type:"line",x:t,y:n,width:s,points:[O(0,0),O(s,0)]}),l=Hh({backgroundColor:i,groupIds:[r],...Sa,type:"line",x:t,y:n,height:o,points:[O(0,0),O(0,-o)]}),f=Hh({backgroundColor:i,groupIds:[r],...Sa,type:"line",x:t,y:n-Fu-Mn,strokeStyle:"dotted",width:s,opacity:$te,points:[O(0,0),O(s,0)]});return[a,l,f]},Vte=(e,t,n,r,i,s)=>{let{chartWidth:o,chartHeight:a}=Hte(e),l=e.title?jo({backgroundColor:i,groupIds:[r],...Sa,text:e.title,x:t+o/2,y:n-Fu-Mn*2-id,roundness:null,textAlign:"center"}):null,f=s?Ic({backgroundColor:i,groupIds:[r],...Sa,type:"rectangle",x:t,y:n-a,width:o,height:a,strokeColor:Lt.black,fillStyle:"solid",opacity:6}):null;return[...f?[f]:[],...l?[l]:[],...Oje(e,t,n,r,i),...jje(e,t,n,r,i),...Bje(e,t,n,r,i)]},Fje=(e,t,n)=>{let r=Math.max(...e.values),i=Ia(),s=J4[Math.floor(Math.random()*J4.length)];return[...e.values.map((o,a)=>{let l=o/r*Fu;return Ic({backgroundColor:s,groupIds:[i],...Sa,type:"rectangle",x:t+a*(nl+Mn)+Mn,y:n-l-Mn,width:nl,height:l})}),...Vte(e,t,n,i,s,It.DEV)]},zje=(e,t,n)=>{let r=Math.max(...e.values),i=Ia(),s=J4[Math.floor(Math.random()*J4.length)],o=0,a=[];for(let y of e.values){let U=o*(nl+Mn),x=-(y/r)*Fu;a.push([U,x]),o++}let l=Math.max(...a.map(y=>y[0])),f=Math.max(...a.map(y=>y[1])),c=Math.min(...a.map(y=>y[0])),d=Math.min(...a.map(y=>y[1])),u=Hh({backgroundColor:s,groupIds:[i],...Sa,type:"line",x:t+Mn+nl/2,y:n-Mn,height:f-d,width:l-c,strokeWidth:2,points:a}),h=e.values.map((y,U)=>{let x=U*(nl+Mn)+Mn/2,v=-(y/r)*Fu+Mn/2;return Ic({backgroundColor:s,groupIds:[i],...Sa,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+x+nl/2,y:n+v-Mn*2,width:Mn,height:Mn})}),g=e.values.map((y,U)=>{let x=U*(nl+Mn)+Mn/2,v=y/r*Fu+Mn/2+Mn;return Hh({backgroundColor:s,groupIds:[i],...Sa,type:"line",x:t+x+nl/2+Mn/2,y:n-v,height:v,strokeStyle:"dotted",opacity:$te,points:[O(0,0),O(0,v)]})});return[...Vte(e,t,n,i,s,It.DEV),u,...g,...h]},$je=(e,t,n,r)=>e==="line"?zje(t,n,r):Fje(t,n,r),$N="clipboard"in navigator&&"writeText"in navigator.clipboard,HN="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,Hje=e=>!!([ka.excalidraw,ka.excalidrawClipboard,ka.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),Vje=({types:e,files:t})=>{var r,i,s,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(let[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((r=n.clipboardData)==null||r.setData(a,l),((i=n.clipboardData)==null?void 0:i.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(f){throw new Error(f.message)}}if(t){let a=-1;for(let l of t){a++;try{if((s=n.clipboardData)==null||s.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(f){throw new Error(f.message)}}}return n},Wje=({elements:e,files:t})=>{let n=mt(e),r=new Set(e.filter(a=>ht(a))),i=!1,s=e.reduce((a,l)=>(ga(l)&&(i=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});i&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");let o={type:ka.excalidrawClipboard,elements:e.map(a=>{if(fo(a,n)&&!r.has(fo(a,n))){let l=N1(a);return xe(l,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},Gje=async(e,t,n)=>{await Ty(Wje({elements:e,files:t}),n)},Xje=e=>{let t=Lje(e);return t.type===Ib?{spreadsheet:t.spreadsheet}:null};function Wte(e){var n;let t=[];for(let r of e.childNodes)if(r.nodeType===3){let i=(n=r.textContent)==null?void 0:n.trim();i&&t.push({type:"text",value:i})}else if(r instanceof HTMLImageElement){let i=r.getAttribute("src");i&&i.startsWith("http")&&t.push({type:"imageUrl",value:i})}else t=t.concat(Wte(r));return t}var Kje=e=>{var n;let t=(n=e.clipboardData)==null?void 0:n.getData(ft.html);if(!t)return null;try{let r=new DOMParser().parseFromString(t,ft.html),i=Wte(r.body);if(i.length)return{type:"mixedContent",value:i}}catch(r){console.error(`error in parseHTMLFromPaste: ${r.message}`)}return null},Yje=async()=>{var n,r,i,s;let e={},t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((r=navigator.clipboard)!=null&&r.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);let a=await((i=navigator.clipboard)==null?void 0:i.readText());if(a)return{[ft.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(let o of t)for(let a of o.types)if($J(JAe,a))try{if(a===ft.text||a===ft.html)e[a]=await(await o.getType(a)).text();else if(une(a)){let l=await o.getType(a),f=G5(l,a,void 0);e[a]=f}else throw new a$(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof a$?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},Zje=async(e,t=!1)=>{var n,r;try{let i=!t&&e&&Kje(e);return i?i.value.every(s=>s.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(ft.text))||i.value.map(s=>s.value).join(`
`).trim()}:i:{type:"text",value:(((r=e.clipboardData)==null?void 0:r.getData(ft.text))||"").trim()}}catch{return{type:"text",value:""}}},Gte=async(e,t=!1)=>{let n=await Zje(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{let r=!t&&Xje(n.value);if(r)return r}catch(r){console.error(r)}try{let r=JSON.parse(n.value),i=r.type===ka.excalidrawClipboardWithAPI;if(Hje(r))return{elements:r.elements,files:r.files,text:t?JSON.stringify(r.elements,null,2):void 0,programmaticAPI:i}}catch{}return{text:n.value}},qje=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[ft.png]:e})])}catch(t){if(ky(e))await navigator.clipboard.write([new window.ClipboardItem({[ft.png]:await e})]);else throw t}},Ty=async(e,t)=>{var n,r;if($N)try{await navigator.clipboard.writeText(e||"");return}catch(i){console.error(i)}try{if(t){if((n=t.clipboardData)==null||n.setData(ft.text,e||""),((r=t.clipboardData)==null?void 0:r.getData(ft.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(i){console.error(i)}if(!Qje(e))throw new Error("Error copying to clipboard.")},Qje=e=>{e||(e=" ");let t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";let r=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${r}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let i=!1;try{n.select(),n.setSelectionRange(0,n.value.length),i=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),i},VN=({elements:e,appState:t,files:n,maxWidthOrHeight:r,getDimensions:i,exportPadding:s,exportingFrame:o})=>{let{elements:a,appState:l}=Hw({elements:e,appState:t},null,null),{exportBackground:f,viewBackgroundColor:c}=l;return Fte(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:f,exportPadding:s,viewBackgroundColor:c,exportingFrame:o},(d,u)=>{let h=document.createElement("canvas");if(r){typeof i=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");let y=Math.max(d,u),U=r<y?r/y:(t==null?void 0:t.exportScale)??1;return h.width=d*U,h.height=u*U,{canvas:h,scale:U}}let g=(i==null?void 0:i(d,u))||{width:d,height:u};return h.width=g.width,h.height=g.height,{canvas:h,scale:g.scale??1}})},Xte=async({elements:e,appState:t=Ac(),files:n={},exportPadding:r,renderEmbeddables:i,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{let{elements:l,appState:f}=Hw({elements:e,appState:t},null,null),c={...f,exportPadding:r};return NN(l,c,n,{exportingFrame:s,renderEmbeddables:i,skipInliningFonts:o,reuseImages:a})},Jje=e=>e.type==="diamond"?[O(e.width/2,0),O(e.width,e.height/2),O(e.width/2,e.height),O(0,e.height/2)]:[O(0,0),O(0+e.width,0),O(0+e.width,e.height),O(0,e.height)],eBe=e=>wt(e)||Ma(e)?e.points:Jje(e),Q$=e=>{let t=e.reduce((n,[r,i])=>(n.minY=Math.min(n.minY,i),n.minX=Math.min(n.minX,r),n.maxX=Math.max(n.maxX,r),n.maxY=Math.max(n.maxY,i),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},Kte=e=>{let t=eBe(e),{cx:n,cy:r}=Q$(t),i=O(n,r),s=t.map(c=>ue(c,i,e.angle)),{minX:o,minY:a,maxX:l,maxY:f}=Q$(s);return[o+e.x,a+e.y,l+e.x,f+e.y]},J$=(e,t,n=!1)=>{let r=Kte(e),i=t[0]<=r[0]&&t[2]>=r[2]&&t[1]<=r[1]&&t[3]>=r[3];return n?i?!0:r[0]<=t[0]&&r[2]>=t[2]&&r[1]<=t[1]&&r[3]>=t[3]:i},tBe=(e,t)=>{let n=Kte(e);return(FU(n[0],ns(t[0],t[2]))||FU(t[0],ns(n[0],n[2])))&&(FU(n[1],ns(t[1],t[3]))||FU(t[1],ns(n[1],n[3])))},nBe=({elements:e,bounds:t,type:n,errorMargin:r=0})=>{var o;GJ(t)&&(t=Sl(t,mt(e)));let i=[t[0]-r,t[1]-r,t[2]+r,t[3]+r],s=new Set;for(let a of e)if(!s.has(a.id)&&(n==="overlap"?tBe(a,i):n==="inside"?J$(a,i):J$(a,i,!0))){if(s.add(a.id),a.boundElements)for(let l of a.boundElements)s.add(l.id);Ve(a)&&a.containerId&&s.add(a.containerId),Rt(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}return e.filter(a=>s.has(a.id))};function eH(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function rBe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}var iBe=1e-6;function tH(e,t){let n=tt(e[1],e[0]),r=tt(t,e[0]),i=si(n,r);return Math.abs(i)<iBe}function cS(e,t){let n=tt(e[1],e[0]),r=tt(t,e[0]);return si(n,r)<0}function nH(e,t){return tH(e,t[0])||tH(e,t[1])||(cS(e,t[0])?!cS(e,t[1]):cS(e,t[1]))}function sBe(e,t){return rBe(eH(e),eH(t))&&nH(e,t)&&nH(t,e)}var Yte=(e,t,n)=>{let r=mt(e);for(let i of t)if(i.frameId){let s=n.get(i.id),o=n.get(i.frameId);if(s){let a=r.get(s);a&&xe(a,{frameId:o??i.frameId},!1)}}};function WN(e,t,n){let r=g$(t,n),i=g$(e,n);return r.some(s=>i.some(o=>sBe(s,o)))}var Zte=(e,t,n)=>Ww(qN(e,t,n,!1)).filter(r=>!ht(r)&&!r.frameId||r.frameId===t.id),GN=(e,t,n)=>qN([t],e,n).some(r=>r.id===t.id),Iy=(e,t,n)=>{let[r,i,s,o]=vt(t,n),[a,l,f,c]=pn(e);return r<=a&&i<=l&&s>=f&&o>=c},Ku=(e,t,n)=>Iy([e],t,n)||WN(e,t,n)||GN(e,t,n),rH=(e,t,n)=>{let[r,i,s,o]=vt(t,n);return _J(O(r,i),O(e.x,e.y),O(s,o))},oBe=e=>{let t=new Map;for(let n of e){let r=ht(n)?n.id:n.frameId;r&&!t.has(r)&&t.set(r,Rc(e,r))}return t},Rc=(e,t)=>{let n=[];for(let r of e.values())r.frameId===t&&n.push(r);return n},XN=e=>e.filter(t=>ht(t)),KN=e=>{let t=mt(XN(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},K3=(e,t,n,r)=>{let i=Rc(e,t.id),s=new Set(i),o=new Set([...Zte(e,t,r),...i.filter(u=>GN(u,t,r))]),a=i.filter(u=>!o.has(u)),l=new Set(Array.from(o).flatMap(u=>u.groupIds));for(let u of a)if(!WN(u,t,r))u.groupIds.length===0&&s.delete(u);else if(u.groupIds.length>0)for(let h of u.groupIds)l.add(h);for(let u of a)if(u.groupIds.length>0){let h=!0;for(let g of u.groupIds)l.has(g)&&(h=!1);h&&s.delete(u)}let f=Array.from(o).filter(u=>u.groupIds.length===0);for(let u of f)s.add(u);let c=Array.from(o).filter(u=>u.groupIds.length>0),d=ste(c,n);for(let[u,h]of Object.entries(d))if(h){let g=Fn(e,u);if(Iy(g,t,r))for(let y of g)s.add(y)}return[...s].filter(u=>!(Ve(u)&&u.containerId))},aBe=(e,t,n)=>lBe(Ww(e,Zte(e,t,n)),t,n),lBe=(e,t,n)=>{let r=[],i=new Map;for(let s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>i.get(a)))o=!0;else{let a=new Set(s.groupIds.flatMap(l=>Fn(n,l)));o=!Iy(Array.from(a),t,n)}s.groupIds.forEach(a=>{i.set(a,o)})}o||r.push(s)}return r},fo=(e,t)=>e.frameId&&t.get(e.frameId)||null,cBe=(e,t)=>{let n=new Set,r=mt(e);e=Ww(e);for(let o of e)ht(o)&&o.id!==t.id&&n.add(o.id);let i=new Set,s=[];for(let o of e)if(!(ht(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){let a=o.groupIds.at(-1);if(!i.has(a)){i.add(a);let l=Fn(e,a);if(l.some(f=>Ku(f,t,r)))for(let f of l)s.push(f)}}else Ku(o,t,r)&&s.push(o);return s},E2=(e,t,n,r)=>{let i=mt(e),s=new Map;for(let f of e.values())f.frameId===n.id&&s.set(f.id,!0);let o=new Set(t.map(f=>f.id)),a=[],l=new Set;for(let f of t)ht(f)&&f.id!==n.id&&l.add(f.id);for(let f of Ww(e,t)){if(ht(f)||f.frameId&&l.has(f.frameId)||f.frameId&&r.selectedElementIds[f.id]&&r.selectedElementIds[f.frameId])continue;s.has(f.id)||a.push(f);let c=At(f,i);c&&!o.has(c.id)&&!s.has(c.id)&&a.push(c)}for(let f of a)xe(f,{frameId:n.id},!1);return e},Vw=(e,t)=>{let n=new Map,r=new Map;for(let i of e)if(i.frameId){n.set(i.id,i);let s=r.get(i.frameId)||[];s.push(i);let o=At(i,t);o&&(n.set(o.id,o),s.push(o)),r.set(i.frameId,s)}for(let[,i]of n)xe(i,{frameId:null},!1)},qte=(e,t)=>{let n=Rc(e,t.id);return Vw(n,mt(e)),e},Qte=(e,t,n,r)=>E2(qte(e,n),t,n,r.state).slice(),zg=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),i=new Set(r);if(t.editingGroupId)for(let a of r)a.groupIds.length===0?i.add(a):a.groupIds.flatMap(l=>Fn(e,l)).forEach(l=>i.add(l));let s=new Set,o=mt(e);return i.forEach(a=>{a.frameId&&!ht(a)&&!e9(a,o,t)&&s.add(a)}),s.size>0&&Vw(s,o),e},Ww=(e,t)=>{let n=new Set,r=t||e;for(let o of r.values()){let a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}let i=new Set;for(let o of n)Fn(e,o).some(a=>ht(a))&&i.add(o);let s=[];for(let o of r.values())i.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},pM=(e,t,n)=>{let r=Ve(e)&&Ai(e,t)||e;return r.frameId&&n.selectedElementIds[r.id]&&n.selectedElementIds[r.frameId]?fo(r,t):n.selectedElementIds[r.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:fo(r,t)},e9=(e,t,n,r)=>{var l;let i=(r==null?void 0:r.targetFrame)??pM(e,t,n);if(!i)return!1;let s=Ve(e)&&Ai(e,t)||e,o=f=>{r!=null&&r.checkedGroups&&s.groupIds.forEach(c=>{var d;(d=r.checkedGroups)==null||d.set(c,f)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[i.id])return!0;if(s.groupIds.length===0)return Ku(s,i,t);for(let f of s.groupIds)if((l=r==null?void 0:r.checkedGroups)!=null&&l.has(f))return r.checkedGroups.get(f);let a=new Set(s.groupIds.filter(f=>r!=null&&r.checkedGroups?!r.checkedGroups.has(f):!0).flatMap(f=>Fn(t,f)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){let f=new Set(Nt(t,n));if(n.frameToHighlight!==null)return!0;f.forEach(c=>{a.delete(c)})}for(let f of a)if(ht(f))return o(!1),!1;for(let f of a)if(Ku(f,i,t))return o(!0),!0;return!1},iH=(e,t,n,r,i)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;let s=WN(e,t,r)||GN(e,t,r);if(s){for(let o of e.groupIds)i==null||i.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!Iy([e],t,r)){let o=!1;if(n.selectedElementsAreBeingDragged)o=e9(e,r,n,{targetFrame:t,checkedGroups:i});else{o=e.frameId===t.id;for(let a of e.groupIds)i==null||i.set(a,o)}for(let a of e.groupIds)i==null||i.set(a,o);return o}return!1},Jte=e=>e.name===null?VJ(e)?"Frame":"AI Frame":e.name,YN=(e,t)=>nBe({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),ene=e=>{let t=mt(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},ZN=e=>{let t=new Set;return e.forEach(n=>{ht(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},qN=(e,t,n,r=!0)=>{let[i,s,o,a]=vt(t,n),l=e.filter(f=>{let[c,d,u,h]=Sl(f,n),g=fo(f,n);if(g){let[y,U,x,v]=Sl(g,n);c=Math.max(y,c),d=Math.max(U,d),u=Math.min(x,u),h=Math.min(v,h)}return f.locked===!1&&f.type!=="selection"&&!Hn(f)&&i<=c&&s<=d&&o>=u&&a>=h});return l=r?ZN(l):l,l=l.filter(f=>{let c=fo(f,n);return c?Ku(f,c,n):!0}),l},tne=(e,t,n,r)=>{let i=new Set(t.map(s=>s.id));return e.filter(s=>{let o=t9(s,n.width,n.height,n,r);return!i.has(s.id)&&o})},Qr=function(){let e=null,t=null,n=null,r=(i,s)=>(n!=null&&i===e&&s.selectedElementIds===t||(n=i.some(o=>s.selectedElementIds[o.id]),e=i,t=s.selectedElementIds),n);return r.clearCache=()=>{e=null,t=null,n=null},r}(),fBe=(e,t,n)=>{let r=Array.from(new Set(Nt(e,t).map(i=>n(i))));return r.length===1?r[0]:null},Nt=(e,t,n)=>{let r=new Set,i=[];for(let s of e.values()){if(t.selectedElementIds[s.id]){i.push(s),r.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&Hn(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){i.push(s),r.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){let s=[];return i.forEach(o=>{ht(o)&&Rc(e,o.id).forEach(a=>!r.has(a.id)&&s.push(a)),s.push(o)}),s}return i},nne=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:Nt(e,t,{includeBoundTextElement:!0}),an=(e,t)=>$i(t.selectedElementIds,e)?t.selectedElementIds:e,sH=e=>{let t=new Map,n=[];for(let r of e)r.isDeleted||(n.push(r),t.set(r.id,r));return{elementsMap:t,elements:n}},dBe=Uy(e=>{(It.DEV||It.MODE===oo.TEST||window!=null&&window.DEBUG_FRACTIONAL_INDICES)&&SN(e,{shouldThrow:It.DEV||It.MODE===oo.TEST,includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),uBe=e=>{let t=["includeBoundTextElement","includeElementsInFrames"],n="";for(let r of t)n+=`${r}:${e[r]?"1":"0"}`;return n},oH=e=>typeof e=="string",mM=class Y3{constructor(){Q(this,"callbacks",new Set),Q(this,"nonDeletedElements",[]),Q(this,"nonDeletedElementsMap",Aa(new Map)),Q(this,"elements",[]),Q(this,"nonDeletedFramesLikes",[]),Q(this,"frames",[]),Q(this,"elementsMap",Aa(new Map)),Q(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map}),Q(this,"sceneNonce"),Q(this,"insertElement",t=>{let n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)}),Q(this,"insertElements",t=>{var r;if(!t.length)return;let n=(r=t[0])!=null&&r.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)}),Q(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null),Q(this,"getElementsFromId",t=>{let n=this.getNonDeletedElementsMap(),r=n.get(t);return r?[r]:Fn(n,t)})}static mapElementToScene(t,n){oH(t)?this.sceneMapById.set(t,n):(this.sceneMapByElement.set(t,n),this.sceneMapById.set(t.id,n))}static getScene(t){return oH(t)?this.sceneMapById.get(t)||null:this.sceneMapByElement.get(t)||null}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){let n=uBe(t),r=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===r&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){let s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();let i=Nt(r,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,i)),i}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){let n=this.getElement(t);return n&&yM(n)?n:null}mapElements(t){let n=!1,r=this.elements.map(i=>{let s=t(i);return s!==i&&(n=!0),s});return n&&this.replaceAllElements(r),n}replaceAllElements(t){let n=t instanceof Array?t:Array.from(t.values()),r=[];dBe(n),this.elements=Yf(n),this.elementsMap.clear(),this.elements.forEach(s=>{ht(s)&&r.push(s),this.elementsMap.set(s.id,s),Y3.mapElementToScene(s,this)});let i=sH(this.elements);this.nonDeletedElements=i.elements,this.nonDeletedElementsMap=i.elementsMap,this.frames=r,this.nonDeletedFramesLikes=sH(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Tc();for(let t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),Y3.sceneMapById.forEach((t,n)=>{t===this&&Y3.sceneMapById.delete(n)}),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let r=[...this.elements.slice(0,n),t,...this.elements.slice(n)];Nc(r,mt([t])),this.replaceAllElements(r)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let r=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];Nc(r,mt(t)),this.replaceAllElements(r)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}};Q(mM,"sceneMapByElement",new WeakMap),Q(mM,"sceneMapById",new Map);var hBe=mM,Zf=hBe,xe=(e,t,n=!0,r)=>{var c,d;let i=!1,{points:s,fixedSegments:o,fileId:a,startBinding:l,endBinding:f}=t;if(Ge(e)&&(Object.keys(t).length===0||typeof s<"u"||typeof o<"u"||typeof l<"u"||typeof f<"u")){let u=Aa(((c=Zf.getScene(e))==null?void 0:c.getNonDeletedElementsMap())??new Map);t={...t,angle:0,...PN({...e,x:t.x||e.x,y:t.y||e.y},u,{fixedSegments:o,points:s,startBinding:l,endBinding:f},{isDragging:r==null?void 0:r.isDragging})}}else typeof s<"u"&&(t={...Lg(s),...t});for(let u in t){let h=t[u];if(typeof h<"u"){if(e[u]===h&&(typeof h!="object"||h===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){let g=e[u],y=h;if(g[0]===y[0]&&g[1]===y[1])continue}else if(u==="points"){let g=e[u],y=h;if(g.length===y.length){let U=!1,x=g.length;for(;--x;){let v=g[x],E=y[x];if(v[0]!==E[0]||v[1]!==E[1]){U=!0;break}}if(!U)continue}}e[u]=h,i=!0}}return i&&((typeof t.height<"u"||typeof t.width<"u"||typeof a<"u"||typeof s<"u")&&or.delete(e),e.version++,e.versionNonce=Tc(),e.updated=t6(),n&&((d=Zf.getScene(e))==null||d.triggerUpdate())),e},Ct=(e,t,n=!1)=>{let r=!1;for(let i in t){let s=t[i];if(typeof s<"u"){if(e[i]===s&&(typeof s!="object"||s===null))continue;r=!0}}return!r&&!n?e:{...e,...t,updated:t6(),version:e.version+1,versionNonce:Tc()}},Gw=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Tc(),e.updated=t6(),e),$g=e=>wt(e)||Ma(e)?e.points.length<2:e.width===0&&e.height===0,t9=(e,t,n,r,i)=>{let[s,o,a,l]=Sl(e,i),f=_n({clientX:r.offsetLeft,clientY:r.offsetTop},r),c=_n({clientX:r.offsetLeft+t,clientY:r.offsetTop+n},r);return f.x<=a&&f.y<=l&&c.x>=s&&c.y>=o},Z3=(e,t,n,r,i,s)=>{let[o,a,l,f]=pn(e,i),c=_n({clientX:r.offsetLeft+((s==null?void 0:s.left)||0),clientY:r.offsetTop+((s==null?void 0:s.top)||0)},r),d=_n({clientX:r.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:r.offsetTop+n-((s==null?void 0:s.bottom)||0)},r);return o>=c.x&&a>=c.y&&l<=d.x&&f<=d.y},aH=(e,t,n)=>{let r=Math.abs(t),i=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){let s=Math.round(Math.atan(i/r)/Wu)*Wu;s===0?n=0:s===Math.PI/2?t=0:n=r*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=r*Math.sign(n));return{width:t,height:n}},gM=(e,t,n,r)=>{let i=n-e,s=r-t,o=Math.round(Math.atan(s/i)/Wu)*Wu;if(o===0)s=0;else if(o===Math.PI/2)i=0;else{let a=Math.tan(o),l=-1,f=t-a*e,c=-1/a,d=-1,u=r-c*n,h=(l*u-d*f)/(a*d-c*l),g=(f*c-u*a)/(a*d-c*l);i=h-e,s=g-t}return{width:i,height:s}},rne=e=>{let t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){let n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){let n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},lH={mouse:8,pen:16,touch:28},pBe=16,ine={e:!0,s:!0,n:!0,w:!0},cH={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},fS={e:!0,s:!0,n:!0,w:!0},tf=(e,t,n,r,i,s,o)=>{let[a,l]=ue(O(e+n/2,t+r/2),O(i,s),o);return[a-n/2,l-r/2,n,r]},QN=e=>!(e.viewport.isMobile||e.isTouchScreen&&(FAe||SJ)),k2=e=>QN(e)?ine:{},JN=([e,t,n,r,i,s],o,a,l,f={},c=4,d=f1)=>{let u=lH[l],h=u/a.value,g=u/a.value,y=u/a.value,U=u/a.value,x=n-e,v=r-t,E=c/a.value,k=(u-d*2)/(2*a.value),M={nw:f.nw?void 0:tf(e-E-y+k,t-E-U+k,h,g,i,s,o),ne:f.ne?void 0:tf(n+E-k,t-E-U+k,h,g,i,s,o),sw:f.sw?void 0:tf(e-E-y+k,r+E-k,h,g,i,s,o),se:f.se?void 0:tf(n+E-k,r+E-k,h,g,i,s,o),rotation:f.rotation?void 0:tf(e+x/2-h/2,t-E-U+k-pBe/a.value,h,g,i,s,o)},S=5*lH.mouse/a.value;return Math.abs(x)>S&&(f.n||(M.n=tf(e+x/2-h/2,t-E-U+k,h,g,i,s,o)),f.s||(M.s=tf(e+x/2-h/2,r+E-k,h,g,i,s,o))),Math.abs(v)>S&&(f.w||(M.w=tf(e-E-y+k,t+v/2-g/2,h,g,i,s,o)),f.e||(M.e=tf(n+E-k,t+v/2-g/2,h,g,i,s,o))),M},sne=(e,t,n,r="mouse",i=ine)=>{if(e.locked||Ge(e))return{};if(e.type==="freedraw"||wt(e)){if(e.points.length===2){let[,o]=e.points;o[0]===0||o[1]===0?i=fS:o[0]>0&&o[1]<0?i=cH:o[0]>0&&o[1]>0?i=fS:o[0]<0&&o[1]>0?i=cH:o[0]<0&&o[1]<0&&(i=fS)}}else ht(e)&&(i={...i,rotation:!0});let s=wt(e)?f1+8:ln(e)?0:f1;return JN(vt(e,n,!0),e.angle,t,r,i,s,ln(e)?0:void 0)},one=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;let n=e[0];return Ge(n)?!1:wt(n)?n.points.length>2:!0},bM=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],mBe=(e,t,n,r,i,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;let{rotation:l,...f}=sne(e,s,t,o,k2(a));if(l&&bM(l,r,i))return"rotation";let c=Object.keys(f).filter(d=>{let u=f[d];return u?bM(u,r,i):!1});if(c.length>0)return c[0];if(QN(a)){let[d,u,h,g,y,U]=vt(e,t);if(!(wt(e)&&e.points.length<=2)){let x=ln(e)?0:T4/s.value,v=T4/s.value,E=ane(O(d-x,u-x),O(h+x,g+x),O(y,U),e.angle);for(let[k,M]of Object.entries(E))if(d1(O(r,i),M,v))return k}}return!1},fH=(e,t,n,r,i,s,o,a)=>e.reduce((l,f)=>{if(l)return l;let c=mBe(f,o,t,n,r,i,s,a);return c?{element:f,transformHandleType:c}:null},null),dH=([e,t,n,r],i,s,o,a,l)=>{let f=JN([e,t,n,r,(e+n)/2,(t+r)/2],0,o,a,k2(l)),c=Object.keys(f).find(d=>{let u=f[d];return u&&bM(u,i,s)});if(c)return c;if(QN(l)){let d=(e+n)/2,u=(t+r)/2,h=T4/o.value,g=ane(O(e-h,t-h),O(n+h,r+h),O(d,u),0);for(let[y,U]of Object.entries(g))if(d1(O(i,s),U,h))return y}return!1},dS=["ns","nesw","ew","nwse"],gBe=(e,t)=>{let n=dS.indexOf(e);if(n>=0){let r=Math.round(t/(Math.PI/4));e=dS[(n+r)%dS.length]}return e},uH=e=>{let{element:t,transformHandleType:n}=e,r=t&&Math.sign(t.height)*Math.sign(t.width)===-1,i=null;switch(n){case"n":case"s":i="ns";break;case"w":case"e":i="ew";break;case"nw":case"se":r?i="nesw":i="nwse";break;case"ne":case"sw":r?i="nwse":i="nesw";break;case"rotation":return"grab"}return i&&t&&(i=gBe(i,t.angle)),i?`${i}-resize`:""},ane=([e,t],[n,r],i,s)=>{let o=ue(O(e,t),i,s),a=ue(O(n,t),i,s),l=ue(O(e,r),i,s),f=ue(O(n,r),i,s);return{n:[o,a],e:[a,f],s:[f,l],w:[l,o]}},bBe=(e,t,n,r,i,s,o,a,l,f,c,d)=>{if(n.length===1){let[u]=n;if(t==="rotation")Ge(u)||(yBe(u,r,i,l,f,s),co(u,r));else{if(Ve(u)&&t)return UBe(e,u,r,t,o,l,f),co(u,r),!0;if(t){let h=n[0].id,g=r.get(h),y=e.get(h);if(g&&y){let{nextWidth:U,nextHeight:x}=SBe(g,y,r,e,t,l,f,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});Nb(U,x,g,y,r,e,t,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o})}}}return!0}else if(n.length>1){if(t==="rotation")return xBe(e,n,r,i,l,f,s,c,d),!0;if(t){let{nextWidth:u,nextHeight:h,flipByX:g,flipByY:y,originalBoundingBox:U}=CBe(n,e,r,t,l,f,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});return lne(n,r,t,i,e,{shouldResizeFromCenter:o,shouldMaintainAspectRatio:a,flipByX:g,flipByY:y,nextWidth:u,nextHeight:h,originalBoundingBox:U}),!0}}return!1},yBe=(e,t,n,r,i,s)=>{let[o,a,l,f]=vt(e,t),c=(o+l)/2,d=(a+f)/2,u;ht(e)?u=0:(u=5*Math.PI/2+Math.atan2(i-d,r-c),s&&(u=u+Wu/2,u=u-u%Wu),u=_4(u));let h=Xf(e);if(xe(e,{angle:u}),h){let g=n.getElement(h);g&&!Rt(e)&&xe(g,{angle:u})}},eR=(e,t,n,r)=>wt(e)||Ma(e)?{points:V4(0,t,V4(1,n,e.points,r),r)}:{},tR=(e,t,n)=>{let r=e.width;if(Hn(e)){let s=Ai(e,t);s&&(r=Kf(s,e))}let i=e.fontSize*(n/r);return i<KI?null:{size:i}},UBe=(e,t,n,r,i,s,o)=>{let[a,l,f,c,d,u]=vt(t,n),[h,g]=ue(O(s,o),O(d,u),-t.angle),y=0,U=0;r!=="e"&&r!=="w"&&(r.includes("e")&&(y=(h-a)/(f-a)),r.includes("w")&&(y=(f-h)/(f-a)),r.includes("n")&&(U=(c-g)/(c-l)),r.includes("s")&&(U=(g-l)/(c-l)));let x=Math.max(y,U);if(x>0){let v=t.width*x,E=t.height*x,k=tR(t,n,v);if(k===null)return;let M=[a,l],S=[f,c],A=[d,u],I=O(a,l);if(["n","w","nw"].includes(r)&&(I=O(S[0]-Math.abs(v),S[1]-Math.abs(E))),r==="ne"){let B=[M[0],S[1]];I=O(B[0],B[1]-Math.abs(E))}if(r==="sw"){let B=[S[0],M[1]];I=O(B[0]-Math.abs(v),B[1])}["s","n"].includes(r)&&(I[0]=A[0]-v/2),["e","w"].includes(r)&&(I[1]=A[1]-E/2),i&&(I[0]=A[0]-Math.abs(v)/2,I[1]=A[1]-Math.abs(E)/2);let R=t.angle,D=ue(I,O(d,u),R),_=O(I[0]+Math.abs(v)/2,I[1]+Math.abs(E)/2),P=ue(_,O(d,u),R);I=ue(D,P,-R);let[$,L]=I;xe(t,{fontSize:k.size,width:v,height:E,x:$,y:L})}if(r==="e"||r==="w"){let v=e.get(t.id),[E,k,M,S]=Bu(v,v.width,v.height,!0),A=O(E,k),I=O(M,S),R=Ey(A,I),D=ue(O(s,o),R,-v.angle),[_,,P]=Bu(t,t.width,t.height,!0),$=P-_,L=I[0]-A[0],B=rN(wn({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight),V=L/$;r.includes("e")&&(V=(D[0]-A[0])/$),r.includes("w")&&(V=(I[0]-D[0])/$);let z=t.width*V<B?B:t.width*V,G=I1(t.originalText,wn(t),Math.abs(z)),W=ds(G,wn(t),t.lineHeight),F=W.height,[K,q,Y,ae]=Bu(v,z,F,!0),ge=Y-K,he=ae-q,ce=[...A];["n","w","nw"].includes(r)&&(ce=[I[0]-Math.abs(ge),A[1]]);let ie=v.angle,we=ue(ce,R,ie),Ee=O(ce[0]+Math.abs(ge)/2,ce[1]+Math.abs(he)/2),_e=ue(Ee,R,ie);ce=ue(we,_e,-ie);let Fe={width:Math.abs(z),height:Math.abs(W.height),x:ce[0],y:ce[1],text:G,autoResize:!1};xe(t,Fe)}},xBe=(e,t,n,r,i,s,o,a,l)=>{var c;let f=5*Math.PI/2+Math.atan2(s-l,i-a);o&&(f+=Wu/2,f-=f%Wu);for(let d of t)if(!ht(d)){let[u,h,g,y]=vt(d,n),U=(u+g)/2,x=(h+y)/2,v=((c=e.get(d.id))==null?void 0:c.angle)??d.angle,[E,k]=ue(O(U,x),O(a,l),f+v-d.angle);Ge(d)?xe(d,{points:iOe(d,n)}):xe(d,{x:d.x+(E-U),y:d.y+(k-x),angle:_4(f+v)},!1),co(d,n,{simultaneouslyUpdated:t});let M=At(d,n);M&&!Rt(d)&&xe(M,{x:M.x+(E-U),y:M.y+(k-x),angle:_4(f+v)},!1)}r.triggerUpdate()},wBe=(e,t,n,r,i)=>{let[s,o,a,l]=t.length===1?vt(t[0],n):pn(t),f=(s+a)/2,c=(o+l)/2,d=t.length===1?t[0].angle:0;switch([r,i]=ue(O(r,i),O(f,c),-d),e){case"n":return ue(O(r-(s+a)/2,i-o),O(0,0),d);case"s":return ue(O(r-(s+a)/2,i-l),O(0,0),d);case"w":return ue(O(r-s,i-(o+l)/2),O(0,0),d);case"e":return ue(O(r-a,i-(o+l)/2),O(0,0),d);case"nw":return ue(O(r-s,i-o),O(0,0),d);case"ne":return ue(O(r-a,i-o),O(0,0),d);case"sw":return ue(O(r-s,i-l),O(0,0),d);case"se":return ue(O(r-a,i-l),O(0,0),d);default:return[0,0]}},vBe=(e,t)=>{let[,[n,r]]=t.points;return e==="nw"&&(n<0||r<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||r>0)?"end":"origin"},EBe=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},kBe=(e,t,n,r,i,s,o,a,l)=>{let f=EBe(o,a,l),[c,d]=e;switch(f){case"top-left":return{x:c+(t-r)/2+(r-t)/2*Math.cos(s)+(n-i)/2*Math.sin(s),y:d+(n-i)/2+(r-t)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"top-right":return{x:c+(t-r)/2*(Math.cos(s)+1)+(n-i)/2*Math.sin(s),y:d+(n-i)/2+(t-r)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"bottom-left":return{x:c+(t-r)/2*(1-Math.cos(s))+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)+(r-t)/2*Math.sin(s)};case"bottom-right":return{x:c+(t-r)/2*(Math.cos(s)+1)+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)+(t-r)/2*Math.sin(s)};case"center":return{x:c-(r-t)/2,y:d-(i-n)/2};case"east-side":return{x:c+(t-r)/2*(Math.cos(s)+1),y:d+(t-r)/2*Math.sin(s)+(n-i)/2};case"west-side":return{x:c+(t-r)/2*(1-Math.cos(s)),y:d+(r-t)/2*Math.sin(s)+(n-i)/2};case"north-side":return{x:c+(t-r)/2+(n-i)/2*Math.sin(s),y:d+(i-n)/2*(Math.cos(s)-1)};case"south-side":return{x:c+(t-r)/2+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)}}},Nb=(e,t,n,r,i,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:f=!1}={})=>{let c={},d=At(n,i);if(d){let y=s.get(d.id);if(y&&(c={fontSize:y.fontSize}),l){let U={...n,width:e,height:t},x=tR(d,i,Kf(U,d));if(x===null)return;c={fontSize:x.size}}else{let U=YJ(wn(d),d.lineHeight),x=ZJ(d.fontSize,d.lineHeight);e=Math.max(e,U),t=Math.max(t,x)}}let u=eR(r,e,t,!0),h=O(r.x,r.y);if(wt(r)){let[y,U]=Sl(r,s);h=O(y,U)}let g=kBe(h,r.width,r.height,e,t,r.angle,o,l,f);if(wt(r)&&u.points){let y=r.x-h[0],U=r.y-h[1];g.x+=y,g.y+=U;let x=u.points[0][0],v=u.points[0][1];g.x+=x,g.y+=v,u.points=u.points.map(E=>O(E[0]-x,E[1]-v))}if(e<0&&(g.x=g.x+e),t<0&&(g.y=g.y+t),"scale"in n&&"scale"in r&&xe(n,{scale:[(Math.sign(e)||r.scale[0])*r.scale[0],(Math.sign(t)||r.scale[1])*r.scale[1]]}),Rt(n)&&d&&l){let y=e/n.width*d.fontSize;if(y<KI)return;c.fontSize=y}if(e!==0&&t!==0&&Number.isFinite(g.x)&&Number.isFinite(g.y)){let y={...g,width:Math.abs(e),height:Math.abs(t),...u};xe(n,y,a),co(n,i,{newSize:{width:e,height:t}}),d&&c!=null&&xe(d,{fontSize:c.fontSize}),My(n,i,o,l)}},SBe=(e,t,n,r,i,s,o,{shouldMaintainAspectRatio:a=!1,shouldResizeFromCenter:l=!1}={})=>{let[f,c,d,u]=Bu(t,t.width,t.height,!0),h=O(f,c),g=O(d,u),y=Ey(h,g),U=ue(O(s,o),y,-t.angle),[x,v,E,k]=Bu(e,e.width,e.height,!0),M=E-x,S=k-v,A=g[0]-h[0],I=g[1]-h[1],R=A/M,D=I/S;i.includes("e")&&(R=(U[0]-h[0])/M),i.includes("s")&&(D=(U[1]-h[1])/S),i.includes("w")&&(R=(g[0]-U[0])/M),i.includes("n")&&(D=(g[1]-U[1])/S);let _=e.width*R,P=e.height*D;if(l&&(_=2*_-t.width,P=2*P-t.height),a){let $=Math.abs(_)/t.width,L=Math.abs(P)/t.height;if(i.length===1&&(P*=$,_*=L),i.length===2){let B=Math.max($,L);_=t.width*B*Math.sign(_),P=t.height*B*Math.sign(P)}}return{nextWidth:_,nextHeight:P}},CBe=(e,t,n,r,i,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{let l=e.map($=>t.get($.id)),f=l.reduce(($,L)=>{if(!wt(L))return $;let B=Xf(L);if(!B)return $;let V=t.get(B)??null;return Hn(V)?[...$,{...V,...We.getBoundTextElementPosition(L,V,n)}]:$},[]),c=Ul(l.map($=>$).concat(f)),{minX:d,minY:u,maxX:h,maxY:g,midX:y,midY:U}=c,x=h-d,v=g-u,E={ne:[d,g],se:[d,u],sw:[h,u],nw:[h,g],e:[d,u+v/2],w:[h,u+v/2],n:[d+x/2,g],s:[d+x/2,u]},[k,M]=a?[y,U]:E[r],S=a?2:1,A=Math.max(Math.abs(i-k)/x||0,Math.abs(s-M)/v||0)*S,I=r.includes("e")||r.includes("w")?Math.abs(i-k)*S:x,R=r.includes("n")||r.includes("s")?Math.abs(s-M)*S:v;o&&(I=x*A*Math.sign(i-k),R=v*A*Math.sign(s-M));let D={ne:[i<k,s>M],se:[i<k,s<M],sw:[i>k,s<M],nw:[i>k,s>M],e:[i<k,!1],w:[i>k,!1],n:[!1,s>M],s:[!1,s<M]},[_,P]=D[r].map($=>$);return{originalBoundingBox:c,nextWidth:I,nextHeight:R,flipByX:_,flipByY:P}},lne=(e,t,n,r,i,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:f,nextWidth:c,originalBoundingBox:d}={})=>{if(c===void 0&&f===void 0&&a===void 0&&l===void 0||f===0||c===0)return;i||(i=t);let u=e.reduce((S,A)=>{let I=i.get(A.id);return I&&S.push({orig:I,latest:A}),S},[]),h;if(d)h=d;else{let S=u.reduce((A,{orig:I})=>{if(!wt(I))return A;let R=Xf(I);if(!R)return A;let D=i.get(R)??null;return Hn(D)?[...A,{...D,...We.getBoundTextElementPosition(I,D,t)}]:A},[]);h=Ul(u.map(({orig:A})=>A).concat(S))}let{minX:g,minY:y,maxX:U,maxY:x,midX:v,midY:E}=h,k=U-g,M=x-y;if(c===void 0&&f===void 0&&(c=k,f=M),s&&(c===void 0?c=f*(k/M):f===void 0?f=c*(M/k):Math.abs(c/f-k/M)>.001&&(c=f*(k/M))),c&&f){let S=n.includes("e")||n.includes("w")?Math.abs(c)/k:1,A=n.includes("n")||n.includes("s")?Math.abs(f)/M:1,I;n.length===1?I=n.includes("e")||n.includes("w")?S:A:I=Math.max(Math.abs(c)/k||0,Math.abs(f)/M||0);let R={ne:[g,x],se:[g,y],sw:[U,y],nw:[U,x],e:[g,y+M/2],w:[U,y+M/2],n:[g+k/2,x],s:[g+k/2,y]},[D,_]=o?[v,E]:R[n],P=s||u.some(z=>z.latest.angle!==0||Ve(z.latest)||Og(z.latest));P&&(S=I,A=I);let[$,L]=[a?-1:1,l?-1:1],B=[];for(let{orig:z,latest:G}of u){if(Ve(z)&&Hn(z))continue;let W=z.width*S,F=z.height*A,K=_4(z.angle*$*L),q=wt(z)||Ma(z),Y=z.x-D,ae=z.y-_,ge=a&&!q?W:0,he=l&&!q?F:0,ce=D+$*(Y*S+ge),ie=_+L*(ae*A+he),we=eR(z,W*$,F*L,!1),Ee={x:ce,y:ie,width:W,height:F,angle:K,...we};if(Ge(z)&&(z.startBinding&&(Ee.startBinding={...z.startBinding,fixedPoint:[a?-z.startBinding.fixedPoint[0]+1:z.startBinding.fixedPoint[0],l?-z.startBinding.fixedPoint[1]+1:z.startBinding.fixedPoint[1]]}),z.endBinding&&(Ee.endBinding={...z.endBinding,fixedPoint:[a?-z.endBinding.fixedPoint[0]+1:z.endBinding.fixedPoint[0],l?-z.endBinding.fixedPoint[1]+1:z.endBinding.fixedPoint[1]]}),z.fixedSegments&&we.points&&(Ee.fixedSegments=z.fixedSegments.map(Fe=>({...Fe,start:we.points[Fe.index-1],end:we.points[Fe.index]})))),ln(z)&&(Ee.scale=[z.scale[0]*$,z.scale[1]*L]),Ve(z)){let Fe=tR(z,t,W);if(!Fe)return;Ee.fontSize=Fe.size}let _e=i.get(Xf(z)??"");if(_e)if(P){let Fe=_e.fontSize*I;if(Fe<KI)return;Ee.boundTextFontSize=Fe}else Ee.boundTextFontSize=_e.fontSize;B.push({element:G,update:Ee})}let V=B.map(({element:z})=>z);for(let{element:z,update:{boundTextFontSize:G,...W}}of B){let{width:F,height:K,angle:q}=W;xe(z,W,!1,{isDragging:!0}),co(z,t,{simultaneouslyUpdated:V,newSize:{width:F,height:K}});let Y=At(z,t);Y&&G&&(xe(Y,{fontSize:G,angle:wt(z)?void 0:q},!1),My(z,t,n,!0))}r.triggerUpdate()}},ABe=(e,t,n,r,i,s)=>{if(t.length===1&&Ge(t[0])&&(t[0].startBinding||t[0].endBinding))return;let o=t.filter(d=>{if(Ge(d)&&d.startBinding&&d.endBinding){let u=t.find(g=>{var y;return g.id===((y=d.startBinding)==null?void 0:y.elementId)}),h=t.find(g=>{var y;return g.id===((y=d.endBinding)==null?void 0:y.elementId)});return u&&h}return!0}),a=new Set(o),l=o.filter(d=>ht(d)).map(d=>d.id);if(l.length>0)for(let d of r.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);let f=pn(Array.from(a).map(d=>e.originalElements.get(d.id)??d)),c=MBe(f,n,i,s);a.forEach(d=>{if(hH(e,d,c),!Rt(d)){let u=At(d,r.getNonDeletedElementsMap());u&&hH(e,u,c),co(d,r.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(a)})}})},MBe=(e,t,n,r)=>{let[i,s]=e,o=i+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){let[l,f]=Gr(i+t.x,s+t.y,r);n.x===0&&(o=l),n.y===0&&(a=f)}return{x:o-i,y:a-s}},hH=(e,t,n)=>{let r=e.originalElements.get(t.id)??t,i=r.x+n.x,s=r.y+n.y;xe(t,{x:i,y:s})},TBe=(e,t,n)=>{let[r,i]=pn(e);return[t-r,n-i]},pH=({newElement:e,elementType:t,originX:n,originY:r,x:i,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:f,zoom:c,widthAspectRatio:d=null,originOffset:u=null,informMutation:h=!0})=>{l&&e.type!=="selection"&&(d?a=o/d:(Math.abs(s-r)>Math.abs(i-n)?{width:o,height:a}=aH(t,a,i<n?-o:o):{width:o,height:a}=aH(t,o,s<r?-a:a),a<0&&(a=-a)));let g=i<n?n-o:n,y=s<r?r-a:r;f&&(o+=o,a+=a,g=n-o/2,y=r-a/2);let U=null;if(Ve(e)){a=e.height;let x=rN(wn({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,x),Math.abs(i-n)>WAe/c&&(U={autoResize:!1}),y=r,f&&(g=n-o/2)}if(o!==0&&a!==0){let x=null;ln(e)&&(x={initialWidth:o,initialHeight:a}),xe(e,{x:g+((u==null?void 0:u.x)??0),y:y+((u==null?void 0:u.y)??0),width:o,height:a,...U,...x},h)}},nR=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||Nt(t,e).length))},IBe=e=>{let t=5381;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)+t+r}return t>>>0},NBe=e=>e.filter(t=>!t.isDeleted&&!$g(t)),Nn=e=>e.filter(t=>!t.isDeleted),yM=e=>!e.isDeleted,RBe=e=>Nn(e).map(t=>nN(t.type)?{...t,lastCommittedPoint:null}:t),cne=e=>RBe(e),fne=async e=>{let t;if(e.type===ft.png)try{return await(await qe(async()=>{const{decodePngMetadata:n}=await Promise.resolve().then(()=>joe);return{decodePngMetadata:n}},void 0)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new sh("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new sh("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{let r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),e.type===ft.svg)try{return hje({svg:t})}catch(n){throw n.message==="INVALID"?new sh("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new sh("Error: cannot restore image")}return t},dne=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},_Be=e=>e==="png"||e==="svg",rR=e=>{let t=dne(e);return t==="png"||t==="svg"},une=e=>!!e&&Object.values(Mg).includes(e),Vh=e=>{let{type:t}=e||{};return une(t)},hne=async(e,t,n,r)=>{let i=await fne(e),s;try{try{s=JSON.parse(i)}catch(o){throw Vh(e)?new sh("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(sje(s))return{type:ft.excalidraw,data:Hw({elements:cne(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:r||e.handle||null,...RJ(s.appState||{}),...t?Cb(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(Ste(s))return{type:ft.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof sh?o:new Error("Error: invalid file")}},pne=async(e,t,n,r)=>{let i=await hne(e,t,n,r);if(i.type!==ft.excalidraw)throw new Error("Error: invalid file");return i.data},mne=(e,t="unpublished")=>{let n=JSON.parse(e);if(!Ste(n))throw new Error("Invalid library");let r=n.libraryItems||n.library;return zN(r,t)},PBe=async(e,t="unpublished")=>mne(await fne(e),t),Rb=async e=>new Promise(async(t,n)=>{try{ky(e)&&(e=await e),e.toBlob(r=>{if(!r)return n(new nNe("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(r)})}catch(r){n(r)}}),DBe=async e=>{try{let t=await window.crypto.subtle.digest("SHA-1",await ah(e));return zMe(new Uint8Array(t))}catch(t){return console.error(t),WI(40)}},mH=async e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),LBe=(e,t)=>`data:${t};base64,${yne(n9(e),!0)}`,OBe=(e,t="")=>{let n=e.indexOf(","),r=atob(e.slice(n+1)),i=e.slice(0,n).split(":")[1].split(";")[0],s=new ArrayBuffer(r.length),o=new Uint8Array(s);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return new File([s],t,{type:i})},jBe=e=>Une(e.slice(e.indexOf(",")+1)),UM=async(e,t)=>{if(e.type===ft.svg)return e;let[n,r]=await Promise.all([qe(()=>import("./pica-DiwB1f4L.js").then(s=>s.p),__vite__mapDeps([2,3])).then(s=>s.default),qe(()=>import("./image-blob-reduce.esm-xKov1Fz_.js"),[]).then(s=>s.default)]),i=r({pica:n({features:["js","wasm"]})});if(t.outputType){let{outputType:s}=t;i._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!Vh(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await i.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},gH=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:ft.svg}),BBe=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});let r=await n.blob();if(r.type&&Vh(r)){let i=t||r.name||"";return new File([r],i,{type:r.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},FBe=async e=>{let t=e.dataTransfer.files.item(0),n=await zBe(e);return{file:t?await iR(t):null,fileHandle:n}},zBe=async e=>{if(T1)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},bH=e=>{let t=null,n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,r={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===r.png?t=ft.png:n.startsWith(r.jpg)?t=ft.jpg:n.startsWith(r.gif)&&(t=ft.gif),t},G5=(e,t,n)=>new File([e],n||"",{type:t}),iR=async e=>{var t,n;if(e.type){if(Vh(e)){let r=await ah(e),i=bH(r);i&&i!==e.type&&(e=G5(r,i,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=G5(await ah(e),ft.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=G5(await ah(e),ft.excalidraw,e.name);else{let r=await ah(e),i=bH(r);i&&(e=G5(r,i,e.name))}return e},ah=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{let r=new FileReader;r.onload=i=>{var s;if(!((s=i.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),n9=e=>{let t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e),n="";for(let r of t)n+=String.fromCharCode(r);return n},gne=e=>{let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},bne=e=>new TextDecoder("utf-8").decode(gne(e)),yne=(e,t=!1)=>t?window.btoa(e):window.btoa(n9(e)),Une=(e,t=!1)=>t?window.atob(e):bne(window.atob(e)),xne=({text:e,compress:t})=>{let n;if(t!==!1)try{n=n9(sCe(e))}catch(r){console.error("encode: cannot deflate",r)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||n9(e)}},wne=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:bne(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?oCe(new Uint8Array(gne(t)),{to:"string"}):t},vne=async e=>{let t=SQ(new Uint8Array(await ah(e))).find(n=>n.name==="tEXt");return t?CQ.decode(t.data):null},$Be=async({blob:e,metadata:t})=>{let n=SQ(new Uint8Array(await ah(e))),r=CQ.encode(ft.excalidraw,JSON.stringify(xne({text:t,compress:!0})));return n.splice(-1,0,r),new Blob([yEe(n)],{type:ft.png})},HBe=async e=>{let t=await vne(e);if((t==null?void 0:t.keyword)===ft.excalidraw)try{let n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===ka.excalidraw)return t.text;throw new Error("FAILED")}return wne(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},Ene={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library",libraries:"Browse libraries",loadingScene:"Loading scene",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame"},kne={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},Sne={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},Cne={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas..."},Ane={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},Mne={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},Tne={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},Ine={selection:"Selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw"},Nne={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},Rne={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},_ne={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},Pne={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},Dne={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},Lne={or:"Or"},One={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},jne={title:"Error"},Bne={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},Fne={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},zne={title:"Clear canvas"},$ne={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},Hne={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},Vne={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},Wne={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},Gne={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},Xne={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},Kne={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},Yne={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},Zne={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},qne={mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},Qne={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},Jne={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},ere={placeholder:"Quick search"},tre={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},nre={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},rre={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},sR={labels:Ene,elementLink:kne,library:Sne,search:Cne,buttons:Ane,alerts:Mne,errors:Tne,toolBar:Ine,element:Nne,headings:Rne,hints:_ne,canvasError:Pne,errorSplash:Dne,shareDialog:Lne,roomDialog:One,errorDialog:jne,exportDialog:Bne,helpDialog:Fne,clearCanvasDialog:zne,publishDialog:$ne,publishSuccessDialog:Hne,confirmDialog:Vne,imageExportDialog:Wne,encrypted:Gne,stats:Xne,toast:Kne,colors:Yne,welcomeScreen:Zne,colorPicker:qne,overwriteConfirm:Qne,mermaid:Jne,quickSearch:ere,fontList:tre,userList:nre,commandPalette:rre},ire=100,sre=36,ore={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:ire,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:sre,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100};let VBe=0;function Mi(e,t){const n=`atom${++VBe}`,r={toString(){return n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=WBe,r.write=GBe),r}function WBe(e){return e(this)}function GBe(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const yH=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,UH=e=>"init"in e,xH=e=>!!e.write,r9=new WeakMap,xM=e=>{var t;return wM(e)&&!((t=r9.get(e))!=null&&t[1])},XBe=(e,t)=>{const n=r9.get(e);n&&(n[1]=!0,n[0].forEach(r=>r(t)))},KBe=e=>{if(r9.has(e))return;const t=[new Set,!1];r9.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=r=>{t[0].add(r)}},wM=e=>typeof(e==null?void 0:e.then)=="function",wH=e=>"v"in e||"e"in e,GU=e=>{if("e"in e)throw e.e;return e.v},are=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},vH=(e,t,n,r,i)=>{var s;n.d.set(r,i.n),xM(n.v)&&are(t,n.v,i),(s=i.m)==null||s.t.add(t),e&&YBe(e,r,t)},U5=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),S2=(e,t,n)=>{e[t].add(n)},EH=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),S2(e,"M",()=>{var r;(r=n.m)==null||r.l.forEach(i=>S2(e,"M",i))}))},YBe=(e,t,n)=>{const r=e.D.get(t);r&&r.add(n)},ZBe=(e,t)=>e.D.get(t),M0=e=>{let t,n=!1;const r=i=>{try{i()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(r),e.H.clear(),e.M.forEach(r),e.M.clear(),e.L.forEach(r),e.L.clear();if(n)throw t},lre=(...[e,t,n,r])=>{const i=(x,v,E)=>{const k="v"in v,M=v.v,S=xM(v.v)?v.v:null;if(wM(E)){KBe(E);for(const A of v.d.keys())are(x,E,e(A));v.v=E}else v.v=E;delete v.e,delete v.x,(!k||!Object.is(M,v.v))&&(++v.n,S&&XBe(S,E))},s=(x,v)=>{var E;const k=e(v);if(wH(k)&&(k.m&&!k.x||Array.from(k.d).every(([D,_])=>s(x,D).n===_)))return k;k.d.clear();let M=!0;const S=D=>{if(yH(v,D)){const P=e(D);if(!wH(P))if(UH(D))i(D,P,D.init);else throw new Error("no atom init");return GU(P)}const _=s(x,D);try{return GU(_)}finally{if(M)vH(x,v,k,D,_);else{const P=U5();vH(P,v,k,D,_),d(P,v,k),M0(P)}}};let A,I;const R={get signal(){return A||(A=new AbortController),A.signal},get setSelf(){return!I&&xH(v)&&(I=(...D)=>{if(!M)return c(v,...D)}),I}};try{const D=t(v,S,R);if(i(v,k,D),wM(D)){(E=D.onCancel)==null||E.call(D,()=>A==null?void 0:A.abort());const _=()=>{if(k.m){const P=U5();d(P,v,k),M0(P)}};D.then(_,_)}return k}catch(D){return delete k.v,k.e=D,delete k.x,++k.n,k}finally{M=!1}},o=x=>GU(s(void 0,x)),a=(x,v,E)=>{var k,M;const S=new Map;for(const A of((k=E.m)==null?void 0:k.t)||[]){const I=e(A);I.m&&S.set(A,I)}for(const A of E.p)S.set(A,e(A));return(M=ZBe(x,v))==null||M.forEach(A=>{S.set(A,e(A))}),S},l=(x,v,E)=>{const k=[],M=new Set,S=new Set,A=[[v,E]];for(;A.length>0;){const[I,R]=A[A.length-1];if(S.has(I)){A.pop();continue}if(M.has(I)){k.push([I,R,R.n]),S.add(I),R.x=!0,A.pop();continue}M.add(I);for(const[D,_]of a(x,I,R))I!==D&&!M.has(D)&&A.push([D,_])}S2(x,"H",()=>{const I=new Set([v]);for(let R=k.length-1;R>=0;--R){const[D,_,P]=k[R];let $=!1;for(const L of _.d.keys())if(L!==D&&I.has(L)){$=!0;break}$&&(s(x,D),d(x,D,_),P!==_.n&&(EH(x,D,_),I.add(D))),delete _.x}})},f=(x,v,...E)=>{let k=!0;const M=A=>GU(s(x,A)),S=(A,...I)=>{const R=e(A);try{if(yH(v,A)){if(!UH(A))throw new Error("atom not writable");const D=R.n,_=I[0];i(A,R,_),d(x,A,R),D!==R.n&&(EH(x,A,R),l(x,A,R));return}else return f(x,A,...I)}finally{k||M0(x)}};try{return n(v,M,S,...E)}finally{k=!1}},c=(x,...v)=>{const E=U5();try{return f(E,x,...v)}finally{M0(E)}},d=(x,v,E)=>{if(E.m&&!xM(E.v)){for(const k of E.d.keys())E.m.d.has(k)||(u(x,k,e(k)).t.add(v),E.m.d.add(k));for(const k of E.m.d||[])if(!E.d.has(k)){E.m.d.delete(k);const M=h(x,k,e(k));M==null||M.t.delete(v)}}},u=(x,v,E)=>{if(!E.m){s(x,v);for(const k of E.d.keys())u(x,k,e(k)).t.add(v);if(E.m={l:new Set,d:new Set(E.d.keys()),t:new Set},xH(v)){const k=E.m;let M;const S=(A,I)=>{let R=!0;M=(...D)=>{try{return f(A,v,...D)}finally{R||M0(A)}};try{return I()}finally{R=!1}};S2(x,"L",()=>{const A=S(x,()=>r(v,(...I)=>M(...I)));A&&(k.u=I=>S(I,A))})}}return E.m},h=(x,v,E)=>{if(E.m&&!E.m.l.size&&!Array.from(E.m.t).some(k=>{var M;return(M=e(k).m)==null?void 0:M.d.has(v)})){const k=E.m.u;k&&S2(x,"L",()=>k(x)),delete E.m;for(const M of E.d.keys()){const S=h(x,M,e(M));S==null||S.t.delete(v)}return}return E.m};return{get:o,set:c,sub:(x,v)=>{const E=U5(),k=e(x),S=u(E,x,k).l;return S.add(v),M0(E),()=>{S.delete(v);const A=U5();h(A,x,k),M0(A)}},unstable_derive:x=>lre(...x(e,t,n,r))}},oR=()=>{const e=new WeakMap;return lre(r=>{let i=e.get(r);return i||(i={d:new Map,p:new Set,n:0},e.set(r,i)),i},(r,...i)=>r.read(...i),(r,...i)=>r.write(...i),(r,...i)=>{var s;return(s=r.onMount)==null?void 0:s.call(r,...i)})};let uS;const qBe=()=>(uS||(uS=oR()),uS),QBe=T.createContext(void 0),Xw=e=>{const t=T.useContext(QBe);return(e==null?void 0:e.store)||t||qBe()},vM=e=>typeof(e==null?void 0:e.then)=="function",cre=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},JBe=Ne.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(cre(e),e)}),hS=new WeakMap,kH=e=>{let t=hS.get(e);return t||(t=new Promise((n,r)=>{let i=e;const s=l=>f=>{i===l&&n(f)},o=l=>f=>{i===l&&r(f)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(f=>{vM(f)?(hS.set(f,t),i=f,f.then(s(f),o(f)),a(f)):n(f)})};e.then(s(e),o(e)),a(e)}),hS.set(e,t)),t};function fre(e,t){const n=Xw(t),[[r,i,s],o]=T.useReducer(f=>{const c=n.get(e);return Object.is(f[0],c)&&f[1]===n&&f[2]===e?f:[c,n,e]},void 0,()=>[n.get(e),n,e]);let a=r;(i!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(T.useEffect(()=>{const f=n.sub(e,()=>{if(typeof l=="number"){const c=n.get(e);vM(c)&&cre(kH(c)),setTimeout(o,l);return}o()});return o(),f},[n,e,l]),T.useDebugValue(a),vM(a)){const f=kH(a);return JBe(f)}return a}function dre(e,t){const n=Xw(t);return T.useCallback((...i)=>n.set(e,...i),[n,e])}function eFe(e,t){return[fre(e,t),dre(e,t)]}const SH=new WeakMap;function tFe(e,t){const n=Xw(t),r=nFe(n);for(const[i,s]of e)(!r.has(i)||t!=null&&t.dangerouslyForceHydrate)&&(r.add(i),n.set(i,s))}const nFe=e=>{let t=SH.get(e);return t||(t=new WeakSet,SH.set(e,t)),t};function Zp(){return Zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zp.apply(this,arguments)}function ure(){const e=T.createContext(null);function t({store:o,initialValues:a=[],children:l}){const f=T.useRef(o);return f.current||(f.current=oR()),tFe(a,{store:f.current}),m.jsx(e.Provider,{value:f.current,children:l})}const n=o=>{const a=T.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return Xw(Zp({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return eFe(o,Zp({store:l},a))},useAtomValue:(o,a)=>{const l=n();return fre(o,Zp({store:l},a))},useSetAtom:(o,a)=>{const l=n();return dre(o,Zp({store:l},a))}}}Mi(null);T.createContext({scope:void 0,baseStore:void 0});function zu(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function CH(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function hre(...e){return t=>{let n=!1;const r=e.map(i=>{const s=CH(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():CH(e[i],null)}}}}function a0(...e){return T.useCallback(hre(...e),e)}function pre(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];const f=d=>{var x;const{scope:u,children:h,...g}=d,y=((x=u==null?void 0:u[e])==null?void 0:x[l])||a,U=T.useMemo(()=>g,Object.values(g));return m.jsx(y.Provider,{value:U,children:h})};f.displayName=s+"Provider";function c(d,u){var y;const h=((y=u==null?void 0:u[e])==null?void 0:y[l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,rFe(i,...t)]}function rFe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var aR=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(sFe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return m.jsx(EM,{...r,ref:t,children:T.isValidElement(o)?T.cloneElement(o,void 0,a):null})}return m.jsx(EM,{...r,ref:t,children:n})});aR.displayName="Slot";var EM=T.forwardRef((e,t)=>{const{children:n,...r}=e;if(T.isValidElement(n)){const i=aFe(n),s=oFe(r,n.props);return n.type!==T.Fragment&&(s.ref=t?hre(t,i):i),T.cloneElement(n,s)}return T.Children.count(n)>1?T.Children.only(null):null});EM.displayName="SlotClone";var iFe=({children:e})=>m.jsx(m.Fragment,{children:e});function sFe(e){return T.isValidElement(e)&&e.type===iFe}function oFe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function aFe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var lFe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],sd=lFe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?aR:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function cFe(e,t){e&&ai.flushSync(()=>e.dispatchEvent(t))}function Yu(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function fFe(e,t=globalThis==null?void 0:globalThis.document){const n=Yu(e);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var dFe="DismissableLayer",kM="dismissableLayer.update",uFe="dismissableLayer.pointerDownOutside",hFe="dismissableLayer.focusOutside",AH,mre=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gre=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,f=T.useContext(mre),[c,d]=T.useState(null),u=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=T.useState({}),g=a0(t,A=>d(A)),y=Array.from(f.layers),[U]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(U),v=c?y.indexOf(c):-1,E=f.layersWithOutsidePointerEventsDisabled.size>0,k=v>=x,M=gFe(A=>{const I=A.target,R=[...f.branches].some(D=>D.contains(I));!k||R||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},u),S=bFe(A=>{const I=A.target;[...f.branches].some(D=>D.contains(I))||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},u);return fFe(A=>{v===f.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},u),T.useEffect(()=>{if(c)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(AH=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(c)),f.layers.add(c),MH(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(u.body.style.pointerEvents=AH)}},[c,u,n,f]),T.useEffect(()=>()=>{c&&(f.layers.delete(c),f.layersWithOutsidePointerEventsDisabled.delete(c),MH())},[c,f]),T.useEffect(()=>{const A=()=>h({});return document.addEventListener(kM,A),()=>document.removeEventListener(kM,A)},[]),m.jsx(sd.div,{...l,ref:g,style:{pointerEvents:E?k?"auto":"none":void 0,...e.style},onFocusCapture:zu(e.onFocusCapture,S.onFocusCapture),onBlurCapture:zu(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:zu(e.onPointerDownCapture,M.onPointerDownCapture)})});gre.displayName=dFe;var pFe="DismissableLayerBranch",mFe=T.forwardRef((e,t)=>{const n=T.useContext(mre),r=T.useRef(null),i=a0(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.jsx(sd.div,{...e,ref:i})});mFe.displayName=pFe;function gFe(e,t=globalThis==null?void 0:globalThis.document){const n=Yu(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){bre(uFe,n,f,{discrete:!0})};const f={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function bFe(e,t=globalThis==null?void 0:globalThis.document){const n=Yu(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&bre(hFe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function MH(){const e=new CustomEvent(kM);document.dispatchEvent(e)}function bre(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?cFe(i,s):i.dispatchEvent(s)}var pS=0;function yFe(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??TH()),document.body.insertAdjacentElement("beforeend",e[1]??TH()),pS++,()=>{pS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),pS--}},[])}function TH(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var mS="focusScope.autoFocusOnMount",gS="focusScope.autoFocusOnUnmount",IH={bubbles:!1,cancelable:!0},UFe="FocusScope",yre=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[a,l]=T.useState(null),f=Yu(i),c=Yu(s),d=T.useRef(null),u=a0(t,y=>l(y)),h=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let y=function(E){if(h.paused||!a)return;const k=E.target;a.contains(k)?d.current=k:Xd(d.current,{select:!0})},U=function(E){if(h.paused||!a)return;const k=E.relatedTarget;k!==null&&(a.contains(k)||Xd(d.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const M of E)M.removedNodes.length>0&&Xd(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",U);const v=new MutationObserver(x);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",U),v.disconnect()}}},[r,a,h.paused]),T.useEffect(()=>{if(a){RH.add(h);const y=document.activeElement;if(!a.contains(y)){const x=new CustomEvent(mS,IH);a.addEventListener(mS,f),a.dispatchEvent(x),x.defaultPrevented||(xFe(SFe(Ure(a)),{select:!0}),document.activeElement===y&&Xd(a))}return()=>{a.removeEventListener(mS,f),setTimeout(()=>{const x=new CustomEvent(gS,IH);a.addEventListener(gS,c),a.dispatchEvent(x),x.defaultPrevented||Xd(y??document.body,{select:!0}),a.removeEventListener(gS,c),RH.remove(h)},0)}}},[a,f,c,h]);const g=T.useCallback(y=>{if(!n&&!r||h.paused)return;const U=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(U&&x){const v=y.currentTarget,[E,k]=wFe(v);E&&k?!y.shiftKey&&x===k?(y.preventDefault(),n&&Xd(E,{select:!0})):y.shiftKey&&x===E&&(y.preventDefault(),n&&Xd(k,{select:!0})):x===v&&y.preventDefault()}},[n,r,h.paused]);return m.jsx(sd.div,{tabIndex:-1,...o,ref:u,onKeyDown:g})});yre.displayName=UFe;function xFe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Xd(r,{select:t}),document.activeElement!==n)return}function wFe(e){const t=Ure(e),n=NH(t,e),r=NH(t.reverse(),e);return[n,r]}function Ure(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function NH(e,t){for(const n of e)if(!vFe(n,{upTo:t}))return n}function vFe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function EFe(e){return e instanceof HTMLInputElement&&"select"in e}function Xd(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&EFe(e)&&t&&e.select()}}var RH=kFe();function kFe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=_H(e,t),e.unshift(t)},remove(t){var n;e=_H(e,t),(n=e[0])==null||n.resume()}}}function _H(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function SFe(e){return e.filter(t=>t.tagName!=="A")}var U1=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},CFe=QM.useId||(()=>{}),AFe=0;function MFe(e){const[t,n]=T.useState(CFe());return U1(()=>{e||n(r=>r??String(AFe++))},[e]),e||(t?`radix-${t}`:"")}const TFe=["top","right","bottom","left"],Zu=Math.min,No=Math.max,i9=Math.round,XU=Math.floor,xc=e=>({x:e,y:e}),IFe={left:"right",right:"left",bottom:"top",top:"bottom"},NFe={start:"end",end:"start"};function SM(e,t,n){return No(e,Zu(t,n))}function qf(e,t){return typeof e=="function"?e(t):e}function Qf(e){return e.split("-")[0]}function i6(e){return e.split("-")[1]}function lR(e){return e==="x"?"y":"x"}function cR(e){return e==="y"?"height":"width"}const RFe=new Set(["top","bottom"]);function gc(e){return RFe.has(Qf(e))?"y":"x"}function fR(e){return lR(gc(e))}function _Fe(e,t,n){n===void 0&&(n=!1);const r=i6(e),i=fR(e),s=cR(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=s9(o)),[o,s9(o)]}function PFe(e){const t=s9(e);return[CM(e),t,CM(t)]}function CM(e){return e.replace(/start|end/g,t=>NFe[t])}const PH=["left","right"],DH=["right","left"],DFe=["top","bottom"],LFe=["bottom","top"];function OFe(e,t,n){switch(e){case"top":case"bottom":return n?t?DH:PH:t?PH:DH;case"left":case"right":return t?DFe:LFe;default:return[]}}function jFe(e,t,n,r){const i=i6(e);let s=OFe(Qf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(CM)))),s}function s9(e){return e.replace(/left|right|bottom|top/g,t=>IFe[t])}function BFe(e){return{top:0,right:0,bottom:0,left:0,...e}}function xre(e){return typeof e!="number"?BFe(e):{top:e,right:e,bottom:e,left:e}}function o9(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function LH(e,t,n){let{reference:r,floating:i}=e;const s=gc(t),o=fR(t),a=cR(o),l=Qf(t),f=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,u=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(i6(t)){case"start":h[o]-=u*(n&&f?-1:1);break;case"end":h[o]+=u*(n&&f?-1:1);break}return h}async function FFe(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:f="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:u=!1,padding:h=0}=qf(t,e),g=xre(h),U=a[u?d==="floating"?"reference":"floating":d],x=o9(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(U)))==null||n?U:U.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:f,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},M=o9(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:E,strategy:l}):v);return{top:(x.top-M.top+g.top)/k.y,bottom:(M.bottom-x.bottom+g.bottom)/k.y,left:(x.left-M.left+g.left)/k.x,right:(M.right-x.right+g.right)/k.x}}const zFe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=LH(f,r,l),u=r,h={},g=0;for(let U=0;U<a.length;U++){var y;const{name:x,fn:v}=a[U],{x:E,y:k,data:M,reset:S}=await v({x:c,y:d,initialPlacement:r,placement:u,strategy:i,middlewareData:h,rects:f,platform:{...o,detectOverflow:(y=o.detectOverflow)!=null?y:FFe},elements:{reference:e,floating:t}});c=E??c,d=k??d,h={...h,[x]:{...h[x],...M}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(u=S.placement),S.rects&&(f=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:d}=LH(f,u,l)),U=-1)}return{x:c,y:d,placement:u,strategy:i,middlewareData:h}},$Fe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:f,padding:c=0}=qf(e,t)||{};if(f==null)return{};const d=xre(c),u={x:n,y:r},h=fR(i),g=cR(h),y=await o.getDimensions(f),U=h==="y",x=U?"top":"left",v=U?"bottom":"right",E=U?"clientHeight":"clientWidth",k=s.reference[g]+s.reference[h]-u[h]-s.floating[g],M=u[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let A=S?S[E]:0;(!A||!await(o.isElement==null?void 0:o.isElement(S)))&&(A=a.floating[E]||s.floating[g]);const I=k/2-M/2,R=A/2-y[g]/2-1,D=Zu(d[x],R),_=Zu(d[v],R),P=D,$=A-y[g]-_,L=A/2-y[g]/2+I,B=SM(P,L,$),V=!l.arrow&&i6(i)!=null&&L!==B&&s.reference[g]/2-(L<P?D:_)-y[g]/2<0,z=V?L<P?L-P:L-$:0;return{[h]:u[h]+z,data:{[h]:B,centerOffset:L-B-z,...V&&{alignmentOffset:z}},reset:V}}}),HFe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:f}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...U}=qf(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=Qf(i),v=gc(a),E=Qf(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(f.floating)),M=u||(E||!y?[s9(a)]:PFe(a)),S=g!=="none";!u&&S&&M.push(...jFe(a,y,g,k));const A=[a,...M],I=await l.detectOverflow(t,U),R=[];let D=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(I[x]),d){const L=_Fe(i,o,k);R.push(I[L[0]],I[L[1]])}if(D=[...D,{placement:i,overflows:R}],!R.every(L=>L<=0)){var _,P;const L=(((_=s.flip)==null?void 0:_.index)||0)+1,B=A[L];if(B&&(!(d==="alignment"?v!==gc(B):!1)||D.every(G=>gc(G.placement)===v?G.overflows[0]>0:!0)))return{data:{index:L,overflows:D},reset:{placement:B}};let V=(P=D.filter(z=>z.overflows[0]<=0).sort((z,G)=>z.overflows[1]-G.overflows[1])[0])==null?void 0:P.placement;if(!V)switch(h){case"bestFit":{var $;const z=($=D.filter(G=>{if(S){const W=gc(G.placement);return W===v||W==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(W=>W>0).reduce((W,F)=>W+F,0)]).sort((G,W)=>G[1]-W[1])[0])==null?void 0:$[0];z&&(V=z);break}case"initialPlacement":V=a;break}if(i!==V)return{reset:{placement:V}}}return{}}}};function OH(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jH(e){return TFe.some(t=>e[t]>=0)}const VFe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:i="referenceHidden",...s}=qf(e,t);switch(i){case"referenceHidden":{const o=await r.detectOverflow(t,{...s,elementContext:"reference"}),a=OH(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:jH(a)}}}case"escaped":{const o=await r.detectOverflow(t,{...s,altBoundary:!0}),a=OH(o,n.floating);return{data:{escapedOffsets:a,escaped:jH(a)}}}default:return{}}}}},wre=new Set(["left","top"]);async function WFe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Qf(n),a=i6(n),l=gc(n)==="y",f=wre.has(o)?-1:1,c=s&&l?-1:1,d=qf(t,e);let{mainAxis:u,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),l?{x:h*c,y:u*f}:{x:u*f,y:h*c}}const GFe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await WFe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},XFe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i,platform:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:v,y:E}=x;return{x:v,y:E}}},...f}=qf(e,t),c={x:n,y:r},d=await s.detectOverflow(t,f),u=gc(Qf(i)),h=lR(u);let g=c[h],y=c[u];if(o){const x=h==="y"?"top":"left",v=h==="y"?"bottom":"right",E=g+d[x],k=g-d[v];g=SM(E,g,k)}if(a){const x=u==="y"?"top":"left",v=u==="y"?"bottom":"right",E=y+d[x],k=y-d[v];y=SM(E,y,k)}const U=l.fn({...t,[h]:g,[u]:y});return{...U,data:{x:U.x-n,y:U.y-r,enabled:{[h]:o,[u]:a}}}}}},KFe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:f=!0}=qf(e,t),c={x:n,y:r},d=gc(i),u=lR(d);let h=c[u],g=c[d];const y=qf(a,t),U=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const E=u==="y"?"height":"width",k=s.reference[u]-s.floating[E]+U.mainAxis,M=s.reference[u]+s.reference[E]-U.mainAxis;h<k?h=k:h>M&&(h=M)}if(f){var x,v;const E=u==="y"?"width":"height",k=wre.has(Qf(i)),M=s.reference[d]-s.floating[E]+(k&&((x=o.offset)==null?void 0:x[d])||0)+(k?0:U.crossAxis),S=s.reference[d]+s.reference[E]+(k?0:((v=o.offset)==null?void 0:v[d])||0)-(k?U.crossAxis:0);g<M?g=M:g>S&&(g=S)}return{[u]:h,[d]:g}}}},YFe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...f}=qf(e,t),c=await o.detectOverflow(t,f),d=Qf(i),u=i6(i),h=gc(i)==="y",{width:g,height:y}=s.floating;let U,x;d==="top"||d==="bottom"?(U=d,x=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,U=u==="end"?"top":"bottom");const v=y-c.top-c.bottom,E=g-c.left-c.right,k=Zu(y-c[U],v),M=Zu(g-c[x],E),S=!t.middlewareData.shift;let A=k,I=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=v),S&&!u){const D=No(c.left,0),_=No(c.right,0),P=No(c.top,0),$=No(c.bottom,0);h?I=g-2*(D!==0||_!==0?D+_:No(c.left,c.right)):A=y-2*(P!==0||$!==0?P+$:No(c.top,c.bottom))}await l({...t,availableWidth:I,availableHeight:A});const R=await o.getDimensions(a.floating);return g!==R.width||y!==R.height?{reset:{rects:!0}}:{}}}};function Kw(){return typeof window<"u"}function s6(e){return vre(e)?(e.nodeName||"").toLowerCase():"#document"}function Lo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Dc(e){var t;return(t=(vre(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function vre(e){return Kw()?e instanceof Node||e instanceof Lo(e).Node:!1}function Al(e){return Kw()?e instanceof Element||e instanceof Lo(e).Element:!1}function _c(e){return Kw()?e instanceof HTMLElement||e instanceof Lo(e).HTMLElement:!1}function BH(e){return!Kw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Lo(e).ShadowRoot}const ZFe=new Set(["inline","contents"]);function Ny(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ml(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!ZFe.has(i)}const qFe=new Set(["table","td","th"]);function QFe(e){return qFe.has(s6(e))}const JFe=[":popover-open",":modal"];function Yw(e){return JFe.some(t=>{try{return e.matches(t)}catch{return!1}})}const eze=["transform","translate","scale","rotate","perspective"],tze=["transform","translate","scale","rotate","perspective","filter"],nze=["paint","layout","strict","content"];function dR(e){const t=uR(),n=Al(e)?Ml(e):e;return eze.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||tze.some(r=>(n.willChange||"").includes(r))||nze.some(r=>(n.contain||"").includes(r))}function rze(e){let t=qu(e);for(;_c(t)&&!Hg(t);){if(dR(t))return t;if(Yw(t))return null;t=qu(t)}return null}function uR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ize=new Set(["html","body","#document"]);function Hg(e){return ize.has(s6(e))}function Ml(e){return Lo(e).getComputedStyle(e)}function Zw(e){return Al(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qu(e){if(s6(e)==="html")return e;const t=e.assignedSlot||e.parentNode||BH(e)&&e.host||Dc(e);return BH(t)?t.host:t}function Ere(e){const t=qu(e);return Hg(t)?e.ownerDocument?e.ownerDocument.body:e.body:_c(t)&&Ny(t)?t:Ere(t)}function _b(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Ere(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Lo(i);if(s){const a=AM(o);return t.concat(o,o.visualViewport||[],Ny(i)?i:[],a&&n?_b(a):[])}return t.concat(i,_b(i,[],n))}function AM(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function kre(e){const t=Ml(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=_c(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=i9(n)!==s||i9(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function hR(e){return Al(e)?e:e.contextElement}function pm(e){const t=hR(e);if(!_c(t))return xc(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=kre(t);let o=(s?i9(n.width):n.width)/r,a=(s?i9(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const sze=xc(0);function Sre(e){const t=Lo(e);return!uR()||!t.visualViewport?sze:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function oze(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Lo(e)?!1:t}function x1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=hR(e);let o=xc(1);t&&(r?Al(r)&&(o=pm(r)):o=pm(e));const a=oze(s,n,r)?Sre(s):xc(0);let l=(i.left+a.x)/o.x,f=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const u=Lo(s),h=r&&Al(r)?Lo(r):r;let g=u,y=AM(g);for(;y&&r&&h!==g;){const U=pm(y),x=y.getBoundingClientRect(),v=Ml(y),E=x.left+(y.clientLeft+parseFloat(v.paddingLeft))*U.x,k=x.top+(y.clientTop+parseFloat(v.paddingTop))*U.y;l*=U.x,f*=U.y,c*=U.x,d*=U.y,l+=E,f+=k,g=Lo(y),y=AM(g)}}return o9({width:c,height:d,x:l,y:f})}function qw(e,t){const n=Zw(e).scrollLeft;return t?t.left+n:x1(Dc(e)).left+n}function Cre(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-qw(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function aze(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Dc(r),a=t?Yw(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},f=xc(1);const c=xc(0),d=_c(r);if((d||!d&&!s)&&((s6(r)!=="body"||Ny(o))&&(l=Zw(r)),_c(r))){const h=x1(r);f=pm(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const u=o&&!d&&!s?Cre(o,l):xc(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-l.scrollLeft*f.x+c.x+u.x,y:n.y*f.y-l.scrollTop*f.y+c.y+u.y}}function lze(e){return Array.from(e.getClientRects())}function cze(e){const t=Dc(e),n=Zw(e),r=e.ownerDocument.body,i=No(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=No(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+qw(e);const a=-n.scrollTop;return Ml(r).direction==="rtl"&&(o+=No(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const FH=25;function fze(e,t){const n=Lo(e),r=Dc(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=uR();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const f=qw(r);if(f<=0){const c=r.ownerDocument,d=c.body,u=getComputedStyle(d),h=c.compatMode==="CSS1Compat"&&parseFloat(u.marginLeft)+parseFloat(u.marginRight)||0,g=Math.abs(r.clientWidth-d.clientWidth-h);g<=FH&&(s-=g)}else f<=FH&&(s+=f);return{width:s,height:o,x:a,y:l}}const dze=new Set(["absolute","fixed"]);function uze(e,t){const n=x1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=_c(e)?pm(e):xc(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,f=r*s.y;return{width:o,height:a,x:l,y:f}}function zH(e,t,n){let r;if(t==="viewport")r=fze(e,n);else if(t==="document")r=cze(Dc(e));else if(Al(t))r=uze(t,n);else{const i=Sre(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return o9(r)}function Are(e,t){const n=qu(e);return n===t||!Al(n)||Hg(n)?!1:Ml(n).position==="fixed"||Are(n,t)}function hze(e,t){const n=t.get(e);if(n)return n;let r=_b(e,[],!1).filter(a=>Al(a)&&s6(a)!=="body"),i=null;const s=Ml(e).position==="fixed";let o=s?qu(e):e;for(;Al(o)&&!Hg(o);){const a=Ml(o),l=dR(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&dze.has(i.position)||Ny(o)&&!l&&Are(e,o))?r=r.filter(c=>c!==o):i=a,o=qu(o)}return t.set(e,r),r}function pze(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Yw(t)?[]:hze(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((f,c)=>{const d=zH(t,c,i);return f.top=No(d.top,f.top),f.right=Zu(d.right,f.right),f.bottom=Zu(d.bottom,f.bottom),f.left=No(d.left,f.left),f},zH(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function mze(e){const{width:t,height:n}=kre(e);return{width:t,height:n}}function gze(e,t,n){const r=_c(t),i=Dc(t),s=n==="fixed",o=x1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=xc(0);function f(){l.x=qw(i)}if(r||!r&&!s)if((s6(t)!=="body"||Ny(i))&&(a=Zw(t)),r){const h=x1(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&f();s&&!r&&i&&f();const c=i&&!r&&!s?Cre(i,a):xc(0),d=o.left+a.scrollLeft-l.x-c.x,u=o.top+a.scrollTop-l.y-c.y;return{x:d,y:u,width:o.width,height:o.height}}function bS(e){return Ml(e).position==="static"}function $H(e,t){if(!_c(e)||Ml(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Dc(e)===n&&(n=n.ownerDocument.body),n}function Mre(e,t){const n=Lo(e);if(Yw(e))return n;if(!_c(e)){let i=qu(e);for(;i&&!Hg(i);){if(Al(i)&&!bS(i))return i;i=qu(i)}return n}let r=$H(e,t);for(;r&&QFe(r)&&bS(r);)r=$H(r,t);return r&&Hg(r)&&bS(r)&&!dR(r)?n:r||rze(e)||n}const bze=async function(e){const t=this.getOffsetParent||Mre,n=this.getDimensions,r=await n(e.floating);return{reference:gze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function yze(e){return Ml(e).direction==="rtl"}const Uze={convertOffsetParentRelativeRectToViewportRelativeRect:aze,getDocumentElement:Dc,getClippingRect:pze,getOffsetParent:Mre,getElementRects:bze,getClientRects:lze,getDimensions:mze,getScale:pm,isElement:Al,isRTL:yze};function Tre(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function xze(e,t){let n=null,r;const i=Dc(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const f=e.getBoundingClientRect(),{left:c,top:d,width:u,height:h}=f;if(a||t(),!u||!h)return;const g=XU(d),y=XU(i.clientWidth-(c+u)),U=XU(i.clientHeight-(d+h)),x=XU(c),E={rootMargin:-g+"px "+-y+"px "+-U+"px "+-x+"px",threshold:No(0,Zu(1,l))||1};let k=!0;function M(S){const A=S[0].intersectionRatio;if(A!==l){if(!k)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!Tre(f,e.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(M,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,E)}n.observe(e)}return o(!0),s}function wze(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,f=hR(e),c=i||s?[...f?_b(f):[],..._b(t)]:[];c.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const d=f&&a?xze(f,n):null;let u=-1,h=null;o&&(h=new ResizeObserver(x=>{let[v]=x;v&&v.target===f&&h&&(h.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),f&&!l&&h.observe(f),h.observe(t));let g,y=l?x1(e):null;l&&U();function U(){const x=x1(e);y&&!Tre(y,x)&&n(),y=x,g=requestAnimationFrame(U)}return n(),()=>{var x;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d==null||d(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(g)}}const vze=GFe,Eze=XFe,kze=HFe,Sze=YFe,Cze=VFe,HH=$Fe,Aze=KFe,Mze=(e,t,n)=>{const r=new Map,i={platform:Uze,...n},s={...i.platform,_c:r};return zFe(e,t,{...i,platform:s})};var Tze=typeof document<"u",Ize=function(){},q3=Tze?T.useLayoutEffect:Ize;function a9(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!a9(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!a9(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ire(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function VH(e,t){const n=Ire(e);return Math.round(t*n)/n}function yS(e){const t=T.useRef(e);return q3(()=>{t.current=e}),t}function Nze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:f}=e,[c,d]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,h]=T.useState(r);a9(u,r)||h(r);const[g,y]=T.useState(null),[U,x]=T.useState(null),v=T.useCallback(G=>{G!==S.current&&(S.current=G,y(G))},[]),E=T.useCallback(G=>{G!==A.current&&(A.current=G,x(G))},[]),k=s||g,M=o||U,S=T.useRef(null),A=T.useRef(null),I=T.useRef(c),R=l!=null,D=yS(l),_=yS(i),P=yS(f),$=T.useCallback(()=>{if(!S.current||!A.current)return;const G={placement:t,strategy:n,middleware:u};_.current&&(G.platform=_.current),Mze(S.current,A.current,G).then(W=>{const F={...W,isPositioned:P.current!==!1};L.current&&!a9(I.current,F)&&(I.current=F,ai.flushSync(()=>{d(F)}))})},[u,t,n,_,P]);q3(()=>{f===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(G=>({...G,isPositioned:!1})))},[f]);const L=T.useRef(!1);q3(()=>(L.current=!0,()=>{L.current=!1}),[]),q3(()=>{if(k&&(S.current=k),M&&(A.current=M),k&&M){if(D.current)return D.current(k,M,$);$()}},[k,M,$,D,R]);const B=T.useMemo(()=>({reference:S,floating:A,setReference:v,setFloating:E}),[v,E]),V=T.useMemo(()=>({reference:k,floating:M}),[k,M]),z=T.useMemo(()=>{const G={position:n,left:0,top:0};if(!V.floating)return G;const W=VH(V.floating,c.x),F=VH(V.floating,c.y);return a?{...G,transform:"translate("+W+"px, "+F+"px)",...Ire(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:F}},[n,a,V.floating,c.x,c.y]);return T.useMemo(()=>({...c,update:$,refs:B,elements:V,floatingStyles:z}),[c,$,B,V,z])}const Rze=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?HH({element:r.current,padding:i}).fn(n):{}:r?HH({element:r,padding:i}).fn(n):{}}}},_ze=(e,t)=>({...vze(e),options:[e,t]}),Pze=(e,t)=>({...Eze(e),options:[e,t]}),Dze=(e,t)=>({...Aze(e),options:[e,t]}),Lze=(e,t)=>({...kze(e),options:[e,t]}),Oze=(e,t)=>({...Sze(e),options:[e,t]}),jze=(e,t)=>({...Cze(e),options:[e,t]}),Bze=(e,t)=>({...Rze(e),options:[e,t]});var Fze="Arrow",Nre=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return m.jsx(sd.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});Nre.displayName=Fze;var zze=Nre;function $ze(e){const[t,n]=T.useState(void 0);return U1(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,f=Array.isArray(l)?l[0]:l;o=f.inlineSize,a=f.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var pR="Popper",[Rre,_re]=pre(pR),[Hze,Pre]=Rre(pR),Dre=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return m.jsx(Hze,{scope:t,anchor:r,onAnchorChange:i,children:n})};Dre.displayName=pR;var Lre="PopperAnchor",Ore=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=Pre(Lre,n),o=T.useRef(null),a=a0(t,o);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(sd.div,{...i,ref:a})});Ore.displayName=Lre;var mR="PopperContent",[Vze,Wze]=Rre(mR),jre=T.forwardRef((e,t)=>{var ce,ie,we,Ee,_e,Fe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:f=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:u=!1,updatePositionStrategy:h="optimized",onPlaced:g,...y}=e,U=Pre(mR,n),[x,v]=T.useState(null),E=a0(t,He=>v(He)),[k,M]=T.useState(null),S=$ze(k),A=(S==null?void 0:S.width)??0,I=(S==null?void 0:S.height)??0,R=r+(s!=="center"?"-"+s:""),D=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},_=Array.isArray(f)?f:[f],P=_.length>0,$={padding:D,boundary:_.filter(Xze),altBoundary:P},{refs:L,floatingStyles:B,placement:V,isPositioned:z,middlewareData:G}=Nze({strategy:"fixed",placement:R,whileElementsMounted:(...He)=>wze(...He,{animationFrame:h==="always"}),elements:{reference:U.anchor},middleware:[_ze({mainAxis:i+I,alignmentAxis:o}),l&&Pze({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Dze():void 0,...$}),l&&Lze({...$}),Oze({...$,apply:({elements:He,rects:ve,availableWidth:De,availableHeight:Ae})=>{const{width:ut,height:Mt}=ve.reference,qt=He.floating.style;qt.setProperty("--radix-popper-available-width",`${De}px`),qt.setProperty("--radix-popper-available-height",`${Ae}px`),qt.setProperty("--radix-popper-anchor-width",`${ut}px`),qt.setProperty("--radix-popper-anchor-height",`${Mt}px`)}}),k&&Bze({element:k,padding:a}),Kze({arrowWidth:A,arrowHeight:I}),u&&jze({strategy:"referenceHidden",...$})]}),[W,F]=zre(V),K=Yu(g);U1(()=>{z&&(K==null||K())},[z,K]);const q=(ce=G.arrow)==null?void 0:ce.x,Y=(ie=G.arrow)==null?void 0:ie.y,ae=((we=G.arrow)==null?void 0:we.centerOffset)!==0,[ge,he]=T.useState();return U1(()=>{x&&he(window.getComputedStyle(x).zIndex)},[x]),m.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:z?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(Ee=G.transformOrigin)==null?void 0:Ee.x,(_e=G.transformOrigin)==null?void 0:_e.y].join(" "),...((Fe=G.hide)==null?void 0:Fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:m.jsx(Vze,{scope:n,placedSide:W,onArrowChange:M,arrowX:q,arrowY:Y,shouldHideArrow:ae,children:m.jsx(sd.div,{"data-side":W,"data-align":F,...y,ref:E,style:{...y.style,animation:z?void 0:"none"}})})})});jre.displayName=mR;var Bre="PopperArrow",Gze={top:"bottom",right:"left",bottom:"top",left:"right"},Fre=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=Wze(Bre,r),o=Gze[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(zze,{...i,ref:n,style:{...i.style,display:"block"}})})});Fre.displayName=Bre;function Xze(e){return e!==null}var Kze=e=>({name:"transformOrigin",options:e,fn(t){var U,x,v;const{placement:n,rects:r,middlewareData:i}=t,o=((U=i.arrow)==null?void 0:U.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[f,c]=zre(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(((x=i.arrow)==null?void 0:x.x)??0)+a/2,h=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let g="",y="";return f==="bottom"?(g=o?d:`${u}px`,y=`${-l}px`):f==="top"?(g=o?d:`${u}px`,y=`${r.floating.height+l}px`):f==="right"?(g=`${-l}px`,y=o?d:`${h}px`):f==="left"&&(g=`${r.floating.width+l}px`,y=o?d:`${h}px`),{data:{x:g,y}}}});function zre(e){const[t,n="center"]=e.split("-");return[t,n]}var Yze=Dre,$re=Ore,Zze=jre,qze=Fre,Qze="Portal",Hre=T.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[i,s]=T.useState(!1);U1(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?EK.createPortal(m.jsx(sd.div,{...r,ref:t}),o):null});Hre.displayName=Qze;function Jze(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var gR=e=>{const{present:t,children:n}=e,r=e$e(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=a0(r.ref,t$e(i));return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};gR.displayName="Presence";function e$e(e){const[t,n]=T.useState(),r=T.useRef({}),i=T.useRef(e),s=T.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Jze(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const f=KU(r.current);s.current=a==="mounted"?f:"none"},[a]),U1(()=>{const f=r.current,c=i.current;if(c!==e){const u=s.current,h=KU(f);e?l("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(c&&u!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),U1(()=>{if(t){let f;const c=t.ownerDocument.defaultView??window,d=h=>{const y=KU(r.current).includes(h.animationName);if(h.target===t&&y&&(l("ANIMATION_END"),!i.current)){const U=t.style.animationFillMode;t.style.animationFillMode="forwards",f=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=U)})}},u=h=>{h.target===t&&(s.current=KU(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{c.clearTimeout(f),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function KU(e){return(e==null?void 0:e.animationName)||"none"}function t$e(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function n$e({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=r$e({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=Yu(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function r$e({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=Yu(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var i$e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},xp=new WeakMap,YU=new WeakMap,ZU={},US=0,Vre=function(e){return e&&(e.host||Vre(e.parentNode))},s$e=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Vre(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},o$e=function(e,t,n,r){var i=s$e(t,Array.isArray(e)?e:[e]);ZU[n]||(ZU[n]=new WeakMap);var s=ZU[n],o=[],a=new Set,l=new Set(i),f=function(d){!d||a.has(d)||(a.add(d),f(d.parentNode))};i.forEach(f);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(u){if(a.has(u))c(u);else try{var h=u.getAttribute(r),g=h!==null&&h!=="false",y=(xp.get(u)||0)+1,U=(s.get(u)||0)+1;xp.set(u,y),s.set(u,U),o.push(u),y===1&&g&&YU.set(u,!0),U===1&&u.setAttribute(n,"true"),g||u.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",u,x)}})};return c(t),a.clear(),US++,function(){o.forEach(function(d){var u=xp.get(d)-1,h=s.get(d)-1;xp.set(d,u),s.set(d,h),u||(YU.has(d)||d.removeAttribute(r),YU.delete(d)),h||d.removeAttribute(n)}),US--,US||(xp=new WeakMap,xp=new WeakMap,YU=new WeakMap,ZU={})}},a$e=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=i$e(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),o$e(r,i,n,"aria-hidden")):function(){return null}},pc=function(){return pc=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},pc.apply(this,arguments)};function Wre(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function l$e(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Q3="right-scroll-bar-position",J3="width-before-scroll-bar",c$e="with-scroll-bars-hidden",f$e="--removed-body-scroll-bar-size";function xS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function d$e(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var u$e=typeof window<"u"?T.useLayoutEffect:T.useEffect,WH=new WeakMap;function h$e(e,t){var n=d$e(null,function(r){return e.forEach(function(i){return xS(i,r)})});return u$e(function(){var r=WH.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||xS(a,null)}),s.forEach(function(a){i.has(a)||xS(a,o)})}WH.set(n,e)},[e]),n}function p$e(e){return e}function m$e(e,t){t===void 0&&(t=p$e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},f=function(){return Promise.resolve().then(l)};f(),n={push:function(c){o.push(c),f()},filter:function(c){return o=o.filter(c),n}}}};return i}function g$e(e){e===void 0&&(e={});var t=m$e(null);return t.options=pc({async:!0,ssr:!1},e),t}var Gre=function(e){var t=e.sideCar,n=Wre(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,pc({},n))};Gre.isSideCarExport=!0;function b$e(e,t){return e.useMedium(t),Gre}var Xre=g$e(),wS=function(){},Qw=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:wS,onWheelCapture:wS,onTouchMoveCapture:wS}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,f=e.removeScrollBar,c=e.enabled,d=e.shards,u=e.sideCar,h=e.noRelative,g=e.noIsolation,y=e.inert,U=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,E=e.gapMode,k=Wre(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=u,S=h$e([n,t]),A=pc(pc({},k),i);return T.createElement(T.Fragment,null,c&&T.createElement(M,{sideCar:Xre,removeScrollBar:f,shards:d,noRelative:h,noIsolation:g,inert:y,setCallbacks:s,allowPinchZoom:!!U,lockRef:n,gapMode:E}),o?T.cloneElement(T.Children.only(a),pc(pc({},A),{ref:S})):T.createElement(v,pc({},A,{className:l,ref:S}),a))});Qw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qw.classNames={fullWidth:J3,zeroRight:Q3};var y$e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function U$e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=y$e();return t&&e.setAttribute("nonce",t),e}function x$e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function w$e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var v$e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=U$e())&&(x$e(t,n),w$e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},E$e=function(){var e=v$e();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Kre=function(){var e=E$e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},k$e={left:0,top:0,right:0,gap:0},vS=function(e){return parseInt(e||"",10)||0},S$e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[vS(n),vS(r),vS(i)]},C$e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return k$e;var t=S$e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},A$e=Kre(),mm="data-scroll-locked",M$e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(c$e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(mm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Q3,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(J3,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Q3," .").concat(Q3,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(J3," .").concat(J3,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(mm,`] {
    `).concat(f$e,": ").concat(a,`px;
  }
`)},GH=function(){var e=parseInt(document.body.getAttribute(mm)||"0",10);return isFinite(e)?e:0},T$e=function(){T.useEffect(function(){return document.body.setAttribute(mm,(GH()+1).toString()),function(){var e=GH()-1;e<=0?document.body.removeAttribute(mm):document.body.setAttribute(mm,e.toString())}},[])},I$e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;T$e();var s=T.useMemo(function(){return C$e(i)},[i]);return T.createElement(A$e,{styles:M$e(s,!t,i,n?"":"!important")})},MM=!1;if(typeof window<"u")try{var qU=Object.defineProperty({},"passive",{get:function(){return MM=!0,!0}});window.addEventListener("test",qU,qU),window.removeEventListener("test",qU,qU)}catch{MM=!1}var wp=MM?{passive:!1}:!1,N$e=function(e){return e.tagName==="TEXTAREA"},Yre=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!N$e(e)&&n[t]==="visible")},R$e=function(e){return Yre(e,"overflowY")},_$e=function(e){return Yre(e,"overflowX")},XH=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Zre(e,r);if(i){var s=qre(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},P$e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},D$e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Zre=function(e,t){return e==="v"?R$e(t):_$e(t)},qre=function(e,t){return e==="v"?P$e(t):D$e(t)},L$e=function(e,t){return e==="h"&&t==="rtl"?-1:1},O$e=function(e,t,n,r,i){var s=L$e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),f=!1,c=o>0,d=0,u=0;do{if(!a)break;var h=qre(e,a),g=h[0],y=h[1],U=h[2],x=y-U-s*g;(g||x)&&Zre(e,a)&&(d+=x,u+=g);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(d)<1||!i)||!c&&(Math.abs(u)<1||!i))&&(f=!0),f},QU=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},KH=function(e){return[e.deltaX,e.deltaY]},YH=function(e){return e&&"current"in e?e.current:e},j$e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},B$e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},F$e=0,vp=[];function z$e(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(F$e++)[0],s=T.useState(Kre)[0],o=T.useRef(e);T.useEffect(function(){o.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var y=l$e([e.lockRef.current],(e.shards||[]).map(YH)).filter(Boolean);return y.forEach(function(U){return U.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(U){return U.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=T.useCallback(function(y,U){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var x=QU(y),v=n.current,E="deltaX"in y?y.deltaX:v[0]-x[0],k="deltaY"in y?y.deltaY:v[1]-x[1],M,S=y.target,A=Math.abs(E)>Math.abs(k)?"h":"v";if("touches"in y&&A==="h"&&S.type==="range")return!1;var I=window.getSelection(),R=I&&I.anchorNode,D=R?R===S||R.contains(S):!1;if(D)return!1;var _=XH(A,S);if(!_)return!0;if(_?M=A:(M=A==="v"?"h":"v",_=XH(A,S)),!_)return!1;if(!r.current&&"changedTouches"in y&&(E||k)&&(r.current=M),!M)return!0;var P=r.current||M;return O$e(P,U,y,P==="h"?E:k,!0)},[]),l=T.useCallback(function(y){var U=y;if(!(!vp.length||vp[vp.length-1]!==s)){var x="deltaY"in U?KH(U):QU(U),v=t.current.filter(function(M){return M.name===U.type&&(M.target===U.target||U.target===M.shadowParent)&&j$e(M.delta,x)})[0];if(v&&v.should){U.cancelable&&U.preventDefault();return}if(!v){var E=(o.current.shards||[]).map(YH).filter(Boolean).filter(function(M){return M.contains(U.target)}),k=E.length>0?a(U,E[0]):!o.current.noIsolation;k&&U.cancelable&&U.preventDefault()}}},[]),f=T.useCallback(function(y,U,x,v){var E={name:y,delta:U,target:x,should:v,shadowParent:$$e(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(k){return k!==E})},1)},[]),c=T.useCallback(function(y){n.current=QU(y),r.current=void 0},[]),d=T.useCallback(function(y){f(y.type,KH(y),y.target,a(y,e.lockRef.current))},[]),u=T.useCallback(function(y){f(y.type,QU(y),y.target,a(y,e.lockRef.current))},[]);T.useEffect(function(){return vp.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:u}),document.addEventListener("wheel",l,wp),document.addEventListener("touchmove",l,wp),document.addEventListener("touchstart",c,wp),function(){vp=vp.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,wp),document.removeEventListener("touchmove",l,wp),document.removeEventListener("touchstart",c,wp)}},[]);var h=e.removeScrollBar,g=e.inert;return T.createElement(T.Fragment,null,g?T.createElement(s,{styles:B$e(i)}):null,h?T.createElement(I$e,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function $$e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const H$e=b$e(Xre,z$e);var Qre=T.forwardRef(function(e,t){return T.createElement(Qw,pc({},e,{ref:t,sideCar:H$e}))});Qre.classNames=Qw.classNames;var bR="Popover",[Jre,dqe]=pre(bR,[_re]),Ry=_re(),[V$e,l0]=Jre(bR),eie=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,a=Ry(t),l=T.useRef(null),[f,c]=T.useState(!1),[d=!1,u]=n$e({prop:r,defaultProp:i,onChange:s});return m.jsx(Yze,{...a,children:m.jsx(V$e,{scope:t,contentId:MFe(),triggerRef:l,open:d,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(h=>!h),[u]),hasCustomAnchor:f,onCustomAnchorAdd:T.useCallback(()=>c(!0),[]),onCustomAnchorRemove:T.useCallback(()=>c(!1),[]),modal:o,children:n})})};eie.displayName=bR;var tie="PopoverAnchor",W$e=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=l0(tie,n),s=Ry(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return T.useEffect(()=>(o(),()=>a()),[o,a]),m.jsx($re,{...s,...r,ref:t})});W$e.displayName=tie;var nie="PopoverTrigger",rie=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=l0(nie,n),s=Ry(n),o=a0(t,i.triggerRef),a=m.jsx(sd.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":cie(i.open),...r,ref:o,onClick:zu(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:m.jsx($re,{asChild:!0,...s,children:a})});rie.displayName=nie;var yR="PopoverPortal",[G$e,X$e]=Jre(yR,{forceMount:void 0}),iie=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=l0(yR,t);return m.jsx(G$e,{scope:t,forceMount:n,children:m.jsx(gR,{present:n||s.open,children:m.jsx(Hre,{asChild:!0,container:i,children:r})})})};iie.displayName=yR;var Vg="PopoverContent",sie=T.forwardRef((e,t)=>{const n=X$e(Vg,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,s=l0(Vg,e.__scopePopover);return m.jsx(gR,{present:r||s.open,children:s.modal?m.jsx(K$e,{...i,ref:t}):m.jsx(Y$e,{...i,ref:t})})});sie.displayName=Vg;var K$e=T.forwardRef((e,t)=>{const n=l0(Vg,e.__scopePopover),r=T.useRef(null),i=a0(t,r),s=T.useRef(!1);return T.useEffect(()=>{const o=r.current;if(o)return a$e(o)},[]),m.jsx(Qre,{as:aR,allowPinchZoom:!0,children:m.jsx(oie,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zu(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:zu(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,f=a.button===2||l;s.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:zu(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Y$e=T.forwardRef((e,t)=>{const n=l0(Vg,e.__scopePopover),r=T.useRef(!1),i=T.useRef(!1);return m.jsx(oie,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,f;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((f=n.triggerRef.current)==null?void 0:f.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),oie=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:c,...d}=e,u=l0(Vg,n),h=Ry(n);return yFe(),m.jsx(yre,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(gre,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f,onDismiss:()=>u.onOpenChange(!1),children:m.jsx(Zze,{"data-state":cie(u.open),role:"dialog",id:u.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),aie="PopoverClose",Z$e=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=l0(aie,n);return m.jsx(sd.button,{type:"button",...r,ref:t,onClick:zu(e.onClick,()=>i.onOpenChange(!1))})});Z$e.displayName=aie;var q$e="PopoverArrow",lie=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Ry(n);return m.jsx(qze,{...i,...r,ref:t})});lie.displayName=q$e;function cie(e){return e?"open":"closed"}var Jw=eie,e7=rie,Q$e=iie,UR=sie,fie=lie,ES={exports:{}},ZH;function J$e(){return ZH||(ZH=1,function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,i){return i.filter(function(s){return n.test(r,s)})},n.test=function(r,i){return n.match(r,i)!==null},n.match=function(r,i,s){s=s||{};var o=0,a=[],l=i.length,f=0,c=0,d=s.pre||"",u=s.post||"",h=s.caseSensitive&&i||i.toLowerCase(),g;r=s.caseSensitive&&r||r.toLowerCase();for(var y=0;y<l;y++)g=i[y],h[y]===r[o]?(g=d+g+u,o+=1,c+=1+c):c=0,f+=c,a[a.length]=g;return o===r.length?(f=h===r?1/0:f,{rendered:a.join(""),score:f}):null},n.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(o,a,l,f){var c=a;s.extract&&(c=s.extract(a));var d=n.match(r,c,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()}(ES)),ES.exports}var eHe=J$e();const tHe=Na(eHe),{useDebugValue:nHe}=Ne,{useSyncExternalStoreWithSelector:rHe}=xK,iHe=e=>e;function sHe(e,t=iHe,n){const r=rHe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return nHe(r),r}const oHe=e=>{const t=typeof e=="function"?wK(e):e,n=(r,i)=>sHe(t,r,i);return Object.assign(n,t),n},aHe=e=>oHe(e);var qH,QH;const JH=typeof window<"u"&&((qH=window.document)!=null&&qH.createElement||((QH=window.navigator)==null?void 0:QH.product)==="ReactNative")?Ne.useLayoutEffect:Ne.useEffect;function zl(){const e=aHe(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(i=>i.set),r=e(i=>i.version);return JH(()=>{n(i=>({version:i.version+1}))},[]),JH(()=>(n(({current:i})=>({current:[...i,t]})),()=>n(({current:i})=>({current:i.filter(s=>s!==t)}))),[t,r]),null},Out:()=>{const t=e(n=>n.current);return Ne.createElement(Ne.Fragment,null,t)}}}function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ci.apply(null,arguments)}function kS(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function lHe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,y=(u==null?void 0:u[e][l])||a,U=T.useMemo(()=>g,Object.values(g));return T.createElement(y.Provider,{value:U},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,cHe(i,...t)]}function cHe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function gm(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function fHe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,y=(u==null?void 0:u[e][l])||a,U=T.useMemo(()=>g,Object.values(g));return T.createElement(y.Provider,{value:U},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,dHe(i,...t)]}function dHe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function uHe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function die(...e){return t=>e.forEach(n=>uHe(n,t))}function eV(...e){return T.useCallback(die(...e),e)}const TM=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(pHe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(IM,ci({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(IM,ci({},r,{ref:t}),n)});TM.displayName="Slot";const IM=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...mHe(r,n.props),ref:die(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});IM.displayName="SlotClone";const hHe=({children:e})=>T.createElement(T.Fragment,null,e);function pHe(e){return T.isValidElement(e)&&e.type===hHe}function mHe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function gHe(e){const t=e+"CollectionProvider",[n,r]=fHe(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:g,children:y}=h,U=Ne.useRef(null),x=Ne.useRef(new Map).current;return Ne.createElement(i,{scope:g,itemMap:x,collectionRef:U},y)},a=e+"CollectionSlot",l=Ne.forwardRef((h,g)=>{const{scope:y,children:U}=h,x=s(a,y),v=eV(g,x.collectionRef);return Ne.createElement(TM,{ref:v},U)}),f=e+"CollectionItemSlot",c="data-radix-collection-item",d=Ne.forwardRef((h,g)=>{const{scope:y,children:U,...x}=h,v=Ne.useRef(null),E=eV(g,v),k=s(f,y);return Ne.useEffect(()=>(k.itemMap.set(v,{ref:v,...x}),()=>void k.itemMap.delete(v))),Ne.createElement(TM,{[c]:"",ref:E},U)});function u(h){const g=s(e+"CollectionConsumer",h);return Ne.useCallback(()=>{const U=g.collectionRef.current;if(!U)return[];const x=Array.from(U.querySelectorAll(`[${c}]`));return Array.from(g.itemMap.values()).sort((k,M)=>x.indexOf(k.ref.current)-x.indexOf(M.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},u,r]}function bHe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function uie(...e){return t=>e.forEach(n=>bHe(n,t))}function yHe(...e){return T.useCallback(uie(...e),e)}function UHe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,y=(u==null?void 0:u[e][l])||a,U=T.useMemo(()=>g,Object.values(g));return T.createElement(y.Provider,{value:U},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,xHe(i,...t)]}function xHe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}const wHe=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},vHe=QM.useId||(()=>{});let EHe=0;function kHe(e){const[t,n]=T.useState(vHe());return wHe(()=>{n(r=>r??String(EHe++))},[e]),t?`radix-${t}`:""}const hie=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(CHe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(NM,ci({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(NM,ci({},r,{ref:t}),n)});hie.displayName="Slot";const NM=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...AHe(r,n.props),ref:uie(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});NM.displayName="SlotClone";const SHe=({children:e})=>T.createElement(T.Fragment,null,e);function CHe(e){return T.isValidElement(e)&&e.type===SHe}function AHe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const MHe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],pie=MHe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?hie:t;return T.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),T.createElement(a,ci({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function xR(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function THe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=IHe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=xR(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function IHe({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=xR(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const NHe=T.createContext(void 0);function mie(e){const t=T.useContext(NHe);return e||t||"ltr"}const SS="rovingFocusGroup.onEntryFocus",RHe={bubbles:!1,cancelable:!0},wR="RovingFocusGroup",[RM,gie,_He]=gHe(wR),[PHe,bie]=UHe(wR,[_He]),[DHe,LHe]=PHe(wR),OHe=T.forwardRef((e,t)=>T.createElement(RM.Provider,{scope:e.__scopeRovingFocusGroup},T.createElement(RM.Slot,{scope:e.__scopeRovingFocusGroup},T.createElement(jHe,ci({},e,{ref:t}))))),jHe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:f,...c}=e,d=T.useRef(null),u=yHe(t,d),h=mie(s),[g=null,y]=THe({prop:o,defaultProp:a,onChange:l}),[U,x]=T.useState(!1),v=xR(f),E=gie(n),k=T.useRef(!1),[M,S]=T.useState(0);return T.useEffect(()=>{const A=d.current;if(A)return A.addEventListener(SS,v),()=>A.removeEventListener(SS,v)},[v]),T.createElement(DHe,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:g,onItemFocus:T.useCallback(A=>y(A),[y]),onItemShiftTab:T.useCallback(()=>x(!0),[]),onFocusableItemAdd:T.useCallback(()=>S(A=>A+1),[]),onFocusableItemRemove:T.useCallback(()=>S(A=>A-1),[])},T.createElement(pie.div,ci({tabIndex:U||M===0?-1:0,"data-orientation":r},c,{ref:u,style:{outline:"none",...e.style},onMouseDown:gm(e.onMouseDown,()=>{k.current=!0}),onFocus:gm(e.onFocus,A=>{const I=!k.current;if(A.target===A.currentTarget&&I&&!U){const R=new CustomEvent(SS,RHe);if(A.currentTarget.dispatchEvent(R),!R.defaultPrevented){const D=E().filter(B=>B.focusable),_=D.find(B=>B.active),P=D.find(B=>B.id===g),L=[_,P,...D].filter(Boolean).map(B=>B.ref.current);yie(L)}}k.current=!1}),onBlur:gm(e.onBlur,()=>x(!1))})))}),BHe="RovingFocusGroupItem",FHe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=e,a=kHe(),l=s||a,f=LHe(BHe,n),c=f.currentTabStopId===l,d=gie(n),{onFocusableItemAdd:u,onFocusableItemRemove:h}=f;return T.useEffect(()=>{if(r)return u(),()=>h()},[r,u,h]),T.createElement(RM.ItemSlot,{scope:n,id:l,focusable:r,active:i},T.createElement(pie.span,ci({tabIndex:c?0:-1,"data-orientation":f.orientation},o,{ref:t,onMouseDown:gm(e.onMouseDown,g=>{r?f.onItemFocus(l):g.preventDefault()}),onFocus:gm(e.onFocus,()=>f.onItemFocus(l)),onKeyDown:gm(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){f.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=HHe(g,f.orientation,f.dir);if(y!==void 0){g.preventDefault();let x=d().filter(v=>v.focusable).map(v=>v.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const v=x.indexOf(g.currentTarget);x=f.loop?VHe(x,v+1):x.slice(v+1)}setTimeout(()=>yie(x))}})})))}),zHe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $He(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function HHe(e,t,n){const r=$He(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return zHe[r]}function yie(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function VHe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const WHe=OHe,GHe=FHe;function XHe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Uie(...e){return t=>e.forEach(n=>XHe(n,t))}function KHe(...e){return T.useCallback(Uie(...e),e)}const _M=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{};function YHe(e,t){return T.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const xie=e=>{const{present:t,children:n}=e,r=ZHe(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=KHe(r.ref,i.ref);return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};xie.displayName="Presence";function ZHe(e){const[t,n]=T.useState(),r=T.useRef({}),i=T.useRef(e),s=T.useRef("none"),o=e?"mounted":"unmounted",[a,l]=YHe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const f=JU(r.current);s.current=a==="mounted"?f:"none"},[a]),_M(()=>{const f=r.current,c=i.current;if(c!==e){const u=s.current,h=JU(f);e?l("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(c&&u!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),_M(()=>{if(t){const f=d=>{const h=JU(r.current).includes(d.animationName);d.target===t&&h&&ai.flushSync(()=>l("ANIMATION_END"))},c=d=>{d.target===t&&(s.current=JU(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function JU(e){return(e==null?void 0:e.animationName)||"none"}const wie=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(QHe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(PM,ci({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(PM,ci({},r,{ref:t}),n)});wie.displayName="Slot";const PM=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...JHe(r,n.props),ref:Uie(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});PM.displayName="SlotClone";const qHe=({children:e})=>T.createElement(T.Fragment,null,e);function QHe(e){return T.isValidElement(e)&&e.type===qHe}function JHe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const eVe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],t7=eVe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?wie:t;return T.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),T.createElement(a,ci({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function vie(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function tVe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=nVe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=vie(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function nVe({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=vie(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const rVe=QM.useId||(()=>{});let iVe=0;function sVe(e){const[t,n]=T.useState(rVe());return _M(()=>{e||n(r=>r??String(iVe++))},[e]),e||(t?`radix-${t}`:"")}const Eie="Tabs",[oVe,uqe]=lHe(Eie,[bie]),kie=bie(),[aVe,vR]=oVe(Eie),lVe=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...f}=e,c=mie(a),[d,u]=tVe({prop:r,onChange:i,defaultProp:s});return T.createElement(aVe,{scope:n,baseId:sVe(),value:d,onValueChange:u,orientation:o,dir:c,activationMode:l},T.createElement(t7.div,ci({dir:c,"data-orientation":o},f,{ref:t})))}),cVe="TabsList",fVe=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=vR(cVe,n),o=kie(n);return T.createElement(WHe,ci({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),T.createElement(t7.div,ci({role:"tablist","aria-orientation":s.orientation},i,{ref:t})))}),dVe="TabsTrigger",uVe=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,o=vR(dVe,n),a=kie(n),l=Sie(o.baseId,r),f=Cie(o.baseId,r),c=r===o.value;return T.createElement(GHe,ci({asChild:!0},a,{focusable:!i,active:c}),T.createElement(t7.button,ci({type:"button",role:"tab","aria-selected":c,"aria-controls":f,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:t,onMouseDown:kS(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:kS(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:kS(e.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!i&&d&&o.onValueChange(r)})})))}),hVe="TabsContent",pVe=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=e,a=vR(hVe,n),l=Sie(a.baseId,r),f=Cie(a.baseId,r),c=r===a.value,d=T.useRef(c);return T.useEffect(()=>{const u=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(u)},[]),T.createElement(xie,{present:i||c},({present:u})=>T.createElement(t7.div,ci({"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!u,id:f,tabIndex:0},o,{ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0}}),u&&s))});function Sie(e,t){return`${e}-trigger-${t}`}function Cie(e,t){return`${e}-content-${t}`}const Aie=lVe,Mie=fVe,Tie=uVe,Iie=pVe;var CS,tV;function mVe(){if(tV)return CS;tV=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof wu=="object"&&wu&&wu.Object===Object&&wu,f=typeof self=="object"&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,u=d.toString,h=Math.max,g=Math.min,y=function(){return c.Date.now()};function U(M,S,A){var I,R,D,_,P,$,L=0,B=!1,V=!1,z=!0;if(typeof M!="function")throw new TypeError(e);S=k(S)||0,x(A)&&(B=!!A.leading,V="maxWait"in A,D=V?h(k(A.maxWait)||0,S):D,z="trailing"in A?!!A.trailing:z);function G(ce){var ie=I,we=R;return I=R=void 0,L=ce,_=M.apply(we,ie),_}function W(ce){return L=ce,P=setTimeout(q,S),B?G(ce):_}function F(ce){var ie=ce-$,we=ce-L,Ee=S-ie;return V?g(Ee,D-we):Ee}function K(ce){var ie=ce-$,we=ce-L;return $===void 0||ie>=S||ie<0||V&&we>=D}function q(){var ce=y();if(K(ce))return Y(ce);P=setTimeout(q,F(ce))}function Y(ce){return P=void 0,z&&I?G(ce):(I=R=void 0,_)}function ae(){P!==void 0&&clearTimeout(P),L=0,I=$=R=P=void 0}function ge(){return P===void 0?_:Y(y())}function he(){var ce=y(),ie=K(ce);if(I=arguments,R=this,$=ce,ie){if(P===void 0)return W($);if(V)return P=setTimeout(q,S),G($)}return P===void 0&&(P=setTimeout(q,S)),_}return he.cancel=ae,he.flush=ge,he}function x(M){var S=typeof M;return!!M&&(S=="object"||S=="function")}function v(M){return!!M&&typeof M=="object"}function E(M){return typeof M=="symbol"||v(M)&&u.call(M)==n}function k(M){if(typeof M=="number")return M;if(E(M))return t;if(x(M)){var S=typeof M.valueOf=="function"?M.valueOf():M;M=x(S)?S+"":S}if(typeof M!="string")return M===0?M:+M;M=M.replace(r,"");var A=s.test(M);return A||o.test(M)?a(M.slice(2),A?2:8):i.test(M)?t:+M}return CS=U,CS}var gVe=mVe();const bVe=Na(gVe);function yVe(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var UVe={};yVe(UVe,"LaserPointer",()=>c9);function Sr([e,t,n],[r,i,s]){return[e+r,t+i,n+s]}function X5([e,t,n],[r,i,s]){return[e-r,t-i,n-s]}function Wr([e,t,n],r){return[e*r,t*r,n*r]}function Ep([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function qi([e,t,n],r){return[Math.cos(r)*e-Math.sin(r)*t,Math.sin(r)*e+Math.cos(r)*t,n]}function xVe(e,t,n){return Sr(e,Wr(X5(t,e),n))}function nV(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function rV(e){return Math.atan2(Math.sin(e),Math.cos(e))}function iV([e,t]){return Math.sqrt(e**2+t**2)}function bm([e,t],[n,r]){return Math.sqrt((n-e)**2+(r-t)**2)}function wVe(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=bm(e[n-1],e[n]);return t+=bm(e[e.length-2],e[e.length-1]),t}const vVe=(e,t,n)=>Math.max(t,Math.min(n,e));function EVe(e,t,n){const r=bm(t,n);if(r===0)return bm(e,t);const i=vVe(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r**2,0,1),s=[t[0]+i*(n[0]-t[0]),t[1]+i*(n[1]-t[1]),e[2]];return bm(s,e)}function l9(e,t){if(t===0||e.length<=2)return e;const n=e[0],r=e[e.length-1],[i,s]=e.reduce(([o,a],l,f)=>{const c=EVe(l,n,r);return c>o?[c,f]:[o,a]},[0,-1]);if(i>=t){const o=e[s];return[...l9([n,...e.slice(1,s),o],t).slice(0,-1),o,...l9([o,...e.slice(s,-1),r],t).slice(1)]}else return[n,r]}const Jd=class Jd{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},Jd.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=xVe(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),wVe(this.tailPoints)>Jd.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,r,i,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:r,totalLength:i})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=l9(n,this.options.simplify));const r=n.length;if(r===0)return[];if(r===1){const A=n[0],I=this.getSize(t,A[2],0,r,0);if(I<.5)return[];const R=[];for(let D=0;D<=Math.PI*2;D+=Math.PI/16)R.push(Sr(A,Wr(qi([1,0,0],D),I)));return R.push(Sr(A,Wr([1,0,0],this.getSize(t,A[2],0,r,0)))),R}if(r===2){const A=n[0],I=n[1],R=this.getSize(t,A[2],0,r,0),D=this.getSize(t,I[2],0,r,0);if(R<.5||D<.5)return[];const _=[],P=nV(A,[A[0],A[1]-100,A[2]],I);for(let $=P;$<=Math.PI+P;$+=Math.PI/16)_.push(Sr(A,Wr(qi([1,0,0],$),R)));for(let $=Math.PI+P;$<=Math.PI*2+P;$+=Math.PI/16)_.push(Sr(I,Wr(qi([1,0,0],$),D)));return _.push(_[0]),_}const i=[],s=[];let o=0,a=0,l=0,f=0;for(let A=1;A<r-1;A++){const I=n[A-1],R=n[A],D=n[A+1];let _=R[2];const P=bm(I,R);f+=P,o=a+(P-a)*.2;const $=this.getSize(t,_,A,r,f);if($===0){l=A+1;continue}const L=Ep(X5(I,R)),B=Ep(X5(D,R)),V=qi(L,Math.PI/2),z=qi(L,-Math.PI/2),G=qi(B,Math.PI/2),W=qi(B,-Math.PI/2),F=Sr(R,Wr(V,$)),K=Sr(R,Wr(z,$)),q=Sr(R,Wr(G,$)),Y=Sr(R,Wr(W,$)),ae=Sr(V,W),ge=Sr(z,G),he=Sr(R,Wr(iV(ae)===0?L:Ep(ae),$)),ce=Sr(R,Wr(iV(ge)===0?B:Ep(ge),$)),ie=rV(nV(R,I,D)),we=Jd.constants.cornerDetectionMaxAngle/180*Math.PI*Jd.constants.cornerDetectionVariance(o);if(Math.abs(ie)<we){const Ee=Math.abs(rV(Math.PI-ie));if(Ee===0)continue;if(ie<0){s.push(K,ce);for(let _e=0;_e<=Ee;_e+=Ee/4)i.push(Sr(R,qi(Wr(V,$),_e)));for(let _e=Ee;_e>=0;_e-=Ee/4)s.push(Sr(R,qi(Wr(V,$),_e)));s.push(ce,q)}else{i.push(F,he);for(let _e=0;_e<=Ee;_e+=Ee/4)s.push(Sr(R,qi(Wr(V,-$),-_e)));for(let _e=Ee;_e>=0;_e-=Ee/4)i.push(Sr(R,qi(Wr(V,-$),-_e)));i.push(he,Y)}}else i.push(he),s.push(ce);a=o}if(l>=r-2)if(this.options.keepHead){const A=n[r-1],I=[];for(let R=0;R<=Math.PI*2;R+=Math.PI/16)I.push(Sr(A,Wr(qi([1,0,0],R),this.options.size)));return I.push(Sr(A,Wr([1,0,0],this.options.size))),I}else return[];const c=n[l],d=n[l+1],u=n[r-2],h=n[r-1],g=Ep(X5(d,c)),y=Ep(X5(u,h)),U=qi(g,-Math.PI/2),x=qi(y,Math.PI/2),v=this.getSize(t,c[2],0,r,0),E=[],k=this.options.keepHead?this.options.size:this.getSize(t,u[2],r-2,r,f),M=[];if(v>1){for(let A=0;A<=Math.PI;A+=Math.PI/16)E.unshift(Sr(c,qi(Wr(U,v),-A)));E.unshift(Sr(c,Wr(U,-v)))}else E.push(c);for(let A=0;A<=Math.PI*3;A+=Math.PI/16)M.push(Sr(h,qi(Wr(x,-k),-A)));const S=[...E,...i,...M.reverse(),...s.reverse()];return E.length>0&&S.push(E[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?l9(S,this.options.simplify):S}};Jd.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},Jd.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let c9=Jd;var Nie=ure(),{useAtom:Ur,useSetAtom:n7,useAtomValue:Rie,useStore:hqe}=Nie,kVe=Nie.Provider,ml=oR(),SVe=oEe({"./locales/ar-SA.json":()=>qe(()=>import("./ar-SA-G6X2FPQ2-BTNQI0Tm.js"),[]),"./locales/az-AZ.json":()=>qe(()=>import("./az-AZ-76LH7QW2-Dh-JFTkr.js"),[]),"./locales/bg-BG.json":()=>qe(()=>import("./bg-BG-XCXSNQG7-CDmZqWJm.js"),[]),"./locales/bn-BD.json":()=>qe(()=>import("./bn-BD-2XOGV67Q-ywbReIS_.js"),[]),"./locales/ca-ES.json":()=>qe(()=>import("./ca-ES-6MX7JW3Y-C9e9igGT.js"),[]),"./locales/cs-CZ.json":()=>qe(()=>import("./cs-CZ-2BRQDIVT-C8WYocyY.js"),[]),"./locales/da-DK.json":()=>qe(()=>import("./da-DK-5WZEPLOC-Ki80HkPi.js"),[]),"./locales/de-DE.json":()=>qe(()=>import("./de-DE-XR44H4JA-K2vHUjhd.js"),[]),"./locales/el-GR.json":()=>qe(()=>import("./el-GR-BZB4AONW-BRBfzuT_.js"),[]),"./locales/en.json":()=>qe(()=>Promise.resolve().then(()=>YZe),void 0),"./locales/es-ES.json":()=>qe(()=>import("./es-ES-U4NZUMDT-CWH4YrkB.js"),[]),"./locales/eu-ES.json":()=>qe(()=>import("./eu-ES-A7QVB2H4-tkEf-cDF.js"),[]),"./locales/fa-IR.json":()=>qe(()=>import("./fa-IR-HGAKTJCU-BIreod9y.js"),[]),"./locales/fi-FI.json":()=>qe(()=>import("./fi-FI-Z5N7JZ37-MPIWcqAv.js"),[]),"./locales/fr-FR.json":()=>qe(()=>import("./fr-FR-RHASNOE6-CclDNPyq.js"),[]),"./locales/gl-ES.json":()=>qe(()=>import("./gl-ES-HMX3MZ6V-BdKjxBAz.js"),[]),"./locales/he-IL.json":()=>qe(()=>import("./he-IL-6SHJWFNN-Dik5mPGv.js"),[]),"./locales/hi-IN.json":()=>qe(()=>import("./hi-IN-IWLTKZ5I-AcjDss9F.js"),[]),"./locales/hu-HU.json":()=>qe(()=>import("./hu-HU-A5ZG7DT2-BiEJTVn_.js"),[]),"./locales/id-ID.json":()=>qe(()=>import("./id-ID-SAP4L64H-arFYUwxH.js"),[]),"./locales/it-IT.json":()=>qe(()=>import("./it-IT-JPQ66NNP-CFxnD3JB.js"),[]),"./locales/ja-JP.json":()=>qe(()=>import("./ja-JP-DBVTYXUO-DSSXVjPq.js"),[]),"./locales/kaa.json":()=>qe(()=>import("./kaa-6HZHGXH3-C-w43OFW.js"),[]),"./locales/kab-KAB.json":()=>qe(()=>import("./kab-KAB-ZGHBKWFO-DGhkqr2k.js"),[]),"./locales/kk-KZ.json":()=>qe(()=>import("./kk-KZ-P5N5QNE5-0vbwjwUg.js"),[]),"./locales/km-KH.json":()=>qe(()=>import("./km-KH-HSX4SM5Z--xDshwBZ.js"),[]),"./locales/ko-KR.json":()=>qe(()=>import("./ko-KR-MTYHY66A-DMjbLccr.js"),[]),"./locales/ku-TR.json":()=>qe(()=>import("./ku-TR-6OUDTVRD-BUT0F7jm.js"),[]),"./locales/lt-LT.json":()=>qe(()=>import("./lt-LT-XHIRWOB4-w4JE1E29.js"),[]),"./locales/lv-LV.json":()=>qe(()=>import("./lv-LV-5QDEKY6T-BsNRuEGi.js"),[]),"./locales/mr-IN.json":()=>qe(()=>import("./mr-IN-CRQNXWMA-DlQot_be.js"),[]),"./locales/my-MM.json":()=>qe(()=>import("./my-MM-5M5IBNSE-BwbDe4aG.js"),[]),"./locales/nb-NO.json":()=>qe(()=>import("./nb-NO-T6EIAALU-C5gdA2V_.js"),[]),"./locales/nl-NL.json":()=>qe(()=>import("./nl-NL-IS3SIHDZ-DKEreQQv.js"),[]),"./locales/nn-NO.json":()=>qe(()=>import("./nn-NO-6E72VCQL-aT4_Dap8.js"),[]),"./locales/oc-FR.json":()=>qe(()=>import("./oc-FR-POXYY2M6-Bz--6ity.js"),[]),"./locales/pa-IN.json":()=>qe(()=>import("./pa-IN-N4M65BXN-DNevl-LW.js"),[]),"./locales/percentages.json":()=>qe(()=>Promise.resolve().then(()=>ZZe),void 0),"./locales/pl-PL.json":()=>qe(()=>import("./pl-PL-T2D74RX3-D5Bck_TO.js"),[]),"./locales/pt-BR.json":()=>qe(()=>import("./pt-BR-5N22H2LF-B2p-yifK.js"),[]),"./locales/pt-PT.json":()=>qe(()=>import("./pt-PT-UZXXM6DQ-cuCstADg.js"),[]),"./locales/ro-RO.json":()=>qe(()=>import("./ro-RO-JPDTUUEW-tC984-57.js"),[]),"./locales/ru-RU.json":()=>qe(()=>import("./ru-RU-B4JR7IUQ-Cs2-cMl-.js"),[]),"./locales/si-LK.json":()=>qe(()=>import("./si-LK-N5RQ5JYF-a4p6IMkd.js"),[]),"./locales/sk-SK.json":()=>qe(()=>import("./sk-SK-C5VTKIMK-VKc2TVO_.js"),[]),"./locales/sl-SI.json":()=>qe(()=>import("./sl-SI-NN7IZMDC-DbAm1O9L.js"),[]),"./locales/sv-SE.json":()=>qe(()=>import("./sv-SE-XGPEYMSR-BJlP_6DM.js"),[]),"./locales/ta-IN.json":()=>qe(()=>import("./ta-IN-2NMHFXQM-C9ZkpS9x.js"),[]),"./locales/th-TH.json":()=>qe(()=>import("./th-TH-HPSO5L25-BGQN0yAt.js"),[]),"./locales/tr-TR.json":()=>qe(()=>import("./tr-TR-DEFEU3FU-i7CZUsNV.js"),[]),"./locales/uk-UA.json":()=>qe(()=>import("./uk-UA-QMV73CPH-ktxAI3tz.js"),[]),"./locales/vi-VN.json":()=>qe(()=>import("./vi-VN-M7AON7JQ-CAaIdrcQ.js"),[]),"./locales/zh-CN.json":()=>qe(()=>import("./zh-CN-LNUGB5OW-VwihBlIg.js"),[]),"./locales/zh-HK.json":()=>qe(()=>import("./zh-HK-E62DVLB3-DoQeN3HU.js"),[]),"./locales/zh-TW.json":()=>qe(()=>import("./zh-TW-RAJ6MFWO-dY2Ufo8K.js"),[])}),CVe=85,o6={code:"en",label:"English"},ER=[o6,...[{code:"ar-SA",label:"",rtl:!0},{code:"bg-BG",label:""},{code:"ca-ES",label:"Catal"},{code:"cs-CZ",label:"esky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:""},{code:"es-ES",label:"Espaol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Franais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"",rtl:!0},{code:"hi-IN",label:""},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:""},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:" "},{code:"ko-KR",label:""},{code:"ku-TR",label:"Kurd"},{code:"lt-LT",label:"Lietuvi"},{code:"lv-LV",label:"Latvieu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokml"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:""},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugus Brasileiro"},{code:"pt-PT",label:"Portugus"},{code:"ro-RO",label:"Romn"},{code:"ru-RU",label:""},{code:"sk-SK",label:"Slovenina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenina"},{code:"tr-TR",label:"Trke"},{code:"uk-UA",label:""},{code:"zh-CN",label:""},{code:"zh-TW",label:""},{code:"vi-VN",label:"Ting Vit"},{code:"mr-IN",label:""}].filter(e=>ore[e.code]>=CVe).sort((e,t)=>e.label>t.label?1:-1)],f9="__test__";It.DEV&&ER.unshift({code:f9,label:"test language"},{code:`${f9}.rtl`,label:"test language (rtl)",rtl:!0});var qp=o6,ex={},_ie=async e=>{if(qp=e,document.documentElement.dir=qp.rtl?"rtl":"ltr",document.documentElement.lang=qp.code,e.code.startsWith(f9))ex={};else try{ex=await SVe(`./locales/${qp.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),ex=sR}ml.set(Pie,e.code)},Pb=()=>qp,sV=(e,t)=>{for(let n=0;n<t.length;++n){let r=t[n];if(e[r]===void 0)return;e=e[r]}if(typeof e=="string")return e},H=(e,t,n)=>{if(qp.code.startsWith(f9))return`[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]`;let r=e.split("."),i=sV(ex,r)||sV(sR,r)||n;if(i===void 0){let s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(let s in t)i=i.replace(`{{${s}}}`,String(t[s]));return i},Pie=Mi(o6.code),ms=()=>{let e=Rie(Pie);return{t:H,langCode:e}},AVe=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:r=""})=>{let i=-(Ne.useRef(Date.now()).current%1600);return m.jsx("div",{className:`Spinner ${r}`,children:m.jsx("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${i}ms`:0},children:m.jsx("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Jf=AVe,Die=({delay:e,theme:t})=>{let[n,r]=T.useState(!!e);return T.useEffect(()=>{if(!e)return;let i=setTimeout(()=>{r(!1)},e);return()=>clearTimeout(i)},[e]),n?null:m.jsxs("div",{className:Ye("LoadingMessage",{"LoadingMessage--dark":t===Ft.DARK}),children:[m.jsx("div",{children:m.jsx(Jf,{})}),m.jsx("div",{className:"LoadingMessage-text",children:H("labels.loadingScene")})]})},MVe=e=>{let[t,n]=T.useState(!0);return T.useEffect(()=>{let r=async()=>{await _ie(i),n(!1)},i=ER.find(s=>s.code===e.langCode)||o6;r()},[e.langCode]),t?m.jsx(Die,{theme:e.theme}):e.children},Xt=Ne.forwardRef(({size:e="medium",visible:t=!0,className:n="",...r},i)=>{let{id:s}=jc(),o=Ne.useRef(null);Ne.useImperativeHandle(i,()=>o.current);let a=`ToolIcon_size_${e}`,[l,f]=T.useState(!1),c=T.useRef(!0),d=async h=>{var y;let g="onClick"in r&&((y=r.onClick)==null?void 0:y.call(r,h));if(ky(g))try{f(!0),await g}catch(U){if(U instanceof Iw)console.warn(U);else throw U}finally{c.current&&f(!1)}};T.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]);let u=T.useRef(null);if(r.type==="button"||r.type==="icon"||r.type==="submit"){let h=r.type==="icon"?"button":r.type;return m.jsxs("button",{className:Ye("ToolIcon_type_button",a,n,t&&!r.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!r.hidden,"ToolIcon--selected":r.selected,"ToolIcon--plain":r.type==="icon"}),style:r.style,"data-testid":r["data-testid"],hidden:r.hidden,title:r.title,"aria-label":r["aria-label"],type:h,onClick:d,ref:o,disabled:l||r.isLoading||!!r.disabled,children:[(r.icon||r.label)&&m.jsxs("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!r.disabled,children:[r.icon||r.label,r.keyBindingLabel&&m.jsx("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel}),r.isLoading&&m.jsx(Jf,{})]}),r.showAriaLabel&&m.jsxs("div",{className:"ToolIcon__label",children:[r["aria-label"]," ",l&&m.jsx(Jf,{})]}),r.children]})}return m.jsxs("label",{className:Ye("ToolIcon",n),title:r.title,onPointerDown:h=>{var g;u.current=h.pointerType||null,(g=r.onPointerDown)==null||g.call(r,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{u.current=null})},children:[m.jsx("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:r.name,"aria-label":r["aria-label"],"aria-keyshortcuts":r["aria-keyshortcuts"],"data-testid":r["data-testid"],id:`${s}-${r.id}`,onChange:()=>{var h;(h=r.onChange)==null||h.call(r,{pointerType:u.current})},checked:r.checked,ref:o}),m.jsxs("div",{className:"ToolIcon__icon",children:[r.icon,r.keyBindingLabel&&m.jsx("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel})]})]})});Xt.displayName="ToolButton";var TVe=(e,t,n)=>{let r=new Set(Nt(e.filter(c=>ht(c)),t).map(c=>c.id)),i={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(let c of r){let d=Rc(e,c);for(let u of d)if(!o.has(u.id)){if(Hn(u)){let h=Ai(u,s);h&&(i[h.id]=!0)}else i[u.id]=!0;o.add(u.id)}}let a=!0,l=e.map(c=>{if(t.selectedElementIds[c.id]){let d=Hn(c)?Ai(c,s):null;return c.frameId&&r.has(c.frameId)?(a=!1,i[c.id]=!0,c):d!=null&&d.frameId&&r.has(d==null?void 0:d.frameId)?c:(c.boundElements&&c.boundElements.forEach(u=>{var g,y;let h=n.scene.getNonDeletedElementsMap().get(u.id);h&&Ge(h)&&(xe(h,{startBinding:c.id===((g=h.startBinding)==null?void 0:g.elementId)?null:h.startBinding,endBinding:c.id===((y=h.endBinding)==null?void 0:y.elementId)?null:h.endBinding}),xe(h,{points:h.points}))}),Ct(c,{isDeleted:!0}))}return c.frameId&&r.has(c.frameId)?(a=!1,Hn(c)||(i[c.id]=!0),Ct(c,{frameId:null})):Hn(c)&&t.selectedElementIds[c.containerId]?Ct(c,{isDeleted:!0}):c}),f=t.editingGroupId;if(a&&t.editingGroupId){let c=Fn(l,t.editingGroupId).filter(d=>!d.isDeleted);if(c.length>1)c[0]&&(i[c[0].id]=!0);else{f=null,c[0]&&(i[c[0].id]=!0);let d=c[0];if(d){let u=d.groupIds.findIndex(g=>g===t.editingGroupId),h=d.groupIds[u+1];if(h){let g=Fn(l,h).filter(y=>!y.isDeleted);g.length>1&&(f=h,g.forEach(y=>{i[y.id]=!0}))}}}}return{elements:l,appState:{...t,...vs({selectedElementIds:i,editingGroupId:f},l,t,null)}}},oV=(e,t)=>{if(e.editingGroupId){let n=Fn(Nn(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},Lie=je({name:"deleteSelectedElements",label:"labels.delete",icon:p1,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,r)=>{if(t.editingLinearElement){let{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:f}=t.editingLinearElement,c=r.scene.getNonDeletedElementsMap(),d=We.getElement(o,c);if(!d||a==null)return!1;if(d.points.length<2){let h=e.map(y=>y.id===d.id?Ct(y,{isDeleted:!0}):y),g=oV(t,h);return{elements:h,appState:{...g,editingLinearElement:null},captureUpdate:pe.IMMEDIATELY}}let u={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:f};return We.deletePoints(d,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...u,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:pe.IMMEDIATELY}}let{elements:i,appState:s}=TVe(e,t,r);return Jee(i,i.filter(o=>o.isDeleted)),s=oV(s,i),{elements:i,appState:{...s,activeTool:Dr(t,{type:"selection"}),multiElement:null,activeEmbeddable:null},captureUpdate:Qr(Nn(e),t)?pe.IMMEDIATELY:pe.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===J.BACKSPACE||e.key===J.DELETE)&&!e[J.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Xt,{type:"button",icon:p1,title:H("labels.delete"),"aria-label":H("labels.delete"),onClick:()=>n(null),visible:Qr(Nn(e),t)})}),DM=(e,t)=>e.frameId===t||e.id===t,Oie=(e,t,n)=>{let r=[],i=[],s=null,o=-1,a=mt(n||Nt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){let l=e[o];a.get(l.id)?(i.length&&(r=r.concat(i),i=[]),r.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,i.push(o)):i=[]}return r},IVe=e=>{let t=0;return e.reduce((n,r,i)=>(i>0&&e[i-1]!==r-1&&(t=++t),(n[t]||(n[t]=[])).push(r),n),[])},aV=(e,t,n)=>{var r,i;if("containerId"in e&&e.containerId){let s=Zf.getScene(e).getElement(e.containerId);if(s)return n==="left"?Math.min(t.indexOf(s),t.indexOf(e)):Math.max(t.indexOf(s),t.indexOf(e))}else{let s=(i=(r=e.boundElements)==null?void 0:r.find(o=>o.type!=="arrow"))==null?void 0:i.id;if(s){let o=Zf.getScene(e).getElement(s);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}}},NVe=(e,t)=>{let n=-1,r=-1;return e.forEach((i,s)=>{DM(i,t)&&(n===-1&&(n=s),r=s)}),n===-1?[]:e.slice(n,r+1)},RVe=(e,t,n,r,i)=>{let s=t[n],o=d=>d.isDeleted?!1:i?d.frameId===i:e.editingGroupId?d.groupIds.includes(e.editingGroupId):!0,a=r==="left"?H0(t,d=>o(d),Math.max(0,n-1)):BJ(t,d=>o(d),n+1),l=t[a];if(!l)return-1;if(e.editingGroupId){if((s==null?void 0:s.groupIds.join(""))===(l==null?void 0:l.groupIds.join("")))return aV(l,t,r)??a;if(!(l!=null&&l.groupIds.includes(e.editingGroupId)))return-1}if(!i&&(l.frameId||ht(l))){let d=NVe(t,l.frameId||l.id);return r==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1])}if(!l.groupIds.length)return aV(l,t,r)??a;let f=e.editingGroupId?l.groupIds[l.groupIds.indexOf(e.editingGroupId)-1]:l.groupIds[l.groupIds.length-1],c=Fn(t,f);return c.length?r==="left"?t.indexOf(c[0]):t.indexOf(c[c.length-1]):a},jie=(e,t)=>t.reduce((n,r)=>{let i=e[r];return n.set(i.id,i),n},new Map),Bie=(e,t,n)=>{let r=Oie(e,t),i=jie(e,r),s=IVe(r);n==="right"&&(s=s.reverse());let o=new Set(r.filter(a=>ht(e[a])).map(a=>e[a].id));return s.forEach((a,l)=>{var v;let f=a[0],c=a[a.length-1],d=n==="left"?f:c,u=a.some(E=>{let k=e[E];return k.frameId&&o.has(k.frameId)})?null:(v=e[d])==null?void 0:v.frameId,h=RVe(t,e,d,n,u);if(h===-1||d===h)return;let g=n==="left"?e.slice(0,h):e.slice(0,f),y=e.slice(f,c+1),U=n==="left"?e.slice(h,f):e.slice(c+1,h+1),x=n==="left"?e.slice(c+1):e.slice(h+1);e=n==="left"?[...g,...y,...U,...x]:[...g,...U,...y,...x]}),Nc(e,i),e},Fie=(e,t,n,r,i)=>{let s=Oie(e,t,i),o=jie(e,s),a=[],l,f;if(n==="left"){if(r)l=BJ(e,g=>DM(g,r));else if(t.editingGroupId){let g=Fn(e,t.editingGroupId);if(!g.length)return e;l=e.indexOf(g[0])}else l=0;f=s[s.length-1]}else{if(r)f=H0(e,g=>DM(g,r));else if(t.editingGroupId){let g=Fn(e,t.editingGroupId);if(!g.length)return e;f=e.indexOf(g[g.length-1])}else f=e.length-1;l=s[0]}l===-1&&(l=0);for(let g=l;g<f+1;g++)s.includes(g)||a.push(e[g]);let c=Array.from(o.values()),d=e.slice(0,l),u=e.slice(f+1),h=n==="left"?[...d,...c,...a,...u]:[...d,...a,...c,...u];return Nc(h,o),h};function zie(e,t,n,r){let i=mt(Nt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(let f of e)i.has(f.id)&&ht(f)&&o.add(f.id);for(let f of e)if(i.has(f.id))if(ht(f)||f.frameId&&o.has(f.frameId))s.regularElements.push(f);else if(!f.frameId)s.regularElements.push(f);else{let c=s.frameChildren.get(f.frameId)||[];c.push(f),s.frameChildren.set(f.frameId,c)}let a=e,l=Array.from(s.frameChildren.entries());for(let[f,c]of l)a=r(e,t,n,f,c);return r(a,t,n,null,s.regularElements)}var _Ve=(e,t)=>Bie(e,t,"left"),PVe=(e,t)=>Bie(e,t,"right"),DVe=(e,t)=>zie(e,t,"left",Fie),LVe=(e,t)=>zie(e,t,"right",Fie),OVe=je({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:Kz,trackEvent:{category:"element"},perform:(e,t)=>({elements:_Ve(e,t),appState:t,captureUpdate:pe.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[J.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Jt.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${H("labels.sendBackward")}  ${Ue("CtrlOrCmd+[")}`,children:Kz})}),jVe=je({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:Xz,trackEvent:{category:"element"},perform:(e,t)=>({elements:PVe(e,t),appState:t,captureUpdate:pe.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[J.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Jt.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${H("labels.bringForward")}  ${Ue("CtrlOrCmd+]")}`,children:Xz})}),BVe=je({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:Zz,trackEvent:{category:"element"},perform:(e,t)=>({elements:DVe(e,t),appState:t,captureUpdate:pe.IMMEDIATELY}),keyTest:e=>Cc?e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.BRACKET_LEFT:e[J.CTRL_OR_CMD]&&e.shiftKey&&e.code===Jt.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${H("labels.sendToBack")}  ${Ue(Cc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:Zz})}),FVe=je({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:Yz,trackEvent:{category:"element"},perform:(e,t)=>({elements:LVe(e,t),appState:t,captureUpdate:pe.IMMEDIATELY}),keyTest:e=>Cc?e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.BRACKET_RIGHT:e[J.CTRL_OR_CMD]&&e.shiftKey&&e.code===Jt.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${H("labels.bringToFront")}  ${Ue(Cc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:Yz})}),zVe=je({name:"selectAll",label:"labels.selectAll",icon:BIe,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,r)=>{if(t.editingLinearElement)return!1;let i=e.filter(s=>!s.isDeleted&&!(Ve(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...vs({editingGroupId:null,selectedElementIds:i},Nn(e),t,r),selectedLinearElement:Object.keys(i).length===1&&wt(e[0])?new We(e[0]):null},captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.A}),$Ve=e=>{let t=e.slice(),n=new Set,r=s=>{var f,c,d;let o=(c=(f=s[0])==null?void 0:f.groupIds)==null?void 0:c.join(""),a=[s[0]],l=[];for(let u of s.slice(1))((d=u.groupIds)==null?void 0:d.join(""))===o?a.push(u):l.push(u);return l.length?[...a,...r(l)]:a},i=new Map;return t.forEach((s,o)=>{var a;if(!i.has(s.id))if((a=s.groupIds)!=null&&a.length){let l=s.groupIds[s.groupIds.length-1],f=t.slice(o).filter(c=>{var u;let d=(u=c==null?void 0:c.groupIds)==null?void 0:u.some(h=>h===l);return d&&i.set(c.id,!0),d});for(let c of r(f))n.add(c)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},HVe=e=>{let t=$Me(e),n=e.slice(),r=new Set;return n.forEach((i,s)=>{var o,a,l;i&&((o=i.boundElements)!=null&&o.length?(r.add(i),n[s]=null,i.boundElements.forEach(f=>{let c=t.get(f.id);c&&f.type==="text"&&(r.add(c[0]),n[c[1]]=null)})):i.type==="text"&&i.containerId&&((l=(a=t.get(i.containerId))==null?void 0:a[0].boundElements)!=null&&l.find(f=>f.id===i.id))||(r.add(i),n[s]=null))}),r.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...r]},VVe=e=>HVe($Ve(e)),WVe=je({name:"duplicateSelection",label:"labels.duplicateSelection",icon:YA,trackEvent:{category:"element"},perform:(e,t,n,r)=>{if(t.editingLinearElement)try{let s=We.duplicateSelectedPoints(t,r.scene.getNonDeletedElementsMap());return{elements:e,appState:s,captureUpdate:pe.IMMEDIATELY}}catch{return!1}let i=GVe(e,t);if(r.props.onDuplicate&&i.elements){let s=r.props.onDuplicate(i.elements,e);s&&(i.elements=s)}return{...i,captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.D,PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Xt,{type:"button",icon:YA,title:`${H("labels.duplicateSelection")}  ${Ue("CtrlOrCmd+D")}`,"aria-label":H("labels.duplicateSelection"),onClick:()=>n(null),visible:Qr(Nn(e),t)})}),GVe=(e,t)=>{let n=new Map,r=[],i=[],s=new Map,o=new Map,a=mt(e),l=y=>{let U=zz(y).reduce((x,v)=>{if(c.has(v.id))return x;c.set(v.id,!0);let E=Ute(t.editingGroupId,n,v,{x:v.x+I4/2,y:v.y+I4/2});return c.set(E.id,!0),o.set(E.id,E),s.set(v.id,E.id),i.push(v),r.push(E),x.push(E),x},[]);return Array.isArray(y)?U:U[0]||null};e=VVe(e);let f=mt(Nt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),c=new Map,d=e.slice(),u=(y,U)=>{fs(y!==-1,"targetIndex === -1 "),!(!Array.isArray(U)&&!U)&&d.splice(y+1,0,...zz(U))},h=new Set(e.filter(y=>f.has(y.id)&&ht(y)).map(y=>y.id));for(let y of e){if(c.has(y.id)||!f.has(y.id))continue;let U=ite(t,y);if(U){let x=Fn(e,U).flatMap(E=>ht(E)?[...Rc(e,E.id),E]:[E]),v=H0(d,E=>{var k;return(k=E.groupIds)==null?void 0:k.includes(U)});u(v,l(x));continue}if(!(y.frameId&&h.has(y.frameId))){if(ht(y)){let x=y.id,v=Rc(e,x),E=H0(d,k=>k.frameId===x||k.id===x);u(E,l([...v,y]));continue}if(Ta(y)){let x=At(y,a),v=H0(d,E=>E.id===y.id||"containerId"in E&&E.containerId===y.id);x?u(v,l([y,x])):u(v,l(y));continue}if(Hn(y)){let x=Ai(y,a),v=H0(d,E=>E.id===y.id||E.id===(x==null?void 0:x.id));x?u(v,l([x,y])):u(v,l(y));continue}u(H0(d,x=>x.id===y.id),l(y))}}cte(d,i,s),Qee(d,i,s),Yte(d,i,s);let g=ZN(r);return{elements:d,appState:{...t,...vs({editingGroupId:t.editingGroupId,selectedElementIds:g.reduce((y,U)=>(Hn(U)||(y[U.id]=!0),y),{})},Nn(d),t,null)}}},XVe=new Set(["command_palette","export"]),Pn=(e,t,n,r)=>{try{if(typeof window>"u"||It.VITE_WORKER_ID||It.VITE_APP_ENABLE_TRACKING!=="true"||!XVe.has(e)||It.DEV)return;It.PROD||console.info("trackEvent",{category:e,action:t,label:n,value:r}),window.sa_event&&window.sa_event(t,{category:e,label:n,value:r})}catch(i){console.error("error during analytics",i)}},$ie=T.forwardRef((e,t)=>{let{title:n,className:r,testId:i,active:s,standalone:o,icon:a,onClick:l}=e;return m.jsx("button",{type:"button",ref:t,title:n,"data-testid":i,className:Ye(r,{standalone:o,active:s}),onClick:l,children:a},n)}),Lc=e=>m.jsx("div",{className:"buttonList",children:e.options.map(t=>e.type==="button"?m.jsx($ie,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):m.jsxs("label",{className:Ye({active:e.value===t.value}),title:t.text,children:[m.jsx("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))}),KVe=({onChange:e,type:t,activeColor:n,topPicks:r})=>{let i;return t==="elementStroke"&&(i=wJ),t==="elementBackground"&&(i=vJ),t==="canvasBackground"&&(i=EJ),r&&(i=r),i?m.jsx("div",{className:"color-picker__top-picks",children:i.map(s=>m.jsx("button",{className:Ye("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:m.jsx("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},Hie=()=>m.jsx("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),r7=({palette:e,color:t})=>{for(let[n,r]of Object.entries(e))if(Array.isArray(r)){let i=r.indexOf(t);if(i>-1)return{colorName:n,shade:i}}else if(r===t)return{colorName:n,shade:null};return null},LM=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),Vie=({color:e,palette:t})=>!Object.values(t).flat().includes(e),YVe=(e,t,n)=>{let r={elementBackground:"backgroundColor",elementStroke:"strokeColor"},i=e.filter(o=>{if(o.isDeleted)return!1;let a=o[r[t]];return Vie({color:a,palette:n})}),s=new Map;return i.forEach(o=>{let a=o[r[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,PAe)},a6=Mi(null),lV=(e,t,n)=>(e*299+t*587+n*114)/1e3>=160?"black":"white",ZVe=(e,t)=>{if(t){let s=new Option().style;if(s.color=e,s.color){let o=s.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),a=parseInt(o[0]),l=parseInt(o[1]),f=parseInt(o[2]);return lV(a,l,f)}}if(e==="transparent")return"black";let n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return lV(n,r,i)},qVe=({color:e,keyLabel:t,isCustomColor:n=!1,isShade:r=!1})=>m.jsxs("div",{className:"color-picker__button__hotkey-label",style:{color:ZVe(e,n)},children:[r&&"",t]}),kR=qVe,QVe=({hex:e,onChange:t,palette:n})=>{let r=r7({color:e||"transparent",palette:n}),[i,s]=Ur(a6),o=T.useRef(null);if(T.useEffect(()=>{o.current&&i==="shades"&&o.current.focus()},[r,i]),r){let{colorName:a,shade:l}=r,f=n[a];if(Array.isArray(f))return m.jsx("div",{className:"color-picker-content--default shades",children:f.map((c,d)=>m.jsxs("button",{ref:d===l&&i==="shades"?o:void 0,tabIndex:-1,type:"button",className:Ye("color-picker__button color-picker__button--large",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:c?{"--swatch-color":c}:void 0,onClick:()=>{t(c),s("shades")},children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(kR,{color:c,keyLabel:d+1,isShade:!0})]},d))})}return m.jsxs("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[m.jsx("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),m.jsx("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:H("colorPicker.noShades")})]})},JVe=({palette:e,color:t,onChange:n,label:r,activeShade:i})=>{let s=r7({color:t||"transparent",palette:e}),[o,a]=Ur(a6),l=T.useRef(null);return T.useEffect(()=>{l.current&&o==="baseColors"&&l.current.focus()},[s==null?void 0:s.colorName,o]),m.jsx("div",{className:"color-picker-content--default",children:Object.entries(e).map(([f,c],d)=>{let u=(Array.isArray(c)?c[i]:c)||"transparent",h=LM[d],g=H(`colors.${f.replace(/\d+/,"")}`,null,"");return m.jsxs("button",{ref:(s==null?void 0:s.colorName)===f?l:void 0,tabIndex:-1,type:"button",className:Ye("color-picker__button color-picker__button--large",{active:(s==null?void 0:s.colorName)===f,"is-transparent":u==="transparent"||!u}),onClick:()=>{n(u),a("baseColors")},title:`${g}${u.startsWith("#")?` ${u}`:""}  ${h}`,"aria-label":`${g}  ${h}`,style:{"--swatch-color":u},"data-testid":`color-${f}`,children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(kR,{color:u,keyLabel:h})]},f)})})},eWe=JVe,tWe=({colors:e,color:t,onChange:n,label:r})=>{let[i,s]=Ur(a6),o=T.useRef(null);return T.useEffect(()=>{o.current&&o.current.focus()},[t,i]),m.jsx("div",{className:"color-picker-content--default",children:e.map((a,l)=>m.jsxs("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:Ye("color-picker__button color-picker__button--large",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":r,style:{"--swatch-color":a},children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(kR,{color:a,keyLabel:l+1,isCustomColor:!0})]},l))})},AS=(e,t,n)=>{let r=Math.ceil(n/_p);switch(t=t??-1,e){case"ArrowLeft":{let i=t-1;return i<0?n-1:i}case"ArrowRight":return(t+1)%n;case"ArrowDown":{let i=t+_p;return i>=n?t%_p:i}case"ArrowUp":{let i=t-_p,s=i<0?_p*r+i:i;return s>=n?void 0:s}}},nWe=({e,colorObj:t,onChange:n,palette:r,customColors:i,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){let a=Number(e.code.slice(-1))-1;return n(r[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&i[Number(e.key)-1])return n(i[Number(e.key)-1]),s("custom"),!0;if(LM.includes(e.key)){let a=LM.indexOf(e.key),l=Object.keys(r)[a],f=r[l],c=Array.isArray(f)?f[o]:f;return n(c),s("baseColors"),!0}return!1},rWe=({event:e,activeColorPickerSection:t,palette:n,color:r,onChange:i,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:f,onEscape:c})=>{if(e[J.CTRL_OR_CMD])return!1;if(e.key===J.ESCAPE)return c(e),!0;if(e.key===J.ALT)return f(!0),!0;if(e.key===J.I)return f(),!0;let d=r7({color:r,palette:n});if(e.key===J.TAB){let u={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(u).reduce((v,[E,k])=>(k&&v.push(E),v),[]),g=h.indexOf(t),y=e.shiftKey?-1:1,U=g+y>h.length-1?0:g+y<0?h.length-1:g+y,x=h[U];return x&&o(x),x==="custom"?i(s[0]):x==="baseColors"&&(Object.entries(n).find(([v,E])=>Array.isArray(E)?E.includes(r):E===r?v:null)||i(Lt.black)),e.preventDefault(),e.stopPropagation(),!0}if(nWe({e,colorObj:d,onChange:i,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){let{shade:u}=d,h=AS(e.key,u,_p);if(h!==void 0)return i(n[d.colorName][h]),!0}if(t==="baseColors"&&d){let{colorName:u}=d,h=Object.keys(n),g=h.indexOf(u),y=AS(e.key,g,h.length);if(y!==void 0){let U=h[y],x=n[U];return i(Array.isArray(x)?x[l]:x),!0}}if(t==="custom"){let u=s.indexOf(r),h=AS(e.key,u,s.length);if(h!==void 0){let g=s[h];return i(g),!0}}return!1},iWe=({children:e})=>m.jsx("div",{className:"color-picker__heading",children:e}),tx=iWe,sWe=({color:e,onChange:t,label:n,type:r,elements:i,palette:s,updateData:o,children:a,onEyeDropperToggle:l,onEscape:f})=>{let[c]=Ne.useState(()=>r==="canvasBackground"?[]:YVe(i,r,s)),[d,u]=Ur(a6),h=r7({color:e,palette:s});T.useEffect(()=>{if(!d){let x=Vie({color:e,palette:s}),v=x&&!c.includes(e);u(v?"hex":x?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,s,u,h,c]);let[g,y]=T.useState((h==null?void 0:h.shade)??(r==="elementBackground"?z5:F5));T.useEffect(()=>{(h==null?void 0:h.shade)!=null&&y(h.shade);let x=v=>{v.key===J.ALT&&l(!1)};return document.addEventListener("keyup",x,{capture:!0}),()=>{document.removeEventListener("keyup",x,{capture:!0})}},[h,l]);let U=Ne.useRef(null);return m.jsx("div",{role:"dialog","aria-modal":"true","aria-label":H("labels.colorPicker"),children:m.jsxs("div",{ref:U,onKeyDown:x=>{rWe({event:x,activeColorPickerSection:d,palette:s,color:e,onChange:t,onEyeDropperToggle:l,customColors:c,setActiveColorPickerSection:u,updateData:o,activeShade:g,onEscape:f})&&(x.preventDefault(),x.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!c.length&&m.jsxs("div",{children:[m.jsx(tx,{children:H("colorPicker.mostUsedCustomColors")}),m.jsx(tWe,{colors:c,color:e,label:H("colorPicker.mostUsedCustomColors"),onChange:t})]}),m.jsxs("div",{children:[m.jsx(tx,{children:H("colorPicker.colors")}),m.jsx(eWe,{color:e,label:n,palette:s,onChange:t,activeShade:g})]}),m.jsxs("div",{children:[m.jsx(tx,{children:H("colorPicker.shades")}),m.jsx(QVe,{hex:e,onChange:t,palette:s})]}),a]})})},Wie=Ne.createContext(null),Ds=()=>Ne.useContext(Wie),Gie=e=>{let[t,n]=T.useState(null),r=di(),{theme:i}=Ds(),{container:s}=jc();return T.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",r.editor.isMobile),t.classList.toggle("theme--dark",i===Ft.DARK))},[t,i,r.editor.isMobile,e==null?void 0:e.className]),T.useLayoutEffect(()=>{let o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;let a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function SR(e,t,n){T.useEffect(()=>{function r(i){let s=i;if(!e.current)return;let o=n==null?void 0:n(s,e.current);if(o!==!0){if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}}return document.addEventListener("pointerdown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("pointerdown",r),document.removeEventListener("touchstart",r)}},[e,t,n])}var i7=e=>{let t=T.useRef(e);return Object.assign(t.current,e),t.current},s7=Mi(null),oWe=({onCancel:e,onChange:t,onSelect:n,colorPickerType:r})=>{let i=Gie({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=Ds(),o=u7(),a=Oc(),l=Nt(o,s),f=i7({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:c}=jc();T.useEffect(()=>{let u=d.current;if(!u||!a.canvas||!i)return;let h=!1,g=a.canvas.getContext("2d"),y=({clientX:S,clientY:A})=>{let I=g.getImageData((S-s.offsetLeft)*window.devicePixelRatio,(A-s.offsetTop)*window.devicePixelRatio,1,1).data;return BAe(I[0],I[1],I[2])},U=({clientX:S,clientY:A,altKey:I})=>{u.style.top=`${A+20}px`,u.style.left=`${S+20}px`;let R=y({clientX:S,clientY:A});h&&f.onChange(r,R,f.selectedElements,{altKey:I}),u.style.background=R},x=()=>{f.onCancel()},v=(S,A)=>{f.onSelect(S,A)},E=S=>{h=!0,S.stopImmediatePropagation()},k=S=>{h=!1,c==null||c.focus(),S.stopImmediatePropagation(),S.preventDefault(),v(y(S),S)},M=S=>{S.key===J.ESCAPE&&(S.preventDefault(),S.stopImmediatePropagation(),x())};return i.tabIndex=-1,i.focus(),U({clientX:f.app.lastViewportPosition.x,clientY:f.app.lastViewportPosition.y,altKey:!1}),i.addEventListener("keydown",M),i.addEventListener("pointerdown",E),i.addEventListener("pointerup",k),window.addEventListener("pointermove",U,{passive:!0}),window.addEventListener("blur",x),()=>{h=!1,i.removeEventListener("keydown",M),i.removeEventListener("pointerdown",E),i.removeEventListener("pointerup",k),window.removeEventListener("pointermove",U),window.removeEventListener("blur",x)}},[f,a.canvas,i,r,c,s.offsetLeft,s.offsetTop]);let d=T.useRef(null);return SR(d,()=>{e()},u=>!!u.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),i?ai.createPortal(m.jsx("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),i):null},aWe=({color:e,onChange:t,label:n,colorPickerType:r})=>{let i=di(),[s,o]=T.useState(e),[a,l]=Ur(a6);T.useEffect(()=>{o(e)},[e]);let f=T.useCallback(g=>{let y=g.toLowerCase(),U=lWe(y);U&&t(U),o(y)},[t]),c=T.useRef(null),d=T.useRef(null);T.useEffect(()=>{c.current&&c.current.focus()},[a]);let[u,h]=Ur(s7);return T.useEffect(()=>()=>{h(null)},[h]),m.jsxs("div",{className:"color-picker__input-label",children:[m.jsx("div",{className:"color-picker__input-hash",children:"#"}),m.jsx("input",{ref:a==="hex"?c:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:g=>{f(g.target.value)},value:(s||"").replace(/^#/,""),onBlur:()=>{o(e)},tabIndex:-1,onFocus:()=>l("hex"),onKeyDown:g=>{var y;g.key!==J.TAB&&(g.key===J.ESCAPE&&((y=d.current)==null||y.focus()),g.stopPropagation())}}),!i.editor.isMobile&&m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),m.jsx("div",{ref:d,className:Ye("excalidraw-eye-dropper-trigger",{selected:u}),onClick:()=>h(g=>g?null:{keepOpenOnAlt:!1,onSelect:y=>t(y),colorPickerType:r}),title:`${H("labels.eyeDropper")}  ${J.I.toLocaleUpperCase()} or ${Ue("Alt")} `,children:NIe})]})]})},xl=Ne.forwardRef(({children:e,padding:t,className:n,style:r},i)=>m.jsx("div",{className:Ye("Island",n),style:{"--padding":t,...r},ref:i,children:e})),Xie=Ne.forwardRef(({className:e,container:t,children:n,style:r,onClose:i,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},f)=>{let c=di();return m.jsx(Q$e,{container:t,children:m.jsxs(UR,{ref:f,className:Ye("focus-visible-none",e),"data-prevent-outside-click":!0,side:c.editor.isMobile&&!c.viewport.isLandscape?"bottom":"right",align:c.editor.isMobile&&!c.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!RMe(document.activeElement)&&t.focus(),i()},children:[m.jsx(xl,{padding:3,style:r,children:n}),m.jsx(fie,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),cV=e=>{let t=new Option().style;return t.color=e,!!t.color},lWe=e=>hl(e)?e:cV(`#${e}`)?`#${e}`:cV(e)?e:null,cWe=({type:e,color:t,onChange:n,label:r,elements:i,palette:s=Lt,updateData:o})=>{let{container:a}=jc(),[,l]=Ur(a6),[f,c]=Ur(s7),d=m.jsxs("div",{children:[m.jsx(tx,{children:H("colorPicker.hexCode")}),m.jsx(aWe,{color:t,label:r,onChange:g=>{n(g)},colorPickerType:e})]}),u=T.useRef(null),h=()=>{var g,y;(y=(g=u.current)==null?void 0:g.querySelector(".color-picker-content"))==null||y.focus()};return m.jsx(Xie,{container:a,style:{maxWidth:"13rem"},onFocusOutside:g=>{h(),g.preventDefault()},onPointerDownOutside:g=>{f&&g.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?m.jsx(sWe,{palette:s,color:t,onChange:g=>{n(g)},onEyeDropperToggle:g=>{c(y=>g?(y=y||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},y.keepOpenOnAlt=!0,y):g===!1||y?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:g=>{f?c(null):o({openPopup:null})},label:r,type:e,elements:i,updateData:o,children:d}):d})},fWe=({label:e,color:t,type:n})=>m.jsx(e7,{type:"button",className:Ye("color-picker__button active-color properties-trigger",{"is-transparent":t==="transparent"||!t}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:H(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:m.jsx("div",{className:"color-picker__button-outline"})}),CR=({type:e,color:t,onChange:n,label:r,elements:i,palette:s=Lt,topPicks:o,updateData:a,appState:l})=>m.jsx("div",{children:m.jsxs("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[m.jsx(KVe,{activeColor:t,onChange:n,type:e,topPicks:o}),m.jsx(Hie,{}),m.jsxs(Jw,{open:l.openPopup===e,onOpenChange:f=>{a({openPopup:f?e:null})},children:[m.jsx(fWe,{color:t,label:r,type:e}),l.openPopup===e&&m.jsx(cWe,{type:e,color:t,onChange:n,label:r,elements:i,palette:s,updateData:a})]})]})}),o7=({icon:e})=>m.jsx("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),dWe=({label:e,open:t,openTrigger:n,children:r,className:i})=>m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:i,onClick:n,children:[e,m.jsx(o7,{icon:t?eNe:pee})]}),t&&m.jsx("div",{style:{display:"flex",flexDirection:"column"},children:r})]}),OM=dWe,uWe=Mi(!1);function hWe({options:e,value:t,label:n,onChange:r,onClose:i,numberOfOptionsToAlwaysShow:s=e.length}){let o=di(),a=h=>{let g=e.find(y=>y.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&g)r(g.value),h.preventDefault();else if(h.key===J.TAB){let y=e.findIndex(x=>x.value===t),U=h.shiftKey?(e.length+y-1)%e.length:(y+1)%e.length;r(e[U].value)}else if($5(h.key)){let y=Pb().rtl,U=e.findIndex(x=>x.value===t);if(U!==-1){let x=e.length,v=U;switch(h.key){case(y?J.ARROW_LEFT:J.ARROW_RIGHT):v=(U+1)%x;break;case(y?J.ARROW_RIGHT:J.ARROW_LEFT):v=(x+U-1)%x;break;case J.ARROW_DOWN:{v=(U+(s??1))%x;break}case J.ARROW_UP:{v=(x+U-(s??1))%x;break}}r(e[v].value)}h.preventDefault()}else(h.key===J.ESCAPE||h.key===J.ENTER)&&(h.preventDefault(),i());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,f]=Ur(uWe),c=Ne.useMemo(()=>e.slice(0,s),[e,s]),d=Ne.useMemo(()=>e.slice(s),[e,s]);T.useEffect(()=>{c.some(h=>h.value===t)||f(!0)},[t,c,f]);let u=h=>m.jsx("div",{className:"picker-content",children:h.map((g,y)=>m.jsxs("button",{type:"button",className:Ye("picker-option",{active:t===g.value}),onClick:U=>{r(g.value)},title:`${g.text} ${g.keyBinding&&` ${g.keyBinding.toUpperCase()}`}`,"aria-label":g.text||"none","aria-keyshortcuts":g.keyBinding||void 0,ref:U=>{t===g.value&&setTimeout(()=>{U==null||U.focus()},0)},children:[g.icon,g.keyBinding&&m.jsx("span",{className:"picker-keybinding",children:g.keyBinding})]},g.text))});return m.jsx(UR,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:m.jsxs("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[u(c),d.length>0&&m.jsx(OM,{label:H("labels.more_options"),open:l,openTrigger:()=>{f(h=>!h)},className:"picker-collapsible",children:u(d)})]})})}function fV({value:e,label:t,options:n,onChange:r,group:i="",numberOfOptionsToAlwaysShow:s}){var f;let[o,a]=Ne.useState(!1),l=Ne.useRef(null);return m.jsx("div",{children:m.jsxs(Jw,{open:o,onOpenChange:c=>a(c),children:[m.jsx(e7,{name:i,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(f=n.find(c=>c.value===e))==null?void 0:f.icon}),o&&m.jsx(hWe,{options:n,value:e,label:t,onChange:r,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}var Kie=Ne.forwardRef(({className:e,placeholder:t,onChange:n},r)=>m.jsxs("div",{className:Ye("QuickSearch__wrapper",e),children:[m1,m.jsx("input",{ref:r,className:"QuickSearch__input",type:"text",placeholder:t,onChange:i=>n(i.target.value.trim().toLowerCase())})]})),Yie=({className:e,placeholder:t,children:n})=>{let r=!T.Children.count(n);return m.jsx("div",{className:Ye("ScrollableList__wrapper",e),role:"menu",children:r?m.jsx("div",{className:"empty",children:t}):n})},Zie=({children:e,className:t="",style:n,title:r})=>m.jsxs("div",{className:`dropdown-menu-group ${t}`,style:n,children:[r&&m.jsx("p",{className:"dropdown-menu-group-title",children:r}),e]}),jM=Zie;Zie.displayName="DropdownMenuGroup";var qie=Ne.createContext({}),Qie=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),Jie=(e,t)=>{let n=T.useContext(qie);return Sw(e,r=>{var s;let i=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||((s=n.onSelect)==null||s.call(n,i))})},pWe=({textStyle:e,icon:t,shortcut:n,children:r})=>{let i=di();return m.jsxs(m.Fragment,{children:[t&&m.jsx("div",{className:"dropdown-menu-item__icon",children:t}),m.jsx("div",{style:e,className:"dropdown-menu-item__text",children:r}),n&&!i.editor.isMobile&&m.jsx("div",{className:"dropdown-menu-item__shortcut",children:n})]})},ese=pWe,AR=({icon:e,value:t,order:n,children:r,shortcut:i,className:s,hovered:o,selected:a,textStyle:l,onSelect:f,onClick:c,...d})=>{let u=Jie(c,f),h=T.useRef(null);return T.useEffect(()=>{var g,y;o&&(n===0?(g=h.current)==null||g.scrollIntoView({block:"end"}):(y=h.current)==null||y.scrollIntoView({block:"nearest"}))},[o,n]),m.jsx("button",{...d,ref:h,value:t,onClick:u,className:Qie(s,a,o),title:d.title??d["aria-label"],children:m.jsx(ese,{textStyle:l,icon:e,shortcut:i,children:r})})};AR.displayName="DropdownMenuItem";var K5={GREEN:"green",RED:"red",BLUE:"blue"},MR=({type:e=K5.BLUE,children:t})=>{let{theme:n}=Ly(),r={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===Ft.LIGHT?"1.5px solid white":"none"};switch(e){case K5.GREEN:Object.assign(r,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case K5.RED:Object.assign(r,{backgroundColor:"pink",color:"darkred"});break;case K5.BLUE:default:Object.assign(r,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return m.jsx("div",{className:"DropDownMenuItemBadge",style:r,children:t})};MR.displayName="DropdownMenuItemBadge";AR.Badge=MR;var Ra=AR,mWe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:r,onClose:i,onSelect:s,onHover:o})=>{var a,l,f;if(!e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===J.F)return(a=t.current)==null||a.focus(),!0;if(e.key===J.ESCAPE)return i(),!0;if(e.key===J.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===J.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=r[0])!=null&&l.value&&o(r[0].value),!0;if(e.key===J.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(f=r[r.length-1])!=null&&f.value&&o(r[r.length-1].value),!0},gWe=Ne.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:r,onLeave:i,onOpen:s,onClose:o})=>{let{container:a}=jc(),{fonts:l}=Oc(),{showDeprecatedFonts:f}=Dy(),[c,d]=T.useState(""),u=T.useRef(null),h=T.useMemo(()=>Array.from(Bf.registered.entries()).filter(([I,{metadata:R}])=>!R.serverSide&&!R.fallback).map(([I,{metadata:R,fontFaces:D}])=>{var P,$;let _={value:I,icon:R.icon??F4,text:(($=(P=D[0])==null?void 0:P.fontFace)==null?void 0:$.family)??"Unknown"};return R.deprecated&&Object.assign(_,{deprecated:R.deprecated,badge:{type:K5.RED,placeholder:H("fontList.badge.old")}}),_}).sort((I,R)=>I.text.toLowerCase()>R.text.toLowerCase()?1:-1),[]),g=T.useMemo(()=>new Set(l.getSceneFamilies()),[e]),y=T.useMemo(()=>h.filter(I=>g.has(I.value)),[h,g]),U=T.useMemo(()=>h.filter(I=>!g.has(I.value)&&(f||!I.deprecated)),[h,g,f]),x=T.useMemo(()=>HMe([...y,...U].filter(I=>{var R;return(R=I.text)==null?void 0:R.toLowerCase().includes(c)})),[y,U,c]),v=T.useMemo(()=>{var R;let I;return t?I=x.find(D=>D.value===t):e&&(I=x.find(D=>D.value===e)),!I&&c&&((R=x[0])!=null&&R.value?r(x[0].value):i()),I},[t,e,c,x,r,i]),E=T.useCallback(I=>{mWe({event:I,inputRef:u,hoveredFont:v,filteredFonts:x,onSelect:n,onHover:r,onClose:o})&&(I.preventDefault(),I.stopPropagation())},[v,x,n,r,o]);T.useEffect(()=>(s(),()=>{o()}),[]);let k=T.useMemo(()=>x.filter(I=>g.has(I.value)),[x,g]),M=T.useMemo(()=>x.filter(I=>!g.has(I.value)),[x,g]),S=(I,R)=>m.jsxs(Ra,{icon:I.icon,value:I.value,order:R,textStyle:{fontFamily:Ig({fontFamily:I.value})},hovered:I.value===(v==null?void 0:v.value),selected:I.value===e,tabIndex:I.value===e?0:-1,onClick:D=>{n(Number(D.currentTarget.value))},onMouseMove:()=>{(v==null?void 0:v.value)!==I.value&&r(I.value)},children:[I.text,I.badge&&m.jsx(MR,{type:I.badge.type,children:I.badge.placeholder})]},I.value),A=[];return k.length&&A.push(m.jsx(jM,{title:H("fontList.sceneFonts"),children:k.map(S)},"group_1")),M.length&&A.push(m.jsx(jM,{title:H("fontList.availableFonts"),children:M.map((I,R)=>S(I,R+k.length))},"group_2")),m.jsxs(Xie,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:i,onKeyDown:E,children:[m.jsx(Kie,{ref:u,placeholder:H("quickSearch.placeholder"),onChange:Ng(d,20)}),m.jsx(Yie,{className:"dropdown-menu fonts manual-hover",placeholder:H("fontList.empty"),children:A.length?A:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),bWe=({selectedFontFamily:e})=>{let t=T.useMemo(()=>!!(e&&!UWe(e)),[e]);return m.jsx(e7,{asChild:!0,children:m.jsx("div",{children:m.jsx($ie,{standalone:!0,icon:QJ,title:H("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},tse=[{value:rr.Excalifont,icon:vb,text:H("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:rr.Nunito,icon:F4,text:H("labels.normal"),testId:"font-family-normal"},{value:rr["Comic Shanns"],icon:JA,text:H("labels.code"),testId:"font-family-code"}],yWe=new Set(tse.map(e=>e.value)),UWe=e=>e?yWe.has(e):!1,xWe=Ne.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:r,onHover:i,onLeave:s,onPopupChange:o})=>{let a=T.useMemo(()=>tse,[]),l=T.useCallback(f=>{f&&r(f)},[r]);return m.jsxs("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[m.jsx(Lc,{type:"button",options:a,value:t,onClick:l}),m.jsx(Hie,{}),m.jsxs(Jw,{open:e,onOpenChange:o,children:[m.jsx(bWe,{selectedFontFamily:t}),e&&m.jsx(gWe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:i,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),wWe=({updateData:e,appState:t,elements:n,testId:r})=>{let i=Ne.useRef(null),s=Ne.useRef(null),o=Ps(n,t,a=>a.opacity,!0,t.currentItemOpacity);return T.useEffect(()=>{if(i.current&&s.current){let a=i.current,l=s.current,f=a.offsetWidth,c=15,d=o/100*(f-c)+c/2;l.style.left=`${d}px`,a.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${o}%, var(--button-bg) ${o}%, var(--button-bg) 100%)`}},[o]),m.jsxs("label",{className:"control-label",children:[H("labels.opacity"),m.jsxs("div",{className:"range-wrapper",children:[m.jsx("input",{ref:i,type:"range",min:"0",max:"100",step:"10",onChange:a=>{e(+a.target.value)},value:o,className:"range-input","data-testid":r}),m.jsx("div",{className:"value-bubble",ref:s,children:o!==0?o:null}),m.jsx("div",{className:"zero-label",children:"0"})]})]})},nse=.1,_s=(e,t,n,r=!1)=>{let i=mt(Nt(e,t,{includeBoundTextElement:r}));return e.map(s=>{var o;return i.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},Ps=function(e,t,n,r,i){let s=t.editingTextElement,o=Nn(e),a=null;return s&&(a=n(s)),a||(Qr(o,t)?a=fBe(r===!0?o:o.filter(l=>r(l)),t,n)??(typeof i=="function"?i(!0):i):a=typeof i=="function"?i(!1):i),a},vWe=(e,t)=>Hn(t)||!t.autoResize?t:xe(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2},!1),TR=(e,t,n,r,i)=>{let s=new Set,o=_s(e,t,l=>{if(Ve(l)){let f=r(l);s.add(f);let c=Ct(l,{fontSize:f});return Rs(c,n.scene.getContainerElement(l),n.scene.getNonDeletedElementsMap()),c=vWe(l,c),c}return l},!0),a=mt(o);return Nt(e,t,{includeBoundTextElement:!0}).forEach(l=>{Ve(l)&&co(l,a)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:i??t.currentItemFontSize},captureUpdate:pe.IMMEDIATELY}};je({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:_s(e,t,r=>iM(r.type)?Ct(r,{strokeColor:n.currentItemStrokeColor}):r,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?pe.IMMEDIATELY:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{"aria-hidden":"true",children:H("labels.stroke")}),m.jsx(CR,{topPicks:wJ,palette:LAe,type:"elementStroke",label:H("labels.stroke"),color:Ps(e,t,i=>i.strokeColor,!0,t.currentItemStrokeColor),onChange:i=>n({currentItemStrokeColor:i}),elements:e,appState:t,updateData:n})]})});je({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:_s(e,t,r=>Ct(r,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?pe.IMMEDIATELY:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{"aria-hidden":"true",children:H("labels.background")}),m.jsx(CR,{topPicks:vJ,palette:OAe,type:"elementBackground",label:H("labels.background"),color:Ps(e,t,i=>i.backgroundColor,!0,t.currentItemBackgroundColor),onChange:i=>n({currentItemBackgroundColor:i}),elements:e,appState:t,updateData:n})]})});je({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,r)=>(Pn("element","changeFillStyle",`${n} (${r.device.editor.isMobile?"mobile":"desktop"})`),{elements:_s(e,t,i=>Ct(i,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Nt(e,t),i=r.length>0&&r.every(s=>s.fillStyle==="zigzag");return m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.fill")}),m.jsx(Lc,{type:"button",options:[{value:"hachure",text:`${H(i?"labels.zigzag":"labels.hachure")} (${Ue("Alt-Click")})`,icon:i?VTe:WTe,active:i?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:H("labels.crossHatch"),icon:GTe,testId:"fill-cross-hatch"},{value:"solid",text:H("labels.solid"),icon:XTe,testId:"fill-solid"}],value:Ps(e,t,s=>s.fillStyle,s=>s.hasOwnProperty("fillStyle"),s=>s?null:t.currentItemFillStyle),onClick:(s,o)=>{let a=o.altKey&&s==="hachure"&&r.every(l=>l.fillStyle==="hachure")?"zigzag":s;n(a)}})]})}});je({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:_s(e,t,r=>Ct(r,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.strokeWidth")}),m.jsx(Lc,{group:"stroke-width",options:[{value:Xk.thin,text:H("labels.thin"),icon:see,testId:"strokeWidth-thin"},{value:Xk.bold,text:H("labels.bold"),icon:KTe,testId:"strokeWidth-bold"},{value:Xk.extraBold,text:H("labels.extraBold"),icon:YTe,testId:"strokeWidth-extraBold"}],value:Ps(e,t,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:t.currentItemStrokeWidth),onChange:r=>n(r)})]})});je({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:_s(e,t,r=>Ct(r,{seed:Tc(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.sloppiness")}),m.jsx(Lc,{group:"sloppiness",options:[{value:0,text:H("labels.architect"),icon:QTe},{value:1,text:H("labels.artist"),icon:JTe},{value:2,text:H("labels.cartoonist"),icon:eIe}],value:Ps(e,t,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:t.currentItemRoughness),onChange:r=>n(r)})]})});je({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:_s(e,t,r=>Ct(r,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.strokeStyle")}),m.jsx(Lc,{group:"strokeStyle",options:[{value:"solid",text:H("labels.strokeStyle_solid"),icon:see},{value:"dashed",text:H("labels.strokeStyle_dashed"),icon:ZTe},{value:"dotted",text:H("labels.strokeStyle_dotted"),icon:qTe}],value:Ps(e,t,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:t.currentItemStrokeStyle),onChange:r=>n(r)})]})});je({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:_s(e,t,r=>Ct(r,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(wWe,{updateData:n,elements:e,appState:t,testId:"opacity"})});je({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,r)=>TR(e,t,r,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.fontSize")}),m.jsx(Lc,{group:"font-size",options:[{value:16,text:H("labels.small"),icon:mIe,testId:"fontSize-small"},{value:20,text:H("labels.medium"),icon:gIe,testId:"fontSize-medium"},{value:28,text:H("labels.large"),icon:bIe,testId:"fontSize-large"},{value:36,text:H("labels.veryLarge"),icon:yIe,testId:"fontSize-veryLarge"}],value:Ps(e,t,i=>{if(Ve(i))return i.fontSize;let s=At(i,r.scene.getNonDeletedElementsMap());return s?s.fontSize:null},i=>Ve(i)||At(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:t.currentItemFontSize||id),onChange:i=>n(i)})]})});var dV=je({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:Tw,trackEvent:!1,perform:(e,t,n,r)=>TR(e,t,r,i=>Math.round(1/(1+nse)*i.fontSize)),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&(e.key===J.CHEVRON_LEFT||e.key===J.COMMA)}),uV=je({name:"increaseFontSize",label:"labels.increaseFontSize",icon:Tw,trackEvent:!1,perform:(e,t,n,r)=>TR(e,t,r,i=>Math.round(i.fontSize*(1+nse))),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&(e.key===J.CHEVRON_RIGHT||e.key===J.PERIOD)});je({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,r)=>{var g;let{cachedElements:i,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:_s(e,t,y=>{let U=i==null?void 0:i.get(y.id);return U?Ct(y,{...U}):y},!0),appState:{...t,...a},captureUpdate:pe.NEVER};let{currentItemFontFamily:l,currentHoveredFontFamily:f}=n,c=pe.EVENTUALLY,d,u=!1;if(l)d=l,c=pe.IMMEDIATELY;else if(f){d=f,c=pe.EVENTUALLY;let y=Nt(e,t,{includeBoundTextElement:!0}).filter(U=>Ve(U));if(y.length>200)u=!0;else{let U=0,x=0;for(;U<y.length&&x<5e3;){let v=y[U];x+=(v==null?void 0:v.originalText.length)||0,U++}x>5e3&&(u=!0)}}let h={appState:{...t,...a},captureUpdate:c};if(d&&!u){let y=new Map,U=new Set,x=!1,v=Array.from(Bf.loadedFontsCache.values()),E=(g=Object.entries(rr).find(([S,A])=>A===d))==null?void 0:g[0];f&&E&&v.some(S=>S.startsWith(E))&&(x=!0),Object.assign(h,{elements:_s(e,t,S=>{if(Ve(S)&&(S.fontFamily!==d||l)){let A=Ct(S,{fontFamily:d,lineHeight:g1(d)}),I=(i==null?void 0:i.get(S.containerId||""))||{},R=r.scene.getContainerElement(S);return o&&R&&I&&xe(R,{...I},!1),x||(U=new Set([...U,...Array.from(A.originalText)])),y.set(A,R),A}return S},!0)});let k=`10px ${Ig({fontFamily:d})}`,M=Array.from(U.values()).join();if(x||window.document.fonts.check(k,M))for(let[S,A]of y)Rs(S,A,r.scene.getNonDeletedElementsMap(),!1);else window.document.fonts.load(k,M).then(S=>{for(let[A,I]of y){let R=r.scene.getElement(A.id),D=I?r.scene.getElement(I.id):null;R&&Rs(R,D,r.scene.getNonDeletedElementsMap(),!1)}r.fonts.onLoaded(S)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:r})=>{let i=T.useRef(new Map),s=T.useRef(null),[o,a]=T.useState({}),l=T.useRef(!0),f=T.useMemo(()=>{var d;let c=(u,h)=>Ps(u,t,g=>{if(Ve(g))return g.fontFamily;let y=At(g,h);return y?y.fontFamily:null},g=>Ve(g)||At(g,h)!==null,g=>g?null:t.currentItemFontFamily||s0);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?c(Array.from(((d=i.current)==null?void 0:d.values())??[]),i.current):!o.openPopup&&t.openPopup!=="fontFamily"?c(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n.scene]);return T.useEffect(()=>{s.current=f},[f]),T.useEffect(()=>{Object.keys(o).length&&(r(o),a({}))},[o]),T.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.fontFamily")}),m.jsx(xWe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:f,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:c=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:c}),i.current.clear()},onHover:c=>{a({currentHoveredFontFamily:c,cachedElements:new Map(i.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0})},onPopupChange:c=>{if(c){i.current.clear();let{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){let u=n.scene.getElement(d.id);i.current.set(d.id,Ct(u||d,{},!0))}else{let u=Nt(e,t,{includeBoundTextElement:!0});for(let h of u)i.current.set(h.id,Ct(h,{},!0))}a({openPopup:"fontFamily"})}else{let d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0};l.current?r({...o,...d}):a(d),i.current.clear()}}})]})}});je({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,r)=>({elements:_s(e,t,i=>{if(Ve(i)){let s=Ct(i,{textAlign:n});return Rs(s,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),s}return i},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>{let i=r.scene.getNonDeletedElementsMap();return m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.textAlign")}),m.jsx(Lc,{group:"text-align",options:[{value:"left",text:H("labels.left"),icon:xIe,testId:"align-left"},{value:"center",text:H("labels.center"),icon:wIe,testId:"align-horizontal-center"},{value:"right",text:H("labels.right"),icon:vIe,testId:"align-right"}],value:Ps(e,t,s=>{if(Ve(s))return s.textAlign;let o=At(s,i);return o?o.textAlign:null},s=>Ve(s)||At(s,i)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})]})}});je({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:_s(e,t,i=>{if(Ve(i)){let s=Ct(i,{verticalAlign:n});return Rs(s,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),s}return i},!0),appState:{...t},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx("fieldset",{children:m.jsx(Lc,{group:"text-align",options:[{value:Po.TOP,text:H("labels.alignTop"),icon:m.jsx(EIe,{theme:t.theme}),testId:"align-top"},{value:Po.MIDDLE,text:H("labels.centerVertically"),icon:m.jsx(SIe,{theme:t.theme}),testId:"align-middle"},{value:Po.BOTTOM,text:H("labels.alignBottom"),icon:m.jsx(kIe,{theme:t.theme}),testId:"align-bottom"}],value:Ps(e,t,i=>{if(Ve(i)&&i.containerId)return i.verticalAlign;let s=At(i,r.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},i=>Ve(i)||At(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:Po.MIDDLE),onChange:i=>n(i)})})});je({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:_s(e,t,r=>Ge(r)?r:Ct(r,{roundness:n==="round"?{type:n6(r.type)?qr.ADAPTIVE_RADIUS:qr.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=nne(Nn(e),t).some(i=>{var s;return((s=i.roundness)==null?void 0:s.type)===qr.LEGACY});return m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.edges")}),m.jsx(Lc,{group:"edges",options:[{value:"sharp",text:H("labels.sharp"),icon:tIe},{value:"round",text:H("labels.round"),icon:nIe}],value:Ps(e,t,i=>r?null:i.roundness?"round":"sharp",i=>!Rt(i)&&i.hasOwnProperty("roundness"),i=>i?null:t.currentItemRoundness),onChange:i=>n(i)})]})}});var hV=e=>[{value:null,text:H("labels.arrowhead_none"),keyBinding:"q",icon:rIe},{value:"arrow",text:H("labels.arrowhead_arrow"),keyBinding:"w",icon:m.jsx(iIe,{flip:e})},{value:"triangle",text:H("labels.arrowhead_triangle"),icon:m.jsx(lIe,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:H("labels.arrowhead_triangle_outline"),icon:m.jsx(cIe,{flip:e}),keyBinding:"r"},{value:"circle",text:H("labels.arrowhead_circle"),keyBinding:"a",icon:m.jsx(sIe,{flip:e})},{value:"circle_outline",text:H("labels.arrowhead_circle_outline"),keyBinding:"s",icon:m.jsx(oIe,{flip:e})},{value:"diamond",text:H("labels.arrowhead_diamond"),icon:m.jsx(fIe,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:H("labels.arrowhead_diamond_outline"),icon:m.jsx(dIe,{flip:e}),keyBinding:"f"},{value:"bar",text:H("labels.arrowhead_bar"),keyBinding:"z",icon:m.jsx(aIe,{flip:e})},{value:"crowfoot_one",text:H("labels.arrowhead_crowfoot_one"),icon:m.jsx(hIe,{flip:e}),keyBinding:"c"},{value:"crowfoot_many",text:H("labels.arrowhead_crowfoot_many"),icon:m.jsx(uIe,{flip:e}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:H("labels.arrowhead_crowfoot_one_or_many"),icon:m.jsx(pIe,{flip:e}),keyBinding:"v"}];je({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:_s(e,t,r=>{if(wt(r)){let{position:i,type:s}=n;if(i==="start")return Ct(r,{startArrowhead:s});if(i==="end")return Ct(r,{endArrowhead:s})}return r}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Pb().rtl;return m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.arrowheads")}),m.jsxs("div",{className:"iconSelectList buttonList",children:[m.jsx(fV,{label:"arrowhead_start",options:hV(!r),value:Ps(e,t,i=>wt(i)&&H4(i.type)?i.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:i=>n({position:"start",type:i}),numberOfOptionsToAlwaysShow:4}),m.jsx(fV,{label:"arrowhead_end",group:"arrowheads",options:hV(!!r),value:Ps(e,t,i=>wt(i)&&H4(i.type)?i.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:i=>n({position:"end",type:i}),numberOfOptionsToAlwaysShow:4})]})]})}});je({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,r)=>{var a;let i=_s(e,t,l=>{if(!Rt(l))return l;let f=Ct(l,{roundness:n===Ui.round?{type:qr.PROPORTIONAL_RADIUS}:null,elbowed:n===Ui.elbow,points:n===Ui.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(Ge(f)){let c=r.scene.getNonDeletedElementsMap();r.dismissLinearEditor();let d=We.getPointAtIndexGlobalCoordinates(f,0,c),u=We.getPointAtIndexGlobalCoordinates(f,-1,c),h=!f.startBinding&&pl(ul(d),e,c,t.zoom,!1,!0),g=!f.endBinding&&pl(ul(u),e,c,t.zoom,!1,!0),y=h||f.startBinding&&c.get(f.startBinding.elementId),U=g||f.endBinding&&c.get(f.endBinding.elementId),x=h?kb(f,h,"start"):d,v=g?kb(f,g,"end"):u;h&&Mc(f,h,"start",c),g&&Mc(f,g,"end",c),xe(f,{points:[x,v].map(E=>O(E[0]-f.x,E[1]-f.y)),...y&&f.startBinding?{startBinding:{...f.startBinding,...G4(f,y,"start")}}:{},...U&&f.endBinding?{endBinding:{...f.endBinding,...G4(f,U,"end")}}:{}}),We.updateEditorMidPointsCache(f,c,r.state)}return f}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){let l=i.find(f=>f.id===o);l&&(s.selectedLinearElement=new We(l))}return{elements:i,appState:s,captureUpdate:pe.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.arrowtypes")}),m.jsx(Lc,{group:"arrowtypes",options:[{value:Ui.sharp,text:H("labels.arrowtype_sharp"),icon:qIe,testId:"sharp-arrow"},{value:Ui.round,text:H("labels.arrowtype_round"),icon:JIe,testId:"round-arrow"},{value:Ui.elbow,text:H("labels.arrowtype_elbowed"),icon:QIe,testId:"elbow-arrow"}],value:Ps(e,t,r=>Rt(r)?r.elbowed?Ui.elbow:r.roundness?Ui.round:Ui.sharp:null,r=>Rt(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})]})});var lh=({viewportX:e,viewportY:t,nextZoom:n},r)=>{let i=e-r.offsetLeft,s=t-r.offsetTop,o=r.zoom.value,a=r.scrollX+(i-i/o),l=r.scrollY+(s-s/o),f=-(i-i/n),c=-(s-s/n);return{scrollX:a+f,scrollY:l+c,zoom:{value:n}}},C2=()=>{let e=document.querySelector(".excalidraw-tooltip");if(e)return e;let t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},rse=(e,t,n="bottom")=>{let r=e.getBoundingClientRect(),i=window.innerWidth,s=window.innerHeight,o=5,a=t.left+t.width/2-r.width/2;a<0?a=o:a+r.width>=i&&(a=i-r.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+r.height>=s&&(l=t.top-r.height-o)):(l=t.top-r.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},EWe=(e,t,n,r)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=r?"50ch":"10ch",t.style.maxWidth=r?"50ch":"15ch",t.textContent=n;let i=e.getBoundingClientRect();rse(t,i)},w1=({children:e,label:t,long:n=!1,style:r,disabled:i})=>(T.useEffect(()=>()=>C2().classList.remove("excalidraw-tooltip--visible"),[]),i?null:m.jsx("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>EWe(s.currentTarget,C2(),t,n),onPointerLeave:()=>C2().classList.remove("excalidraw-tooltip--visible"),style:r,children:e}));je({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?pe.IMMEDIATELY:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsx(CR,{palette:null,topPicks:EJ,label:H("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:i=>n({viewBackgroundColor:i}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});var A2=je({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:p1,trackEvent:{category:"canvas"},predicate:(e,t,n,r)=>{var i;return!!r.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((i=t.openDialog)==null?void 0:i.name)!=="elementLinkSelector"},perform:(e,t,n,r)=>(r.imageCache.clear(),{elements:e.map(i=>Ct(i,{isDeleted:!0})),appState:{...Ac(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:pe.IMMEDIATELY})}),pV=je({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:$z,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...lh({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Pf(t.zoom.value+vw)},t),userToFollow:null},captureUpdate:pe.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(Xt,{type:"button",className:"zoom-in-button zoom-button",icon:$z,title:`${H("buttons.zoomIn")}  ${Ue("CtrlOrCmd++")}`,"aria-label":H("buttons.zoomIn"),disabled:t.zoom.value>=qI,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Jt.EQUAL||e.code===Jt.NUM_ADD)&&(e[J.CTRL_OR_CMD]||e.shiftKey)}),mV=je({name:"zoomOut",label:"buttons.zoomOut",icon:Hz,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...lh({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Pf(t.zoom.value-vw)},t),userToFollow:null},captureUpdate:pe.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(Xt,{type:"button",className:"zoom-out-button zoom-button",icon:Hz,title:`${H("buttons.zoomOut")}  ${Ue("CtrlOrCmd+-")}`,"aria-label":H("buttons.zoomOut"),disabled:t.zoom.value<=ZI,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Jt.MINUS||e.code===Jt.NUM_SUBTRACT)&&(e[J.CTRL_OR_CMD]||e.shiftKey)}),gV=je({name:"resetZoom",label:"buttons.resetZoom",icon:ITe,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...lh({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Pf(1)},t),userToFollow:null},captureUpdate:pe.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(w1,{label:H("buttons.resetZoom"),style:{height:"100%"},children:m.jsxs(Xt,{type:"button",className:"reset-zoom-button zoom-button",title:H("buttons.resetZoom"),"aria-label":H("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===Jt.ZERO||e.code===Jt.NUM_ZERO)&&(e[J.CTRL_OR_CMD]||e.shiftKey)}),kWe=(e,t,n=1)=>{let[r,i,s,o]=e,a=s-r,l=t.width/a,f=o-i,c=t.height/f,d=Math.min(l,c)*Ot(n,.1,1);return Math.min(d,1)},SWe=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:r=!1,viewportZoomFactor:i=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{i=Ot(i,ZI,qI);let[a,l,f,c]=e,d=(a+f)/2,u=(l+c)/2,h=(n==null?void 0:n.left)??0,g=(n==null?void 0:n.top)??0,y=(n==null?void 0:n.right)??0,U=(n==null?void 0:n.bottom)??0,x=t.width-h-y,v=t.height-g-U,E;if(r){let S=f-a,A=c-l;E=Math.min(x/S,v/A)*i}else E=kWe(e,{width:x,height:v},i);let k=Pf(Ot(UMe(E,vw,"floor"),s,o)),M=ete({scenePoint:{x:d,y:u},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:k}});return{appState:{...t,scrollX:M.scrollX,scrollY:M.scrollY,zoom:{value:k}},captureUpdate:pe.EVENTUALLY}},a7=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:o})=>{let a=pn(Nn(t));return SWe({canvasOffsets:e,bounds:a,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:o})};je({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:hN,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return a7({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===Jt.TWO&&e.shiftKey&&!e.altKey&&!e[J.CTRL_OR_CMD]});je({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:hN,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return a7({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===Jt.THREE&&e.shiftKey&&!e.altKey&&!e[J.CTRL_OR_CMD]});je({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:hN,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>a7({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()}),keyTest:e=>e.code===Jt.ONE&&e.shiftKey&&!e.altKey&&!e[J.CTRL_OR_CMD]});var d9=je({name:"toggleTheme",label:(e,t)=>t.theme===Ft.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===Ft.LIGHT?ZA:qA,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===Ft.LIGHT?Ft.DARK:Ft.LIGHT)},captureUpdate:pe.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===Jt.D,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.toggleTheme});je({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return Yl(t)?n=Dr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=Dr(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e.key===J.E});var CWe=je({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:aee,viewMode:!1,perform:(e,t,n,r)=>{let i;return Tg(t)?i=Dr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(i=Dr(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),Un(r.interactiveCanvas,mn.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:i},captureUpdate:pe.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[J.CTRL_OR_CMD]&&e.key===J.H}),Ha=je({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,r)=>{var u;let{interactiveCanvas:i,focusContainer:s,scene:o}=r,a=o.getNonDeletedElementsMap();if(t.editingLinearElement){let{elementId:h,startBindingElement:g,endBindingElement:y}=t.editingLinearElement,U=We.getElement(h,a);if(U)return hc(U)&&Pw(U,g,y,a,o),{elements:U.points.length<2||$g(U)?e.filter(x=>x.id!==U.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:pe.IMMEDIATELY}}let l=e,f=t.pendingImageElementId&&o.getElement(t.pendingImageElementId);f&&xe(f,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&s();let c=t.multiElement?t.multiElement:((u=t.newElement)==null?void 0:u.type)==="freedraw"?t.newElement:null;if(c){if(c.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){let{points:g,lastCommittedPoint:y}=c;(!y||g[g.length-1]!==y)&&xe(c,{points:c.points.slice(0,-1)})}$g(c)&&(l=l.filter(g=>g.id!==c.id));let h=Wf(c.points,t.zoom.value);if((c.type==="line"||c.type==="freedraw")&&h){let g=c.points,y=g[0];xe(c,{points:g.map((U,x)=>x===g.length-1?O(y[0],y[1]):U)})}if(hc(c)&&!h&&c.points.length>1){let[g,y]=We.getPointAtIndexGlobalCoordinates(c,-1,mt(e));oM(c,t,{x:g,y},a,e)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!c)&&Ga(i);let d;return t.activeTool.type==="eraser"?d=Dr(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=Dr(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&c?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:c&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[c.id]:!0}:t.selectedElementIds,selectedLinearElement:c&&wt(c)?new We(c):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:pe.IMMEDIATELY}},keyTest:(e,t)=>e.key===J.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===J.ESCAPE||e.key===J.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>m.jsx(Xt,{type:"button",icon:FTe,title:H("buttons.done"),"aria-label":H("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),AWe=e=>{let{id:t}=jc(),[n,r]=T.useState(e.value),i=o=>{e.ignoreFocus||FMe(o.target);let a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===J.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return m.jsxs("div",{className:"ProjectName",children:[m.jsx("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),m.jsx("input",{type:"text",className:"TextInput",onBlur:i,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>r(o.target.value)})]})},MWe=e=>{let t=e.title||(e.value===Ft.DARK?H("buttons.lightMode"):H("buttons.darkMode"));return m.jsx(Xt,{type:"icon",icon:e.value===Ft.LIGHT?bV.MOON:bV.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===Ft.DARK?Ft.LIGHT:Ft.DARK),"data-testid":"toggle-dark-mode"})},bV={SUN:m.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:m.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},l7=(e,{selectedElementIds:t},n)=>{e=Nn(e);let r=n&&Qr(e,{selectedElementIds:t}),i=null,s=r?Nt(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return r&&(s.length===1&&ht(s[0])?(i=s[0],s=YN(e,i)):s.length>1&&(s=Nt(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:i,exportedElements:jf(s)}},c7=async(e,t,n,r,{exportBackground:i,exportPadding:s=e6,viewBackgroundColor:o,name:a=n.name||IJ,fileHandle:l=null,exportingFrame:f=null})=>{if(t.length===0)throw new Error(H("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){let d=NN(t,{exportBackground:i,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},r,{exportingFrame:f});if(e==="svg")return q4(d.then(u=>new Blob([u.outerHTML],{type:ft.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[Mg.svg],fileHandle:l});if(e==="clipboard-svg"){let u=await d.then(h=>h.outerHTML);try{await Ty(u)}catch{throw new Error(H("errors.copyToSystemClipboardFailed"))}return}}let c=Fte(t,n,r,{exportBackground:i,viewBackgroundColor:o,exportPadding:s,exportingFrame:f});if(e==="png"){let d=Rb(c);return n.exportEmbedScene&&(d=d.then(u=>qe(async()=>{const{encodePngMetadata:h}=await Promise.resolve().then(()=>joe);return{encodePngMetadata:h}},void 0).then(({encodePngMetadata:h})=>h({blob:u,metadata:AN(t,n,r)})))),q4(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[Mg.png],fileHandle:l})}else if(e==="clipboard")try{let d=Rb(c);await qje(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(H("canvasError.canvasTooBig")):bb&&d.name==="TypeError"?new Error(`${H("alerts.couldNotCopyToClipboard")}

${H("hints.firefox_clipboard_write")}`):new Error(H("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},TWe=async(e,t,n,r)=>{let{exportBackground:i,viewBackgroundColor:s,fileHandle:o}=t,a=dne(o);if(!o||!_Be(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};let{exportedElements:l,exportingFrame:f}=l7(e,t,!1);return await c7(a,l,t,n,{exportBackground:i,viewBackgroundColor:s,name:r,fileHandle:o,exportingFrame:f}),{fileHandle:o}},IR=({children:e,checked:t,onChange:n,className:r})=>m.jsxs("div",{className:Ye("Checkbox",r,{"is-checked":t}),onClick:i=>{n(!t,i),i.currentTarget.querySelector(".Checkbox-box").focus()},children:[m.jsx("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:DTe}),m.jsx("div",{className:"Checkbox-label",children:e})]}),IWe=je({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:r,app:i})=>m.jsx(AWe,{label:H("labels.fileTitle"),value:i.getName(),onChange:s=>t(s),ignoreFocus:(r==null?void 0:r.ignoreFocus)??!1})}),NWe=je({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Nn(e),i=Qr(r,t)?Nt(r,t):r;return m.jsx(m.Fragment,{children:JI.map(s=>{let[o,a]=pje(i,e6,s),l=`${H("imageExportDialog.label.scale")} ${s}x (${o}x${a})`;return m.jsx(Xt,{size:"small",type:"radio",icon:`${s}x`,name:"export-canvas-scale",title:l,"aria-label":l,id:"export-canvas-scale",checked:s===t.exportScale,onChange:()=>n(s)},s)})})}}),RWe=je({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx(IR,{checked:e.exportBackground,onChange:n=>t(n),children:H("imageExportDialog.label.withBackground")})}),ise=je({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsxs(IR,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[H("imageExportDialog.label.embedScene"),m.jsx(w1,{label:H("imageExportDialog.tooltip.embedScene"),long:!0,children:m.jsx("div",{className:"excalidraw-tooltip-icon",children:zTe})})]})}),yV=je({name:"saveToActiveFile",label:"buttons.save",icon:Mw,trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{let i=!!t.fileHandle;try{let{fileHandle:s}=rR(t.fileHandle)?await TWe(e,t,r.files,r.getName()):await kte(e,t,r.files,r.getName());return{captureUpdate:pe.EVENTUALLY,appState:{...t,fileHandle:s,toast:i?{message:s!=null&&s.name?H("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):H("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:pe.EVENTUALLY}}},keyTest:e=>e.key===J.S&&e[J.CTRL_OR_CMD]&&!e.shiftKey}),sse=je({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:Mw,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,r)=>{try{let{fileHandle:i}=await kte(e,{...t,fileHandle:null},r.files,r.getName());return{captureUpdate:pe.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:i,toast:{message:H("toast.fileSaved")}}}}catch(i){return(i==null?void 0:i.name)!=="AbortError"?console.error(i):console.warn(i),{captureUpdate:pe.EVENTUALLY}}},keyTest:e=>e.key===J.S&&e.shiftKey&&e[J.CTRL_OR_CMD],PanelComponent:({updateData:e})=>m.jsx(Xt,{type:"button",icon:OTe,title:H("buttons.saveAs"),"aria-label":H("buttons.saveAs"),showAriaLabel:di().editor.isMobile,hidden:!T1,onClick:()=>e(null),"data-testid":"save-as-button"})}),BM=je({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{try{let{elements:i,appState:s,files:o}=await ije(t,e);return{elements:i,appState:s,files:o,captureUpdate:pe.IMMEDIATELY}}catch(i){return(i==null?void 0:i.name)==="AbortError"?(console.warn(i),!1):{elements:e,appState:{...t,errorMessage:i.message},files:r.files,captureUpdate:pe.EVENTUALLY}}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.O}),_We=je({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:m.jsx(MWe,{value:e.exportWithDarkMode?Ft.DARK:Ft.LIGHT,onChange:n=>{t(n===Ft.DARK)},title:H("imageExportDialog.label.darkMode")})})}),ose="{}",PWe=je({name:"copyStyles",label:"labels.copyStyles",icon:hee,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=[],s=e.find(o=>t.selectedElementIds[o.id]);if(i.push(s),s&&Ta(s)){let o=At(s,r.scene.getNonDeletedElementsMap());i.push(o)}return s&&(ose=JSON.stringify(i)),{appState:{...t,toast:{message:H("toast.copyStyles")}},captureUpdate:pe.EVENTUALLY}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.C}),DWe=je({name:"pasteStyles",label:"labels.pasteStyles",icon:hee,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=JSON.parse(ose),s=i[0],o=i[1];if(!GJ(s))return{elements:e,captureUpdate:pe.EVENTUALLY};let a=Nt(e,t,{includeBoundTextElement:!0}),l=a.map(f=>f.id);return{elements:e.map(f=>{if(l.includes(f.id)){let c=s;if(Ve(f)&&f.containerId&&(c=o),!c)return f;let d=Ct(f,{backgroundColor:c==null?void 0:c.backgroundColor,strokeWidth:c==null?void 0:c.strokeWidth,strokeColor:c==null?void 0:c.strokeColor,strokeStyle:c==null?void 0:c.strokeStyle,fillStyle:c==null?void 0:c.fillStyle,opacity:c==null?void 0:c.opacity,roughness:c==null?void 0:c.roughness,roundness:c.roundness?qMe(c.roundness.type,f)?c.roundness:QMe(f):null});if(Ve(d)){let u=c.fontSize||id,h=c.fontFamily||s0;d=Ct(d,{fontSize:u,fontFamily:h,textAlign:c.textAlign||wy,lineHeight:c.lineHeight||g1(h)});let g=null;d.containerId&&(g=a.find(y=>Ve(d)&&y.id===d.containerId)||null),Rs(d,g,r.scene.getNonDeletedElementsMap())}return d.type==="arrow"&&Rt(c)&&(d=Ct(d,{startArrowhead:c.startArrowhead,endArrowhead:c.endArrowhead})),ht(f)&&(d=Ct(d,{roundness:null,backgroundColor:"transparent"})),d}return f}),captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.V});je({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:pe.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx(Xt,{type:"button",icon:JJ,"aria-label":H("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});je({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:pe.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Xt,{visible:nR(t,Nn(e)),type:"button",icon:jTe,"aria-label":H("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});var NR=je({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:RTe,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:r})=>{var i,s;return((i=t.openDialog)==null?void 0:i.name)==="help"&&r(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"}},captureUpdate:pe.EVENTUALLY}},keyTest:e=>e.key===J.QUESTION_MARK}),LWe=e=>{if(e.length>=2){let t=e[0].groupIds;for(let n of t)if(e.reduce((r,i)=>r&&Ab(i,n),!0))return!0}return!1},UV=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return r.length>=2&&!LWe(r)&&!ene(r)},OWe=je({name:"group",label:"labels.group",icon:e=>m.jsx(r$,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=KN(r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(i.length<2)return{appState:t,elements:e,captureUpdate:pe.EVENTUALLY};let s=$h(t);if(s.length===1){let y=s[0],U=new Set(Fn(e,y).map(v=>v.id)),x=new Set(i.map(v=>v.id));if(new Set([...Array.from(U),...Array.from(x)]).size===U.size)return{appState:t,elements:e,captureUpdate:pe.EVENTUALLY}}let o=[...e];new Set(i.map(y=>y.frameId)).size>1&&oBe(i).forEach((y,U)=>{Vw(y,r.scene.getNonDeletedElementsMap())});let a=Ia(),l=mt(i);o=o.map(y=>l.get(y.id)?Ct(y,{groupIds:fOe(y.groupIds,a,t.editingGroupId)}):y);let f=Fn(o,a),c=f[f.length-1],d=o.lastIndexOf(c),u=o.slice(d+1),h=o.slice(0,d).filter(y=>!Ab(y,a)),g=Nc([...h,...f,...u],mt(f));return{appState:{...t,...nte(a,{...t,selectedGroupIds:{}},Nn(o))},elements:g,captureUpdate:pe.IMMEDIATELY}},predicate:(e,t,n,r)=>UV(e,t,r),keyTest:e=>!e.shiftKey&&e[J.CTRL_OR_CMD]&&e.key===J.G,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!UV(e,t,r),type:"button",icon:m.jsx(r$,{theme:t.theme}),onClick:()=>n(null),title:`${H("labels.group")}  ${Ue("CtrlOrCmd+G")}`,"aria-label":H("labels.group"),visible:Qr(Nn(e),t)})}),jWe=je({name:"ungroup",label:"labels.ungroup",icon:e=>m.jsx(i$,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=$h(t),s=mt(e);if(i.length===0)return{appState:t,elements:e,captureUpdate:pe.EVENTUALLY};let o=[...e],a=[];o=o.map(d=>{Hn(d)&&a.push(d.id);let u=dOe(d.groupIds,t.selectedGroupIds);return u.length===d.groupIds.length?d:Ct(d,{groupIds:u})});let l=vs(t,Nn(o),t,null),f=r.scene.getSelectedElements(t),c=new Set(f.filter(d=>d.frameId).map(d=>d.frameId));return XN(e).filter(d=>c.has(d.id)).forEach(d=>{d&&(o=Qte(o,K3(o,d,t,s),d,r))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((d,[u,h])=>(h&&!a.includes(u)&&(d[u]=!0),d),{}),{appState:{...t,...l},elements:o,captureUpdate:pe.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[J.CTRL_OR_CMD]&&e.key===J.G.toUpperCase(),predicate:(e,t)=>$h(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Xt,{type:"button",hidden:$h(t).length===0,icon:m.jsx(i$,{theme:t.theme}),onClick:()=>n(null),title:`${H("labels.ungroup")}  ${Ue("CtrlOrCmd+Shift+G")}`,"aria-label":H("labels.ungroup"),visible:Qr(Nn(e),t)})}),ase=(e,t,n,r,i,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadraticCurveTo(t+r,n+i,t+r-s,n+i),e.lineTo(t+s,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function BWe(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)-t+r}return t}var f7=(e,t)=>`hsl(${Math.abs(BWe((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,FWe=e=>{var n;let t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},zWe=({context:e,renderConfig:t,appState:n,normalizedWidth:r,normalizedHeight:i})=>{for(let[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o,f=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;let c=11,d=14,u=a<0||a>r-c||l<0||l>i-d;a=Math.max(a,0),a=Math.min(a,r-c),l=Math.max(l,0),l=Math.min(l,i-d);let h=f7(s,f);e.save(),e.strokeStyle=h,e.fillStyle=h;let g=t.remotePointerUserStates.get(s),y=u||g==="idle"||g==="away";y&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());let U=n.theme===Ft.DARK?"#2f6330":QAe,x=f==null?void 0:f.isSpeaking;x&&(e.fillStyle=U,e.strokeStyle=U,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=jU,e.strokeStyle=jU,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),y?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());let v=t.remotePointerUsernames.get(s)||"";if(!u&&v){e.font="600 12px sans-serif";let E=(x?a+0:a)+c/2,k=(x?l+0:l)+d+2,M=5,S=3,A=e.measureText(v),I=A.actualBoundingBoxDescent+A.actualBoundingBoxAscent,R=Math.max(I,12),D=E-1,_=k-1,P=A.width+2+M*2+2,$=R+2+S*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(D,_,P,$,8),e.fillStyle=h,e.fill(),e.strokeStyle=jU,e.stroke(),x&&(e.beginPath(),e.roundRect(D-2,_-2,P+4,$+4,8),e.strokeStyle=U,e.stroke())):ase(e,D,_,P,$,8,jU),e.fillStyle=qAe,e.fillText(v,E+M+1,k+S+A.actualBoundingBoxAscent+Math.floor((R-I)/2)+2),x){e.fillStyle=U;let L=8,B=8,V=5;e.fillRect(D+P+B,_+($/2-L/2),2,L),e.fillRect(D+P+B+V,_+($/2-L*2/2),2,L*2),e.fillRect(D+P+B+V*2,_+($/2-L/2),2,L)}}e.restore(),e.closePath()}},xV=({color:e,onClick:t,name:n,src:r,className:i})=>{let s=FWe(n),[o,a]=T.useState(!1),l=!o&&r,f=l?void 0:{background:e};return m.jsx("div",{className:Ye("Avatar",i),style:f,onClick:t,children:l?m.jsx("img",{className:"Avatar-img",src:r,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};je({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var r;return!n.socketId||((r=t.userToFollow)==null?void 0:r.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:pe.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:pe.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{let{socketId:r,collaborator:i,withName:s,isBeingFollowed:o}=t,a=f7(r,i),l=Ye({"is-followed":o,"is-current-user":i.isCurrentUser===!0,"is-speaking":i.isSpeaking,"is-in-call":i.isInCall,"is-muted":i.isMuted}),f=i.isInCall?i.isSpeaking?m.jsxs("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:H("userList.hint.isSpeaking"),children:[m.jsx("div",{}),m.jsx("div",{}),m.jsx("div",{})]}):i.isMuted?m.jsx("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:H("userList.hint.micMuted"),children:jIe}):m.jsx("div",{title:H("userList.hint.inCall"),children:OIe}):null;return s?m.jsxs("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(i),children:[m.jsx(xV,{color:a,onClick:()=>{},name:i.username||"",src:i.avatarUrl,className:l}),m.jsx("div",{className:"UserList__collaborator-name",children:i.username}),m.jsxs("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&m.jsx("div",{className:"UserList__collaborator-status-icon-is-followed",title:H("userList.hint.followStatus"),children:uN}),f]})]}):m.jsxs("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[m.jsx(xV,{color:a,onClick:()=>{e(i)},name:i.username||"",src:i.avatarUrl,className:l}),f&&m.jsx("div",{className:"UserList__collaborator-status-icon",children:f})]})}});var $We=je({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(let s of TJ)if(i.some(o=>o.type===s))return{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:H(`errors.libraryElementTypeError.${s}`)}};return r.library.getLatestLibrary().then(s=>r.library.setLibrary([{id:Ia(),status:"unpublished",elements:i.map(N1),created:Date.now()},...s])).then(()=>({captureUpdate:pe.EVENTUALLY,appState:{...t,toast:{message:H("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),HWe=(e,t,n,r)=>{let i=jw(e,t),s=Ul(e);return i.flatMap(o=>{let a=VWe(o,s,n);return o.map(l=>{let f=xe(l,{x:l.x+a.x,y:l.y+a.y});return co(l,r.getNonDeletedElementsMap(),{simultaneouslyUpdated:o}),f})})},VWe=(e,t,{axis:n,position:r})=>{let i=Ul(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return r==="start"?{...a,[n]:t[s]-i[s]}:r==="end"?{...a,[n]:t[o]-i[o]}:{...a,[n]:(t[s]+t[o])/2-(i[s]+i[o])/2}},Bo=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>ht(r))},l6=(e,t,n,r)=>{let i=n.scene.getSelectedElements(t),s=mt(e),o=HWe(i,s,r,n.scene),a=mt(o);return zg(e.map(l=>a.get(l.id)||l),t,n)};je({name:"alignTop",label:"labels.alignTop",icon:qz,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Bo(t,r),perform:(e,t,n,r)=>({appState:t,elements:l6(e,t,r,{position:"start",axis:"y"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key===J.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!Bo(t,r),type:"button",icon:qz,onClick:()=>n(null),title:`${H("labels.alignTop")}  ${Ue("CtrlOrCmd+Shift+Up")}`,"aria-label":H("labels.alignTop"),visible:Qr(Nn(e),t)})});je({name:"alignBottom",label:"labels.alignBottom",icon:Qz,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Bo(t,r),perform:(e,t,n,r)=>({appState:t,elements:l6(e,t,r,{position:"end",axis:"y"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key===J.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!Bo(t,r),type:"button",icon:Qz,onClick:()=>n(null),title:`${H("labels.alignBottom")}  ${Ue("CtrlOrCmd+Shift+Down")}`,"aria-label":H("labels.alignBottom"),visible:Qr(Nn(e),t)})});je({name:"alignLeft",label:"labels.alignLeft",icon:Jz,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Bo(t,r),perform:(e,t,n,r)=>({appState:t,elements:l6(e,t,r,{position:"start",axis:"x"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key===J.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!Bo(t,r),type:"button",icon:Jz,onClick:()=>n(null),title:`${H("labels.alignLeft")}  ${Ue("CtrlOrCmd+Shift+Left")}`,"aria-label":H("labels.alignLeft"),visible:Qr(Nn(e),t)})});je({name:"alignRight",label:"labels.alignRight",icon:e$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Bo(t,r),perform:(e,t,n,r)=>({appState:t,elements:l6(e,t,r,{position:"end",axis:"x"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e[J.CTRL_OR_CMD]&&e.shiftKey&&e.key===J.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!Bo(t,r),type:"button",icon:e$,onClick:()=>n(null),title:`${H("labels.alignRight")}  ${Ue("CtrlOrCmd+Shift+Right")}`,"aria-label":H("labels.alignRight"),visible:Qr(Nn(e),t)})});je({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:t$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Bo(t,r),perform:(e,t,n,r)=>({appState:t,elements:l6(e,t,r,{position:"center",axis:"y"}),captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!Bo(t,r),type:"button",icon:t$,onClick:()=>n(null),title:H("labels.centerVertically"),"aria-label":H("labels.centerVertically"),visible:Qr(Nn(e),t)})});je({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:n$,trackEvent:{category:"element"},predicate:(e,t,n,r)=>Bo(t,r),perform:(e,t,n,r)=>({appState:t,elements:l6(e,t,r,{position:"center",axis:"x"}),captureUpdate:pe.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!Bo(t,r),type:"button",icon:n$,onClick:()=>n(null),title:H("labels.centerHorizontally"),"aria-label":H("labels.centerHorizontally"),visible:Qr(Nn(e),t)})});var WWe=(e,t,n)=>{let[r,i,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=Ul(e),l=jw(e,t).map(u=>[u,Ul(u)]).sort((u,h)=>u[1][i]-h[1][i]),f=0;for(let u of l)f+=u[1][o];let c=(a[o]-f)/(l.length-1);if(c<0){let u=l.findIndex(U=>U[1][r]===a[r]),h=l.findIndex(U=>U[1][s]===a[s]),g=(l[h][1][i]-l[u][1][i])/(l.length-1),y=l[u][1][i];return l.flatMap(([U,x],v)=>{let E={x:0,y:0};return v!==u&&v!==h&&(y+=g,E[n.axis]=y-x[i]),U.map(k=>Ct(k,{x:k.x+E.x,y:k.y+E.y}))})}let d=a[r];return l.flatMap(([u,h])=>{let g={x:0,y:0};return g[n.axis]=d-h[r],d+=c,d+=h[o],u.map(y=>Ct(y,{x:y.x+g.x,y:y.y+g.y}))})},lse=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>ht(r))},cse=(e,t,n,r)=>{let i=n.scene.getSelectedElements(t),s=WWe(i,n.scene.getNonDeletedElementsMap(),r),o=mt(s);return zg(e.map(a=>o.get(a.id)||a),t,n)};je({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:cse(e,t,r,{space:"between",axis:"x"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.H,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!lse(t,r),type:"button",icon:$Te,onClick:()=>n(null),title:`${H("labels.distributeHorizontally")}  ${Ue("Alt+H")}`,"aria-label":H("labels.distributeHorizontally"),visible:Qr(Nn(e),t)})});je({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:cse(e,t,r,{space:"between",axis:"y"}),captureUpdate:pe.IMMEDIATELY}),keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.V,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Xt,{hidden:!lse(t,r),type:"button",icon:HTe,onClick:()=>n(null),title:`${H("labels.distributeVertically")}  ${Ue("Alt+V")}`,"aria-label":H("labels.distributeVertically"),visible:Qr(Nn(e),t)})});var GWe=je({name:"flipHorizontal",label:"labels.flipHorizontal",icon:$Ie,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:zg(fse(e,r.scene.getNonDeletedElementsMap(),t,"horizontal",r),t,r),appState:t,captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Jt.H}),XWe=je({name:"flipVertical",label:"labels.flipVertical",icon:zIe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:zg(fse(e,r.scene.getNonDeletedElementsMap(),t,"vertical",r),t,r),appState:t,captureUpdate:pe.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Jt.V&&!e[J.CTRL_OR_CMD]}),fse=(e,t,n,r,i)=>{let s=Nt(Nn(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=KWe(s,t,n,r,i),a=mt(o);return e.map(l=>a.get(l.id)||l)},KWe=(e,t,n,r,i)=>{if(e.every(h=>Rt(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{let g=h;return Ct(g,{startArrowhead:g.endArrowhead,endArrowhead:g.startArrowhead})});let{midX:s,midY:o}=Ul(e);lne(e,t,"nw",i.scene,new Map(Array.from(t.values()).map(h=>[h.id,N1(h)])),{flipByX:r==="horizontal",flipByY:r==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),W4(e.filter(wt),t,i.scene.getNonDeletedElements(),i.scene,oh(n),[],n.zoom);let{elbowArrows:a,otherElements:l}=e.reduce((h,g)=>Ge(g)?{...h,elbowArrows:h.elbowArrows.concat(g)}:{...h,otherElements:h.otherElements.concat(g)},{elbowArrows:[],otherElements:[]}),{midX:f,midY:c}=Ul(e),[d,u]=[s-f,o-c];return l.forEach(h=>xe(h,{x:h.x+d,y:h.y+u})),a.forEach(h=>xe(h,{x:h.x+d,y:h.y+u})),e},nx=je({name:"copy",label:"labels.copy",icon:YA,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await Gje(i,r.files,n)}catch(s){return{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:pe.EVENTUALLY}},keyTest:void 0}),wV=je({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i;try{i=await Yje()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),bb?{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:H("hints.firefox_clipboard_write")}}:{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:H("errors.asyncPasteFailedOnRead")}})}try{r.pasteFromClipboard(Vje({types:i}))}catch(s){return console.error(s),{captureUpdate:pe.EVENTUALLY,appState:{...t,errorMessage:H("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:pe.EVENTUALLY}},keyTest:void 0}),vV=je({name:"cut",label:"labels.cut",icon:AIe,trackEvent:{category:"element"},perform:(e,t,n,r)=>(nx.perform(e,t,n,r),Lie.perform(e,t,null,r)),keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.X}),EV=je({name:"copyAsSvg",label:"labels.copyAsSvg",icon:HIe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:pe.EVENTUALLY};let{exportedElements:i,exportingFrame:s}=l7(e,t,!0);try{await c7("clipboard-svg",i,t,r.files,{...t,exportingFrame:s,name:r.getName()});let o=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:H("toast.copyToClipboardAsSvg",{exportSelection:o.length?H("toast.selection"):H("toast.canvas"),exportColorScheme:t.exportWithDarkMode?H("buttons.darkMode"):H("buttons.lightMode")})}},captureUpdate:pe.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:pe.EVENTUALLY}}},predicate:e=>$N&&e.length>0,keywords:["svg","clipboard","copy"]}),kV=je({name:"copyAsPng",label:"labels.copyAsPng",icon:VIe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:pe.EVENTUALLY};let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=l7(e,t,!0);try{return await c7("clipboard",s,t,r.files,{...t,exportingFrame:o,name:r.getName()}),{appState:{...t,toast:{message:H("toast.copyToClipboardAsPng",{exportSelection:i.length?H("toast.selection"):H("toast.canvas"),exportColorScheme:t.exportWithDarkMode?H("buttons.darkMode"):H("buttons.lightMode")})}},captureUpdate:pe.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:pe.EVENTUALLY}}},predicate:e=>HN&&e.length>0,keyTest:e=>e.code===Jt.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),SV=je({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{Ty(NOe(i))}catch{throw new Error(H("errors.copyToSystemClipboardFailed"))}return{captureUpdate:pe.EVENTUALLY}},predicate:(e,t,n,r)=>$N&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(Ve),keywords:["text","clipboard","copy"]}),CV=je({name:"gridMode",icon:YIe,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:pe.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[J.CTRL_OR_CMD]&&e.code===Jt.QUOTE}),FM=je({name:"zenMode",label:"buttons.zenMode",icon:GIe,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:pe.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.Z}),YWe=je({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:WIe,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:pe.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.S}),zM=je({name:"stats",label:"stats.fullTitle",icon:FIe,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:pe.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.SLASH}),ZWe=je({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>r.scene.getSelectedElements(t).some(i=>Ta(i)),perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=r.scene.getNonDeletedElementsMap();return i.forEach(o=>{var l;let a=At(o,s);if(a){let{width:f,height:c}=ds(a.originalText,wn(a),a.lineHeight),d=kOe(o.id);lte(o.id);let{x:u,y:h}=Fw(o,a,s);xe(a,{containerId:null,width:f,height:c,text:a.originalText,x:u,y:h}),xe(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(g=>g.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:pe.IMMEDIATELY}}}),qWe=je({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);if(i.length===2){let s=Ve(i[0])||Ve(i[1]),o;if(zh(i[0])?o=i[0]:zh(i[1])&&(o=i[1]),s&&o&&At(o,r.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s,o;Ve(i[0])&&zh(i[1])?(s=i[0],o=i[1]):(s=i[1],o=i[0]),xe(s,{containerId:o.id,verticalAlign:Po.MIDDLE,textAlign:Ub.CENTER,autoResize:!0}),xe(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});let a=o.height;return Rs(s,o,r.scene.getNonDeletedElementsMap()),X4(o.id,a),{elements:QWe(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:pe.IMMEDIATELY}}}),QWe=(e,t,n)=>{let r=e.slice(),i=r.findIndex(o=>o.id===n.id);r.splice(i,1);let s=r.findIndex(o=>o.id===t.id);return r.splice(s+1,0,n),Nc(r,mt([t,n])),r},JWe=(e,t,n)=>{let r=e.slice(),i=r.findIndex(o=>o.id===t.id);r.splice(i,1);let s=r.findIndex(o=>o.id===n.id);return r.splice(s,0,t),Nc(r,mt([t,n])),r},eGe=je({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=i.every(o=>Ve(o));return i.length>0&&s},perform:(e,t,n,r)=>{var a;let i=r.scene.getSelectedElements(t),s=e.slice(),o={};for(let l of i)if(Ve(l)){let f=Ic({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:n6("rectangle")?qr.ADAPTIVE_RADIUS:qr.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-Zr,y:l.y-Zr,width:y1(l.width,"rectangle"),height:y1(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){let c=l.boundElements.filter(d=>d.type==="arrow").map(d=>d.id);s.filter(d=>c.includes(d.id)).forEach(d=>{let u=d.startBinding,h=d.endBinding;(u==null?void 0:u.elementId)===l.id&&(u={...u,elementId:f.id}),(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:f.id}),(u||h)&&xe(d,{startBinding:u,endBinding:h},!1)})}xe(l,{containerId:f.id,verticalAlign:Po.MIDDLE,boundElements:null,textAlign:Ub.CENTER,autoResize:!0},!1),Rs(l,f,r.scene.getNonDeletedElementsMap()),s=JWe([...s,f],f,l),o[f.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:pe.IMMEDIATELY}}}),RR=380,tGe=42,$M=5,dse=85,nGe=500,HM=!1,e3=new Map,rGe=({element:e,elementsMap:t,setAppState:n,onLinkOpen:r,setToast:i,updateEmbedValidationStatus:s})=>{let o=Ly(),a=Dy(),l=di(),f=e.link||"",[c,d]=T.useState(f),u=T.useRef(null),h=o.showHyperlinkPopup==="editor",g=T.useCallback(()=>{var k;if(!u.current)return;let E=Do(u.current.value)||null;if(!e.link&&E&&Pn("hyperlink","create"),Qs(e)){if(((k=o.activeEmbeddable)==null?void 0:k.element)===e&&n({activeEmbeddable:null}),!E){xe(e,{link:null}),s(e,!1);return}if(!G3(E,a.validateEmbeddable))E&&i({message:H("toast.unableToEmbed"),closable:!0}),e.link&&e3.set(e.id,e.link),xe(e,{link:E}),s(e,!1);else{let{width:M,height:S}=e,A=Yp(E);(A==null?void 0:A.error)instanceof URIError&&i({message:H("toast.unrecognizedLinkFormat"),closable:!0});let I=A?A.intrinsicSize.w/A.intrinsicSize.h:1,R=e3.get(e.id)!==e.link;xe(e,{...R?{width:(A==null?void 0:A.type)==="video"?M>S?M:S*I:M,height:(A==null?void 0:A.type)==="video"&&M>S?M/I:S}:{},link:E}),s(e,!0),e3.has(e.id)&&e3.delete(e.id)}}else xe(e,{link:E})},[e,i,a.validateEmbeddable,o.activeEmbeddable,n,s]);T.useLayoutEffect(()=>()=>{g()},[g]),T.useEffect(()=>{h&&(u!=null&&u.current)&&!(l.viewport.isMobile||l.isTouchScreen)&&u.current.select()},[h,l.viewport.isMobile,l.isTouchScreen]),T.useEffect(()=>{let E=null,k=M=>{h||(E&&clearTimeout(E),oGe(e,t,o,O(M.clientX,M.clientY))&&(E=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},nGe)))};return window.addEventListener("pointermove",k,!1),()=>{window.removeEventListener("pointermove",k,!1),E&&clearTimeout(E)}},[o,e,h,n,t]);let y=T.useCallback(()=>{Pn("hyperlink","delete"),xe(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e]),U=()=>{Pn("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x,y:v}=use(e,o,t);return o.contextMenu||o.selectedElementsAreBeingDragged||o.resizingElement||o.isRotating||o.openMenu||o.viewModeEnabled?null:m.jsxs("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${v}px`,left:`${x}px`,width:RR,padding:$M},children:[h?m.jsx("input",{className:Ye("excalidraw-hyperlinkContainer-input"),placeholder:H("labels.link.hint"),ref:u,value:c,onChange:E=>d(E.target.value),autoFocus:!0,onKeyDown:E=>{E.stopPropagation(),E[J.CTRL_OR_CMD]&&E.key===J.K&&E.preventDefault(),(E.key===J.ENTER||E.key===J.ESCAPE)&&(g(),n({showHyperlinkPopup:"info"}))}}):e.link?m.jsx("a",{href:Do(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:fte(e.link)?"_self":"_blank",onClick:E=>{if(e.link&&r){let k=zJ("excalidraw-link",E.nativeEvent);r({...e,link:Do(e.link)},k),k.defaultPrevented&&E.preventDefault()}},rel:"noopener noreferrer",children:e.link}):m.jsx("div",{className:"excalidraw-hyperlinkContainer-link",children:H("labels.link.empty")}),m.jsxs("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!h&&m.jsx(Xt,{type:"button",title:H("buttons.edit"),"aria-label":H("buttons.edit"),label:H("buttons.edit"),onClick:U,className:"excalidraw-hyperlinkContainer--edit",icon:vb}),m.jsx(Xt,{type:"button",title:H("labels.linkToElement"),"aria-label":H("labels.linkToElement"),label:H("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:mee}),f&&!Qs(e)&&m.jsx(Xt,{type:"button",title:H("buttons.remove"),"aria-label":H("buttons.remove"),label:H("buttons.remove"),onClick:y,className:"excalidraw-hyperlinkContainer--remove",icon:p1})]})]})},use=(e,t,n)=>{let[r,i]=vt(e,n),{x:s,y:o}=dl({sceneX:r+e.width/2,sceneY:i},t),a=s-t.offsetLeft-RR/2,l=o-t.offsetTop-dse;return{x:a,y:l}},AV=(e,t)=>{var r;let n=Nt(e,t);return Qs(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"},M2=null,iGe=(e,t,n)=>{M2&&clearTimeout(M2),M2=window.setTimeout(()=>sGe(e,t,n),iMe)},sGe=(e,t,n)=>{if(!e.link)return;let r=C2();r.classList.add("excalidraw-tooltip--visible"),r.style.maxWidth="20rem",r.textContent=v2(e.link)?H("labels.link.goToElement"):e.link;let[i,s,o,a]=vt(e,n),[l,f,c,d]=MN([i,s,o,a],e.angle,t),u=dl({sceneX:l,sceneY:f},t);rse(r,{left:u.x,top:u.y,width:c,height:d},"top"),Pn("hyperlink","tooltip","link-icon"),HM=!0},MV=()=>{M2&&clearTimeout(M2),HM&&(HM=!1,C2().classList.remove("excalidraw-tooltip--visible"))},oGe=(e,t,n,[r,i])=>{let{x:s,y:o}=_n({clientX:r,clientY:i},n),a=15/n.zoom.value;if(mN(s,o,e,t))return!1;let[l,f,c]=vt(e,t);if(s>=l&&s<=c&&o>=f-dse&&o<=f)return!1;let{x:d,y:u}=use(e,n,t);return!(r>=d-a&&r<=d+RR+$M*2+a&&i>=u-a&&i<=u+a+$M*2+tGe)},hse=je({name:"hyperlink",label:(e,t)=>AV(e,t),icon:QA,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:pe.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.K,predicate:(e,t)=>Nt(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Nt(e,t);return m.jsx(Xt,{type:"button",icon:QA,"aria-label":H(AV(e,t)),title:`${Qs(e[0])?H("labels.link.labelEmbed"):H("labels.link.label")} - ${Ue("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:r.length===1&&!!r[0].link})}}),MS=e=>e.every(t=>!t.locked),aGe=je({name:"toggleElementLock",label:(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return r.length===1&&!ht(r[0])?r[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":MS(r)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{let n=Nt(t,e);return MS(n)?lN:Aw},trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return i.length>0&&!i.some(s=>s.locked&&s.frameId)},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!i.length)return!1;let s=MS(i),o=mt(i);return{elements:e.map(a=>o.has(a.id)?Ct(a,{locked:s}):a),appState:{...t,selectedLinearElement:s?null:t.selectedLinearElement},captureUpdate:pe.IMMEDIATELY}},keyTest:(e,t,n,r)=>e.key.toLocaleLowerCase()===J.L&&e[J.CTRL_OR_CMD]&&e.shiftKey&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),lGe=je({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:Aw,predicate:(e,t)=>Nt(e,t).length===0&&e.some(n=>n.locked),perform:(e,t)=>{let n=e.filter(r=>r.locked);return{elements:e.map(r=>r.locked?Ct(r,{locked:!1}):r),appState:{...t,selectedElementIds:Object.fromEntries(n.map(r=>[r.id,!0]))},captureUpdate:pe.IMMEDIATELY}},label:"labels.elementLock.unlockAll"}),cGe=()=>{let[e,t]=T.useState(null),n=T.useCallback(r=>t(r),[]);return[e,n]},fGe=e=>{let{closeOnClickOutside:t=!0}=e,n=Gie({className:"excalidraw-modal-container"}),r=T.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;let i=s=>{s.key===J.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return ai.createPortal(m.jsxs("div",{className:Ye("Modal",e.className,{"animations-disabled":r.current}),role:"dialog","aria-modal":"true",onKeyDown:i,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[m.jsx("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),m.jsx("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)},pse=Mi(new Map),TV=async e=>await Xte({elements:e,appState:{exportBackground:!1,viewBackgroundColor:Lt.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),dGe=(e,t,n)=>{let[r,i]=T.useState();return T.useEffect(()=>{if(t)if(e){let s=n.get(e);s?i(s):(async()=>{var a;let o=await TV(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),i(o))})()}else(async()=>{let s=await TV(t);i(s)})()},[e,t,n,i]),r},mse=()=>{let[e]=Ur(pse);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:t=>{t.forEach(n=>e.delete(n))},svgCache:e}},uGe=class{constructor(){Q(this,"jobs",[]),Q(this,"running",!1)}tick(){if(this.running)return;let e=this.jobs.shift();e?(this.running=!0,e.promise.resolve(Rg(e.jobFactory,...e.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(e,...t){let n=jMe();return this.jobs.push({jobFactory:e,promise:n,args:t}),this.tick(),n}},hGe=new Zl,Db=Mi({status:"loaded",isInitialized:!1,libraryItems:[]}),x5=e=>jf(e),pGe=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((r,i)=>r.id===t.elements[i].id&&r.versionNonce===t.elements[i].versionNonce)),mGe=(e,t)=>{let n=[];for(let r of t)pGe(e,r)&&n.push(r);return[...n,...e]},gGe=(e,t)=>{let n=mt(t),r={deletedItems:new Map,addedItems:new Map};for(let s of e)n.has(s.id)||r.deletedItems.set(s.id,s);let i=mt(e);for(let s of t)i.has(s.id)||r.addedItems.set(s.id,s);return r},bGe=class{constructor(e){Q(this,"currLibraryItems",[]),Q(this,"prevLibraryItems",x5(this.currLibraryItems)),Q(this,"app"),Q(this,"updateQueue",[]),Q(this,"getLastUpdateTask",()=>this.updateQueue[this.updateQueue.length-1]),Q(this,"notifyListeners",()=>{var t,n;if(this.updateQueue.length>0)ml.set(Db,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{ml.set(Db,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{let r=this.prevLibraryItems;this.prevLibraryItems=x5(this.currLibraryItems);let i=x5(this.currLibraryItems);(n=(t=this.app.props).onLibraryChange)==null||n.call(t,i),hGe.trigger(gGe(r,i),i)}catch(r){console.error(r)}}}),Q(this,"destroy",()=>{this.updateQueue=[],this.currLibraryItems=[],ml.set(pse,new Map)}),Q(this,"resetLibrary",()=>this.setLibrary([])),Q(this,"getLatestLibrary",()=>new Promise(async t=>{try{let n=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?t(this.getLatestLibrary()):t(x5(n))}catch{return t(this.currLibraryItems)}})),Q(this,"updateLibrary",async({libraryItems:t,prompt:n=!1,merge:r=!1,openLibraryMenu:i=!1,defaultStatus:s="unpublished"})=>(i&&this.app.setState({openSidebar:{name:bl.name,tab:N4}}),this.setLibrary(()=>new Promise(async(o,a)=>{try{let l=await(typeof t=="function"&&!(t instanceof Blob)?t(this.currLibraryItems):t),f;l instanceof Blob?f=await PBe(l,s):f=zN(l,s),!n||window.confirm(H("alerts.confirmAddLibrary",{numShapes:f.length}))?(n&&this.app.focusContainer(),o(r?mGe(this.currLibraryItems,f):f)):a(new Iw)}catch(l){a(l)}})))),Q(this,"setLibrary",t=>{let n=new Promise(async(r,i)=>{try{await this.getLastUpdateTask(),typeof t=="function"&&(t=t(this.currLibraryItems)),this.currLibraryItems=x5(await t),r(this.currLibraryItems)}catch(s){i(s)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==n),this.notifyListeners()});return this.updateQueue.push(n),this.notifyListeners(),n}),this.app=e}},yGe=bGe,gse=e=>{let t=Math.ceil(Math.sqrt(e.length)),n=[],r=u=>e.slice(u*t,u*t+t).reduce((h,g)=>{let{height:y}=Ul(g.elements);return Math.max(h,y)},0),i=u=>{let h=0,g=0,y=0;for(let U of e){if(h%t===0&&(g=0),g===u){let{width:x}=Ul(U.elements);y=Math.max(y,x)}h++,g++}return y},s=0,o=0,a=0,l=0,f=0,c=0,d=0;for(let u of e){f&&f%t===0&&(o+=a+50,s=0,c=0,d++),c===0&&(a=r(d)),l=i(c);let{minX:h,minY:g,width:y,height:U}=Ul(u.elements),x=(l-y)/2,v=(a-U)/2;n.push(...u.elements.map(E=>({...E,x:E.x+s+x-h,y:E.y+o+v-g}))),s+=l+50,f++,c++}return n},t3=class VM{constructor(t){Q(this,"adapter"),this.adapter=t}static async getLibraryItems(t,n,r=!0){let i=()=>new Promise(async(s,o)=>{try{let a=await t.load({source:n});s(zN((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return r?VM.queue.push(i):i()}getLibraryItems(t){return VM.getLibraryItems(this.adapter,t,!1)}};Q(t3,"queue",new uGe),Q(t3,"run",async(e,t)=>{let n=new t3(e);return t3.queue.push(()=>t(n))});var UGe=T.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:s},o)=>m.jsx("div",{className:Ye("Stack Stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...s},ref:o,children:e})),xGe=T.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:s},o)=>m.jsx("div",{className:Ye("Stack Stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...s},ref:o,children:e})),Ua={Row:UGe,Col:xGe},wGe=({theme:e,id:t,libraryReturnUrl:n})=>{let r=n||window.location.origin+window.location.pathname;return m.jsx("a",{className:"library-menu-browse-button",href:`${It.VITE_APP_LIBRARY_URL}?target=${window.name||"_blank"}&referrer=${r}&useHash=true&token=${t}&theme=${e}&version=${Ew.excalidrawLibrary}`,target:"_excalidraw_libraries",children:H("labels.libraries")})},vGe=wGe,bse=({libraryReturnUrl:e,theme:t,id:n,style:r,children:i,className:s})=>m.jsxs("div",{className:Ye("library-menu-control-buttons",s),style:r,children:[m.jsx(vGe,{id:n,libraryReturnUrl:e,theme:t}),i]}),EGe=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,kGe=/{{([\w-]+)}}/,SGe=/<([\w-]+)>/,CGe=/<\/([\w-]+)>/,AGe=(e,t)=>{let n=[{name:"",children:[]}];return e.split(EGe).filter(Boolean).forEach(r=>{let i=r.match(SGe),s=r.match(CGe),o=r.match(kGe);if(i!==null){let a=i[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){let a=n.pop(),l=Ne.createElement(Ne.Fragment,{},...a.children),f=t[a.name];typeof f=="function"&&n[n.length-1].children.push(f(l))}else console.warn(`Trans: unexpected end tag ${r} for interpolating ${e}`);else if(o!==null){let a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(r)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},MGe=({i18nKey:e,children:t,...n})=>{let{t:r}=ms();return Ne.createElement(Ne.Fragment,{},...AGe(r(e),n))},bc=MGe,TGe=({label:e,onClick:t,className:n,children:r,actionType:i,type:s="button",isLoading:o,...a})=>{let l=i?`Dialog__action-button--${i}`:"";return m.jsxs("button",{className:Ye("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[r&&m.jsx("div",{style:o?{visibility:"hidden"}:{},children:r}),m.jsx("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&m.jsx("div",{style:{position:"absolute",inset:0},children:m.jsx(Jf,{})})]})},Wg=TGe,IGe=e=>{let{onConfirm:t,onCancel:n,children:r,confirmText:i=H("buttons.confirm"),cancelText:s=H("buttons.cancel"),className:o="",...a}=e,l=ui(),f=n7(_R),{container:c}=jc();return m.jsxs(Nl,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[r,m.jsxs("div",{className:"confirm-dialog-buttons",children:[m.jsx(Wg,{label:s,onClick:()=>{l({openMenu:null}),f(!1),ai.flushSync(()=>{n()}),c==null||c.focus()}}),m.jsx(Wg,{label:i,onClick:()=>{l({openMenu:null}),f(!1),ai.flushSync(()=>{t()}),c==null||c.focus()},actionType:"danger"})]})]})},yse=IGe,Wh=class{static has(e){try{return!!window.localStorage.getItem(e)}catch(t){return console.warn(`localStorage.getItem error: ${t.message}`),!1}}static get(e){try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn(`localStorage.getItem error: ${t.message}`),null}}};Q(Wh,"set",(e,t)=>{try{return window.localStorage.setItem(e,JSON.stringify(t)),!0}catch(n){return console.warn(`localStorage.setItem error: ${n.message}`),!1}}),Q(Wh,"delete",e=>{try{window.localStorage.removeItem(e)}catch(t){console.warn(`localStorage.removeItem error: ${t.message}`)}});var NGe=async e=>{let t=Math.round(8),n=Math.max(Math.round(128/64),2),r=PMe(e,6),i=document.createElement("canvas");i.width=r[0].length*128+(r[0].length+1)*(t*2)-t*2,i.height=r.length*128+(r.length+1)*(t*2)-t*2;let s=i.getContext("2d");s.fillStyle=ki.white,s.fillRect(0,0,i.width,i.height);for(let[o,a]of e.entries()){let l=await VN({elements:a.elements,files:null,maxWidthOrHeight:128}),{width:f,height:c}=l,d=Math.floor(o/6)*(128+t*2),u=o%6*(128+t*2);s.drawImage(l,u+(128-f)/2+t,d+(128-c)/2+t),s.lineWidth=n,s.strokeStyle=ki.gray[4],s.strokeRect(u+t/2,d+t/2,128+t,128+t)}return await UM(new File([await Rb(i)],"preview",{type:ft.png}),{outputType:ft.jpg,maxWidthOrHeight:5e3})},RGe=({libItem:e,appState:t,index:n,onChange:r,onRemove:i})=>{let s=T.useRef(null),o=T.useRef(null);return T.useEffect(()=>{let a=s.current;a&&(async()=>{let l=await Xte({elements:e.elements,appState:{...t,viewBackgroundColor:ki.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),m.jsxs("div",{className:"single-library-item",children:[e.status==="published"&&m.jsx("span",{className:"single-library-item-status",children:H("labels.statusPublished")}),m.jsx("div",{ref:s,className:"single-library-item__svg"}),m.jsx(Xt,{"aria-label":H("buttons.remove"),type:"button",icon:r6,className:"single-library-item--remove",onClick:i.bind(null,e.id),title:H("buttons.remove")}),m.jsxs("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[m.jsxs("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[m.jsxs("div",{style:{padding:"0.5em 0"},children:[m.jsx("span",{style:{fontWeight:500,color:ki.gray[6]},children:H("publishDialog.itemName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{r(a.target.value,n)}})]}),m.jsx("span",{className:"error",children:e.error})]})]})},_Ge=({onClose:e,libraryItems:t,appState:n,onSuccess:r,onError:i,updateItemsInStorage:s,onRemove:o})=>{let[a,l]=T.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[f,c]=T.useState(!1);T.useEffect(()=>{let E=Wh.get(g2.PUBLISH_LIBRARY);E&&l(E)},[]);let[d,u]=T.useState(t.slice());T.useEffect(()=>{u(t.slice())},[t]);let h=E=>{l({...a,[E.target.name]:E.target.value})},g=async E=>{E.preventDefault(),c(!0);let k=[],M=!1;if(d.forEach(_=>{let P="";_.name||(P=H("publishDialog.errors.required"),M=!0),k.push({..._,error:P})}),M){u(k),c(!1);return}let S=await NGe(d),A={type:ka.excalidrawLibrary,version:Ew.excalidrawLibrary,source:YI,libraryItems:d},I=JSON.stringify(A,null,2),R=new Blob([I],{type:"application/json"}),D=new FormData;D.append("excalidrawLib",R),D.append("previewImage",S),D.append("previewImageType",S.type),D.append("title",a.name),D.append("authorName",a.authorName),D.append("githubHandle",a.githubHandle),D.append("name",a.name),D.append("description",a.description),D.append("twitterHandle",a.twitterHandle),D.append("website",a.website),fetch(`${It.VITE_APP_LIBRARY_BACKEND}/submit`,{method:"post",body:D}).then(_=>_.ok?_.json().then(({url:P})=>{Wh.delete(g2.PUBLISH_LIBRARY),r({url:P,authorName:a.authorName,items:d})}):_.json().catch(()=>{throw new Error(_.statusText||"something went wrong")}).then(P=>{throw new Error(P.message||_.statusText||"something went wrong")}),_=>{console.error(_),i(_),c(!1)}).catch(_=>{console.error(_),i(_),c(!1)})},y=()=>{let E=[];return d.forEach((k,M)=>{E.push(m.jsx("div",{className:"single-library-item-wrapper",children:m.jsx(RGe,{libItem:k,appState:n,index:M,onChange:(S,A)=>{let I=d.slice();I[A].name=S,u(I)},onRemove:o})},M))}),m.jsx("div",{className:"selected-library-items",children:E})},U=T.useCallback(()=>{s(d),Wh.set(g2.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),x=!!t.length,v=t.some(E=>E.status==="published");return m.jsx(Nl,{onCloseRequest:U,title:H("publishDialog.title"),className:"publish-library",children:x?m.jsxs("form",{onSubmit:g,children:[m.jsx("div",{className:"publish-library-note",children:m.jsx(bc,{i18nKey:"publishDialog.noteDescription",link:E=>m.jsx("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:E})})}),m.jsx("span",{className:"publish-library-note",children:m.jsx(bc,{i18nKey:"publishDialog.noteGuidelines",link:E=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:E})})}),m.jsx("div",{className:"publish-library-note",children:H("publishDialog.noteItems")}),v&&m.jsx("span",{className:"publish-library-note publish-library-warning",children:H("publishDialog.republishWarning")}),y(),m.jsxs("div",{className:"publish-library__fields",children:[m.jsxs("label",{children:[m.jsxs("div",{children:[m.jsx("span",{children:H("publishDialog.libraryName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:H("publishDialog.placeholder.libraryName")})]}),m.jsxs("label",{style:{alignItems:"flex-start"},children:[m.jsxs("div",{children:[m.jsx("span",{children:H("publishDialog.libraryDesc")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:H("publishDialog.placeholder.libraryDesc")})]}),m.jsxs("label",{children:[m.jsxs("div",{children:[m.jsx("span",{children:H("publishDialog.authorName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:H("publishDialog.placeholder.authorName")})]}),m.jsxs("label",{children:[m.jsx("span",{children:H("publishDialog.githubUsername")}),m.jsx("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:H("publishDialog.placeholder.githubHandle")})]}),m.jsxs("label",{children:[m.jsx("span",{children:H("publishDialog.twitterUsername")}),m.jsx("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:H("publishDialog.placeholder.twitterHandle")})]}),m.jsxs("label",{children:[m.jsx("span",{children:H("publishDialog.website")}),m.jsx("input",{type:"text",name:"website",pattern:"https?://.+",title:H("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:H("publishDialog.placeholder.website")})]}),m.jsx("span",{className:"publish-library-note",children:m.jsx(bc,{i18nKey:"publishDialog.noteLicense",link:E=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:E})})})]}),m.jsxs("div",{className:"publish-library__buttons",children:[m.jsx(Wg,{label:H("buttons.cancel"),onClick:U,"data-testid":"cancel-clear-canvas-button"}),m.jsx(Wg,{type:"submit",label:H("buttons.submit"),actionType:"primary",isLoading:f})]})]}):m.jsx("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:H("publishDialog.atleastOneLibItem")})})},PGe=_Ge,Use=({className:e="",children:t,onToggle:n,title:r,...i})=>{let s=di(),o=Ye(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return m.jsx("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:r,...i,children:t})},DGe=Use;Use.displayName="DropdownMenuTrigger";var xse=()=>m.jsx("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}}),LGe=xse;xse.displayName="DropdownMenuSeparator";var wse=({children:e,onClickOutside:t,className:n="",onSelect:r,style:i})=>{let s=di(),o=T.useRef(null),a=i7({onClickOutside:t});SR(o,()=>{var f;(f=a.onClickOutside)==null||f.call(a)}),T.useEffect(()=>{let f=d=>{var u;d.key===J.ESCAPE&&(d.stopImmediatePropagation(),(u=a.onClickOutside)==null||u.call(a))},c={capture:!0};return document.addEventListener("keydown",f,c),()=>{document.removeEventListener("keydown",f,c)}},[a]);let l=Ye(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return m.jsx(qie.Provider,{value:{onSelect:r},children:m.jsx("div",{ref:o,className:l,style:i,"data-testid":"dropdown-menu",children:s.editor.isMobile?m.jsx(Ua.Col,{className:"dropdown-menu-container",children:e}):m.jsx(xl,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};wse.displayName="DropdownMenuContent";var OGe=wse,vse=({icon:e,shortcut:t,href:n,children:r,onSelect:i,className:s="",selected:o,rel:a="noreferrer",...l})=>{let f=Jie(l.onClick,i);return m.jsx("a",{...l,href:n,target:"_blank",rel:"noreferrer",className:Qie(s,o),title:l.title??l["aria-label"],onClick:f,children:m.jsx(ese,{icon:e,shortcut:t,children:r})})},rx=vse;vse.displayName="DropdownMenuItemLink";var jGe=({children:e,className:t="",selected:n,...r})=>m.jsx("div",{...r,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),BGe=jGe,FGe=e=>Ne.Children.toArray(e).find(n=>Ne.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger")||null,zGe=e=>Ne.Children.toArray(e).find(n=>Ne.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent")||null,od=({children:e,open:t})=>{let n=FGe(e),r=zGe(e);return m.jsxs(m.Fragment,{children:[n,t&&r]})};od.Trigger=DGe;od.Content=OGe;od.Item=Ra;od.ItemLink=rx;od.ItemCustom=BGe;od.Group=jM;od.Separator=LGe;var Kn=od;od.displayName="DropdownMenu";var $Ge=(e,t)=>e.filter(n=>t.includes(n.id)),HGe=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:r,resetLibrary:i,onSelectItems:s,appState:o,className:a})=>{let[l]=Ur(Db),[f,c]=Ur(_R),d=()=>{let D=t.length?H("alerts.removeItemsFromsLibrary",{count:t.length}):H("alerts.resetLibrary"),_=t.length?H("confirmDialog.removeItemsFromLib"):H("confirmDialog.resetLibrary");return m.jsx(yse,{onConfirm:()=>{t.length?r():i(),h(!1)},onCancel:()=>{h(!1)},title:_,children:m.jsx("p",{children:D})})},[u,h]=T.useState(!1),g=!!t.length,y=g?l.libraryItems.filter(D=>t.includes(D.id)):l.libraryItems,U=H(g?"buttons.remove":"buttons.resetLibrary"),[x,v]=T.useState(!1),[E,k]=T.useState(null),M=T.useCallback(()=>m.jsxs(Nl,{onCloseRequest:()=>k(null),title:H("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[m.jsx("p",{children:m.jsx(bc,{i18nKey:"publishSuccessDialog.content",authorName:E.authorName,link:D=>m.jsx("a",{href:E==null?void 0:E.url,target:"_blank",rel:"noopener noreferrer",children:D})})}),m.jsx(Xt,{type:"button",title:H("buttons.close"),"aria-label":H("buttons.close"),label:H("buttons.close"),onClick:()=>k(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[k,E]),S=(D,_)=>{v(!1),k({url:D.url,authorName:D.authorName});let P=_.slice();P.forEach($=>{t.includes($.id)&&($.status="published")}),n.setLibrary(P)},A=async()=>{try{await n.updateLibrary({libraryItems:CN({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(D){if((D==null?void 0:D.name)==="AbortError"){console.warn(D);return}e({errorMessage:H("errors.importLibraryError")})}},I=async()=>{let D=g?y:await n.getLatestLibrary();oje(D).catch(jJ).catch(_=>{e({errorMessage:_.message})})},R=()=>m.jsxs(Kn,{open:f,children:[m.jsx(Kn.Trigger,{onToggle:()=>c(!f),children:gTe}),m.jsxs(Kn.Content,{onClickOutside:()=>c(!1),onSelect:()=>c(!1),className:"library-menu",children:[!g&&m.jsx(Kn.Item,{onSelect:A,icon:fN,"data-testid":"lib-dropdown--load",children:H("buttons.load")}),!!y.length&&m.jsx(Kn.Item,{onSelect:I,icon:Mw,"data-testid":"lib-dropdown--export",children:H("buttons.export")}),!!y.length&&m.jsx(Kn.Item,{onSelect:()=>h(!0),icon:p1,children:U}),g&&m.jsx(Kn.Item,{icon:CIe,onSelect:()=>v(!0),"data-testid":"lib-dropdown--remove",children:H("buttons.publishLibrary")})]})]});return m.jsxs("div",{className:Ye("library-menu-dropdown-container",a),children:[R(),t.length>0&&m.jsx("div",{className:"library-actions-counter",children:t.length}),u&&d(),x&&m.jsx(PGe,{onClose:()=>v(!1),libraryItems:$Ge(l.libraryItems,t),appState:o,onSuccess:D=>S(D,l.libraryItems),onError:D=>window.alert(D),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:D=>s(t.filter(_=>_!==D))}),E&&M()]})},IV=({selectedItems:e,onSelectItems:t,className:n})=>{let{library:r}=Oc(),{clearLibraryCache:i,deleteItemsFromLibraryCache:s}=mse(),o=Ds(),a=ui(),[l]=Ur(Db),f=async c=>{let d=c.filter(u=>!e.includes(u.id));r.setLibrary(d).catch(()=>{a({errorMessage:H("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return m.jsx(HGe,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:r,onRemoveFromLibrary:()=>f(l.libraryItems),resetLibrary:()=>{r.resetLibrary(),i()},className:n})},VGe=T.memo(({id:e,elements:t,isPending:n,onClick:r,selected:i,onToggle:s,onDrag:o,svgCache:a})=>{let l=T.useRef(null),f=dGe(e,t,a);T.useEffect(()=>{let g=l.current;if(g)return f&&(g.innerHTML=f.outerHTML),()=>{g.innerHTML=""}},[f]);let[c,d]=T.useState(!1),u=di().editor.isMobile,h=n&&m.jsx("div",{className:"library-unit__adder",children:mTe});return m.jsxs("div",{className:Ye("library-unit",{"library-unit__active":t,"library-unit--hover":t&&c,"library-unit--selected":i,"library-unit--skeleton":!f}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[m.jsx("div",{className:Ye("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?g=>{e&&g.shiftKey?s(e,g):r(e)}:void 0,onDragStart:g=>{if(!e){g.preventDefault();return}d(!1),o(e,g)}}),h,e&&t&&(c||u||i)&&m.jsx(IR,{checked:i,onChange:(g,y)=>s(e,y),className:"library-unit__checkbox"})]})}),WGe=()=>m.jsx("div",{className:"library-unit library-unit--skeleton"});function GGe(){return[!1,T.useCallback(e=>e(),[])]}var XGe=Ne.useTransition||GGe,NV=({children:e})=>m.jsx("div",{className:"library-menu-items-container__grid",children:e}),TS=T.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:r,onClick:i,svgCache:s,itemsRenderedPerBatch:o})=>{let[,a]=XGe(),[l,f]=T.useState(0);return T.useEffect(()=>{l<e.length&&a(()=>{f(l+o)})},[l,e.length,a,o]),m.jsx(m.Fragment,{children:e.map((c,d)=>d<l?m.jsx(VGe,{elements:c==null?void 0:c.elements,isPending:!(c!=null&&c.id)&&!!(c!=null&&c.elements),onClick:i,svgCache:s,id:c==null?void 0:c.id,selected:r(c.id),onToggle:t,onDrag:n},(c==null?void 0:c.id)??d):m.jsx(WGe,{},d))})}),KGe=Mi(0),YGe=e=>{let[t,n]=Ur(KGe);return T.useEffect(()=>{let{current:r}=e;if(!r)return;let i=Uy(()=>{let{scrollTop:s}=r;n(s)},200);return r.addEventListener("scroll",i),()=>{i.cancel(),r.removeEventListener("scroll",i)}},[e,n]),t},ZGe=17,qGe=64;function QGe({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:r,pendingElements:i,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:f}){let c=T.useRef(null),d=YGe(c);T.useEffect(()=>{var D;d>0&&((D=c.current)==null||D.scrollTo(0,d))},[]);let{svgCache:u}=mse(),h=T.useMemo(()=>t.filter(D=>D.status!=="published"),[t]),g=T.useMemo(()=>t.filter(D=>D.status==="published"),[t]),y=!t.length&&!i.length,U=!i.length&&!h.length&&!g.length,[x,v]=T.useState(null),E=T.useCallback((D,_)=>{let P=!f.includes(D),$=[...h,...g];if(P){if(_.shiftKey&&x){let L=$.findIndex(G=>G.id===x),B=$.findIndex(G=>G.id===D);if(L===-1||B===-1){l([...f,D]);return}let V=mt(f),z=$.reduce((G,W,F)=>((F>=L&&F<=B||V.has(W.id))&&G.push(W.id),G),[]);l(z)}else l([...f,D]);v(D)}else v(null),l(f.filter(L=>L!==D))},[x,l,g,f,h]),k=T.useCallback(D=>{let _;return f.includes(D)?_=t.filter(P=>f.includes(P.id)):_=t.filter(P=>P.id===D),_.map(P=>({...P,elements:xte(P.elements,{randomizeSeed:!0})}))},[t,f]),M=T.useCallback((D,_)=>{_.dataTransfer.setData(ft.excalidrawlib,Cte(k(D)))},[k]),S=T.useCallback(D=>D?f.includes(D):!1,[f]),A=T.useCallback(()=>{n(i)},[i,n]),I=T.useCallback(D=>{D&&r(k(D))},[k,r]),R=u.size>=t.length?qGe:ZGe;return m.jsxs("div",{className:"library-menu-items-container",style:i.length||h.length||g.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!U&&m.jsx(IV,{selectedItems:f,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),m.jsxs(Ua.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:g.length>0?1:"0 1 auto",marginBottom:0},ref:c,children:[m.jsxs(m.Fragment,{children:[!U&&m.jsx("div",{className:"library-menu-items-container__header",children:H("labels.personalLib")}),e&&m.jsx("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:m.jsx(Jf,{})}),!i.length&&!h.length?m.jsxs("div",{className:"library-menu-items__no-items",children:[m.jsx("div",{className:"library-menu-items__no-items__label",children:H("library.noItems")}),m.jsx("div",{className:"library-menu-items__no-items__hint",children:g.length>0?H("library.hint_emptyPrivateLibrary"):H("library.hint_emptyLibrary")})]}):m.jsxs(NV,{children:[i.length>0&&m.jsx(TS,{itemsRenderedPerBatch:R,items:[{id:null,elements:i}],onItemSelectToggle:E,onItemDrag:M,onClick:A,isItemSelected:S,svgCache:u}),m.jsx(TS,{itemsRenderedPerBatch:R,items:h,onItemSelectToggle:E,onItemDrag:M,onClick:I,isItemSelected:S,svgCache:u})]})]}),m.jsxs(m.Fragment,{children:[(g.length>0||i.length>0||h.length>0)&&m.jsx("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:H("labels.excalidrawLib")}),g.length>0?m.jsx(NV,{children:m.jsx(TS,{itemsRenderedPerBatch:R,items:g,onItemSelectToggle:E,onItemDrag:M,onClick:I,isItemSelected:S,svgCache:u})}):h.length>0?m.jsx("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:H("library.noItems")}):null]}),y&&m.jsx(bse,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:m.jsx(IV,{selectedItems:f,onSelectItems:l})})]})]})}var _R=Mi(!1),RV=({children:e})=>m.jsx("div",{className:"layer-ui__library",children:e}),JGe=T.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:r,libraryReturnUrl:i,library:s,id:o,theme:a,selectedItems:l,onSelectItems:f})=>{let[c]=Ur(Db),d=T.useCallback(g=>{(async(y,U)=>{Pn("element","addToLibrary","ui");for(let v of TJ)if(y.some(E=>E.type===v))return r({errorMessage:H(`errors.libraryElementTypeError.${v}`)});let x=[{status:"unpublished",elements:y,id:Ia(),created:Date.now()},...U];n(),s.setLibrary(x).catch(()=>{r({errorMessage:H("alerts.errorAddingToLibrary")})})})(g,c.libraryItems)},[n,s,r,c.libraryItems]),u=T.useMemo(()=>c.libraryItems,[c]);if(c.status==="loading"&&!c.isInitialized)return m.jsx(RV,{children:m.jsx("div",{className:"layer-ui__library-message",children:m.jsxs("div",{children:[m.jsx(Jf,{size:"2em"}),m.jsx("span",{children:H("labels.libraryLoadingMessage")})]})})});let h=c.libraryItems.length>0||t.length>0;return m.jsxs(RV,{children:[m.jsx(QGe,{isLoading:c.status==="loading",libraryItems:u,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:i,theme:a,onSelectItems:f,selectedItems:l}),h&&m.jsx(bse,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:i,theme:a})]})}),IS=(e,t)=>({elements:e,pending:Nt(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),eXe=(e,t)=>{let n=u7(),[r,i]=T.useState(()=>IS(n,e.selectedElementIds)),s=T.useRef(new Map);return T.useEffect(()=>{for(let o of r.pending)s.current.set(o.id,o.version)},[r.pending]),T.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&i(o=>{var l;if(!$i(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),IS(n,e.selectedElementIds);let a=t.scene.getNonDeletedElementsMap();for(let f of Object.keys(e.selectedElementIds)){let c=(l=a.get(f))==null?void 0:l.version;if(c&&c!==s.current.get(f))return IS(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),r.pending},tXe=T.memo(()=>{let e=Oc(),{onInsertElements:t}=e,n=Dy(),r=Ds(),i=ui(),[s,o]=T.useState([]),a=T.useMemo(()=>e.library,[e.library]),l=eXe(r,e),f=T.useCallback(d=>{t(gse(d))},[t]),c=T.useCallback(()=>{i({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[i]);return m.jsx(JGe,{pendingElements:l,onInsertLibraryItems:f,onAddToLibrary:c,setAppState:i,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:r.theme,selectedItems:s,onSelectItems:o})});function nXe(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}var Nl=e=>{let[t,n]=cGe(),[r]=T.useState(document.activeElement),{id:i}=jc(),s=di().viewport.isMobile;T.useEffect(()=>{if(!t)return;let f=KA(t);setTimeout(()=>{f.length>0&&e.autofocus!==!1&&(f[1]||f[0]).focus()});let c=d=>{if(d.key===J.TAB){let u=KA(t),{activeElement:h}=document,g=u.findIndex(y=>y===h);g===0&&d.shiftKey?(u[u.length-1].focus(),d.preventDefault()):g===u.length-1&&!d.shiftKey&&(u[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",c),()=>t.removeEventListener("keydown",c)},[t,e.autofocus]);let o=ui(),a=n7(_R),l=()=>{o({openMenu:null}),a(!1),r.focus(),e.onCloseRequest()};return m.jsx(fGe,{className:Ye("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:nXe(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:m.jsxs(xl,{ref:n,children:[e.title&&m.jsx("h2",{id:`${i}-dialog-title`,className:"Dialog__title",children:m.jsx("span",{className:"Dialog__titleContent",children:e.title})}),s&&m.jsx("button",{className:"Dialog__close",onClick:l,title:H("buttons.close"),"aria-label":H("buttons.close"),type:"button",children:r6}),m.jsx("div",{className:"Dialog__content",children:e.children})]})})},Gg=({type:e="button",onSelect:t,selected:n,children:r,className:i="",...s})=>m.jsx("button",{onClick:Sw(s.onClick,o=>{t()}),type:e,className:Ye("excalidraw-button",i,{selected:n}),...s,children:r}),PR=T.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:r,readonly:i,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:f,...c},d)=>{let u=T.useRef(null);T.useImperativeHandle(d,()=>u.current),T.useLayoutEffect(()=>{var y,U;s&&((y=u.current)==null||y.focus(),(U=u.current)==null||U.select())},[s]);let[h,g]=T.useState(!1);return m.jsxs("div",{className:Ye("ExcTextField",f,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var y;(y=u.current)==null||y.focus()},children:[l,t&&m.jsx("div",{className:"ExcTextField__label",children:t}),m.jsxs("div",{className:Ye("ExcTextField__input",{"ExcTextField__input--readonly":i}),children:[m.jsx("input",{className:Ye({"is-redacted":"value"in c&&c.value&&a&&!h}),readOnly:i,value:"value"in c?c.value:void 0,defaultValue:"defaultValue"in c?c.defaultValue:void 0,placeholder:r,ref:u,onChange:y=>e==null?void 0:e(y.target.value),onKeyDown:o}),a&&m.jsx(Gg,{onSelect:()=>g(!h),style:{border:0,userSelect:"none"},children:h?PIe:uN})]})]})}),rXe={toggleTheme:[Ue("Shift+Alt+D")],saveScene:[Ue("CtrlOrCmd+S")],loadScene:[Ue("CtrlOrCmd+O")],clearCanvas:[Ue("CtrlOrCmd+Delete")],imageExport:[Ue("CtrlOrCmd+Shift+E")],commandPalette:[Ue("CtrlOrCmd+/"),Ue("CtrlOrCmd+Shift+P")],cut:[Ue("CtrlOrCmd+X")],copy:[Ue("CtrlOrCmd+C")],paste:[Ue("CtrlOrCmd+V")],copyStyles:[Ue("CtrlOrCmd+Alt+C")],pasteStyles:[Ue("CtrlOrCmd+Alt+V")],selectAll:[Ue("CtrlOrCmd+A")],deleteSelectedElements:[Ue("Delete")],duplicateSelection:[Ue("CtrlOrCmd+D"),Ue(`Alt+${H("helpDialog.drag")}`)],sendBackward:[Ue("CtrlOrCmd+[")],bringForward:[Ue("CtrlOrCmd+]")],sendToBack:[Ue(Cc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Ue(Cc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Ue("Shift+Alt+C")],group:[Ue("CtrlOrCmd+G")],ungroup:[Ue("CtrlOrCmd+Shift+G")],gridMode:[Ue("CtrlOrCmd+'")],zenMode:[Ue("Alt+Z")],objectsSnapMode:[Ue("Alt+S")],stats:[Ue("Alt+/")],addToLibrary:[],flipHorizontal:[Ue("Shift+H")],flipVertical:[Ue("Shift+V")],viewMode:[Ue("Alt+R")],hyperlink:[Ue("CtrlOrCmd+K")],toggleElementLock:[Ue("CtrlOrCmd+Shift+L")],resetZoom:[Ue("CtrlOrCmd+0")],zoomOut:[Ue("CtrlOrCmd+-")],zoomIn:[Ue("CtrlOrCmd++")],zoomToFitSelection:[Ue("Shift+3")],zoomToFit:[Ue("Shift+1")],zoomToFitSelectionInViewport:[Ue("Shift+2")],toggleEraserTool:[Ue("E")],toggleHandTool:[Ue("H")],setFrameAsActiveTool:[Ue("F")],saveFileToDisk:[Ue("CtrlOrCmd+S")],saveToActiveFile:[Ue("CtrlOrCmd+S")],toggleShortcuts:[Ue("?")],searchMenu:[Ue("CtrlOrCmd+F")],wrapSelectionInFrame:[]},ls=(e,t=0)=>{let n=rXe[e];return n&&n.length>0?n[t]||n[0]:""},iXe="\\u0300-\\u036f",sXe="\\ufe20-\\ufe2f",oXe="\\u20d0-\\u20ff",aXe=iXe+sXe+oXe,lXe=`[${aXe}]`,cXe=RegExp(lXe,"g"),fXe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dXe={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"E",:"e",:"T",:"t",:"s",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"I",:"i",:"E",:"e",:"n",:"s"},_V=e=>e.replace(fXe,t=>dXe[t]||t).replace(cXe,""),Ese=Ne.createContext(null),Fo=()=>Ne.useContext(Ese),uXe=ure(),hXe=()=>Ne.useMemo(()=>({MainMenuTunnel:zl(),WelcomeScreenMenuHintTunnel:zl(),WelcomeScreenToolbarHintTunnel:zl(),WelcomeScreenHelpHintTunnel:zl(),WelcomeScreenCenterTunnel:zl(),FooterCenterTunnel:zl(),DefaultSidebarTriggerTunnel:zl(),DefaultSidebarTabTriggersTunnel:zl(),OverwriteConfirmDialogTunnel:zl(),TTDDialogTriggerTunnel:zl(),tunnelsJotai:uXe}),[]),kse=(e,t)=>{var r;let n=((r=t[0])==null?void 0:r.type)||null;for(let i of t)if(i.type!==n){n=null;break}return iM(e.activeTool.type)&&e.activeTool.type!=="image"&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(i=>iM(i.type))},Sse=(e,t)=>Dg(e.activeTool.type)||t.some(n=>Dg(n.type)),Cse=({appState:e,elementsMap:t,renderAction:n,app:r})=>{let i=nne(t,e),s=!1;i.length===2&&(Ta(i[0])||Ta(i[1]))&&(s=!0);let o=!!(e.editingTextElement||e.newElement),a=di(),l=document.documentElement.getAttribute("dir")==="rtl",f=Dg(e.activeTool.type)&&!hl(e.currentItemBackgroundColor)||i.some(g=>Dg(g.type)&&!hl(g.backgroundColor)),c=i.length===1||s,d=!e.editingLinearElement&&i.length===1&&wt(i[0])&&!Ge(i[0]),u=!e.croppingElementId&&i.length===1&&ln(i[0]),h=!s&&Bo(e,r);return m.jsxs("div",{className:"panelColumn",children:[m.jsx("div",{children:kse(e,i)&&n("changeStrokeColor")}),Sse(e,i)&&m.jsx("div",{children:n("changeBackgroundColor")}),f&&n("changeFillStyle"),(d$(e.activeTool.type)||i.some(g=>d$(g.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||i.some(g=>g.type==="freedraw"))&&n("changeStrokeShape"),(u$(e.activeTool.type)||i.some(g=>u$(g.type)))&&m.jsxs(m.Fragment,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(sM(e.activeTool.type)||i.some(g=>sM(g.type)))&&m.jsx(m.Fragment,{children:n("changeRoundness")}),(h$(e.activeTool.type)||i.some(g=>h$(g.type)))&&m.jsx(m.Fragment,{children:n("changeArrowType")}),(e.activeTool.type==="text"||i.some(Ve))&&m.jsxs(m.Fragment,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||MOe(i,t))&&n("changeTextAlign")]}),AOe(i,t)&&n("changeVerticalAlign"),(H4(e.activeTool.type)||i.some(g=>H4(g.type)))&&m.jsx(m.Fragment,{children:n("changeArrowhead")}),n("changeOpacity"),m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.layers")}),m.jsxs("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.align")}),m.jsxs("div",{className:"buttonList",children:[l?m.jsxs(m.Fragment,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):m.jsxs(m.Fragment,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),i.length>2&&n("distributeHorizontally"),m.jsx("div",{style:{flexBasis:"100%",height:0}}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),i.length>2&&n("distributeVertically")]})]})]}),!o&&i.length>0&&m.jsxs("fieldset",{children:[m.jsx("legend",{children:H("labels.actions")}),m.jsxs("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),c&&n("hyperlink"),u&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},Ase=({activeTool:e,appState:t,app:n,UIOptions:r})=>{let[i,s]=T.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="embeddable",{TTDDialogTriggerTunnel:f}=Fo();return m.jsxs(m.Fragment,{children:[gN.map(({value:c,icon:d,key:u,numericKey:h,fillable:g},y)=>{var E;if(((E=r.tools)==null?void 0:E[c])===!1)return null;let U=H(`toolBar.${c}`),x=u&&U2(typeof u=="string"?u:u[0]),v=x?`${x} ${H("helpDialog.or")} ${h}`:`${h}`;return m.jsx(Xt,{className:Ye("Shape",{fillable:g}),type:"radio",icon:d,checked:e.type===c,name:"editor-current-shape",title:`${U2(U)}  ${v}`,keyBindingLabel:h||x,"aria-label":U2(U),"aria-keyshortcuts":v,"data-testid":`toolbar-${c}`,onPointerDown:({pointerType:k})=>{!t.penDetected&&k==="pen"&&n.togglePenMode(!0)},onChange:({pointerType:k})=>{t.activeTool.type!==c&&Pn("toolbar",c,"ui"),c==="image"?n.setActiveTool({type:c,insertOnCanvasDirectly:k!=="mouse"}):n.setActiveTool({type:c})}},c)}),m.jsx("div",{className:"App-toolbar__divider"}),m.jsxs(Kn,{open:i,children:[m.jsx(Kn.Trigger,{className:Ye("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!i),title:H("toolBar.extraTools"),children:RIe}),m.jsxs(Kn.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[m.jsx(Kn.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:lee,shortcut:J.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:H("toolBar.frame")}),m.jsx(Kn.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:NTe,"data-testid":"toolbar-embeddable",selected:l,children:H("toolBar.embeddable")}),m.jsx(Kn.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:fee,"data-testid":"toolbar-laser",selected:a,shortcut:J.K.toLocaleUpperCase(),children:H("toolBar.laser")}),m.jsx("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&m.jsx(f.Out,{}),m.jsx(Kn.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:cee,"data-testid":"toolbar-embeddable",children:H("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&m.jsx(m.Fragment,{children:m.jsxs(Kn.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:dee,"data-testid":"toolbar-magicframe",children:[H("toolBar.magicframe"),m.jsx(Kn.Item.Badge,{children:"AI"})]})})]})]})]})},pXe=({renderAction:e,zoom:t})=>m.jsx(Ua.Col,{gap:1,className:Ag.ZOOM_ACTIONS,children:m.jsxs(Ua.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),mXe=({renderAction:e,className:t})=>m.jsxs("div",{className:`undo-redo-buttons ${t}`,children:[m.jsx("div",{className:"undo-button-container",children:m.jsx(w1,{label:H("buttons.undo"),children:e("undo")})}),m.jsx("div",{className:"redo-button-container",children:m.jsxs(w1,{label:H("buttons.redo"),children:[" ",e("redo")]})})]}),gXe=({actionManager:e,showExitZenModeBtn:t})=>m.jsx("button",{type:"button",className:Ye("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(FM),children:H("buttons.exitZenMode")}),bXe=({renderAction:e,className:t})=>m.jsx("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),PV=e=>{let t=T.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},d7=Mi(null),yXe=()=>{let[e,t]=Ur(d7),n=mo();return e&&e==="clearCanvas"?m.jsx(yse,{onConfirm:()=>{n.executeAction(A2),t(null)},onCancel:()=>t(null),title:H("clearCanvasDialog.title"),children:m.jsxs("p",{className:"clear-canvas__content",children:[" ",H("alerts.clearReset")]})}):null},Mse={};kQ(Mse,{toggleTheme:()=>UXe});var UXe={...d9,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(d9,"commandPalette")}},Tse=je({name:"copyElementLink",label:"labels.copyElementLink",icon:dN,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=Nt(e,t);try{if(window.location){let s=Pte(i,t);return s?(await Ty(r.props.generateLinkForSelection?r.props.generateLinkForSelection(s.id,s.type):_te(s.id,s.type)),{appState:{toast:{message:H("toast.elementLinkCopied"),closable:!0}},captureUpdate:pe.EVENTUALLY}):{appState:t,elements:e,app:r,captureUpdate:pe.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:r,captureUpdate:pe.EVENTUALLY}},predicate:(e,t)=>Q4(Nt(e,t))}),xXe=je({name:"linkToElement",label:"labels.linkToElement",icon:mee,perform:(e,t,n,r)=>{let i=Nt(e,t);return i.length!==1||!Q4(i)?{elements:e,appState:t,app:r,captureUpdate:pe.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:Nt(e,t)[0].id}},captureUpdate:pe.IMMEDIATELY}},predicate:(e,t,n,r)=>{var s;let i=Nt(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&i.length===1&&Q4(i)},trackEvent:!1}),wXe=Mi(null),Cr={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},vXe=e=>{switch(e){case Cr.app:return 1;case Cr.export:return 2;case Cr.editor:return 3;case Cr.tools:return 4;case Cr.elements:return 5;case Cr.links:return 6;default:return 10}},ix=({shortcut:e,className:t,children:n})=>{let r=e.replace("++","+$").split("+");return m.jsxs("div",{className:Ye("shortcut",t),children:[r.map((i,s)=>m.jsx("div",{className:"shortcut-wrapper",children:m.jsx("div",{className:"shortcut-key",children:i==="$"?"+":i})},i)),m.jsx("div",{className:"shortcut-desc",children:n})]})},Ise=e=>!e.altKey&&e[J.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===J.P||e.key===J.SLASH);Object.assign(e=>{var r;let t=Ds(),n=ui();return T.useEffect(()=>{let i=s=>{Ise(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;let a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&Pn("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener("keydown",i,{capture:!0}),()=>window.removeEventListener("keydown",i,{capture:!0})},[n]),((r=t.openDialog)==null?void 0:r.name)!=="commandPalette"?null:m.jsx(EXe,{...e})},{defaultItems:Mse});function EXe({customCommandPaletteItems:e}){let t=Oc(),n=Ds(),r=ui(),i=Dy(),s=mo(),[o,a]=Ur(wXe),[l,f]=T.useState(null),c=T.useRef(null),d=i7({uiAppState:n,customCommandPaletteItems:e,appProps:i});T.useEffect(()=>{let{uiAppState:S,customCommandPaletteItems:A,appProps:I}=d,R=$=>{let L="";return $.label&&(typeof $.label=="function"?L=H($.label(t.scene.getNonDeletedElements(),S,t)):L=H($.label)),L},D=$=>typeof $.icon=="function"?$.icon(S,t.scene.getNonDeletedElements()):$.icon,_=[],P=($,L,B)=>{let V={label:R($),icon:D($),category:L,shortcut:ls($.name),keywords:$.keywords,predicate:$.predicate,viewMode:$.viewMode,perform:()=>{s.executeAction($,"commandPalette")}};return B?B(V,$):V};if(S&&t.scene&&s){let $=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,hse,Tse,xXe].map(W=>P(W,Cr.elements,(F,K)=>({...F,predicate:K.predicate?K.predicate:(q,Y,ae,ge)=>Nt(q,Y).length>0}))),L=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool].map(W=>P(W,Cr.tools)),B=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(W=>P(W,Cr.editor)),V=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(W=>P(W,Cr.export));_=[...$,...B,{label:R(A2),icon:D(A2),shortcut:ls(A2.name),category:Cr.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{ml.set(d7,"clearCanvas")}},{label:H("buttons.exportImage"),category:Cr.export,icon:tee,shortcut:ls("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{r({openDialog:{name:"imageExport"}})}},...V];let z=[{label:H("toolBar.library"),category:Cr.app,icon:aN,viewMode:!1,perform:()=>{S.openSidebar?r({openSidebar:null}):r({openSidebar:{name:bl.name,tab:bl.defaultTab}})}},{label:H("search.title"),category:Cr.app,icon:m1,viewMode:!0,perform:()=>{s.executeAction(Nse)}},{label:H("labels.changeStroke"),keywords:["color","outline"],category:Cr.elements,icon:Qk,viewMode:!1,predicate:(W,F)=>{let K=Nt(W,F);return K.length>0&&kse(F,K)},perform:()=>{r(W=>({openMenu:W.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:H("labels.changeBackground"),keywords:["color","fill"],icon:Qk,category:Cr.elements,viewMode:!1,predicate:(W,F)=>{let K=Nt(W,F);return K.length>0&&Sse(F,K)},perform:()=>{r(W=>({openMenu:W.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:H("labels.canvasBackground"),keywords:["color"],icon:Qk,category:Cr.editor,viewMode:!1,perform:()=>{r(W=>({openMenu:W.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...gN.reduce((W,F)=>{var ce;let{value:K,icon:q,key:Y,numericKey:ae}=F;if(((ce=I.UIOptions.tools)==null?void 0:ce[K])===!1)return W;let ge=Y&&U2(typeof Y=="string"?Y:Y[0])||ae,he={label:H(`toolBar.${K}`),category:Cr.tools,shortcut:ge,icon:q,keywords:["toolbar"],viewMode:!1,perform:({event:ie})=>{K==="image"?t.setActiveTool({type:K,insertOnCanvasDirectly:ie.type==="keydown"}):t.setActiveTool({type:K})}};return W.push(he),W},[]),...L,{label:H("toolBar.lock"),category:Cr.tools,icon:S.activeTool.locked?lN:Aw,shortcut:J.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${H("labels.textToDiagram")}...`,category:Cr.tools,icon:DIe,viewMode:!1,predicate:I.aiEnabled,perform:()=>{r(W=>({...W,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${H("toolBar.mermaidToExcalidraw")}...`,category:Cr.tools,icon:cee,viewMode:!1,predicate:I.aiEnabled,perform:()=>{r(W=>({...W,openDialog:{name:"ttd",tab:"mermaid"}}))}}],G=[..._,...z,...A||[]].map(W=>{var F;return{...W,icon:W.icon||uee,order:W.order??vXe(W.category),haystack:`${_V(W.label.toLocaleLowerCase())} ${((F=W.keywords)==null?void 0:F.join(" "))||""}`}});f(G),a(G.find(W=>W.label===(o==null?void 0:o.label))??null)}},[d,t,s,f,o==null?void 0:o.label,a,r]);let[u,h]=T.useState(""),[g,y]=T.useState(null),[U,x]=T.useState({}),v=S=>{r({openDialog:null},S),h("")},E=(S,A)=>{var I;((I=n.openDialog)==null?void 0:I.name)==="commandPalette"&&(A.stopPropagation(),A.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),v(()=>{S.perform({actionManager:s,event:A}),a(S),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},k=PV(S=>S.viewMode===!1&&n.viewModeEnabled?!1:typeof S.predicate=="function"?S.predicate(t.scene.getNonDeletedElements(),n,i,t):S.predicate===void 0||S.predicate),M=PV(S=>{var D;let A=$0(S.target)||Ise(S)||S.key===J.ESCAPE;if(A&&S.key!==J.ARROW_UP&&S.key!==J.ARROW_DOWN&&S.key!==J.ENTER)return;let I=Object.values(U).flat(),R=o&&!u&&k(o);if(S.key===J.ARROW_UP){S.preventDefault();let _=I.findIndex(L=>L.label===(g==null?void 0:g.label));if(R){if(_===0){y(o);return}if(g===o){let L=I[I.length-1];L&&y(L);return}}let P;_===-1?P=I.length-1:P=_===0?I.length-1:(_-1)%I.length;let $=I[P];$&&y($);return}if(S.key===J.ARROW_DOWN){S.preventDefault();let _=I.findIndex(L=>L.label===(g==null?void 0:g.label));if(R){if(!g||_===I.length-1){y(o);return}if(g===o){let L=I[0];L&&y(L);return}}let P=(_+1)%I.length,$=I[P];$&&y($);return}if(S.key===J.ENTER&&g&&setTimeout(()=>{E(g,S)}),!A){if(S.stopPropagation(),/^[a-zA-Z0-9]$/.test(S.key)){(D=c==null?void 0:c.current)==null||D.focus();return}S.preventDefault()}});return T.useEffect(()=>(window.addEventListener("keydown",M,{capture:!0}),()=>window.removeEventListener("keydown",M,{capture:!0})),[M]),T.useEffect(()=>{if(!l)return;let S=D=>{let _={};for(let P of D)_[P.category]?_[P.category].push(P):_[P.category]=[P];return _},A=l.filter(k).sort((D,_)=>D.order-_.order),I=!u&&o&&k(o);if(!u){x(S(I?A.filter(D=>D.label!==(o==null?void 0:o.label)):A)),y(I?o:A[0]||null);return}let R=_V(u.toLocaleLowerCase().replace(/[<>_| -]/g,""));A=tHe.filter(R,A,{extract:D=>D.haystack}).sort((D,_)=>_.score-D.score).map(D=>D.original),x(S(A)),y(A[0]??null)},[u,l,k,o]),m.jsxs(Nl,{onCloseRequest:()=>v(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[m.jsx(PR,{value:u,placeholder:H("commandPalette.search.placeholder"),onChange:S=>{h(S)},selectOnRender:!0,ref:c}),!t.device.viewport.isMobile&&m.jsxs("div",{className:"shortcuts-wrapper",children:[m.jsx(ix,{shortcut:"",children:H("commandPalette.shortcuts.select")}),m.jsx(ix,{shortcut:"",children:H("commandPalette.shortcuts.confirm")}),m.jsx(ix,{shortcut:Ue("Esc"),children:H("commandPalette.shortcuts.close")})]}),m.jsxs("div",{className:"commands",children:[o&&!u&&m.jsxs("div",{className:"command-category",children:[m.jsxs("div",{className:"command-category-title",children:[H("commandPalette.recents"),m.jsx("div",{className:"icon",style:{marginLeft:"6px"},children:LIe})]}),m.jsx(DV,{command:o,isSelected:o.label===(g==null?void 0:g.label),onClick:S=>E(o,S),disabled:!k(o),onMouseMove:()=>y(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(U).length>0?Object.keys(U).map((S,A)=>m.jsxs("div",{className:"command-category",children:[m.jsx("div",{className:"command-category-title",children:S}),U[S].map(I=>m.jsx(DV,{command:I,isSelected:I.label===(g==null?void 0:g.label),onClick:R=>E(I,R),onMouseMove:()=>y(I),showShortcut:!t.device.viewport.isMobile,appState:n},I.label))]},S)):l?m.jsxs("div",{className:"no-match",children:[m.jsx("div",{className:"icon",children:m1})," ",H("commandPalette.search.noMatch")]}):null]})]})}var DV=({command:e,isSelected:t,disabled:n,onMouseMove:r,onClick:i,showShortcut:s,appState:o})=>{let a=()=>{};return m.jsxs("div",{className:Ye("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var f;t&&!n&&((f=l==null?void 0:l.scrollIntoView)==null||f.call(l,{block:"nearest"}))},onClick:n?a:i,onMouseMove:n?a:r,title:n?H("commandPalette.itemNotAvailable"):"",children:[m.jsxs("div",{className:"name",children:[e.icon&&m.jsx(o7,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&m.jsx(ix,{shortcut:e.shortcut})]})},kXe=je({name:"toggleLinearEditor",category:Cr.elements,label:(e,t,n)=>{var r;return((r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0])==null?void 0:r.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&i.length===1&&wt(i[0])&&!Ge(i[0]))},perform(e,t,n,r){var o;let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=((o=t.editingLinearElement)==null?void 0:o.elementId)===i.id?null:new We(i);return{appState:{...t,editingLinearElement:s},captureUpdate:pe.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{let r=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],i=H(r.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return m.jsx(Xt,{type:"button",icon:ZIe,title:i,"aria-label":i,onClick:()=>t(null)})}}),Nse=je({name:"searchMenu",icon:m1,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,r){var i,s;if(((i=t.openSidebar)==null?void 0:i.name)===bl.name&&t.openSidebar.tab===hm){let o=(s=r.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${Ag.SEARCH_MENU_INPUT_WRAPPER} input`);return o!=null&&o.matches(":focus")?{appState:{...t,openSidebar:null},captureUpdate:pe.EVENTUALLY}:(o==null||o.focus(),o==null||o.select(),!1)}return{appState:{...t,openSidebar:{name:bl.name,tab:hm},openDialog:null},captureUpdate:pe.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[J.CTRL_OR_CMD]&&e.key===J.F}),SXe=je({name:"cropEditor",label:"helpDialog.cropStart",icon:o$,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,r){let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:i.id},captureUpdate:pe.IMMEDIATELY}},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!!(!t.croppingElementId&&i.length===1&&ln(i[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{let r=H("helpDialog.cropStart");return m.jsx(Xt,{type:"button",icon:o$,title:r,"aria-label":r,onClick:()=>t(null)})}}),u9=class{constructor(e=!0,t=!0){this.isUndoStackEmpty=e,this.isRedoStackEmpty=t}},LV=class Y5{constructor(){Q(this,"onHistoryChangedEmitter",new Zl),Q(this,"undoStack",[]),Q(this,"redoStack",[])}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t,n){let r=CXe.create(n,t);r.isEmpty()||(this.undoStack.push(r.inverse()),r.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new u9(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,n,r){return this.perform(t,n,r,()=>Y5.pop(this.undoStack),i=>Y5.push(this.redoStack,i,t))}redo(t,n,r){return this.perform(t,n,r,()=>Y5.pop(this.redoStack),i=>Y5.push(this.undoStack,i,t))}perform(t,n,r,i,s){try{let o=i();if(o===null)return;let a=t,l=n,f=!1;for(;o;){try{[a,l,f]=o.applyTo(a,l,r)}finally{s(o)}if(f)break;o=i()}return[a,l]}finally{this.onHistoryChangedEmitter.trigger(new u9(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;let n=t.pop();return n!==void 0?n:null}static push(t,n,r){let i=n.inverse().applyLatestChanges(r);return t.push(i)}},CXe=class sx{constructor(t,n){this.appStateChange=t,this.elementsChange=n}static create(t,n){return new sx(t,n)}inverse(){return new sx(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(t,n,r){let[i,s]=this.elementsChange.applyTo(t,r.elements),[o,a]=this.appStateChange.applyTo(n,i);return[i,o,s||a]}applyLatestChanges(t){let n=this.elementsChange.applyLatestChanges(t);return sx.create(this.appStateChange,n)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}},Rse=(e,t)=>{let[n,r]=T.useState(t);return T.useEffect(()=>{let i=e.on(s=>{r(s)});return()=>{i()}},[e]),n},_se=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){let r=n();if(!r)return{captureUpdate:pe.EVENTUALLY};let[i,s]=r,o=Array.from(i.values());return{appState:s,elements:o,captureUpdate:pe.NEVER}}return{captureUpdate:pe.EVENTUALLY}},AXe=(e,t)=>({name:"undo",label:"buttons.undo",icon:Wz,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,s)=>_se(s,r,()=>e.undo(mt(n),r,t.snapshot)),keyTest:n=>n[J.CTRL_OR_CMD]&&nM(n,J.Z)&&!n.shiftKey,PanelComponent:({updateData:n,data:r})=>{let{isUndoStackEmpty:i}=Rse(e.onHistoryChangedEmitter,new u9(e.isUndoStackEmpty,e.isRedoStackEmpty));return m.jsx(Xt,{type:"button",icon:Wz,"aria-label":H("buttons.undo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-undo"})}}),MXe=(e,t)=>({name:"redo",label:"buttons.redo",icon:Gz,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,s)=>_se(s,r,()=>e.redo(mt(n),r,t.snapshot)),keyTest:n=>n[J.CTRL_OR_CMD]&&n.shiftKey&&nM(n,J.Z)||kJ&&n.ctrlKey&&!n.shiftKey&&nM(n,J.Y),PanelComponent:({updateData:n,data:r})=>{let{isRedoStackEmpty:i}=Rse(e.onHistoryChangedEmitter,new u9(e.isUndoStackEmpty,e.isRedoStackEmpty));return m.jsx(Xt,{type:"button",icon:Gz,"aria-label":H("buttons.redo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-redo"})}}),NS=(e,t,n,r,i,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,r,s))&&Pn(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${i.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}},TXe=class{constructor(e,t,n,r){Q(this,"actions",{}),Q(this,"updater"),Q(this,"getAppState"),Q(this,"getElementsIncludingDeleted"),Q(this,"app"),Q(this,"renderAction",(i,s)=>{let o=this.app.props.UIOptions.canvasActions;if(this.actions[i]&&"PanelComponent"in this.actions[i]&&(!(i in o)||o[i])){let a=this.actions[i],l=a.PanelComponent;l.displayName="PanelComponent";let f=this.getElementsIncludingDeleted(),c=this.getAppState(),d=u=>{NS(a,"ui",c,f,this.app,u),this.updater(a.perform(this.getElementsIncludingDeleted(),this.getAppState(),u,this.app))};return m.jsx(l,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:d,appProps:this.app.props,app:this.app,data:s})}return null}),Q(this,"isActionEnabled",i=>{let s=this.getElementsIncludingDeleted(),o=this.getAppState();return!i.predicate||i.predicate(s,o,this.app.props,this.app)}),this.updater=i=>{if(ky(i))i.then(s=>e(s));else return e(i)},this.getAppState=t,this.getElementsIncludingDeleted=n,this.app=r}registerAction(e){this.actions[e.name]=e}registerAll(e){e.forEach(t=>this.registerAction(t))}handleKeyDown(e){let t=this.app.props.UIOptions.canvasActions,n=Object.values(this.actions).sort((a,l)=>(l.keyPriority||0)-(a.keyPriority||0)).filter(a=>(a.name in t?t[a.name]:!0)&&a.keyTest&&a.keyTest(e,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(n.length!==1)return n.length>1&&console.warn("Canceling as multiple actions match this shortcut",n),!1;let r=n[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;let i=this.getElementsIncludingDeleted(),s=this.getAppState();return NS(r,"keyboard",s,i,this.app,null),e.preventDefault(),e.stopPropagation(),this.updater(n[0].perform(i,s,null,this.app)),!0}executeAction(e,t="api",n=null){let r=this.getElementsIncludingDeleted(),i=this.getAppState();NS(e,t,i,r,this.app,n),this.updater(e.perform(r,i,n,this.app))}},OV=e=>{let t=Array.from(e.values());return{x:BV(t,n=>n.x)/t.length,y:BV(t,n=>n.y)/t.length}},jV=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),BV=(e,t)=>e.reduce((n,r)=>n+t(r),0),IXe=({children:e,left:t,top:n,onCloseRequest:r,fitInViewport:i=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{let f=T.useRef(null);T.useEffect(()=>{let d=f.current;if(!d)return;d.contains(document.activeElement)||d.focus();let u=h=>{var g,y,U;if(h.key===J.TAB){let x=KA(d),{activeElement:v}=document,E=x.findIndex(k=>k===v);v===d?(h.shiftKey?(g=x[x.length-1])==null||g.focus():x[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):E===0&&h.shiftKey?((y=x[x.length-1])==null||y.focus(),h.preventDefault(),h.stopImmediatePropagation()):E===x.length-1&&!h.shiftKey&&((U=x[0])==null||U.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",u),()=>d.removeEventListener("keydown",u)},[]);let c=T.useRef(null);return T.useLayoutEffect(()=>{var d,u;if(i&&f.current&&n!=null&&t!=null){let h=f.current,{width:g,height:y}=h.getBoundingClientRect();if(((d=c.current)==null?void 0:d.top)===n&&((u=c.current)==null?void 0:u.left)===t)return;c.current={top:n,left:t},g>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+g-s>a?h.style.left=`${a-g-10}px`:h.style.left=`${t}px`,y>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+y-o>l?h.style.top=`${l-y}px`:h.style.top=`${n}px`}},[n,t,i,a,l,s,o]),T.useEffect(()=>{if(r){let d=u=>{var h;(h=f.current)!=null&&h.contains(u.target)||ai.unstable_batchedUpdates(()=>r(u))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[r]),m.jsx("div",{className:"popover",ref:f,tabIndex:-1,children:e})},ii="separator",NXe=Ne.memo(({actionManager:e,items:t,top:n,left:r,onClose:i})=>{let s=Ly(),o=u7(),a=t.reduce((l,f)=>(f&&(f===ii||!f.predicate||f.predicate(o,s,e.app.props,e.app))&&l.push(f),l),[]);return m.jsx(IXe,{onCloseRequest:()=>{i()},top:n,left:r,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:m.jsx("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,f)=>{var u;if(l===ii)return!a[f-1]||a[f-1]===ii?null:m.jsx("hr",{className:"context-menu-item-separator"},f);let c=l.name,d="";return l.label&&(typeof l.label=="function"?d=H(l.label(o,s,e.app)):d=H(l.label)),m.jsx("li",{"data-testid":c,onClick:()=>{i(()=>{e.executeAction(l,"contextMenu")})},children:m.jsxs("button",{type:"button",className:Ye("context-menu-item",{dangerous:c==="deleteSelectedElements",checkmark:(u=l.checked)==null?void 0:u.call(l,s)}),children:[m.jsx("div",{className:"context-menu-item__label",children:d}),m.jsx("kbd",{className:"context-menu-item__shortcut",children:c?ls(c):""})]})},f)})})})}),RXe=({children:e,onClose:t})=>{let[n,r]=T.useState(!!e),{container:i}=jc(),s=Ne.useCallback(()=>{r(!1),t&&t(),i==null||i.focus()},[t,i]);return m.jsx(m.Fragment,{children:n&&m.jsx(Nl,{size:"small",onCloseRequest:s,title:H("errorDialog.title"),children:m.jsx("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},Pse=function({onChange:e,value:t,choices:n,name:r}){return m.jsx("div",{className:"RadioGroup",children:n.map(i=>m.jsxs("div",{className:Ye("RadioGroup__choice",{active:i.value===t}),title:i.ariaLabel,children:[m.jsx("input",{name:r,type:"radio",checked:i.value===t,onChange:()=>e(i.value),"aria-label":i.ariaLabel}),i.label]},String(i.value)))})},n3=({title:e,name:t,checked:n,onChange:r,disabled:i=!1})=>m.jsx("div",{className:Ye("Switch",{toggled:n,disabled:i}),children:m.jsx("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:i,onChange:()=>r(!n),onKeyDown:s=>{s.key===" "&&r(!n)}})}),T2=T.forwardRef(({children:e,icon:t,onClick:n,label:r,variant:i="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:f},c)=>{let[d,u]=T.useState(!1),h=async y=>{let U=n==null?void 0:n(y);if(ky(U)){let x=window.setTimeout(()=>{u(!0)},50);try{await U}catch(v){if(v instanceof Iw)console.warn(v);else throw v}finally{clearTimeout(x),u(!1)}}},g=d?"loading":f;return s=g==="success"?"success":s,m.jsx("button",{className:Ye("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${i}`,`ExcButton--size-${o}`,`ExcButton--status-${g}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":r,ref:c,disabled:g==="loading"||g==="success",children:m.jsxs("div",{className:"ExcButton__contents",children:[g==="loading"?m.jsx(Jf,{className:"ExcButton__statusIcon"}):g==="success"&&m.jsx("div",{className:"ExcButton__statusIcon",children:TIe}),t&&m.jsx("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),i!=="icon"&&(e??r)]})})}),_Xe=2e3,PXe=()=>{let[e,t]=T.useState(null),n=T.useRef(0),r=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},_Xe)},i=T.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:i,onCopy:r}},DXe="filter"in document.createElement("canvas").getContext("2d"),LXe=()=>m.jsxs("div",{children:[m.jsx("h3",{children:H("canvasError.cannotShowPreview")}),m.jsx("p",{children:m.jsx("span",{children:H("canvasError.canvasTooBig")})}),m.jsxs("em",{children:["(",H("canvasError.canvasTooBigTip"),")"]})]}),OXe=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:r,onExportImage:i,name:s})=>{let o=Qr(t,e),[a,l]=T.useState(s),[f,c]=T.useState(o),[d,u]=T.useState(e.exportBackground),[h,g]=T.useState(e.exportWithDarkMode),[y,U]=T.useState(e.exportEmbedScene),[x,v]=T.useState(e.exportScale),E=T.useRef(null),[k,M]=T.useState(null),{onCopy:S,copyStatus:A,resetCopyStatus:I}=PXe();T.useEffect(()=>{I()},[a,d,h,x,y,I]);let{exportedElements:R,exportingFrame:D}=l7(t,e,f);return T.useEffect(()=>{let _=E.current;if(!_)return;let P=_.offsetWidth,$=_.offsetHeight;P&&VN({elements:R,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:x,exportEmbedScene:y},files:n,exportPadding:e6,maxWidthOrHeight:Math.max(P,$),exportingFrame:D}).then(L=>(M(null),Rb(L).then(()=>{_.replaceChildren(L)}).catch(B=>{throw B.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(H("canvasError.canvasTooBig")):B}))).catch(L=>{console.error(L),M(L)})},[e,n,R,D,a,d,h,x,y]),m.jsxs("div",{className:"ImageExportModal",children:[m.jsx("h3",{children:H("imageExportDialog.header")}),m.jsxs("div",{className:"ImageExportModal__preview",children:[m.jsx("div",{className:"ImageExportModal__preview__canvas",ref:E,children:k&&m.jsx(LXe,{})}),m.jsx("div",{className:"ImageExportModal__preview__filename",children:!T1&&m.jsx("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:_=>{l(_.target.value),r.executeAction(IWe,"ui",_.target.value)}})})]}),m.jsxs("div",{className:"ImageExportModal__settings",children:[m.jsx("h3",{children:H("imageExportDialog.header")}),o&&m.jsx(w5,{label:H("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:m.jsx(n3,{name:"exportOnlySelected",checked:f,onChange:_=>{c(_)}})}),m.jsx(w5,{label:H("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:m.jsx(n3,{name:"exportBackgroundSwitch",checked:d,onChange:_=>{u(_),r.executeAction(RWe,"ui",_)}})}),DXe&&m.jsx(w5,{label:H("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:m.jsx(n3,{name:"exportDarkModeSwitch",checked:h,onChange:_=>{g(_),r.executeAction(_We,"ui",_)}})}),m.jsx(w5,{label:H("imageExportDialog.label.embedScene"),tooltip:H("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:m.jsx(n3,{name:"exportEmbedSwitch",checked:y,onChange:_=>{U(_),r.executeAction(ise,"ui",_)}})}),m.jsx(w5,{label:H("imageExportDialog.label.scale"),name:"exportScale",children:m.jsx(Pse,{name:"exportScale",value:x,onChange:_=>{v(_),r.executeAction(NWe,"ui",_)},choices:JI.map(_=>({value:_,label:`${_}`}))})}),m.jsxs("div",{className:"ImageExportModal__settings__buttons",children:[m.jsx(T2,{className:"ImageExportModal__settings__buttons__button",label:H("imageExportDialog.title.exportToPng"),onClick:()=>i(Wk.png,R,{exportingFrame:D}),icon:s$,children:H("imageExportDialog.button.exportToPng")}),m.jsx(T2,{className:"ImageExportModal__settings__buttons__button",label:H("imageExportDialog.title.exportToSvg"),onClick:()=>i(Wk.svg,R,{exportingFrame:D}),icon:s$,children:H("imageExportDialog.button.exportToSvg")}),(HN||bb)&&m.jsx(T2,{className:"ImageExportModal__settings__buttons__button",label:H("imageExportDialog.title.copyPngToClipboard"),status:A,onClick:async()=>{await i(Wk.clipboard,R,{exportingFrame:D}),S()},icon:dN,children:H("imageExportDialog.button.copyPngToClipboard")})]})]})]})},w5=({label:e,children:t,tooltip:n,name:r})=>m.jsxs("div",{className:"ImageExportModal__settings__setting",title:e,children:[m.jsxs("label",{htmlFor:r,className:"ImageExportModal__settings__setting__label",children:[e,n&&m.jsx(w1,{label:n,long:!0,children:MIe})]}),m.jsx("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),jXe=({elements:e,appState:t,files:n,actionManager:r,onExportImage:i,onCloseRequest:s,name:o})=>{let[{appStateSnapshot:a,elementsSnapshot:l}]=T.useState(()=>({appStateSnapshot:jf(t),elementsSnapshot:jf(e)}));return m.jsx(Nl,{onCloseRequest:s,size:"wide",title:!1,children:m.jsx(OXe,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:r,onExportImage:i,name:o})})},Dse=({children:e,side:t,className:n})=>m.jsx("div",{className:Ye("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),ym=100,Um=100,FV=e=>{switch(e){case J.ARROW_UP:return"up";case J.ARROW_DOWN:return"down";case J.ARROW_RIGHT:return"right";case J.ARROW_LEFT:return"left";default:return"right"}},Lse=(e,t,n,r)=>{let i=[...n.values()].reduce((s,o)=>{var l;let a;if(Ge(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){let f=n.get(a.elementId);if(!f)return s;fs(kl(f),"not an ExcalidrawBindableElement");let c=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=$ee(t,ac(t),[c[0]+o.x,c[1]+o.y]);s.push({relative:f,heading:d})}return s},[]);switch(r){case"up":return i.filter(s=>yr(s.heading,ro)).map(s=>s.relative);case"down":return i.filter(s=>yr(s.heading,vi)).map(s=>s.relative);case"right":return i.filter(s=>yr(s.heading,gr)).map(s=>s.relative);case"left":return i.filter(s=>yr(s.heading,no)).map(s=>s.relative)}},WM=(e,t,n)=>Lse("successors",e,t,n),GM=(e,t,n)=>Lse("predecessors",e,t,n),BXe=(e,t,n)=>{let r=Um+e.width;if(n==="up"||n==="down"){let a=ym+e.height,l=e.x,f=e.x+e.width;if(t.every(c=>c.x+c.width<l||c.x>f))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){let a=e.y,l=e.y+e.height;if(t.every(f=>f.y+f.height<a||f.y>l))return{x:(Um+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){let a=ym+e.height,l=(t.length,a),f=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="up"?{x:f,y:l*-1}:{x:f,y:l}}let i=ym+e.height,s=(t.length,Um+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},FXe=(e,t,n,r)=>{let i=WM(e,t,r),s=GM(e,t,r),o=BXe(e,[...i,...s],r),a=Ic({type:e.type,x:e.x+o.x,y:e.y+o.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});fs(Cw(a),"not an ExcalidrawFlowchartNodeElement");let l=Ose(e,a,t,r,n);return{nextNode:a,bindingArrow:l}},zXe=(e,t,n,r,i)=>{let s=[];for(let o=0;o<i;o++){let a,l;if(r==="left"||r==="right"){let d=ym*(i-1)+i*e.height,u=e.y+e.height/2-d/2,h=Um+e.width;r==="left"&&(h*=-1),a=e.x+h;let g=(ym+e.height)*o;l=u+g}else{let d=Um*(i-1)+i*e.width,u=e.x+e.width/2-d/2,h=ym+e.height;r==="up"&&(h*=-1),l=e.y+h;let g=(Um+e.width)*o;a=u+g}let f=Ic({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});fs(Cw(f),"not an ExcalidrawFlowchartNodeElement");let c=Ose(e,f,t,r,n);s.push(f),s.push(c)}return s},Ose=(e,t,n,r,i)=>{let s,o;switch(r){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let a,l;switch(r){case"up":{a=t.x+t.width/2-s,l=t.y+t.height-o+6;break}case"down":{a=t.x+t.width/2-s,l=t.y-o-6;break}case"right":{a=t.x-s-6,l=t.y-o+t.height/2;break}case"left":{a=t.x+t.width-s+6,l=t.y-o+t.height/2;break}}let f=kN({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[O(0,0),O(a,l)],elbowed:!0});Mc(f,e,"start",n),Mc(f,t,"end",n);let c=new Map;c.set(e.id,e),c.set(t.id,t),c.set(f.id,f),We.movePoints(f,[{index:1,point:f.points[1]}]);let d=PN(f,Aa(new Map([...n.entries(),[e.id,e],[t.id,t],[f.id,f]])),{points:f.points});return{...f,...d}},$Xe=class{constructor(){Q(this,"isExploring",!1),Q(this,"sameLevelNodes",[]),Q(this,"sameLevelIndex",0),Q(this,"direction",null),Q(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(e,t,n){if(!kl(e))return null;if(n!==this.direction&&this.clear(),this.visitedNodes.has(e.id)||this.visitedNodes.add(e.id),this.isExploring&&n===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;let r=[...WM(e,t,n),...GM(e,t,n)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=n,this.visitedNodes.add(r[0].id),r[0].id;if(n===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(e.id);let i=["up","right","down","left"].filter(s=>s!==n).map(s=>[...WM(e,t,s),...GM(e,t,s)]).flat().filter(s=>!this.visitedNodes.has(s.id));for(let s of i)if(!this.visitedNodes.has(s.id))return this.visitedNodes.add(s.id),this.isExploring=!0,this.direction=n,s.id}return null}},HXe=class{constructor(){Q(this,"isCreatingChart",!1),Q(this,"numberOfNodes",0),Q(this,"direction","right"),Q(this,"pendingNodes",null)}createNodes(e,t,n,r){if(r!==this.direction){let{nextNode:i,bindingArrow:s}=FXe(e,t,n,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=r,this.pendingNodes=[i,s]}else{this.numberOfNodes+=1;let i=zXe(e,t,n,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=r,this.pendingNodes=i}if(e.frameId){let i=t.get(e.frameId);fs(i&&VJ(i),"not an ExcalidrawFrameElement"),i&&this.pendingNodes.every(s=>Iy([s],i,t)||Ku(s,i,t))&&(this.pendingNodes=this.pendingNodes.map(s=>xe(s,{frameId:e.frameId},!1)))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}},VXe=(e,t)=>{var n,r;for(let[,i]of t)if(i.type==="arrow"&&(((n=i.startBinding)==null?void 0:n.elementId)===e.id||((r=i.endBinding)==null?void 0:r.elementId)===e.id))return!0;return!1},WXe=({appState:e,isMobile:t,device:n,app:r})=>{var c,d;let{activeTool:i,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((c=e.openSidebar)==null?void 0:c.name)===bl.name&&e.openSidebar.tab===hm&&((d=e.searchMatches)!=null&&d.length))return H("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(Yl(e))return H("hints.eraserRevert");if(i.type==="arrow"||i.type==="line")return l?H("hints.linearElementMulti"):i.type==="arrow"?H("hints.arrowTool",{arrowShortcut:Ue("A")}):H("hints.linearElement");if(i.type==="freedraw")return H("hints.freeDraw");if(i.type==="text")return H("hints.text");if(i.type==="embeddable")return H("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return H("hints.placeImage");let f=r.scene.getSelectedElements(e);if(s&&a==="mouse"&&f.length===1){let u=f[0];return wt(u)&&u.points.length===2?H("hints.lockAngle"):ln(u)?H("hints.resizeImage"):H("hints.resize")}if(o&&a==="mouse")return H("hints.rotate");if(f.length===1&&Ve(f[0]))return H("hints.text_selected");if(e.editingTextElement)return H("hints.text_editing");if(e.croppingElementId)return H("hints.leaveCropEditor");if(f.length===1&&ln(f[0]))return H("hints.enterCropEditor");if(i.type==="selection"){if(e.selectionElement&&!f.length&&!e.editingTextElement&&!e.editingLinearElement)return H("hints.deepBoxSelect");if(Mb(r)&&e.selectedElementsAreBeingDragged)return H("hints.disableSnapping");if(!f.length&&!t)return H("hints.canvasPanning");if(f.length===1){if(wt(f[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?H("hints.lineEditor_pointSelected"):H("hints.lineEditor_nothingSelected"):H("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&zh(f[0]))return Cw(f[0])?VXe(f[0],r.scene.getNonDeletedElementsMap())?[H("hints.bindTextToElement"),H("hints.createFlowchart")]:[H("hints.bindTextToElement"),H("hints.createFlowchart")]:H("hints.bindTextToElement")}}return null},jse=({appState:e,isMobile:t,device:n,app:r})=>{let i=WXe({appState:e,isMobile:t,device:n,app:r});if(!i)return null;let s=Array.isArray(i)?i.map(o=>Ue(o).replace(/\. ?$/,"")).join(". "):Ue(i);return m.jsx("div",{className:"HintViewer",children:m.jsx("span",{children:s})})},GXe="medium",zV={CHECKED:lN,UNCHECKED:Aw},Bse=e=>m.jsxs("label",{className:Ye("ToolIcon ToolIcon__lock",`ToolIcon_size_${GXe}`,{"is-mobile":e.isMobile}),title:`${e.title}  Q`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),m.jsx("div",{className:"ToolIcon__icon",children:e.checked?zV.CHECKED:zV.UNCHECKED})]}),Lb=({heading:e,children:t,...n})=>{let{id:r}=jc(),i=m.jsx("h2",{className:"visually-hidden",id:`${r}-${e}-title`,children:H(`headings.${e}`)});return m.jsx("section",{...n,"aria-labelledby":`${r}-${e}-title`,children:typeof t=="function"?t(i):m.jsxs(m.Fragment,{children:[i,t]})})},ql=4,Mu=6,XXe="rgba(0,0,0,0.3)",KXe=(e,t,n,r)=>{if(!e.length)return{horizontal:null,vertical:null};let[i,s,o,a]=pn(e),l=t/r.zoom.value,f=n/r.zoom.value,c=t-l,d=n-f,u={top:parseInt(zU("sat"))||0,bottom:parseInt(zU("sab"))||0,left:parseInt(zU("sal"))||0,right:parseInt(zU("sar"))||0},h=Pb().rtl,g=-r.scrollX+c/2+u.left,y=-r.scrollY+d/2+u.top,U=g+l-u.right,x=y+f-u.bottom,v=Math.min(i,g),E=Math.min(s,y),k=Math.max(o,U),M=Math.max(a,x);return{horizontal:g===v&&U===k?null:{x:Math.max(u.left,ql)+(g-v)/(k-v)*t,y:n-Mu-Math.max(ql,u.bottom),width:(U-g)/(k-v)*t-Math.max(ql*2,u.left+u.right),height:Mu},vertical:y===E&&x===M?null:{x:h?Math.max(u.left,ql):t-Mu-Math.max(u.right,ql),y:(y-E)/(M-E)*n+Math.max(u.top,ql),width:Mu,height:(x-y)/(M-E)*n-Math.max(ql*2,u.top+u.bottom)}}},$V=(e,t,n)=>{let[r,i]=[e.horizontal,e.vertical].map(s=>s!=null&&s.x<=t&&t<=s.x+s.width&&s.y<=n&&n<=s.y+s.height);return{isOverEither:r||i,isOverHorizontal:r,isOverVertical:i}},YXe="medium",Fse=e=>e.penDetected?m.jsxs("label",{className:Ye("ToolIcon ToolIcon__penMode",`ToolIcon_size_${YXe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m.jsx("div",{className:"ToolIcon__icon",children:ATe})]}):null,zse=e=>m.jsx(Xt,{className:Ye("Shape",{fillable:!1}),type:"radio",icon:aee,name:"editor-current-shape",checked:e.checked,title:`${e.title}  H`,keyBindingLabel:e.isMobile?void 0:J.H.toLocaleUpperCase(),"aria-label":`${e.title}  H`,"aria-keyshortcuts":J.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),ZXe=({appState:e,elements:t,actionManager:n,setAppState:r,onLockToggle:i,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:f,device:c,renderWelcomeScreen:d,UIOptions:u,app:h})=>{var E,k;let{WelcomeScreenCenterTunnel:g,MainMenuTunnel:y,DefaultSidebarTriggerTunnel:U}=Fo(),x=()=>m.jsxs(Dse,{side:"top",className:"App-top-bar",children:[d&&m.jsx(g.Out,{}),m.jsx(Lb,{heading:"shapes",children:M=>{var S;return m.jsx(Ua.Col,{gap:4,align:"center",children:m.jsxs(Ua.Row,{gap:1,className:"App-toolbar-container",children:[m.jsxs(xl,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[M,m.jsx(Ua.Row,{gap:1,children:m.jsx(Ase,{appState:e,activeTool:e.activeTool,UIOptions:u,app:h})})]}),a&&a(!0,e),m.jsxs("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((S=e.openDialog)==null?void 0:S.name)!=="elementLinkSelector"&&m.jsx(U.Out,{}),m.jsx(Fse,{checked:e.penMode,onChange:()=>o(null),title:H("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),m.jsx(Bse,{checked:e.activeTool.locked,onChange:i,title:H("toolBar.lock"),isMobile:!0}),m.jsx(zse,{checked:Tg(e),onChange:()=>s(),title:H("toolBar.hand"),isMobile:!0})]})]})})}}),m.jsx(jse,{appState:e,isMobile:!0,device:c,app:h})]}),v=()=>{var M;return e.viewModeEnabled||((M=e.openDialog)==null?void 0:M.name)==="elementLinkSelector"?m.jsx("div",{className:"App-toolbar-content",children:m.jsx(y.Out,{})}):m.jsxs("div",{className:"App-toolbar-content",children:[m.jsx(y.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),m.jsxs("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return m.jsxs(m.Fragment,{children:[f(),!e.viewModeEnabled&&((E=e.openDialog)==null?void 0:E.name)!=="elementLinkSelector"&&x(),m.jsx("div",{className:"App-bottom-bar",style:{marginBottom:Mu+ql*2,marginLeft:Mu+ql*2,marginRight:Mu+ql*2},children:m.jsxs(xl,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((k=e.openDialog)==null?void 0:k.name)!=="elementLinkSelector"&&nR(e,t)?m.jsx(Lb,{className:"App-mobile-menu",heading:"selectedShapeActions",children:m.jsx(Cse,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,m.jsxs("footer",{className:"App-toolbar",children:[v(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&m.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(M=>({...Cb(t,M)}))},children:H("buttons.scrollBackToContent")})]})]})})]})},HV=e=>{let t=T.useRef(null),[n,r]=T.useState(null);return T.useLayoutEffect(()=>{if(!e.spreadsheet)return;let i=$je(e.chartType,e.spreadsheet,0,0);r(i);let s,o=t.current;return(async()=>{var a;return s=await NN(i,{exportBackground:!1,viewBackgroundColor:ki.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),m.jsx("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:m.jsx("div",{ref:t})})},qXe=({setAppState:e,appState:t,onClose:n})=>{let{onInsertElements:r}=Oc(),i=Ne.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{r(a),Pn("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return m.jsx(Nl,{size:"small",onCloseRequest:i,title:H("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:m.jsxs("div",{className:"container",children:[m.jsx(HV,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),m.jsx(HV,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},QXe=()=>m.jsxs("div",{className:"HelpDialog__header",children:[m.jsxs("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:Vz}),H("helpDialog.documentation")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:Vz}),H("helpDialog.blog")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:eee}),H("helpDialog.github")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:KIe}),"YouTube"]})]}),JXe=e=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{children:e.title}),m.jsx("div",{className:"HelpDialog__islands-container",children:e.children})]}),RS=e=>m.jsxs("div",{className:`HelpDialog__island ${e.className}`,children:[m.jsx("h4",{className:"HelpDialog__island-title",children:e.caption}),m.jsx("div",{className:"HelpDialog__island-content",children:e.children})]});function*eKe(e,t){let n=!0;for(let r of e)n||(yield t),n=!1,yield r}var tKe=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),Xe=({label:e,shortcuts:t,isOr:n=!0})=>{let r=t.map(i=>(i.endsWith("++")?[...i.slice(0,-2).split("+"),"+"]:i.split("+")).map(s=>m.jsx(nKe,{children:tKe(s)},s)));return m.jsxs("div",{className:"HelpDialog__shortcut",children:[m.jsx("div",{children:e}),m.jsx("div",{className:"HelpDialog__key-container",children:[...eKe(r,n?H("helpDialog.or"):null)]})]})},nKe=e=>m.jsx("kbd",{className:"HelpDialog__key",...e}),rKe=({onClose:e})=>{let t=Ne.useCallback(()=>{e&&e()},[e]);return m.jsx(m.Fragment,{children:m.jsxs(Nl,{onCloseRequest:t,title:H("helpDialog.title"),className:"HelpDialog",children:[m.jsx(QXe,{}),m.jsxs(JXe,{title:H("helpDialog.shortcuts"),children:[m.jsxs(RS,{className:"HelpDialog__island--tools",caption:H("helpDialog.tools"),children:[m.jsx(Xe,{label:H("toolBar.hand"),shortcuts:[J.H]}),m.jsx(Xe,{label:H("toolBar.selection"),shortcuts:[J.V,J[1]]}),m.jsx(Xe,{label:H("toolBar.rectangle"),shortcuts:[J.R,J[2]]}),m.jsx(Xe,{label:H("toolBar.diamond"),shortcuts:[J.D,J[3]]}),m.jsx(Xe,{label:H("toolBar.ellipse"),shortcuts:[J.O,J[4]]}),m.jsx(Xe,{label:H("toolBar.arrow"),shortcuts:[J.A,J[5]]}),m.jsx(Xe,{label:H("toolBar.line"),shortcuts:[J.L,J[6]]}),m.jsx(Xe,{label:H("toolBar.freedraw"),shortcuts:[J.P,J[7]]}),m.jsx(Xe,{label:H("toolBar.text"),shortcuts:[J.T,J[8]]}),m.jsx(Xe,{label:H("toolBar.image"),shortcuts:[J[9]]}),m.jsx(Xe,{label:H("toolBar.eraser"),shortcuts:[J.E,J[0]]}),m.jsx(Xe,{label:H("toolBar.frame"),shortcuts:[J.F]}),m.jsx(Xe,{label:H("toolBar.laser"),shortcuts:[J.K]}),m.jsx(Xe,{label:H("labels.eyeDropper"),shortcuts:[J.I,"Shift+S","Shift+G"]}),m.jsx(Xe,{label:H("helpDialog.editLineArrowPoints"),shortcuts:[Ue("CtrlOrCmd+Enter")]}),m.jsx(Xe,{label:H("helpDialog.editText"),shortcuts:[Ue("Enter")]}),m.jsx(Xe,{label:H("helpDialog.textNewLine"),shortcuts:[Ue("Enter"),Ue("Shift+Enter")]}),m.jsx(Xe,{label:H("helpDialog.textFinish"),shortcuts:[Ue("Esc"),Ue("CtrlOrCmd+Enter")]}),m.jsx(Xe,{label:H("helpDialog.curvedArrow"),shortcuts:["A",H("helpDialog.click"),H("helpDialog.click"),H("helpDialog.click")],isOr:!1}),m.jsx(Xe,{label:H("helpDialog.curvedLine"),shortcuts:["L",H("helpDialog.click"),H("helpDialog.click"),H("helpDialog.click")],isOr:!1}),m.jsx(Xe,{label:H("helpDialog.cropStart"),shortcuts:[H("helpDialog.doubleClick"),Ue("Enter")],isOr:!0}),m.jsx(Xe,{label:H("helpDialog.cropFinish"),shortcuts:[Ue("Enter"),Ue("Escape")],isOr:!0}),m.jsx(Xe,{label:H("toolBar.lock"),shortcuts:[J.Q]}),m.jsx(Xe,{label:H("helpDialog.preventBinding"),shortcuts:[Ue("CtrlOrCmd")]}),m.jsx(Xe,{label:H("toolBar.link"),shortcuts:[Ue("CtrlOrCmd+K")]})]}),m.jsxs(RS,{className:"HelpDialog__island--view",caption:H("helpDialog.view"),children:[m.jsx(Xe,{label:H("buttons.zoomIn"),shortcuts:[Ue("CtrlOrCmd++")]}),m.jsx(Xe,{label:H("buttons.zoomOut"),shortcuts:[Ue("CtrlOrCmd+-")]}),m.jsx(Xe,{label:H("buttons.resetZoom"),shortcuts:[Ue("CtrlOrCmd+0")]}),m.jsx(Xe,{label:H("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),m.jsx(Xe,{label:H("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),m.jsx(Xe,{label:H("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),m.jsx(Xe,{label:H("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),m.jsx(Xe,{label:H("buttons.zenMode"),shortcuts:[Ue("Alt+Z")]}),m.jsx(Xe,{label:H("buttons.objectsSnapMode"),shortcuts:[Ue("Alt+S")]}),m.jsx(Xe,{label:H("labels.toggleGrid"),shortcuts:[Ue("CtrlOrCmd+'")]}),m.jsx(Xe,{label:H("labels.viewMode"),shortcuts:[Ue("Alt+R")]}),m.jsx(Xe,{label:H("labels.toggleTheme"),shortcuts:[Ue("Alt+Shift+D")]}),m.jsx(Xe,{label:H("stats.fullTitle"),shortcuts:[Ue("Alt+/")]}),m.jsx(Xe,{label:H("search.title"),shortcuts:[ls("searchMenu")]}),m.jsx(Xe,{label:H("commandPalette.title"),shortcuts:bb?[ls("commandPalette")]:[ls("commandPalette"),ls("commandPalette",1)]})]}),m.jsxs(RS,{className:"HelpDialog__island--editor",caption:H("helpDialog.editor"),children:[m.jsx(Xe,{label:H("helpDialog.createFlowchart"),shortcuts:[Ue("CtrlOrCmd+Arrow Key")],isOr:!0}),m.jsx(Xe,{label:H("helpDialog.navigateFlowchart"),shortcuts:[Ue("Alt+Arrow Key")],isOr:!0}),m.jsx(Xe,{label:H("labels.moveCanvas"),shortcuts:[Ue(`Space+${H("helpDialog.drag")}`),Ue(`Wheel+${H("helpDialog.drag")}`)],isOr:!0}),m.jsx(Xe,{label:H("buttons.clearReset"),shortcuts:[Ue("CtrlOrCmd+Delete")]}),m.jsx(Xe,{label:H("labels.delete"),shortcuts:[Ue("Delete")]}),m.jsx(Xe,{label:H("labels.cut"),shortcuts:[Ue("CtrlOrCmd+X")]}),m.jsx(Xe,{label:H("labels.copy"),shortcuts:[Ue("CtrlOrCmd+C")]}),m.jsx(Xe,{label:H("labels.paste"),shortcuts:[Ue("CtrlOrCmd+V")]}),m.jsx(Xe,{label:H("labels.pasteAsPlaintext"),shortcuts:[Ue("CtrlOrCmd+Shift+V")]}),m.jsx(Xe,{label:H("labels.selectAll"),shortcuts:[Ue("CtrlOrCmd+A")]}),m.jsx(Xe,{label:H("labels.multiSelect"),shortcuts:[Ue(`Shift+${H("helpDialog.click")}`)]}),m.jsx(Xe,{label:H("helpDialog.deepSelect"),shortcuts:[Ue(`CtrlOrCmd+${H("helpDialog.click")}`)]}),m.jsx(Xe,{label:H("helpDialog.deepBoxSelect"),shortcuts:[Ue(`CtrlOrCmd+${H("helpDialog.drag")}`)]}),(HN||bb)&&m.jsx(Xe,{label:H("labels.copyAsPng"),shortcuts:[Ue("Shift+Alt+C")]}),m.jsx(Xe,{label:H("labels.copyStyles"),shortcuts:[Ue("CtrlOrCmd+Alt+C")]}),m.jsx(Xe,{label:H("labels.pasteStyles"),shortcuts:[Ue("CtrlOrCmd+Alt+V")]}),m.jsx(Xe,{label:H("labels.sendToBack"),shortcuts:[Ue(Cc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),m.jsx(Xe,{label:H("labels.bringToFront"),shortcuts:[Ue(Cc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),m.jsx(Xe,{label:H("labels.sendBackward"),shortcuts:[Ue("CtrlOrCmd+[")]}),m.jsx(Xe,{label:H("labels.bringForward"),shortcuts:[Ue("CtrlOrCmd+]")]}),m.jsx(Xe,{label:H("labels.alignTop"),shortcuts:[Ue("CtrlOrCmd+Shift+Up")]}),m.jsx(Xe,{label:H("labels.alignBottom"),shortcuts:[Ue("CtrlOrCmd+Shift+Down")]}),m.jsx(Xe,{label:H("labels.alignLeft"),shortcuts:[Ue("CtrlOrCmd+Shift+Left")]}),m.jsx(Xe,{label:H("labels.alignRight"),shortcuts:[Ue("CtrlOrCmd+Shift+Right")]}),m.jsx(Xe,{label:H("labels.duplicateSelection"),shortcuts:[Ue("CtrlOrCmd+D"),Ue(`Alt+${H("helpDialog.drag")}`)]}),m.jsx(Xe,{label:H("helpDialog.toggleElementLock"),shortcuts:[Ue("CtrlOrCmd+Shift+L")]}),m.jsx(Xe,{label:H("buttons.undo"),shortcuts:[Ue("CtrlOrCmd+Z")]}),m.jsx(Xe,{label:H("buttons.redo"),shortcuts:kJ?[Ue("CtrlOrCmd+Y"),Ue("CtrlOrCmd+Shift+Z")]:[Ue("CtrlOrCmd+Shift+Z")]}),m.jsx(Xe,{label:H("labels.group"),shortcuts:[Ue("CtrlOrCmd+G")]}),m.jsx(Xe,{label:H("labels.ungroup"),shortcuts:[Ue("CtrlOrCmd+Shift+G")]}),m.jsx(Xe,{label:H("labels.flipHorizontal"),shortcuts:[Ue("Shift+H")]}),m.jsx(Xe,{label:H("labels.flipVertical"),shortcuts:[Ue("Shift+V")]}),m.jsx(Xe,{label:H("labels.showStroke"),shortcuts:[Ue("S")]}),m.jsx(Xe,{label:H("labels.showBackground"),shortcuts:[Ue("G")]}),m.jsx(Xe,{label:H("labels.showFonts"),shortcuts:[Ue("Shift+F")]}),m.jsx(Xe,{label:H("labels.decreaseFontSize"),shortcuts:[Ue("CtrlOrCmd+Shift+<")]}),m.jsx(Xe,{label:H("labels.increaseFontSize"),shortcuts:[Ue("CtrlOrCmd+Shift+>")]})]})]})]})})},iKe=4,sKe=8,oKe=({shouldWrap:e,children:t,username:n})=>e?m.jsx(w1,{label:n||"Unknown user",children:t}):m.jsx(m.Fragment,{children:t}),_S=({actionManager:e,collaborator:t,socketId:n,withName:r=!1,shouldWrapWithTooltip:i=!1,isBeingFollowed:s})=>{let o={socketId:n,collaborator:t,withName:r,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return m.jsx(oKe,{username:t.username,shouldWrap:i,children:a},n)},aKe=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],$se=Ne.memo(({className:e,mobile:t,collaborators:n,userToFollow:r})=>{let i=mo(),s=new Map;n.forEach((g,y)=>{let U=g.id||y;s.set(U,{...g,socketId:y})});let o=Array.from(s.values()).filter(g=>{var y;return(y=g.username)==null?void 0:y.trim()}),[a,l]=Ne.useState(""),f=o.filter(g=>{var y;return(y=g.username)==null?void 0:y.toLowerCase().includes(a)}),c=Ne.useRef(null);T.useLayoutEffect(()=>{if(c.current){let g=U=>{let x=Math.max(1,Math.min(8,Math.floor(U/38)));u(x)};if(g(c.current.clientWidth),!VA)return;let y=new ResizeObserver(U=>{for(let x of U){let{width:v}=x.contentRect;g(v)}});return y.observe(c.current),()=>{y.disconnect()}}},[]);let[d,u]=Ne.useState(iKe),h=o.slice(0,d-1).map(g=>_S({actionManager:i,collaborator:g,socketId:g.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:g.socketId===r}));return t?m.jsx("div",{className:Ye("UserList UserList_mobile",e),children:o.map(g=>_S({actionManager:i,collaborator:g,socketId:g.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:g.socketId===r}))}):m.jsx("div",{className:"UserList__wrapper",ref:c,children:m.jsxs("div",{className:Ye("UserList",e),style:{"--max-avatars":d},children:[h,o.length>d-1&&m.jsxs(Jw,{children:[m.jsxs(e7,{className:"UserList__more",children:["+",o.length-d+1]}),m.jsx(UR,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:m.jsxs(xl,{padding:2,children:[o.length>=sKe&&m.jsx(Kie,{placeholder:H("quickSearch.placeholder"),onChange:l}),m.jsx(Yie,{className:"dropdown-menu UserList__collaborators",placeholder:H("userList.empty"),children:f.length>0?[m.jsx("div",{className:"hint",children:H("userList.hint.text")}),f.map(g=>_S({actionManager:i,collaborator:g,socketId:g.socketId,withName:!0,isBeingFollowed:g.socketId===r}))]:[]}),m.jsx(fie,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;let n=t.collaborators.keys();for(let[r,i]of e.collaborators){let s=t.collaborators.get(r);if(!s||r!==n.next().value||!$i(i,s,aKe))return!1}return!0}),VV=({children:e,color:t})=>m.jsx("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":ki[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":ki[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":ki[t][9]},children:e}),lKe=({elements:e,appState:t,setAppState:n,files:r,actionManager:i,exportOpts:s,canvas:o,onCloseRequest:a})=>{let{onExportToBackend:l}=s;return m.jsx("div",{className:"ExportDialog ExportDialog--json",children:m.jsxs("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&m.jsxs(VV,{color:"lime",children:[m.jsx("div",{className:"Card-icon",children:BTe}),m.jsx("h2",{children:H("exportDialog.disk_title")}),m.jsxs("div",{className:"Card-details",children:[H("exportDialog.disk_details"),!T1&&i.renderAction("changeProjectName")]}),m.jsx(Xt,{className:"Card-button",type:"button",title:H("exportDialog.disk_button"),"aria-label":H("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{i.executeAction(sse,"ui")}})]}),l&&m.jsxs(VV,{color:"pink",children:[m.jsx("div",{className:"Card-icon",children:QA}),m.jsx("h2",{children:H("exportDialog.link_title")}),m.jsx("div",{className:"Card-details",children:H("exportDialog.link_details")}),m.jsx(Xt,{className:"Card-button",type:"button",title:H("exportDialog.link_button"),"aria-label":H("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{Pn("export","link",`ui (${WMe()})`),await l(e,t,r),a()}catch(f){n({errorMessage:f.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,r,o)]})})},cKe=({elements:e,appState:t,files:n,actionManager:r,exportOpts:i,canvas:s,setAppState:o})=>{var l;let a=Ne.useCallback(()=>{o({openDialog:null})},[o]);return m.jsx(m.Fragment,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&m.jsx(Nl,{onCloseRequest:a,title:H("buttons.export"),children:m.jsx(lKe,{elements:e,appState:t,setAppState:o,files:n,actionManager:r,onCloseRequest:a,exportOpts:i,canvas:s})})})},fKe=e=>m.jsx("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${H("helpDialog.title")}  ?`,"aria-label":H("helpDialog.title"),children:cN}),Hse=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:r})=>{let{FooterCenterTunnel:i,WelcomeScreenHelpHintTunnel:s}=Fo(),o=di(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return m.jsxs("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[m.jsx("div",{className:Ye("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:m.jsx(Ua.Col,{gap:2,children:m.jsxs(Lb,{heading:"canvasActions",children:[m.jsx(pXe,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&m.jsx(mXe,{renderAction:t.renderAction,className:Ye("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&m.jsx(bXe,{renderAction:t.renderAction,className:Ye("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),m.jsx(i.Out,{}),m.jsx("div",{className:Ye("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:m.jsxs("div",{style:{position:"relative"},children:[r&&m.jsx(s.Out,{}),m.jsx(fKe,{onClick:()=>t.executeAction(NR)})]})}),m.jsx(gXe,{actionManager:t,showExitZenModeBtn:n})]})},dKe=Hse;Hse.displayName="Footer";var Vse=Ne.createContext({}),Wse=({children:e,className:t})=>{let n=di(),r=T.useContext(Vse),i=!!(n.editor.canFitSidebar&&r.shouldRenderDockButton);return m.jsxs("div",{className:Ye("sidebar__header",t),"data-testid":"sidebar-header",children:[e,m.jsxs("div",{className:"sidebar__header__buttons",children:[i&&m.jsx(w1,{label:H("labels.sidebarLock"),children:m.jsx(Gg,{onSelect:()=>{var s;return(s=r.onDock)==null?void 0:s.call(r,!r.docked)},selected:!!r.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":H("labels.sidebarLock"),children:bTe})}),m.jsx(Gg,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:r.onCloseRequest,"aria-label":H("buttons.close"),children:r6})]})]})};Wse.displayName="SidebarHeader";var Gse=({name:e,tab:t,icon:n,title:r,children:i,onToggle:s,className:o,style:a})=>{var c;let l=ui(),f=Ds();return m.jsxs("label",{title:r,className:"sidebar-trigger__label-element",children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");let u=d.target.checked;l({openSidebar:u?{name:e,tab:t}:null}),s==null||s(u)},checked:((c=f.openSidebar)==null?void 0:c.name)===e,"aria-label":r,"aria-keyshortcuts":"0"}),m.jsxs("div",{className:Ye("sidebar-trigger",o),style:a,children:[n&&m.jsx("div",{children:n}),i&&m.jsx("div",{className:"sidebar-trigger__label",children:i})]})]})};Gse.displayName="SidebarTrigger";var Xse=({children:e,...t})=>m.jsx(Mie,{className:"sidebar-triggers",...t,children:e});Xse.displayName="SidebarTabTriggers";var Kse=({children:e,tab:t,onSelect:n,...r})=>m.jsx(Tie,{value:t,asChild:!0,onSelect:n,children:m.jsx("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...r,children:e})});Kse.displayName="SidebarTabTrigger";var Yse=({children:e,...t})=>{let n=Ds(),r=ui();if(!n.openSidebar)return null;let{name:i}=n.openSidebar;return m.jsx(Aie,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>r(o=>({...o,openSidebar:{...o.openSidebar,name:i,tab:s}})),...t,children:e})};Yse.displayName="SidebarTabs";var Zse=({tab:e,children:t,...n})=>m.jsx(Iie,{...n,value:e,"data-testid":e,children:t});Zse.displayName="SidebarTab";var DR=Mi(!1),qse=T.forwardRef(({name:e,children:t,onDock:n,docked:r,className:i,...s},o)=>{It.DEV&&n&&r==null&&console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");let a=ui(),l=n7(DR);T.useLayoutEffect(()=>(l(!!r),()=>{l(!1)}),[l,r]);let f=T.useRef({});f.current.onCloseRequest=()=>{a({openSidebar:null})},f.current.onDock=h=>n==null?void 0:n(h),f.current=j3(f.current,{docked:r,shouldRenderDockButton:!!n&&r!=null});let c=T.useRef(null);T.useImperativeHandle(o,()=>c.current);let d=di(),u=T.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return SR(c,T.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!r||!d.editor.canFitSidebar)&&u()},[u,r,d.editor.canFitSidebar])),T.useEffect(()=>{let h=g=>{g.key===J.ESCAPE&&(!r||!d.editor.canFitSidebar)&&u()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[u,r,d.editor.canFitSidebar]),m.jsx(xl,{...s,className:Ye("sidebar",{"sidebar--docked":r},i),ref:c,children:m.jsx(Vse.Provider,{value:f.current,children:t})})});qse.displayName="SidebarInner";var Kl=Object.assign(T.forwardRef((e,t)=>{var a;let n=Ds(),{onStateChange:r}=e,i=T.useRef(n.openSidebar);T.useEffect(()=>{var l,f,c,d,u;(!n.openSidebar&&((l=i==null?void 0:i.current)==null?void 0:l.name)===e.name||((f=n.openSidebar)==null?void 0:f.name)===e.name&&((c=i==null?void 0:i.current)==null?void 0:c.name)!==e.name||((d=i.current)==null?void 0:d.name)===e.name)&&n.openSidebar!==i.current&&(r==null||r(((u=n.openSidebar)==null?void 0:u.name)!==e.name?null:n.openSidebar)),i.current=n.openSidebar},[n.openSidebar,r,e.name]);let[s,o]=T.useState(!1);return T.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((a=n.openSidebar)==null?void 0:a.name)===e.name?T.createElement(qse,{...e,ref:t,key:e.name}):null}),{Header:Wse,TabTriggers:Xse,TabTrigger:Kse,Tabs:Yse,Tab:Zse,Trigger:Gse});Kl.displayName="Sidebar";var Qse={};kQ(Qse,{ChangeCanvasBackground:()=>coe,ClearCanvas:()=>aoe,CommandPalette:()=>ioe,Export:()=>foe,Help:()=>ooe,LiveCollaborationTrigger:()=>uoe,LoadScene:()=>toe,SaveAsImage:()=>roe,SaveToActiveFile:()=>noe,SearchMenu:()=>soe,Socials:()=>doe,ToggleTheme:()=>loe});var Jse=Mi({active:!1});async function uKe({title:e,description:t,actionLabel:n,color:r}){return new Promise(i=>{ml.set(Jse,{active:!0,onConfirm:()=>i(!0),onClose:()=>i(!1),onReject:()=>i(!1),title:e,description:t,actionLabel:n,color:r})})}var eoe=({value:e,shortcut:t,onChange:n,choices:r,children:i,name:s})=>{let o=di();return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[m.jsx("label",{className:"dropdown-menu-item__text",htmlFor:s,children:i}),m.jsx(Pse,{name:s,value:e,onChange:n,choices:r})]}),t&&!o.editor.isMobile&&m.jsx("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};eoe.displayName="DropdownMenuItemContentRadio";var hKe=eoe,toe=()=>{let{t:e}=ms(),t=mo(),n=u7();return t.isActionEnabled(BM)?m.jsx(Ra,{icon:fN,onSelect:async()=>{(!n.length||await uKe({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:m.jsx(bc,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>m.jsx("strong",{children:r}),br:()=>m.jsx("br",{})})}))&&t.executeAction(BM)},"data-testid":"load-button",shortcut:ls("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};toe.displayName="LoadScene";var noe=()=>{let{t:e}=ms(),t=mo();return t.isActionEnabled(yV)?m.jsx(Ra,{shortcut:ls("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(yV),icon:LTe,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};noe.displayName="SaveToActiveFile";var roe=()=>{let e=ui(),{t}=ms();return m.jsx(Ra,{icon:tee,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:ls("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};roe.displayName="SaveAsImage";var ioe=e=>{let t=ui(),{t:n}=ms();return m.jsx(Ra,{icon:uee,"data-testid":"command-palette-button",onSelect:()=>{Pn("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:ls("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};ioe.displayName="CommandPalette";var soe=e=>{let{t}=ms(),n=mo();return m.jsx(Ra,{icon:m1,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(Nse)},shortcut:ls("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};soe.displayName="SearchMenu";var ooe=()=>{let{t:e}=ms(),t=mo();return m.jsx(Ra,{"data-testid":"help-menu-item",icon:cN,onSelect:()=>t.executeAction(NR),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};ooe.displayName="Help";var aoe=()=>{let{t:e}=ms(),t=n7(d7);return mo().isActionEnabled(A2)?m.jsx(Ra,{icon:p1,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};aoe.displayName="ClearCanvas";var loe=e=>{let{t}=ms(),n=Ds(),r=mo(),i=ls("toggleTheme");return r.isActionEnabled(d9)?e!=null&&e.allowSystemTheme?m.jsx(hKe,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:Ft.LIGHT,label:qA,ariaLabel:`${t("buttons.lightMode")} - ${i}`},{value:Ft.DARK,label:ZA,ariaLabel:`${t("buttons.darkMode")} - ${i}`},{value:"system",label:XIe,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):m.jsx(Ra,{onSelect:s=>{if(s.preventDefault(),e==null?void 0:e.onSelect)e.onSelect(n.theme===Ft.DARK?Ft.LIGHT:Ft.DARK);else return r.executeAction(d9)},icon:n.theme===Ft.DARK?qA:ZA,"data-testid":"toggle-dark-mode",shortcut:i,"aria-label":n.theme===Ft.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===Ft.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};loe.displayName="ToggleTheme";var coe=()=>{let{t:e}=ms(),t=Ds(),n=mo(),r=Dy();return t.viewModeEnabled||!r.UIOptions.canvasActions.changeViewBackgroundColor?null:m.jsxs("div",{style:{marginTop:"0.5rem"},children:[m.jsx("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),m.jsx("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};coe.displayName="ChangeCanvasBackground";var foe=()=>{let{t:e}=ms(),t=ui();return m.jsx(Ra,{icon:Mw,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};foe.displayName="Export";var doe=()=>{let{t:e}=ms();return m.jsxs(m.Fragment,{children:[m.jsx(rx,{icon:eee,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),m.jsx(rx,{icon:PTe,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),m.jsx(rx,{icon:_Te,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};doe.displayName="Socials";var uoe=({onSelect:e,isCollaborating:t})=>{let{t:n}=ms();return m.jsx(Ra,{"data-testid":"collab-button",icon:iee,className:Ye({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};uoe.displayName="LiveCollaborationTrigger";var _y=(e,t)=>{let n=Mi(0),r=i=>{let{tunnelsJotai:{useAtom:s}}=Fo(),[,o]=s(n),a=T.useRef({preferHost:!1,counter:0});return T.useLayoutEffect(()=>{let l=a.current;return o(f=>{let c=f+1;return l.counter=c,c}),()=>{o(f=>{let c=f-1;return l.counter=c,c||(l.preferHost=!1),c})}},[o]),i.__fallback||(a.current.preferHost=!0),!a.current.counter&&i.__fallback&&a.current.preferHost||a.current.counter>1&&i.__fallback?null:m.jsx(t,{...i})};return r.displayName=e,r},pKe=Object.assign(_y("MainMenu",({children:e,onSelect:t})=>{var a;let{MainMenuTunnel:n}=Fo(),r=di(),i=Ds(),s=ui(),o=r.editor.isMobile?void 0:()=>s({openMenu:null});return m.jsx(n.In,{children:m.jsxs(Kn,{open:i.openMenu==="canvas",children:[m.jsx(Kn.Trigger,{onToggle:()=>{s({openMenu:i.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:JJ}),m.jsxs(Kn.Content,{onClickOutside:o,onSelect:Sw(t,()=>{s({openMenu:null})}),children:[e,r.editor.isMobile&&i.collaborators.size>0&&m.jsxs("fieldset",{className:"UserList-Wrapper",children:[m.jsx("legend",{children:H("labels.collaborators")}),m.jsx($se,{mobile:!0,collaborators:i.collaborators,userToFollow:((a=i.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:Kn.Trigger,Item:Kn.Item,ItemLink:Kn.ItemLink,ItemCustom:Kn.ItemCustom,Group:Kn.Group,Separator:Kn.Separator,DefaultItems:Qse}),Gs=pKe,LR=({title:e,children:t,actionLabel:n,onClick:r})=>m.jsxs("div",{className:"OverwriteConfirm__Actions__Action",children:[m.jsx("h4",{children:e}),m.jsx("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),m.jsx(T2,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:r})]}),mKe=()=>{let{t:e}=ms(),t=mo(),n=ui();return m.jsx(LR,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(ise,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},gKe=()=>{let{t:e}=ms(),t=mo();return m.jsx(LR,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(sse,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},WV=Object.assign(({children:e})=>m.jsx("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:mKe,SaveToDisk:gKe}),PS=Object.assign(_y("OverwriteConfirmDialog",({children:e})=>{let{OverwriteConfirmDialogTunnel:t}=Fo(),[n,r]=Ur(Jse);if(!n.active)return null;let i=()=>{n.onClose(),r(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),r(o=>({...o,active:!1}))};return m.jsx(t.In,{children:m.jsx(Nl,{onCloseRequest:i,title:!1,size:916,children:m.jsxs("div",{className:"OverwriteConfirm",children:[m.jsx("h3",{children:n.title}),m.jsxs("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[m.jsx("div",{className:"OverwriteConfirm__Description__icon",children:IIe}),m.jsx("div",{children:n.description}),m.jsx("div",{className:"OverwriteConfirm__Description__spacer"}),m.jsx(T2,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),m.jsx(WV,{children:e})]})})})}),{Actions:WV,Action:LR}),bKe=Mi(""),hoe=Mi(null),yKe=350,UKe=()=>{let e=Oc(),t=ui(),n=T.useRef(null),[r,i]=Ur(bKe),s=r.trim(),[o,a]=T.useState(!1),[l,f]=T.useState({nonce:null,items:[]}),c=T.useRef(null),d=T.useRef(void 0),[u,h]=Ur(hoe),g=e.scene.getNonDeletedElementsMap();T.useEffect(()=>{o||(s!==c.current||e.scene.getSceneNonce()!==d.current)&&(c.current=null,GV(s,e,(E,k)=>{f({nonce:Tc(),items:E}),c.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:E.map(M=>({id:M.textElement.id,focus:!1,matchedLines:M.matchedLines}))})}))},[o,s,g,e,t,h,d]);let y=()=>{l.items.length>0&&h(E=>E===null?0:(E+1)%l.items.length)},U=()=>{l.items.length>0&&h(E=>E===null?0:E-1<0?l.items.length-1:E-1)};T.useEffect(()=>{t(E=>({searchMatches:E.searchMatches.map((k,M)=>M===u?{...k,focus:!0}:{...k,focus:!1})}))},[u,t]),T.useEffect(()=>{var E,k,M,S;if(l.items.length>0&&u!==null){let A=l.items[u];if(A){let I=e.state.zoom.value,R=jo({text:A.searchQuery,x:A.textElement.x+(((E=A.matchedLines[0])==null?void 0:E.offsetX)??0),y:A.textElement.y+(((k=A.matchedLines[0])==null?void 0:k.offsetY)??0),width:(M=A.matchedLines[0])==null?void 0:M.width,height:(S=A.matchedLines[0])==null?void 0:S.height,fontSize:A.textElement.fontSize,fontFamily:A.textElement.fontFamily}),D=14,_=A.textElement.fontSize,P=_*I<D;if(!Z3([R],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||P){let $;P?_>=D?$={fitToContent:!0}:$={fitToViewport:!0,maxZoom:Uc(D/_,1)}:$={fitToContent:!0},e.scrollToContent(R,{animate:!0,duration:300,...$,canvasOffsets:e.getEditorUIOffsets()})}}}},[u,l,e]),T.useEffect(()=>()=>{h(null),c.current=null,d.current=void 0,t({searchMatches:[]}),a(!1)},[t,h]);let x=i7({goToNextItem:y,goToPreviousItem:U,searchMatches:l});T.useEffect(()=>tr(window,"keydown",k=>{var M,S,A;if(k.key===J.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){k.preventDefault(),k.stopPropagation(),t({openSidebar:null});return}k[J.CTRL_OR_CMD]&&k.key===J.F&&(k.preventDefault(),k.stopPropagation(),(M=n.current)!=null&&M.matches(":focus")?t({openSidebar:null}):(e.state.openDialog&&t({openDialog:null}),(S=n.current)==null||S.focus(),(A=n.current)==null||A.select())),k.target instanceof HTMLElement&&k.target.closest(".layer-ui__search")&&x.searchMatches.items.length&&(k.key===J.ENTER&&(k.stopPropagation(),x.goToNextItem()),k.key===J.ARROW_UP?(k.stopPropagation(),x.goToPreviousItem()):k.key===J.ARROW_DOWN&&(k.stopPropagation(),x.goToNextItem()))},{capture:!0,passive:!1}),[t,x,e]);let v=`${l.items.length} ${l.items.length===1?H("search.singleResult"):H("search.multipleResults")}`;return m.jsxs("div",{className:"layer-ui__search",children:[m.jsx("div",{className:"layer-ui__search-header",children:m.jsx(PR,{className:Ag.SEARCH_MENU_INPUT_WRAPPER,value:r,ref:n,placeholder:H("search.placeholder"),icon:m1,onChange:E=>{i(E),a(!0);let k=E.trim();GV(k,e,(M,S)=>{f({nonce:Tc(),items:M}),h(S),c.current=k,d.current=e.scene.getSceneNonce(),t({searchMatches:M.map(A=>({id:A.textElement.id,focus:!1,matchedLines:A.matchedLines}))}),a(!1)})},selectOnRender:!0})}),m.jsxs("div",{className:"layer-ui__search-count",children:[l.items.length>0&&m.jsxs(m.Fragment,{children:[u!==null&&u>-1?m.jsxs("div",{children:[u+1," / ",v]}):m.jsx("div",{children:v}),m.jsxs("div",{className:"result-nav",children:[m.jsx(Gg,{onSelect:()=>{y()},className:"result-nav-btn",children:pee}),m.jsx(Gg,{onSelect:()=>{U()},className:"result-nav-btn",children:tNe})]})]}),l.items.length===0&&s&&c.current&&m.jsx("div",{style:{margin:"1rem auto"},children:H("search.noMatch")})]}),m.jsx(EKe,{matches:l,onItemClick:h,focusIndex:u,searchQuery:s})]})},xKe=e=>{let t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return m.jsx("div",{tabIndex:-1,className:Ye("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:m.jsx("div",{className:"preview-text",children:t.flatMap((n,r)=>m.jsx(T.Fragment,{children:r===2?m.jsx("b",{children:n}):n},r))})})},wKe=e=>m.jsx("div",{className:"layer-ui__search-result-container",children:e.matches.items.map((t,n)=>m.jsx(xKe,{searchQuery:e.searchQuery,preview:t.preview,highlighted:n===e.focusIndex,onClick:()=>e.onItemClick(n)},t.textElement.id+t.index))}),vKe=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,EKe=T.memo(wKe,vKe),kKe=(e,t,n)=>{let r=e.slice(0,t),i=r.split(/\s+/),s=r.endsWith(" "),o=i.length-2-1-(s?0:1),a=i.slice(o<=0?0:o).join(" ")+(s?" ":""),l=20;a=a.length>l?a.slice(-l):a;let f=e.slice(t+n.length),c=f.split(/\s+/),d=!f.startsWith(" "),u=d?6:5,h=(d?"":" ")+c.slice(0,u).join(" ");return{indexInSearchQuery:a.length,previewText:a+n+h,moreBefore:o>0,moreAfter:c.length>u}},SKe=(e,t)=>{let n=e.split(`
`),r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s],a=n[s+1];if(a){let l=t.indexOf(a,i);if(l>o.length+i){let f=l-(o.length+i);for(;f>0;)o+=" ",f--}}r.push(o),i=i+o.length}return r.join(`
`)},CKe=(e,t,n)=>{let r=SKe(e.text,e.originalText).split(`
`),i=[],s=0,o=0;for(let c of r){let d=s,u=d+c.length-1;i.push({line:c,startIndex:d,endIndex:u,lineNumber:o}),s=u+1,o++}let a=n,l=e.originalText.slice(n,n+t.length),f=[];for(let c of i){if(l==="")break;if(a>=c.startIndex&&a<=c.endIndex){let d=c.endIndex+1-a,u=c.line.slice(0,a-c.startIndex),h=l.slice(0,d);l=l.slice(d);let g=ds(u,wn(e),e.lineHeight);if(u===""&&(g.width=0),e.textAlign!=="left"&&c.line.length>0){let E=ds(c.line,wn(e),e.lineHeight),k=e.textAlign==="center"?(e.width-E.width)/2:e.width-E.width;g.width+=k}let{width:y,height:U}=ds(h,wn(e),e.lineHeight),x=g.width,v=c.lineNumber*g.height;f.push({offsetX:x,offsetY:v,width:y,height:U}),a+=d}}return f},AKe=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),GV=bVe((e,t,n)=>{if(!e||e===""){n([],null);return}let r=t.scene.getNonDeletedElements().filter(l=>Ve(l));r.sort((l,f)=>l.y-f.y);let i=[],s=new RegExp(AKe(e),"gi");for(let l of r){let f=null,c=l.originalText;for(;(f=s.exec(c))!==null;){let d=kKe(c,f.index,e),u=CKe(l,e,f.index);u.length>0&&i.push({textElement:l,searchQuery:e,preview:d,index:f.index,matchedLines:u})}}let o=new Set(t.visibleElements.map(l=>l.id)),a=i.findIndex(l=>o.has(l.textElement.id))??null;n(i,a)},yKe),poe=_y("DefaultSidebarTrigger",e=>{let{DefaultSidebarTriggerTunnel:t}=Fo();return m.jsx(t.In,{children:m.jsx(Kl.Trigger,{...e,className:"default-sidebar-trigger",name:bl.name})})});poe.displayName="DefaultSidebarTrigger";var moe=({children:e})=>{let{DefaultSidebarTabTriggersTunnel:t}=Fo();return m.jsx(t.In,{children:e})};moe.displayName="DefaultTabTriggers";var XV=Object.assign(_y("DefaultSidebar",({children:e,className:t,onDock:n,docked:r,...i})=>{var f;let s=Ds(),o=ui(),{DefaultSidebarTabTriggersTunnel:a}=Fo(),l=((f=s.openSidebar)==null?void 0:f.tab)===hm;return T.createElement(Kl,{...i,name:"default",key:"default",className:Ye("default-sidebar",t),docked:l||(r??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&r!=null?void 0:Sw(n,c=>{o({defaultSidebarDockedPreference:c})})},m.jsxs(Kl.Tabs,{children:[m.jsx(Kl.Header,{children:m.jsxs(Kl.TabTriggers,{children:[m.jsx(Kl.TabTrigger,{tab:hm,children:m1}),m.jsx(Kl.TabTrigger,{tab:N4,children:aN}),m.jsx(a.Out,{})]})}),m.jsx(Kl.Tab,{tab:N4,children:m.jsx(tXe,{})}),m.jsx(Kl.Tab,{tab:hm,children:m.jsx(UKe,{})}),e]}))}),{Trigger:poe,TabTriggers:moe}),MKe="small",TKe=e=>m.jsxs("label",{className:Ye("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${MKe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),m.jsx("div",{className:"ToolIcon__icon",children:fee})]}),IKe=({canvasRef:e,setError:t})=>{let n=e.current;if(!n)return;let r=n.parentElement;r&&(r.style.background="",t(null),n.replaceChildren())},goe=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:r,data:i})=>{let s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){IKe({canvasRef:e,setError:r});return}try{let a=await t.api,l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}let{elements:f,files:c}=l;r(null),i.current={elements:ZM(f,{regenerateIds:!0}),files:c};let d=await VN({elements:i.current.elements,files:i.current.files,exportPadding:e6,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await Rb(d)}catch(u){throw u.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(H("canvasError.canvasTooBig")):u}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&r(a),a}}},OR=e=>{Wh.set(g2.MERMAID_TO_EXCALIDRAW,e)},boe=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:r})=>{let{elements:i,files:s}=t.current;i.length&&(e.addElementsFromPasteOrLibrary({elements:i,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),r&&n&&OR(n))},yoe=({children:e})=>m.jsx("div",{className:"ttd-dialog-panels",children:e}),h9=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgess:i,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>m.jsxs("div",{className:"ttd-dialog-panel",children:[m.jsxs("div",{className:"ttd-dialog-panel__header",children:[m.jsx("label",{children:e}),s==null?void 0:s()]}),t,m.jsxs("div",{className:Ye("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[m.jsxs(Gg,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:r||i,children:[m.jsxs("div",{className:Ye({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&m.jsx("span",{children:n.icon})]}),i&&m.jsx(Jf,{})]}),!r&&!i&&(o==null?void 0:o()),a==null?void 0:a()]})]}),Uoe=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{let i=T.useRef(null),s=T.useRef(r);return s.current=r,T.useEffect(()=>{if(!s.current)return;let o=i.current;if(o){let a=l=>{var f;l[J.CTRL_OR_CMD]&&l.key===J.ENTER&&(l.preventDefault(),(f=s.current)==null||f.call(s))};return o.addEventListener("keydown",a),()=>{o.removeEventListener("keydown",a)}}},[]),m.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},NKe=({error:e})=>m.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",m.jsx("p",{children:e})]}),xoe=({error:e,canvasRef:t,loaded:n})=>m.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&m.jsx(NKe,{error:e.message}),n?m.jsx("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):m.jsx(Jf,{size:"2rem"})]}),woe=()=>m.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[m.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Ue("CtrlOrCmd")}),m.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Ue("Enter")})]}),RKe=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,KV=Ng(OR,300),_Ke=({mermaidToExcalidrawLib:e})=>{let[t,n]=T.useState(()=>Wh.get(g2.MERMAID_TO_EXCALIDRAW)||RKe),r=T.useDeferredValue(t.trim()),[i,s]=T.useState(null),o=T.useRef(null),a=T.useRef({elements:[],files:null}),l=Oc();T.useEffect(()=>{goe({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:r}).catch(c=>{FJ()&&console.error("Failed to parse mermaid definition",c)}),KV(r)},[r,e]),T.useEffect(()=>()=>{KV.flush()},[]);let f=()=>{boe({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"ttd-dialog-desc",children:m.jsx(bc,{i18nKey:"mermaid.description",flowchartLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:c}),sequenceLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:c}),classLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:c})})}),m.jsxs(yoe,{children:[m.jsx(h9,{label:H("mermaid.syntax"),children:m.jsx(Uoe,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:c=>n(c.target.value),onKeyboardSubmit:()=>{f()}})}),m.jsx(h9,{label:H("mermaid.preview"),panelAction:{action:()=>{f()},label:H("mermaid.button"),icon:z3},renderSubmitShortcut:()=>m.jsx(woe,{}),children:m.jsx(xoe,{canvasRef:o,loaded:e.loaded,error:i})})]})]})},PKe=_Ke,voe=e=>{let t=ui(),n=T.useRef(null),r=T.useRef(0);return m.jsx(Aie,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:i=>{var o;if(!i)return;let s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){let a=s.offsetHeight||0;a>r.current&&(r.current=a,s.style.minHeight=`min(${r.current}px, 100%)`)}e.dialog==="ttd"&&$J(["text-to-diagram","mermaid"],i)&&t({openDialog:{name:e.dialog,tab:i}})},children:e.children})};voe.displayName="TTDDialogTabs";var DKe=voe,Eoe=({children:e,...t})=>m.jsx(Mie,{className:"ttd-dialog-triggers",...t,children:e});Eoe.displayName="TTDDialogTabTriggers";var XM=({children:e,tab:t,onSelect:n,...r})=>m.jsx(Tie,{value:t,asChild:!0,onSelect:n,children:m.jsx("button",{type:"button",className:"ttd-dialog-tab-trigger",...r,children:e})});XM.displayName="TTDDialogTabTrigger";var KM=({tab:e,children:t,...n})=>m.jsx(Iie,{...n,value:e,children:t});KM.displayName="TTDDialogTab";var DS=3,kp=1e3,LKe=Mi(null),OKe=Mi(null),jKe=e=>{var n;let t=Ds();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:m.jsx(BKe,{...e,tab:t.openDialog.tab})},BKe=_y("TTDDialogBase",({tab:e,...t})=>{let n=Oc(),r=ui(),i=T.useRef(null),[s,o]=Ur(OKe),[a,l]=T.useState((s==null?void 0:s.prompt)??""),f=a.trim(),c=S=>{l(S.target.value),o(A=>({generatedResponse:(A==null?void 0:A.generatedResponse)??null,prompt:S.target.value}))},[d,u]=T.useState(!1),[h,g]=Ur(LKe),y=async()=>{if(f.length>kp||f.length<DS||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){f.length<DS&&M(new Error(`Prompt is too short (min ${DS} characters)`)),f.length>kp&&M(new Error(`Prompt is too long (max ${kp} characters)`));return}try{u(!0),Pn("ai","generate","ttd");let{generatedResponse:S,error:A,rateLimit:I,rateLimitRemaining:R}=await t.onTextSubmit(f);if(typeof S=="string"&&o(D=>({generatedResponse:S,prompt:(D==null?void 0:D.prompt)??null})),b2(I)&&b2(R)&&g({rateLimit:I,rateLimitRemaining:R}),A){M(A);return}if(!S){M(new Error("Generation failed"));return}try{await goe({canvasRef:i,data:E,mermaidToExcalidrawLib:x,setError:M,mermaidDefinition:S}),Pn("ai","mermaid parse success","ttd")}catch(D){console.info(`%cTTD mermaid render errror: ${D.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${D.message}`,"color: yellow"),Pn("ai","mermaid parse failed","ttd"),M(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(S){let A=S.message;(!A||A==="Failed to fetch")&&(A="Request failed"),M(new Error(A))}finally{u(!1)}},U=T.useRef(y);U.current=y;let[x,v]=T.useState({loaded:!1,api:qe(()=>import("./index-Cf7mltEi.js").then(S=>S.aR),[])});T.useEffect(()=>{(async()=>(await x.api,v(S=>({...S,loaded:!0}))))()},[x.api]);let E=T.useRef({elements:[],files:null}),[k,M]=T.useState(null);return m.jsx(Nl,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:m.jsxs(DKe,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?m.jsx("p",{className:"dialog-mermaid-title",children:H("mermaid.title")}):m.jsxs(Eoe,{children:[m.jsx(XM,{tab:"text-to-diagram",children:m.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[H("labels.textToDiagram"),m.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),m.jsx(XM,{tab:"mermaid",children:"Mermaid"})]}),m.jsx(KM,{className:"ttd-dialog-content",tab:"mermaid",children:m.jsx(PKe,{mermaidToExcalidrawLib:x})}),!("__fallback"in t)&&m.jsxs(KM,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[m.jsx("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),m.jsxs(yoe,{children:[m.jsx(h9,{label:H("labels.prompt"),panelAction:{action:y,label:"Generate",icon:z3},onTextSubmitInProgess:d,panelActionDisabled:f.length>kp||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?m.jsxs("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>m.jsx(woe,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return m.jsxs("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(OR(s.generatedResponse),r({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",m.jsx(o7,{icon:z3})]});let S=f.length/kp;return S>.8?m.jsxs("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:S>1?"var(--color-danger)":void 0},children:["Length: ",f.length,"/",kp]}):null},children:m.jsx(Uoe,{onChange:c,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{U.current()}})}),m.jsx(h9,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),boe({app:n,data:E})},label:"Insert",icon:z3},children:m.jsx(xoe,{canvasRef:i,error:k,loaded:x.loaded})})]})]})]})})}),FKe=.01,ed=(e,t)=>!(t==="height"&&Ve(e)||t==="width"&&Ve(e)||t==="angle"&&ht(e)),is=(e,t)=>{let n=e+t/2;return n-n%t},p9=(e,t,n)=>Object.keys(e).map(r=>({original:(n??t).get(r),latest:t.get(r)})).filter(r=>r.original!==void 0&&r.latest!==void 0),Ob=(e,t,n,r,i,s,o,a=!0)=>{let l=r.get(n.id);if(!l)return;let[f,c]=[n.x+n.width/2,n.y+n.height/2],[d,u]=ue(O(n.x,n.y),O(f,c),n.angle),h=e-d,g=t-u,[y,U]=ue(O(e,t),O(f+h,c+g),-n.angle);xe(l,{x:y,y:U},a),YM(l,r,i,s);let x=At(n,o);if(x){let v=r.get(x.id);v&&xe(v,{x:x.x+h,y:x.y+g},a)}},jR=(e,t)=>{let n=$h(t).map(r=>Fn(e,r).reduce((i,s)=>(i[s.id]=!0,i),{}));return e.filter(r=>!Og(r)).forEach(r=>{n.push({[r.id]:!0})}),n},YM=(e,t,n,r,i)=>{wt(e)?W4([e],t,n,r,!0,[],i==null?void 0:i.zoom):co(e,t,i)},zKe=({label:e,icon:t,dragInputCallback:n,value:r,elements:i,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:f,sensitivity:c=1})=>{let d=Oc(),u=T.useRef(null),h=T.useRef(null),[g,y]=T.useState(r.toString()),U=T.useRef(null);U.current||(U.current={originalAppState:jf(f),originalElements:i,lastUpdatedValue:g,updatePending:!1}),T.useEffect(()=>{let E=r.toString();y(E),U.current.lastUpdatedValue=E},[r]);let x=(E,k,M)=>{if(!U.current.updatePending)return!1;U.current.updatePending=!1;let S=Number(E);if(isNaN(S)){y(r.toString());return}let A=Number(S.toFixed(2)),I=Number(r);(isNaN(I)||Math.abs(A-I)>=FKe)&&(U.current.lastUpdatedValue=E,n({accumulatedChange:0,instantChange:0,originalElements:k,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:A,property:a,originalAppState:M,setInputValue:R=>y(String(R))}),d.syncActionResult({captureUpdate:pe.IMMEDIATELY}))},v=T.useRef({});return v.current.handleInputValue=x,T.useEffect(()=>{let E=u.current,k=v.current;return()=>{var S;let M=E==null?void 0:E.value;M&&((S=k.handleInputValue)==null||S.call(k,M,U.current.originalElements,U.current.originalAppState)),window.removeEventListener("pointermove",k.onPointerMove,!1),window.removeEventListener("pointerup",k.onPointerUp,!1)}},[s]),s?m.jsxs("div",{className:Ye("drag-input-container",!s&&"disabled"),"data-testid":e,children:[m.jsx("div",{className:"drag-input-label",ref:h,onPointerDown:E=>{if(u.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(u.current.value);let k=null,M=d.scene.getNonDeletedElements().reduce((P,$)=>(P.set($.id,N1($)),P),new Map),S=i.map(P=>M.get(P.id)),A=jf(f),I=0,R=0,D=P=>{if(k&&M!==null&&S!==null){let $=P.clientX-k.x;$!==0&&(R+=$,Math.abs(R)>=c&&(R=Math.sign(R)*Math.floor(Math.abs(R)/c),I+=R,n({accumulatedChange:I,instantChange:R,originalElements:S,originalElementsMap:M,shouldKeepAspectRatio:o,shouldChangeByStepSize:P.shiftKey,property:a,scene:l,originalAppState:A,setInputValue:L=>y(String(L))}),R=0))}k={x:P.clientX,y:P.clientY}},_=()=>{window.removeEventListener("pointermove",D,!1),d.syncActionResult({captureUpdate:pe.IMMEDIATELY}),k=null,I=0,R=0,S=null,M=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener("pointerup",_,!1)};v.current.onPointerMove=D,v.current.onPointerUp=_,window.addEventListener("pointermove",D,!1),window.addEventListener("pointerup",_,!1)}},onPointerEnter:()=>{h.current&&(h.current.style.cursor="ew-resize")},children:t?m.jsx(o7,{icon:t}):e}),m.jsx("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:E=>{if(s){let k=E.target;k instanceof HTMLInputElement&&E.key===J.ENTER&&(x(k.value,i,f),d.focusContainer())}},ref:u,value:g,onChange:E=>{U.current.updatePending=!0,y(E.target.value)},onFocus:E=>{E.target.select(),U.current.originalElements=i,U.current.originalAppState=jf(f)},onBlur:E=>{g?s&&x(E.target.value,U.current.originalElements,U.current.originalAppState):y(r.toString())},disabled:!s})]}):null},ad=zKe,YV=10,$Ke=e=>e.type==="image",HKe=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:r,shouldChangeByStepSize:i,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:f})=>{let c=f.getNonDeletedElementsMap(),d=t[0],u=c.get(d.id);if(d&&u){let h=r||$Ke(d),g=d.width/d.height;if(a.croppingElementId===d.id){let E=c.get(d.id);if(!E||!ln(E)||!E.crop)return;let k=E.crop,M={...k},S=E.scale[0]===-1,A=E.scale[1]===-1,{width:I,height:R}=Gf(E),D=k.naturalWidth/I,_=k.naturalHeight/R,P=S?k.width+k.x:k.naturalWidth-k.x,$=A?k.height+k.y:k.naturalHeight-k.y,L=gi*D,B=gi*_;if(s!==void 0){if(o==="width"){let F=s*D,K=Ot(F,L,P);M={...M,width:K,x:S?k.x+k.width-K:k.x}}else if(o==="height"){let F=s*_,K=Ot(F,B,$);M={...M,height:K,y:A?k.y+k.height-K:k.y}}xe(E,{crop:M,width:M.width/(k.naturalWidth/I),height:M.height/(k.naturalHeight/R)});return}let V=o==="width"?l:0,z=o==="height"?l:0,G=Ot(k.width+V,L,P),W=Ot(k.height+z,L,$);M={...k,x:S?k.x+k.width-G:k.x,y:A?k.y+k.height-W:k.y,width:G,height:W},xe(E,{crop:M,width:M.width/(k.naturalWidth/I),height:M.height/(k.naturalHeight/R)});return}if(s!==void 0){let E=Math.max(o==="width"?s:h?s*g:d.width,ua),k=Math.max(o==="height"?s:h?s/g:d.height,ua);Nb(E,k,u,d,c,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h});return}let y=o==="width"?e:0,U=o==="height"?e:0,x=Math.max(0,d.width+y);o==="width"&&(i?x=is(x,YV):x=Math.round(x));let v=Math.max(0,d.height+U);o==="height"&&(i?v=is(v,YV):v=Math.round(v)),h&&(o==="width"?v=Math.round(x/g*100)/100:x=Math.round(v*g*100)/100),v=Math.max(ua,v),x=Math.max(ua,x),Nb(x,v,u,d,c,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h})}},VKe=({property:e,element:t,scene:n,appState:r})=>{let i=Uc(e==="width"?t.width:t.height,2);if(r.croppingElementId&&r.croppingElementId===t.id&&ln(t)&&t.crop){let{width:s,height:o}=Gf(t);if(e==="width"){let a=s/t.crop.naturalWidth;i=Uc(t.crop.width*a,2)}if(e==="height"){let a=o/t.crop.naturalHeight;i=Uc(t.crop.height*a,2)}}return m.jsx(ad,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:HKe,value:i,editable:ed(t,e),scene:n,appState:r,property:e})},ZV=VKe,WKe=15,GKe=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=i.getNonDeletedElements(),a=t[0];if(a&&!Ge(a)){let l=s.get(a.id);if(!l)return;if(r!==void 0){let g=Bh(r);xe(l,{angle:g}),YM(l,s,o,i);let y=At(l,s);y&&!Rt(l)&&xe(y,{angle:g});return}let f=Math.round(vy(a.angle)*100)/100,c=Math.round(e),d=(f+c)%360;n&&(d=is(d,WKe)),d=d<0?d+360:d;let u=Bh(d);xe(l,{angle:u}),YM(l,s,o,i);let h=At(l,s);h&&!Rt(l)&&xe(h,{angle:u})}},XKe=({element:e,scene:t,appState:n,property:r})=>m.jsx(ad,{label:"A",icon:oee,value:Math.round(vy(e.angle)%360*100)/100,elements:[e],dragInputCallback:GKe,editable:ed(e,"angle"),scene:t,appState:n,property:r}),KKe=XKe,qV=4,YKe=4,ZKe=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=t[0];if(o){let a=s.get(o.id);if(!a||!Ve(a))return;let l;if(r!==void 0)l=Math.max(Math.round(r),qV);else if(o.type==="text"){let f=Math.round(o.fontSize),c=Math.round(e);l=Math.max(f+c,qV),n&&(l=is(l,YKe))}l&&(xe(a,{fontSize:l}),Rs(a,i.getContainerElement(a),i.getNonDeletedElementsMap()))}},qKe=({element:e,scene:t,appState:n,property:r})=>{let i=Ve(e)?e:Ta(e)?At(e,t.getNonDeletedElementsMap()):null;return i?m.jsx(ad,{label:"F",value:Math.round(i.fontSize*10)/10,elements:[i],dragInputCallback:ZKe,icon:Tw,appState:n,scene:t,property:r}):null},QKe=qKe,Sp=10,JKe=(e,t,n,r)=>{let i=r.x-e,s=r.y-t,o=r.width*n,a=r.height*n,l=e+i*n,f=t+s*n;return{width:o,height:a,x:l,y:f,...eR(r,o,a,!1),...Ve(r)?{fontSize:r.fontSize*n}:{}}},eYe=(e,t,n,r,i,s,o,a)=>{let l=JKe(e,t,r,s);xe(i,l,!1);let f=At(s,a);if(f){let c=f.fontSize*r;co(i,o,{newSize:{width:l.width,height:l.height}});let d=o.get(f.id);d&&Ve(d)&&(xe(d,{fontSize:c},!1),My(i,o,n==="width"?"e":"s",!0))}},QV=(e,t,n,r,i,s,o,a,l,f)=>{s==="width"?t=Math.round(e/r*100)/100:e=Math.round(t*r*100)/100;let c=t/n;for(let d=0;d<a.length;d++){let u=a[d],h=o[d];eYe(i[0],i[1],s,c,h,u,l,f)}},tYe=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:r,shouldChangeByStepSize:i,nextValue:s,scene:o,property:a})=>{let l=o.getNonDeletedElementsMap(),f=jR(t,r);if(s!==void 0){for(let u of f){let h=p9(u,l,n);if(h.length>1){let g=h.map(R=>R.latest),y=h.map(R=>R.original),[U,x,v,E]=pn(y),k=v-U,M=E-x,S=k/M,A=Math.max(ua,a==="width"?Math.max(0,s):k),I=Math.max(ua,a==="height"?Math.max(0,s):M);QV(A,I,M,S,O(U,x),a,g,y,l,n)}else{let[g]=h,y=g==null?void 0:g.latest,U=g==null?void 0:g.original;if(y&&U&&ed(y,a)){let x=a==="width"?Math.max(0,s):y.width;a==="width"&&(i?x=is(x,Sp):x=Math.round(x));let v=a==="height"?Math.max(0,s):y.height;a==="height"&&(i?v=is(v,Sp):v=Math.round(v)),x=Math.max(ua,x),v=Math.max(ua,v),Nb(x,v,y,U,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate();return}let c=a==="width"?e:0,d=a==="height"?e:0;for(let u of f){let h=p9(u,l,n);if(h.length>1){let g=h.map(R=>R.latest),y=h.map(R=>R.original),[U,x,v,E]=pn(y),k=v-U,M=E-x,S=k/M,A=Math.max(0,k+c);a==="width"&&(i?A=is(A,Sp):A=Math.round(A));let I=Math.max(0,M+d);a==="height"&&(i?I=is(I,Sp):I=Math.round(I)),A=Math.max(ua,A),I=Math.max(ua,I),QV(A,I,M,S,O(U,x),a,g,y,l,n)}else{let[g]=h,y=g==null?void 0:g.latest,U=g==null?void 0:g.original;if(y&&U&&ed(y,a)){let x=Math.max(0,U.width+c);a==="width"&&(i?x=is(x,Sp):x=Math.round(x));let v=Math.max(0,U.height+d);a==="height"&&(i?v=is(v,Sp):v=Math.round(v)),x=Math.max(ua,x),v=Math.max(ua,v),Nb(x,v,y,U,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate()},nYe=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:s})=>{let o=T.useMemo(()=>r.map(f=>{let c=p9(f,n);if(c.length>1){let[u,h,g,y]=pn(c.map(U=>U.latest));return Math.round((e==="width"?g-u:y-h)*100)/100}let[d]=c;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,r,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return m.jsx(ad,{label:e==="width"?"W":"H",elements:t,dragInputCallback:tYe,value:a,editable:l,appState:s,property:e,scene:i})},JV=nYe,rYe=15,iYe=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,property:i,scene:s})=>{let o=s.getNonDeletedElementsMap(),a=t.map(f=>o.get(f.id)).filter(f=>f&&!Og(f)&&ed(f,i)),l=t.filter(f=>!Og(f)&&ed(f,i));if(r!==void 0){let f=Bh(r);for(let c of a){if(!c)continue;xe(c,{angle:f},!1);let d=At(c,o);d&&!Rt(c)&&xe(d,{angle:f},!1)}s.triggerUpdate();return}for(let f=0;f<a.length;f++){let c=a[f];if(!c)continue;let d=l[f],u=Math.round(vy(d.angle)*100)/100,h=Math.round(e),g=(u+h)%360;n&&(g=is(g,rYe)),g=g<0?g+360:g;let y=Bh(g);xe(c,{angle:y},!1);let U=At(c,o);U&&!Rt(c)&&xe(U,{angle:y},!1)}s.triggerUpdate()},sYe=({elements:e,scene:t,appState:n,property:r})=>{let i=e.filter(l=>!Og(l)&&ed(l,"angle")),s=i.map(l=>Math.round(vy(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=i.some(l=>ed(l,"angle"));return m.jsx(ad,{label:"A",icon:oee,value:o,elements:e,dragInputCallback:iYe,editable:a,appState:n,scene:t,property:r})},oYe=sYe,eW=4,aYe=4,lYe=(e,t)=>e.reduce((n,r)=>{if(!r||Og(r))return n;if(Ve(r))return n.push(r),n;if(Ta(r)){let i=At(r,t);if(i)return n.push(i),n}return n},[]),cYe=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id)),a;if(r){a=Math.max(Math.round(r),eW);for(let l of o)xe(l,{fontSize:a},!1),Rs(l,i.getContainerElement(l),s,!1);i.triggerUpdate()}else{let l=t;for(let f=0;f<o.length;f++){let c=o[f],d=l[f],u=Math.round(d.fontSize),h=Math.round(e),g=Math.max(u+h,eW);n&&(g=is(g,aYe)),xe(c,{fontSize:g},!1),Rs(c,i.getContainerElement(c),s,!1)}i.triggerUpdate()}},fYe=({elements:e,scene:t,appState:n,property:r,elementsMap:i})=>{let s=lYe(e,i);if(!s.length)return null;let o=s.map(f=>Math.round(f.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return m.jsx(ad,{label:"F",icon:Tw,elements:s,dragInputCallback:cYe,value:a,editable:l,scene:t,property:r,appState:n})},dYe=fYe,tW=10,uYe=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:r,shouldChangeByStepSize:i,nextValue:s,property:o,scene:a,originalAppState:l})=>{let f=a.getNonDeletedElementsMap(),c=a.getNonDeletedElements(),d=n[0],[u,h]=[d.x+d.width/2,d.y+d.height/2],[g,y]=ue(O(d.x,d.y),O(u,h),d.angle);if(l.croppingElementId===d.id){let k=f.get(d.id);if(!k||!ln(k)||!k.crop)return;let M=k.crop,S=M,A=k.scale[0]===-1,I=k.scale[1]===-1,{width:R,height:D}=Gf(k);if(s!==void 0){if(o==="x"){let $=s*(M.naturalWidth/R);A?S={...M,x:Ot(M.naturalWidth-$-M.width,0,M.naturalWidth-M.width)}:S={...M,x:Ot(s*(M.naturalWidth/R),0,M.naturalWidth-M.width)}}o==="y"&&(S={...M,y:Ot(s*(M.naturalHeight/D),0,M.naturalHeight-M.height)}),xe(k,{crop:S});return}let _=(o==="x"?t:0)*(A?-1:1),P=(o==="y"?t:0)*(I?-1:1);S={...M,x:Ot(M.x+_,0,M.naturalWidth-M.width),y:Ot(M.y+P,0,M.naturalHeight-M.height)},xe(k,{crop:S});return}if(s!==void 0){Ob(o==="x"?s:g,o==="y"?s:y,d,f,c,a,r);return}let U=o==="x"?e:0,x=o==="y"?e:0,v=o==="x"?Math.round(i?is(d.x+U,tW):g+U):g,E=o==="y"?Math.round(i?is(d.y+x,tW):y+x):y;Ob(v,E,d,f,c,a,r)},hYe=({property:e,element:t,elementsMap:n,scene:r,appState:i})=>{let[s,o]=ue(O(t.x,t.y),O(t.x+t.width/2,t.y+t.height/2),t.angle),a=Uc(e==="x"?s:o,2);if(i.croppingElementId===t.id&&ln(t)&&t.crop){let l=cLe(t);l&&(a=Uc(e==="x"?l.x:l.y,2))}return m.jsx(ad,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:uYe,scene:r,value:a,property:e,appState:i})},nW=hYe,pYe=10,mYe=(e,t,n,r,i,s,o,a)=>{for(let l=0;l<r.length;l++){let f=i[l],[c,d]=[f.x+f.width/2,f.y+f.height/2],[u,h]=ue(O(f.x,f.y),O(c,d),f.angle),g=e==="x"?Math.round(u+t):u,y=e==="y"?Math.round(h+n):h;Ob(g,y,f,s,r,a,o,!1)}},gYe=(e,t,n,r,i,s,o)=>{let[a,l,,]=pn(n),f=e-a,c=t-l;for(let d=0;d<n.length;d++){let u=n[d],h=r.get(u.id);if(h&&(!Ve(h)||!h.containerId)){let[g,y]=[h.x+h.width/2,h.y+h.height/2],[U,x]=ue(O(h.x,h.y),O(g,y),h.angle);Ob(U+f,x+c,u,r,i,o,s,!1)}}},bYe=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:r,nextValue:i,property:s,scene:o,originalAppState:a})=>{var d,u;let l=o.getNonDeletedElementsMap(),f=o.getNonDeletedElements();if(i!==void 0){for(let h of jR(t,a)){let g=p9(h,l,n);if(g.length>1){let[y,U,,]=pn(g.map(x=>x.latest));gYe(s==="x"?i:y,s==="y"?i:U,g.map(x=>x.original),l,f,n,o)}else{let y=(d=g[0])==null?void 0:d.original,U=(u=g[0])==null?void 0:u.latest;if(y&&U&&ed(U,s)){let[x,v]=[y.x+y.width/2,y.y+y.height/2],[E,k]=ue(O(y.x,y.y),O(x,v),y.angle);Ob(s==="x"?i:E,s==="y"?i:k,y,l,f,o,n,!1)}}}o.triggerUpdate();return}let c=r?is(e,pYe):e;mYe(s,s==="x"?c:0,s==="y"?c:0,t,t,l,n,o),o.triggerUpdate()},yYe=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:s})=>{let o=T.useMemo(()=>r.map(l=>{let f=Object.keys(l).map(y=>n.get(y)).filter(y=>y!==void 0);if(f.length>1){let[y,U]=pn(f);return Math.round((e==="x"?y:U)*100)/100}let[c]=f,[d,u]=[c.x+c.width/2,c.y+c.height/2],[h,g]=ue(O(c.x,c.y),O(d,u),c.angle);return Math.round((e==="x"?h:g)*100)/100}),[r,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return m.jsx(ad,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:bYe,value:a,property:e,scene:i,appState:s})},rW=yYe,iW=5,UYe=({property:e,scene:t,appState:n,setAppState:r})=>m.jsx(ad,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:i,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{r(l=>{let f;return i?f=i:s&&(f=o?is(l.gridStep+iW*Math.sign(s),iW):l.gridStep+s),f?(f=tte(f),a(f),{gridStep:f}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),xYe=UYe,wYe=50,BR=e=>{let t=Ly(),n=e.app.scene.getSceneNonce()||1,r=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),i=Mb(e.app);return m.jsx(vYe,{...e,appState:t,sceneNonce:n,selectedElements:r,gridModeEnabled:i})},jn=({children:e,columns:t=1,heading:n,style:r,...i})=>m.jsx("div",{className:Ye("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...r},...i,children:e});jn.displayName="StatsRow";var m9=({children:e,order:t,style:n,...r})=>m.jsx("div",{className:"exc-stats__rows",style:{order:t,...n},...r,children:e});m9.displayName="StatsRows";BR.StatsRow=jn;BR.StatsRows=m9;var vYe=T.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:r,appState:i,sceneNonce:s,gridModeEnabled:o})=>{let a=e.scene,l=a.getNonDeletedElements(),f=a.getNonDeletedElementsMap(),c=ui(),d=r.length===1?r[0]:null,u=r.length>1?r:null,h=i.croppingElementId&&ln(d),g=h?Gf(d):null,[y,U]=T.useState({width:0,height:0}),x=T.useMemo(()=>Uy(k=>{let M=pn(k);U({width:Math.round(M[2])-Math.round(M[0]),height:Math.round(M[3])-Math.round(M[1])})},wYe),[]);T.useEffect(()=>{x(l)},[s,l,x]),T.useEffect(()=>()=>x.cancel(),[x]);let v=T.useMemo(()=>jR(r,i),[r,i]),E=T.useMemo(()=>ene(r),[r]);return m.jsx("div",{className:"exc-stats",children:m.jsxs(xl,{padding:3,children:[m.jsxs("div",{className:"title",children:[m.jsx("h2",{children:H("stats.title")}),m.jsx("div",{className:"close",onClick:t,children:r6})]}),m.jsxs(OM,{label:m.jsx("h3",{children:H("stats.generalStats")}),open:!!(i.stats.panels&Wp.generalStats),openTrigger:()=>c(k=>({stats:{open:!0,panels:k.stats.panels^Wp.generalStats}})),children:[m.jsxs(m9,{children:[m.jsx(jn,{heading:!0,children:H("stats.scene")}),m.jsxs(jn,{columns:2,children:[m.jsx("div",{children:H("stats.shapes")}),m.jsx("div",{children:l.length})]}),m.jsxs(jn,{columns:2,children:[m.jsx("div",{children:H("stats.width")}),m.jsx("div",{children:y.width})]}),m.jsxs(jn,{columns:2,children:[m.jsx("div",{children:H("stats.height")}),m.jsx("div",{children:y.height})]}),o&&m.jsxs(m.Fragment,{children:[m.jsx(jn,{heading:!0,children:"Canvas"}),m.jsx(jn,{children:m.jsx(xYe,{property:"gridStep",scene:a,appState:i,setAppState:c})})]})]}),n==null?void 0:n(l,i)]}),!E&&r.length>0&&m.jsx("div",{id:"elementStats",style:{marginTop:12},children:m.jsx(OM,{label:m.jsx("h3",{children:H("stats.elementProperties")}),open:!!(i.stats.panels&Wp.elementProperties),openTrigger:()=>c(k=>({stats:{open:!0,panels:k.stats.panels^Wp.elementProperties}})),children:m.jsxs(m9,{children:[d&&m.jsxs(m.Fragment,{children:[h&&m.jsx(jn,{heading:!0,children:H("labels.unCroppedDimension")}),i.croppingElementId&&ln(d)&&g&&m.jsxs(jn,{columns:2,children:[m.jsx("div",{children:H("stats.width")}),m.jsx("div",{children:Uc(g.width,2)})]}),i.croppingElementId&&ln(d)&&g&&m.jsxs(jn,{columns:2,children:[m.jsx("div",{children:H("stats.height")}),m.jsx("div",{children:Uc(g.height,2)})]}),m.jsx(jn,{heading:!0,"data-testid":"stats-element-type",children:i.croppingElementId?H("labels.imageCropping"):H(`element.${d.type}`)}),m.jsx(jn,{children:m.jsx(nW,{element:d,property:"x",elementsMap:f,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(nW,{element:d,property:"y",elementsMap:f,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(ZV,{property:"width",element:d,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(ZV,{property:"height",element:d,scene:a,appState:i})}),!Ge(d)&&m.jsx(jn,{children:m.jsx(KKe,{property:"angle",element:d,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(QKe,{property:"fontSize",element:d,scene:a,appState:i})})]}),u&&m.jsxs(m.Fragment,{children:[ote(u)&&m.jsx(jn,{heading:!0,children:H("element.group")}),m.jsxs(jn,{columns:2,style:{margin:"0.3125rem 0"},children:[m.jsx("div",{children:H("stats.shapes")}),m.jsx("div",{children:r.length})]}),m.jsx(jn,{children:m.jsx(rW,{property:"x",elements:u,elementsMap:f,atomicUnits:v,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(rW,{property:"y",elements:u,elementsMap:f,atomicUnits:v,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(JV,{property:"width",elements:u,elementsMap:f,atomicUnits:v,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(JV,{property:"height",elements:u,elementsMap:f,atomicUnits:v,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(oYe,{property:"angle",elements:u,scene:a,appState:i})}),m.jsx(jn,{children:m.jsx(dYe,{property:"fontSize",elements:u,scene:a,appState:i,elementsMap:f})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),EYe=({sourceElementId:e,onClose:t,elementsMap:n,appState:r,generateLinkForSelection:i=_te})=>{var d;let s=((d=n.get(e))==null?void 0:d.link)??null,[o,a]=T.useState(s),[l,f]=T.useState(!1);T.useEffect(()=>{let u=Nt(n,r),h=s;if(u.length>0&&i){let g=Pte(u,r);g&&(h=Do(i(g.id,g.type)))}a(h)},[n,r,r.selectedElementIds,s,i]);let c=T.useCallback(()=>{var u;if(o&&o!==((u=n.get(e))==null?void 0:u.link)){let h=n.get(e);h&&xe(h,{link:o})}if(!o&&l&&e){let h=n.get(e);h&&xe(h,{link:null})}t==null||t()},[e,o,n,l,t]);return T.useEffect(()=>{let u=h=>{var g,y;((g=r.openDialog)==null?void 0:g.name)==="elementLinkSelector"&&h.key===J.ENTER&&c(),((y=r.openDialog)==null?void 0:y.name)==="elementLinkSelector"&&h.key===J.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[r,t,c]),m.jsxs("div",{className:"ElementLinkDialog",children:[m.jsxs("div",{className:"ElementLinkDialog__header",children:[m.jsx("h2",{children:H("elementLink.title")}),m.jsx("p",{children:H("elementLink.desc")})]}),m.jsxs("div",{className:"ElementLinkDialog__input",children:[m.jsx(PR,{value:o??"",onChange:u=>{l||f(!0),a(u)},onKeyDown:u=>{u.key===J.ENTER&&c()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),s&&o&&m.jsx(Xt,{type:"button",title:H("buttons.remove"),"aria-label":H("buttons.remove"),label:H("buttons.remove"),onClick:()=>{a(null),f(!0)},className:"ElementLinkDialog__remove",icon:p1})]}),m.jsxs("div",{className:"ElementLinkDialog__actions",children:[m.jsx(Wg,{label:H("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),m.jsx(Wg,{label:H("buttons.confirm"),onClick:c,actionType:"primary"})]})]})},kYe=EYe,SYe=({UIOptions:e})=>m.jsxs(Gs,{__fallback:!0,children:[m.jsx(Gs.DefaultItems.LoadScene,{}),m.jsx(Gs.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&m.jsx(Gs.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&m.jsx(Gs.DefaultItems.SaveAsImage,{}),m.jsx(Gs.DefaultItems.SearchMenu,{}),m.jsx(Gs.DefaultItems.Help,{}),m.jsx(Gs.DefaultItems.ClearCanvas,{}),m.jsx(Gs.Separator,{}),m.jsx(Gs.Group,{title:"Excalidraw links",children:m.jsx(Gs.DefaultItems.Socials,{})}),m.jsx(Gs.Separator,{}),m.jsx(Gs.DefaultItems.ToggleTheme,{}),m.jsx(Gs.DefaultItems.ChangeCanvasBackground,{})]}),CYe=()=>m.jsxs(PS,{__fallback:!0,children:[m.jsx(PS.Actions.SaveToDisk,{}),m.jsx(PS.Actions.ExportToImage,{})]}),AYe=({actionManager:e,appState:t,files:n,setAppState:r,elements:i,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:f,renderTopRightUI:c,renderCustomStats:d,UIOptions:u,onExportImage:h,renderWelcomeScreen:g,children:y,app:U,isCollaborating:x,generateLinkForSelection:v})=>{var V,z,G;let E=di(),k=hXe(),M=k.tunnelsJotai.Provider,[S,A]=Ur(s7),I=()=>u.canvasActions.export?m.jsx(cKe,{elements:i,appState:t,files:n,actionManager:e,exportOpts:u.canvasActions.export,canvas:s,setAppState:r}):null,R=()=>{var W;return!u.canvasActions.saveAsImage||((W=t.openDialog)==null?void 0:W.name)!=="imageExport"?null:m.jsx(jXe,{elements:i,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>r({openDialog:null}),name:U.getName()})},D=()=>m.jsxs("div",{style:{position:"relative"},children:[m.jsx(k.MainMenuTunnel.Out,{}),g&&m.jsx(k.WelcomeScreenMenuHintTunnel.Out,{})]}),_=()=>m.jsx(Lb,{heading:"selectedShapeActions",className:Ye("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:m.jsx(xl,{className:Ag.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:m.jsx(Cse,{appState:t,elementsMap:U.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:U})})}),P=()=>{var K,q,Y,ae,ge;let W=nR(t,i),F=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((K=t.openDialog)==null?void 0:K.name)!=="elementLinkSelector";return m.jsx(Dse,{side:"top",children:m.jsxs("div",{className:"App-menu App-menu_top",children:[m.jsxs(Ua.Col,{gap:6,className:Ye("App-menu_top__left"),children:[D(),W&&_()]}),!t.viewModeEnabled&&((q=t.openDialog)==null?void 0:q.name)!=="elementLinkSelector"&&m.jsx(Lb,{heading:"shapes",className:"shapes-section",children:he=>m.jsxs("div",{style:{position:"relative"},children:[g&&m.jsx(k.WelcomeScreenToolbarHintTunnel.Out,{}),m.jsx(Ua.Col,{gap:4,align:"start",children:m.jsxs(Ua.Row,{gap:1,className:Ye("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[m.jsxs(xl,{padding:1,className:Ye("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[m.jsx(jse,{appState:t,isMobile:E.editor.isMobile,device:E,app:U}),he,m.jsxs(Ua.Row,{gap:1,children:[m.jsx(Fse,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:H("toolBar.penMode"),penDetected:t.penDetected}),m.jsx(Bse,{checked:t.activeTool.locked,onChange:o,title:H("toolBar.lock")}),m.jsx("div",{className:"App-toolbar__divider"}),m.jsx(zse,{checked:Tg(t),onChange:()=>a(),title:H("toolBar.hand"),isMobile:!0}),m.jsx(Ase,{appState:t,activeTool:t.activeTool,UIOptions:u,app:U})]})]}),x&&m.jsx(xl,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:m.jsx(TKe,{title:H("toolBar.laser"),checked:t.activeTool.type===oi.laser,onChange:()=>U.setActiveTool({type:oi.laser}),isMobile:!0})})]})})]})}),m.jsxs("div",{className:Ye("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&m.jsx($se,{collaborators:t.collaborators,userToFollow:((Y=t.userToFollow)==null?void 0:Y.socketId)||null}),c==null?void 0:c(E.editor.isMobile,t),!t.viewModeEnabled&&((ae=t.openDialog)==null?void 0:ae.name)!=="elementLinkSelector"&&(!L||((ge=t.openSidebar)==null?void 0:ge.name)!==bl.name)&&m.jsx(k.DefaultSidebarTriggerTunnel.Out,{}),F&&m.jsx(BR,{app:U,onClose:()=>{e.executeAction(zM)},renderCustomStats:d})]})]})})},$=()=>m.jsx(XV,{__fallback:!0,onDock:W=>{Pn("sidebar",`toggleDock (${W?"dock":"undock"})`,`(${E.editor.isMobile?"mobile":"desktop"})`)}}),L=Rie(DR),B=m.jsxs(m.Fragment,{children:[y,m.jsx(SYe,{UIOptions:u}),m.jsx(XV.Trigger,{__fallback:!0,icon:aN,title:U2(H("toolBar.library")),onToggle:W=>{W&&Pn("sidebar",`${bl.name} (open)`,`button (${E.editor.isMobile?"mobile":"desktop"})`)},tab:bl.defaultTab,children:H("toolBar.library")}),m.jsx(CYe,{}),((V=t.openDialog)==null?void 0:V.name)==="ttd"&&m.jsx(jKe,{__fallback:!0}),t.isLoading&&m.jsx(Die,{delay:250}),t.errorMessage&&m.jsx(RXe,{onClose:()=>r({errorMessage:null}),children:t.errorMessage}),S&&!E.editor.isMobile&&m.jsx(oWe,{colorPickerType:S.colorPickerType,onCancel:()=>{A(null)},onChange:(W,F,K,{altKey:q})=>{var Y;if(!(W!=="elementBackground"&&W!=="elementStroke"))if(K.length){for(let ae of K)xe(ae,{[q&&S.swapPreviewOnAlt?W==="elementBackground"?"strokeColor":"backgroundColor":W==="elementBackground"?"backgroundColor":"strokeColor"]:F},!1),or.delete(ae);(Y=Zf.getScene(K[0]))==null||Y.triggerUpdate()}else r(W==="elementBackground"?{currentItemBackgroundColor:F}:{currentItemStrokeColor:F})},onSelect:(W,F)=>{var K;A(q=>q!=null&&q.keepOpenOnAlt&&F.altKey?q:null),(K=S==null?void 0:S.onSelect)==null||K.call(S,W,F)}}),((z=t.openDialog)==null?void 0:z.name)==="help"&&m.jsx(rKe,{onClose:()=>{r({openDialog:null})}}),m.jsx(yXe,{}),((G=t.openDialog)==null?void 0:G.name)==="elementLinkSelector"&&m.jsx(kYe,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{r({openDialog:null})},elementsMap:U.scene.getNonDeletedElementsMap(),appState:t,generateLinkForSelection:v}),m.jsx(k.OverwriteConfirmDialogTunnel.Out,{}),R(),I(),t.pasteDialog.shown&&m.jsx(qXe,{setAppState:r,appState:t,onClose:()=>r({pasteDialog:{shown:!1,data:null}})}),E.editor.isMobile&&m.jsx(ZXe,{app:U,appState:t,elements:i,actionManager:e,renderJSONExportDialog:I,renderImageExportDialog:R,setAppState:r,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:c,renderCustomStats:d,renderSidebars:$,device:E,renderWelcomeScreen:g,UIOptions:u}),!E.editor.isMobile&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"layer-ui__wrapper",style:t.openSidebar&&L&&E.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[g&&m.jsx(k.WelcomeScreenCenterTunnel.Out,{}),P(),m.jsx(dKe,{appState:t,actionManager:e,showExitZenModeBtn:f,renderWelcomeScreen:g}),t.scrolledOutside&&m.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(W=>({...Cb(i,W)}))},children:H("buttons.scrollBackToContent")})]}),$()]})]});return m.jsx(Wie.Provider,{value:t,children:m.jsx(M,{children:m.jsx(Ese.Provider,{value:k,children:B})})})},sW=e=>{let{suggestedBindings:t,startBoundElement:n,cursorButton:r,scrollX:i,scrollY:s,...o}=e;return o},MYe=(e,t)=>{if(e.children!==t.children)return!1;let{canvas:n,appState:r,...i}=e,{canvas:s,appState:o,...a}=t;return $i(sW(r),sW(o),{selectedElementIds:$i,selectedGroupIds:$i})&&$i(i,a)},TYe=Ne.memo(AYe,MYe),IYe=5e3,NYe=({message:e,onClose:t,closable:n=!1,duration:r=IYe,style:i})=>{let s=T.useRef(0),o=r!==1/0,a=T.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),r))},[t,r,o]);return T.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,r,o]),m.jsxs("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:i,children:[m.jsx("p",{className:"Toast__message",children:e}),n&&m.jsx(Xt,{icon:r6,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},oW=je({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:uN,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:pe.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[J.CTRL_OR_CMD]&&e.altKey&&e.code===Jt.R}),koe=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length===1&&ht(n[0])},RYe=je({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;if(ht(i)){let s=Rc(Nn(e),i.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:pe.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:pe.EVENTUALLY}},predicate:(e,t,n,r)=>koe(t,r)}),_Ye=je({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;return ht(i)?{elements:qte(e,i),appState:{...t,selectedElementIds:{[i.id]:!0}},captureUpdate:pe.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:pe.EVENTUALLY}},predicate:(e,t,n,r)=>koe(t,r)});je({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:pe.EVENTUALLY}),checked:e=>e.frameRendering.enabled});je({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:lee,viewMode:!1,perform:(e,t,n,r)=>{let i=Dr(t,{type:"frame"});return Xl(r.interactiveCanvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:Dr(t,{type:"frame"})},captureUpdate:pe.EVENTUALLY}},keyTest:e=>!e[J.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===J.F});var PYe=je({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=Nt(e,t);return i.length>0&&!i.some(s=>ht(s))},perform:(e,t,n,r)=>{let i=Nt(e,t),[s,o,a,l]=pn(i,r.scene.getNonDeletedElementsMap()),f=16,c=EN({x:s-f,y:o-f,width:a-s+f*2,height:l-o+f*2});if(t.editingGroupId){let d=Fn(i,t.editingGroupId);for(let u of d){let h=u.groupIds.indexOf(t.editingGroupId);xe(u,{groupIds:u.groupIds.slice(0,h)},!1)}}return{elements:E2([...r.scene.getElementsIncludingDeleted(),c],i,c,t),appState:{selectedElementIds:{[c.id]:!0}},captureUpdate:pe.IMMEDIATELY}}}),DYe=()=>m.jsxs("div",{"data-testid":"brave-measure-text-error",children:[m.jsx("p",{children:m.jsx(bc,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>m.jsx("span",{style:{fontWeight:600},children:e})})}),m.jsx("p",{children:m.jsx(bc,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>m.jsx("span",{style:{fontWeight:600},children:e})})}),m.jsx("p",{children:m.jsx(bc,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>m.jsx("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),m.jsx("p",{children:m.jsx(bc,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>m.jsxs("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),LYe=DYe,r3={width:100,height:0},Tu=100,OYe=(e,t,n)=>{let r=jo({x:0,y:0,textAlign:Ub.CENTER,verticalAlign:Po.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:r.id})}),Rs(r,e,n),[e,r]},aW=(e,t,n,r,i)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){let c=(t==null?void 0:t.width)??Tu,d=(t==null?void 0:t.height)??Tu,u;t.id&&(u=r.getElement(t.id),u||console.error(`No element for start binding with id ${t.id} found`));let h=t.x||e.x-c,g=t.y||e.y-d/2,y=u?u.type:t.type;if(y){if(y==="text"){let U="";u&&u.type==="text"?U=u.text:t.type==="text"&&(U=t.text),U||console.error(`No text found for start binding text element for ${e.id}`),s=jo({x:h,y:g,type:"text",...u,...t,text:U}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(y){case"rectangle":case"ellipse":case"diamond":{s=Ic({x:h,y:g,width:c,height:d,...u,...t,type:y});break}default:u1(e,`Unhandled element start type "${t.type}"`,!0)}Mc(e,s,"start",i)}}if(n){let c=(n==null?void 0:n.height)??Tu,d=(n==null?void 0:n.width)??Tu,u;n.id&&(u=r.getElement(n.id),u||console.error(`No element for end binding with id ${n.id} found`));let h=n.x||e.x+e.width,g=n.y||e.y-c/2,y=u?u.type:n.type;if(y){if(y==="text"){let U="";u&&u.type==="text"?U=u.text:n.type==="text"&&(U=n.text),U||console.error(`No text found for end binding text element for ${e.id}`),o=jo({x:h,y:g,type:"text",...u,...n,text:U}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(y){case"rectangle":case"ellipse":case"diamond":{o=Ic({x:h,y:g,width:d,height:c,...u,...n,type:y});break}default:u1(e,`Unhandled element end type "${y}"`,!0)}Mc(e,o,"end",i)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};let a=e.points.length-1,l=.5,f=jf(e.points);return e.points[a][0]>e.points[a-1][0]&&(f[0][0]=l,f[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(f[0][0]=-l,f[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(f[0][1]=l,f[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(f[0][1]=-l,f[a][1]+=l),Object.assign(e,{points:f}),{linearElement:e,startBoundElement:s,endBoundElement:o}},jYe=class{constructor(){Q(this,"excalidrawElements",new Map),Q(this,"add",e=>{e&&this.excalidrawElements.set(e.id,e)}),Q(this,"getElements",()=>Yf(Array.from(this.excalidrawElements.values()))),Q(this,"getElementsMap",()=>Aa(mt(this.getElements()))),Q(this,"getElement",e=>this.excalidrawElements.get(e))}},ZM=(e,t)=>{var a,l,f;if(!e)return[];let n=jf(e),r=new jYe,i=new Map,s=new Map;for(let c of n){let d,u=c.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(c,{id:Ia()}),c.type){case"rectangle":case"ellipse":case"diamond":{let h=(a=c==null?void 0:c.label)!=null&&a.text&&c.width===void 0?0:(c==null?void 0:c.width)||Tu,g=(l=c==null?void 0:c.label)!=null&&l.text&&c.height===void 0?0:(c==null?void 0:c.height)||Tu;d=Ic({...c,width:h,height:g});break}case"line":{let h=c.width||r3.width,g=c.height||r3.height;d=Hh({width:h,height:g,points:[O(0,0),O(h,g)],...c});break}case"arrow":{let h=c.width||r3.width,g=c.height||r3.height;d=kN({width:h,height:g,endArrowhead:"arrow",points:[O(0,0),O(h,g)],...c,type:"arrow"}),Object.assign(d,Lg(d.points));break}case"text":{let h=(c==null?void 0:c.fontFamily)||s0,g=(c==null?void 0:c.fontSize)||id,y=(c==null?void 0:c.lineHeight)||g1(h),U=c.text??"",x=_g(U),v=ds(x,wn({fontFamily:h,fontSize:g}),y);d=jo({width:v.width,height:v.height,fontFamily:h,fontSize:g,...c});break}case"image":{d=bte({width:(c==null?void 0:c.width)||Tu,height:(c==null?void 0:c.height)||Tu,...c});break}case"frame":{d=EN({x:0,y:0,...c});break}case"magicframe":{d=cM({x:0,y:0,...c});break}case"freedraw":case"iframe":case"embeddable":{d=c;break}default:d=c,u1(c,`Unhandled element type "${c.type}"`,!0)}r.getElement(d.id)?console.error(`Duplicate id found for ${d.id}`):(r.add(d),i.set(d.id,c),u&&s.set(u,d.id))}let o=r.getElementsMap();for(let[c,d]of i){let u=r.getElement(c);switch(d.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((f=d.label)!=null&&f.text){let[h,g]=OYe(u,d==null?void 0:d.label,o);if(r.add(h),r.add(g),Rt(h)){let y=d.type==="arrow"?d==null?void 0:d.start:void 0,U=d.type==="arrow"?d==null?void 0:d.end:void 0;if(y&&y.id){let k=s.get(y.id);k&&Object.assign(y,{id:k})}if(U&&U.id){let k=s.get(U.id);k&&Object.assign(U,{id:k})}let{linearElement:x,startBoundElement:v,endBoundElement:E}=aW(h,y,U,r,o);h=x,r.add(x),r.add(v),r.add(E)}}else switch(d.type){case"arrow":{let{start:h,end:g}=d;if(h&&h.id){let v=s.get(h.id);Object.assign(h,{id:v})}if(g&&g.id){let v=s.get(g.id);Object.assign(g,{id:v})}let{linearElement:y,startBoundElement:U,endBoundElement:x}=aW(u,h,g,r,o);r.add(y),r.add(U),r.add(x);break}}break}}}for(let[c,d]of i){if(d.type!=="frame"&&d.type!=="magicframe")continue;let u=r.getElement(c);if(!u)throw new Error(`Excalidraw element with id ${c} doesn't exist`);let h=[];d.children.forEach(A=>{var D;let I=s.get(A);if(!I)throw new Error(`Element with ${A} wasn't mapped correctly`);let R=r.getElement(I);if(!R)throw new Error(`Frame element with id ${I} doesn't exist`);Object.assign(R,{frameId:u.id}),(D=R==null?void 0:R.boundElements)==null||D.forEach(_=>{let P=r.getElement(_.id);if(!P)throw new Error(`Bound element with id ${_.id} doesn't exist`);Object.assign(P,{frameId:u.id}),h.push(P)}),h.push(R)});let[g,y,U,x]=pn(h),v=10;g=g-v,y=y-v,U=U+v,x=x+v;let E=(u==null?void 0:u.x)||g,k=(u==null?void 0:u.y)||y,M=(u==null?void 0:u.width)||U-g,S=(u==null?void 0:u.height)||x-y;Object.assign(u,{x:E,y:k,width:M,height:S}),FJ()&&d.children.length&&(u!=null&&u.x||u!=null&&u.y||u!=null&&u.width||u!=null&&u.height)&&console.info("User provided frame attributes are being considered, if you find this inaccurate, please remove any of the attributes - x, y, width and height so frame coordinates and dimensions are calculated automatically")}return r.getElements()},ur=e=>t=>{ai.unstable_batchedUpdates(e,t)},LS=e=>kw(t=>{ai.unstable_batchedUpdates(e,t)}),FR=(()=>{let e;try{let n=T.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),BYe="#ff6b6b",FYe="#ff0000",lW=1,cW=2,zYe=(e,t)=>{if(!t.snapLines.length)return;let n=t.theme===Ft.LIGHT||t.zenModeEnabled?BYe:FYe,r=(t.zenModeEnabled?lW*1.5:lW)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(let i of t.snapLines)i.type==="pointer"?(e.lineWidth=r,e.strokeStyle=n,HYe(i,e,t)):i.type==="gap"?(e.lineWidth=r,e.strokeStyle=n,VYe(i.points[0],i.points[1],i.direction,t,e)):i.type==="points"&&(e.lineWidth=r,e.strokeStyle=n,$Ye(i,e,t));e.restore()},$Ye=(e,t,n)=>{if(!n.zenModeEnabled){let r=e.points[0],i=e.points[e.points.length-1];na(r,i,t)}for(let r of e.points)Soe(r,n,t)},HYe=(e,t,n)=>{Soe(e.points[0],n,t),n.zenModeEnabled||na(e.points[0],e.points[1],t)},Soe=([e,t],n,r)=>{r.save();let i=(n.zenModeEnabled?cW*1.5:cW)/n.zoom.value;r.beginPath(),r.moveTo(e-i,t-i),r.lineTo(e+i,t+i),r.moveTo(e+i,t-i),r.lineTo(e-i,t+i),r.stroke(),r.restore()},na=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},VYe=(e,t,n,r,i)=>{let s=8/r.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){let l=[(e[0]+t[0])/2,e[1]];r.zenModeEnabled||na(O(e[0],e[1]-s),O(e[0],e[1]+s),i),na(O(l[0]-a,l[1]-o),O(l[0]-a,l[1]+o),i),na(O(l[0]+a,l[1]-o),O(l[0]+a,l[1]+o),i),r.zenModeEnabled||(na(O(t[0],t[1]-s),O(t[0],t[1]+s),i),na(e,t,i))}else{let l=[e[0],(e[1]+t[1])/2];r.zenModeEnabled||na(O(e[0]-s,e[1]),O(e[0]+s,e[1]),i),na(O(l[0]-o,l[1]-a),O(l[0]+o,l[1]-a),i),na(O(l[0]-o,l[1]+a),O(l[0]+o,l[1]+a),i),r.zenModeEnabled||(na(O(t[0]-s,t[1]),O(t[0]+s,t[1]),i),na(e,t,i))}},WYe=(e,t)=>{fs(t.selectedLinearElement,"selectedLinearElement is null");let{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;fs(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),Coe(n,e,t),e.restore()},GYe=(e,t,n)=>{var a,l;let{elementId:r,hoverPointIndex:i}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(i))return;let s=We.getElement(r,n);if(!s)return;let o=We.getPointAtIndexGlobalCoordinates(s,i,n);e.save(),e.translate(t.scrollX,t.scrollY),Coe(o,e,t),e.restore()},Coe=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",$w(t,e[0],e[1],We.POINT_HANDLE_SIZE/n.zoom.value,!1)},Py=(e,t,n,r,i,s,o,a,l=!1,f=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,r,i),f&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,r,i,f),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,r,i),e.restore()},XYe=(e,t,n,r,i,s)=>{e.save(),e.translate(r,i),e.rotate(s),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()},OS=(e,t,n,r,i,s=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",i?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),$w(e,n[0],n[1],r/t.zoom.value,!s)},KYe=(e,t,n,r,i,s)=>{e.beginPath(),e.ellipse(r,i,t/2,n/2,s,0,Math.PI*2),e.stroke()},YYe=(e,t,n,r)=>{let[i,s,o,a]=vt(t,n),l=o-i,f=a-s;e.strokeStyle="rgba(0,0,0,.05)";let c=r.value<1?r.value:1;e.lineWidth=xN/c;let d=e.lineWidth/2+wN,u=yl(Math.min(t.width,t.height),t);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":Py(e,i-d,s-d,l+d*2,f+d*2,i+l/2,s+f/2,t.angle,void 0,u);break;case"diamond":let h=Math.hypot(l,f),g=d*h/f,y=d*h/l;XYe(e,l+g*2,f+y*2,i+l/2,s+f/2,t.angle);break;case"ellipse":KYe(e,l+d*2,f+d*2,i+l/2,s+f/2,t.angle);break}},ZYe=(e,t,n,r)=>{let[i,s,o]=t,a=Ay(o,o.width,o.height,r);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(l=>{let[f,c]=We.getPointAtIndexGlobalCoordinates(i,l,n);$w(e,f,c,a)})},Aoe=(e,t,n)=>{let{angle:r,x1:i,y1:s,x2:o,y2:a,selectionColors:l,cx:f,cy:c,dashed:d,activeEmbeddable:u}=n,h=o-i,g=a-s,y=(n.padding??f1*2)/t.zoom.value,U=8/t.zoom.value,x=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(u?4:1)/t.zoom.value;let v=l.length;for(let E=0;E<v;++E)e.strokeStyle=l[E],d&&e.setLineDash([U,x+(U+x)*(v-1)]),e.lineDashOffset=(U+x)*E,Py(e,i-y,s-y,h+y*2,g+y*2,f,c,r);e.restore()},qYe=(e,t,n,r)=>{let i=Array.isArray(n)?ZYe:YYe;e.save(),e.translate(t.scrollX,t.scrollY),i(e,n,r,t.zoom),e.restore()},QYe=(e,t,n,r)=>{let[i,s,o,a]=vt(n,r),l=o-i,f=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=ir.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Py(e,i,s,l,f,i+l/2,s+f/2,n.angle,!1,ir.radius/t.zoom.value),e.restore()},JYe=(e,t,n)=>{let r=n.filter(a=>a.groupIds.length===0),i=n.filter(a=>a.groupIds.length>0),s=a=>{let[l,f,c,d]=pn(a);return{angle:0,x1:l,x2:c,y1:f,y2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(c-l)/2,cy:f+(d-f)/2,activeEmbeddable:!1}},o=a=>{let l=Fn(n,a);return s(l)};Object.entries(ste(i,t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>o(a)).concat(r.map(a=>s([a]))).forEach(a=>Aoe(e,t,a))},jS=(e,t,n,r)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;let i=We.getPointsGlobalCoordinates(n,r),{POINT_HANDLE_SIZE:s}=We,o=t.editingLinearElement?s:s/2;if(i.forEach((l,f)=>{var d,u;if(Ge(n)&&f!==0&&f!==i.length-1)return;let c=!!((u=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&u.includes(f));OS(e,t,l,o,c)}),Ge(n)){let l=((a=n.fixedSegments)==null?void 0:a.map(f=>f.index))||[];i.slice(0,-1).forEach((f,c)=>{We.isSegmentTooShort(n,i[c+1],i[c],c,t.zoom)||OS(e,t,O((f[0]+i[c+1][0])/2,(f[1]+i[c+1][1])/2),s/2,!1,!l.includes(c+1))})}else We.getEditorMidPoints(n,r,t).filter((l,f,c)=>l!==null&&!(Ge(n)&&(f===0||f===c.length-1))).forEach(l=>{(t.editingLinearElement||i.length===2)&&OS(e,t,l,s/2,!1,!0)});e.restore()},fW=(e,t,n,r,i)=>{Object.keys(r).forEach(s=>{let o=r[s];if(o!==void 0){let[a,l,f,c]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?$w(e,a+f/2,l+c/2,f/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,f,c,2/n.zoom.value),e.fill(),e.stroke()):Py(e,a,l,f,c,a+f/2,l+c/2,i,!0),e.restore()}})},eZe=(e,t,n,r,i)=>{let[s,o,,,a,l]=vt(r,i),f=3,c=20,d=f/n.zoom.value,u=d/2,h=a-s+d,g=l-o+d,y=Math.min(c/n.zoom.value,h),U=Math.min(c/n.zoom.value,g);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-g],[0,u],[y,u],[u,0],[u,U]],[[h-u,-g],[u,u],[-y+u,u],[0,0],[0,U]],[[-h,g],[0,-u],[y,-u],[u,0],[u,-U]],[[h-u,g],[u,-u],[-y+u,-u],[0,0],[0,-U]]].forEach(x=>{let[[v,E],[k,M],[S,A],[I,R],[D,_]]=x;e.save(),e.translate(a,l),e.rotate(r.angle),e.beginPath(),e.moveTo(v+k,E+M),e.lineTo(v+S,E+A),e.stroke(),e.beginPath(),e.moveTo(v+I,E+R),e.lineTo(v+D,E+_),e.stroke(),e.restore()}),e.restore()},tZe=(e,t,n,r)=>{t.save();let i=f1*2/n.zoom.value,s=e.width+i*2,o=e.height+i*2,a=e.x+s/2,l=e.y+o/2,f=-(s/2+i),c=-(o/2+i);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(f,c,s,o),t.restore()},Moe=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:r,allElementsMap:i,scale:s,appState:o,renderConfig:a,device:l})=>{var y,U,x;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};let[f,c]=TN(e,s),d=IN({canvas:e,scale:s,normalizedWidth:f,normalizedHeight:c});d.save(),d.scale(o.zoom.value,o.zoom.value);let u;if(n.forEach(v=>{var E;((E=o.editingLinearElement)==null?void 0:E.elementId)===v.id&&v&&(u=v)}),u&&jS(d,o,u,t),o.selectionElement&&!o.isCropping)try{pLe(o.selectionElement,d,o,a.selectionColor)}catch(v){console.error(v)}if(o.editingTextElement&&Ve(o.editingTextElement)){let v=i.get(o.editingTextElement.id);v&&!v.autoResize&&tZe(v,d,o,a.selectionColor)}o.isBindingEnabled&&o.suggestedBindings.filter(v=>v!=null).forEach(v=>{qYe(d,o,v,t)}),o.frameToHighlight&&QYe(d,o,o.frameToHighlight,t),o.elementsToHighlight&&JYe(d,o,o.elementsToHighlight);let h=r.some(v=>ht(v));if(r.length===1&&((y=o.editingLinearElement)==null?void 0:y.elementId)===r[0].id&&jS(d,o,r[0],t),Ge(r[0])&&o.selectedLinearElement&&o.selectedLinearElement.segmentMidPointHoveredCoords?WYe(d,o):o.selectedLinearElement&&o.selectedLinearElement.hoverPointIndex>=0&&!(Ge(r[0])&&o.selectedLinearElement.hoverPointIndex>0&&o.selectedLinearElement.hoverPointIndex<r[0].points.length-1)&&GYe(d,o,t),!o.multiElement&&!o.editingLinearElement){let v=one(r,o),E=r.length===1&&wt(r[0]);E&&((U=o.selectedLinearElement)==null?void 0:U.elementId)===r[0].id&&!r[0].locked&&jS(d,o,r[0],t);let k=a.selectionColor||ki.black;if(v){let M=mt(r),S=[];for(let I of t.values()){let R=[],D=a.remoteSelectedElementIds.get(I.id);if(E&&Ge(I)&&(I.startBinding||I.endBinding)||(M.has(I.id)&&!rte(o,I)&&R.push(k),D&&R.push(...D.map(_=>f7(_,o.collaborators.get(_))))),R.length){let[_,P,$,L,B,V]=vt(I,t,!0);S.push({angle:I.angle,x1:_,y1:P,x2:$,y2:L,selectionColors:R,dashed:!!D,cx:B,cy:V,activeEmbeddable:((x=o.activeEmbeddable)==null?void 0:x.element)===I&&o.activeEmbeddable.state==="active",padding:I.id===o.croppingElementId||ln(I)?0:void 0})}}let A=I=>{let R=Fn(t,I),[D,_,P,$]=pn(R);S.push({angle:0,x1:D,x2:P,y1:_,y2:$,selectionColors:[ki.black],dashed:!0,cx:D+(P-D)/2,cy:_+($-_)/2,activeEmbeddable:!1})};for(let I of $h(o))A(I);o.editingGroupId&&A(o.editingGroupId),S.forEach(I=>Aoe(d,o,I))}if(d.save(),d.translate(o.scrollX,o.scrollY),r.length===1){d.fillStyle=ki.white;let M=sne(r[0],o.zoom,t,"mouse",k2(l));if(!o.viewModeEnabled&&v&&!Ve(o.editingTextElement)&&!o.croppingElementId&&fW(d,a,o,M,r[0].angle),o.croppingElementId&&!o.isCropping){let S=t.get(o.croppingElementId);S&&ln(S)&&eZe(d,a,o,S,t)}}else if(r.length>1&&!o.isRotating){let M=f1*2/o.zoom.value;d.fillStyle=ki.white;let[S,A,I,R]=pn(r),D=d.getLineDash();d.setLineDash([2/o.zoom.value]);let _=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=k,Py(d,S-M,A-M,I-S+M*2,R-A+M*2,(S+I)/2,(A+R)/2,0),d.lineWidth=_,d.setLineDash(D);let P=JN([S,A,I,R,(S+I)/2,(A+R)/2],0,o.zoom,"mouse",h?{...k2(l),rotation:!0}:k2(l));r.some($=>!$.locked)&&fW(d,a,o,P,0)}d.restore()}o.searchMatches.forEach(({id:v,focus:E,matchedLines:k})=>{let M=t.get(v);if(M&&Ve(M)){let[S,A,,,I,R]=vt(M,t,!0);d.save(),o.theme===Ft.LIGHT?E?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":E?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)",d.translate(o.scrollX,o.scrollY),d.translate(I,R),d.rotate(M.angle),k.forEach(D=>{d.fillRect(S+D.offsetX-I,A+D.offsetY-R,D.width,D.height)}),d.restore()}}),zYe(d,o),d.restore(),zWe({context:d,renderConfig:a,appState:o,normalizedWidth:f,normalizedHeight:c});let g;return a.renderScrollbars&&(g=KXe(n,f,c,o),d.save(),d.fillStyle=XXe,d.strokeStyle="rgba(255,255,255,0.8)",[g.horizontal,g.vertical].forEach(v=>{v&&ase(d,v.x,v.y,v.width,v.height,Mu/2)}),d.restore()),{scrollBars:g,atLeastOneVisibleElement:n.length>0,elementsMap:t}},Toe=kw(e=>{var n;let t=Moe(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),nZe=(e,t)=>{if(t){Toe(e);return}let n=Moe(e);return e.callback(n),n},rZe=e=>{let t=T.useRef(!1);return T.useEffect(()=>{var l;if(!t.current){t.current=!0;return}let n=new Map,r=new Map,i=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((f,c)=>{if(f.selectedElementIds)for(let d of Object.keys(f.selectedElementIds))i.has(d)||i.set(d,[]),i.get(d).push(c);!f.pointer||f.pointer.renderCursor===!1||(f.username&&s.set(c,f.username),f.userState&&o.set(c,f.userState),r.set(c,dl({sceneX:f.pointer.x,sceneY:f.pointer.y},e.appState)),n.set(c,f.button))});let a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";nZe({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:r,remotePointerButton:n,remoteSelectedElementIds:i,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:!1},device:e.device,callback:e.renderInteractiveSceneCallback},FR())}),m.jsx("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?mn.GRAB:mn.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:H("labels.drawingCanvas")})},dW=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),iZe=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements?!1:$i(dW(e.appState),dW(t.appState)),sZe=Ne.memo(rZe,iZe),oZe=e=>{let t=T.useRef(null),n=T.useRef(!1);return T.useEffect(()=>{let r=t.current;if(!r)return;let i=e.canvas;n.current||(n.current=!0,r.replaceChildren(i),i.classList.add("excalidraw__canvas","static"));let s=`${e.appState.width}px`,o=`${e.appState.height}px`;i.style.width!==s&&(i.style.width=s),i.style.height!==o&&(i.style.height=o);let a=e.appState.width*e.scale,l=e.appState.height*e.scale;i.width!==a&&(i.width=a),i.height!==l&&(i.height=l),Ote({canvas:i,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},FR())}),m.jsx("div",{className:"excalidraw__canvas-wrapper",ref:t})},uW=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),aZe=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:$i(uW(e.appState),uW(t.appState))&&$i(e.renderConfig,t.renderConfig),lZe=Ne.memo(oZe,aZe),hW=class{constructor(e){Q(this,"scene"),Q(this,"getRenderableElements",(()=>{let t=({elementsMap:r,zoom:i,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:f,width:c})=>{let d=[];for(let u of r.values())t9(u,c,f,{zoom:i,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},r)&&d.push(u);return d},n=({elements:r,editingTextElement:i,newElementId:s,pendingImageElementId:o})=>{let a=Aa(new Map);for(let l of r)ln(l)&&o===l.id||s!==l.id&&(!i||i.type!=="text"||l.id!==i.id)&&a.set(l.id,l);return a};return GMe(({zoom:r,offsetLeft:i,offsetTop:s,scrollX:o,scrollY:a,height:l,width:f,editingTextElement:c,newElementId:d,pendingImageElementId:u,sceneNonce:h})=>{let g=this.scene.getNonDeletedElements(),y=n({elements:g,editingTextElement:c,newElementId:d,pendingImageElementId:u}),U=t({elementsMap:y,zoom:r,offsetLeft:i,offsetTop:s,scrollX:o,scrollY:a,height:l,width:f});return{elementsMap:y,visibleElements:U}})})()),this.scene=e}destroy(){Toe.cancel(),Lte.cancel(),this.getRenderableElements.clear()}},cZe=({trails:e})=>{let t=T.useRef(null);return T.useEffect(()=>{if(t.current)for(let n of e)n.start(t.current);return()=>{for(let n of e)n.stop()}},e),m.jsx("div",{className:"SVGLayer",children:m.jsx("svg",{ref:t})})},fZe=5,dZe=(e,t,n)=>{let[r,i]=vt(e,n),{x:s,y:o}=dl({sceneX:r+e.width,sceneY:i},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},pW=({children:e,element:t,elementsMap:n})=>{let r=Ly();if(r.contextMenu||r.newElement||r.resizingElement||r.isRotating||r.openMenu||r.viewModeEnabled)return null;let{x:i,y:s}=dZe(t,r,n);return m.jsx("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${i}px`,padding:fZe},children:e})},uZe="small",BS=e=>m.jsxs("label",{className:Ye("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${uZe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m.jsx("div",{className:"ToolIcon__icon",children:e.icon})]}),hZe=({height:e,width:t,userToFollow:n,onDisconnect:r})=>m.jsx("div",{className:"follow-mode",style:{width:t,height:e},children:m.jsxs("div",{className:"follow-mode__badge",children:[m.jsxs("div",{className:"follow-mode__badge__label",children:["Following"," ",m.jsx("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),m.jsx("button",{type:"button",onClick:r,className:"follow-mode__disconnect-btn",children:r6})]})}),pZe=hZe,mZe=class{constructor(){Q(this,"targets",new WeakMap),Q(this,"rafIds",new WeakMap)}register(e,t){this.targets.set(e,{callback:t,stopped:!0})}start(e){let t=this.targets.get(e);t&&(this.rafIds.has(e)||(this.targets.set(e,{...t,stopped:!1}),this.scheduleFrame(e)))}stop(e){let t=this.targets.get(e);t&&!t.stopped&&this.targets.set(e,{...t,stopped:!0}),this.cancelFrame(e)}constructFrame(e){return t=>{let n=this.targets.get(e);if(!n)return;let r=this.onFrame(n,t);!n.stopped&&!r?this.scheduleFrame(e):this.cancelFrame(e)}}scheduleFrame(e){let t=requestAnimationFrame(this.constructFrame(e));this.rafIds.set(e,t)}cancelFrame(e){if(this.rafIds.has(e)){let t=this.rafIds.get(e);cancelAnimationFrame(t)}this.rafIds.delete(e)}onFrame(e,t){return e.callback(t)??!1}},qM=class{constructor(e,t,n){this.animationFrameHandler=e,this.app=t,this.options=n,Q(this,"currentTrail"),Q(this,"pastTrails",[]),Q(this,"container"),Q(this,"trailElement"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(en,"path")}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(e,t){if(this.currentTrail){let n=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[n-1][0]===e&&this.currentTrail.originalPoints[n-1][1]===t}return!1}start(e){e&&(this.container=e),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var e;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((e=this.container)==null||e.removeChild(this.trailElement))}startPath(e,t){this.currentTrail=new c9(this.options),this.currentTrail.addPoint([e,t,performance.now()]),this.update()}addPointToPath(e,t){this.currentTrail&&(this.currentTrail.addPoint([e,t,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){let e=[];for(let n of this.pastTrails)e.push(this.drawTrail(n,this.app.state));if(this.currentTrail){let n=this.drawTrail(this.currentTrail,this.app.state);e.push(n)}this.pastTrails=this.pastTrails.filter(n=>n.getStrokeOutline().length!==0),e.length===0&&this.stop();let t=e.join(" ").trim();this.trailElement.setAttribute("d",t),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(e,t){let n=e.getStrokeOutline(e.options.size/t.zoom.value).map(([r,i])=>{let s=dl({sceneX:r,sceneY:i},t);return[s.x,s.y]});return XMe(n,!0)}},gZe=class{constructor(e,t){this.animationFrameHandler=e,this.app=t,Q(this,"localTrail"),Q(this,"collabTrails",new Map),Q(this,"container"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new qM(e,t,{...this.getTrailOptions(),fill:()=>KAe})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:e=>{let t=Math.max(0,1-(performance.now()-e.pressure)/1e3),n=(50-Math.min(50,e.totalLength-e.currentIndex))/50;return Math.min(Fh(n),Fh(t))}}}startPath(e,t){this.localTrail.startPath(e,t)}addPointToPath(e,t){this.localTrail.addPointToPath(e,t)}endPath(){this.localTrail.endPath()}start(e){this.container=e,this.animationFrameHandler.start(this),this.localTrail.start(e)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(let[e,t]of this.app.state.collaborators.entries()){let n;this.collabTrails.has(e)?n=this.collabTrails.get(e):(n=new qM(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=t.pointer)==null?void 0:r.laserColor)||f7(e,t)}}),n.start(this.container),this.collabTrails.set(e,n)),t.pointer&&t.pointer.tool==="laser"&&(t.button==="down"&&!n.hasCurrentTrail&&n.startPath(t.pointer.x,t.pointer.y),t.button==="down"&&n.hasCurrentTrail&&!n.hasLastPoint(t.pointer.x,t.pointer.y)&&n.addPointToPath(t.pointer.x,t.pointer.y),t.button==="up"&&n.hasCurrentTrail&&(n.addPointToPath(t.pointer.x,t.pointer.y),n.endPath()))}for(let e of this.collabTrails.keys())this.app.state.collaborators.has(e)||(this.collabTrails.get(e).stop(),this.collabTrails.delete(e))}}},bZe=(e,t,n,r,i,s)=>{let{zoom:o}=r,a=180*n/Math.PI,l=e*(o.value-1)/2,f=t*(o.value-1)/2;return e>i&&o.value!==1&&(l=i*(o.value-1)/2),t>s&&o.value!==1&&(f=s*(o.value-1)/2),`translate(${l}px, ${f}px) scale(${o.value}) rotate(${a}deg)`},yZe=({id:e,onChange:t,onSubmit:n,getViewportCoords:r,element:i,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{let f=(B,V)=>{if(!V.style.fontFamily||!V.style.fontSize)return!1;let z=V.style.fontFamily.replace(/"/g,"");return Ig({fontFamily:B.fontFamily})!==z||`${B.fontSize}px`!==V.style.fontSize},c=()=>{var F;let B=a.state,V=(F=Zf.getScene(i))==null?void 0:F.getElement(e);if(!V)return;let{textAlign:z,verticalAlign:G}=V,W=a.scene.getNonDeletedElementsMap();if(V&&Ve(V)){let K=V.x,q=V.y,Y=Ai(V,a.scene.getNonDeletedElementsMap()),ae=V.width,ge=V.height,he=V.width,ce=V.height;if(Y&&V.containerId){if(Rt(Y)){let ut=We.getBoundTextElementPosition(Y,V,W);K=ut.x,q=ut.y}let De=f(V,d),Ae;if(De?Ae=X4(Y.id,Y.height):(Ae=Bg[Y.id],Ae||(Ae=X4(Y.id,Y.height))),he=Kf(Y,V),ce=zw(Y,V),!Rt(Y)&&ge>ce){let ut=y1(ge,Y.type);xe(Y,{height:ut});return}else if(!Rt(Y)&&Y.height>Ae.height&&ge<ce){let ut=y1(ge,Y.type);xe(Y,{height:ut})}else{let{y:ut}=Fw(Y,V,W);q=ut}}let[ie,we]=r(K,q),Ee=d.selectionStart,_e=d.selectionEnd,Fe=d.value.length;if(Ee===_e&&_e!==Fe){let De=Fe-_e;d.selectionStart=d.value.length-De,d.selectionEnd=d.value.length-De}Y?ae+=.5:(he=(B.width-8-ie)/B.zoom.value,ae=Math.min(ae,he)),ge*=1.05;let He=wn(V),ve=(B.height-we)/B.zoom.value;Object.assign(d.style,{font:He,lineHeight:V.lineHeight,width:`${ae}px`,height:`${ge}px`,left:`${ie}px`,top:`${we}px`,transform:bZe(ae,ge,COe(V,Y),B,he,ve),textAlign:z,verticalAlign:G,color:V.strokeColor,opacity:V.opacity/100,filter:"var(--theme-filter)",maxHeight:`${ve}px`}),d.scrollTop=0,Vf()&&(d.style.fontFamily=Ig(V)),xe(V,{x:K,y:q})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let u="pre",h="normal";(Hn(i)||!i.autoResize)&&(u="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:u,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=i.originalText,c(),t&&(d.onpaste=async B=>{let V=await Gte(B,!0);if(!V.text)return;let z=_g(V.text);if(!z)return;let G=Ai(i,a.scene.getNonDeletedElementsMap()),W=wn({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(G){let F=At(G,a.scene.getNonDeletedElementsMap()),K=I1(`${d.value}${z}`,W,Kf(G,F)),q=sN(K,W);d.style.width=`${q}px`}},d.oninput=()=>{let B=_g(d.value);if(d.value!==B){let V=d.selectionStart;d.value=B,d.selectionStart=V,d.selectionEnd=V}t(d.value)}),d.onkeydown=B=>{if(!B.shiftKey&&pV.keyTest(B))B.preventDefault(),a.actionManager.executeAction(pV),c();else if(!B.shiftKey&&mV.keyTest(B))B.preventDefault(),a.actionManager.executeAction(mV),c();else if(!B.shiftKey&&gV.keyTest(B))B.preventDefault(),a.actionManager.executeAction(gV),c();else if(dV.keyTest(B))a.actionManager.executeAction(dV);else if(uV.keyTest(B))a.actionManager.executeAction(uV);else if(B.key===J.ESCAPE)B.preventDefault(),M=!0,S();else if(B.key===J.ENTER&&B[J.CTRL_OR_CMD]){if(B.preventDefault(),B.isComposing||B.keyCode===229)return;M=!0,S()}else if(B.key===J.TAB||B[J.CTRL_OR_CMD]&&(B.code===Jt.BRACKET_LEFT||B.code===Jt.BRACKET_RIGHT)){if(B.preventDefault(),B.isComposing)return;B.shiftKey||B.code===Jt.BRACKET_LEFT?v():x(),d.dispatchEvent(new Event("input"))}};let g=4,y=" ".repeat(g),U=new RegExp(`^ {1,${g}}`),x=()=>{let{selectionStart:B,selectionEnd:V}=d,z=E(),G=d.value;z.forEach(W=>{let F=G.slice(0,W),K=G.slice(W);G=`${F}${y}${K}`}),d.value=G,d.selectionStart=B+g,d.selectionEnd=V+g*z.length},v=()=>{let{selectionStart:B,selectionEnd:V}=d,z=E(),G=[],W=d.value;z.forEach(F=>{let K=W.slice(F,F+g).match(U);if(K){let q=W.slice(0,F),Y=W.slice(F+K[0].length);W=`${q}${Y}`,G.push(F)}}),d.value=W,G.length&&(B>G[G.length-1]?d.selectionStart=Math.max(B-g,G[G.length-1]):d.selectionStart=B,d.selectionEnd=Math.max(d.selectionStart,V-g*G.length))},E=()=>{let{selectionStart:B,selectionEnd:V,value:z}=d,G=z.slice(0,B).match(/[^\n]*$/)[0].length;return B=B-G,z.slice(B,V).split(`
`).reduce((W,F,K,q)=>W.concat(K?W[K-1]+q[K-1].length+1:B),[]).reverse()},k=B=>{B.target instanceof HTMLCanvasElement&&(B.preventDefault(),B.stopPropagation())},M=!1,S=()=>{var z,G;if($)return;$=!0,A();let B=(z=Zf.getScene(i))==null?void 0:z.getElement(i.id);if(!B)return;let V=Ai(B,a.scene.getNonDeletedElementsMap());if(V){if(d.value.trim()){let W=Xf(V);!W||W!==i.id?xe(V,{boundElements:(V.boundElements||[]).concat({type:"text",id:i.id})}):Rt(V)&&Gw(V)}else xe(V,{boundElements:(G=V.boundElements)==null?void 0:G.filter(W=>!Ve(W))});Rs(B,V,a.scene.getNonDeletedElementsMap())}n({viaKeyboard:M,nextOriginalText:d.value})},A=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,L&&L.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("wheel",k,!0),window.removeEventListener("pointerdown",D),window.removeEventListener("pointerup",I),window.removeEventListener("blur",S),window.removeEventListener("beforeunload",S),_(),P(),d.remove()},I=B=>{window.removeEventListener("pointerup",I);let V=B==null?void 0:B.target,z=V instanceof HTMLElement&&V.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=S,z||d.focus()})},R=()=>{d.onblur=null,window.addEventListener("pointerup",I),window.addEventListener("blur",S)},D=B=>{let V=B==null?void 0:B.target;if(B.button===Vd.WHEEL){V instanceof HTMLTextAreaElement&&(B.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(B)),R();return}let z=V instanceof HTMLElement&&V.classList.contains("properties-trigger");(B.target instanceof HTMLElement||B.target instanceof SVGElement)&&B.target.closest(`.${Ag.SHAPE_ACTIONS_MENU}, .${Ag.ZOOM_ACTIONS}`)&&!$0(B.target)||z?R():B.target instanceof HTMLCanvasElement&&!Vf()&&requestAnimationFrame(()=>{S()})},_=a.scene.onUpdate(()=>{var B;c(),(B=document.activeElement)!=null&&B.closest(".properties-content")||d.focus()}),P=a.onScrollChangeEmitter.on(()=>{c()}),$=!1;l&&d.select(),I();let L=null;s&&"ResizeObserver"in window?(L=new window.ResizeObserver(()=>{c()}),L.observe(s)):window.addEventListener("resize",c),d.onpointerdown=B=>B.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",D,{capture:!0})}),window.addEventListener("beforeunload",S),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d)},UZe=je({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=Nt(e,t);return i.length===1&&Ve(i[0])&&!i[0].autoResize},perform:(e,t,n,r)=>{let i=Nt(e,t);return{appState:t,elements:e.map(s=>{if(s.id===i[0].id&&Ve(s)){let o=ds(s.originalText,wn(s),s.lineHeight);return Ct(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:pe.IMMEDIATELY}}}),xZe=e=>{let t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(n=>`\\s*${n}(-beta)?`).join("|")})\\b`).test(e.trim())},Ioe=({canvas:e,rc:t,newElement:n,elementsMap:r,allElementsMap:i,scale:s,appState:o,renderConfig:a})=>{if(e){let[l,f]=TN(e,s),c=IN({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:f});c.save(),c.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?j0(n,r,i,t,c,a,o):c.clearRect(0,0,l,f)}},wZe=kw(e=>{Ioe(e)},{trailing:!0}),vZe=(e,t)=>{if(t){wZe(e);return}Ioe(e)},EZe=e=>{let t=T.useRef(null);return T.useEffect(()=>{t.current&&vZe({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},FR())}),m.jsx("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},kZe=EZe,Noe=Ne.createContext(null),Roe=Ne.createContext(null),_oe={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},zR=Ne.createContext(_oe);zR.displayName="DeviceContext";var $R=Ne.createContext({container:null,id:null});$R.displayName="ExcalidrawContainerContext";var HR=Ne.createContext([]);HR.displayName="ExcalidrawElementsContext";var VR=Ne.createContext({...Ac(),width:0,height:0,offsetLeft:0,offsetTop:0});VR.displayName="ExcalidrawAppStateContext";var WR=Ne.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});WR.displayName="ExcalidrawSetAppStateContext";var GR=Ne.createContext(null);GR.displayName="ExcalidrawActionManagerContext";var Oc=()=>T.useContext(Noe),Dy=()=>T.useContext(Roe),di=()=>T.useContext(zR),jc=()=>T.useContext($R),u7=()=>T.useContext(HR),Ly=()=>T.useContext(VR),ui=()=>T.useContext(WR),mo=()=>T.useContext(GR),v5=!1,FS=0,T0=!1,E5=!1,zS=!1,$S={horizontal:null,vertical:null},Fd=0,k5=!1,HS=new Map,i3=!1,mW=0,gW=!1,I0=null,on={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},SZe=class Poe extends Ne.Component{constructor(t){super(t),Q(this,"canvas"),Q(this,"interactiveCanvas",null),Q(this,"rc"),Q(this,"unmounted",!1),Q(this,"actionManager"),Q(this,"device",_oe),Q(this,"excalidrawContainerRef",Ne.createRef()),Q(this,"scene"),Q(this,"fonts"),Q(this,"renderer"),Q(this,"visibleElements"),Q(this,"resizeObserver"),Q(this,"nearestScrollableContainer"),Q(this,"library"),Q(this,"libraryItemsFromStorage"),Q(this,"id"),Q(this,"store"),Q(this,"history"),Q(this,"excalidrawContainerValue"),Q(this,"files",{}),Q(this,"imageCache",new Map),Q(this,"iFrameRefs",new Map),Q(this,"embedsValidationStatus",new Map),Q(this,"initializedEmbeds",new Set),Q(this,"elementsPendingErasure",new Set),Q(this,"flowChartCreator",new HXe),Q(this,"flowChartNavigator",new $Xe),Q(this,"hitLinkElement"),Q(this,"lastPointerDownEvent",null),Q(this,"lastPointerUpEvent",null),Q(this,"lastPointerMoveEvent",null),Q(this,"lastPointerMoveCoords",null),Q(this,"lastViewportPosition",{x:0,y:0}),Q(this,"animationFrameHandler",new mZe),Q(this,"laserTrails",new gZe(this.animationFrameHandler,this)),Q(this,"eraserTrail",new qM(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:c=>{let d=Math.max(0,1-(performance.now()-c.pressure)/200),u=(10-Math.min(10,c.totalLength-c.currentIndex))/10;return Math.min(Fh(u),Fh(d))},fill:()=>this.state.theme===Ft.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"})),Q(this,"onChangeEmitter",new Zl),Q(this,"onPointerDownEmitter",new Zl),Q(this,"onPointerUpEmitter",new Zl),Q(this,"onUserFollowEmitter",new Zl),Q(this,"onScrollChangeEmitter",new Zl),Q(this,"missingPointerEventCleanupEmitter",new Zl),Q(this,"onRemoveEventListenersEmitter",new Zl),Q(this,"getEffectiveGridSize",()=>Mb(this)?this.state.gridSize:null),Q(this,"updateEmbedValidationStatus",(c,d)=>{this.embedsValidationStatus.set(c.id,d),or.delete(c)}),Q(this,"updateEmbeddables",()=>{let c=new Set,d=!1;this.scene.getNonDeletedElements().filter(u=>{if(Qs(u)){if(c.add(u.id),!this.embedsValidationStatus.has(u.id)){d=!0;let h=G3(u.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(u,h)}}else qd(u)&&c.add(u.id);return!1}),d&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((u,h)=>{c.has(h)||this.iFrameRefs.delete(h)})}),Q(this,"getFrameNameDOMId",c=>`${this.id}-frame-name-${c.id}`),Q(this,"frameNameBoundsCache",{get:c=>{let d=this.frameNameBoundsCache._cache.get(c.id);if(!d||d.zoom!==this.state.zoom.value||d.versionNonce!==c.versionNonce){let u=document.getElementById(this.getFrameNameDOMId(c));if(u){let h=u.getBoundingClientRect(),g=_n({clientX:h.x,clientY:h.y},this.state),y=_n({clientX:h.right,clientY:h.bottom},this.state);return d={x:g.x,y:g.y,width:y.x-g.x,height:y.y-g.y,angle:0,zoom:this.state.zoom.value,versionNonce:c.versionNonce},this.frameNameBoundsCache._cache.set(c.id,d),d}return null}return d},_cache:new Map}),Q(this,"resetEditingFrame",c=>{var d;c&&xe(c,{name:((d=c.name)==null?void 0:d.trim())||null}),this.setState({editingFrame:null})}),Q(this,"renderFrameNames",()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;let c=this.state.theme===Ft.DARK;return this.scene.getNonDeletedFramesLikes().map(d=>{if(!t9(d,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===d.id&&this.resetEditingFrame(d),null;let{x:u,y:h}=dl({sceneX:d.x,sceneY:d.y},this.state),g=6,y,U=Jte(d);if(d.id===this.state.editingFrame){let x=U;y=m.jsx("input",{autoFocus:!0,value:x,onChange:v=>{xe(d,{name:v.target.value})},onFocus:v=>v.target.select(),onBlur:()=>this.resetEditingFrame(d),onKeyDown:v=>{(v.key===J.ESCAPE||v.key===J.ENTER)&&this.resetEditingFrame(d)},style:{background:this.state.viewBackgroundColor,filter:c?QI:"none",zIndex:2,border:"none",display:"block",padding:`${g}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${g}px, ${g}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-u-g}px`},size:x.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else y=U;return m.jsx("div",{id:this.getFrameNameDOMId(d),style:{position:"absolute",bottom:`${this.state.height+ir.nameOffsetY-h+this.state.offsetTop}px`,left:`${u-this.state.offsetLeft}px`,zIndex:2,fontSize:ir.nameFontSize,color:c?ir.nameColorDarkTheme:ir.nameColorLightTheme,lineHeight:ir.nameLineHeight,width:"max-content",maxWidth:`${d.width}px`,overflow:d.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:mn.MOVE,pointerEvents:this.state.viewModeEnabled?bp.disabled:bp.enabled},onPointerDown:x=>this.handleCanvasPointerDown(x),onWheel:x=>this.handleWheel(x),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:d.id})},children:y},d.id)})}),Q(this,"focusContainer",()=>{var c;(c=this.excalidrawContainerRef.current)==null||c.focus()}),Q(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted()),Q(this,"getSceneElements",()=>this.scene.getNonDeletedElements()),Q(this,"onInsertElements",c=>{this.addElementsFromPasteOrLibrary({elements:c,position:"center",files:null})}),Q(this,"onExportImage",async(c,d,u)=>{Pn("export",c,"ui");let h=await c7(c,d,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:u.exportingFrame}).catch(jJ).catch(g=>{console.error(g),this.setState({errorMessage:g.message})});this.state.exportEmbedScene&&h&&rR(h)&&this.setState({fileHandle:h})}),Q(this,"magicGenerations",new Map),Q(this,"updateMagicGeneration",({frameElement:c,data:d})=>{d.status==="pending"?xe(c,{customData:{generationData:void 0}},!1):xe(c,{customData:{generationData:d}},!1),this.magicGenerations.set(c.id,d),this.triggerRender()}),Q(this,"plugins",{}),Q(this,"onMagicframeToolSelect",()=>{let c=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(c.length===0)this.setActiveTool({type:oi.magicframe}),Pn("ai","tool-select (empty-selection)","d2c");else{let d=c.length===1&&F3(c[0])&&c[0];if(!d&&c.some(h=>ht(h)||h.frameId)){this.setActiveTool({type:oi.magicframe});return}Pn("ai","tool-select (existing selection)","d2c");let u;if(d)u=d;else{let[h,g,y,U]=pn(c),x=50;u=cM({...ir,x:h-x,y:g-x,width:y-h+x*2,height:U-g+x*2,opacity:100,locked:!1}),this.scene.insertElement(u);for(let v of c)xe(v,{frameId:u.id});this.setState({selectedElementIds:{[u.id]:!0}})}this.onMagicFrameGenerate(u,"upstream")}}),Q(this,"openEyeDropper",({type:c})=>{ml.set(s7,{swapPreviewOnAlt:!0,colorPickerType:c==="stroke"?"elementStroke":"elementBackground",onSelect:(d,u)=>{let h=c==="background"&&u.altKey||c==="stroke"&&!u.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?h?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:d},captureUpdate:pe.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:d},captureUpdate:pe.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(g=>this.state.selectedElementIds[g.id]?Ct(g,{[h?"strokeColor":"backgroundColor"]:d}):g),captureUpdate:pe.IMMEDIATELY})},keepOpenOnAlt:!1})}),Q(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})}),Q(this,"syncActionResult",ur(c=>{var h,g,y,U,x,v;if(this.unmounted||c===!1)return;c.captureUpdate===pe.NEVER?this.store.shouldUpdateSnapshot():c.captureUpdate===pe.IMMEDIATELY&&this.store.shouldCaptureIncrement();let d=!1,u=null;if(c.elements&&(this.scene.replaceAllElements(c.elements),d=!0),c.files&&(this.addMissingFiles(c.files,c.replaceFiles),this.addNewImagesToImageCache()),c.appState||u||this.state.contextMenu){let E=((h=c==null?void 0:c.appState)==null?void 0:h.viewModeEnabled)||!1,k=((g=c==null?void 0:c.appState)==null?void 0:g.zenModeEnabled)||!1,M=((y=c==null?void 0:c.appState)==null?void 0:y.theme)||this.props.theme||Ft.LIGHT,S=((U=c==null?void 0:c.appState)==null?void 0:U.name)??this.state.name,A=((x=c==null?void 0:c.appState)==null?void 0:x.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(E=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(k=this.props.zenModeEnabled),u=((v=c.appState)==null?void 0:v.editingTextElement)||null,c.elements&&u&&c.elements.forEach(I=>{(u==null?void 0:u.id)===I.id&&u!==I&&yM(I)&&Ve(I)&&(u=I)}),u!=null&&u.isDeleted&&(u=null),this.setState(I=>{let R=c.appState||{};return{...I,...R,contextMenu:null,editingTextElement:u,viewModeEnabled:E,zenModeEnabled:k,theme:M,name:S,errorMessage:A}}),d=!0}!d&&c.captureUpdate!==pe.EVENTUALLY&&this.scene.triggerUpdate()})),Q(this,"onBlur",ur(()=>{T0=!1,this.setState({isBindingEnabled:!0})})),Q(this,"onUnload",()=>{this.onBlur()}),Q(this,"disableEvent",c=>{c.preventDefault()}),Q(this,"resetHistory",()=>{this.history.clear()}),Q(this,"resetStore",()=>{this.store.clear()}),Q(this,"resetScene",ur(c=>{this.scene.replaceAllElements([]),this.setState(d=>({...Ac(),isLoading:c!=null&&c.resetLoadingState?!1:d.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()})),Q(this,"initializeScene",async()=>{var u;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async h=>{if(!h.files.length)return;let g=h.files[0],y=await g.getFile();this.loadFileToCanvas(new File([y],y.name||"",{type:y.type}),g)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let c=null;try{typeof this.props.initialData=="function"?c=await this.props.initialData()||null:c=await this.props.initialData||null,c!=null&&c.libraryItems&&this.library.updateLibrary({libraryItems:c.libraryItems,merge:!0}).catch(h=>{console.error(h)})}catch(h){console.error(h),c={appState:{errorMessage:h.message||"Encountered an error during importing or restoring scene data"}}}let d=Hw(c,null,null,{repairBindings:!0});d.appState={...d.appState,theme:this.props.theme||d.appState.theme,openSidebar:((u=d.appState)==null?void 0:u.openSidebar)||this.state.openSidebar,activeTool:d.appState.activeTool.type==="image"?{...d.appState.activeTool,type:"selection"}:d.appState.activeTool,isLoading:!1,toast:this.state.toast},c!=null&&c.scrollToContent&&(d.appState={...d.appState,...Cb(d.elements,{...d.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...d,captureUpdate:pe.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(h=>{this.fonts.onLoaded(h)}),v2(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})}),Q(this,"isMobileBreakpoint",(c,d)=>c<sMe||d<aMe&&c<oMe),Q(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;let{clientWidth:c,clientHeight:d}=document.body,u=this.device.viewport,h=j3(u,{isLandscape:c>d,isMobile:this.isMobileBreakpoint(c,d)});return u!==h?(this.device={...this.device,viewport:h},!0):!1}),Q(this,"refreshEditorBreakpoints",()=>{let c=this.excalidrawContainerRef.current;if(!c)return;let{width:d,height:u}=c.getBoundingClientRect(),h=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:lMe,g=this.device.editor,y=j3(g,{isMobile:this.isMobileBreakpoint(d,u),canFitSidebar:d>h});return g!==y?(this.device={...this.device,editor:y},!0):!1}),Q(this,"onResize",ur(()=>{this.scene.getElementsIncludingDeleted().forEach(c=>or.delete(c)),this.refreshViewportBreakpoints(),this.updateDOMRect(),VA||this.refreshEditorBreakpoints(),this.setState({})})),Q(this,"onFullscreenChange",()=>{var c;!document.fullscreenElement&&((c=this.state.activeEmbeddable)==null?void 0:c.state)==="active"&&this.setState({activeEmbeddable:null})}),Q(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:c,scrollBars:d,elementsMap:u})=>{d&&($S=d);let h=this.state.editingTextElement?!1:!c&&u.size>0;this.state.scrolledOutside!==h&&this.setState({scrolledOutside:h}),this.scheduleImageRefresh()}),Q(this,"onScroll",Ng(()=>{let{offsetTop:c,offsetLeft:d}=this.getCanvasOffsets();this.setState(u=>u.offsetLeft===d&&u.offsetTop===c?null:{offsetTop:c,offsetLeft:d})},rMe)),Q(this,"onCut",ur(c=>{var d;!((d=this.excalidrawContainerRef.current)!=null&&d.contains(document.activeElement))||$0(c.target)||(this.actionManager.executeAction(vV,"keyboard",c),c.preventDefault(),c.stopPropagation())})),Q(this,"onCopy",ur(c=>{var d;!((d=this.excalidrawContainerRef.current)!=null&&d.contains(document.activeElement))||$0(c.target)||(this.actionManager.executeAction(nx,"keyboard",c),c.preventDefault(),c.stopPropagation())})),Q(this,"onTouchStart",c=>{if(SJ&&c.preventDefault(),!v5){v5=!0,clearTimeout(FS),FS=window.setTimeout(Poe.resetTapTwice,tMe);return}if(v5&&c.touches.length===1){let d=c.touches[0];this.handleCanvasDoubleClick({clientX:d.clientX,clientY:d.clientY}),v5=!1,clearTimeout(FS)}c.touches.length===2&&this.setState({selectedElementIds:an({},this.state),activeEmbeddable:null})}),Q(this,"onTouchEnd",c=>{this.resetContextMenuTimer(),c.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:an(this.state.previousSelectedElementIds,this.state)}):on.pointers.clear()}),Q(this,"pasteFromClipboard",ur(async c=>{var E,k;let d=!!i3,u=document.activeElement,h=(E=this.excalidrawContainerRef.current)==null?void 0:E.contains(u);if(c&&!h)return;let g=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(c&&(!(g instanceof HTMLCanvasElement)||$0(u)))return;let{x:y,y:U}=_n({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),x=(k=c==null?void 0:c.clipboardData)==null?void 0:k.files[0],v=await Gte(c,d);if(!x&&!d){if(v.mixedContent)return this.addElementsFromMixedContentPaste(v.mixedContent,{isPlainPaste:d,sceneX:y,sceneY:U});if(v.text){let M=v.text.trim();M.startsWith("<svg")&&M.endsWith("</svg>")&&(x=gH(M))}}if(Vh(x)&&!v.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:H("errors.imageToolNotSupported")});return}let M=this.createImageElement({sceneX:y,sceneY:U});this.insertImageElement(M,x),this.initializeImageDimensions(M),this.setState({selectedElementIds:an({[M.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(v,c)===!1)return}catch(M){console.error(M)}if(v.errorMessage)this.setState({errorMessage:v.errorMessage});else if(v.spreadsheet&&!d)this.setState({pasteDialog:{data:v.spreadsheet,shown:!0}});else if(v.elements){let M=v.programmaticAPI?ZM(v.elements):v.elements;this.addElementsFromPasteOrLibrary({elements:M,files:v.files||null,position:"cursor",retainSeed:d})}else if(v.text){if(v.text&&xZe(v.text)){let A=await qe(()=>import("./index-Cf7mltEi.js").then(I=>I.aR),[]);try{let{elements:I,files:R}=await A.parseMermaidToExcalidraw(v.text),D=ZM(I,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:D,files:R,position:"cursor"});return}catch(I){console.warn(`parsing pasted text as mermaid definition failed: ${I.message}`)}}let M=HJ(v.text).split(/\n+/).map(A=>A.trim()).filter(Boolean),S=M.map(A=>tje(A)).filter(A=>{var I;return G3(A,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(A)||((I=Yp(A))==null?void 0:I.type)==="video")});if(!i3&&S.length>0&&S.length===M.length){let A=[];for(let I of S){let R=A[A.length-1],D=this.insertEmbeddableElement({sceneX:R?R.x+R.width+20:y,sceneY:U,link:Do(I)});D&&A.push(D)}A.length&&this.setState({selectedElementIds:Object.fromEntries(A.map(I=>[I.id,!0]))});return}this.addTextFromPaste(v.text,d)}this.setActiveTool({type:"selection"}),c==null||c.preventDefault()})),Q(this,"addElementsFromPasteOrLibrary",c=>{var B,V;let d=FN(c.elements,null,void 0),[u,h,g,y]=pn(d),U=rs(u,g)/2,x=rs(h,y)/2,v=typeof c.position=="object"?c.position.clientX:c.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,E=typeof c.position=="object"?c.position.clientY:c.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:k,y:M}=_n({clientX:v,clientY:E},this.state),S=k-U,A=M-x,[I,R]=Gr(S,A,this.getEffectiveGridSize()),D=xte(d.map(z=>Ct(z,{x:z.x+I-u,y:z.y+R-h})),{randomizeSeed:!c.retainSeed}),_=this.scene.getElementsIncludingDeleted(),P=[..._,...D];P=((V=(B=this.props).onDuplicate)==null?void 0:V.call(B,P,_))||P,Nc(P,mt(D));let $=this.getTopLayerFrameAtSceneCoords({x:k,y:M});if($){let z=cBe(D,$);E2(P,z,$,this.state)}this.scene.replaceAllElements(P),D.forEach(z=>{if(Ve(z)&&Hn(z)){let G=Ai(z,this.scene.getElementsMapIncludingDeleted());Rs(z,G,this.scene.getElementsMapIncludingDeleted())}}),$Ae&&Bf.loadElementsFonts(D).then(z=>{this.fonts.onLoaded(z)}),c.files&&this.addMissingFiles(c.files),this.store.shouldCaptureIncrement();let L=ZN(D);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&ml.get(DR)?this.state.openSidebar:null,...vs({editingGroupId:null,selectedElementIds:L.reduce((z,G)=>(Hn(G)||(z[G.id]=!0),z),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{c.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),c.fitToContent&&this.scrollToContent(D,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})}),Q(this,"setAppState",(c,d)=>{this.setState(c,d)}),Q(this,"removePointer",c=>{Fd&&this.resetContextMenuTimer(),on.pointers.delete(c.pointerId)}),Q(this,"toggleLock",(c="ui")=>{this.state.activeTool.locked||Pn("toolbar","toggleLock",`${c} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(d=>({activeTool:{...d.activeTool,...Dr(this.state,d.activeTool.locked?{type:"selection"}:d.activeTool),locked:!d.activeTool.locked}}))}),Q(this,"updateFrameRendering",c=>{this.setState(d=>{let u=typeof c=="function"?c(d.frameRendering):c;return{frameRendering:{enabled:(u==null?void 0:u.enabled)??d.frameRendering.enabled,clip:(u==null?void 0:u.clip)??d.frameRendering.clip,name:(u==null?void 0:u.name)??d.frameRendering.name,outline:(u==null?void 0:u.outline)??d.frameRendering.outline}}})}),Q(this,"togglePenMode",c=>{this.setState(d=>({penMode:c??!d.penMode,penDetected:!0}))}),Q(this,"onHandToolToggle",()=>{this.actionManager.executeAction(CWe)}),Q(this,"zoomCanvas",c=>{this.setState({...lh({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:Pf(c)},this.state)})}),Q(this,"cancelInProgressAnimation",null),Q(this,"scrollToContent",(c=this.scene.getNonDeletedElements(),d)=>{var U;if(typeof c=="string"){let x;if(v2(c)?x=lje(c):x=c,x){let v=this.scene.getElementsFromId(x);v!=null&&v.length?this.scrollToContent(v,{fitToContent:(d==null?void 0:d.fitToContent)??!0,animate:(d==null?void 0:d.animate)??!0}):v2(c)&&this.setState({toast:{message:H("elementLink.notFound"),duration:3e3,closable:!0}})}return}(U=this.cancelInProgressAnimation)==null||U.call(this);let u=Array.isArray(c)?c:[c],h=this.state.zoom,g=this.state.scrollX,y=this.state.scrollY;if(d!=null&&d.fitToContent||d!=null&&d.fitToViewport){let{appState:x}=a7({canvasOffsets:d.canvasOffsets,targetElements:u,appState:this.state,fitToViewport:!!(d!=null&&d.fitToViewport),viewportZoomFactor:d==null?void 0:d.viewportZoomFactor,minZoom:d==null?void 0:d.minZoom,maxZoom:d==null?void 0:d.maxZoom});h=x.zoom,g=x.scrollX,y=x.scrollY}else{let x=Cb(u,this.state);g=x.scrollX,y=x.scrollY}if(d!=null&&d.animate){let x=this.state.scrollX,v=this.state.scrollY,E=this.state.zoom.value,k=_Me({fromValues:{scrollX:x,scrollY:v,zoom:E},toValues:{scrollX:g,scrollY:y,zoom:h.value},interpolateValue:(M,S,A,I)=>{if(I==="zoom")return M*Math.pow(S/M,Fh(A))},onStep:({scrollX:M,scrollY:S,zoom:A})=>{this.setState({scrollX:M,scrollY:S,zoom:{value:A}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(d==null?void 0:d.duration)??500});this.cancelInProgressAnimation=()=>{k(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:g,scrollY:y,zoom:h})}),Q(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})}),Q(this,"translateCanvas",c=>{var d;(d=this.cancelInProgressAnimation)==null||d.call(this),this.maybeUnfollowRemoteUser(),this.setState(c)}),Q(this,"setToast",c=>{this.setState({toast:c})}),Q(this,"restoreFileFromShare",async()=>{try{let c=await caches.open("web-share-target"),d=await c.match("shared-file");if(d){let u=await d.blob(),h=new File([u],u.name||"",{type:u.type});this.loadFileToCanvas(h,null),await c.delete("shared-file"),window.history.replaceState(null,VAe,window.location.pathname)}}catch(c){this.setState({errorMessage:c.message})}}),Q(this,"addFiles",ur(c=>{let{addedFiles:d}=this.addMissingFiles(c);this.clearImageShapeCache(d),this.scene.triggerUpdate(),this.addNewImagesToImageCache()})),Q(this,"addMissingFiles",(c,d=!1)=>{let u=d?{}:{...this.files},h={},g=Array.isArray(c)?c:Object.values(c);for(let y of g)if(!u[y.id]&&(h[y.id]=y,u[y.id]=y,y.mimeType===ft.svg))try{let U=LBe(F$(jBe(y.dataURL)),ft.svg);y.dataURL!==U&&(y.version=(y.version??1)+1,y.dataURL=U)}catch(U){console.error(U)}return this.files=u,{addedFiles:h}}),Q(this,"updateScene",ur(c=>{let d=Yf(c.elements??[]);if(c.captureUpdate&&c.captureUpdate!==pe.EVENTUALLY){let u=this.store.snapshot.appState,h=this.store.snapshot.elements,g=c.appState?Object.assign({},u,c.appState):u,y=c.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),mt(d)):h;c.captureUpdate===pe.IMMEDIATELY?this.store.captureIncrement(y,g):c.captureUpdate===pe.NEVER&&this.store.updateSnapshot(y,g)}c.appState&&this.setState(c.appState),c.elements&&this.scene.replaceAllElements(d),c.collaborators&&this.setState({collaborators:c.collaborators})})),Q(this,"triggerRender",c=>{c===!0?this.scene.triggerUpdate():this.setState({})}),Q(this,"toggleSidebar",({name:c,tab:d,force:u})=>{var y,U;let h;u===void 0?h=((y=this.state.openSidebar)==null?void 0:y.name)===c&&((U=this.state.openSidebar)==null?void 0:U.tab)===d?null:c:h=u?c:null;let g=h?{name:h}:null;return g&&d&&(g.tab=d),this.setState({openSidebar:g}),!!h}),Q(this,"updateCurrentCursorPosition",ur(c=>{this.lastViewportPosition.x=c.clientX,this.lastViewportPosition.y=c.clientY})),Q(this,"getEditorUIOffsets",()=>{var g,y,U,x,v,E,k,M,S,A;let c=((x=(U=(y=(g=this.excalidrawContainerRef)==null?void 0:g.current)==null?void 0:y.querySelector(".App-toolbar"))==null?void 0:U.getBoundingClientRect())==null?void 0:x.bottom)??0,d=(k=(E=(v=this.excalidrawContainerRef)==null?void 0:v.current)==null?void 0:E.querySelector(".sidebar"))==null?void 0:k.getBoundingClientRect(),u=(A=(S=(M=this.excalidrawContainerRef)==null?void 0:M.current)==null?void 0:S.querySelector(".App-menu__left"))==null?void 0:A.getBoundingClientRect(),h=16;return Pb().rtl?{top:c+h,right:Math.max(this.state.width-((u==null?void 0:u.left)??this.state.width),0)+h,bottom:h,left:Math.max((d==null?void 0:d.right)??0,0)+h}:{top:c+h,right:Math.max(this.state.width-((d==null?void 0:d.left)??this.state.width)+h,0),bottom:h,left:Math.max((u==null?void 0:u.right)??0,0)+h}}),Q(this,"onKeyDown",ur(c=>{var g,y;if("Proxy"in window&&(!c.shiftKey&&/^[A-Z]$/.test(c.key)||c.shiftKey&&/^[a-z]$/.test(c.key))&&(c=new Proxy(c,{get(U,x){let v=U[x];return typeof v=="function"?v.bind(U):x==="key"?c.shiftKey?U.key.toUpperCase():U.key.toLowerCase():v}})),!XA(c.target)){if((c.key===J.ESCAPE||c.key===J.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}let U=Nt(this.scene.getNonDeletedElementsMap(),this.state);if(U.length===1&&ln(U[0])&&c.key===J.ENTER){this.startImageCropping(U[0]);return}if(c.key===J.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}let x=$5(c.key);if(c[J.CTRL_OR_CMD]&&x&&!c.shiftKey){c.preventDefault();let v=Nt(this.scene.getNonDeletedElementsMap(),this.state);v.length===1&&Cw(v[0])&&this.flowChartCreator.createNodes(v[0],this.scene.getNonDeletedElementsMap(),this.state,FV(c.key)),(g=this.flowChartCreator.pendingNodes)!=null&&g.length&&!Z3(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(c.altKey){let v=Nt(this.scene.getNonDeletedElementsMap(),this.state);if(v.length===1&&x){c.preventDefault();let E=this.flowChartNavigator.exploreByDirection(v[0],this.scene.getNonDeletedElementsMap(),FV(c.key));if(E){this.setState(M=>({selectedElementIds:an({[E]:!0},M)}));let k=this.scene.getNonDeletedElementsMap().get(E);k&&!Z3([k],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(k,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(c[J.CTRL_OR_CMD]&&c.key===J.P&&!c.shiftKey&&!c.altKey){this.setToast({message:H("commandPalette.shortcutHint",{shortcut:ls("commandPalette")})}),c.preventDefault();return}if(c[J.CTRL_OR_CMD]&&c.key.toLowerCase()===J.V&&(i3=c.shiftKey,clearTimeout(mW),mW=window.setTimeout(()=>{i3=!1},100)),c[J.CTRL_OR_CMD]&&$0(c.target)&&(c.code===Jt.MINUS||c.code===Jt.EQUAL)){c.preventDefault();return}if($0(c.target)&&c.key!==J.ESCAPE||$5(c.key)&&XA(c.target))return;if(c.key===J.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(c.key.toLowerCase()===J.E&&c.shiftKey&&c[J.CTRL_OR_CMD]){c.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(c.key===J.PAGE_UP||c.key===J.PAGE_DOWN){let U=(c.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;c.key===J.PAGE_DOWN&&(U=-U),c.shiftKey?this.translateCanvas(x=>({scrollX:x.scrollX+U})):this.translateCanvas(x=>({scrollY:x.scrollY+U}))}if(((y=this.state.openDialog)==null?void 0:y.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(c)||this.state.viewModeEnabled)return;if(c[J.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),$5(c.key)){let U=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),x=U.find(Ge),v=new Set;U.filter(Ge).filter(S=>{let A=S.startBinding&&!U.some(R=>{var D;return R.id===((D=S.startBinding)==null?void 0:D.elementId)}),I=S.endBinding&&!U.some(R=>{var D;return R.id===((D=S.endBinding)==null?void 0:D.elementId)});return A||I}).forEach(S=>v.add(S.id)),U=U.filter(S=>!v.has(S.id));let E=this.getEffectiveGridSize()&&(c.shiftKey?Tz:this.getEffectiveGridSize())||(c.shiftKey?GAe:Tz),k=0,M=0;c.key===J.ARROW_LEFT?k=-E:c.key===J.ARROW_RIGHT?k=E:c.key===J.ARROW_UP?M=-E:c.key===J.ARROW_DOWN&&(M=E),U.forEach(S=>{xe(S,{x:S.x+k,y:S.y+M},!1),co(S,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:U})}),this.setState({suggestedBindings:iS(U.filter(S=>S.id!==(x==null?void 0:x.id)||E!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),c.preventDefault()}else if(c.key===J.ENTER){let U=this.scene.getSelectedElements(this.state);if(U.length===1){let x=U[0];if(c[J.CTRL_OR_CMD])wt(x)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==U[0].id)&&(this.store.shouldCaptureIncrement(),Ge(x)||this.setState({editingLinearElement:new We(x)}));else if(Ve(x)||IOe(x)){let v;Ve(x)||(v=x);let E=sS(x,this.state,this.scene.getNonDeletedElementsMap()),k=E.x,M=E.y;this.startTextEditing({sceneX:k,sceneY:M,container:v}),c.preventDefault();return}else ht(x)&&this.setState({editingFrame:x.id})}}else if(!c.ctrlKey&&!c.altKey&&!c.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){let U=tLe(c.key);U?(this.state.activeTool.type!==U&&Pn("toolbar",U,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),U==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(x=>({currentItemArrowType:x.currentItemArrowType===Ui.sharp?Ui.round:x.currentItemArrowType===Ui.round?Ui.elbow:Ui.sharp})),this.setActiveTool({type:U}),c.stopPropagation()):c.key===J.Q&&(this.toggleLock("keyboard"),c.stopPropagation())}if(c.key===J.SPACE&&on.pointers.size===0&&(T0=!0,Un(this.interactiveCanvas,mn.GRAB),c.preventDefault()),(c.key===J.G||c.key===J.S)&&!c.altKey&&!c[J.CTRL_OR_CMD]){let U=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!U.length)return;c.key===J.G&&(Dg(this.state.activeTool.type)||U.some(x=>Dg(x.type)))&&(this.setState({openPopup:"elementBackground"}),c.stopPropagation()),c.key===J.S&&(this.setState({openPopup:"elementStroke"}),c.stopPropagation())}if(!c[J.CTRL_OR_CMD]&&c.shiftKey&&c.key.toLowerCase()===J.F){let U=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!U.length)return;(this.state.activeTool.type==="text"||U.find(x=>Ve(x)||At(x,this.scene.getNonDeletedElementsMap())))&&(c.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(c.key===J.K&&!c.altKey&&!c[J.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}c[J.CTRL_OR_CMD]&&(c.key===J.BACKSPACE||c.key===J.DELETE)&&ml.set(d7,"clearCanvas");let d=c.key.toLocaleLowerCase(),u=d===J.S&&c.shiftKey,h=c.key===J.I||d===J.G&&c.shiftKey;(u||h)&&this.openEyeDropper({type:u?"stroke":"background"})})),Q(this,"onKeyUp",ur(c=>{var d,u,h,g;if(c.key===J.SPACE&&(this.state.viewModeEnabled||((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?Un(this.interactiveCanvas,mn.GRAB):this.state.activeTool.type==="selection"?Ga(this.interactiveCanvas):(Xl(this.interactiveCanvas,this.state),this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),T0=!1),!c[J.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),$5(c.key)&&(W4(this.scene.getSelectedElements(this.state).filter(wt),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,oh(this.state),((u=this.state.selectedLinearElement)==null?void 0:u.selectedPointsIndices)??[],this.state.zoom),this.setState({suggestedBindings:[]})),c.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:pe.IMMEDIATELY})),!c[J.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(h=this.flowChartCreator.pendingNodes)!=null&&h.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);let y=(g=this.flowChartCreator.pendingNodes)==null?void 0:g[0];y&&(this.setState(U=>({selectedElementIds:an({[y.id]:!0},U)})),Z3([y],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(y,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:pe.IMMEDIATELY})}})),Q(this,"isToolSupported",c=>{var d;return((d=this.props.UIOptions.tools)==null?void 0:d[c])!==!1}),Q(this,"setActiveTool",c=>{if(!this.isToolSupported(c.type)){console.warn(`"${c.type}" tool is disabled via "UIOptions.canvasActions.tools.${c.type}"`);return}let d=Dr(this.state,c);d.type==="hand"?Un(this.interactiveCanvas,mn.GRAB):T0||Xl(this.interactiveCanvas,{...this.state,activeTool:d}),NMe(document.activeElement)&&this.focusContainer(),nN(d.type)||this.setState({suggestedBindings:[]}),d.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(c.type==="image"&&c.insertOnCanvasDirectly)??!1}),this.setState(u=>{let h={snapLines:u.snapLines.length?[]:u.snapLines,originSnapOffset:null,activeEmbeddable:null};return d.type==="freedraw"&&this.store.shouldCaptureIncrement(),d.type!=="selection"?{...u,activeTool:d,selectedElementIds:an({},u),selectedGroupIds:an({},u),editingGroupId:null,multiElement:null,...h}:{...u,activeTool:d,...h}})}),Q(this,"setOpenDialog",c=>{this.setState({openDialog:c})}),Q(this,"setCursor",c=>{Un(this.interactiveCanvas,c)}),Q(this,"resetCursor",()=>{Ga(this.interactiveCanvas)}),Q(this,"isTouchScreenMultiTouchGesture",()=>on.pointers.size>=2),Q(this,"getName",()=>this.state.name||this.props.name||`${H("labels.untitled")}-${Oz()}`),Q(this,"onGestureStart",ur(c=>{c.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:an({},this.state),activeEmbeddable:null}),on.initialScale=this.state.zoom.value})),Q(this,"onGestureChange",ur(c=>{if(c.preventDefault(),this.isTouchScreenMultiTouchGesture())return;let d=on.initialScale;d&&this.setState(u=>({...lh({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Pf(d*c.scale)},u)}))})),Q(this,"onGestureEnd",ur(c=>{c.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:an(this.state.previousSelectedElementIds,this.state)}),on.initialScale=null})),Q(this,"startTextEditing",({sceneX:c,sceneY:d,insertAtParentCenter:u=!0,container:h,autoEdit:g=!0})=>{let y=!1,U=u&&this.getTextWysiwygSnappedToCenterPosition(c,d,this.state,h);h&&U&&(At(h,this.scene.getNonDeletedElementsMap())||(y=!0));let x=null,v=this.scene.getSelectedElements(this.state);v.length===1?Ve(v[0])?x=v[0]:h?x=At(v[0],this.scene.getNonDeletedElementsMap()):x=this.getTextElementAtPosition(c,d):x=this.getTextElementAtPosition(c,d);let E=(x==null?void 0:x.fontFamily)||this.state.currentItemFontFamily,k=(x==null?void 0:x.lineHeight)||g1(E),M=this.state.currentItemFontSize;if(!x&&y&&h&&!Rt(h)){let I=YJ(wn({fontSize:M,fontFamily:E}),k),R=ZJ(M,k),D=Math.max(h.height,R),_=Math.max(h.width,I);xe(h,{height:D,width:_}),c=h.x+_/2,d=h.y+D/2,U&&(U=this.getTextWysiwygSnappedToCenterPosition(c,d,this.state,h))}let S=this.getTopLayerFrameAtSceneCoords({x:c,y:d}),A=x||jo({x:U?U.elementCenterX:c,y:U?U.elementCenterY:d,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:M,fontFamily:E,textAlign:U?"center":this.state.currentItemTextAlign,verticalAlign:U?Po.MIDDLE:M4,containerId:y?h==null?void 0:h.id:void 0,groupIds:(h==null?void 0:h.groupIds)??[],lineHeight:k,angle:(h==null?void 0:h.angle)??0,frameId:S?S.id:null});if(!x&&y&&h&&xe(h,{boundElements:(h.boundElements||[]).concat({type:"text",id:A.id})}),this.setState({editingTextElement:A}),!x)if(h&&y){let I=this.scene.getElementIndex(h.id);this.scene.insertElementAtIndex(A,I+1)}else this.scene.insertElement(A);g||x||h?this.handleTextWysiwyg(A,{isExistingElement:!!x}):this.setState({newElement:A,multiElement:null})}),Q(this,"startImageCropping",c=>{this.store.shouldCaptureIncrement(),this.setState({croppingElementId:c.id})}),Q(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.shouldCaptureIncrement(),this.setState({croppingElementId:null}))}),Q(this,"handleCanvasDoubleClick",c=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;let d=this.scene.getSelectedElements(this.state),{x:u,y:h}=_n(c,this.state);if(d.length===1&&wt(d[0])){if(c[J.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==d[0].id)&&!Ge(d[0])){this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new We(d[0])});return}else if(this.state.selectedLinearElement&&Ge(d[0])){let g=We.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:u,y:h},this.state,this.scene.getNonDeletedElementsMap()),y=g?We.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,g,this.scene.getNonDeletedElementsMap()):-1;if(y&&y>-1){this.store.shouldCaptureIncrement(),We.deleteFixedSegment(d[0],y);let U=We.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:u,y:h},this.state,this.scene.getNonDeletedElementsMap()),x=U?We.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,U,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:x,value:g,added:!1}},segmentMidPointHoveredCoords:U}});return}}}if(d.length===1&&ln(d[0])){this.startImageCropping(d[0]);return}if(Ga(this.interactiveCanvas),$h(this.state).length>0){let g=this.getElementAtPosition(u,h),y=g&&lOe(g,this.state.selectedGroupIds);if(y){this.store.shouldCaptureIncrement(),this.setState(U=>({...U,...vs({editingGroupId:y,selectedElementIds:{[g.id]:!0}},this.scene.getNonDeletedElements(),U,this)}));return}}if(Ga(this.interactiveCanvas),!c[J.CTRL_OR_CMD]&&!this.state.viewModeEnabled){let g=this.getElementAtPosition(u,h);if(ya(g)){this.setState({activeEmbeddable:{element:g,state:"active"}});return}let y=this.getTextBindableContainerAtPosition(u,h);if(y&&(Ta(y)||!hl(y.backgroundColor)||Pp({x:u,y:h,element:y,shape:pf(y,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){let U=sS(y,this.state,this.scene.getNonDeletedElementsMap());u=U.x,h=U.y}this.startTextEditing({sceneX:u,sceneY:h,insertAtParentCenter:!c.altKey,container:y})}}),Q(this,"getElementLinkAtPosition",(c,d)=>{let u=this.scene.getNonDeletedElements(),h=-1;for(let g=u.length-1;g>=0;g--){let y=u[g];if(d&&y.id===d.id&&(h=g),y.link&&g>=h&&oS(y,this.scene.getNonDeletedElementsMap(),this.state,O(c.x,c.y),this.device.editor.isMobile))return y}}),Q(this,"redirectToLink",(c,d)=>{let u=cn(O(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),O(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||u>O0)return;let h=_n(this.lastPointerDownEvent,this.state),g=this.scene.getNonDeletedElementsMap(),y=oS(this.hitLinkElement,g,this.state,O(h.x,h.y),this.device.editor.isMobile),U=_n(this.lastPointerUpEvent,this.state),x=oS(this.hitLinkElement,g,this.state,O(U.x,U.y),this.device.editor.isMobile);if(y&&x){MV();let v=this.hitLinkElement.link;if(v){v=Do(v);let E;if(this.props.onLinkOpen&&(E=zJ("excalidraw-link",c.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:v},E)),!(E!=null&&E.defaultPrevented)){let k=fte(v)?"_self":"_blank",M=window.open(void 0,k);M&&(M.opener=null,M.location=v)}}}}),Q(this,"getTopLayerFrameAtSceneCoords",c=>{let d=this.scene.getNonDeletedElementsMap(),u=this.scene.getNonDeletedFramesLikes().filter(h=>rH(c,h,d));return u.length?u[u.length-1]:null}),Q(this,"handleCanvasPointerMove",c=>{var E,k,M,S,A,I;this.savePointer(c.clientX,c.clientY,this.state.cursorButton),this.lastPointerMoveEvent=c.nativeEvent,on.pointers.has(c.pointerId)&&on.pointers.set(c.pointerId,{x:c.clientX,y:c.clientY});let d=on.initialScale;if(on.pointers.size===2&&on.lastCenter&&d&&on.initialDistance){let R=OV(on.pointers),D=R.x-on.lastCenter.x,_=R.y-on.lastCenter.y;on.lastCenter=R;let P=jV(Array.from(on.pointers.values())),$=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:P/on.initialDistance,L=$?Pf(d*$):this.state.zoom.value;this.setState(B=>{let V=lh({viewportX:R.x,viewportY:R.y,nextZoom:L},B);this.translateCanvas({zoom:V.zoom,scrollX:V.scrollX+2*(D/L),scrollY:V.scrollY+2*(_/L),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else on.lastCenter=on.initialDistance=on.initialScale=null;if(T0||E5||zS||Tg(this.state))return;let u=$V($S,c.clientX-this.state.offsetLeft,c.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(u?Ga(this.interactiveCanvas):Xl(this.interactiveCanvas,this.state));let h=_n(c,this.state),{x:g,y}=h;if(!this.state.newElement&&vOe(this.state.activeTool.type)){let{originOffset:R,snapLines:D}=wOe(this.scene.getNonDeletedElements(),this,{x:g,y},c,this.scene.getNonDeletedElementsMap());this.setState(_=>{let P=m5(_.snapLines,D),$=_.originSnapOffset?m5(_.originSnapOffset,R):R;return _.snapLines===P&&_.originSnapOffset===$?null:{snapLines:P,originSnapOffset:$}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(R=>R.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){let R=We.handlePointerMove(c,g,y,this,this.scene.getNonDeletedElementsMap());R&&R!==this.state.editingLinearElement&&ai.flushSync(()=>{this.setState({editingLinearElement:R})}),(R==null?void 0:R.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(h,R.elbowed):ai.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(WJ(this.state.activeTool.type)){let{newElement:R}=this.state;hc(R,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(R,[h],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(h,!1)}if(this.state.multiElement){let{multiElement:R}=this.state,{x:D,y:_}=R,{points:P,lastCommittedPoint:$}=R,L=P[P.length-1];if(Xl(this.interactiveCanvas,this.state),L===$)cn(O(g-D,y-_),L)>=O3?xe(R,{points:[...P,O(g-D,y-_)]},!1):Un(this.interactiveCanvas,mn.POINTER);else if(P.length>2&&$&&cn(O(g-D,y-_),$)<O3)Un(this.interactiveCanvas,mn.POINTER),xe(R,{points:P.slice(0,-1)},!1);else{let[B,V]=Gr(g,y,c[J.CTRL_OR_CMD]||Ge(R)?null:this.getEffectiveGridSize()),[z,G]=(R==null?void 0:R.lastCommittedPoint)??[0,0],W=B-D-z,F=V-_-G;x2(c)&&({width:W,height:F}=gM(z+D,G+_,B,V)),Wf(P,this.state.zoom.value)&&Un(this.interactiveCanvas,mn.POINTER),xe(R,{points:[...P.slice(0,-1),O(z+W,G+F)]},!1,{isDragging:!0}),this.triggerRender(!1)}return}if(c.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;let U=this.scene.getNonDeletedElements(),x=this.scene.getSelectedElements(this.state);if(x.length===1&&!u&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,g,y),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((E=this.state.openDialog)==null?void 0:E.name)!=="elementLinkSelector"&&!(x.length===1&&Ge(x[0]))){let R=fH(U,this.state,g,y,this.state.zoom,c.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(R&&R.transformHandleType){Un(this.interactiveCanvas,uH(R));return}}}else if(x.length>1&&!u&&((k=this.state.openDialog)==null?void 0:k.name)!=="elementLinkSelector"){let R=dH(pn(x),g,y,this.state.zoom,c.pointerType,this.device);if(R){Un(this.interactiveCanvas,uH({transformHandleType:R}));return}}let v=this.getElementAtPosition(h.x,h.y);this.hitLinkElement=this.getElementLinkAtPosition(h,v),!Yl(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(Un(this.interactiveCanvas,mn.POINTER),iGe(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(MV(),v&&(v.link||Qs(v))&&this.state.selectedElementIds[v.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?Un(this.interactiveCanvas,Ve(v)?mn.TEXT:mn.CROSSHAIR):this.state.viewModeEnabled?Un(this.interactiveCanvas,mn.GRAB):((M=this.state.openDialog)==null?void 0:M.name)==="elementLinkSelector"?Un(this.interactiveCanvas,mn.AUTO):u?Un(this.interactiveCanvas,mn.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,g,y):c[J.CTRL_OR_CMD]?Un(this.interactiveCanvas,mn.AUTO):(v||this.isHittingCommonBoundingBoxOfSelectedElements(h,x))&&!(v!=null&&v.locked)&&(v&&ya(v)&&this.isIframeLikeElementCenter(v,c,g,y)?(Un(this.interactiveCanvas,mn.POINTER),this.setState({activeEmbeddable:{element:v,state:"hover"}})):(!v||!Ge(v))&&(Un(this.interactiveCanvas,mn.MOVE),((S=this.state.activeEmbeddable)==null?void 0:S.state)==="hover"&&this.setState({activeEmbeddable:null})))),((A=this.state.openDialog)==null?void 0:A.name)==="elementLinkSelector"&&v?this.setState(R=>({hoveredElementIds:m5(R.hoveredElementIds,vs({editingGroupId:R.editingGroupId,selectedElementIds:{[v.id]:!0}},this.scene.getNonDeletedElements(),R,this).selectedElementIds)})):((I=this.state.openDialog)==null?void 0:I.name)==="elementLinkSelector"&&!v&&this.setState(R=>({hoveredElementIds:m5(R.hoveredElementIds,{})})))}),Q(this,"handleEraser",(c,d,u)=>{this.eraserTrail.addPointToPath(u.x,u.y);let h=!1,g=new Set,y=this.scene.getNonDeletedElements(),U=M=>{var S;for(let A of M){if(A.locked)return;if(c.altKey?this.elementsPendingErasure.delete(A.id)&&(h=!0):this.elementsPendingErasure.has(A.id)||(h=!0,this.elementsPendingErasure.add(A.id)),h&&((S=A.groupIds)==null?void 0:S.length)){let I=A.groupIds.at(-1);if(!g.has(I)){g.add(I);let R=Fn(y,I);for(let D of R)c.altKey?this.elementsPendingErasure.delete(D.id):this.elementsPendingErasure.add(D.id)}}}},x=cn(O(d.lastCoords.x,d.lastCoords.y),O(u.x,u.y)),v=this.getElementHitThreshold(),E={...d.lastCoords},k=0;for(;k<=x;){let M=this.getElementsAtPosition(E.x,E.y);if(U(M),k===x)break;k=Math.min(k+v,x);let S=k/x,A=(1-S)*E.x+S*u.x,I=(1-S)*E.y+S*u.y;E.x=A,E.y=I}if(d.lastCoords.x=u.x,d.lastCoords.y=u.y,h){for(let M of this.scene.getNonDeletedElements())Hn(M)&&(this.elementsPendingErasure.has(M.id)||this.elementsPendingErasure.has(M.containerId))&&(c.altKey?(this.elementsPendingErasure.delete(M.id),this.elementsPendingErasure.delete(M.containerId)):(this.elementsPendingErasure.add(M.id),this.elementsPendingErasure.add(M.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.triggerRender()}}),Q(this,"handleTouchMove",c=>{k5=!0}),Q(this,"handleCanvasPointerDown",c=>{var v,E,k;let d=c.target;if(d.setPointerCapture&&d.setPointerCapture(c.pointerId),this.maybeCleanupAfterMissingPointerUp(c.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(M=>({searchMatches:M.searchMatches.map(S=>({...S,focus:!1}))})),ml.set(hoe,null)),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(c),c.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){let M=this.state.newElement;this.updateScene({...M.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(S=>S.id!==M.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:an(Object.keys(this.state.selectedElementIds).filter(S=>S!==M.id).reduce((S,A)=>(S[A]=this.state.selectedElementIds[A],S),{}),this.state)},captureUpdate:((v=this.state.openDialog)==null?void 0:v.name)==="elementLinkSelector"?pe.EVENTUALLY:pe.NEVER});return}let u=document.getSelection();if(u!=null&&u.anchorNode&&u.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(c),!this.state.penDetected&&c.pointerType==="pen"&&this.setState(M=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(c.pointerType)&&(this.device=j3(this.device,{isTouchScreen:!0})),E5||(this.lastPointerDownEvent=c,this.handleCanvasPanUsingWheelOrSpaceDrag(c)))return;if(this.setState({lastPointerDownWith:c.pointerType,cursorButton:"down"}),this.savePointer(c.clientX,c.clientY,"down"),c.button===Vd.ERASER&&this.state.activeTool.type!==oi.eraser){this.setState({activeTool:Dr(this.state,{type:oi.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(c);let M=()=>{S(),A==null||A(),Yl(this.state)&&this.setState({activeTool:Dr(this.state,{...this.state.activeTool.lastActiveTool||{type:oi.selection},lastActiveToolBeforeEraser:null})})},S=tr(window,"pointerup",M,{once:!0}),A;requestAnimationFrame(()=>{A=this.missingPointerEventCleanupEmitter.once(M)})});return}if(c.button!==Vd.MAIN&&c.button!==Vd.TOUCH&&c.button!==Vd.ERASER||on.pointers.size>1)return;let h=this.initialPointerDownState(c);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(c,h)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(c),this.handleSelectionOnPointerDown(c,h))||!(!this.state.penMode||c.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(c,h);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(c,this.state.activeTool.type,h);else if(this.state.activeTool.type==="image"){Un(this.interactiveCanvas,mn.CROSSHAIR);let M=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!M)return;this.setState({newElement:M,pendingImageElementId:null,multiElement:null});let{x:S,y:A}=_n(c,this.state),I=this.getTopLayerFrameAtSceneCoords({x:S,y:A});xe(M,{x:S,y:A,frameId:I?I.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(c,this.state.activeTool.type,h):this.state.activeTool.type==="custom"?Xl(this.interactiveCanvas,this.state):this.state.activeTool.type===oi.frame||this.state.activeTool.type===oi.magicframe?this.createFrameElementOnPointerDown(h,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(h.lastCoords.x,h.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,h);(k=(E=this.props)==null?void 0:E.onPointerDown)==null||k.call(E,this.state.activeTool,h),this.onPointerDownEmitter.trigger(this.state.activeTool,h,c),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(h.lastCoords.x,h.lastCoords.y);let g=this.onPointerMoveFromPointerDownHandler(h),y=this.onPointerUpFromPointerDownHandler(h),U=this.onKeyDownFromPointerDownHandler(h),x=this.onKeyUpFromPointerDownHandler(h);this.missingPointerEventCleanupEmitter.once(M=>y(M||c.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener("pointermove",g),window.addEventListener("pointerup",y),window.addEventListener("keydown",U),window.addEventListener("keyup",x),h.eventListeners.onMove=g,h.eventListeners.onUp=y,h.eventListeners.onKeyUp=x,h.eventListeners.onKeyDown=U)}),Q(this,"handleCanvasPointerUp",c=>{var h;this.removePointer(c),this.lastPointerUpEvent=c;let d=_n({clientX:c.clientX,clientY:c.clientY},this.state),u=c.timeStamp-(((h=this.lastPointerDownEvent)==null?void 0:h.timeStamp)??0);if(this.device.editor.isMobile&&u<300){let g=this.getElementAtPosition(d.x,d.y);if(ya(g)&&this.isIframeLikeElementCenter(g,c,d.x,d.y)){this.handleEmbeddableCenterClick(g);return}}if(this.device.isTouchScreen){let g=this.getElementAtPosition(d.x,d.y);this.hitLinkElement=this.getElementLinkAtPosition(d,g)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?u<300&&ya(this.hitLinkElement)&&!Rte(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,O(d.x,d.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(c,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})}),Q(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",c=>{c.pointerType==="touch"&&(k5=!1,Fd?k5=!0:Fd=window.setTimeout(()=>{Fd=0,k5||this.handleCanvasContextMenu(c)},nMe))}),Q(this,"resetContextMenuTimer",()=>{clearTimeout(Fd),Fd=0,k5=!1}),Q(this,"maybeCleanupAfterMissingPointerUp",c=>{I0==null||I0(),this.missingPointerEventCleanupEmitter.trigger(c).clear()}),Q(this,"handleCanvasPanUsingWheelOrSpaceDrag",c=>{if(!(on.pointers.size<=1&&(c.button===Vd.WHEEL||c.button===Vd.MAIN&&T0||Tg(this.state)||this.state.viewModeEnabled)))return!1;E5=!0,this.focusContainer(),this.state.editingTextElement||c.preventDefault();let d=!1,u=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);Un(this.interactiveCanvas,mn.GRABBING);let{clientX:h,clientY:g}=c,y=LS(x=>{let v=h-x.clientX,E=g-x.clientY;if(h=x.clientX,g=x.clientY,u&&!d&&(Math.abs(v)>1||Math.abs(E)>1)){d=!0;let k=S=>{document.body.removeEventListener("paste",k),S.stopPropagation()},M=()=>{setTimeout(()=>{document.body.removeEventListener("paste",k),window.removeEventListener("pointerup",M)},100)};document.body.addEventListener("paste",k),window.addEventListener("pointerup",M)}this.translateCanvas({scrollX:this.state.scrollX-v/this.state.zoom.value,scrollY:this.state.scrollY-E/this.state.zoom.value})}),U=ur(I0=()=>{I0=null,E5=!1,T0||(this.state.viewModeEnabled?Un(this.interactiveCanvas,mn.GRAB):Xl(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(c.clientX,c.clientY,"up"),window.removeEventListener("pointermove",y),window.removeEventListener("pointerup",U),window.removeEventListener("blur",U),y.flush()});return window.addEventListener("blur",U),window.addEventListener("pointermove",y,{passive:!0}),window.addEventListener("pointerup",U),!0}),Q(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}),Q(this,"handleSelectionOnPointerDown",(c,d)=>{var u;if(this.state.activeTool.type==="selection"){let h=this.scene.getNonDeletedElements(),g=this.scene.getNonDeletedElementsMap(),y=this.scene.getSelectedElements(this.state);if(y.length===1&&!this.state.editingLinearElement&&!Ge(y[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){let U=fH(h,this.state,d.origin.x,d.origin.y,this.state.zoom,c.pointerType,this.scene.getNonDeletedElementsMap(),this.device);U!=null&&(U.transformHandleType==="rotation"?(this.setState({resizingElement:U.element}),d.resize.handleType=U.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:U.element}),d.resize.handleType=U.transformHandleType))}else y.length>1&&(d.resize.handleType=dH(pn(y),d.origin.x,d.origin.y,this.state.zoom,c.pointerType,this.device));if(d.resize.handleType)d.resize.isResizing=!0,d.resize.offset=ul(wBe(d.resize.handleType,y,g,d.origin.x,d.origin.y)),y.length===1&&wt(y[0])&&y[0].points.length===2&&(d.resize.arrowDirection=vBe(d.resize.handleType,y[0]));else{if(this.state.selectedLinearElement){let v=this.state.editingLinearElement||this.state.selectedLinearElement,E=We.handlePointerDown(c,this,this.store,d.origin,v,this.scene);if(E.hitElement&&(d.hit.element=E.hitElement),E.linearElementEditor&&(this.setState({selectedLinearElement:E.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:E.linearElementEditor})),E.didAddPoint)return!0}if(d.hit.element=d.hit.element??this.getElementAtPosition(d.origin.x,d.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(d.origin,d.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((u=d.hit.element)==null?void 0:u.id)!==this.state.croppingElementId&&this.finishImageCropping(),d.hit.element&&this.getElementLinkAtPosition({x:d.origin.x,y:d.origin.y},d.hit.element))return!1;d.hit.allHitElements=this.getElementsAtPosition(d.origin.x,d.origin.y);let U=d.hit.element,x=d.hit.allHitElements.some(v=>this.isASelectedElement(v));if((U===null||!x)&&!c.shiftKey&&!d.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(U),this.state.editingLinearElement)this.setState({selectedElementIds:an({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(U!=null){if(c[J.CTRL_OR_CMD])return this.state.selectedElementIds[U.id]||(d.hit.wasAddedToSelection=!0),this.setState(v=>({...aOe(v,U),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[U.id]||(this.state.editingGroupId&&!Ab(U,this.state.editingGroupId)&&this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!x&&!d.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(v=>{var M;let E={...v.selectedElementIds,[U.id]:!0},k=[];if(Object.keys(v.selectedElementIds).forEach(S=>{let A=this.scene.getElement(S);A&&k.push(A)}),ht(U))Rc(k,U.id).forEach(S=>{delete E[S.id]});else if(U.frameId)E[U.frameId]&&delete E[U.id];else{let S=U.groupIds,A=new Set(S.flatMap(I=>Fn(this.scene.getNonDeletedElements(),I)).filter(I=>ht(I)).map(I=>I.id));A.size>0&&k.forEach(I=>{I.frameId&&A.has(I.frameId)&&(delete E[I.id],I.groupIds.flatMap(R=>Fn(this.scene.getNonDeletedElements(),R)).forEach(R=>{delete E[R.id]}))})}return((M=v.openDialog)==null?void 0:M.name)==="elementLinkSelector"&&(U.groupIds.some(S=>v.selectedGroupIds[S])||(E={[U.id]:!0})),{...vs({editingGroupId:v.editingGroupId,selectedElementIds:E},this.scene.getNonDeletedElements(),v,this),showHyperlinkPopup:U.link||Qs(U)?"info":!1}}),d.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1}),Q(this,"handleTextOnPointerDown",(c,d)=>{if(this.state.editingTextElement)return;let u=d.origin.x,h=d.origin.y,g=this.getElementAtPosition(u,h,{includeBoundTextElement:!0}),y=this.getTextBindableContainerAtPosition(u,h);Ta(g)&&(y=g,u=g.x+g.width/2,h=g.y+g.height/2),this.startTextEditing({sceneX:u,sceneY:h,insertAtParentCenter:!c.altKey,container:y,autoEdit:!1}),Ga(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:Dr(this.state,{type:"selection"})})}),Q(this,"handleFreeDrawElementOnPointerDown",(c,d,u)=>{let[h,g]=Gr(u.origin.x,u.origin.y,null),y=this.getTopLayerFrameAtSceneCoords({x:h,y:g}),U=c.pressure===.5,x=FOe({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:U,locked:!1,frameId:y?y.id:null,points:[O(0,0)],pressures:U?[]:[c.pressure]});this.scene.insertElement(x),this.setState(E=>{let k={...E.selectedElementIds};return delete k[x.id],{selectedElementIds:an(k,E)}});let v=pl(u.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:x,startBoundElement:v,suggestedBindings:[]})}),Q(this,"insertIframeElement",({sceneX:c,sceneY:d,width:u,height:h})=>{var x;let[g,y]=Gr(c,d,(x=this.lastPointerDownEvent)!=null&&x[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=OOe({type:"iframe",x:g,y,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:u,height:h});return this.scene.insertElement(U),U}),Q(this,"insertEmbeddableElement",({sceneX:c,sceneY:d,link:u})=>{var x;let[h,g]=Gr(c,d,(x=this.lastPointerDownEvent)!=null&&x[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=Yp(u);if(!y)return;y.error instanceof URIError&&this.setToast({message:H("toast.unrecognizedLinkFormat"),closable:!0});let U=T$({type:"embeddable",x:h,y:g,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:y.intrinsicSize.w,height:y.intrinsicSize.h,link:u});return this.scene.insertElement(U),U}),Q(this,"createImageElement",({sceneX:c,sceneY:d,addToFrameUnderCursor:u=!0})=>{var U;let[h,g]=Gr(c,d,(U=this.lastPointerDownEvent)!=null&&U[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=u?this.getTopLayerFrameAtSceneCoords({x:h,y:g}):null;return bte({type:"image",x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:y?y.id:null})}),Q(this,"handleLinearElementOnPointerDown",(c,d,u)=>{if(this.state.multiElement){let{multiElement:h}=this.state;if(h.type==="line"&&Wf(h.points,this.state.zoom.value)){xe(h,{lastCommittedPoint:h.points[h.points.length-1]}),this.actionManager.executeAction(Ha);return}if(Ge(h)&&h.points.length>1){xe(h,{lastCommittedPoint:h.points[h.points.length-1]}),this.actionManager.executeAction(Ha);return}let{x:g,y,lastCommittedPoint:U}=h;if(h.points.length>1&&U&&cn(O(u.origin.x-g,u.origin.y-y),U)<O3){this.actionManager.executeAction(Ha);return}this.setState(x=>({selectedElementIds:an({...x.selectedElementIds,[h.id]:!0},x)})),xe(h,{lastCommittedPoint:h.points[h.points.length-1]}),Un(this.interactiveCanvas,mn.POINTER)}else{let[h,g]=Gr(u.origin.x,u.origin.y,c[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=this.getTopLayerFrameAtSceneCoords({x:h,y:g}),{currentItemStartArrowhead:U,currentItemEndArrowhead:x}=this.state,[v,E]=d==="arrow"?[U,x]:[null,null],k=d==="arrow"?kN({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===Ui.round?{type:qr.PROPORTIONAL_RADIUS}:null,startArrowhead:v,endArrowhead:E,locked:!1,frameId:y?y.id:null,elbowed:this.state.currentItemArrowType===Ui.elbow,fixedSegments:this.state.currentItemArrowType===Ui.elbow?[]:null}):Hh({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:qr.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:y?y.id:null});this.setState(S=>{let A={...S.selectedElementIds};return delete A[k.id],{selectedElementIds:an(A,S)}}),xe(k,{points:[...k.points,O(0,0)]});let M=pl(u.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,Ge(k),Ge(k));this.scene.insertElement(k),this.setState({newElement:k,startBoundElement:M,suggestedBindings:[]})}}),Q(this,"createGenericElementOnPointerDown",(c,d)=>{var x;let[u,h]=Gr(d.origin.x,d.origin.y,(x=this.lastPointerDownEvent)!=null&&x[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g=this.getTopLayerFrameAtSceneCoords({x:u,y:h}),y={x:u,y:h,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(c),locked:!1,frameId:g?g.id:null},U;c==="embeddable"?U=T$({type:"embeddable",...y}):U=Ic({type:c,...y}),U.type==="selection"?this.setState({selectionElement:U}):(this.scene.insertElement(U),this.setState({multiElement:null,newElement:U}))}),Q(this,"createFrameElementOnPointerDown",(c,d)=>{var U;let[u,h]=Gr(c.origin.x,c.origin.y,(U=this.lastPointerDownEvent)!=null&&U[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g={x:u,y:h,opacity:this.state.currentItemOpacity,locked:!1,...ir},y=d===oi.magicframe?cM(g):EN(g);this.scene.insertElement(y),this.setState({multiElement:null,newElement:y})}),Q(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()}),Q(this,"eraseElements",()=>{let c=!1,d=this.scene.getElementsIncludingDeleted().map(u=>this.elementsPendingErasure.has(u.id)||u.frameId&&this.elementsPendingErasure.has(u.frameId)||Hn(u)&&this.elementsPendingErasure.has(u.containerId)?(c=!0,Ct(u,{isDeleted:!0})):u);this.elementsPendingErasure=new Set,c&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(d))}),Q(this,"initializeImage",async({imageFile:c,imageElement:d,showCursorImagePreview:u=!1})=>{var x,v,E,k,M;if(!Vh(c))throw new Error(H("errors.unsupportedFileType"));let h=c.type;if(Un(this.interactiveCanvas,"wait"),h===ft.svg)try{c=gH(F$(await c.text()),c.name)}catch(S){throw console.warn(S),new Error(H("errors.svgImageInsertError"))}let g=await(((v=(x=this.props).generateIdForFile)==null?void 0:v.call(x,c))||DBe(c));if(!g)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(H("errors.imageInsertError"));if(!((E=this.files[g])!=null&&E.dataURL)){try{c=await UM(c,{maxWidthOrHeight:cMe})}catch(S){console.error("Error trying to resizing image file on insertion",S)}if(c.size>Nz)throw new Error(H("errors.fileTooBig",{maxSize:`${Math.trunc(Nz/1024/1024)}MB`}))}if(u){let S=(k=this.files[g])==null?void 0:k.dataURL,A=S&&OBe(S);this.setImagePreviewCursor(A||c)}let y=((M=this.files[g])==null?void 0:M.dataURL)||await mH(c),U=xe(d,{fileId:g},!1);return new Promise(async(S,A)=>{var I;try{this.addMissingFiles([{mimeType:h,id:g,dataURL:y,created:Date.now(),lastRetrieved:Date.now()}]);let R=this.imageCache.get(g);R||(this.addNewImagesToImageCache(),await this.updateImageCache([U])),(R==null?void 0:R.image)instanceof Promise&&await R.image,this.state.pendingImageElementId!==U.id&&((I=this.state.newElement)==null?void 0:I.id)!==U.id&&this.initializeImageDimensions(U,!0),S(U)}catch(R){console.error(R),A(new Error(H("errors.imageInsertError")))}finally{u||Ga(this.interactiveCanvas)}})}),Q(this,"insertImageElement",async(c,d,u)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:H("errors.imageToolNotSupported")});return}this.scene.insertElement(c);try{return await this.initializeImage({imageFile:d,imageElement:c,showCursorImagePreview:u})}catch(h){return xe(c,{isDeleted:!0}),this.actionManager.executeAction(Ha),this.setState({errorMessage:h.message||H("errors.imageInsertError")}),null}}),Q(this,"setImagePreviewCursor",async c=>{let d;try{d=await UM(c,{maxWidthOrHeight:96})}catch(h){throw h.cause==="UNSUPPORTED"?new Error(H("errors.unsupportedFileType")):h}let u=await mH(d);if(c.type===ft.svg){let h=await Ate(u),g=Math.min(h.height,96),y=g*(h.width/h.height);y>96&&(y=96,g=y*(h.height/h.width));let U=document.createElement("canvas");U.height=g,U.width=y,U.getContext("2d").drawImage(h,0,0,y,g),u=U.toDataURL(ft.svg)}this.state.pendingImageElementId&&Un(this.interactiveCanvas,`url(${u}) 4 4, auto`)}),Q(this,"onImageAction",async({insertOnCanvasDirectly:c})=>{try{let d=this.state.width/2+this.state.offsetLeft,u=this.state.height/2+this.state.offsetTop,{x:h,y:g}=_n({clientX:d,clientY:u},this.state),y=await CN({description:"Image",extensions:Object.keys(Mg)}),U=this.createImageElement({sceneX:h,sceneY:g,addToFrameUnderCursor:!1});c?(this.insertImageElement(U,y),this.initializeImageDimensions(U),this.setState({selectedElementIds:an({[U.id]:!0},this.state)},()=>{this.actionManager.executeAction(Ha)})):this.setState({pendingImageElementId:U.id},()=>{this.insertImageElement(U,y,!0)})}catch(d){d.name!=="AbortError"?console.error(d):console.warn(d),this.setState({pendingImageElementId:null,newElement:null,activeTool:Dr(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Ha)})}}),Q(this,"initializeImageDimensions",(c,d=!1)=>{var h;let u=ga(c)&&((h=this.imageCache.get(c.fileId))==null?void 0:h.image);if(!u||u instanceof Promise){if(c.width<O0/this.state.zoom.value&&c.height<O0/this.state.zoom.value){let g=100/this.state.zoom.value;xe(c,{x:c.x-g/2,y:c.y-g/2,width:g,height:g})}return}if(d||c.width<O0/this.state.zoom.value&&c.height<O0/this.state.zoom.value){let g=Math.max(this.state.height-120,160),y=Math.min(g,Math.floor(this.state.height*.5)/this.state.zoom.value),U=Math.min(u.naturalHeight,y),x=U*(u.naturalWidth/u.naturalHeight),v=c.x+c.width/2-x/2,E=c.y+c.height/2-U/2;xe(c,{x:v,y:E,width:x,height:U,crop:null})}}),Q(this,"updateImageCache",async(c,d=this.files)=>{let{updatedFiles:u,erroredFiles:h}=await Mte({imageCache:this.imageCache,fileIds:c.map(g=>g.fileId),files:d});if(u.size||h.size)for(let g of c)u.has(g.fileId)&&or.delete(g);return h.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(g=>ga(g)&&h.has(g.fileId)?Ct(g,{status:"error"}):g)),{updatedFiles:u,erroredFiles:h}}),Q(this,"addNewImagesToImageCache",async(c=Tte(this.scene.getNonDeletedElements()),d=this.files)=>{let u=c.filter(h=>!h.isDeleted&&!this.imageCache.has(h.fileId));if(u.length){let{updatedFiles:h}=await this.updateImageCache(u,d);h.size&&this.scene.triggerUpdate()}}),Q(this,"scheduleImageRefresh",Uy(()=>{this.addNewImagesToImageCache()},eMe)),Q(this,"updateBindingEnabledOnPointerMove",c=>{let d=LLe(c);this.state.isBindingEnabled!==d&&this.setState({isBindingEnabled:d})}),Q(this,"maybeSuggestBindingAtCursor",(c,d)=>{let u=pl(c,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,d);this.setState({suggestedBindings:u!=null?[u]:[]})}),Q(this,"maybeSuggestBindingsForLinearElementAtCoords",(c,d,u)=>{if(!d.length)return;let h=d.reduce((g,y)=>{let U=pl(y,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,Ge(c),Ge(c));return U!=null&&!Yee(c,u==null?void 0:u.id,U)&&g.push(U),g},[]);this.setState({suggestedBindings:h})}),Q(this,"handleInteractiveCanvasRef",c=>{var d,u;c!==null?(this.interactiveCanvas=c,this.interactiveCanvas.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener("touchend",this.onTouchEnd)):((d=this.interactiveCanvas)==null||d.removeEventListener("touchstart",this.onTouchStart),(u=this.interactiveCanvas)==null||u.removeEventListener("touchend",this.onTouchEnd))}),Q(this,"handleAppOnDrop",async c=>{var U,x,v,E;let{file:d,fileHandle:u}=await FBe(c),{x:h,y:g}=_n(c,this.state);try{if(Vh(d)&&this.isToolSupported("image")){if((d==null?void 0:d.type)===ft.png||(d==null?void 0:d.type)===ft.svg)try{let M=await pne(d,this.state,this.scene.getElementsIncludingDeleted(),u);this.syncActionResult({...M,appState:{...M.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:pe.IMMEDIATELY});return}catch(M){if(M.name!=="EncodingError")throw new Error(H("alerts.couldNotLoadInvalidFile"))}let k=this.createImageElement({sceneX:h,sceneY:g});this.insertImageElement(k,d),this.initializeImageDimensions(k),this.setState({selectedElementIds:an({[k.id]:!0},this.state)});return}}catch(k){return this.setState({isLoading:!1,errorMessage:k.message})}let y=c.dataTransfer.getData(ft.excalidrawlib);if(y&&typeof y=="string"){try{let k=mne(y);this.addElementsFromPasteOrLibrary({elements:gse(k),position:c,files:null})}catch(k){this.setState({errorMessage:k.message})}return}if(d&&await this.loadFileToCanvas(d,u),(x=(U=c.dataTransfer)==null?void 0:U.types)==null?void 0:x.includes("text/plain")){let k=(v=c.dataTransfer)==null?void 0:v.getData("text");if(k&&G3(k,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(k)||((E=Yp(k))==null?void 0:E.type)==="video")){let M=this.insertEmbeddableElement({sceneX:h,sceneY:g,link:Do(k)});M&&this.setState({selectedElementIds:{[M.id]:!0}})}}}),Q(this,"loadFileToCanvas",async(c,d)=>{c=await iR(c);try{let u=this.scene.getElementsIncludingDeleted(),h;try{h=await hne(c,this.state,u,d)}catch(g){let y=g instanceof sh;if(y&&g.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:H("errors.imageToolNotSupported")});return}let U=H(y?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:U})}if(!h)return;h.type===ft.excalidraw?(Yf(u.concat(h.data.elements)),this.store.updateSnapshot(mt(u),this.state),this.setState({isLoading:!0}),this.syncActionResult({...h.data,appState:{...h.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:pe.IMMEDIATELY})):h.type===ft.excalidrawlib&&await this.library.updateLibrary({libraryItems:c,merge:!0,openLibraryMenu:!0}).catch(g=>{console.error(g),this.setState({errorMessage:H("errors.importLibraryError")})})}catch(u){this.setState({isLoading:!1,errorMessage:u.message})}}),Q(this,"handleCanvasContextMenu",c=>{if(c.preventDefault(),("pointerType"in c.nativeEvent&&c.nativeEvent.pointerType==="touch"||"pointerType"in c.nativeEvent&&c.nativeEvent.pointerType==="pen"&&c.button!==Vd.SECONDARY)&&this.state.activeTool.type!=="selection")return;let{x:d,y:u}=_n(c,this.state),h=this.getElementAtPosition(d,u,{preferSelected:!0,includeLockedElements:!0}),g=this.scene.getSelectedElements(this.state),y=this.isHittingCommonBoundingBoxOfSelectedElements({x:d,y:u},g),U=h||y?"element":"canvas",x=this.excalidrawContainerRef.current,{top:v,left:E}=x.getBoundingClientRect(),k=c.clientX-E,M=c.clientY-v;Pn("contextMenu","openContextMenu",U),this.setState({...h&&!this.state.selectedElementIds[h.id]?{...this.state,...vs({editingGroupId:this.state.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:wt(h)?new We(h):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:M,left:k,items:this.getContextMenuItems(U)}})})}),Q(this,"maybeDragNewGenericElement",(c,d,u=!0)=>{var S,A,I;let h=this.state.selectionElement,g=c.lastCoords;if(h&&this.state.activeTool.type!=="eraser"){pH({newElement:h,elementType:this.state.activeTool.type,originX:c.origin.x,originY:c.origin.y,x:g.x,y:g.y,width:rs(c.origin.x,g.x),height:rs(c.origin.y,g.y),shouldMaintainAspectRatio:g5(d),shouldResizeFromCenter:nS(d),zoom:this.state.zoom.value,informMutation:u});return}let y=this.state.newElement;if(!y)return;let[U,x]=Gr(g.x,g.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),v=ga(y)&&((S=this.imageCache.get(y.fileId))==null?void 0:S.image),E=v&&!(v instanceof Promise)?v.width/v.height:null;this.maybeCacheReferenceSnapPoints(d,[y]);let{snapOffset:k,snapLines:M}=xOe(y,this,d,{x:c.originInGrid.x+(((A=this.state.originSnapOffset)==null?void 0:A.x)??0),y:c.originInGrid.y+(((I=this.state.originSnapOffset)==null?void 0:I.y)??0)},{x:U-c.originInGrid.x,y:x-c.originInGrid.y},this.scene.getNonDeletedElementsMap());U+=k.x,x+=k.y,this.setState({snapLines:M}),pH({newElement:y,elementType:this.state.activeTool.type,originX:c.originInGrid.x,originY:c.originInGrid.y,x:U,y:x,width:rs(c.originInGrid.x,U),height:rs(c.originInGrid.y,x),shouldMaintainAspectRatio:ln(y)?!g5(d):g5(d),shouldResizeFromCenter:nS(d),zoom:this.state.zoom.value,widthAspectRatio:E,originOffset:this.state.originSnapOffset,informMutation:u}),this.setState({newElement:y}),(this.state.activeTool.type===oi.frame||this.state.activeTool.type===oi.magicframe)&&this.setState({elementsToHighlight:K3(this.scene.getNonDeletedElements(),y,this.state,this.scene.getNonDeletedElementsMap())})}),Q(this,"maybeHandleCrop",(c,d)=>{var x;if(!this.state.croppingElementId)return!1;let u=c.resize.handleType,h=c.lastCoords,[g,y]=Gr(h.x-c.resize.offset.x,h.y-c.resize.offset.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(u&&U&&ln(U)){let v=c.originalElements.get(U.id),E=ga(U)&&((x=this.imageCache.get(U.fileId))==null?void 0:x.image);if(v&&ln(v)&&E&&!(E instanceof Promise)){let[k,M]=Gr(h.x,h.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),S={x:k-c.originInGrid.x,y:M-c.originInGrid.y};this.maybeCacheReferenceSnapPoints(d,[U]);let{snapOffset:A,snapLines:I}=A$([U],[v],this,d,S,u);xe(U,sLe(U,u,E.naturalWidth,E.naturalHeight,g+A.x,y+A.y,d.shiftKey?v.width/v.height:void 0)),co(U,this.scene.getNonDeletedElementsMap(),{newSize:{width:U.width,height:U.height}}),this.setState({isCropping:u&&u!=="rotation",snapLines:I})}return!0}return!1}),Q(this,"maybeHandleResize",(c,d)=>{let u=this.scene.getSelectedElements(this.state),h=u.filter(E=>ht(E)),g=c.resize.handleType;if(h.length>0&&g==="rotation"||u.length===1&&Ge(u[0])||this.state.croppingElementId)return!1;this.setState({isResizing:g&&g!=="rotation",isRotating:g==="rotation",activeEmbeddable:null});let y=c.lastCoords,[U,x]=Gr(y.x-c.resize.offset.x,y.y-c.resize.offset.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),v=new Map;if(h.forEach(E=>{Rc(this.scene.getNonDeletedElements(),E.id).forEach(k=>{v.set(E.id+k.id,{x:k.x-E.x,y:k.y-E.y})})}),!this.state.selectedElementsAreBeingDragged){let[E,k]=Gr(y.x,y.y,d[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),M={x:E-c.originInGrid.x,y:k-c.originInGrid.y},S=[...c.originalElements.values()];this.maybeCacheReferenceSnapPoints(d,u);let{snapOffset:A,snapLines:I}=A$(u,Nt(S,this.state),this,d,M,g);U+=A.x,x+=A.y,this.setState({snapLines:I})}if(bBe(c.originalElements,g,u,this.scene.getElementsMapIncludingDeleted(),this.scene,x2(d),nS(d),u.some(E=>ln(E))?!g5(d):g5(d),U,x,c.resize.center.x,c.resize.center.y)){let E=iS(u,this.scene.getNonDeletedElementsMap(),this.state.zoom),k=new Set;return h.forEach(M=>{K3(this.scene.getNonDeletedElements(),M,this.state,this.scene.getNonDeletedElementsMap()).forEach(S=>k.add(S))}),this.setState({elementsToHighlight:[...k],suggestedBindings:E}),!0}return!1}),Q(this,"getContextMenuItems",c=>{let d=[];return d.push(kV,EV),c==="canvas"?this.state.viewModeEnabled?[...d,CV,FM,oW,zM]:[wV,ii,kV,EV,SV,ii,zVe,lGe,ii,CV,YWe,FM,oW,zM]:(d.push(SV),this.state.viewModeEnabled?[nx,...d]:[ii,vV,nx,wV,ii,RYe,_Ye,PYe,ii,SXe,ii,...d,ii,PWe,DWe,ii,OWe,UZe,ZWe,qWe,eGe,jWe,ii,$We,ii,OVe,jVe,BVe,FVe,ii,GWe,XWe,ii,kXe,ii,hse,Tse,ii,WVe,aGe,ii,Lie])}),Q(this,"handleWheel",ur(c=>{if(!(c.target instanceof HTMLCanvasElement||c.target instanceof HTMLTextAreaElement||c.target instanceof HTMLIFrameElement)){c[J.CTRL_OR_CMD]&&c.preventDefault();return}if(c.preventDefault(),E5)return;let{deltaX:d,deltaY:u}=c;if(c.metaKey||c.ctrlKey){let h=Math.sign(u),g=vw*100,y=Math.abs(u),U=u;y>g&&(U=g*h);let x=this.state.zoom.value-U/100;x+=Math.log10(Math.max(1,this.state.zoom.value))*-h*Math.min(1,y/20),this.translateCanvas(v=>({...lh({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Pf(x)},v),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(c.shiftKey){this.translateCanvas(({zoom:h,scrollX:g})=>({scrollX:g-(u||d)/h.value}));return}this.translateCanvas(({zoom:h,scrollX:g,scrollY:y})=>({scrollX:g-d/h.value,scrollY:y-u/h.value}))})),Q(this,"savePointer",(c,d,u)=>{var U,x;if(!c||!d)return;let{x:h,y:g}=_n({clientX:c,clientY:d},this.state),y={x:h,y:g,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(x=(U=this.props).onPointerUpdate)==null||x.call(U,{pointer:y,button:u,pointersMap:on.pointers})}),Q(this,"resetShouldCacheIgnoreZoomDebounced",Ng(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300)),Q(this,"updateDOMRect",c=>{var d;if((d=this.excalidrawContainerRef)!=null&&d.current){let u=this.excalidrawContainerRef.current,{width:h,height:g,left:y,top:U}=u.getBoundingClientRect(),{width:x,height:v,offsetTop:E,offsetLeft:k}=this.state;if(h===x&&g===v&&y===k&&U===E){c&&c();return}this.setState({width:h,height:g,offsetLeft:y,offsetTop:U},()=>{c&&c()})}}),Q(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});let n=Ac(),{excalidrawAPI:r,viewModeEnabled:i=!1,zenModeEnabled:s=!1,gridModeEnabled:o=!1,objectsSnapModeEnabled:a=!1,theme:l=n.theme,name:f=`${H("labels.untitled")}-${Oz()}`}=t;if(this.state={...n,theme:l,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:i,zenModeEnabled:s,objectsSnapModeEnabled:a,gridModeEnabled:o??n.gridModeEnabled,name:f,width:window.innerWidth,height:window.innerHeight},this.id=WI(),this.library=new yGe(this),this.actionManager=new TXe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new Zf,this.canvas=document.createElement("canvas"),this.rc=i0.canvas(this.canvas),this.renderer=new hW(this.scene),this.visibleElements=[],this.store=new GOe,this.history=new LV,r){let c={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:d=>{this.actionManager.registerAction(d)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:d=>this.onChangeEmitter.on(d),onPointerDown:d=>this.onPointerDownEmitter.on(d),onPointerUp:d=>this.onPointerUpEmitter.on(d),onScrollChange:d=>this.onScrollChangeEmitter.on(d),onUserFollow:d=>this.onUserFollowEmitter.on(d)};typeof r=="function"?r(c):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new Bf(this.scene),this.history=new LV,this.actionManager.registerAll(lM),this.actionManager.registerAction(AXe(this.history,this.store)),this.actionManager.registerAction(MXe(this.history,this.store))}onWindowMessage(t){if(t.origin!=="https://player.vimeo.com"&&t.origin!=="https://www.youtube.com")return;let n=null;try{n=JSON.parse(t.data)}catch{}if(n)switch(t.origin){case"https://player.vimeo.com":if(n.method==="paused"){let r=null,i=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!i)break;for(let s of i)s.contentWindow===t.source&&(r=s.contentWindow);r==null||r.postMessage(JSON.stringify({method:n.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(n.event==="infoDelivery"&&n.info&&n.id&&typeof n.info.playerState=="number"){let r=n.id,i=n.info.playerState;Object.values(OU).includes(i)&&HS.set(r,i)}break}}cacheEmbeddableRef(t,n){n&&this.iFrameRefs.set(t.id,n)}getHTMLIFrameElement(t){return this.iFrameRefs.get(t.id)}handleEmbeddableCenterClick(t){var r,i,s,o;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===t&&((i=this.state.activeEmbeddable)==null?void 0:i.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:t,state:"active"},selectedElementIds:{[t.id]:!0},newElement:null,selectionElement:null})},100),qd(t)))return;let n=this.getHTMLIFrameElement(t);if(n!=null&&n.contentWindow){if(n.src.includes("youtube")){let a=HS.get(t.id);switch(a||(HS.set(t.id,OU.UNSTARTED),n.contentWindow.postMessage(JSON.stringify({event:"listening",id:t.id}),"*")),a){case OU.PLAYING:case OU.BUFFERING:(s=n.contentWindow)==null||s.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(o=n.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}n.src.includes("player.vimeo.com")&&n.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(t,n,r,i){var s,o;return t&&!n.altKey&&!n.shiftKey&&!n.metaKey&&!n.ctrlKey&&(((s=this.state.activeEmbeddable)==null?void 0:s.element)!==t||((o=this.state.activeEmbeddable)==null?void 0:o.state)==="hover"||!this.state.activeEmbeddable)&&r>=t.x+t.width/3&&r<=t.x+2*t.width/3&&i>=t.y+t.height/3&&i<=t.y+2*t.height/3}renderEmbeddables(){let t=this.state.zoom.value,n=this.state.width,r=this.state.height,i=this.scene.getNonDeletedElements().filter(s=>Qs(s)&&this.embedsValidationStatus.get(s.id)===!0||qd(s));return m.jsx(m.Fragment,{children:i.map(s=>{var h,g,y,U,x,v,E,k,M;let{x:o,y:a}=dl({sceneX:s.x,sceneY:s.y},this.state),l=t9(s,n,r,this.state,this.scene.getNonDeletedElementsMap()),f=this.initializedEmbeds.has(s.id);if(l&&!f&&this.initializedEmbeds.add(s.id),!(l||f))return null;let c;if(qd(s)){c=null;let S=(((h=s.customData)==null?void 0:h.generationData)??this.magicGenerations.get(s.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(S.status==="done"){let A=S.html;c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>A}}else if(S.status==="pending")c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>w2(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===Ft.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let A;S.code==="ERR_GENERATION_INTERRUPTED"?A="Generation was interrupted...":A=S.message||"Generation failed",c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>w2(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Lt.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${A}</h3>
                  `)}}}else c=Yp(dte(s.link||""));let d=((g=this.state.activeEmbeddable)==null?void 0:g.element)===s&&((y=this.state.activeEmbeddable)==null?void 0:y.state)==="active",u=((U=this.state.activeEmbeddable)==null?void 0:U.element)===s&&((x=this.state.activeEmbeddable)==null?void 0:x.state)==="hover";return m.jsx("div",{className:Ye("excalidraw__embeddable-container",{"is-hovered":u}),style:{transform:l?`translate(${o-this.state.offsetLeft}px, ${a-this.state.offsetTop}px) scale(${t})`:"none",display:l?"block":"none",opacity:Lee(s,fo(s,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((v=this.state.openDialog)==null?void 0:v.name)==="elementLinkSelector"?NJ:1),"--embeddable-radius":`${yl(Math.min(s.width,s.height),s)}px`},children:m.jsxs("div",{className:"excalidraw__embeddable-container__inner",style:{width:l?`${s.width}px`:0,height:l?`${s.height}px`:0,transform:l?`rotate(${s.angle}rad)`:"none",pointerEvents:d?bp.enabled:bp.disabled},children:[u&&m.jsx("div",{className:"excalidraw__embeddable-hint",children:H("buttons.embeddableInteractionButton")}),m.jsx("div",{className:"excalidraw__embeddable__outer",style:{padding:`${s.strokeWidth}px`},children:(Qs(s)?(k=(E=this.props).renderEmbeddable)==null?void 0:k.call(E,s,this.state):null)??m.jsx("iframe",{ref:S=>this.cacheEmbeddableRef(s,S),className:"excalidraw__embeddable",srcDoc:(c==null?void 0:c.type)==="document"?c.srcdoc(this.state.theme):void 0,src:(c==null?void 0:c.type)!=="document"?(c==null?void 0:c.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(M=c==null?void 0:c.sandbox)!=null&&M.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},s.id)})})}toggleOverscrollBehavior(t){document.documentElement.style.overscrollBehaviorX=t.type==="pointerenter"?"none":"auto"}render(){var c,d,u,h,g,y,U,x;let t=this.scene.getSelectedElements(this.state),{renderTopRightUI:n,renderCustomStats:r}=this.props,i=this.scene.getSceneNonce(),{elementsMap:s,visibleElements:o}=this.renderer.getRenderableElements({sceneNonce:i,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(c=this.state.newElement)==null?void 0:c.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=o;let a=this.scene.getNonDeletedElementsMap(),l="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",f=t[0];return m.jsx("div",{className:Ye("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":l?bp.disabled:bp.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:m.jsx(Noe.Provider,{value:this,children:m.jsx(Roe.Provider,{value:this.props,children:m.jsx($R.Provider,{value:this.excalidrawContainerValue,children:m.jsx(zR.Provider,{value:this.device,children:m.jsx(WR.Provider,{value:this.setAppState,children:m.jsx(VR.Provider,{value:this.state,children:m.jsxs(HR.Provider,{value:this.scene.getNonDeletedElements(),children:[m.jsxs(GR.Provider,{value:this.actionManager,children:[m.jsx(TYe,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:Pb().code,renderTopRightUI:n,renderCustomStats:r,showExitZenModeBtn:typeof((u=this.props)==null?void 0:u.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),m.jsx("div",{className:"excalidraw-textEditorContainer"}),m.jsx("div",{className:"excalidraw-contextMenuContainer"}),m.jsx("div",{className:"excalidraw-eye-dropper-container"}),m.jsx(cZe,{trails:[this.laserTrails,this.eraserTrail]}),t.length===1&&((h=this.state.openDialog)==null?void 0:h.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&m.jsx(rGe,{element:f,elementsMap:a,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},f.id),this.props.aiEnabled!==!1&&t.length===1&&F3(f)&&m.jsx(pW,{element:f,elementsMap:s,children:m.jsx(BS,{title:H("labels.convertToCode"),icon:dee,checked:!1,onChange:()=>this.onMagicFrameGenerate(f,"button")})}),t.length===1&&qd(f)&&((y=(g=f.customData)==null?void 0:g.generationData)==null?void 0:y.status)==="done"&&m.jsxs(pW,{element:f,elementsMap:s,children:[m.jsx(BS,{title:H("labels.copySource"),icon:dN,checked:!1,onChange:()=>this.onIframeSrcCopy(f)}),m.jsx(BS,{title:"Enter fullscreen",icon:_Ie,checked:!1,onChange:()=>{let v=this.getHTMLIFrameElement(f);if(v)try{v.requestFullscreen(),this.setState({activeEmbeddable:{element:f,state:"active"},selectedElementIds:{[f.id]:!0},newElement:null,selectionElement:null})}catch(E){console.warn(E),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&m.jsx(NYe,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&m.jsx(NXe,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:v=>{this.setState({contextMenu:null},()=>{this.focusContainer(),v==null||v()})}}),m.jsx(lZe,{canvas:this.canvas,rc:this.rc,elementsMap:s,allElementsMap:a,visibleElements:o,sceneNonce:i,selectionNonce:(U=this.state.selectionElement)==null?void 0:U.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:Mb(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&m.jsx(kZe,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:s,allElementsMap:a,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),m.jsx(sZe,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:s,visibleElements:o,allElementsMap:a,selectedElements:t,sceneNonce:i,selectionNonce:(x=this.state.selectionElement)==null?void 0:x.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&m.jsx(pZe,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(t){Object.assign(this.plugins,t)}async onMagicFrameGenerate(t,n){var o;let r=(o=this.plugins.diagramToCode)==null?void 0:o.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}let i=YN(this.scene.getNonDeletedElements(),t).filter(a=>!F3(a));if(!i.length){n==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),Pn("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}let s=this.insertIframeElement({sceneX:t.x+t.width+30,sceneY:t.y,width:t.width,height:t.height});if(s){this.updateMagicGeneration({frameElement:s,data:{status:"pending"}}),this.setState({selectedElementIds:{[s.id]:!0}}),Pn("ai","generate (start)","d2c");try{let{html:a}=await r({frame:t,children:i});if(Pn("ai","generate (success)","d2c"),!a.trim()){this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}let l=a.includes("<!DOCTYPE html>")&&a.includes("</html>")?a.slice(a.indexOf("<!DOCTYPE html>"),a.indexOf("</html>")+7):a;this.updateMagicGeneration({frameElement:s,data:{status:"done",html:l}})}catch(a){Pn("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:a.message||"Unknown error during generation"}})}}}onIframeSrcCopy(t){var n,r;((r=(n=t.customData)==null?void 0:n.generationData)==null?void 0:r.status)==="done"&&(Ty(t.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(t){let n=t??this.files;this.scene.getNonDeletedElements().forEach(r=>{ga(r)&&n[r.fileId]&&(this.imageCache.delete(r.fileId),or.delete(r))})}async componentDidMount(){var t;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,(It.MODE===oo.TEST||It.DEV)&&(this.setState.bind(this),Object.defineProperties(window.h,{state:{configurable:!0,get:()=>this.state},setState:{configurable:!0,value:(...n)=>this.setState(...n)},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history},store:{configurable:!0,value:this.store},fonts:{configurable:!0,value:this.fonts}})),this.store.onStoreIncrementEmitter.on(n=>{this.history.record(n.elementsChange,n.appStateChange)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),Vf()||(this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints()),VA&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(t=this.resizeObserver)==null||t.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),HAe()&&!JMe()&&this.setState({errorMessage:m.jsx(LYe,{})})}componentWillUnmount(){var t,n;(t=window.launchQueue)==null||t.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new Zf,this.fonts=new Bf(this.scene),this.renderer=new hW(this.scene),this.files={},this.imageCache.clear(),(n=this.resizeObserver)==null||n.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),or.destroy(),cf.destroy(),clearTimeout(Fd),Qr.clearCache(),vs.clearCache(),Fd=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(tr(document,"keydown",this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(tr(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),tr(window,"message",this.onWindowMessage,!1),tr(document,"pointerup",this.removePointer,{passive:!1}),tr(document,"copy",this.onCopy,{passive:!1}),tr(document,"keyup",this.onKeyUp,{passive:!0}),tr(document,"pointermove",this.updateCurrentCursorPosition,{passive:!1}),tr(document.fonts,"loadingdone",t=>{let n=t.fontfaces;this.fonts.onLoaded(n)},{passive:!1}),tr(document,"gesturestart",this.onGestureStart,!1),tr(document,"gesturechange",this.onGestureChange,!1),tr(document,"gestureend",this.onGestureEnd,!1),tr(window,"focus",()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(tr(document,"fullscreenchange",this.onFullscreenChange,{passive:!1}),tr(document,"paste",this.pasteFromClipboard,{passive:!1}),tr(document,"cut",this.onCut,{passive:!1}),tr(window,"resize",this.onResize,!1),tr(window,"unload",this.onUnload,!1),tr(window,"blur",this.onBlur,!1),tr(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),tr(this.excalidrawContainerRef.current,"dragover",this.disableEvent,!1),tr(this.excalidrawContainerRef.current,"drop",this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(tr(BMe(this.excalidrawContainerRef.current),"scroll",this.onScroll,{passive:!1})))}componentDidUpdate(t,n){var a,l,f,c,d,u,h,g,y,U;this.updateEmbeddables();let r=this.scene.getElementsIncludingDeleted(),i=this.scene.getElementsMapIncludingDeleted(),s=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),t.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),n.userToFollow&&!this.state.collaborators.has(n.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(n.zoom.value!==this.state.zoom.value||n.scrollX!==this.state.scrollX||n.scrollY!==this.state.scrollY)&&((l=(a=this.props)==null?void 0:a.onScrollChange)==null||l.call(a,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),n.userToFollow!==this.state.userToFollow&&(n.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:n.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Yl(this.state)&&this.setState({activeTool:Dr(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&n.theme!==this.state.theme&&pte(this.interactiveCanvas,this.state.theme),n.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),t.langCode!==this.props.langCode&&this.updateLanguage(),Yl(n)&&!Yl(this.state)&&this.eraserTrail.endPath(),t.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),n.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((f=n.openDialog)==null?void 0:f.name)==="elementLinkSelector"||((c=this.state.openDialog)==null?void 0:c.name)==="elementLinkSelector")&&((d=n.openDialog)==null?void 0:d.name)!==((u=this.state.openDialog)==null?void 0:u.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),t.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),t.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(h=this.excalidrawContainerRef.current)==null||h.classList.toggle("theme--dark",this.state.theme===Ft.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Ha)}),(g=this.state.editingTextElement)!=null&&g.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});let{multiElement:o}=n;n.activeTool!==this.state.activeTool&&o!=null&&oh(this.state)&&hc(o,!1)&&oM(o,this.state,ul(We.getPointAtIndexGlobalCoordinates(o,-1,s)),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.store.commit(i,this.state),this.state.isLoading||((U=(y=this.props).onChange)==null||U.call(y,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){v5=!1}async addElementsFromMixedContentPaste(t,{isPlainPaste:n,sceneX:r,sceneY:i}){if(!n&&t.some(s=>s.type==="imageUrl")&&this.isToolSupported("image")){let s=t.filter(d=>d.type==="imageUrl").map(d=>d.value),o=await Promise.all(s.map(async d=>{try{return{file:await BBe(d)}}catch(u){let h=u.message;return u.cause==="FETCH_ERROR"?h=H("errors.failedToFetchImage"):u.cause==="UNSUPPORTED"&&(h=H("errors.unsupportedFileType")),{errorMessage:h}}})),a=i,l=!1,f={};for(let d of o)if(d.file){let u=this.createImageElement({sceneX:r,sceneY:a}),h=await this.insertImageElement(u,d.file);h&&(l||(l=!0,a-=h.height/2),xe(h,{y:a},!1),a=u.y+u.height+25,f[u.id]=!0)}this.setState({selectedElementIds:an(f,this.state)});let c=o.find(d=>!!d.errorMessage);c&&c.errorMessage&&this.setState({errorMessage:c.errorMessage})}else{let s=t.filter(o=>o.type==="text");s.length&&this.addTextFromPaste(s.map(o=>o.value).join(`

`),n)}}addTextFromPaste(t,n=!1){let{x:r,y:i}=_n({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),s={x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:t,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:wy,verticalAlign:M4,locked:!1},o=wn({fontSize:s.fontSize,fontFamily:s.fontFamily}),a=g1(s.fontFamily),[l,,f]=NLe(this.state),c=Math.max(Math.min((f-l)*.5,800),200),d=10,u=i,h=n?[t]:t.split(`
`),g=h.reduce((y,U,x)=>{var E;let v=_g(U).trim();if(v.length){let k=this.getTopLayerFrameAtSceneCoords({x:r,y:u}),M=ds(v,o,a),S=M.width>c,A=S?I1(v,o,c):v;M=S?ds(A,o,a):M;let I=r-M.width/2,R=u-M.height/2,D=jo({...s,x:I,y:R,text:A,originalText:v,lineHeight:a,autoResize:!S,frameId:k?k.id:null});y.push(D),u+=D.height+d}else(E=h[x-1])!=null&&E.trim()&&(u+=Sy(s.fontSize,a)+d);return y},[]);g.length!==0&&(this.scene.insertElements(g),this.setState({selectedElementIds:an(Object.fromEntries(g.map(y=>[y.id,!0])),this.state)}),!n&&g.length>1&&gW===!1&&!this.device.editor.isMobile&&(this.setToast({message:H("toast.pasteAsSingleElement",{shortcut:Ue("CtrlOrCmd+Shift+V")}),duration:5e3}),gW=!0),this.store.shouldCaptureIncrement())}handleTextWysiwyg(t,{isExistingElement:n=!1}){let r=this.scene.getElementsMapIncludingDeleted(),i=(s,o)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(a=>a.id===t.id&&Ve(a)?Ct(a,{originalText:s,isDeleted:o??a.isDeleted,...gte(a,Ai(a,r),r,s)}):a)])};yZe({id:t.id,canvas:this.canvas,getViewportCoords:(s,o)=>{let{x:a,y:l}=dl({sceneX:s,sceneY:o},this.state);return[a-this.state.offsetLeft,l-this.state.offsetTop]},onChange:ur(s=>{i(s,!1),yM(t)&&co(t,this.scene.getNonDeletedElementsMap())}),onSubmit:ur(({viaKeyboard:s,nextOriginalText:o})=>{let a=!o.trim();if(i(o,a),!a&&s){let l=t.containerId?t.containerId:t.id;ai.flushSync(()=>{this.setState(f=>({selectedElementIds:an({...f.selectedElementIds,[l]:!0},f)}))})}a&&Jee(this.scene.getNonDeletedElements(),[t]),(!a||n)&&this.store.shouldCaptureIncrement(),ai.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&Xl(this.interactiveCanvas,this.state),this.focusContainer()}),element:t,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),i(t.originalText,!1)}deselectElements(){this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(t,n){let r=this.getElementAtPosition(t,n,{includeBoundTextElement:!0});return r&&Ve(r)&&!r.isDeleted?r:null}getElementAtPosition(t,n,r){let i=this.getElementsAtPosition(t,n,r==null?void 0:r.includeBoundTextElement,r==null?void 0:r.includeLockedElements);if(i.length>1){if(r!=null&&r.preferSelected){for(let o=i.length-1;o>-1;o--)if(this.state.selectedElementIds[i[o].id])return i[o]}let s=i[i.length-1];return Pp({x:t,y:n,element:s,shape:pf(s,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:ht(s)?this.frameNameBoundsCache.get(s):null})?s:i[i.length-2]}return i.length===1?i[0]:null}getElementsAtPosition(t,n,r=!1,i=!1){let s=[],o=this.scene.getNonDeletedElementsMap();return(r&&i?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(a=>(i||!a.locked)&&(r||!(Ve(a)&&a.containerId)))).filter(a=>this.hitElement(t,n,a)).filter(a=>{let l=fo(a,o);return l&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?rH({x:t,y:n},l,o):!0}).filter(a=>qd(a)?(s.push(a),!1):!0).concat(s)}getElementHitThreshold(){return ZAe/this.state.zoom.value}hitElement(t,n,r,i=!0){if(i&&this.state.selectedElementIds[r.id]&&one([r],this.state)){let s=DDe(r,this.scene.getNonDeletedElementsMap(),ln(r)?0:this.getElementHitThreshold());if($4(O(t,n),s))return!0}return Aee(t,n,Tee(r,this.scene.getNonDeletedElementsMap()))?!0:Pp({x:t,y:n,element:r,shape:pf(r,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:ht(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(t,n){let r=this.scene.getNonDeletedElements(),i=this.scene.getSelectedElements(this.state);if(i.length===1)return zh(i[0],!1)?i[0]:null;let s=null;for(let o=r.length-1;o>=0;--o){if(r[o].isDeleted)continue;let[a,l,f,c]=vt(r[o],this.scene.getNonDeletedElementsMap());if(Rt(r[o])&&Pp({x:t,y:n,element:r[o],shape:pf(r[o],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){s=r[o];break}else if(a<t&&t<f&&l<n&&n<c){s=r[o];break}}return zh(s,!1)?s:null}handleHoverSelectedLinearElement(t,n,r){let i=this.scene.getNonDeletedElementsMap(),s=We.getElement(t.elementId,i);if(s)if(this.state.selectedLinearElement){let o=-1,a=null;Pp({x:n,y:r,element:s,shape:pf(s,this.scene.getNonDeletedElementsMap())})?(o=We.getPointIndexUnderCursor(s,i,this.state.zoom,n,r),a=We.getSegmentMidpointHitCoords(t,{x:n,y:r},this.state,this.scene.getNonDeletedElementsMap()),(Ge(s)?o===0||o===s.points.length-1:o>=0)||a?Un(this.interactiveCanvas,mn.POINTER):this.hitElement(n,r,s)&&Un(this.interactiveCanvas,mn.MOVE)):this.hitElement(n,r,s)&&(!Ge(s)||!(s.startBinding||s.endBinding))&&Un(this.interactiveCanvas,mn.MOVE),this.state.selectedLinearElement.hoverPointIndex!==o&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:o}}),We.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,a)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:a}})}else Un(this.interactiveCanvas,mn.AUTO)}updateGestureOnPointerDown(t){on.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY}),on.pointers.size===2&&(on.lastCenter=OV(on.pointers),on.initialScale=this.state.zoom.value,on.initialDistance=jV(Array.from(on.pointers.values())))}initialPointerDownState(t){let n=_n(t,this.state),r=this.scene.getSelectedElements(this.state),[i,s,o,a]=pn(r),l=r.findIndex(Ge)===0;return{origin:n,withCmdOrCtrl:t[J.CTRL_OR_CMD],originInGrid:ul(Gr(n.x,n.y,t[J.CTRL_OR_CMD]||l?null:this.getEffectiveGridSize())),scrollbars:$V($S,t.clientX-this.state.offsetLeft,t.clientY-this.state.offsetTop),lastCoords:{...n},originalElements:this.scene.getNonDeletedElements().reduce((f,c)=>(f.set(c.id,N1(c)),f),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(o+i)/2,y:(a+s)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(n,r)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(t,n){if(!(n.scrollbars.isOverEither&&!this.state.multiElement))return!1;zS=!0,n.lastCoords.x=t.clientX,n.lastCoords.y=t.clientY;let r=LS(s=>{s.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(s,n)}),i=ur(()=>{I0=null,zS=!1,Xl(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),r.flush()});return I0=i,window.addEventListener("pointermove",r),window.addEventListener("pointerup",i),!0}isASelectedElement(t){return t!=null&&this.state.selectedElementIds[t.id]}isHittingCommonBoundingBoxOfSelectedElements(t,n){if(n.length<2)return!1;let r=this.getElementHitThreshold(),[i,s,o,a]=pn(n);return t.x>i-r&&t.x<o+r&&t.y>s-r&&t.y<a+r}getCurrentItemRoundness(t){return this.state.currentItemRoundness==="round"?{type:n6(t)?qr.ADAPTIVE_RADIUS:qr.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(t,n,r=!1){Gu({event:t,app:this,selectedElements:n})&&(r||!cf.getReferenceSnapPoints())&&cf.setReferenceSnapPoints(gOe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(t,n,r=!1){Gu({event:t,app:this,selectedElements:n})&&(r||!cf.getVisibleGaps())&&cf.setVisibleGaps(mOe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(t){return ur(n=>{this.maybeHandleResize(t,n)||this.maybeDragNewGenericElement(t,n)})}onKeyUpFromPointerDownHandler(t){return ur(n=>{n.key===J.ALT&&n.preventDefault(),!this.maybeHandleResize(t,n)&&this.maybeDragNewGenericElement(t,n)})}onPointerMoveFromPointerDownHandler(t){return LS(n=>{var c,d,u,h,g,y;if(((c=this.state.openDialog)==null?void 0:c.name)==="elementLinkSelector")return;let r=_n(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){let[U,x]=Gr(r.x,r.y,n[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),v=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(v<0){let k=We.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:U,y:x},this.state,this.scene.getNonDeletedElementsMap());v=k?We.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,k,this.scene.getNonDeletedElementsMap()):-1}let E=We.moveFixedSegment(this.state.selectedLinearElement,v,U,x,this.scene.getNonDeletedElementsMap());ai.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:E.segmentMidPointHoveredCoords,pointerDownState:E.pointerDownState}})});return}let i=this.lastPointerMoveCoords??t.origin;if(this.lastPointerMoveCoords=r,t.drag.offset===null&&(t.drag.offset=ul(TBe(this.scene.getSelectedElements(this.state),t.origin.x,t.origin.y))),!(n.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(n,t))return;if(Yl(this.state)){this.handleEraser(n,t,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);let[s,o]=Gr(r.x,r.y,n[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!t.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&cn(O(r.x,r.y),O(t.origin.x,t.origin.y))<O0)return;if(t.resize.isResizing&&(t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeHandleCrop(t,n)||this.maybeHandleResize(t,n)))return!0;let a=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){let U=this.state.editingLinearElement||this.state.selectedLinearElement;if(We.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,a)){let x=We.addMidpoint(this.state.selectedLinearElement,r,this,!n[J.CTRL_OR_CMD],a);if(!x)return;ai.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices}})});return}else if(U.pointerDownState.segmentMidpoint.value!==null&&!U.pointerDownState.segmentMidpoint.added)return;if(We.handlePointDragging(n,this,r.x,r.y,(x,v)=>{this.maybeSuggestBindingsForLinearElementAtCoords(x,v)},U,this.scene)){t.lastCoords.x=r.x,t.lastCoords.y=r.y,t.drag.hasOccurred=!0,this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging&&this.setState({editingLinearElement:{...this.state.editingLinearElement,isDragging:!0}}),this.state.selectedLinearElement.isDragging||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isDragging:!0}});return}}let l=t.hit.allHitElements.some(U=>this.isASelectedElement(U)),f=this.state.editingLinearElement&&n.shiftKey&&this.state.editingLinearElement.elementId===((d=t.hit.element)==null?void 0:d.id);if((l||t.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!f){let U=this.scene.getSelectedElements(this.state);if(U.every(k=>k.locked))return;let x=U.find(k=>ht(k)),v=this.getTopLayerFrameAtSceneCoords(r),E=v&&!x?v:null;if(this.state.frameToHighlight!==E&&ai.flushSync(()=>{this.setState({frameToHighlight:E})}),t.drag.hasOccurred=!0,U.length>0&&!t.withCmdOrCtrl&&!this.state.editingTextElement&&((u=this.state.activeEmbeddable)==null?void 0:u.state)!=="active"){let k={x:r.x-t.origin.x,y:r.y-t.origin.y},M=[...t.originalElements.values()],S=n.shiftKey;if(S){let R=Math.abs(k.x),D=Math.abs(k.y),_=S&&R<D,P=S&&R>D;_&&(k.x=0),P&&(k.y=0)}if(this.state.croppingElementId){let R=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(R&&ln(R)&&R.crop!==null&&t.hit.element===R){let D=R.crop,_=ga(R)&&((h=this.imageCache.get(R.fileId))==null?void 0:h.image);if(_&&!(_ instanceof Promise)){let P=br(Li(r.x-i.x,r.y-i.y),Math.max(this.state.zoom.value,2)),[$,L,B,V,z,G]=vt(R,a),W=tt(ue(O($,L),O(z,G),R.angle)),F=tt(ue(O(B,L),O(z,G),R.angle)),K=tt(ue(O($,V),O(z,G),R.angle)),q=as(P4(F,W)),Y=as(P4(K,W)),ae=Li(_z(P,q),_z(P,Y)),ge={...D,x:Ot(D.x-ae[0]*Math.sign(R.scale[0]),0,_.naturalWidth-D.width),y:Ot(D.y-ae[1]*Math.sign(R.scale[1]),0,_.naturalHeight-D.height)};xe(R,{crop:ge});return}}}this.maybeCacheVisibleGaps(n,U),this.maybeCacheReferenceSnapPoints(n,U);let{snapOffset:A,snapLines:I}=bOe(M,k,this,n,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:I}),this.state.editingFrame||ABe(t,U,k,this.scene,A,n[J.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(U.length!==1||!Ge(U[0]))&&this.setState({suggestedBindings:iS(U,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),n.altKey&&!t.hit.hasBeenDuplicated){t.hit.hasBeenDuplicated=!0;let R=[],D=[],_=new Map,P=new Map,$=t.hit.element,L=new Set(this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}).map(z=>z.id)),B=this.scene.getElementsIncludingDeleted();for(let z of B){let G=L.has(z.id)||z.id===($==null?void 0:$.id)&&t.hit.wasAddedToSelection;if(Math.abs(z.x)>1e7||Math.abs(z.x)>1e7||Math.abs(z.width)>1e7||Math.abs(z.height)>1e7){console.error("Alt+dragging element in scene with invalid dimensions",z.x,z.y,z.width,z.height,G);return}if(G){let W=Ute(this.state.editingGroupId,_,z);if(Math.abs(W.x)>1e7||Math.abs(W.x)>1e7||Math.abs(W.width)>1e7||Math.abs(W.height)>1e7){console.error("Alt+dragging duplicated element with invalid dimensions",W.x,W.y,W.width,W.height);return}let F=t.originalElements.get(z.id);if(Math.abs(F.x)>1e7||Math.abs(F.x)>1e7||Math.abs(F.width)>1e7||Math.abs(F.height)>1e7){console.error("Alt+dragging duplicated element with invalid dimensions",F.x,F.y,F.width,F.height);return}xe(W,{x:F.x,y:F.y}),t.originalElements.set(W.id,W),R.push(W),D.push(z),P.set(z.id,W.id)}else R.push(z)}let V=[...R,...D];V=((y=(g=this.props).onDuplicate)==null?void 0:y.call(g,V,B))||V,Nc(V,mt(D)),cte(R,D,P),Qee(V,D,P,"duplicatesServeAsOld"),Yte(V,D,P),this.scene.replaceAllElements(V),this.maybeCacheVisibleGaps(n,U,!0),this.maybeCacheReferenceSnapPoints(n,U,!0)}return}}if(this.state.selectionElement)t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeDragNewGenericElement(t,n);else{let U=this.state.newElement;if(!U)return;if(U.type==="freedraw"){let x=U.points,v=r.x-U.x,E=r.y-U.y,k=x.length>0&&x[x.length-1];if(!(k&&k[0]===v&&k[1]===E)){let M=U.simulatePressure?U.pressures:[...U.pressures,n.pressure];xe(U,{points:[...x,O(v,E)],pressures:M},!1),this.setState({newElement:U})}}else if(wt(U)){t.drag.hasOccurred=!0;let x=U.points,v=s-U.x,E=o-U.y;x2(n)&&x.length===2&&({width:v,height:E}=gM(U.x,U.y,r.x,r.y)),x.length===1?xe(U,{points:[...x,O(v,E)]},!1):(x.length===2||x.length>1&&Ge(U))&&xe(U,{points:[...x.slice(0,-1),O(v,E)]},!1,{isDragging:!0}),this.setState({newElement:U}),hc(U,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(U,[r],this.state.startBoundElement)}else t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeDragNewGenericElement(t,n,!1)}if(this.state.activeTool.type==="selection"){t.boxSelection.hasOccurred=!0;let U=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)We.handleBoxSelection(n,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let x=!0;!n.shiftKey&&Qr(U,this.state)&&(t.withCmdOrCtrl&&t.hit.element?this.setState(E=>vs({...E,selectedElementIds:{[t.hit.element.id]:!0}},this.scene.getNonDeletedElements(),E,this)):x=!1);let v=this.state.selectionElement?qN(U,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(E=>{let k={...x&&E.selectedElementIds,...v.reduce((M,S)=>(M[S.id]=!0,M),{})};return t.hit.element&&(v.length?delete k[t.hit.element.id]:k[t.hit.element.id]=!0),E=x?E:{...E,selectedGroupIds:{},editingGroupId:null},{...vs({editingGroupId:E.editingGroupId,selectedElementIds:k},this.scene.getNonDeletedElements(),E,this),selectedLinearElement:v.length===1&&wt(v[0])?new We(v[0]):null,showHyperlinkPopup:v.length===1&&(v[0].link||Qs(v[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(t,n){if(n.scrollbars.isOverHorizontal){let r=t.clientX,i=r-n.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-i/this.state.zoom.value}),n.lastCoords.x=r,!0}if(n.scrollbars.isOverVertical){let r=t.clientY,i=r-n.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-i/this.state.zoom.value}),n.lastCoords.y=r,!0}return!1}onPointerUpFromPointerDownHandler(t){return ur(n=>{var y,U,x,v,E,k,M,S,A,I,R,D;this.removePointer(n),t.eventListeners.onMove&&t.eventListeners.onMove.flush();let{newElement:r,resizingElement:i,croppingElementId:s,multiElement:o,activeTool:a,isResizing:l,isRotating:f,isCropping:c}=this.state;this.setState(_=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:m5(_.snapLines,[]),originSnapOffset:null})),this.lastPointerMoveCoords=null,cf.setReferenceSnapPoints(null),cf.setVisibleGaps(null),this.savePointer(n.clientX,n.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});let d=this.scene.getNonDeletedElementsMap();if(t.drag.hasOccurred&&((U=(y=t.hit)==null?void 0:y.element)!=null&&U.id)){let _=d.get(t.hit.element.id);kl(_)&&((x=_.boundElements)==null||x.filter(P=>P.type==="arrow").map(P=>d.get(P.id)).filter(P=>Ge(P)).forEach(P=>{P&&xe(P,{},!0)}))}if(this.state.editingLinearElement)if(!t.boxSelection.hasOccurred&&((E=(v=t.hit)==null?void 0:v.element)==null?void 0:E.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Ha);else{let _=We.handlePointerUp(n,this.state.editingLinearElement,this.state,this.scene);_!==this.state.editingLinearElement&&this.setState({editingLinearElement:_,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){let _=We.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());_&&xe(_,{},!0)}if(((M=(k=t.hit)==null?void 0:k.element)==null?void 0:M.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{let _=We.handlePointerUp(n,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:P,endBindingElement:$}=_,L=this.scene.getElement(_.elementId);hc(L)&&Pw(L,P,$,d,this.scene),_!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{..._,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener("pointermove",t.eventListeners.onMove),window.removeEventListener("pointerup",t.eventListeners.onUp),window.removeEventListener("keydown",t.eventListeners.onKeyDown),window.removeEventListener("keyup",t.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(A=(S=this.props)==null?void 0:S.onPointerUp)==null||A.call(S,a,t),this.onPointerUpEmitter.trigger(this.state.activeTool,t,n),(r==null?void 0:r.type)==="freedraw"){let _=_n(n,this.state),P=r.points,$=_.x-r.x,L=_.y-r.y;$===P[0][0]&&L===P[0][1]&&(L+=1e-4,$+=1e-4);let B=r.simulatePressure?[]:[...r.pressures,n.pressure];xe(r,{points:[...P,O($,L)],pressures:B,lastCommittedPoint:O($,L)}),this.actionManager.executeAction(Ha);return}if(ln(r)){let _=r;try{this.initializeImageDimensions(_),this.setState({selectedElementIds:an({[_.id]:!0},this.state)},()=>{this.actionManager.executeAction(Ha)})}catch(P){console.error(P),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter($=>$.id!==_.id)),this.actionManager.executeAction(Ha)}return}if(wt(r)){r.points.length>1&&this.store.shouldCaptureIncrement();let _=_n(n,this.state);!t.drag.hasOccurred&&r&&!o?(xe(r,{points:[...r.points,O(_.x-r.x,_.y-r.y)]}),this.setState({multiElement:r,newElement:r})):t.drag.hasOccurred&&!o&&(oh(this.state)&&hc(r,!1)&&oM(r,this.state,_,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.setState({suggestedBindings:[],startBoundElement:null}),a.locked?this.setState(P=>({newElement:null})):(Ga(this.interactiveCanvas),this.setState(P=>({newElement:null,activeTool:Dr(this.state,{type:"selection"}),selectedElementIds:an({...P.selectedElementIds,[r.id]:!0},P),selectedLinearElement:new We(r)}))),this.scene.triggerUpdate());return}if(Ve(r)){let _=rN(wn({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<_&&xe(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(a.type!=="selection"&&r&&$g(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(_=>_.id!==r.id),appState:{newElement:null},captureUpdate:pe.NEVER});return}if(ht(r)){let _=aBe(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(E2(this.scene.getElementsMapIncludingDeleted(),_,r,this.state))}if(r&&(xe(r,rne(r)),this.scene.triggerUpdate()),t.drag.hasOccurred){let _=_n(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){let P=this.scene.getElement(this.state.selectedLinearElement.elementId);if(P!=null&&P.frameId){let $=fo(P,d);$&&P&&(Ku(P,$,this.scene.getNonDeletedElementsMap())||(xe(P,{groupIds:[]}),Vw([P],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{let P=this.getTopLayerFrameAtSceneCoords(_),$=this.scene.getSelectedElements(this.state),L=this.scene.getElementsMapIncludingDeleted(),B=V=>{if(V.length>0){for(let z of V){let G=z.groupIds.indexOf(this.state.editingGroupId);xe(z,{groupIds:z.groupIds.slice(0,G)},!1)}L.forEach(z=>{z.groupIds.length&&Fn(L,z.groupIds[z.groupIds.length-1]).length<2&&xe(z,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(P&&!this.state.selectedElementIds[P.id]){let V=$.filter(z=>z.frameId!==P.id&&e9(z,L,this.state));this.state.editingGroupId&&B(V),L=E2(L,V,P,this.state)}else if(!P&&this.state.editingGroupId){let V=$.filter(z=>z.frameId&&!e9(z,L,this.state));B(V)}L=zg(L,this.state,this),this.scene.replaceAllElements(L)}}if(i&&this.store.shouldCaptureIncrement(),i&&$g(i)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(_=>_.id!==i.id),captureUpdate:pe.NEVER}),t.resize.isResizing){let _=zg(this.scene.getElementsIncludingDeleted(),this.state,this),P=this.scene.getSelectedElements(this.state).filter($=>ht($));for(let $ of P)_=Qte(_,K3(this.scene.getElementsIncludingDeleted(),$,this.state,d),$,this);this.scene.replaceAllElements(_)}let u=t.hit.element;((I=this.state.selectedLinearElement)==null?void 0:I.elementId)!==(u==null?void 0:u.id)&&wt(u)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new We(u)}),(!s||s&&(!u&&!c||u&&u.id!==s))&&this.finishImageCropping();let h=this.lastPointerDownEvent,g=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Yl(this.state)&&h&&g){if(this.eraserTrail.endPath(),cn(O(h.clientX,h.clientY),O(g.clientX,g.clientY))===0){let _=_n({clientX:g.clientX,clientY:g.clientY},this.state);this.getElementsAtPosition(_.x,_.y).forEach(P=>this.elementsPendingErasure.add(P.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(u&&!t.drag.hasOccurred&&!t.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!t.boxSelection.hasOccurred)&&(n.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[u.id]?rte(this.state,u)?this.setState(_=>{let P={..._.selectedElementIds};for(let $ of u.groupIds.flatMap(L=>Fn(this.scene.getNonDeletedElements(),L)))delete P[$.id];return{selectedGroupIds:{..._.selectedElementIds,...u.groupIds.map($=>({[$]:!1})).reduce(($,L)=>({...$,...L}),{})},selectedElementIds:an(P,_)}}):(R=this.state.selectedLinearElement)!=null&&R.isDragging||this.setState(_=>{let P={..._.selectedElementIds};delete P[u.id];let $=Nt(this.scene.getNonDeletedElements(),{selectedElementIds:P});return{...vs({editingGroupId:_.editingGroupId,selectedElementIds:P},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:$.length===1&&wt($[0])?new We($[0]):_.selectedLinearElement}}):u.frameId&&this.state.selectedElementIds[u.frameId]?this.setState(_=>{var $;let P={..._.selectedElementIds,[u.id]:!0};return delete P[u.frameId],((($=this.scene.getElement(u.frameId))==null?void 0:$.groupIds)??[]).flatMap(L=>Fn(this.scene.getNonDeletedElements(),L)).forEach(L=>{delete P[L.id]}),{...vs({editingGroupId:_.editingGroupId,selectedElementIds:P},this.scene.getNonDeletedElements(),_,this),showHyperlinkPopup:u.link||Qs(u)?"info":!1}}):this.setState(_=>({selectedElementIds:an({..._.selectedElementIds,[u.id]:!0},_)})):this.setState(_=>{var P;return{...vs({editingGroupId:_.editingGroupId,selectedElementIds:{[u.id]:!0}},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:wt(u)&&((P=_.selectedLinearElement)==null?void 0:P.elementId)!==u.id?new We(u):_.selectedLinearElement}})),!(u&&Ge(u))&&!t.drag.hasOccurred&&!this.state.isResizing&&(u&&YDe({x:t.origin.x,y:t.origin.y,element:u,shape:pf(u,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:ht(u)?this.frameNameBoundsCache.get(u):null},d)||!u&&t.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:an({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),Un(this.interactiveCanvas,mn.AUTO);return}if(!a.locked&&a.type!=="freedraw"&&r&&this.setState(_=>({selectedElementIds:an({..._.selectedElementIds,[r.id]:!0},_),showHyperlinkPopup:Qs(r)&&!r.link?"editor":_.showHyperlinkPopup})),(a.type!=="selection"||Qr(this.scene.getNonDeletedElements(),this.state)||!$i(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),t.drag.hasOccurred||l||f||c){let _=this.scene.getSelectedElements(this.state).filter(wt);W4(_,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,oh(this.state),((D=this.state.selectedLinearElement)==null?void 0:D.selectedPointsIndices)??[],this.state.zoom)}if(a.type==="laser"){this.laserTrails.endPath();return}!a.locked&&a.type!=="freedraw"?(Ga(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:Dr(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),u&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&on.pointers.size<=1&&ya(u)&&this.isIframeLikeElementCenter(u,this.lastPointerUpEvent,t.origin.x,t.origin.y)&&this.handleEmbeddableCenterClick(u)})}clearSelection(t){this.setState(n=>({selectedElementIds:an({},n),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:n.editingGroupId&&t!=null&&Ab(t,n.editingGroupId)?n.editingGroupId:null})),this.setState({selectedElementIds:an({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(t,n,r,i){if(i){let s=i.x+i.width/2,o=i.y+i.height/2,a=sS(i,r,this.scene.getNonDeletedElementsMap());if(a&&(s=a.x,o=a.y),Math.hypot(t-s,n-o)<XAe){let{x:l,y:f}=dl({sceneX:s,sceneY:o},r);return{viewportX:l,viewportY:f,elementCenterX:s,elementCenterY:o}}}}getCanvasOffsets(){var t;if((t=this.excalidrawContainerRef)!=null&&t.current){let n=this.excalidrawContainerRef.current,{left:r,top:i}=n.getBoundingClientRect();return{offsetLeft:r,offsetTop:i}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){let t=ER.find(n=>n.code===this.props.langCode)||o6;await _ie(t),this.setAppState({})}},CZe=()=>{(It.MODE===oo.TEST||It.DEV)&&(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene.getElementsIncludingDeleted()},set(e){var t;return(t=this.app)==null?void 0:t.scene.replaceAllElements(Yf(e))}},scene:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene}}}))};CZe();var AZe=SZe,MZe=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},TZe=MZe,IZe=()=>m.jsx("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:m.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),NZe=()=>m.jsxs("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[m.jsx("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),RZe=({style:e,size:t="small",withText:n})=>m.jsxs("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[m.jsx(IZe,{}),n&&m.jsx(NZe,{})]}),XR=({icon:e,shortcut:t,children:n})=>{let r=di();return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"welcome-screen-menu-item__icon",children:e}),m.jsx("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!r.editor.isMobile&&m.jsx("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};XR.displayName="WelcomeScreenMenuItemContent";var Oy=({onSelect:e,children:t,icon:n,shortcut:r,className:i="",...s})=>m.jsx("button",{...s,type:"button",className:`welcome-screen-menu-item ${i}`,onClick:e,children:m.jsx(XR,{icon:n,shortcut:r,children:t})});Oy.displayName="WelcomeScreenMenuItem";var Doe=({children:e,href:t,icon:n,shortcut:r,className:i="",...s})=>m.jsx("a",{...s,className:`welcome-screen-menu-item ${i}`,href:t,target:"_blank",rel:"noreferrer",children:m.jsx(XR,{icon:n,shortcut:r,children:e})});Doe.displayName="WelcomeScreenMenuItemLink";var ld=({children:e})=>{let{WelcomeScreenCenterTunnel:t}=Fo();return m.jsx(t.In,{children:m.jsx("div",{className:"welcome-screen-center",children:e||m.jsxs(m.Fragment,{children:[m.jsx(KR,{}),m.jsx(YR,{children:H("welcomeScreen.defaults.center_heading")}),m.jsxs(ZR,{children:[m.jsx(QR,{}),m.jsx(qR,{})]})]})})})};ld.displayName="Center";var KR=({children:e})=>m.jsx("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||m.jsx(RZe,{withText:!0})});KR.displayName="Logo";var YR=({children:e})=>m.jsx("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});YR.displayName="Heading";var ZR=({children:e})=>m.jsx("div",{className:"welcome-screen-menu",children:e});ZR.displayName="Menu";var qR=()=>{let e=mo();return m.jsx(Oy,{onSelect:()=>e.executeAction(NR),shortcut:"?",icon:cN,children:H("helpDialog.title")})};qR.displayName="MenuItemHelp";var QR=()=>{let e=Ds(),t=mo();return e.viewModeEnabled?null:m.jsx(Oy,{onSelect:()=>t.executeAction(BM),shortcut:ls("loadScene"),icon:fN,children:H("buttons.load")})};QR.displayName="MenuItemLoadScene";var Loe=({onSelect:e})=>{let{t}=ms();return m.jsx(Oy,{shortcut:null,onSelect:e,icon:iee,children:t("labels.liveCollaboration")})};Loe.displayName="MenuItemLiveCollaborationTrigger";ld.Logo=KR;ld.Heading=YR;ld.Menu=ZR;ld.MenuItem=Oy;ld.MenuItemLink=Doe;ld.MenuItemHelp=qR;ld.MenuItemLoadScene=QR;ld.MenuItemLiveCollaborationTrigger=Loe;var _Ze=({children:e})=>{let{WelcomeScreenMenuHintTunnel:t}=Fo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[yTe,m.jsx("div",{className:"welcome-screen-decor-hint__label",children:e||H("welcomeScreen.defaults.menuHint")})]})})};_Ze.displayName="MenuHint";var PZe=({children:e})=>{let{WelcomeScreenToolbarHintTunnel:t}=Fo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[m.jsx("div",{className:"welcome-screen-decor-hint__label",children:e||H("welcomeScreen.defaults.toolbarHint")}),xTe]})})};PZe.displayName="ToolbarHint";var DZe=({children:e})=>{let{WelcomeScreenHelpHintTunnel:t}=Fo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[m.jsx("div",{children:e||H("welcomeScreen.defaults.helpHint")}),UTe]})})};DZe.displayName="HelpHint";Uy((e,t,n)=>{if(It.DEV||It.MODE===oo.TEST||window!=null&&window.DEBUG_FRACTIONAL_INDICES){let r=Yf(e.map(i=>({...i})));SN(r,{shouldThrow:It.DEV||It.MODE===oo.TEST,includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1});TZe();var LZe=e=>{var G,W,F,K;let{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i=!1,onPointerUpdate:s,renderTopRightUI:o,langCode:a=o6.code,viewModeEnabled:l,zenModeEnabled:f,gridModeEnabled:c,libraryReturnUrl:d,theme:u,name:h,renderCustomStats:g,onPaste:y,detectScroll:U=!0,handleKeyboardGlobally:x=!1,onLibraryChange:v,autoFocus:E=!1,generateIdForFile:k,onLinkOpen:M,generateLinkForSelection:S,onPointerDown:A,onPointerUp:I,onScrollChange:R,onDuplicate:D,children:_,validateEmbeddable:P,renderEmbeddable:$,aiEnabled:L,showDeprecatedFonts:B}=e,V=(G=e.UIOptions)==null?void 0:G.canvasActions,z={...e.UIOptions,canvasActions:{...Iz.canvasActions,...V},tools:{image:((F=(W=e.UIOptions)==null?void 0:W.tools)==null?void 0:F.image)??!0}};return V!=null&&V.export&&(z.canvasActions.export.saveFileToDisk=((K=V.export)==null?void 0:K.saveFileToDisk)??Iz.canvasActions.export.saveFileToDisk),z.canvasActions.toggleTheme===null&&typeof u>"u"&&(z.canvasActions.toggleTheme=!0),T.useEffect(()=>{(async()=>await qe(()=>import("./roundRect-0PYZxl1G.js"),[]))();let q=Y=>{typeof Y.scale=="number"&&Y.scale!==1&&Y.preventDefault()};return document.addEventListener("touchmove",q,{passive:!1}),()=>{document.removeEventListener("touchmove",q)}},[]),m.jsx(kVe,{store:ml,children:m.jsx(MVe,{langCode:a,theme:u,children:m.jsx(AZe,{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i,onPointerUpdate:s,renderTopRightUI:o,langCode:a,viewModeEnabled:l,zenModeEnabled:f,gridModeEnabled:c,libraryReturnUrl:d,theme:u,name:h,renderCustomStats:g,UIOptions:z,onPaste:y,detectScroll:U,handleKeyboardGlobally:x,onLibraryChange:v,autoFocus:E,generateIdForFile:k,onLinkOpen:M,generateLinkForSelection:S,onPointerDown:A,onPointerUp:I,onScrollChange:R,onDuplicate:D,validateEmbeddable:P,renderEmbeddable:$,aiEnabled:L!==!1,showDeprecatedFonts:B,children:_})})})},OZe=(e,t)=>{if(e.children!==t.children)return!1;let{initialData:n,UIOptions:r={},...i}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(r),f=Object.keys(o);return l.length!==f.length?!1:l.every(c=>c==="canvasActions"?Object.keys(r.canvasActions).every(d=>{var u,h,g,y;return d==="export"&&((u=r==null?void 0:r.canvasActions)!=null&&u.export)&&((h=o==null?void 0:o.canvasActions)!=null&&h.export)?r.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((g=r==null?void 0:r.canvasActions)==null?void 0:g[d])===((y=o==null?void 0:o.canvasActions)==null?void 0:y[d])}):r[c]===o[c])&&$i(i,a)},Ooe=Ne.memo(LZe,OZe);Ooe.displayName="Excalidraw";const jZe=({thread:e})=>{const[t,n]=T.useState(null),[r,i]=T.useState(!0),s=T.useRef(null);T.useRef(null),T.useEffect(()=>{let a=!1;return(async()=>{try{const l=await Ir.loadThreadCanvas(e.id);a||n(l)}catch(l){console.error("Failed to load canvas:",l)}finally{a||i(!1)}})(),()=>{a=!0}},[e.id]);const o=T.useCallback((a,l)=>{r||(s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{const f={elements:a,appState:{viewBackgroundColor:l.viewBackgroundColor,zoom:l.zoom,scrollX:l.scrollX,scrollY:l.scrollY}};Ir.saveThreadCanvas(e.id,f).catch(c=>console.error("Failed to save canvas:",c))},2e3))},[e.id,r]);return T.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),r?m.jsx("div",{className:"thread-canvas-loading",children:m.jsx("div",{className:"loading-spinner"})}):m.jsx("div",{className:"thread-canvas",children:m.jsx(Ooe,{initialData:t||void 0,theme:"dark",onChange:o,UIOptions:{canvasActions:{loadScene:!1}}})})},BZe={ROOT:"#888",EVIDENCE:"#4fc3f7",REFERENCE:"#ab47bc",CONTEXT:"#ff8a65",EXAMPLE:"#66bb6a",COUNTERPOINT:"#ef5350",SYNTHESIS:"#fdd835"},FZe=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],zZe=({thread:e,onDone:t})=>{const[n,r]=T.useState([]),[i,s]=T.useState(!0),o=T.useRef(null),a=T.useRef(null),l=T.useRef(null);T.useEffect(()=>{e!=null&&e.id&&f()},[e==null?void 0:e.id]);const f=async()=>{s(!0);try{const y=e.nodes||[],U=await Ir.loadArticleSequence(e.id);if(U&&Array.isArray(U)){const x=new Set(U),v=U.map(k=>y.find(M=>M.id===k)).filter(Boolean),E=y.filter(k=>!x.has(k.id));r([...v,...E])}else r([...y])}catch(y){console.error("Failed to load sequence:",y),r([...e.nodes||[]])}finally{s(!1)}},c=T.useCallback(y=>{l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{try{const U=y.map(x=>x.id);await Ir.saveArticleSequence(e.id,U)}catch(U){console.error("Failed to save sequence:",U)}},400)},[e==null?void 0:e.id]),d=y=>{o.current=y},u=y=>{a.current=y},h=()=>{if(o.current===null||a.current===null)return;if(o.current===a.current){o.current=null,a.current=null;return}const y=[...n],[U]=y.splice(o.current,1);y.splice(a.current,0,U),r(y),c(y),o.current=null,a.current=null},g=y=>y.node_type?y.node_type:typeof y.type=="number"?FZe[y.type]||"ROOT":y.type||"ROOT";return i?m.jsx("div",{className:"se-page",children:m.jsx("div",{className:"se-loading",children:"Loading sequence..."})}):m.jsx("div",{className:"se-page",children:m.jsxs("div",{className:"se-container",children:[m.jsxs("div",{className:"se-header",children:[m.jsx("h2",{className:"se-title",children:"Reading Order"}),m.jsx("button",{className:"se-done-btn",onClick:t,children:"Done"})]}),m.jsx("p",{className:"se-hint",children:"Drag items to reorder. The article reader will follow this sequence."}),n.length===0?m.jsx("div",{className:"se-empty",children:"No nodes in this thread yet."}):m.jsx("ul",{className:"se-list",children:n.map((y,U)=>{const x=g(y),v=BZe[x]||"#888";return m.jsxs("li",{className:"se-item",draggable:!0,onDragStart:()=>d(U),onDragEnter:()=>u(U),onDragEnd:h,onDragOver:E=>E.preventDefault(),children:[m.jsx("span",{className:"se-handle",children:""}),m.jsx("span",{className:"se-index",children:U+1}),m.jsx("span",{className:"se-badge",style:{background:v},children:x}),m.jsx("span",{className:"se-node-title",children:y.title||`Node ${y.id}`})]},y.id)})})]})})},$Ze=[{key:"graph",label:"Graph"},{key:"article",label:"Article"},{key:"sequence",label:"Sequence"},{key:"canvas",label:"Canvas"},{key:"chat",label:"Chat"}],HZe=({view:e,onChangeView:t,threadTitle:n,onPrevThread:r,onNextThread:i,hasPrev:s,hasNext:o})=>m.jsxs("div",{className:"view-tab-bar",children:[m.jsxs("div",{className:"vtb-thread-nav",children:[m.jsx("button",{className:"vtb-arrow",disabled:!s,onClick:r,"aria-label":"Previous thread",children:""}),m.jsx("span",{className:"vtb-thread-title",title:n,children:n}),m.jsx("button",{className:"vtb-arrow",disabled:!o,onClick:i,"aria-label":"Next thread",children:""})]}),m.jsx("div",{className:"vtb-tabs",children:$Ze.map(({key:a,label:l})=>m.jsx("button",{className:`vtb-tab ${e===a?"vtb-tab--active":""}`,onClick:()=>t(a),children:l},a))})]}),bW=[{value:0,label:"ROOT"},{value:1,label:"EVIDENCE"},{value:2,label:"REFERENCE"},{value:3,label:"CONTEXT"},{value:4,label:"EXAMPLE"},{value:5,label:"COUNTERPOINT"},{value:6,label:"SYNTHESIS"}],VZe={ROOT:"Root Title",EVIDENCE:"Source",EXAMPLE:"Example Title",COUNTERPOINT:"Argument",REFERENCE:"Title",CONTEXT:"Title",SYNTHESIS:"Title"},WZe={ROOT:"Describe this root node...",EVIDENCE:"Present your evidence...",EXAMPLE:"Describe this example...",COUNTERPOINT:"Explain the counterpoint...",REFERENCE:"Write reference content...",CONTEXT:"Provide context...",SYNTHESIS:"Write your synthesis..."},GZe=({editor:e})=>{const[t,n]=T.useState(null);if(!e)return null;const r=({onClick:s,active:o,children:a})=>m.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:a}),i=()=>m.jsx("span",{className:"ne-toolbar-divider"});return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"ne-toolbar",children:[m.jsx(r,{onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold"),children:"B"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic"),children:"I"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike"),children:"S"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),active:e.isActive("heading",{level:1}),children:"H1"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2}),children:"H2"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3}),children:"H3"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList"),children:"Bullet"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList"),children:"Ordered"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote"),children:"Quote"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock"),children:"Code"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>n("link"),active:e.isActive("link"),children:"Link"}),m.jsx(r,{onClick:()=>n("youtube"),children:"YouTube"})]}),t==="link"&&m.jsx(U4,{label:"Enter URL",placeholder:"https://example.com",onSubmit:s=>{e.chain().focus().extendMarkRange("link").setLink({href:s}).run(),n(null)},onCancel:()=>n(null)}),t==="youtube"&&m.jsx(U4,{label:"Enter YouTube URL",placeholder:"https://youtube.com/watch?v=...",onSubmit:s=>{e.commands.setYoutubeVideo({src:s}),n(null)},onCancel:()=>n(null)})]})},XZe=({thread:e,selectedNode:t,onSubmit:n,onCancel:r})=>{var x;const i=(t==null?void 0:t.type)==="thread",[s,o]=T.useState(()=>i?"0":"1"),[a,l]=T.useState(""),[f,c]=T.useState(""),[d,u]=T.useState(!1),h=((x=bW[Number(s)])==null?void 0:x.label)||"EVIDENCE",g=lI({extensions:[vI,UI.configure({openOnClick:!1}),EI.configure({width:640,height:360}),kI.configure({placeholder:WZe[h]||"Write your content..."})],content:"",onUpdate:({editor:v})=>{u(!v.isEmpty)}}),y=()=>{if(!g||!a.trim())return;const v=g.getHTML();let E,k;switch(h){case"ROOT":E=JSON.stringify({title:a,description:v,keywords:f.split(",").map(S=>S.trim()).filter(Boolean)}),k=a;break;case"EVIDENCE":E=JSON.stringify({point:v,source:a}),k=g.getText().substring(0,100);break;case"EXAMPLE":E=JSON.stringify({title:a,description:v}),k=g.getText().substring(0,100);break;case"COUNTERPOINT":E=JSON.stringify({argument:a,explanation:v}),k=a;break;default:E=v,k=g.getText().substring(0,100)}k.length===100&&(k+="...");const M=i?null:parseInt(String(t.id).replace("node-",""),10);n({id:t.id,type:t.type,newNode:{title:a,content:E,description:k,type:Number(s),parentId:M,threadId:e.id,metadata:{title:a||"New Node",description:k,content:E,type:h}}})},U=a.trim()&&g&&d;return m.jsxs("div",{className:"ne-page",children:[m.jsxs("header",{className:"ne-header",children:[m.jsx("button",{className:"ne-back",onClick:r,children:" Back to graph"}),m.jsx("button",{className:"ne-submit",disabled:!U,onClick:y,children:"Add Node"})]}),m.jsx("div",{className:"ne-body",children:m.jsxs("div",{className:"ne-column",children:[m.jsx("select",{className:"ne-select",value:s,onChange:v=>o(v.target.value),children:bW.filter(v=>i||v.label!=="ROOT").map(v=>m.jsx("option",{value:v.value,children:v.label},v.value))}),m.jsx("input",{className:"ne-title-input",type:"text",placeholder:VZe[h]||"Title",value:a,onChange:v=>l(v.target.value)}),h==="ROOT"&&m.jsx("input",{className:"ne-keywords-input",type:"text",placeholder:"Keywords (comma-separated)",value:f,onChange:v=>c(v.target.value)}),m.jsxs("div",{children:[m.jsx(GZe,{editor:g}),m.jsx("div",{className:"ne-editor-wrapper",children:m.jsx(hw,{editor:g})})]})]})})]})};function KZe(){var $o,gs,js;const[e,t]=T.useState(null),[n,r]=T.useState(null),[i,s]=T.useState([]),[o,a]=T.useState(""),[l,f]=T.useState(""),[c,d]=T.useState(""),[u,h]=T.useState(!1),[g,y]=T.useState(null),[U,x]=T.useState(null);T.useState(""),T.useState(0);const[v,E]=T.useState(null),[k,M]=T.useState("");T.useState({});const[S,A]=T.useState(null),[I,R]=T.useState(!1),[D,_]=T.useState(""),[P,$]=T.useState(!1),[L,B]=T.useState(!1),[V,z]=T.useState(!1),[G,W]=T.useState(!1),[F,K]=T.useState([]),[q,Y]=T.useState(!1),ae=T.useRef(null),[ge,he]=T.useState(!1),[ce,ie]=T.useState("graph"),[we,Ee]=T.useState(null),[_e,Fe]=T.useState(null),He=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"];T.useEffect(()=>{G&&De()},[]);async function ve(){try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7A69",chainName:"Hardhat Local",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["http://127.0.0.1:8545"]}]}),!0}catch(ke){return console.error("Error setting up network:",ke),!1}}async function De(){if(typeof window.ethereum<"u")try{console.log("Connecting to wallet and setting up contract...");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7A69"}]})}catch(Ut){if(Ut.code===4902){if(!await ve())return}else{console.error("Failed to switch network:",Ut);return}}const ke=await window.ethereum.request({method:"eth_requestAccounts"});t(ke[0]);const it=new s0e("http://127.0.0.1:8545"),ze=await it.getSigner(ke[0]);console.log("Setting up contract with address:",rU.canonThread);const Yt=new Nh(rU.canonThread,m0e.abi,ze);try{if(await it.getCode(rU.canonThread)==="0x"){console.error("No contract deployed at the specified address");return}}catch(Ut){console.error("Error verifying contract deployment:",Ut);return}r(Yt),console.log("Contract setup complete");const Sn=new Nh(rU.canonToken,k0e.abi,ze);E(Sn),y(null),await qt(),window.ethereum.on("accountsChanged",Ut=>{Ut.length===0?(t(null),r(null)):(t(Ut[0]),De())}),window.ethereum.on("chainChanged",()=>{window.location.reload()})}catch(ke){console.error("Error connecting to wallet:",ke)}}async function Ae(ke){try{const it=new FormData,ze=new Blob([JSON.stringify(ke)],{type:"application/json"});it.append("path",ze);const Ut=(await(await fetch("http://localhost:5001/api/v0/add",{method:"POST",body:it})).json()).Hash;if(!Ut||Ut.length!==46||!Ut.startsWith("Qm"))throw new Error("Invalid IPFS hash format. Must start with Qm and be 46 characters long.");return Ut}catch(it){throw console.error("Error uploading to IPFS:",it),it}}async function ut(){try{if(h(!0),y(null),!o.trim()){y("Title is required"),h(!1);return}if(console.log("Creating thread with content:",{title:o,description:l,content:c}),G&&n){const ke={title:o,description:l,createdAt:new Date().toISOString(),version:1},it={title:o,content:c,lastUpdated:new Date().toISOString()},ze=await Ae(ke),Yt=await Ae(it);await(await n.createThread(ze,Yt)).wait();const Ut=await n.threadCounter();a(""),f(""),d(""),R(!1),await qt(),A(Number(Ut))}else{const ke=await Ir.createThread({title:o,description:l,content:"",metadata:{createdAt:new Date().toISOString(),version:1,title:o,description:l}});console.log("Created thread:",ke),a(""),f(""),d(""),R(!1),await ye(),A(ke.id),ie("article")}}catch(ke){console.error("Error creating thread:",ke),y("Failed to create thread: "+ke.message)}finally{h(!1)}}async function Mt(ke){try{const it=await fetch(`http://localhost:8080/ipfs/${ke}`);if(!it.ok)throw new Error(`IPFS request failed with status ${it.status}`);return await it.json()}catch(it){console.error("Error fetching from IPFS:",it);try{const ze=await fetch(`http://localhost:5001/api/v0/cat?arg=${ke}`);if(!ze.ok)throw new Error(`IPFS API request failed with status ${ze.status}`);return await ze.json()}catch(ze){return console.error("Error fetching from IPFS API:",ze),null}}}async function qt(){if(!n||!e){console.log("Contract or account not initialized:",{contract:!!n,account:!!e});return}try{console.log("Loading on-chain threads...");const ke=await n.threadCounter();if(console.log("Thread count:",ke),ke>0){const ze=Number(ke),Yt=await n.threads(ze);if(Yt&&Yt.creator!=="0x0000000000000000000000000000000000000000"){const Sn=await Mt(Yt.metadataHash),Ut=await Mt(Yt.contentHash),Rn={...Yt,metadata:Sn,content:Ut,nodes:[],id:ze,hasVoted:!1,votesFor:Kc("0"),votesAgainst:Kc("0"),proposalDeadline:0,hasActiveProposal:!1};s([Rn]),A(ze),(async()=>{const Gi=await n.nodeCounter(),_a=await n.proposalCounter(),cd=Math.floor(Date.now()/1e3),Ho=await n.hasVoted(ze,e),Vo=[];for(let Ni=1;Ni<=Gi;Ni++){const Ln=await n.nodes(Ni);if(Ln&&Ln.threadId.toString()===ze.toString()&&Ln.contentHash!==""){const Bc=await Mt(Ln.metadataHash),c0=await Mt(Ln.contentHash),c6=await n.hasVoted(Ni,e);Vo.push({...Ln,metadata:Bc,content:c0,id:Ni,type:Number(Ln.nodeType),hasVoted:c6})}}let go=Kc("0"),Pa=Kc("0"),Rr=0,qn=!1;for(let Ni=1;Ni<=_a;Ni++){const Ln=await n.proposals(Ni);if(Ln.threadId.toString()===ze.toString()&&!Ln.executed){go=Ln.votesFor,Pa=Ln.votesAgainst,Rr=Number(Ln.deadline),qn=cd<Rr+60;break}}s(Ni=>[{...Ni[0],nodes:Vo,hasVoted:Ho,votesFor:go,votesAgainst:Pa,proposalDeadline:Rr,hasActiveProposal:qn}])})()}}(async()=>{const ze=await n.nodeCounter(),Yt=await n.proposalCounter(),Sn=Math.floor(Date.now()/1e3);for(let Ut=ke-1;Ut>=1;Ut--){const Rn=await n.threads(Ut);if(Rn&&Rn.creator!=="0x0000000000000000000000000000000000000000"){const Wi=await Mt(Rn.metadataHash),Gi=await Mt(Rn.contentHash);s(Rr=>[...Rr,{...Rn,metadata:Wi,content:Gi,nodes:[],id:Ut,hasVoted:!1,votesFor:Kc("0"),votesAgainst:Kc("0"),proposalDeadline:0,hasActiveProposal:!1}]);const _a=await n.hasVoted(Ut,e),cd=[];for(let Rr=1;Rr<=ze;Rr++){const qn=await n.nodes(Rr);if(qn&&qn.threadId.toString()===Ut.toString()&&qn.contentHash!==""){const Ni=await Mt(qn.metadataHash),Ln=await Mt(qn.contentHash),Bc=await n.hasVoted(Rr,e);cd.push({...qn,metadata:Ni,content:Ln,id:Rr,type:Number(qn.nodeType),hasVoted:Bc})}}let Ho=Kc("0"),Vo=Kc("0"),go=0,Pa=!1;for(let Rr=1;Rr<=Yt;Rr++){const qn=await n.proposals(Rr);if(qn.threadId.toString()===Ut.toString()&&!qn.executed){Ho=qn.votesFor,Vo=qn.votesAgainst,go=Number(qn.deadline),Pa=Sn<go+60;break}}s(Rr=>Rr.map(qn=>qn.id===Ut?{...qn,nodes:cd,hasVoted:_a,votesFor:Ho,votesAgainst:Vo,proposalDeadline:go,hasActiveProposal:Pa}:qn))}}})()}catch(ke){console.error("Error loading threads:",ke),y("Failed to load on-chain threads: "+ke.message)}}const Kt=ke=>{x(ke)},Zn=()=>{x(null)},Vi=async(ke,it)=>{if(!(!n||!v||!e))try{h(!0),y(null);const ze=Kc(k);await(await v.approve(n.target,ze)).wait(),await(await n.vote(ke,it,ze)).wait(),M(""),x(null),qt()}catch(ze){console.error("Error voting:",ze),y("Error voting: "+(ze.message||"Unknown error occurred"))}finally{h(!1)}},Ls=async ke=>{var it;if(!(!n||!v||!e))try{h(!0),y(null);const ze=await n.MINIMUM_STAKE();console.log("Minimum stake required:",Qle(ze),"CANON");const Yt={title:`Update Proposal for ${ke.type==="thread"?"Thread":"Node"} ${ke.id}`,description:"Proposal to update content",createdAt:new Date().toISOString()},Sn={content:((it=ke.content)==null?void 0:it.content)||"",lastUpdated:new Date().toISOString()},Ut=await Ae(Yt),Rn=await Ae(Sn);console.log("Approving tokens..."),await(await v.approve(n.target,ze)).wait(),console.log("Creating proposal..."),await(await n.proposeUpdate(ke.id,Ut,Rn,ze)).wait(),console.log("Proposal created"),await qt(),x(null)}catch(ze){console.error("Error creating proposal:",ze),y("Error creating proposal: "+(ze.message||"Unknown error occurred"))}finally{h(!1)}},Os=async({nodeId:ke,threadId:it},{title:ze,content:Yt})=>{try{await Ir.updateNode(it,ke,{title:ze,content:Yt}),await ye()}catch(Sn){console.error("Error updating node:",Sn),y("Failed to update node: "+Sn.message)}},Ti=async ke=>{if(G&&(!n||!e)){console.log("No contract or account for on-chain operation");return}const{id:it,newNode:ze}=ke;if(console.log("Creating node with data:",ze),!(ze!=null&&ze.title)||!(ze!=null&&ze.content)){console.log("Missing node data");return}try{if(h(!0),y(null),G){const Yt={title:ze.title,description:ze.content.substring(0,100)+(ze.content.length>100?"...":""),createdAt:new Date().toISOString()},Sn={content:ze.content,lastUpdated:new Date().toISOString()},Ut=await Ae(Yt),Rn=await Ae(Sn);await(await n.createNode(it,Ut,Rn,ze.type)).wait(),await qt()}else{console.log("Creating off-chain node with type:",ze.type);const Yt=typeof ze.type=="number"?He[ze.type]:ze.type||He[0],Sn=await Ir.createNode({threadId:ze.threadId,title:ze.title,content:ze.content,nodeType:Yt,parentId:ze.parentId,metadata:{title:ze.title,description:ze.content.substring(0,100)+(ze.content.length>100?"...":""),createdAt:new Date().toISOString()}}),{nodes:Ut,edges:Rn}=await Ir.getThreadNodes(ze.threadId),Wi={...ke,nodes:Ut.map(Gi=>({...Gi,id:Gi.id,type:He.indexOf(Gi.node_type),content:Gi.content,parent_id:Gi.parent_id})),edges:Rn};await ye()}x(null)}catch(Yt){console.error("Error creating node:",Yt),y("Failed to create node: "+Yt.message)}finally{h(!1)}},ye=async()=>{try{const ke=await Ir.getThreads();console.log("Loaded threads:",ke);const it=await Promise.all(ke.map(async ze=>{var Ut;const{nodes:Yt,edges:Sn}=await Ir.getThreadNodes(ze.id);return console.log(`Loaded nodes for thread ${ze.id}:`,Yt),{...ze,content:ze.content||((Ut=ze.metadata)==null?void 0:Ut.content),nodes:Yt.map(Rn=>{var Wi;return{...Rn,content:Rn.content||((Wi=Rn.metadata)==null?void 0:Wi.content),type:He.indexOf(Rn.node_type)}}),edges:Sn}}));console.log("Threads with nodes:",it),K(it),!S&&it.length>0&&A(it[0].id)}catch(ke){console.error("Error loading off-chain threads:",ke),y("Failed to load off-chain threads")}};T.useEffect(()=>{G?De():ye()},[]);const Me=G?i:F;T.useEffect(()=>{n&&G&&qt()},[n]);const Ke=Me.find(ke=>ke.id===S),_t=Ke?[Ke]:[],Tt=Me.findIndex(ke=>ke.id===S),Vn=Tt>0,Ii=Tt>=0&&Tt<Me.length-1,ti=()=>{Vn&&A(Me[Tt-1].id)},Zt=()=>{Ii&&A(Me[Tt+1].id)},$r=T.useMemo(()=>D?Me.filter(ke=>{var it,ze;return(ze=(it=ke.metadata)==null?void 0:it.title)==null?void 0:ze.toLowerCase().includes(D.toLowerCase())}):[],[Me,D]),vn=T.useCallback(()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),B(!1)):(document.documentElement.requestFullscreen().catch(ke=>{console.error(`Error attempting to enable full-screen mode: ${ke.message}`)}),B(!0))},[]),wr=async()=>{if(G)try{const ke=await fetch("http://localhost:5001/api/v0/id",{method:"POST",headers:{"Content-Type":"application/json"}});if(!ke.ok)throw new Error(`IPFS request failed with status ${ke.status}`);const it=await ke.json();if(it&&it.ID)return Y(!0),!0;throw new Error("Invalid IPFS response")}catch(ke){return ke.message.includes("Failed to fetch")?console.error("IPFS daemon not running"):console.error("IPFS connection failed:",ke),Y(!1),!1}};T.useEffect(()=>{if(G){wr();const ke=setInterval(wr,3e4);return()=>clearInterval(ke)}else Y(!1)},[G]),T.useEffect(()=>{function ke(it){ae.current&&!ae.current.contains(it.target)&&z(!1)}return document.addEventListener("mousedown",ke),()=>{document.removeEventListener("mousedown",ke)}},[]);const Hr=async ke=>{const it=ke.target.value;_(it),$(!!it)},zo=async ke=>{if(ke.key==="Enter"&&D.trim()){ke.preventDefault();try{he(!0);const it=await Ir.searchThreads(D);if(it.length===0){const ze=await Ir.generateThread(D);A(ze.id),await ye(),_(""),$(!1)}else K(ze=>{const Yt=new Set(ze.map(Ut=>Ut.id)),Sn=it.filter(Ut=>!Yt.has(Ut.id));return[...ze,...Sn]}),$(!0)}catch(it){console.error("Search/Generate error:",it),y("Failed to search or generate thread")}finally{he(!1)}}};return m.jsxs("div",{className:"app",children:[g&&m.jsx("div",{className:"error",children:g}),m.jsxs("div",{className:"header",children:[m.jsx("div",{className:"header-center",children:m.jsx("h1",{children:"canonthread"})}),m.jsx("div",{className:"header-right",children:m.jsx("button",{className:"fullscreen-toggle",onClick:vn,title:L?"Exit full screen":"Enter full screen","aria-label":L?"Exit full screen":"Enter full screen"})})]}),m.jsxs("div",{className:"main-content",children:[(Ke||ce==="chat")&&m.jsx(HZe,{view:ce,onChangeView:ie,threadTitle:(($o=Ke==null?void 0:Ke.metadata)==null?void 0:$o.title)||(Ke==null?void 0:Ke.title)||(Ke?`Thread ${Ke.id}`:""),onPrevThread:ti,onNextThread:Zt,hasPrev:Vn,hasNext:Ii}),ce==="editor"&&we&&Ke?m.jsx(XZe,{thread:Ke,selectedNode:we,onSubmit:async ke=>{await Ti(ke),ie("graph"),Ee(null)},onCancel:()=>{ie("graph"),Ee(null)}}):ce==="sequence"&&Ke?m.jsx(zZe,{thread:Ke,onDone:()=>ie("article")}):ce==="canvas"&&Ke?m.jsx(jZe,{thread:Ke}):ce==="article"&&Ke?m.jsx(nEe,{thread:Ke,initialNodeId:_e,onContentChange:ke=>{K(it=>it.map(ze=>ze.id===Ke.id?{...ze,content:ke}:ze))},onUpdateNode:Os,onNodesCreated:async ke=>{await ye(),A(ke)},onThreadCreated:async ke=>{await ye(),A(ke)}}):null,m.jsx("div",{style:{display:ce==="chat"?void 0:"none",flex:1,minHeight:0,overflow:"hidden"},children:m.jsx(wQ,{selectedThreadId:S,onNodesCreated:async ke=>{await ye(),A(ke)},onThreadCreated:async ke=>{await ye(),A(ke)}})}),m.jsxs("div",{className:"visualization-container",style:{display:ce==="graph"?void 0:"none"},children:[m.jsxs("div",{className:"thread-controls",children:[m.jsxs("div",{className:"custom-select",ref:ae,children:[m.jsx("button",{className:"thread-selector",onClick:()=>z(!V),children:S?((js=(gs=Me.find(ke=>ke.id===S))==null?void 0:gs.metadata)==null?void 0:js.title)||`Thread ${S}`:"Select a Thread"}),V&&m.jsxs("div",{className:"dropdown-menu",children:[m.jsx("div",{className:"dropdown-item create-thread-option",onClick:()=>{R(!0),z(!1)},children:"+ Create New Thread"}),Me.map(ke=>{var it;return m.jsx("div",{className:"dropdown-item",onClick:()=>{A(ke.id),z(!1)},children:((it=ke.metadata)==null?void 0:it.title)||`Thread ${ke.id}`},ke.id)})]})]}),m.jsxs("div",{className:"search-container",children:[m.jsx("input",{type:"text",className:"search-input",placeholder:"Search threads...",value:D,onChange:Hr,onKeyDown:zo,onFocus:()=>$(!0)}),P&&D&&m.jsx("div",{className:"search-results",children:ge?m.jsxs("div",{className:"loading-results",children:[m.jsx("div",{className:"loading-spinner"}),m.jsxs("p",{children:['Generating thread for "',D,'"...']})]}):$r.length>0?$r.map(ke=>{var it;return m.jsx("div",{className:"search-result-item",onClick:()=>{A(ke.id),_(""),$(!1)},children:((it=ke.metadata)==null?void 0:it.title)||`Thread ${ke.id}`},ke.id)}):m.jsxs("div",{className:"no-results",children:['Press Enter to generate a new thread about "',D,'"']})})]})]}),S?m.jsx(tY,{children:m.jsx(A5e,{threads:_t,onNodeClick:Kt,onAddNode:Ti,onOpenEditor:ke=>{Ee(ke),ie("editor")},onSelectedNodeChange:Fe,loading:u})}):m.jsx("div",{className:"no-thread-message",children:"Please select a thread from the dropdown"})]}),I&&m.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:m.jsxs("div",{className:"modal-content",onClick:ke=>ke.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Create New Thread"}),m.jsx("button",{className:"close-button",onClick:()=>R(!1),children:""})]}),m.jsx("div",{className:"modal-body",children:m.jsxs("div",{className:"create-thread-form",children:[m.jsx("input",{type:"text",placeholder:"Title",value:o,onChange:ke=>a(ke.target.value),className:"thread-input"}),m.jsx("input",{type:"text",placeholder:"Description",value:l,onChange:ke=>f(ke.target.value),className:"thread-input"}),m.jsxs("div",{className:"form-buttons",children:[m.jsx("button",{className:"cancel-button",onClick:()=>R(!1),disabled:u,children:"Cancel"}),m.jsx("button",{className:"submit-button",onClick:async()=>{await ut(),g||R(!1)},disabled:u||G&&!n,children:u?"Creating...":"Create Thread"})]})]})})]})}),U&&m.jsx(M5e,{node:U,onClose:Zn,onVote:Vi,onCreateProposal:Ls,onAddNode:Ti,loading:u,voteAmount:k,setVoteAmount:M})]})]})}Cle.createRoot(document.getElementById("root")).render(m.jsx(T.StrictMode,{children:m.jsx(KZe,{})}));const joe=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:HBe,encodePngMetadata:$Be,getTEXtChunk:vne},Symbol.toStringTag,{value:"Module"})),YZe=Object.freeze(Object.defineProperty({__proto__:null,alerts:Mne,buttons:Ane,canvasError:Pne,clearCanvasDialog:zne,colorPicker:qne,colors:Yne,commandPalette:rre,confirmDialog:Vne,default:sR,element:Nne,elementLink:kne,encrypted:Gne,errorDialog:jne,errorSplash:Dne,errors:Tne,exportDialog:Bne,fontList:tre,headings:Rne,helpDialog:Fne,hints:_ne,imageExportDialog:Wne,labels:Ene,library:Sne,mermaid:Jne,overwriteConfirm:Qne,publishDialog:$ne,publishSuccessDialog:Hne,quickSearch:ere,roomDialog:One,search:Cne,shareDialog:Lne,stats:Xne,toast:Kne,toolBar:Ine,userList:nre,welcomeScreen:Zne},Symbol.toStringTag,{value:"Module"})),ZZe=Object.freeze(Object.defineProperty({__proto__:null,default:ore,en:ire,kaa:sre},Symbol.toStringTag,{value:"Module"}));export{iy as C,io as R,Oo as S,qe as _,P0e as a,q5 as b,wu as c,AAe as d,ET as e,AX as f,Na as g,E1e as h,oc as i,JZe as j,NI as k,tqe as l,IX as n,EX as r,Ro as s};
